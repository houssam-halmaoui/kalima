<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 06/06/2025 - 19h46</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '11', 'title': 'الملك يهنئ السويد بالعيد الوطني', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%8a%d9%87%d9%86%d8%a6-%d8%a7%d9%84%d8%b3%d9%88%d9%8a%d8%af-%d8%a8%d8%a7%d9%84%d8%b9%d9%8a%d8%af-%d8%a7%d9%84%d9%88%d8%b7%d9%86%d9%8a-1572328.html', 'summary': 'الملك يهنئ السويد بالعيد الوطني. بعث الملك محمد السادس برقية تهنئة إلى الملك كارل كوستاف السادس عشر، عاهل مملكة السويد، والملكة سيلفيا، وذلك بمناسبة احتفال بلادهما بعيدها الوطني. ومما جاء في برقية الملك “يطيب لي، ومملكة السويد تحتفل بعيدها الوطني، أن أعرب لكم عن أحر التهاني، وأصدق المتمنيات لكم، ولأفراد أسرتكم الملكية الجليلة، بدوام الصحة والهناء، وللشعب السويدي باطراد الازدهار  الملك يهنئ السويد بالعيد الوطني     - هسبريس جريدة إلكترونية مغربية .', 'size': 3}, {'id': '115', 'title': 'الملك محمد السادس يهنئ عاهل مملكة السويد والملكة سيلفيا', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/divers/407138.html', 'summary': 'الملك محمد السادس يهنئ عاهل مملكة السويد والملكة سيلفيا. بعث صاحب الجلالة الملك محمد السادس برقية تهنئة إلى صاحب الجلالة الملك كارل كوستاف السادس عشر، عاهل مملكة السويد، وصاحبة الجلالة الملكة سيلفيا، وذلك بمناسبة', 'size': 2}, {'id': '210', 'title': 'الملك يهنئ عاهل السويد بالعيد الوطني لبلاده', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/465775.html', 'summary': 'الملك يهنئ عاهل السويد بالعيد الوطني لبلاده. بعث الملك محمد السادس، برقية تهنئة إلى الملك كارل كوستاف السادس عشر، عاهل مملكة السويد، والملكة سيلفيا، بمناسبة احتفال بلادهما بعيدها الوطني.', 'size': 4}, {'id': '255', 'title': 'الملك محمد السادس يهنئ عاهل مملكة السويد والملكة سيلفيا بمناسبة العيد الوطني لبلدهما', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%85%d8%ad%d9%85%d8%af-%d8%a7%d9%84%d8%b3%d8%a7%d8%af%d8%b3-%d9%8a%d9%87%d9%86%d8%a6-%d8%b9%d8%a7%d9%87%d9%84-%d9%85%d9%85%d9%84%d9%83%d8%a9-%d8%a7%d9%84%d8%b3%d9%88-3/', 'summary': 'الملك محمد السادس يهنئ عاهل مملكة السويد والملكة سيلفيا بمناسبة العيد الوطني لبلدهما. بعث الملك محمد السادس برقية تهنئة إلى الملك كارل كوستاف السادس عشر، عاهل مملكة السويد، والملكة سيلفيا، وذلك بمناسبة احتفال بلادهما بعيدها الوطني. ومما جاء في برقية الملك محمد السادس “يطيب لي، ومملكة السويد تحتفل بعيدها الوطني، أن أعرب لكم عن أحر التهاني، وأصدق المتمنيات لكم، ولأفراد أسرتكم الملكية الجليلة، بدوام الصحة والهناء، …  الملك محمد السادس يهنئ عاهل مملكة السويد والملكة سيلفيا بمناسبة العيد الوطني لبلدهما     .', 'size': 3}], 'main_title': 'الملك يهنئ عاهل السويد بالعيد الوطني لبلاده'}, {'community_id': '1', 'articles': [{'id': '70', 'title': 'مخاوف من تزايد العنف الجهادي يغذي اتساع رقعة الاضطرابات في منطقة الساحل', 'source': 'alyaoum24.com', 'link': 'https://alyaoum24.com/1969579.html', 'summary': 'مخاوف من تزايد العنف الجهادي يغذي اتساع رقعة الاضطرابات في منطقة الساحل. كثف الجهاديون هجماتهم في منطقة الساحل خلال الأسابيع الأخيرة حيث نفذوا عمليات دموية في مالي وتوغلات في مدن رئيسية في بوركينا فاسو وألحقوا خسائر كبيرة بالجيش في النيجر. تحاول المجالس العسكرية الحاكمة في بلدان الساحل الثلاثة والتي تعهدت خلال الانقلابات التي أوصلتها إلى السلطة جعل الأمن أولوية، منع تقدم الجهاديين الذين باتوا يهددون البلدان المجاورة', 'size': 2}, {'id': '184', 'title': 'يغذي المخاوف من اتساع رقعة الاضطرابات.. عنف الجماعات المتطرفة يتزايد بمنطقة الساحل', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%b9%d9%86%d9%81-%d8%a7%d9%84%d8%ac%d9%85%d8%a7%d8%b9%d8%a7%d8%aa-%d8%a7%d9%84%d9%85%d8%aa%d8%b7%d8%b1%d9%81%d8%a9-%d9%8a%d8%aa%d8%b2%d8%a7%d9%8a%d8%af-%d9%81%d9%8a-%d9%85%d9%86%d8%b7%d9%82%d8%a9/', 'summary': 'يغذي المخاوف من اتساع رقعة الاضطرابات.. عنف الجماعات المتطرفة يتزايد بمنطقة الساحل. كثف الجهاديون هجماتهم بمنطقة الساحل، خلال الأسابيع الأخيرة، حيث نفذوا عمليات دموية في مالي وتوغلات في مدن رئيسية في بوركينا فاسو وألحقوا خسائر كبيرة بالجيش في النيجر. وتحاول المجالس العسكرية الحاكمة في بلدان الساحل الثلاثة، والتي تعهدت خلال الانقلابات التي أوصلتها إلى السلطة جعل الأمن أولوية، منع تقدم الجهاديين الذين باتوا يهددون البلدان المجاورة في  يغذي المخاوف من اتساع رقعة الاضطرابات.. عنف الجماعات المتطرفة يتزايد بمنطقة الساحل     .', 'size': 2}], 'main_title': 'مخاوف من تزايد العنف الجهادي يغذي اتساع رقعة الاضطرابات في منطقة الساحل'}, {'community_id': '4', 'articles': [{'id': '73', 'title': 'ارتفاع الأسعار وتراجع نفقات الأسر أبرز مؤشر لأداء الاقتصاد في المغرب لسنة 2024 حسب مندوبية التخطيط', 'source': 'alyaoum24.com', 'link': 'https://alyaoum24.com/1969548.html', 'summary': 'ارتفاع الأسعار وتراجع نفقات الأسر أبرز مؤشر لأداء الاقتصاد في المغرب لسنة 2024 حسب مندوبية التخطيط. أظهرت نتائج الحسابات السنوية الصادرة عن المندوبية السامية للتخطيط، أن سنة 2024 تميزت بارتفاع في المستوى العام للأسعار بنسبة 4,1%، نتيجة تباطؤ وتيرة النمو بالقيمة الاسمية للناتج الداخلي الإجمالي، الذي بلغ 7,9% مقابل 11% خلال سنة 2023. ورغم هذا التباطؤ النسبي، سجل الطلب الداخلي تحسناً ملحوظاً، حيث ارتفع بنسبة 5,8% مقارنة بـ4,9% في السنة الماضية،', 'size': 2}, {'id': '212', 'title': 'مندوبية التخطيط: النمو الاقتصادي الوطني سجل تحسنا سنة 2024', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/465778.html', 'summary': 'مندوبية التخطيط: النمو الاقتصادي الوطني سجل تحسنا سنة 2024. أفادت المندوبية السامية للتخطيط بأن نتائج الحسابات الوطنية لسنة 2024، أظهرت أن النمو الاقتصادي الوطني سجل تحسنا بلغ 3,8 في المائة عوض 3,7 في المائة سنة 2023.', 'size': 3}, {'id': '237', 'title': 'مندوبية التخطيط: تحسن النمو الاقتصادي الوطني خلال 2024', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/222200/', 'summary': 'مندوبية التخطيط: تحسن النمو الاقتصادي الوطني خلال 2024. كواليس اليوم أفادت المندوبية السامية للتخطيط بأن نتائج الحسابات الوطنية لسنة 2024 أظهرت أن النمو الاقتصادي الوطني سجل تحسنا بلغ 3,8 في المائة عوض 3,7 في المائة سنة 2023. وأوضحت المندوبية، في مذكرة إخبارية حول الوضعية الاقتصادية لسنة 2024، أن هذا النمو، مدفوعا بالطلب الداخلي، تحقق في سياق اتسم بارتفاع قوي للتضخم وتفاقم الحاجة', 'size': 4}, {'id': '256', 'title': 'مندوبية التخطيط: نمو اقتصادي بنسبة 3,8 في المائة سنة 2024', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d9%85%d9%86%d8%af%d9%88%d8%a8%d9%8a%d8%a9-%d8%a7%d9%84%d8%aa%d8%ae%d8%b7%d9%8a%d8%b7-%d9%86%d9%85%d9%88-%d8%a7%d9%82%d8%aa%d8%b5%d8%a7%d8%af%d9%8a-%d8%a8%d9%86%d8%b3%d8%a8%d8%a9-38-%d9%81%d9%8a/', 'summary': 'مندوبية التخطيط: نمو اقتصادي بنسبة 3,8 في المائة سنة 2024. أفادت المندوبية السامية للتخطيط، بأن نتائج الحسابات الوطنية لسنة 2024 أظهرت أن النمو الاقتصادي الوطني سجل تحسنا بلغ 3,8 في المائة عوض 3,7 في المائة سنة 2023. وأوضحت المندوبية، في مذكرة إخبارية حول الوضعية الاقتصادية لسنة 2024، أن هذا النمو، مدفوعا بالطلب الداخلي، تحقق في سياق اتسم بارتفاع قوي للتضخم وتفاقم الحاجة إلى …  مندوبية التخطيط: نمو اقتصادي بنسبة 3,8 في المائة سنة 2024     .', 'size': 3}], 'main_title': 'مندوبية التخطيط: تحسن النمو الاقتصادي الوطني خلال 2024'}, {'community_id': '3', 'articles': [{'id': '76', 'title': 'الملك يؤدي صلاة عيد الأضحى بمسجد الحسن الثاني بتطوان', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/201819', 'summary': 'الملك يؤدي صلاة عيد الأضحى بمسجد الحسن الثاني بتطوان.  أعلنت وزارة القصور الملكية والتشريفات والأوسمة أن أمير المؤمنين الملك محمد السادس، سيؤدي غدا السبت، صلاة عيد الأضحى المبارك، بمسجد الحسن الثاني بمدينة تطوان. وفي ما يلي نص بلاغ وزارة القصور الملكية والتشريفات والأوسمة: “تعلن وزارة القصور الملكية والتشريفات والأوسمة أن أمير المؤمنين صاحب الجلالة الملك محمد السادس نصره الله وأيده، سيؤدي صلاة عيد', 'size': 5}, {'id': '147', 'title': 'الملك يؤدي صلاة عيد الأضحى بمدينة تطوان', 'source': 'assabah.ma', 'link': 'https://assabah.ma/851929.html', 'summary': 'الملك يؤدي صلاة عيد الأضحى بمدينة تطوان. أعلنت وزارة القصور الملكية والتشريفات والأوسمة أن أمير المؤمنين الملك محمد السادس سيؤدي غدا السبت، صلاة عيد الأضحى المبارك، بمسجد الحسن الثاني بمدينة تطوان. وفي ما يلي نص بلاغ وزارة القصور الملكية والتشريفات والأوسمة: “تعلن وزارة القصور الملكية والتشريفات والأوسمة أن أمير المؤمنين صاحب الجلالة الملك محمدأكمل القراءة » المقالة الملك يؤدي صلاة عيد الأضحى بمدينة تطوان  .', 'size': 5}, {'id': '208', 'title': 'الملك يؤدي غدا السبت صلاة عيد الأضحى بمسجد الحسن الثاني بتطوان', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/465780.html', 'summary': 'الملك يؤدي غدا السبت صلاة عيد الأضحى بمسجد الحسن الثاني بتطوان. أعلنت وزارة القصور الملكية والتشريفات والأوسمة أن الملك محمد السادس، سيؤدي غدا السبت، صلاة عيد الأضحى المبارك، بمسجد الحسن الثاني بمدينة تطوان. وفي ما يلي نص بلاغ وزارة القصور الملكية والتشريفات والأوسمة: “تعلن وزارة القصور الملكية والتشريفات والأوسمة أن أمير المؤمنين صاحب الجلالة الملك محمد السادس نصره الله وأيده، سيؤدي صلاة عيد الأضحى المبارك، يوم …', 'size': 5}, {'id': '239', 'title': 'أمير المؤمنين يؤدي صلاة عيد الأضحى المبارك بمسجد الحسن الثاني بمدينة تطوان', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/222195/', 'summary': 'أمير المؤمنين يؤدي صلاة عيد الأضحى المبارك بمسجد الحسن الثاني بمدينة تطوان. الرباط – أعلنت وزارة القصور الملكية والتشريفات والأوسمة أن أمير المؤمنين صاحب الجلالة الملك محمد السادس، نصره الله، سيؤدي غدا السبت، صلاة عيد الأضحى المبارك، بمسجد الحسن الثاني بمدينة تطوان. وفي ما يلي نص بلاغ وزارة القصور الملكية والتشريفات والأوسمة: “تعلن وزارة القصور الملكية والتشريفات والأوسمة أن أمير المؤمنين صاحب الجلالة الملك محمد السادس نصره', 'size': 5}, {'id': '244', 'title': 'الملك محمد السادس سيؤدي صلاة العيد بمسجد الحسن الثاني بتطوان', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%85%d8%ad%d9%85%d8%af-%d8%a7%d9%84%d8%b3%d8%a7%d8%af%d8%b3-%d8%b3%d9%8a%d8%a4%d8%af%d9%8a-%d8%b5%d9%84%d8%a7%d8%a9-%d8%a7%d9%84%d8%b9%d9%8a%d8%af-%d8%a8%d9%85%d8%b3/', 'summary': 'الملك محمد السادس سيؤدي صلاة العيد بمسجد الحسن الثاني بتطوان. المساء اليوم: أعلنت وزارة القصور الملكية والتشريفات والأوسمة أن الملك محمد السادس، سيؤدي غدا السبت، صلاة عيد الأضحى المبارك، بمسجد الحسن الثاني بمدينة تطوان. وفي ما يلي نص بلاغ وزارة القصور الملكية والتشريفات والأوسمة: “تعلن', 'size': 5}], 'main_title': 'الملك يؤدي صلاة عيد الأضحى بمسجد الحسن الثاني بتطوان'}, {'community_id': '5', 'articles': [{'id': '125', 'title': 'الملك محمد السادس يعزي الرئيس الزامبي', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/407152.html', 'summary': 'الملك محمد السادس يعزي الرئيس الزامبي. بعث صاحب الجلالة الملك محمد السادس، برقية تعزية إلى رئيس جمهورية زامبيا، هاكايندي هيشيليما، وذلك على إثر وفاة الرئيس السابق، إدغار شاغوا لونغو.وقال جلالة الملك،', 'size': 2}, {'id': '233', 'title': 'الملك يعزي رئيس زامبيا إثر وفاة الرئيس الأسبق إدغار شاغوا لونغو', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/222216/', 'summary': 'الملك يعزي رئيس زامبيا إثر وفاة الرئيس الأسبق إدغار شاغوا لونغو. و م ع بعث صاحب الجلالة الملك محمد السادس برقية تعزية ومواساة إلى رئيس جمهورية زامبيا، هاكيندي هيشيليما، إثر وفاة الرئيس الأسبق إدغار شاغوا لونغو. وأعرب جلالة الملك، في هذه البرقية، عن بالغ تأثره بنبأ وفاة الرئيس الأسبق، مقدما هيشيليما، ولعائلة الفقيد، وللشعب الزامبي، أحر تعازيه وصادق مواساته في هذا المصاب الأليم. واستحضر جلالة', 'size': 2}], 'main_title': 'الملك محمد السادس يعزي الرئيس الزامبي'}, {'community_id': '6', 'articles': [{'id': '139', 'title': '“مرحبا 2025”.. تعزيز العرض الخاص بالنقل البحري للمسافرين بين المغرب وجنوب أوروبا', 'source': 'kifache.com', 'link': 'https://kifache.com/%d9%85%d8%b1%d8%ad%d8%a8%d8%a7-2025-%d8%aa%d8%b9%d8%b2%d9%8a%d8%b2-%d8%a7%d9%84%d8%b9%d8%b1%d8%b6-%d8%a7%d9%84%d8%ae%d8%a7%d8%b5-%d8%a8%d8%a7%d9%84%d9%86%d9%82%d9%84-%d8%a7%d9%84%d8%a8%d8%ad/', 'summary': '“مرحبا 2025”.. تعزيز العرض الخاص بالنقل البحري للمسافرين بين المغرب وجنوب أوروبا. أنهت وزارة النقل واللوجيستيك إلى علم كافة المسافرين عبر موانئ المملكة، خاصة المغاربة المقيمين بالخارج، أنه في إطار عملية مرحبا لسنة 2025، التي تنظم تحت الرعاية السامية لصاحب الجلالة الملك محمد السادس، تم تعزيز العرض الخاص بالنقل البحري للمسافرين بين المغرب وجنوب أوروبا، وذلك من أجل الاستجابة للتدفقات المنتظرة خلال الفترة الصيفية لهذه السنة. وأوضح', 'size': 2}, {'id': '205', 'title': 'عملية “مرحبا 2025”.. تعزيز العرض الخاص بالنقل البحري للمسافرين بين المغرب وجنوب أوروبا', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/465785.html', 'summary': 'عملية “مرحبا 2025”.. تعزيز العرض الخاص بالنقل البحري للمسافرين بين المغرب وجنوب أوروبا. أنهت وزارة النقل واللوجيستيك إلى علم كافة المسافرين عبر موانئ المملكة، خاصة المغاربة المقيمين بالخارج، أنه في إطار عملية مرحبا لسنة 2025، تم تعزيز العرض الخاص بالنقل البحري للمسافرين بين المغرب وجنوب أوروبا، وذلك من أجل الاستجابة للتدفقات المنتظرة خلال الفترة الصيفية لهذه السنة. وأوضح بلاغ للوزارة أنه تمت، في هذا الصدد، تعبئة أسطول يتكون …', 'size': 2}, {'id': '235', 'title': 'عملية “مرحبا 2025”.. تعزيز العرض الخاص بالنقل البحري للمسافرين', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/222207/', 'summary': 'عملية “مرحبا 2025”.. تعزيز العرض الخاص بالنقل البحري للمسافرين. كواليس اليوم أنهت وزارة النقل واللوجيستيك إلى علم كافة المسافرين عبر موانئ المملكة، خاصة المغاربة المقيمين بالخارج، أنه في إطار عملية مرحبا لسنة 2025، التي تنظم تحت الرعاية السامية لصاحب الجلالة الملك محمد السادس، تم تعزيز العرض الخاص بالنقل البحري للمسافرين بين المغرب وجنوب أوروبا، وذلك من أجل الاستجابة للتدفقات المنتظرة خلال الفترة الصيفية', 'size': 3}], 'main_title': 'عملية “مرحبا 2025”.. تعزيز العرض الخاص بالنقل البحري للمسافرين'}, {'community_id': '7', 'articles': [{'id': '140', 'title': 'المخيمات الصيفية.. مؤسسة محمد السادس للأعمال الاجتماعية لموظفي الأمن الوطني تعلن انطلاق التسجيل', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a7%d9%84%d9%85%d8%ae%d9%8a%d9%85%d8%a7%d8%aa-%d8%a7%d9%84%d8%b5%d9%8a%d9%81%d9%8a%d8%a9-%d9%85%d8%a4%d8%b3%d8%b3%d8%a9-%d9%85%d8%ad%d9%85%d8%af-%d8%a7%d9%84%d8%b3%d8%a7%d8%af%d8%b3-%d9%84%d9%84/', 'summary': 'المخيمات الصيفية.. مؤسسة محمد السادس للأعمال الاجتماعية لموظفي الأمن الوطني تعلن انطلاق التسجيل. فتحت مؤسسة محمد السادس للأعمال الاجتماعية لموظفي الأمن الوطني، خلال الأسبوع الجاري، أبواب التسجيل أمام أطفال وأيتام موظفي الأمن الوطني، من أجل الاستفادة من فعاليات النسخة السنوية للمخيمات الصيفية 2025، والتي سيتم تنظيمها خلال الفترة الممتدة ما بين 08 يوليوز و23 غشت 2025 ، بمجموعة من مراكز الاصطياف بمدن أكادير وبوزنيقة وتطوان وإفران. وتنظم هذه', 'size': 2}, {'id': '251', 'title': 'مخيمات نموذجية لأطفال وأيتام موظفي الأمن الوطني.. مؤسسة محمد السادس تواصل دعمها الإنساني', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d9%85%d8%ae%d9%8a%d9%85%d8%a7%d8%aa-%d9%86%d9%85%d9%88%d8%b0%d8%ac%d9%8a%d8%a9-%d9%84%d8%a3%d8%b7%d9%81%d8%a7%d9%84-%d9%88%d8%a3%d9%8a%d8%aa%d8%a7%d9%85-%d9%85%d9%88%d8%b8%d9%81%d9%8a-%d8%a7%d9%84/', 'summary': 'مخيمات نموذجية لأطفال وأيتام موظفي الأمن الوطني.. مؤسسة محمد السادس تواصل دعمها الإنساني. فتحت مؤسسة محمد السادس للأعمال الاجتماعية لموظفي الأمن الوطني، خلال الأسبوع الجاري، أبواب التسجيل أمام أطفال وأيتام موظفي الأمن الوطني من أجل الاستفادة من فعاليات النسخة السنوية للمخيمات الصيفية 2025، والتي سيتم تنظيمها خلال الفترة الممتدة ما بين 08 يوليوز و 23 غشت 2025، بمجموعة من مراكز الاصطياف بمدن أكادير وبوزنيقة وتطوان وإفران، …  مخيمات نموذجية لأطفال وأيتام موظفي الأمن الوطني.. مؤسسة محمد السادس تواصل دعمها الإنساني     .', 'size': 2}], 'main_title': 'المخيمات الصيفية.. مؤسسة محمد السادس للأعمال الاجتماعية لموظفي الأمن الوطني تعلن انطلاق التسجيل'}, {'community_id': '8', 'articles': [{'id': '145', 'title': 'مؤسسة محمد السادس للأعمال الاجتماعية لموظفي الأمن الوطني تنظم المخيمات الصيفية', 'source': 'assabah.ma', 'link': 'https://assabah.ma/851968.html', 'summary': 'مؤسسة محمد السادس للأعمال الاجتماعية لموظفي الأمن الوطني تنظم المخيمات الصيفية. تحت شعار: “مخيمات الأمن الوطني: فضاء لترسيخ القيم الإنسانية”، فتحت مؤسسة محمد السادس للأعمال الاجتماعية لموظفي الأمن الوطني، خلال الأسبوع الجاري، أبواب التسجيل أمام أطفال وأيتام موظفي الأمن الوطني من أجل الاستفادة من فعاليات النسخة السنوية للمخيمات الصيفية 2025، والتي سيتم تنظيمها خلال الفترة الممتدة ماأكمل القراءة » المقالة مؤسسة محمد السادس للأعمال الاجتماعية لموظفي الأمن الوطني تنظم المخيمات الصيفية  .', 'size': 2}, {'id': '272', 'title': 'مخيمات الأمن ترسخ القيم الإنسانية', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d9%85%d8%ae%d9%8a%d9%85%d8%a7%d8%aa-%d8%a7%d9%84%d8%a3%d9%85%d9%86-%d8%aa%d8%b1%d8%b3%d8%ae-%d8%a7%d9%84%d9%82%d9%8a%d9%85-%d8%a7%d9%84%d8%a5%d9%86%d8%b3%d8%a7%d9%86%d9%8a%d8%a9-1572461.html', 'summary': 'مخيمات الأمن ترسخ القيم الإنسانية. تحت شعار: “مخيمات الأمن الوطني: فضاء لترسيخ القيم الإنسانية”، فتحت مؤسسة محمد السادس للأعمال الاجتماعية لموظفي الأمن الوطني، خلال الأسبوع الجاري، أبواب التسجيل أمام أطفال وأيتام موظفي الأمن الوطني من أجل الاستفادة من فعاليات النسخة السنوية للمخيمات الصيفية 2025، والتي سيتم تنظيمها خلال الفترة الممتدة ما بين 08 يوليوز و23 غشت 2025، بمجموعة من مراكز  مخيمات الأمن ترسخ القيم الإنسانية     - هسبريس جريدة إلكترونية مغربية .', 'size': 2}, {'id': '318', 'title': 'مؤسسة محمد السادس للأعمال الاجتماعية لموظفي الأمن الوطني تفتح أبواب التسجيل للمخيمات الصيفية', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/222222/', 'summary': 'مؤسسة محمد السادس للأعمال الاجتماعية لموظفي الأمن الوطني تفتح أبواب التسجيل للمخيمات الصيفية. تحت شعار: “مخيمات الأمن الوطني: فضاء لترسيخ القيم الإنسانية”، فتحت مؤسسة محمد السادس للأعمال الاجتماعية لموظفي الأمن الوطني، خلال الأسبوع الجاري، أبواب التسجيل أمام أطفال وأيتام موظفي الأمن الوطني من أجل الاستفادة من فعاليات النسخة السنوية للمخيمات الصيفية 2025، والتي سيتم تنظيمها خلال الفترة الممتدة ما بين 08 يوليوز و23 غشت 2025، بمجموعة من', 'size': 3}], 'main_title': 'مؤسسة محمد السادس للأعمال الاجتماعية لموظفي الأمن الوطني تفتح أبواب التسجيل للمخيمات الصيفية'}, {'community_id': '2', 'articles': [{'id': '176', 'title': 'الأزمة العالمية في القطاع الصحي: هل المغرب في منأى عن الانهيار؟', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1076232.html', 'summary': 'الأزمة العالمية في القطاع الصحي: هل المغرب في منأى عن الانهيار؟. يُعَدّ النظام الصحي من الركائز الأساسية التي تقوم عليها استدامة المجتمعات البشرية وتقدّمها، إلا أن العالم يشهد اليوم انهيارًا متسارعًا في هذه النظم، نتيجةً لمجموعة من العوامل البنيوية والمترابطة، أبرزها العزوف المتزايد عن المهن الصحية، وشيخوخة القوى العاملة في القطاع، وتفاقم ظاهرة هجرة الأطر الصحية من دول الجنوب نحو الشمال. هذا التدهور يُنذر بأزمة إنسانية ظهرت المقالة الأزمة العالمية في القطاع الصحي: هل المغرب في منأى عن الانهيار؟  .', 'size': 2}, {'id': '187', 'title': 'مزارع المغرب بلا حصاد.. أزمة عمالة موسمية في بلد يعاني البطالة', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d9%85%d8%b2%d8%a7%d8%b1%d8%b9-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d8%a8%d9%84%d8%a7-%d8%ad%d8%b5%d8%a7%d8%af-%d8%a3%d8%b2%d9%85%d8%a9-%d8%b9%d9%85%d8%a7%d9%84%d8%a9-%d9%85%d9%88%d8%b3%d9%85%d9%8a/', 'summary': 'مزارع المغرب بلا حصاد.. أزمة عمالة موسمية في بلد يعاني البطالة. في قلب النمو الزراعي الذي حققته المملكة خلال العقد الأخير، تبرز أزمة غير مرئية لكنها متفاقمة تهدد أحد أعمدة هذا التوسع: اليد العاملة الموسمية. وبينما تُسجّل المنتجات المغربية حضورا متزايدا في الأسواق العالمية، يجد الفاعلون الزراعيون أنفسهم في سباق مع الزمن لتأمين عمال يكفلون استمرارية سلاسل الإنتاج والتصدير. ومع تصاعد التحديات الاجتماعية والقانونية، بات نقص  مزارع المغرب بلا حصاد.. أزمة عمالة موسمية في بلد يعاني البطالة     .', 'size': 2}], 'main_title': 'الأزمة العالمية في القطاع الصحي: هل المغرب في منأى عن الانهيار؟'}, {'community_id': '9', 'articles': [{'id': '289', 'title': 'جلالة الملك يصدر عفوه السامي على 1526 شخصا بمناسبة عيد الأضحى المبارك', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/201825', 'summary': 'جلالة الملك يصدر عفوه السامي على 1526 شخصا بمناسبة عيد الأضحى المبارك.  بمناسبة عيد الأضحى المبارك لهذه السنة 1446 هجرية 2025 ميلادية،تفضل صاحب الجلالة الملك محمد السادس، نصره الله، فأصدر عفوه السامي على مجموعة من الأشخاص، منهم المعتقلين ومنهم الموجودين في حالة سراح، المحكوم عليهم من طرف مختلف محاكم المملكة وعددهم 1526 شخصا. وفي ما يلي نص البلاغ الذي أصدرته وزارة العدل بهذا الخصوص: “بمناسبة', 'size': 5}, {'id': '292', 'title': 'الملك محمد السادس يصدر عفوه السامي عن 1526 شخصا بمناسبة عيد الأضحى المبارك', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/407156.html', 'summary': 'الملك محمد السادس يصدر عفوه السامي عن 1526 شخصا بمناسبة عيد الأضحى المبارك. بمناسبة عيد الأضحى المبارك لهذه السنة 1446 هجرية 2025 ميلادية، تفضل صاحب الجلالة الملك محمد السادس، نصره الله، فأصدر عفوه السامي على مجموعة من الأشخاص،', 'size': 5}, {'id': '295', 'title': 'بمناسبة عيد الأضحى.. جلالة الملك يصدر عفوه السامي على 1526 شخصا', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a8%d9%85%d9%86%d8%a7%d8%b3%d8%a8%d8%a9-%d8%b9%d9%8a%d8%af-%d8%a7%d9%84%d8%a3%d8%b6%d8%ad%d9%89-%d8%ac%d9%84%d8%a7%d9%84%d8%a9-%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%8a%d8%b5%d8%af%d8%b1-%d8%b9%d9%81/', 'summary': 'بمناسبة عيد الأضحى.. جلالة الملك يصدر عفوه السامي على 1526 شخصا. بمناسبة عيد الأضحى المبارك لهذه السنة 1446 هجرية 2025 ميلادية، تفضل صاحب الجلالة الملك محمد السادس، نصره الله، فأصدر عفوه السامي على مجموعة من الأشخاص، منهم المعتقلين ومنهم الموجودين في حالة سراح، المحكوم عليهم من طرف مختلف محاكم المملكة وعددهم 1526 شخصا. وفي ما يلي نص البلاغ الذي أصدرته وزارة العدل بهذا الخصوص: “بمناسبة عيد', 'size': 5}, {'id': '307', 'title': 'جلالة الملك يعفو على 1526 شخصاً ضمنهم محكومين بقانون الإرهاب بمناسبة عيد الأضحى المبارك', 'source': 'rue20.com', 'link': 'https://rue20.com/910880.html', 'summary': 'جلالة الملك يعفو على 1526 شخصاً ضمنهم محكومين بقانون الإرهاب بمناسبة عيد الأضحى المبارك. . الرباط بمناسبة عيد الأضحى المبارك لهذه السنة 1446 هجرية 2025 ميلادية، تفضل صاحب الجلالة الملك محمد السادس، نصره الله، فأصدر عفوه السامي على مجموعة من الأشخاص، منهم المعتقلين ومنهم الموجودين في حالة سراح، المحكوم عليهم من طرف مختلف محاكم المملكة وعددهم 1526 شخصا. وفي ما يلي نص البلاغ الذي أصدرته وزارة العدل بهذا الخبر جلالة الملك يعفو على 1526 شخصاً ضمنهم محكومين بقانون الإرهاب بمناسبة عيد الأضحى المبارك  .', 'size': 5}, {'id': '319', 'title': 'الملك محمد السادس يصدر عفوه السامي على 1526 شخصا بمناسبة عيد الأضحى المبارك', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%85%d8%ad%d9%85%d8%af-%d8%a7%d9%84%d8%b3%d8%a7%d8%af%d8%b3-%d9%8a%d8%b5%d8%af%d8%b1-%d8%b9%d9%81%d9%88%d9%87-%d8%a7%d9%84%d8%b3%d8%a7%d9%85%d9%8a-%d8%b9%d9%84-10/', 'summary': 'الملك محمد السادس يصدر عفوه السامي على 1526 شخصا بمناسبة عيد الأضحى المبارك. بمناسبة عيد الأضحى المبارك لهذه السنة 1446 هجرية 2025 ميلادية، تفضل الملك محمد السادس، فأصدر عفوه السامي على مجموعة من الأشخاص، منهم المعتقلين ومنهم الموجودين في حالة سراح، المحكوم عليهم من طرف مختلف محاكم المملكة وعددهم 1526 شخصا وفي ما يلي نص البلاغ الذي أصدرته وزارة العدل بهذاالخصوص: “بمناسبة عيد الأضحى المبارك …  الملك محمد السادس يصدر عفوه السامي على 1526 شخصا بمناسبة عيد الأضحى المبارك     .', 'size': 5}], 'main_title': 'جلالة الملك يصدر عفوه السامي على 1526 شخصا بمناسبة عيد الأضحى المبارك'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>
</html>
    