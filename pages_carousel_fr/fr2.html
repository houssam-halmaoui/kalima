<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); 
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title"> Les principales actualités des dernières 24 heures

</div>    
        <div class="header-subtitle"> Dernière mise à jour : 28/06/2025 - 06h23</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"></div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '5', 'articles': [{'id': '5', 'title': 'Porte-parole de l\'UE : l’Union Européenne, ni aucun de ses États membres ne reconnaissent la pseudo "rasd"', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/430924-porte-parole-de-lue-lunion-europeenne-ni-aucun-de-ses-etats-membres-ne-reconnaissent-la-pseudo-rasd.html', 'summary': 'Porte-parole de l\'UE : l’Union Européenne, ni aucun de ses États membres ne reconnaissent la pseudo "rasd". Le porte-parole de l’Union Européenne (UE) pour les Affaires étrangères a réaffirmé, vendredi, que « ni l’UE, ni aucun de ses États membres ne reconnaissent la +rasd+ ». Cette déclaration est intervenue alors que certains relais séparatistes sur-communiquaient au sujet de la réunion ministérielle Union Européenne-Union Africaine, qui se tient ce vendredi à Rome. Rappelant que les . ', 'size': 5}, {'id': '11', 'title': 'Ni l’Union Européenne, ni aucun de ses États membres ne reconnaissent la pseudo "rasd" (porte-parole de l\'UE)', 'source': 'lematin.ma', 'link': 'https://lematin.ma/nation/ni-lue-ni-aucun-de-ses-etats-membres-ne-reconnaissent-la-pseudo-rasd/288016', 'summary': 'Ni l’Union Européenne, ni aucun de ses États membres ne reconnaissent la pseudo "rasd" (porte-parole de l\'UE). Cette déclaration est intervenue alors que certains relais séparatistes sur-communiquaient au sujet de la réunion ministérielle Union Européenne-Union Africaine, qui se tient ce ve.', 'size': 4}, {'id': '129', 'title': 'L’UE réaffirme ne pas reconnaître la pseudo «\xa0rasd\xa0»', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/lue-reaffirme-ne-pas-reconnaitre-la-pseudo-rasd/', 'summary': 'L’UE réaffirme ne pas reconnaître la pseudo « rasd ». Le porte-parole de l’Union Européenne (UE) pour les Affaires étrangères a réaffirmé, vendredi, que « ni l’UE, ni aucun de ses États membres ne reconnaissent la +rasd+ ». Cette déclaration est intervenue alors que certains relais séparatistes sur-communiquaient au sujet de la réunion ministérielle Union Européenne-Union Africaine, qui se tient ce vendredi à Rome. Rappelant que les .', 'size': 5}, {'id': '168', 'title': 'Réunion ministérielle UE-UA : Bruxelles dément avoir invité le Polisario', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Reunion-ministerielle-UE-UA-Bruxelles-dement-avoir-invite-le-Polisario_a69250.html', 'summary': 'Réunion ministérielle UE-UA : Bruxelles dément avoir invité le Polisario. Le porte-parole de l’Union Européenne (UE) pour les Affaires étrangères a réaffirmé, vendredi, que "ni l’UE, ni aucun de ses États membres ne reconnaissent la +rasd+".', 'size': 4}, {'id': '188', 'title': 'Porte-parole de l’UE: «\xa0ni l’Union Européenne, ni aucun de ses États membres ne reconnaissent\xa0» la pseudo «\xa0rasd\xa0»', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/porte-parole-de-lue-ni-lunion-europeenne-ni-aucun-de-ses-etats-membres-ne-reconnaissent-la-pseudo-rasd.html', 'summary': 'Porte-parole de l’UE: « ni l’Union Européenne, ni aucun de ses États membres ne reconnaissent » la pseudo « rasd ». Le porte-parole de l’Union Européenne (UE) pour les Affaires étrangères a réaffirmé, vendredi, que « ni l’UE, ni aucun de ses États membres ne reconnaissent la +rasd+ » du Polisario. Cette déclaration est intervenue alors que certains relais séparatistes sur-communiquaient au sujet de la réunion ministérielle Union Européenne-Union Africaine, qui se tient ce vendredi à Rome. Rappelant . L’article est apparu en premier sur .', 'size': 5}], 'main_title': 'Porte-parole de l\'UE : l’Union Européenne, ni aucun de ses États membres ne reconnaissent la pseudo "rasd"'}, {'community_id': '1', 'articles': [{'id': '16', 'title': 'Mondial des Clubs : fin de parcours sans succès pour le Wydad', 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/mondial-des-clubs-fin-de-parcours-sans-succes-pour-le-wydad/287964', 'summary': 'Mondial des Clubs : fin de parcours sans succès pour le Wydad. Trois matchs, trois défaites pour le Wydad de Casablanca lors de la Coupe du Monde des Clubs disputée aux États-Unis. Après avoir chuté face à Manchester City et à la Juventus de T.', 'size': 2}, {'id': '106', 'title': 'Mondial des Clubs : Fin de parcours pour le Wydad', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/videos/mondial-des-clubs-fin-de-parcours-pour-le-wydad/', 'summary': 'Mondial des Clubs : Fin de parcours pour le Wydad. Le Wydad casablancais a quitté la compétition dès la phase de groupes. Après deux défaites face à Manchester City et à la Juventus, le club marocain s’est incliné lors du 3e match contre Al Aïn (2-1), jeudi à Washington.', 'size': 3}, {'id': '155', 'title': 'Coupe du monde des clubs : Le Wydad Casablanca conclut sa campagne par une défaite', 'source': 'lnt.ma', 'link': 'https://lnt.ma/coupe-du-monde-des-clubs-le-wydad-casablanca-conclut-sa-campagne-par-une-defaite/', 'summary': 'Coupe du monde des clubs : Le Wydad Casablanca conclut sa campagne par une défaite. Le Wydad Casablanca a clôturé sa participation à la première édition élargie de la Coupe du monde des clubs (32 équipes) par une nouvelle défaite, cette fois face à la formation émiratie d’Al Aïn, sur le score de 2 à 1, jeudi au stade Audi Field de Washington, dans le cadre de la troisième et . ', 'size': 2}], 'main_title': 'Mondial des Clubs : Fin de parcours pour le Wydad'}, {'community_id': '3', 'articles': [{'id': '17', 'title': "Le 1er Moharram de la nouvelle année de l'Hégire 1447 ce vendredi 27 juin", 'source': 'lematin.ma', 'link': 'https://lematin.ma/nation/le-1er-moharram-de-la-nouvelle-annee-de-lhegire-1447-ce-vendredi-27-juin/287951', 'summary': "Le 1er Moharram de la nouvelle année de l'Hégire 1447 ce vendredi 27 juin. Le ministère des Habous et des Affaires islamiques a confirmé l’observation du croissant lunaire du mois de Moharram au coucher du soleil du jeudi 29 Dou El Hijja 1446 (corresponda.", 'size': 2}, {'id': '152', 'title': 'Le 1er Moharram de la nouvelle année de l’Hégire 1447 correspond au vendredi 27 juin', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/le-1er-moharram-de-la-nouvelle-annee-de-lhegire-1447-correspond-au-vendredi-27-juin/', 'summary': 'Le 1er Moharram de la nouvelle année de l’Hégire 1447 correspond au vendredi 27 juin. Le 1er Moharram de la nouvelle année de l’Hégire 1447 correspondra au vendredi 27 juin 2025, a annoncé, jeudi, le ministère des Habous et des Affaires islamiques. Dans un communiqué, le ministère a confirmé l’observation du croissant lunaire du mois de Moharram au coucher du soleil du jeudi 29 Dou El Hijja 1446 H, correspondant ', 'size': 2}], 'main_title': "Le 1er Moharram de la nouvelle année de l'Hégire 1447 ce vendredi 27 juin"}, {'community_id': '4', 'articles': [{'id': '20', 'title': 'Le gouvernement approuve 47 projets pour 51 milliards de dirhams d’investissements', 'source': 'lematin.ma', 'link': 'https://lematin.ma/nation/le-gouvernement-approuve-47-projets-pour-51-mmdh-dinvestissements/287946', 'summary': 'Le gouvernement approuve 47 projets pour 51 milliards de dirhams d’investissements. Le Chef du Gouvernement a présidé, ce jeudi 26 juin 2025 à Rabat, la 8ème Commission Nationale des Investissements instituée par la nouvelle Charte de l’Investissent, opérationnell.', 'size': 2}, {'id': '50', 'title': "Charte de l'Investissement : 47 projets approuvés, 17 000 emplois ciblés", 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Charte-de-l-Investissement-47-projets-approuves-17-000-emplois-cibles_a69220.html', 'summary': "Charte de l'Investissement : 47 projets approuvés, 17 000 emplois ciblés. La Commission Nationale des Investissements n° 8 a approuvé, jeudi, 47 projets pour un montant global de 51 Milliards de Dirhams, permettant la création de près de 17 000 emplois, dont 9 000 directs et 8 000 indirects répartis sur 23 provinces et préfectures dans 10 régions du Royaume.", 'size': 2}, {'id': '150', 'title': 'Investissements | 8ème CNI, 47 projets approuvés pour un montant de 51 MMDH', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/investissements-8eme-cni-47-projets-approuves-pour-un-montant-de-51-mmdh/', 'summary': 'Investissements | 8ème CNI, 47 projets approuvés pour un montant de 51 MMDH. La 8ème Commission nationale des investissements (CNI), réunie jeudi à Rabat sous la présidence du Chef du gouvernement Aziz Akhannouch, a approuvé 47 projets d’investissement pour un montant global de 51 milliards de dirhams (MMDH) et la création de près de 17.000 emplois directs et indirects. Cette commission, instituée par la nouvelle Charte de l’Investissement ', 'size': 3}], 'main_title': 'Investissements | 8ème CNI, 47 projets approuvés pour un montant de 51 MMDH'}, {'community_id': '8', 'articles': [{'id': '28', 'title': "L'ONHYM sera transformé en société anonyme", 'source': 'lematin.ma', 'link': 'https://lematin.ma/nation/lonhym-sera-transforme-en-societe-anonyme/287911', 'summary': "L'ONHYM sera transformé en société anonyme. Le Conseil de gouvernement a adopté, jeudi, le projet de loi n° 56.24 portant transformation de l’Office national des hydrocarbures et des mines (ONHYM) en société anonyme (SA), pr.", 'size': 5}, {'id': '47', 'title': 'Le gouvernement aprouve la transformation de l’ONHYM en société anonyme', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Le-gouvernement-aprouve-la-transformation-de-l-ONHYM-en-societe-anonyme_a69222.html', 'summary': 'Le gouvernement aprouve la transformation de l’ONHYM en société anonyme. Le Conseil de gouvernement a adopté, jeudi, le projet de loi n° 56.24 portant transformation de l’Office national des hydrocarbures et des mines (ONHYM) en société anonyme (SA), présenté par la ministre de la Transition énergétique et du Développement durable, Leila Benali.', 'size': 5}, {'id': '67', 'title': 'Hydrocarbures : l’ONHYM transformé en société anonyme', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/06/26/hydrocarbures-lonhym-transforme-en-societe-anonyme_1939976/', 'summary': 'Hydrocarbures : l’ONHYM transformé en société anonyme. Le Conseil de gouvernement a adopté, jeudi, le projet de loi n° 56.24 portant transformation de l’Office national des hydrocarbures et des mines (ONHYM) en société anonyme (SA), présenté par la ministre de la Transition énergétique et du Développement durable, Leila Benali. Ce projet s’inscrit dans le cadre de la mise en œuvre des dispositions.', 'size': 5}, {'id': '72', 'title': 'L’Office national des hydrocarbures et des mines sera transformé en société anonyme', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/loffice-national-des-hydrocarbures-et-des-mines-sera-transforme-en-societe-anonyme-305589/', 'summary': 'L’Office national des hydrocarbures et des mines sera transformé en société anonyme. Le Conseil de gouvernement a adopté, jeudi, le projet de loi n° 56.24 portant transformation de l’Office national des hydrocarbures et des mines (ONHYM) en société anonyme (SA), présenté par la ministre de la Transition énergétique et du Développement durable, Leila Benali. Ce projet s’inscrit dans le cadre de la', 'size': 5}, {'id': '153', 'title': 'Le gouvernement approuve la transformation de l’Office national des hydrocarbures et des mines en société anonyme', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/le-gouvernement-approuve-la-transformation-de-loffice-national-des-hydrocarbures-et-des-mines-en-societe-anonyme/', 'summary': 'Le gouvernement approuve la transformation de l’Office national des hydrocarbures et des mines en société anonyme. Le Conseil de gouvernement a adopté, jeudi, le projet de loi n° 56.24 portant transformation de l’Office national des hydrocarbures et des mines (ONHYM) en société anonyme (SA), présenté par la ministre de la Transition énergétique et du Développement durable, Leila Benali. Ce projet s’inscrit dans le cadre de la mise en œuvre des dispositions ', 'size': 5}], 'main_title': "L'ONHYM sera transformé en société anonyme"}, {'community_id': '0', 'articles': [{'id': '65', 'title': 'Reda Benjelloun nommé à la tête du CCM', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/06/26/reda-benjelloun-nomme-a-la-tete-du-ccm_1939982/', 'summary': 'Reda Benjelloun nommé à la tête du CCM. Le gouvernement a approuvé, ce jeudi lors de son conseil hebdomadaire, la nomination de Reda Benjelloun au poste de directeur général du Centre cinématographique marocain (CCM), mettant ainsi un terme à une vacance prolongée à la tête de cette institution. Reda Benjelloun, diplômé de l’Université de la Sorbonne à Paris, a entamé sa carrière journalistique.', 'size': 2}, {'id': '74', 'title': 'Mohamed Reda Benjelloun nommé directeur du CCM', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/mohamed-reda-benjelloun-nomme-directeur-du-ccm-305582/', 'summary': 'Mohamed Reda Benjelloun nommé directeur du CCM. Conformément aux dispositions de l’article 92 de la Constitution, le Conseil de gouvernement a approuvé, jeudi 26 juin, des propositions de nomination à des fonctions supérieures, dont celle du journaliste et documentariste Mohamed Reda Benjelloun à la tête du Centre cinématographique marocain (CCM, département de la Communication). Au niveau du', 'size': 2}], 'main_title': 'Reda Benjelloun nommé à la tête du CCM'}, {'community_id': '9', 'articles': [{'id': '71', 'title': 'Les prévisions du vendredi 27 juin', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/les-previsions-du-vendredi-27-juin-305599/', 'summary': 'Les prévisions du vendredi 27 juin. Voici les prévisions météorologiques établies par la Direction générale de la météorologie pour vendredi 27 juin 2025 : – Temps chaud sur les côtes et les plaines Nord et Centres, les régions de l’Anti-Atlas, l’extrême Sud-Est, l’intérieur des provinces Sud et l’Oriental. – Ondées ou averses orageuses avec risque de', 'size': 2}, {'id': '157', 'title': "Le temps qu'il fera ce samedi 28 juin 2025", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/430420-le-temps-quil-fera-ce-samedi-28-juin-2025.html', 'summary': "Le temps qu'il fera ce samedi 28 juin 2025. Voici les prévisions météorologiques établies par la Direction générale de la météorologie pour le samedi 28 juin 2025 – Temps chaud à localement très chaud sur les côtes et les plaines Nord et Centre, les régions de l’Anti-Atlas, l’extrême Sud-Est et l’intérieur des provinces Sud. – Foyers orageux avec ondées ou averses sur les régions . ", 'size': 2}], 'main_title': 'Les prévisions du vendredi 27 juin'}, {'community_id': '6', 'articles': [{'id': '75', 'title': 'Cristiano Ronaldo prolonge avec Al-Nassr en Arabie saoudite jusqu’en 2027', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/cristiano-ronaldo-prolonge-avec-al-nassr-en-arabie-saoudite-jusquen-2027-305572/', 'summary': 'Cristiano Ronaldo prolonge avec Al-Nassr en Arabie saoudite jusqu’en 2027. À 40 ans, le Portugais Cristiano Ronaldo a prolongé son contrat avec Al-Nassr jusqu’en 2027, a annoncé jeudi le club saoudien, mettant fin à des semaines de spéculation. « L’histoire continue »: dans une vidéo puis dans un message sur le réseau social X, Al-Nassr a officialisé la prolongation de contrat de', 'size': 2}, {'id': '134', 'title': 'Football: Cristiano Ronaldo prolonge avec Al-Nassr jusqu’en 2027', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/football-cristiano-ronaldo-prolonge-avec-al-nassr-jusquen-2027/', 'summary': 'Football: Cristiano Ronaldo prolonge avec Al-Nassr jusqu’en 2027. Le club saoudien d’Al-Nassr a annoncé jeudi la prolongation de deux ans du contrat de son attaquant portugais Cristiano Ronaldo, mettant fin à des semaines de spéculation. « Al-Nassr a officiellement signé une prolongation de contrat avec Cristiano Ronaldo. Le contrat du capitaine d’Al-Nassr sera valable jusqu’en 2027 », a indiqué le club saoudien dans une publication .', 'size': 2}], 'main_title': 'Cristiano Ronaldo prolonge avec Al-Nassr en Arabie saoudite jusqu’en 2027'}, {'community_id': '2', 'articles': [{'id': '92', 'title': 'L’Agence nationale de protection de l’enfance permettra de fédérer les efforts en la matière, souligne Mustapha Baitas', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/societe/lagence-nationale-de-protection-de-lenfance-permettra-de-federer-les-efforts-en-la-matiere-souligne-mustapha-baitas', 'summary': 'L’Agence nationale de protection de l’enfance permettra de fédérer les efforts en la matière, souligne Mustapha Baitas. La création de l’Agence nationale de protection de l’enfance (ANPE) est à même de fédérer les efforts et d’unifier la vision dans le domaine de la protection de l’enfance, a affirmé jeudi le ministre délégué auprès du Chef du gouvernement chargé des relations avec le Parlement, porte-parole du gouvernement, Mustapha Baitas. Le projet de loi .', 'size': 2}, {'id': '116', 'title': 'Agence nationale de protection de l’enfance : Un levier pour fédérer les efforts', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/au-royaume/agence-nationale-de-protection-de-lenfance-un-levier-pour-federer-les-efforts/', 'summary': 'Agence nationale de protection de l’enfance : Un levier pour fédérer les efforts. La création de l’Agence nationale de protection de l’enfance (ANPE) est à même de fédérer les efforts et d’unifier la vision dans le domaine de la protection de l’enfance, a affirmé jeudi le ministre délégué auprès du Chef du gouvernement chargé des relations avec le Parlement, porte-parole du gouvernement, Mustapha Baitas.', 'size': 2}], 'main_title': 'L’Agence nationale de protection de l’enfance permettra de fédérer les efforts en la matière, souligne Mustapha Baitas'}, {'community_id': '7', 'articles': [{'id': '111', 'title': 'Francina Armengol : La coopération maroco-espagnole, un partenariat mutuellement bénéfique', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/pouvoirs/diplomatie/francina-armengol-la-cooperation-maroco-espagnole-un-partenariat-mutuellement-benefique/', 'summary': 'Francina Armengol : La coopération maroco-espagnole, un partenariat mutuellement bénéfique. La présidente du Congrès des députés espagnol, Francina Armengol, salue à Malaga la coopération maroco-espagnole, qu\'elle qualifie de "mutuellement bénéfique", notamment en matière migratoire et d’échanges économiques.', 'size': 2}, {'id': '148', 'title': 'La coopération maroco-espagnole, un exemple de partenariat “mutuellement bénéfique”', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/la-cooperation-maroco-espagnole-un-exemple-de-partenariat-mutuellement-benefique/', 'summary': 'La coopération maroco-espagnole, un exemple de partenariat “mutuellement bénéfique”. La coopération entre le Maroc et l’Espagne est un exemple de partenariat “mutuellement bénéfique”, a affirmé la présidente du Congrès des députés espagnol, Francina Armengol. “Le Maroc et l’Espagne ont développé une coopération exemplaire dans le domaine de la gestion des flux migratoires et de la migration circulaire”, a souligné Mme Armengol dans une déclaration ', 'size': 2}], 'main_title': 'Francina Armengol : La coopération maroco-espagnole, un partenariat mutuellement bénéfique'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
                        
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ? d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        // Fonction pour cacher le tooltip
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = '';
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
    
    
</body>




</html>
    