<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); 
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title"> Les principales actualités des dernières 24 heures

</div>    
        <div class="header-subtitle"> Dernière mise à jour : 09/09/2025 - 06h17</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"></div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '2', 'articles': [{'id': '1', 'title': "France: les députés renversent le gouvernement de Bayrou lors d'un vote de confiance", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/440404-france-les-deputes-renversent-le-gouvernement-de-bayrou-lors-dun-vote-de-confiance.html', 'summary': "France: les députés renversent le gouvernement de Bayrou lors d'un vote de confiance. Les députés français ont refusé lundi, à une nette majorité, d’accorder leur confiance au Premier ministre François Bayrou, qui avait sollicité ce vote après la présentation d’un budget d’austérité pour la France, dont le gouvernement est ainsi renversé. François Bayrou devrait présenter sa démission mardi matin, selon l’un de ses proches. Issus des rangs des . ", 'size': 3}, {'id': '12', 'title': "France : L'Assemblée nationale renverse le gouvernement de François Bayrou", 'source': 'lematin.ma', 'link': 'https://lematin.ma/monde/france-lassemblee-nationale-renverse-le-gouvernement-de-francois-bayrou/300380', 'summary': "France : L'Assemblée nationale renverse le gouvernement de François Bayrou. Comme attendu depuis deux semaines, 364 députés, issus des rangs des oppositions allant de RN à LFI, ont voté contre la confiance au Premier ministre tandis que 194 parlementaires,.", 'size': 3}, {'id': '213', 'title': 'France : François Bayrou renversé par les députés, la crise politique à son paroxysme', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/France-Francois-Bayrou-renverse-par-les-deputes-la-crise-politique-a-son-paroxysme_a71530.html', 'summary': 'France : François Bayrou renversé par les députés, la crise politique à son paroxysme. L\'Assemblée a renversé lundi François Bayrou, qui a échoué à obtenir la confiance des députés. Les regards sont désormais tournés vers Emmanuel Macron, qui nommera un nouveau Premier ministre "dans les tout prochains jours", en dépit des appels à la dissolution ou à sa démission.', 'size': 4}, {'id': '234', 'title': 'Le président français «\xa0prend acte\xa0» de la chute du gouvernement Bayrou', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/le-president-francais-prend-acte-de-la-chute-du-gouvernement-bayrou.html', 'summary': 'Le président français « prend acte » de la chute du gouvernement Bayrou. Le président français Emmanuel Macron acte lundi la chute du gouvernement de François Bayrou et nommera un nouveau Premier ministre "dans les tout prochains jours". L’article est apparu en premier sur .', 'size': 2}], 'main_title': 'France : François Bayrou renversé par les députés, la crise politique à son paroxysme'}, {'community_id': '3', 'articles': [{'id': '6', 'title': 'Le Maroc s’impose avec autorité face à la Zambie et assoit sa qualification au Mondial 2026', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/440362-le-maroc-simpose-avec-autorite-face-a-la-zambie-et-assoit-sa-qualification-au-mondial-2026.html', 'summary': 'Le Maroc s’impose avec autorité face à la Zambie et assoit sa qualification au Mondial 2026. Le Maroc a clôturé son parcours sans faute dans les éliminatoires africaines de la Coupe du monde 2026. Déjà qualifiés pour le tournoi qui se jouera aux États-Unis, au Mexique et au Canada, les Lions de l’Atlas ont confirmé leur supériorité en s’imposant face à la Zambie (2-0), ce lundi 08 septembre. Dès les premières . ', 'size': 4}, {'id': '78', 'title': 'Qualifications Mondial 2026 : le Maroc domine la Zambie (2-0)', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/09/08/qualifications-mondial-2026-le-maroc-domine-la-zambie-2-0_1949380/', 'summary': 'Qualifications Mondial 2026 : le Maroc domine la Zambie (2-0). La sélection marocaine de football, qui a déjà validé son billet pour la Coupe du Monde 2026, s’est imposée, lundi à Ndola, en Zambie, contre son homologue zambienne sur le score de 2 buts à 0, dans un match comptant pour la 8e journée du Groupe E des qualifications africaines. Les buts de la rencontre.', 'size': 5}, {'id': '102', 'title': 'Eliminatoires Mondial 2026 : Le Maroc domine la Zambie (2-0)', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/175902/eliminatoires-mondial-2026-maroc-domine.html', 'summary': 'Eliminatoires Mondial 2026 : Le Maroc domine la Zambie (2-0). La sélection marocaine de football, qui a déjà validé son billet pour la Coupe du Monde 2026, s’est imposée, lundi à Ndola, contre son homologue zambienne sur le score de 2 buts à 0, dans un match comptant pour la 8e journée du Groupe E des qualifications africaines. Les buts de la rencontre ont été marqués par Youssef En-Nesyri (7e) et Hamza Igamane (47e).', 'size': 5}, {'id': '114', 'title': 'Qualifications Mondial 2026 : le Maroc signe un carton plein en disposant de la Zambie', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/une/qualifications-mondial-2026-le-maroc-signe-un-carton-plein-en-disposant-de-la-zambie', 'summary': 'Qualifications Mondial 2026 : le Maroc signe un carton plein en disposant de la Zambie. Auréolée par sa qualification pour le Mondial 2026 de football, la sélection marocaine n’a pas eu à forcer son talent face à son homologue zambienne (2-0), lundi au stade Levy Mwanawasa à Ndola pour le compte de la 8è journée du groupe E des qualifications africaines. Les Lions de l’Atlas, qui ont validé leur ticket .', 'size': 5}, {'id': '148', 'title': 'Qualifications Mondial 2026 (8è J/Gr. E) : Le Maroc domine la Zambie (2-0)', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/qualifications-mondial-2026-8e-j-gr-e-le-maroc-domine-la-zambie-2-0/', 'summary': 'Qualifications Mondial 2026 (8è J/Gr. E) : Le Maroc domine la Zambie (2-0). La sélection marocaine de football, qui a déjà validé son billet pour la Coupe du Monde 2026, s’est imposée, lundi à Ndola, contre son homologue zambienne sur le score de 2 buts à 0, dans un match comptant pour la 8e journée du Groupe E des qualifications africaines. Les buts de la rencontre ont été .', 'size': 4}], 'main_title': 'Qualifications Mondial 2026 : le Maroc domine la Zambie (2-0)'}, {'community_id': '4', 'articles': [{'id': '20', 'title': 'Le Maroc, place forte du football mondial (RMC sport)', 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/le-maroc-place-forte-du-football-mondial-rmc-sport/300340', 'summary': 'Le Maroc, place forte du football mondial (RMC sport). Le Maroc, ajoute la même source, «se pose aujourd’hui en carrefour des prochains grands événements dans le monde du football », notant que l’influence du Royaume dans le football m.', 'size': 2}, {'id': '153', 'title': 'Le Maroc, place forte du football mondial', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/le-maroc-place-forte-du-football-mondial/', 'summary': 'Le Maroc, place forte du football mondial. Le Maroc, qui sera sur le devant de la scène pour les cinq prochaines années entre la CAN 2025 et la Coupe du monde 2030, est « une place forte du football mondial », écrit le site spécialisé «RMC sport ». Le Maroc, ajoute la même source, «se pose aujourd’hui en carrefour des prochains grands événements dans .', 'size': 2}], 'main_title': 'Le Maroc, place forte du football mondial (RMC sport)'}, {'community_id': '11', 'articles': [{'id': '21', 'title': "Bacha Coffee s'installe à l'aéroport Marrakech-Menara", 'source': 'lematin.ma', 'link': 'https://lematin.ma/lifestyle/bacha-coffee-sinstalle-a-laeroport-marrakech-menara/300332', 'summary': "Bacha Coffee s'installe à l'aéroport Marrakech-Menara. Dans un communiqué, l’Office National des Aéroports (ONDA) souligne sa volonté d’accélérer la transformation des plateformes marocaines en véritables hubs d’expérience et de consom.", 'size': 2}, {'id': '224', 'title': 'L’enseigne marocaine Bacha coffee atterrit à l’aéroport Marrakech-Menara', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/175922/l-enseigne-marocaine-bacha-coffee-atterrit.html', 'summary': 'L’enseigne marocaine Bacha coffee atterrit à l’aéroport Marrakech-Menara. La marque marocaine Bacha Coffee ouvrira prochainement son enseigne à l’aéroport Marrakech-Menara, renforçant ainsi sa présence qui existe déjà dans 35 aéroports internationaux. Pour l’Office national des aéroports (ONDA), cette ouverture à la suite d’un appel d’offres s’inscrit dans le cadre de la mise en œuvre de sa stratégie Aéroports 2030. L’idée est d’améliorer l’expérience client et «accompagner la montée en gamme des services proposés aux voyageurs», selon un communiqué.', 'size': 2}], 'main_title': "Bacha Coffee s'installe à l'aéroport Marrakech-Menara"}, {'community_id': '8', 'articles': [{'id': '25', 'title': 'La fonction publique, premier choix des jeunes diplômés marocains en 2025 (Enquête)', 'source': 'lematin.ma', 'link': 'https://lematin.ma/emploi/la-fonction-publique-premier-choix-des-jeunes-diplomes-marocains-en-2025/300244', 'summary': 'La fonction publique, premier choix des jeunes diplômés marocains en 2025 (Enquête). En 2025, la fonction publique marocaine attire, séduit et fait rêver les jeunes diplômés des grandes écoles. Une enquête menée par Careers, cabinet de conseil en ressources humaine.', 'size': 2}, {'id': '189', 'title': 'Enquête : L’attrait du secteur public pour les jeunes diplômés', 'source': 'lnt.ma', 'link': 'https://lnt.ma/enquete-lattrait-du-secteur-public-pour-les-jeunes-diplomes/', 'summary': 'Enquête : L’attrait du secteur public pour les jeunes diplômés. Une enquête récente menée entre le 26 juin et le 22 juillet 2025 par ‘’Careers in Morocco’’, auprès de plus de 1000 lauréats issus des grandes écoles marocaines (Ecoles d’ingénieurs, écoles de commerce et universités de renom) met en lumière les préférences professionnelles des jeunes diplômés lorsqu’il s’agit d’intégrer le secteur du travail. Alors que . ', 'size': 3}, {'id': '216', 'title': 'Etude : Le curieux attrait de la haute fonction publique chez les ingénieurs et les jeunes diplômés', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Etude-Le-curieux-attrait-de-la-haute-fonction-publique-chez-les-ingenieurs-et-les-jeunes-diplomes_a71527.html', 'summary': 'Etude : Le curieux attrait de la haute fonction publique chez les ingénieurs et les jeunes diplômés. Un nouveau sondage de "Carrees in Morocco" montre un changement structurel dans le marché du travail. Les nouvelles générations d\'ingénieurs et des lauréats des écoles de commerce préfèrent de plus en plus la haute fonction dans le secteur public. Détails.', 'size': 2}], 'main_title': 'Enquête : L’attrait du secteur public pour les jeunes diplômés'}, {'community_id': '6', 'articles': [{'id': '30', 'title': 'Averses orageuses avec rafales de vent ce lundi dans plusieurs régions du Maroc', 'source': 'lematin.ma', 'link': 'https://lematin.ma/regions/averses-orageuses-avec-rafales-de-vent-dans-plusieurs-regions-du-maroc/300230', 'summary': 'Averses orageuses avec rafales de vent ce lundi dans plusieurs régions du Maroc. De fortes averses orageuses (25-35 mm) avec rafales de vent sont attendues ce lundi de 14h00 à 23h00 dans les provinces de Béni Mellal, Azilal, Ifrane, Boulemane, Khénifra, Khourib.', 'size': 2}, {'id': '92', 'title': 'Averses orageuses avec rafales de vent ce lundi dans plusieurs provinces du Royaume', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/09/08/averses-orageuses-avec-rafales-de-vent-ce-lundi-dans-plusieurs-provinces-du-royaume_1949195/', 'summary': 'Averses orageuses avec rafales de vent ce lundi dans plusieurs provinces du Royaume. Des averses orageuses localement fortes avec rafales de vent sous orages sont attendues, ce lundi, dans plusieurs provinces du Royaume, a annoncé la Direction générale de la météorologie (DGM). Ces averses orageuses (25 à 35 mm) sont prévues lundi de 14h à 23h dans les provinces d’Aousserd, Azilal, Béni Mellal, Khénifra, Oued Ed-Dahab, Boujdour et.', 'size': 2}], 'main_title': 'Averses orageuses avec rafales de vent ce lundi dans plusieurs régions du Maroc'}, {'community_id': '0', 'articles': [{'id': '40', 'title': 'Free Fire Battle of Morocco 2025 : plus de 4.000 spectateurs réunis pour la grande finale à Casablanca', 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/free-fire-battle-of-morocco-plus-de-4000-spectateurs-reunis-pour-la-finale/300191', 'summary': 'Free Fire Battle of Morocco 2025 : plus de 4.000 spectateurs réunis pour la grande finale à Casablanca. Le Complexe sportif Mohammed V a vibré, samedi, au rythme de la grande finale du Free Fire Battle of Morocco (BOM) 2025, un événement désormais incontournable de l’e-sport national.', 'size': 2}, {'id': '103', 'title': 'Esport : Les Ravens couronnés champions du Free Fire Battle du Maroc 2025', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/175895/esport-ravens-couronnes-champions-free.html', 'summary': 'Esport : Les Ravens couronnés champions du Free Fire Battle du Maroc 2025. Les Ravens ont été couronnés nouveaux champions de la Battle of Morocco 2025 de Free Fire (esport), décrochant la victoire grâce à un Booyah décisif lors de la cinquième manche de la grande finale, qui sest tenue le 6 septembre à la salle Mohammed V de Casablanca.', 'size': 2}], 'main_title': 'Free Fire Battle of Morocco 2025 : plus de 4.000 spectateurs réunis pour la grande finale à Casablanca'}, {'community_id': '7', 'articles': [{'id': '94', 'title': 'Qualifications Mondial 2026 : “Nous affronterons la Zambie avec l’objectif de gagner”, assure Regragui', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/09/08/qualifications-mondial-2026-nous-affronterons-la-zambie-avec-lobjectif-de-gagner-assure-regragui_1949150/', 'summary': 'Qualifications Mondial 2026 : “Nous affronterons la Zambie avec l’objectif de gagner”, assure Regragui. Le sélectionneur national, Walid Regragui, a assuré que l’équipe du Maroc respecte tous les adversaires et affrontera la Zambie lundi en qualifications du Mondial-2026 avec “l’objectif de l’emporter”. Nous jouons chaque match pour le gagner. Nous sommes venus en Zambie pour faire un bon match”, a fait savoir Regragui, dimanche en conférence de presse à.', 'size': 3}, {'id': '112', 'title': 'Éliminatoires Mondial 2026 : «Nous affronterons la Zambie avec l’objectif de gagner» (Walid Regragui)', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/175854/eliminatoires-mondial-2026-nous-affronterons.html', 'summary': 'Éliminatoires Mondial 2026 : «Nous affronterons la Zambie avec l’objectif de gagner» (Walid Regragui). Le sélectionneur national, Walid Regragui, a assuré que l’équipe du Maroc respecte tous les adversaires et affrontera la Zambie lundi en qualifications du Mondial 2026 avec «l’objectif de l’emporter».', 'size': 3}, {'id': '190', 'title': 'Qualifs Mondial 2026: Regragui promet sérieux et victoire contre la Zambie', 'source': 'lnt.ma', 'link': 'https://lnt.ma/qualifs-mondial-2026-regragui-promet-serieux-et-victoire-contre-la-zambie/', 'summary': 'Qualifs Mondial 2026: Regragui promet sérieux et victoire contre la Zambie. Le sélectionneur national, Walid Regragui, a assuré que l’équipe du Maroc respecte tous les adversaires et affrontera la Zambie lundi en qualifications du Mondial-2026 avec « l’objectif de l’emporter ». « Nous jouons chaque match pour le gagner. Nous sommes venus en Zambie pour faire un bon match », a fait savoir Regragui, dimanche en conférence de . ', 'size': 3}], 'main_title': 'Qualifications Mondial 2026 : “Nous affronterons la Zambie avec l’objectif de gagner”, assure Regragui'}, {'community_id': '1', 'articles': [{'id': '133', 'title': 'Tanger-Assilah: Hausse de 24% des nuitées touristiques au premier semestre', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/affaires/tanger-assilah-hausse-de-24-des-nuitees-touristiques-au-premier-semestre/', 'summary': 'Tanger-Assilah: Hausse de 24% des nuitées touristiques au premier semestre. Les établissements d’hébergement touristique à Tanger-Assilah ont enregistré 817.430 nuitées à fin juin dernier, contre 659.075 nuitées durant la même période une année auparavant.', 'size': 2}, {'id': '199', 'title': 'ONT : Hausse de 24% des nuitées touristiques à Tanger-Assilah', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/440365-ont-hausse-de-24-des-nuitees-touristiques-a-tanger-assilah.html', 'summary': 'ONT : Hausse de 24% des nuitées touristiques à Tanger-Assilah. L’Observatoire national du tourisme (ONT), a fait état d’une hausse de 24% des nuitées touristiques dans les établissements d’hébergement touristique classés (EHTC) au niveau de la préfecture de Tanger-Assilah, pour s’établir à plus de 817.400 nuitées au premier semestre 2025. Ainsi, les établissements d’hébergement touristique à Tanger-Assilah ont enregistré 817.430 nuitées à fin juin dernier, contre . ', 'size': 2}], 'main_title': 'Tanger-Assilah: Hausse de 24% des nuitées touristiques au premier semestre'}, {'community_id': '5', 'articles': [{'id': '154', 'title': 'Établissements de paiement : l’APEP constitue son nouveau bureau pour 2025-2028', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/etablissements-de-paiement-lapep-constitue-son-nouveau-bureau-pour-2025-2028/', 'summary': 'Établissements de paiement : l’APEP constitue son nouveau bureau pour 2025-2028. L’Association Professionnelle des Établissements de Paiement (APEP) a annoncé la constitution de son bureau pour la nouvelle mandature 2025-2028, marquant une nouvelle étape dans la structuration de la gouvernance du secteur, dans un contexte d’accélération de la digitalisation des services financiers. Présidée par Maha Kohen, Présidente du Directoire de Damane Cash, l’APEP s’appuie sur une .', 'size': 2}, {'id': '179', 'title': 'L’APEP constitue son nouveau bureau', 'source': 'leseco.ma', 'link': 'https://leseco.ma/business/lapep-constitue-son-nouveau-bureau.html', 'summary': 'L’APEP constitue son nouveau bureau. L’Association Professionnelle des Établissements de Paiement (APEP), organisation représentative des acteurs du paiement au Maroc, annonce la constitution officielle de son bureau pour la nouvelle mandature 2025/2028. ', 'size': 2}], 'main_title': 'Établissements de paiement : l’APEP constitue son nouveau bureau pour 2025-2028'}, {'community_id': '10', 'articles': [{'id': '206', 'title': 'Un Espace Amazigh inauguré à l’Alhambra de Grenade en hommage à Dr Leila Mezian', 'source': 'lematin.ma', 'link': 'https://lematin.ma/culture/un-espace-amazigh-inaugure-a-lalhambra-de-grenade/300398', 'summary': 'Un Espace Amazigh inauguré à l’Alhambra de Grenade en hommage à Dr Leila Mezian. La cérémonie s’est déroulée dans le cadre majestueux du Carmen de los Porcel, en présence de personnalités marocaines et espagnoles, dont Othman Benjelloun, président de Bank of Af.', 'size': 2}, {'id': '222', 'title': "L'Alhambra de Grenade accueille un nouvel espace amazigh en l'honneur de la Dr Leila Mezian", 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/175916/l-alhambra-grenade-accueille-nouvel-espace.html', 'summary': "L'Alhambra de Grenade accueille un nouvel espace amazigh en l'honneur de la Dr Leila Mezian. La Fondation Dr. Leila Mezian a inauguré lEspace Amazigh au cœur de lAlhambra de Grenade, un site emblématique inscrit au patrimoine mondial de lUNESCO. Cet événement marque un pont culturel historique entre le Maroc et lEspagne, selon un communiqué de presse publié lundi par la fondation.", 'size': 2}], 'main_title': 'Un Espace Amazigh inauguré à l’Alhambra de Grenade en hommage à Dr Leila Mezian'}, {'community_id': '9', 'articles': [{'id': '221', 'title': 'Entretien téléphonique entre Bourita et son homologue sénégalais', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/175932/entretien-telephonique-entre-bourita-homologue.html', 'summary': 'Entretien téléphonique entre Bourita et son homologue sénégalais. Le ministre des Affaires étrangères, de la coopération africaine et des Marocains résidant à létranger, Nasser Bourita, sest entretenu, lundi par téléphone, avec le ministre de lIntégration africaine, des affaires étrangères et des Sénégalais de lextérieur, Cheikh Niang, nouvellement nommé à ce poste.', 'size': 2}, {'id': '227', 'title': 'Maroc-Sénégal: Premier contact entre Bourita et Cheikh Niang', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/au-royaume/maroc-senegal-premier-contact-entre-bourita-et-cheikh-niang/', 'summary': 'Maroc-Sénégal: Premier contact entre Bourita et Cheikh Niang. Le ministre des Affaires étrangères, de la Coopération africaine et des Marocains résidant à l’étranger, Nasser Bourita, s’est entretenu ce lundi par téléphone avec le ministre sénégalais de l’Intégration africaine, des Affaires étrangères et des Sénégalais de l’extérieur, Cheikh Niang, nouvellement nommé à ce poste.', 'size': 2}], 'main_title': 'Entretien téléphonique entre Bourita et son homologue sénégalais'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
                        
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ? d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        // Fonction pour cacher le tooltip
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = '';
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
    
    
</body>




</html>
    