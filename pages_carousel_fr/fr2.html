<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); 
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title"> Les principales actualités des dernières 24 heures

</div>    
        <div class="header-subtitle"> Dernière mise à jour : 21/09/2025 - 06h16</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"></div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '7', 'articles': [{'id': '11', 'title': 'Lancement de la première Junior NBA League de Basketball au Maroc', 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/lancement-de-la-premiere-junior-nba-league-de-basketball-au-maroc/302764', 'summary': 'Lancement de la première Junior NBA League de Basketball au Maroc. La Junior NBA League Maroc se structure autour de trois objectifs complémentaires. D’abord, structurer un vivier de talents en offrant aux jeunes Marocains un encadrement conforme.', 'size': 2}, {'id': '77', 'title': 'Benguérir: L’UM6P lance la première Junior NBA League de Basketball au Maroc', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/au-royaume/benguerir-lum6p-lance-la-premiere-junior-nba-league-de-basketball-au-maroc/', 'summary': 'Benguérir: L’UM6P lance la première Junior NBA League de Basketball au Maroc. Le programme souhaite bâtir une base solide de jeunes talents marocains selon les standards internationaux, et utiliser le sport comme moyen d’inclusion sociale et de promotion de l’égalité des chances.', 'size': 2}], 'main_title': 'Lancement de la première Junior NBA League de Basketball au Maroc'}, {'community_id': '5', 'articles': [{'id': '36', 'title': 'Abdellatif Hammouchi en visite de travail en Turquie', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Abdellatif-Hammouchi-en-visite-de-travail-en-Turquie_a71973.html', 'summary': "Abdellatif Hammouchi en visite de travail en Turquie. Le Directeur général de la Sûreté nationale et de la Surveillance du Territoire, M. Abdellatif Hammouchi, effectue une visite de travail en Turquie, à la tête d'une délégation sécuritaire de haut niveau, en marge de sa participation au Salon des équipements de sécurité intérieure (IGEF 2025), qui se tient du 18 au 20 septembre à Ankara.", 'size': 5}, {'id': '59', 'title': "Abdellatif Hammouchi en Turquie pour renforcer la coopération sécuritaire et participer à l'IGEF 2025", 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/176894/abdellatif-hammouchi-turquie-pour-renforcer.html', 'summary': "Abdellatif Hammouchi en Turquie pour renforcer la coopération sécuritaire et participer à l'IGEF 2025. Abdellatif Hammouchi, Directeur général de la Sûreté nationale (DGSN) et de la Surveillance du territoire (DGST), est en visite officielle en Turquie à la tête dune délégation sécuritaire de haut niveau. Cette visite coïncide avec sa participation au Forum international de léquipement de sécurité intérieure et des innovations technologiques, connu sous le nom de «IGEF 2025», qui se déroule à Ankara du 18 au 20 septembre.", 'size': 4}, {'id': '84', 'title': 'Coopération sécuritaire: Hammouchi effectue une visite de travail en Turquie', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/pouvoirs/securite/cooperation-securitaire-hammouchi-effectue-une-visite-de-travail-en-turquie/', 'summary': "Coopération sécuritaire: Hammouchi effectue une visite de travail en Turquie. Lors de cette visite qui intervient à l'invitation officielle des autorités turques, Abdellatif Hammouchi, Directeur général de la Sûreté nationale et de la Surveillance du Territoire, a rencontré son homologue turc, M. Mahmut Demirtaş, directeur général de la Police nationale turque, indique un communiqué du Pôle DGSN-DGST.", 'size': 3}, {'id': '107', 'title': 'Coopération sécuritaire : Abdellatif Hammouchi à Ankara pour consolider le partenariat maroco-turc', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/cooperation-securitaire-abdellatif-hammouchi-a-ankara-pour-consolider-le-partenariat-maroco-turc/', 'summary': 'Coopération sécuritaire : Abdellatif Hammouchi à Ankara pour consolider le partenariat maroco-turc. Le directeur général de la Sûreté nationale et de la Surveillance du territoire, Abdellatif Hammouchi, a entamé une visite officielle en Turquie dans le cadre du forum international des équipements de sécurité intérieure et des innovations scientifiques « IGEF 2025 », organisé à Ankara du 18 au 20 septembre. Ce déplacement, à la tête d’une .', 'size': 4}, {'id': '162', 'title': 'Coopération sécuritaire | Abdellatif Hammouchi effectue une visite de travail en Turquie', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/cooperation-securitaire-abdellatif-hammouchi-effectue-une-visite-de-travail-en-turquie/', 'summary': 'Coopération sécuritaire | Abdellatif Hammouchi effectue une visite de travail en Turquie. Le Directeur général de la Sûreté nationale et de la Surveillance du Territoire, M. Abdellatif Hammouchi, effectue une visite de travail en Turquie, à la tête d’une délégation sécuritaire de haut niveau, en marge de sa participation au Salon des équipements de sécurité intérieure (IGEF 2025), qui se tient du 18 au 20 septembre à ', 'size': 5}], 'main_title': 'Abdellatif Hammouchi en visite de travail en Turquie'}, {'community_id': '8', 'articles': [{'id': '47', 'title': "Chine : Karim Zidane prend part à la Conférence mondiale sur l'industrie manufacturière", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/09/19/chine-karim-zidane-prend-part-a-la-conference-mondiale-sur-lindustrie-manufacturiere_1951641/', 'summary': "Chine : Karim Zidane prend part à la Conférence mondiale sur l'industrie manufacturière. Le ministre délégué chargé de l’Investissement, de la Convergence et de l’Évaluation des Politiques Publiques, Karim Zidane, prendra part aux travaux de la Conférence mondiale sur l’industrie manufacturière 2025, prévue du 20 au 23 septembre courant à Hefei, capitale de la province chinoise d’Anhui (Est). Organisé avec l’appui du Conseil des affaires d’État chinois, sous.", 'size': 3}, {'id': '127', 'title': 'Chine: Ouverture des travaux de la Conférence mondiale sur l’industrie manufacturière avec la participation du Maroc', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/chine-ouverture-des-travaux-de-la-conference-mondiale-sur-lindustrie-manufacturiere-avec-la-participation-du-maroc.html', 'summary': 'Chine: Ouverture des travaux de la Conférence mondiale sur l’industrie manufacturière avec la participation du Maroc. Les travaux de l’édition 2025 de la Conférence mondiale sur l’industrie manufacturière se sont ouverts samedi à Hefei, capitale de la province d’Anhui, dans l’est de la Chine, avec la participation du Maroc. Le Royaume est représenté à cette conférence d’envergure internationale, qui se poursuivra jusqu’au 23 septembre, par Karim Zidane, ministre délégué chargé de . L’article est apparu en premier sur .', 'size': 3}, {'id': '161', 'title': 'Chine | Le Maroc participe à la Conférence mondiale sur l’industrie manufacturière à Hefei', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/chine-le-maroc-participe-a-la-conference-mondiale-sur-lindustrie-manufacturiere-a-hefei/', 'summary': 'Chine | Le Maroc participe à la Conférence mondiale sur l’industrie manufacturière à Hefei. Les travaux de l’édition 2025 de la Conférence mondiale sur l’industrie manufacturière se sont ouverts samedi à Hefei, capitale de la province d’Anhui, dans l’est de la Chine, avec la participation du Maroc. Le Royaume est représenté à cette conférence d’envergure internationale, qui se poursuivra jusqu’au 23 septembre, par Karim Zidane, ministre délégué chargé de ', 'size': 3}], 'main_title': "Chine : Karim Zidane prend part à la Conférence mondiale sur l'industrie manufacturière"}, {'community_id': '0', 'articles': [{'id': '48', 'title': "Rentrée scolaire : le ministère de l'Éducation mise sur l'expansion des établissements pionniers", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/09/19/rentree-scolaire-le-ministere-de-leducation-mise-sur-lexpansion-des-etablissements-pionniers_1951612/', 'summary': "Rentrée scolaire : le ministère de l'Éducation mise sur l'expansion des établissements pionniers. Le ministre de l’Éducation nationale, du Préscolaire et des Sports, Mohamed Saad Barada, a présenté ce vendredi 19 septembre, les principales nouveautés de la rentrée scolaire 2025-2026 lors d’une conférence de presse tenue au Centre des formations et rencontres nationales à Rabat. Dans son allocution d’ouverture, le ministre a souligné que cette rentrée constitue une.", 'size': 3}, {'id': '96', 'title': 'Rabat: Rencontre d’échanges sur les défis de la rentrée scolaire', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/au-royaume/rabat-rencontre-dechanges-sur-les-defis-de-la-rentree-scolaire/', 'summary': "Rabat: Rencontre d’échanges sur les défis de la rentrée scolaire. Le ministre de l’Education nationale, du préscolaire et des sports, Mohamed Saâd Berrada, a présidé ce 19 septembre à Rabat, une rencontre d'échanges qui a permis d’aborder les réalisations de son département et les défis de la rentrée scolaire 2025-2026.", 'size': 2}, {'id': '105', 'title': 'Rentrée scolaire 2025-2026: Plus de 8,271 millions élèves inscrits', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/rentree-scolaire-2025-2026-plus-de-8271-millions-eleves-inscrits/', 'summary': 'Rentrée scolaire 2025-2026: Plus de 8,271 millions élèves inscrits. Le nombre total des élèves inscrits au titre de l’année scolaire 2025-2026 s’élève à 8.271.256 apprenants, a fait savoir vendredi à Rabat, le ministre de l’Éducation nationale, du Préscolaire et des Sports, Mohamed Saad Berrada. S’exprimant lors d’une conférence de presse dédiée à la présentation des données relatives à l’actuelle rentrée scolaire, le ministre a .', 'size': 2}], 'main_title': "Rentrée scolaire : le ministère de l'Éducation mise sur l'expansion des établissements pionniers"}, {'community_id': '1', 'articles': [{'id': '52', 'title': 'MDJS: Younes El Mechrafi seul membre africain au comité exécutif de l’ULIS', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/mdjs-younes-el-mechrafi-seul-membre-africain-au-comite-executif-de-lulis-310321/', 'summary': 'MDJS: Younes El Mechrafi seul membre africain au comité exécutif de l’ULIS. Younes El Mechrafi, Directeur Général de la Marocaine des Jeux et des Sports (MDJS), a été réélu membre du comité exécutif de United Lotteries for Integrity in Sports (ULIS) lors de l’Assemblée Générale de l’association, tenue récemment à Berne, en Suisse. Seul représentant africain au sein de cette instance stratégique,', 'size': 2}, {'id': '110', 'title': 'La MDJS en première ligne dans la lutte mondiale contre le jeu illégal', 'source': 'leseco.ma', 'link': 'https://leseco.ma/sports/la-mdjs-en-premiere-ligne-dans-la-lutte-mondiale-contre-le-jeu-illegal.html', 'summary': 'La MDJS en première ligne dans la lutte mondiale contre le jeu illégal. Younes El Mechrafi, Directeur Général de la Marocaine des Jeux et des Sports (MDJS), a été réélu membre du comité exécutif de United Lotteries for Integrity in Sports (ULIS) lors de l’Assemblée Générale de l’association, tenue le 16 courant à Berne. ', 'size': 2}], 'main_title': 'MDJS: Younes El Mechrafi seul membre africain au comité exécutif de l’ULIS'}, {'community_id': '3', 'articles': [{'id': '65', 'title': 'En présence de Mme Ammor, coup d’envoi à Marrakech de la 11e édition du CREMA', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/actualite/en-presence-de-mme-ammor-coup-denvoi-a-marrakech-de-la-11e-edition-du-crema', 'summary': 'En présence de Mme Ammor, coup d’envoi à Marrakech de la 11e édition du CREMA. Le coup d’envoi a été donné vendredi à Marrakech à la 11e édition du Salon international des professionnels de l’hôtellerie, de la restauration, de la pâtisserie, de la boulangerie et de l’alimentaire (CREMAI), un évènement placé sous le Haut Patronage de Sa Majesté le Roi Mohammed VI, autour du thème « Hospitalité 2030 : Une ambition .', 'size': 3}, {'id': '131', 'title': 'CREMAI 2025 à Marrakech, le rendez-vous des professionnels de l’hôtellerie et de la restauration', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/cremai-2025-a-marrakech-le-rendez-vous-des-professionnels-de-lhotellerie-et-de-la-restauration/', 'summary': 'CREMAI 2025 à Marrakech, le rendez-vous des professionnels de l’hôtellerie et de la restauration. Le coup d’envoi a été donné vendredi à Marrakech à la 11e édition du Salon international des professionnels de l’hôtellerie, de la restauration, de la pâtisserie, de la boulangerie et de l’alimentaire (CREMAI), un évènement placé sous le Haut Patronage de Sa Majesté le Roi Mohammed VI, autour du thème “Hospitalité 2030 : Une ambition marocaine, un ', 'size': 3}, {'id': '135', 'title': 'Marrakech donne le coup d’envoi de la 11e édition du CREMAI', 'source': 'lnt.ma', 'link': 'https://lnt.ma/marrakech-donne-le-coup-denvoi-de-la-11e-edition-du-cremai/', 'summary': 'Marrakech donne le coup d’envoi de la 11e édition du CREMAI. La 11e édition du Salon international des professionnels de l’hôtellerie, de la restauration, de la pâtisserie, de la boulangerie et de l’alimentaire (CREMAI) s’est ouverte vendredi à Marrakech, sous le Haut Patronage de Sa Majesté le Roi Mohammed VI. Placée cette année sous le thème « Hospitalité 2030 : Une ambition marocaine, un rayonnement africain, . ', 'size': 3}], 'main_title': 'En présence de Mme Ammor, coup d’envoi à Marrakech de la 11e édition du CREMA'}, {'community_id': '2', 'articles': [{'id': '128', 'title': 'Le Maroc occupe une position particulière dans les dynamiques de coopération Europe-Afrique (Jacques Attali)', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/le-maroc-occupe-une-position-particuliere-dans-les-dynamiques-de-cooperation-europe-afrique-jacques-attali.html', 'summary': "Le Maroc occupe une position particulière dans les dynamiques de coopération Europe-Afrique (Jacques Attali). Le Maroc occupe une position bien particulière dans les dynamiques et l'avenir de la coopération entre l'Europe et l'Afrique, a affirmé vendredi l'écrivain et philosophe français Jacques Attali. L’article est apparu en premier sur .", 'size': 2}, {'id': '132', 'title': 'Trouville | Le Maroc, pont stratégique entre l’Europe et l’Afrique, selon Jacques Attali', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/trouville-le-maroc-pont-strategique-entre-leurope-et-lafrique-selon-jacques-attali/', 'summary': 'Trouville | Le Maroc, pont stratégique entre l’Europe et l’Afrique, selon Jacques Attali. Le Maroc occupe une position bien particulière dans les dynamiques et l’avenir de la coopération entre l’Europe et l’Afrique, a affirmé vendredi l’écrivain et philosophe français Jacques Attali. M. Attali, qui donnait la leçon inaugurale des 10èmes Rencontres géopolitiques de Trouville (nord de la France) où le Maroc est l’invité d’honneur, a plaidé pour “des ', 'size': 2}], 'main_title': 'Le Maroc occupe une position particulière dans les dynamiques de coopération Europe-Afrique (Jacques Attali)'}, {'community_id': '4', 'articles': [{'id': '147', 'title': 'Akhannouch : la santé, priorité absolue du gouvernement', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/442111-akhannouch-la-sante-priorite-absolue-du-gouvernement.html', 'summary': 'Akhannouch : la santé, priorité absolue du gouvernement. Le chef du gouvernement, Aziz Akhannouch, a affirmé samedi à Marrakech que le secteur de la santé figure au sommet des priorités de l’Exécutif, tout en réitérant son engagement à mener à terme les grands projets structurants lancés au cours de son mandat. Intervenant lors de la cinquième étape de la tournée « Massar Al-Injâzât . ', 'size': 2}, {'id': '154', 'title': 'M.Akhannouch depuis Marrakech : Le gouvernement a accordé une importance «\xa0primordiale\xa0» aux secteurs de la santé et de l’éducation', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/videos/m-akhannouch-depuis-marrakech-les-projets-de-developpement-sont-pour-le-citoyen-la-coupe-du-monde-nest-quun-accelerateur3', 'summary': 'M.Akhannouch depuis Marrakech : Le gouvernement a accordé une importance « primordiale » aux secteurs de la santé et de l’éducation. Le gouvernement a accordé une importance « primordiale » aux secteurs de la santé et de l’éducation, les plaçant au cœur des priorités en tant que piliers de tout projet de développement, a affirmé, samedi à Marrakech, le président du Rassemblement national des indépendants (RNI), Aziz Akhannouch. Intervenant lors de la 5e étape de la tournée nationale .', 'size': 2}], 'main_title': 'Akhannouch : la santé, priorité absolue du gouvernement'}, {'community_id': '6', 'articles': [{'id': '151', 'title': 'FIFA : Gianni Infantino en visite au Grand Stade de Tanger', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/FIFA-Gianni-Infantino-en-visite-au-Grand-Stade-de-Tanger_a71980.html', 'summary': 'FIFA : Gianni Infantino en visite au Grand Stade de Tanger.', 'size': 3}, {'id': '155', 'title': 'Gianni Infantino visite le Grand Stade de Tanger', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/videos/gianni-infantino-visite-le-grand-stade-de-tanger/', 'summary': 'Gianni Infantino visite le Grand Stade de Tanger. Le président de la Fédération internationale de football (FIFA), a visité le Grand Stade de Tanger afin de suivre l’état d’avancement des travaux en cours, qui sont "sur le point d’être achevés dans un délai record", a indiqué samedi la Fédération royale marocaine de football (FRMF).', 'size': 3}, {'id': '160', 'title': 'FRMF | Le président de la FIFA M. Gianni Infantino en visite au Grand Stade de Tanger', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/frmf-le-president-de-la-fifa-m-gianni-infantino-en-visite-au-grand-stade-de-tanger/', 'summary': 'FRMF | Le président de la FIFA M. Gianni Infantino en visite au Grand Stade de Tanger. M. Gianni Infantino a effectué une visite dans la ville de Tanger, aux côtés de M. Fouzi Lekjaa, président de la Fédération Royale Marocaine de Football, afin de suivre l’état d’avancement des travaux en cours au Grand Stade de Tanger, qui sont sur le point d’être achevés dans un délai record, en présence de M. ', 'size': 3}], 'main_title': 'FIFA : Gianni Infantino en visite au Grand Stade de Tanger'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
                        
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ? d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        // Fonction pour cacher le tooltip
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = '';
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
    
    
</body>




</html>
    