<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); 
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title"> Les principales actualités des dernières 24 heures

</div>    
        <div class="header-subtitle"> Dernière mise à jour : 05/09/2025 - 18h29</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"></div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '4', 'title': "Le Roi ordonne au CSO d'émettre une fatwa exhaustive sur la Zakat", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/440010-le-roi-ordonne-au-cso-demettre-une-fatwa-exhaustive-sur-la-zakat.html', 'summary': "Le Roi ordonne au CSO d'émettre une fatwa exhaustive sur la Zakat. Le Roi, Amir Al Mouminine, a ordonné au Conseil Supérieur des Oulémas (CSO), d’émettre une fatwa exhaustive clarifiant les règles de la Charia au sujet de la Zakat, indique vendredi un communiqué du Conseil. Ci-après la traduction du communiqué : « Le Conseil Supérieur des Oulémas annonce que Sa Majesté le Roi Mohammed VI, Amir Al . ", 'size': 5}, {'id': '11', 'title': 'S.M. le Roi ordonne au Conseil Supérieur des Oulémas d’émettre une fatwa exhaustive sur la Zakat', 'source': 'lematin.ma', 'link': 'https://lematin.ma/activites-royales/sm-le-roi-ordonne-aux-oulemas-demettre-une-fatwa-exhaustive-sur-la-zakat/299931', 'summary': 'S.M. le Roi ordonne au Conseil Supérieur des Oulémas d’émettre une fatwa exhaustive sur la Zakat. Voici la traduction du communiqué du Conseil Supérieur des Oulémas :Le Conseil Supérieur des Oulémas annonce que Sa Majesté le Roi Mohammed VI, Amir Al Mouminine, que Dieu L.', 'size': 5}, {'id': '112', 'title': 'SM le Roi ordonne au Conseil Supérieur des Oulémas d’émettre une fatwa exhaustive clarifiant les règles de la Charia au sujet de la Zakat', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/actualite/sm-le-roi-ordonne-au-conseil-superieur-des-oulemas-demettre-une-fatwa-exhaustive-clarifiant-les-regles-de-la-charia-au-sujet-de-la-zakat', 'summary': 'SM le Roi ordonne au Conseil Supérieur des Oulémas d’émettre une fatwa exhaustive clarifiant les règles de la Charia au sujet de la Zakat. Sa Majesté le Roi Mohammed VI, Amir Al Mouminine, que Dieu L’assiste, a bien voulu ordonner au Conseil Supérieur des Oulémas d’émettre une fatwa exhaustive clarifiant les règles de la Charia au sujet de la Zakat, indique un communiqué du Conseil. Voici la traduction du communiqué du Conseil Supérieur des Oulémas : « Le Conseil Supérieur .', 'size': 5}, {'id': '127', 'title': 'Charia relative à la Zakat : SM le Roi ordonne au Conseil Supérieur des Oulémas d’émettre une fatwa', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/au-royaume/charia-relative-a-la-zakat-sm-le-roi-ordonne-au-conseil-superieur-des-oulemas-demettre-une-fatwa/', 'summary': 'Charia relative à la Zakat : SM le Roi ordonne au Conseil Supérieur des Oulémas d’émettre une fatwa. SM le Roi Mohammed VI a bien voulu ordonner au Conseil Supérieur des Oulémas d’émettre une fatwa exhaustive clarifiant les règles de la Charia au sujet de la Zakat, indique un communiqué du Conseil.', 'size': 5}, {'id': '213', 'title': 'SM le Roi ordonne aux Oulémas d’émettre une fatwa exhaustive sur la Zakat', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/SM-le-Roi-ordonne-aux-Oulemas-d-emettre-une-fatwa-exhaustive-sur-la-Zakat_a71441.html', 'summary': "SM le Roi ordonne aux Oulémas d’émettre une fatwa exhaustive sur la Zakat. Sa Majesté le Roi Mohammed VI, Amir Al Mouminine, que Dieu L'assiste, a bien voulu ordonner au Conseil Supérieur des Oulémas d’émettre une fatwa exhaustive clarifiant les règles de la Charia au sujet de la Zakat, indique un communiqué du Conseil.", 'size': 5}], 'main_title': "Le Roi ordonne au CSO d'émettre une fatwa exhaustive sur la Zakat"}, {'community_id': '1', 'articles': [{'id': '7', 'title': 'Poutine menace de cibler toute force occidentale déployée en Ukraine', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/439993-poutine-menace-de-cibler-toute-force-occidentale-deployee-en-ukraine.html', 'summary': 'Poutine menace de cibler toute force occidentale déployée en Ukraine. Le président russe, Vladimir Poutine, a menacé vendredi les alliés de Kiev de cibler toute force occidentale déployée en Ukraine, au lendemain d’une réunion à Paris consacrée aux garanties de sécurité dans le cadre d’un hypothétique cessez-le-feu. Vingt-six pays, essentiellement européens, se sont engagés jeudi à Paris à soutenir militairement l’Ukraine au sol, en mer . ', 'size': 2}, {'id': '212', 'title': 'Poutine menace de bombarder les forces européennes en cas de déploiement en Ukraine', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Poutine-menace-de-bombarder-les-forces-europeennes-en-cas-de-deploiement-en-Ukraine_a71442.html', 'summary': 'Poutine menace de bombarder les forces européennes en cas de déploiement en Ukraine. Le président russe Vladimir Poutine a menacé vendredi les alliés européens de Kiev de cibler leurs forces si elles étaient déployées en Ukraine et dont le nombre, selon Volodymyr Zelensky, pourrait se compter en "milliers" en cas de cessez-le-feu.', 'size': 2}], 'main_title': 'Poutine menace de cibler toute force occidentale déployée en Ukraine'}, {'community_id': '2', 'articles': [{'id': '9', 'title': "Elim Mondial 2026 : face au Niger, les Lions de l'Atlas cherchent à maintenir le cap", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/439871-elim-mondial-2026-face-au-niger-les-lions-de-latlas-cherchent-a-maintenir-le-cap.html', 'summary': "Elim Mondial 2026 : face au Niger, les Lions de l'Atlas cherchent à maintenir le cap. L’équipe du Maroc A cherchera à maintenir le cap et décrocher le billet de la phase finale du Mondial-2026 de football dès la 7è journée des qualifications africaines, en affrontant son homologue du Niger, vendredi soir à Rabat (20h00 GMT+1), dans un stade principal du Complexe sportif Prince Moulay Abdellah complètement métamorphosé. Pour cette rencontre . ", 'size': 3}, {'id': '152', 'title': 'Qualifications du Mondial-2026 (match Maroc/Niger) : ouverture des portes du complexe sportif Prince Moulay Abdellah à 16h00', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/qualifications-du-mondial-2026-match-maroc-niger-ouverture-des-portes-du-complexe-sportif-prince-moulay-abdellah-a-16h00/', 'summary': 'Qualifications du Mondial-2026 (match Maroc/Niger) : ouverture des portes du complexe sportif Prince Moulay Abdellah à 16h00. Le complexe sportif Prince Moulay Abdellah de Rabat, qui accueillera vendredi soir (20h00) le match entre les sélections nationales du Maroc et du Niger pour le compte des qualifications africaines pour le Mondial 2026, ouvrira ses portes à partir de 16h00, indique la Fédération royale marocaine de football (FRMF). « Le Comité d’organisation porte à la .', 'size': 3}, {'id': '178', 'title': 'Match Maroc-Niger | Ouverture des portes du Stade Moulay Abdellah de Rabat à 16h00', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/match-maroc-niger-ouverture-des-portes-du-stade-moulay-abdellah-de-rabat-a-16h00/', 'summary': 'Match Maroc-Niger | Ouverture des portes du Stade Moulay Abdellah de Rabat à 16h00. Le complexe sportif Prince Moulay Abdellah de Rabat, qui accueillera vendredi soir (20h00) le match entre les sélections nationales du Maroc et du Niger pour le compte des qualifications africaines pour le Mondial 2026, ouvrira ses portes à partir de 16h00, indique la Fédération royale marocaine de football (FRMF). “Le Comité d’organisation porte à la ', 'size': 3}], 'main_title': "Elim Mondial 2026 : face au Niger, les Lions de l'Atlas cherchent à maintenir le cap"}, {'community_id': '3', 'articles': [{'id': '15', 'title': 'S.M. le Roi, Amir Al-Mouminine, préside une veillée religieuse en commémoration de l’Aïd Al-Mawlid', 'source': 'lematin.ma', 'link': 'https://lematin.ma/videos/aid-al-mawlid-sm-le-roi-amir-al-mouminine-preside-une-veillee-religieuse/299908', 'summary': "S.M. le Roi, Amir Al-Mouminine, préside une veillée religieuse en commémoration de l’Aïd Al-Mawlid. Sa Majesté le Roi Mohammed VI, Amir Al-Mouminine, que Dieu L'assiste, accompagné de S.A.R. le Prince Héritier Moulay El Hassan, de S.A.R. le Prince Moulay Rachid et de S.A. le.", 'size': 5}, {'id': '57', 'title': 'Aïd Al Mawlid : SM le Roi préside une veillée religieuse à Rabat', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Aid-Al-Mawlid-SM-le-Roi-preside-une-veillee-religieuse-a-Rabat_a71426.html', 'summary': "Aïd Al Mawlid : SM le Roi préside une veillée religieuse à Rabat. Sa Majesté le Roi Mohammed VI, Amir Al-Mouminine, que Dieu L'assiste, accompagné de SAR le Prince Héritier Moulay El Hassan, de SAR le Prince Moulay Rachid et de SA le Prince Moulay Ahmed, a présidé, jeudi 11 Rabie-I 1447, correspondant au 04 septembre 2025, à la mosquée Hassan à Rabat, une veillée religieuse en commémoration de l’Aïd Al-Mawlid Annabaoui Acharif.", 'size': 5}, {'id': '74', 'title': 'Le prince Moulay El Hassan inaugure à Rabat le stade Prince Moulay Abdellah après sa reconstruction', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/09/04/le-prince-moulay-el-hassan-inaugure-a-rabat-le-stade-prince-moulay-abdellah-apres-sa-reconstruction_1949001/', 'summary': 'Le prince Moulay El Hassan inaugure à Rabat le stade Prince Moulay Abdellah après sa reconstruction. Sur ordre du roi Mohammed VI, le prince héritier Moulay El Hassan a procédé, jeudi à Rabat, à l’inauguration du stade « Prince Moulay Abdellah », après des travaux de reconstruction ayant permis de mettre cette infrastructure sportive en conformité avec les normes FIFA 2030. Le nouveau stade, dont la reconstruction intervient en exécution des directives royales.', 'size': 2}, {'id': '101', 'title': 'SAR le Prince Héritier Moulay El Hassan inaugure  le stade «\xa0Prince Moulay Abdellah\xa0» après sa reconstruction', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/sar-le-prince-heritier-moulay-el-hassan-inaugure-le-stade-prince-moulay-abdellah-apres-sa-reconstruction-309522/', 'summary': 'SAR le Prince Héritier Moulay El Hassan inaugure le stade « Prince Moulay Abdellah » après sa reconstruction. Sur Ordre de Sa Majesté le Roi Mohammed VI, Son Altesse Royale le Prince Héritier Moulay El Hassan a procédé, jeudi à Rabat, à l’inauguration du stade « Prince Moulay Abdellah », après des travaux de reconstruction ayant permis de mettre cette prestigieuse infrastructure sportive en conformité avec les normes FIFA 2030.', 'size': 3}, {'id': '113', 'title': 'SM le Roi, Amir Al-Mouminine, préside à la mosquée Hassan à Rabat une veillée religieuse en commémoration de l’Aïd Al-Mawlid Annabaoui Acharif', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/actualite/sm-le-roi-amir-al-mouminine-preside-a-la-mosquee-hassan-a-rabat-une-veillee-religieuse-en-commemoration-de-laid-al-mawlid-annabaoui-acharif', 'summary': 'SM le Roi, Amir Al-Mouminine, préside à la mosquée Hassan à Rabat une veillée religieuse en commémoration de l’Aïd Al-Mawlid Annabaoui Acharif. Sa Majesté le Roi Mohammed VI, Amir Al-Mouminine, que Dieu L’assiste, accompagné de SAR le Prince Héritier Moulay El Hassan, de SAR le Prince Moulay Rachid et de SA le Prince Moulay Ahmed, a présidé, jeudi 11 Rabie-I 1447, correspondant au 04 septembre 2025, à la mosquée Hassan à Rabat, une veillée religieuse en commémoration .', 'size': 6}, {'id': '131', 'title': 'SM le Roi préside une veillée religieuse en commémoration de l’Aïd Al-Mawlid Annabaoui', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/au-royaume/sm-le-roi-preside-une-veillee-religieuse-en-commemoration-de-laid-al-mawlid-annabaoui/', 'summary': 'SM le Roi préside une veillée religieuse en commémoration de l’Aïd Al-Mawlid Annabaoui. Sa Majesté le Roi Mohammed VI, Amir Al-Mouminine, accompagné de SAR le Prince Héritier Moulay El Hassan, de SAR le Prince Moulay Rachid et de SA le Prince Moulay Ahmed, a présidé, jeudi 11 Rabie-I 1447, correspondant au 04 septembre 2025, à la mosquée Hassan à Rabat, une veillée religieuse en commémoration de l’Aïd Al-Mawlid Annabaoui Acharif.', 'size': 5}, {'id': '154', 'title': 'S.M. le Roi préside à la mosquée Hassan à Rabat une veillée religieuse en commémoration de l’Aïd Al-Mawlid Annabaoui Acharif', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/s-m-le-roi-preside-a-la-mosquee-hassan-a-rabat-une-veillee/', 'summary': 'S.M. le Roi préside à la mosquée Hassan à Rabat une veillée religieuse en commémoration de l’Aïd Al-Mawlid Annabaoui Acharif. Sa Majesté le Roi Mohammed VI, Amir Al-Mouminine, que Dieu L’assiste, accompagné de SAR le Prince Héritier Moulay El Hassan, de SAR le Prince Moulay Rachid et de SA le Prince Moulay Ahmed, a présidé, jeudi 11 Rabie-I 1447, correspondant au 04 septembre 2025, à la mosquée Hassan à Rabat, une veillée religieuse en commémoration .', 'size': 5}], 'main_title': 'SM le Roi, Amir Al-Mouminine, préside à la mosquée Hassan à Rabat une veillée religieuse en commémoration de l’Aïd Al-Mawlid Annabaoui Acharif'}, {'community_id': '4', 'articles': [{'id': '18', 'title': 'Aïd Al Mawlid Annabawi : Grâce Royale au profit de 681 personnes', 'source': 'lematin.ma', 'link': 'https://lematin.ma/activites-royales/aid-al-mawlid-annabawi-grace-royale-au-profit-de-681-personnes/299887', 'summary': 'Aïd Al Mawlid Annabawi : Grâce Royale au profit de 681 personnes. En voici le texte : A l’occasion de l’Aïd Al Mawlid Annabawi de cette année 1447H - 2025G, Sa Majesté le Roi Mohammed VI, que Dieu perpétue Sa gloire, a bien voulu accorder S.', 'size': 2}, {'id': '174', 'title': 'Le Roi Mohammed VI accorde sa grâce à 681 personnes', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/le-roi-mohammed-vi-accorde-sa-grace-a-681-personnes.html', 'summary': 'Le Roi Mohammed VI accorde sa grâce à 681 personnes. A l’occasion de l’Aïd Al Mawlid Annabawi, le Roi Mohammed VI a accordé sa grâce à 681 personnes dont certaines sont en détention et d’autres en liberté, condamnées par différents tribunaux du Royaume, annonce le ministère de la Justice dans un communiqué. * Les bénéficiaires de la Grâce Royale qui sont en détention sont au . L’article est apparu en premier sur .', 'size': 2}, {'id': '180', 'title': 'Aïd Al Mawlid Annabawi | Grâce Royale accordée à 681 détenus et condamnés', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/aid-al-mawlid-annabawi-grace-royale-accordee-a-681-detenus-et-condamnes/', 'summary': 'Aïd Al Mawlid Annabawi | Grâce Royale accordée à 681 détenus et condamnés. A l’occasion de l’Aïd Al Mawlid Annabawi, Sa Majesté le Roi Mohammed VI, que Dieu L’assiste, a bien voulu accorder Sa grâce à 681 personnes dont certaines sont en détention et d’autres en liberté, condamnées par différents tribunaux du Royaume, annonce le ministère de la Justice dans un communiqué. En voici le texte : “A ', 'size': 3}], 'main_title': 'Aïd Al Mawlid Annabawi | Grâce Royale accordée à 681 détenus et condamnés'}, {'community_id': '5', 'articles': [{'id': '25', 'title': 'Décès du couturier italien Giorgio Armani à 91 ans', 'source': 'lematin.ma', 'link': 'https://lematin.ma/monde/deces-du-couturier-italien-giorgio-armani-a-91-ans/299889', 'summary': "Décès du couturier italien Giorgio Armani à 91 ans. C'est avec une immense tristesse que le groupe Armani annonce le décès de son créateur, fondateur et infatigable moteur : Giorgio Armani.Dans cette entreprise.", 'size': 2}, {'id': '188', 'title': 'Décès de Giorgio Armani à 91 ans : la mode italienne perd l’un de ses maîtres', 'source': 'lnt.ma', 'link': 'https://lnt.ma/deces-de-giorgio-armani-a-91-ans-la-mode-italienne-perd-lun-de-ses-maitres/', 'summary': 'Décès de Giorgio Armani à 91 ans : la mode italienne perd l’un de ses maîtres. Le couturier italien Giorgio Armani, figure majeure de la mode contemporaine, est décédé à l’âge de 91 ans, entouré par ses proches, a annoncé jeudi son groupe. « C’est avec une immense tristesse que le groupe Armani annonce le décès de son créateur, fondateur et infatigable moteur : Giorgio Armani », indique le communiqué, qui . ', 'size': 2}], 'main_title': 'Décès du couturier italien Giorgio Armani à 91 ans'}, {'community_id': '6', 'articles': [{'id': '31', 'title': 'Conseil de gouvernement : Point de presse hebdomadaire de Mustapha Baitas', 'source': 'lematin.ma', 'link': 'https://lematin.ma/videos/conseil-de-gouvernement-point-de-presse-hebdomadaire-de-mustapha-baitas/299821', 'summary': 'Conseil de gouvernement : Point de presse hebdomadaire de Mustapha Baitas. Conseil de gouvernement : Point de presse hebdomadaire de Mustapha Baitas, porte-parole du gouvernement.', 'size': 2}, {'id': '71', 'title': 'Retraites : le gouvernement et les syndicats se réuniront bientôt pour poursuivre la discussion', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/09/04/retraites-le-gouvernement-et-les-syndicats-se-reuniront-bientot-pour-poursuivre-la-discussion_1948994/', 'summary': 'Retraites : le gouvernement et les syndicats se réuniront bientôt pour poursuivre la discussion. Mustapha Baitas, ministre délégué auprès du chef du gouvernement chargé des Relations avec le Parlement et porte-parole du gouvernement, a annoncé la tenue, dans les prochains jours, d’une réunion entre le gouvernement et les syndicats. Lors du point de presse tenu à l’issue du Conseil de gouvernement ce jeudi, il a précisé que cette rencontre.', 'size': 2}], 'main_title': 'Conseil de gouvernement : Point de presse hebdomadaire de Mustapha Baitas'}, {'community_id': '7', 'articles': [{'id': '33', 'title': "Séisme en Afghanistan: Le bilan s'alourdit à plus de 2.200 morts", 'source': 'lematin.ma', 'link': 'https://lematin.ma/monde/seisme-en-afghanistan-le-bilan-salourdit-a-plus-de-2200-morts/299815', 'summary': "Séisme en Afghanistan: Le bilan s'alourdit à plus de 2.200 morts. Le tremblement de terre, d'une magnitude de 6, a dévasté plusieurs provinces de cette région montagneuse et isolée, rasant des villages entiers et piégeant de nombreuses person.", 'size': 2}, {'id': '87', 'title': "Séisme en Afghanistan : le bilan s'alourdit à plus de 2.200 morts", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/09/04/seisme-en-afghanistan-le-bilan-salourdit-a-plus-de-2-200-morts_1948887/', 'summary': "Séisme en Afghanistan : le bilan s'alourdit à plus de 2.200 morts. Le séisme de magnitude 6 qui a frappé dimanche soir l’Afghanistan a fait plus de 2.200 morts, selon le bilan actualisé jeudi par les autorités talibanes qui fait de loin de ce tremblement de terre le plus meurtrier de l’histoire récente du pays. Dans les villages à flanc de montagne de la province de Kounar,.", 'size': 2}], 'main_title': "Séisme en Afghanistan: Le bilan s'alourdit à plus de 2.200 morts"}, {'community_id': '8', 'articles': [{'id': '53', 'title': 'Gad Elmaleh revient à Casablanca avec son spectacle « Lui-même »', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Gad-Elmaleh-revient-a-Casablanca-avec-son-spectacle-Lui-meme_a71430.html', 'summary': 'Gad Elmaleh revient à Casablanca avec son spectacle « Lui-même ». Fidèle à ses racines et à sa ville natale, l’humoriste Gad Elmaleh signe son grand retour sur la scène marocaine avec son dernier spectacle "Lui-même", qu’il présentera à Casablanca les 25, 26 et 27 septembre.', 'size': 2}, {'id': '173', 'title': 'Casablanca, un retour «\xa0en famille\xa0» pour Gad Elmaleh', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/casablanca-un-retour-en-famille-pour-gad-elmaleh.html', 'summary': 'Casablanca, un retour « en famille » pour Gad Elmaleh. Fidèle à ses racines et à sa ville natale, l’humoriste Gad Elmaleh signe son grand retour sur la scène marocaine avec son dernier spectacle « Lui-même », qu’il présentera à Casablanca les 25, 26 et 27 septembre. Pour Gad Elmaleh, retrouver son public à Casablanca, c’est « comme jouer devant sa famille ». L’humoriste a exprimé, lors d’une conférence . L’article est apparu en premier sur .', 'size': 2}], 'main_title': 'Gad Elmaleh revient à Casablanca avec son spectacle « Lui-même »'}, {'community_id': '9', 'articles': [{'id': '56', 'title': 'Gaza-Cisjordanie : le Maroc appelle au retour à la table des négociations', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Gaza-Cisjordanie-le-Maroc-appelle-au-retour-a-la-table-des-negociations_a71427.html', 'summary': 'Gaza-Cisjordanie : le Maroc appelle au retour à la table des négociations. Le Maroc, sous la conduite de Sa Majesté le Roi Mohammed VI, croit en la paix comme choix stratégique et en la nécessité de se départir de la logique de gestion de crise face aux mesures israéliennes inacceptables, a affirmé, jeudi au Caire, le ministre des Affaires étrangères, de la Coopération africaine et des Marocains résidant à l’étranger, Nasser Bourita.', 'size': 5}, {'id': '86', 'title': 'Le Maroc réitère son appel à un cessez-le-feu immédiat à Gaza pour “mettre un terme à la guerre”', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/09/04/le-maroc-reitere-son-appel-a-un-cessez-le-feu-immediat-a-gaza-pour-mettre-un-terme-a-la-guerre_1948911/', 'summary': 'Le Maroc réitère son appel à un cessez-le-feu immédiat à Gaza pour “mettre un terme à la guerre”. Le Maroc, sous la conduite du roi Mohammed VI, “croit en la paix comme choix stratégique et en la nécessité de se départir de la logique de gestion de crise face aux mesures israéliennes inacceptables”, a affirmé, jeudi au Caire, le ministre des Affaires étrangères, de la Coopération africaine et des Marocains résidant à l’étranger,.', 'size': 5}, {'id': '177', 'title': 'Proche-Orient : Le Maroc, sous la conduite de SM le Roi, croit en la paix comme choix stratégique (Nasser Bourita)', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/proche-orient-le-maroc-sous-la-conduite-de-sm-le-roi-croit-en-la-paix-comme-choix-strategique-nasser-bourita.html', 'summary': 'Proche-Orient : Le Maroc, sous la conduite de SM le Roi, croit en la paix comme choix stratégique (Nasser Bourita). Le Maroc, sous la conduite du Roi Mohammed VI, croit en la paix comme choix stratégique et en la nécessité de se départir de la logique de gestion de crise face aux mesures israéliennes inacceptables, a affirmé, jeudi au Caire, le ministre des Affaires étrangères, de la Coopération africaine et des Marocains résidant à l’étranger, . L’article est apparu en premier sur .', 'size': 5}, {'id': '182', 'title': 'Le Maroc, sous la conduite de SM le Roi, prône la paix et rejette la gestion de crise face aux mesures israéliennes (Bourita)', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/le-maroc-sous-la-conduite-de-sm-le-roi-prone-la-paix-et-rejette-la-gestion-de-crise-face-aux-mesures-israeliennes-bourita/', 'summary': 'Le Maroc, sous la conduite de SM le Roi, prône la paix et rejette la gestion de crise face aux mesures israéliennes (Bourita). Le Maroc, sous la conduite de Sa Majesté le Roi Mohammed VI, croit en la paix comme choix stratégique et en la nécessité de se départir de la logique de gestion de crise face aux mesures israéliennes inacceptables, a affirmé, jeudi au Caire, le ministre des Affaires étrangères, de la Coopération africaine et des Marocains ', 'size': 5}, {'id': '189', 'title': 'Bourita : le Maroc appelle à relancer les négociations au Proche-Orient', 'source': 'lnt.ma', 'link': 'https://lnt.ma/bourita-le-maroc-appelle-a-relancer-les-negociations-au-proche-orient/', 'summary': 'Bourita : le Maroc appelle à relancer les négociations au Proche-Orient. Le Maroc, sous la conduite de Sa Majesté le Roi Mohammed VI, considère la paix comme un choix stratégique et juge nécessaire de s’éloigner de la logique de gestion de crise face aux mesures israéliennes jugées inacceptables. C’est ce qu’a affirmé le ministre des Affaires étrangères, de la Coopération africaine et des Marocains résidant à . ', 'size': 5}], 'main_title': 'Gaza-Cisjordanie : le Maroc appelle au retour à la table des négociations'}, {'community_id': '10', 'articles': [{'id': '70', 'title': 'Immobilier : stagnation des prix au niveau national, légère hausse à Rabat et Marrakech', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/09/04/immobilier-stagnation-des-prix-au-niveau-national-legere-hausse-a-rabat-et-marrakech_1949012/', 'summary': 'Immobilier : stagnation des prix au niveau national, légère hausse à Rabat et Marrakech. L’indice des prix des actifs immobiliers (IPAI) a enregistré, en glissement annuel, une stagnation au cours du deuxième trimestre 2025, indiquent Bank Al-Maghrib (BAM) et l’Agence nationale de la conservation foncière du cadastre et de la cartographie (ANCFCC). Cette stagnation recouvre une hausse de 0,1% des prix des biens résidentiels et une baisse de 0,3%.', 'size': 2}, {'id': '100', 'title': 'Les prix des biens immobiliers inchangés deuxième trimestre', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/les-prix-des-biens-immobiliers-inchanges-deuxieme-trimestre-309527/', 'summary': 'Les prix des biens immobiliers inchangés deuxième trimestre. L’indice des prix des actifs immobiliers (IPAI) a enregistré, en glissement annuel, une stagnation au cours du deuxième trimestre 2025, indiquent Bank Al-Maghrib (BAM) et l’Agence nationale de la conservation foncière du cadastre et de la cartographie (ANCFCC). Cette stagnation recouvre une hausse de 0,1% des prix des biens résidentiels', 'size': 2}], 'main_title': 'Immobilier : stagnation des prix au niveau national, légère hausse à Rabat et Marrakech'}, {'community_id': '12', 'articles': [{'id': '79', 'title': 'Accidents de la route : le gouvernement augmente l’indemnisation des victimes', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/09/04/accidents-de-la-route-le-gouvernement-augmente-lindemnisation-des-victimes_1948959/', 'summary': 'Accidents de la route : le gouvernement augmente l’indemnisation des victimes. Le Conseil de gouvernement a adopté, jeudi, un projet de loi relatif à l’indemnisation des victimes d’accidents causés par des véhicules terrestres à moteur, présenté par le ministre de la Justice, Abdellatif Ouahbi. Il s’agit du projet de loi n° 24.70 modifiant et complétant le Dahir portant loi n° 1.84.177 du 2 octobre 1984, sur.', 'size': 2}, {'id': '115', 'title': 'Le Conseil de gouvernement adopte un projet de loi relatif à l’indemnisation des victimes d’accidents causés par des véhicules terrestres à moteur', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/actualite/le-conseil-de-gouvernement-adopte-un-projet-de-loi-relatif-a-lindemnisation-des-victimes-daccidents-causes-par-des-vehicules-terrestres-a-moteur', 'summary': 'Le Conseil de gouvernement adopte un projet de loi relatif à l’indemnisation des victimes d’accidents causés par des véhicules terrestres à moteur. Le Conseil de gouvernement a adopté, jeudi, un projet de loi relatif à l’indemnisation des victimes d’accidents causés par des véhicules terrestres à moteur, présenté par le ministre de la Justice, Abdellatif Ouahbi. Il s’agit du projet de loi n° 24.70 modifiant et complétant le Dahir portant loi n° 1.84.177 du 2 octobre 1984, .', 'size': 2}], 'main_title': 'Accidents de la route : le gouvernement augmente l’indemnisation des victimes'}, {'community_id': '13', 'articles': [{'id': '96', 'title': "Le Caire : Bourita s'entretient avec son homologue égyptien", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/09/04/le-caire-bourita-sentretient-avec-son-homologue-egyptien_1948812/', 'summary': "Le Caire : Bourita s'entretient avec son homologue égyptien. Le ministre des Affaires étrangères, de la Coopération africaine et des Marocains résidant à l’étranger, Nasser Bourita, s’est entretenu, jeudi au Caire, avec le ministre égyptien des Affaires étrangères, de l’Immigration et des Affaires des Égyptiens à l’étranger, Badr Abdel Aaty. Lors de cette entrevue, tenue en marge de la 164e session du Conseil de.", 'size': 3}, {'id': '142', 'title': 'Conseil de la Ligue des États arabes : ouverture des travaux de la 164e session au Caire avec la participation du Maroc', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/pouvoirs/conseil-de-la-ligue-des-etats-arabes-ouverture-des-travaux-de-la-164e-session-au-caire-avec-la-participation-du-maroc/', 'summary': "Conseil de la Ligue des États arabes : ouverture des travaux de la 164e session au Caire avec la participation du Maroc. Le Royaume est représenté à cette session, tenue au siège du Secrétariat général de la Ligue des États arabes, par une délégation conduite par le ministre des Affaires étrangères, de la Coopération africaine et des Marocains résidant à l'étranger, Nasser Bourita.", 'size': 3}, {'id': '185', 'title': 'Nasser Bourita s’entretient au Caire avec son homologue égyptien Badr Abdel Aaty', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/nasser-bourita-sentretient-au-caire-avec-son-homologue-egyptien-badr-abdel-aaty/', 'summary': 'Nasser Bourita s’entretient au Caire avec son homologue égyptien Badr Abdel Aaty. Le ministre des Affaires étrangères, de la Coopération africaine et des Marocains résidant à l’étranger, Nasser Bourita, s’est entretenu, jeudi au Caire, avec le ministre égyptien des Affaires étrangères, de l’Immigration et des Affaires des Égyptiens à l’étranger, Badr Abdel Aaty. Lors de cette entrevue, tenue en marge de la 164e session du Conseil de la ', 'size': 3}], 'main_title': "Le Caire : Bourita s'entretient avec son homologue égyptien"}, {'community_id': '14', 'articles': [{'id': '98', 'title': 'Le dirham se déprécie légèrement face au dollar et à l’euro', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/le-dirham-se-deprecie-legerement-face-au-dollar-et-a-leuro-309532/', 'summary': 'Le dirham se déprécie légèrement face au dollar et à l’euro. Le dirham s’est déprécié de 0,3% face au dollar américain et de 0,7% vis-à-vis de l’euro durant la semaine du 28 août au 3 septembre 2025, selon Bank Al-Maghrib (BAM). Au cours de cette période, aucune opération d’adjudication n’a été réalisée sur le marché des changes, indique BAM dans son', 'size': 2}, {'id': '151', 'title': 'Le dirham se déprécie de 0,3% face au dollar du 28 août au 3 septembre', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/le-dirham-se-deprecie-de-03-face-au-dollar-du-28-aout-au-3-septembre/', 'summary': 'Le dirham se déprécie de 0,3% face au dollar du 28 août au 3 septembre. Le dirham s’est déprécié de 0,3% face au dollar américain et de 0,7% vis-à-vis de l’euro durant la semaine du 28 août au 3 septembre 2025, selon Bank Al-Maghrib (BAM). Au cours de cette période, aucune opération d’adjudication n’a été réalisée sur le marché des changes, indique BAM dans son récent bulletin des indicateurs hebdomadaires. .', 'size': 2}], 'main_title': 'Le dirham se déprécie légèrement face au dollar et à l’euro'}, {'community_id': '15', 'articles': [{'id': '104', 'title': 'DP World connecte les hubs d’Agadir et Casablanca aux ports de Londres et Anvers', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/dp-world-connecte-les-hubs-dagadir-et-casablanca-aux-ports-de-londres-et-anvers-309501/', 'summary': 'DP World connecte les hubs d’Agadir et Casablanca aux ports de Londres et Anvers. L’opérateur portuaire DP World lance, à compter de novembre 2025, une ligne maritime commerciale reliant le Maroc au Royaume-Uni et à l’Europe du Nord, destinée à réduire les délais d’exportation des fruits et légumes de près de deux jours vers leurs destinations finales. Le nouveau service baptisé « Atlas » reliera les', 'size': 2}, {'id': '146', 'title': 'Exportations des fruits et légumes : Une nouvelle ligne maritime entre le Maroc et le Royaume-Uni', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/affaires/exportations-des-fruits-et-legumes-une-nouvelle-ligne-maritime-entre-le-maroc-et-le-royaume-uni/', 'summary': 'Exportations des fruits et légumes : Une nouvelle ligne maritime entre le Maroc et le Royaume-Uni. Le nouveau service «Atlas» reliera les principaux hubs d’Agadir et de Casablanca, aux ports et terminaux de DP World, London Gateway et Antwerp Gateway, grâce à deux navires dédiés à partir de novembre 2025.', 'size': 2}], 'main_title': 'DP World connecte les hubs d’Agadir et Casablanca aux ports de Londres et Anvers'}, {'community_id': '16', 'articles': [{'id': '132', 'title': 'Accidents de route : Près de 7,9 MMDH versés en indemnisations en 2024', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/au-royaume/accidents-de-route-pres-de-79-mmdh-verses-en-indemnisations-en-2024/', 'summary': "Accidents de route : Près de 7,9 MMDH versés en indemnisations en 2024. En réponse à une question lors du point de presse à l'issue du Conseil de gouvernement, Mustapha Baitas a précisé que le nombre d'accidents de la route enregistrés au cours de la même année a atteint environ 655.000 accidents, dont plus de 143.000 accidents corporels ayant causé environ 4.000 décès.", 'size': 3}, {'id': '153', 'title': 'Accidents de route: près de 7,9 MMDH versés en indemnisations en 2024', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/accidents-de-route-pres-de-79-mmdh-verses-en-indemnisations-en-2024/', 'summary': 'Accidents de route: près de 7,9 MMDH versés en indemnisations en 2024. Près de 7,9 milliards de dirhams (MMDH) ont été versés en indemnisations par les institutions et les compagnies d’assurance au titre des accidents de circulation en 2024, a indiqué le ministre délégué chargé des Relations avec le Parlement, porte-parole du gouvernement, Mustapha Baitas. En réponse à une question lors du point de presse à l’issue .', 'size': 3}, {'id': '219', 'title': 'Accidents de route: près de 8 milliards DH versés en indemnisations en 2024', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/actualite/accidents-de-route-pres-de-8-milliards-dh-verses-en-indemnisations-en-2024', 'summary': 'Accidents de route: près de 8 milliards DH versés en indemnisations en 2024. Près de 7,9 milliards de dirhams (MMDH) ont été versés en indemnisations par les institutions et les compagnies d’assurance au titre des accidents de circulation en 2024, a indiqué le ministre délégué chargé des Relations avec le Parlement, porte-parole du gouvernement, Mustapha Baitas. En réponse à une question lors du point de presse à l’issue .', 'size': 3}], 'main_title': 'Accidents de route : Près de 7,9 MMDH versés en indemnisations en 2024'}, {'community_id': '11', 'articles': [{'id': '206', 'title': 'FAO : les prix mondiaux des denrées alimentaires stables en août', 'source': 'lematin.ma', 'link': 'https://lematin.ma/economie/fao-les-prix-mondiaux-des-denrees-alimentaires-stables-en-aout/299956', 'summary': 'FAO : les prix mondiaux des denrées alimentaires stables en août. L’Organisation des Nations unies pour l’alimentation et l’agriculture (FAO) a indiqué, vendredi à Rome, que son indice des prix alimentaires a légèrement progressé à 130,1 points e.', 'size': 2}, {'id': '224', 'title': 'FAO: L’indice des prix des produits alimentaires reste inchangé en août', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/fao-lindice-des-prix-des-produits-alimentaires-reste-inchange-en-aout/', 'summary': 'FAO: L’indice des prix des produits alimentaires reste inchangé en août. L’indice des prix des produits alimentaires de l’Organisation des Nations unies pour l’alimentation et l’agriculture (FAO) a affiché une valeur moyenne de 130,1 points en août, soit à peine plus que son niveau révisé de juillet (130,0 points) et 6,9% de plus qu’une année auparavant. L’indice, qui suit les changements mensuels des prix internationaux d’un .', 'size': 2}], 'main_title': 'FAO : les prix mondiaux des denrées alimentaires stables en août'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
                        
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ? d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        // Fonction pour cacher le tooltip
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = '';
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
    
    
</body>




</html>
    