<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); 
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title"> Les principales actualités des dernières 24 heures

</div>    
        <div class="header-subtitle"> Dernière mise à jour : 31/08/2025 - 12h24</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"></div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '2', 'articles': [{'id': '0', 'title': "Change : le dirham s'apprécie face à l'euro et se déprécie vis-à-vis du dollar", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/439263-change-le-dirham-sapprecie-face-a-leuro-et-se-deprecie-vis-a-vis-du-dollar-5.html', 'summary': "Change : le dirham s'apprécie face à l'euro et se déprécie vis-à-vis du dollar. Bank Al-Maghrib (BAM), a fait savoir que durant la période du 22 au 27 août, le dirham s’est apprécié de 0,2% face à l’euro et s’est déprécié de 0,5% vis-à-vis du dollar américain. Dans son bulletin des indicateurs hebdomadaires, BAM précise qu’au cours de cette période, aucune opération d’adjudication n’a été réalisée sur le marché . ", 'size': 2}, {'id': '75', 'title': 'Les indicateurs hebdomadaires de BAM en 5 points clés', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/les-indicateurs-hebdomadaires-de-bam-en-5-points-cles-26/', 'summary': 'Les indicateurs hebdomadaires de BAM en 5 points clés. Voici cinq points clés des indicateurs hebdomadaires de Bank Al-Maghrib (BAM) pour la période du 22 au 27 août 2025 : 1. Le dirham s’est apprécié de 0,2% vis-à-vis de l’euro et s’est déprécié de 0,5% face au dollar américain. 2. Aucune opération d’adjudication n’a été réalisée sur le marché des changes. Lire aussi : Tourisme .', 'size': 2}], 'main_title': "Change : le dirham s'apprécie face à l'euro et se déprécie vis-à-vis du dollar"}, {'community_id': '1', 'articles': [{'id': '1', 'title': 'BAM : accroissement annuel de 7,7%\xa0de la masse monétaire en juillet', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/439187-bam-accroissement-annuel-de-77-de-la-masse-monetaire-en-juillet.html', 'summary': 'BAM : accroissement annuel de 7,7% de la masse monétaire en juillet. Bank Al-Maghrib (BAM), a fait état d’un accroissement annuel de 7,7% de la masse monétaire (agrégat M3) en juillet 2025 (après 8% en juin dernier), pour s’établir à 1.970,3 milliards de dirhams (MMDH). Dans son récent bulletin de statistiques monétaires, BAM explique que cette évolution est le résultat d’une décélération du crédit bancaire au secteur . ', 'size': 2}, {'id': '71', 'title': 'Secteur non financier : la progression du crédit bancaire décélère à 3,4% en juillet', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/secteur-non-financier-la-progression-du-credit-bancaire-decelere-a-34-en-juillet/', 'summary': 'Secteur non financier : la progression du crédit bancaire décélère à 3,4% en juillet. La croissance du crédit bancaire au secteur non financier (SNF) a enregistré une décélération de 4,4% à 3,4% en juillet 2025, ressort-il du récent bulletin de statistiques monétaires de Bank Al-Maghrib (BAM). Cette évolution traduit particulièrement le ralentissement de la croissance des prêts alloués aux sociétés non financières privées à 1,2%, indique BAM, ajoutant que .', 'size': 2}], 'main_title': 'BAM : accroissement annuel de 7,7%\xa0de la masse monétaire en juillet'}, {'community_id': '6', 'articles': [{'id': '4', 'title': 'Ligue 1: Hamza Igamane frappe fort pour ses débuts avec Lille', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/439314-ligue-1-hamza-igamane-frappe-fort-pour-ses-debuts-avec-lille.html', 'summary': 'Ligue 1: Hamza Igamane frappe fort pour ses débuts avec Lille. A peine 24 heures après avoir signé au LOSC Lille, l’international marocain Hamza Igamane a marqué les esprits pour son premier match en Ligue 1, en inscrivant un doublé lors de la large victoire de son nouveau club (7-1), en déplacement samedi à Lorient pour le compte de la 3e journée. Entré en jeu en . ', 'size': 2}, {'id': '25', 'title': 'Ligue 1 : Igamane doublé, Sahraoui conclut… Lille écrase Lorient', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Ligue-1-Igamane-double-Sahraoui-conclut-Lille-ecrase-Lorient_a71234.html', 'summary': 'Ligue 1 : Igamane doublé, Sahraoui conclut Lille écrase Lorient. Hamza Igamane brille dès ses débuts et inscrit un doublé, tandis qu’Osame Sahraoui scelle la large victoire du LOSC contre Lorient (7-1) en Ligue 1.', 'size': 2}], 'main_title': 'Ligue 1: Hamza Igamane frappe fort pour ses débuts avec Lille'}, {'community_id': '8', 'articles': [{'id': '10', 'title': 'Gianni Infantino : Le Maroc est un grand pays de football', 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/gianni-infantino-le-maroc-est-un-grand-pays-de-football/298951', 'summary': 'Gianni Infantino : Le Maroc est un grand pays de football. Dans une déclaration à la MAP, le patron du football mondial n’a pas caché sa satisfaction : « Je suis très content pour le Maroc qui a remporté son troisième sacre du CHAN et démo.', 'size': 2}, {'id': '105', 'title': 'Gianni Infantino : «\xa0Le Maroc, un grand pays du football\xa0»', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/influences/gianni-infantino-le-maroc-un-grand-pays-du-football/', 'summary': 'Gianni Infantino : « Le Maroc, un grand pays du football ». "Je suis très content pour le Maroc qui a remporté son troisième sacre du CHAN et démontré qu\'il mérite amplement le trophée", a notamment indiqué le patron du footbal mondial.', 'size': 2}], 'main_title': 'Gianni Infantino : Le Maroc est un grand pays de football'}, {'community_id': '4', 'articles': [{'id': '12', 'title': 'S.M. le Roi félicite la sélection nationale de football des joueurs locaux vainqueurs du CHAN-2024', 'source': 'lematin.ma', 'link': 'https://lematin.ma/activites-royales/sm-le-roi-felicite-la-selection-nationale-des-joueurs-vainqueurs-du-chan/298929', 'summary': "S.M. le Roi félicite la sélection nationale de football des joueurs locaux vainqueurs du CHAN-2024. Dans ce message, S.M. le Roi souligne avoir suivi avec une grande fierté et enthousiasme votre victoire bien méritée à la finale de la huitième édition du Championnat d'A.", 'size': 3}, {'id': '47', 'title': 'Le roi Mohammed VI félicite la sélection nationale des joueurs locaux vainqueurs du CHAN 2024', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/175320/mohammed-felicite-selection-nationale-joueurs.html', 'summary': 'Le roi Mohammed VI félicite la sélection nationale des joueurs locaux vainqueurs du CHAN 2024. Le roi Mohammed VI a adressé un message de félicitations aux membres de la sélection nationale de football des joueurs locaux, vainqueurs du Championnat d’Afrique des nations de football (CHAN 2024).', 'size': 4}, {'id': '51', 'title': 'SM le Roi adresse un message de félicitations aux membres de la sélection nationale de football vainqueurs du CHAN', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/une/sm-le-roi-adresse-un-message-de-felicitations-aux-membres-de-la-selection-nationale-de-football-vainqueurs-du-chan', 'summary': 'SM le Roi adresse un message de félicitations aux membres de la sélection nationale de football vainqueurs du CHAN. Sa Majesté le Roi Mohammed VI a adressé un message de félicitations aux membres de la sélection nationale de football des joueurs locaux, vainqueurs du Championnat d’Afrique des Nations de football (CHAN-2024). Dans ce message, SM le Roi souligne avoir suivi avec une grande fierté et enthousiasme « votre victoire bien méritée à la finale de .', 'size': 5}, {'id': '80', 'title': 'Le Roi Mohammed VI adresse un message de félicitations à la sélection nationale de football des joueurs locaux vainqueurs du CHAN-2024', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/le-roi-mohammed-vi-adresse-un-message-de-felicitations-aux-membres-de-la-selection-nationale-de-football-des-joueurs-locaux-vainqueurs-du-chan-2024.html', 'summary': 'Le Roi Mohammed VI adresse un message de félicitations à la sélection nationale de football des joueurs locaux vainqueurs du CHAN-2024. Le Roi Mohammed VI a adressé un message de félicitations aux membres de la sélection nationale de football des joueurs locaux, vainqueurs du Championnat d’Afrique des Nations de football (CHAN-2024). Dans ce message, le Roi souligne avoir suivi avec une grande fierté et enthousiasme « votre victoire bien méritée à la finale de la huitième édition . L’article est apparu en premier sur .', 'size': 5}, {'id': '106', 'title': 'CHAN 2024 : SM le Roi félicite les Lions de l’Atlas', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/influences/chan-2024-sm-le-roi-felicite-les-lions-de-latlas/', 'summary': "CHAN 2024 : SM le Roi félicite les Lions de l’Atlas. Sa Majesté le Roi Mohammed VI a adressé un message de félicitations aux membres de la sélection nationale de football des joueurs locaux, vainqueurs du Championnat d'Afrique des Nations de football (CHAN-2024).", 'size': 5}], 'main_title': 'SM le Roi adresse un message de félicitations aux membres de la sélection nationale de football vainqueurs du CHAN'}, {'community_id': '3', 'articles': [{'id': '14', 'title': 'Kenya: la Fondation Mohammed VI des Ouléma Africains organise les éliminatoires du concours du Hadith Nabawi Acharif', 'source': 'lematin.ma', 'link': 'https://lematin.ma/nation/la-fondation-mohammed-vi-organise-les-eliminatoires-du-concours-du-hadith/298901', 'summary': "Kenya: la Fondation Mohammed VI des Ouléma Africains organise les éliminatoires du concours du Hadith Nabawi Acharif. Un total de 22 candidats et candidates issus des différentes régions du Kenya ont participé à ce concours, qui s'est déroulé au Collège islamique de Nairobi et qui vise à faire.", 'size': 2}, {'id': '81', 'title': 'Kenya: la Fondation Mohammed VI des Ouléma Africains organise les éliminatoires du 2e concours du Hadith Nabawi Acharif', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/kenya-la-fondation-mohammed-vi-des-oulema-africains-organise-les-eliminatoires-du-2e-concours-du-hadith-nabawi-acharif.html', 'summary': 'Kenya: la Fondation Mohammed VI des Ouléma Africains organise les éliminatoires du 2e concours du Hadith Nabawi Acharif. La section de la Fondation Mohammed VI des Ouléma Africains au Kenya a organisé, samedi à Nairobi, les éliminatoires de la 2e édition du concours de la Fondation du Hadith Nabawi Acharif. Un total de 22 candidats et candidates issus des différentes régions du Kenya ont participé à ce concours, qui s’est déroulé au Collège . L’article est apparu en premier sur .', 'size': 2}], 'main_title': 'Kenya: la Fondation Mohammed VI des Ouléma Africains organise les éliminatoires du concours du Hadith Nabawi Acharif'}, {'community_id': '10', 'articles': [{'id': '32', 'title': 'Officiel : Azzedine Ounahi s’engage avec Girona jusqu’en 2030', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Officiel-Azzedine-Ounahi-s-engage-avec-Girona-jusqu-en-2030_a71226.html', 'summary': 'Officiel : Azzedine Ounahi s’engage avec Girona jusqu’en 2030. Le Girona FC a officialisé ce samedi l’arrivée d’Azzedine Ounahi en provenance de l’Olympique de Marseille. Le milieu de terrain, âgé de 25 ans, s’est engagé avec le club catalan jusqu’en juin 2030.', 'size': 2}, {'id': '48', 'title': 'Mercato : Azzedine Ounahi rejoint le Girona FC en Espagne', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/175307/mercato-azzedine-ounahi-rejoint-girona.html', 'summary': 'Mercato : Azzedine Ounahi rejoint le Girona FC en Espagne. À moins de trois jours de la clôture du mercato estival, lOlympique de Marseille a finalisé le transfert de son joueur marocain Azzedine Ounahi vers le Girona FC. À 25 ans, linternational marocain a effectué son transfert définitif, après un prêt au club grec Panathinaïkos la saison dernière.', 'size': 2}], 'main_title': 'Officiel : Azzedine Ounahi s’engage avec Girona jusqu’en 2030'}, {'community_id': '5', 'articles': [{'id': '46', 'title': 'Le Maroc interdit les produits cosmétiques contenant du TPO', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/175323/maroc-interdit-produits-cosmetiques-contenant.html', 'summary': 'Le Maroc interdit les produits cosmétiques contenant du TPO. L’Agence marocaine du médicament et des produits de santé (AMMPS) a annoncé l’interdiction de la mise sur le marché, la fabrication, l’importation, la distribution et l’utilisation des produits cosmétiques contenant de l’oxyde de diphényl triméthylbenzoyl phosphine, connu sous le nom de TPO.', 'size': 4}, {'id': '84', 'title': 'Maroc : Interdiction des produits cosmétiques contenant du TPO (AMMPS)', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/maroc-interdiction-des-produits-cosmetiques-contenant-du-tpo-ammps.html', 'summary': 'Maroc : Interdiction des produits cosmétiques contenant du TPO (AMMPS). L’Agence marocaine du médicament et des produits de santé (AMMPS) a annoncé l’interdiction de la mise sur le marché, la fabrication, l’importation, la distribution et l’utilisation des produits cosmétiques contenant de l’Oxyde de Diphényl Triméthylbenzoyl Phosphine, connu sous le nom de TPO. Dans un communiqué, l’AMMPS porte à la connaissance des professionnels de santé, des . L’article est apparu en premier sur .', 'size': 4}, {'id': '101', 'title': "L'AMPPS interdit les produits cosmétiques contenant du TPO", 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/L-AMPPS-interdit-les-produits-cosmetiques-contenant-du-TPO_a71236.html', 'summary': "L'AMPPS interdit les produits cosmétiques contenant du TPO. L’Agence marocaine du médicament et des produits de santé (AMMPS) a annoncé l’interdiction de la mise sur le marché, la fabrication, l'importation, la distribution et l’utilisation des produits cosmétiques contenant de l'Oxyde de Diphényl Triméthylbenzoyl Phosphine, connu sous le nom de TPO.", 'size': 4}, {'id': '112', 'title': 'Interdiction des produits cosmétiques contenant du TPO (AMMPS)', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/interdiction-des-produits-cosmetiques-contenant-du-tpo-ammps/', 'summary': 'Interdiction des produits cosmétiques contenant du TPO (AMMPS). L’Agence marocaine du médicament et des produits de santé (AMMPS) a annoncé l’interdiction de la mise sur le marché, la fabrication, l’importation, la distribution et l’utilisation des produits cosmétiques contenant de l’Oxyde de Diphényl Triméthylbenzoyl Phosphine, connu sous le nom de TPO. Dans un communiqué, l’AMMPS porte à la connaissance des professionnels de santé, des .', 'size': 4}], 'main_title': 'Le Maroc interdit les produits cosmétiques contenant du TPO'}, {'community_id': '11', 'articles': [{'id': '50', 'title': 'CHAN 2024 : Le Maroc bat Madagascar et remporte son troisième titre', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/175310/chan-2024-maroc-madagascar-remporte.html', 'summary': 'CHAN 2024 : Le Maroc bat Madagascar et remporte son troisième titre. La sélection marocaine des joueurs locaux a remporté son troisième titre du Championnat d’Afrique des nations de football (CHAN 2024), en battant son homologue du Madagascar par 3 buts à 2, en finale samedi au stade international Moi de Kasarani à Nairobi.', 'size': 3}, {'id': '52', 'title': 'CHAN-2024: Le Maroc remporte son troisième titre', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/une/chan-2024-le-maroc-remporte-son-troisieme-titre', 'summary': 'CHAN-2024: Le Maroc remporte son troisième titre. La sélection marocaine des joueurs locaux a remporté son troisième titre du Championnat d’Afrique des nations de football (CHAN-2024), en battant son homologue du Madagascar par 3 buts à 2, en finale samedi au stade international Moi de Kasarani à Nairobi. Les Lions de l’Atlas, déjà sacrés en 2018 et 2020, se sont imposés grâce .', 'size': 4}, {'id': '83', 'title': 'CHAN-2024 (Finale) : Le Maroc bat Madagascar (3-2) et remporte son troisième titre', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/chan-2024-finale-le-maroc-bat-madagascar-3-2-et-remporte-son-troisieme-titre.html', 'summary': 'CHAN-2024 (Finale) : Le Maroc bat Madagascar (3-2) et remporte son troisième titre. La sélection marocaine des joueurs locaux a remporté son troisième titre du Championnat d’Afrique des nations de football (CHAN-2024), en battant son homologue du Madagascar par 3 buts à 2, en finale samedi au stade international Moi de Kasarani à Nairobi. Les Lions de l’Atlas, déjà sacrés en 2018 et 2020, se sont imposés grâce . L’article est apparu en premier sur .', 'size': 3}], 'main_title': 'CHAN-2024: Le Maroc remporte son troisième titre'}, {'community_id': '0', 'articles': [{'id': '70', 'title': 'Températures prévues pour le dimanche 31 août 2025', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/temperatures-prevues-pour-le-dimanche-31-aout-2025/', 'summary': 'Températures prévues pour le dimanche 31 août 2025. Voici les températures minimales et maximales prévues par la Direction générale de la météorologie pour le dimanche 31 août 2025: Min Max- Oujda 21 38 – Bouarfa 18 37 – Al Hoceima 23 31 – Tétouan 21 32 – Sebta 23 26 – Mellilia 22 29 – Tanger 21 27 – Kénitra 18 29 – .', 'size': 2}, {'id': '93', 'title': 'Les températures attendues ce dimanche 31 août 2025', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/432612-les-temperatures-attendues-ce-dimanche-31-aout-2025.html', 'summary': 'Les températures attendues ce dimanche 31 août 2025. Voici les températures minimales et maximales prévues par la Direction générale de la météorologie pour la journée du dimanche 31 août 2025 Min Max- Oujda 21 38 – Bouarfa 18 37 – Al Hoceima 23 31 – Tétouan 21 32 – Sebta 23 26 – Mellilia 22 29 – Tanger 21 27 – Kénitra 18 . ', 'size': 2}], 'main_title': 'Températures prévues pour le dimanche 31 août 2025'}, {'community_id': '7', 'articles': [{'id': '89', 'title': 'Plusieurs dirigeants étrangers en Chine pour le sommet de l’OCS', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/439323-plusieurs-dirigeants-etrangers-en-chine-pour-le-sommet-de-locs.html', 'summary': 'Plusieurs dirigeants étrangers en Chine pour le sommet de l’OCS. Plusieurs dirigeants étrangers sont arrivés à Tianjin, dans le nord de la Chine, pour participer au sommet de l’Organisation de coopération de Shanghai (OCS), qui s’ouvre ce dimanche. Le président russe Vladimir Poutine a atterri dimanche matin à Tianjin, marquant une nouvelle visite en Chine après son déplacement d’État en mai 2024. Il assistera au . ', 'size': 3}, {'id': '109', 'title': 'La Chine et l’Inde affichent leur volonté de rapprochement', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/la-chine-et-linde-affichent-leur-volonte-de-rapprochement/', 'summary': 'La Chine et l’Inde affichent leur volonté de rapprochement. Le président chinois Xi Jinping et le Premier ministre indien Narendra Modi ont exprimé dimanche leur volonté de rapprochement lors d’une rencontre en marge du sommet de l’Organisation de coopération de Shanghai (OCS) à Tianjin, dans le nord de la Chine. « Nous sommes les deux pays les plus peuplés du monde et faisons partie du .', 'size': 3}, {'id': '114', 'title': 'Arrivée de plusieurs dirigeants étrangers en Chine pour le sommet de l’OCS', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/arrivee-de-plusieurs-dirigeants-etrangers-en-chine-pour-le-sommet-de-locs.html', 'summary': 'Arrivée de plusieurs dirigeants étrangers en Chine pour le sommet de l’OCS. Plusieurs dirigeants étrangers sont arrivés à Tianjin dans le nord de la Chine pour participer au sommet de l’Organisation de coopération de Shanghai (OCS), qui s’ouvre dimanche, ont rapporté les médias officiels. Le président russe Vladimir Poutine a atterri dimanche matin à Tianjin, marquant une nouvelle visite en Chine après son déplacement d’État en mai . L’article est apparu en premier sur .', 'size': 3}], 'main_title': 'Plusieurs dirigeants étrangers en Chine pour le sommet de l’OCS'}, {'community_id': '9', 'articles': [{'id': '108', 'title': 'Le Japon envisage de fixer un cap au nombre d’étrangers', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/le-japon-envisage-de-fixer-un-cap-au-nombre-detrangers/', 'summary': 'Le Japon envisage de fixer un cap au nombre d’étrangers. Le Japon doit revoir en profondeur sa politique à l’égard des résidents étrangers et envisager l’introduction éventuelle d’un plafond, préconise un rapport gouvernemental publié samedi. Le document, présenté par le ministre de la Justice Keisuke Suzuki, souligne l’absence de stratégie unifiée concernant les étrangers et appelle à examiner l’impact social, les risques de tensions et .', 'size': 2}, {'id': '115', 'title': 'Le Japon envisage de fixer un cap au nombre d’étrangers (rapport)', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/le-japon-envisage-de-fixer-un-cap-au-nombre-detrangers-rapport.html', 'summary': 'Le Japon envisage de fixer un cap au nombre d’étrangers (rapport). Le Japon doit revoir en profondeur sa politique à l’égard des résidents étrangers et envisager l’introduction éventuelle d’un plafond, préconise un rapport gouvernemental publié samedi. Le document, présenté par le ministre de la Justice Keisuke Suzuki, souligne l’absence de stratégie unifiée concernant les étrangers et appelle à examiner l’impact social, les risques de tensions et . L’article est apparu en premier sur .', 'size': 2}], 'main_title': 'Le Japon envisage de fixer un cap au nombre d’étrangers'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
                        
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ? d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        // Fonction pour cacher le tooltip
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = '';
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
    
    
</body>




</html>
    