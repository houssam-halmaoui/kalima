<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); 
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title"> Les principales actualités des dernières 24 heures

</div>    
        <div class="header-subtitle"> Dernière mise à jour : 12/08/2025 - 06h24</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"></div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '1', 'articles': [{'id': '0', 'title': 'Macron dénonce le plan israélien à Gaza comme un désastre d’une gravité inédite', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/437239-macron-denonce-le-plan-israelien-a-gaza-comme-un-desastre-dune-gravite-inedite.html', 'summary': 'Macron dénonce le plan israélien à Gaza comme un désastre d’une gravité inédite. Le président français Emmanuel Macron a fermement critiqué, ce lundi 11 août, la récente décision d’Israël d’intensifier ses opérations militaires dans la ville de Gaza et les camps de Mawasi. Interrogé par BFMTV, il a qualifié ce projet d’« escalade dangereuse » et d’« échec annoncé » qui risque de prolonger indéfiniment le conflit. Macron . ', 'size': 2}, {'id': '134', 'title': 'Gaza : Macron qualifie le plan israélien de « désastre sans précédent »', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/gaza-macron-qualifie-le-plan-israelien-de-desastre-sans-precedent/', 'summary': 'Gaza : Macron qualifie le plan israélien de « désastre sans précédent ». Estimant que le projet israélien d’occupation totale de Gaza viole le droit international et menace la stabilité régionale, Emmanuel Macron a renouvelé lundi sa proposition de déployer une mission internationale de stabilisation sous mandat des Nations unies. Le président français a qualifié ce plan de « désastre sans précédent » susceptible d’installer une « guerre .', 'size': 2}], 'main_title': 'Macron dénonce le plan israélien à Gaza comme un désastre d’une gravité inédite'}, {'community_id': '3', 'articles': [{'id': '2', 'title': 'Trump ordonne le déploiement de la Garde nationale à Washington', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/437264-trump-ordonne-le-deploiement-de-la-garde-nationale-a-washington.html', 'summary': 'Trump ordonne le déploiement de la Garde nationale à Washington. Donald Trump a annoncé lundi placer le maintien de l’ordre dans la capitale Washington sous le contrôle des autorités fédérales, ainsi que le déploiement de militaires de la Garde nationale, des mesures exceptionnelles pour cette ville qu’il dit « envahie par des gangs violents ». Alors que les statistiques officielles montrent une baisse de la criminalité violente . ', 'size': 2}, {'id': '14', 'title': 'Trump déploie l’armée à Washington pour lutter contre la criminalité', 'source': 'lematin.ma', 'link': 'https://lematin.ma/monde/trump-deploie-larmee-a-washington-pour-lutter-contre-la-criminalite/296092', 'summary': 'Trump déploie l’armée à Washington pour lutter contre la criminalité. Lors d’une conférence de presse à la Maison Blanche, Donald Trump a également annoncé l’état d’urgence pour renforcer la sécurité publique dans la capitale et la prise de contrôle.', 'size': 2}], 'main_title': 'Trump ordonne le déploiement de la Garde nationale à Washington'}, {'community_id': '4', 'articles': [{'id': '8', 'title': "L'ONU condamne le meurtre de 6 journalistes palestiniens par Israël", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/437234-lonu-condamne-le-meurtre-de-6-journalistes-palestiniens-par-israel.html', 'summary': "L'ONU condamne le meurtre de 6 journalistes palestiniens par Israël. Le Haut-Commissariat des Nations unies aux droits de l’homme a condamné « le meurtre par l’armée israélienne de six journalistes palestiniens » dans la bande de Gaza dans la nuit de dimanche à lundi, dans un communiqué publié sur le réseau social X. Le Haut-Commissariat accuse Israël d’avoir « visé la tente » où se trouvaient cinq employés de . ", 'size': 2}, {'id': '25', 'title': "L'ONU condamne le meurtre de six journalistes palestiniens à Gaza", 'source': 'lematin.ma', 'link': 'https://lematin.ma/monde/lonu-condamne-le-meurtre-de-six-journalistes-palestiniens-a-gaza/296001', 'summary': "L'ONU condamne le meurtre de six journalistes palestiniens à Gaza. Le Haut-Commissariat accuse Israël d'avoir visé la tente où se trouvaient cinq employés de la chaîne Al Jazeera, ce qui constitue une grave violation du droit.", 'size': 2}], 'main_title': "L'ONU condamne le meurtre de 6 journalistes palestiniens par Israël"}, {'community_id': '5', 'articles': [{'id': '27', 'title': 'Le Salon du Cheval d’El Jadida accueille le prestigieux "Title Show" des chevaux Pur-Sang Arabes', 'source': 'lematin.ma', 'link': 'https://lematin.ma/culture/el-jadida-accueillera-le-prestigieux-title-show-des-pur-sang-arabes/295968', 'summary': 'Le Salon du Cheval d’El Jadida accueille le prestigieux "Title Show" des chevaux Pur-Sang Arabes. Le Salon du Cheval d’El Jadida franchit une étape décisive. Pour la première fois, son Concours International de Modèles et Allures réservé aux Pur-Sang Arabes obtient la classific.', 'size': 2}, {'id': '87', 'title': '16ᵉ édition du Salon du Cheval : les Pur-Sang Arabes en vedette à El Jadida', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/16%e1%b5%89-edition-du-salon-du-cheval-les-pur-sang-arabes-en-vedette-a-el-jadida-308367/', 'summary': '16ᵉ édition du Salon du Cheval : les Pur-Sang Arabes en vedette à El Jadida. À l’occasion de sa 16ᵉ édition, le Salon du Cheval d’El Jadida accueillera l’un de ses événements phares, à savoir le prestigieux Concours International de Modèles et Allures «Title Show». Organisé sous l’égide de l’ECAHO (European Conference of Arab Horse Organizations), ce concours, exclusivement dédié aux chevaux Pur-Sang Arabes, se', 'size': 2}], 'main_title': 'Le Salon du Cheval d’El Jadida accueille le prestigieux "Title Show" des chevaux Pur-Sang Arabes'}, {'community_id': '6', 'articles': [{'id': '28', 'title': 'Les tenniswomen marocaines qualifiées pour le Groupe II Europe/Afrique de la Billie Jean King Cup', 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/les-lionnes-du-tennis-marocain-rejoignent-le-groupe-ii-billie-jean-king-cup/295961', 'summary': 'Les tenniswomen marocaines qualifiées pour le Groupe II Europe/Afrique de la Billie Jean King Cup. Exploit retentissant pour le tennis féminin marocain. Les Lionnes ont décroché leur promotion au Groupe II Europe/Afrique, signant ainsi le retour du Maroc dans l’élite continental.', 'size': 2}, {'id': '98', 'title': "Tennis : Qualitifation inédite de l'équipe féminine du Maroc au Groupe II Europe/Afrique", 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/174008/tennis-qualitifation-inedite-l-equipe-feminine.html', 'summary': "Tennis : Qualitifation inédite de l'équipe féminine du Maroc au Groupe II Europe/Afrique. Léquipe nationale féminine de tennis sest qualifiée au Groupe II Europe/Afrique, à lissue des éliminatoires de la Billie Jean King Cup, tenus du 4 au 9 août 2025 à Windhoek (Namibie). Cet exploit permettra aux joueuses de se mesurer à des adversaires de haut niveau en 2026.", 'size': 2}], 'main_title': 'Les tenniswomen marocaines qualifiées pour le Groupe II Europe/Afrique de la Billie Jean King Cup'}, {'community_id': '21', 'articles': [{'id': '31', 'title': 'Mohamed Bouzoubaâ élu nouveau président du Maghreb de Fès', 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/mohamed-bouzoubaa-elu-nouveau-president-du-maghreb-de-fes/296028', 'summary': 'Mohamed Bouzoubaâ élu nouveau président du Maghreb de Fès. Mohamed Bouzoubaâ prend les rênes du Maghreb de Fès. Le natif de Fès a été élu, à l’unanimité, président du MAS de Fès, succédant ainsi à Hicham Chakour, qui avait présenté sa démi.', 'size': 4}, {'id': '83', 'title': 'Mohamed Bouzoubaâ nouveau président du MAS de Fès', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/11/mohamed-bouzoubaa-nouveau-president-du-mas-de-fes_1945937/', 'summary': 'Mohamed Bouzoubaâ nouveau président du MAS de Fès. Le Maghreb Association Sportive (MAS) de Fès a tenu, dimanche, son assemblée générale ordinaire à l’issue de laquelle il a été procédé à l’élection à l’unanimité de Mohamed Bouzoubaâ, nouveau président de l’association. Le patron du géant du BTP TGCC, entreprise cotée à la Bourse de Casablanca, Mohamed Bouzoubaâ, succède à Hicham Chakour, qui a présenté.', 'size': 4}, {'id': '106', 'title': 'Mohamed Bouzouba élu nouveau président du MAS de Fès', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/173969/mohamed-bouzouba-nouveau-president.html', 'summary': 'Mohamed Bouzouba élu nouveau président du MAS de Fès. Mohamed Bouzoubaa a été élu, dimanche 10 août, nouveau président du conseil administratif de lAssociation sportive Moghreb de Fès (MAS), succédant à Hicham Chakour, qui a démissionné le mois dernier.', 'size': 4}, {'id': '130', 'title': 'MAS de Fès : Mohamed Bouzoubaâ élu nouveau président du club', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/influences/mas-de-fes-mohamed-bouzoubaa-elu-nouveau-president-du-club/', 'summary': 'MAS de Fès : Mohamed Bouzoubaâ élu nouveau président du club. Mohamed Bouzoubaâ, succède à Hicham Chakour, qui a présenté sa démission en juillet dernier. Il occupait le poste de président du club depuis juillet 2024.', 'size': 4}], 'main_title': 'Mohamed Bouzoubaâ élu nouveau président du Maghreb de Fès'}, {'community_id': '14', 'articles': [{'id': '35', 'title': 'Royal Air Maroc booste son réseau point-à-point depuis Marrakech vers la France et Bruxelles', 'source': 'lematin.ma', 'link': 'https://lematin.ma/economie/ram-renforce-la-connectivite-point-a-point-vers-la-france-et-la-belgique/295952', 'summary': 'Royal Air Maroc booste son réseau point-à-point depuis Marrakech vers la France et Bruxelles. Afin de mieux satisfaire la demande des touristes français et belges ainsi que des Marocains résidant dans ces pays, les nouvelles lignes sont proposées à des jours et horaires ada.', 'size': 2}, {'id': '74', 'title': 'Royal Air Maroc renforce ses liaisons au départ de Marrakech vers la France et la Belgique', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/11/royal-air-maroc-renforce-ses-liaisons-au-depart-de-marrakech-vers-la-france-et-la-belgique_1946018/', 'summary': 'Royal Air Maroc renforce ses liaisons au départ de Marrakech vers la France et la Belgique. Royal Air Maroc renforce son réseau « point-à-point » avec la relance des dessertes aériennes directes entre Marrakech et Lyon, Toulouse, Nantes et Bordeaux à compter du 10 octobre prochain, et le renforcement des lignes des fréquences des vols à destination de Marseille et Bruxelles. La compagnie nationale renforcera également ses fréquences sur les lignes existantes reliant.', 'size': 4}, {'id': '90', 'title': 'RAM rapproche encore plus Marrakech de ses visiteurs en France et en Belgique', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/ram-rapproche-encore-plus-marrakech-de-ses-visiteurs-en-france-et-en-belgique-308357/', 'summary': 'RAM rapproche encore plus Marrakech de ses visiteurs en France et en Belgique. Royal Air Maroc (RAM) annonce la relance, à partir d’octobre 2025, des liaisons entre Marrakech et quatre villes françaises (Bordeaux, Lyon, Nantes et Toulouse). Mieux encore, elle va aussi augmenter les fréquences des lignes existantes entre la Ville Ocre avec Marseille (France) et Bruxelles (Belgique). « Ces relances et renforcement de', 'size': 3}, {'id': '101', 'title': 'Marrakech : La RAM renforce sa connectivité «point-à-point» vers la France et la Belgique', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/173996/marrakech-renforce-connectivite-point-a-point-vers.html', 'summary': 'Marrakech : La RAM renforce sa connectivité «point-à-point» vers la France et la Belgique. Royal air Maroc (RAM) renforce son réseau «point-à-point» en relançant les dessertes aériennes directes entre Marrakech et les villes de Lyon, Toulouse, Nantes et Bordeaux, à partir du 10 octobre 2025. Les fréquences sur les lignes existantes vers Marseille et Bruxelles seront par railleurs renforcées.', 'size': 4}, {'id': '192', 'title': 'RAM renforce les liaisons vers la France et la Belgique depuis Marrakech', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/RAM-renforce-les-liaisons-vers-la-France-et-la-Belgique-depuis-Marrakech_a70731.html', 'summary': 'RAM renforce les liaisons vers la France et la Belgique depuis Marrakech. Royal Air Maroc (RAM) renforce son réseau « point-à-point » avec la relance de quatre lignes relient Marrakech à Lyon, Toulouse, Nantes et Bordeaux, et le renforcement des lignes Marrakech-Marseille et Marrakech-Bruxelles.', 'size': 4}], 'main_title': 'Royal Air Maroc renforce ses liaisons au départ de Marrakech vers la France et la Belgique'}, {'community_id': '0', 'articles': [{'id': '37', 'title': 'Settat : interpellation d’un élément imprégné de l’idéologie extrémiste de l’organisation terroriste "Daech" (BCIJ)', 'source': 'lematin.ma', 'link': 'https://lematin.ma/societe/settat-un-sympathisant-de-daech-arrete-par-le-bcij/295950', 'summary': 'Settat : interpellation d’un élément imprégné de l’idéologie extrémiste de l’organisation terroriste "Daech" (BCIJ). Cette interpellation s\'inscrit dans le cadre des opérations sécuritaires continues pour neutraliser les menaces des organisations terroristes qui guettent la sécurité du Royaum.', 'size': 2}, {'id': '117', 'title': 'Interpellation à Settat d’un élément imprégné de l’idéologie extrémiste de l’organisation terroriste “Daech”', 'source': 'www.libe.ma', 'link': 'https://www.libe.ma/Interpellation-a-Settat-d-un-element-impregne-de-l-ideologie-extremiste-de-l-organisation-terroriste-Daech_a155164.html', 'summary': 'Interpellation à Settat d’un élément imprégné de l’idéologie extrémiste de l’organisation terroriste “Daech”.', 'size': 3}, {'id': '129', 'title': 'Settat : arrestation d’un élément imprégné de l’idéologie extrémiste de Daech', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/pouvoirs/securite/settat-arrestation-dun-element-impregne-de-lideologie-extremiste-de-daech/', 'summary': 'Settat : arrestation d’un élément imprégné de l’idéologie extrémiste de Daech. Âgé de 18 ans, le mis en cause était en contact avec l’un des chefs maghrébins sur le terrain de l’organisation "Daech", qui l\'a incité à exécuter un projet terroriste dans le Royaume.', 'size': 2}], 'main_title': 'Interpellation à Settat d’un élément imprégné de l’idéologie extrémiste de l’organisation terroriste “Daech”'}, {'community_id': '13', 'articles': [{'id': '41', 'title': 'Le ministère de l’Éducation et les syndicats font le point sur l’application des accords de décembre 2023', 'source': 'lematin.ma', 'link': 'https://lematin.ma/nation/reunion-entre-le-ministere-de-leducation-nationale-et-les-syndicats/295915', 'summary': 'Le ministère de l’Éducation et les syndicats font le point sur l’application des accords de décembre 2023. Un communiqué conjoint publié samedi indique que cette réunion, présidée par le ministre de l’Éducation nationale, du préscolaire et des sports, Mohamed Saad Berrada, s’est déroulé.', 'size': 2}, {'id': '73', 'title': "Education : nouveau round de discussions entre Berrada et les syndicats de l'enseignement", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/11/education-nouveau-round-de-discussions-entre-berrada-et-les-syndicats-de-lenseignement_1945953/', 'summary': "Education : nouveau round de discussions entre Berrada et les syndicats de l'enseignement. Une réunion du Comité supérieur du dialogue social sectoriel entre le ministère de l’Éducation nationale, du Préscolaire et des Sports et les cinq syndicats de l’enseignement les plus représentatifs s’est tenue, mercredi dernier, pour faire le point sur la mise en œuvre des accords des 10 et 26 décembre 2023 ainsi que sur l’application du.", 'size': 2}], 'main_title': 'Le ministère de l’Éducation et les syndicats font le point sur l’application des accords de décembre 2023'}, {'community_id': '16', 'articles': [{'id': '57', 'title': "Gaza : cinq journalistes d'Al Jazeera tués par une frappe israélienne", 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Gaza-cinq-journalistes-d-Al-Jazeera-tues-par-une-frappe-israelienne_a70730.html', 'summary': 'Gaza : cinq journalistes d\'Al Jazeera tués par une frappe israélienne. \u200bL\'armée israélienne a reconnu avoir visé le correspondant d\'Al Jazeera Anas al-Sharif, reporter de 28 ans bien connu des spectateurs de la chaîne, le qualifiant de "terroriste" qui "se faisait passer pour un journaliste". Quatre de ses collègues ont aussi été tués.', 'size': 2}, {'id': '78', 'title': "Gaza : cinq journalistes d'Al Jazeera tués dans une frappe israélienne", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/11/gaza-cinq-journalistes-dal-jazeera-tues-dans-une-frappe-israelienne_1945978/', 'summary': "Gaza : cinq journalistes d'Al Jazeera tués dans une frappe israélienne. Al Jazeera a annoncé la mort de cinq de ses journalistes dimanche lors d’une frappe israélienne dans la bande de Gaza, dont un reporter bien connu de ses téléspectateurs que l’armée israélienne a reconnu avoir ciblé, le qualifiant de « terroriste ». Au moment où le gouvernement israélien se montre déterminé à mettre en oeuvre son nouveau.", 'size': 2}], 'main_title': "Gaza : cinq journalistes d'Al Jazeera tués par une frappe israélienne"}, {'community_id': '19', 'articles': [{'id': '65', 'title': "BCIJ  : Arrestation d'un partisan de Daech à Settat", 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/BCIJ-Arrestation-d-un-partisan-de-Daech-a-Settat_a70718.html', 'summary': 'BCIJ : Arrestation d\'un partisan de Daech à Settat. Le Bureau Central d’Investigations Judiciaires (BCIJ) a procédé, dans la matinée du dimanche 10 août, sur la base de renseignements fournis par la Direction générale de la Surveillance du Territoire, à l’interpellation d’un élément imprégné de l\'idéologie extrémiste de l\'organisation terroriste "Daech", âgé de 18 ans et qui s’activait à Douar El Amarna, dans la province de Settat.', 'size': 5}, {'id': '92', 'title': 'Le BCIJ interpelle un jeune sympathisant de Daech à Settat', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/le-bcij-intepelle-un-jeune-sympathisant-de-daech-a-settat-308346/', 'summary': 'Le BCIJ interpelle un jeune sympathisant de Daech à Settat. Le Bureau Central d’Investigations Judiciaires (BCIJ) a procédé, dans la matinée du dimanche 10 août, sur la base de renseignements fournis par la DGST, à l’interpellation d’un élément imprégné de l’idéologie extrémiste de l’organisation terroriste « Daech », âgé de 18 ans et qui s’activait à Douar El Amarna, dans la province', 'size': 5}, {'id': '105', 'title': 'Settat : Arrestation pour planification d’attentats terroristes avec Daech', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/173975/settat-arrestation-pour-planification-d-attentats.html', 'summary': 'Settat : Arrestation pour planification d’attentats terroristes avec Daech. Le Bureau central d’investigations judiciaires (BCIJ) a procédé, dans la matinée du dimanche 10 août, sur la base de renseignements fournis par la Direction générale de la surveillance du territoire, à l’interpellation d’un élément imprégné de l’idéologie extrémiste du groupe terroriste Daech. Âgé de 18 ans, l’individu s’activait à Douar El Amarna, dans la province de Settat.', 'size': 5}, {'id': '109', 'title': 'Interpellation à Settat d’un extrémiste de l’organisation terroriste «\xa0Daech\xa0»', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/actualite/interpellation-a-settat-dun-extremiste-de-lorganisation-terroriste-daech', 'summary': 'Interpellation à Settat d’un extrémiste de l’organisation terroriste « Daech ». Le Bureau Central d’Investigations Judiciaires (BCIJ) a procédé, dans la matinée du dimanche 10 août, sur la base de renseignements fournis par la Direction générale de la Surveillance du Territoire, à l’interpellation d’un élément imprégné de l’idéologie extrémiste de l’organisation terroriste « Daech », âgé de 18 ans et qui s’activait à Douar El Amarna, dans la .', 'size': 5}, {'id': '168', 'title': 'Antiterrorisme : Le BCIJ arrête un individu à Settat', 'source': 'lnt.ma', 'link': 'https://lnt.ma/antiterrorisme-le-bcij-arrete-un-individu-a-settat/', 'summary': 'Antiterrorisme : Le BCIJ arrête un individu à Settat. Le Bureau central d’investigations judiciaires (BCIJ) a interpellé, dimanche 10 août, un individu de 18 ans imprégné de l’idéologie extrémiste de l’organisation terroriste « Daech ». L’opération, menée à Douar El Amarna dans la province de Settat, a été effectuée sur la base de renseignements fournis par la Direction générale de la surveillance du territoire. Selon un . ', 'size': 5}], 'main_title': "BCIJ  : Arrestation d'un partisan de Daech à Settat"}, {'community_id': '15', 'articles': [{'id': '75', 'title': "L'Australie va reconnaître l'Etat de Palestine", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/11/laustralie-va-reconnaitre-letat-de-palestine_1945973/', 'summary': "L'Australie va reconnaître l'Etat de Palestine. L’Australie va reconnaître l’Etat de Palestine à l’occasion de l’Assemblée générale de l’ONU en septembre, a annoncé le Premier ministre Anthony Albanese lundi, emboîtant le pas à d’autres pays tels que la France et le Canada. Une solution à deux Etats est le meilleur espoir de l’humanité pour rompre le cycle de la violence au.", 'size': 2}, {'id': '88', 'title': 'Palestine: entre victoires diplomatiques et guerre génocidaire', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/palestine-entre-victoires-diplomatiques-et-guerre-genocidaire-308377/', 'summary': 'Palestine: entre victoires diplomatiques et guerre génocidaire. La Palestine connait actuellement un soutien international exceptionnel mais aussi de lourdes pertes humaines. L’Australie et le Canada viennent de rejoindre la France en déclarant officiellement leurs engagements à reconnaitre officiellement l’Etat de Palestine lors de la prochaine assemblée générale de l’ONU, au mois de septembre. Un soutien hautement symbolique', 'size': 2}], 'main_title': "L'Australie va reconnaître l'Etat de Palestine"}, {'community_id': '9', 'articles': [{'id': '79', 'title': 'Ligue arabe : le Maroc participe à une session extraordinaire consacrée à Gaza', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/11/ligue-arabe-le-maroc-participe-a-une-session-extraordinaire-consacree-a-gaza_1945948/', 'summary': 'Ligue arabe : le Maroc participe à une session extraordinaire consacrée à Gaza. Le Conseil de la Ligue des États arabes, réuni au niveau des délégués permanents, a tenu dimanche au Caire une session extraordinaire consacrée à l’examen de la situation dans la bande de Gaza, avec la participation des représentants des pays arabes, dont le Maroc. La délégation marocaine à cette réunion, présidée par la Jordanie, était.', 'size': 2}, {'id': '167', 'title': 'Le Conseil de la Ligue arabe se réunit en session extraordinaire sur la situation à Gaza', 'source': 'lnt.ma', 'link': 'https://lnt.ma/le-conseil-de-la-ligue-arabe-se-reunit-en-session-extraordinaire-sur-la-situation-a-gaza/', 'summary': 'Le Conseil de la Ligue arabe se réunit en session extraordinaire sur la situation à Gaza. Le Conseil de la Ligue des États arabes, réuni dimanche au niveau des délégués permanents, a tenu une session extraordinaire au Caire pour examiner la situation dans la bande de Gaza, avec la participation des représentants des pays membres, dont le Maroc. La délégation marocaine était conduite par l’ambassadeur du Royaume au Caire et représentant . ', 'size': 2}], 'main_title': 'Ligue arabe : le Maroc participe à une session extraordinaire consacrée à Gaza'}, {'community_id': '18', 'articles': [{'id': '81', 'title': 'CHAN : face au Kenya, le Maroc a manqué d’animation offensive, selon Tarik Sektioui', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/11/chan-face-au-kenya-le-maroc-a-manque-danimation-offensive-selon-tarik-sektioui_1945944/', 'summary': 'CHAN : face au Kenya, le Maroc a manqué d’animation offensive, selon Tarik Sektioui. Le sélectionneur national Tarik Sektioui a indiqué, dimanche à Nairobi, que l’équipe marocaine a manqué d’animation offensive pour pouvoir revenir dans le match perdu contre le Kenya 1 à 0, pour le compte de la 3è journée du groupe A du Championnat d’Afrique des nations de football (CHAN). S’exprimant en conférence de presse d’après match,.', 'size': 2}, {'id': '169', 'title': 'CHAN 2024 : le Maroc s’incline face au Kenya', 'source': 'lnt.ma', 'link': 'https://lnt.ma/chan-2024-le-maroc-sincline-face-au-kenya/', 'summary': 'CHAN 2024 : le Maroc s’incline face au Kenya. La sélection marocaine locale s’est inclinée 1 à 0 face au Kenya, dimanche au stade Kasarani de Nairobi, lors de la troisième journée du groupe A du Championnat d’Afrique des nations (CHAN-2024). Dès les premières minutes, les Lions de l’Atlas ont tenté d’imposer leur jeu, multipliant les passes courtes pour pénétrer la défense kényane et . ', 'size': 2}], 'main_title': 'CHAN : face au Kenya, le Maroc a manqué d’animation offensive, selon Tarik Sektioui'}, {'community_id': '20', 'articles': [{'id': '86', 'title': 'Prêt-à-porter\xa0: la marque italienne Alcott s’installe à Casablanca', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/pret-a-porter-la-marque-italienne-alcott-sinstalle-a-casablanca-308374/', 'summary': 'Prêt-à-porter : la marque italienne Alcott s’installe à Casablanca. Le groupe Chiccorner vient fraîchement d’annoncer l’arrivée de la marque italienne Alcott au Maroc avec l’ouverture de son premier magasin en plein cœur du Morocco Mall. Pour la petite histoire, Alcott, née à Naples en 1990, a su tirer son épingle du jeu dans l’univers de la mode italienne et', 'size': 2}, {'id': '100', 'title': 'Casablanca : Alcott ouvre son premier magasin au\xa0Maroc', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/174003/casablanca-alcott-ouvre-premier-magasin.html', 'summary': 'Casablanca : Alcott ouvre son premier magasin au Maroc. Le groupe Chiccorner annonce l’arrivée de la marque italienne Alcott au Maroc avec l’ouverture de son premier magasin au rez-de-chaussée du Morocco Mall. Cette implantation marque un tournant dans l’univers du prêt-à-porter au Maroc, en introduisant une enseigne qui incarne un style actuel, accessible et responsable, précise un communiqué de la marque.', 'size': 2}], 'main_title': 'Prêt-à-porter\xa0: la marque italienne Alcott s’installe à Casablanca'}, {'community_id': '10', 'articles': [{'id': '93', 'title': 'Les prévisions du lundi 11 août 2025', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/les-previsions-du-lundi-11-aout-2025-308339/', 'summary': 'Les prévisions du lundi 11 août 2025. Voici les prévisions météorologiques établies par la Direction générale de la météorologie pour le lundi 11 août 2025. -Temps chaud à localement très chaud sur les plaines de Tadla, Rehamna, les plateaux de Phosphates et d’Oulmès, le Saiss, le Gharb, Loukkous, le Souss, le Sud-Est et l’intérieur des provinces Sud.', 'size': 2}, {'id': '170', 'title': "Le temps qu'il fera ce mardi 12 août 2025", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/437282-le-temps-quil-fera-ce-mardi-12-aout-2025.html', 'summary': "Le temps qu'il fera ce mardi 12 août 2025. Voici les prévisions météorologiques établies par la Direction générale de la météorologie pour le mardi 12 août 2025 – Temps chaud à très chaud avec chergui sur les plaines Nord et Centres, les plateaux de Phosphates et d’Oulmès, le Souss, le Sud-Est et l’intérieur des provinces Sud. – Nuages bas assez denses, le matin et . ", 'size': 2}], 'main_title': 'Les prévisions du lundi 11 août 2025'}, {'community_id': '17', 'articles': [{'id': '126', 'title': 'Taux débiteurs : Nouvelles baisses des taux au T2-2025', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/argent/taux-debiteurs-nouvelles-baisses-des-taux-au-t2-2025/', 'summary': 'Taux débiteurs : Nouvelles baisses des taux au T2-2025. Le taux débiteur global au Maroc a reculé à 4,84% au deuxième trimestre 2025, en baisse de 14 points de base par rapport au trimestre précédent, selon Bank Al-Maghrib. Cette évolution touche aussi bien les crédits aux particuliers que ceux aux entreprises, avec des disparités selon les types de prêts et les secteurs.', 'size': 2}, {'id': '193', 'title': 'Les taux d’intérêt enregistrent de nouvelles baisses au deuxième trimestre', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/les-taux-dinteret-enregistrent-de-nouvelles-baisses-au-deuxieme-trimestre-308394/', 'summary': 'Les taux d’intérêt enregistrent de nouvelles baisses au deuxième trimestre. Les taux d’intérêt ont enregistré une baisse de 14 points de base du taux moyen global au Maroc, qui s’établit à 4,84% au titre du deuxième trimestre de 2025, d’après les résultats d’une enquête de Bank Al-Maghrib (BAM). Par objet économique, les taux débiteurs se sont établis à 4,65% pour', 'size': 2}], 'main_title': 'Taux débiteurs : Nouvelles baisses des taux au T2-2025'}, {'community_id': '2', 'articles': [{'id': '137', 'title': 'Casablanca accueille des enfants maqdessis pour la 16e édition des colonies de vacances', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/arrivee-a-casablanca-denfants-maqdessis-pour-participer-a-la-16e-edition/', 'summary': 'Casablanca accueille des enfants maqdessis pour la 16e édition des colonies de vacances. Placée sous le Haut Patronage de Sa Majesté le Roi Mohammed VI, Président du Comité Al-Qods, la 16ᵉ édition des colonies de vacances « Harat Al Maghariba », organisée par l’Agence Bayt Mal Al-Qods Acharif, a accueilli lundi matin à Casablanca un groupe de cinquante enfants maqdessis. Le programme officiel de cette édition débutera mardi .', 'size': 2}, {'id': '191', 'title': 'Arrivée à Casablanca d’enfants maqdessis pour participer à la 16e édition des colonies de vacances', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Arrivee-a-Casablanca-d-enfants-maqdessis-pour-participer-a-la-16e-edition-des-colonies-de-vacances_a70735.html', 'summary': 'Arrivée à Casablanca d’enfants maqdessis pour participer à la 16e édition des colonies de vacances. \u200bUn groupe de cinquante enfants maqdessis est arrivé, lundi matin à Casablanca, pour participer à la 16e édition des colonies de vacances, baptisée “Harat Al Maghariba”, évènement organisé par l’Agence Bayt Mal Al-Qods Acharif, sous le Haut Patronage de Sa Majesté le Roi Mohammed VI, Président du Comité Al-Qods.', 'size': 2}], 'main_title': 'Casablanca accueille des enfants maqdessis pour la 16e édition des colonies de vacances'}, {'community_id': '7', 'articles': [{'id': '139', 'title': 'Canicule en France : Le ministre de la santé alerte sur «\xa0une journée à haut risque\xa0»', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/canicule-en-france-le-ministre-de-la-sante-alerte-sur-une-journee-a-haut-risque/', 'summary': 'Canicule en France : Le ministre de la santé alerte sur « une journée à haut risque ». Alors que la vague de chaleur atteignait une intensité « exceptionnelle » ce lundi en France, avec 12 départements en vigilance rouge et 41 en vigilance orange, le ministre de la Santé et des Soins, Yannick Neuder, a mis en garde contre « une journée à haut risque » et a appelé à « une .', 'size': 2}, {'id': '161', 'title': 'Canicule en France : le ministre de la santé alerte sur «\xa0une journée à haut risque\xa0»', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/canicule-en-france-le-ministre-de-la-sante-alerte-sur-une-journee-a-haut-risque.html', 'summary': 'Canicule en France : le ministre de la santé alerte sur « une journée à haut risque ». Alors que la vague de chaleur prenait une ampleur « exceptionnelle » ce lundi en France avec 12 départements placés en vigilance rouge et 41 autres en vigilance orange, le ministre de la santé et des soins, Yannick Neuder a alerté sur « une journée à haut risque » en appelant à « une solidarité nationale » . L’article est apparu en premier sur .', 'size': 2}], 'main_title': 'Canicule en France : Le ministre de la santé alerte sur «\xa0une journée à haut risque\xa0»'}, {'community_id': '8', 'articles': [{'id': '147', 'title': 'EXIA Technologies : Procheck change de nom et ouvre un nouveau chapitre pour accélérer la transformation digitale des grandes entreprises', 'source': 'leseco.ma', 'link': 'https://leseco.ma/business/exia-technologies-procheck-change-de-nom-et-ouvre-un-nouveau-chapitre-pour-accelerer-la-transformation-digitale-des-grandes-entreprises.html', 'summary': 'EXIA Technologies : Procheck change de nom et ouvre un nouveau chapitre pour accélérer la transformation digitale des grandes entreprises. Après plus de 37 ans d’expertise, Procheck annonce son rebranding et devient EXIA Technologies. Cette nouvelle identité marque une étape stratégique dans l’histoire du groupe et traduit sa volonté d’affirmer son rôle de partenaire technologique incontournable pour les grandes entreprises marocaines et internationales. ', 'size': 2}, {'id': '165', 'title': 'Procheck devient EXIA Technologies et s’affirme comme partenaire stratégique de la transformation digitale', 'source': 'lnt.ma', 'link': 'https://lnt.ma/procheck-devient-exia-technologies-et-saffirme-comme-partenaire-strategique-de-la-transformation-digitale/', 'summary': 'Procheck devient EXIA Technologies et s’affirme comme partenaire stratégique de la transformation digitale. Après plus de 37 ans d’expertise, Procheck entame un nouveau chapitre de son histoire et adopte une nouvelle identité : EXIA Technologies. Ce rebranding stratégique traduit la volonté du groupe de consolider son leadership au Maroc et de renforcer sa présence à l’international, tout en accélérant la transformation digitale des grandes entreprises. Avec plus de . ', 'size': 2}], 'main_title': 'EXIA Technologies : Procheck change de nom et ouvre un nouveau chapitre pour accélérer la transformation digitale des grandes entreprises'}, {'community_id': '11', 'articles': [{'id': '174', 'title': 'Rencontre Trump-Poutine : le président américain espère décrocher un cessez-le-feu en Ukraine', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/437308-rencontre-trump-poutine-le-president-americain-espere-decrocher-un-cessez-le-feu-en-ukraine.html', 'summary': 'Rencontre Trump-Poutine : le président américain espère décrocher un cessez-le-feu en Ukraine. Le président Donald Trump a dit, lundi, espérer que sa rencontre avec son homologue russe Vladimir Poutine, prévue vendredi en Alaska pour évoquer une résolution de la guerre en Ukraine, conduira à un cessez-le-feu « rapidement ». « Le président Poutine m’a invité à s’impliquer, et je crois qu’il veut en finir avec ce conflit », a déclaré M. . ', 'size': 2}, {'id': '183', 'title': 'Trump dit s\'attendre à une rencontre "constructive" avec Poutine', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Trump-dit-s-attendre-a-une-rencontre-constructive-avec-Poutine_a70752.html', 'summary': 'Trump dit s\'attendre à une rencontre "constructive" avec Poutine. Donald Trump a dit lundi s\'attendre à une rencontre constructive avec Vladimir Poutine, lors de leur sommet prévu vendredi en Alaska pour évoquer une résolution de la guerre en Ukraine.', 'size': 2}], 'main_title': 'Rencontre Trump-Poutine : le président américain espère décrocher un cessez-le-feu en Ukraine'}, {'community_id': '12', 'articles': [{'id': '177', 'title': 'Feux de forêt: le Maroc envoie deux Canadair au Portugal', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/437311-feux-de-foret-le-maroc-envoie-deux-canadair-au-portugal.html', 'summary': 'Feux de forêt: le Maroc envoie deux Canadair au Portugal. Le Maroc va envoyer deux avions Canadair au Portugal, après l’activation par Lisbonne du mécanisme de coopération bilatérale à la suite de la panne de deux de ses propres appareils, pour lutter contre les incendies, a annoncé lundi le ministère de l’Intérieur portugais. Les deux avions, attendus dans la journée de lundi, seront intégrés au . ', 'size': 2}, {'id': '199', 'title': 'Incendies : Le Maroc envoie deux avions Canadair au Portugal', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/pouvoirs/incendies-le-maroc-envoie-deux-canadair-au-portugal/', 'summary': 'Incendies : Le Maroc envoie deux avions Canadair au Portugal. Deux avions Canadair seront envoyés par le Maroc au Portugal, à sa demande, après que l’Espagne n’a pas pu répondre favorablement, en raison de la recrudescence des feux sur son territoire.', 'size': 2}], 'main_title': 'Feux de forêt: le Maroc envoie deux Canadair au Portugal'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
                        
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ? d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        // Fonction pour cacher le tooltip
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = '';
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
    
    
</body>




</html>
    