<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); 
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title"> Les principales actualités des dernières 24 heures

</div>    
        <div class="header-subtitle"> Dernière mise à jour : 06/09/2025 - 12h25</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"></div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '0', 'title': "Le temps qu'il fera ce samedi 6 septembre 2025", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/440115-le-temps-quil-fera-ce-samedi-6-septembre-2025.html', 'summary': "Le temps qu'il fera ce samedi 6 septembre 2025. Voici les prévisions météorologiques établies par la Direction générale de la météorologie pour le samedi 6 septembre 2025 – Temps assez chaud à localement chaud sur le Sud-Est, les provinces sahariennes, l’Oriental et les plaines à l’Ouest de l’Atlas. – Nuages bas assez denses avec brume ou brouillard sur les côtes Centre, la Méditerranée et . ", 'size': 2}, {'id': '45', 'title': 'Les prévisions du vendredi 5 septembre 2025', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/les-previsions-du-vendredi-2025-309540/', 'summary': 'Les prévisions du vendredi 5 septembre 2025. Voici les prévisions établies par la Direction générale de la météorologie pour le vendredi 5 septembre 2025: – Temps chaud sur l’extrême sud du pays, et assez chaud sur le Sud-Est, l’intérieur de Gharb et de Souss, le Saiss, les plaines à l’Ouest de l’Atlas et le reste des provinces', 'size': 2}], 'main_title': "Le temps qu'il fera ce samedi 6 septembre 2025"}, {'community_id': '6', 'articles': [{'id': '4', 'title': 'Regragui : "Notre tactique a bien fonctionné, l’essentiel est la qualification"', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/440122-regragui-notre-tactique-a-bien-fonctionne-lessentiel-est-la-qualification.html', 'summary': 'Regragui : "Notre tactique a bien fonctionné, l’essentiel est la qualification". Le sélectionneur de l’équipe du Maroc de football, Walid Regragui, a fait savoir, vendredi, que la tactique mise en place face au Niger a « bien fonctionné » et permis aux Lions de l’Atlas de s’imposer par 5 buts à 0, notant que «l’essentiel est la qualification pour le prochain Mondial». «Je voudrais remercier les joueurs qui . ', 'size': 3}, {'id': '46', 'title': 'Eliminatoires Mondial 2026 : Le Maroc bat le Niger et se qualifie pour la phase finale', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/175796/eliminatoires-mondial-2026-maroc-niger.html', 'summary': 'Eliminatoires Mondial 2026 : Le Maroc bat le Niger et se qualifie pour la phase finale. La sélection marocaine a assuré sa qualification pour la phase finale de la Coupe du monde 2026 après sa victoire, vendredi soir au stade prince Moulay Abdellah à Rabat contre le Niger par 5 buts à 0 (mi-temps 2-0) dans un match comptant pour la 7è journée (Groupe E) des qualifications africaines. Les buts de la rencontre ont été inscrits par Ismael Saibari, auteur d’un doublé (29e et 38e), Ayoub El Kaabi (50e), Hamza Igamane (68e) et Azeddine Ounahi (84e).', 'size': 5}, {'id': '49', 'title': 'Qualifications africaines au Mondial 2026 : Le Maroc se qualifie pour la phase finale après sa victoire contre le Niger 5-0', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/une/qualifications-africaines-au-mondial-2026-le-maroc-se-qualifie-pour-la-phase-finale-apres-sa-victoire-contre-le-niger-5-0', 'summary': 'Qualifications africaines au Mondial 2026 : Le Maroc se qualifie pour la phase finale après sa victoire contre le Niger 5-0. La sélection marocaine a assuré sa qualification pour la phase finale de la Coupe du Monde 2026 après sa victoire, vendredi soir au Stade Prince Moulay Abdellah à Rabat contre le Niger par 5 buts à 0 (mi-temps 2-0) dans un match comptant pour la 7è journée (Groupe E) des qualifications africaines. Les buts de .', 'size': 5}, {'id': '73', 'title': 'Qualifications du Mondial-2026 (match Maroc/Niger) : ouverture des portes du complexe sportif Prince Moulay Abdellah à 16h00', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/qualifications-du-mondial-2026-match-maroc-niger-ouverture-des-portes-du-complexe-sportif-prince-moulay-abdellah-a-16h00/', 'summary': 'Qualifications du Mondial-2026 (match Maroc/Niger) : ouverture des portes du complexe sportif Prince Moulay Abdellah à 16h00. Le complexe sportif Prince Moulay Abdellah de Rabat, qui accueillera vendredi soir (20h00) le match entre les sélections nationales du Maroc et du Niger pour le compte des qualifications africaines pour le Mondial 2026, ouvrira ses portes à partir de 16h00, indique la Fédération royale marocaine de football (FRMF). « Le Comité d’organisation porte à la .', 'size': 5}, {'id': '77', 'title': 'Qualif. Afrique CM 2026 | Le Maroc se qualifie pour la phase finale après sa victoire contre le Niger (5-0)', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/qualif-afrique-cm-2026-le-maroc-se-qualifie-pour-la-phase-finale-apres-sa-victoire-contre-le-niger-5-0/', 'summary': 'Qualif. Afrique CM 2026 | Le Maroc se qualifie pour la phase finale après sa victoire contre le Niger (5-0). Les Lions de l’Atlas ont validé, haut la main, leur ticket pour la Coupe du monde de football 2026, en dominant le Niger sur le score sans appel de 5 buts à 0, en match comptant pour la 7e journée du groupe E des qualifications africaines, vendredi au Stade Prince Moulay Abdellah à Rabat. Pour ce ', 'size': 6}, {'id': '90', 'title': 'Mondial-2026 : “Notre tactique a bien fonctionné, l’essentiel est la qualification” (Walid Regragui)', 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/mondial-2026-regragui-salue-la-tactique-et-la-qualification-du-maroc/299999', 'summary': 'Mondial-2026 : “Notre tactique a bien fonctionné, l’essentiel est la qualification” (Walid Regragui). Les Lions de l’Atlas se sont offerts une victoire éclatante vendredi soir au stade Prince Moulay Abdellah de Rabat, en battant le Niger par cinq buts à zéro. Un succès qui scelle l.', 'size': 5}, {'id': '95', 'title': '(Qualifications au Mondial-2026) Walid Regragui : « Notre tactique a bien fonctionné, l’essentiel est la qualification »', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Qualifications-au-Mondial-2026-Walid-Regragui-Notre-tactique-a-bien-fonctionne-l-essentiel-est-la-qualification_a71456.html', 'summary': '(Qualifications au Mondial-2026) Walid Regragui : « Notre tactique a bien fonctionné, l’essentiel est la qualification ». Le sélectionneur de l’équipe du Maroc de football, Walid Regragui, a fait savoir, vendredi, que la tactique mise en place face au Niger a “bien fonctionné” et permis aux Lions de l’Atlas de s’imposer par 5 buts à 0, notant que «l’essentiel est la qualification pour le prochain Mondial».', 'size': 4}, {'id': '99', 'title': 'Qualifications : le Maroc domine le Niger (5-0) et valide son ticket pour le Mondial 2026', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/09/06/qualifications-le-maroc-domine-le-niger-5-0-et-valide-son-ticket-pour-le-mondial-2026_1949140/', 'summary': 'Qualifications : le Maroc domine le Niger (5-0) et valide son ticket pour le Mondial 2026. Les Lions de l’Atlas ont validé, haut la main, leur ticket pour la Coupe du monde de football 2026, en dominant le Niger sur le score sans appel de 5 buts à 0, en match comptant pour la 7e journée du groupe E des qualifications africaines, vendredi au Stade Prince Moulay Abdellah à Rabat. Pour.', 'size': 7}], 'main_title': 'Qualifications : le Maroc domine le Niger (5-0) et valide son ticket pour le Mondial 2026'}, {'community_id': '2', 'articles': [{'id': '8', 'title': 'Qualification du Maroc pour le Mondial 2026: Infantino salue une “performance exceptionnelle”', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/440120-qualification-du-maroc-pour-le-mondial-2026-infantino-salue-une-performance-exceptionnelle.html', 'summary': 'Qualification du Maroc pour le Mondial 2026: Infantino salue une “performance exceptionnelle”. Le président de la Fédération internationale de football (FIFA), Gianni Infantino, a qualifié, vendredi soir, de “performance exceptionnelle”, la qualification de la sélection marocaine pour la Coupe du monde 2026. “Quelle performance exceptionnelle! Dima Maghreb, félicitations au Maroc qui s’apprête à disputer la Coupe du Monde de la FIFA pour la septième fois de son . ', 'size': 3}, {'id': '76', 'title': 'Qualif. Maroc CM 2026 | Gianni Infantino salue une “performance exceptionnelle” (FIFA)', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/qualif-maroc-cm-2026-gianni-infantino-salue-une-performance-exceptionnelle-fifa/', 'summary': 'Qualif. Maroc CM 2026 | Gianni Infantino salue une “performance exceptionnelle” (FIFA). Le président de la Fédération internationale de football (FIFA), Gianni Infantino, a qualifié, vendredi soir, de “performance exceptionnelle”, la qualification de la sélection marocaine pour la Coupe du monde 2026. “Quelle performance exceptionnelle! Dima Maghreb, félicitations au Maroc qui s’apprête à disputer la Coupe du Monde de la FIFA pour la septième fois de son ', 'size': 3}, {'id': '88', 'title': 'Infantino salue la “performance exceptionnelle” du Maroc qualifié pour le Mondial 2026', 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/maroc-qualifie-au-mondial-2026-infantino-salue-les-lions-de-latlas/299998', 'summary': 'Infantino salue la “performance exceptionnelle” du Maroc qualifié pour le Mondial 2026. La qualification du Maroc pour la Coupe du monde 2026 n’est pas passée inaperçue. Depuis ses réseaux sociaux, le président de la Fédération internationale de football (FIFA), Giann.', 'size': 3}], 'main_title': 'Qualification du Maroc pour le Mondial 2026: Infantino salue une “performance exceptionnelle”'}, {'community_id': '3', 'articles': [{'id': '14', 'title': 'FAO : les prix mondiaux des denrées alimentaires stables en août', 'source': 'lematin.ma', 'link': 'https://lematin.ma/economie/fao-les-prix-mondiaux-des-denrees-alimentaires-stables-en-aout/299956', 'summary': 'FAO : les prix mondiaux des denrées alimentaires stables en août. L’Organisation des Nations unies pour l’alimentation et l’agriculture (FAO) a indiqué, vendredi à Rome, que son indice des prix alimentaires a légèrement progressé à 130,1 points e.', 'size': 2}, {'id': '68', 'title': 'FAO: L’indice des prix des produits alimentaires reste inchangé en août', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/fao-lindice-des-prix-des-produits-alimentaires-reste-inchange-en-aout/', 'summary': 'FAO: L’indice des prix des produits alimentaires reste inchangé en août. L’indice des prix des produits alimentaires de l’Organisation des Nations unies pour l’alimentation et l’agriculture (FAO) a affiché une valeur moyenne de 130,1 points en août, soit à peine plus que son niveau révisé de juillet (130,0 points) et 6,9% de plus qu’une année auparavant. L’indice, qui suit les changements mensuels des prix internationaux d’un .', 'size': 2}], 'main_title': 'FAO : les prix mondiaux des denrées alimentaires stables en août'}, {'community_id': '4', 'articles': [{'id': '18', 'title': 'S.M. le Roi ordonne au Conseil Supérieur des Oulémas d’émettre une fatwa exhaustive sur la Zakat', 'source': 'lematin.ma', 'link': 'https://lematin.ma/activites-royales/sm-le-roi-ordonne-aux-oulemas-demettre-une-fatwa-exhaustive-sur-la-zakat/299931', 'summary': 'S.M. le Roi ordonne au Conseil Supérieur des Oulémas d’émettre une fatwa exhaustive sur la Zakat. Voici la traduction du communiqué du Conseil Supérieur des Oulémas :Le Conseil Supérieur des Oulémas annonce que Sa Majesté le Roi Mohammed VI, Amir Al Mouminine, que Dieu L.', 'size': 5}, {'id': '30', 'title': 'SM le Roi ordonne aux Oulémas d’émettre une fatwa exhaustive sur la Zakat', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/SM-le-Roi-ordonne-aux-Oulemas-d-emettre-une-fatwa-exhaustive-sur-la-Zakat_a71441.html', 'summary': "SM le Roi ordonne aux Oulémas d’émettre une fatwa exhaustive sur la Zakat. Sa Majesté le Roi Mohammed VI, Amir Al Mouminine, que Dieu L'assiste, a bien voulu ordonner au Conseil Supérieur des Oulémas d’émettre une fatwa exhaustive clarifiant les règles de la Charia au sujet de la Zakat, indique un communiqué du Conseil.", 'size': 5}, {'id': '48', 'title': 'Le Roi Mohammed VI ordonne au Conseil Supérieur des Oulémas d’émettre une fatwa au sujet de la Zakat', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/175788/mohammed-ordonne-conseil-superieur-oulemas.html', 'summary': 'Le Roi Mohammed VI ordonne au Conseil Supérieur des Oulémas d’émettre une fatwa au sujet de la Zakat. Sur ordre du Roi Mohammed VI, Amir Al Mouminine, le Conseil Supérieur des Oulémas a été chargé d’émettre une fatwa exhaustive clarifiant les règles de la Charia relatives à la Zakat, a annoncé l’institution dans un communiqué.', 'size': 5}, {'id': '53', 'title': 'SM le Roi ordonne au Conseil Supérieur des Oulémas d’émettre une fatwa exhaustive clarifiant les règles de la Charia au sujet de la Zakat', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/actualite/sm-le-roi-ordonne-au-conseil-superieur-des-oulemas-demettre-une-fatwa-exhaustive-clarifiant-les-regles-de-la-charia-au-sujet-de-la-zakat', 'summary': 'SM le Roi ordonne au Conseil Supérieur des Oulémas d’émettre une fatwa exhaustive clarifiant les règles de la Charia au sujet de la Zakat. Sa Majesté le Roi Mohammed VI, Amir Al Mouminine, que Dieu L’assiste, a bien voulu ordonner au Conseil Supérieur des Oulémas d’émettre une fatwa exhaustive clarifiant les règles de la Charia au sujet de la Zakat, indique un communiqué du Conseil. Voici la traduction du communiqué du Conseil Supérieur des Oulémas : « Le Conseil Supérieur .', 'size': 5}, {'id': '62', 'title': 'Charia relative à la Zakat : SM le Roi ordonne au Conseil Supérieur des Oulémas d’émettre une fatwa', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/au-royaume/charia-relative-a-la-zakat-sm-le-roi-ordonne-au-conseil-superieur-des-oulemas-demettre-une-fatwa/', 'summary': 'Charia relative à la Zakat : SM le Roi ordonne au Conseil Supérieur des Oulémas d’émettre une fatwa. SM le Roi Mohammed VI a bien voulu ordonner au Conseil Supérieur des Oulémas d’émettre une fatwa exhaustive clarifiant les règles de la Charia au sujet de la Zakat, indique un communiqué du Conseil.', 'size': 5}], 'main_title': 'S.M. le Roi ordonne au Conseil Supérieur des Oulémas d’émettre une fatwa exhaustive sur la Zakat'}, {'community_id': '5', 'articles': [{'id': '44', 'title': 'Le dirham se déprécie légèrement face au dollar et à l’euro', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/le-dirham-se-deprecie-legerement-face-au-dollar-et-a-leuro-309532/', 'summary': 'Le dirham se déprécie légèrement face au dollar et à l’euro. Le dirham s’est déprécié de 0,3% face au dollar américain et de 0,7% vis-à-vis de l’euro durant la semaine du 28 août au 3 septembre 2025, selon Bank Al-Maghrib (BAM). Au cours de cette période, aucune opération d’adjudication n’a été réalisée sur le marché des changes, indique BAM dans son', 'size': 2}, {'id': '72', 'title': 'Le dirham se déprécie de 0,3% face au dollar du 28 août au 3 septembre', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/le-dirham-se-deprecie-de-03-face-au-dollar-du-28-aout-au-3-septembre/', 'summary': 'Le dirham se déprécie de 0,3% face au dollar du 28 août au 3 septembre. Le dirham s’est déprécié de 0,3% face au dollar américain et de 0,7% vis-à-vis de l’euro durant la semaine du 28 août au 3 septembre 2025, selon Bank Al-Maghrib (BAM). Au cours de cette période, aucune opération d’adjudication n’a été réalisée sur le marché des changes, indique BAM dans son récent bulletin des indicateurs hebdomadaires. .', 'size': 2}], 'main_title': 'Le dirham se déprécie légèrement face au dollar et à l’euro'}, {'community_id': '7', 'articles': [{'id': '50', 'title': 'Accidents de route: près de 8 milliards DH versés en indemnisations en 2024', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/actualite/accidents-de-route-pres-de-8-milliards-dh-verses-en-indemnisations-en-2024', 'summary': 'Accidents de route: près de 8 milliards DH versés en indemnisations en 2024. Près de 7,9 milliards de dirhams (MMDH) ont été versés en indemnisations par les institutions et les compagnies d’assurance au titre des accidents de circulation en 2024, a indiqué le ministre délégué chargé des Relations avec le Parlement, porte-parole du gouvernement, Mustapha Baitas. En réponse à une question lors du point de presse à l’issue .', 'size': 2}, {'id': '74', 'title': 'Accidents de route: près de 7,9 MMDH versés en indemnisations en 2024', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/accidents-de-route-pres-de-79-mmdh-verses-en-indemnisations-en-2024/', 'summary': 'Accidents de route: près de 7,9 MMDH versés en indemnisations en 2024. Près de 7,9 milliards de dirhams (MMDH) ont été versés en indemnisations par les institutions et les compagnies d’assurance au titre des accidents de circulation en 2024, a indiqué le ministre délégué chargé des Relations avec le Parlement, porte-parole du gouvernement, Mustapha Baitas. En réponse à une question lors du point de presse à l’issue .', 'size': 2}], 'main_title': 'Accidents de route: près de 8 milliards DH versés en indemnisations en 2024'}, {'community_id': '8', 'articles': [{'id': '69', 'title': 'USA : Trump va renommer le département de la Défense en «\xa0ministère de la Guerre\xa0»', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/usa-trump-va-renommer-le-departement-de-la-defense-en-ministere-de-la-guerre/', 'summary': 'USA : Trump va renommer le département de la Défense en « ministère de la Guerre ». Le président américain, Donald Trump, va signer vendredi un décret visant à renommer le département de la Défense en « ministère de la Guerre », une appellation qui a existé aux Etats-Unis de 1789 à 1949. Selon un responsable de la Maison Blanche, cité par les médias locaux, il s’agit de « rétablir le nom historique de ministère .', 'size': 3}, {'id': '84', 'title': 'Trump renomme le département de la Défense en "ministère de la Guerre"', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/440125-trump-renomme-le-departement-de-la-defense-en-ministere-de-la-guerre.html', 'summary': 'Trump renomme le département de la Défense en "ministère de la Guerre". Le président américain, Donald Trump, a signé vendredi un ordre exécutif renommant le département de la Défense en « ministère de la Guerre », une appellation qui a existé aux Etats-Unis de 1789 à 1949. « Cela envoie un message de victoire et de force » aux alliés comme aux ennemis des Etats-Unis, a lancé M. Trump depuis le . ', 'size': 3}, {'id': '93', 'title': '\u200bTrump signe un décret renommant le département de la Défense en "ministère de la Guerre"', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/\u200bTrump-signe-un-decret-renommant-le-departement-de-la-Defense-en-ministere-de-la-Guerre_a71458.html', 'summary': '\u200bTrump signe un décret renommant le département de la Défense en "ministère de la Guerre". Le président américain, Donald Trump, a signé vendredi un ordre exécutif renommant le département de la Défense en "ministère de la Guerre", une appellation qui a existé aux Etats-Unis de 1789 à 1949.', 'size': 3}], 'main_title': 'USA : Trump va renommer le département de la Défense en «\xa0ministère de la Guerre\xa0»'}, {'community_id': '9', 'articles': [{'id': '70', 'title': 'Températures prévues pour le samedi 06 septembre 2025', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/temperatures-prevues-pour-le-samedi-06-septembre-2025/', 'summary': 'Températures prévues pour le samedi 06 septembre 2025. Voici les températures minimales et maximales prévues par la Direction générale de la météorologie pour le samedi 06 septembre 2025: Min Max – Oujda 20 31 – Bouarfa 22 35 – Al Hoceima 19 32 – Tétouan 20 25 – Sebta 22 25 – Mellilia 23 26 – Tanger 23 31 – Kénitra 18 28 .', 'size': 2}, {'id': '87', 'title': 'Les températures attendues ce samedi 6 septembre 2025', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/440116-les-temperatures-attendues-ce-samedi-6-septembre-2025.html', 'summary': 'Les températures attendues ce samedi 6 septembre 2025. Voici les températures minimales et maximales prévues par la Direction générale de la météorologie pour la journée du samedi 6 septembre 2025 Min Max – Oujda 20 31 – Bouarfa 22 35 – Al Hoceima 19 32 – Tétouan 20 25 – Sebta 22 25 – Mellilia 23 26 – Tanger 23 31 – Kénitra . ', 'size': 2}], 'main_title': 'Températures prévues pour le samedi 06 septembre 2025'}, {'community_id': '1', 'articles': [{'id': '102', 'title': 'L’Boulevard : «\xa0Une scène pour les oubliés des autres festivals\xa0»', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/influences/culture/lboulevard-une-scene-pour-les-oublies-des-autres-festivals/', 'summary': 'L’Boulevard : « Une scène pour les oubliés des autres festivals ». Vingt-cinq ans après ses débuts improvisés, L’Boulevard (du 18 au 21 septembre) reste une scène incontournable pour les musiques urbaines et alternatives au Maroc.', 'size': 2}, {'id': '110', 'title': 'Festival : les musiques urbaines ont un L’Boulevard', 'source': 'leseco.ma', 'link': 'https://leseco.ma/culture/festival-les-musiques-urbaines-ont-un-lboulevard.html', 'summary': 'Festival : les musiques urbaines ont un L’Boulevard. Du 18 au 21 septembre, L’Boulevard revient avec sa scène du stade R.U.C., dédiée au musiques urbaines, marocaines ou d’ailleurs. Un rendez-vous incontournable dans la vie culturelle casablancaise, voire nationale. Entrée libre et gratuite, dans la limite des places disponibles. ', 'size': 2}], 'main_title': 'L’Boulevard : «\xa0Une scène pour les oubliés des autres festivals\xa0»'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
                        
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ? d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        // Fonction pour cacher le tooltip
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = '';
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
    
    
</body>




</html>
    