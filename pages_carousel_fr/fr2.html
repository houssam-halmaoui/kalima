<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); 
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title"> Les principales actualités des dernières 24 heures

</div>    
        <div class="header-subtitle"> Dernière mise à jour : 26/08/2025 - 06h16</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"></div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '3', 'title': 'Elim Mondial 2026 : Lancement de la billetterie pour le match Maroc-Niger', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/438633-elim-mondial-2026-lancement-de-la-billetterie-pour-le-match-maroc-niger.html', 'summary': 'Elim Mondial 2026 : Lancement de la billetterie pour le match Maroc-Niger. La Fédération marocaine de football a annoncé l’ouverture de la billetterie pour le match qui opposera l’équipe nationale au Niger, prévu le vendredi 5 septembre 2025 au Complexe sportif Prince Moulay Abdellah de Rabat. Cette rencontre s’inscrit dans le cadre des éliminatoires africaines pour la Coupe du monde 2026. Les tickets seront disponibles à partir . ', 'size': 2}, {'id': '71', 'title': 'Foot : la vente des billets du match Maroc-Niger pour les qualifications du Mondial lancée le 26 août', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/25/foot-la-vente-des-billets-du-match-maroc-niger-pour-les-qualifications-du-mondial-lancee-le-26-aout_1947433/', 'summary': 'Foot : la vente des billets du match Maroc-Niger pour les qualifications du Mondial lancée le 26 août. La vente des billets du match qui opposera l’équipe nationale marocaine à celle du Niger, le 5 septembre prochain au complexe sportif Prince Moulay Abdellah à Rabat, sera lancée à partir du mardi 26 août à 08h00, a annoncé le comité d’organisation de cette rencontre comptant pour les qualifications du Mondial 2026 de football. Dans.', 'size': 2}], 'main_title': 'Elim Mondial 2026 : Lancement de la billetterie pour le match Maroc-Niger'}, {'community_id': '4', 'articles': [{'id': '5', 'title': 'Moulay El Hassan reçoit les enfants maqdessis participant à la 16e édition des colonies de vacances', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/438646-moulay-el-hassan-recoit-les-enfants-maqdessis-participant-a-la-16e-edition-des-colonies-de-vacances.html', 'summary': 'Moulay El Hassan reçoit les enfants maqdessis participant à la 16e édition des colonies de vacances. Sur Ordre du Roi Mohammed VI, Son Altesse Royale le Prince Héritier Moulay El Hassan, a reçu, lundi au Palais Royal de Tétouan, les enfants maqdessis participant à la 16e édition des colonies de vacances organisées par l’Agence Bayt Mal Al-Qods Acharif. Placée sous le Haut Patronage du Roi Mohammed VI, Président du Comité Al-Qods, . ', 'size': 5}, {'id': '18', 'title': 'S.A.R. le Prince Héritier Moulay El Hassan reçoit les enfants maqdessis participant aux colonies de vacances de l’Agence Bayt Mal Al-Qods Acharif', 'source': 'lematin.ma', 'link': 'https://lematin.ma/nation/sar-le-prince-heritier-moulay-el-hassan-recoit-les-enfants-maqdessis/298006', 'summary': 'S.A.R. le Prince Héritier Moulay El Hassan reçoit les enfants maqdessis participant aux colonies de vacances de l’Agence Bayt Mal Al-Qods Acharif. Placée sous le Haut Patronage de Sa Majesté le Roi Mohammed VI, Président du Comité Al-Qods, cette initiative de Bayt Mal Al-Qods Acharif reflète le soutien constant de S.M. le Roi.', 'size': 5}, {'id': '99', 'title': 'SAR le Prince Héritier Moulay El Hassan reçoit les enfants maqdessis participant à la 16e édition des colonies de vacances de l’Agence Bayt Mal Al-Qods Acharif', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/actualite/sar-le-prince-heritier-moulay-el-hassan-recoit-les-enfants-maqdessis-participant-a-la-16e-edition-des-colonies-de-vacances-de-lagence-bayt-mal-al-qods-acharif', 'summary': 'SAR le Prince Héritier Moulay El Hassan reçoit les enfants maqdessis participant à la 16e édition des colonies de vacances de l’Agence Bayt Mal Al-Qods Acharif. Sur Ordre de Sa Majesté le Roi Mohammed VI, que Dieu L’assiste, Son Altesse Royale le Prince Héritier Moulay El Hassan, a reçu, lundi au Palais Royal de Tétouan, les enfants maqdessis participant à la 16e édition des colonies de vacances organisées par l’Agence Bayt Mal Al-Qods Acharif. Placée sous le Haut Patronage de Sa .', 'size': 5}, {'id': '114', 'title': 'SAR le Prince Héritier Moulay El Hassan accueille les enfants maqdessis', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/au-royaume/sar-le-prince-heritier-moulay-el-hassan-accueille-les-enfants-maqdessis/', 'summary': 'SAR le Prince Héritier Moulay El Hassan accueille les enfants maqdessis. Son Altesse Royale le Prince Héritier Moulay El Hassan a reçu les enfants maqdessis participant à la 16e édition des colonies de vacances organisée par l’Agence Bayt Mal Al-Qods Acharif. Cette initiative s’inscrit dans le cadre du soutien constant du Souverain à la Ville Sainte et à ses habitants.', 'size': 5}, {'id': '129', 'title': 'S.A.R. le Prince Héritier Moulay El Hassan reçoit les enfants maqdessis des colonies de vacances de Bayt Mal Al-Qods', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/s-a-r-le-prince-heritier-moulay-el-hassan-recoit-les-enfants-maqdessis/', 'summary': 'S.A.R. le Prince Héritier Moulay El Hassan reçoit les enfants maqdessis des colonies de vacances de Bayt Mal Al-Qods. Sur Ordre de Sa Majesté le Roi Mohammed VI, que Dieu L’assiste, Son Altesse Royale le Prince Héritier Moulay El Hassan, a reçu, lundi au Palais Royal de Tétouan, les enfants maqdessis participant à la 16e édition des colonies de vacances organisées par l’Agence Bayt Mal Al-Qods Acharif. Placée sous le Haut Patronage de Sa .', 'size': 5}], 'main_title': 'Moulay El Hassan reçoit les enfants maqdessis participant à la 16e édition des colonies de vacances'}, {'community_id': '2', 'articles': [{'id': '7', 'title': 'Inceste présumé à Aïn Aouda : un père et sa fille devant la justice', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/438627-inceste-presume-a-ain-aouda-un-pere-et-sa-fille-devant-la-justice.html', 'summary': 'Inceste présumé à Aïn Aouda : un père et sa fille devant la justice. Une affaire aux relents de scandale secoue la commune de El Menzeh, près d’Aïn Aouda, après l’arrestation d’un père et de sa fille, soupçonnés d’avoir entretenu une relation incestueuse ayant abouti à la naissance de plusieurs enfants. Selon des sources judiciaires, le dossier a été confié à un juge d’instruction près la Cour d’appel de . ', 'size': 2}, {'id': '95', 'title': "Scandale d'inceste à Ain El Aouda : Un père et sa fille auraient eu six enfants ensemble", 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/174880/scandale-d-inceste-aouda-pere-fille.html', 'summary': "Scandale d'inceste à Ain El Aouda : Un père et sa fille auraient eu six enfants ensemble. La Gendarmerie royale dAin El Aouda a déféré, hier, un père et sa fille devant le procureur général près la Cour dappel de Rabat, pour leur implication présumée dans une relation incestueuse ayant abouti à la naissance de six enfants.", 'size': 2}], 'main_title': 'Inceste présumé à Aïn Aouda : un père et sa fille devant la justice'}, {'community_id': '3', 'articles': [{'id': '8', 'title': 'La DGAPR explique des détails concernant les peines alternatives', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/438620-la-dgapr-explique-des-details-concernant-les-peines-alternatives.html', 'summary': 'La DGAPR explique des détails concernant les peines alternatives. La Délégation générale à l’administration pénitentiaire et à la réinsertion (DGAPR) a affirmé, lundi, que des informations relayées par certains sites électroniques comportent une mécompréhension et de données erronées au sujet de la mise en œuvre des dispositions de la loi 43.22 relative aux peines alternatives. Dans une mise au point, la DGAPR a précisé, . ', 'size': 3}, {'id': '58', 'title': 'Peines alternatives : la DGAPR se dit prête à assurer le suivi', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Peines-alternatives-la-DGAPR-se-dit-prete-a-assurer-le-suivi_a71066.html', 'summary': "Peines alternatives : la DGAPR se dit prête à assurer le suivi. La Délégation générale à l'administration pénitentiaire et à la réinsertion (DGAPR) a affirmé, lundi, que des informations relayées par certains sites électroniques comportent une mécompréhension et de données erronées au sujet de la mise en œuvre des dispositions de la loi 43.22 relative aux peines alternatives.", 'size': 3}, {'id': '74', 'title': 'La direction des prisons va accélérer la mise en application des peines alternatives', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/25/la-direction-des-prisons-va-accelerer-la-mise-en-application-des-peines-alternatives_1947420/', 'summary': 'La direction des prisons va accélérer la mise en application des peines alternatives. La Délégation générale à l’administration pénitentiaire et à la réinsertion (DGAPR) a affirmé, lundi, que des informations relayées par certains sites électroniques comportent une mécompréhension et des données erronées au sujet de la mise en œuvre des dispositions de la loi 43.22 relative aux peines alternatives. Dans une mise au point, la DGAPR a précisé,.', 'size': 3}], 'main_title': 'La DGAPR explique des détails concernant les peines alternatives'}, {'community_id': '5', 'articles': [{'id': '26', 'title': 'Akdital inaugure trois nouveaux hôpitaux à Oujda et Nador', 'source': 'lematin.ma', 'link': 'https://lematin.ma/economie/akdital-inaugure-trois-nouveaux-hopitaux-a-oujda-et-nador/297946', 'summary': 'Akdital inaugure trois nouveaux hôpitaux à Oujda et Nador. Dans un communiqué, le Groupe Akdital souligne la poursuite de son déploiement national et confirme son rôle moteur dans la modernisation du système de santé marocain, couvrant dés.', 'size': 5}, {'id': '59', 'title': 'Oujda - Nador : Akdital renforce l’accès aux soins avec de nouvelles infrastructures hospitalières', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Oujda-Nador-Akdital-renforce-l-acces-aux-soins-avec-de-nouvelles-infrastructures-hospitalieres_a71064.html', 'summary': "Oujda - Nador : Akdital renforce l’accès aux soins avec de nouvelles infrastructures hospitalières. Le Groupe Akdital annonce l’ouverture d’un hôpital privé et d’un Centre international d’oncologie à Oujda, ainsi qu'un hôpital multidisciplinaire et oncologique à Nador.", 'size': 4}, {'id': '96', 'title': 'Maroc\xa0: Akdital inaugure trois nouveaux hôpitaux à Oujda et Nador', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/174881/maroc-akdital-inaugure-trois-nouveaux.html', 'summary': 'Maroc : Akdital inaugure trois nouveaux hôpitaux à Oujda et Nador. Avec le premier centre d’oncologie et de médecine nucléaire à Nador, l’hôpital pluridisciplinaire et le centre international d’oncologie à Oujda, Akdital a inauguré récemment trois établissements hospitaliers pour renforcer l’offre de santé dans l’Oriental.', 'size': 5}, {'id': '121', 'title': 'Infrastructures de santé : Akdital inaugure trois nouveaux hôpitaux à Oujda et Nador', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/au-royaume/infrastructures-de-sante-akdital-inaugure-trois-nouveaux-hopitaux-a-oujda-et-nador/', 'summary': 'Infrastructures de santé : Akdital inaugure trois nouveaux hôpitaux à Oujda et Nador. Avec la mise en service de ces trois nouveaux établissements représentant une capacité totale de 298 lits, Akdital confirme son rôle de leader dans la transformation du système de santé marocain, offrant désormais une couverture complète des 12 régions du Royaume.', 'size': 4}, {'id': '154', 'title': 'Akdital inaugure de nouveaux hôpitaux à Oujda et Nador', 'source': 'lnt.ma', 'link': 'https://lnt.ma/akdital-inaugure-de-nouveaux-hopitaux-a-oujda-et-nador/', 'summary': 'Akdital inaugure de nouveaux hôpitaux à Oujda et Nador. Le Groupe Akdital annonce l’ouverture d’un hôpital privé et d’un Centre international d’oncologie à Oujda, ainsi qu’un hôpital multidisciplinaire et oncologique à Nador. Dans un communiqué, le Groupe souligne la poursuite de son déploiement national et confirme son rôle moteur dans la modernisation du système de santé marocain, couvrant désormais les 12 régions du Royaume. . ', 'size': 5}], 'main_title': 'Akdital inaugure trois nouveaux hôpitaux à Oujda et Nador'}, {'community_id': '6', 'articles': [{'id': '31', 'title': 'Imilchil célèbre le Moussem des fiançailles et le Festival des musiques des cimes du 18 au 20 septembre', 'source': 'lematin.ma', 'link': 'https://lematin.ma/culture/imilchil-celebre-le-moussem-des-fiancailles-et-musiques-des-cimes-2025/297950', 'summary': 'Imilchil célèbre le Moussem des fiançailles et le Festival des musiques des cimes du 18 au 20 septembre. Du 18 au 20 septembre, Bouzmou et Imilchil dans la province de Midelt seront le théâtre d’un double rendez-vous culturel unique. Les organisateurs annoncent le retour du Moussem de.', 'size': 2}, {'id': '138', 'title': 'Imilchil : le Moussem des fiançailles et le Festival des musiques des cimes, du 18 au 20 septembre', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/imilchil-le-moussem-des-fiancailles-et-le-festival-des-musiques-des-cimes-du-18-au-20-septembre.html', 'summary': 'Imilchil : le Moussem des fiançailles et le Festival des musiques des cimes, du 18 au 20 septembre. L’édition 2025 du Moussem des fiançailles et du Festival des musiques des cimes aura lieu du 18 au 20 septembre prochain à Bouzemou et à Imilchil (Province de Midelt, Maroc), annoncent les organisateurs. Organisés par l’Association Akhiam en partenariat avec les communes territoriales de Bouzmou et d’Imilchil, le Moussem des fiançailles et le Festival des . L’article est apparu en premier sur .', 'size': 2}], 'main_title': 'Imilchil célèbre le Moussem des fiançailles et le Festival des musiques des cimes du 18 au 20 septembre'}, {'community_id': '7', 'articles': [{'id': '32', 'title': "Décès d'Ali Hassan, figure emblématique de la télévision et du cinéma marocains", 'source': 'lematin.ma', 'link': 'https://lematin.ma/culture/deces-dali-hassan-figure-emblematique-de-la-television-marocaine/297947', 'summary': "Décès d'Ali Hassan, figure emblématique de la télévision et du cinéma marocains. Le défunt était une figure emblématique de la télévision et du cinéma marocains et a présenté d’autres programmes radiophoniques consacrés à la diffusion de la culture cinématograp.", 'size': 2}, {'id': '153', 'title': 'Décès d’Ali Hassan, figure du cinéma et de la télévision marocains', 'source': 'lnt.ma', 'link': 'https://lnt.ma/deces-dali-hassan-figure-du-cinema-et-de-la-television-marocains/', 'summary': 'Décès d’Ali Hassan, figure du cinéma et de la télévision marocains. Ali Hassan, ancien journaliste et présentateur de l’émission télévisée « Cinéma du jeudi », s’est éteint, lundi à Rabat, a-t-on appris auprès de ses proches. Le défunt était une figure emblématique de la télévision et du cinéma marocains et a présenté d’autres programmes radiophoniques consacrés à la diffusion de la culture cinématographique. En 1964, feu Ali Hassan . ', 'size': 2}], 'main_title': "Décès d'Ali Hassan, figure emblématique de la télévision et du cinéma marocains"}, {'community_id': '8', 'articles': [{'id': '33', 'title': 'La finale du Free Fire Battle of Morocco s’invite à Casablanca le 6 septembre 2025', 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/finale-free-fire-battle-of-morocco-2025-a-casablanca-le-6-septembre/297891', 'summary': 'La finale du Free Fire Battle of Morocco s’invite à Casablanca le 6 septembre 2025. Le paysage esportif marocain s’apprête à vivre un rendez-vous majeur. Garena, éditeur du jeu Free Fire, a lancé le 22 juillet la nouvelle édition du Battle of Morocco (BOM), un tou.', 'size': 2}, {'id': '157', 'title': 'Battle of Morocco 2025 : 12 équipes en lice pour la grande finale nationale', 'source': 'lnt.ma', 'link': 'https://lnt.ma/battle-of-morocco-2025-12-equipes-en-lice-pour-la-grande-finale-nationale/', 'summary': 'Battle of Morocco 2025 : 12 équipes en lice pour la grande finale nationale. Garena, développeur et éditeur de jeux vidéo, annonce le retour du Free Fire Battle of Morocco (BOM) 2025. Avec un format repensé, une portée élargie et une dotation de 100 000 dirhams, cette édition constitue un événement important pour la scène esportive marocaine. Lancé le 22 juillet avec les phases qualificatives régionales, le tournoi connaîtra sa . ', 'size': 2}], 'main_title': 'La finale du Free Fire Battle of Morocco s’invite à Casablanca le 6 septembre 2025'}, {'community_id': '1', 'articles': [{'id': '44', 'title': "Ouverture à Rabat des travaux de la 82e session de l'Institut de Droit International", 'source': 'lematin.ma', 'link': 'https://lematin.ma/nation/ouverture-des-travaux-de-linstitut-de-droit-international/297870', 'summary': "Ouverture à Rabat des travaux de la 82e session de l'Institut de Droit International. La séance d'ouverture de cette session, qui se tient jusqu’au 31 août, a été marquée par un Message adressé par Sa Majesté le Roi Mohammed VI, que Dieu L'assiste, aux parti.", 'size': 3}, {'id': '124', 'title': 'SM Le Roi adresse un Message aux participants à la 82e session de l’Institut de Droit International', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/au-royaume/evenement/sm-le-roi-adresse-un-message-aux-participants-a-la-82e-session-de-linstitut-de-droit-international/', 'summary': 'SM Le Roi adresse un Message aux participants à la 82e session de l’Institut de Droit International. Sa Majesté le Roi Mohammed VI a adressé un Message aux participants à la 82e session de l’Institut de Droit International, qui a ouvert ses travaux, dimanche au siège de l’Académie du Royaume du Maroc, à Rabat.', 'size': 3}, {'id': '149', 'title': 'SM le Roi adresse un Message aux participants à la 82e session de l’Institut de Droit International', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/sm-le-roi-adresse-un-message-aux-participants-a-la-82e-session-de-linstitut-de-droit-international/', 'summary': 'SM le Roi adresse un Message aux participants à la 82e session de l’Institut de Droit International. Sa Majesté le Roi Mohammed VI, que Dieu L’assiste, a adressé un Message aux participants à la 82e session de l’Institut de Droit International, qui a ouvert ses travaux, dimanche au siège de l’Académie du Royaume du Maroc, à Rabat. Voici le texte intégral du Message Royal, dont lecture a été donnée par le président ', 'size': 3}], 'main_title': "Ouverture à Rabat des travaux de la 82e session de l'Institut de Droit International"}, {'community_id': '9', 'articles': [{'id': '49', 'title': 'CHAN 2024 – Tarik Sektioui : « Nous sommes déterminés à battre le Sénégal pour atteindre la finale »', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/CHAN-2024-Tarik-Sektioui-Nous-sommes-determines-a-battre-le-Senegal-pour-atteindre-la-finale_a71077.html', 'summary': 'CHAN 2024 – Tarik Sektioui : « Nous sommes déterminés à battre le Sénégal pour atteindre la finale ». \u200bLe sélectionneur national, Tarik Sektioui a affirmé, lundi à Kampala, que les joueurs et le staff technique de l’équipe nationale sont déterminés pour remporter le match contre le Sénégal, en demi-finales de la Coupe d’Afrique des nations, prévu mardi au stade Mandela (18h30 GMT+1).', 'size': 3}, {'id': '76', 'title': 'CHAN : le choc Maroc-Sénégal, une finale avant l’heure', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/25/chan-le-choc-maroc-senegal-une-finale-avant-lheure_1947408/', 'summary': 'CHAN : le choc Maroc-Sénégal, une finale avant l’heure. L’équipe nationale du Maroc des joueurs locaux s’apprête à affronter, mardi (18h30) au stade Mandela à Kampala, son homologue sénégalaise pour le compte des demi-finales du Championnat d’Afrique des nations (CHAN), dans un match au sommet qui prend l’allure d’une finale avant l’heure. Avec un troisième sacre historique en ligne de mire pour les Lions.', 'size': 4}, {'id': '136', 'title': 'CHAN-2024 (demi-finales) : le choc Maroc-Sénégal, une finale avant l’heure', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/chan-2024-demi-finales-le-choc-maroc-senegal-une-finale-avant-lheure.html', 'summary': 'CHAN-2024 (demi-finales) : le choc Maroc-Sénégal, une finale avant l’heure. L’équipe nationale du Maroc des joueurs locaux s’apprête à affronter, mardi (18h30) au stade Mandela à Kampala, son homologue sénégalaise pour le compte des demi-finales du Championnat d’Afrique des nations (CHAN), dans un match au sommet qui prend l’allure d’une finale avant l’heure. Avec un troisième sacre historique en ligne de mire pour les Lions . L’article est apparu en premier sur .', 'size': 3}, {'id': '155', 'title': 'CHAN-2024 : le choc Maroc-Sénégal, une finale avant l’heure', 'source': 'lnt.ma', 'link': 'https://lnt.ma/chan-2024-le-choc-maroc-senegal-une-finale-avant-lheure/', 'summary': 'CHAN-2024 : le choc Maroc-Sénégal, une finale avant l’heure. L’équipe nationale du Maroc des joueurs locaux s’apprête à affronter, mardi (18h30) au stade Mandela à Kampala, son homologue sénégalaise pour le compte des demi-finales du Championnat d’Afrique des nations (CHAN), dans un match au sommet qui prend l’allure d’une finale avant l’heure. Avec un troisième sacre historique en ligne de mire pour les Lions . ', 'size': 4}], 'main_title': 'CHAN : le choc Maroc-Sénégal, une finale avant l’heure'}, {'community_id': '15', 'articles': [{'id': '57', 'title': 'Une nouvelle taxe parafiscale au menu du Conseil de gouvernement', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Une-nouvelle-taxe-parafiscale-au-menu-du-Conseil-de-gouvernement_a71067.html', 'summary': 'Une nouvelle taxe parafiscale au menu du Conseil de gouvernement. Un Conseil de gouvernement se tiendra jeudi sous la présidence du Chef du gouvernement, Aziz Akhannouch, indique un communiqué de son Département.', 'size': 5}, {'id': '73', 'title': "Le gouvernement examinera jeudi le projet de loi relatif à l'enseignement supérieur", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/25/le-gouvernement-examinera-jeudi-le-projet-de-loi-relatif-a-lenseignement-superieur_1947422/', 'summary': "Le gouvernement examinera jeudi le projet de loi relatif à l'enseignement supérieur. Un Conseil de gouvernement se tiendra jeudi sous la présidence du Chef du gouvernement, Aziz Akhannouch, indique un communiqué de son Département. Au début de ses travaux, le Conseil examinera un projet de loi relatif à l’enseignement supérieur et la recherche scientifique. Il examinera par la suite deux projets de décrets, le premier complète et.", 'size': 5}, {'id': '100', 'title': 'Réunion jeudi du Conseil de gouvernement: Voici le menu !', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/actualite/reunion-jeudi-du-conseil-de-gouvernement-voici-le-menu-10', 'summary': 'Réunion jeudi du Conseil de gouvernement: Voici le menu !. Un Conseil de gouvernement se tiendra jeudi sous la présidence du Chef du gouvernement, Aziz Akhannouch, indique un communiqué de son Département. Au début de ses travaux, le Conseil examinera un projet de loi relatif à l’enseignement supérieur et la recherche scientifique. Il examinera par la suite deux projets de décrets, le premier complète et .', 'size': 5}, {'id': '146', 'title': 'Conseil de gouvernement | L’ordre du jour de la réunion du jeudi 28 août 2025', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/conseil-de-gouvernement-lordre-du-jour-de-la-reunion-du-jeudi-28-aout-2025/', 'summary': 'Conseil de gouvernement | L’ordre du jour de la réunion du jeudi 28 août 2025. Un Conseil de gouvernement se tiendra jeudi sous la présidence du Chef du gouvernement, Aziz Akhannouch, indique un communiqué de son Département. Au début de ses travaux, le Conseil examinera un projet de loi relatif à l’enseignement supérieur et la recherche scientifique. Il examinera par la suite deux projets de décrets, le premier complète et ', 'size': 5}, {'id': '167', 'title': 'Réunion du Conseil de gouvernement ce jeudi', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/438622-reunion-du-conseil-de-gouvernement-ce-jeudi.html', 'summary': 'Réunion du Conseil de gouvernement ce jeudi. Un Conseil de gouvernement se tiendra jeudi sous la présidence du Chef du gouvernement, Aziz Akhannouch, indique un communiqué de son Département. Au début de ses travaux, le Conseil examinera un projet de loi relatif à l’enseignement supérieur et la recherche scientifique. Il examinera par la suite deux projets de décrets, le premier complète et . ', 'size': 5}], 'main_title': 'Une nouvelle taxe parafiscale au menu du Conseil de gouvernement'}, {'community_id': '14', 'articles': [{'id': '65', 'title': 'Aïd Al Mawlid Annabaoui sera célébré le vendredi 5 septembre', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Aid-Al-Mawlid-Annabaoui-sera-celebre-le-vendredi-5-septembre_a71058.html', 'summary': 'Aïd Al Mawlid Annabaoui sera célébré le vendredi 5 septembre. Le mois de Rabie-I 1447 de l’hégire débutera le lundi 25 août 2025 et Aïd Al Mawlid Annabaoui sera célébré le vendredi 05 septembre, a annoncé, samedi soir, le ministère des Habous et des Affaires islamiques.', 'size': 2}, {'id': '75', 'title': 'Aïd Al Mawlid célébré le vendredi 5 septembre', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/25/aid-al-mawlid-celebre-le-vendredi-5-septembre_1947410/', 'summary': 'Aïd Al Mawlid célébré le vendredi 5 septembre. Le mois de Rabie-I 1447 de l’hégire débutera le lundi 25 août 2025 et Aïd Al Mawlid Annabaoui sera célébré le vendredi 5 septembre, a annoncé, samedi soir, le ministère des Habous et des Affaires islamiques. Dans un communiqué, le ministère indique que l’observation du croissant lunaire du mois de Rabie-I 1447 a eu lieu.', 'size': 2}], 'main_title': 'Aïd Al Mawlid Annabaoui sera célébré le vendredi 5 septembre'}, {'community_id': '11', 'articles': [{'id': '66', 'title': 'Aéroport Mohammed V : Arrestation d’un ressortissant turc poursuivi par la Justice allemande', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Aeroport-Mohammed-V-Arrestation-d-un-ressortissant-turc-poursuivi-par-la-Justice-allemande_a71059.html', 'summary': 'Aéroport Mohammed V : Arrestation d’un ressortissant turc poursuivi par la Justice allemande. Un ressortissant turc, recherché par la justice allemande pour trafic de cocaïne, a été arrêté à son arrivée à l’aéroport Mohammed V. Mais encore?', 'size': 2}, {'id': '81', 'title': 'Aéroport Mohammed V : interpellation d’un ressortissant turc recherché par Interpol', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/25/aeroport-mohammed-v-interpellation-dun-ressortissant-turc-recherche-par-interpol_1947372/', 'summary': 'Aéroport Mohammed V : interpellation d’un ressortissant turc recherché par Interpol. Un homme de 43 ans d’origine turque, faisant l’objet d’un mandat d’arrêt international, a été arrêté vendredi à l’aéroport de Mohammed V Casablanca. L’individu était recherché pour son implication présumée dans une affaire de trafic de cocaïne. Les éléments de la sûreté nationale de l’aéroport international Mohammed V de Casablanca ont interpellé, vendredi, un ressortissant.', 'size': 2}, {'id': '125', 'title': 'Aéroport Mohammed V : Interpellation d’un ressortissant turc faisant l’objet d’un mandat d’arrêt international', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/pouvoirs/securite/aeroport-mohammed-v-interpellation-dun-ressortissant-turc-faisant-lobjet-dun-mandat-darret-international/', 'summary': 'Aéroport Mohammed V : Interpellation d’un ressortissant turc faisant l’objet d’un mandat d’arrêt international. Le mis en cause a été appréhendé immédiatement à son arrivée à bord d’un vol en provenance de la Turquie. Il fait l’objet d’une notice rouge émise par la justice allemande, pour son implication présumée dans une affaire de trafic de cocaïne.', 'size': 2}, {'id': '152', 'title': 'Aéroport Mohammed V : arrestation d’un ressortissant turc sous mandat d’arrêt international', 'source': 'lnt.ma', 'link': 'https://lnt.ma/aeroport-mohammed-v-arrestation-dun-ressortissant-turc-sous-mandat-darret-international/', 'summary': 'Aéroport Mohammed V : arrestation d’un ressortissant turc sous mandat d’arrêt international. Un ressortissant turc a été interpellé le 24 août 2025 à son arrivée à l’aéroport international Mohammed V de Casablanca. L’homme, âgé de 43 ans, faisait l’objet d’un mandat d’arrêt international émis par la justice allemande pour son implication présumée dans une affaire de trafic de cocaïne. Selon une source sécuritaire, son arrestation a été . ', 'size': 4}], 'main_title': 'Aéroport Mohammed V : arrestation d’un ressortissant turc sous mandat d’arrêt international'}, {'community_id': '16', 'articles': [{'id': '67', 'title': 'SM le Roi : Il n’y a pas d’ordre viable sans règles, c’est dans cette conviction que s’ancre la diplomatie marocaine"', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/SM-le-Roi-Il-n-y-a-pas-d-ordre-viable-sans-regles-c-est-dans-cette-conviction-que-s-ancre-la-diplomatie-marocaine_a71057.html', 'summary': 'SM le Roi : Il n’y a pas d’ordre viable sans règles, c’est dans cette conviction que s’ancre la diplomatie marocaine". Le Royaume du Maroc a toujours inscrit son action extérieure dans une démarche légaliste, structurée, fondée sur le respect du droit international et des principes de la Charte des Nations Unies, a affirmé Sa Majesté le Roi Mohammed VI.', 'size': 3}, {'id': '148', 'title': 'SM le Roi | La stratégie marocaine d’action extérieure est fondée sur le respect du droit international et des valeurs de la Charte des Nations Unies', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/sm-le-roi-la-strategie-marocaine-daction-exterieure-est-fondee-sur-le-respect-du-droit-international-et-des-valeurs-de-la-charte-des-nations-unies/', 'summary': 'SM le Roi | La stratégie marocaine d’action extérieure est fondée sur le respect du droit international et des valeurs de la Charte des Nations Unies. Le Royaume du Maroc a toujours inscrit son action extérieure dans une démarche légaliste, structurée, fondée sur le respect du droit international et des principes de la Charte des Nations Unies, a affirmé Sa Majesté le Roi Mohammed VI. “Il n’y a pas d’ordre viable sans règles. C’est dans cette conviction que s’ancre la diplomatie ', 'size': 3}, {'id': '189', 'title': 'Le Royaume du Maroc a toujours inscrit son action extérieure dans une démarche légaliste, structurée, fondée sur le respect du droit  international et des principes de la Charte des Nations unies', 'source': 'www.libe.ma', 'link': 'https://www.libe.ma/Le-Royaume-du-Maroc-a-toujours-inscrit-son-action-exterieure-dans-une-demarche-legaliste-structuree-fondee-sur-le_a155407.html', 'summary': 'Le Royaume du Maroc a toujours inscrit son action extérieure dans une démarche légaliste, structurée, fondée sur le respect du droit international et des principes de la Charte des Nations unies.', 'size': 3}], 'main_title': 'SM le Roi : Il n’y a pas d’ordre viable sans règles, c’est dans cette conviction que s’ancre la diplomatie marocaine"'}, {'community_id': '13', 'articles': [{'id': '72', 'title': "L'ONDE mobilise le dispositif national de psychotrauma pour le mineur victime de viol à El Jadida", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/25/londe-mobilise-le-dispositif-national-de-psychotrauma-pour-le-mineur-victime-de-viol-a-el-jadida_1947432/', 'summary': "L'ONDE mobilise le dispositif national de psychotrauma pour le mineur victime de viol à El Jadida. L’Observatoire national des droits de l’enfant a déployé son dispositif national de psychotrauma pour assurer une prise en charge immédiate de l’enfant victime de viol à El Jadida. Sur instruction de la princesse Lalla Meryem, présidente de l’Observatoire national des droits de l’enfant (ONDE), l’Observatoire a mobilisé le dispositif national psychotrauma de l’enfant (DNPTE) pour.", 'size': 3}, {'id': '89', 'title': 'Après l’affaire d’El Jadida, l’ONDE mobilise le dispositif national psychotrauma de l’enfant', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/174915/apres-l-affaire-d-el-jadida-l-onde.html', 'summary': 'Après l’affaire d’El Jadida, l’ONDE mobilise le dispositif national psychotrauma de l’enfant. Sur instruction de la princesse Lalla Meryem, présidente de l’Observatoire national des droits de l’enfant (ONDE), l’instance a mobilisé le dispositif national psychotrauma de l’enfant (DNPTE) pour venir en aide à l’enfant victime de viol à El Jadida, lors du moussem Moulay Abdellah Amghar.', 'size': 3}, {'id': '115', 'title': 'L’ONDE mobilise le Dispositif National Psychotrauma de l’Enfant suite au drame d’El Jadida', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/influences/societe/londe-mobilise-le-dispositif-national-psychotrauma-de-lenfant-suite-au-drame-del-jadida/', 'summary': "L’ONDE mobilise le Dispositif National Psychotrauma de l’Enfant suite au drame d’El Jadida. Sur Instruction de Son Altesse Royale la Princesse Lalla Meryem, Présidente de l’Observatoire National des Droits de l’Enfant (ONDE), l'Observatoire a mobilisé le Dispositif National Psychotrauma de l’Enfant (DNPTE) pour venir en aide à l’enfant victime de viol à El Jadida.", 'size': 3}], 'main_title': "L'ONDE mobilise le dispositif national de psychotrauma pour le mineur victime de viol à El Jadida"}, {'community_id': '12', 'articles': [{'id': '87', 'title': 'Les prévisions du lundi 25 août 2025', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/les-previsions-du-lundi-25-aout-2025-308987/', 'summary': 'Les prévisions du lundi 25 août 2025. Voici les prévisions météorologiques établies par la Direction générale de la météorologie pour le lundi 25 août 2025: – Temps assez chaud sur le Sud-Est et l’extrême Sud du pays. – Ondées et orages par endroits sur le Nord-Ouest, le Rif, le Saiss, la rive méditerranéenne, le Moyen Atlas et', 'size': 2}, {'id': '159', 'title': "Le temps qu'il fera ce mardi 26 août 2025", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/438653-le-temps-quil-fera-ce-mardi-26-aout-2025.html', 'summary': "Le temps qu'il fera ce mardi 26 août 2025. Voici les prévisions météorologiques établies par la Direction générale de la météorologie pour le mardi 26 août 2025 – Temps assez chaud sur le Sud-Est. – Quelques nuages cumuliformes sur les Haut et Moyen Atlas et les hauts plateaux Orientaux. – Nuages bas denses avec bruine locale sur les côtes sahariennes entre Tiznit et Boujdour . ", 'size': 2}], 'main_title': 'Les prévisions du lundi 25 août 2025'}, {'community_id': '17', 'articles': [{'id': '110', 'title': 'La réunion ministérielle de l’OCI salue le rôle du Comité Al-Qods, présidé par le Roi Mohammed VI', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/pouvoirs/diplomatie/la-reunion-ministerielle-de-loci-met-en-avant-le-role-du-comite-al-qods-preside-par-le-roi-mohammed-vi/', 'summary': 'La réunion ministérielle de l’OCI salue le rôle du Comité Al-Qods, présidé par le Roi Mohammed VI. Réuni lundi à Djeddah, le Conseil des ministres des Affaires étrangères de l’OCI a réaffirmé, lors de sa 21e session extraordinaire, l’importance du rôle du Comité Al-Qods dans la défense de la Ville Sainte et le soutien constant aux droits légitimes du peuple palestinien.', 'size': 2}, {'id': '128', 'title': 'Réunion de l’OCI : mise en avant du rôle du Comité Al-Qods présidé par S.M. le Roi', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/reunion-de-loci-mise-en-avant-du-role-du-comite-al-qods-preside-par-s-m-le-roi/', 'summary': 'Réunion de l’OCI : mise en avant du rôle du Comité Al-Qods présidé par S.M. le Roi. Le Conseil des ministres des Affaires étrangères des pays membres de l’Organisation de la coopération islamique (OCI), réuni lundi à Djeddah pour sa 21e session extraordinaire, a mis en avant le rôle du Comité Al-Qods, présidé par Sa Majesté le Roi Mohammed VI. Dans la résolution adoptée à l’issue de cette session, qui s’est tenue .', 'size': 2}], 'main_title': 'La réunion ministérielle de l’OCI salue le rôle du Comité Al-Qods, présidé par le Roi Mohammed VI'}, {'community_id': '10', 'articles': [{'id': '162', 'title': 'Beyrouth : l’expérience marocaine du Code de la Famille consacrée modèle pionnier par l’ONU', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/438689-beyrouth-lexperience-marocaine-du-code-de-la-famille-consacree-modele-pionnier-par-lonu.html', 'summary': 'Beyrouth : l’expérience marocaine du Code de la Famille consacrée modèle pionnier par l’ONU. L’expérience marocaine en matière de réforme du Code de la Famille et de reconnaissance du travail domestique non rémunéré a été érigée en modèle de référence lors de la réunion régionale de haut niveau organisée par la Commission économique et sociale des Nations Unies pour l’Asie occidentale (ESCWA), tenue ce lundi à Beyrouth. À l’ouverture . ', 'size': 3}, {'id': '173', 'title': 'Code de la famille : le Maroc expose son expérience à la réunion de l’ESCWA à Beyrouth', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Code-de-la-famille-le-Maroc-expose-son-experience-a-la-reunion-de-l-ESCWA-a-Beyrouth_a71083.html', 'summary': 'Code de la famille : le Maroc expose son expérience à la réunion de l’ESCWA à Beyrouth. À la demande de la Commission économique et sociale des Nations Unies pour l’Asie occidentale (ESCWA), l’expérience marocaine en matière de réforme du Code de la Famille et d’intégration du travail domestique non rémunéré a été présentée comme modèle pionnier lors de la séance d’ouverture de la réunion régionale de haut niveau tenue à Beyrouth, avec la participation de représentants de haut rang des gouvernements arabes, ainsi que d’experts et de responsables onusiens.', 'size': 3}, {'id': '190', 'title': 'Réforme du Code de la famille : L’expérience marocaine présentée comme modèle à Beyrouth', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/au-royaume/evenement/reforme-du-code-de-la-famille-lexperience-marocaine-presentee-comme-modele-a-beyrouth/', 'summary': 'Réforme du Code de la famille : L’expérience marocaine présentée comme modèle à Beyrouth. L’expérience marocaine dans la réforme du Code de la famille et l’intégration du travail domestique non rémunéré a été présentée comme modèle pionnier lors de l’ouverture de la réunion de l’ESCWA à Beyrouth.', 'size': 3}], 'main_title': 'Beyrouth : l’expérience marocaine du Code de la Famille consacrée modèle pionnier par l’ONU'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
                        
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ? d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        // Fonction pour cacher le tooltip
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = '';
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
    
    
</body>




</html>
    