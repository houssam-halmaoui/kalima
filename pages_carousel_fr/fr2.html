<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); 
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title"> Les principales actualités des dernières 24 heures

</div>    
        <div class="header-subtitle"> Dernière mise à jour : 14/06/2025 - 12h25</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"></div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '0', 'title': "Le temps qu'il fera ce samedi 14 juin 2025", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/427974-le-temps-quil-fera-ce-samedi-14-juin-2025.html', 'summary': "Le temps qu'il fera ce samedi 14 juin 2025. Voici les prévisions météorologiques établies par la Direction générale de la météorologie pour le samedi 14 juin 2025 – Temps assez chaud sur les plaines de Tadla, l’Oriental et les extrêmes Sud-Est et Sud. – Ondées ou averses orageuses sur l’Oriental et le Rif, débordant par la suite sur la Méditerranée. – Temps passagèrement nuageux . ", 'size': 2}, {'id': '214', 'title': 'Les prévisions du samedi 14 juin', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/les-previsions-du-samedi-14-juin-304701/', 'summary': 'Les prévisions du samedi 14 juin. Voici les prévisions météorologiques établies par la Direction générale de la météorologie pour le samedi 14 juin. -Temps assez chaud sur les plaines de Tadla, l’Oriental et les extrêmes Sud-Est et Sud. -Ondées ou averses orageuses sur l’Oriental et le Rif, débordant par la suite sur la Méditerranée. -Temps passagèrement', 'size': 2}], 'main_title': "Le temps qu'il fera ce samedi 14 juin 2025"}, {'community_id': '7', 'articles': [{'id': '13', 'title': 'Israël affirme poursuivre ses frappes sur l\'Iran "à pleine force"', 'source': 'lematin.ma', 'link': 'https://lematin.ma/monde/israel-affirme-poursuivre-ses-frappes-sur-liran-a-pleine-force/285332', 'summary': 'Israël affirme poursuivre ses frappes sur l\'Iran "à pleine force". L\'Iran est capable de nuire considérablement à Israël, a déclaré vendredi le porte-parole de l\'armée israélienne après l\'attaque massive lancée par son pays.', 'size': 4}, {'id': '48', 'title': "L'Iran riposte avec une attaque massive contre Israël", 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/L-Iran-riposte-avec-une-attaque-massive-contre-Israel_a68641.html', 'summary': "L'Iran riposte avec une attaque massive contre Israël. L'Iran a lancé vendredi soir des dizaines de missiles contre Israël, en riposte aux frappes aériennes israéliennes d'une ampleur sans précédent qui ont visé depuis le matin plus de 200 sites militaires et nucléaires sur le sol iranien.", 'size': 5}, {'id': '77', 'title': 'Iran : Israël lance une offensive avant les négociations nucléaires', 'source': 'telquel.ma', 'link': 'https://telquel.ma/2025/06/13/iran-israel-lance-une-offensive-avant-les-negociations-nucleaires_1937580', 'summary': 'Iran : Israël lance une offensive avant les négociations nucléaires. Dans la nuit du 12 au 13 juin, Israël a lancé une attaque aérienne massive contre des sites militaires et nucléaires en Iran, provoquant la mort de plusieurs hauts responsables. En réponse, l’Iran a déployé une centaine de drones vers Israël. À la veille de nouvelles négociations nucléaires, les tensions atteignent un point critique. Les.', 'size': 3}, {'id': '97', 'title': 'Israël bombarde l’Iran et tue de hauts responsables militaires', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/israel-bombarde-liran-et-tue-de-hauts-responsables-militaires-304609/', 'summary': 'Israël bombarde l’Iran et tue de hauts responsables militaires. Israël a mené vendredi des frappes contre l’Iran, soupçonné de vouloir se doter de l’arme atomique, visant un site d’enrichissement d’uranium et tuant de hauts responsables militaires de la République islamique qui a promis de riposter. Cette attaque intervient alors qu’un nouveau cycle de négociations entre les Etats-Unis et l’Iran', 'size': 4}, {'id': '194', 'title': "Israël et l'Iran ciblent des systèmes de défense et des drones, des généraux iraniens tués", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/428729-israel-et-liran-ciblent-des-systemes-de-defense-et-des-drones-des-generaux-iraniens-tues.html', 'summary': "Israël et l'Iran ciblent des systèmes de défense et des drones, des généraux iraniens tués. Israël et l’Iran ont annoncé dans la nuit de samedi avoir ciblé, des systèmes de défense stratégiques. L’armée israélienne, a annoncé avoir ciblé des systèmes de défense aérienne iraniens lors d’une vague de frappes nocturne dans la région de Téhéran, tandis que l’Iran a abattu des drones israéliens en mission de reconnaissance. Par ailleurs, le . ", 'size': 3}], 'main_title': "L'Iran riposte avec une attaque massive contre Israël"}, {'community_id': '2', 'articles': [{'id': '15', 'title': 'Balearia renforce ses traversées entre l’Espagne et le Maroc', 'source': 'lematin.ma', 'link': 'https://lematin.ma/nation/balearia-renforce-ses-traversees-entre-lespagne-et-le-maroc/285319', 'summary': 'Balearia renforce ses traversées entre l’Espagne et le Maroc. Le trafic sera particulièrement renforcé sur les lignes Tarifa-Tanger Ville, Algésiras-Tanger Med, Almeria-Nador et Motril-Tanger Med, a indiqué la compagnie dans un communiqué.**r.', 'size': 2}, {'id': '76', 'title': 'Marhaba 2025 : Balearia renforce ses traversées entre l’Espagne et le Maroc', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/06/13/marhaba-2025-balearia-renforce-ses-traversees-entre-lespagne-et-le-maroc_1937526/', 'summary': 'Marhaba 2025 : Balearia renforce ses traversées entre l’Espagne et le Maroc. La compagnie maritime espagnole Balearia a annoncé, jeudi, le renforcement de ses liaisons entre l’Espagne et le Maroc, à l’occasion de l’Opération Marhaba 2025, avec une trentaine de traversées quotidiennes prévues entre le 15 juin et le 15 septembre. Le trafic sera particulièrement renforcé sur les lignes Tarifa-Tanger Ville, Algésiras-Tanger Med, Almeria-Nador et Motril-Tanger Med,.', 'size': 2}], 'main_title': 'Balearia renforce ses traversées entre l’Espagne et le Maroc'}, {'community_id': '4', 'articles': [{'id': '27', 'title': 'Bank of Africa lance une tournée régionale pour accompagner les PME', 'source': 'lematin.ma', 'link': 'https://lematin.ma/economie/bank-of-africa-lance-une-tournee-regionale-pour-accompagner-les-pme/285260', 'summary': 'Bank of Africa lance une tournée régionale pour accompagner les PME. En collaboration avec Maroc Factoring, BMCE Capital Markets et Bank Al Karam, ces rencontres prennent la forme de workshops thématiques destinés à renforcer l’accompagnement des en.', 'size': 3}, {'id': '91', 'title': 'BANK OF AFRICA organise des Business Meetings régionaux pour soutenir les PME', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/bank-of-africa-organise-des-business-meetings-regionaux-pour-soutenir-les-pme-304681/', 'summary': 'BANK OF AFRICA organise des Business Meetings régionaux pour soutenir les PME. BANK OF AFRICA a annoncé le lancement d’une série de rencontres régionales dédiées aux Petites et Moyennes Entreprises (PME), en partenariat avec plusieurs de ses filiales, dont Maroc Factoring, BMCE Capital Markets et Bank Al Karam. Intitulées Business Meetings régionaux, ces rencontres prennent la forme d’ateliers thématiques (workshops) et s’inscrivent', 'size': 3}, {'id': '160', 'title': 'Bank of Africa et ses filiales lancent une série de Business Meetings régionaux dédiés aux PME', 'source': 'leseco.ma', 'link': 'https://leseco.ma/business/bank-of-africa-et-ses-filiales-lancent-une-serie-de-business-meetings-regionaux-dedies-aux-pme.html', 'summary': 'Bank of Africa et ses filiales lancent une série de Business Meetings régionaux dédiés aux PME. Dans le prolongement de sa stratégie de proximité et de valorisation de la synergie intragroupe, BANK OF AFRICA initie une série de Business Meetings régionaux, organisés en partenariat avec ses filiales spécialisées, notamment Maroc Factoring, BMCE Capital Markets et Bank Al Karam. ', 'size': 3}], 'main_title': 'Bank of Africa lance une tournée régionale pour accompagner les PME'}, {'community_id': '6', 'articles': [{'id': '33', 'title': 'Cuivre, or et argent : des résultats prometteurs pour Morocco Strategic Minerals près de Ouarzazate', 'source': 'lematin.ma', 'link': 'https://lematin.ma/economie/cuivre-bons-resultats-pour-morocco-strategic-minerals-pres-de-ouarzazate/285209', 'summary': 'Cuivre, or et argent : des résultats prometteurs pour Morocco Strategic Minerals près de Ouarzazate. Morocco Strategic Minerals, une entreprise canadienne spécialisée dans l’exploration minière, a dévoilé, jeudi 12 juin, les résultats d’une campagne d’échantillonnage prometteuse s.', 'size': 2}, {'id': '175', 'title': 'Cuivre et or : des teneurs prometteuses pour Morocco Strategic Minerals à Ouarzazate', 'source': 'leseco.ma', 'link': 'https://leseco.ma/maroc/cuivre-et-or-des-teneurs-prometteuses-pour-morocco-strategic-minerals-a-ouarzazate.html', 'summary': 'Cuivre et or : des teneurs prometteuses pour Morocco Strategic Minerals à Ouarzazate. Morocco Strategic Minerals a annoncé des résultats encourageants à la suite d’une campagne d’échantillonnage réalisée en mai sur son site cuprifère et aurifère BMR, situé au sud-est d’Ouarzazate. ', 'size': 2}], 'main_title': 'Cuivre, or et argent : des résultats prometteurs pour Morocco Strategic Minerals près de Ouarzazate'}, {'community_id': '5', 'articles': [{'id': '46', 'title': "La taxe d'habitation et la taxe de services communaux confiées désormais à la DGI", 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/La-taxe-d-habitation-et-la-taxe-de-services-communaux-confiees-desormais-a-la-DGI_a68642.html', 'summary': "La taxe d'habitation et la taxe de services communaux confiées désormais à la DGI. La Direction Générale des Impôts (DGI) a annoncé qu'elle assure désormais la gestion de la taxe d'habitation (TH) et de la taxe de services communaux (TSC).", 'size': 3}, {'id': '119', 'title': 'Fiscalité locale: La gestion de la TH et de la TSC confiée à la DGI', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/argent/fiscalite-locale-la-gestion-de-la-th-et-de-la-tsc-confiee-a-la-dgi/', 'summary': "Fiscalité locale: La gestion de la TH et de la TSC confiée à la DGI. La Direction Générale des Impôts (DGI) prend officiellement en charge la gestion de la taxe d'habitation (TH) et de la taxe de services communaux (TSC). Cette mesure est entrée en vigueur le 12 juin 2025.", 'size': 3}, {'id': '224', 'title': 'La gestion de la taxe d’habitation et de la taxe de services communaux confiée à la DGI', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/la-gestion-de-la-taxe-dhabitation-et-de-la-taxe-de-services-communaux-confiee-a-la-dgi/', 'summary': 'La gestion de la taxe d’habitation et de la taxe de services communaux confiée à la DGI. La Direction Générale des Impôts (DGI) a annoncé qu’elle assure désormais la gestion de la taxe d’habitation (TH) et de la taxe de services communaux (TSC). « Suite à la publication de la loi n°14.25 modifiant et complétant la loi n° 47.06 relative à la fiscalité des collectivités territoriales au Bulletin Officiel n°7412, la gestion de .', 'size': 3}], 'main_title': "La taxe d'habitation et la taxe de services communaux confiées désormais à la DGI"}, {'community_id': '8', 'articles': [{'id': '49', 'title': "Reconstitution du Cheptel : Le ministère de l'Intérieur fixe les lignes directrices de l'opération nationale", 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Reconstitution-du-Cheptel-Le-ministere-de-l-Interieur-fixe-les-lignes-directrices-de-l-operation-nationale_a68638.html', 'summary': "Reconstitution du Cheptel : Le ministère de l'Intérieur fixe les lignes directrices de l'opération nationale. En exécution des Hautes Directives de Sa Majesté le Roi Mohammed VI, que Dieu L’assiste, appelant à la reconstitution de manière soutenue du cheptel national, une réunion a été tenue, vendredi au ministère de l’Intérieur, en présence des ministres de l’Intérieur et de l’Agriculture, de la Pêche maritime, du Développement rural et des Eaux et Forêts, et du ministre délégué auprès de la ministre de l’Économie et des Finances chargé du Budget, ainsi que de nombreux responsables centraux des départements ministériels concernés.", 'size': 4}, {'id': '68', 'title': "Rabat : réunion sur l'opération de reconstitution du cheptel national", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/06/13/rabat-reunion-sur-loperation-de-reconstitution-du-cheptel-national_1937653/', 'summary': "Rabat : réunion sur l'opération de reconstitution du cheptel national. En exécution des directives du roi Mohammed VI, appelant à la reconstitution de manière soutenue du cheptel national, une réunion a été tenue, vendredi au ministère de l’Intérieur, en présence des ministres de l’Intérieur et de l’Agriculture, de la Pêche maritime, du Développement rural et des Eaux et Forêts, et du ministre délégué auprès de.", 'size': 4}, {'id': '102', 'title': 'Rabat : Réunion sur l’opération de reconstitution du cheptel national', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/168933/rabat-reunion-l-operation-reconstitution-cheptel.html', 'summary': 'Rabat : Réunion sur l’opération de reconstitution du cheptel national. En exécution des directives du roi Mohammed VI sur la reconstitution du cheptel national, une réunion a été tenue, vendredi au ministère de l’Intérieur, en présence des ministres de l’Intérieur et de l’Agriculture, de la pêche maritime, du développement rural et des eaux et forêts, ainsi que du ministre délégué auprès de la ministre de l’Économie et des finances chargé du budget, outre des responsables centraux des départements ministériels concernés.', 'size': 4}, {'id': '105', 'title': 'Opération de reconstitution du cheptel national: Mobilisation gouvernementale tous azimuts', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/actualite/operation-de-reconstitution-du-cheptel-national-mobilisation-gouvernementale-tous-azimuts', 'summary': 'Opération de reconstitution du cheptel national: Mobilisation gouvernementale tous azimuts. En exécution des Hautes Directives de Sa Majesté le Roi Mohammed VI, que Dieu L’assiste, appelant à la reconstitution de manière soutenue du cheptel national, une réunion a été tenue, vendredi au ministère de l’Intérieur, en présence des ministres de l’Intérieur et de l’Agriculture, de la Pêche maritime, du Développement rural et des Eaux et .', 'size': 4}], 'main_title': "Reconstitution du Cheptel : Le ministère de l'Intérieur fixe les lignes directrices de l'opération nationale"}, {'community_id': '9', 'articles': [{'id': '72', 'title': "Les frappes israéliennes contre l'Iran font bondir le prix du pétrole", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/06/13/les-frappes-israeliennes-contre-liran-font-bondir-le-prix-du-petrole_1937591/', 'summary': "Les frappes israéliennes contre l'Iran font bondir le prix du pétrole. Les cours du pétrole s’envolent vendredi après les frappes israéliennes contre des installations militaires et nucléaires en Iran, le marché redoutant les perturbations sur les approvisionnements d’or noir dans la région qui pourraient découler de l’escalade. Vers 08H30 GMT (10H30 à Paris), le prix du baril de Brent de la mer du Nord, pour livraison.", 'size': 2}, {'id': '92', 'title': 'Les cours du pétrole flambent après les frappes israéliennes contre l’Iran', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/les-cours-du-petrole-flambent-apres-les-frappes-israeliennes-contre-liran-304677/', 'summary': 'Les cours du pétrole flambent après les frappes israéliennes contre l’Iran. Les cours du pétrole s’envolent vendredi après les frappes israéliennes contre des installations militaires et nucléaires en Iran, le marché redoutant les perturbations sur les approvisionnements d’or noir dans la région qui pourraient découler de l’escalade. Après avoir bondi de plus de 12% dans la nuit, vers 11H40 GMT, le', 'size': 2}], 'main_title': "Les frappes israéliennes contre l'Iran font bondir le prix du pétrole"}, {'community_id': '10', 'articles': [{'id': '73', 'title': 'Tamwilcom : 1,2 milliard de dirhams pour booster les entreprises de Laâyoune et Dakhla', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/06/13/tamwilcom-12-milliard-de-dirhams-pour-booster-plus-de-1-600-entreprises-a-laayoune-et-dakhla_1937582/', 'summary': 'Tamwilcom : 1,2 milliard de dirhams pour booster les entreprises de Laâyoune et Dakhla. L’intervention de la Société nationale de garantie et de financement de l’entreprise (Tamwilcom) a permis, au titre de l’année 2024, de mobiliser plus de 1,2 milliard de dirhams (MMDH) au profit de plus de 1.600 entreprises dans les régions de Laâyoune-Sakia El Hamra et Dakhla-Oued Eddahab, a fait savoir, jeudi à Laâyoune, le directeur général.', 'size': 2}, {'id': '93', 'title': 'TAMWILCOM mobilise 1,2 MMDH en faveur des entreprises dans les provinces du Sud', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/tamwilcom-mobilise-12-mmdh-en-faveur-des-entreprises-dans-les-provinces-du-sud-304668/', 'summary': 'TAMWILCOM mobilise 1,2 MMDH en faveur des entreprises dans les provinces du Sud. La Société nationale de garantie et de financement de l’entreprise (TAMWILCOM) a permis de mobiliser plus de 1,2 milliard de dirhams (MMDH), en 2024, au profit de plus de 1.600 entreprises dans les régions de Laâyoune-Sakia El Hamra et Dakhla-Oued Eddahab, indique le directeur général Said Jabrani. Ces financements ont', 'size': 2}], 'main_title': 'Tamwilcom : 1,2 milliard de dirhams pour booster les entreprises de Laâyoune et Dakhla'}, {'community_id': '1', 'articles': [{'id': '80', 'title': 'Casablanca : voici la liste des joueurs du Wydad pour le Mondial des clubs', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/06/13/mondial-des-clubs-liste-officielle-du-wydad-de-casablanca_1937531/', 'summary': 'Casablanca : voici la liste des joueurs du Wydad pour le Mondial des clubs. Voici la liste officielle du Wydad Athletic Club (WAC) pour la Coupe du monde des clubs de football, prévue du 14 juin au 13 juillet prochains aux États-Unis. Gardiens de But : Youssef El Motie, El Mehdi Benabid, Omar Aqzdaou. Défenseurs : Mohamed Moufid, Abdelmounaim Boutouil, Jamal Harkass, Fahd Moufi, Meijers Bart, Ayoub Boucheta, Guilherme.', 'size': 2}, {'id': '96', 'title': 'Mondial des clubs: Voici la liste officielle du Wydad de Casablanca', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/mondial-des-clubs-voici-la-liste-officielle-du-wydad-de-casablanca-304618/', 'summary': 'Mondial des clubs: Voici la liste officielle du Wydad de Casablanca. Voici la liste officielle du Wydad de Casablanca pour la Coupe du monde des clubs de football, prévue du 14 juin au 13 juillet prochains aux États-Unis: Gardiens de But: Youssef El Motie, El Mehdi Benabid, Omar Aqzdaou. Défenseurs: Mohamed Moufid, Abdelmounaim Boutouil, Jamal Harkass, Fahd Moufi, Meijers Bart, Ayoub', 'size': 2}], 'main_title': 'Casablanca : voici la liste des joueurs du Wydad pour le Mondial des clubs'}, {'community_id': '3', 'articles': [{'id': '88', 'title': 'Bank Al-Maghrib: le dirham s’apprécie face au dollar', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/bank-al-maghrib-le-dirham-sapprecie-face-au-dollar-304697/', 'summary': 'Bank Al-Maghrib: le dirham s’apprécie face au dollar. Le dirham s’est apprécié de 0,3% face au dollar américain et est resté quasiment stable vis-à-vis de l’euro durant la période du 5 au 11 juin 2025, selon Bank Al-Maghrib (BAM). Au cours de cette période, aucune opération d’adjudication n’a été réalisée sur le marché des changes, indique BAM dans', 'size': 2}, {'id': '225', 'title': 'Les indicateurs hebdomadaires de BAM en 5 points clés', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/les-indicateurs-hebdomadaires-de-bam-en-5-points-cles-23/', 'summary': 'Les indicateurs hebdomadaires de BAM en 5 points clés. oici cinq points clés des indicateurs hebdomadaires de Bank Al-Maghrib (BAM) pour la semaine du 05 au 11 juin : 1. Le dirham s’est apprécié de 0,3% face au dollar américain et est resté quasiment stable vis-à-vis de l’euro. 2. Aucune opération d’adjudication n’a été réalisée sur le marché des changes. 3. Les avoirs officiels .', 'size': 2}], 'main_title': 'Bank Al-Maghrib: le dirham s’apprécie face au dollar'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
                        
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ? d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        // Fonction pour cacher le tooltip
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = '';
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
    
    
</body>




</html>
    