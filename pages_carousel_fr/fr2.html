<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); 
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title"> Les principales actualités des dernières 24 heures

</div>    
        <div class="header-subtitle"> Dernière mise à jour : 03/09/2025 - 12h28</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"></div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '0', 'title': "Le temps qu'il fera ce mercredi 3 septembre 2025", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/439690-le-temps-quil-fera-ce-mercredi-3-septembre-2025.html', 'summary': "Le temps qu'il fera ce mercredi 3 septembre 2025. Voici les prévisions météorologiques établies par la Direction générale de la météorologie pour le mercredi 3 septembre 2025 – Temps assez chaud sur les plaines à l’ouest de l’Atlas, le Sud-Est, le Sud de l’Oriental et l’extrême Sud du pays. – Nuages bas assez denses avec brume ou brouillard sur les côtes Centre et le . ", 'size': 2}, {'id': '92', 'title': 'Les prévisions du mardi 2 septembre 2025', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/les-previsions-du-mardi-2-septembre-2025-309354/', 'summary': 'Les prévisions du mardi 2 septembre 2025. Voici les prévisions météorologiques établies par la Direction générale de la météorologie pour mardi 2 septembre 2025: – Temps assez chaud sur le Sud-Est, l’Oriental, les plaines à l’Ouest de l’Atlas et l’intérieur des provinces sahariennes. – Nuages bas assez denses sur les côtes Centre avec brume locale la matinée', 'size': 2}], 'main_title': "Le temps qu'il fera ce mercredi 3 septembre 2025"}, {'community_id': '1', 'articles': [{'id': '1', 'title': 'Mondial U20 : Double confrontation amicale Maroc-USA, les 5 et 7 septembre en Espagne', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/439697-mondial-u20-double-confrontation-amicale-maroc-usa-les-5-et-7-septembre-en-espagne.html', 'summary': 'Mondial U20 : Double confrontation amicale Maroc-USA, les 5 et 7 septembre en Espagne. La sélection nationale des moins de 20 ans (U20) disputera deux matchs amicaux contre son homologue américaine, les 5 et 7 septembre, dans la ville de Pinatar (près de Murcie) en Espagne. Ces deux rencontres, prévues à partir de 19 heures, s’inscrivent dans le cadre du programme de préparation de l’équipe nationale des moins de . ', 'size': 3}, {'id': '157', 'title': 'Mondial U20 : double confrontation amicale Maroc-USA, les 5 et 7 septembre en Espagne', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/mondial-u20-double-confrontation-amicale-maroc-usa-les-5-et-7-septembre-en-espagne.html', 'summary': 'Mondial U20 : double confrontation amicale Maroc-USA, les 5 et 7 septembre en Espagne. La sélection nationale des moins de 20 ans (U20) disputera deux matchs amicaux contre son homologue américaine, les 5 et 7 septembre, dans la ville de Pinatar (près de Murcie) en Espagne. Ces deux rencontres, prévues à partir de 19 heures, s’inscrivent dans le cadre du programme de préparation de l’équipe nationale des moins de . L’article est apparu en premier sur .', 'size': 3}, {'id': '210', 'title': 'Mondial U20 : double confrontation amicale Maroc–États-Unis les 5 et 7 septembre', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/09/03/mondial-u20-double-confrontation-amicale-maroc-etats-unis-les-5-et-7-septembre_1948576/', 'summary': 'Mondial U20 : double confrontation amicale Maroc–États-Unis les 5 et 7 septembre. La sélection nationale des moins de 20 ans (U20) disputera deux matchs amicaux contre son homologue américaine, les 5 et 7 septembre, dans la ville de Pinatar (près de Murcie) en Espagne. Ces deux rencontres, prévues à partir de 19 heures, s’inscrivent dans le cadre du programme de préparation de l’équipe nationale des moins de.', 'size': 3}], 'main_title': 'Mondial U20 : Double confrontation amicale Maroc-USA, les 5 et 7 septembre en Espagne'}, {'community_id': '4', 'articles': [{'id': '4', 'title': "Managem annonce la production du premier lingot d'or de la mine de Boto au Sénégal", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/439695-managem-annonce-la-production-du-premier-lingot-dor-de-la-mine-de-boto-au-senegal.html', 'summary': "Managem annonce la production du premier lingot d'or de la mine de Boto au Sénégal. Le groupe Managem a annoncé, mardi, la production du premier lingot d’or de la mine de Boto, implantée dans la commune de Madina Baffé, dans la région de Kédougou au Sénégal. « Cette étape décisive vient couronner plus de deux ans de travaux intensifs et marque l’entrée officielle du site en production. Elle illustre la concrétisation . ", 'size': 3}, {'id': '24', 'title': 'Managem démarre la production d’or à la mine de Boto au Sénégal', 'source': 'lematin.ma', 'link': 'https://lematin.ma/economie/managem-demarre-la-production-dor-a-la-mine-de-boto-au-senegal/299438', 'summary': 'Managem démarre la production d’or à la mine de Boto au Sénégal. La mine de Boto, désormais en production, ambitionne de livrer une production annuelle moyenne de 160.000 onces d’or, soit environ 5 tonnes, au cours des trois premières années d’e.', 'size': 2}, {'id': '49', 'title': "Sénégal : Managem produit le premier lingot d'or de la mine de Boto", 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Senegal-Managem-produit-le-premier-lingot-d-or-de-la-mine-de-Boto_a71338.html', 'summary': "Sénégal : Managem produit le premier lingot d'or de la mine de Boto. Le groupe Managem a annoncé, mardi, la production du premier lingot d'or de la mine de Boto, implantée dans la commune de Madina Baffé, dans la région de Kédougou au Sénégal.", 'size': 3}, {'id': '64', 'title': "Managem démarre la production aurifère au Sénégal avec la première coulée d'or du site Boto", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/09/02/managem-demarre-la-production-aurifere-au-senegal-avec-la-premiere-coulee-dor-du-site-boto_1948520/', 'summary': "Managem démarre la production aurifère au Sénégal avec la première coulée d'or du site Boto. Le Groupe Managem a annoncé la production du premier lingot d’or de la mine de Boto, située dans la commune de Madina Baffé, dans la région de Kédougou au Sénégal. Cette étape marque l’entrée officielle du site en production après plus de deux ans de travaux intensifs. Boto représente l’un des projets miniers les plus.", 'size': 4}, {'id': '123', 'title': 'Managem : Production du premier lingot d’or à la mine de Boto au Sénégal', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/affaires/managem-production-du-premier-lingot-dor-a-la-mine-de-boto-au-senegal/', 'summary': 'Managem : Production du premier lingot d’or à la mine de Boto au Sénégal. Le groupe minier annonce l’entrée officielle en production du site aurifère de Boto, l’un des projets miniers les plus importants du Sénégal. Fruit d’un investissement de 350 millions d’euros, Boto vise une production annuelle moyenne de 160.000 onces d’or au cours des trois premières années.', 'size': 3}], 'main_title': "Managem démarre la production aurifère au Sénégal avec la première coulée d'or du site Boto"}, {'community_id': '3', 'articles': [{'id': '12', 'title': "Le projet de l'Avenue Royale à Casablanca sort de l’impasse : un coup d’accélérateur décisif, 40 ans après", 'source': 'lematin.ma', 'link': 'https://lematin.ma/regions/le-projet-de-lavenue-royale-a-casablanca-sort-de-limpasse/299488', 'summary': "Le projet de l'Avenue Royale à Casablanca sort de l’impasse : un coup d’accélérateur décisif, 40 ans après. Le projet de l’Avenue Royale franchit une étape cruciale. Réuni en session extraordinaire mardi 2 septembre 2025, le conseil communal de Casablanca a approuvé à la majorité la conv.", 'size': 5}, {'id': '48', 'title': "Casablanca : la Mairie met fin au blocage du projet de l'Avenue Royale", 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Casablanca-la-Mairie-met-fin-au-blocage-du-projet-de-l-Avenue-Royale_a71339.html', 'summary': "Casablanca : la Mairie met fin au blocage du projet de l'Avenue Royale. Le Conseil de la commune de Casablanca a approuvé, mardi, lors d'une session extraordinaire au titre du mois de septembre, une convention de partenariat sur l’accélération de la réalisation du projet de l’Avenue Royale.", 'size': 4}, {'id': '216', 'title': 'Casablanca : la commune balise le terrain pour démarrer le chantier de l’Avenue Royale', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/09/03/casablanca-la-commune-balise-le-terrain-pour-demarrer-le-chantier-de-lavenue-royale_1948531/', 'summary': 'Casablanca : la commune balise le terrain pour démarrer le chantier de l’Avenue Royale. Le Conseil de la commune de Casablanca a approuvé, mardi, lors d’une session extraordinaire au titre du mois de septembre, une convention de partenariat sur l’accélération de la réalisation du projet de l’Avenue Royale. Inscrite dans le cadre des efforts engagés pour la réalisation de cette Avenue Royale, un des chantiers structurants de la métropole,.', 'size': 4}, {'id': '217', 'title': 'Casablanca accélère le projet de l’Avenue Royale : convention approuvée', 'source': 'www.leconomiste.com', 'link': 'https://www.leconomiste.com/video/casablanca-accelere-le-projet-de-l-avenue-royale-convention-approuvee', 'summary': 'Casablanca accélère le projet de l’Avenue Royale : convention approuvée.', 'size': 2}, {'id': '257', 'title': 'Casablanca : feu vert pour accélérer le projet de l’Avenue Royale', 'source': 'lnt.ma', 'link': 'https://lnt.ma/casablanca-feu-vert-pour-accelerer-le-projet-de-lavenue-royale/', 'summary': 'Casablanca : feu vert pour accélérer le projet de l’Avenue Royale. Le Conseil de la commune de Casablanca a approuvé, mardi, lors d’une session extraordinaire au titre du mois de septembre, une convention de partenariat sur l’accélération de la réalisation du projet de l’Avenue Royale. Inscrite dans le cadre des efforts engagés pour la réalisation de cette Avenue Royale, un des chantiers structurants de la métropole, . ', 'size': 4}], 'main_title': "Le projet de l'Avenue Royale à Casablanca sort de l’impasse : un coup d’accélérateur décisif, 40 ans après"}, {'community_id': '5', 'articles': [{'id': '29', 'title': 'Séisme en Afghanistan : le bilan monte à plus de 1.400 morts', 'source': 'lematin.ma', 'link': 'https://lematin.ma/monde/seisme-en-afghanistan-le-bilan-monte-a-plus-de-1400-morts/299387', 'summary': 'Séisme en Afghanistan : le bilan monte à plus de 1.400 morts. La province de Kounar concentre la quasi-totalité des victimes (1.411 morts et 3.124 blessés), où les secouristes fouillent toujours les décombres de villages dévastés.**related_ar.', 'size': 2}, {'id': '47', 'title': '\u200bAfghanistan : Le bilan du séisme atteint les 1.000 morts', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/\u200bAfghanistan-Le-bilan-du-seisme-atteint-les-1-000-morts_a71340.html', 'summary': '\u200bAfghanistan : Le bilan du séisme atteint les 1.000 morts. Le bilan du séisme dévastateur qui a frappé l’est de l’Afghanistan dimanche soir est monté à près de 1.000 morts, a affirmé mardi un responsable du ministère de la Santé.', 'size': 2}], 'main_title': 'Séisme en Afghanistan : le bilan monte à plus de 1.400 morts'}, {'community_id': '6', 'articles': [{'id': '36', 'title': 'Le Grand stade d’Agadir est prêt pour accueillir les plus grands évènements (Sonarges)', 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/le-grand-stade-dagadir-est-pret-pour-accueillir-les-plus-grands-evenements/299317', 'summary': 'Le Grand stade d’Agadir est prêt pour accueillir les plus grands évènements (Sonarges). A l’instar des autres stades du Royaume, le Grand stade d’Agadir qui connait des travaux de rénovation et de mise à niveau, entrepris en deux phases, est déjà prêt en prévision de.', 'size': 3}, {'id': '113', 'title': 'Hicham Allouli: Le Grand stade d’Agadir est prêt pour accueillir les plus grands évènements', 'source': 'www.libe.ma', 'link': 'https://www.libe.ma/Hicham-Allouli-Le-Grand-stade-d-Agadir-est-pret-pour-accueillir-les-plus-grands-evenements_a155638.html', 'summary': 'Hicham Allouli: Le Grand stade d’Agadir est prêt pour accueillir les plus grands évènements.', 'size': 2}, {'id': '174', 'title': 'Le Grand Stade d’Agadir fin prêt pour la CAN 2025 et le Mondial 2030', 'source': 'lnt.ma', 'link': 'https://lnt.ma/grand-stade-dagadir-fin-pret-pour-la-can-2025-et-le-mondial-2030/', 'summary': 'Le Grand Stade d’Agadir fin prêt pour la CAN 2025 et le Mondial 2030. Le Grand stade d’Agadir est d’ores et déjà prêt pour accueillir les plus grands évènements, a assuré, lundi à Agadir, le directeur régional de la Société nationale de Réalisation et de gestion des Equipements sportifs (SONARGES), Hicham Allouli. A l’instar des autres stades du Royaume, le Grand stade d’Agadir qui connait des travaux de rénovation . ', 'size': 2}], 'main_title': 'Le Grand stade d’Agadir est prêt pour accueillir les plus grands évènements (Sonarges)'}, {'community_id': '7', 'articles': [{'id': '39', 'title': 'Mercato : Sofyan Amrabat rejoint le Real Betis', 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/mercato-sofyan-amrabat-rejoint-le-real-betis/299311', 'summary': "Mercato : Sofyan Amrabat rejoint le Real Betis. C'est dans les ultimes instants du mercato estival espagnol que Sofyan Amrabat a finalement trouvé chaussure à son pied. Le milieu de terrain international marocain de 29 ans r.", 'size': 2}, {'id': '160', 'title': 'L’international marocain Sofyan Amrabat rejoint le Real Betis', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/linternational-marocain-sofyan-amrabat-rejoint-le-real-betis.html', 'summary': 'L’international marocain Sofyan Amrabat rejoint le Real Betis. L’international marocain Sofyan Amrabat a rejoint le Real Betis en provenance du club turc de Fenerbahçe sous forme de prêt jusqu’à la fin de la saison, a annoncé, lundi, le club espagnol. « Le Real Betis Balompié a trouvé un accord avec Fenerbahce pour le transfert de Sofyan Amrabat, qui rejoint donc le club espagnol grâce . L’article est apparu en premier sur .', 'size': 2}, {'id': '173', 'title': 'Sofyan Amrabat prêté au Real Betis jusqu’à fin de saison', 'source': 'lnt.ma', 'link': 'https://lnt.ma/sofyan-amrabat-prete-au-real-betis-jusqua-fin-de-saison/', 'summary': 'Sofyan Amrabat prêté au Real Betis jusqu’à fin de saison. L’international marocain Sofyan Amrabat a rejoint le Real Betis en provenance du club turc de Fenerbahçe sous forme de prêt jusqu’à la fin de la saison, a annoncé, lundi, le club espagnol. « Le Real Betis Balompié a trouvé un accord avec Fenerbahce pour le transfert de Sofyan Amrabat, qui rejoint donc le club espagnol grâce . ', 'size': 3}], 'main_title': 'Sofyan Amrabat prêté au Real Betis jusqu’à fin de saison'}, {'community_id': '8', 'articles': [{'id': '61', 'title': '\u200bTrois régions concentrent près de 60 % de la richesse nationale en 2023', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/\u200bTrois-regions-concentrent-pres-de-60-de-la-richesse-nationale-en-2023_a71326.html', 'summary': '\u200bTrois régions concentrent près de 60 % de la richesse nationale en 2023. Les comptes régionaux de l’année 2023, rendus publics ce mardi par le Haut-Commissariat au Plan, révèlent une forte concentration de la production de richesse au sein de trois pôles économiques majeurs du Royaume. Les régions de Casablanca-Settat, Rabat-Salé-Kénitra et Tanger-Tétouan-Al Hoceïma ont, à elles seules, généré 58,5 % du produit intérieur brut (PIB) national.', 'size': 4}, {'id': '82', 'title': 'HCP : 3 régions ont généré 58,5% du PIB national en 2023', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/09/02/hcp-3-regions-ont-generees-585-du-pib-national-en-2023_1948337/', 'summary': 'HCP : 3 régions ont généré 58,5% du PIB national en 2023. Les régions de Casablanca-Settat, de Rabat-Salé-Kénitra et de Tanger-Tétouan-Al Hoceima ont collectivement généré une part substantielle de la richesse nationale, totalisant 58,5% du produit intérieur brut (PIB), révèlent les comptes régionaux de l’année 2023, publiés mardi par le Haut-Commissariat au Plan (HCP). Cette concentration s’explique par leur dynamisme industriel, commercial et de services, ainsi que.', 'size': 4}, {'id': '130', 'title': 'HCP : Trois régions génèrent 58,5% du PIB national', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/affaires/hcp-trois-regions-generent-585-du-pib-national/', 'summary': 'HCP : Trois régions génèrent 58,5% du PIB national. Casablanca-Settat demeure le moteur économique du Royaume, avec 32,2% du PIB national, suivie de Rabat-Salé-Kénitra (15,7%) et de Tanger-Tétouan-Al Hoceima (10,6%).', 'size': 4}, {'id': '161', 'title': 'Maroc : 3 régions génèrent 58,5% du PIB national en 2023 (HCP)', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/maroc-3-regions-generent-585-du-pib-national-en-2023-hcp.html', 'summary': 'Maroc : 3 régions génèrent 58,5% du PIB national en 2023 (HCP). Les régions de Casablanca-Settat, de Rabat-Salé-Kénitra et de Tanger-Tétouan-Al Hoceima ont collectivement généré une part substantielle de la richesse nationale, totalisant 58,5% du produit intérieur brut (PIB), révèlent les comptes régionaux de l’année 2023, publiés mardi par le Haut-Commissariat au Plan (HCP). Cette concentration s’explique par leur dynamisme industriel, commercial et de services, ainsi que . L’article est apparu en premier sur .', 'size': 4}], 'main_title': '\u200bTrois régions concentrent près de 60 % de la richesse nationale en 2023'}, {'community_id': '9', 'articles': [{'id': '68', 'title': 'Nayef Aguerd rejoint l’Olympique de Marseille en provenance de West Ham', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/09/02/nayef-aguerd-rejoint-lolympique-de-marseille-en-provenance-de-west-ham_1948474/', 'summary': 'Nayef Aguerd rejoint l’Olympique de Marseille en provenance de West Ham. L’Olympique de Marseille a annoncé officiellement, mardi matin, le recrutement du défenseur international marocain Nayef Aguerd en provenance de West Ham (Angleterre), sans préciser la durée de son contrat ni le montant du transfert. L’Olympique de Marseille a le plaisir d’annoncer l’arrivée, en provenance de West Ham, du défenseur central international marocain, Nayef Aguerd », a.', 'size': 2}, {'id': '88', 'title': 'Nayef Aguerd, défenseur vedette des Lions de l’Atlas, signe à l’Olympique de Marseille', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/nayef-aguerd-defenseur-vedette-des-lions-de-latlas-signe-a-lolympique-de-marseille-309368/', 'summary': 'Nayef Aguerd, défenseur vedette des Lions de l’Atlas, signe à l’Olympique de Marseille. L’Olympique de Marseille a annoncé officiellement, mardi matin, le recrutement du défenseur international marocain Nayef Aguerd en provenance de West Ham (Angleterre), sans préciser la durée de son contrat ni le montant du transfert. « L’Olympique de Marseille a le plaisir d’annoncer l’arrivée, en provenance de West Ham, du défenseur central', 'size': 2}], 'main_title': 'Nayef Aguerd rejoint l’Olympique de Marseille en provenance de West Ham'}, {'community_id': '10', 'articles': [{'id': '72', 'title': 'LGV Casa-Marrakech : fermetures de gares et changements d’horaires programmés dès le 8 septembre', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/09/02/lgv-casa-marrakech-fermetures-de-gares-et-changements-dhoraires-programmes-des-le-8-septembre_1948430/', 'summary': 'LGV Casa-Marrakech : fermetures de gares et changements d’horaires programmés dès le 8 septembre. L’Office national des chemins de fer (ONCF) entame, dans le cadre du projet de la Ligne à Grande Vitesse (LGV) Kénitra-Marrakech, de grands travaux au niveau de la région de Casablanca afin de mettre à disposition une infrastructure adaptée aux besoins actuels et futurs, en particulier entre Mohammedia et Nouaceur. Ces travaux visent à ajouter.', 'size': 4}, {'id': '89', 'title': 'LGV Kénitra-Marrakech: les travaux sont lancés à Casablanca, des perturbations en vue', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/lgv-kenitra-marrakech-les-travaux-sont-lances-a-casablanca-des-perturbations-en-vue-309364/', 'summary': 'LGV Kénitra-Marrakech: les travaux sont lancés à Casablanca, des perturbations en vue. Dans le cadre du projet de la Ligne à Grande Vitesse (LGV) Kénitra-Marrakech, l’Office national des chemins de fer (ONCF) annonce, mardi 2 septembre, le lancement des grands travaux au niveau de la région de Casablanca, qui risquent de provoquer des perturbations du réseau. Les travaux d’infrastructures consistent à porter', 'size': 4}, {'id': '159', 'title': 'LGV Kénitra-Marrakech : l’ONCF entame de grands travaux d’infrastructure à Casablanca', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/projet-de-la-lgv-kenitra-marrakech-loncf-entame-de-grands-travaux-dinfrastructure-a-casablanca.html', 'summary': 'LGV Kénitra-Marrakech : l’ONCF entame de grands travaux d’infrastructure à Casablanca. L’Office national des chemins de fer (ONCF) entame dans le cadre du projet de la Ligne à Grande Vitesse (LGV) Kénitra-Marrakech, de grands travaux au niveau de la région de Casablanca afin de mettre à disposition une infrastructure adaptée aux besoins actuels et futurs, en particulier entre Mohammedia et Nouaceur. Ces travaux visent à ajouter . L’article est apparu en premier sur .', 'size': 4}, {'id': '172', 'title': 'LGV Kénitra-Marrakech : l’ONCF lance de grands travaux à Casablanca', 'source': 'lnt.ma', 'link': 'https://lnt.ma/lgv-kenitra-marrakech-loncf-lance-de-grands-travaux-a-casablanca/', 'summary': 'LGV Kénitra-Marrakech : l’ONCF lance de grands travaux à Casablanca. L’Office national des chemins de fer (ONCF) entame, dans le cadre du projet de la Ligne à Grande Vitesse (LGV) Kénitra-Marrakech, de grands travaux au niveau de la région de Casablanca afin de mettre à disposition une infrastructure adaptée aux besoins actuels et futurs, en particulier entre Mohammedia et Nouaceur. Ces travaux visent à ajouter . ', 'size': 4}], 'main_title': 'LGV Casa-Marrakech : fermetures de gares et changements d’horaires programmés dès le 8 septembre'}, {'community_id': '11', 'articles': [{'id': '78', 'title': 'Abdellatif Jouahri parmi les meilleurs gouverneurs de banques centrales du monde', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/09/02/abdellatif-jouahri-parmi-les-meilleurs-gouverneurs-de-banques-centrales-du-monde_1948367/', 'summary': 'Abdellatif Jouahri parmi les meilleurs gouverneurs de banques centrales du monde. Le Wali de Bank Al-Maghrib, Abdellatif Jouahri, a été classé parmi les meilleurs gouverneurs de banques centrales au monde dans le rapport « Central Banker Report Cards 2025 » du magazine américain spécialisé Global Finance. Jouahri a ainsi obtenu la note « A » attribuée par le magazine new-yorkais dans ce rapport publié annuellement par Global Finance depuis 1994,.', 'size': 3}, {'id': '164', 'title': 'Global Finance | Abdellatif Jouahri parmi les meilleurs gouverneurs de banques centrales du monde', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/global-finance-abdellatif-jouahri-parmi-les-meilleurs-gouverneurs-de-banques-centrales-du-monde/', 'summary': 'Global Finance | Abdellatif Jouahri parmi les meilleurs gouverneurs de banques centrales du monde. Le Wali de Bank Al-Maghrib, Abdellatif Jouahri, a été classé parmi les meilleurs gouverneurs de banques centrales au monde dans le rapport « Central Banker Report Cards 2025 » du magazine américain spécialisé Global Finance. Abdellatif Jouahri a ainsi obtenu la note « A » attribuée par le magazine new-yorkais dans ce rapport publié annuellement par Global Finance depuis ', 'size': 3}, {'id': '176', 'title': 'Abdellatif Jouahri de nouveau célébré par Global Finance', 'source': 'lnt.ma', 'link': 'https://lnt.ma/abdellatif-jouahri-de-nouveau-celebre-par-global-finance/', 'summary': 'Abdellatif Jouahri de nouveau célébré par Global Finance. Le Wali de Bank Al-Maghrib, Abdellatif Jouahri, figure parmi les meilleurs gouverneurs de banques centrales au monde dans l’édition 2025 du « Central Banker Report Cards » du magazine américain Global Finance. Le responsable marocain y obtient la note « A », la plus élevée décernée cette année au sein du monde arabe, selon la . ', 'size': 3}], 'main_title': 'Abdellatif Jouahri parmi les meilleurs gouverneurs de banques centrales du monde'}, {'community_id': '12', 'articles': [{'id': '94', 'title': 'Législatives 2026 : Les Verts marocains plaident pour des sièges aux MRE', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/175570/legislatives-2026-verts-marocains-plaident.html', 'summary': 'Législatives 2026 : Les Verts marocains plaident pour des sièges aux MRE. Le Parti des Verts Marocains milite pour une implication directe des Marocains résidant à létranger lors des élections législatives prévues en septembre 2026. Cette proposition figure dans le mémorandum présenté la semaine dernière au ministère de lIntérieur par cette petite formation politique.', 'size': 2}, {'id': '204', 'title': 'Législatives 2026 : le parti des Verts plaide pour des circonscriptions électorales pour les MRE', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/09/03/legislatives-2026-le-parti-des-verts-plaide-pour-des-circonscriptions-electorales-pour-les-mre_1948610/', 'summary': 'Législatives 2026 : le parti des Verts plaide pour des circonscriptions électorales pour les MRE. Le parti marocain des Verts multiplie les propositions de réforme électorale dans un mémorandum détaillé, plaidant notamment pour une meilleure représentation des Marocains de l’étranger, l’encadrement strict des campagnes et l’encouragement de l’engagement politique des jeunes. Le parti des Verts a présenté une série de propositions concernant la réforme des lois électorales. Dans un mémorandum.', 'size': 2}], 'main_title': 'Législatives 2026 : Les Verts marocains plaident pour des sièges aux MRE'}, {'community_id': '13', 'articles': [{'id': '115', 'title': "Hajj 1447 H: Le règlement des frais du 15 au 19 septembre pour les personnes en liste d'attente", 'source': 'www.libe.ma', 'link': 'https://www.libe.ma/Hajj-1447-H-Le-reglement-des-frais-du-15-au-19-septembre-pour-les-personnes-en-liste-d-attente_a155624.html', 'summary': "Hajj 1447 H: Le règlement des frais du 15 au 19 septembre pour les personnes en liste d'attente.", 'size': 2}, {'id': '148', 'title': 'Hajj 1447 H : paiement des frais du 15 au 19 septembre pour les listes d’attente', 'source': 'leseco.ma', 'link': 'https://leseco.ma/maroc/hajj-1447-h-paiement-des-frais-du-15-au-19-septembre-pour-les-listes-dattente.html', 'summary': 'Hajj 1447 H : paiement des frais du 15 au 19 septembre pour les listes d’attente. Le ministère des Habous et des Affaires islamiques a annoncé que la deuxième phase du règlement des frais du Hajj 1447 H pour les personnes inscrites sur les listes d’attente se déroulera du 15 au 19 septembre. ', 'size': 2}], 'main_title': "Hajj 1447 H: Le règlement des frais du 15 au 19 septembre pour les personnes en liste d'attente"}, {'community_id': '14', 'articles': [{'id': '124', 'title': 'Dominique Estrosi-Sassone: Le Maroc, «\xa0un modèle inspirant\xa0» en industrie automobile et en EnR', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/pouvoirs/diplomatie/dominique-estrosi-sassone-le-maroc-un-modele-inspirant-en-industrie-automobile-et-en-enr/', 'summary': 'Dominique Estrosi-Sassone: Le Maroc, « un modèle inspirant » en industrie automobile et en EnR. En visite à Rabat, la présidente de la commission des affaires économiques du Sénat français, salue le Maroc comme un modèle en énergies renouvelables et en industrie automobile, un exemple inspirant pour la France et l’Europe.', 'size': 2}, {'id': '163', 'title': 'Rabat | Dominique Estrosi-Sassone salue le dynamisme «\xa0notable\xa0» du Maroc dans le secteur des EnR', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/rabat-dominique-estrosi-sassone-salue-le-dynamisme-notable-du-maroc-dans-le-secteur-des-enr/', 'summary': 'Rabat | Dominique Estrosi-Sassone salue le dynamisme « notable » du Maroc dans le secteur des EnR. La présidente de la commission des affaires économiques du Sénat français, Dominique Estrosi-Sassone, a salué, mardi à Rabat, le dynamisme “notable” déployé par le Maroc dans le domaine des énergies renouvelables (EnR), soulignant que le Royaume constitue un modèle inspirant par ses initiatives et projets d’avenir. “Le Maroc déploie un dynamisme notable dans le secteur ', 'size': 2}], 'main_title': 'Dominique Estrosi-Sassone: Le Maroc, «\xa0un modèle inspirant\xa0» en industrie automobile et en EnR'}, {'community_id': '15', 'articles': [{'id': '126', 'title': 'Le festival le plus attendu de l’automne dévoile son line-up et invite à prolonger l’été à Essaouira !', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/comese/le-festival-le-plus-attendu-de-lautomne-devoile-son-line-up-et-invite-a-prolonger-lete-a-essaouira/', 'summary': 'Le festival le plus attendu de l’automne dévoile son line-up et invite à prolonger l’été à Essaouira !. Les artistes de renommée internationale rejoignent l’affiche grandiose de cette nouvelle édition : Bedouin, Moblack, Folamour, Bonobo, Patrick Mason, et bien d’autres feront raisonner la ville d’Essaouira aux rythmes de la musique électronique.', 'size': 2}, {'id': '223', 'title': 'Il propose une sélection pointue et cosmopolite: MOGA Essaouira dévoile sa programmation complète', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/culture/il-propose-une-selection-pointue-et-cosmopolite-moga-essaouira-devoile-sa-programmation-complete', 'summary': 'Il propose une sélection pointue et cosmopolite: MOGA Essaouira dévoile sa programmation complète. Les artistes de renommée internationale rejoignent l’affiche de la nouvelle édition du Moga Festival prévue du 1er au 5 octobre à Essaouira. Bedouin, Moblack, Folamour, Bonobo, Patrick Mason et bien d’autres feront résonner la ville d’Essaouira aux rythmes de la musique électronique. Du 1er au 5 octobre, Essaouira devient la capitale de la musique électronique .', 'size': 2}], 'main_title': 'Le festival le plus attendu de l’automne dévoile son line-up et invite à prolonger l’été à Essaouira !'}, {'community_id': '16', 'articles': [{'id': '150', 'title': 'Pêche méditerranéenne : débarquements en légère hausse à fin juillet', 'source': 'leseco.ma', 'link': 'https://leseco.ma/maroc/peche-mediterraneenne-debarquements-en-legere-hausse-a-fin-juillet.html', 'summary': 'Pêche méditerranéenne : débarquements en légère hausse à fin juillet. Les débarquements de la pêche côtière et artisanale dans les ports de la Méditerranée ont atteint 9.624 tonnes à fin juillet, soit une hausse de 1% par rapport à la même période en 2024, selon l’Office national des pêches (ONP). ', 'size': 2}, {'id': '177', 'title': 'ONP : baisse de 6% des débarquements de pêche au port de Larache à fin juillet', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/439628-onp-baisse-de-6-des-debarquements-de-peche-au-port-de-larache-a-fin-juillet.html', 'summary': 'ONP : baisse de 6% des débarquements de pêche au port de Larache à fin juillet. L’Office national des pêches (ONP), a fait état d’une baisse de 6% des débarquements des produits de la pêche côtière et artisanale au port de Larache à fin juillet 2025, pour se chiffrer à 9.129 Tonnes (T). Dans son dernier rapport sur les statistiques de la pêche côtière et artisanale au Maroc, l’ONP précise que la valeur marchande . ', 'size': 2}], 'main_title': 'Pêche méditerranéenne : débarquements en légère hausse à fin juillet'}, {'community_id': '17', 'articles': [{'id': '168', 'title': 'CTM | Un chiffre d’affaires consolidé de 758 MDH au S1-2025', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/ctm-un-chiffre-daffaires-consolide-de-758-mdh-au-s1-2025/', 'summary': 'CTM | Un chiffre d’affaires consolidé de 758 MDH au S1-2025. Le chiffre d’affaires (CA) consolidé du groupe CTM s’est établi à 758 millions de dirhams (MDH) au titre du premier semestre (S1) de 2025, contre 360 MDH enregistrés à la même période une année auparavant. Au titre du seul deuxième trimestre (T2) de 2025, le CA consolidé de la société a atteint 427 MDH, en ', 'size': 2}, {'id': '230', 'title': 'Un CA consolidé de 149,1 MDH au S1-2025', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/economie/un-ca-consolide-de-1491-mdh-au-s1-2025', 'summary': 'Un CA consolidé de 149,1 MDH au S1-2025. Hausse de 1% Le groupe S2M a réalisé un chiffre d’affaires (CA) consolidé de 149,1 millions de dirhams (MDH) au titre du premier semestre (S1) de l’année 2025, en hausse de 1% par rapport à la même période en 2024. Au titre du deuxième trimestre (T2) de l’année en cours, le CA consolidé s’est établi .', 'size': 2}], 'main_title': 'CTM | Un chiffre d’affaires consolidé de 758 MDH au S1-2025'}, {'community_id': '18', 'articles': [{'id': '185', 'title': 'Séisme de magnitude 4,5 ressenti dans la province d’Al Haouz', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/439701-seisme-de-magnitude-45-ressenti-dans-la-province-dal-haouz.html', 'summary': 'Séisme de magnitude 4,5 ressenti dans la province d’Al Haouz. Une secousse tellurique d’une magnitude de 4,5 degrés sur l’échelle de Richter a été enregistrée à l’aube de ce mercredi dans la province d’Al Haouz, à environ 31 kilomètres au sud de la commune d’Amezmiz, relevant de la région Marrakech-Safi. Le tremblement de terre est survenu vers 04h25 du matin (heure locale, GMT+1), à une . ', 'size': 3}, {'id': '220', 'title': "Maroc : Séisme d'une magnitude de 4,5 à Amizmiz", 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/175587/maroc-seisme-d-une-magnitude-amizmiz.html', 'summary': "Maroc : Séisme d'une magnitude de 4,5 à Amizmiz. Un séisme dune magnitude de 4,5 sur léchelle de Richter a frappé à 31 kilomètres dAmizmiz, région de Marrakech-Safi, aux premières heures de ce mercredi 3 septembre 2025. Les premières données indiquent que les secousses seraient intervenues vers 04:25.", 'size': 2}, {'id': '245', 'title': 'Séisme de magnitude 4,5 enregistré au sud de Marrakech, sans dégâts', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/seisme-de-magnitude-45-enregistre-au-sud-de-marrakech-sans-degats/', 'summary': 'Séisme de magnitude 4,5 enregistré au sud de Marrakech, sans dégâts. Un séisme d’une magnitude de 4,5 sur l’échelle de Richter a secoué, mercredi à l’aube, la commune d’Aghbar dans la province d’Al Haouz, à 81 kilomètres au sud de Marrakech, selon le Réseau sismologique euro-méditerranéen (EMSC). L’épicentre a été localisé à une profondeur de 12 kilomètres. La secousse est survenue à 04 h 25, heure .', 'size': 2}], 'main_title': 'Séisme de magnitude 4,5 ressenti dans la province d’Al Haouz'}, {'community_id': '19', 'articles': [{'id': '191', 'title': '37 groupes musicaux à l’affiche du festival "L’Boulevard"', 'source': 'lematin.ma', 'link': 'https://lematin.ma/culture/37-groupes-musicaux-a-laffiche-du-festival-lboulevard/299528', 'summary': '37 groupes musicaux à l’affiche du festival "L’Boulevard". Cette nouvelle édition promet une programmation riche et variée comprenant des concerts live, l\'iconique compétition Tremplin L’Boulevard, du cirque, de la danse, des ateliers,.', 'size': 2}, {'id': '211', 'title': 'Casablanca : la 23e édition du festival L’Boulevard annonce sa programmation', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/09/03/casablanca-la-23e-edition-du-festival-lboulevard-annonce-sa-programmation_1948569/', 'summary': 'Casablanca : la 23e édition du festival L’Boulevard annonce sa programmation. La 23ème édition du festival « L’Boulevard » se tiendra du 18 au 21 septembre courant, avec la participation de 37 groupes musicaux, ont indiqué les organisateurs lors d’une conférence de presse tenue mardi soir à Casablanca. Cette nouvelle édition promet une programmation riche et variée comprenant des concerts live, l’iconique compétition Tremplin L’Boulevard, du cirque, de.', 'size': 2}], 'main_title': '37 groupes musicaux à l’affiche du festival "L’Boulevard"'}, {'community_id': '2', 'articles': [{'id': '235', 'title': 'Matériaux médicaux : La structuration juridique et financière de Dislog Medical Devices finalisée', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/affaires/entreprises/materiaux-medicaux-la-structuration-juridique-et-financiere-de-dislog-medical-devices-finalisee/', 'summary': 'Matériaux médicaux : La structuration juridique et financière de Dislog Medical Devices finalisée. En regroupant six filiales spécialisées, le groupe Dislog vise à renforcer sa position sur un marché à fort potentiel, tout en préparant son expansion à l’échelle africaine.', 'size': 2}, {'id': '248', 'title': 'Dislog Medical Devices: nouvelle force du secteur médical marocain', 'source': 'leseco.ma', 'link': 'https://leseco.ma/business/dislog-medical-devices-nouvelle-force-du-secteur-medical-marocain.html', 'summary': 'Dislog Medical Devices: nouvelle force du secteur médical marocain. Dislog Group finalise la structuration juridique et financière de Dislog Medical Devices : un nouvel acteur marocain de référence dans le secteur de la santé, avec des ambitions africaines et le soutien d’investisseurs de renom. ', 'size': 2}], 'main_title': 'Matériaux médicaux : La structuration juridique et financière de Dislog Medical Devices finalisée'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
                        
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ? d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        // Fonction pour cacher le tooltip
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = '';
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
    
    
</body>




</html>
    