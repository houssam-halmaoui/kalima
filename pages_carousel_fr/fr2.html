<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); 
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title"> Les principales actualités des dernières 24 heures

</div>    
        <div class="header-subtitle"> Dernière mise à jour : 23/06/2025 - 06h26</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"></div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '3', 'title': 'Iran-Israël-USA : les pays arabes "préoccupés", appellent à la retenue', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/430083-iran-israel-usa-les-pays-arabes-preoccupes-appellent-a-la-retenue.html', 'summary': 'Iran-Israël-USA : les pays arabes "préoccupés", appellent à la retenue. Plusieurs États arabes ont affirmé, dimanche, suivre avec préoccupation le développement des événements, suite à l’attaque menée par les États-Unis contre des sites nucléaires en Iran, appelant à la retenue pour éviter toute escalade. Ainsi,vles Émirats Arabes Unis ont exprimé leur préoccupation face à la persistance des tensions dans la région, dont l’attaque des installations . ', 'size': 2}, {'id': '24', 'title': "Attaque américaine contre l'Iran : les pays arabes suivent avec préoccupation les développements de la situation et appellent à la retenue", 'source': 'lematin.ma', 'link': 'https://lematin.ma/monde/attaque-americaine-contre-liran-les-pays-arabes-appellent-a-la-retenue/286991', 'summary': "Attaque américaine contre l'Iran : les pays arabes suivent avec préoccupation les développements de la situation et appellent à la retenue. Ainsi, l'Égypte a exprimé sa grande préoccupation face aux récents développements en Iran, dénonçant une escalade aux conséquences graves sur la paix et la sécurité.", 'size': 2}, {'id': '96', 'title': 'Attaque américaine contre l’Iran: Les pays arabes suivent avec préoccupation les développements de la situation et appellent à la retenue', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/attaque-americaine-contre-liran-les-pays-arabes-suivent-avec-preoccupation-les-developpements-de-la-situation-et-appellent-a-la-retenue/', 'summary': 'Attaque américaine contre l’Iran: Les pays arabes suivent avec préoccupation les développements de la situation et appellent à la retenue. Plusieurs États arabes ont affirmé, dimanche, suivre avec préoccupation le développement des événements, suite à l’attaque menée par les États-Unis contre des sites nucléaires en Iran, appelant à la retenue pour éviter toute escalade. Ainsi, l’Égypte a exprimé sa grande préoccupation face aux récents développements en Iran, dénonçant une escalade aux « conséquences graves » sur la .', 'size': 3}], 'main_title': 'Attaque américaine contre l’Iran: Les pays arabes suivent avec préoccupation les développements de la situation et appellent à la retenue'}, {'community_id': '1', 'articles': [{'id': '16', 'title': 'Sécheresse, canicule et inondations : ce que révèle le Rapport annuel sur l’état du climat au Maroc', 'source': 'lematin.ma', 'link': 'https://lematin.ma/nation/climat-au-maroc-ce-que-revele-le-dernier-rapport-annuel/287016', 'summary': 'Sécheresse, canicule et inondations : ce que révèle le Rapport annuel sur l’état du climat au Maroc. La Direction générale de la météorologie (DGM) a levé le voile, vendredi dernier à Rabat, sur les grandes tendances climatiques ayant marqué l’année 2024 au Maroc. Le constat est.', 'size': 3}, {'id': '114', 'title': 'Réchauffement climatique : Un bilan 2024 inquiétant pour le Maroc', 'source': 'lnt.ma', 'link': 'https://lnt.ma/rechauffement-climatique-des-chiffres-de-2024-inquietants-pour-le-maroc/', 'summary': 'Réchauffement climatique : Un bilan 2024 inquiétant pour le Maroc. La Direction générale de la météorologie (DGM) a présenté, vendredi 20 juin 2025 à Rabat, son rapport annuel sur l’état du climat au Maroc pour l’année 2024, lors d’une rencontre organisée en présence du ministre de l’Équipement et de l’Eau, Nizar Baraka. Ce document, publié pour la cinquième année consécutive, dresse un état des lieux . ', 'size': 4}, {'id': '124', 'title': 'Maroc : 2024 marque une sixième année consécutive de sécheresse avec des anomalies thermiques record', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/429817-maroc-2024-marque-une-sixieme-annee-consecutive-de-secheresse-avec-des-anomalies-thermiques-record.html', 'summary': 'Maroc : 2024 marque une sixième année consécutive de sécheresse avec des anomalies thermiques record. Le ministère de l’Équipement et de l’Eau a récemment dévoilé les conclusions alarmantes du bilan climatique 2024, lors d’une conférence présidée par Nizar Baraka et organisée par la Direction Générale de la Météorologie. Ce rapport met en évidence l’intensification des dérèglements climatiques qui frappent le royaume. L’année 2024 se distingue par des anomalies thermiques particulièrement . ', 'size': 2}, {'id': '147', 'title': "Météo : 2024, l'année historiquement la plus chaude au Maroc", 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/169677/meteo-2024-l-annee-historiquement-plus.html', 'summary': "Météo : 2024, l'année historiquement la plus chaude au Maroc. La Direction générale de la météorologie (DGM) a présenté, vendredi à Rabat, son rapport annuel sur létat du climat au Maroc en 2024, lors dune rencontre tenue en présence du ministre de l’Équipement et de l’eau, Nizar Baraka.", 'size': 3}], 'main_title': 'Réchauffement climatique : Un bilan 2024 inquiétant pour le Maroc'}, {'community_id': '7', 'articles': [{'id': '21', 'title': 'Festival Gnaoua et Musiques du monde : une clôture haute en rythmes', 'source': 'lematin.ma', 'link': 'https://lematin.ma/culture/festival-gnaoua-et-musiques-du-monde-une-cloture-haute-en-rythmes/287004', 'summary': 'Festival Gnaoua et Musiques du monde : une clôture haute en rythmes. Après trois jours intenses de célébration musicale, de spiritualité partagée et de fusions inédites, la 26ᵉ édition du Festival Gnaoua et Musiques du monde s’est achevée le 21 juin.', 'size': 2}, {'id': '112', 'title': 'Clôture en beauté de la 26e édition du Festival Gnaoua et Musiques du Monde à Essaouira', 'source': 'lnt.ma', 'link': 'https://lnt.ma/cloture-en-beaute-de-la-26e-edition-du-festival-gnaoua-et-musiques-du-monde-a-essaouira/', 'summary': 'Clôture en beauté de la 26e édition du Festival Gnaoua et Musiques du Monde à Essaouira. La 26e édition du Festival Gnaoua et Musiques du Monde s’est achevée samedi soir à Essaouira, à l’issue de trois jours de concerts, de rencontres et d’échanges culturels. L’événement a accueilli un large public venu assister à des performances mêlant les traditions musicales gnaouies à des sonorités issues de divers horizons. Organisé dans plusieurs espaces . ', 'size': 2}, {'id': '138', 'title': 'Festival Gnaoua 2025 : Essaouira, au rythme des fusions du monde', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Festival-Gnaoua-2025-Essaouira-au-rythme-des-fusions-du-monde_a68979.html', 'summary': 'Festival Gnaoua 2025 : Essaouira, au rythme des fusions du monde. Du 19 au 21 juin, la 26ème édition du Festival Gnaoua et Musiques du Monde a transformé Essaouira en un carrefour vibrant de traditions et d’avant-gardes. Concerts, rencontres et fusions inédites ont célébré un patrimoine vivant en dialogue avec le monde.', 'size': 3}], 'main_title': 'Festival Gnaoua 2025 : Essaouira, au rythme des fusions du monde'}, {'community_id': '4', 'articles': [{'id': '29', 'title': 'La Mauritanie et le Sénégal à l’honneur à l’ouverture du 25e FICAK', 'source': 'lematin.ma', 'link': 'https://lematin.ma/culture/la-mauritanie-et-le-senegal-a-lhonneur-a-louverture-du-25e-ficak/286929', 'summary': 'La Mauritanie et le Sénégal à l’honneur à l’ouverture du 25e FICAK. Organisé sous le Haut Patronage de Sa Majesté le Roi Mohammed VI, ce rendez vous cinématographique de près de 50 ans, aspire à promouvoir la production cinématographique africaine,.', 'size': 2}, {'id': '107', 'title': 'Le Festival International du Cinéma Africain de Khouribga met à l’honneur la Mauritanie et le Sénégal', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/le-festival-international-du-cinema-africain-de-khouribga-met-a-lhonneur-la-mauritanie-et-le-senegal/', 'summary': 'Le Festival International du Cinéma Africain de Khouribga met à l’honneur la Mauritanie et le Sénégal. Le Festival International du Cinéma Africain de Khouribga (FICAK) a ouvert, samedi soir, les festivités de sa 25ᵉ édition (21-28 juin) par un hommage vibrant au cinéma mauritanien et sénégalais, les deux pays à l’honneur cette année. Organisé sous le Haut Patronage de Sa Majesté le Roi Mohammed VI, ce rendez vous cinématographique de près ', 'size': 2}], 'main_title': 'La Mauritanie et le Sénégal à l’honneur à l’ouverture du 25e FICAK'}, {'community_id': '5', 'articles': [{'id': '31', 'title': "Walid Regragui à l'honneur au Congrès des entraîneurs de la Fédération espagnole de football", 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/regragui-a-lhonneur-au-congres-des-entraineurs-de-la-rfef/286909', 'summary': "Walid Regragui à l'honneur au Congrès des entraîneurs de la Fédération espagnole de football. Ce congrès a connu la participation d’une vingtaine d’intervenants de renommée internationale, dont le sélectionneur des Lions de l’Atlas, en présence de représentants de la FIFA e.", 'size': 2}, {'id': '105', 'title': 'Walid Regragui participe au Congrès des entraîneurs de la Fédération espagnole de football', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/walid-regragui-participe-au-congres-des-entraineurs-de-la-federation-espagnole-de-football/', 'summary': 'Walid Regragui participe au Congrès des entraîneurs de la Fédération espagnole de football. Le sélectionneur national, Walid Regragui, a pris part, les 20 et 21 juin à Madrid, aux côtés de plus de 550 techniciens venus du monde entier, aux travaux du premier congrès international des entraîneurs de la Fédération royale espagnole de football (RFEF). Ce congrès a connu la participation d’une vingtaine d’intervenants de renommée internationale, dont .', 'size': 2}], 'main_title': "Walid Regragui à l'honneur au Congrès des entraîneurs de la Fédération espagnole de football"}, {'community_id': '6', 'articles': [{'id': '76', 'title': 'Maroc – France\xa0: La ministre Aurore Bergé en déplacement à Rabat, Casablanca et Marrakech', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/169636/maroc-france-ministre-aurore-berge.html', 'summary': 'Maroc – France : La ministre Aurore Bergé en déplacement à Rabat, Casablanca et Marrakech. La ministre française de l’Égalité entre les femmes et les hommes et de la lutte contre les discriminations, Aurore Bergé, est en visite officielle au Maroc du 23 au 25 juin 2025, dans le cadre du partenariat d’exception renforcé, scellé entre les chefs d’Etats des deux pays. Elle aura des entretiens avec des responsables marocains de haut niveau, dont Nadia Fettah Alaoui, ministre marocaine de l’Economie et des finances, ou encore Naïma Ben Yahia, ministre de la Solidarité, de l’insertion sociale et de la famille.', 'size': 2}, {'id': '137', 'title': 'La ministre française Aurore Bergé attendue à Rabat', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/La-ministre-francaise-Aurore-Berge-attendue-a-Rabat_a68981.html', 'summary': "La ministre française Aurore Bergé attendue à Rabat. La ministre française de l’Égalité entre les femmes et les hommes et de la lutte contre les discriminations, Aurore Bergé, se rendra au Maroc du 23 au 25 juin dans le cadre d'une visite officielle. Détails.", 'size': 2}], 'main_title': 'Maroc – France\xa0: La ministre Aurore Bergé en déplacement à Rabat, Casablanca et Marrakech'}, {'community_id': '11', 'articles': [{'id': '82', 'title': 'M.Akhannouch en direct d’Agadir : Le gouvernement poursuit son action avec détermination pour la mise en œuvre des chantiers de développement', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/actualite/m-akhannouch-en-direct-dagadir-le-gouvernement-poursuit-son-action-avec-determination-pour-la-mise-en-oeuvre-des-chantiers-de-developpement', 'summary': 'M.Akhannouch en direct d’Agadir : Le gouvernement poursuit son action avec détermination pour la mise en œuvre des chantiers de développement. Le gouvernement poursuit son action avec détermination et dévouement pour la mise en œuvre optimale des chantiers de développement lancés dans les différents domaines sous la conduite éclairée de SM le Roi Mohammed VI, a affirmé, samedi à Agadir, le président du Rassemblement national des indépendants (RNI), Aziz Akhannouch. S’exprimant lors de la 4ᵉ étape .', 'size': 2}, {'id': '104', 'title': 'Le gouvernement poursuit son action avec détermination pour la mise en œuvre des chantiers de développement', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/le-gouvernement-poursuit-son-action-avec-determination-pour-la-mise-en-oeuvre-des-chantiers-de-developpement/', 'summary': 'Le gouvernement poursuit son action avec détermination pour la mise en œuvre des chantiers de développement. Le gouvernement poursuit son action avec détermination et dévouement pour la mise en œuvre optimale des chantiers de développement lancés dans les différents domaines sous la conduite éclairée de SM le Roi Mohammed VI, a affirmé, samedi à Agadir, le président du Rassemblement national des indépendants (RNI), Aziz Akhannouch. S’exprimant lors de la 4ᵉ étape .', 'size': 2}], 'main_title': 'M.Akhannouch en direct d’Agadir : Le gouvernement poursuit son action avec détermination pour la mise en œuvre des chantiers de développement'}, {'community_id': '10', 'articles': [{'id': '84', 'title': 'Mawazine 2025 : OLM Souissi chavire sous les beats de 50 Cent', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/videos/mawazine-2025-olm-souissi-chavire-sous-les-beats-de-50-cent/', 'summary': 'Mawazine 2025 : OLM Souissi chavire sous les beats de 50 Cent. Le rappeur américain 50 Cent a livré un concert spectaculaire le 21 juin sur la scène OLM Souissi à Rabat. Tête d’affiche de la 20e édition du Festival Mawazine, l’artiste a enchaîné ses plus grands tubes devant des milliers de fans réunis pour une soirée exceptionnelle, coïncidant avec la Journée mondiale de la musique.', 'size': 2}, {'id': '161', 'title': 'Festival Mawazine 2025 : 50 Cent enflamme la scène OLM Souissi', 'source': 'lnt.ma', 'link': 'https://lnt.ma/festival-mawazine-2025-50-cent-enflamme-la-scene-olm-souissi/', 'summary': 'Festival Mawazine 2025 : 50 Cent enflamme la scène OLM Souissi. L’artiste américain 50 Cent a donné un concert samedi soir sur la scène OLM Souissi, dans le cadre de la 20ᵉ édition du Festival Mawazine – Rythmes du Monde. Le rappeur new-yorkais, de son vrai nom Curtis Jackson, a interprété une sélection de ses titres les plus connus devant un public nombreux. La prestation a . ', 'size': 2}], 'main_title': 'Mawazine 2025 : OLM Souissi chavire sous les beats de 50 Cent'}, {'community_id': '2', 'articles': [{'id': '98', 'title': 'Trump: Les frappes américaines ont «\xa0complètement\xa0» détruit les installations d’enrichissement nucléaire iranienne', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/trump-les-frappes-americaines-ont-completement-detruit-les-installations-denrichissement-nucleaire-iranienne/', 'summary': 'Trump: Les frappes américaines ont « complètement » détruit les installations d’enrichissement nucléaire iranienne. Le président des Etats Unis, Donald Trump a indiqué samedi soir que les installations d’enrichissement nucléaire de l’Iran ont été « complètement détruites » par les frappes américaines. Dans une déclaration télévisée depuis la Maison Blanche, le chef de l’exécutif américain a souligné que l’Iran “doit maintenant faire la paix ». « S’ils ne le font pas, les prochaines .', 'size': 2}, {'id': '109', 'title': 'Donald Trump affirme que les frappes américaines ont détruit les capacités nucléaires de l’Iran', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/donald-trump-affirme-que-les-frappes-americaines-ont-detruit-les-capacites-nucleaires-de-liran/', 'summary': 'Donald Trump affirme que les frappes américaines ont détruit les capacités nucléaires de l’Iran. Le président des Etats Unis, Donald Trump a indiqué samedi soir que les installations d’enrichissement nucléaire de l’Iran ont été “complètement détruites” par les frappes américaines. Dans une déclaration télévisée depuis la Maison Blanche, le chef de l’exécutif américain a souligné que l’Iran “doit maintenant faire la paix”. “S’ils ne le font pas, les prochaines ', 'size': 2}], 'main_title': 'Trump: Les frappes américaines ont «\xa0complètement\xa0» détruit les installations d’enrichissement nucléaire iranienne'}, {'community_id': '3', 'articles': [{'id': '125', 'title': 'Coupe du Trône : on connait les deux finalistes', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/430107-coupe-du-trone-on-connait-les-deux-finalistes.html', 'summary': 'Coupe du Trône : on connait les deux finalistes. La Renaissance sportive de Berkane (RSB), a composté son ticket pour la finale de la Coupe du Trône (saison 2024-2025), en battant ce dimanche 22 juin au Complexe sportif de Fès, le Moghreb de Tétouan sur le score de 3 buts à 0. La RSB rejoint en finale l’Olympique de Safi, vainqueur samedi de l’Union . ', 'size': 2}, {'id': '146', 'title': "Coupe du trône de football : La RS Berkane rejoint l'Olympic Safi en finale", 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/169683/coupe-trone-football-berkane-rejoint.html', 'summary': "Coupe du trône de football : La RS Berkane rejoint l'Olympic Safi en finale. La Renaissance sportive de Berkane (RSB) s’est qualifiée pour la finale de la Coupe du trône de football 2023-2024, en simposant face au Moghreb Tétouan par 3 buts à 0, en demi-finale disputée dimanche soir au complexe sportif de Fès.", 'size': 2}], 'main_title': 'Coupe du Trône : on connait les deux finalistes'}, {'community_id': '8', 'articles': [{'id': '153', 'title': 'Mondial des clubs : Le Wydad Casablanca s’incline face à la Juventus', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/169655/mondial-clubs-wydad-casablanca-s-incline.html', 'summary': 'Mondial des clubs : Le Wydad Casablanca s’incline face à la Juventus. Le Wydad Casablanca (WAC) a perdu face au club italien de la Juventus de Turin sur le score de 4 buts à 1, en match de la deuxième journée du groupe G de la Coupe du monde des clubs, disputé dimanche au stade Lincoln Financial Field à Philadelphie (Etats-Unis).', 'size': 2}, {'id': '158', 'title': 'Mondial des clubs: le Wydad Casablanca s’incline face à la Juventus (1-4)', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/mondial-des-clubs-le-wydad-casablanca-sincline-face-a-la-juventus-1-4.html', 'summary': 'Mondial des clubs: le Wydad Casablanca s’incline face à la Juventus (1-4). Le Wydad Casablanca (WAC) a perdu face au club italien de la Juventus de Turin sur le score de 4 buts à 1, en match de la 2è journée du groupe G de la Coupe du monde des clubs, disputé dimanche au stade Lincoln Financial Field à Philadelphie. La Juventus a ouvert la marque par . L’article est apparu en premier sur .', 'size': 2}], 'main_title': 'Mondial des clubs : Le Wydad Casablanca s’incline face à la Juventus'}, {'community_id': '9', 'articles': [{'id': '156', 'title': 'Frappes US contre l’Iran: L’Allemagne convoque le conseil de sécurité et exhorte Téhéran à s’engager “immédiatement” dans les négociations', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/frappes-us-contre-liran-lallemagne-convoque-le-conseil-de-securite-et-exhorte/', 'summary': 'Frappes US contre l’Iran: L’Allemagne convoque le conseil de sécurité et exhorte Téhéran à s’engager “immédiatement” dans les négociations. Le chancelier allemand Friedrich Merz a convoqué, dimanche, le conseil de sécurité du gouvernement fédéral pour évaluer les conséquences des frappes américaines visant des installations nucléaires en Iran et a exhorté Téhéran à s’engager “immédiatement” dans les négociations pour une solution diplomatique au conflit. Selon un communiqué du porte-parole du gouvernement, M. Merz a, lors .', 'size': 2}, {'id': '159', 'title': 'Le chancelier allemand exhorte Téhéran à s’engager “immédiatement” dans les négociations pour une solution diplomatique', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/le-chancelier-allemand-exhorte-teheran-a-sengager-immediatement-dans-les-negociations-pour-une-solution-diplomatique.html', 'summary': 'Le chancelier allemand exhorte Téhéran à s’engager “immédiatement” dans les négociations pour une solution diplomatique. Le chancelier allemand Friedrich Merz a convoqué, dimanche, le conseil de sécurité du gouvernement fédéral pour évaluer les conséquences des frappes américaines visant des installations nucléaires en Iran. Il a également exhorté Téhéran à s’engager “immédiatement” dans les négociations pour une solution diplomatique au conflit. Selon un communiqué du porte-parole du gouvernement, M. Merz a, . L’article est apparu en premier sur .', 'size': 2}], 'main_title': 'Frappes US contre l’Iran: L’Allemagne convoque le conseil de sécurité et exhorte Téhéran à s’engager “immédiatement” dans les négociations'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
                        
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ? d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        // Fonction pour cacher le tooltip
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = '';
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
    
    
</body>




</html>
    