<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); 
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title"> Les principales actualités des dernières 24 heures

</div>    
        <div class="header-subtitle"> Dernière mise à jour : 16/06/2025 - 12h27</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"></div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '0', 'title': 'Les températures attendues ce lundi 16 juin 2025', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/428904-les-temperatures-attendues-ce-lundi-16-juin-2025.html', 'summary': 'Les températures attendues ce lundi 16 juin 2025. Voici les températures minimales et maximales prévues par la Direction générale de la météorologie pour le lundi 16 juin 2025 : Min Max – Oujda 23 36 – Bouarfa 23 36 – Al Hoceima 19 27 – Tétouan 19 26 – Sebta 20 23 – Mellilia 21 25 – Tanger 22 31 – Kénitra 20 . ', 'size': 2}, {'id': '90', 'title': 'Températures prévues pour le lundi 16 juin 2025', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/temperatures-prevues-pour-le-lundi-16-juin-2025/', 'summary': 'Températures prévues pour le lundi 16 juin 2025. Voici les températures minimales et maximales prévues par la Direction générale de la météorologie pour le lundi 16 juin 2025 : Min Max – Oujda 23 36 – Bouarfa 23 36 – Al Hoceima 19 27 – Tétouan 19 26 – Sebta 20 23 – Mellilia 21 25 – Tanger 22 31 – Kénitra 20 .', 'size': 2}], 'main_title': 'Les températures attendues ce lundi 16 juin 2025'}, {'community_id': '1', 'articles': [{'id': '3', 'title': "L'Espagne augmente sa contribution à l'OMS", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/428884-lespagne-augmente-sa-contribution-a-loms.html', 'summary': "L'Espagne augmente sa contribution à l'OMS. L’Agence espagnole de coopération internationale au développement (AECID) et l’Organisation mondiale de la santé (OMS) ont signé, samedi, un nouvel accord et une contribution de 5,25 millions d’euros pour soutenir les principales initiatives de l’OMS. « L’Espagne est depuis longtemps un partenaire proche et fidèle de l’OMS et de la santé mondiale », a déclaré le Directeur . ", 'size': 2}, {'id': '86', 'title': 'L’Espagne augmente son soutien à l’OMS avec une contribution de 5,25 millions d’euros', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/lespagne-augmente-son-soutien-a-loms-avec-une-contribution-de-525-millions-deuros/', 'summary': 'L’Espagne augmente son soutien à l’OMS avec une contribution de 5,25 millions d’euros. L’Agence espagnole de coopération internationale au développement (AECID) et l’Organisation mondiale de la santé (OMS) ont signé, samedi, un nouvel accord et une contribution de 5,25 millions d’euros pour soutenir les principales initiatives de l’OMS. « L’Espagne est depuis longtemps un partenaire proche et fidèle de l’OMS et de la santé mondiale », a déclaré le Directeur .', 'size': 2}], 'main_title': "L'Espagne augmente sa contribution à l'OMS"}, {'community_id': '3', 'articles': [{'id': '8', 'title': 'Feux de forêt: Appel à la vigilance aux citoyens et travailleurs', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/428896-feux-de-foret-appel-a-la-vigilance-aux-citoyens-et-travailleurs.html', 'summary': 'Feux de forêt: Appel à la vigilance aux citoyens et travailleurs. L’Agence nationale des eaux et forêts (ANEF) a lancé, dimanche, un appel à la vigilance aux riverains des forêts, aux citoyens estivants et visiteurs ainsi qu’aux personnes travaillant en milieux forestiers, afin de prendre les précautions nécessaires pour éviter les départs de feux de forêts. Cette population est également appelée à alerter rapidement les autorités . ', 'size': 5}, {'id': '84', 'title': 'L’Agence nationale des eaux et forêts appelle à la vigilance face au risque d’incendies dans plusieurs régions du Royaume', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/lagence-nationale-des-eaux-et-forets-appelle-a-la-vigilance-face-au-risque-dincendies-dans-plusieurs-regions-du-royaume/', 'summary': 'L’Agence nationale des eaux et forêts appelle à la vigilance face au risque d’incendies dans plusieurs régions du Royaume. L’Agence nationale des eaux et forêts (ANEF) a lancé, dimanche, un appel à la vigilance aux riverains des forêts, aux citoyens estivants et visiteurs ainsi qu’aux personnes travaillant en milieux forestiers, afin de prendre les précautions nécessaires pour éviter les départs de feux de forêts. Cette population est également appelée à alerter rapidement les autorités .', 'size': 5}, {'id': '108', 'title': 'Feux de forêts : l’ANEF alerte sur un risque extrême dans plusieurs régions du Maroc', 'source': 'lematin.ma', 'link': 'https://lematin.ma/regions/feux-de-forets-lanef-alerte-sur-un-risque-extreme-dans-plusieurs-regions/285620', 'summary': "Feux de forêts : l’ANEF alerte sur un risque extrême dans plusieurs régions du Maroc. L’Agence nationale des eaux et forêts (ANEF) a lancé, dimanche, un appel à la vigilance aux riverains des forêts, aux citoyens estivants et visiteurs ainsi qu'aux personnes tra.", 'size': 5}, {'id': '139', 'title': "L’Agence nationale des eaux et forêts appelle à la vigilance face au risque d'incendies", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/06/16/lagence-nationale-des-eaux-et-forets-appelle-a-la-vigilance-face-au-risque-dincendies_1937759/', 'summary': "L’Agence nationale des eaux et forêts appelle à la vigilance face au risque d'incendies. L’Agence nationale des eaux et forêts (ANEF) a lancé, dimanche, un appel à la vigilance aux riverains des forêts, aux citoyens estivants et visiteurs ainsi qu’aux personnes travaillant en milieux forestiers, afin de prendre les précautions nécessaires pour éviter les départs de feux de forêts. Cette population est également appelée à alerter rapidement les autorités.", 'size': 5}, {'id': '178', 'title': 'Risque d’incendies : L’ANEF appelle à la vigilance pour éviter les départs de feux de forêts', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/au-royaume/risque-dincendies-l-anef-appelle-a-la-vigilance-pour-eviter-les-departs-de-feux-de-forets/', 'summary': "Risque d’incendies : L’ANEF appelle à la vigilance pour éviter les départs de feux de forêts. L’Agence nationale des eaux et forêts (ANEF) a lancé, dimanche, un appel à la vigilance aux riverains des forêts, aux citoyens estivants et visiteurs ainsi qu'aux personnes travaillant en milieux forestiers, afin de prendre les précautions nécessaires pour éviter les départs de feux de forêts.", 'size': 5}], 'main_title': 'Feux de forêt: Appel à la vigilance aux citoyens et travailleurs'}, {'community_id': '8', 'articles': [{'id': '15', 'title': 'Baccalauréat 2025 : des élèves brillants à l’honneur dans tout le Royaume', 'source': 'lematin.ma', 'link': 'https://lematin.ma/nation/baccalaureat-2025-des-eleves-brillants-a-lhonneur-dans-tout-le-royaume/285448', 'summary': 'Baccalauréat 2025 : des élèves brillants à l’honneur dans tout le Royaume. La session ordinaire du baccalauréat 2025, qui a concerné plus de 374.000 candidats scolarisés, a enregistré une hausse du taux de réussite nationale, atteignant 66,8 %. Une perfor.', 'size': 2}, {'id': '135', 'title': 'Bac 2025 : un taux de réussite de 66,8%, en légère baisse par rapport à 2024', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/06/16/bac-2025-un-taux-de-reussite-de-668-en-legere-baisse-par-rapport-a-2024_1937762/', 'summary': 'Bac 2025 : un taux de réussite de 66,8%, en légère baisse par rapport à 2024. Un total de 250.075 candidats scolarisés dans les établissements d’enseignement public et privé ont réussi les épreuves de la session ordinaire de l’examen national unifié du baccalauréat au titre de la session de juin 2025, a annoncé samedi le ministère de l’Éducation nationale, du Préscolaire et des Sports. Le taux de réussite s’est établi à.', 'size': 2}, {'id': '159', 'title': 'Baccalauréat 2025 : Les résultats  de la session de juin en chiffres', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/societe/baccalaureat-2025-les-resultats-de-la-session-de-juin-en-chiffres', 'summary': 'Baccalauréat 2025 : Les résultats de la session de juin en chiffres. 250.075 candidats admis, taux de réussite de 66,8% Examen national : Un total de 250.075 candidats scolarisés dans les établissements d’enseignement public et privé ont réussi les épreuves de la session ordinaire de l’examen national unifié du baccalauréat au titre de la session de juin 2025, a annoncé samedi le ministère de l’éducation nationale, du .', 'size': 3}], 'main_title': 'Baccalauréat 2025 : Les résultats  de la session de juin en chiffres'}, {'community_id': '4', 'articles': [{'id': '20', 'title': 'Alerte météo : orages, grêle et rafales attendus ce dimanche', 'source': 'lematin.ma', 'link': 'https://lematin.ma/regions/alerte-meteo-orages-grele-et-rafales-attendus-ce-dimanche/285552', 'summary': 'Alerte météo : orages, grêle et rafales attendus ce dimanche. Des averses orageuses localement fortes avec chutes de grêle et rafales de vent sont prévues ce dimanche dans plusieurs provinces du Royaume, a annoncé la Direction générale de la.', 'size': 3}, {'id': '97', 'title': 'Alerte météo : averses orageuses ce lundi dans plusieurs régions', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/428966-alerte-meteo-averses-orageuses-ce-lundi-dans-plusieurs-regions.html', 'summary': 'Alerte météo : averses orageuses ce lundi dans plusieurs régions. La Direction générale de la météorologie (DGM), a annoncé des averses orageuses localement fortes avec rafales de vent prévues, lundi, dans plusieurs provinces du Royaume. Dans un bulletin d’alerte de niveau de vigilance orange, la DGM précise que ces averses (15-25 mm) sont attendues lundi de 15h00 à 23h00 dans les provinces de Midelt, Khénifra, . ', 'size': 4}, {'id': '141', 'title': 'Averses orageuses localement fortes avec rafales de vent ce lundi dans plusieurs provinces du Royaume', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/averses-orageuses-localement-fortes-avec-rafales-de-vent-ce-lundi-dans-plusieurs-provinces-du-royaume-304815/', 'summary': 'Averses orageuses localement fortes avec rafales de vent ce lundi dans plusieurs provinces du Royaume. Des averses orageuses localement fortes avec rafales de vent sont prévues, lundi, dans plusieurs provinces du Royaume, a annoncé la Direction générale de la météorologie (DGM). Ces averses (15-25 mm) sont attendues lundi de 15h00 à 23h00 dans les provinces de Midelt, Khénifra, Ifrane, Beni Mellal, Taourirt, Jerada, Taza et', 'size': 3}, {'id': '147', 'title': 'Maroc : Averses orageuses et rafales de vent ce lundi', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/169061/maroc-averses-orageuses-rafales-vent.html', 'summary': 'Maroc : Averses orageuses et rafales de vent ce lundi. Des averses orageuses localement fortes avec rafales de vent sont prévues, lundi, dans plusieurs provinces du Maroc, a annoncé la Direction générale de la météorologie (DGM).', 'size': 4}], 'main_title': 'Alerte météo : averses orageuses ce lundi dans plusieurs régions'}, {'community_id': '6', 'articles': [{'id': '116', 'title': "Israël-Iran : Le déluge de feu se poursuit quatre jours après l'offensive israélienne", 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Israel-Iran-Le-deluge-de-feu-se-poursuit-quatre-jours-apres-l-offensive-israelienne_a68710.html', 'summary': "Israël-Iran : Le déluge de feu se poursuit quatre jours après l'offensive israélienne. L'Iran a tiré lundi des missiles sur plusieurs grandes villes d'Israël, où le bilan s'est alourdi de onze morts au quatrième jour de l'escalade militaire entre les deux pays, en réponse à des frappes aériennes israéliennes sur le territoire iranien.", 'size': 2}, {'id': '145', 'title': 'Israël visé par des missiles iraniens après une quatrième nuit de frappes sur l’Iran', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/israel-vise-par-des-missiles-iraniens-apres-une-quatrieme-nuit-de-frappes-sur-liran-304805/', 'summary': 'Israël visé par des missiles iraniens après une quatrième nuit de frappes sur l’Iran. L’Iran a tiré lundi de nouveaux missiles sur plusieurs grandes villes d’Israël, faisant au moins trois morts selon les secours, en réponse à des frappes israéliennes qui ont atteint le territoire iranien pour la quatrième nuit consécutive. Les sirènes d’alerte anti-aérienne ont retenti à Jérusalem où une journaliste de l’AFP', 'size': 2}], 'main_title': "Israël-Iran : Le déluge de feu se poursuit quatre jours après l'offensive israélienne"}, {'community_id': '2', 'articles': [{'id': '117', 'title': 'Hajj 1447 H: Tirage au sort du 23 juin au 04 juillet 2025', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Hajj-1447-H-Tirage-au-sort-du-23-juin-au-04-juillet-2025_a68708.html', 'summary': 'Hajj 1447 H: Tirage au sort du 23 juin au 04 juillet 2025. Le ministère des Habous et des Affaires islamiques informe les citoyens ayant déposé une demande d’inscription pour accomplir le pèlerinage au titre de l’année 1447 de l’Hégire que le tirage au sort pour déterminer les listes définitives se déroulera du lundi 23 juin au vendredi 04 juillet 2025.', 'size': 2}, {'id': '131', 'title': 'Le tirage au sort pour le prochain hajj aura lieu du 23 juin au 4 juillet', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/06/16/le-tirage-au-sort-pour-le-prochain-hajj-aura-lieu-du-23-juin-au-4-juillet_1937804/', 'summary': 'Le tirage au sort pour le prochain hajj aura lieu du 23 juin au 4 juillet. Le ministère des Habous et des Affaires islamiques informe les citoyens ayant déposé une demande d’inscription pour accomplir le pèlerinage au titre de l’année 1447 de l’Hégire, correspondant à l’année 2026, que le tirage au sort pour déterminer les listes définitives se déroulera du lundi 23 juin au vendredi 4 juillet 2025. L’opération de tirage.', 'size': 2}], 'main_title': 'Hajj 1447 H: Tirage au sort du 23 juin au 04 juillet 2025'}, {'community_id': '9', 'articles': [{'id': '118', 'title': 'Été 2025 : Royal Air Maroc met en place une offre record de 6,6 millions de sièges', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Ete-2025-Royal-Air-Maroc-met-en-place-une-offre-record-de-66-millions-de-sieges_a68709.html', 'summary': "Été 2025 : Royal Air Maroc met en place une offre record de 6,6 millions de sièges. Royal Air Maroc (RAM) a annoncé, lundi, le lancement de son programme de vols pour l'été 2025, avec une offre record de plus de 6,6 millions de sièges, pour desservir plus de 95 destinations.", 'size': 2}, {'id': '202', 'title': 'RAM déploie une offre record pour l’été 2025 avec plus de 6,6 millions de sièges', 'source': 'lnt.ma', 'link': 'https://lnt.ma/ram-deploie-une-offre-record-pour-lete-2025-avec-plus-de-66-millions-de-sieges/', 'summary': 'RAM déploie une offre record pour l’été 2025 avec plus de 6,6 millions de sièges. Royal Air Maroc (RAM) a annoncé, lundi, le lancement de son programme de vols pour l’été 2025, avec une offre record de plus de 6,6 millions de sièges, pour desservir plus de 95 destinations. « Afin d’accompagner le retour massif des Marocains du Monde à l’occasion des grandes vacances d’été 2025, Royal Air Maroc renforce son . ', 'size': 2}], 'main_title': 'Été 2025 : Royal Air Maroc met en place une offre record de 6,6 millions de sièges'}, {'community_id': '5', 'articles': [{'id': '121', 'title': 'Figeac Aéro va produire au Maroc des pièces pour le Boeing 737 MAX', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Figeac-Aero-va-produire-au-Maroc-des-pieces-pour-le-Boeing-737-MAX_a68705.html', 'summary': 'Figeac Aéro va produire au Maroc des pièces pour le Boeing 737 MAX. Le groupe aéronautique français, Figeac Aéro, s’est associé avec Boeing pour fabriquer dans sa filiale marocaine des pièces pour le 737 MAX. Détails.', 'size': 3}, {'id': '127', 'title': 'Boeing renforce ses investissements dans le secteur aéronautique au Maroc', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/06/16/boeing-renforce-ses-investissements-dans-le-secteur-aeronautique-au-maroc_1937818/', 'summary': 'Boeing renforce ses investissements dans le secteur aéronautique au Maroc. Le géant américain Boeing a conclu un nouvel accord avec Casablanca Aéronautique, renforçant ainsi ses investissements dans l’aéronautique au Maroc. Ce partenariat prévoit la fabrication de pièces pour le programme 737 MAX, et s’inscrit dans une volonté commune de développer un écosystème industriel de pointe dans le Royaume. Boeing a annoncé lundi un nouvel accord.', 'size': 3}, {'id': '142', 'title': 'Des pièces made in Morocco pour le 737 MAX de Boeing', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/des-pieces-made-in-morocco-pour-le-737-max-de-boeing-304819/', 'summary': 'Des pièces made in Morocco pour le 737 MAX de Boeing. Le groupe aéronautique américain Boeing a annoncé la signature d’un nouvel accord industriel avec Casablanca Aéronautique, filiale du groupe français Figeac Aéro, renforçant ainsi sa stratégie d’ancrage au Maroc. Ce partenariat prévoit la production de pièces de structure usinées pour le programme 737 MAX, l’un des avions commerciaux phares du', 'size': 4}, {'id': '176', 'title': 'Aéronautique : Boeing produira des pièces de son 737 MAX à Casablanca', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/au-royaume/aeronautique-le-francais-figeac-aero-sallie-a-boeing-pour-produire-au-maroc-des-pieces-du-737-max/', 'summary': 'Aéronautique : Boeing produira des pièces de son 737 MAX à Casablanca. Dans le cadre du nouveau partenariat avec Boeing, Casablanca Aéronautique produira au Maroc un ensemble de pièces usinées en aluminium pour le 737 MAX.', 'size': 4}], 'main_title': 'Des pièces made in Morocco pour le 737 MAX de Boeing'}, {'community_id': '7', 'articles': [{'id': '134', 'title': 'Souad Brahma succède à Aziz Ghali à la tête de l’AMDH', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/06/16/souad-brahma-succede-a-aziz-ghali-a-la-tete-de-lamdh_1937773/', 'summary': 'Souad Brahma succède à Aziz Ghali à la tête de l’AMDH. L’avocate Souad Brahma a été officiellement élue présidente de l’Association marocaine des droits humains (AMDH), la plus grande organisation de défense des droits humains au Maroc. Son élection intervient à l’issue d’une réunion décisive du comité administratif de l’AMDH, tenue ce dimanche au siège central de l’association à Rabat, consacrée à l’élection d’un nouveau bureau.', 'size': 2}, {'id': '153', 'title': 'Maroc\xa0: L’avocate Souad Brahma succède à Aziz Rhali à la tête de l’AMDH', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/169038/maroc-l-avocate-souad-brahma-succede.html', 'summary': 'Maroc : L’avocate Souad Brahma succède à Aziz Rhali à la tête de l’AMDH. L’Association marocaine des droits humains (AMDH) a annoncé, dimanche 15 juin, la nouvelle conduction de l’avocate Souad Brahma en tant que présidente. Cette décision fait suite au 14e congrès de l’ONG, tenu du 22 au 25 mai à Bouznika et ayant donné lieu à l’élection d’un bureau central, qui a désigné la militante. Sœur de Mustapha Brahma, ancien secrétaire général du parti de la Voie démocratique, elle succède ainsi à Aziz Rhali, qui avait exercé deux mandats consécutifs.', 'size': 2}], 'main_title': 'Souad Brahma succède à Aziz Ghali à la tête de l’AMDH'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
                        
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ? d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        // Fonction pour cacher le tooltip
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = '';
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
    
    
</body>




</html>
    