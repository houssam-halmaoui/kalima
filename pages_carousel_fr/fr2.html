<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); 
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title"> Les principales actualités des dernières 24 heures

</div>    
        <div class="header-subtitle"> Dernière mise à jour : 06/07/2025 - 06h28</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"></div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '1', 'title': "Ryanair s'explique après une fausse alerte incendie", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/432010-ryanair-sexplique-apres-une-fausse-alerte-incendie.html', 'summary': "Ryanair s'explique après une fausse alerte incendie. Une fausse alerte incendie survenue à bord d’un avion Ryanair prêt à décoller de l’aéroport de Palma de Majorque a provoqué, vendredi soir, une évacuation d’urgence au cours de laquelle plusieurs passagers ont été légèrement blessés, a indiqué, samedi, la compagnie aérienne irlandaise. Ryanair explique que le vol a interrompu son décollage en raison d’un . ", 'size': 2}, {'id': '96', 'title': 'Espagne: Plusieurs blessés après l’évacuation d’un vol Ryanair suite à une fausse alerte incendie', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/espagne-plusieurs-blesses-apres-levacuation-dun-vol-ryanair-suite-a-une-fausse-alerte-incendie/', 'summary': 'Espagne: Plusieurs blessés après l’évacuation d’un vol Ryanair suite à une fausse alerte incendie. Une fausse alerte incendie survenue à bord d’un avion Ryanair prêt à décoller de l’aéroport de Palma de Majorque a provoqué, vendredi soir, une évacuation d’urgence au cours de laquelle plusieurs passagers ont été légèrement blessés, a indiqué, samedi, la compagnie aérienne irlandaise. Ryanair explique que le vol a interrompu son décollage en raison d’un .', 'size': 2}], 'main_title': "Ryanair s'explique après une fausse alerte incendie"}, {'community_id': '1', 'articles': [{'id': '9', 'title': "Les pays de l'Opep+ augmenteront leur production en août", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/431960-les-pays-de-lopep-augmenteront-leur-production-en-aout.html', 'summary': "Les pays de l'Opep+ augmenteront leur production en août. L’Arabie Saoudite, la Russie et six autres producteurs de pétrole de l’Opep+ se sont accordés samedi pour augmenter leur production de pétrole de 548.000 barils par jour en août, soit plus que prévu par le marché et les analystes, selon un communiqué de l’Opep. « Les huit pays participants mettront en œuvre un ajustement de la production de . ", 'size': 2}, {'id': '61', 'title': 'Vers une détente des prix du pétrole\xa0? Huit pays de l’OPEP+ rouvrent les vannes', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/vers-une-detente-des-prix-du-petrole-huit-pays-de-lopep-rouvrent-les-vannes-306176/', 'summary': 'Vers une détente des prix du pétrole ? Huit pays de l’OPEP+ rouvrent les vannes. L’Arabie Saoudite, la Russie et six autres producteurs de pétrole de l’Opep+ ont déjoué les prévisions du marché en annonçant lors d’une réunion samedi une nouvelle hausse des quotas plus importante que prévu en août. « Les huit pays participants mettront en œuvre un ajustement de la production de 548.000 barils', 'size': 2}], 'main_title': "Les pays de l'Opep+ augmenteront leur production en août"}, {'community_id': '7', 'articles': [{'id': '28', 'title': "La République d'Equateur inaugure son Ambassade à Rabat", 'source': 'lematin.ma', 'link': 'https://lematin.ma/nation/la-republique-dequateur-inaugure-son-ambassade-a-rabat/289304', 'summary': "La République d'Equateur inaugure son Ambassade à Rabat. Dans une allocution prononcée lors de cette cérémonie, Nasser Bourita a souligné que l’inauguration de cette ambassade intervient suite à la décision historique de la République d.", 'size': 3}, {'id': '47', 'title': "L'Equateur inaugure son Ambassade à Rabat", 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/L-Equateur-inaugure-son-Ambassade-a-Rabat_a69495.html', 'summary': "L'Equateur inaugure son Ambassade à Rabat. Le ministre des Affaires étrangères, de la Coopération Africaine et des Marocains résidant à l’étranger, Nasser Bourita, et la ministre équatorienne des Relations extérieures et de la mobilité humaine, Gabriela Sommerfeld, ont procédé, vendredi, à l’inauguration de l’ambassade de la République d’Equateur à Rabat.", 'size': 4}, {'id': '59', 'title': "La République d'Equateur inaugure son ambassade à Rabat", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/07/04/la-republique-dequateur-inaugure-son-ambassade-a-rabat_1941127/', 'summary': "La République d'Equateur inaugure son ambassade à Rabat. Le ministre des Affaires étrangères, de la Coopération Africaine et des Marocains résidant à l’étranger, Nasser Bourita, et la ministre équatorienne des Relations extérieures et de la mobilité humaine, Gabriela Sommerfeld, ont procédé, vendredi, à l’inauguration de l’ambassade de la République d’Equateur à Rabat. Dans une allocution prononcée lors de cette cérémonie, Bourita a souligné.", 'size': 4}, {'id': '103', 'title': 'Entretiens maroco–équatoriens sur les perspectives de coopération commerciale et industrielle', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/entretiens-maroco-equatoriens-sur-les-perspectives-de-cooperation-commerciale-et-industrielle/', 'summary': 'Entretiens maroco–équatoriens sur les perspectives de coopération commerciale et industrielle. Le ministre de l’Industrie et du Commerce, Ryad Mezzour, s’est entretenu, vendredi à Casablanca, avec la ministre des Relations extérieures et de la Mobilité humaine de la République de l’Équateur, Gabriela Sommerfeld, autour des perspectives de coopération dans les secteurs du commerce et de l’industrie. Cette rencontre s’inscrit dans la dynamique d’ouverture du Maroc sur .', 'size': 2}, {'id': '111', 'title': 'Maroc | Inauguration de l’ambassade de la République d’Équateur à Rabat', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/maroc-inauguration-de-lambassade-de-la-republique-dequateur-a-rabat/', 'summary': 'Maroc | Inauguration de l’ambassade de la République d’Équateur à Rabat. Le ministre des Affaires étrangères, de la Coopération Africaine et des Marocains résidant à l’étranger, Nasser Bourita, et la ministre équatorienne des Relations extérieures et de la mobilité humaine, Gabriela Sommerfeld, ont procédé, vendredi, à l’inauguration de l’ambassade de la République d’Equateur à Rabat. Dans une allocution prononcée lors de cette cérémonie, M. Bourita a ', 'size': 4}], 'main_title': "L'Equateur inaugure son Ambassade à Rabat"}, {'community_id': '3', 'articles': [{'id': '32', 'title': "Commune de Tanger: Mise en place d'un nouveau système de stationnement basé sur l'efficacité et la transparence", 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Commune-de-Tanger-Mise-en-place-d-un-nouveau-systeme-de-stationnement-base-sur-l-efficacite-et-la-transparence_a69509.html', 'summary': "Commune de Tanger: Mise en place d'un nouveau système de stationnement basé sur l'efficacité et la transparence. La commune de Tanger a annoncé l’entrée en vigueur, à partir du 9 juillet, d’une décision règlementaire relative à l’organisation du stationnement des véhicules, selon les nomes d’efficacité, de digitalisation et de transparence, en sus de l'amélioration de la relation avec les usagers.", 'size': 3}, {'id': '82', 'title': 'Tanger : Mise en place d’un nouveau système de stationnement des véhicules', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/au-royaume/scans/tanger-mise-en-place-dun-nouveau-systeme-de-stationnement-des-vehicules/', 'summary': "Tanger : Mise en place d’un nouveau système de stationnement des véhicules. La commune de Tanger a annoncé l’entrée en vigueur, à partir du 9 juillet, d’une décision règlementaire relative à l’organisation du stationnement des véhicules, selon les nomes d’efficacité, de digitalisation et de transparence, en sus de l'amélioration de la relation avec les usagers.", 'size': 3}, {'id': '126', 'title': 'Tanger change les règles du stationnement : fin du sabot et gratuité pour les personnes handicapées', 'source': 'lematin.ma', 'link': 'https://lematin.ma/regions/tanger-change-les-regles-du-stationnement-fin-du-sabot/289439', 'summary': 'Tanger change les règles du stationnement : fin du sabot et gratuité pour les personnes handicapées. Dans un communiqué officiel, la commune de Tanger a annoncé l’entrée en vigueur de la décision n° 2022/1357 relative à l’organisation du stationnement payant dans le cadre d’une ge.', 'size': 3}], 'main_title': "Commune de Tanger: Mise en place d'un nouveau système de stationnement basé sur l'efficacité et la transparence"}, {'community_id': '2', 'articles': [{'id': '33', 'title': "Billetterie sportive : La Sonarges s'engage à garantir un accès transparent, équitable et non discriminatoire (Conseil de la concurrence)", 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Billetterie-sportive-La-Sonarges-s-engage-a-garantir-un-acces-transparent-equitable-et-non-discriminatoire-Conseil-de_a69508.html', 'summary': "Billetterie sportive : La Sonarges s'engage à garantir un accès transparent, équitable et non discriminatoire (Conseil de la concurrence). Le Conseil de la concurrence annonce que la Société Nationale de Réalisation et de Gestion des Équipements Sportifs (Sonarges) s’est engagée à garantir un accès transparent, équitable et non discriminatoire aux prestations de billetterie pour l’utilisation de ses infrastructures.", 'size': 4}, {'id': '62', 'title': 'Billetterie sportive : la Sonarges s’engage à garantir un accès transparent, équitable et non discriminatoire', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/billetterie-sportive-la-sonarges-sengage-a-garantir-un-acces-transparent-equitable-et-non-discriminatoire-306171/', 'summary': 'Billetterie sportive : la Sonarges s’engage à garantir un accès transparent, équitable et non discriminatoire. Le Conseil de la concurrence annonce que la Société Nationale de Réalisation et de Gestion des Équipements Sportifs (Sonarges) s’est engagée à garantir un accès transparent, équitable et non discriminatoire aux prestations de billetterie pour l’utilisation de ses infrastructures. «Après plusieurs échanges avec les parties concernées dans un esprit de', 'size': 4}, {'id': '87', 'title': 'Billetterie sportive : La Sonarges s’engage à garantir un accès transparent, équitable et non discriminatoire', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/au-royaume/billetterie-sportive-la-sonarges-sengage-a-garantir-un-acces-transparent-equitable-et-non-discriminatoire/', 'summary': 'Billetterie sportive : La Sonarges s’engage à garantir un accès transparent, équitable et non discriminatoire. Le Conseil de la concurrence annonce que la Société Nationale de Réalisation et de Gestion des Équipements Sportifs (Sonarges) s’est engagée à garantir un accès transparent, équitable et non discriminatoire aux prestations de billetterie pour l’utilisation de ses infrastructures.', 'size': 4}, {'id': '112', 'title': 'Billetteries sportives : Les engagements de la Sonarges', 'source': 'lnt.ma', 'link': 'https://lnt.ma/billetteries-sportives-les-engagements-de-la-sonarges/', 'summary': 'Billetteries sportives : Les engagements de la Sonarges. Le Conseil de la concurrence a annoncé, vendredi, que la Société Nationale de Réalisation et de Gestion des Équipements Sportifs (Sonarges) a pris un ensemble d’engagements visant à garantir un accès transparent, équitable et non discriminatoire aux prestations de billetterie liées à l’utilisation des infrastructures sportives qu’elle gère. Selon un communiqué publié à cet effet, . ', 'size': 4}], 'main_title': "Billetterie sportive : La Sonarges s'engage à garantir un accès transparent, équitable et non discriminatoire (Conseil de la concurrence)"}, {'community_id': '6', 'articles': [{'id': '41', 'title': 'CAN Féminine 2024 : Ce soir, Maroc-Zambie, choc d’entrée entre deux prétendants', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/CAN-Feminine-2024-Ce-soir-Maroc-Zambie-choc-d-entree-entre-deux-pretendants_a69500.html', 'summary': 'CAN Féminine 2024 : Ce soir, Maroc-Zambie, choc d’entrée entre deux prétendants. Les Lionnes de l’Atlas donnent ce soir le coup d’envoi de leur Coupe d’Afrique des Nations Féminine 2024 face aux redoutables Zambiennes, dans un duel explosif entre deux demi-finalistes de la dernière édition et deux finalistes du dernier tour qualificatif pour les JO de Paris.', 'size': 2}, {'id': '120', 'title': "CAN féminine: L'équipe du Maroc et de Zambie se neutralisent (2-2)", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/432043-can-feminine-lequipe-du-maroc-et-de-zambie-se-neutralisent-2-2.html', 'summary': "CAN féminine: L'équipe du Maroc et de Zambie se neutralisent (2-2). Les Lionnes de l’Atlas entament la Coupe d’Afrique des Nations féminine, sur un match nul contre la Zambie, deux buts pour chaque. Ce samedi, les joueuses de l’équipe nationale féminine de football ont affronté leurs homologues zambiennes au stade Olympique de Rabat, soit à domicile avec l’avantage du public, lors de la première journée de . ", 'size': 2}], 'main_title': 'CAN Féminine 2024 : Ce soir, Maroc-Zambie, choc d’entrée entre deux prétendants'}, {'community_id': '4', 'articles': [{'id': '64', 'title': 'Les prévisions du samedi 5 juillet', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/les-previsions-du-samedi-5-juillet-306160/', 'summary': 'Les prévisions du samedi 5 juillet. Voici les prévisions météorologiques établies par la Direction générale de la météorologie pour le samedi 5 juillet 2025. -Temps demeurant chaud sur le Sud-Est et l’intérieur des provinces du Sud, et assez chaud sur le reste des régions à l’intérieur du Royaume. -Ondées ou averses orageuses avec rafales de vent', 'size': 3}, {'id': '98', 'title': 'Prévisions météorologiques pour le dimanche 6 juillet 2025', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/previsions-meteorologiques-pour-le-dimanche-6-juillet-2025/', 'summary': 'Prévisions météorologiques pour le dimanche 6 juillet 2025. Voici les prévisions météorologiques établies par la Direction générale de la météorologie pour le dimanche 6 juillet 2025 : – Temps assez chaud à chaud sur le Sud-Est, l’intérieur des provinces du Sud, l’Oriental, le Saiss, les plaines de Tadla et Rehamna. – Nuages bas assez denses avec brume ou brouillard près des côtes. – .', 'size': 3}, {'id': '115', 'title': "Le temps qu'il fera ce dimanche 6 juillet 2025", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/432021-le-temps-quil-fera-ce-dimanche-6-juillet-2025.html', 'summary': "Le temps qu'il fera ce dimanche 6 juillet 2025. Voici les prévisions météorologiques établies par la Direction générale de la météorologie pour le dimanche 6 juillet 2025 : – Temps assez chaud à chaud sur le Sud-Est, l’intérieur des provinces du Sud, l’Oriental, le Saiss, les plaines de Tadla et Rehamna. – Nuages bas assez denses avec brume ou brouillard près des côtes. – . ", 'size': 3}], 'main_title': 'Les prévisions du samedi 5 juillet'}, {'community_id': '5', 'articles': [{'id': '99', 'title': 'Le Maroc et l’Équateur partagent les mêmes aspirations de souveraineté, d’intégration et de dialogue structuré', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/le-maroc-et-lequateur-partagent-les-memes-aspirations-de-souverainete-dintegration-et-de-dialogue-structure/', 'summary': 'Le Maroc et l’Équateur partagent les mêmes aspirations de souveraineté, d’intégration et de dialogue structuré. Bien qu’appartenant à deux espaces géographiques distincts, le Maroc et l’Équateur partagent les mêmes aspirations en matière de souveraineté, d’intégration et de dialogue structuré, a affirmé, vendredi à Rabat, le ministre des Affaires étrangères, de la Coopération africaine et des Marocains résidant à l’étranger, Nasser Bourita. Les deux pays réaffirment aujourd’hui que « le Sud peut .', 'size': 2}, {'id': '109', 'title': 'M.Bourita | Le Maroc et l’Équateur partagent les mêmes aspirations de souveraineté, d’intégration et de dialogue structuré', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/m-bourita-le-maroc-et-lequateur-partagent-les-memes-aspirations-de-souverainete-dintegration-et-de-dialogue-structure/', 'summary': 'M.Bourita | Le Maroc et l’Équateur partagent les mêmes aspirations de souveraineté, d’intégration et de dialogue structuré. Bien qu’appartenant à deux espaces géographiques distincts, le Maroc et l’Équateur partagent les mêmes aspirations en matière de souveraineté, d’intégration et de dialogue structuré, a affirmé, vendredi à Rabat, le ministre des Affaires étrangères, de la Coopération africaine et des Marocains résidant à l’étranger, Nasser Bourita. Les deux pays réaffirment aujourd’hui que “le Sud peut ', 'size': 2}], 'main_title': 'Le Maroc et l’Équateur partagent les mêmes aspirations de souveraineté, d’intégration et de dialogue structuré'}, {'community_id': '8', 'articles': [{'id': '129', 'title': 'Mondial des Clubs : Hakimi décisif, le PSG écarte le Bayern et rejoint les demi-finales', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Mondial-des-Clubs-Hakimi-decisif-le-PSG-ecarte-le-Bayern-et-rejoint-les-demi-finales_a69511.html', 'summary': 'Mondial des Clubs : Hakimi décisif, le PSG écarte le Bayern et rejoint les demi-finales. Le PSG s’est imposé face au Bayern Munich (2-0) en quart de finale du Mondial des clubs, malgré deux expulsions. Doué et Dembélé ont marqué les buts parisiens.', 'size': 2}, {'id': '141', 'title': 'Le Paris Saint-Germain d’Achraf Hakimi signe une nouvelle victoire', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/le-paris-saint-germain-dachraf-hakimi-signe-une-nouvelle-victoire.html', 'summary': 'Le Paris Saint-Germain d’Achraf Hakimi signe une nouvelle victoire. Le PSG a battu le Bayern de Munich et se qualifie en demi-finale de la Coupe du Monde des Clubs. L’article est apparu en premier sur .', 'size': 2}], 'main_title': 'Mondial des Clubs : Hakimi décisif, le PSG écarte le Bayern et rejoint les demi-finales'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
                        
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ? d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        // Fonction pour cacher le tooltip
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = '';
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
    
    
</body>




</html>
    