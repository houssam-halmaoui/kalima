<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); 
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title"> Les principales actualités des dernières 24 heures

</div>    
        <div class="header-subtitle"> Dernière mise à jour : 28/07/2025 - 18h43</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"></div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '0', 'title': '2 morts dans le crash d’un avion d’entraînement des FRA près de Fès-Saïss', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/435370-2-morts-dans-le-crash-dun-avion-dentrainement-des-fra-pres-de-fes-saiss.html', 'summary': '2 morts dans le crash d’un avion d’entraînement des FRA près de Fès-Saïss. Un avion d’instruction de type Alphajet, destiné à la formation des pilotes, s’est écrasé, lundi à 08H48 au niveau de l’aéroport de Fès-Saïss, entraînant la mort de deux officiers des Forces Royales Air de grades Commandant et Capitaine. Les défunts étaient en mission d’entraînement avant que l’accident ne se produise dans des circonstances indéterminées, indique . ', 'size': 5}, {'id': '100', 'title': 'Crash d’un avion d’entraînement des Forces Royales Air au niveau de l’aéroport de Fès-Saïss', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/crash-dun-avion-dentrainement-des-forces-royales-air-au-niveau/', 'summary': 'Crash d’un avion d’entraînement des Forces Royales Air au niveau de l’aéroport de Fès-Saïss. Un avion d’instruction de type Alphajet, destiné à la formation des pilotes, s’est écrasé, lundi à 08H48 au niveau de l’aéroport de Fès-Saïss, entraînant la mort de deux officiers des Forces Royales Air de grades Commandant et Capitaine. Les défunts étaient en mission d’entraînement avant que l’accident ne se produise dans des circonstances indéterminées, indique .', 'size': 5}, {'id': '121', 'title': 'Maroc : crash d’un avion d’entraînement des Forces Royales Air au niveau de l’aéroport de Fès-Saïss', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/maroc-crash-dun-avion-dentrainement-des-forces-royales-air-au-niveau-de-laeroport-de-fes-saiss.html', 'summary': 'Maroc : crash d’un avion d’entraînement des Forces Royales Air au niveau de l’aéroport de Fès-Saïss. Un avion d’instruction de type Alphajet, destiné à la formation des pilotes, s’est écrasé, lundi à 08H48 au niveau de l’aéroport de Fès-Saïss, entraînant la mort de deux officiers des Forces Royales Air de grades Commandant et Capitaine. Les défunts étaient en mission d’entraînement avant que l’accident ne se produise dans des circonstances indéterminées, indique . L’article est apparu en premier sur .', 'size': 5}, {'id': '131', 'title': 'Crash d’un avion d’entraînement des FAR au niveau de l’aéroport de Fès-Saïss', 'source': 'lnt.ma', 'link': 'https://lnt.ma/crash-dun-avion-dentrainement-des-far-au-niveau-de-laeroport-de-fes-saiss/', 'summary': 'Crash d’un avion d’entraînement des FAR au niveau de l’aéroport de Fès-Saïss. Un avion d’instruction de type Alphajet, destiné à la formation des pilotes, s’est écrasé, lundi à 08H48 au niveau de l’aéroport de Fès-Saïss, entraînant la mort de deux officiers des Forces Royales Air de grades Commandant et Capitaine. Les défunts étaient en mission d’entraînement avant que l’accident ne se produise dans des circonstances indéterminées, indique . ', 'size': 5}, {'id': '189', 'title': 'Deux officiers des FRA morts dans le crash d’un avion d’entraînement à l’aéroport de Fès-Saïss', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/officiel-deux-officiers-morts-dans-le-crash-dun-avion-dentrainement-a-laeroport-de-fes-saiss-307529/', 'summary': 'Deux officiers des FRA morts dans le crash d’un avion d’entraînement à l’aéroport de Fès-Saïss. Un avion d’instruction de type Alphajet, destiné à la formation des pilotes, s’est écrasé, lundi à 08H48 au niveau de l’aéroport de Fès-Saïss, entraînant la mort de deux officiers des Forces Royales Air (FRA), de grades Commandant et Capitaine. Les défunts étaient en mission d’entraînement avant que l’accident ne se', 'size': 5}], 'main_title': '2 morts dans le crash d’un avion d’entraînement des FRA près de Fès-Saïss'}, {'community_id': '5', 'articles': [{'id': '1', 'title': 'Programme TSP Hub : OCP Nutricrops franchit le cap des 5 millions de tonnes de TSP', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/435355-programme-tsp-hub-ocp-nutricrops-franchit-le-cap-des-5-millions-de-tonnes-de-tsp.html', 'summary': 'Programme TSP Hub : OCP Nutricrops franchit le cap des 5 millions de tonnes de TSP. Lancé sur la plateforme industrielle de Jorf Lasfar, le TSP Hub s’impose comme un levier clé de la transformation industrielle d’OCP Nutricrops. Alliant montée en capacité et flexibilité opérationnelle, ce programme stratégique répond aux défis d’une agriculture moderne, exigeante et personnalisée, en offrant une production d’engrais adaptée aux besoins variés et croissants du marché. Porté . ', 'size': 4}, {'id': '59', 'title': "OCP Nutricrops franchit le cap des 5 millions de tonnes d'engrais", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/07/28/ocp-nutricrops-franchit-le-cap-des-5-millions-de-tonnes-dengrais_1944117/', 'summary': "OCP Nutricrops franchit le cap des 5 millions de tonnes d'engrais. OCP Nutricrops a franchi un cap industriel majeur en dépassant les 5 millions de tonnes de capacité de production de TSP (Triple Super Phosphate), grâce au lancement du TSP Hub, un programme stratégique mis en œuvre sur la plateforme de Jorf Lasfar. 🧭 Ce qu’il s’est passé Ce projet, piloté par la SBU Manufacturing en.", 'size': 5}, {'id': '188', 'title': 'OCP Nutricrops dépasse les 5 millions de tonnes de production de «Triple Super Phosphate»', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/ocp-nutricrops-depasse-les-5-millions-de-tonnes-de-production-de-triple-super-phosphate-307535/', 'summary': 'OCP Nutricrops dépasse les 5 millions de tonnes de production de «Triple Super Phosphate». OCP Nutricrops, filiale du groupe OCP, a franchi le cap des 5 millions de tonnes de capacité de production de TSP (Triple Super Phosphate), grâce à la mise en œuvre de son programme stratégique « TSP Hub », lancé sur la plateforme industrielle de Jorf Lasfar. Avec la mise en service des', 'size': 4}, {'id': '260', 'title': 'Maroc/Engrais : OCP Nutricrops dépasse les 5 millions de tonnes de production de Triple Super Phosphate', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/maroc-engrais-ocp-nutricrops-depasse-les-5-millions-de-tonnes-de-production-de-triple-super-phosphate.html', 'summary': 'Maroc/Engrais : OCP Nutricrops dépasse les 5 millions de tonnes de production de Triple Super Phosphate. OCP Nutricrops, filiale du groupe OCP, a franchi le cap des 5 millions de tonnes de capacité de production de TSP (Triple Super Phosphate), grâce à la mise en œuvre de son programme stratégique « TSP Hub », lancé sur la plateforme industrielle de Jorf Lasfar. Avec la mise en service des deux premières lignes, chacune dotée . L’article est apparu en premier sur .', 'size': 5}, {'id': '265', 'title': 'Jorf Lasfar | OCP Nutricrops franchit la barre des 5 millions de tonnes de TSP', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/jorf-lasfar-ocp-nutricrops-franchit-la-barre-des-5-millions-de-tonnes-de-tsp/', 'summary': 'Jorf Lasfar | OCP Nutricrops franchit la barre des 5 millions de tonnes de TSP. OCP Nutricrops, filiale du groupe OCP, a franchi le cap des 5 millions de tonnes de capacité de production de TSP (Triple Super Phosphate), grâce à la mise en œuvre de son programme stratégique “TSP Hub”, lancé sur la plateforme industrielle de Jorf Lasfar. Avec la mise en service des deux premières lignes, chacune dotée ', 'size': 5}], 'main_title': "OCP Nutricrops franchit le cap des 5 millions de tonnes d'engrais"}, {'community_id': '15', 'articles': [{'id': '8', 'title': 'Bourse de Casablanca : ouverture en territoire négatif', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/435339-bourse-de-casablanca-ouverture-en-territoire-negatif-15.html', 'summary': 'Bourse de Casablanca : ouverture en territoire négatif. La Bourse de Casablanca a entamé ses échanges en baisse lundi, son indice principal, le MASI, cédant 0,02% à 19.400,13 points (pts). Le MASI 20, regroupant les 20 valeurs les plus liquides, reculait de 0,02% à 1.593,09 pts, tandis que le MASI ESG, indice des entreprises ayant la meilleure notation ESG publiée par Moody’s ESG . ', 'size': 2}, {'id': '108', 'title': 'La Bourse de Casablanca débute en territoire négatif', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/la-bourse-de-casablanca-debute-en-territoire-negatif/', 'summary': 'La Bourse de Casablanca débute en territoire négatif. La Bourse de Casablanca a entamé ses échanges en baisse lundi, son indice principal, le MASI, cédant 0,02% à 19.400,13 points (pts). Le MASI 20, regroupant les 20 valeurs les plus liquides, reculait de 0,02% à 1.593,09 pts, tandis que le MASI ESG, indice des entreprises ayant la meilleure notation ESG publiée par Moody’s ESG .', 'size': 2}], 'main_title': 'Bourse de Casablanca : ouverture en territoire négatif'}, {'community_id': '6', 'articles': [{'id': '16', 'title': 'Infantino émerveillé par le Stade Prince Moulay Abdellah : « Un bijou du football mondial »', 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/le-stade-moulay-abdellah-bijou-salue-par-gianni-infantino/293598', 'summary': 'Infantino émerveillé par le Stade Prince Moulay Abdellah : « Un bijou du football mondial ». Gianni Infantino n’a pas mâché ses mots. En déplacement à Rabat pour l’inauguration du bureau Afrique de la FIFA, le président de l’instance mondiale du football s’est offert une v.', 'size': 2}, {'id': '51', 'title': '\u200bGianni Infantino séduit par le stade Moulay Abdallah : « Un bijou qui propulse le Maroc parmi l’élite du football mondial »', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/\u200bGianni-Infantino-seduit-par-le-stade-Moulay-Abdallah-Un-bijou-qui-propulse-le-Maroc-parmi-l-elite-du-football-mondial_a70331.html', 'summary': '\u200bGianni Infantino séduit par le stade Moulay Abdallah : « Un bijou qui propulse le Maroc parmi l’élite du football mondial ». À Rabat, Infantino découvre le futur stade Moulay Abdellah, qualifié de « bijou » architectural, à l’image d’un Maroc tourné vers l’avenir. Détails.', 'size': 2}], 'main_title': 'Infantino émerveillé par le Stade Prince Moulay Abdellah : « Un bijou du football mondial »'}, {'community_id': '11', 'articles': [{'id': '20', 'title': 'Arrivée au Maroc de la Première Dame de la République du Salvador Mme Gabriela Rodriguez De Bukele', 'source': 'lematin.ma', 'link': 'https://lematin.ma/videos/arrivee-au-maroc-de-la-premiere-dame-de-la-republique-du-salvador/293652', 'summary': 'Arrivée au Maroc de la Première Dame de la République du Salvador Mme Gabriela Rodriguez De Bukele. La Première Dame de la République du Salvador, Mme Gabriela Rodriguez De Bukele, est arrivée, dimanche à Salé, pour une visite de travail au Maroc.', 'size': 5}, {'id': '142', 'title': "Lalla Asmaa préside un déjeuner offert par le Roi en l'honneur de la Première Dame du Salvador", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/435418-lalla-asmaa-preside-un-dejeuner-offert-par-le-roi-en-lhonneur-de-la-premiere-dame-du-salvador.html', 'summary': "Lalla Asmaa préside un déjeuner offert par le Roi en l'honneur de la Première Dame du Salvador. La Princesse Lalla Asmaa a présidé, lundi au Palais des Hôtes Royaux à Rabat, un déjeuner offert par le Roi Mohammed VI, en l’honneur de la Première Dame de la République du Salvador, Gabriela Rodriguez De Bukele, qui effectue une visite de travail dans le Royaume. Ont été conviés à ce déjeuner, Mohamed Saad Berrada, . ", 'size': 5}, {'id': '209', 'title': 'SAR la Princesse Lalla Asmaa et la Première Dame de la République du Salvador visitent le siège de la Fondation Lalla Asmaa', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/actualite/sar-la-princesse-lalla-asmaa-et-la-premiere-dame-de-la-republique-du-salvador-visitent-le-siege-de-la-fondation-lalla-asmaa', 'summary': 'SAR la Princesse Lalla Asmaa et la Première Dame de la République du Salvador visitent le siège de la Fondation Lalla Asmaa. Son Altesse Royale la Princesse Lalla Asmaa, Présidente de la Fondation Lalla Asmaa, et la Première Dame de la République du Salvador, Mme Gabriela Rodriguez De Bukele, ont visité, lundi à Rabat, le siège de la Fondation. La visite de Mme Gabriela De Bukele à la Fondation Lalla Asmaa, reconnue comme une référence nationale et .', 'size': 5}, {'id': '233', 'title': 'S.A.R la Princesse Lalla Asmaa préside un déjeuner royal en l’honneur de la Première Dame du Salvador', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/s-a-r-la-princesse-lalla-asmaa-preside-un-dejeuner-royal-en-lhonneur/', 'summary': 'S.A.R la Princesse Lalla Asmaa préside un déjeuner royal en l’honneur de la Première Dame du Salvador. Son Altesse Royale la Princesse Lalla Asmaa a présidé, lundi au Palais des Hôtes Royaux à Rabat, un déjeuner offert par Sa Majesté le Roi Mohammed VI, en l’honneur de la Première Dame de la République du Salvador, Mme Gabriela Rodriguez De Bukele, qui effectue une visite de travail dans le Royaume. Ont été conviés .', 'size': 5}, {'id': '258', 'title': 'La Princesse Lalla Asmaa et la première dame du Salvador visitent la Fondation Lalla Asmaa', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/la-princesse-lalla-asmaa-et-la-premiere-dame-du-salvador-visitent-la-fondation-lalla-asmaa.html', 'summary': 'La Princesse Lalla Asmaa et la première dame du Salvador visitent la Fondation Lalla Asmaa. Son Altesse Royale la Princesse Lalla Asmaa, Présidente de la Fondation Lalla Asmaa, et la Première Dame de la République du Salvador, Mme Gabriela Rodriguez De Bukele, ont visité lundi à Rabat, le siège de la Fondation. L’article est apparu en premier sur .', 'size': 5}], 'main_title': 'Arrivée au Maroc de la Première Dame de la République du Salvador Mme Gabriela Rodriguez De Bukele'}, {'community_id': '10', 'articles': [{'id': '34', 'title': 'Saisie de plus de 4 tonnes de chira au port Tanger Med', 'source': 'lematin.ma', 'link': 'https://lematin.ma/regions/saisie-de-plus-de-4-tonnes-de-chira-au-port-tanger-med/293470', 'summary': 'Saisie de plus de 4 tonnes de chira au port Tanger Med. Les opérations conjointes de contrôle menées par les services de la Sûreté nationale et de la Douane ont permis la saisie de cette importante cargaison de stupéfiants, soigneusemen.', 'size': 3}, {'id': '62', 'title': 'Plus de 4 tonnes de cannabis saisies au port de Tanger Med', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/07/28/plus-de-4-tonnes-de-cannabis-saisies-au-port-de-tanger-med_1944086/', 'summary': 'Plus de 4 tonnes de cannabis saisies au port de Tanger Med. Une tentative de trafic international de drogue a été à nouveau déjouée le 27 juillet par les services de sécurité du port de Tanger Med. Ce qu’il s’est passé Les services conjoints de la Sûreté nationale et de la Douane ont saisi 4,374 tonnes de chira dissimulées dans un chargement de fruits à bord d’un.', 'size': 3}, {'id': '98', 'title': 'Tanger : Mise en échec d’une tentative de trafic de plus de 4 tonnes de chira', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/au-royaume/tanger-mise-en-echec-dune-tentative-de-trafic-de-plus-de-4-tonnes-de-chira/', 'summary': 'Tanger : Mise en échec d’une tentative de trafic de plus de 4 tonnes de chira. Les opérations conjointes de contrôle menées par les services de la Sûreté nationale et de la Douane ont permis la saisie de cette importante cargaison de stupéfiants, soigneusement dissimulée dans un chargement de fruits transporté par une remorque tirée par un camion immatriculé au Maroc, en partance pour un port européen.', 'size': 4}, {'id': '133', 'title': 'Tanger: mise en échec d’une tentative de trafic de plus de 4 tonnes de chira', 'source': 'lnt.ma', 'link': 'https://lnt.ma/tanger-mise-en-echec-dune-tentative-de-trafic-de-plus-de-4-tonnes-de-chira/', 'summary': 'Tanger: mise en échec d’une tentative de trafic de plus de 4 tonnes de chira. Les éléments de la Sûreté nationale et de la Douane opérant au port de Tanger Med ont mis en échec, aux premières heures de dimanche, une tentative de trafic de 4,374 tonnes de chira à bord d’un camion de transport international de marchandises. Les opérations conjointes de contrôle menées par les services de la Sûreté . ', 'size': 4}], 'main_title': 'Tanger : Mise en échec d’une tentative de trafic de plus de 4 tonnes de chira'}, {'community_id': '7', 'articles': [{'id': '58', 'title': "Tournée nord-africaine : le conseiller de Trump se rend au Maroc après l'Algérie", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/07/28/tournee-nord-africaine-le-conseiller-de-trump-se-rend-au-maroc-apres-lalgerie_1944114/', 'summary': "Tournée nord-africaine : le conseiller de Trump se rend au Maroc après l'Algérie. L’annonce officielle de la visite du conseiller du président américain Donald Trump, Masad Boulos, à Rabat est attendue dans les prochaines heures, après l’étape algérienne de sa tournée nord-africaine, qui l’a également mené en Tunisie et en Libye. Ce qu’il s’est passé Masad Boulos, conseiller du président américain Donald Trump pour les affaires arabes, du.", 'size': 2}, {'id': '173', 'title': "Tournée maghrébine: le conseiller de Trump Massad Boulos s'entretient avec Tebboune", 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Tournee-maghrebine-le-conseiller-de-Trump-Massad-Boulos-s-entretient-avec-Tebboune_a70349.html', 'summary': "Tournée maghrébine: le conseiller de Trump Massad Boulos s'entretient avec Tebboune. Lors des six derniers jours, le conseiller du président américain Donald Trump pour l’Afrique, Massad Boulos, a effectué des visites en Tunisie, en Libye et en Algérie dans le cadre de sa tournée maghrébine annoncée depuis avril. Il est donc plus que probable que le Maroc soit sa prochaine destination.", 'size': 2}], 'main_title': "Tournée nord-africaine : le conseiller de Trump se rend au Maroc après l'Algérie"}, {'community_id': '9', 'articles': [{'id': '61', 'title': "Israël libère le journaliste marocain arrêté lors d'une expédition humanitaire vers Gaza", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/07/28/israel-libere-le-journaliste-marocain-arrete-lors-dune-expedition-humanitaire-vers-gaza_1944089/', 'summary': "Israël libère le journaliste marocain arrêté lors d'une expédition humanitaire vers Gaza. Les autorités israéliennes ont libéré, ce dimanche, le journaliste marocain Mohamed El Bakkali, correspondant d’Al Jazeera, ainsi que les membres de l’équipage du navire Handala, arrêtés après l’interception du bateau dans les eaux internationales. Ce qu’il s’est passé Le navire participait à une mission humanitaire et solidaire à destination de la bande de Gaza. Selon.", 'size': 2}, {'id': '104', 'title': 'Israël intercepte le navire humanitaire Handala en route vers Gaza', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/israel-intercepte-le-navire-humanitaire-handala-en-route-vers-gaza/', 'summary': 'Israël intercepte le navire humanitaire Handala en route vers Gaza. Un navire affrété par la coalition Freedom Flotilla, transportant de l’aide humanitaire à destination de la bande de Gaza, a été intercepté par les forces israéliennes samedi soir en Méditerranée. L’incident, survenu en haute mer, suscite de vives réactions dans plusieurs pays, notamment en lien avec la présence de journalistes à bord, dont un ressortissant .', 'size': 2}], 'main_title': "Israël libère le journaliste marocain arrêté lors d'une expédition humanitaire vers Gaza"}, {'community_id': '14', 'articles': [{'id': '107', 'title': 'Droits de douane : L’accord USA/UE apporte «\xa0de la certitude en ces temps incertains\xa0»', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/droits-de-douane-laccord-usa-ue-apporte-de-la-certitude/', 'summary': 'Droits de douane : L’accord USA/UE apporte « de la certitude en ces temps incertains ». L’accord conclu dimanche en Écosse entre le président américain, Donald Trump, et la présidente de la Commission européenne (CE), Ursula von der Leyen, sur les droits de douane ciblant les exportations européennes vers les États-Unis, apporte « de la certitude en ces temps incertains », s’est félicitée la cheffe de la CE. Cet accord « assure stabilité et .', 'size': 2}, {'id': '124', 'title': 'Droits de douane : L’accord USA/UE apporte «\xa0de la certitude en ces temps incertains\xa0» (Von der Leyen)', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/droits-de-douane-laccord-usa-ue-apporte-de-la-certitude-en-ces-temps-incertains-von-der-leyen.html', 'summary': 'Droits de douane : L’accord USA/UE apporte « de la certitude en ces temps incertains » (Von der Leyen). L’accord conclu dimanche en Écosse entre le président américain Donald Trump et la présidente de la Commission européenne (CE) Ursula von der Leyen, sur les droits de douane ciblant les exportations européennes vers les États-Unis, apporte « de la certitude en ces temps incertains », s’est félicitée la cheffe de la CE. Cet accord « assure stabilité et . L’article est apparu en premier sur .', 'size': 2}], 'main_title': 'Droits de douane : L’accord USA/UE apporte «\xa0de la certitude en ces temps incertains\xa0»'}, {'community_id': '12', 'articles': [{'id': '144', 'title': 'CAN féminine : le Maroc saisit la CAF après le scandale arbitral de la finale', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/435411-can-feminine-le-maroc-saisit-la-caf-apres-le-scandale-arbitral-de-la-finale.html', 'summary': 'CAN féminine : le Maroc saisit la CAF après le scandale arbitral de la finale. Après le scandale arbitral de la finale de la Coupe d’Afrique des Nations (CAN) féminine, samedi, entre le Maroc et le Nigeria (2-3), la Fédération Royale marocaine de football (FRMF), a décidé de saisir la Confédération africaine de football (CAF) concernant notamment l’usage controversé de la VAR. Une source au sein de la FRMF a confirmé à . ', 'size': 2}, {'id': '168', 'title': '\u200bCAN Féminine 2024 : La FRMF conteste l’arbitrage de la finale face au Nigeria', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/\u200bCAN-Feminine-2024-La-FRMF-conteste-l-arbitrage-de-la-finale-face-au-Nigeria_a70354.html', 'summary': '\u200bCAN Féminine 2024 : La FRMF conteste l’arbitrage de la finale face au Nigeria. La FRMF aurait déposé une plainte auprès de la CAF après la finale de la CAN féminine 2024, dénonçant des décisions arbitrales jugées injustes lors du match Maroc–Nigeria.', 'size': 2}], 'main_title': 'CAN féminine : le Maroc saisit la CAF après le scandale arbitral de la finale'}, {'community_id': '16', 'articles': [{'id': '146', 'title': 'Décès de Hicham Mandari : le parquet de Casablanca dément les vidéos en ligne', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/435408-deces-de-hicham-mandari-le-parquet-de-casablanca-dement-les-videos-en-ligne.html', 'summary': 'Décès de Hicham Mandari : le parquet de Casablanca dément les vidéos en ligne. Le procureur du Roi près le tribunal de première instance de Casablanca a formellement démenti les informations relayées dans des vidéos en ligne concernant l’affaire du décès de Hicham Mandari, les qualifiant de « totalement infondées ». Dans un communiqué publié ce lundi 28 juillet, le parquet de Casablanca a indiqué que les enregistrements circulant . ', 'size': 5}, {'id': '191', 'title': 'Affaire Hicham Mandari : 5 ans de prison pour son frère lié à des vidéos trompeuses', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/172937/affaire-hicham-mandari-prison-pour.html', 'summary': 'Affaire Hicham Mandari : 5 ans de prison pour son frère lié à des vidéos trompeuses. Le tribunal correctionnel de première instance de Casablanca a condamné, le 14 juillet 2025, le frère de Hicham Mandari Tribunal à 5 ans de prison ferme, assortie d’une amende de 50 000 dirhams pour son rôle dans la diffusion de vidéos trompeuses, concernant le défunt. Dans un communiqué diffusé ce 28 juillet, le procureur du roi a affirmé que les séquences publiées sur un site contenant des données et des allégations concernant l’affaire «n’ont aucun lien avec la réalité».', 'size': 4}, {'id': '223', 'title': 'Décès de Hicham Mandari : Le parquet de Casablanca dément les vidéos publiées sur le web', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/au-royaume/deces-de-hicham-mandari-le-parquet-de-casablanca-dement-les-videos-publiees-sur-le-web/', 'summary': 'Décès de Hicham Mandari : Le parquet de Casablanca dément les vidéos publiées sur le web. Le Procureur du Roi près le tribunal correctionnel de première instance de Casablanca a affirmé que les séquences vidéo publiées sur un site électronique contenant des données et des allégations concernant l’affaire du décès du dénommé de son vivant "Hicham Mandari" "n\'ont aucun lien avec la réalité". Voici les explications en détail.', 'size': 4}, {'id': '231', 'title': 'Les séquences vidéo concernant l’affaire du décès de «\xa0Hicham Mandari\xa0» n’ont aucun lien avec la réalité', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/les-sequences-video-concernant-laffaire-du-deces-de-hicham-mandari/', 'summary': 'Les séquences vidéo concernant l’affaire du décès de « Hicham Mandari » n’ont aucun lien avec la réalité. Le Procureur du Roi près le tribunal correctionnel de première instance de Casablanca a affirmé que les séquences vidéo publiées sur un site électronique contenant des données et des allégations concernant l’affaire du décès du dénommé de son vivant « Hicham Mandari » « n’ont aucun lien avec la réalité ». Ces enregistrements vidéo ont fait l’objet d’une enquête .', 'size': 5}, {'id': '256', 'title': 'Maroc : Les séquences vidéo concernant l’affaire du décès de «\xa0Hicham Mandari\xa0» n’ont aucun lien avec la réalité (Procureur du Roi)', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/maroc-les-sequences-video-concernant-laffaire-du-deces-de-hicham-mandari-nont-aucun-lien-avec-la-realite-procureur-du-roi.html', 'summary': 'Maroc : Les séquences vidéo concernant l’affaire du décès de « Hicham Mandari » n’ont aucun lien avec la réalité (Procureur du Roi). Le Procureur du Roi près le tribunal correctionnel de première instance de Casablanca a affirmé que les séquences vidéo publiées sur un site électronique contenant des données et des allégations concernant l’affaire du décès du dénommé de son vivant « Hicham Mandari » « n’ont aucun lien avec la réalité ». Ces enregistrements vidéo ont fait l’objet d’une enquête . L’article est apparu en premier sur .', 'size': 5}], 'main_title': 'Décès de Hicham Mandari : le parquet de Casablanca dément les vidéos en ligne'}, {'community_id': '1', 'articles': [{'id': '154', 'title': 'Saham Bank lance sa filiale Paiements pour accompagner la digitalisation du commerce', 'source': 'lematin.ma', 'link': 'https://lematin.ma/economie/saham-bank-lance-saham-paiements-pour-digitaliser-le-commerce-au-maroc/293742', 'summary': 'Saham Bank lance sa filiale Paiements pour accompagner la digitalisation du commerce. Saham Paiements s’adresse aux professionnels souhaitant intégrer des outils de paiement électronique à leurs activités. Elle propose des terminaux adaptés à différents usages – fix.', 'size': 2}, {'id': '196', 'title': 'Saham Bank lance sa solution de paiement électronique', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/172917/saham-bank-lance-solution-paiement.html', 'summary': 'Saham Bank lance sa solution de paiement électronique. Saham Bank a récemment lancé Saham Paiements, une nouvelle filiale spécialisée dans les solutions de paiement électronique avancées. Cette initiative stratégique répond à la demande croissante de méthodes de paiement numériques et aux besoins changeants des consommateurs marocains.', 'size': 3}, {'id': '224', 'title': 'Paiement électronique : Saham Bank lance sa filiale Saham Paiements', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/argent/paiement-electronique-saham-bank-lance-sa-filiale-saham-paiements/', 'summary': 'Paiement électronique : Saham Bank lance sa filiale Saham Paiements. Saham Bank lance sa filiale Saham Paiements pour accélérer l’adoption des solutions de paiement électronique au Maroc.', 'size': 2}], 'main_title': 'Saham Bank lance sa solution de paiement électronique'}, {'community_id': '13', 'articles': [{'id': '157', 'title': '« Enseignement Plus » : Tamwilcom et Al Barid Bank lancent un crédit garanti pour les étudiants du privé', 'source': 'lematin.ma', 'link': 'https://lematin.ma/enseignement/tamwilcom-et-al-barid-bank-lancent-un-credit-garanti-pour-les-etudiants/293704', 'summary': '« Enseignement Plus » : Tamwilcom et Al Barid Bank lancent un crédit garanti pour les étudiants du privé. Les étudiants marocains inscrits dans des établissements privés auront désormais la possibilité de financer leurs frais de scolarité via un crédit bancaire garanti. Ce mécanisme, b.', 'size': 2}, {'id': '227', 'title': 'Tamwilcom et Al Barid Bank s’allient pour promouvoir l’accès des étudiants au financement', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/argent/tamwilcom-et-al-barid-bank-sallient-pour-promouvoir-lacces-des-etudiants-au-financement/', 'summary': 'Tamwilcom et Al Barid Bank s’allient pour promouvoir l’accès des étudiants au financement. Ce dispositif, mis en place dans le cadre de ce partenariat, vise à garantir les crédits bancaires accordés aux étudiants inscrits dans les établissements privés d’enseignement supérieur, afin de financer, en tout ou en partie, leurs frais de scolarité.', 'size': 2}], 'main_title': '« Enseignement Plus » : Tamwilcom et Al Barid Bank lancent un crédit garanti pour les étudiants du privé'}, {'community_id': '2', 'articles': [{'id': '162', 'title': '«Airports of Morocco» : L’ONDA modernise son image pour accompagner la Vision 2030', 'source': 'lematin.ma', 'link': 'https://lematin.ma/economie/airports-of-morocco-londa-modernise-son-image/293680', 'summary': '«Airports of Morocco» : L’ONDA modernise son image pour accompagner la Vision 2030. L’Office National des Aéroports (ONDA) franchit une nouvelle étape dans sa mutation stratégique avec le lancement d’une identité visuelle profondément renouvelée. Cette démarche s’.', 'size': 5}, {'id': '202', 'title': 'Maroc\xa0: Dans une nouvelle identité visuelle, l’ONDA dévoile son zellige', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/172893/maroc-dans-nouvelle-identite-visuelle.html', 'summary': 'Maroc : Dans une nouvelle identité visuelle, l’ONDA dévoile son zellige. L’Office national des aéroports (ONDA) lance une nouvelle identité visuelle, qui se veut «au croisement de la modernité, de l’excellence opérationnelle et du rayonnement national, en ligne avec les grandes ambitions de la Vision 2030 et du Maroc d’après 2030». En d’autres termes, il s’agit d’«une architecture de marque repensée et structurée» pour «incarner l’expérience passager» et le lien avec le nouveau naming «Airports of Morocco ÙØ·Ø§Ø±Ø§Øª Ø§Ù„ÙØºØ±Ø¨».', 'size': 3}, {'id': '229', 'title': 'Nouveau look pour l’ONDA', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/au-royaume/scans/nouveau-look-pour-londa/', 'summary': 'Nouveau look pour l’ONDA. Le déploiement de la nouvelle identité visuelle débutera dès ce mois d’août 2025, sur l’ensemble des supports physiques et numériques dans tous les aéroports du Royaume, indique un communiqué de l’Office national des aéroports.', 'size': 2}, {'id': '259', 'title': 'Maroc: l’ONDA dévoile sa nouvelle identité visuelle', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/maroc-londa-devoile-sa-nouvelle-identite-visuelle.html', 'summary': 'Maroc: l’ONDA dévoile sa nouvelle identité visuelle. Portée par la stratégie « Aéroports 2030 », l’Office National des Aéroports amorce un nouveau virage décisif avec le lancement d’une nouvelle identité visuelle. Une mue profonde, au croisement de la modernité, de l’excellence opérationnelle et du rayonnement national, en ligne avec les grandes ambitions de la Vision 2030 et du Maroc d’après 2030. L’article est apparu en premier sur .', 'size': 4}, {'id': '264', 'title': 'Aéroports 2030 | L’ONDA lance une nouvelle identité visuelle', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/aeroports-2030-londa-lance-une-nouvelle-identite-visuelle/', 'summary': 'Aéroports 2030 | L’ONDA lance une nouvelle identité visuelle. L’Office National des Aéroports (ONDA) amorce un nouveau virage décisif avec le lancement d’une nouvelle identité visuelle. En droite ligne avec la vision stratégique du Royaume et les échéances internationales majeures comme la CAN 2025 et la Coupe du Monde 2030, l’Office initie une profonde transformation à travers sa stratégie “Aéroports 2030” qui s’accompagne aujourd’hui ', 'size': 3}], 'main_title': '«Airports of Morocco» : L’ONDA modernise son image pour accompagner la Vision 2030'}, {'community_id': '8', 'articles': [{'id': '182', 'title': '8 millions de m³ d’eau dessalée par an : un plan d’urgence pour Casablanca-Settat', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/07/28/8-millions-de-m%c2%b3-deau-dessalee-par-an-un-plan-durgence-pour-casablanca-settat_1944153/', 'summary': '8 millions de m³ d’eau dessalée par an : un plan d’urgence pour Casablanca-Settat. La Société Régionale Multiservices (SRM) Casablanca-Settat accélère la réalisation des stations monoblocs pour faire face aux défis que représente le stress hydrique, à travers notamment un programme ambitieux qui comprend la réalisation de 28 stations monoblocs de dessalement de l’eau de mer et de déminéralisation des eaux saumâtres, a indiqué un communiqué de la SRM.', 'size': 3}, {'id': '199', 'title': 'Eau potable : La région Casablanca-Settat accélère son plan d’urgence avec 28 stations de dessalement', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/172906/potable-region-casablanca-settat-accelere-plan.html', 'summary': 'Eau potable : La région Casablanca-Settat accélère son plan d’urgence avec 28 stations de dessalement. La Société Régionale Multiservices (SRM) Casablanca-Settat accélère la réalisation des stations monoblocs pour faire face aux défis que représente le stress hydrique, à travers notamment un programme qui comprend la réalisation de 28 stations monoblocs de dessalement de l’eau de mer et de déminéralisation des eaux saumâtres, a indiqué un communiqué de la SRM Casablanca-Settat.', 'size': 3}, {'id': '263', 'title': 'La SRM Casablanca-Settat accélère la réalisation des stations monoblocs', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/la-srm-casablanca-settat-accelere-la-realisation-des-stations-monoblocs/', 'summary': 'La SRM Casablanca-Settat accélère la réalisation des stations monoblocs. La Société Régionale Multiservices (SRM) Casablanca-Settat accélère la réalisation des stations monoblocs pour faire face aux défis que représente le stress hydrique, à travers notamment un programme ambitieux qui comprend la réalisation de 28 stations monoblocs de dessalement de l’eau de mer et de déminéralisation des eaux saumâtres, a indiqué un communiqué de la SRM Casablanca-Settat. “La ', 'size': 3}], 'main_title': '8 millions de m³ d’eau dessalée par an : un plan d’urgence pour Casablanca-Settat'}, {'community_id': '3', 'articles': [{'id': '212', 'title': 'Inauguration à Casablanca du parc industriel  Ahl Loghlam', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/economie/inauguration-a-casablanca-du-parc-industriel-ahl-loghlam', 'summary': 'Inauguration à Casablanca du parc industriel Ahl Loghlam. Le parc industriel Ahl Loghlam, dédié aux industries non polluantes du cuir et du textile, a été inauguré, jeudi à Casablanca, pour promouvoir un développement industriel propre et intégré dans la région de Casablanca-Settat. La cérémonie d’inauguration s’est déroulée en présence notamment du ministre de l’industrie et du commerce, Ryad Mezzour, du wali de la .', 'size': 2}, {'id': '234', 'title': 'Casablanca inaugure le parc industriel dédié au cuir et au textile non polluant', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/casablanca-inaugure-le-parc-industriel-dedie-au-cuir-et-au-textile-non-polluant/', 'summary': 'Casablanca inaugure le parc industriel dédié au cuir et au textile non polluant. Casablanca a inauguré, le 24 juillet 2025, un nouveau parc industriel dans le quartier d’Ahl Loghlam, destiné à relancer les industries du cuir et du textile dans une logique durable. Il s’agit du premier parc industriel réalisé directement par la région de Casablanca-Settat, qui ambitionne de promouvoir des zones industrielles non polluantes, intégrées et accessibles. .', 'size': 2}], 'main_title': 'Inauguration à Casablanca du parc industriel  Ahl Loghlam'}, {'community_id': '4', 'articles': [{'id': '225', 'title': 'Addis-Abeba: Le Maroc appelle à la création d’un Fonds international dédié à la sécurité alimentaire en Afrique', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/pouvoirs/diplomatie/addis-abeba-le-maroc-appelle-a-la-creation-dun-fonds-international-dedie-a-la-securite-alimentaire-en-afrique/', 'summary': 'Addis-Abeba: Le Maroc appelle à la création d’un Fonds international dédié à la sécurité alimentaire en Afrique. Ce fonds vise à renforcer la souveraineté alimentaire du continent en soutenant une transformation inclusive, durable et résiliente des systèmes alimentaires, alignée avec les ambitions nationales marocaines et les engagements régionaux en faveur d’une agriculture durable et d’une meilleure gouvernance.', 'size': 3}, {'id': '232', 'title': 'Sommet des systèmes alimentaires : le Maroc plaide pour un Fonds international pour l’Afrique', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/sommet-des-systemes-alimentaires-le-maroc-plaide/', 'summary': 'Sommet des systèmes alimentaires : le Maroc plaide pour un Fonds international pour l’Afrique. Le Maroc a appelé, lundi à Addis-Abeba, à la création d’un Fonds international dédié à la sécurité alimentaire en Afrique destiné à renforcer la souveraineté alimentaire du continent. Le Royaume « appelle à la création d’un Fonds international dédié à la sécurité alimentaire en Afrique, levier essentiel pour renforcer la souveraineté alimentaire du continent et libérer .', 'size': 3}, {'id': '255', 'title': '2e bilan du Sommet sur les systèmes alimentaires : Le Maroc appelle à la création d’un Fonds international dédié à la sécurité alimentaire en Afrique', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/2e-bilan-du-sommet-sur-les-systemes-alimentaires-le-maroc-appelle-a-la-creation-dun-fonds-international-dedie-a-la-securite-alimentaire-en-afrique.html', 'summary': '2e bilan du Sommet sur les systèmes alimentaires : Le Maroc appelle à la création d’un Fonds international dédié à la sécurité alimentaire en Afrique. Le Maroc a appelé, lundi à Addis-Abeba, à la création d’un Fonds international dédié à la sécurité alimentaire en Afrique destiné à renforcer la souveraineté alimentaire du continent. L’article est apparu en premier sur .', 'size': 3}], 'main_title': 'Addis-Abeba: Le Maroc appelle à la création d’un Fonds international dédié à la sécurité alimentaire en Afrique'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
                        
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ? d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        // Fonction pour cacher le tooltip
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = '';
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
    
    
</body>




</html>
    