<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); 
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title"> Les principales actualités des dernières 24 heures

</div>    
        <div class="header-subtitle"> Dernière mise à jour : 17/07/2025 - 12h30</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"></div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '1', 'articles': [{'id': '0', 'title': "Le temps qu'il fera ce jeudi 17 juillet 2025", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/433857-le-temps-quil-fera-ce-jeudi-17-juillet-2025.html', 'summary': "Le temps qu'il fera ce jeudi 17 juillet 2025. Voici les prévisions météorologiques établies par la Direction générale de la météorologie pour le jeudi 17 juillet 2025 -Temps chaud sur les plaines intérieures Nord et Centre, les plateaux des Phosphates et d’Oulmès, le Sud-Est et sur l’intérieur des Provinces Sud. -Ondées et orages isolés sur les Haut et Anti-Atlas, leurs versants Est et l’intérieur . ", 'size': 2}, {'id': '243', 'title': 'Les prévisions du jeudi 17 juillet 2025', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/les-previsions-du-jeudi-17-juillet-2025-306850/', 'summary': 'Les prévisions du jeudi 17 juillet 2025. Voici les prévisions météorologiques établies par la Direction générale de la météorologie pour le jeudi 17 juillet 2025. -Temps chaud sur les plaines intérieures Nord et Centre, les plateaux des Phosphates et d’Oulmès, le Sud-Est et sur l’intérieur des Provinces Sud. -Ondées et orages isolés sur les Haut et Anti-Atlas,', 'size': 2}], 'main_title': "Le temps qu'il fera ce jeudi 17 juillet 2025"}, {'community_id': '12', 'articles': [{'id': '5', 'title': 'Akhannouch : L’extension de l’usine de Stellantis à Kénitra permettra de doubler la capacité de production', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/433835-akhannouch-lextension-de-lusine-de-stellantis-a-kenitra-permettra-de-doubler-la-capacite-de-production.html', 'summary': 'Akhannouch : L’extension de l’usine de Stellantis à Kénitra permettra de doubler la capacité de production. L’extension de l’usine du groupe Stellantis à Kénitra permettra de doubler la capacité de production avec un taux d’intégration cible de 75% à l’horizon 2030, a souligné, mercredi à Kénitra, le Chef du gouvernement, Aziz Akhannouch. Intervenant lors de la cérémonie d’inauguration de cette extension, le Chef du gouvernement a assuré que ce projet représente . ', 'size': 5}, {'id': '213', 'title': 'Kénitra : Stellantis porte sa production à 535.000 véhicules par an et crée 3.000 emplois supplémentaires', 'source': 'lematin.ma', 'link': 'https://lematin.ma/economie/kenitra-stellantis-porte-sa-production-a-535000-vehicules-par-an/291634', 'summary': "Kénitra : Stellantis porte sa production à 535.000 véhicules par an et crée 3.000 emplois supplémentaires. L'usine Stellantis de Kénitra entre dans une nouvelle ère. Inaugurée mardi 16 juillet 2025 en présence du Chef du gouvernement Aziz Akhannouch et du ministre de l’Industrie et.", 'size': 5}, {'id': '242', 'title': 'Industrie automobile\xa0: l’usine Stellantis de Kénitra monte en puissance', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/industrie-automobile-lusine-stellantis-de-kenitra-monte-en-puissance-306837/', 'summary': 'Industrie automobile : l’usine Stellantis de Kénitra monte en puissance. Le Chef du gouvernement, Aziz Akhannouch, a inauguré le 16 juillet courant à Kénitra l’extension de l’usine du groupe automobile Stellantis. Un projet qui illustre la montée en puissance du partenariat industriel entre le Maroc et Stellantis, initié courant 2016. Précisément, l’élargissement du site et le lancement de projets majeurs', 'size': 5}, {'id': '292', 'title': 'Maroc: inauguration de l’extension de l’usine du groupe automobile Stellantis à Kénitra', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/maroc-inauguration-de-lextension-de-lusine-du-groupe-automobile-stellantis-a-kenitra.html', 'summary': 'Maroc: inauguration de l’extension de l’usine du groupe automobile Stellantis à Kénitra. Le chef du gouvernement, Aziz Akhannouch, a présidé mercredi à Kénitra (Maroc) la cérémonie d’inauguration de l’extension de l’usine du groupe automobile multinational Stellantis. Ce projet marque une nouvelle étape dans le développement du partenariat industriel, engagé depuis 2016 entre le Maroc et Stellantis, à travers l’extension de l’usine de Kénitra et le lancement de . L’article est apparu en premier sur .', 'size': 5}, {'id': '295', 'title': 'Stellantis inaugure l’extension de son site de Kénitra', 'source': 'lnt.ma', 'link': 'https://lnt.ma/stellantis-lance-lextension-de-son-site-de-kenitra-pour-tripler-sa-capacite-dassemblage-de-moteurs/', 'summary': 'Stellantis inaugure l’extension de son site de Kénitra. Le Chef du gouvernement, Aziz Akhannouch, a présidé mercredi à Kénitra la cérémonie d’inauguration de l’extension de l’usine du groupe automobile Stellantis, marquant une nouvelle étape dans le partenariat industriel noué entre le Maroc et le géant automobile mondial. Cette extension, mobilisant un investissement global de 1,2 milliard d’euros, traduit les ambitions nationales en matière . ', 'size': 5}], 'main_title': 'Akhannouch : L’extension de l’usine de Stellantis à Kénitra permettra de doubler la capacité de production'}, {'community_id': '2', 'articles': [{'id': '6', 'title': 'Médiateur du Royaume : Plus de 13.000 dossiers reçus en 2022 et 2023', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/433853-mediateur-du-royaume-plus-de-13-000-dossiers-recus-en-2022-et-2023.html', 'summary': 'Médiateur du Royaume : Plus de 13.000 dossiers reçus en 2022 et 2023. Quelque 13.142 plaintes, doléances, demandes de régularisation et initiatives spontanées ont été reçues par l’Institution du Médiateur du Royaume en 2022 et 2023, a indiqué, mercredi à Rabat, son président, Hassan Tariq. Il s’agit de 5.916 réclamations soumises en 2022 contre 7.226 en 2023, en hausse de 22,14 %, a précisé M. Tariq lors d’une . ', 'size': 3}, {'id': '222', 'title': '13.000 plaintes, doléances, et initiatives spontanées reçues par le Médiateur du Royaume', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/13-000-plaintes-doleances-et-initiatives-spontanees-recues-par-le-Mediateur-du-Royaume_a69975.html', 'summary': "13.000 plaintes, doléances, et initiatives spontanées reçues par le Médiateur du Royaume. Quelque 13.142 plaintes, doléances, demandes de régularisation et initiatives spontanées ont été reçues par l'Institution du Médiateur du Royaume en 2022 et 2023, a indiqué, mercredi à Rabat, son président, Hassan Tariq.", 'size': 3}, {'id': '239', 'title': 'Médiateur du royaume :  hausse de plus de 22% des plaintes déposées par les citoyens entre 2022 et 2023', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/07/17/mediateur-du-royaume-hausse-de-plus-de-22-des-plaintes-deposees-par-les-citoyens-entre-2022-et-2023_1942751/', 'summary': 'Médiateur du royaume : hausse de plus de 22% des plaintes déposées par les citoyens entre 2022 et 2023. Quelque 13.142 plaintes, doléances, demandes de régularisation et initiatives spontanées ont été reçues par l’Institution du Médiateur du Royaume en 2022 et 2023, a indiqué, mercredi à Rabat, son président, Hassan Tariq. Ce qu’il s’est passé L’Institution du Médiateur du Royaume a reçu 13.142 plaintes, doléances, demandes de régularisation et initiatives spontanées en 2022 et.', 'size': 3}], 'main_title': 'Médiateur du Royaume : Plus de 13.000 dossiers reçus en 2022 et 2023'}, {'community_id': '18', 'articles': [{'id': '9', 'title': 'Liga : Le jeune marocain Youssef Lekhedim rejoint le Deportivo Alavés', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/433855-liga-le-jeune-marocain-youssef-lekhedim-rejoint-le-deportivo-alaves.html', 'summary': 'Liga : Le jeune marocain Youssef Lekhedim rejoint le Deportivo Alavés. Le jeune prodige marocain, Youssef Enriquez Lekhedim, s’est engagé, mercredi, avec le club espagnol Deportivo Alavés pour une durée de quatre saisons en provenance du Real Madrid. « Le Deportivo Alavés a officialisé l’engagement du prometteur latéral gauche Youssef Enríquez, qui sera lié au club jusqu’en juin 2029 », a indiqué la formation basque dans un communiqué. . ', 'size': 2}, {'id': '212', 'title': 'Mercato : Youssef Lekhedim rejoint le Deportivo Alavés', 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/mercato-youssef-lekhedim-rejoint-le-deportivo-alaves/291640', 'summary': 'Mercato : Youssef Lekhedim rejoint le Deportivo Alavés. Le Deportivo Alavés a officialisé l’engagement du prometteur latéral gauche Youssef Enríquez, qui sera lié au club jusqu’en juin 2029, a indiqué la formation basque dan.', 'size': 2}], 'main_title': 'Liga : Le jeune marocain Youssef Lekhedim rejoint le Deportivo Alavés'}, {'community_id': '9', 'articles': [{'id': '35', 'title': 'Attijariwafa bank et MadfoatCom unissent leurs expertises pour accélérer la digitalisation des paiements', 'source': 'lematin.ma', 'link': 'https://lematin.ma/economie/attijariwafa-bank-et-madfoatcom-accelerent-la-digitalisation-des-paiements/291518', 'summary': 'Attijariwafa bank et MadfoatCom unissent leurs expertises pour accélérer la digitalisation des paiements. La collaboration entre Attijariwafa bank, l’un des principaux groupes bancaires africains, et MadfoatCom, fintech spécialisée dans le traitement électronique des factures, marque u.', 'size': 3}, {'id': '132', 'title': 'Attijariwafa bank et MadfoatCom s’allient pour moderniser le paiement des factures', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/comese/attijariwafa-bank-et-madfoatcom-sallient-pour-moderniser-le-paiement-des-factures/', 'summary': 'Attijariwafa bank et MadfoatCom s’allient pour moderniser le paiement des factures. Attijariwafa bank et MadfoatCom ont signé un accord de collaboration stratégique visant à développer conjointement des solutions innovantes de présentation et de paiement électronique des factures, contribuant ainsi à la transformation digitale des services financiers au Maroc et dans les autres pays de présence d’Attijariwafa bank.', 'size': 3}, {'id': '291', 'title': 'Digitalisation des paiements: Attijariwafa bank et MadfoatCom scellent un partenariat', 'source': 'leseco.ma', 'link': 'https://leseco.ma/business/digitalisation-des-paiements-attijariwafa-bank-et-madfoatcom-scellent-un-partenariat.html', 'summary': 'Digitalisation des paiements: Attijariwafa bank et MadfoatCom scellent un partenariat. Attijariwafa bank et MadfoatCom ont signé un accord de collaboration stratégique visant à développer conjointement des solutions innovantes de présentation et de paiement électronique des factures, contribuant ainsi à la transformation digitale des services financiers au Maroc et dans les autres pays de présence d’Attijariwafa bank. ', 'size': 3}], 'main_title': 'Attijariwafa bank et MadfoatCom unissent leurs expertises pour accélérer la digitalisation des paiements'}, {'community_id': '5', 'articles': [{'id': '40', 'title': 'CAN féminine : Ghizlane Chebbak dans le onze type de la phase de groupes', 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/can-feminine-ghizlane-chebbak-dans-le-onze-type-de-la-phase-de-groupes/291429', 'summary': 'CAN féminine : Ghizlane Chebbak dans le onze type de la phase de groupes. Le Groupe d’Étude Technique (TSG) a dévoilé le Meilleur Onze de la phase de groupes de la Coupe d’Afrique des Nations Féminine CAF TotalEnergies, Maroc 2024. Composé dans un.', 'size': 2}, {'id': '254', 'title': 'Marqué par une domination zambienne: Le Onze type de la phase de groupes dévoilé', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/sports/marque-par-une-domination-zambienne-le-onze-type-de-la-phase-de-groupes-devoile', 'summary': 'Marqué par une domination zambienne: Le Onze type de la phase de groupes dévoilé. Le Groupe d’étude technique (TSG) a dévoilé le meilleur Onze de la phase de groupes de la Coupe d’Afrique des Nations Féminine CAF TotalEnergies, Maroc 2024, composé dans un schéma en 4-3-3 et marqué par la présence de trois joueuses zambiennes. La phase de groupe de la CAN féminine a pris fin lundi après la .', 'size': 2}], 'main_title': 'CAN féminine : Ghizlane Chebbak dans le onze type de la phase de groupes'}, {'community_id': '6', 'articles': [{'id': '42', 'title': 'AMO-Tadamon couvre désormais plus de 11,4 millions de bénéficiaires (Akhannouch)', 'source': 'lematin.ma', 'link': 'https://lematin.ma/nation/amo-tadamon-couvre-desormais-plus-de-114-millions-de-beneficiaires/291382', 'summary': 'AMO-Tadamon couvre désormais plus de 11,4 millions de bénéficiaires (Akhannouch). Le chef du gouvernement, Aziz Akhannouch a fait savoir, mardi à la Chambre des conseillers, que plus de 4 millions de ménages, soit plus de 11,4 millions de citoyens et citoyennes,.', 'size': 2}, {'id': '136', 'title': 'Croissance, investissement, emploi, AMO… Le bilan présenté par Akhannouch', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/au-royaume/croissance-investissement-emploi-amo-le-bilan-presente-par-akhannouch/', 'summary': "Croissance, investissement, emploi, AMO Le bilan présenté par Akhannouch. Le Chef du gouvernement, Aziz Akhannouch, a affirmé, mardi à la Chambre des conseillers, que les réformes menées par l'Exécutif ont permis d'améliorer les indicateurs économiques et financiers.", 'size': 2}], 'main_title': 'AMO-Tadamon couvre désormais plus de 11,4 millions de bénéficiaires (Akhannouch)'}, {'community_id': '7', 'articles': [{'id': '46', 'title': 'Message de condoléances de SM le Roi à la famille de feu Ahmed Faras', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Message-de-condoleances-de-SM-le-Roi-a-la-famille-de-feu-Ahmed-Faras_a69960.html', 'summary': 'Message de condoléances de SM le Roi à la famille de feu Ahmed Faras. \u200bSa Majesté le Roi Mohammed VI a adressé un message de condoléances et de compassion aux membres de la famille de feu Ahmed Faras.', 'size': 2}, {'id': '125', 'title': 'Décès de l’ancien international marocain Ahmed Faras', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/influences/deces-de-lancien-international-marocain-ahmed-faras/', 'summary': 'Décès de l’ancien international marocain Ahmed Faras. Feu Ahmed Faras sera inhumé jeudi à Mohammedia après, la prière d’Addohr.', 'size': 3}, {'id': '241', 'title': 'Décès d’Ahmed Faras: une icône du football marocain s’en est allée', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/deces-dahmed-faras-une-icone-du-football-marocain-sen-est-allee-306857/', 'summary': 'Décès d’Ahmed Faras: une icône du football marocain s’en est allée. Avec le décès de l’ancien international Ahmed Faras, mercredi à Mohammedia, le football marocain dit adieu à l’une de ses stars les plus remarquables, qui a fait l’histoire par ses performances sportives et marqué les esprits par ses qualités humaines. Décédé à l’âge de 78 ans des suites d’une longue', 'size': 2}, {'id': '252', 'title': "Le roi Mohammed VI adresse ses condoléances à la famille d'Ahmed Faras", 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/171923/mohammed-adresse-condoleances-famille-d-ahmed.html', 'summary': "Le roi Mohammed VI adresse ses condoléances à la famille d'Ahmed Faras. Le roi Mohammed VI a adressé un message de condoléances et de compassion aux membres de la famille de feu Ahmed Faras.", 'size': 3}], 'main_title': 'Décès de l’ancien international marocain Ahmed Faras'}, {'community_id': '14', 'articles': [{'id': '49', 'title': 'Une innovation signée Al Barid Bank et Barid Cash pour généraliser les paiements électroniques', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Une-innovation-signee-Al-Barid-Bank-et-Barid-Cash-pour-generaliser-les-paiements-electroniques_a69956.html', 'summary': 'Une innovation signée Al Barid Bank et Barid Cash pour généraliser les paiements électroniques. Al Barid Bank et Barid Cash annoncent le lancement de Barid Payment Mobile, une nouvelle solution destinée à simplifier l’acceptation des paiements électroniques pour les commerçants, notamment les plus modestes. Cette initiative permet de transformer un simple smartphone équipé de la technologie NFC en terminal de paiement sans contact, sans nécessiter de matériel supplémentaire.', 'size': 3}, {'id': '84', 'title': 'Al Barid Bank et Barid Cash lancent une solution innovante pour démocratiser les paiements électroniques', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/al-barid-bank-et-barid-cash-lancent-une-solution-innovante-pour-democratiser-les-paiements-electroniques-306832/', 'summary': 'Al Barid Bank et Barid Cash lancent une solution innovante pour démocratiser les paiements électroniques. Al Barid Bank et Barid Cash annoncent le lancement de Barid Payment Mobile, une nouvelle solution destinée à simplifier l’acceptation des paiements électroniques pour les commerçants, notamment les plus modestes. Cette initiative permet de transformer un simple smartphone équipé de la technologie NFC en terminal de paiement sans contact, sans', 'size': 3}, {'id': '207', 'title': 'Al Barid Bank et Barid Cash lancent une solution mobile pour démocratiser les paiements électroniques', 'source': 'lematin.ma', 'link': 'https://lematin.ma/economie/al-barid-bank-et-barid-cash-lancent-barid-payment-mobile/291652', 'summary': 'Al Barid Bank et Barid Cash lancent une solution mobile pour démocratiser les paiements électroniques. Avec « Barid Payment Mobile », Al Barid Bank et Barid Cash proposent une solution qui transforme un smartphone doté de la technologie NFC en véritable terminal de paiement sans con.', 'size': 3}], 'main_title': 'Une innovation signée Al Barid Bank et Barid Cash pour généraliser les paiements électroniques'}, {'community_id': '8', 'articles': [{'id': '50', 'title': 'Drame de \u200bBéni Mellal : Une dissection médullaire au niveau cervical derrière le décès de l’individu qui s’est jeté du haut d’un château d’eau (Parquet)', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Drame-de-\u200bBeni-Mellal-Une-dissection-medullaire-au-niveau-cervical-derriere-le-deces-de-l-individu-qui-s-est-jete-du_a69955.html', 'summary': 'Drame de \u200bBéni Mellal : Une dissection médullaire au niveau cervical derrière le décès de l’individu qui s’est jeté du haut d’un château d’eau (Parquet). Le décès de l’individu, qui s’est jeté du haut d’un château d’eau dans la commune rurale d’Ouled Youssef, est dû à une dissection médullaire au niveau cervical avec dissection de la carotide, à une fracture du cartilage thyroïdien et à une déchirure musculaire en regard, à la suite d’une tentative de pendaison par corde entourée autour de son cou, a affirmé le procureur général du Roi près la Cour d’appel de Béni Mellal.', 'size': 3}, {'id': '238', 'title': 'Béni Mellal : l’autopsie révèle la cause de la mort de l’homme du château', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/07/17/beni-mellal-lautopsie-revele-la-cause-de-la-mort-de-lhomme-du-chateau_1942749/', 'summary': 'Béni Mellal : l’autopsie révèle la cause de la mort de l’homme du château. Le décès de l’individu, qui s’est jeté du haut d’un château d’eau dans la commune rurale d’Ouled Youssef, est dû à une dissection médullaire au niveau cervical avec dissection de la carotide, à une fracture du cartilage thyroïdien et à une déchirure musculaire en regard, à la suite d’une tentative de pendaison par corde entourée.', 'size': 3}, {'id': '278', 'title': 'Béni Mellal : Une dissection médullaire cervicale en cause dans le décès de l’individu du\xa0château\xa0d’eau', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/beni-mellal-une-dissection-medullaire-cervicale-en-cause-dans-le-deces-de-lindividu-du-chateau-deau/', 'summary': 'Béni Mellal : Une dissection médullaire cervicale en cause dans le décès de l’individu du château d’eau. Le décès de l’individu, qui s’est jeté du haut d’un château d’eau dans la commune rurale d’Ouled Youssef, est dû à une dissection médullaire au niveau cervical avec dissection de la carotide, à une fracture du cartilage thyroïdien et à une déchirure musculaire en regard, à la suite d’une tentative de pendaison par corde entourée .', 'size': 3}], 'main_title': 'Drame de \u200bBéni Mellal : Une dissection médullaire au niveau cervical derrière le décès de l’individu qui s’est jeté du haut d’un château d’eau (Parquet)'}, {'community_id': '10', 'articles': [{'id': '55', 'title': 'Transport : partenariat pour digitaliser le Manifeste de Fret', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Transport-partenariat-pour-digitaliser-le-Manifeste-de-Fret_a69949.html', 'summary': 'Transport : partenariat pour digitaliser le Manifeste de Fret. Une convention de partenariat a été conclue, mercredi à Rabat, entre le ministère du Transport et de la Logistique et la société "PortNet", pour la mise en œuvre de la plateforme numérique dédiée au "Manifeste de Fret" relatif au transport routier de marchandises (TMCA), une étape clé dans le chantier de simplification et de digitalisation des procédures liées au transport de marchandises.', 'size': 3}, {'id': '129', 'title': 'Digitalisation du fret : Le ministère du Transport et de la Logistique et PortNet accélèrent la transition numérique', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/affaires/digitalisation-du-fret-le-ministere-du-transport-et-de-la-logistique-et-portnet-accelerent-la-transition-numerique/', 'summary': 'Digitalisation du fret : Le ministère du Transport et de la Logistique et PortNet accélèrent la transition numérique. Le ministère du Transport et de la Logistique et PortNet ont signé une convention pour lancer une plateforme numérique dédiée au Manifeste de Fret routier. Objectif : digitaliser et simplifier les démarches, renforcer la traçabilité logistique et améliorer la compétitivité du secteur.', 'size': 3}, {'id': '183', 'title': 'Transport routier: PortNet et le ministère lancent la digitalisation du Manifeste de Fret', 'source': 'lnt.ma', 'link': 'https://lnt.ma/transport-routier-portnet-et-le-ministere-lancent-la-digitalisation-du-manifeste-de-fret/', 'summary': 'Transport routier: PortNet et le ministère lancent la digitalisation du Manifeste de Fret. Une convention de partenariat a été conclue, mercredi à Rabat, entre le ministère du Transport et de la Logistique et la société « PortNet », pour la mise en œuvre de la plateforme numérique dédiée au « Manifeste de Fret » relatif au transport routier de marchandises (TMCA), une étape clé dans le chantier de simplification et de digitalisation . ', 'size': 3}], 'main_title': 'Transport : partenariat pour digitaliser le Manifeste de Fret'}, {'community_id': '11', 'articles': [{'id': '57', 'title': "Casablanca : Interpellation d'un  Français de 42 ans poursuivi par la Justice française", 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Casablanca-Interpellation-d-un-Francais-de-42-ans-poursuivi-par-la-Justice-francaise_a69947.html', 'summary': "Casablanca : Interpellation d'un Français de 42 ans poursuivi par la Justice française. Des éléments de la préfecture de police de Casablanca ont procédé, mardi, à l'interpellation d'un ressortissant français de 42 ans, recherché au niveau national par les services de la police judiciaire de Tanger et faisant l’objet d'un mandat d'arrêt international émis par les autorités judiciaires françaises.", 'size': 2}, {'id': '128', 'title': 'Casablanca : Interpellation d’un Français faisant l’objet d’un mandat d’arrêt international', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/au-royaume/casablanca-interpellation-dun-francais-faisant-lobjet-dun-mandat-darret-international/', 'summary': 'Casablanca : Interpellation d’un Français faisant l’objet d’un mandat d’arrêt international. Un ressortissant français, visé par un mandat d’arrêt international pour blanchiment d’argent et trafic de drogue, a été interpellé mardi à Casablanca. Il faisait également l’objet d’un avis de recherche national pour des faits de violence à Tanger.', 'size': 2}], 'main_title': "Casablanca : Interpellation d'un  Français de 42 ans poursuivi par la Justice française"}, {'community_id': '17', 'articles': [{'id': '80', 'title': 'Protection sociale : 39 MMDH mobilisés en 2025, annonce Aziz Akhannouch', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/07/16/protection-sociale-39-mmdh-mobilises-en-2025-annonce-aziz-akhannouch_1942603/', 'summary': 'Protection sociale : 39 MMDH mobilisés en 2025, annonce Aziz Akhannouch. Les dépenses relatives au chantier de la protection sociale devraient atteindre 39 milliards de dirhams (MMDH) en 2025 et plus de 41 MMDH en 2026, sachant que le cout de financement de ce projet s’est élevé à environ 32 MMDH en 2024, a indiqué, mardi à la Chambre des conseillers, le Chef du gouvernement, Aziz.', 'size': 2}, {'id': '189', 'title': 'Le chantier social mobilisera plus de 39 MMDH cette année, 41 MMDH en 2026, selon Akhannouch', 'source': 'lnt.ma', 'link': 'https://lnt.ma/akhannouch-le-chantier-social-mobilisera-plus-de-41-mmdh-en-2026/', 'summary': 'Le chantier social mobilisera plus de 39 MMDH cette année, 41 MMDH en 2026, selon Akhannouch. Le Chef du gouvernement, Aziz Akhannouch, a indiqué que les dépenses liées à la mise en œuvre du chantier de la protection sociale devraient s’élever à 39 milliards de dirhams (MMDH) en 2025 et dépasser les 41 MMDH en 2026, contre environ 32 MMDH en 2024. Cette déclaration a été faite mardi lors de la . ', 'size': 2}], 'main_title': 'Protection sociale : 39 MMDH mobilisés en 2025, annonce Aziz Akhannouch'}, {'community_id': '13', 'articles': [{'id': '83', 'title': 'Jacob Zuma et son parti "MK" soutiennent la proposition marocaine d’autonomie au Sahara', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/07/16/jacob-zuma-et-son-parti-mk-soutiennent-la-proposition-marocaine-dautonomie-au-sahara_1942596/', 'summary': 'Jacob Zuma et son parti "MK" soutiennent la proposition marocaine d’autonomie au Sahara. Jacob Zuma, ex-Président de l’Afrique du Sud et leader du parti Umkhonto weSizwe (MK), a indiqué que son parti estime que la proposition marocaine d’autonomie « permettra une gouvernance locale significative par les populations de la région du Sahara, tout en garantissant au Maroc sa souveraineté sur le Sahara ». Ce qu’il s’est passé Le leader du.', 'size': 3}, {'id': '94', 'title': 'Sahara: Le parti de l’ex-président sud-africain Jacob Zuma soutient la marocanité du Sahara', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/sahara-le-parti-de-lex-president-sud-africain-de-jacob-zuma-soutient-la-marocanite-du-sahara-306766/', 'summary': 'Sahara: Le parti de l’ex-président sud-africain Jacob Zuma soutient la marocanité du Sahara. Jacob Zuma, ex-Président de l’Afrique du Sud et leader du parti Umkhonto weSizwe (MK), a indiqué que son parti estime que la proposition marocaine d’autonomie « permettra une gouvernance locale significative par les populations de la région du Sahara, tout en garantissant au Maroc sa souveraineté sur le Sahara ». Cette position', 'size': 4}, {'id': '187', 'title': 'Le parti sud-africain MK soutient la proposition marocaine d’autonomie', 'source': 'lnt.ma', 'link': 'https://lnt.ma/le-parti-sud-africain-mk-soutient-la-proposition-marocaine-dautonomie/', 'summary': 'Le parti sud-africain MK soutient la proposition marocaine d’autonomie. Le parti Umkhonto weSizwe (MK), dirigé par l’ancien président sud-africain Jacob Zuma, a exprimé son soutien à la proposition marocaine d’autonomie au Sahara, estimant qu’elle garantit au Maroc sa souveraineté sur cette région tout en assurant une gouvernance locale significative. Dans une déclaration à la presse à l’issue de ses entretiens à Rabat avec le . ', 'size': 4}, {'id': '202', 'title': 'Sahara : le MK de Zuma ouvre une brèche dans l’alignement traditionnel de Pretoria', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/433698-sahara-le-mk-de-zuma-ouvre-une-breche-dans-lalignement-traditionnel-de-pretoria.html', 'summary': 'Sahara : le MK de Zuma ouvre une brèche dans l’alignement traditionnel de Pretoria. La visite de Jacob Zuma au Maroc a marqué un tournant dans la position sud-africaine sur la question du Sahara. Depuis Rabat, l’ancien président a exprimé un soutien explicite au plan d’autonomie, rompant avec la ligne traditionnellement hostile de Pretoria au Maroc sur ce dossier. C’est une prise de position lourde de signification. Ce mardi . ', 'size': 3}], 'main_title': 'Sahara: Le parti de l’ex-président sud-africain Jacob Zuma soutient la marocanité du Sahara'}, {'community_id': '15', 'articles': [{'id': '91', 'title': 'Saham Bank renforce sa participation directe dans Eqdom', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/saham-bank-renforce-sa-participation-directe-dans-eqdom-306803/', 'summary': 'Saham Bank renforce sa participation directe dans Eqdom. Saham Bank a annoncé que sa participation directe dans Eqdom s’élève à 951.981 actions, correspondant à 57% du capital social et des droits de vote de cette société. Dans communiqué publié, mardi, sur le site de l’Autorité marocaine du marché des capitaux (AMMC), Saham Bank indique que cette participation résulte', 'size': 2}, {'id': '263', 'title': 'Actionnariat : Saham Bank renforce  sa participation directe  dans Eqdom', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/economie/actionnariat-saham-bank-renforce-sa-participation-directe-dans-eqdom', 'summary': 'Actionnariat : Saham Bank renforce sa participation directe dans Eqdom. Détenant 57 % du capital social et des droits de vote La participation directe de Saham Bank dans Eqdom s’élève à 951.981 actions, soit 57% du capital social et des droits de vote de cette société. «Cette participation résulte de l’acquisition, le 7 juillet 2025, de 51.812 actions Eqdom auprès de la société Investima, conformément aux .', 'size': 2}], 'main_title': 'Saham Bank renforce sa participation directe dans Eqdom'}, {'community_id': '0', 'articles': [{'id': '137', 'title': 'Chambre des représentants: Examen en commission du projet de loi sur la réorganisation du CNP', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/chambre-des-representants-examen-en-commission-du-projet-de-loi/', 'summary': 'Chambre des représentants: Examen en commission du projet de loi sur la réorganisation du CNP. La Commission de l’enseignement, de la culture et de la communication à la Chambre des représentants a amorcé, mercredi, l’examen détaillé des dispositions du projet de loi n°26.25 portant réorganisation du Conseil national de la presse (CNP), en présence du ministre de la Jeunesse, de la Culture et de la Communication, Mohamed Mehdi Bensaid. Lors .', 'size': 2}, {'id': '231', 'title': '\u200bChambre des représentants: la réforme controversée du CNP examinée  en commission', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/\u200bChambre-des-representants-la-reforme-controversee-du-CNP-examinee-en-commission_a69971.html', 'summary': "\u200bChambre des représentants: la réforme controversée du CNP examinée en commission. La Commission de l'enseignement, de la culture et de la communication à la Chambre des représentants a amorcé, mercredi, l’examen détaillé des dispositions du projet de loi n°26.25 portant réorganisation du Conseil national de la presse (CNP), en présence du ministre de la Jeunesse, de la Culture et de la Communication, Mohamed Mehdi Bensaid.", 'size': 2}], 'main_title': 'Chambre des représentants: Examen en commission du projet de loi sur la réorganisation du CNP'}, {'community_id': '16', 'articles': [{'id': '172', 'title': 'La France et le Sahara marocain : un tournant stratégique majeur', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/la-france-et-le-sahara-marocain-un-tournant-strategique-majeur.html', 'summary': 'La France et le Sahara marocain : un tournant stratégique majeur. « Le présent et l’avenir du Sahara occidental s’inscrivent dans le cadre de la souveraineté marocaine ». Plus que l’expression solennelle d’une volonté politique, la position de la France en soutien à la marocanité du Sahara fait désormais foi de doctrine de sa diplomatie qu’elle s’engage à défendre et à porter haut et fort sur la scène . L’article est apparu en premier sur .', 'size': 2}, {'id': '175', 'title': 'Sahara Marocain | La position de la France marque un «\xa0tournant stratégique majeur\xa0»', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/sahara-marocain-la-position-de-la-france-marque-un-tournant-strategique-majeur/', 'summary': 'Sahara Marocain | La position de la France marque un « tournant stratégique majeur ». “Le présent et l’avenir du Sahara occidental s’inscrivent dans le cadre de la souveraineté marocaine”. Plus que l’expression solennelle d’une volonté politique, la position de la France en soutien à la marocanité du Sahara fait désormais foi de doctrine de sa diplomatie qu’elle s’engage à défendre et à porter haut et fort sur la scène ', 'size': 2}], 'main_title': 'La France et le Sahara marocain : un tournant stratégique majeur'}, {'community_id': '3', 'articles': [{'id': '176', 'title': 'Nairobi | Participation du Maroc à la CMAE-20 pour l’environnement en Afrique', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/nairobi-participation-du-maroc-a-la-cmae-20-pour-lenvironnement-en-afrique/', 'summary': 'Nairobi | Participation du Maroc à la CMAE-20 pour l’environnement en Afrique. Les travaux de la vingtième session de la Conférence ministérielle africaine sur l’environnement (CMAE-20) ont débuté mercredi au siège du programme des Nations unies pour l’environnement (PNUE) à Nairobi avec la participation du Maroc. Le Royaume est représenté à cette conférence, qui se tient sous le thème «Quatre décennies d’action environnementale en Afrique : réflexion ', 'size': 3}, {'id': '264', 'title': 'Environnement: Leila Benali expose à Nairobi la vision du Maroc en matière de financement climatique en Afrique', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/influences/environnement-leila-benali-expose-a-nairobi-la-vision-du-maroc-en-matiere-de-financement-climatique-en-afrique/', 'summary': 'Environnement: Leila Benali expose à Nairobi la vision du Maroc en matière de financement climatique en Afrique. Lors de la 20e Conférence ministérielle africaine sur l’environnement (CMAE-20) tenue à Nairobi au Kenya, la ministre de la Transition énergétique et du développement durable, a plaidé pour une réforme en profondeur des mécanismes de financement climatique en Afrique.', 'size': 3}, {'id': '270', 'title': 'Leila Benali expose à Nairobi la vision du Maroc en matière de financement climatique en Afrique', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/leila-benali-expose-a-nairobi-la-vision-du-maroc-en-matiere/', 'summary': 'Leila Benali expose à Nairobi la vision du Maroc en matière de financement climatique en Afrique. La ministre de la Transition énergétique et du développement durable, Leila Benali a présenté, mercredi devant la vingtième session de la Conférence ministérielle africaine sur l’environnement (CMAE-20) à Nairobi, la vision adoptée par le Royaume du Maroc afin de relever les défis liés au financement climatique en Afrique. Intervenant lors de la première session ministérielle .', 'size': 3}], 'main_title': 'Nairobi | Participation du Maroc à la CMAE-20 pour l’environnement en Afrique'}, {'community_id': '4', 'articles': [{'id': '249', 'title': 'Errachidia : Mise en service du réseau d’irrigation associé au barrage Kaddoussa', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/171929/errachidia-mise-service-reseau-d-irrigation.html', 'summary': 'Errachidia : Mise en service du réseau d’irrigation associé au barrage Kaddoussa. Le ministre de l’Agriculture, de la pêche maritime, du développement rural et des eaux et forêts, Ahmed El Bouari, a procédé mercredi au lancement de la mise en service du réseau d’irrigation associé au barrage Kaddoussa, province d’Errachidia. Il a été accompagné du wali de la région Drâa-Tafilalet, gouverneur de la province d’Errachidia, de responsables, élus, coopératives et associations agricoles.', 'size': 2}, {'id': '265', 'title': 'Agriculture durable: Lancement du réseau d’irrigation de Kaddoussa', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/affaires/agriculture/agriculture-durable-lancement-du-reseau-dirrigation-de-kaddoussa/', 'summary': 'Agriculture durable: Lancement du réseau d’irrigation de Kaddoussa. Avec la mise en service du réseau d’irrigation du barrage Kaddoussa, le ministère de l’Agriculture marque une avancée stratégique pour la sécurité hydrique et le développement agricole dans la région de Drâa-Tafilalet. Un projet à près d’un milliard de dirhams qui ambitionne de concilier performance agricole, inclusion sociale et résilience climatique dans les zones oasiennes.', 'size': 2}], 'main_title': 'Errachidia : Mise en service du réseau d’irrigation associé au barrage Kaddoussa'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
                        
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ? d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        // Fonction pour cacher le tooltip
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = '';
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
    
    
</body>




</html>
    