<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); 
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title"> Les principales actualités des dernières 24 heures

</div>    
        <div class="header-subtitle"> Dernière mise à jour : 15/07/2025 - 06h30</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"></div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '4', 'title': 'Décès de Muhammadu Buhari : les condoléances du Roi au Président nigérian', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/433408-deces-de-muhammadu-buhari-les-condoleances-du-roi-au-president-nigerian.html', 'summary': 'Décès de Muhammadu Buhari : les condoléances du Roi au Président nigérian. Le Roi Mohammed VI a adressé un message de condoléances et de compassion au Président de la République fédérale du Nigeria, Bola Ahmed Tinubu, suite au décès de l’ancien président Muhammadu Buhari. Dans ce message, le Roi dit avoir appris avec une grande émotion et une profonde affliction la nouvelle du décès de l’ancien président . ', 'size': 4}, {'id': '13', 'title': 'S.M. le Roi adresse un message de condoléances au Président du Nigeria suite au décès de Muhammadu Buhari', 'source': 'lematin.ma', 'link': 'https://lematin.ma/activites-royales/deces-de-buhari-les-condoleances-de-sm-le-roi-au-president-nigerien/291117', 'summary': "S.M. le Roi adresse un message de condoléances au Président du Nigeria suite au décès de Muhammadu Buhari. Dans ce message, S.M. le Roi dit avoir appris avec une grande émotion et une profonde affliction la nouvelle du décès de l'ancien président Muhammudu Buhari, implorant le Très.", 'size': 4}, {'id': '70', 'title': 'Le roi Mohammed VI présente ses condoléances au Nigeria suite au décès de Muhammadu Buhari', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/07/14/le-roi-mohammed-vi-presente-ses-condoleances-au-nigeria-suite-au-deces-de-muhammadu-buhari_1942367/', 'summary': 'Le roi Mohammed VI présente ses condoléances au Nigeria suite au décès de Muhammadu Buhari. Le roi Mohammed VI a adressé un message de condoléances et de compassion au président de la République fédérale du Nigeria, Bola Ahmed Tinubu, suite au décès de l’ancien président Muhammadu Buhari. Dans ce message, le roi dit avoir appris avec une grande émotion et une profonde affliction la nouvelle du décès de l’ancien président.', 'size': 4}, {'id': '210', 'title': 'SM le Roi adresse un message de condoléances au Président du Nigeria suite au décès de l’ancien président Muhammadu Buhari', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/SM-le-Roi-adresse-un-message-de-condoleances-au-President-du-Nigeria-suite-au-deces-de-l-ancien-president-Muhammadu_a69850.html', 'summary': 'SM le Roi adresse un message de condoléances au Président du Nigeria suite au décès de l’ancien président Muhammadu Buhari. Sa Majesté le Roi Mohammed VI a adressé un message de condoléances et de compassion au Président de la République fédérale du Nigeria, M. Bola Ahmed Tinubu, suite au décès de l’ancien président Muhammadu Buhari.', 'size': 4}], 'main_title': 'Décès de Muhammadu Buhari : les condoléances du Roi au Président nigérian'}, {'community_id': '17', 'articles': [{'id': '16', 'title': 'Liam Fox : le Royaume du Maroc, un partenaire clé du Royaume-Uni', 'source': 'lematin.ma', 'link': 'https://lematin.ma/nation/liam-fox-le-royaume-du-maroc-un-partenaire-cle-du-royaume-uni/291116', 'summary': 'Liam Fox : le Royaume du Maroc, un partenaire clé du Royaume-Uni. Axant son article sur la récente décision du Royaume-Uni de soutenir le plan d’autonomie présenté par le Maroc pour régler le conflit régional autour de son intégrité territoriale,.', 'size': 2}, {'id': '168', 'title': 'Le Royaume du Maroc, un partenaire clé du Royaume-Uni (Liam Fox)', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/le-royaume-du-maroc-un-partenaire-cle-du-royaume-uni-liam-fox.html', 'summary': 'Le Royaume du Maroc, un partenaire clé du Royaume-Uni (Liam Fox). Le Royaume du Maroc est l’un des plus anciens alliés du Royaume-Uni et un partenaire clé sur de nombreuses questions relatives à la sécurité britannique et mondiale, a indiqué lundi Sir Liam Fox, ancien ministre britannique de la défense et du commerce international. Dans un article, publié sur le portail The National, Sir Fox a . L’article est apparu en premier sur .', 'size': 3}, {'id': '174', 'title': 'Le Royaume du Maroc, un partenaire clé du Royaume-Uni (Sir Liam Fox)', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/le-royaume-du-maroc-un-partenaire-cle-du-royaume-uni-sir-liam-fox/', 'summary': 'Le Royaume du Maroc, un partenaire clé du Royaume-Uni (Sir Liam Fox). Le Royaume du Maroc est l’un des plus anciens alliés du Royaume-Uni et un partenaire clé sur de nombreuses questions relatives à la sécurité britannique et mondiale, a indiqué lundi Sir Liam Fox, ancien ministre britannique de la défense et du commerce international. Dans un article, publié sur le portail The National, Sir Fox a ', 'size': 2}], 'main_title': 'Le Royaume du Maroc, un partenaire clé du Royaume-Uni (Liam Fox)'}, {'community_id': '14', 'articles': [{'id': '21', 'title': "Mondial des clubs : Hakimi et Bounou dans l'équipe type du tournoi", 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/mondial-des-clubs-hakimi-et-bounou-dans-lequipe-type-du-tournoi/291067', 'summary': "Mondial des clubs : Hakimi et Bounou dans l'équipe type du tournoi. Le latéral droit du Paris Saint-Germain, Achraf Hakimi, a inscrit deux buts et livré deux passes décisives lors de ce tournoi organisé aux Etats Unis avec la participation pour la.", 'size': 4}, {'id': '72', 'title': 'Hakimi et Bounou brillent au Mondial des clubs et intègrent le Onze type', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/07/14/hakimi-et-bounou-brillent-au-mondial-des-clubs-et-integrent-le-onze-type_1942337/', 'summary': 'Hakimi et Bounou brillent au Mondial des clubs et intègrent le Onze type. Les internationaux marocains Achraf Hakimi et Yassine Bounou ont été choisis dans le Onze type de la Coupe du Monde des clubs, qui a pris fin dimanche, selon la Fédération internationale de football (FIFA). Le latéral droit du Paris Saint-Germain, Achraf Hakimi, a inscrit deux buts et livré deux passes décisives lors de ce tournoi.', 'size': 5}, {'id': '98', 'title': "Mondial des clubs : Achraf Hakimi et Yassine Bounou dans l'équipe type du tournoi (FIFA)", 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/171662/mondial-clubs-achraf-hakimi-yassine.html', 'summary': "Mondial des clubs : Achraf Hakimi et Yassine Bounou dans l'équipe type du tournoi (FIFA). Les internationaux marocains Achraf Hakimi et Yassine Bounou ont été choisis dans le Onze type du Mondial des clubs, qui a pris fin dimanche, selon la Fédération internationale de football (FIFA).", 'size': 4}, {'id': '172', 'title': 'Coupe du Monde des Clubs | Hakimi et Bounou dans l’équipe type du tournoi (FIFA)', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/coupe-du-monde-des-clubs-hakimi-et-bounou-dans-lequipe-type-du-tournoi-fifa/', 'summary': 'Coupe du Monde des Clubs | Hakimi et Bounou dans l’équipe type du tournoi (FIFA). Les internationaux marocains Achraf Hakimi et Yassine Bounou ont été choisis dans le Onze type du Mondial des clubs, qui a pris fin dimanche, selon la Fédération internationale de football (FIFA). Le latéral droit du Paris Saint-Germain, Achraf Hakimi, a inscrit deux buts et livré deux passes décisives lors de ce tournoi organisé aux Etats ', 'size': 5}, {'id': '223', 'title': 'Mondial des clubs : Deux internationaux marocains dans l’équipe type', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/sports/mondial-des-clubs-deux-internationaux-marocains-dans-lequipe-type', 'summary': 'Mondial des clubs : Deux internationaux marocains dans l’équipe type. Coupe du monde des clubs : Les internationaux marocains Achraf Hakimi et Yassine Bounou ont été choisis dans le Onze type du Mondial des clubs qui a pris fin dimanche, selon la Fédération internationale de football (FIFA). Le latéral droit du Paris Saint-Germain, Achraf Hakimi, a inscrit deux buts et livré deux passes décisives lors .', 'size': 5}], 'main_title': 'Hakimi et Bounou brillent au Mondial des clubs et intègrent le Onze type'}, {'community_id': '3', 'articles': [{'id': '30', 'title': 'Maroc Telecom lance la 21e édition du Festival des Plages du 15 juillet au 21 août', 'source': 'lematin.ma', 'link': 'https://lematin.ma/culture/la-21e-edition-du-festival-des-plages-du-15-juillet-au-21-aout/290987', 'summary': 'Maroc Telecom lance la 21e édition du Festival des Plages du 15 juillet au 21 août. Chaque été, le Festival des Plages rassemble des millions de spectateurs dans les plus belles stations balnéaires du Maroc autour de concerts gratuits, dans une ambiance festive et.', 'size': 3}, {'id': '84', 'title': 'Maroc Telecom relance son Festival des Plages pour une 21ᵉ édition festive et inclusive', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/maroc-telecom-relance-son-festival-des-plages-pour-une-21%e1%b5%89-edition-festive-et-inclusive-306681/', 'summary': 'Maroc Telecom relance son Festival des Plages pour une 21ᵉ édition festive et inclusive. Du 15 juillet au 21 août 2025, les plages marocaines accueilleront la 21ᵉ édition du Festival des Plages Maroc Telecom. Lancé en 2002, cet événement estival s’est imposé comme l’un des rendez-vous culturels les plus suivis du pays, réunissant chaque été un large public autour de concerts gratuits. Cette année,', 'size': 3}, {'id': '179', 'title': 'Le Festival des Plages Maroc Telecom revient du 15 juillet au 21 août dans 6 villes', 'source': 'lnt.ma', 'link': 'https://lnt.ma/le-festival-des-plages-maroc-telecom-revient-du-15-juillet-au-21-aout-dans-6-villes/', 'summary': 'Le Festival des Plages Maroc Telecom revient du 15 juillet au 21 août dans 6 villes. Maroc Telecom a annoncé le lancement de la 21ᵉ édition du Festival des Plages, prévue du 15 juillet au 21 août 2025, dans plusieurs stations balnéaires du Royaume. Depuis sa création en 2002, cet événement musical gratuit s’est imposé comme un rendez-vous culturel majeur, réunissant chaque été des millions de spectateurs dans une ambiance festive . ', 'size': 3}], 'main_title': 'Maroc Telecom lance la 21e édition du Festival des Plages du 15 juillet au 21 août'}, {'community_id': '2', 'articles': [{'id': '37', 'title': '[Contenu de marque] Toyota, partenaire des Marocains dans la transition hybride', 'source': 'lematin.ma', 'link': 'https://lematin.ma/automobile/toyota-partenaire-des-marocains-dans-la-transition-hybride/290997', 'summary': '[Contenu de marque] Toyota, partenaire des Marocains dans la transition hybride. Déployée depuis le 1er avril, cette campagne s’appuie sur des visuels percutants, un message clair — HYBRID = TOYOTA — ainsi que sur des arguments factuels (RTB). Elle comprend éga.', 'size': 2}, {'id': '178', 'title': 'Toyota du Maroc lance une vaste campagne de communication sur l’expérience hybride', 'source': 'lnt.ma', 'link': 'https://lnt.ma/toyota-du-maroc-lance-une-vaste-campagne-de-communication-sur-lexperience-hybride/', 'summary': 'Toyota du Maroc lance une vaste campagne de communication sur l’expérience hybride. Toyota du Maroc, leader incontesté de l’hybride à l’échelle nationale et internationale, lance une campagne de communication ambitieuse, invitant les Marocains à découvrir l’expérience hybride. Déployée depuis le 1er avril, cette campagne s’appuie sur des visuels percutants, un message clair — HYBRID = TOYOTA — ainsi que sur des arguments factuels (RTB). Elle comprend également . ', 'size': 2}], 'main_title': '[Contenu de marque] Toyota, partenaire des Marocains dans la transition hybride'}, {'community_id': '6', 'articles': [{'id': '38', 'title': "Décès de l'ancien président nigérian Muhammadu Buhari à l’âge de 82 ans", 'source': 'lematin.ma', 'link': 'https://lematin.ma/monde/deces-de-lancien-president-nigerian-muhammadu-buhari-a-lage-de-82-ans/290960', 'summary': "Décès de l'ancien président nigérian Muhammadu Buhari à l’âge de 82 ans. La famille de l'ancien président a annoncé le décès de Muhammadu Buhari cet après-midi dans une clinique à Londres, a annoncé sur les réseaux sociaux Garba Shehu, q.", 'size': 2}, {'id': '80', 'title': 'Muhammadu Buhari, ancien président du Nigeria, tire sa révérence', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/07/14/muhammadu-buhari-ancien-president-du-nigeria-tire-sa-reverence_1942255/', 'summary': 'Muhammadu Buhari, ancien président du Nigeria, tire sa révérence. L’ancien président nigérian Muhammadu Buhari s’est éteint à 82 ans à Londres. L’ancien président du Nigeria, Muhammadu Buhari, est décédé dimanche à l’âge de 82 ans dans une clinique londonienne, a annoncé son ancien porte-parole Garba Shehu. Ce dernier a précisé que la famille de l’ex-chef de l’État avait confirmé la nouvelle dimanche dans l’après-midi. Buhari.', 'size': 2}], 'main_title': "Décès de l'ancien président nigérian Muhammadu Buhari à l’âge de 82 ans"}, {'community_id': '7', 'articles': [{'id': '47', 'title': 'Vague de chaleur de mardi à vendredi dans plusieurs régions (alerte météo)', 'source': 'lematin.ma', 'link': 'https://lematin.ma/regions/vague-de-chaleur-de-mardi-a-vendredi-dans-plusieurs-regions/290863', 'summary': "Vague de chaleur de mardi à vendredi dans plusieurs régions (alerte météo). Ainsi, des températures variant entre 44 et 47°C seront ainsi enregistrées de mardi à vendredi, dans les provinces d'Errachidia, Zagora, Taroudant, Tata, Assa-Zag, Es-Semara, O.", 'size': 2}, {'id': '185', 'title': 'Météo : Une nouvelle vague de chaleur annoncée', 'source': 'lnt.ma', 'link': 'https://lnt.ma/meteo-une-nouvelle-vague-de-chaleur-annoncee-4/', 'summary': 'Météo : Une nouvelle vague de chaleur annoncée. Une vague de chaleur est prévue de mardi à vendredi prochain dans plusieurs provinces du Royaume, avec des températures oscillant entre 40 et 47°C, a annoncé la Direction générale de la météorologie (DGM). Ainsi, des températures variant entre 44 et 47°C seront ainsi enregistrées de mardi à vendredi, dans les provinces d’Errachidia, Zagora, Taroudant, Tata, . ', 'size': 2}], 'main_title': 'Vague de chaleur de mardi à vendredi dans plusieurs régions (alerte météo)'}, {'community_id': '1', 'articles': [{'id': '57', 'title': "Laâyoune: Le taux d'avancement des travaux de reconstruction du grand barrage de Sakia El Hamra a atteint 83%", 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Laayoune-Le-taux-d-avancement-des-travaux-de-reconstruction-du-grand-barrage-de-Sakia-El-Hamra-a-atteint-83_a69827.html', 'summary': "Laâyoune: Le taux d'avancement des travaux de reconstruction du grand barrage de Sakia El Hamra a atteint 83%. Les travaux de reconstruction du grand barrage de Sakia El Hamra progressent de manière significative et affichent un taux de réalisation de 83%, a fait savoir le directeur de l’Agence du bassin hydraulique de Sakia El Hamra et Oued Eddahab, Sidi Mokhtar El Kanti.", 'size': 2}, {'id': '173', 'title': 'Laâyoune | Les travaux de reconstruction du barrage Sakia El Hamra ont atteint un taux de 83%', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/laayoune-les-travaux-de-reconstruction-du-barrage-sakia-el-hamra-ont-atteint-un-taux-de-83/', 'summary': 'Laâyoune | Les travaux de reconstruction du barrage Sakia El Hamra ont atteint un taux de 83%. Les travaux de reconstruction du grand barrage de Sakia El Hamra progressent de manière significative et affichent un taux de réalisation de 83%, a fait savoir le directeur de l’Agence du bassin hydraulique de Sakia El Hamra et Oued Eddahab, Sidi Mokhtar El Kanti. Portée par le ministère de l’Équipement et de l’Eau, cette installation ', 'size': 2}], 'main_title': "Laâyoune: Le taux d'avancement des travaux de reconstruction du grand barrage de Sakia El Hamra a atteint 83%"}, {'community_id': '16', 'articles': [{'id': '58', 'title': 'TGR : un déficit budgétaire de 24,8 MMDH à fin juin', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/TGR-un-deficit-budgetaire-de-248-MMDH-a-fin-juin_a69826.html', 'summary': 'TGR : un déficit budgétaire de 24,8 MMDH à fin juin. La situation des charges et ressources du Trésor dégage un déficit budgétaire de 24,8 milliards de dirhams (MMDH) à fin juin 2025, contre 20,4 MMDH un an auparavant, selon la Trésorerie Générale du Royaume (TGR).', 'size': 4}, {'id': '132', 'title': 'Finances publiques : Le déficit budgétaire atteint 24,8 MMDH à fin juin', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/au-royaume/finances-publiques-le-deficit-budgetaire-atteint-248-mmdh-a-fin-juin/', 'summary': 'Finances publiques : Le déficit budgétaire atteint 24,8 MMDH à fin juin. La situation des charges et ressources du Trésor dégage un déficit budgétaire de 24,8 milliards de dirhams (MMDH) à fin juin 2025, contre 20,4 MMDH un an auparavant, selon la Trésorerie Générale du Royaume (TGR).', 'size': 4}, {'id': '177', 'title': 'Finances publiques : le déficit budgétaire s’aggrave à fin juin malgré la hausse des recettes', 'source': 'lnt.ma', 'link': 'https://lnt.ma/finances-publiques-le-deficit-budgetaire-saggrave-a-fin-juin-malgre-la-hausse-des-recettes/', 'summary': 'Finances publiques : le déficit budgétaire s’aggrave à fin juin malgré la hausse des recettes. La situation des charges et ressources du Trésor à fin juin 2025 fait ressortir un déficit budgétaire de 24,8 milliards de dirhams (MMDH), en aggravation par rapport aux 20,4 MMDH enregistrés à la même période de l’année précédente, selon les données publiées par la Trésorerie Générale du Royaume (TGR). Ce déficit prend en compte un . ', 'size': 3}, {'id': '193', 'title': 'TGR : plus de 47,3 MMDH de recettes douanières à fin juin', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/433370-tgr-plus-de-473-mmdh-de-recettes-douanieres-a-fin-juin.html', 'summary': 'TGR : plus de 47,3 MMDH de recettes douanières à fin juin. Les recettes douanières nettes se sont établies à plus de 47,3 milliards de dirhams (MMDH) à fin juin 2025, en hausse de 8,1% par rapport à la même période un an auparavant, selon la Trésorerie Générale du Royaume (TGR). Ces recettes, qui proviennent des droits de douane, de la taxe sur la valeur ajoutée (TVA) . ', 'size': 3}], 'main_title': 'TGR : un déficit budgétaire de 24,8 MMDH à fin juin'}, {'community_id': '19', 'articles': [{'id': '60', 'title': 'Sa Majesté le Roi félicite Emmanuel Macron à l’occasion de la fête nationale de son pays', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Sa-Majeste-le-Roi-felicite-Emmanuel-Macron-a-l-occasion-de-la-fete-nationale-de-son-pays_a69821.html', 'summary': 'Sa Majesté le Roi félicite Emmanuel Macron à l’occasion de la fête nationale de son pays. \u200bSa Majesté le Roi Mohammed VI a adressé un message de félicitations au Président de la République française, M. Emmanuel Macron, à l’occasion de la fête nationale de son pays.', 'size': 4}, {'id': '90', 'title': 'Sa Majesté le Roi félicite le Président français à l’occasion de la fête nationale de son pays', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/sa-majeste-le-roi-felicite-le-president-francais-a-loccasion-de-la-fete-nationale-de-son-pays-306641/', 'summary': 'Sa Majesté le Roi félicite le Président français à l’occasion de la fête nationale de son pays. Sa Majesté le Roi Mohammed VI a adressé un message de félicitations au Président de la République française, M. Emmanuel Macron, à l’occasion de la fête nationale de son pays. Dans ce message, le Souverain exprime Ses félicitations les plus chaleureuses à M. Macron et Ses vœux les meilleurs pour', 'size': 4}, {'id': '106', 'title': 'Mohammed VI félicite Emmanuel Macron\xa0à l’occasion de la fête nationale\xa0en France', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/171634/mohammed-felicite-emmanuel-macron-l-occasion.html', 'summary': 'Mohammed VI félicite Emmanuel Macron à l’occasion de la fête nationale en France. Le roi Mohammed VI a adressé un message de félicitations au président français Emmanuel Macron, à l’occasion de la fête nationale de le pays.', 'size': 4}, {'id': '175', 'title': 'SM le Roi félicite le Président français à l’occasion de la fête nationale de son pays', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/sm-le-roi-felicite-le-president-francais-a-loccasion-de-la-fete-nationale-de-son-pays-4/', 'summary': 'SM le Roi félicite le Président français à l’occasion de la fête nationale de son pays. Sa Majesté le Roi Mohammed VI a adressé un message de félicitations au Président de la République française, M. Emmanuel Macron, à l’occasion de la fête nationale de son pays. Dans ce message, le Souverain exprime Ses félicitations les plus chaleureuses à M. Macron et Ses vœux les meilleurs pour le bonheur et la prospérité ', 'size': 4}], 'main_title': 'Sa Majesté le Roi félicite Emmanuel Macron à l’occasion de la fête nationale de son pays'}, {'community_id': '11', 'articles': [{'id': '61', 'title': "France: Décès de l'animateur vedette Thierry Ardisson à 76 ans", 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/France-Deces-de-l-animateur-vedette-Thierry-Ardisson-a-76-ans_a69819.html', 'summary': 'France: Décès de l\'animateur vedette Thierry Ardisson à 76 ans. "Amis de l\'homme en noir, bonsoir!": adepte des interviews et des formules choc, l\'animateur et producteur Thierry Ardisson, figure impertinente et prolifique de la télévision française, est décédé lundi à 76 ans.', 'size': 2}, {'id': '91', 'title': 'Décès de l’animateur vedette de la télévision française Thierry Ardisson', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/deces-de-lanimateur-vedette-de-la-television-francaise-thierry-ardisson-306612/', 'summary': 'Décès de l’animateur vedette de la télévision française Thierry Ardisson. L’animateur vedette de la télévision française, Thierry Ardisson est décédé, lundi, à l’âge de 76 ans des suites d’une longue maladie, rapportent les médias citant sa famille. « Thierry est parti comme il a vécu. En homme courageux et libre. Avec ses enfants et les miens, nous étions unis autour de', 'size': 2}], 'main_title': "France: Décès de l'animateur vedette Thierry Ardisson à 76 ans"}, {'community_id': '12', 'articles': [{'id': '69', 'title': "Ce que l'on sait du projet de loi pour améliorer le rapport entre citoyen et administration", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/07/14/ce-que-lon-sait-du-projet-de-loi-pour-ameliorer-le-rapport-entre-citoyen-et-administration_1942341/', 'summary': "Ce que l'on sait du projet de loi pour améliorer le rapport entre citoyen et administration. L’Institution du Médiateur du Royaume a annoncé lundi qu’elle lancera, d’ici la fin de l’année, un programme national baptisé « Vers une administration de l’égalité » afin de contribuer à la révision et à la mise à jour du dispositif juridique et réglementaire encadrant la relation entre l’administration et l’usager. Ce qui s’est passé L’Institution du Médiateur.", 'size': 2}, {'id': '167', 'title': 'Maroc : Le programme national «\xa0Vers une administration de l’égalité\xa0» sera lancé cette année (Médiateur du Royaume)', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/maroc-le-programme-national-vers-une-administration-de-legalite-sera-lance-cette-annee-mediateur-du-royaume.html', 'summary': 'Maroc : Le programme national « Vers une administration de l’égalité » sera lancé cette année (Médiateur du Royaume). L’Institution du Médiateur du Royaume a annoncé lundi qu’elle lancera, au cours de cette année, un programme national baptisé « Vers une administration de l’égalité » afin de contribuer à la révision et à la mise à jour du dispositif juridique et réglementaire encadrant la relation entre l’administration et l’usager. A travers ce programme, et « partant de . L’article est apparu en premier sur .', 'size': 2}], 'main_title': "Ce que l'on sait du projet de loi pour améliorer le rapport entre citoyen et administration"}, {'community_id': '5', 'articles': [{'id': '86', 'title': 'OCP Green Water atteint l’autonomie hydrique du Groupe OCP avec deux ans d’avance', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/ocp-green-water-atteint-lautonomie-hydrique-du-groupe-ocp-avec-deux-ans-davance-306686/', 'summary': 'OCP Green Water atteint l’autonomie hydrique du Groupe OCP avec deux ans d’avance. OCP Green Water, filiale du Groupe OCP dédiée aux eaux non conventionnelles, vient de franchir une étape majeure en mettant en service, au cours d’une grandiose cérémonie tenue lundi 14 juillet, le pipeline Jorf Lasfar–Khouribga. Ce nouvel ouvrage permet d’alimenter la principale mine de phosphates au monde avec de l’eau', 'size': 3}, {'id': '140', 'title': 'Dessalement : OCP lance un pipeline entre Jorf Lasfar et Khouribga', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/dessalement-ocp-lance-un-pipeline-entre-jorf-lasfar-et-khouribga/', 'summary': 'Dessalement : OCP lance un pipeline entre Jorf Lasfar et Khouribga. En atteignant deux ans avant terme son objectif d’autonomie hydrique, le Groupe OCP confirme son rôle de pionnier dans la transition hydrique nationale. Grâce à la mise en service du pipeline Jorf–Khouribga et à l’exploitation d’eaux usées traitées pour ses sites miniers, OCP Green Water combine innovation technologique, efficacité énergétique et ambition territoriale. Le 14 .', 'size': 3}, {'id': '217', 'title': 'OCP Green Water met en service un pipeline de 200 km entre Jorf Lasfar et Khouribga', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/OCP-Green-Water-met-en-service-un-pipeline-de-200-km-entre-Jorf-Lasfar-et-Khouribga_a69837.html', 'summary': 'OCP Green Water met en service un pipeline de 200 km entre Jorf Lasfar et Khouribga. OCP Green Water (OGW), filiale du Groupe OCP spécialisée dans les ressources hydriques non conventionnelles, a annoncé la mise en service du pipeline J2K, une infrastructure stratégique reliant la station de dessalement de Jorf Lasfar au site minier de Khouribga. Long de plus de 200 km, ce pipeline permet le transport d’eau dessalée depuis l’Atlantique jusqu’au cœur du principal bassin phosphatier du pays.', 'size': 3}], 'main_title': 'OCP Green Water atteint l’autonomie hydrique du Groupe OCP avec deux ans d’avance'}, {'community_id': '18', 'articles': [{'id': '88', 'title': 'Nouveau record du bitcoin à plus de 123.000 dollars', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/nouveau-record-du-bitcoin-a-plus-de-123-000-dollars-306666/', 'summary': 'Nouveau record du bitcoin à plus de 123.000 dollars. Le bitcoin a pour la première fois franchi lundi la barre des 120.000 dollars, porté par les espoirs du secteur d’une régulation américaine favorable aux cryptomonnaies. Le bitcoin, plus importante des cryptomonnaies, a grimpé jusqu’à 123.205,09 dollars sur le marché des changes. L’ether, seconde cryptomonnaie la plus capitalisée après le', 'size': 2}, {'id': '131', 'title': 'Bitcoin : Nouveau record à 123.000 dollars', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/argent/bitcoin-nouveau-record-a-123-000-dollars/', 'summary': "Bitcoin : Nouveau record à 123.000 dollars. Le bitcoin a pour la première fois franchi lundi la barre des 120.000 dollars, porté par les espoirs du secteur d'une régulation américaine favorable aux cryptomonnaies.", 'size': 2}], 'main_title': 'Nouveau record du bitcoin à plus de 123.000 dollars'}, {'community_id': '10', 'articles': [{'id': '93', 'title': 'Les prévision du lundi 14 juillet', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/les-prevision-du-lundi-14-juillet-306604/', 'summary': 'Les prévision du lundi 14 juillet. Voici les prévisions météorologiques établies par la Direction générale de la météorologie pour le lundi 14 juillet 2025 : – Hausse des températures avec un temps assez chaud à chaud sur les plaines Nord et Centre, le Saiss, le Sud-Est et l’intérieur des provinces sahariennes. – Nuages bas assez fréquents', 'size': 2}, {'id': '186', 'title': "Le temps qu'il fera ce mardi 15 juillet 2025", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/433098-le-temps-quil-fera-ce-mardi-15-juillet-2025.html', 'summary': "Le temps qu'il fera ce mardi 15 juillet 2025. Voici les prévisions météorologiques établies par la Direction générale de la météorologie pour le mardi 15 juillet 2025 – Températures en hausse sensible avec temps chaud sur les plaines de Tadla, Rhamna, le Saiss, Oulmès, le Souss, le Sud-Est et l’intérieur des provinces sahariennes. – Nuages bas nombreux avec brume ou brouillard sur les côtes . ", 'size': 2}], 'main_title': 'Les prévision du lundi 14 juillet'}, {'community_id': '13', 'articles': [{'id': '114', 'title': 'E-Visa\xa0: Plus d’un demi-million de demandes traitées en trois ans', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/actualite/e-visa-plus-dun-demi-million-de-demandes-traitees-en-trois-ans', 'summary': 'E-Visa : Plus d’un demi-million de demandes traitées en trois ans. Près d’un demi-million de demandes du E-Visa ont été traitées en trois ans, confirmant ainsi l’intérêt croissant pour cette transformation numérique qui contribue à renforcer l’attractivité du Maroc en tant que destination touristique phare et à consolider son rayonnement à l’international. Cette troisième année marque une hausse significative par rapport à la deuxième, atteignant 187.895 .', 'size': 2}, {'id': '209', 'title': 'Près d’un demi-million de demandes du E-Visa traitées en trois ans', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Pres-d-un-demi-million-de-demandes-du-E-Visa-traitees-en-trois-ans_a69851.html', 'summary': 'Près d’un demi-million de demandes du E-Visa traitées en trois ans. Près d’un demi-million de demandes du E-Visa ont été traitées en trois ans, confirmant ainsi l’intérêt croissant pour cette transformation numérique qui contribue à renforcer l’attractivité du Maroc en tant que destination touristique phare et à consolider son rayonnement à l’international.', 'size': 2}], 'main_title': 'E-Visa\xa0: Plus d’un demi-million de demandes traitées en trois ans'}, {'community_id': '15', 'articles': [{'id': '119', 'title': 'Une victoire qui permet à la sélection nationale de terminer première de son groupe: Le Maroc aux quarts de finale  en battant le Sénégal', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/sports/une-victoire-qui-permet-a-la-selection-nationale-de-terminer-premiere-de-son-groupe-le-maroc-aux-quarts-de-finale-en-battant-le-senegal', 'summary': 'Une victoire qui permet à la sélection nationale de terminer première de son groupe: Le Maroc aux quarts de finale en battant le Sénégal. La sélection marocaine s’est qualifiée pour les quarts de finale de la CAN Maroc 2024, après sa victoire sur l’équipe du Sénégal par 1 but à 0, samedi au stade Olympique de Rabat, pour le compte de la troisième et dernière journée. Elle prend ainsi la tête de de son groupe A avec 7 points. .', 'size': 2}, {'id': '183', 'title': 'CAN féminine : Le Maroc s’impose face au Sénégal et valide son ticket pour les quarts', 'source': 'lnt.ma', 'link': 'https://lnt.ma/can-feminine-le-maroc-simpose-face-au-senegal-et-valide-son-ticket-pour-les-quarts/', 'summary': 'CAN féminine : Le Maroc s’impose face au Sénégal et valide son ticket pour les quarts. La sélection nationale féminine de football s’est qualifiée pour les quarts de finale de la Coupe d’Afrique des nations féminine (Maroc-2024), en battant le Sénégal (1-0) lors du dernier match de la phase de groupes, samedi soir au stade Olympique de Rabat. Avec cette victoire, les Lionnes de l’Atlas terminent en tête du groupe A . ', 'size': 2}], 'main_title': 'Une victoire qui permet à la sélection nationale de terminer première de son groupe: Le Maroc aux quarts de finale  en battant le Sénégal'}, {'community_id': '4', 'articles': [{'id': '208', 'title': "Signature à Rabat d’un mémorandum d'entente entre la Cour des comptes et la National audit office de la République de Gambie", 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Signature-a-Rabat-d-un-memorandum-d-entente-entre-la-Cour-des-comptes-et-la-National-audit-office-de-la-Republique-de_a69853.html', 'summary': "Signature à Rabat d’un mémorandum d'entente entre la Cour des comptes et la National audit office de la République de Gambie. La Cour des comptes du Royaume du Maroc et la National audit office de la République de Gambie ont procédé, lundi à Rabat, à la signature d’un mémorandum d’entente visant à renforcer la coopération bilatérale dans le domaine du contrôle et de l’audit du secteur public.", 'size': 2}, {'id': '235', 'title': 'Maroc-Gambie | Renforcement de la coopération en matière de contrôle et d’audit public', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/maroc-gambie-renforcement-de-la-cooperation-en-matiere-de-controle-et-daudit-public/', 'summary': 'Maroc-Gambie | Renforcement de la coopération en matière de contrôle et d’audit public. La Cour des comptes du Royaume du Maroc et la National audit office de la République de Gambie ont procédé, lundi à Rabat, à la signature d’un mémorandum d’entente visant à renforcer la coopération bilatérale dans le domaine du contrôle et de l’audit du secteur public. Signé par la Première présidente de la Cour des ', 'size': 2}], 'main_title': "Signature à Rabat d’un mémorandum d'entente entre la Cour des comptes et la National audit office de la République de Gambie"}, {'community_id': '9', 'articles': [{'id': '212', 'title': 'Risque extrême d’incendies à Chefchaouen, Taounate et Taza : l’ANEF appelle à la vigilance', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Risque-extreme-d-incendies-a-Chefchaouen-Taounate-et-Taza-l-ANEF-appelle-a-la-vigilance_a69845.html', 'summary': "Risque extrême d’incendies à Chefchaouen, Taounate et Taza : l’ANEF appelle à la vigilance. L'Agence nationale des eaux et forêts (ANEF) a publié, lundi, son Bulletin de risque des incendies de forêts (BRIF) couvrant la période allant du 15 au 18 juillet, sur la base de modèles scientifiques de prédiction et d’analyse des données liées à la nature des forêts, leur combustibilité et inflammabilité, ainsi qu’aux paramètres topoclimatiques.", 'size': 2}, {'id': '234', 'title': 'L’ANEF publie son bulletin de risque des incendies de forêts pour la période allant du 15 au 18 juillet', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/lanef-publie-son-bulletin-de-risque-des-incendies-de-forets/', 'summary': 'L’ANEF publie son bulletin de risque des incendies de forêts pour la période allant du 15 au 18 juillet. L’Agence nationale des eaux et forêts (ANEF) a publié, lundi, son Bulletin de risque des incendies de forêts (BRIF) couvrant la période allant du 15 au 18 juillet, sur la base de modèles scientifiques de prédiction et d’analyse des données liées à la nature des forêts, leur combustibilité et inflammabilité, ainsi qu’aux paramètres topoclimatiques. Selon .', 'size': 2}], 'main_title': 'Risque extrême d’incendies à Chefchaouen, Taounate et Taza : l’ANEF appelle à la vigilance'}, {'community_id': '8', 'articles': [{'id': '213', 'title': "Charte de l'investissement : 237 projets approuvés par la Commission nationale, 166.000 emplois ciblés", 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Charte-de-l-investissement-237-projets-approuves-par-la-Commission-nationale-166-000-emplois-cibles_a69844.html', 'summary': "Charte de l'investissement : 237 projets approuvés par la Commission nationale, 166.000 emplois ciblés. La Commission nationale des investissements (CNI) a approuvé, en huit sessions, 237 projets d'investissement pour une enveloppe globale dépassant 369 milliards de dirhams (MMDH), a indiqué, lundi à la Chambre des représentants, le ministre délégué chargé de l'Investissement, de la Convergence et de l'Evaluation des politiques publiques, Karim Zidane.", 'size': 2}, {'id': '229', 'title': 'Commission nationale des investissements: 237 projets approuvés en 8 sessions pour plus de 369 MMDH', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/affaires/investissements/commission-nationale-des-investissements-237-projets-approuves-en-8-sessions-pour-plus-de-369-mmdh/', 'summary': "Commission nationale des investissements: 237 projets approuvés en 8 sessions pour plus de 369 MMDH. Ces projets permettront la création de plus de 166.000 emplois stables dans l'ensemble des régions du Royaume, a indiqué ce lundi au Parlement Karim Zidane. Le ministre chargé de l'Investissement a également fait le point sur les mesures prises pour simplifier l’acte d’investir.", 'size': 2}], 'main_title': "Charte de l'investissement : 237 projets approuvés par la Commission nationale, 166.000 emplois ciblés"}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
                        
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ? d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        // Fonction pour cacher le tooltip
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = '';
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
    
    
</body>




</html>
    