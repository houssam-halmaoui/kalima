<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); 
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title"> Les principales actualités des dernières 24 heures

</div>    
        <div class="header-subtitle"> Dernière mise à jour : 27/07/2025 - 18h29</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"></div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '9', 'title': 'Les températures attendues ce dimanche 27 juillet 2025', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/435147-les-temperatures-attendues-ce-dimanche-27-juillet-2025.html', 'summary': 'Les températures attendues ce dimanche 27 juillet 2025. Voici les températures minimales et maximales prévues par la Direction générale de la météorologie pour le dimanche 27 juillet 2025 : Min Max – Oujda 18 37 – Bouarfa 20 37 – Al Hoceima 20 28 – Tétouan 21 30 – Sebta 21 26 – Mellilia 20 28 – Tanger 21 33 – Kénitra 21 . ', 'size': 2}, {'id': '127', 'title': 'Températures prévues pour le lundi 28 juillet 2025', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/temperatures-prevues-pour-le-lundi-28-juillet-2025/', 'summary': 'Températures prévues pour le lundi 28 juillet 2025. Voici les températures minimales et maximales prévues par la Direction générale de la météorologie pour le lundi 28 juillet 2025 : Min Max – Oujda 19 40 – Bouarfa 21 38 – Al Hoceima 22 35 – Tétouan 22 37 – Sebta 20 33 – Mellilia 21 31 – Tanger 22 29 – Kénitra 19 .', 'size': 2}], 'main_title': 'Les températures attendues ce dimanche 27 juillet 2025'}, {'community_id': '4', 'articles': [{'id': '13', 'title': 'S.M. le Roi félicite les membres de la sélection nationale de football pour leur brillant parcours à la CAN féminine', 'source': 'lematin.ma', 'link': 'https://lematin.ma/activites-royales/sm-le-roi-felicite-les-membres-de-la-selection-nationale-feminine/293402', 'summary': "S.M. le Roi félicite les membres de la sélection nationale de football pour leur brillant parcours à la CAN féminine. Dans ce message, le Souverain affirme avoir suivi avec une grande fierté le brillant parcours de l’équipe nationale à la Coupe d'Afrique des Nations féminine 2024, couronné par.", 'size': 5}, {'id': '33', 'title': 'SM le Roi félicite les membres de la sélection nationale de football pour leur brillant parcours à la CAN féminine 2024', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/SM-le-Roi-felicite-les-membres-de-la-selection-nationale-de-football-pour-leur-brillant-parcours-a-la-CAN-feminine-2024_a70313.html', 'summary': 'SM le Roi félicite les membres de la sélection nationale de football pour leur brillant parcours à la CAN féminine 2024. \u200bSa Majesté le Roi Mohammed VI, que Dieu L’assiste, a adressé un message de félicitations aux membres de la sélection nationale féminine de football pour leur brillant parcours à la Coupe d’Afrique des Nations féminine de football 2024.', 'size': 5}, {'id': '72', 'title': 'Le Roi Mohammed VI félicite la sélection nationale de football pour leur brillant parcours à la CAN féminine 2024', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/coupe-dafrique-des-nations-feminine-de-football-2024.html', 'summary': 'Le Roi Mohammed VI félicite la sélection nationale de football pour leur brillant parcours à la CAN féminine 2024. Le Roi Mohammed VI a adressé un message de félicitations aux membres de la sélection nationale féminine de football pour leur brillant parcours à la Coupe d’Afrique des Nations féminine de football 2024. Dans ce message, le souverain affirme avoir suivi avec une grande fierté le brillant parcours de l’équipe nationale à la Coupe d’Afrique . L’article est apparu en premier sur .', 'size': 5}, {'id': '76', 'title': 'SM le Roi félicite la sélection nationale de football pour leur brillant parcours à la CAN féminine 2024', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/sm-le-roi-felicite-la-selection-nationale-de-football-pour-leur-brillant-parcours-a-la-can-feminine-2024/', 'summary': 'SM le Roi félicite la sélection nationale de football pour leur brillant parcours à la CAN féminine 2024. Sa Majesté le Roi Mohammed VI, que Dieu L’assiste, a adressé un message de félicitations aux membres de la sélection nationale féminine de football pour leur brillant parcours à la Coupe d’Afrique des Nations féminine de football 2024. Dans ce message, le Souverain affirme avoir suivi avec une grande fierté le brillant parcours de l’équipe ', 'size': 5}, {'id': '128', 'title': 'S.M. le Roi félicite les membres de la sélection nationale de football pour leur brillant parcours à la CAN féminine 2024', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/s-m-le-roi-felicite-les-membres-de-la-selection-nationale-de-football/', 'summary': 'S.M. le Roi félicite les membres de la sélection nationale de football pour leur brillant parcours à la CAN féminine 2024. Sa Majesté le Roi Mohammed VI, que Dieu L’assiste, a adressé un message de félicitations aux membres de la sélection nationale féminine de football pour leur brillant parcours à la Coupe d’Afrique des Nations féminine de football 2024. Dans ce message, le Souverain affirme avoir suivi avec une grande fierté le brillant parcours de l’équipe .', 'size': 5}], 'main_title': 'S.M. le Roi félicite les membres de la sélection nationale de football pour leur brillant parcours à la CAN féminine'}, {'community_id': '1', 'articles': [{'id': '17', 'title': 'Football : Inauguration du Bureau Afrique de la FIFA au Maroc', 'source': 'lematin.ma', 'link': 'https://lematin.ma/videos/football-inauguration-du-bureau-afrique-de-la-fifa-au-maroc/293384', 'summary': "Football : Inauguration du Bureau Afrique de la FIFA au Maroc. Le bureau Afrique de la Fédération internationale de football (FIFA) a été inauguré, samedi au complexe Mohammed VI de football, lors d'une cérémonie présidée par le président.", 'size': 5}, {'id': '40', 'title': 'FIFA : Inauguration du Bureau Régional de Rabat', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/FIFA-Inauguration-du-Bureau-Regional-de-Rabat_a70305.html', 'summary': 'FIFA : Inauguration du Bureau Régional de Rabat. Ce samedi à Rabat, la FIFA a officiellement inauguré son bureau régional pour l’Afrique du Nord, un nouvel ajout à son réseau mondial d’antennes', 'size': 2}, {'id': '50', 'title': 'La FIFA inaugure son Bureau Afrique au Maroc, «un jour de fête» pour Infantino', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/la-fifa-inaugure-son-bureau-afrique-au-maroc-un-jour-de-fete-pour-infantino-307482/', 'summary': 'La FIFA inaugure son Bureau Afrique au Maroc, «un jour de fête» pour Infantino. La Fédération internationale de football (FIFA) a inauguré, samedi 26 juillet, le siège de son Bureau Afrique, sis au Complexe Mohammed VI de football à Salé, au cours d’une cérémonie présidée par Gianni Infantino, qui évoque « un moment historique et un jour de fête et de bonheur ». « Ce n’est pas', 'size': 4}, {'id': '71', 'title': 'Salé accueille le nouveau bureau Afrique de la FIFA au complexe Mohammed\u202fVI', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/sale-accueille-le-nouveau-bureau-afrique-de-la-fifa-au-complexe-mohammed-vi/', 'summary': 'Salé accueille le nouveau bureau Afrique de la FIFA au complexe Mohammed VI. Le bureau Afrique de la Fédération internationale de football (FIFA) a été inauguré, samedi au complexe Mohammed VI de football à Salé, lors d’une cérémonie présidée par le président de la FIFA, Gianni Infantino. Cette cérémonie s’est déroulée en présence du président de la Confédération africaine de football (CAF), Patrice Motsepe, du président de la .', 'size': 4}, {'id': '75', 'title': 'Maroc: inauguration du bureau Afrique de la FIFA au complexe Mohammed VI à Salé', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/275540.html', 'summary': 'Maroc: inauguration du bureau Afrique de la FIFA au complexe Mohammed VI à Salé. Le bureau Afrique de la Fédération internationale de football (FIFA) a été inauguré, samedi au complexe Mohammed VI de football à Salé, lors d’une cérémonie présidée par le président de la FIFA, Gianni Infantino. Cette cérémonie s’est déroulée en présence du président de la Confédération africaine de football (CAF), Patrice Motsepe, du président de la . L’article est apparu en premier sur .', 'size': 4}], 'main_title': 'Football : Inauguration du Bureau Afrique de la FIFA au Maroc'}, {'community_id': '5', 'articles': [{'id': '74', 'title': 'Désillusion pour les marocaines, qui s’inclinent en finale de la CAN 2024 contre le Nigéria', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/desillusion-pour-les-marocaines-qui-sinclinent-en-finale-de-la-can-2024-contre-le-nigeria.html', 'summary': 'Désillusion pour les marocaines, qui s’inclinent en finale de la CAN 2024 contre le Nigéria. La sélection nationale féminine du Nigeria a remporté la finale de la Coupe d’Afrique des Nations 2024 face aux Lionnes de l’Atlas au Stade olympique de Rabat. L’article est apparu en premier sur .', 'size': 2}, {'id': '131', 'title': 'Finale de la CAN féminine 2024 : le Maroc s’incline de justesse face au Nigeria', 'source': 'lnt.ma', 'link': 'https://lnt.ma/finale-de-la-can-feminine-2024-le-maroc-sincline-de-justesse-face-au-nigeria/', 'summary': 'Finale de la CAN féminine 2024 : le Maroc s’incline de justesse face au Nigeria. La sélection féminine marocaine de football a livré une prestation engagée et techniquement solide lors de la finale de la Coupe d’Afrique des Nations (CAN) 2024, organisée au Maroc, mais s’est inclinée face à l’équipe du Nigeria sur le score de 3 à 2, samedi soir au stade olympique de Rabat. Ce résultat, bien que . ', 'size': 2}], 'main_title': 'Désillusion pour les marocaines, qui s’inclinent en finale de la CAN 2024 contre le Nigéria'}, {'community_id': '2', 'articles': [{'id': '80', 'title': 'Nouvelle vague de chaleur attendue dans plusieurs régions de dimanche à mardi', 'source': 'lnt.ma', 'link': 'https://lnt.ma/nouvelle-vague-de-chaleur-attendue-dans-plusieurs-regions-de-dimanche-a-mardi/', 'summary': 'Nouvelle vague de chaleur attendue dans plusieurs régions de dimanche à mardi. La Direction générale de la météorologie (DGM) a émis un bulletin d’alerte de niveau de vigilance orange concernant une vague de chaleur qui devrait toucher plusieurs provinces du Royaume entre dimanche 27 juillet et mardi 29 juillet 2025. Selon les prévisions de la DGM, les températures maximales pourraient atteindre entre 45 et 48°C dans plusieurs . ', 'size': 2}, {'id': '118', 'title': 'Alerte météo: Vague de chaleur de dimanche à mardi', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/actualite/alerte-meteo-vague-de-chaleur-de-dimanche-a-mardi', 'summary': 'Alerte météo: Vague de chaleur de dimanche à mardi. Une vague de chaleur et un temps chaud sont prévus de dimanche à mardi dans plusieurs provinces du Royaume, avec des températures oscillant entre 42 et 48°C, a annoncé la Direction générale de la météorologie (DGM). Ainsi, une vague de chaleur avec des températures comprises entre 45 et 48°C sera enregistrée de dimanche à mardi .', 'size': 2}], 'main_title': 'Nouvelle vague de chaleur attendue dans plusieurs régions de dimanche à mardi'}, {'community_id': '3', 'articles': [{'id': '89', 'title': 'Tanger Med: une tentative de trafic de plus de 4 tonnes de Chira déjouée', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/435231-tanger-med-une-tentative-de-trafic-de-plus-de-4-tonnes-de-chira-dejouee.html', 'summary': 'Tanger Med: une tentative de trafic de plus de 4 tonnes de Chira déjouée. Les éléments de la Sûreté nationale et des douanes opérant au port de Tanger Med ont réussi, dans les premières heures de la matinée de ce dimanche 27 juillet, à déjouer une tentative de trafic de 4 tonnes et 374 kilogrammes de résine de cannabis (chira) à bord d’un camion de transport international de marchandises. . ', 'size': 2}, {'id': '101', 'title': 'Saisie de plus de 4 tonnes de chira au port Tanger Med', 'source': 'lematin.ma', 'link': 'https://lematin.ma/regions/saisie-de-plus-de-4-tonnes-de-chira-au-port-tanger-med/293470', 'summary': 'Saisie de plus de 4 tonnes de chira au port Tanger Med. Les opérations conjointes de contrôle menées par les services de la Sûreté nationale et de la Douane ont permis la saisie de cette importante cargaison de stupéfiants, soigneusemen.', 'size': 3}, {'id': '114', 'title': 'Tanger Med : Saisie de plus de 4 tonnes de chira dans un camion à destination de l’Europe', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/172808/tanger-saisie-plus-tonnes-chira.html', 'summary': 'Tanger Med : Saisie de plus de 4 tonnes de chira dans un camion à destination de l’Europe. Les éléments de la Sûreté nationale et de la Douane opérant au port de Tanger Med ont mis en échec, aux premières heures de dimanche, une tentative de trafic de 4,374 tonnes de chira à bord d’un camion de transport international de marchandises. Les opérations conjointes de contrôle menées par les services de la Sûreté nationale et de la Douane ont permis la saisie de cette importante cargaison de stupéfiants, soigneusement dissimulée dans un chargement de fruits transporté par une remorque tirée par un camion immatriculé au Maroc, en partance pour un port européen, apprend la MAP de source sécuritaire.', 'size': 3}, {'id': '125', 'title': 'Tanger : mise en échec d’une tentative de trafic de plus de 4 tonnes de chira', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/tanger-mise-en-echec-dune-tentative-de-trafic-de-plus-de-4-tonnes-de-chira/', 'summary': 'Tanger : mise en échec d’une tentative de trafic de plus de 4 tonnes de chira. Les éléments de la Sûreté nationale et de la Douane opérant au port de Tanger Med ont mis en échec, aux premières heures de dimanche, une tentative de trafic de 4,374 tonnes de chira à bord d’un camion de transport international de marchandises. Les opérations conjointes de contrôle menées par les services de la Sûreté .', 'size': 4}], 'main_title': 'Tanger : mise en échec d’une tentative de trafic de plus de 4 tonnes de chira'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
                        
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ? d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        // Fonction pour cacher le tooltip
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = '';
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
    
    
</body>




</html>
    