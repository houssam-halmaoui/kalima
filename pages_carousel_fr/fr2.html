<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); 
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title"> Les principales actualités des dernières 24 heures

</div>    
        <div class="header-subtitle"> Dernière mise à jour : 21/08/2025 - 18h29</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"></div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '15', 'articles': [{'id': '2', 'title': 'Au Sommet de la TICAD 9, le Maroc met en avant la vision du Roi Mohammed VI', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/438230-au-sommet-de-la-ticad-9-le-maroc-met-en-avant-la-vision-du-roi-mohammed-vi.html', 'summary': 'Au Sommet de la TICAD 9, le Maroc met en avant la vision du Roi Mohammed VI. La vision et les initiatives stratégiques du Roi Mohammed VI pour le développement et l’intégration du continent africain ont été mises en exergue lors du 9e Sommet de la Conférence internationale de Tokyo sur le développement de l’Afrique (TICAD-9), qui se tient jusqu’à vendredi à Yokohama, au Japon. Intervenant lors d’une conférence organisée, jeudi, dans . ', 'size': 2}, {'id': '93', 'title': 'La vision royale pour l’Afrique mise en avant à la TICAD-9 à Yokohama', 'source': 'lnt.ma', 'link': 'https://lnt.ma/la-vision-royale-pour-lafrique-mise-en-avant-a-la-ticad-9-a-yokohama/', 'summary': 'La vision royale pour l’Afrique mise en avant à la TICAD-9 à Yokohama. La vision et les initiatives stratégiques de SM le Roi Mohammed VI pour le développement et l’intégration du continent africain ont été mises en exergue lors du 9e Sommet de la Conférence internationale de Tokyo sur le développement de l’Afrique (TICAD-9), qui se tient jusqu’à vendredi à Yokohama, au Japon. Intervenant lors d’une conférence organisée, . ', 'size': 2}], 'main_title': 'Au Sommet de la TICAD 9, le Maroc met en avant la vision du Roi Mohammed VI'}, {'community_id': '6', 'articles': [{'id': '8', 'title': 'Les températures attendues ce jeudi 21 août 2025', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/438222-les-temperatures-attendues-ce-jeudi-21-aout-2025.html', 'summary': 'Les températures attendues ce jeudi 21 août 2025. Voici les températures minimales et maximales prévues par la Direction générale de la météorologie pour le jeudi 21 août 2025 Min Max – Oujda 21 37 – Bouarfa 21 37 – Al Hoceima 22 29 – Tétouan 23 33 – Sebta 21 24 – Mellilia 23 28 – Tanger 21 26 – Kénitra 19 26 . ', 'size': 2}, {'id': '162', 'title': 'Températures prévues pour le vendredi 22 août 2025', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/temperatures-prevues-pour-le-vendredi-22-aout-2025/', 'summary': 'Températures prévues pour le vendredi 22 août 2025. Voici les températures minimales et maximales prévues par la Direction générale de la météorologie pour le vendredi 22 août 2025: Min Max – Oujda 21 37 – Bouarfa 19 37 – Al Hoceima 20 29 – Tétouan 22 30 – Sebta 21 26 – Mellilia 21 27 – Tanger 19 27 – Kénitra 18 30 .', 'size': 2}], 'main_title': 'Les températures attendues ce jeudi 21 août 2025'}, {'community_id': '13', 'articles': [{'id': '9', 'title': "Le temps qu'il fera ce jeudi 21 août 2025", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/438221-le-temps-quil-fera-ce-jeudi-21-aout-2025.html', 'summary': "Le temps qu'il fera ce jeudi 21 août 2025. Voici les prévisions météorologiques établies par la Direction générale de la météorologie pour le jeudi 21 août 2025 – Temps assez chaud sur les plaines intérieures Centre, l’Oriental, l’intérieur des provinces Sud et le Sud-Est. – Ondées et orages épars sur le Sud des provinces Sahariennes. – Nuages cumuliformes sur le Haut Atlas, le Sud-Est . ", 'size': 2}, {'id': '58', 'title': 'Les prévisions du jeudi 21 août 2025', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/les-previsions-du-jeudi-21-aout-2025-308836/', 'summary': 'Les prévisions du jeudi 21 août 2025. Voici les prévisions météorologiques établies par la Direction générale de la météorologie pour le jeudi 21 août 2025 : – Temps assez chaud sur les plaines intérieures Centre, l’Oriental, l’intérieur des provinces Sud et le Sud-Est. – Ondées et orages épars sur le Sud des provinces Sahariennes. – Nuages cumuliformes', 'size': 2}], 'main_title': "Le temps qu'il fera ce jeudi 21 août 2025"}, {'community_id': '9', 'articles': [{'id': '12', 'title': "Fête de la Jeunesse : Célébration de l'engagement Royal constant envers les jeunes", 'source': 'lematin.ma', 'link': 'https://lematin.ma/nation/sm-le-roi-et-la-jeunesse-un-pacte-pour-batir-le-maroc-de-demain/297281', 'summary': "Fête de la Jeunesse : Célébration de l'engagement Royal constant envers les jeunes. Jamais l’humanité n’a compté autant de jeunes : près de 1,8 milliard de personnes âgées de 10 à 24 ans. Le Maroc partage cette réalité démographique : près d’un tiers de sa populat.", 'size': 3}, {'id': '70', 'title': 'Fête de la Jeunesse : Célébration de l’engagement Royal constant envers les jeunes, acteurs clés d’un Maroc émergent', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/actualite/fete-de-la-jeunesse-celebration-de-lengagement-royal-constant-envers-les-jeunes-acteurs-cles-dun-maroc-emergent', 'summary': 'Fête de la Jeunesse : Célébration de l’engagement Royal constant envers les jeunes, acteurs clés d’un Maroc émergent. La Fête de la Jeunesse, célébrée jeudi par le peuple marocain, offre l’occasion de mettre en avant l’engagement constant de Sa Majesté le Roi Mohammed VI, que Dieu L’assiste, en faveur du renforcement de la place des jeunes dans la dynamique sociétale et de leur participation politique et économique agissante au service d’un Maroc émergent, .', 'size': 4}, {'id': '134', 'title': 'Fête de la Jeunesse: Un engagement royal constant envers les jeunes, pierre angulaire du Maroc émergent', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/fete-de-la-jeunesse-un-engagement-royal-constant-envers-les-jeunes-pierre-angulaire-du-maroc-emergent-308858/', 'summary': 'Fête de la Jeunesse: Un engagement royal constant envers les jeunes, pierre angulaire du Maroc émergent. La Fête de la Jeunesse, célébrée jeudi par le peuple marocain, offre l’occasion de mettre en avant l’engagement constant de Sa Majesté le Roi Mohammed VI en faveur du renforcement de la place des jeunes dans la dynamique sociétale et de leur participation politique et économique agissante au service d’un', 'size': 3}, {'id': '164', 'title': 'Fête de la Jeunesse | Un engagement royal constant en faveur des jeunes', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/fete-de-la-jeunesse-un-engagement-royal-constant-en-faveur-des-jeunes/', 'summary': 'Fête de la Jeunesse | Un engagement royal constant en faveur des jeunes. La Fête de la Jeunesse, célébrée jeudi par le peuple marocain, offre l’occasion de mettre en avant l’engagement constant de Sa Majesté le Roi Mohammed VI, que Dieu L’assiste, en faveur du renforcement de la place des jeunes dans la dynamique sociétale et de leur participation politique et économique agissante au service d’un Maroc émergent, ', 'size': 4}], 'main_title': 'Fête de la Jeunesse : Célébration de l’engagement Royal constant envers les jeunes, acteurs clés d’un Maroc émergent'}, {'community_id': '10', 'articles': [{'id': '17', 'title': 'Kénitra : un mineur interpellé après une tentative de vol avec un faux colis explosif', 'source': 'lematin.ma', 'link': 'https://lematin.ma/regions/kenitraun-mineur-interpelle-pour-tentative-de-vol-avec-faux-colis-explosif/297337', 'summary': 'Kénitra : un mineur interpellé après une tentative de vol avec un faux colis explosif. Selon une source sécuritaire, le suspect aurait pénétré dans le magasin en proférant des menaces et en prétendant être en possession d’un engin explosif. Après avoir échoué dans sa.', 'size': 5}, {'id': '31', 'title': "Kénitra : la police arrête le mineur qui a tenté de voler un commerce sous la menace d'un faux colis explosif", 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Kenitra-la-police-arrete-le-mineur-qui-a-tente-de-voler-un-commerce-sous-la-menace-d-un-faux-colis-explosif_a70959.html', 'summary': "Kénitra : la police arrête le mineur qui a tenté de voler un commerce sous la menace d'un faux colis explosif. Les éléments de l'unité mobile de la police de secours à la Préfecture de police de Kénitra ont interpellé, mercredi vers midi, un mineur soupçonné d'avoir tenté de dérober un commerce sous la menace d'un faux colis explosif.", 'size': 4}, {'id': '49', 'title': "Kénitra : interpellation d’un mineur soupçonné de tentative de vol sous la menace d'un faux colis explosif", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/20/kenitra-interpellation-dun-mineur-soupconne-de-tentative-de-vol-sous-la-menace-dun-faux-colis-explosif_1947064/', 'summary': "Kénitra : interpellation d’un mineur soupçonné de tentative de vol sous la menace d'un faux colis explosif. Les éléments de l’unité mobile de la police de secours à la Préfecture de police de Kénitra ont interpellé, mercredi vers midi, un mineur soupçonné d’avoir tenté de dérober un commerce sous la menace d’un faux colis explosif. Selon les premiers éléments de l’enquête, le suspect âgé de 17 ans aurait tenté de commettre un.", 'size': 5}, {'id': '78', 'title': 'Kénitra : Un mineur interpellé pour tentative de vol avec un faux colis piégé', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/influences/societe/kenitra-un-mineur-interpelle-pour-tentative-de-vol-avec-un-faux-colis-piege/', 'summary': "Kénitra : Un mineur interpellé pour tentative de vol avec un faux colis piégé. Selon les premiers éléments de l'enquête, le suspect âgé de 17 ans aurait tenté de commettre un vol dans un commerce en proférant de fausses menaces, alléguant être en possession d'un colis piégé avant de tenter de prendre la fuite.", 'size': 4}, {'id': '95', 'title': 'Kénitra: un mineur arrêté après une tentative de vol avec un faux colis explosif', 'source': 'lnt.ma', 'link': 'https://lnt.ma/kenitra-un-mineur-arrete-apres-une-tentative-de-vol-avec-un-faux-colis-explosif/', 'summary': 'Kénitra: un mineur arrêté après une tentative de vol avec un faux colis explosif. Les éléments de l’unité mobile de la police de secours à la Préfecture de police de Kénitra ont interpellé, mercredi vers midi, un mineur soupçonné d’avoir tenté de dérober un commerce sous la menace d’un faux colis explosif. Selon les premiers éléments de l’enquête, le suspect âgé de 17 ans aurait tenté de commettre un . ', 'size': 5}], 'main_title': 'Kénitra : un mineur interpellé après une tentative de vol avec un faux colis explosif'}, {'community_id': '12', 'articles': [{'id': '29', 'title': 'Agadir : Lancement du projet de sécurisation de l’eau potable à partir de la station de Tamri', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Agadir-Lancement-du-projet-de-securisation-de-l-eau-potable-a-partir-de-la-station-de-Tamri_a70960.html', 'summary': 'Agadir : Lancement du projet de sécurisation de l’eau potable à partir de la station de Tamri. Dans le cadre de son engagement pour la sécurisation de l’alimentation en eau potable de la région de Souss-Massa, l’Office National de l’Électricité et de l’Eau Potable (ONEE) a donné mercredi, le coup d’envoi des travaux de dédoublement d’un tronçon important de l’adduction régionale émanant du Barrage Moulay Abdellah, situé au nord d’Agadir.', 'size': 5}, {'id': '59', 'title': 'Agadir: la sécurisation de l’alimentation en eau potable sur de bons rails', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/agadir-la-securisation-de-lalimentation-en-eau-potable-sur-de-bons-rails-308825/', 'summary': 'Agadir: la sécurisation de l’alimentation en eau potable sur de bons rails. L’Office national de l’électricité et de l’eau potable (ONEE) a lancé, mercredi 20 août, les travaux de dédoublement d’un important tronçon d’adduction régionale à partir du barrage Moulay Abdellah, situé au nord d’Agadir, dans le cadre du programme de gestion du stress hydrique. Le projet porte sur le transfert des', 'size': 5}, {'id': '68', 'title': 'L’ONEE lance les travaux de réalisation du projet de sécurisation de l’eau potable du Grand Agadir à partir de la station de Tamri', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/actualite/lonee-lance-les-travaux-de-realisation-du-projet-de-securisation-de-leau-potable-du-grand-agadir-a-partir-de-la-station-de-tamri', 'summary': 'L’ONEE lance les travaux de réalisation du projet de sécurisation de l’eau potable du Grand Agadir à partir de la station de Tamri. Dans le cadre de son engagement pour la sécurisation de l’alimentation en eau potable de la région de Souss-Massa, l’Office National de l’Électricité et de l’Eau Potable (ONEE) a donné mercredi, le coup d’envoi des travaux de dédoublement d’un tronçon important de l’adduction régionale émanant du Barrage Moulay Abdellah, situé au nord d’Agadir. Lancé par .', 'size': 5}, {'id': '89', 'title': 'L’ONEE lance les travaux pour sécuriser l’eau potable du Grand Agadir via Tamri', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/lonee-lance-les-travaux-pour-securiser-leau-potable-du-grand-agadir-via-tamri/', 'summary': 'L’ONEE lance les travaux pour sécuriser l’eau potable du Grand Agadir via Tamri. Dans le cadre de son engagement pour la sécurisation de l’alimentation en eau potable de la région de Souss-Massa, l’Office National de l’Électricité et de l’Eau Potable (ONEE) a donné mercredi, le coup d’envoi des travaux de dédoublement d’un tronçon important de l’adduction régionale émanant du Barrage Moulay Abdellah, situé au nord d’Agadir. Lancé par .', 'size': 5}, {'id': '96', 'title': 'ONEE lance un projet stratégique pour sécuriser l’alimentation en eau potable du Grand Agadir', 'source': 'lnt.ma', 'link': 'https://lnt.ma/onee-lance-un-projet-strategique-pour-securiser-lalimentation-en-eau-potable-du-grand-agadir/', 'summary': 'ONEE lance un projet stratégique pour sécuriser l’alimentation en eau potable du Grand Agadir. Dans le cadre de son engagement pour la sécurisation de l’alimentation en eau potable de la région de Souss-Massa, l’Office National de l’Électricité et de l’Eau Potable (ONEE) a donné mercredi, le coup d’envoi des travaux de dédoublement d’un tronçon important de l’adduction régionale émanant du Barrage Moulay Abdellah, situé au nord d’Agadir. Lancé par . ', 'size': 5}], 'main_title': 'Agadir : Lancement du projet de sécurisation de l’eau potable à partir de la station de Tamri'}, {'community_id': '7', 'articles': [{'id': '34', 'title': "Gaza : les troupes israéliennes subissent une attaque d'ampleur inédite", 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Gaza-les-troupes-israeliennes-subissent-une-attaque-d-ampleur-inedite_a70956.html', 'summary': "Gaza : les troupes israéliennes subissent une attaque d'ampleur inédite. L'armé israélienne a affirmé mercredi avoir tué une dizaine de combattants du Hamas dans la bande de Gaza en repoussant une attaque de la branche armée du mouvement islamiste palestinien, qui assure elle avoir tué un nombre indéterminé de soldats israéliens.", 'size': 2}, {'id': '41', 'title': "L'armée israélienne resserre son étau sur la ville de Gaza", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/21/larmee-israelienne-resserre-son-etau-sur-la-ville-de-gaza_1947120/', 'summary': "L'armée israélienne resserre son étau sur la ville de Gaza. L’armée israélienne resserre son étau sur la ville de Gaza, où ses troupes ont lancé de premières opérations et poursuivi leurs bombardements jeudi avec l’objectif de prendre ce dernier grand bastion du Hamas dans le territoire palestinien. Cinq divisions de l’armée, composées de dizaines de milliers de soldats, doivent participer à cette offensive, selon l’armée,.", 'size': 2}], 'main_title': "Gaza : les troupes israéliennes subissent une attaque d'ampleur inédite"}, {'community_id': '11', 'articles': [{'id': '46', 'title': 'Étudiants marocains en France, voici les villes universitaires les plus chères en 2025', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/20/etudiants-marocains-voici-les-ville-universitaires-francaises-les-plus-cheres-en-2025_1947073/', 'summary': 'Étudiants marocains en France, voici les villes universitaires les plus chères en 2025. Paris reste en tête du classement des villes universitaires françaises où les coûts de la vie sont les plus élevés, avec un budget mensuel estimé à plus de 1.600 euros en 2025, selon l’étude annuelle de l’Union nationale des étudiants de France (Unef) publiée mercredi. D’après l’Unef, il faudrait désormais débourser 1.627 euros par mois.', 'size': 2}, {'id': '83', 'title': 'Paris reste la ville universitaire la plus chère de France', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/paris-reste-la-ville-universitaire-la-plus-chere-de-france/', 'summary': 'Paris reste la ville universitaire la plus chère de France. Paris reste en tête du classement des villes universitaires françaises où les coûts de la vie sont les plus élevés, avec un budget mensuel estimé à plus de 1.600 euros en 2025, selon l’étude annuelle de l’Union nationale des étudiants de France (Unef) publiée mercredi. D’après l’Unef, il faudrait désormais débourser 1.627 euros par mois .', 'size': 2}], 'main_title': 'Étudiants marocains en France, voici les villes universitaires les plus chères en 2025'}, {'community_id': '14', 'articles': [{'id': '53', 'title': 'L’ONU salue la “générosité” du roi pour l’aide humanitaire “importante” envoyée à Gaza', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/20/lonu-salue-la-generosite-du-roi-pour-laide-humanitaire-importante-envoyee-a-gaza_1947046/', 'summary': 'L’ONU salue la “générosité” du roi pour l’aide humanitaire “importante” envoyée à Gaza. L’Organisation des Nations Unies a salué la “générosité” du roi Mohammed VI, président du Comité Al-Qods, suite à l’envoi d’une aide humanitaire supplémentaire “importante” au profit des habitants de Gaza. Nous saluons la générosité et la décision prise par Sa Majesté le roi Mohammed VI d’envoyer une aide humanitaire importante pour la population de Gaza« , a.', 'size': 5}, {'id': '75', 'title': "SM le Roi Mohammed VI, Président  du Comité Al-Qods, donne Ses Très Hautes Instructions pour l'envoi d'une aide humanitaire supplémentaire au profit des habitants de Gaza", 'source': 'www.libe.ma', 'link': 'https://www.libe.ma/SM-le-Roi-Mohammed-VI-President-du-Comite-Al-Qods-donne-Ses-Tres-Hautes-Instructions-pour-l-envoi-d-une-aide_a155331.html', 'summary': "SM le Roi Mohammed VI, Président du Comité Al-Qods, donne Ses Très Hautes Instructions pour l'envoi d'une aide humanitaire supplémentaire au profit des habitants de Gaza.", 'size': 5}, {'id': '80', 'title': 'L’ONU salue la «\xa0générosité\xa0» de SM le Roi pour l’aide humanitaire «\xa0importante\xa0» envoyée à Gaza', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/pouvoirs/lonu-salue-la-generosite-de-sm-le-roi-pour-laide-humanitaire-importante-envoyee-a-gaza/', 'summary': 'L’ONU salue la « générosité » de SM le Roi pour l’aide humanitaire « importante » envoyée à Gaza. L’Organisation des Nations Unies a salué la "générosité" de Sa Majesté le Roi Mohammed VI, Président du Comité Al-Qods, suite à l’envoi, sur Très Hautes Instructions du Souverain, d\'une aide humanitaire supplémentaire "importante" au profit des habitants de Gaza.', 'size': 5}, {'id': '92', 'title': 'L’ONU salue la «\xa0générosité\xa0» de SM le Roi pour l’aide humanitaire envoyée à Gaza', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/lonu-salue-la-generosite-de-sm-le-roi-pour-laide-humanitaire-envoyee-a-gaza/', 'summary': 'L’ONU salue la « générosité » de SM le Roi pour l’aide humanitaire envoyée à Gaza. L’Organisation des Nations Unies a salué la “générosité” de Sa Majesté le Roi Mohammed VI, Président du Comité Al-Qods, suite à l’envoi, sur Très Hautes Instructions du Souverain, d’une aide humanitaire supplémentaire “importante” au profit des habitants de Gaza. “Nous saluons la générosité et la décision prise par Sa Majesté le Roi Mohammed VI d’envoyer ', 'size': 5}, {'id': '99', 'title': 'ONU salue la générosité de SM le Roi Mohammed VI envers Gaza', 'source': 'lnt.ma', 'link': 'https://lnt.ma/onu-salue-la-generosite-de-sm-le-roi-mohammed-vi-envers-gaza/', 'summary': 'ONU salue la générosité de SM le Roi Mohammed VI envers Gaza. L’Organisation des Nations Unies a salué la « générosité » de SM le Roi Mohammed VI, Président du Comité Al-Qods, suite à l’envoi, sur Très Hautes Instructions du Souverain, d’une aide humanitaire supplémentaire « importante » au profit des habitants de Gaza. « Nous saluons la générosité et la décision prise par SM le Roi Mohammed VI d’envoyer une aide . ', 'size': 5}], 'main_title': 'L’ONU salue la “générosité” du roi pour l’aide humanitaire “importante” envoyée à Gaza'}, {'community_id': '2', 'articles': [{'id': '56', 'title': 'L’international marocain Amine Adli rejoint Bournemouth en Premier League', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/linternational-marocain-amine-adli-rejoint-bournemouth-en-premier-league-308842/', 'summary': 'L’international marocain Amine Adli rejoint Bournemouth en Premier League. L’attaquant international marocain Amine Adli, en provenance du Bayer Leverkusen (Allemagne), a signé pour cinq ans à Bournemouth, qui évolue en Premier League. Le club anglais a déboursé 29 millions d’euros, selon des informations de presse, pour racheter les trois dernières années de contrat du Lion de l’Atlas. Le jeune', 'size': 2}, {'id': '123', 'title': 'Premier League : Amine Adli signe à Bournemouth', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/21/premier-league-amine-adli-signe-a-bournemouth_1947205/', 'summary': 'Premier League : Amine Adli signe à Bournemouth. Le club de football anglais AFC Bournemouth a annoncé, jeudi, la signature de l’international marocain Amine Adli, en provenance du Bayer Leverkusen (Bundesliga). Adli s’est engagé pour cinq saisons avec le club, indique Bournemouth dans un communiqué publié sur son site officiel, précisant que l’ailier de 25 ans, rejoindra l’équipe dirigée par Andoni Iraola avant.', 'size': 2}], 'main_title': 'L’international marocain Amine Adli rejoint Bournemouth en Premier League'}, {'community_id': '16', 'articles': [{'id': '69', 'title': 'Anniversaire de la Révolution du Roi et du Peuple : Grâce Royale au profit de 881 personnes', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/actualite/anniversaire-de-la-revolution-du-roi-et-du-peuple-grace-royale-au-profit-de-881-personnes', 'summary': 'Anniversaire de la Révolution du Roi et du Peuple : Grâce Royale au profit de 881 personnes. A l’occasion de l’anniversaire de la Révolution du Roi et du Peuple, Sa Majesté le Roi Mohammed VI, que Dieu L’assiste, a bien voulu accorder Sa grâce à 881 personnes, dont 676 en détention et 205 en liberté, condamnées par différents tribunaux du Royaume, annonce le ministère de la Justice dans un communiqué. En voici .', 'size': 2}, {'id': '98', 'title': 'Grâce royale pour 881 personnes à l’occasion de la Révolution du Roi et du Peuple', 'source': 'lnt.ma', 'link': 'https://lnt.ma/grace-royale-pour-881-personnes-a-loccasion-de-la-revolution-du-roi-et-du-peuple/', 'summary': 'Grâce royale pour 881 personnes à l’occasion de la Révolution du Roi et du Peuple. A l’occasion de l’anniversaire de la Révolution du Roi et du Peuple, SM le Roi Mohammed VI a bien voulu accorder Sa grâce à 881 personnes, dont 676 en détention et 205 en liberté, condamnées par différents tribunaux du Royaume, annonce le ministère de la Justice dans un communiqué. En voici le texte : « A . ', 'size': 2}], 'main_title': 'Anniversaire de la Révolution du Roi et du Peuple : Grâce Royale au profit de 881 personnes'}, {'community_id': '4', 'articles': [{'id': '76', 'title': 'Thérapies régénératives: La FM6SS réussit la reprogrammation de cellules sanguines en cellules souches', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/influences/therapies-regeneratives-la-fm6ss-reussit-la-reprogrammation-de-cellules-sanguines-en-cellules-souches/', 'summary': 'Thérapies régénératives: La FM6SS réussit la reprogrammation de cellules sanguines en cellules souches. Pour la première fois au Maroc, la Fondation Mohammed VI des Sciences et de la Santé (FM6SS) a pu reprogrammer des cellules sanguines en cellules souches pluripotentes induites (iPS). Cette avancée stratégique ouvre la voie à la création d’une plateforme nationale de reprogrammation et de différenciation cellulaire.', 'size': 3}, {'id': '120', 'title': 'La FM6SS réussit la reprogrammation de cellules sanguines en cellules souches pluripotentes induites', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/La-FM6SS-reussit-la-reprogrammation-de-cellules-sanguines-en-cellules-souches-pluripotentes-induites_a70975.html', 'summary': 'La FM6SS réussit la reprogrammation de cellules sanguines en cellules souches pluripotentes induites. La Fondation Mohammed VI des Sciences et de la Santé (FM6SS) a annoncé avoir réussi, pour la première fois au Maroc, la reprogrammation de cellules sanguines périphériques humaines (PBMCs) en cellules souches pluripotentes induites (iPS), marquant ainsi une avancée scientifique majeure et historique.', 'size': 3}, {'id': '148', 'title': 'FM6SS : Reprogrammation réussie de cellules sanguines en cellules souches pluripotentes induites', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/174657/fm6ss-reprogrammation-reussie-cellules-sanguines.html', 'summary': 'FM6SS : Reprogrammation réussie de cellules sanguines en cellules souches pluripotentes induites. La Fondation Mohammed VI des sciences et de la santé (FM6SS) a annoncé avoir réussi, pour la première fois au Maroc, la reprogrammation de cellules sanguines périphériques humaines (PBMCs) en cellules souches pluripotentes induites (iPS), marquant ainsi une avancée scientifique majeure et historique.', 'size': 3}], 'main_title': 'Thérapies régénératives: La FM6SS réussit la reprogrammation de cellules sanguines en cellules souches'}, {'community_id': '3', 'articles': [{'id': '100', 'title': 'CHAN 2024: Tarik Sektioui estime que la détermination sera décisive contre la Tanzanie', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/438274-chan-2024-tarik-sektioui-estime-que-la-determination-sera-decisive-contre-la-tanzanie.html', 'summary': 'CHAN 2024: Tarik Sektioui estime que la détermination sera décisive contre la Tanzanie. Le sélectionneur national, Tarik Sektioui a affirmé, jeudi à Dar Es Salaam, que la motivation et la détermination des joueurs sur le terrain sont les clés pour remporter le match face à la Tanzanie, prévu vendredi au stade Benjamin Mkapa, pour le compte des quarts de finale du Championnat d’Afrique des nations de football (CHAN). . ', 'size': 4}, {'id': '111', 'title': 'CHAN-2024 : A quelle heure et sur quelles chaines suivre le match Maroc-Tanzanie ?', 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/chan-a-quelle-heure-et-sur-quelles-chaines-suivre-maroc-tanzanie/297271', 'summary': 'CHAN-2024 : A quelle heure et sur quelles chaines suivre le match Maroc-Tanzanie ?. L’équipe nationale du Maroc des joueurs locaux s’est qualifiée pour les quarts de finale du Championnat d’Afrique des nations de football (CHAN), en dominant la RD Congo sur le sco.', 'size': 4}, {'id': '113', 'title': 'CHAN 2024 – Tarik Sektioui : « La motivation et la détermination, les clés pour s’imposer face à la Tanzanie »', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/CHAN-2024-Tarik-Sektioui-La-motivation-et-la-determination-les-cles-pour-s-imposer-face-a-la-Tanzanie_a70984.html', 'summary': 'CHAN 2024 – Tarik Sektioui : « La motivation et la détermination, les clés pour s’imposer face à la Tanzanie ». \u200bLe sélectionneur national, Tarik Sektioui a affirmé, jeudi à Dar Es Salaam, que la motivation et la détermination des joueurs sur le terrain sont les clés pour remporter le match face à la Tanzanie, prévu vendredi au stade Benjamin Mkapa, pour le compte des quarts de finale du Championnat d’Afrique des nations de football (CHAN).', 'size': 4}, {'id': '127', 'title': "CHAN : “La motivation et la détermination seront les clés pour s'imposer face à la Tanzanie”, selon Sektioui", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/21/chan-la-motivation-et-la-determination-seront-les-cles-pour-simposer-face-a-la-tanzanie-selon-sektioui_1947163/', 'summary': "CHAN : “La motivation et la détermination seront les clés pour s'imposer face à la Tanzanie”, selon Sektioui. Le sélectionneur national Tarik Sektioui a affirmé, jeudi à Dar Es Salaam, que la motivation et la détermination des joueurs sur le terrain sont les clés pour remporter le match face à la Tanzanie, prévu vendredi au stade Benjamin Mkapa, pour le compte des quarts de finale du Championnat d’Afrique des nations de football (CHAN)..", 'size': 4}], 'main_title': 'CHAN 2024: Tarik Sektioui estime que la détermination sera décisive contre la Tanzanie'}, {'community_id': '5', 'articles': [{'id': '105', 'title': "L'UNESCO annonce un record de 264 millions d'étudiants inscrits", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/438247-lunesco-annonce-un-record-de-264-millions-detudiants-inscrits.html', 'summary': "L'UNESCO annonce un record de 264 millions d'étudiants inscrits. Un total de 264 millions d’étudiants sont inscrits dans l’enseignement supérieur à travers le monde, un chiffre record qui montre la nécessité de reconnaître les qualifications internationales, selon les statistiques de l’Unesco. Le nombre d’étudiants a augmenté de 25 millions depuis 2020, révèle l’organisation internationale dans un récent rapport, soulignant que 6,9 millions d’étudiants étudient . ", 'size': 2}, {'id': '160', 'title': 'Unesco: 264 millions d’étudiants inscrits dans le monde, un record', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/unesco-264-millions-detudiants-inscrits-dans-le-monde-un-record/', 'summary': 'Unesco: 264 millions d’étudiants inscrits dans le monde, un record. Un total de 264 millions d’étudiants sont inscrits dans l’enseignement supérieur à travers le monde, un chiffre record qui montre la nécessité de reconnaître les qualifications internationales, selon les statistiques de l’Unesco. Le nombre d’étudiants a augmenté de 25 millions depuis 2020, révèle l’organisation internationale dans un récent rapport, soulignant que 6,9 millions d’étudiants étudient .', 'size': 2}], 'main_title': "L'UNESCO annonce un record de 264 millions d'étudiants inscrits"}, {'community_id': '0', 'articles': [{'id': '108', 'title': "Bank Al Maghrib lance un pièce commémorative à l'occasion du 62e anniversaire du Roi Mohammed VI", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/438262-bank-al-maghrib-lance-un-piece-commemorative-a-loccasion-du-62e-anniversaire-du-roi-mohammed-vi.html', 'summary': "Bank Al Maghrib lance un pièce commémorative à l'occasion du 62e anniversaire du Roi Mohammed VI. Bank Al-Maghrib (BAM) émet, à l’occasion du 62ème anniversaire du Roi Mohammed VI, une pièce commémorative en argent, d’une valeur faciale de 250 dirhams. Cette pièce commémorative présente à l’avers l’effigie du Roi Mohammed VI entourée des inscriptions « محمد السادس » , « المملكة المغربية – ⵜⴰⴳⵍⴷⵉⵜ ⵏ ⵍⵎⵖⵔⵉⴱ » en arabe et en . ", 'size': 5}, {'id': '112', 'title': 'Bank Al-Maghrib émet une pièce commémorative du 62ème Anniversaire de S.M. le Roi', 'source': 'lematin.ma', 'link': 'https://lematin.ma/nation/bam-emet-une-piece-commemorative-du-62eme-anniversaire-de-sm-le-roi/297384', 'summary': 'Bank Al-Maghrib émet une pièce commémorative du 62ème Anniversaire de S.M. le Roi. Cette pièce commémorative présente à l’avers l’effigie de Sa Majesté le Roi Mohammed VI entourée des inscriptions « محمد السادس » , « المملكة المغربية - ⵜⴰⴳⵍⴷⵉⵜ ⵏ ⵍⵎⵖⵔⵉⴱ » en arabe.', 'size': 3}, {'id': '133', 'title': 'Bank Al-Maghrib\xa0: une pièce commémorative pour le 62e anniversaire de S.M. le Roi Mohammed VI', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/bank-al-maghrib-une-piece-commemorative-pour-le-62e-anniversaire-de-s-m-le-roi-mohammed-vi-308863/', 'summary': 'Bank Al-Maghrib : une pièce commémorative pour le 62e anniversaire de S.M. le Roi Mohammed VI. A l’occasion du 62ème Anniversaire de Sa Majesté le Roi Mohammed VI, Bank Al-Maghrib (BAM) émet une pièce commémorative en argent, d’une valeur faciale de 250 DH. Cette pièce commémorative présente à l’avers l’effigie de Sa Majesté le Roi Mohammed VI entourée des inscriptions «محمد السادس» , « المملكة المغربية', 'size': 4}, {'id': '147', 'title': 'Bank Al-Maghrib émet une pièce commémorative des 62 ans du roi Mohammed VI', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/174658/bank-al-maghrib-emet-piece-commemorative.html', 'summary': 'Bank Al-Maghrib émet une pièce commémorative des 62 ans du roi Mohammed VI. Bank Al-Maghrib (BAM) émet, à l’occasion du 62e anniversaire du roi Mohammed VI, une pièce commémorative en argent, d’une valeur faciale de 250 dirhams.', 'size': 4}, {'id': '155', 'title': 'Bank Al-Maghrib célèbre le 62ème anniversaire du Roi Mohammed VI avec une nouvelle pièce commémorative', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/argent/bank-al-maghrib-celebre-le-62eme-anniversaire-du-roi-mohammed-vi-avec-une-nouvelle-piece-commemorative/', 'summary': 'Bank Al-Maghrib célèbre le 62ème anniversaire du Roi Mohammed VI avec une nouvelle pièce commémorative. La pièce est en argent d’une valeur faciale de 250 dirhams et met en avant l’effigie du Souverain, les armoiries du Royaume et des motifs inspirés du patrimoine marocain.', 'size': 3}], 'main_title': "Bank Al Maghrib lance un pièce commémorative à l'occasion du 62e anniversaire du Roi Mohammed VI"}, {'community_id': '8', 'articles': [{'id': '118', 'title': "Etats-Unis : l'astrophysicienne marocaine Maryame El Moutamid contribue à la découverte d’un nouvel astre", 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Etats-Unis-l-astrophysicienne-marocaine-Maryame-El-Moutamid-contribue-a-la-decouverte-d-un-nouvel-astre_a70980.html', 'summary': 'Etats-Unis : l\'astrophysicienne marocaine Maryame El Moutamid contribue à la découverte d’un nouvel astre. Une équipe d’astrophysiciens du centre de recherche américain "Southwest Research Institute" (SwRI), dirigée par la scientifique marocaine Maryame El Moutamid, a découvert récemment un petit astre céleste, inconnu jusqu’ici, gravitant autour d’Uranus, septième planète du système solaire.', 'size': 5}, {'id': '131', 'title': "Une astrophysicienne marocaine découvre une nouvelle lune d'Uranus", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/21/une-astrophysicienne-marocaine-decouvre-une-nouvelle-lune-duranus_1947127/', 'summary': "Une astrophysicienne marocaine découvre une nouvelle lune d'Uranus. Originaire d’Essaouira, Maryame El Moutamid, une astrophysicienne âgée de 41 ans, dirigeant une équipe américaine, vient de découvrir un nouveau satellite d’Uranus, portant à 29 le nombre de lunes connues de cette planète mystérieuse. Une équipe d’astrophysiciens du centre de recherche américain « Southwest Research Institute » (SwRI), dirigée par la scientifique marocaine Maryame El Moutamid, a.", 'size': 5}, {'id': '146', 'title': 'États-Unis : Une équipe dirigée par une astrophysicienne marocaine découvre un nouvel astre céleste', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/174662/etats-unis-equipe-dirigee-astrophysicienne-marocaine.html', 'summary': 'États-Unis : Une équipe dirigée par une astrophysicienne marocaine découvre un nouvel astre céleste. Une équipe d’astrophysiciens du centre de recherche américain Southwest Research Institute (SwRI), dirigée par la scientifique marocaine Maryame El Moutamid, a découvert un petit astre céleste, inconnu jusqu’ici, gravitant autour d’Uranus, septième planète du système solaire.', 'size': 5}, {'id': '152', 'title': 'États-Unis: Une équipe dirigée par une astrophysicienne marocaine découvre un nouveau satellite d’Uranus', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/affaires/secteurs/etats-unis-une-equipe-dirigee-par-une-astrophysicienne-marocaine-decouvre-un-nouveau-satellite-duranus/', 'summary': 'États-Unis: Une équipe dirigée par une astrophysicienne marocaine découvre un nouveau satellite d’Uranus. Cette découverte fascinante, annoncée officiellement cette semaine par le centre de recherche américain "Southwest Research Institute" (SwRI), a été faite à travers l\'analyse d\'une série d\'images prises le 2 février 2025 à l’aide du télescope de la NASA. Elle porte à 29 le nombre total de satellites connus d’Uranus.', 'size': 4}, {'id': '163', 'title': 'USA : une équipe dirigée par une astrophysicienne marocaine découvre un nouvel astre céleste', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/usa-une-equipe-dirigee-par-une-astrophysicienne-marocaine-decouvre-un-nouvel-astre-celeste.html', 'summary': 'USA : une équipe dirigée par une astrophysicienne marocaine découvre un nouvel astre céleste. Une équipe d’astrophysiciens du centre de recherche américain « Southwest Research Institute » (SwRI), dirigée par la scientifique marocaine Maryame El Moutamid, a découvert récemment un petit astre céleste, inconnu jusqu’ici, gravitant autour d’Uranus, septième planète du système solaire. El Moutamid et son équipe composée de sept scientifiques pluridisciplinaires ont décelé ce petit satellite, qui gravite autour . L’article est apparu en premier sur .', 'size': 4}], 'main_title': "Etats-Unis : l'astrophysicienne marocaine Maryame El Moutamid contribue à la découverte d’un nouvel astre"}, {'community_id': '1', 'articles': [{'id': '122', 'title': 'Tunisie : quatre films marocains en lice au Festival international Panorama du court métrage', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/21/tunisie-quatre-films-marocains-en-lice-au-festival-international-panorama-du-court-metrage_1947201/', 'summary': 'Tunisie : quatre films marocains en lice au Festival international Panorama du court métrage. Pour la 11e édition du Festival international Panorama du court-métrage, quatre films marocains font partie des courts métrages retenus dans les catégories « courts métrages de fiction » et « court-métrage d’école ». Quatre films marocains sont en lice à la 11e édition du Festival international Panorama du court-métrage qui se tiendra du 02 au 07 février prochain à.', 'size': 2}, {'id': '140', 'title': 'Tunisie : 4 films marocains retenus au Festival international Panorama du court-métrage', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/174693/tunisie-films-marocains-retenus-festival.html', 'summary': 'Tunisie : 4 films marocains retenus au Festival international Panorama du court-métrage. Quatre films marocains sont en lice à la 11e édition du Festival international Panorama du court-métrage qui se tiendra du 2 au 7 février 2026 à Tunis.', 'size': 2}], 'main_title': 'Tunisie : quatre films marocains en lice au Festival international Panorama du court métrage'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
                        
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ? d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        // Fonction pour cacher le tooltip
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = '';
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
    
    
</body>




</html>
    