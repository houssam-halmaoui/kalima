<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); 
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title"> Les principales actualités des dernières 24 heures

</div>    
        <div class="header-subtitle"> Dernière mise à jour : 29/08/2025 - 18h29</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"></div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '8', 'articles': [{'id': '1', 'title': 'Classement FIFA futsal : Le Maroc progresse chez les dames, stable chez les hommes', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/439079-classement-fifa-futsal-le-maroc-progresse-chez-les-dames-stable-chez-les-hommes.html', 'summary': 'Classement FIFA futsal : Le Maroc progresse chez les dames, stable chez les hommes. La sélection féminine marocaine de futsal réalise une remarquable progression en grimpant de 16 places et atteignant le 31ᵉ rang mondial avec 963,37 points, selon le dernier classement publié vendredi par la FIFA. Les hommes, eux, conservent leur 6ᵉ position. « Avec 15 matchs disputés, le Maroc a été l’équipe féminine la plus active sur . ', 'size': 3}, {'id': '197', 'title': 'Classement futsal FIFA : le Maroc au 6è rang mondial masculin, bond de 16 places chez les dames', 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/futsal-le-maroc-6-mondial-progression-historique-des-lionnes/298765', 'summary': 'Classement futsal FIFA : le Maroc au 6è rang mondial masculin, bond de 16 places chez les dames. Le nouveau classement FIFA de futsal maintient le Maroc dans le cercle fermé des meilleures nations mondiales. Chez les hommes, les Lions de l’Atlas occupent la 6ᵉ place avec 1480,.', 'size': 3}, {'id': '225', 'title': 'Classement futsal FIFA : Le Maroc progresse de 16 places chez les dames', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/175270/classement-futsal-fifa-maroc-progresse.html', 'summary': 'Classement futsal FIFA : Le Maroc progresse de 16 places chez les dames. La sélection féminine marocaine de futsal a gagné 16 places pour accéder au 31è rang mondial de futsal, avec un total de 963.37 points, selon le dernier classement mondial de la discipline, publié vendredi par la FIFA. Les hommes occupent toujours la sixième place.', 'size': 4}, {'id': '257', 'title': 'Classement futsal FIFA : Le Maroc progresse de 16 places chez les dames, toujours 6è chez les hommes', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/classement-futsal-fifa-le-maroc-progresse-de-16-places-chez-les-dames/', 'summary': 'Classement futsal FIFA : Le Maroc progresse de 16 places chez les dames, toujours 6è chez les hommes. La sélection féminine marocaine de futsal a gagné 16 places pour accéder au 31è rang mondial de futsal, avec un total de 963.37 points, selon le dernier Classement mondial de la discipline, publié vendredi par la FIFA. Les hommes occupent toujours la sixième place. « Avec 15 matches disputés, le Maroc a été l’équipe féminine la .', 'size': 4}], 'main_title': 'Classement futsal FIFA : Le Maroc progresse de 16 places chez les dames'}, {'community_id': '5', 'articles': [{'id': '5', 'title': "Mercato : Le LOSC officialise l'arrivée de Hamza Igamane", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/439049-mercato-le-losc-officialise-larrivee-de-hamza-igamane.html', 'summary': "Mercato : Le LOSC officialise l'arrivée de Hamza Igamane. C’est désormais acté. Le LOSC a officialisé de Hamza Igamane, en provenance des Glasgow Rangers. L’attaquant international marocain de 22 ans a signé un contrat de cinq saisons, le liant aux Dogues jusqu’en juin 2030. Pour le club nordiste, l’arrivée d’Igamane s’inscrit dans une volonté de densifier son attaque après les recrutements d’Olivier Giroud, Félix . ", 'size': 2}, {'id': '49', 'title': 'Hamza Igamane rejoint officiellement Lille jusqu’en 2030', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Hamza-Igamane-rejoint-officiellement-Lille-jusqu-en-2030_a71186.html', 'summary': 'Hamza Igamane rejoint officiellement Lille jusqu’en 2030. Le LOSC a annoncé ce vendredi la signature d’Hamza Igamane, attaquant de 22 ans en provenance des Glasgow Rangers. Révélation en Écosse, il s’engage jusqu’en 2030 afin de renforcer l’attaque lilloise.', 'size': 2}], 'main_title': "Mercato : Le LOSC officialise l'arrivée de Hamza Igamane"}, {'community_id': '14', 'articles': [{'id': '24', 'title': 'Qualifications Mondial 2026 : De nouveaux visages sur la liste de Regragui face au Niger et à la Zambie', 'source': 'lematin.ma', 'link': 'https://lematin.ma/videos/de-nouveaux-visages-sur-la-liste-de-regragui-face-au-niger-et-a-la-zambie/298622', 'summary': 'Qualifications Mondial 2026 : De nouveaux visages sur la liste de Regragui face au Niger et à la Zambie. Walid Regragui a convoqué 27 joueurs pour affronter le Niger et la Zambie en éliminatoires de la Coupe du Monde 2026. La liste inclut la première convocation de Neil El Aynaoui, no.', 'size': 3}, {'id': '51', 'title': 'Qualifications Mondial 2026 - Walid Regragui : « Face au Niger, le Maroc a tout pour gagner »', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Qualifications-Mondial-2026-Walid-Regragui-Face-au-Niger-le-Maroc-a-tout-pour-gagner_a71184.html', 'summary': 'Qualifications Mondial 2026 - Walid Regragui : « Face au Niger, le Maroc a tout pour gagner ». Le sélectionneur national, Walid Regragui, a affirmé jeudi, que le match de l’équipe du Maroc face à son homologue du Niger, le 5 septembre à Rabat pour le compte des qualifications africaines au Mondial 2026, « ne sera pas de tout repos » face à une équipe qui « sait bien défendre ».', 'size': 4}, {'id': '86', 'title': 'Qualifications Mondial-2026 : Walid Regragui convoque 27 joueurs pour le match Maroc-Niger', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/28/qualifications-mondial-2026-walid-regragui-convoque-27-joueurs-pour-le-match-maroc-niger_1947841/', 'summary': 'Qualifications Mondial-2026 : Walid Regragui convoque 27 joueurs pour le match Maroc-Niger. Le sélectionneur national Walid Regragui a convoqué 27 joueurs afin de prendre part au match qui mettra aux prises les sélections marocaines et nigérienne, le 5 septembre prochain au complexe sportif Prince Moulay Abdellah à Rabat, pour le compte de la 7è journée (groupe E) des qualifications africaines de la Coupe du monde 2026. La.', 'size': 4}, {'id': '159', 'title': 'Qualif. Mondial 2026 (7è j/Gr-E) | Face au Niger, le Maroc a tout pour gagner (Regragui)', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/qualif-mondial-2026-7e-j-gr-e-face-au-niger-le-maroc-a-tout-pour-gagner-regragui/', 'summary': 'Qualif. Mondial 2026 (7è j/Gr-E) | Face au Niger, le Maroc a tout pour gagner (Regragui). Le sélectionneur national, Walid Regragui, a affirmé jeudi, que le match de l’équipe du Maroc face à son homologue du Niger, le 5 septembre à Rabat pour le compte des qualifications africaines au Mondial 2026, “ne sera pas de tout repos” face à une équipe qui “sait bien défendre”. “C’est difficile de marquer contre cette ', 'size': 3}], 'main_title': 'Qualifications Mondial 2026 - Walid Regragui : « Face au Niger, le Maroc a tout pour gagner »'}, {'community_id': '15', 'articles': [{'id': '38', 'title': 'Le Dislog Maroc Padel Masters revient à Casablanca pour une 5e édition', 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/le-dislog-maroc-padel-masters-revient-a-casablanca-pour-une-5e-edition/298591', 'summary': 'Le Dislog Maroc Padel Masters revient à Casablanca pour une 5e édition. Placé sous l’égide de la Fédération Royale marocaine de tennis (FRMT), le Dislog Maroc Padel Masters (DMPM) tiendra sa cinquième édition du 5 au 7 septembre 2025 au Club Paradise d.', 'size': 2}, {'id': '148', 'title': 'Le Dislog Maroc Padel Masters revient au Paradise de Casablanca', 'source': 'leseco.ma', 'link': 'https://leseco.ma/sports/le-dislog-maroc-padel-masters-revient-au-paradise-de-casablanca.html', 'summary': 'Le Dislog Maroc Padel Masters revient au Paradise de Casablanca. Après une saison 2025 déjà riche en émotions et marquée par des étapes à succès, le Dislog Maroc Padel Masters (DMPM) revient au Club Paradise de Casablanca, du 5 au 7 septembre 2025, pour une nouvelle édition qui s’annonce encore plus intense. ', 'size': 2}], 'main_title': 'Le Dislog Maroc Padel Masters revient à Casablanca pour une 5e édition'}, {'community_id': '10', 'articles': [{'id': '42', 'title': 'Enseignement supérieur : un front contestataire étudiant prend forme contre le projet de loi 59.24', 'source': 'lematin.ma', 'link': 'https://lematin.ma/enseignement/enseignement-superieur-un-front-contestataire-etudiant-prend-forme/298594', 'summary': "Enseignement supérieur : un front contestataire étudiant prend forme contre le projet de loi 59.24. Au moment où le Conseil du gouvernement s’apprêtait à examiner jeudi le projet de loi 59.24 régissant l'enseignement supérieur, la recherche scientifique et l'innovation, l.", 'size': 2}, {'id': '129', 'title': 'Enseignement supérieur : Le projet de loi 59.24 adopté en Conseil de gouvernement', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/au-royaume/enseignement-superieur-le-projet-de-loi-59-24-adopte-en-conseil-de-gouvernement/', 'summary': 'Enseignement supérieur : Le projet de loi 59.24 adopté en Conseil de gouvernement. Ce texte vise notamment à renforcer le rôle fondamental de l’enseignement supérieur et de la recherche scientifique dans la réalisation des priorités de développement et sa contribution à la formation d’un capital humain qualifié.', 'size': 2}], 'main_title': 'Enseignement supérieur : un front contestataire étudiant prend forme contre le projet de loi 59.24'}, {'community_id': '13', 'articles': [{'id': '55', 'title': "Le Maroc et l'Irak signent un accord de transfert des personnes condamnées", 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Le-Maroc-et-l-Irak-signent-un-accord-de-transfert-des-personnes-condamnees_a71180.html', 'summary': "Le Maroc et l'Irak signent un accord de transfert des personnes condamnées. Le Ministre de la Justice, Abdellatif Ouahbi, a reçu ce jeudi 28 août 2025, au siège du ministère à Rabat, son homologue irakien, Khaled Shawani, accompagné d’une délégation officielle de haut niveau, dans le cadre d’une visite de travail officielle au Maroc, prévue du 27 au 31 août 2025.", 'size': 3}, {'id': '68', 'title': "Terrorisme: le Maroc et l'Irak signent un accord sur le transfert des prisonniers", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/29/terrorisme-le-maroc-et-lirak-signent-un-accord-sur-le-transfert-des-prisonniers_1947961/', 'summary': "Terrorisme: le Maroc et l'Irak signent un accord sur le transfert des prisonniers. Le Maroc et la République d’Irak ont conclu, jeudi à Rabat, une convention de coopération en matière de transfèrement des personnes condamnées à des peines privatives de liberté, ainsi qu’un mémorandum d’entente relatif à la coopération dans le domaine des peines alternatives. Signée par le ministre de la Justice, Abdellatif Ouahbi, et son homologue irakien,.", 'size': 4}, {'id': '97', 'title': 'Le Maroc et l’Irak renforcent leur coopération judiciaire', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/175224/maroc-l-irak-renforcent-leur-cooperation.html', 'summary': 'Le Maroc et l’Irak renforcent leur coopération judiciaire. Le Maroc et l’Irak ont conclu, jeudi à Rabat, une convention de coopération en matière de transfèrement des personnes condamnées à des peines privatives de liberté, ainsi qu’un mémorandum d’entente relatif à la coopération dans le domaine des peines alternatives.', 'size': 3}, {'id': '142', 'title': 'Le Maroc et l’Irak renforcent leur coopération dans le domaine judiciaire', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/le-maroc-et-lirak-renforcent-leur-cooperation-dans-le-domaine-judiciaire/', 'summary': 'Le Maroc et l’Irak renforcent leur coopération dans le domaine judiciaire. Le Maroc et la République d’Irak ont conclu, jeudi à Rabat, une convention de coopération en matière de transfèrement des personnes condamnées à des peines privatives de liberté, ainsi qu’un mémorandum d’entente relatif à la coopération dans le domaine des peines alternatives. Signée par le ministre de la Justice, Abdellatif Ouahbi, et son homologue irakien, .', 'size': 4}], 'main_title': "Terrorisme: le Maroc et l'Irak signent un accord sur le transfert des prisonniers"}, {'community_id': '17', 'articles': [{'id': '67', 'title': 'Epson annonce une offre exclusive autour de sa gamme EcoTank pour soutenir l’apprentissage des jeunes', 'source': 'telquel.ma', 'link': 'https://telquel.ma/sponsors/epson-annonce-une-offre-exclusive-autour-de-sa-gamme-ecotank-pour-soutenir-lapprentissage-des-jeunes_1948024', 'summary': 'Epson annonce une offre exclusive autour de sa gamme EcoTank pour soutenir l’apprentissage des jeunes. Deux mois après l’annonce de son partenariat régional avec l’icône mondiale de la musique Shakira, également engagée en faveur de l’éducation et de l’inclusion des enfants dans les régions défavorisées, Epson inscrit cette rentrée scolaire sous le signe de l’innovation, de la créativité et du soutien à la jeunesse. La marque déploie ainsi une initiative.', 'size': 2}, {'id': '117', 'title': 'Rentrée scolaire : Epson soutient l’apprentissage numérique  avec sa gamme EcoTank', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/comese/rentree-scolaire-epson-soutient-lapprentissage-numerique-avec-sa-gamme-ecotank/', 'summary': 'Rentrée scolaire : Epson soutient l’apprentissage numérique avec sa gamme EcoTank. Deux mois après l’annonce de son partenariat régional avec l’icône mondiale de la musique Shakira, également engagée en faveur de l’éducation et de l’inclusion des enfants dans les régions défavorisées, Epson inscrit cette rentrée scolaire sous le signe de l’innovation, de la créativité et du soutien à la jeunesse.', 'size': 2}], 'main_title': 'Epson annonce une offre exclusive autour de sa gamme EcoTank pour soutenir l’apprentissage des jeunes'}, {'community_id': '0', 'articles': [{'id': '70', 'title': 'Le réalisateur sud-coréen Bong Joon Ho, président de la 22e édition du Festival international du film de Marrakech', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/29/le-realisateur-sud-coreen-bong-joon-ho-president-de-la-22e-edition-du-festival-international-du-film-de-marrakech_1947975/', 'summary': 'Le réalisateur sud-coréen Bong Joon Ho, président de la 22e édition du Festival international du film de Marrakech. Bong Joon Ho, le réalisateur sud-coréen oscarisé pour « Parasite » et entré dans l’histoire comme premier cinéaste non anglophone à remporter l’Oscar du Meilleur film, présidera le jury de la 22e édition du Festival international du film de Marrakech, du 28 novembre au 6 décembre 2025. Le réalisateur sud-coréen, Bong Joon Ho, couronné par les plus.', 'size': 5}, {'id': '95', 'title': 'FIFM 2025 : Le réalisateur oscarisé Bong Joon Ho préside le jury', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/175235/fifm-2025-realisateur-oscarise-bong.html', 'summary': 'FIFM 2025 : Le réalisateur oscarisé Bong Joon Ho préside le jury. La 22e édition du Festival international du film de Marrakech (FIFM 2025), qui se tient du 28 novembre au 6 décembre prochain, aura comme président de jury le réalisateur sud–coréen Bong Joon Ho. «Son jury décernera l’Étoile d’or à l’un des 14 premiers et seconds longs métrages de la compétition internationale, dédiée à la découverte de cinéastes à travers le monde», a annoncé ce vendredi un communiqué des organisateurs.', 'size': 5}, {'id': '166', 'title': 'Bong Joon Ho présidera le jury du Festival de Marrakech 2025', 'source': 'lnt.ma', 'link': 'https://lnt.ma/bong-joon-ho-presidera-le-jury-du-festival-de-marrakech-2025/', 'summary': 'Bong Joon Ho présidera le jury du Festival de Marrakech 2025. Le réalisateur sud-coréen, Bong Joon Ho, couronné par les plus grands prix internationaux dont l’Oscar, présidera le jury de la 22e édition du Festival international du film de Marrakech, prévue du 28 novembre au 6 décembre 2025. Le jury de cette édition décernera l’Étoile d’or à l’un des 14 premiers et seconds longs métrages de . ', 'size': 5}, {'id': '179', 'title': '22e FIFM : Bong Joon Ho, réalisateur oscarisé, à la présidence du jury', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/439068-22e-fifm-bong-joon-ho-realisateur-oscarise-a-la-presidence-du-jury.html', 'summary': '22e FIFM : Bong Joon Ho, réalisateur oscarisé, à la présidence du jury. Le Festival international du film de Marrakech a annoncé que le réalisateur sud-coréen Bong Joon Ho, lauréat de nombreux prix internationaux dont l’Oscar du Meilleur film, présidera le jury de sa 22ᵉ édition, qui se tiendra du 28 novembre au 6 décembre 2025. Le jury de cette édition décernera l’Étoile d’or à l’un des 14 . ', 'size': 5}, {'id': '208', 'title': 'Le réalisateur sud-coréen Bong Joon Ho, auteur de Parasite, à la tête du jury du Festival de Marrakech', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Le-realisateur-sud-coreen-Bong-Joon-Ho-auteur-de-Parasite-a-la-tete-du-jury-du-Festival-de-Marrakech_a71189.html', 'summary': 'Le réalisateur sud-coréen Bong Joon Ho, auteur de Parasite, à la tête du jury du Festival de Marrakech. Le réalisateur et scénariste sud-coréen, Bong Joon Ho, à l’origine du film Parasite, présidera le jury de la 22ᵉ édition du Festival international du film de Marrakech, qui se déroulera du 28 novembre au 6 décembre 2025.', 'size': 5}], 'main_title': 'Le réalisateur sud-coréen Bong Joon Ho, président de la 22e édition du Festival international du film de Marrakech'}, {'community_id': '11', 'articles': [{'id': '71', 'title': 'Banques : un besoin de liquidité de 113 MMDH en juillet (DEPF)', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/29/banques-un-besoin-de-liquidite-de-113-mmdh-en-juillet-depf_1947957/', 'summary': 'Banques : un besoin de liquidité de 113 MMDH en juillet (DEPF). Le besoin en liquidité des banques a quasiment stagné, se situant en moyenne hebdomadaire à 113 milliards de dirhams (MMDH) au cours du mois de juillet 2025, contre 114 MMDH en juin dernier, selon la Direction des études et des prévisions financières (DEPF). Le volume des injections de liquidité de la Banque Centrale s’est établi.', 'size': 2}, {'id': '143', 'title': 'Banques : un besoin de liquidité de 113 MMDH en juillet', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/banques-un-besoin-de-liquidite-de-113-mmdh/', 'summary': 'Banques : un besoin de liquidité de 113 MMDH en juillet. Le besoin en liquidité des banques a quasiment stagné, se situant en moyenne hebdomadaire à 113 milliards de dirhams (MMDH) au cours du mois de juillet 2025, contre 114 MMDH en juin dernier, selon la Direction des études et des prévisions financières (DEPF). Le volume des injections de liquidité de la Banque Centrale s’est établi .', 'size': 2}], 'main_title': 'Banques : un besoin de liquidité de 113 MMDH en juillet (DEPF)'}, {'community_id': '9', 'articles': [{'id': '77', 'title': 'Bovins : suspension des droits d’importation et mobilisation de 11 milliards de DH pour soutenir le cheptel', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/28/bovins-suspension-des-droits-dimportation-et-mobilisation-de-11-milliards-de-dh-pour-soutenir-le-cheptel_1947920/', 'summary': 'Bovins : suspension des droits d’importation et mobilisation de 11 milliards de DH pour soutenir le cheptel. Le Conseil de gouvernement, réuni jeudi à Rabat, a adopté le projet de décret portant suspension de la perception du droit d’importation applicable aux bovins domestiques. Présenté par le ministre de l’Agriculture, de la Pêche maritime, du Développement rural et des Eaux et forêts, Ahmed Bouari, au nom du ministre délégué chargé du Budget, Fouzi.', 'size': 4}, {'id': '123', 'title': 'El Bouari met en avant l’efficacité des initiatives Royales visant à préserver le cheptel national', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/affaires/agriculture/el-bouari-met-en-avant-lefficacite-des-initiatives-royales-visant-a-preserver-le-cheptel-national/', 'summary': "El Bouari met en avant l’efficacité des initiatives Royales visant à préserver le cheptel national. Le ministre de l’Agriculture, de la Pêche maritime, du Développement rural et des Eaux et Forêts, Ahmed El Bouari, a mis en avant, jeudi à Rabat, l'efficacité des initiatives de Sa Majesté le Roi Mohammed VI visant à préserver le cheptel national durant les années de sécheresse sévère.", 'size': 4}, {'id': '165', 'title': 'El Bouari : les mesures Royales ont permis de préserver le cheptel national', 'source': 'lnt.ma', 'link': 'https://lnt.ma/el-bouari-les-mesures-royales-ont-permis-de-preserver-le-cheptel-national/', 'summary': 'El Bouari : les mesures Royales ont permis de préserver le cheptel national. Le ministre de l’Agriculture, de la Pêche maritime, du Développement rural et des Eaux et Forêts, Ahmed El Bouari, a mis en avant, jeudi à Rabat, l’efficacité des initiatives de SM le Roi Mohammed VI visant à préserver le cheptel national durant les années de sécheresse sévère. Intervenant lors d’un point de presse tenu à . ', 'size': 4}, {'id': '259', 'title': 'Le Ministre de l’Agriculture souligne l’importance des initiatives royales pour protéger le cheptel national face à la sécheresse', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/le-ministre-de-lagriculture-souligne-limportance-des-initiatives-royales-pour-proteger-le-cheptel-national-face-a-la-secheresse/', 'summary': 'Le Ministre de l’Agriculture souligne l’importance des initiatives royales pour protéger le cheptel national face à la sécheresse. Le ministre de l’Agriculture, de la Pêche maritime, du Développement rural et des Eaux et Forêts, Ahmed El Bouari, a mis en avant, jeudi à Rabat, l’efficacité des initiatives de Sa Majesté le Roi Mohammed VI visant à préserver le cheptel national durant les années de sécheresse sévère. Intervenant lors d’un point de presse tenu ', 'size': 4}], 'main_title': 'Bovins : suspension des droits d’importation et mobilisation de 11 milliards de DH pour soutenir le cheptel'}, {'community_id': '18', 'articles': [{'id': '78', 'title': 'Le général Mohammed Berrid reçoit à Agadir, le commandant de la Minurso', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/28/le-general-mohammed-berrid-recoit-a-agadir-le-commandant-de-la-minurso_1947904/', 'summary': 'Le général Mohammed Berrid reçoit à Agadir, le commandant de la Minurso. Le Général Mohammed Berrid, Inspecteur Général des FAR et Commandant la Zone Sud, a reçu jeudi à Agadir le Commandant de la mission onusienne dans les provinces Sud pour examiner la coordination opérationnelle et sécuritaire entre les deux forces. Dans le cadre des rencontres périodiques entre les Forces Armées Royales et la mission des Nations.', 'size': 3}, {'id': '127', 'title': 'Mohammed Berrid s’entretient avec le commandant de la Force de la mission onusienne dans les Provinces Sud', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/pouvoirs/securite/mohammed-berrid-sentretient-avec-le-commandant-de-la-force-de-la-mission-onusienne-dans-les-provinces-sud/', 'summary': "Mohammed Berrid s’entretient avec le commandant de la Force de la mission onusienne dans les Provinces Sud. La rencontre entre l'Inspecteur Général des FAR et Fakhrul Ahsan s'est tenue à Agadir, au siège de l’Etat-Major de la Zone Sud.", 'size': 2}, {'id': '156', 'title': 'L’inspecteur général des FAR Mohammed Berrid reçoit à Agadir le commandant de la force MINURSO', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/linspecteur-general-des-far-mohammed-berrid-recoit-a-agadir-le-commandant-de-la-force-minurso/', 'summary': 'L’inspecteur général des FAR Mohammed Berrid reçoit à Agadir le commandant de la force MINURSO. Dans le cadre des rencontres périodiques entre les Forces Armées Royales et la Mission des Nations Unies dans les provinces Sud du Royaume, le Général de Corps d’Armée, Mohammed Berrid, Inspecteur Général des FAR et Commandant la Zone Sud, a reçu, jeudi au siège de l’Etat-Major de la Zone Sud à Agadir, le Général de Division ', 'size': 2}], 'main_title': 'Le général Mohammed Berrid reçoit à Agadir, le commandant de la Minurso'}, {'community_id': '12', 'articles': [{'id': '119', 'title': 'Industries manufacturières : Légère baisse de l’indice des prix à la production en juillet', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/affaires/industries-manufacturieres-legere-baisse-de-lindice-des-prix-a-la-production-en-juillet/', 'summary': 'Industries manufacturières : Légère baisse de l’indice des prix à la production en juillet. L’indice des prix à la production du secteur des « Industries manufacturières hors raffinage de pétrole » a enregistré une baisse de 0,1% au cours du mois de juillet 2025 par rapport à juin dernier, selon le Haut-Commissariat au plan (HCP).', 'size': 2}, {'id': '141', 'title': 'Industries manufacturières : baisse de l’indice des prix à la production de 0,1% en juillet', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/industries-manufacturieres-baisse-de-lindice-des-prix-a-la-production-de-01-en-juillet/', 'summary': 'Industries manufacturières : baisse de l’indice des prix à la production de 0,1% en juillet. L’indice des prix à la production du secteur des « Industries manufacturières hors raffinage de pétrole » a enregistré, en juillet 2025, une baisse de 0,1% par rapport au mois de juin dernier, selon le Haut-Commissariat au Plan (HCP). Ce repli est le résultat de la baisse des prix des « Industries alimentaires » de 0,4%, de « l’Industrie d’habillement » .', 'size': 2}], 'main_title': 'Industries manufacturières : Légère baisse de l’indice des prix à la production en juillet'}, {'community_id': '1', 'articles': [{'id': '125', 'title': 'Secteur du tourisme: L’élan se poursuit à fin juillet', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/affaires/secteur-du-tourisme-lelan-se-poursuit-a-fin-juillet/', 'summary': "Secteur du tourisme: L’élan se poursuit à fin juillet. Le secteur du tourisme, après une amélioration de sa valeur ajoutée de 9,7% au premier trimestre 2025, au lieu d'une hausse de 3,2% un an auparavant, a poursuivi son élan au cours des mois suivants, relève la Direction des études et des prévisions financières (DEPF).", 'size': 4}, {'id': '137', 'title': 'Secteur du tourisme : l’élan se poursuit à fin juillet 2025', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/secteur-du-tourisme-lelan-se-poursuit-a-fin-juillet-2025/', 'summary': 'Secteur du tourisme : l’élan se poursuit à fin juillet 2025. Le secteur du tourisme, après une amélioration de sa valeur ajoutée de 9,7% au premier trimestre 2025, au lieu d’une hausse de 3,2% un an auparavant, a poursuivi son élan au cours des mois suivants, relève la Direction des études et des prévisions financières (DEPF). La destination « Maroc » a, en effet, confirmé son attractivité au .', 'size': 4}, {'id': '175', 'title': 'Maroc : 11,6 millions de touristes accueillis à fin juillet 2025', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/439106-maroc-116-millions-de-touristes-accueillis-a-fin-juillet-2025.html', 'summary': 'Maroc : 11,6 millions de touristes accueillis à fin juillet 2025. Le secteur du tourisme, après une amélioration de sa valeur ajoutée de 9,7% au premier trimestre 2025, au lieu d’une hausse de 3,2% un an auparavant, a poursuivi son élan au cours des mois suivants, relève la Direction des études et des prévisions financières (DEPF). La destination « Maroc » a, en effet, confirmé son attractivité au . ', 'size': 4}, {'id': '217', 'title': 'Tourisme : 11,6 millions de visiteurs accueillis par le Maroc à fin juillet 2025', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/29/tourisme-116-millions-de-visiteurs-accueillis-par-le-maroc-a-fin-juillet-2025_1948029/', 'summary': 'Tourisme : 11,6 millions de visiteurs accueillis par le Maroc à fin juillet 2025. Le secteur du tourisme, après une amélioration de sa valeur ajoutée de 9,7% au premier trimestre 2025, au lieu d’une hausse de 3,2% un an auparavant, a poursuivi son élan au cours des mois suivants, relève la Direction des études et des prévisions financières (DEPF). La destination « Maroc » a, en effet, confirmé son attractivité au.', 'size': 4}], 'main_title': 'Secteur du tourisme: L’élan se poursuit à fin juillet'}, {'community_id': '16', 'articles': [{'id': '154', 'title': 'Grève nationale des coursiers « Glovo » les 1er et 2 septembre 2025', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/greve-nationale-des-coursiers-glovo-les-1er-et-2-septembre-2025.html', 'summary': 'Grève nationale des coursiers « Glovo » les 1er et 2 septembre 2025. Les coursiers opérant pour la plateforme espagnole « Glovo » affiliés à l’Union marocaine du travail ont annoncé une grève nationale de 48 heures, prévue les 1er et 2 septembre 2025, accompagnée d’un sit-in devant le siège de l’entreprise à Casablanca Finance City à 14h. L’article est apparu en premier sur .', 'size': 2}, {'id': '254', 'title': 'Casablanca : Les livreurs de Glovo en grève de 48 heures', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/casablanca-les-livreurs-de-glovo-en-greve-de-48-heures/', 'summary': 'Casablanca : Les livreurs de Glovo en grève de 48 heures. Les livreurs de la plateforme de livraison Glovo, affiliés à l’Union marocaine du travail (UMT), ont annoncé une grève de 48 heures à Casablanca les 1er et 2 septembre 2025. Cette mobilisation sera accompagnée d’un sit-in le 1er septembre à 14h, devant le siège de la société situé à Casablanca Finance City. Ce mouvement s’inscrit .', 'size': 2}], 'main_title': 'Grève nationale des coursiers « Glovo » les 1er et 2 septembre 2025'}, {'community_id': '4', 'articles': [{'id': '162', 'title': 'Taroudant : 8 morts dans une collision entre un camion et un taxi', 'source': 'lnt.ma', 'link': 'https://lnt.ma/taroudant-8-morts-dans-une-collision-entre-un-camion-et-un-taxi/', 'summary': 'Taroudant : 8 morts dans une collision entre un camion et un taxi. Huit personnes ont trouvé la mort dans un accident de la route survenu, jeudi soir, au niveau de la Route nationale N11 à Douar Tarwa Yassine relevant de la commune Bigoudine Caida Argana (province de Taroudant), apprend-on auprès des autorités locales. Ce drame s’est produit suite à la collision entre un camion de marchandises (légumes) . ', 'size': 2}, {'id': '229', 'title': 'Province de Taroudant : Huit morts dans un accident de la route sur la RN11', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/175249/province-taroudant-huit-morts-dans.html', 'summary': 'Province de Taroudant : Huit morts dans un accident de la route sur la RN11. Huit personnes sont décédées dans un accident de la route survenu, jeudi soir, au niveau de la Route nationale N11 à Douar Tarwa Yassine relevant de la commune Bigoudine Caida Argana (province de Taroudant), apprend-on auprès des autorités locales.', 'size': 2}], 'main_title': 'Taroudant : 8 morts dans une collision entre un camion et un taxi'}, {'community_id': '2', 'articles': [{'id': '172', 'title': "Réforme électorale : le PJD plaide pour la neutralité et l'équité du scrutin", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/439091-reforme-electorale-le-pjd-plaide-pour-la-neutralite-et-lequite-du-scrutin.html', 'summary': "Réforme électorale : le PJD plaide pour la neutralité et l'équité du scrutin. Le Parti de la justice et du développement (PJD) a transmis au ministère de l’Intérieur un mémorandum détaillé sur la réforme du cadre juridique des prochaines élections législatives. Dans ce document, la formation des frères insiste sur la neutralité de l’administration, la transparence du financement des campagnes, ainsi que sur le renforcement de la participation . ", 'size': 2}, {'id': '216', 'title': 'Le PJD plaide pour un contrôle judiciaire renforcé du processus électoral', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/29/le-pjd-plaide-pour-un-controle-judiciaire-renforce-du-processus-electoral_1948034/', 'summary': 'Le PJD plaide pour un contrôle judiciaire renforcé du processus électoral. Le Parti de la justice et du développement (PJD) a dévoilé, vendredi à Rabat, une série de propositions visant à consolider l’intégrité des scrutins et à élargir les prérogatives du pouvoir judiciaire dans le suivi des élections. Dans un mémorandum présenté au ministère de l’Intérieur et rendu public lors d’une conférence de presse, le parti.', 'size': 2}], 'main_title': "Réforme électorale : le PJD plaide pour la neutralité et l'équité du scrutin"}, {'community_id': '6', 'articles': [{'id': '185', 'title': 'Tourisme : Recettes record de 67 milliards de dirhams à fin juillet 2025', 'source': 'lematin.ma', 'link': 'https://lematin.ma/economie/tourisme-recettes-record-de-67-milliards-de-dirhams-a-fin-juillet-2025/298817', 'summary': 'Tourisme : Recettes record de 67 milliards de dirhams à fin juillet 2025. Le mois de juillet 2025 s’est particulièrement distingué avec 13 milliards de dirhams de recettes touristiques, enregistrant une croissance significative de +26% par rapport à juil.', 'size': 2}, {'id': '246', 'title': 'Tourisme : Des recettes record de 67 MMDH en sept mois', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/affaires/secteurs/tourisme-des-recettes-record-de-67-mmdh-en-sept-mois/', 'summary': "Tourisme : Des recettes record de 67 MMDH en sept mois. Le mois de juillet 2025 s'est particulièrement distingué avec 13 MMDH de recettes touristiques, enregistrant une croissance significative de 26% par rapport à juillet 2024.", 'size': 2}], 'main_title': 'Tourisme : Recettes record de 67 milliards de dirhams à fin juillet 2025'}, {'community_id': '3', 'articles': [{'id': '203', 'title': 'Finale du CHAN 2024 – Tarik Sektiou : « la Confiance et la détermination, les clés pour décrocher le trophée »', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Finale-du-CHAN-2024-Tarik-Sektiou-la-Confiance-et-la-determination-les-cles-pour-decrocher-le-trophee_a71199.html', 'summary': 'Finale du CHAN 2024 – Tarik Sektiou : « la Confiance et la détermination, les clés pour décrocher le trophée ». \u200bLe sélectionneur national, Tarik Sektioui a affirmé, vendredi à Nairobi, que la confiance et la détermination sont les clés pour remporter la finale du Championnat d’Afrique des nations (CHAN) contre Madagascar, samedi au stade international Moi à Nairobi.', 'size': 3}, {'id': '213', 'title': 'CHAN-2024 : “Pour gagner cette finale, il faut être prêt à cent pour cent à tous les niveaux”, estime Tarik Sektioui', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/29/chan-2024-pour-gagner-cette-finale-il-faut-etre-pret-a-cent-pour-cent-a-tous-les-niveaux-estime-tarik-sektioui_1948056/', 'summary': 'CHAN-2024 : “Pour gagner cette finale, il faut être prêt à cent pour cent à tous les niveaux”, estime Tarik Sektioui. À la veille de la finale du CHAN, le sélectionneur Tarik Sektioui mise sur la confiance et la préparation mentale, tandis que ses joueurs se disent prêts à honorer les couleurs nationales lors de cette confrontation décisive prévue samedi à Nairobi. Le sélectionneur national, Tarik Sektioui a affirmé, vendredi à Nairobi, que la confiance et.', 'size': 3}, {'id': '226', 'title': 'CHAN 2024 : «La confiance et la détermination, les clés pour décrocher le trophée» (Tarik Sektioui)', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/175265/chan-2024-confiance-determination-cles.html', 'summary': 'CHAN 2024 : «La confiance et la détermination, les clés pour décrocher le trophée» (Tarik Sektioui). Le sélectionneur national, Tarik Sektioui a affirmé, vendredi à Nairobi, que la confiance et la détermination sont les clés pour remporter la finale du Championnat d’Afrique des nations (CHAN) contre Madagascar, samedi au stade international Moi à Nairobi.', 'size': 3}], 'main_title': 'Finale du CHAN 2024 – Tarik Sektiou : « la Confiance et la détermination, les clés pour décrocher le trophée »'}, {'community_id': '7', 'articles': [{'id': '205', 'title': 'Rapport CE : Sur un million de produits, seuls 82 subissent un contrôle douanier dans l’UE', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Rapport-CE-Sur-un-million-de-produits-seuls-82-subissent-un-controle-douanier-dans-l-UE_a71196.html', 'summary': "Rapport CE : Sur un million de produits, seuls 82 subissent un contrôle douanier dans l’UE. Seuls 82 produits sur un million entrant dans l'Union européenne (UE) ont subi un contrôle de douane en 2024, pointe un rapport de la Commission européenne.", 'size': 2}, {'id': '251', 'title': 'Seuls 82 produits sur 1 million entrant dans l’UE sont contrôlés par les douanes', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/seuls-82-produits-sur-1-million-entrant-dans-lue-sont-controles-par-les-douanes/', 'summary': 'Seuls 82 produits sur 1 million entrant dans l’UE sont contrôlés par les douanes. Seuls 82 produits sur un million entrant dans l’Union européenne (UE) ont subi un contrôle de douane en 2024, pointe un rapport de la Commission européenne. En raison de l’énorme expansion du commerce en ligne, les services douaniers européens sont de moins en moins en mesure de contrôler les colis pour en vérifier la conformité .', 'size': 2}], 'main_title': 'Rapport CE : Sur un million de produits, seuls 82 subissent un contrôle douanier dans l’UE'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
                        
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ? d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        // Fonction pour cacher le tooltip
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = '';
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
    
    
</body>




</html>
    