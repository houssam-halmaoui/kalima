<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); 
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title"> Les principales actualités des dernières 24 heures

</div>    
        <div class="header-subtitle"> Dernière mise à jour : 03/08/2025 - 12h28</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"></div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '0', 'title': "Le temps qu'il fera ce dimanche 3 août 2025", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/436184-le-temps-quil-fera-ce-dimanche-3-aout-2025.html', 'summary': "Le temps qu'il fera ce dimanche 3 août 2025. Voici les prévisions météorologiques établies par la Direction générale de la météorologie pour le dimanche 3 août 2025 – Temps chaud sur le Sud-Est, l’Oriental, les plaines intérieures et l’Est des provinces sahariennes. – Nuages bas avec formations brumeuses ou bruines locales sur le Nord de l’Oriental, la rive méditerranéenne, les plaines Atlantiques Nord et . ", 'size': 2}, {'id': '41', 'title': 'Les prévisions du samedi 2 août', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/les-previsions-du-samedi-2-aout-308003/', 'summary': 'Les prévisions du samedi 2 août. Voici les prévisions météorologiques établies par la Direction générale de la météorologie pour le samedi 2 août 2025. -Temps assez chaud à chaud sur les plaines intérieures, le Sud-Est et sur l’Est des provinces sahariennes. -Nuages faiblement instables avec ondées et orages sur les Haut et Moyen Atlas, les Hauts', 'size': 2}], 'main_title': "Le temps qu'il fera ce dimanche 3 août 2025"}, {'community_id': '1', 'articles': [{'id': '2', 'title': "Une ministre palestinienne remercie le Roi pour l'aide humanitaire envoyée à Gaza", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/436220-une-ministre-palestinienne-remercie-le-roi-pour-laide-humanitaire-envoyee-a-gaza.html', 'summary': "Une ministre palestinienne remercie le Roi pour l'aide humanitaire envoyée à Gaza. La ministre palestinienne du Développement social, Samah Hamad, a adressé ses vifs remerciements au Roi Mohammed VI, Président du Comité Al-Qods, pour l’aide humanitaire et médicale d’urgence en faveur du peuple palestinien, en particulier les populations de la bande de Gaza. Cette aide, a-t-elle dit, « est de nature à contribuer à répondre à leurs besoins . ", 'size': 2}, {'id': '102', 'title': 'Maroc-Palestine : Aide humanitaire pour Gaza en denrées alimentaires et médicaments', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/maroc-palestine-aide-humanitaire-pour-gaza-en-denrees-alimentaires/', 'summary': 'Maroc-Palestine : Aide humanitaire pour Gaza en denrées alimentaires et médicaments. L’aide humanitaire et médicale d’urgence envoyée, sur Très Hautes Instructions de Sa Majesté le Roi Mohammed VI, Président du Comité Al-Qods, en faveur du peuple palestinien, en particulier les populations de la bande de Gaza, contribuera à répondre à leurs besoins en denrées alimentaires et en médicaments, a affirmé la ministre palestinienne du Développement social, .', 'size': 2}], 'main_title': "Une ministre palestinienne remercie le Roi pour l'aide humanitaire envoyée à Gaza"}, {'community_id': '2', 'articles': [{'id': '5', 'title': 'FT : le Roi félicité par le SG de l’ONU', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/436271-ft-le-roi-felicite-par-le-sg-de-lonu.html', 'summary': 'FT : le Roi félicité par le SG de l’ONU. Le Roi Mohammed VI a reçu un message de félicitations du Secrétaire général des Nations Unies, Antonio Guterres, à l’occasion de la Fête du Trône. Dans ce message, Guterres exprime toutes ses félicitations et ses meilleurs vœux au Souverain et au peuple marocain à l’occasion de cette fête nationale. ', 'size': 2}, {'id': '64', 'title': 'SM le Roi reçoit un message de félicitations du SG de l’ONU à l’occasion de la Fête du Trône', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/sm-le-roi-recoit-un-message-de-felicitations-du-sg-de-lonu-a-loccasion-de-la-fete-du-trone/', 'summary': 'SM le Roi reçoit un message de félicitations du SG de l’ONU à l’occasion de la Fête du Trône. Sa Majesté le Roi Mohammed VI a reçu un message de félicitations du Secrétaire général des Nations Unies, Antonio Guterres, à l’occasion de la glorieuse Fête du Trône. Dans ce message, M. Guterres exprime toutes ses félicitations et ses meilleurs vœux à SM le Roi et au peuple marocain à l’occasion de cette fête nationale. ', 'size': 2}], 'main_title': 'FT : le Roi félicité par le SG de l’ONU'}, {'community_id': '3', 'articles': [{'id': '10', 'title': 'Le Président Trump réaffirme à S.M. le Roi la reconnaissance par les États-Unis de la souveraineté marocaine sur le Sahara', 'source': 'lematin.ma', 'link': 'https://lematin.ma/nation/sahara-trump-reitere-a-sm-le-roi-le-soutien-us-a-la-souverainete-du-maroc/294553', 'summary': 'Le Président Trump réaffirme à S.M. le Roi la reconnaissance par les États-Unis de la souveraineté marocaine sur le Sahara. Je tiens également à réaffirmer que les États-Unis d’Amérique reconnaissent la souveraineté marocaine sur le Sahara occidental, et qu’ils soutiennent la Proposition d’Autonom.', 'size': 5}, {'id': '27', 'title': 'Donald Trump réaffirme la reconnaissance par les États-Unis de la souveraineté marocaine sur le Sahara', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Donald-Trump-reaffirme-la-reconnaissance-par-les-Etats-Unis-de-la-souverainete-marocaine-sur-le-Sahara_a70478.html', 'summary': 'Donald Trump réaffirme la reconnaissance par les États-Unis de la souveraineté marocaine sur le Sahara. \u200bDans un message adressé à SM le Roi Mohammed VI à l’occasion de la Fête du Trône, le Président des Etats-Unis d’Amérique Donald J. Trump a réaffirmé la reconnaissance par les États-Unis d’Amérique de la souveraineté marocaine sur le Sahara et leur soutien à la Proposition d’Autonomie marocaine “comme seule base pour un règlement juste et durable de ce différend”.', 'size': 5}, {'id': '37', 'title': 'Trump réaffirme la reconnaissance par les États-Unis de la souveraineté marocaine sur le Sahara', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/trump-reaffirme-la-reconnaissance-par-les-etats-unis-de-la-souverainete-marocaine-sur-le-sahara-308028/', 'summary': 'Trump réaffirme la reconnaissance par les États-Unis de la souveraineté marocaine sur le Sahara. Dans un message adressé à Sa Majesté le Roi Mohammed VI à l’occasion de la Fête du Trône, le président Donald J. Trump a réaffirmé la reconnaissance par les États-Unis de la souveraineté marocaine sur le Sahara et leur soutien à la proposition d’autonomie marocaine « comme seule base pour un', 'size': 5}, {'id': '46', 'title': 'Le Président Trump réaffirme la reconnaissance par les États-Unis de la souveraineté marocaine sur le Sahara et leur soutien à la Proposition d’Autonomie', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/actualite/le-president-trump-reaffirme-la-reconnaissance-par-les-etats-unis-de-la-souverainete-marocaine-sur-le-sahara-et-leur-soutien-a-la-proposition-dautonomie', 'summary': 'Le Président Trump réaffirme la reconnaissance par les États-Unis de la souveraineté marocaine sur le Sahara et leur soutien à la Proposition d’Autonomie. Dans un message adressé à SM le Roi Mohammed VI à l’occasion de la Fête du Trône, le Président des Etats-Unis d’Amérique Donald J. Trump a réaffirmé la reconnaissance par les États-Unis d’Amérique de la souveraineté marocaine sur le Sahara et leur soutien à la Proposition d’Autonomie marocaine « comme seule base pour un règlement juste .', 'size': 5}, {'id': '48', 'title': 'Fête du Trône: Dans un message à S.M. le Roi, le Président Trump réaffirme la reconnaissance par les États-Unis de la souveraineté marocaine sur le Sahara', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/pouvoirs/fete-du-trone-dans-un-message-a-s-m-le-roi-le-president-trump-reaffirme-la-reconnaissance-par-les-etats-unis-de-la-souverainete-marocaine-sur-le-sahara/', 'summary': 'Fête du Trône: Dans un message à S.M. le Roi, le Président Trump réaffirme la reconnaissance par les États-Unis de la souveraineté marocaine sur le Sahara. Dans son message adressé au Souverain à l’occasion de la fête du Trône, le locataire de la Maison Blanche réaffirme le soutien de Washington à la Proposition marocaine d’autonomie « comme seule base de règlement juste et durable de ce différend».', 'size': 5}], 'main_title': 'Le Président Trump réaffirme à S.M. le Roi la reconnaissance par les États-Unis de la souveraineté marocaine sur le Sahara'}, {'community_id': '5', 'articles': [{'id': '16', 'title': 'CHAN : A quelle heure et sur quelle chaînes regarder le match Maroc-Angola ?', 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/chan-a-quelle-heure-et-sur-quelle-chaines-regarder-le-match-maroc-angola/294531', 'summary': "CHAN : A quelle heure et sur quelle chaînes regarder le match Maroc-Angola ?. Premiers arrivés au Kenya, un des trois pays hôte du CHAN 2024, les Lions de l'Atlas affrontent l’Angola pour la première journée du groupe A. Forts de leurs titres en 2018 et.", 'size': 2}, {'id': '74', 'title': 'CHAN 2024 : Début de mission pour le Maroc face à l’Angola', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/436315-chan-2024-debut-de-mission-pour-le-maroc-face-a-langola.html', 'summary': 'CHAN 2024 : Début de mission pour le Maroc face à l’Angola. L’équipe nationale marocaine des joueurs locaux entame, ce dimanche 3 août, sa campagne en Championnat d’Afrique des Nations (CHAN 2024) face à une solide formation angolaise, à Nairobi (16h00, heure locale). Logé dans le groupe A aux côtés du pays hôte, le Kenya, de la RD Congo et de la Zambie, le Maroc vise rien . ', 'size': 2}, {'id': '93', 'title': 'CHAN 2024 / Aujourd’hui, Maroc-Angola, un premier choc déjà décisif : Horaire ? Chaînes ?', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/CHAN-2024-Aujourd-hui-Maroc-Angola-un-premier-choc-deja-decisif-Horaire-Chaines_a70486.html', 'summary': 'CHAN 2024 / Aujourd’hui, Maroc-Angola, un premier choc déjà décisif : Horaire ? Chaînes ?. • Un groupe A relevé Avec le pays hôte, le Kenya, ainsi que la RD Congo et la Zambie dans la poule, chaque point aura son importance. Ce premier choc entre le Maroc et l’Angola pourrait déjà peser lourd dans la course aux quarts de finale. Un match à fort enjeu, où la moindre erreur pourrait coûter cher.', 'size': 3}], 'main_title': 'CHAN 2024 / Aujourd’hui, Maroc-Angola, un premier choc déjà décisif : Horaire ? Chaînes ?'}, {'community_id': '8', 'articles': [{'id': '43', 'title': 'Législatives 2026 : Après l’ordre royal, Laftite s’est réuni avec les partis', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/173377/legislatives-2026-apres-l-ordre-royal.html', 'summary': 'Législatives 2026 : Après l’ordre royal, Laftite s’est réuni avec les partis. Conformément aux directives royales, la préparation des élections législatives de 2026 est désormais lancée. Ce samedi 2 août à Rabat, le ministre de l’Intérieur a réuni à deux reprises les chefs des partis politiques pour discuter du prochain scrutin.', 'size': 3}, {'id': '80', 'title': 'Législatives 2026 : Laftit réunit les partis politiques à Rabat', 'source': 'lematin.ma', 'link': 'https://lematin.ma/nation/legislatives-2026-laftit-reunit-les-partis-politiques-a-rabat/294587', 'summary': 'Législatives 2026 : Laftit réunit les partis politiques à Rabat. Ces réunions s’inscrivent dans le cadre de la mise en œuvre immédiate des Hautes Directives de Sa Majesté le Roi Mohammed VI, contenues dans le Discours du Trône du 29 juillet dern.', 'size': 4}, {'id': '98', 'title': 'Elections législatives 2026 :  Laftit tient deux réunions avec les dirigeants des partis politiques', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/au-royaume/elections-legislatives-2026-laftit-tient-deux-reunions-avec-les-dirigeants-des-partis-politiques/', 'summary': 'Elections législatives 2026 : Laftit tient deux réunions avec les dirigeants des partis politiques. Ces réunions s’inscrivent dans le cadre de la mise en œuvre immédiate des Hautes Directives de Sa Majesté le Roi Mohammed VI, contenues dans le Discours du Trône du 29 juillet dernier, dans lequel le Souverain a annoncé la tenue des prochaines législatives à l’échéance constitutionnelle et légale ordinaire.', 'size': 4}, {'id': '100', 'title': 'Rabat : Le ministre de l’Intérieur consulte les partis sur les prochaines législatives', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/rabat-le-ministre-de-linterieur-consulte-les-partis-sur-les-prochaines-legislatives/', 'summary': 'Rabat : Le ministre de l’Intérieur consulte les partis sur les prochaines législatives. Le ministre de l’Intérieur a tenu, samedi à Rabat, deux réunions successives avec les dirigeants de l’ensemble des partis politiques, consacrées aux prochaines élections législatives des membres de la Chambre des représentants, prévues en 2026. Ces réunions s’inscrivent dans le cadre de la mise en œuvre immédiate des Hautes Directives de Sa Majesté le Roi .', 'size': 5}, {'id': '107', 'title': 'Élections législatives 2026 : Le ministre de l’Intérieur entame les concertations avec les partis politiques', 'source': 'lnt.ma', 'link': 'https://lnt.ma/elections-legislatives-2026-le-ministre-de-linterieur-entame-les-concertations-avec-les-partis-politiques/', 'summary': 'Élections législatives 2026 : Le ministre de l’Intérieur entame les concertations avec les partis politiques. Le ministre de l’Intérieur a présidé, samedi à Rabat, deux réunions successives avec les chefs des partis politiques représentés sur la scène nationale. Ces rencontres ont été consacrées à l’organisation des élections législatives de 2026 et s’inscrivent dans le cadre de la mise en œuvre immédiate des Hautes Directives du Roi Mohammed VI, formulées dans . ', 'size': 5}], 'main_title': 'Rabat : Le ministre de l’Intérieur consulte les partis sur les prochaines législatives'}, {'community_id': '7', 'articles': [{'id': '49', 'title': 'Football : Le Raja passe de l’association à l’entreprise', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/influences/football-le-raja-passe-de-lassociation-a-lentreprise/', 'summary': 'Football : Le Raja passe de l’association à l’entreprise. C’est officiel ! Le Raja Club Athletic et l’association Ports4Impact ont scellé, ce samedi, un partenariat pour l’activation de la société sportive Raja S.A.', 'size': 2}, {'id': '101', 'title': 'Le Raja scelle un partenariat avec Ports4Impact pour lancer la société sportive Raja S.A.', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/le-raja-scelle-un-partenariat-avec-ports4impact-pour-lancer-la-societe/', 'summary': 'Le Raja scelle un partenariat avec Ports4Impact pour lancer la société sportive Raja S.A.. Le Raja Club Athletic et l’association Ports4Impact, entité autonome chargée de la mise en œuvre de la politique de responsabilité sociétale de Marsa Maroc, ont signé, samedi à Casablanca, une convention d’investissement visant à activer et dynamiser la société sportive Raja S.A. Ce partenariat, conclu lors d’une cérémonie présidée par le président de la Fédération .', 'size': 2}], 'main_title': 'Football : Le Raja passe de l’association à l’entreprise'}, {'community_id': '4', 'articles': [{'id': '58', 'title': 'Le dirham s’apprécie de 0,6% face à l’euro du 24 au 29 juillet (BAM)', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/le-dirham-sapprecie-de-06-face-a-leuro-du-24-au-29-juillet-bam/', 'summary': 'Le dirham s’apprécie de 0,6% face à l’euro du 24 au 29 juillet (BAM). Le dirham s’est apprécié de 0,6% face à l’euro et s’est déprécié de 1% vis-à-vis du dollar américain, durant la période du 24 au 29 juillet, selon Bank Al-Maghrib (BAM). Au cours de cette période, aucune opération d’adjudication n’a été réalisée sur le marché des changes, précise BAM dans son bulletin des indicateurs hebdomadaires. Les .', 'size': 3}, {'id': '63', 'title': 'Le dirham s’apprécie de 0,6% face à l’euro', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/le-dirham-sapprecie-de-06-face-a-leuro.html', 'summary': 'Le dirham s’apprécie de 0,6% face à l’euro. Le dirham s’est apprécié de 0,6% face à l’euro et s’est déprécié de 1% vis-à-vis du dollar américain, durant la période du 24 au 29 juillet, selon Bank Al-Maghrib (BAM). Au cours de cette période, aucune opération d’adjudication n’a été réalisée sur le marché des changes, précise BAM dans son bulletin des indicateurs hebdomadaires. Les . L’article est apparu en premier sur .', 'size': 3}, {'id': '70', 'title': "Change : le dirham s'apprécie face à l'euro et se déprécie vis-à-vis du dollar", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/436182-change-le-dirham-sapprecie-face-a-leuro-et-se-deprecie-vis-a-vis-du-dollar-4.html', 'summary': "Change : le dirham s'apprécie face à l'euro et se déprécie vis-à-vis du dollar. Bank Al-Maghrib (BAM), a fait savoir que durant la période du 24 au 29 juillet, le dirham s’est apprécié de 0,6% face à l’euro et s’est déprécié de 1% vis-à-vis du dollar américain. Dans son bulletin des indicateurs hebdomadaires, BAM précise qu’au cours de cette période, aucune opération d’adjudication n’a été réalisée sur le marché . ", 'size': 3}], 'main_title': 'Le dirham s’apprécie de 0,6% face à l’euro du 24 au 29 juillet (BAM)'}, {'community_id': '6', 'articles': [{'id': '69', 'title': 'Alerte météo : vague de chaleur et averses orageuses de dimanche à vendredi dans plusieurs régions', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/436337-alerte-meteo-vague-de-chaleur-et-averses-orageuses-de-dimanche-a-vendredi-dans-plusieurs-regions.html', 'summary': 'Alerte météo : vague de chaleur et averses orageuses de dimanche à vendredi dans plusieurs régions. La Direction générale de la météorologie (DGM), a annoncé une vague de chaleur et des averses orageuses avec chutes de grêle et rafales de vent sous orages sont prévues de dimanche à vendredi dans plusieurs provinces du Royaume. Dans un bulletin d’alerte de niveau de vigilance orange, la DGM précise qu’une vague de chaleur, avec . ', 'size': 4}, {'id': '77', 'title': 'Vague de chaleur et averses orageuses avec chutes de grêle et rafales de vent sous orages de dimanche à vendredi au Maroc', 'source': 'lematin.ma', 'link': 'https://lematin.ma/regions/vague-de-chaleur-averses-orageuses-avec-chutes-de-grele-et-rafales-de-vent/294601', 'summary': 'Vague de chaleur et averses orageuses avec chutes de grêle et rafales de vent sous orages de dimanche à vendredi au Maroc. Une vague de chaleur, avec des températures oscillant entre 40 et 44°C, sera enregistrée dimanche et lundi dans les provinces de Tata, Zagora, Khouribga, Ouezzane, Beni Mellal, Fqu.', 'size': 2}, {'id': '95', 'title': 'Alerte météo: Vague de chaleur et averses orageuses avec chutes de grêle et rafales de vent sous orages de dimanche à vendredi', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/actualite/alerte-meteo-vague-de-chaleur-et-averses-orageuses-avec-chutes-de-grele-et-rafales-de-vent-sous-orages-de-dimanche-a-vendredi', 'summary': 'Alerte météo: Vague de chaleur et averses orageuses avec chutes de grêle et rafales de vent sous orages de dimanche à vendredi. Une vague de chaleur et des averses orageuses avec chutes de grêle et rafales de vent sous orages sont prévues de dimanche à vendredi dans plusieurs provinces du Royaume, a annoncé la Direction générale de la météorologie (DGM). Ainsi, une vague de chaleur, avec des températures oscillant entre 40 et 44°C, sera enregistrée dimanche et .', 'size': 5}, {'id': '96', 'title': 'Alerte météo : Vague de chaleur et averses orageuses de dimanche à vendredi', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/au-royaume/alerte-meteo-vague-de-chaleur-et-averses-orageuses-de-dimanche-a-vendredi/', 'summary': 'Alerte météo : Vague de chaleur et averses orageuses de dimanche à vendredi. Une vague de chaleur et des averses orageuses avec chutes de grêle et rafales de vent sous orages sont prévues de dimanche à vendredi dans plusieurs provinces du Royaume, a annoncé la Direction générale de la météorologie (DGM).', 'size': 4}, {'id': '109', 'title': 'Vague de chaleur et épisodes orageux attendus dans plusieurs provinces du Royaume', 'source': 'lnt.ma', 'link': 'https://lnt.ma/vague-de-chaleur-et-episodes-orageux-attendus-dans-plusieurs-provinces-du-royaume/', 'summary': 'Vague de chaleur et épisodes orageux attendus dans plusieurs provinces du Royaume. Une vague de chaleur accompagnée par endroits d’averses orageuses, de chutes de grêle et de rafales de vent est attendue dans plusieurs provinces du Royaume à partir de dimanche et jusqu’à vendredi prochain, selon un bulletin d’alerte émis par la Direction générale de la météorologie (DGM). Cette alerte, de niveau de vigilance orange, fait état . ', 'size': 4}], 'main_title': 'Alerte météo: Vague de chaleur et averses orageuses avec chutes de grêle et rafales de vent sous orages de dimanche à vendredi'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
                        
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ? d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        // Fonction pour cacher le tooltip
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = '';
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
    
    
</body>




</html>
    