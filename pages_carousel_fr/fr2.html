<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); 
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title"> Les principales actualités des dernières 24 heures

</div>    
        <div class="header-subtitle"> Dernière mise à jour : 02/10/2025 - 06h14</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"></div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '0', 'title': 'Réunion du Bureau politique du RNI consacrée aux revendications de la GenZ', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/443552-reunion-du-bureau-politique-du-rni-consacree-aux-revendications-de-la-genz.html', 'summary': 'Réunion du Bureau politique du RNI consacrée aux revendications de la GenZ. Le Bureau politique du Rassemblement National des Indépendants (RNI) s’est réuni mercredi 1er octobre 2025 à Rabat, sous la présidence de Aziz Akhannouch. Cette réunion a été consacrée à l’examen de la situation politique, sociale et économique actuelle du pays, notamment dans le contexte des récentes expressions de la jeunesse marocaine. Dans un communiqué parvenu . ', 'size': 3}, {'id': '81', 'title': "Le RNI appelle au dialogue avec la jeunesse et dénonce l'instrumentalisation politique", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/10/01/le-rni-appelle-au-dialogue-avec-la-jeunesse-et-denonce-linstrumentalisation-politique_1953527/', 'summary': "Le RNI appelle au dialogue avec la jeunesse et dénonce l'instrumentalisation politique. Le Bureau politique du Rassemblement National des Indépendants (RNI) s’est réuni mercredi 1er octobre à Rabat, sous la présidence d’Aziz Akhannouch, pour examiner les évolutions de la situation politique et sociale actuelle. Lors de cette réunion, le parti au pouvoir a exprimé sa compréhension des manifestations de la jeunesse marocaine et réaffirmé sa disponibilité à.", 'size': 3}, {'id': '146', 'title': 'Manifestations : Le RNI interagit avec les revendications de la jeunesse', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/pouvoirs/partis/manifestations-le-rni-interagit-avec-les-revendications-de-la-jeunesse/', 'summary': 'Manifestations : Le RNI interagit avec les revendications de la jeunesse. Le parti du Rassemblement National des Indépendants (RNI) a affirmé, mercredi, son interaction avec les revendications de la jeunesse et sa disposition à adhérer à toutes les initiatives de dialogue et de débat.', 'size': 2}, {'id': '280', 'title': 'Le RNI affirme son interaction avec les revendications de la jeunesse et sa disposition à adhérer à toutes les initiatives de dialogue', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/actualite/le-rni-affirme-son-interaction-avec-les-revendications-de-la-jeunesse-et-sa-disposition-a-adherer-a-toutes-les-initiatives-de-dialogue', 'summary': 'Le RNI affirme son interaction avec les revendications de la jeunesse et sa disposition à adhérer à toutes les initiatives de dialogue. Le parti du Rassemblement National des Indépendants (RNI) a affirmé, mercredi, son interaction avec les revendications de la jeunesse et sa disposition à adhérer à toutes les initiatives de dialogue et de débat. Dans un communiqué à l’issue d’une réunion de son bureau politique, présidée par Aziz Akhannouch et consacrée à l’examen de la conjoncture .', 'size': 4}], 'main_title': 'Le RNI affirme son interaction avec les revendications de la jeunesse et sa disposition à adhérer à toutes les initiatives de dialogue'}, {'community_id': '1', 'articles': [{'id': '3', 'title': 'Casa-Settat : le Roi lance la réalisation d’un projet solidaire au profit des personnes souffrant de troubles mentaux', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/443540-casa-settat-le-roi-lance-la-realisation-dun-projet-solidaire-au-profit-des-personnes-souffrant-de-troubles-mentaux.html', 'summary': 'Casa-Settat : le Roi lance la réalisation d’un projet solidaire au profit des personnes souffrant de troubles mentaux. Le Roi Mohammed VI a procédé, mercredi à la commune Sidi Hajjaj Oued Hassar à la province de Mediouna (région Casablanca-Settat), au lancement des travaux de construction d’un Complexe régional d’accueil et de réhabilitation psychosociale des personnes atteintes de troubles mentaux et psychiques, qui sera réalisé par la Fondation Mohammed V pour la Solidarité pour . ', 'size': 5}, {'id': '61', 'title': 'Casablanca-Settat : le Roi lance la réalisation d’un projet au profit des personnes souffrant de troubles mentaux', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Casablanca-Settat-le-Roi-lance-la-realisation-d-un-projet-au-profit-des-personnes-souffrant-de-troubles-mentaux_a72386.html', 'summary': 'Casablanca-Settat : le Roi lance la réalisation d’un projet au profit des personnes souffrant de troubles mentaux. Le Roi Mohammed VI a procédé, mercredi à la commune Sidi Hajjaj Oued Hassar à la province de Mediouna (région Casablanca-Settat), au lancement des travaux de construction d’un Complexe régional d’accueil et de réhabilitation psychosociale des personnes atteintes de troubles mentaux et psychiques, qui sera réalisé par la Fondation Mohammed V pour la Solidarité pour un investissement global de 300 millions de dirhams.', 'size': 5}, {'id': '83', 'title': 'Mediouna : le roi lance la réalisation d’un projet solidaire pour les personnes souffrant de troubles mentaux', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/10/01/mediouna-le-roi-lance-la-realisation-dun-projet-solidaire-pour-les-personnes-souffrant-de-troubles-mentaux_1953526/', 'summary': 'Mediouna : le roi lance la réalisation d’un projet solidaire pour les personnes souffrant de troubles mentaux. Le roi Mohammed VI a procédé, mercredi à la commune Sidi Hajjaj Oued Hassar à la province de Mediouna (région Casablanca-Settat), au lancement des travaux de construction d’un Complexe régional d’accueil et de réhabilitation psychosociale des personnes atteintes de troubles mentaux et psychiques, qui sera réalisé par la Fondation Mohammed V pour la Solidarité pour.', 'size': 5}, {'id': '130', 'title': 'Casablanca: SM le Roi lance la réalisation d’un projet solidaire pour l’accueil et la réhabilitation psychosociale des personnes souffrant de troubles mentaux', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/actualite/casablanca-sm-le-roi-lance-la-realisation-dun-projet-solidaire-pour-laccueil-et-la-rehabilitation-psychosociale-des-personnes-souffrant-de-troubles-mentaux', 'summary': 'Casablanca: SM le Roi lance la réalisation d’un projet solidaire pour l’accueil et la réhabilitation psychosociale des personnes souffrant de troubles mentaux. Sa Majesté le Roi Mohammed VI, que Dieu L’assiste, a procédé, mercredi à la commune Sidi Hajjaj Oued Hassar à la province de Mediouna (région Casablanca-Settat), au lancement des travaux de construction d’un Complexe régional d’accueil et de réhabilitation psychosociale des personnes atteintes de troubles mentaux et psychiques, qui sera réalisé par la Fondation Mohammed .', 'size': 5}, {'id': '180', 'title': 'Casablanca-Settat : S.M. le Roi lance un projet solidaire pour la réhabilitation des personnes atteintes de troubles mentaux', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/casablanca-settat-sm-le-roi-lance-un-projet-solidaire-pour-la-rehabilitation/', 'summary': 'Casablanca-Settat : S.M. le Roi lance un projet solidaire pour la réhabilitation des personnes atteintes de troubles mentaux. Sa Majesté le Roi Mohammed VI, que Dieu L’assiste, a procédé, mercredi à la commune Sidi Hajjaj Oued Hassar à la province de Mediouna (région Casablanca-Settat), au lancement des travaux de construction d’un Complexe régional d’accueil et de réhabilitation psychosociale des personnes atteintes de troubles mentaux et psychiques, qui sera réalisé par la Fondation Mohammed .', 'size': 5}], 'main_title': 'Casa-Settat : le Roi lance la réalisation d’un projet solidaire au profit des personnes souffrant de troubles mentaux'}, {'community_id': '5', 'articles': [{'id': '9', 'title': 'Rassemblements GenZ : l’Intérieur fait le point sur les interventions des forces de l’ordre', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/443515-rassemblements-genz-linterieur-fait-le-point-sur-les-interventions-des-forces-de-lordre.html', 'summary': 'Rassemblements GenZ : l’Intérieur fait le point sur les interventions des forces de l’ordre. Le ministère de l’Intérieur, par la voix de son porte-parole, Rachid El Khalfi, a présenté ce mercredi 1er octobre, le bilan des opérations menées par les forces de l’ordre le mardi 30 septembre 2025 dans plusieurs régions du Royaume, suite aux manifestations qui ont dégénéré dans certaines villes. Le mardi 30 septembre 2025, les forces . ', 'size': 4}, {'id': '85', 'title': "GenZ212 : les interventions policières “conformes à la loi” selon l'Intérieur", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/10/01/genz212-les-interventions-policieres-conformes-a-la-loi-selon-linterieur_1953511/', 'summary': "GenZ212 : les interventions policières “conformes à la loi” selon l'Intérieur. Les services du ministère de l’Intérieur vont poursuivre l’accomplissement de leur devoir constitutionnel pour la protection de la sécurité et de l’ordre publics et la préservation des droits et des libertés individuels et collectifs, a affirmé, mercredi à Rabat, le porte parole du ministère de l’intérieur, Rachid El Khalfi. Dans une déclaration à la presse,.", 'size': 4}, {'id': '182', 'title': 'Interventions des forces de l’ordre : un ultime recours face aux instigateurs', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/interventions-des-forces-de-lordre-un-ultime-recours-face-aux-instigateurs/', 'summary': 'Interventions des forces de l’ordre : un ultime recours face aux instigateurs. Le porte-parole du ministère de l’Intérieur, Rachid El Khalfi, a indiqué, mercredi à Rabat, que les interventions des forces de l’ordre lors des récentes manifestations qu’ont connues certaines régions du Royaume se sont déroulées dans le strict respect des dispositions juridiques et professionnelles régissant leur travail et que le recours à ces interventions, dans certains .', 'size': 4}, {'id': '264', 'title': "GenZ : Le ministère de l'Intérieur explique les raisons de l'interdiction des manifestations", 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/GenZ-Le-ministere-de-l-Interieur-explique-les-raisons-de-l-interdiction-des-manifestations_a72387.html', 'summary': "GenZ : Le ministère de l'Intérieur explique les raisons de l'interdiction des manifestations. Le porte-parole du ministère de l’Intérieur, Rachid El Khalfi, a indiqué, mercredi à Rabat, que l’interdiction des récentes manifestations dans certaines régions du Royaume est due au non respect des dispositions légales en vigueur.", 'size': 4}], 'main_title': 'Rassemblements GenZ : l’Intérieur fait le point sur les interventions des forces de l’ordre'}, {'community_id': '11', 'articles': [{'id': '25', 'title': 'Le Maroc réélu au Comité contre la Torture à Genève', 'source': 'lematin.ma', 'link': 'https://lematin.ma/nation/le-maroc-reelu-au-comite-contre-la-torture-a-geneve/305048', 'summary': "Le Maroc réélu au Comité contre la Torture à Genève. Cette réélection dès le premier tour, avec une majorité de 119 voix, témoigne de la grande crédibilité des efforts que mène le Royaume dans le domaine des droits de l'Homme, ta.", 'size': 2}, {'id': '153', 'title': 'Genève : Le  Maroc réélu au Comité contre la Torture', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/influences/geneve-le-maroc-reelu-au-comite-contre-la-torture/', 'summary': "Genève : Le Maroc réélu au Comité contre la Torture. Cette réélection dès le premier tour, avec une majorité de 119 voix, témoigne de la grande crédibilité des efforts que mène le Royaume dans le domaine des droits de l'Homme, tant au niveau national qu’international, conformément à la Haute Vision de SM le Roi.", 'size': 2}], 'main_title': 'Le Maroc réélu au Comité contre la Torture à Genève'}, {'community_id': '12', 'articles': [{'id': '28', 'title': 'Averses orageuses avec rafales de vent de mercredi à jeudi dans plusieurs régions du Maroc', 'source': 'lematin.ma', 'link': 'https://lematin.ma/regions/averses-orageuses-avec-rafales-de-vent-dans-plusieurs-regions-du-maroc/304992', 'summary': "Averses orageuses avec rafales de vent de mercredi à jeudi dans plusieurs régions du Maroc. Des averses orageuses entre 60 et 100 mm sont ainsi prévues de mercredi à 11h jusqu'à jeudi à midi dans les provinces d'Aousserd, Oued Ed-Dahab et Boujdour, précise la DGM.", 'size': 4}, {'id': '93', 'title': 'Averses orageuses localement fortes avec rafales de vent de mercredi à jeudi dans certaines provinces', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/10/01/averses-orageuses-localement-fortes-avec-rafales-de-vent-sous-orages-de-mercredi-a-jeudi-dans-certaines-provinces_1953438/', 'summary': 'Averses orageuses localement fortes avec rafales de vent de mercredi à jeudi dans certaines provinces. Des averses orageuses localement fortes avec rafales de vent sous orages sont attendues de mercredi à jeudi dans certaines provinces du Royaume, a annoncé la Direction générale de la météorologie (DGM). Des averses entre 60 et 100 mm sont ainsi prévues de mercredi à 11h jusqu’à jeudi à midi dans les provinces d’Aousserd, Oued Ed-Dahab.', 'size': 4}, {'id': '122', 'title': "Maroc : Averses orageuses et rafales de vent sous orages jusqu'à jeudi", 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/177740/maroc-averses-orageuses-rafales-vent.html', 'summary': "Maroc : Averses orageuses et rafales de vent sous orages jusqu'à jeudi. Des averses orageuses localement fortes avec rafales de vent sous orages sont attendues de mercredi à jeudi dans certaines provinces du Maroc, a annoncé la Direction générale de la météorologie (DGM).", 'size': 4}, {'id': '161', 'title': 'Alerte météo : Averses orageuses fortes et rafales de vent de mercredi à jeudi', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/au-royaume/alerte-meteo-averses-orageuses-fortes-et-rafales-de-vent-de-mercredi-a-jeudi/', 'summary': "Alerte météo : Averses orageuses fortes et rafales de vent de mercredi à jeudi. Des averses entre 60 et 100 mm sont ainsi prévues de mercredi à 11h jusqu'à jeudi à midi dans les provinces d'Aousserd, Oued Ed-Dahab et Boujdour. Elles toucheront également Laâyoune et Tarfaya.", 'size': 4}], 'main_title': 'Averses orageuses avec rafales de vent de mercredi à jeudi dans plusieurs régions du Maroc'}, {'community_id': '4', 'articles': [{'id': '33', 'title': 'Énergie et numérique : Schneider Electric transforme ses ambitions en engagements concrets à Casablanca', 'source': 'lematin.ma', 'link': 'https://lematin.ma/economie/marocschneider-electric-transition-energetique-et-digitale-a-casablanca/304974', 'summary': 'Énergie et numérique : Schneider Electric transforme ses ambitions en engagements concrets à Casablanca. Casablanca a accueilli, ce mardi, la première édition marocaine de l’« Innovation Day », organisée par Schneider Electric, groupe français fondé en 1836 et aujourd’hui présent dans.', 'size': 2}, {'id': '232', 'title': 'Schneider Electric réunit les acteurs de l’innovation énergétique et digitale à Casablanca', 'source': 'lnt.ma', 'link': 'https://lnt.ma/schneider-electric-reunit-les-acteurs-de-linnovation-energetique-et-digitale-a-casablanca/', 'summary': 'Schneider Electric réunit les acteurs de l’innovation énergétique et digitale à Casablanca. Casablanca a accueilli, le 30 septembre, la première édition marocaine de l’Innovation Day organisée par Schneider Electric. L’événement, tenu au Hyatt Regency, a réuni décideurs publics, experts, entrepreneurs et représentants du secteur privé autour d’un enjeu central : accélérer la transition énergétique et digitale en Afrique. Dès l’ouverture, le ton était donné. Diaretou Madina Gaye . ', 'size': 2}], 'main_title': 'Énergie et numérique : Schneider Electric transforme ses ambitions en engagements concrets à Casablanca'}, {'community_id': '14', 'articles': [{'id': '64', 'title': '\u200bMondial U20: Ce soir à minuit, Maroc-Brésil... Lionceaux vs Auriverde : Le choc des ambitions', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/\u200bMondial-U20-Ce-soir-a-minuit-Maroc-Bresil-Lionceaux-vs-Auriverde-Le-choc-des-ambitions_a72381.html', 'summary': '\u200bMondial U20: Ce soir à minuit, Maroc-Brésil. Lionceaux vs Auriverde : Le choc des ambitions. L’air du Chili a décidément du bon pour les Lionceaux de l’Atlas. Après avoir frappé un grand coup en domptant la Roja (2-0) lors de leur entrée en lice, les protégés de Mohamed Ouahbi s’attaquent désormais à un autre monument du football mondial : le Brésil. Une affiche de gala, aujourd’hui jeudi à minuit (GMT+1), qui s’annonce comme le véritable juge de paix du groupe « C ».', 'size': 2}, {'id': '100', 'title': 'Mondial U20 : “Notre objectif est de battre le Brésil et de nous qualifier pour le deuxième tour”, selon Ouahbi', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/10/01/mondial-u20-notre-objectif-est-de-battre-le-bresil-et-de-nous-qualifier-pour-le-deuxieme-tour-selon-ouahbi_1953401/', 'summary': 'Mondial U20 : “Notre objectif est de battre le Brésil et de nous qualifier pour le deuxième tour”, selon Ouahbi. Le sélectionneur de l’équipe nationale U20, Mohamed Ouahbi, a affirmé, mercredi à Santiago, que l’objectif des Lionceaux de l’Atlas est de battre le Brésil, jeudi à minuit (GMT 1), lors de leur deuxième match du groupe C de la Coupe du Monde des moins de 20 ans. La clé pour atteindre cet objectif est d’aborder.', 'size': 3}, {'id': '245', 'title': 'Mondial U20 : Le Maroc bat le Brésil et se qualifie pour les 8ès de finale', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/443618-mondial-u20-le-maroc-bat-le-bresil-et-se-qualifie-pour-les-8es-de-finale.html', 'summary': 'Mondial U20 : Le Maroc bat le Brésil et se qualifie pour les 8ès de finale. Les Lionceaux de l’Atlas ont frappé en grand coup en battant le Brésil (2-0), cette nuit à Santiago, pour le compte de la deuxième journée de la phase de groupe de la Coupe du monde U20 au Chili. L’ouverture du score est l’oeuvre d’Othmane Maamma sur une superbe reprise de volée (60e). 🚨🌎 | GOAL: . ', 'size': 2}], 'main_title': 'Mondial U20 : “Notre objectif est de battre le Brésil et de nous qualifier pour le deuxième tour”, selon Ouahbi'}, {'community_id': '2', 'articles': [{'id': '77', 'title': 'Aerospace Meeting Casablanca 2025 : signature de protocoles d’accord pour renforcer l’intégration locale de l’aéronautique', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Aerospace-Meeting-Casablanca-2025-signature-de-protocoles-d-accord-pour-renforcer-l-integration-locale-de-l-aeronautique_a72370.html', 'summary': 'Aerospace Meeting Casablanca 2025 : signature de protocoles d’accord pour renforcer l’intégration locale de l’aéronautique. \u200bTrois protocoles d’accord relatifs à des projets industriels visant le renforcement de l’intégration locale du secteur aéronautique ont été signés en marge du 8ème salon Aerospace Meeting Casablanca, inauguré, mardi à Nouaceur, en présence du ministre de l’Industrie et du Commerce, Ryad Mezzour.', 'size': 2}, {'id': '225', 'title': 'Aerospace Meeting Casablanca | Trois projets stratégiques pour l’avenir de l’aéronautique nationale', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/aerospace-meeting-casablanca-trois-projets-strategiques-pour-lavenir-de-laeronautique-nationale/', 'summary': 'Aerospace Meeting Casablanca | Trois projets stratégiques pour l’avenir de l’aéronautique nationale. Trois protocoles d’accord relatifs à des projets industriels visant le renforcement de l’intégration locale du secteur aéronautique ont été signés en marge du 8ème salon Aerospace Meeting Casablanca, inauguré, mardi à Nouaceur, en présence du ministre de l’Industrie et du Commerce, Ryad Mezzour. Signés entre le ministère de l’Industrie et du Commerce et des entreprises ', 'size': 2}], 'main_title': 'Aerospace Meeting Casablanca 2025 : signature de protocoles d’accord pour renforcer l’intégration locale de l’aéronautique'}, {'community_id': '3', 'articles': [{'id': '87', 'title': 'Le CESE préconise une accélération de la mise en œuvre du Plan d’action national pour la promotion du vieillissement', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/10/01/le-cese-preconise-une-acceleration-de-la-mise-en-oeuvre-du-plan-daction-national-pour-la-promotion-du-vieillissement_1953483/', 'summary': 'Le CESE préconise une accélération de la mise en œuvre du Plan d’action national pour la promotion du vieillissement. Le Conseil économique, social et environnemental (CESE) a préconisé, mercredi à Rabat, l’accélération de la mise en œuvre du Plan d’action national pour la promotion du vieillissement actif 2023-2030 et l’adoption d’une loi-cadre relative aux personnes âgées. Lors d’un atelier de restitution consacré à la présentation des principales conclusions et recommandations du focus de son.', 'size': 2}, {'id': '231', 'title': 'Le CESE appelle à accélérer la mise en œuvre du Plan national pour le vieillissement actif', 'source': 'lnt.ma', 'link': 'https://lnt.ma/le-cese-appelle-a-accelerer-la-mise-en-oeuvre-du-plan-national-pour-le-vieillissement-actif/', 'summary': 'Le CESE appelle à accélérer la mise en œuvre du Plan national pour le vieillissement actif. Le Conseil économique, social et environnemental (CESE) a plaidé pour une accélération de la mise en œuvre du Plan d’action national pour la promotion du vieillissement actif 2023-2030, lors d’un atelier de restitution consacré à la présentation des conclusions de son rapport annuel 2024. L’institution recommande également l’adoption d’une loi-cadre relative aux personnes âgées, afin . ', 'size': 2}], 'main_title': 'Le CESE préconise une accélération de la mise en œuvre du Plan d’action national pour la promotion du vieillissement'}, {'community_id': '13', 'articles': [{'id': '101', 'title': 'Le déficit commercial dépasse 225,9 MMDH à fin août', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/10/01/le-deficit-commercial-depasse-2259-mmdh-a-fin-aout_1953353/', 'summary': 'Le déficit commercial dépasse 225,9 MMDH à fin août. Le déficit commercial a atteint plus de 225,9 milliards de dirhams (MMDH) au terme des huit premiers mois de 2025, en hausse de 15,5% comparativement à la même période un an auparavant, selon l’Office des changes. Cette évolution couvre une progression des importations de marchandises de 8,4% à 533,42 MMDH et des exportations de 3,8%.', 'size': 2}, {'id': '171', 'title': 'Déficit commercial : Une hausse de 15,5% à fin août', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/affaires/echanges/deficit-commercial-une-hausse-de-155-a-fin-aout/', 'summary': "Déficit commercial : Une hausse de 15,5% à fin août. Le déficit commercial a atteint plus de 225,9 milliards de dirhams (MMDH) au terme des huit premiers mois de 2025, en hausse de 15,5% comparativement à la même période un an auparavant, selon l'Office des changes.", 'size': 2}], 'main_title': 'Le déficit commercial dépasse 225,9 MMDH à fin août'}, {'community_id': '15', 'articles': [{'id': '103', 'title': "Phosphates et dérivés : près de 65 MMDH d'exportations à fin août", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/10/01/phosphates-et-derives-pres-de-65-mmdh-dexportations-a-fin-aout_1953359/', 'summary': "Phosphates et dérivés : près de 65 MMDH d'exportations à fin août. Les exportations du secteur des phosphates et dérivés ont atteint 64,98 milliards de dirhams (MMDH) durant les huit premiers mois de 2025, en croissance de 21,1% par rapport à fin août 2024, selon l’Office des changes. Cette évolution est le résultat de l’accroissement des ventes des segments phosphates (+50,1%), engrais naturels et chimiques (+18,9%) et acide.", 'size': 2}, {'id': '221', 'title': 'Phosphates & Dérivés | Un bond de 21,1% des exportations à fin août 2025', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/phosphates-derives-un-bond-de-211-des-exportations-a-fin-aout-2025/', 'summary': 'Phosphates & Dérivés | Un bond de 21,1% des exportations à fin août 2025. Les exportations du secteur des phosphates et dérivés ont atteint 64,98 milliards de dirhams (MMDH) durant les huit premiers mois de 2025, en croissance de 21,1% par rapport à fin août 2024, selon l’Office des changes. Cette évolution est le résultat de l’accroissement des ventes des segments “Phosphates” (+50,1%), “Engrais naturels et chimiques” (+18,9%) et ', 'size': 2}], 'main_title': "Phosphates et dérivés : près de 65 MMDH d'exportations à fin août"}, {'community_id': '9', 'articles': [{'id': '120', 'title': 'L’hydrogène vert,\xa0vecteur de la\xa0transition énergétique durable au Maroc (Leila Benali)', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/177743/l-hydrogene-vert-vecteur-transition-energetique.html', 'summary': 'L’hydrogène vert, vecteur de la transition énergétique durable au Maroc (Leila Benali). La filière de l’hydrogène vert représente l’un des enjeux dynamiques et prometteurs sur lesquels le Moyaume compte pour parvenir à une transition énergétique durable, a souligné, mercredi à Marrakech, la ministre de la Transition énergétique et du développement durable, Leila Benali.', 'size': 3}, {'id': '155', 'title': 'Benali : Les stratégies énergétiques du Royaume sont conçues pour servir les jeunes', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/au-royaume/benali-les-strategies-energetiques-du-royaume-sont-concues-pour-servir-les-jeunes/', 'summary': "Benali : Les stratégies énergétiques du Royaume sont conçues pour servir les jeunes. La ministre de la Transition énergétique et du Développement durable, Leila Benali, a affirmé, mercredi à Marrakech que les stratégies énergétiques du Royaume sont conçues pour servir les jeunes et ceux qui ont des projets innovants, dans le but de renforcer leur engagement dans le système d'énergies renouvelables et de créer une valeur économique et sociale ajoutée.", 'size': 4}, {'id': '218', 'title': 'L’hydrogène vert, un enjeu prometteur pour parvenir à une transition énergétique durable (Benali)', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/lhydrogene-vert-un-enjeu-prometteur-pour-parvenir-a-une-transition-energetique-durable-benali/', 'summary': 'L’hydrogène vert, un enjeu prometteur pour parvenir à une transition énergétique durable (Benali). La filière de l’hydrogène vert représente l’un des enjeux dynamiques et prometteurs sur lesquels le Royaume compte pour parvenir à une transition énergétique durable, a souligné, mercredi à Marrakech, la ministre de la Transition énergétique et du Développement durable, Leila Benali. Intervenant à la cérémonie d’ouverture de la 5e édition du World Power-to-X Summit (Power-to-X ', 'size': 4}, {'id': '279', 'title': 'Hydrogène vert : Les experts mondiaux réunis à Marrakech', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/videos/hydrogene-vert-les-experts-mondiaux-reunis-a-marrakech', 'summary': 'Hydrogène vert : Les experts mondiaux réunis à Marrakech. Top départ pour la cinquième édition du World Power-to-X Summit qui se tient le 1 er et 2 octobre 2025 à Marrakech. Cet évènement se présente comme une plateforme de premier plan qui réunit des leaders influents, des décideurs, des innovateurs et des experts universitaires afin d’accélérer la transition énergétique mondiale. Témoignages en vidéo. Reportage .', 'size': 2}, {'id': '291', 'title': 'World Power-to-X Summit : Leila Benali appelle à mobiliser la jeunesse pour bâtir l’avenir de l’hydrogène vert', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/world-power-to-x-summit-leila-benali-appelle-a-mobiliser-la-jeunesse/', 'summary': 'World Power-to-X Summit : Leila Benali appelle à mobiliser la jeunesse pour bâtir l’avenir de l’hydrogène vert. Le Maroc accueille, ce mercredi 1er octobre, la cinquième édition du World Power-to-X Summit à Marrakech, un événement qui réunit acteurs publics, industriels et chercheurs autour du développement de l’hydrogène vert. La ministre de la Transition énergétique et du Développement durable a souligné le rôle des jeunes dans ce secteur émergent et l’importance de l’éducation, .', 'size': 4}], 'main_title': 'Benali : Les stratégies énergétiques du Royaume sont conçues pour servir les jeunes'}, {'community_id': '10', 'articles': [{'id': '128', 'title': 'Le Maroc et la Gambie signent un accord sur les services aériens', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/177711/maroc-gambie-signent-accord-services.html', 'summary': 'Le Maroc et la Gambie signent un accord sur les services aériens. Le Maroc et la Gambie ont signé, mardi à Montréal, un accord sur les services aériens, en marge de la 42ème session de l’Assemblée de l’Organisation de l’aviation civile internationale (OACI).', 'size': 3}, {'id': '172', 'title': 'Le Maroc élu au Conseil de l’Organisation de l’aviation civile internationale', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/au-royaume/scans/le-maroc-elu-au-conseil-de-lorganisation-de-laviation-civile-internationale/', 'summary': "Le Maroc élu au Conseil de l’Organisation de l’aviation civile internationale. L'élection du Royaume est aussi le fruit de la participation et de l'implication active de la délégation marocaine qui a pris part aux travaux de l'Assemblée de l'OACI, conduite par le ministre du Transport et de la Logistique, Abdessamad Kayouh.", 'size': 2}, {'id': '222', 'title': 'Aviation civile | Le Maroc et la Gambie signent à Montréal un accord sur les services aériens', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/aviation-civile-le-maroc-et-la-gambie-signent-a-montreal-un-accord-sur-les-services-aeriens/', 'summary': 'Aviation civile | Le Maroc et la Gambie signent à Montréal un accord sur les services aériens. Le Maroc et la Gambie ont signé, mardi à Montréal, un accord sur les services aériens, en marge de la 42ème session de l’Assemblée de l’Organisation de l’aviation civile internationale (OACI). Signé au siège de l’OACI par l’ambassadeur du Maroc au Canada, Souriya Otmani, et le ministre gambien des Travaux, des Transports et des Infrastructures, ', 'size': 2}], 'main_title': 'Le Maroc et la Gambie signent un accord sur les services aériens'}, {'community_id': '7', 'articles': [{'id': '247', 'title': 'Lqliâa : Deux personnes tuées par des gendarmes en état de légitime défense lors d’une tentative de vol d’armes', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/443603-lqliaa-deux-personnes-tuees-par-des-gendarmes-en-etat-de-legitime-defense.html', 'summary': 'Lqliâa : Deux personnes tuées par des gendarmes en état de légitime défense lors d’une tentative de vol d’armes. Les autorités locales de la préfecture d’Inezgane Ait-Melloul ont indiqué que les éléments de la Gendarmerie Royale à Lqliâa ont été contraints, mercredi soir 1er octobre 2025, de faire usage de leurs armes de service, dans le cadre de la légitime défense, pour repousser une attaque et une prise d’assaut menées par des groupes d’individus, . ', 'size': 5}, {'id': '256', 'title': 'Lqliâa: deux morts suite à une tentative d’intrusion dans un poste de gendarmerie', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Lqliaa-deux-morts-suite-a-une-tentative-d-intrusion-dans-un-poste-de-gendarmerie_a72396.html', 'summary': 'Lqliâa: deux morts suite à une tentative d’intrusion dans un poste de gendarmerie. Les autorités locales de la préfecture d’Inezgane-Aït Melloul ont annoncé que les éléments de la Gendarmerie royale à Lqliâa ont été contraints, dans la soirée du mercredi 1er octobre 2025, de faire usage de leurs armes de service dans le cadre de la légitime défense, afin de repousser une attaque armée visant leur centre.', 'size': 4}, {'id': '269', 'title': "Lqliâa : Deux morts lors d'une attaque, la gendarmerie invoque la légitime défense", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/10/02/lqliaa-deux-morts-lors-dune-attaque-la-gendarmerie-invoque-la-legitime-defense_1953567/', 'summary': "Lqliâa : Deux morts lors d'une attaque, la gendarmerie invoque la légitime défense. Les autorités locales de la province d’Inezgane-Aït Melloul ont indiqué que les membres de la Gendarmerie royale de Lqliâa ont été contraints, dans la soirée du mercredi 1er octobre 2025, d’utiliser leurs armes de service dans le cadre de la légitime défense, pour repousser une attaque sur la brigade locale. Deux personnes ont été tuées.", 'size': 5}, {'id': '273', 'title': 'Inzegane-Ait Melloul : Face à un assaut d’une foule de jeunes la Gendarmerie Royale réplique à balles réelles (2 morts)', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/177795/inzegane-ait-melloul-face-assaut-d-une.html', 'summary': 'Inzegane-Ait Melloul : Face à un assaut d’une foule de jeunes la Gendarmerie Royale réplique à balles réelles (2 morts). Les autorités locales de la province dInezgane-Aït Melloul ont indiqué que les gendarmes de Qliaa ont dû faire usage de leurs armes de service mercredi soir, le 1er octobre 2025, en situation de légitime défense. Cette mesure a été prise pour repousser une attaque visant le siège de la Gendarmerie Royale, où des individus tentaient de semparer de munitions, déquipements et darmes. Lassaut a entraîné la mort de deux personnes, touchées par balles, et plusieurs autres ont été blessées.', 'size': 4}, {'id': '288', 'title': 'Assaut contre la Gendarmerie de Leqliaa : deux morts', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/assaut-contre-la-gendarmerie-de-leqliaa-deux-morts/', 'summary': 'Assaut contre la Gendarmerie de Leqliaa : deux morts. Les autorités locales de la préfecture d’Inezgane Ait-Melloul ont indiqué que les éléments de la Gendarmerie Royale à Leqliaa ont été contraints, mercredi soir 1er octobre 2025, de faire usage de leurs armes de service, dans le cadre de la légitime défense, pour repousser une attaque et une prise d’assaut menées par des groupes d’individus, .', 'size': 5}], 'main_title': 'Lqliâa : Deux personnes tuées par des gendarmes en état de légitime défense lors d’une tentative de vol d’armes'}, {'community_id': '8', 'articles': [{'id': '259', 'title': 'Manifestations  : 193 suspects poursuivies suite aux actes de violence et de vandalisme', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Manifestations-193-suspects-poursuivies-suite-aux-actes-de-violence-et-de-vandalisme_a72392.html', 'summary': "Manifestations : 193 suspects poursuivies suite aux actes de violence et de vandalisme. Quelque 193 personnes suspectes ont été poursuivies suite aux actes de violence, de destruction et d'incitation qu'ont connus récemment certaines villes du Royaume, a affirmé Zakaria Laaroussi, magistrat, chef de l’unité de suivi de l’exécution des mesures répressives et des décisions judiciaires au sein de la Présidence du Ministère public.", 'size': 2}, {'id': '290', 'title': 'Poursuite de 193 suspects pour violences et incitation dans plusieurs villes du Royaume', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/poursuite-de-193-suspects-pour-violences-et-incitation-dans-plusieurs/', 'summary': 'Poursuite de 193 suspects pour violences et incitation dans plusieurs villes du Royaume. Quelque 193 personnes suspectes ont été poursuivies suite aux actes de violence, de destruction et d’incitation qu’ont connus récemment certaines villes du Royaume, a affirmé Zakaria Laaroussi, magistrat, chef de l’unité de suivi de l’exécution des mesures répressives et des décisions judiciaires au sein de la Présidence du Ministère public. Dans une déclaration à la .', 'size': 2}], 'main_title': 'Manifestations  : 193 suspects poursuivies suite aux actes de violence et de vandalisme'}, {'community_id': '6', 'articles': [{'id': '268', 'title': 'Les paiements American Express disponibles chez les commerçants du réseau Naps', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Les-paiements-American-Express-disponibles-chez-les-commercants-du-reseau-Naps_a72376.html', 'summary': 'Les paiements American Express disponibles chez les commerçants du réseau Naps. Le Marocain Naps et American Express ont signé un partenariat stratégique permettant aux commerçants affiliés à la fintech marocaine d’accepter les paiements American Express. Ce partenariat vise à accompagner la transformation des paiements électroniques au Maroc et à répondre aux nouveaux besoins des commerçants comme des consommateurs. Détails', 'size': 2}, {'id': '283', 'title': 'Fintech : Naps signe un partenariat stratégique avec American Express', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/affaires/entreprises/fintech-naps-signe-un-partenariat-strategique-avec-american-express/', 'summary': 'Fintech : Naps signe un partenariat stratégique avec American Express. Grâce au partenariat, les commerçants affiliés au réseau Naps peuvent désormais accepter les paiements par carte American Express, accédant ainsi à une clientèle premium et hautement solvable.', 'size': 2}], 'main_title': 'Les paiements American Express disponibles chez les commerçants du réseau Naps'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
                        
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ? d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        // Fonction pour cacher le tooltip
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = '';
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
    
    
</body>




</html>
    