<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); 
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title"> Les principales actualités des dernières 24 heures

</div>    
        <div class="header-subtitle"> Dernière mise à jour : 16/08/2025 - 06h22</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"></div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '5', 'articles': [{'id': '9', 'title': 'Averses orageuses et vague de chaleur avec chergui attendues dans plusieurs provinces du Royaume jusqu’à lundi', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/437729-averses-orageuses-et-vague-de-chaleur-avec-chergui-attendues-dans-plusieurs-provinces-du-royaume-jusqua-lundi.html', 'summary': 'Averses orageuses et vague de chaleur avec chergui attendues dans plusieurs provinces du Royaume jusqu’à lundi. La Direction générale de la météorologie (DGM) annonce que plusieurs provinces du Maroc connaîtront, du vendredi 15 au lundi 18 août, des averses orageuses accompagnées de chutes de grêle et de rafales de vent sous orages, ainsi qu’une vague de chaleur marquée avec des températures oscillant entre 39 et 47 °C, sous l’effet du chergui. . ', 'size': 5}, {'id': '60', 'title': 'Averses orageuses et vague de chaleur avec chergui, de vendredi à lundi dans plusieurs provinces du Royaume', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/15/averses-orageuses-et-vague-de-chaleur-avec-chergui-de-vendredi-a-lundi-dans-plusieurs-provinces-du-royaume_1946632/', 'summary': 'Averses orageuses et vague de chaleur avec chergui, de vendredi à lundi dans plusieurs provinces du Royaume. Des averses orageuses avec chutes de grêle et rafales de vent sous orages et une vague de chaleur avec des températures variant entre 39 et 47 °C, avec chergui sont attendues, du vendredi 15 au lundi 18 août, dans plusieurs provinces du Royaume, a annoncé la Direction générale de la météorologie (DGM). Ces averses orageuses,.', 'size': 5}, {'id': '73', 'title': 'Averses orageuses et vague de chaleur jusqu’à lundi', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/averses-orageuses-et-vague-de-chaleur-jusqua-lundi-308605/', 'summary': 'Averses orageuses et vague de chaleur jusqu’à lundi. Des averses orageuses avec chutes de grêle et rafales de vent sous orages et une vague de chaleur avec des températures variant entre 39 et 47 °C, avec chergui sont attendues, du vendredi 15 au lundi 18 août, dans plusieurs provinces du Royaume, a annoncé la Direction générale de la', 'size': 5}, {'id': '84', 'title': "Maroc : Averses orageuses et jusqu'à 47°C de vendredi à lundi", 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/174329/maroc-averses-orageuses-jusqu-a-vendredi.html', 'summary': "Maroc : Averses orageuses et jusqu'à 47°C de vendredi à lundi. Des averses orageuses avec chutes de grêle et rafales de vent sous orages et une vague de chaleur avec des températures variant entre 39 et 47°C, avec chergui sont attendues, du vendredi 15 au lundi 18 août, dans plusieurs provinces du Maroc, a annoncé la Direction générale de la météorologie (DGM).", 'size': 5}, {'id': '93', 'title': 'Alerte météo : Averses orageuses et vague de chaleur avec chergui, de vendredi à lundi', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/actualite/alerte-meteo-averses-orageuses-et-vague-de-chaleur-avec-chergui-de-vendredi-a-lundi', 'summary': 'Alerte météo : Averses orageuses et vague de chaleur avec chergui, de vendredi à lundi. Des averses orageuses avec chutes de grêle et rafales de vent sous orages et une vague de chaleur avec des températures variant entre 39 et 47 °C, avec chergui sont attendues, du vendredi 15 au lundi 18 août, dans plusieurs provinces du Royaume, a annoncé la Direction générale de la météorologie (DGM). Ces averses orageuses, .', 'size': 5}], 'main_title': 'Averses orageuses et vague de chaleur avec chergui attendues dans plusieurs provinces du Royaume jusqu’à lundi'}, {'community_id': '10', 'articles': [{'id': '20', 'title': 'Classement de Shanghai 2025 : l’Université Hassan II, seule représentante du Maroc dans le top 1.000 mondial', 'source': 'lematin.ma', 'link': 'https://lematin.ma/enseignement/une-seule-universite-du-maroc-dans-le-top-1000-du-shanghai-ranking-2025/296658', 'summary': 'Classement de Shanghai 2025 : l’Université Hassan II, seule représentante du Maroc dans le top 1.000 mondial. Le Shanghai Ranking Consultancy a dévoilé, ce vendredi 15 août 2025, son Academic Ranking of World Universities (ARWU), l’un des palmarès les plus respectés de l’enseignement supér.', 'size': 2}, {'id': '64', 'title': 'Education : une seule université marocaine dans le classement de Shanghaï 2025', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/15/education-une-seule-universite-marocaine-dans-le-classement-de-shanghai-2025_1946598/', 'summary': 'Education : une seule université marocaine dans le classement de Shanghaï 2025. L’université Hassan II de Casablanca (UH2C) demeure la seule institution marocaine à figurer dans le très sélectif Academic Ranking of World Universities (ARWU) 2025, publié par l’organisation Shanghaï Ranking. Comme en 2024, elle se situe dans la tranche 901-1000 mondiale, mais se distingue dans la discipline des sciences biologiques humaines, où elle atteint la tranche.', 'size': 2}], 'main_title': 'Classement de Shanghai 2025 : l’Université Hassan II, seule représentante du Maroc dans le top 1.000 mondial'}, {'community_id': '2', 'articles': [{'id': '24', 'title': 'Découverte record de dents de dinosaures vieilles de 168 millions d’années près de Boulemane', 'source': 'lematin.ma', 'link': 'https://lematin.ma/regions/les-plus-vieux-turiasauriens-dafrique-decouverts-dans-le-moyen-atlas/296594', 'summary': 'Découverte record de dents de dinosaures vieilles de 168 millions d’années près de Boulemane. C’est au cœur du Moyen Atlas, près de Boulemane, que trois dents fossilisées viennent de bouleverser la carte du Jurassique africain. Datées du Bathonien (Jurassique moyen, environ.', 'size': 2}, {'id': '150', 'title': 'Trois dents de dinosaures géants retrouvées au Maroc', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/437786-trois-dents-de-dinosaures-geants-retrouvees-au-maroc.html', 'summary': 'Trois dents de dinosaures géants retrouvées au Maroc. Des chercheurs marocains et étrangers ont mis au jour, près de Boulemane, trois dents fossilisées de dinosaures géants datées du Bathonien (Jurassique moyen, autour des 168–166 millions d’années). Publiée le 7 août 2025 dans le prestigieux magazine scientifique Acta Palaeontologica Polonica, l’étude note que ces dents proviennent de la Formation d’El Mers III, sur la . ', 'size': 2}], 'main_title': 'Découverte record de dents de dinosaures vieilles de 168 millions d’années près de Boulemane'}, {'community_id': '3', 'articles': [{'id': '29', 'title': 'Chefchaouen : L’incendie de forêt à Derdara circonscrit', 'source': 'lematin.ma', 'link': 'https://lematin.ma/regions/chefchaouen-lincendie-de-foret-a-derdara-circonscrit/296629', 'summary': "Chefchaouen : L’incendie de forêt à Derdara circonscrit. Les opérations de lutte contre l'incendie se poursuivront dans les prochains jours afin d’éteindre complètement le feu de forêt, a précisé M. Zarroqi dans une déclaration à la.", 'size': 3}, {'id': '68', 'title': 'Chefchaouen : l’incendie de forêt à Derdara circonscrit', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/15/chefchaouen-lincendie-de-foret-a-derdara-circonscrit_1946573/', 'summary': 'Chefchaouen : l’incendie de forêt à Derdara circonscrit. Les équipes d’intervention ont réussi à circonscrire, jeudi, l’incendie de forêt qui s’est déclaré mardi à la forêt Derdara dans la province de Chefchaouen, a indiqué le directeur provincial de l’Agence nationale des eaux et forêts (ANEF), Youssef Zarroqi. Les opérations de lutte contre l’incendie se poursuivront dans les prochains jours afin d’éteindre complètement le.', 'size': 4}, {'id': '75', 'title': 'Chefchaouen : le feu de forêt de Derdara circonscrit', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/chefchaouen-le-feu-de-foret-de-derdara-circonscrit-308592/', 'summary': 'Chefchaouen : le feu de forêt de Derdara circonscrit. Les équipes d’intervention ont réussi à circonscrire, ce jeudi 14 août, l’incendie qui s’est déclaré mardi dernier dans la forêt de Derdara, située dans la province de Chefchaouen, a indiqué le directeur provincial de l’Agence nationale des eaux et forêts (ANEF), Youssef Zarroqi.Concrètement, ce dernier a indiqué que les opérations', 'size': 3}, {'id': '146', 'title': 'Chefchaouen: l’incendie de Derdara maîtrisé après trois jours de mobilisation', 'source': 'lnt.ma', 'link': 'https://lnt.ma/chefchaouen-lincendie-de-derdara-maitrise-apres-trois-jours-de-mobilisation/', 'summary': 'Chefchaouen: l’incendie de Derdara maîtrisé après trois jours de mobilisation. Les équipes d’intervention ont réussi à circonscrire, jeudi, l’incendie de forêt qui s’est déclaré mardi à la forêt Derdara dans la province de Chefchaouen, a indiqué le directeur provincial de l’Agence nationale des eaux et forêts (ANEF), Youssef Zarroqi. Les opérations de lutte contre l’incendie se poursuivront dans les prochains jours afin d’éteindre complètement le . ', 'size': 4}], 'main_title': 'Chefchaouen : l’incendie de forêt à Derdara circonscrit'}, {'community_id': '4', 'articles': [{'id': '31', 'title': 'Air Canada suspend tous ses vols à partir de samedi en raison de la grève', 'source': 'lematin.ma', 'link': 'https://lematin.ma/monde/air-canada-suspend-tous-ses-vols-a-partir-de-samedi-en-raison-de-la-greve/296590', 'summary': "Air Canada suspend tous ses vols à partir de samedi en raison de la grève. Le chef des opérations d’Air Canada, Mark Nasr, a précisé, lors d'une conférence de presse à Toronto, que le transporteur aérien devait annuler progressivement certains vols av.", 'size': 3}, {'id': '35', 'title': 'Air Canada annule tous ses vols, y compris vers le Maroc, à partir de samedi', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Air-Canada-annule-tous-ses-vols-y-compris-vers-le-Maroc-a-partir-de-samedi_a70851.html', 'summary': "Air Canada annule tous ses vols, y compris vers le Maroc, à partir de samedi. \u200b La compagnie aérienne Air Canada a indiqué, jeudi, qu'elle annulera tous ses vols à partir de samedi matin en l'absence d'une entente avec son personnel navigant commercial.", 'size': 3}, {'id': '91', 'title': 'Grève : Air Canada annule tous ses vols à partir de samedi, des liaisons avec le Maroc concernées', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/174290/greve-canada-annule-tous-vols.html', 'summary': 'Grève : Air Canada annule tous ses vols à partir de samedi, des liaisons avec le Maroc concernées. Air Canada a annoncé, jeudi, lannulation de tous ses vols à partir de samedi matin, en labsence dune entente avec son personnel navigant commercial. Lors dune conférence de presse à Toronto, le chef des opérations de la compagnie aérienne, Mark Nasr, a précisé que le transporteur devait annuler progressivement certains, vols avant de suspendre lensemble samedi matin.', 'size': 3}], 'main_title': 'Air Canada suspend tous ses vols à partir de samedi en raison de la grève'}, {'community_id': '11', 'articles': [{'id': '51', 'title': 'Canaries : Interception d’un navire plein de cocaïne grâce à une opération maroco-espagnole', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Canaries-Interception-d-un-navire-plein-de-cocaine-grace-a-une-operation-maroco-espagnole_a70836.html', 'summary': 'Canaries : Interception d’un navire plein de cocaïne grâce à une opération maroco-espagnole. Le service de surveillance douanière de l\'Agence fiscale et la Garde civile espagnols ont intercepté, mercredi, avec la collaboration du Maroc, un navire de type remorqueur nommé "Sky White", qui transportait à son bord environ 3.000 kilos de cocaïne, répartis en 80 ballots de différentes tailles.', 'size': 2}, {'id': '145', 'title': 'Coopération maroco-espagnole : 3 tonnes de cocaïne saisies sur le “Sky White”', 'source': 'lnt.ma', 'link': 'https://lnt.ma/cooperation-maroco-espagnole-3-tonnes-de-cocaine-saisies-sur-le-sky-white/', 'summary': 'Coopération maroco-espagnole : 3 tonnes de cocaïne saisies sur le “Sky White”. Les autorités espagnoles ont annoncé l’interception, mercredi, d’un navire de type remorqueur transportant environ trois tonnes de cocaïne, grâce à une opération internationale à laquelle le Maroc a pris part. Le bâtiment, baptisé Sky White et battant pavillon camerounais, a été arraisonné à l’ouest des îles Canaries par le service de surveillance douanière de l’Agence . ', 'size': 2}], 'main_title': 'Canaries : Interception d’un navire plein de cocaïne grâce à une opération maroco-espagnole'}, {'community_id': '7', 'articles': [{'id': '58', 'title': 'France : le maire de Montpellier salue le niveau de développement “exemplaire” du Maroc', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/15/le-maire-de-montpellier-salue-le-niveau-de-developpement-exemplaire-du-maroc_1946650/', 'summary': 'France : le maire de Montpellier salue le niveau de développement “exemplaire” du Maroc. Le maire de la ville de Montpellier (sud-est de la France), Michaël Delafosse, a salué le niveau de développement “exemplaire” du Royaume du Maroc dans divers domaines. J’ai eu la chance en avril dernier de me rendre au Maroc, précisément à Fès, Rabat, Tanger, Casablanca et Dakhla. J’y ai reçu un accueil inoubliable et j’ai.', 'size': 2}, {'id': '111', 'title': 'Le maire de Montpellier salue le niveau de développement «exemplaire» du Maroc', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/le-maire-de-montpellier-salue-le-niveau-de-developpement-exemplaire-du-maroc/', 'summary': 'Le maire de Montpellier salue le niveau de développement «exemplaire» du Maroc. Le maire de Montpellier, Michaël Delafosse, a salué le niveau de développement «exemplaire» du Royaume du Maroc dans divers domaines. «J’ai eu la chance en avril dernier de me rendre au Maroc, précisément à Fès, Rabat, Tanger, Casablanca et Dakhla. J’y ai reçu un accueil inoubliable et j’ai pu y mesurer toute l’excellence et l’innovation .', 'size': 2}], 'main_title': 'France : le maire de Montpellier salue le niveau de développement “exemplaire” du Maroc'}, {'community_id': '9', 'articles': [{'id': '62', 'title': "Cannabis : l'ANRAC en mission à Amsterdam en octobre", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/15/cannabis-lanrac-en-mission-a-amsterdam-en-octobre_1946615/', 'summary': "Cannabis : l'ANRAC en mission à Amsterdam en octobre. Une délégation composée de plus de vingt producteurs et acteurs du marché marocain du cannabis se rendra à Amsterdam le 2 octobre prochain dans le cadre d’une mission B2B organisée par l’Agence nationale de réglementation des activités relatives au cannabis (ANRAC). Selon le média néerlandais Cannabis Industrie, la rencontre se tiendra à l’hôtel The Park.", 'size': 2}, {'id': '90', 'title': "Cannabis légal : L'ANRAC dirigera une mission B2B à Amsterdam", 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/174300/cannabis-legal-l-anrac-dirigera-mission.html', 'summary': "Cannabis légal : L'ANRAC dirigera une mission B2B à Amsterdam. L’Agence nationale de régulation des activités liées au cannabis (ANRAC) du Maroc conduira une délégation de plus de vingt producteurs de cannabis marocains et acteurs du marché à Amsterdam, le 2 octobre 2025, pour une mission B2B à lhôtel The Park Centraal Amsterdam.", 'size': 2}], 'main_title': "Cannabis : l'ANRAC en mission à Amsterdam en octobre"}, {'community_id': '6', 'articles': [{'id': '69', 'title': 'CHAN : le Maroc bat la Zambie 3 à 1', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/14/chan-le-maroc-bat-la-zambie-3-a-1_1946568/', 'summary': 'CHAN : le Maroc bat la Zambie 3 à 1. La sélection marocaine des joueurs locaux a battu son homologue zambienne par 3 buts à 1, lors de la 4e journée du groupe A du Championnat d’Afrique des nations de football (CHAN), jeudi au stade Kasarani à Nairobi, au Kenya. Mohamed Hrimat (45 2e), Oussama Lamlioui (67e) et Sabir Bougrine (90 5e) ont inscrit les.', 'size': 3}, {'id': '95', 'title': 'CHAN-2024 : Le Maroc s’offre la Zambie 3 à 1', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/actualite/chan-2024-le-maroc-soffre-la-zambie-3-a-1', 'summary': 'CHAN-2024 : Le Maroc s’offre la Zambie 3 à 1. La sélection marocaine des joueurs locaux a battu son homologue zambienne par 3 buts à 1, lors de la 4e journée du groupe A du Championnat d’Afrique des nations de football (CHAN), jeudi au stade Kasarani à Nairobi. Mohamed Hrimat (45+2e), Oussama Lamlioui (67e) et Sabir Bougrine (90 + 5e) ont inscrit les buts de .', 'size': 3}, {'id': '147', 'title': 'CHAN-2024 : Le Maroc s’impose face à la Zambie et se relance', 'source': 'lnt.ma', 'link': 'https://lnt.ma/chan-2024-le-maroc-simpose-face-a-la-zambie-et-se-relance/', 'summary': 'CHAN-2024 : Le Maroc s’impose face à la Zambie et se relance. La sélection marocaine des joueurs locaux a retrouvé le chemin de la victoire en s’imposant 3-1 contre la Zambie, jeudi à Nairobi, lors de la quatrième journée du groupe A du Championnat d’Afrique des nations de football (CHAN-2024). Face à une équipe zambienne déterminée à ouvrir le score, les Lions de l’Atlas ont fait preuve . ', 'size': 3}], 'main_title': 'CHAN : le Maroc bat la Zambie 3 à 1'}, {'community_id': '0', 'articles': [{'id': '71', 'title': 'Les produits de la mer commercialisés en repli de 3% à fin juillet', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/les-produits-de-la-mer-commercialises-en-repli-de-3-a-fin-juillet-308613/', 'summary': 'Les produits de la mer commercialisés en repli de 3% à fin juillet. Les produits commercialisés de la pêche côtière et artisanale ont atteint, en valeur, 6,14 milliards de dirhams (MMDH) à fin juillet 2025, en repli de 3% par rapport à la même période de 2024, selon l’Office national des pêches (ONP). En termes de poids, ces produits se sont établis à', 'size': 2}, {'id': '107', 'title': 'Pêche : 6,14 MMDH de produits commercialisés à fin juillet', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/peche-614-mmdh-de-produits-commercialises-a-fin-juillet/', 'summary': 'Pêche : 6,14 MMDH de produits commercialisés à fin juillet. Les produits commercialisés de la pêche côtière et artisanale ont atteint, en valeur, 6,14 milliards de dirhams (MMDH) à fin juillet 2025, en repli de 3% par rapport à la même période de 2024, selon l’Office national des pêches (ONP). En termes de poids, ces produits se sont établis à 523.765 tonnes (T), en baisse .', 'size': 2}], 'main_title': 'Les produits de la mer commercialisés en repli de 3% à fin juillet'}, {'community_id': '1', 'articles': [{'id': '72', 'title': 'Le marché pétrolier dans l’expectative de la rencontre Trump-Poutine', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/le-marche-petrolier-dans-lexpectative-de-la-rencontre-trump-poutine-308609/', 'summary': 'Le marché pétrolier dans l’expectative de la rencontre Trump-Poutine. Les cours du pétrole sont en baisse vendredi, avant la rencontre très attendue entre Donald Trump et Vladimir Poutine plus tard dans la journée en Alaska, qui pourrait sceller le sort de la guerre en Ukraine et des sanctions contre Moscou. De nombreux acteurs financiers « spéculatifs préfèrent ne pas conserver', 'size': 2}, {'id': '156', 'title': 'Le pétrole en retrait avant la rencontre Trump-Poutine', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/437752-le-petrole-en-retrait-avant-la-rencontre-trump-poutine.html', 'summary': 'Le pétrole en retrait avant la rencontre Trump-Poutine. Les cours du pétrole sont en baisse vendredi, avant la rencontre très attendue par le marché entre Donald Trump et Vladimir Poutine plus tard dans la journée, qui pourrait sceller le sort de la guerre en Ukraine et des sanctions contre Moscou. «Un optimisme obligatoire est diffusé par les deux parties, mais un résultat mutuellement . ', 'size': 2}], 'main_title': 'Le marché pétrolier dans l’expectative de la rencontre Trump-Poutine'}, {'community_id': '8', 'articles': [{'id': '114', 'title': 'Trump s’envole vers l’Alaska à la rencontre de Poutine', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/trump-senvole-vers-lalaska-a-la-rencontre-de-poutine/', 'summary': 'Trump s’envole vers l’Alaska à la rencontre de Poutine. Le président américain Donald Trump a quitté Washington, vendredi en début de matinée (heure locale) en direction de l’Alaska, pour une rencontre très attendue avec son homologue russe Vladimir Poutine afin d’évoquer les contours d’un éventuel accord pour mettre fin à la guerre russo-ukrainienne. « GROS ENJEUX! », a écrit Donald Trump sur sa plateforme Truth Social, .', 'size': 2}, {'id': '180', 'title': 'Trump et Poutine atterrissent en Alaska pour un sommet historique', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/trump-et-poutine-atterrissent-en-alaska-pour-un-sommet-historique.html', 'summary': 'Trump et Poutine atterrissent en Alaska pour un sommet historique. Le président américain Donald Trump et son homologue russe Vladimir Poutine ont atterri, vendredi en fin de matinée (heure locale) en Alaska, pour un sommet historique destiné à dessiner les contours d’un éventuel accord pour mettre fin à la guerre russo-ukrainienne. Les avions des deux leaders ont atterri sur la base militaire américaine d’Elmendorf-Richardson, à . L’article est apparu en premier sur .', 'size': 2}], 'main_title': 'Trump s’envole vers l’Alaska à la rencontre de Poutine'}, {'community_id': '12', 'articles': [{'id': '165', 'title': 'Hébergements touristiques classés\xa0: les nuitées en hausse au premier semestre 2025', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/hebergements-touristiques-classes-les-nuitees-en-hausse-au-premier-semestre-2025-308623/', 'summary': 'Hébergements touristiques classés : les nuitées en hausse au premier semestre 2025. Le volume des nuitées réalisées dans les établissements d’hébergement touristique classés (EHTC) au Maroc a affiché une hausse de 13% au titre du premier semestre de 2025 par rapport à la même période un an auparavant, selon l’Observatoire du Tourisme.Ces nuitées se répartissent sur le tourisme national (+5%) et le', 'size': 2}, {'id': '172', 'title': 'Tourisme : hausse de 13% des nuitées dans les hôtels classés au S1-2025', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/economie/tourisme-hausse-de-13-des-nuitees-dans-les-hotels-classes-au-s1-2025', 'summary': 'Tourisme : hausse de 13% des nuitées dans les hôtels classés au S1-2025. Le volume des nuitées réalisées dans les établissements d’hébergement touristique classés (EHTC) a affiché une hausse de 13% au titre du premier semestre de 2025 par rapport à la même période un an auparavant, selon l’Observatoire du Tourisme. Ces nuitées se répartissent sur le tourisme national (+5%) et le tourisme international (+16%), précise l’Observatoire dans .', 'size': 2}], 'main_title': 'Hébergements touristiques classés\xa0: les nuitées en hausse au premier semestre 2025'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
                        
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ? d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        // Fonction pour cacher le tooltip
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = '';
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
    
    
</body>




</html>
    