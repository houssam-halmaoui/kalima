<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); 
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title"> Les principales actualités des dernières 24 heures

</div>    
        <div class="header-subtitle"> Dernière mise à jour : 28/07/2025 - 12h27</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"></div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '0', 'title': 'Les températures attendues ce lundi 28 juillet 2025', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/435277-les-temperatures-attendues-ce-lundi-28-juillet-2025.html', 'summary': 'Les températures attendues ce lundi 28 juillet 2025. Voici les températures minimales et maximales prévues par la Direction générale de la météorologie pour le lundi 28 juillet 2025 : Min Max – Oujda 19 40 – Bouarfa 21 38 – Al Hoceima 22 35 – Tétouan 22 37 – Sebta 20 33 – Mellilia 21 31 – Tanger 22 29 – Kénitra 19 . ', 'size': 2}, {'id': '75', 'title': 'Températures prévues pour le lundi 28 juillet 2025', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/temperatures-prevues-pour-le-lundi-28-juillet-2025/', 'summary': 'Températures prévues pour le lundi 28 juillet 2025. Voici les températures minimales et maximales prévues par la Direction générale de la météorologie pour le lundi 28 juillet 2025 : Min Max – Oujda 19 40 – Bouarfa 21 38 – Al Hoceima 22 35 – Tétouan 22 37 – Sebta 20 33 – Mellilia 21 31 – Tanger 22 29 – Kénitra 19 .', 'size': 2}], 'main_title': 'Les températures attendues ce lundi 28 juillet 2025'}, {'community_id': '2', 'articles': [{'id': '10', 'title': 'Arrivée au Maroc de la Première Dame de la République du Salvador Mme Gabriela Rodriguez De Bukele', 'source': 'lematin.ma', 'link': 'https://lematin.ma/nation/arrivee-au-maroc-de-la-premiere-dame-de-la-republique-du-salvador/293561', 'summary': "Arrivée au Maroc de la Première Dame de la République du Salvador Mme Gabriela Rodriguez De Bukele. À sa descente d'avion à l’aéroport de Rabat-Salé, Mme Gabriela Rodriguez De Bukele a été accueillie par Son Altesse Royale la Princesse Lalla Asmaa.Après avoir passé en revue u.", 'size': 5}, {'id': '65', 'title': 'Arrivée au Maroc de la Première Dame du Salvador, Mme Gabriela Rodriguez De Bukele', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/pouvoirs/diplomatie/arrivee-au-maroc-de-la-premiere-dame-du-salvador-mme-gabriela-rodriguez-de-bukele/', 'summary': 'Arrivée au Maroc de la Première Dame du Salvador, Mme Gabriela Rodriguez De Bukele. La Première Dame de la République du Salvador, Mme Gabriela Rodriguez De Bukele, est arrivée, dimanche à Salé, pour une visite de travail au Maroc.', 'size': 5}, {'id': '70', 'title': 'Arrivée au Maroc de la Première Dame de la République du Salvador Mme Gabriela Rodriguez De Bukele pour une visite de travail dans le Royaume', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/arrivee-au-maroc-de-la-premiere-dame-de-la-republique-du-salvador/', 'summary': 'Arrivée au Maroc de la Première Dame de la République du Salvador Mme Gabriela Rodriguez De Bukele pour une visite de travail dans le Royaume. La Première Dame de la République du Salvador, Mme Gabriela Rodriguez De Bukele, est arrivée, dimanche à Salé, pour une visite de travail au Maroc. À sa descente d’avion à l’aéroport de Rabat-Salé, Mme Gabriela Rodriguez De Bukele a été accueillie par Son Altesse Royale la Princesse Lalla Asmaa. Après avoir passé en revue une .', 'size': 5}, {'id': '79', 'title': 'Arrivée au Maroc de la Première Dame de la République du Salvador Mme Gabriela Rodriguez De Bukele pour une visite de travail', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/arrivee-au-maroc-de-la-premiere-dame-de-la-republique-du-salvador-mme-gabriela-rodriguez-de-bukele-pour-une-visite-de-travail-dans-le-royaume.html', 'summary': 'Arrivée au Maroc de la Première Dame de la République du Salvador Mme Gabriela Rodriguez De Bukele pour une visite de travail. La Première Dame de la République du Salvador, Mme Gabriela Rodriguez De Bukele, est arrivée dimanche à Salé pour une visite de travail au Maroc. À sa descente d’avion à l’aéroport de Rabat-Salé, Mme Gabriela Rodriguez De Bukele a été accueillie par la Princesse Lalla Asmaa. Après avoir passé en revue une section des Forces . L’article est apparu en premier sur .', 'size': 5}, {'id': '109', 'title': 'La Première Dame de la République du Salvador en visite de travail au Maroc', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/La-Premiere-Dame-de-la-Republique-du-Salvador-en-visite-de-travail-au-Maroc_a70342.html', 'summary': 'La Première Dame de la République du Salvador en visite de travail au Maroc. La Première Dame de la République du Salvador, Mme Gabriela Rodriguez De Bukele, est arrivée, dimanche à Salé, pour une visite de travail au Maroc.', 'size': 5}], 'main_title': 'Arrivée au Maroc de la Première Dame de la République du Salvador Mme Gabriela Rodriguez De Bukele'}, {'community_id': '7', 'articles': [{'id': '24', 'title': 'Saisie de plus de 4 tonnes de chira au port Tanger Med', 'source': 'lematin.ma', 'link': 'https://lematin.ma/regions/saisie-de-plus-de-4-tonnes-de-chira-au-port-tanger-med/293470', 'summary': 'Saisie de plus de 4 tonnes de chira au port Tanger Med. Les opérations conjointes de contrôle menées par les services de la Sûreté nationale et de la Douane ont permis la saisie de cette importante cargaison de stupéfiants, soigneusemen.', 'size': 3}, {'id': '66', 'title': 'Tanger : Mise en échec d’une tentative de trafic de plus de 4 tonnes de chira', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/au-royaume/tanger-mise-en-echec-dune-tentative-de-trafic-de-plus-de-4-tonnes-de-chira/', 'summary': 'Tanger : Mise en échec d’une tentative de trafic de plus de 4 tonnes de chira. Les opérations conjointes de contrôle menées par les services de la Sûreté nationale et de la Douane ont permis la saisie de cette importante cargaison de stupéfiants, soigneusement dissimulée dans un chargement de fruits transporté par une remorque tirée par un camion immatriculé au Maroc, en partance pour un port européen.', 'size': 4}, {'id': '73', 'title': 'Tanger : mise en échec d’une tentative de trafic de plus de 4 tonnes de chira', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/tanger-mise-en-echec-dune-tentative-de-trafic-de-plus-de-4-tonnes-de-chira/', 'summary': 'Tanger : mise en échec d’une tentative de trafic de plus de 4 tonnes de chira. Les éléments de la Sûreté nationale et de la Douane opérant au port de Tanger Med ont mis en échec, aux premières heures de dimanche, une tentative de trafic de 4,374 tonnes de chira à bord d’un camion de transport international de marchandises. Les opérations conjointes de contrôle menées par les services de la Sûreté .', 'size': 4}, {'id': '123', 'title': 'Plus de 4 tonnes de cannabis saisies au port de Tanger Med', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/07/28/plus-de-4-tonnes-de-cannabis-saisies-au-port-de-tanger-med_1944086/', 'summary': 'Plus de 4 tonnes de cannabis saisies au port de Tanger Med. Une tentative de trafic international de drogue a été à nouveau déjouée le 27 juillet par les services de sécurité du port de Tanger Med. Ce qu’il s’est passé Les services conjoints de la Sûreté nationale et de la Douane ont saisi 4,374 tonnes de chira dissimulées dans un chargement de fruits à bord d’un.', 'size': 3}], 'main_title': 'Tanger : Mise en échec d’une tentative de trafic de plus de 4 tonnes de chira'}, {'community_id': '4', 'articles': [{'id': '30', 'title': '\u200bGianni Infantino séduit par le stade Moulay Abdallah : « Un bijou qui propulse le Maroc parmi l’élite du football mondial »', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/\u200bGianni-Infantino-seduit-par-le-stade-Moulay-Abdallah-Un-bijou-qui-propulse-le-Maroc-parmi-l-elite-du-football-mondial_a70331.html', 'summary': '\u200bGianni Infantino séduit par le stade Moulay Abdallah : « Un bijou qui propulse le Maroc parmi l’élite du football mondial ». À Rabat, Infantino découvre le futur stade Moulay Abdellah, qualifié de « bijou » architectural, à l’image d’un Maroc tourné vers l’avenir. Détails.', 'size': 2}, {'id': '101', 'title': 'Infantino émerveillé par le Stade Prince Moulay Abdellah : « Un bijou du football mondial »', 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/le-stade-moulay-abdellah-bijou-salue-par-gianni-infantino/293598', 'summary': 'Infantino émerveillé par le Stade Prince Moulay Abdellah : « Un bijou du football mondial ». Gianni Infantino n’a pas mâché ses mots. En déplacement à Rabat pour l’inauguration du bureau Afrique de la FIFA, le président de l’instance mondiale du football s’est offert une v.', 'size': 2}], 'main_title': '\u200bGianni Infantino séduit par le stade Moulay Abdallah : « Un bijou qui propulse le Maroc parmi l’élite du football mondial »'}, {'community_id': '5', 'articles': [{'id': '46', 'title': 'Le journaliste marocain Mohammed El Bakkali intercepté à bord du navire "Handala" en route vers Gaza (vidéos)', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Le-journaliste-marocain-Mohammed-El-Bakkali-intercepte-a-bord-du-navire-Handala-en-route-vers-Gaza-videos_a70314.html', 'summary': 'Le journaliste marocain Mohammed El Bakkali intercepté à bord du navire "Handala" en route vers Gaza (vidéos). Le journaliste marocain de la chaîne Al Jazeera, Mohamed El Bakkali, fait partie des 21 passagers du navire « Handala » intercepté dans la nuit du samedi 26 juillet par l’armée israélienne alors qu’il faisait route vers Gaza. Détails.', 'size': 2}, {'id': '51', 'title': 'Israël libère le journaliste marocain Mohamed El Bakkali', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/172832/israel-libere-journaliste-marocain-mohamed.html', 'summary': 'Israël libère le journaliste marocain Mohamed El Bakkali. Ce dimanche 27 juillet, les autorités israéliennes ont relâché le journaliste marocain Mohamed El Bakkali, correspondant pour Al Jazeera. Avant sa libération, El Bakkali a signé un engagement à ne pas participer à de nouvelles missions humanitaires en direction de Gaza. Cette condition sapplique également aux autres militants présents à bord du «Handala». Le journaliste marocain devrait prendre un vol direct pour Paris dès lundi matin.', 'size': 2}, {'id': '122', 'title': "Israël libère le journaliste marocain arrêté lors d'une expédition humanitaire vers Gaza", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/07/28/israel-libere-le-journaliste-marocain-arrete-lors-dune-expedition-humanitaire-vers-gaza_1944089/', 'summary': "Israël libère le journaliste marocain arrêté lors d'une expédition humanitaire vers Gaza. Les autorités israéliennes ont libéré, ce dimanche, le journaliste marocain Mohamed El Bakkali, correspondant d’Al Jazeera, ainsi que les membres de l’équipage du navire Handala, arrêtés après l’interception du bateau dans les eaux internationales. Ce qu’il s’est passé Le navire participait à une mission humanitaire et solidaire à destination de la bande de Gaza. Selon.", 'size': 4}, {'id': '153', 'title': 'Israël intercepte le navire humanitaire Handala en route vers Gaza', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/israel-intercepte-le-navire-humanitaire-handala-en-route-vers-gaza/', 'summary': 'Israël intercepte le navire humanitaire Handala en route vers Gaza. Un navire affrété par la coalition Freedom Flotilla, transportant de l’aide humanitaire à destination de la bande de Gaza, a été intercepté par les forces israéliennes samedi soir en Méditerranée. L’incident, survenu en haute mer, suscite de vives réactions dans plusieurs pays, notamment en lien avec la présence de journalistes à bord, dont un ressortissant .', 'size': 2}], 'main_title': "Israël libère le journaliste marocain arrêté lors d'une expédition humanitaire vers Gaza"}, {'community_id': '8', 'articles': [{'id': '69', 'title': 'CAN 2024 : SM le Roi félicite les membres de la sélection nationale pour leur brillant parcours', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/influences/can-2024-sm-le-roi-felicite-les-membres-de-la-selection-nationale-pour-leur-brillant-parcours/', 'summary': 'CAN 2024 : SM le Roi félicite les membres de la sélection nationale pour leur brillant parcours. Sa Majesté le Roi Mohammed VI a adressé un message de félicitations aux membres de la sélection nationale féminine de football pour leur brillant parcours à la Coupe d’Afrique des Nations féminine de football 2024.', 'size': 2}, {'id': '76', 'title': 'S.M. le Roi félicite les membres de la sélection nationale de football pour leur brillant parcours à la CAN féminine 2024', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/s-m-le-roi-felicite-les-membres-de-la-selection-nationale-de-football/', 'summary': 'S.M. le Roi félicite les membres de la sélection nationale de football pour leur brillant parcours à la CAN féminine 2024. Sa Majesté le Roi Mohammed VI, que Dieu L’assiste, a adressé un message de félicitations aux membres de la sélection nationale féminine de football pour leur brillant parcours à la Coupe d’Afrique des Nations féminine de football 2024. Dans ce message, le Souverain affirme avoir suivi avec une grande fierté le brillant parcours de l’équipe .', 'size': 2}], 'main_title': 'CAN 2024 : SM le Roi félicite les membres de la sélection nationale pour leur brillant parcours'}, {'community_id': '3', 'articles': [{'id': '80', 'title': 'Cameroun: 13 candidatures retenues pour la Présidentielle du 12 octobre', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/cameroun-13-candidatures-retenues-pour-la-presidentielle-du-12-octobre.html', 'summary': 'Cameroun: 13 candidatures retenues pour la Présidentielle du 12 octobre. La Commission électorale du Cameroun (ELECAM) a annoncé samedi avoir retenu 13 dossiers de candidature pour la présidentielle du 12 octobre 2025. Parmi les candidats retenus sur plus de 80 dossiers déposés figure le président camerounais Paul Biya (92 ans) au pouvoir depuis près de 43 ans et qui brigue un huitième mandat présidentiel, selon . L’article est apparu en premier sur .', 'size': 2}, {'id': '152', 'title': 'Présidentielle camerounaise : 13 candidats retenus pour le scrutin du 12 octobre', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/presidentielle-camerounaise-13-candidats-retenus-pour-le-scrutin/', 'summary': 'Présidentielle camerounaise : 13 candidats retenus pour le scrutin du 12 octobre. La liste officielle des candidats à la présidentielle 2025 a été dévoilée ce 26 juillet par Elecam. Parmi les 83 dossiers déposés, seuls 13 ont été validés. Paul Biya, au pouvoir depuis 1982, figure une fois de plus parmi les prétendants. Le Conseil Électoral d’Elections Cameroon (Elecam) a rendu publique, vendredi 26 juillet 2025, la .', 'size': 2}], 'main_title': 'Cameroun: 13 candidatures retenues pour la Présidentielle du 12 octobre'}, {'community_id': '1', 'articles': [{'id': '85', 'title': '2 morts dans le crash d’un avion d’entraînement des FRA près de Fès-Saïss', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/435370-2-morts-dans-le-crash-dun-avion-dentrainement-des-fra-pres-de-fes-saiss.html', 'summary': '2 morts dans le crash d’un avion d’entraînement des FRA près de Fès-Saïss. Un avion d’instruction de type Alphajet, destiné à la formation des pilotes, s’est écrasé, lundi à 08H48 au niveau de l’aéroport de Fès-Saïss, entraînant la mort de deux officiers des Forces Royales Air de grades Commandant et Capitaine. Les défunts étaient en mission d’entraînement avant que l’accident ne se produise dans des circonstances indéterminées, indique . ', 'size': 4}, {'id': '149', 'title': 'Crash d’un avion d’entraînement des Forces Royales Air au niveau de l’aéroport de Fès-Saïss', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/crash-dun-avion-dentrainement-des-forces-royales-air-au-niveau/', 'summary': 'Crash d’un avion d’entraînement des Forces Royales Air au niveau de l’aéroport de Fès-Saïss. Un avion d’instruction de type Alphajet, destiné à la formation des pilotes, s’est écrasé, lundi à 08H48 au niveau de l’aéroport de Fès-Saïss, entraînant la mort de deux officiers des Forces Royales Air de grades Commandant et Capitaine. Les défunts étaient en mission d’entraînement avant que l’accident ne se produise dans des circonstances indéterminées, indique .', 'size': 4}, {'id': '170', 'title': 'Maroc : crash d’un avion d’entraînement des Forces Royales Air au niveau de l’aéroport de Fès-Saïss', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/maroc-crash-dun-avion-dentrainement-des-forces-royales-air-au-niveau-de-laeroport-de-fes-saiss.html', 'summary': 'Maroc : crash d’un avion d’entraînement des Forces Royales Air au niveau de l’aéroport de Fès-Saïss. Un avion d’instruction de type Alphajet, destiné à la formation des pilotes, s’est écrasé, lundi à 08H48 au niveau de l’aéroport de Fès-Saïss, entraînant la mort de deux officiers des Forces Royales Air de grades Commandant et Capitaine. Les défunts étaient en mission d’entraînement avant que l’accident ne se produise dans des circonstances indéterminées, indique . L’article est apparu en premier sur .', 'size': 4}, {'id': '180', 'title': 'Crash d’un avion d’entraînement des FAR au niveau de l’aéroport de Fès-Saïss', 'source': 'lnt.ma', 'link': 'https://lnt.ma/crash-dun-avion-dentrainement-des-far-au-niveau-de-laeroport-de-fes-saiss/', 'summary': 'Crash d’un avion d’entraînement des FAR au niveau de l’aéroport de Fès-Saïss. Un avion d’instruction de type Alphajet, destiné à la formation des pilotes, s’est écrasé, lundi à 08H48 au niveau de l’aéroport de Fès-Saïss, entraînant la mort de deux officiers des Forces Royales Air de grades Commandant et Capitaine. Les défunts étaient en mission d’entraînement avant que l’accident ne se produise dans des circonstances indéterminées, indique . ', 'size': 4}], 'main_title': '2 morts dans le crash d’un avion d’entraînement des FRA près de Fès-Saïss'}, {'community_id': '6', 'articles': [{'id': '86', 'title': 'Programme TSP Hub : OCP Nutricrops franchit le cap des 5 millions de tonnes de TSP', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/435355-programme-tsp-hub-ocp-nutricrops-franchit-le-cap-des-5-millions-de-tonnes-de-tsp.html', 'summary': 'Programme TSP Hub : OCP Nutricrops franchit le cap des 5 millions de tonnes de TSP. Lancé sur la plateforme industrielle de Jorf Lasfar, le TSP Hub s’impose comme un levier clé de la transformation industrielle d’OCP Nutricrops. Alliant montée en capacité et flexibilité opérationnelle, ce programme stratégique répond aux défis d’une agriculture moderne, exigeante et personnalisée, en offrant une production d’engrais adaptée aux besoins variés et croissants du marché. Porté . ', 'size': 4}, {'id': '120', 'title': "OCP Nutricrops franchit le cap des 5 millions de tonnes d'engrais", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/07/28/ocp-nutricrops-franchit-le-cap-des-5-millions-de-tonnes-dengrais_1944117/', 'summary': "OCP Nutricrops franchit le cap des 5 millions de tonnes d'engrais. OCP Nutricrops a franchi un cap industriel majeur en dépassant les 5 millions de tonnes de capacité de production de TSP (Triple Super Phosphate), grâce au lancement du TSP Hub, un programme stratégique mis en œuvre sur la plateforme de Jorf Lasfar. 🧭 Ce qu’il s’est passé Ce projet, piloté par la SBU Manufacturing en.", 'size': 3}, {'id': '146', 'title': 'OCP Nutricrops franchit le cap des 5 millions de tonnes de TSP', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/affaires/agriculture/ocp-nutricrops-franchit-le-cap-des-5-millions-de-tonnes-de-tsp/', 'summary': 'OCP Nutricrops franchit le cap des 5 millions de tonnes de TSP. Porté par la SBU Manufacturing en collaboration avec OCP Nutricrops, OFAS et JESA, le TSP Hub transforme les capacités existantes et pose les jalons d’une production d’engrais plus précise et adaptée aux exigences agronomiques actuelles.', 'size': 3}, {'id': '154', 'title': 'OCP Nutricrops dépasse 5 millions de tonnes de TSP grâce au programme TSP Hub', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/ocp-nutricrops-depasse-5-millions-de-tonnes-de-tsp-grace/', 'summary': 'OCP Nutricrops dépasse 5 millions de tonnes de TSP grâce au programme TSP Hub. Lancé sur la plateforme industrielle de Jorf Lasfar, le TSP Hub s’impose comme un levier clé de la transformation industrielle d’OCP Nutricrops. Alliant montée en capacité et flexibilité opérationnelle, ce programme stratégique répond aux défis d’une agriculture moderne, exigeante et personnalisée, en offrant une production d’engrais adaptée aux besoins variés et croissants du marché. Porté .', 'size': 2}], 'main_title': 'Programme TSP Hub : OCP Nutricrops franchit le cap des 5 millions de tonnes de TSP'}, {'community_id': '9', 'articles': [{'id': '93', 'title': 'Bourse de Casablanca : ouverture en territoire négatif', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/435339-bourse-de-casablanca-ouverture-en-territoire-negatif-15.html', 'summary': 'Bourse de Casablanca : ouverture en territoire négatif. La Bourse de Casablanca a entamé ses échanges en baisse lundi, son indice principal, le MASI, cédant 0,02% à 19.400,13 points (pts). Le MASI 20, regroupant les 20 valeurs les plus liquides, reculait de 0,02% à 1.593,09 pts, tandis que le MASI ESG, indice des entreprises ayant la meilleure notation ESG publiée par Moody’s ESG . ', 'size': 2}, {'id': '157', 'title': 'La Bourse de Casablanca débute en territoire négatif', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/la-bourse-de-casablanca-debute-en-territoire-negatif/', 'summary': 'La Bourse de Casablanca débute en territoire négatif. La Bourse de Casablanca a entamé ses échanges en baisse lundi, son indice principal, le MASI, cédant 0,02% à 19.400,13 points (pts). Le MASI 20, regroupant les 20 valeurs les plus liquides, reculait de 0,02% à 1.593,09 pts, tandis que le MASI ESG, indice des entreprises ayant la meilleure notation ESG publiée par Moody’s ESG .', 'size': 2}], 'main_title': 'Bourse de Casablanca : ouverture en territoire négatif'}, {'community_id': '10', 'articles': [{'id': '156', 'title': 'Droits de douane : L’accord USA/UE apporte «\xa0de la certitude en ces temps incertains\xa0»', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/droits-de-douane-laccord-usa-ue-apporte-de-la-certitude/', 'summary': 'Droits de douane : L’accord USA/UE apporte « de la certitude en ces temps incertains ». L’accord conclu dimanche en Écosse entre le président américain, Donald Trump, et la présidente de la Commission européenne (CE), Ursula von der Leyen, sur les droits de douane ciblant les exportations européennes vers les États-Unis, apporte « de la certitude en ces temps incertains », s’est félicitée la cheffe de la CE. Cet accord « assure stabilité et .', 'size': 2}, {'id': '173', 'title': 'Droits de douane : L’accord USA/UE apporte «\xa0de la certitude en ces temps incertains\xa0» (Von der Leyen)', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/droits-de-douane-laccord-usa-ue-apporte-de-la-certitude-en-ces-temps-incertains-von-der-leyen.html', 'summary': 'Droits de douane : L’accord USA/UE apporte « de la certitude en ces temps incertains » (Von der Leyen). L’accord conclu dimanche en Écosse entre le président américain Donald Trump et la présidente de la Commission européenne (CE) Ursula von der Leyen, sur les droits de douane ciblant les exportations européennes vers les États-Unis, apporte « de la certitude en ces temps incertains », s’est félicitée la cheffe de la CE. Cet accord « assure stabilité et . L’article est apparu en premier sur .', 'size': 2}], 'main_title': 'Droits de douane : L’accord USA/UE apporte «\xa0de la certitude en ces temps incertains\xa0»'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
                        
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ? d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        // Fonction pour cacher le tooltip
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = '';
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
    
    
</body>




</html>
    