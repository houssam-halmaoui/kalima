<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); 
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title"> Les principales actualités des dernières 24 heures

</div>    
        <div class="header-subtitle"> Dernière mise à jour : 31/07/2025 - 12h29</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"></div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '1', 'title': "feux de forêt: Le Portugal et l'Espagne en alerte maximale", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/435840-feux-de-foret-le-portugal-et-lespagne-en-alerte-maximale.html', 'summary': "feux de forêt: Le Portugal et l'Espagne en alerte maximale. Les pompiers portugais et espagnols demeurent en alerte maximale, mercredi, pour tenter de contenir les feux de forêt qui ravagent la péninsule ibérique depuis plusieurs jours. Au Portugal, sept foyers majeurs restaient actifs dans le nord et le centre du pays après une brève accalmie observée dans la matinée, mobilisant plus de 2.000 pompiers et . ", 'size': 2}, {'id': '195', 'title': 'Espagne et Portugal en alerte rouge face aux incendies', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/espagne-et-portugal-en-alerte-rouge-face-aux-incendies/', 'summary': 'Espagne et Portugal en alerte rouge face aux incendies. Les pompiers portugais et espagnols demeurent en alerte maximale, mercredi, pour tenter de contenir les feux de forêt qui ravagent la péninsule ibérique depuis plusieurs jours. Au Portugal, sept foyers majeurs restaient actifs dans le nord et le centre du pays après une brève accalmie observée dans la matinée, mobilisant plus de 2.000 pompiers et .', 'size': 2}], 'main_title': "feux de forêt: Le Portugal et l'Espagne en alerte maximale"}, {'community_id': '3', 'articles': [{'id': '6', 'title': "Le Roi Mohammed VI ordonne l'envoi d'aides humanitaires et médicales d'urgence à Gaza", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/435853-le-roi-mohammed-vi-ordonne-lenvoi-daides-humanitaires-et-medicales-durgence-a-gaza.html', 'summary': "Le Roi Mohammed VI ordonne l'envoi d'aides humanitaires et médicales d'urgence à Gaza. Le Roi Mohammed VI, Président du Comité Al-Qods, a donné Ses Très Hautes Instructions pour l’envoi d’une aide humanitaire et médicale d’urgence en faveur du peuple palestinien frère, en particulier les populations de la bande de Gaza, indique, mercredi, un communiqué du ministère des Affaires étrangères, de la Coopération africaine et des Marocains résidant à . ", 'size': 5}, {'id': '61', 'title': 'Palestine : Le roi Mohammed VI donne ses instructions pour acheminer les aides', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/173146/palestine-mohammed-donne-instructions-pour.html', 'summary': 'Palestine : Le roi Mohammed VI donne ses instructions pour acheminer les aides. Le roi Mohammed VI, président du Comité Al-Qods, a donné ses instructions pour lenvoi dune aide humanitaire et médicale durgence en faveur du peuple palestinien frère, en particulier les populations de la bande de Gaza, indique, mercredi, un communiqué du ministère des Affaires étrangères, de la doopération africaine et des Marocains résidant à l’étranger.', 'size': 5}, {'id': '112', 'title': 'Le Roi Mohammed VI donne ses instructions pour l’envoi d’une aide humanitaire et médicale d’urgence en faveur du peuple palestinien', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/le-roi-mohammed-vi-donne-ses-instructions-pour-lenvoi-dune-aide-humanitaire-et-medicale-durgence-en-faveur-du-peuple-palestinien.html', 'summary': 'Le Roi Mohammed VI donne ses instructions pour l’envoi d’une aide humanitaire et médicale d’urgence en faveur du peuple palestinien. Le Roi Mohammed VI, Président du Comité Al-Qods, a donné ses très hautes instructions pour l’envoi d’une aide humanitaire et médicale d’urgence en faveur du peuple palestinien, en particulier les populations de la bande de Gaza, indique, mercredi, un communiqué du ministère des Affaires étrangères, de la Coopération africaine et des Marocains résidant à l’étranger. . L’article est apparu en premier sur .', 'size': 5}, {'id': '157', 'title': "Le Roi Mohammed VI ordonne l'envoi de 180 tonnes d'aide humanitaire et médicale à Gaza", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/07/31/le-roi-mohammed-vi-ordonne-lenvoi-de-180-tonnes-daide-humanitaire-et-medicale-a-gaza_1944612/', 'summary': "Le Roi Mohammed VI ordonne l'envoi de 180 tonnes d'aide humanitaire et médicale à Gaza. Le Roi Mohammed VI, président du Comité Al-Qods, a donné ses instructions pour l’envoi d’une aide humanitaire et médicale d’urgence en faveur du peuple palestinien, “un peuple frère”, en particulier les populations de la bande de Gaza, indique, mercredi, un communiqué du ministère des Affaires étrangères, de la Coopération africaine et des Marocains résidant à.", 'size': 5}, {'id': '160', 'title': 'SM le Roi ordonne l’envoi d’une aide humanitaire et médicale d’urgence en faveur du peuple palestinien', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/sm-le-roi-ordonne-lenvoi-dune-aide-humanitaire-et-medicale-durgence-en-faveur-du-peuple-palestinien-307755/', 'summary': 'SM le Roi ordonne l’envoi d’une aide humanitaire et médicale d’urgence en faveur du peuple palestinien. Sa Majesté le Roi Mohammed VI, que Dieu L’assiste, Président du Comité Al-Qods, a donné Ses Très Hautes Instructions pour l’envoi d’une aide humanitaire et médicale d’urgence en faveur du peuple palestinien frère, en particulier les populations de la bande de Gaza, indique, mercredi, un communiqué du ministère des Affaires', 'size': 5}], 'main_title': "Le Roi Mohammed VI ordonne l'envoi d'aides humanitaires et médicales d'urgence à Gaza"}, {'community_id': '2', 'articles': [{'id': '10', 'title': "S.M. le Roi ordonne l'envoi d'aides humanitaires et médicales d'urgence en Palestine", 'source': 'lematin.ma', 'link': 'https://lematin.ma/activites-royales/sm-le-roi-ordonne-lenvoi-daides-humanitaires-durgence-en-palestine/294113', 'summary': "S.M. le Roi ordonne l'envoi d'aides humanitaires et médicales d'urgence en Palestine. Cette aide, d'un volume total de près de 180 tonnes, est composée de denrées alimentaires de première nécessité, de lait et de produits spécialement destinés aux enfants, ainsi.", 'size': 2}, {'id': '184', 'title': 'SM le Roi ordonne l’envoi d’une aide humanitaire et médicale d’urgence en Palestine', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/pouvoirs/sm-le-roi-ordonne-lenvoi-dune-aide-humanitaire-et-medicale-durgence-en-palestine/', 'summary': 'SM le Roi ordonne l’envoi d’une aide humanitaire et médicale d’urgence en Palestine. Cette aide, d’un volume total de près de 180 tonnes, est composée de denrées alimentaires de première nécessité, de lait et de produits spécialement destinés aux enfants, ainsi que de médicaments et de matériel chirurgical pour les populations les plus vulnérables.', 'size': 2}], 'main_title': "S.M. le Roi ordonne l'envoi d'aides humanitaires et médicales d'urgence en Palestine"}, {'community_id': '1', 'articles': [{'id': '30', 'title': 'Fête du Trône : SM le Roi Mohammed VI reçoit la sélection nationale féminine de football', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Fete-du-Trone-SM-le-Roi-Mohammed-VI-recoit-la-selection-nationale-feminine-de-football_a70423.html', 'summary': "Fête du Trône : SM le Roi Mohammed VI reçoit la sélection nationale féminine de football. Sa Majesté le Roi Mohammed VI, que Dieu L'assiste, accompagné de SAR le Prince Héritier Moulay El Hassan et de SAR le Prince Moulay Rachid, a présidé, mercredi après-midi à la Place de la préfecture de M'diq-Fnideq (ville de M'diq), une réception à l'occasion du 26e anniversaire de l'accession du Souverain au Trône de Ses glorieux Ancêtres.", 'size': 3}, {'id': '91', 'title': 'S.M. le Roi préside une réception à M’diq pour la Fête du Trône', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/s-m-le-roi-preside-une-reception-a-mdiq-pour-la-fete-du-trone/', 'summary': 'S.M. le Roi préside une réception à M’diq pour la Fête du Trône. Sa Majesté le Roi Mohammed VI, que Dieu L’assiste, accompagné de SAR le Prince Héritier Moulay El Hassan et de SAR le Prince Moulay Rachid, a présidé, mercredi après-midi à la Place de la préfecture de M’diq-Fnideq (ville de M’diq), une réception à l’occasion du 26e anniversaire de l’accession du Souverain au Trône de Ses .', 'size': 3}, {'id': '125', 'title': 'SM le Roi préside à M’diq une réception à l’occasion de la glorieuse Fête du Trône', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/sm-le-roi-preside-a-mdiq-une-reception-a-loccasion-de-la-glorieuse-fete-du-trone/', 'summary': 'SM le Roi préside à M’diq une réception à l’occasion de la glorieuse Fête du Trône. Sa Majesté le Roi Mohammed VI, que Dieu L’assiste, accompagné de SAR le Prince Héritier Moulay El Hassan et de SAR le Prince Moulay Rachid, a présidé, mercredi après-midi à la Place de la préfecture de M’diq-Fnideq (ville de M’diq), une réception à l’occasion du 26e anniversaire de l’accession du Souverain au Trône de Ses ', 'size': 3}], 'main_title': 'Fête du Trône : SM le Roi Mohammed VI reçoit la sélection nationale féminine de football'}, {'community_id': '4', 'articles': [{'id': '36', 'title': '\u200bRussie : Un gigantesque séisme provoque des alertes au tsunami dans tout le Pacifique', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/\u200bRussie-Un-gigantesque-seisme-provoque-des-alertes-au-tsunami-dans-tout-le-Pacifique_a70417.html', 'summary': "\u200bRussie : Un gigantesque séisme provoque des alertes au tsunami dans tout le Pacifique. Un séisme de magnitude 8,8, le plus puissant dans la région en près de 73 ans, a frappé, mardi, au large de la péninsule russe du Kamtchatka, provoquant des alertes de tsunamis dans tout le Pacifique et des évacuations de Hawaï jusqu'au Japon.", 'size': 2}, {'id': '54', 'title': "Tsunami dans le Pacifique : des vagues jusqu'à 4 mètres de hauteur attendues en Polynésie", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/07/30/tsunami-dans-le-pacifique-des-vagues-jusqua-4-metres-de-hauteur-attendues-en-polynesie_1944475/', 'summary': "Tsunami dans le Pacifique : des vagues jusqu'à 4 mètres de hauteur attendues en Polynésie. Un séisme de magnitude 8,8 au large du Kamtchatka a déclenché des alertes tsunami dans tout le Pacifique. Plusieurs vagues ont frappé la Russie et le Japon, causant des inondations et des évacuations massives sans faire de victimes à ce stade. Des vagues pouvant atteindre 4 mètres sont attendues en Polynésie française. Un séisme de.", 'size': 2}], 'main_title': '\u200bRussie : Un gigantesque séisme provoque des alertes au tsunami dans tout le Pacifique'}, {'community_id': '6', 'articles': [{'id': '56', 'title': 'Partenariat OCP-Ambipar : 100 000 hectares de pâturages dégradés à restaurer au Brésil', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/07/30/partenariat-ocp-ambipar-100-000-hectares-de-paturages-degrades-a-restaurer-au-bresil_1944465/', 'summary': 'Partenariat OCP-Ambipar : 100 000 hectares de pâturages dégradés à restaurer au Brésil. Le groupe OCP a annoncé, mardi, s’être associé à travers OCP Brasil à Ambipar, acteur de référence en matière de gestion environnementale, à la Liga do Araguaia et à l’Institut Agroenvironnemental de la Vallée de l’Araguaia (IAVA), deux organisations locales engagées pour le développement rural durable, afin de lancer le projet ALM Carbono Verde do.', 'size': 4}, {'id': '163', 'title': 'OCP signe un partenariat inédit pour restaurer 100 000 hectares de pâturages au Brésil', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/ocp-signe-un-partenariat-inedit-pour-restaurer-100-000-hectares-de-paturages-au-bresil-307741/', 'summary': 'OCP signe un partenariat inédit pour restaurer 100 000 hectares de pâturages au Brésil. Le groupe OCP, en collaboration avec Ambipar, la Liga do Araguaia et l’Institut Agroenvironnemental de la Vallée de l’Araguaia (IAVA), a annoncé le lancement du projet ALM Carbono Verde do Araguaia, une initiative de grande ampleur visant à restaurer jusqu’à 100 000 hectares de pâturages dégradés dans le Cerrado brésilien.', 'size': 4}, {'id': '183', 'title': 'OCP : Alliance pour restaurer 100.000 ha au Brésil', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/affaires/ocp-alliance-pour-restaurer-100-000-ha-au-bresil/', 'summary': 'OCP : Alliance pour restaurer 100.000 ha au Brésil. Le Groupe OCP, Ambipar, Liga do Araguaia et IAVA s’associent pour restaurer jusqu’à 100 000 hectares de cultures dégradées et générer des crédits carbone dans la vallée de l’Araguaia. La première phase du projet s’étend sur trois ans et prévoit la restauration de presque 80.000 hectares sur une soixantaine d’exploitations agricoles, avant une extension à 100.000 hectares au cours d’une deuxième phase.', 'size': 2}, {'id': '193', 'title': 'OCP et ses partenaires lancent un projet de restauration de 100 000 hectares dans la vallée de l’Araguaia', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/ocp-et-ses-partenaires-lancent-un-projet-de-restauration-de-100-000/', 'summary': 'OCP et ses partenaires lancent un projet de restauration de 100 000 hectares dans la vallée de l’Araguaia. Le Groupe OCP, leader mondial des solutions de nutrition des plantes et des engrais phosphatés, à travers OCP Brasil, filiale d’OCP Nutricrops, s’associe à Ambipar, acteur de référence en matière de gestion environnementale, à la Liga do Araguaia et à l’Institut Agroenvironnemental de la Vallée de l’Araguaia (IAVA), deux organisations locales engagées pour le développement .', 'size': 4}, {'id': '220', 'title': 'Projet ALM Carbono Verde do Araguaia : L’OCP se mobilise pour restaurer les pâturages dégradés au Brésil', 'source': 'lnt.ma', 'link': 'https://lnt.ma/projet-alm-carbono-verde-do-araguaia-locp-se-mobilise-pour-restaurer-les-paturages-degrades-au-bresil/', 'summary': 'Projet ALM Carbono Verde do Araguaia : L’OCP se mobilise pour restaurer les pâturages dégradés au Brésil. Le Groupe OCP, via sa filiale OCP Brasil, s’est associé à la société de solutions environnementales Ambipar, à la Liga do Araguaia et à l’Institut agroenvironnemental de la vallée de l’Araguaia (IAVA) pour lancer un projet visant à restaurer jusqu’à 100 000 hectares de pâturages dégradés dans la région de l’Araguaia, située dans le biome . ', 'size': 5}], 'main_title': 'Projet ALM Carbono Verde do Araguaia : L’OCP se mobilise pour restaurer les pâturages dégradés au Brésil'}, {'community_id': '8', 'articles': [{'id': '57', 'title': 'Le déficit commercial s’aggrave à 161,86 milliards de DH à fin juin 2025', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/07/30/le-deficit-commercial-saggrave-a-16186-milliards-de-dh-a-fin-juin-2025_1944463/', 'summary': 'Le déficit commercial s’aggrave à 161,86 milliards de DH à fin juin 2025. Le déficit commercial du Maroc a atteint 161,86 milliards de dirhams (MMDH) à fin juin 2025, enregistrant une hausse de 18,4% par rapport à la même période de 2024, selon les derniers chiffres publiés par l’Office des changes. Ce qu’il s’est passé Les importations ont progressé de +8,9% pour s’établir à 398,04 MMDH. Les exportations.', 'size': 2}, {'id': '144', 'title': 'Le déficit commercial du Maroc en hausse de 18,4% à fin juin 2025 (Office des changes)', 'source': 'lematin.ma', 'link': 'https://lematin.ma/economie/le-deficit-commercial-du-maroc-en-hausse-de-184-a-fin-juin-2025/294141', 'summary': 'Le déficit commercial du Maroc en hausse de 18,4% à fin juin 2025 (Office des changes). Les importations ont atteint 398,04 MMDH, en hausse de 8,9% par rapport à la même période de 2024, soit un accroissement de 32,37 MMDH. Cette évolution est largement portée par la.', 'size': 2}], 'main_title': 'Le déficit commercial s’aggrave à 161,86 milliards de DH à fin juin 2025'}, {'community_id': '7', 'articles': [{'id': '66', 'title': 'Grâce Royale au profit de 19.673 personnes', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/actualite/grace-royale-au-profit-de-19-673-personnes', 'summary': 'Grâce Royale au profit de 19.673 personnes. A l’occasion de la Fête du Trône, Sa Majesté le Roi Mohammed VI, que Dieu L’assiste, a bien voulu accorder Sa grâce à 2.415 personnes, dont certaines sont en détention et d’autres en liberté, condamnées par différents tribunaux du Royaume, et, à titre exceptionnel, à 17.258 condamnés, sélectionnés selon des critères déterminés pour faire de .', 'size': 2}, {'id': '129', 'title': 'Fête du Trône: Grâce Royale exceptionnelle au profit de 19.673 personnes', 'source': 'lnt.ma', 'link': 'https://lnt.ma/fete-du-trone-grace-royale-exceptionnelle-au-profit-de-19-673-personnes/', 'summary': 'Fête du Trône: Grâce Royale exceptionnelle au profit de 19.673 personnes. A l’occasion de la Fête du Trône, Sa Majesté le Roi Mohammed VI, que Dieu L’assiste, a bien voulu accorder Sa grâce à 2.415 personnes, dont certaines sont en détention et d’autres en liberté, condamnées par différents tribunaux du Royaume, et, à titre exceptionnel, à 17.258 condamnés, sélectionnés selon des critères déterminés pour faire de . ', 'size': 2}], 'main_title': 'Grâce Royale au profit de 19.673 personnes'}, {'community_id': '9', 'articles': [{'id': '72', 'title': 'Infantino : Les infrastructures réalisées par le Maroc propulsent le Royaume parmi l’élite mondiale du football', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/au-royaume/infantino-les-infrastructures-realisees-par-le-maroc-propulsent-le-royaume-parmi-lelite-mondiale-du-football/', 'summary': 'Infantino : Les infrastructures réalisées par le Maroc propulsent le Royaume parmi l’élite mondiale du football. Gianni Infantino a salué, ce mercredi 30 juillet, la qualité des infrastructures sportives du Maroc, plaçant le Royaume parmi "l’élite mondiale du football". Le président de la FIFA a également mis en avant les succès organisationnels et les grands rendez-vous à venir, dont la Coupe d’Afrique des Nations 2025 et la Coupe du Monde 2030.', 'size': 3}, {'id': '90', 'title': 'Les infrastructures hors pair réalisées par le Maroc propulsent le Royaume parmi «\xa0l’élite mondiale du football\xa0»', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/les-infrastructures-hors-pair-realisees-par-le-maroc-propulsent/', 'summary': 'Les infrastructures hors pair réalisées par le Maroc propulsent le Royaume parmi « l’élite mondiale du football ». Les infrastructures hors pair réalisées par le Maroc propulsent le Royaume parmi « l’élite mondiale du football », a affirmé, mercredi, le président de la Fédération internationale de football (FIFA), Gianni Infantino. « La vision du Maroc, sous la conduite de Sa Majesté le Roi, pour promouvoir l’excellence du football au niveau mondial est extraordinaire”, s’est réjoui M. .', 'size': 4}, {'id': '148', 'title': 'Les infrastructures hors pair réalisées par le Maroc le propulsent parmi "l’élite mondiale du football" (Infantino)', 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/fifales-infrastructures-realisees-par-le-maroc-le-propulsent-parmi-lelite/294139', 'summary': 'Les infrastructures hors pair réalisées par le Maroc le propulsent parmi "l’élite mondiale du football" (Infantino). La vision du Maroc, sous la conduite de Sa Majesté le Roi, pour promouvoir l’excellence du football au niveau mondial est extraordinaire”, s’est réjoui M. Infrantino dans une.', 'size': 3}, {'id': '168', 'title': 'Gianni Infantino : Avec ses infrastructures, le Maroc fait partie de\xa0«l’élite mondiale du foot»', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/173168/gianni-infantino-avec-infrastructures-maroc.html', 'summary': 'Gianni Infantino : Avec ses infrastructures, le Maroc fait partie de «l’élite mondiale du foot». Les infrastructures hors pair réalisées par le Maroc propulsent le royaume parmi «l’élite mondiale du football», a affirmé, mercredi, le président de la Fédération internationale de football (FIFA), Gianni Infantino.', 'size': 4}, {'id': '216', 'title': 'Football : Infantino encense les infrastructures marocaines', 'source': 'lnt.ma', 'link': 'https://lnt.ma/football-infantino-encense-les-infrastructures-marocaines/', 'summary': 'Football : Infantino encense les infrastructures marocaines. Les infrastructures hors pair réalisées par le Maroc propulsent le Royaume parmi « l’élite mondiale du football », a affirmé, mercredi, le président de la Fédération internationale de football (FIFA), Gianni Infantino. « La vision du Maroc, sous la conduite de Sa Majesté le Roi, pour promouvoir l’excellence du football au niveau mondial est extraordinaire”, s’est réjoui M. . ', 'size': 5}], 'main_title': 'Football : Infantino encense les infrastructures marocaines'}, {'community_id': '11', 'articles': [{'id': '79', 'title': 'Laâyoune : 130 MDH pour renforcer les infrastructures urbaines et sportives', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/au-royaume/laayoune-130-mdh-pour-renforcer-les-infrastructures-urbaines-et-sportives/', 'summary': "Laâyoune : 130 MDH pour renforcer les infrastructures urbaines et sportives. Une série de projets visant à renforcer les infrastructures urbaines et sportives ont été lancés, le 29 juillet à Laâyoune, pour un investissement global de 130 millions de dirhams (MDH), à l'occasion de la célébration du 26e anniversaire de la Fête du Trône.", 'size': 2}, {'id': '124', 'title': 'Laâyoune | Lancement de projets d’infrastructures urbaines et sportives pour un investissement de 130 MDH', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/laayoune-lancement-de-projets-dinfrastructures-urbaines-et-sportives-pour-un-investissement-de-130-mdh/', 'summary': 'Laâyoune | Lancement de projets d’infrastructures urbaines et sportives pour un investissement de 130 MDH. Une série de projets visant à renforcer les infrastructures urbaines et sportives ont été lancés, mardi à Laâyoune, pour un investissement global de 130 millions de dirhams (MDH), à l’occasion de la célébration du 26e anniversaire de la Fête du Trône. Ainsi, le wali de la région Laâyoune-Sakia El Hamra, gouverneur de la province de ', 'size': 2}], 'main_title': 'Laâyoune : 130 MDH pour renforcer les infrastructures urbaines et sportives'}, {'community_id': '5', 'articles': [{'id': '94', 'title': 'S.M. le Roi reçoit les Lionnes de l’Atlas, finalistes de la CAN 2025', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/s-m-le-roi-recoit-les-lionnes-de-latlas-finalistes-de-la-can-2025/', 'summary': 'S.M. le Roi reçoit les Lionnes de l’Atlas, finalistes de la CAN 2025. Le Palais royal de Tétouan a accueilli, mercredi 30 juillet 2025, une cérémonie à forte charge symbolique en hommage aux Lionnes de l’Atlas, finalistes de la Coupe d’Afrique des Nations féminine 2024. S.M le Roi Mohammed VI a personnellement reçu les membres de l’équipe nationale féminine, saluant leur parcours remarquable au cours d’une audience empreinte .', 'size': 2}, {'id': '114', 'title': 'Fête du Trône : La présence de la sélection féminine de football à la réception offerte par SM le Roi, une bienveillance Royale renouvelée à l’endroit du sport national', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/fete-du-trone-la-presence-de-la-selection-feminine-de-football-a-la-reception-offerte-par-sm-le-roi-une-bienveillance-royale-renouvelee-a-lendroit-du-sport-national.html', 'summary': 'Fête du Trône : La présence de la sélection féminine de football à la réception offerte par SM le Roi, une bienveillance Royale renouvelée à l’endroit du sport national. La présence de la sélection nationale féminine de football, finaliste de la Coupe d’Afrique des Nations féminine 2024, à la réception offerte mercredi par le Roi Mohammed VI à l’occasion de la fête du Trône, est une nouvelle illustration de la Haute bienveillance dont le Souverain n’a eu de cesse d’entourer le sport en général . L’article est apparu en premier sur .', 'size': 2}, {'id': '123', 'title': 'Fête du Trône 2025 | SM le Roi reçoit la sélection nationale féminine de football', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/fete-du-trone-2025-sm-le-roi-recoit-la-selection-nationale-feminine-de-football/', 'summary': 'Fête du Trône 2025 | SM le Roi reçoit la sélection nationale féminine de football. La présence de la sélection nationale féminine de football, finaliste de la Coupe d’Afrique des Nations féminine 2024, à la réception offerte, mercredi, par Sa Majesté le Roi Mohammed VI à l’occasion de la glorieuse fête du Trône, est une nouvelle illustration de la Haute bienveillance dont le Souverain n’a eu de cesse d’entourer le ', 'size': 3}], 'main_title': 'Fête du Trône 2025 | SM le Roi reçoit la sélection nationale féminine de football'}, {'community_id': '10', 'articles': [{'id': '169', 'title': 'Duke Buchan III : Le roi Mohammed VI, un «leader respecté et un ami des États-Unis»', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/173159/duke-buchan-mohammed-leader-respecte.html', 'summary': 'Duke Buchan III : Le roi Mohammed VI, un «leader respecté et un ami des États-Unis». Le roi Mohammed VI est un «leader respecté et un ami des États-Unis», a affirmé le nouvel ambassadeur américain désigné au Maroc, Duke Buchan III.', 'size': 2}, {'id': '213', 'title': 'Duke Buchan III : SM le Roi Mohammed VI, un «\xa0leader respecté et un ami des États-Unis\xa0»', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/sm-le-roi-mohammed-vi-un-leader-respecte-et-un-ami-des-etats-unis-nouvel-ambassadeur-us-au-maroc.html', 'summary': 'Duke Buchan III : SM le Roi Mohammed VI, un « leader respecté et un ami des États-Unis ». Sa Majesté le Roi Mohammed VI est un "leader respecté et un ami des États-Unis", a affirmé le nouvel ambassadeur américain désigné au Maroc, Duke Buchan III. L’article est apparu en premier sur .', 'size': 2}], 'main_title': 'Duke Buchan III : Le roi Mohammed VI, un «leader respecté et un ami des États-Unis»'}, {'community_id': '12', 'articles': [{'id': '182', 'title': 'La BMCI s’associe à L’ISCAE pour renforcer les compétences des collaborateurs à travers le programme « Passerelles »', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/comese/la-bmci-sassocie-a-liscae-pour-renforcer-les-competences-des-collaborateurs-a-travers-le-programme-passerelles/', 'summary': "La BMCI s’associe à L’ISCAE pour renforcer les compétences des collaborateurs à travers le programme « Passerelles ». Le 29 juillet, La BMCI et le Groupe ISCAE ont signé une convention de partenariat pour le lancement du programme «Passerelles», un dispositif innovant d'upskilling et de reskilling destiné aux collaborateurs de la BMCI souhaitant évoluer vers d'autres métiers.", 'size': 2}, {'id': '218', 'title': 'BMCI et ISCAE lancent un programme de formation certifiante pour les collaborateurs de la banque', 'source': 'lnt.ma', 'link': 'https://lnt.ma/bmci-et-iscae-lancent-un-programme-de-formation-certifiante-pour-les-collaborateurs-de-la-banque/', 'summary': 'BMCI et ISCAE lancent un programme de formation certifiante pour les collaborateurs de la banque. La BMCI et le Groupe ISCAE ont officialisé, le 29 juillet 2025 à Casablanca, la signature d’une convention de partenariat pour le lancement du programme « Passerelles », un dispositif de formation destiné aux collaborateurs de la banque souhaitant se reconvertir ou évoluer vers de nouvelles fonctions. Ce programme de certification s’étendra sur une durée de six . ', 'size': 2}], 'main_title': 'La BMCI s’associe à L’ISCAE pour renforcer les compétences des collaborateurs à travers le programme « Passerelles »'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
                        
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ? d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        // Fonction pour cacher le tooltip
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = '';
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
    
    
</body>




</html>
    