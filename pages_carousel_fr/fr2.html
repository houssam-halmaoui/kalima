<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); 
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title"> Les principales actualités des dernières 24 heures

</div>    
        <div class="header-subtitle"> Dernière mise à jour : 06/09/2025 - 18h26</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"></div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '2', 'title': 'Trump renomme le département de la Défense en "ministère de la Guerre"', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/440125-trump-renomme-le-departement-de-la-defense-en-ministere-de-la-guerre.html', 'summary': 'Trump renomme le département de la Défense en "ministère de la Guerre". Le président américain, Donald Trump, a signé vendredi un ordre exécutif renommant le département de la Défense en « ministère de la Guerre », une appellation qui a existé aux Etats-Unis de 1789 à 1949. « Cela envoie un message de victoire et de force » aux alliés comme aux ennemis des Etats-Unis, a lancé M. Trump depuis le . ', 'size': 3}, {'id': '24', 'title': '\u200bTrump signe un décret renommant le département de la Défense en "ministère de la Guerre"', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/\u200bTrump-signe-un-decret-renommant-le-departement-de-la-Defense-en-ministere-de-la-Guerre_a71458.html', 'summary': '\u200bTrump signe un décret renommant le département de la Défense en "ministère de la Guerre". Le président américain, Donald Trump, a signé vendredi un ordre exécutif renommant le département de la Défense en "ministère de la Guerre", une appellation qui a existé aux Etats-Unis de 1789 à 1949.', 'size': 3}, {'id': '72', 'title': 'USA : Trump va renommer le département de la Défense en «\xa0ministère de la Guerre\xa0»', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/usa-trump-va-renommer-le-departement-de-la-defense-en-ministere-de-la-guerre/', 'summary': 'USA : Trump va renommer le département de la Défense en « ministère de la Guerre ». Le président américain, Donald Trump, va signer vendredi un décret visant à renommer le département de la Défense en « ministère de la Guerre », une appellation qui a existé aux Etats-Unis de 1789 à 1949. Selon un responsable de la Maison Blanche, cité par les médias locaux, il s’agit de « rétablir le nom historique de ministère .', 'size': 3}], 'main_title': 'Trump renomme le département de la Défense en "ministère de la Guerre"'}, {'community_id': '1', 'articles': [{'id': '5', 'title': 'Les températures attendues ce samedi 6 septembre 2025', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/440116-les-temperatures-attendues-ce-samedi-6-septembre-2025.html', 'summary': 'Les températures attendues ce samedi 6 septembre 2025. Voici les températures minimales et maximales prévues par la Direction générale de la météorologie pour la journée du samedi 6 septembre 2025 Min Max – Oujda 20 31 – Bouarfa 22 35 – Al Hoceima 19 32 – Tétouan 20 25 – Sebta 22 25 – Mellilia 23 26 – Tanger 23 31 – Kénitra . ', 'size': 2}, {'id': '73', 'title': 'Températures prévues pour le samedi 06 septembre 2025', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/temperatures-prevues-pour-le-samedi-06-septembre-2025/', 'summary': 'Températures prévues pour le samedi 06 septembre 2025. Voici les températures minimales et maximales prévues par la Direction générale de la météorologie pour le samedi 06 septembre 2025: Min Max – Oujda 20 31 – Bouarfa 22 35 – Al Hoceima 19 32 – Tétouan 20 25 – Sebta 22 25 – Mellilia 23 26 – Tanger 23 31 – Kénitra 18 28 .', 'size': 2}], 'main_title': 'Les températures attendues ce samedi 6 septembre 2025'}, {'community_id': '2', 'articles': [{'id': '10', 'title': 'Infantino salue la “performance exceptionnelle” du Maroc qualifié pour le Mondial 2026', 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/maroc-qualifie-au-mondial-2026-infantino-salue-les-lions-de-latlas/299998', 'summary': 'Infantino salue la “performance exceptionnelle” du Maroc qualifié pour le Mondial 2026. La qualification du Maroc pour la Coupe du monde 2026 n’est pas passée inaperçue. Depuis ses réseaux sociaux, le président de la Fédération internationale de football (FIFA), Giann.', 'size': 2}, {'id': '80', 'title': 'Qualif. Maroc CM 2026 | Gianni Infantino salue une “performance exceptionnelle” (FIFA)', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/qualif-maroc-cm-2026-gianni-infantino-salue-une-performance-exceptionnelle-fifa/', 'summary': 'Qualif. Maroc CM 2026 | Gianni Infantino salue une “performance exceptionnelle” (FIFA). Le président de la Fédération internationale de football (FIFA), Gianni Infantino, a qualifié, vendredi soir, de “performance exceptionnelle”, la qualification de la sélection marocaine pour la Coupe du monde 2026. “Quelle performance exceptionnelle! Dima Maghreb, félicitations au Maroc qui s’apprête à disputer la Coupe du Monde de la FIFA pour la septième fois de son ', 'size': 2}], 'main_title': 'Infantino salue la “performance exceptionnelle” du Maroc qualifié pour le Mondial 2026'}, {'community_id': '3', 'articles': [{'id': '18', 'title': 'FAO : les prix mondiaux des denrées alimentaires stables en août', 'source': 'lematin.ma', 'link': 'https://lematin.ma/economie/fao-les-prix-mondiaux-des-denrees-alimentaires-stables-en-aout/299956', 'summary': 'FAO : les prix mondiaux des denrées alimentaires stables en août. L’Organisation des Nations unies pour l’alimentation et l’agriculture (FAO) a indiqué, vendredi à Rome, que son indice des prix alimentaires a légèrement progressé à 130,1 points e.', 'size': 2}, {'id': '71', 'title': 'FAO: L’indice des prix des produits alimentaires reste inchangé en août', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/fao-lindice-des-prix-des-produits-alimentaires-reste-inchange-en-aout/', 'summary': 'FAO: L’indice des prix des produits alimentaires reste inchangé en août. L’indice des prix des produits alimentaires de l’Organisation des Nations unies pour l’alimentation et l’agriculture (FAO) a affiché une valeur moyenne de 130,1 points en août, soit à peine plus que son niveau révisé de juillet (130,0 points) et 6,9% de plus qu’une année auparavant. L’indice, qui suit les changements mensuels des prix internationaux d’un .', 'size': 2}], 'main_title': 'FAO : les prix mondiaux des denrées alimentaires stables en août'}, {'community_id': '4', 'articles': [{'id': '22', 'title': 'S.M. le Roi ordonne au Conseil Supérieur des Oulémas d’émettre une fatwa exhaustive sur la Zakat', 'source': 'lematin.ma', 'link': 'https://lematin.ma/activites-royales/sm-le-roi-ordonne-aux-oulemas-demettre-une-fatwa-exhaustive-sur-la-zakat/299931', 'summary': 'S.M. le Roi ordonne au Conseil Supérieur des Oulémas d’émettre une fatwa exhaustive sur la Zakat. Voici la traduction du communiqué du Conseil Supérieur des Oulémas :Le Conseil Supérieur des Oulémas annonce que Sa Majesté le Roi Mohammed VI, Amir Al Mouminine, que Dieu L.', 'size': 5}, {'id': '39', 'title': 'SM le Roi ordonne aux Oulémas d’émettre une fatwa exhaustive sur la Zakat', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/SM-le-Roi-ordonne-aux-Oulemas-d-emettre-une-fatwa-exhaustive-sur-la-Zakat_a71441.html', 'summary': "SM le Roi ordonne aux Oulémas d’émettre une fatwa exhaustive sur la Zakat. Sa Majesté le Roi Mohammed VI, Amir Al Mouminine, que Dieu L'assiste, a bien voulu ordonner au Conseil Supérieur des Oulémas d’émettre une fatwa exhaustive clarifiant les règles de la Charia au sujet de la Zakat, indique un communiqué du Conseil.", 'size': 5}, {'id': '52', 'title': 'SM le Roi ordonne au Conseil Supérieur des Oulémas d’émettre une fatwa exhaustive clarifiant les règles de la Charia au sujet de la Zakat', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/actualite/sm-le-roi-ordonne-au-conseil-superieur-des-oulemas-demettre-une-fatwa-exhaustive-clarifiant-les-regles-de-la-charia-au-sujet-de-la-zakat', 'summary': 'SM le Roi ordonne au Conseil Supérieur des Oulémas d’émettre une fatwa exhaustive clarifiant les règles de la Charia au sujet de la Zakat. Sa Majesté le Roi Mohammed VI, Amir Al Mouminine, que Dieu L’assiste, a bien voulu ordonner au Conseil Supérieur des Oulémas d’émettre une fatwa exhaustive clarifiant les règles de la Charia au sujet de la Zakat, indique un communiqué du Conseil. Voici la traduction du communiqué du Conseil Supérieur des Oulémas : « Le Conseil Supérieur .', 'size': 5}, {'id': '63', 'title': 'Charia relative à la Zakat : SM le Roi ordonne au Conseil Supérieur des Oulémas d’émettre une fatwa', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/au-royaume/charia-relative-a-la-zakat-sm-le-roi-ordonne-au-conseil-superieur-des-oulemas-demettre-une-fatwa/', 'summary': 'Charia relative à la Zakat : SM le Roi ordonne au Conseil Supérieur des Oulémas d’émettre une fatwa. SM le Roi Mohammed VI a bien voulu ordonner au Conseil Supérieur des Oulémas d’émettre une fatwa exhaustive clarifiant les règles de la Charia au sujet de la Zakat, indique un communiqué du Conseil.', 'size': 5}, {'id': '82', 'title': 'SM le Roi ordonne une fatwa exhaustive pour clarifier les règles de la Charia au sujet de la Zakat', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/sm-le-roi-ordonne-une-fatwa-exhaustive-pour-clarifier-les-regles-de-la-charia-au-sujet-de-la-zakat/', 'summary': 'SM le Roi ordonne une fatwa exhaustive pour clarifier les règles de la Charia au sujet de la Zakat. Sa Majesté le Roi Mohammed VI, Amir Al Mouminine, que Dieu L’assiste, a bien voulu ordonner au Conseil Supérieur des Oulémas d’émettre une fatwa exhaustive clarifiant les règles de la Charia au sujet de la Zakat, indique un communiqué du Conseil. Voici la traduction du communiqué du Conseil Supérieur des Oulémas : “Le Conseil Supérieur ', 'size': 5}], 'main_title': 'S.M. le Roi ordonne au Conseil Supérieur des Oulémas d’émettre une fatwa exhaustive sur la Zakat'}, {'community_id': '5', 'articles': [{'id': '26', 'title': '(Qualifications au Mondial-2026) Walid Regragui : « Notre tactique a bien fonctionné, l’essentiel est la qualification »', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Qualifications-au-Mondial-2026-Walid-Regragui-Notre-tactique-a-bien-fonctionne-l-essentiel-est-la-qualification_a71456.html', 'summary': '(Qualifications au Mondial-2026) Walid Regragui : « Notre tactique a bien fonctionné, l’essentiel est la qualification ». Le sélectionneur de l’équipe du Maroc de football, Walid Regragui, a fait savoir, vendredi, que la tactique mise en place face au Niger a “bien fonctionné” et permis aux Lions de l’Atlas de s’imposer par 5 buts à 0, notant que «l’essentiel est la qualification pour le prochain Mondial».', 'size': 4}, {'id': '43', 'title': 'Qualifications : le Maroc domine le Niger (5-0) et valide son ticket pour le Mondial 2026', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/09/06/qualifications-le-maroc-domine-le-niger-5-0-et-valide-son-ticket-pour-le-mondial-2026_1949140/', 'summary': 'Qualifications : le Maroc domine le Niger (5-0) et valide son ticket pour le Mondial 2026. Les Lions de l’Atlas ont validé, haut la main, leur ticket pour la Coupe du monde de football 2026, en dominant le Niger sur le score sans appel de 5 buts à 0, en match comptant pour la 7e journée du groupe E des qualifications africaines, vendredi au Stade Prince Moulay Abdellah à Rabat. Pour.', 'size': 4}, {'id': '83', 'title': 'Les Lions de l’Atlas font le show pour leur première au Stade Prince Moulay Abdellah', 'source': 'lnt.ma', 'link': 'https://lnt.ma/les-lions-de-latlas-font-le-show-pour-leur-premiere-au-stade-prince-moulay-abdellah/', 'summary': 'Les Lions de l’Atlas font le show pour leur première au Stade Prince Moulay Abdellah. Les Lions de l’Atlas se sont qualifiés pour la Coupe du monde 2026 en s’imposant largement face au Niger (5–0) au stade Prince Moulay Abdellah, lors de la 7e journée des éliminatoires africaines. Avec ce sixième succès en autant de rencontres, le Maroc porte son total à 18 points et assure sa présence au Mondial . ', 'size': 3}, {'id': '94', 'title': 'Match Maroc-Zambie : à quelle heure et sur quelles chaînes ?', 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/match-maroc-zambie-a-quelle-heure-et-sur-quelles-chaines/300016', 'summary': 'Match Maroc-Zambie : à quelle heure et sur quelles chaînes ?. Les Lions de l’Atlas se sont offerts une victoire éclatante vendredi soir au stade Prince Moulay Abdellah de Rabat, en battant le Niger par cinq buts à zéro. Un succès qui scelle l.', 'size': 3}, {'id': '120', 'title': 'Qualifications au Mondial-2026 : «\xa0Notre tactique a bien fonctionné, l’essentiel est la qualification\xa0» (Walid Regragui)', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/qualifications-au-mondial-2026-notre-tactique-a-bien-fonctionne-lessentiel-est-la-qualification-walid-regragui.html', 'summary': 'Qualifications au Mondial-2026 : « Notre tactique a bien fonctionné, l’essentiel est la qualification » (Walid Regragui). Le sélectionneur de l’équipe du Maroc de football, Walid Regragui, a fait savoir, vendredi, que la tactique mise en place face au Niger a « bien fonctionné » et permis aux Lions de l’Atlas de s’imposer par 5 buts à 0, notant que «l’essentiel est la qualification pour le prochain Mondial». «Je voudrais remercier les joueurs qui . L’article est apparu en premier sur .', 'size': 3}, {'id': '123', 'title': 'Qualif. CM 2026 | Notre tactique a bien fonctionné, l’essentiel est la qualification (Regragui)', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/qualif-cm-2026-notre-tactique-a-bien-fonctionne-lessentiel-est-la-qualification-regragui/', 'summary': 'Qualif. CM 2026 | Notre tactique a bien fonctionné, l’essentiel est la qualification (Regragui). Le sélectionneur de l’équipe du Maroc de football, Walid Regragui, a fait savoir, vendredi, que la tactique mise en place face au Niger a “bien fonctionné” et permis aux Lions de l’Atlas de s’imposer par 5 buts à 0, notant que «l’essentiel est la qualification pour le prochain Mondial». «Je voudrais remercier les joueurs qui ', 'size': 3}], 'main_title': '(Qualifications au Mondial-2026) Walid Regragui : « Notre tactique a bien fonctionné, l’essentiel est la qualification »'}, {'community_id': '7', 'articles': [{'id': '57', 'title': 'L’Boulevard : «\xa0Une scène pour les oubliés des autres festivals\xa0»', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/influences/culture/lboulevard-une-scene-pour-les-oublies-des-autres-festivals/', 'summary': 'L’Boulevard : « Une scène pour les oubliés des autres festivals ». Vingt-cinq ans après ses débuts improvisés, L’Boulevard (du 18 au 21 septembre) reste une scène incontournable pour les musiques urbaines et alternatives au Maroc.', 'size': 2}, {'id': '76', 'title': 'Festival : les musiques urbaines ont un L’Boulevard', 'source': 'leseco.ma', 'link': 'https://leseco.ma/culture/festival-les-musiques-urbaines-ont-un-lboulevard.html', 'summary': 'Festival : les musiques urbaines ont un L’Boulevard. Du 18 au 21 septembre, L’Boulevard revient avec sa scène du stade R.U.C., dédiée au musiques urbaines, marocaines ou d’ailleurs. Un rendez-vous incontournable dans la vie culturelle casablancaise, voire nationale. Entrée libre et gratuite, dans la limite des places disponibles. ', 'size': 2}], 'main_title': 'L’Boulevard : «\xa0Une scène pour les oubliés des autres festivals\xa0»'}, {'community_id': '8', 'articles': [{'id': '88', 'title': 'Aéroport Al Hoceima: Hausse de 7% de passagers à fin août', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/440160-aeroport-al-hoceima-hausse-de-7-de-passagers-a-fin-aout.html', 'summary': 'Aéroport Al Hoceima: Hausse de 7% de passagers à fin août. Le nombre de passagers ayant transité via l’aéroport Chérif Al Idrissi d’Al Hoceima a enregistré une hausse de 7% à fin août dernier, par rapport à la même période une année auparavant. Ainsi, cet aéroport a accueilli quelque 92.939 passagers à fin août dernier, contre 86.721 voyageurs durant la même période de l’année 2024. Dans . ', 'size': 2}, {'id': '110', 'title': 'Aéroport d’Al Hoceima: Hausse de 7% du trafic de passagers à fin août', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/affaires/aeroport-dal-hoceima-hausse-de-7-du-trafic-de-passagers-a-fin-aout/', 'summary': 'Aéroport d’Al Hoceima: Hausse de 7% du trafic de passagers à fin août. Cet aéroport a accueilli quelque 92.939 passagers à fin août dernier, contre 86.721 voyageurs durant la même période de l’année 2024.', 'size': 2}], 'main_title': 'Aéroport Al Hoceima: Hausse de 7% de passagers à fin août'}, {'community_id': '9', 'articles': [{'id': '95', 'title': 'Casablanca : Interpellation de 6 individus pour leur lien présumé à un braquage à main armée en France', 'source': 'lematin.ma', 'link': 'https://lematin.ma/societe/casablanca-6-interpelles-pour-un-braquage-arme-presume-en-france/300014', 'summary': 'Casablanca : Interpellation de 6 individus pour leur lien présumé à un braquage à main armée en France. Selon les premiers éléments de l’enquête, les investigations techniques menées par la BNPJ ont permis la saisie de 31 téléphones portables provenant d’une attaque à main armée perp.', 'size': 3}, {'id': '109', 'title': 'Casablanca: Arrestation de six présumés auteurs d’un braquage en France', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/influences/societe/casablanca-arrestation-de-six-presumes-auteurs-dun-braquage-en-france/', 'summary': 'Casablanca: Arrestation de six présumés auteurs d’un braquage en France. Les investigations techniques menées par la BNPJ ont permis la saisie de 31 téléphones portables provenant d’une attaque à main armée perpétrée en février dernier en France.', 'size': 3}, {'id': '128', 'title': 'Casablanca : six personnes déférées pour lien présumé avec un braquage à main armée en France', 'source': 'lnt.ma', 'link': 'https://lnt.ma/casablanca-six-personnes-deferees-pour-lien-presume-avec-un-braquage-a-main-armee-en-france/', 'summary': 'Casablanca : six personnes déférées pour lien présumé avec un braquage à main armée en France. La Brigade nationale de la police judiciaire (BNPJ) a déféré devant le parquet compétent six individus soupçonnés d’appartenir à un réseau criminel spécialisé dans le vol et le recel de biens issus d’un braquage à main armée commis en France, apprend-on de source sécuritaire. Les premières investigations techniques ont permis la saisie de 31 téléphones . ', 'size': 3}], 'main_title': 'Casablanca : Interpellation de 6 individus pour leur lien présumé à un braquage à main armée en France'}, {'community_id': '6', 'articles': [{'id': '106', 'title': 'Sahara : Le Maroc réalise une nouvelle percée au Kenya', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/175801/sahara-maroc-realise-nouvelle-percee.html', 'summary': 'Sahara : Le Maroc réalise une nouvelle percée au Kenya. Jeudi, une délégation du Comité spécial sur les Investissements publics des comtés et les Fonds spéciaux du Sénat kényan a effectué une visite de travail à Dakhla. Ce déplacement a permis aux parlementaires kényans de découvrir la dynamique de développement de la région et de sinformer sur les projets structurants en cours. Ils ont également exploré les opportunités de coopération et de partenariat avec les acteurs institutionnels et économiques locaux.', 'size': 2}, {'id': '116', 'title': 'Dakhla-Oued Eddahab : Une délégation du Sénat kényan en mission pour renforcer la coopération avec le Maroc', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/dakhla-oued-eddahab-une-delegation-du-senat-kenyan-en-mission-pour-renforcer-la-cooperation-avec-le-maroc/', 'summary': 'Dakhla-Oued Eddahab : Une délégation du Sénat kényan en mission pour renforcer la coopération avec le Maroc. Une délégation du Sénat kényan, conduite par le président du Comité spécial sur les investissements publics des comtés et les fonds spéciaux, Godfrey Osotsi, s’est rendue ce jeudi à Dakhla pour une visite de travail axée sur le renforcement des relations bilatérales entre le Maroc et le Kenya. Cette mission parlementaire a permis aux représentants .', 'size': 2}], 'main_title': 'Sahara : Le Maroc réalise une nouvelle percée au Kenya'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
                        
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ? d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        // Fonction pour cacher le tooltip
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = '';
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
    
    
</body>




</html>
    