<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); 
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title"> Les principales actualités des dernières 24 heures

</div>    
        <div class="header-subtitle"> Dernière mise à jour : 31/07/2025 - 18h35</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"></div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '14', 'articles': [{'id': '15', 'title': 'Les infrastructures hors pair réalisées par le Maroc le propulsent parmi "l’élite mondiale du football" (Infantino)', 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/fifales-infrastructures-realisees-par-le-maroc-le-propulsent-parmi-lelite/294139', 'summary': 'Les infrastructures hors pair réalisées par le Maroc le propulsent parmi "l’élite mondiale du football" (Infantino). La vision du Maroc, sous la conduite de Sa Majesté le Roi, pour promouvoir l’excellence du football au niveau mondial est extraordinaire”, s’est réjoui M. Infrantino dans une.', 'size': 2}, {'id': '72', 'title': 'Gianni Infantino : Avec ses infrastructures, le Maroc fait partie de\xa0«l’élite mondiale du foot»', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/173168/gianni-infantino-avec-infrastructures-maroc.html', 'summary': 'Gianni Infantino : Avec ses infrastructures, le Maroc fait partie de «l’élite mondiale du foot». Les infrastructures hors pair réalisées par le Maroc propulsent le royaume parmi «l’élite mondiale du football», a affirmé, mercredi, le président de la Fédération internationale de football (FIFA), Gianni Infantino.', 'size': 3}, {'id': '95', 'title': 'Infantino : Les infrastructures réalisées par le Maroc propulsent le Royaume parmi l’élite mondiale du football', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/au-royaume/infantino-les-infrastructures-realisees-par-le-maroc-propulsent-le-royaume-parmi-lelite-mondiale-du-football/', 'summary': 'Infantino : Les infrastructures réalisées par le Maroc propulsent le Royaume parmi l’élite mondiale du football. Gianni Infantino a salué, ce mercredi 30 juillet, la qualité des infrastructures sportives du Maroc, plaçant le Royaume parmi "l’élite mondiale du football". Le président de la FIFA a également mis en avant les succès organisationnels et les grands rendez-vous à venir, dont la Coupe d’Afrique des Nations 2025 et la Coupe du Monde 2030.', 'size': 3}, {'id': '160', 'title': 'Football : Infantino encense les infrastructures marocaines', 'source': 'lnt.ma', 'link': 'https://lnt.ma/football-infantino-encense-les-infrastructures-marocaines/', 'summary': 'Football : Infantino encense les infrastructures marocaines. Les infrastructures hors pair réalisées par le Maroc propulsent le Royaume parmi « l’élite mondiale du football », a affirmé, mercredi, le président de la Fédération internationale de football (FIFA), Gianni Infantino. « La vision du Maroc, sous la conduite de Sa Majesté le Roi, pour promouvoir l’excellence du football au niveau mondial est extraordinaire”, s’est réjoui M. . ', 'size': 4}], 'main_title': 'Football : Infantino encense les infrastructures marocaines'}, {'community_id': '1', 'articles': [{'id': '17', 'title': "S.M. le Roi ordonne l'envoi d'aides humanitaires et médicales d'urgence en Palestine", 'source': 'lematin.ma', 'link': 'https://lematin.ma/activites-royales/sm-le-roi-ordonne-lenvoi-daides-humanitaires-durgence-en-palestine/294113', 'summary': "S.M. le Roi ordonne l'envoi d'aides humanitaires et médicales d'urgence en Palestine. Cette aide, d'un volume total de près de 180 tonnes, est composée de denrées alimentaires de première nécessité, de lait et de produits spécialement destinés aux enfants, ainsi.", 'size': 2}, {'id': '93', 'title': 'SM le Roi ordonne l’envoi d’une aide humanitaire et médicale d’urgence en Palestine', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/pouvoirs/sm-le-roi-ordonne-lenvoi-dune-aide-humanitaire-et-medicale-durgence-en-palestine/', 'summary': 'SM le Roi ordonne l’envoi d’une aide humanitaire et médicale d’urgence en Palestine. Cette aide, d’un volume total de près de 180 tonnes, est composée de denrées alimentaires de première nécessité, de lait et de produits spécialement destinés aux enfants, ainsi que de médicaments et de matériel chirurgical pour les populations les plus vulnérables.', 'size': 2}], 'main_title': "S.M. le Roi ordonne l'envoi d'aides humanitaires et médicales d'urgence en Palestine"}, {'community_id': '9', 'articles': [{'id': '31', 'title': "SM le Roi donne ses instructions pour l'envoi d'une aide humanitaire et médicale d'urgence à Gaza", 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/SM-le-Roi-donne-ses-instructions-pour-l-envoi-d-une-aide-humanitaire-et-medicale-d-urgence-a-Gaza_a70431.html', 'summary': "SM le Roi donne ses instructions pour l'envoi d'une aide humanitaire et médicale d'urgence à Gaza. Sa Majesté le Roi Mohammed VI, Président du Comité Al-Qods, a donné ses Tinstructions pour l'envoi d'une aide humanitaire et médicale d'urgence en faveur du peuple palestinien frère, en particulier les populations de la bande de Gaza, indique, mercredi, un communiqué du ministère des Affaires étrangères, de la Coopération africaine et des Marocains résidant à l’étranger.", 'size': 5}, {'id': '48', 'title': "Le Roi Mohammed VI ordonne l'envoi de 180 tonnes d'aide humanitaire et médicale à Gaza", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/07/31/le-roi-mohammed-vi-ordonne-lenvoi-de-180-tonnes-daide-humanitaire-et-medicale-a-gaza_1944612/', 'summary': "Le Roi Mohammed VI ordonne l'envoi de 180 tonnes d'aide humanitaire et médicale à Gaza. Le Roi Mohammed VI, président du Comité Al-Qods, a donné ses instructions pour l’envoi d’une aide humanitaire et médicale d’urgence en faveur du peuple palestinien, “un peuple frère”, en particulier les populations de la bande de Gaza, indique, mercredi, un communiqué du ministère des Affaires étrangères, de la Coopération africaine et des Marocains résidant à.", 'size': 5}, {'id': '64', 'title': 'SM le Roi ordonne l’envoi d’une aide humanitaire et médicale d’urgence en faveur du peuple palestinien', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/sm-le-roi-ordonne-lenvoi-dune-aide-humanitaire-et-medicale-durgence-en-faveur-du-peuple-palestinien-307755/', 'summary': 'SM le Roi ordonne l’envoi d’une aide humanitaire et médicale d’urgence en faveur du peuple palestinien. Sa Majesté le Roi Mohammed VI, que Dieu L’assiste, Président du Comité Al-Qods, a donné Ses Très Hautes Instructions pour l’envoi d’une aide humanitaire et médicale d’urgence en faveur du peuple palestinien frère, en particulier les populations de la bande de Gaza, indique, mercredi, un communiqué du ministère des Affaires', 'size': 5}, {'id': '146', 'title': 'Le Roi Mohammed VI donne ses instructions pour l’envoi d’une aide humanitaire et médicale d’urgence en faveur du peuple palestinien', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/le-roi-mohammed-vi-donne-ses-instructions-pour-lenvoi-dune-aide-humanitaire-et-medicale-durgence-en-faveur-du-peuple-palestinien.html', 'summary': 'Le Roi Mohammed VI donne ses instructions pour l’envoi d’une aide humanitaire et médicale d’urgence en faveur du peuple palestinien. Le Roi Mohammed VI, Président du Comité Al-Qods, a donné ses très hautes instructions pour l’envoi d’une aide humanitaire et médicale d’urgence en faveur du peuple palestinien, en particulier les populations de la bande de Gaza, indique, mercredi, un communiqué du ministère des Affaires étrangères, de la Coopération africaine et des Marocains résidant à l’étranger. . L’article est apparu en premier sur .', 'size': 5}, {'id': '152', 'title': 'SM le Roi ordonne l’envoi d’aides humanitaires et médicales d’urgence au peuple palestinien', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/sm-le-roi-ordonne-lenvoi-daides-humanitaires-et-medicales-durgence-au-peuple-palestinien/', 'summary': 'SM le Roi ordonne l’envoi d’aides humanitaires et médicales d’urgence au peuple palestinien. Sa Majesté le Roi Mohammed VI, que Dieu L’assiste, Président du Comité Al-Qods, a donné Ses Très Hautes Instructions pour l’envoi d’une aide humanitaire et médicale d’urgence en faveur du peuple palestinien frère, en particulier les populations de la bande de Gaza, indique, mercredi, un communiqué du ministère des Affaires étrangères, de la Coopération africaine ', 'size': 5}], 'main_title': "SM le Roi donne ses instructions pour l'envoi d'une aide humanitaire et médicale d'urgence à Gaza"}, {'community_id': '6', 'articles': [{'id': '35', 'title': '\u200bFête du Trône : SAR le Prince Moulay Rachid préside à Tétouan un déjeuner offert par le Chef du gouvernement', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/\u200bFete-du-Trone-SAR-le-Prince-Moulay-Rachid-preside-a-Tetouan-un-dejeuner-offert-par-le-Chef-du-gouvernement_a70426.html', 'summary': '\u200bFête du Trône : SAR le Prince Moulay Rachid préside à Tétouan un déjeuner offert par le Chef du gouvernement. Son Altesse Royale le Prince Moulay Rachid a présidé, mercredi à Tétouan, un déjeuner offert par le Chef du gouvernement, à l’occasion du 26e anniversaire de l’accession de Sa Majesté le Roi Mohammed VI, que Dieu L’assiste, au Trône de Ses glorieux Ancêtres.', 'size': 5}, {'id': '169', 'title': 'Fête du Trône : Nos voeux', 'source': 'lnt.ma', 'link': 'https://lnt.ma/fete-du-trone-nos-voeux-6/', 'summary': 'Fête du Trône : Nos voeux. Le Maroc et son peuple célèbrent le 26ème anniversaire de l’intronisation de SM le Roi Mohammed VI. En cette grande occasion, La Nouvelle Tribune et le portail lnt.ma ont l’insigne honneur de présenter leurs vœux déférents à Sa Majesté le Roi Mohammed VI, Amir Al Mouminine. Nos vœux vont également à SAR le Prince héritier . ', 'size': 3}, {'id': '211', 'title': 'Fête du Trône: Sa Majesté le Roi préside à Tétouan la cérémonie de prestation de serment des Officiers lauréats des grandes écoles militaires et paramilitaires', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/fete-du-trone-sa-majeste-le-roi-preside-a-tetouan-la-ceremonie-de-prestation-de-serment-des-officiers-laureats-des-grandes-ecoles-militaires-et-paramilitaires-307826/', 'summary': 'Fête du Trône: Sa Majesté le Roi préside à Tétouan la cérémonie de prestation de serment des Officiers lauréats des grandes écoles militaires et paramilitaires. Sa Majesté le Roi Mohammed VI, Chef Suprême et Chef d’Etat-Major Général des Forces Armées Royales (FAR), que Dieu L’assiste, accompagné de SAR le Prince Héritier Moulay El Hassan et de SAR le Prince Moulay Rachid, a présidé, jeudi après-midi à la Place du Mechouar du Palais Royal de Tétouan,', 'size': 4}, {'id': '245', 'title': 'Fête du Trône : S.M. le Roi préside à Tétouan la cérémonie d’allégeance', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/fete-du-trone-s-m-le-roi-preside-a-tetouan-la-ceremonie-dallegeance/', 'summary': 'Fête du Trône : S.M. le Roi préside à Tétouan la cérémonie d’allégeance. Sa Majesté le Roi Mohammed VI, Amir Al-Mouminine, que Dieu L’assiste, accompagné de SAR le Prince Héritier Moulay El Hassan, de SAR le Prince Moulay Rachid et de SA le Prince Moulay Ahmed, a présidé, jeudi après-midi à la Place du Mechouar du Palais Royal de Tétouan, la cérémonie d’allégeance, en commémoration du 26e anniversaire .', 'size': 5}, {'id': '293', 'title': 'Fête du Trône | SM le Roi préside à Tétouan la prestation de serment des Officiers', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/fete-du-trone-sm-le-roi-preside-a-tetouan-la-prestation-de-serment-des-officiers/', 'summary': 'Fête du Trône | SM le Roi préside à Tétouan la prestation de serment des Officiers. Sa Majesté le Roi Mohammed VI, Chef Suprême et Chef d’Etat-Major Général des Forces Armées Royales (FAR), que Dieu L’assiste, accompagné de SAR le Prince Héritier Moulay El Hassan et de SAR le Prince Moulay Rachid, a présidé, jeudi après-midi à la Place du Mechouar du Palais Royal de Tétouan, à l’occasion de la célébration ', 'size': 4}], 'main_title': '\u200bFête du Trône : SAR le Prince Moulay Rachid préside à Tétouan un déjeuner offert par le Chef du gouvernement'}, {'community_id': '4', 'articles': [{'id': '43', 'title': '\u200bRussie : Un gigantesque séisme provoque des alertes au tsunami dans tout le Pacifique', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/\u200bRussie-Un-gigantesque-seisme-provoque-des-alertes-au-tsunami-dans-tout-le-Pacifique_a70417.html', 'summary': "\u200bRussie : Un gigantesque séisme provoque des alertes au tsunami dans tout le Pacifique. Un séisme de magnitude 8,8, le plus puissant dans la région en près de 73 ans, a frappé, mardi, au large de la péninsule russe du Kamtchatka, provoquant des alertes de tsunamis dans tout le Pacifique et des évacuations de Hawaï jusqu'au Japon.", 'size': 2}, {'id': '59', 'title': "Tsunami dans le Pacifique : des vagues jusqu'à 4 mètres de hauteur attendues en Polynésie", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/07/30/tsunami-dans-le-pacifique-des-vagues-jusqua-4-metres-de-hauteur-attendues-en-polynesie_1944475/', 'summary': "Tsunami dans le Pacifique : des vagues jusqu'à 4 mètres de hauteur attendues en Polynésie. Un séisme de magnitude 8,8 au large du Kamtchatka a déclenché des alertes tsunami dans tout le Pacifique. Plusieurs vagues ont frappé la Russie et le Japon, causant des inondations et des évacuations massives sans faire de victimes à ce stade. Des vagues pouvant atteindre 4 mètres sont attendues en Polynésie française. Un séisme de.", 'size': 2}], 'main_title': '\u200bRussie : Un gigantesque séisme provoque des alertes au tsunami dans tout le Pacifique'}, {'community_id': '11', 'articles': [{'id': '61', 'title': 'Partenariat OCP-Ambipar : 100 000 hectares de pâturages dégradés à restaurer au Brésil', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/07/30/partenariat-ocp-ambipar-100-000-hectares-de-paturages-degrades-a-restaurer-au-bresil_1944465/', 'summary': 'Partenariat OCP-Ambipar : 100 000 hectares de pâturages dégradés à restaurer au Brésil. Le groupe OCP a annoncé, mardi, s’être associé à travers OCP Brasil à Ambipar, acteur de référence en matière de gestion environnementale, à la Liga do Araguaia et à l’Institut Agroenvironnemental de la Vallée de l’Araguaia (IAVA), deux organisations locales engagées pour le développement rural durable, afin de lancer le projet ALM Carbono Verde do.', 'size': 5}, {'id': '67', 'title': 'OCP signe un partenariat inédit pour restaurer 100 000 hectares de pâturages au Brésil', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/ocp-signe-un-partenariat-inedit-pour-restaurer-100-000-hectares-de-paturages-au-bresil-307741/', 'summary': 'OCP signe un partenariat inédit pour restaurer 100 000 hectares de pâturages au Brésil. Le groupe OCP, en collaboration avec Ambipar, la Liga do Araguaia et l’Institut Agroenvironnemental de la Vallée de l’Araguaia (IAVA), a annoncé le lancement du projet ALM Carbono Verde do Araguaia, une initiative de grande ampleur visant à restaurer jusqu’à 100 000 hectares de pâturages dégradés dans le Cerrado brésilien.', 'size': 5}, {'id': '113', 'title': 'OCP et ses partenaires lancent un projet de restauration de 100 000 hectares dans la vallée de l’Araguaia', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/ocp-et-ses-partenaires-lancent-un-projet-de-restauration-de-100-000/', 'summary': 'OCP et ses partenaires lancent un projet de restauration de 100 000 hectares dans la vallée de l’Araguaia. Le Groupe OCP, leader mondial des solutions de nutrition des plantes et des engrais phosphatés, à travers OCP Brasil, filiale d’OCP Nutricrops, s’associe à Ambipar, acteur de référence en matière de gestion environnementale, à la Liga do Araguaia et à l’Institut Agroenvironnemental de la Vallée de l’Araguaia (IAVA), deux organisations locales engagées pour le développement .', 'size': 5}, {'id': '164', 'title': 'Projet ALM Carbono Verde do Araguaia : L’OCP se mobilise pour restaurer les pâturages dégradés au Brésil', 'source': 'lnt.ma', 'link': 'https://lnt.ma/projet-alm-carbono-verde-do-araguaia-locp-se-mobilise-pour-restaurer-les-paturages-degrades-au-bresil/', 'summary': 'Projet ALM Carbono Verde do Araguaia : L’OCP se mobilise pour restaurer les pâturages dégradés au Brésil. Le Groupe OCP, via sa filiale OCP Brasil, s’est associé à la société de solutions environnementales Ambipar, à la Liga do Araguaia et à l’Institut agroenvironnemental de la vallée de l’Araguaia (IAVA) pour lancer un projet visant à restaurer jusqu’à 100 000 hectares de pâturages dégradés dans la région de l’Araguaia, située dans le biome . ', 'size': 5}, {'id': '276', 'title': 'Le Groupe OCP, Ambipar, Liga do Araguaia et IAVA s’associent', 'source': 'leseco.ma', 'link': 'https://leseco.ma/business/le-groupe-ocp-ambipar-liga-do-araguaia-et-iava-sassocient.html', 'summary': 'Le Groupe OCP, Ambipar, Liga do Araguaia et IAVA s’associent. Le Groupe OCP, leader mondial des solutions de nutrition des plantes et des engrais phosphatés, via sa filiale OCP Brasil (OCP Nutricrops), s’associe à Ambipar, à Liga do Araguaia et à l’Institut Agro-environnemental de la Vallée de l’Araguaia (IAVA) pour lancer le projet ALM Carbono Verde do Araguaia, une initiative majeure en faveur de l’agriculture durable et de la décarbonation au Brésil. ', 'size': 5}], 'main_title': 'Partenariat OCP-Ambipar : 100 000 hectares de pâturages dégradés à restaurer au Brésil'}, {'community_id': '8', 'articles': [{'id': '73', 'title': 'Duke Buchan III : Le roi Mohammed VI, un «leader respecté et un ami des États-Unis»', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/173159/duke-buchan-mohammed-leader-respecte.html', 'summary': 'Duke Buchan III : Le roi Mohammed VI, un «leader respecté et un ami des États-Unis». Le roi Mohammed VI est un «leader respecté et un ami des États-Unis», a affirmé le nouvel ambassadeur américain désigné au Maroc, Duke Buchan III.', 'size': 2}, {'id': '145', 'title': 'Duke Buchan III : SM le Roi Mohammed VI, un «\xa0leader respecté et un ami des États-Unis\xa0»', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/sm-le-roi-mohammed-vi-un-leader-respecte-et-un-ami-des-etats-unis-nouvel-ambassadeur-us-au-maroc.html', 'summary': 'Duke Buchan III : SM le Roi Mohammed VI, un « leader respecté et un ami des États-Unis ». Sa Majesté le Roi Mohammed VI est un "leader respecté et un ami des États-Unis", a affirmé le nouvel ambassadeur américain désigné au Maroc, Duke Buchan III. L’article est apparu en premier sur .', 'size': 2}], 'main_title': 'Duke Buchan III : Le roi Mohammed VI, un «leader respecté et un ami des États-Unis»'}, {'community_id': '12', 'articles': [{'id': '91', 'title': 'La BMCI s’associe à L’ISCAE pour renforcer les compétences des collaborateurs à travers le programme « Passerelles »', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/comese/la-bmci-sassocie-a-liscae-pour-renforcer-les-competences-des-collaborateurs-a-travers-le-programme-passerelles/', 'summary': "La BMCI s’associe à L’ISCAE pour renforcer les compétences des collaborateurs à travers le programme « Passerelles ». Le 29 juillet, La BMCI et le Groupe ISCAE ont signé une convention de partenariat pour le lancement du programme «Passerelles», un dispositif innovant d'upskilling et de reskilling destiné aux collaborateurs de la BMCI souhaitant évoluer vers d'autres métiers.", 'size': 3}, {'id': '162', 'title': 'BMCI et ISCAE lancent un programme de formation certifiante pour les collaborateurs de la banque', 'source': 'lnt.ma', 'link': 'https://lnt.ma/bmci-et-iscae-lancent-un-programme-de-formation-certifiante-pour-les-collaborateurs-de-la-banque/', 'summary': 'BMCI et ISCAE lancent un programme de formation certifiante pour les collaborateurs de la banque. La BMCI et le Groupe ISCAE ont officialisé, le 29 juillet 2025 à Casablanca, la signature d’une convention de partenariat pour le lancement du programme « Passerelles », un dispositif de formation destiné aux collaborateurs de la banque souhaitant se reconvertir ou évoluer vers de nouvelles fonctions. Ce programme de certification s’étendra sur une durée de six . ', 'size': 3}, {'id': '193', 'title': 'La BMCI s’allie à l’ISCAE pour renforcer les compétences de ses collaborateurs', 'source': 'lematin.ma', 'link': 'https://lematin.ma/economie/la-bmci-et-liscae-lancent-un-programme-de-formation-en-interne/294187', 'summary': 'La BMCI s’allie à l’ISCAE pour renforcer les compétences de ses collaborateurs. La BMCI et le Groupe ISCAE ont signé une convention de partenariat pour la mise en place du programme « Passerelles ». Ce dispositif vise à accompagner des collaborateurs de la BMC.', 'size': 3}], 'main_title': 'La BMCI s’associe à L’ISCAE pour renforcer les compétences des collaborateurs à travers le programme « Passerelles »'}, {'community_id': '15', 'articles': [{'id': '97', 'title': 'Akhannouch : Le gouvernement mobilisé derrière SM le Roi pour la mise en œuvre des stratégies dédiées au développement territorial', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/pouvoirs/akhannouch-le-gouvernement-mobilise-derriere-sm-le-roi-pour-la-mise-en-oeuvre-des-strategies-dediees-au-developpement-territorial/', 'summary': 'Akhannouch : Le gouvernement mobilisé derrière SM le Roi pour la mise en œuvre des stratégies dédiées au développement territorial. Aziz Akhannouch a réaffirmé, mercredi à Mdi’q, l’engagement du gouvernement aux côtés de SM le Roi Mohammed VI pour accélérer les stratégies de développement territorial, saluant les avancées réalisées sous le règne du Souverain.', 'size': 2}, {'id': '298', 'title': 'Fête du Trône | Le gouvernement mobilisé derrière SM le Roi pour le développement territorial (Akhannouch)', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/fete-du-trone-le-gouvernement-mobilise-derriere-sm-le-roi-pour-le-developpement-territorial-akhannouch/', 'summary': 'Fête du Trône | Le gouvernement mobilisé derrière SM le Roi pour le développement territorial (Akhannouch). Le Chef du gouvernement, Aziz Akhannouch, a souligné, mercredi à Mdi’q, que l’Exécutif est mobilisé derrière SM le Roi Mohammed VI, que Dieu L’assiste, pour la mise en oeuvre des stratégies visant à ouvrir de nouvelles perspectives pour le développement territorial. Dans une déclaration à la presse à l’issue de la réception présidée par SM ', 'size': 2}], 'main_title': 'Akhannouch : Le gouvernement mobilisé derrière SM le Roi pour la mise en œuvre des stratégies dédiées au développement territorial'}, {'community_id': '10', 'articles': [{'id': '102', 'title': 'Laâyoune : 130 MDH pour renforcer les infrastructures urbaines et sportives', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/au-royaume/laayoune-130-mdh-pour-renforcer-les-infrastructures-urbaines-et-sportives/', 'summary': "Laâyoune : 130 MDH pour renforcer les infrastructures urbaines et sportives. Une série de projets visant à renforcer les infrastructures urbaines et sportives ont été lancés, le 29 juillet à Laâyoune, pour un investissement global de 130 millions de dirhams (MDH), à l'occasion de la célébration du 26e anniversaire de la Fête du Trône.", 'size': 2}, {'id': '154', 'title': 'Laâyoune | Lancement de projets d’infrastructures urbaines et sportives pour un investissement de 130 MDH', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/laayoune-lancement-de-projets-dinfrastructures-urbaines-et-sportives-pour-un-investissement-de-130-mdh/', 'summary': 'Laâyoune | Lancement de projets d’infrastructures urbaines et sportives pour un investissement de 130 MDH. Une série de projets visant à renforcer les infrastructures urbaines et sportives ont été lancés, mardi à Laâyoune, pour un investissement global de 130 millions de dirhams (MDH), à l’occasion de la célébration du 26e anniversaire de la Fête du Trône. Ainsi, le wali de la région Laâyoune-Sakia El Hamra, gouverneur de la province de ', 'size': 2}], 'main_title': 'Laâyoune : 130 MDH pour renforcer les infrastructures urbaines et sportives'}, {'community_id': '0', 'articles': [{'id': '106', 'title': 'Hausse de l’encours du crédit bancaire de 4,4% en 2024', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/hausse-de-lencours-du-credit-bancaire-de-44-en-2024/', 'summary': 'Hausse de l’encours du crédit bancaire de 4,4% en 2024. L’encours du crédit bancaire a atteint 1.164,6 milliards de dirhams (MMDH), enregistrant une hausse de 4,4% en 2024 et représentant l’équivalent de 72,9% du Produit intérieur brut (PIB), selon Bank Al-Maghrib (BAM). Cet encours affiche un rythme en décélération par rapport à l’année précédente, mais plus rapide comparativement à la moyenne des cinq années précédant .', 'size': 4}, {'id': '208', 'title': 'Monnaie : Décélération sensible de la circulation fiduciaire en 2024', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/monnaie-deceleration-sensible-de-la-circulation-fiduciaire-en-2024-307914/', 'summary': 'Monnaie : Décélération sensible de la circulation fiduciaire en 2024. La monnaie fiduciaire a connu une décélération sensible en 2024, son encours s’établissant à 414,4 milliards de dirhams (MMDH), soit 25,9% du Produit intérieur brut (PIB), selon Bank Al-Maghrib (BAM). Après une forte expansion entre 2020 et 2023 à un rythme annuel moyen de 12%, la progression de la monnaie', 'size': 4}, {'id': '234', 'title': 'Utilisation du cash :  Après une forte expansion entre 2020 et 2023, la circulation fiduciaire décélère en 2024', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/argent/utilisation-du-cash-apres-une-forte-expansion-entre-2020-et-2023-la-circulation-fiduciaire-decelere-en-2024/', 'summary': 'Utilisation du cash : Après une forte expansion entre 2020 et 2023, la circulation fiduciaire décélère en 2024. La monnaie fiduciaire a connu une décélération sensible en 2024, son encours s’établissant à 414,4 milliards de dirhams (MMDH), soit 25,9% du Produit intérieur brut (PIB), selon Bank Al-Maghrib (BAM).', 'size': 4}, {'id': '284', 'title': 'Maroc/Monnaie : Décélération sensible de la circulation fiduciaire à 414,4 MMDH en 2024 (BAM)', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/maroc-monnaie-deceleration-sensible-de-la-circulation-fiduciaire-a-4144-mmdh-en-2024-bam.html', 'summary': 'Maroc/Monnaie : Décélération sensible de la circulation fiduciaire à 414,4 MMDH en 2024 (BAM). La monnaie fiduciaire a connu une décélération sensible en 2024, son encours s’établissant à 414,4 milliards de dirhams (MMDH), soit 25,9% du Produit intérieur brut (PIB), selon Bank Al-Maghrib (BAM). Après une forte expansion entre 2020 et 2023 à un rythme annuel moyen de 12%, la progression de la monnaie fiduciaire est revenue à 5,2% . L’article est apparu en premier sur .', 'size': 4}], 'main_title': 'Hausse de l’encours du crédit bancaire de 4,4% en 2024'}, {'community_id': '7', 'articles': [{'id': '142', 'title': 'Le Maroc, un modèle rare de coexistence et de rayonnement culturel (Jack Lang)', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/le-maroc-un-modele-rare-de-coexistence-et-de-rayonnement-culturel-jack-lang.html', 'summary': 'Le Maroc, un modèle rare de coexistence et de rayonnement culturel (Jack Lang). Le Maroc est un modèle rare de coexistence pacifique, de rayonnement culturel et de modération religieuse, a souligné, à Marrakech, Jack Lang, ancien ministre français de la Culture et président de l’Institut du monde arabe (IMA). L’article est apparu en premier sur .', 'size': 2}, {'id': '170', 'title': 'Jack Lang : le Maroc, un modèle rare de coexistence et de rayonnement culturel', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/435905-jack-lang-le-maroc-un-modele-rare-de-coexistence-et-de-rayonnement-culturel.html', 'summary': 'Jack Lang : le Maroc, un modèle rare de coexistence et de rayonnement culturel. Le président de l’Institut du monde arabe (IMA), Jack Lang, a affirmé que le Maroc constitue un modèle rare de coexistence pacifique, de rayonnement culturel et de modération religieuse. Dans une déclaration à l’occasion de la Fête du Trône, Lang, également ancien ministre français de la Culture, a mis en avant les profondes mutations engagées . ', 'size': 2}], 'main_title': 'Le Maroc, un modèle rare de coexistence et de rayonnement culturel (Jack Lang)'}, {'community_id': '13', 'articles': [{'id': '174', 'title': 'Glovo sous surveillance après un accord transactionnel avec le Conseil de la Concurrence', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/435947-glovo-sous-surveillance-apres-un-accord-transactionnel-avec-le-conseil-de-la-concurrence.html', 'summary': 'Glovo sous surveillance après un accord transactionnel avec le Conseil de la Concurrence. Le Conseil de la concurrence a annoncé ce jeudi 31 juillet, l’approbation de l’accord de transaction conclu avec la société GlovoApp Morocco SARL, en vertu de l’article 37 de la loi n° 104-12 relative à la liberté des prix et de la concurrence, telle que modifiée et complétée. Dans un communiqué officiel, l’instance présidée par . ', 'size': 4}, {'id': '197', 'title': 'Le Conseil de la concurrence tord le bras à Glovo', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/07/31/le-conseil-de-la-concurrence-tord-le-bras-a-glovo_1944723/', 'summary': 'Le Conseil de la concurrence tord le bras à Glovo. Le Conseil de la concurrence marocain a conclu un accord de transaction avec Glovo Morocco, mettant fin aux poursuites pour abus de position dominante sur le marché de la livraison de repas. L’accord impose à la plateforme de supprimer ses clauses d’exclusivité, de plafonner ses commissions à 30% et de renforcer la transparence de son.', 'size': 2}, {'id': '224', 'title': 'Le Conseil de la Concurrence met fin à la procédure contentieuse engagée à l’encontre de Glovo', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/actualite/le-conseil-de-la-concurrence-met-fin-a-la-procedure-contentieuse-engagee-a-lencontre-de-glovo', 'summary': 'Le Conseil de la Concurrence met fin à la procédure contentieuse engagée à l’encontre de Glovo. Le Conseil de la concurrence a approuvé à l’unanimité l’accord de transaction conclu avec la société « GlovoApp Morocco SARL » mettant ainsi fin à la procédure contentieuse engagée contre cette plateforme de livraison de repas. Cet accord intervient en application des dispositions de l’article 37 de la loi n° 104-12 relative à la liberté des prix .', 'size': 5}, {'id': '235', 'title': 'Conseil de la Concurrence : Fin de la procédure contentieuse engagée à l’encontre de GlovoApp Morocco SARL', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/affaires/conseil-de-la-concurrence-fin-de-la-procedure-contentieuse-engagee-a-lencontre-de-glovoapp-morocco-sarl/', 'summary': 'Conseil de la Concurrence : Fin de la procédure contentieuse engagée à l’encontre de GlovoApp Morocco SARL. Le Conseil de la concurrence a approuvé à l\'unanimité l\'accord de transaction conclu avec la société "GlovoApp Morocco SARL" mettant ainsi fin à la procédure contentieuse engagée contre cette plateforme de livraison de repas.', 'size': 4}, {'id': '247', 'title': 'Le Conseil de la Concurrence clôt la procédure contre GlovoApp Morocco', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/le-conseil-de-la-concurrence-clot-la-procedure-contre-glovoapp-morocco/', 'summary': 'Le Conseil de la Concurrence clôt la procédure contre GlovoApp Morocco. Clap de fin pour la procédure engagée contre Glovo : le Conseil de la concurrence a approuvé à l’unanimité l’accord de transaction conclu avec la société. Cet accord intervient en application des dispositions de l’article 37 de la loi n° 104-12 relative à la liberté des prix et de la concurrence, telle que modifiée et .', 'size': 4}], 'main_title': 'Le Conseil de la Concurrence met fin à la procédure contentieuse engagée à l’encontre de Glovo'}, {'community_id': '16', 'articles': [{'id': '195', 'title': "Maroc-Sénégal : Ce que l'on sait du partenariat économique Rabat-Dakar", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/07/31/maroc-senegal-ce-que-lon-sait-du-partenariat-economique-rabat-dakar_1944727/', 'summary': "Maroc-Sénégal : Ce que l'on sait du partenariat économique Rabat-Dakar. À l’occasion d’un entretien accordé au quotidien gouvernemental sénégalais Le Soleil, le ministre marocain de l’Industrie et du Commerce, Ryad Mezzour, a détaillé les axes structurants de la coopération économique entre le Maroc et le Sénégal. Il a insisté sur l’importance d’un partenariat Sud-Sud fondé sur la solidarité, la confiance et une prospérité partagée. Ce.", 'size': 2}, {'id': '283', 'title': 'Ryad Mezzour dévoile les leviers de la coopération économique entre le Maroc et le Sénégal', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/ryad-mezzour-devoile-les-leviers-de-la-cooperation-economique-entre-le-maroc-et-le-senegal.html', 'summary': 'Ryad Mezzour dévoile les leviers de la coopération économique entre le Maroc et le Sénégal. Le ministre de l’Industrie et du Commerce, Ryad Mezzour, a dévoilé les fondements stratégiques de la coopération économique avec le Sénégal, soulignant l’engagement du Royaume en faveur d’un partenariat structuré et mutuellement bénéfique dans le cadre de l’intégration continentale. Dans un entretien au journal gouvernemental sénégalais « Le Soleil », le ministre marocain met en lumière la . L’article est apparu en premier sur .', 'size': 2}], 'main_title': "Maroc-Sénégal : Ce que l'on sait du partenariat économique Rabat-Dakar"}, {'community_id': '3', 'articles': [{'id': '209', 'title': 'OPCVM : 1.233,2 MMDH de souscriptions en 2024', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/opcvm-1-2332-mmdh-de-souscriptions-en-2024-307905/', 'summary': 'OPCVM : 1.233,2 MMDH de souscriptions en 2024. Les souscriptions aux titres des Organismes de placement collectif en valeurs mobilières (OPCVM) ont atteint 1.233,2 milliards de dirhams (MMDH) en 2024, en hausse de 4,6% comparativement à 2023, ressort-il du récent rapport annuel de Bank Al-Maghrib (BAM) sur la situation économique, monétaire et financière. « L’activité de la gestion collective', 'size': 2}, {'id': '285', 'title': 'Maroc/OPCVM : 1.233,2 MMDH de souscriptions en 2024 (rapport)', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/maroc-opcvm-1-2332-mmdh-de-souscriptions-en-2024-rapport.html', 'summary': 'Maroc/OPCVM : 1.233,2 MMDH de souscriptions en 2024 (rapport). Les souscriptions aux titres des Organismes de placement collectif en valeurs mobilières (OPCVM) ont atteint 1.233,2 milliards de dirhams (MMDH) en 2024, en hausse de 4,6% comparativement à 2023, ressort-il du récent rapport annuel de Bank Al-Maghrib (BAM) sur la situation économique, monétaire et financière. « L’activité de la gestion collective de l’épargne a été marquée . L’article est apparu en premier sur .', 'size': 2}], 'main_title': 'OPCVM : 1.233,2 MMDH de souscriptions en 2024'}, {'community_id': '2', 'articles': [{'id': '244', 'title': 'Washington et 13 capitales occidentales dénoncent les «\xa0menaces croissantes\xa0» de l’Iran', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/washington-et-13-capitales-occidentales-denoncent-les-menaces/', 'summary': 'Washington et 13 capitales occidentales dénoncent les « menaces croissantes » de l’Iran. Les Etats-Unis, ainsi que 13 pays occidentaux ont condamné, jeudi, la “menace croissante” des services de renseignement iraniens dans leurs territoires respectifs. “Les États-Unis, le Royaume-Uni, l’Albanie, l’Autriche, la Belgique, le Canada, la Tchéquie, le Danemark, la Finlande, la France, l’Allemagne, les Pays-Bas, l’Espagne et la Suède condamnent le nombre croissant de menaces d’État de .', 'size': 2}, {'id': '280', 'title': 'Washington et 13 capitales occidentales condamnent les «\xa0menaces croissantes\xa0» de l’Iran', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/washington-et-13-capitales-occidentales-condamnent-les-menaces-croissantes-de-liran.html', 'summary': 'Washington et 13 capitales occidentales condamnent les « menaces croissantes » de l’Iran. Les Etats-Unis ainsi que 13 pays occidentaux ont condamné jeudi la “menace croissante” des services de renseignement iraniens dans leurs territoires respectifs. “Les États-Unis, le Royaume-Uni, l’Albanie, l’Autriche, la Belgique, le Canada, la Tchéquie, le Danemark, la Finlande, la France, l’Allemagne, les Pays-Bas, l’Espagne et la Suède condamnent le nombre croissant de menaces d’État de . L’article est apparu en premier sur .', 'size': 2}], 'main_title': 'Washington et 13 capitales occidentales dénoncent les «\xa0menaces croissantes\xa0» de l’Iran'}, {'community_id': '5', 'articles': [{'id': '246', 'title': 'Le ministre espagnol de l’Intérieur salue une coopération «\xa0exemplaire\xa0» avec le Maroc', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/le-ministre-espagnol-de-linterieur-salue-une-cooperation/', 'summary': 'Le ministre espagnol de l’Intérieur salue une coopération « exemplaire » avec le Maroc. Le ministre espagnol de l’Intérieur, Fernando Grande-Marlaska, a salué la coopération avec le Maroc, la qualifiant d’ »exemplaire » et fondée sur des valeurs communes de fraternité, de loyauté et de confiance mutuelle. « Les relations entre l’Espagne et le Maroc sont absolument essentielles pour nos deux pays et nos sociétés respectives. De par leur caractère exceptionnel et .', 'size': 2}, {'id': '288', 'title': 'Le ministre espagnol de l’Intérieur se félicite de la coopération «\xa0exemplaire\xa0» avec le Maroc', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/le-ministre-espagnol-de-linterieur-se-felicite-de-la-cooperation-exemplaire-avec-le-maroc.html', 'summary': 'Le ministre espagnol de l’Intérieur se félicite de la coopération « exemplaire » avec le Maroc. Le ministre espagnol de l’Intérieur, Fernando Grande-Marlaska, a qualifié d’ »exemplaire » la coopération avec le Maroc dans les différents domaines, soulignant que celle-ci repose sur des valeurs partagées de « fraternité, de loyauté et de confiance mutuelle ». « Les relations entre l’Espagne et le Maroc sont absolument essentielles pour nos deux pays et nos sociétés respectives. De par . L’article est apparu en premier sur .', 'size': 2}], 'main_title': 'Le ministre espagnol de l’Intérieur salue une coopération «\xa0exemplaire\xa0» avec le Maroc'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
                        
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ? d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        // Fonction pour cacher le tooltip
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = '';
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
    
    
</body>




</html>
    