<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); 
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title"> Les principales actualités des dernières 24 heures

</div>    
        <div class="header-subtitle"> Dernière mise à jour : 27/07/2025 - 12h26</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"></div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '0', 'title': "Le temps qu'il fera ce dimanche 27 juillet 2025", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/435152-le-temps-quil-fera-ce-dimanche-27-juillet-2025.html', 'summary': "Le temps qu'il fera ce dimanche 27 juillet 2025. Voici les prévisions météorologiques établies par la Direction générale de la météorologie pour le dimanche 27 juillet 2025: – Temps chaud sur le Sud et le Sud-Est et assez chaud sur les plaines à l’Ouest de l’Atlas. – Nuages bas nombreux sur les côtes Nord et Centre avec formations brumeuses ou bruines locales. – Ciel . ", 'size': 2}, {'id': '54', 'title': 'Les prévisions du samedi 26 juillet', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/les-previsions-du-samedi-26-juillet-307436/', 'summary': 'Les prévisions du samedi 26 juillet. Voici les prévisions météorologiques établies par la Direction générale de la météorologie pour le samedi 26 juillet 2025. -Temps assez chaud à localement chaud sur les plaines intérieures, le Sud-Est, le Sud de l’Oriental et sur les provinces Sud. -Nuages cumuliformes et faiblement instables sur le Nord du Haut Atlas,', 'size': 2}], 'main_title': "Le temps qu'il fera ce dimanche 27 juillet 2025"}, {'community_id': '3', 'articles': [{'id': '5', 'title': "CAN féminine: Le Roi Mohammed VI félicite les Lionnes de l'Atlas pour leur parcours", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/435206-can-feminine-le-roi-mohammed-vi-felicite-les-lionnes-de-latlas-pour-leur-parcours.html', 'summary': "CAN féminine: Le Roi Mohammed VI félicite les Lionnes de l'Atlas pour leur parcours. Le Roi Mohammed VI a adressé, samedi soir, un message de félicitations aux membres de la sélection nationale féminine de football pour leur brillant parcours à la Coupe d’Afrique des Nations féminine de Football 2024. Dans ce message, le souverain affirme avoir suivi avec une grande fierté le brillant parcours de l’équipe nationale à la . ", 'size': 5}, {'id': '10', 'title': 'S.M. le Roi félicite les membres de la sélection nationale de football pour leur brillant parcours à la CAN féminine', 'source': 'lematin.ma', 'link': 'https://lematin.ma/activites-royales/sm-le-roi-felicite-les-membres-de-la-selection-nationale-feminine/293402', 'summary': "S.M. le Roi félicite les membres de la sélection nationale de football pour leur brillant parcours à la CAN féminine. Dans ce message, le Souverain affirme avoir suivi avec une grande fierté le brillant parcours de l’équipe nationale à la Coupe d'Afrique des Nations féminine 2024, couronné par.", 'size': 5}, {'id': '26', 'title': 'SM le Roi félicite les membres de la sélection nationale de football pour leur brillant parcours à la CAN féminine 2024', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/SM-le-Roi-felicite-les-membres-de-la-selection-nationale-de-football-pour-leur-brillant-parcours-a-la-CAN-feminine-2024_a70313.html', 'summary': 'SM le Roi félicite les membres de la sélection nationale de football pour leur brillant parcours à la CAN féminine 2024. \u200bSa Majesté le Roi Mohammed VI, que Dieu L’assiste, a adressé un message de félicitations aux membres de la sélection nationale féminine de football pour leur brillant parcours à la Coupe d’Afrique des Nations féminine de football 2024.', 'size': 5}, {'id': '75', 'title': 'Le Roi Mohammed VI félicite la sélection nationale de football pour leur brillant parcours à la CAN féminine 2024', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/coupe-dafrique-des-nations-feminine-de-football-2024.html', 'summary': 'Le Roi Mohammed VI félicite la sélection nationale de football pour leur brillant parcours à la CAN féminine 2024. Le Roi Mohammed VI a adressé un message de félicitations aux membres de la sélection nationale féminine de football pour leur brillant parcours à la Coupe d’Afrique des Nations féminine de football 2024. Dans ce message, le souverain affirme avoir suivi avec une grande fierté le brillant parcours de l’équipe nationale à la Coupe d’Afrique . L’article est apparu en premier sur .', 'size': 5}, {'id': '79', 'title': 'SM le Roi félicite la sélection nationale de football pour leur brillant parcours à la CAN féminine 2024', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/sm-le-roi-felicite-la-selection-nationale-de-football-pour-leur-brillant-parcours-a-la-can-feminine-2024/', 'summary': 'SM le Roi félicite la sélection nationale de football pour leur brillant parcours à la CAN féminine 2024. Sa Majesté le Roi Mohammed VI, que Dieu L’assiste, a adressé un message de félicitations aux membres de la sélection nationale féminine de football pour leur brillant parcours à la Coupe d’Afrique des Nations féminine de football 2024. Dans ce message, le Souverain affirme avoir suivi avec une grande fierté le brillant parcours de l’équipe ', 'size': 5}], 'main_title': "CAN féminine: Le Roi Mohammed VI félicite les Lionnes de l'Atlas pour leur parcours"}, {'community_id': '2', 'articles': [{'id': '6', 'title': 'CAN féminine: Le Nigeria remporte son 10e titre face au Maroc', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/435199-can-feminine-le-nigeria-remporte-son-10e-titre-face-au-maroc.html', 'summary': 'CAN féminine: Le Nigeria remporte son 10e titre face au Maroc. L’équipe du Nigeria a remporté samedi soir sur un score de 3 contre 2, son 10e titre de championne d’Afrique, lors d’une finale inédite contre l’équipe le Maroc, au stade olympique de Rabat. Les lionnes de l’Atlas qui ont fait un parcours exemplaire lors de cette Coupe d’Afrique, ont ouvert le score très tôt dans . ', 'size': 3}, {'id': '11', 'title': 'CAN féminine : les Lionnes de l’Atlas s’inclinent en finale face au Nigeria (2-3)', 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/can-feminine-les-lionnes-de-latlas-sinclinent-en-finale-face-au-nigeria/293400', 'summary': 'CAN féminine : les Lionnes de l’Atlas s’inclinent en finale face au Nigeria (2-3). Les Lionnes de l’Atlas devront encore prendre leur mal en patience avant de décrocher leur première CAN. Opposées au Nigeria, nation la plus titrée du continent, les Marocaines ont.', 'size': 2}, {'id': '56', 'title': "Le Nigeria remporte le titre de la Coupe d'Afrique des Nations féminine face aux Lionnes de l’Atlas (3-2)", 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/172786/nigeria-remporte-titre-coupe-d-afrique.html', 'summary': "Le Nigeria remporte le titre de la Coupe d'Afrique des Nations féminine face aux Lionnes de l’Atlas (3-2). La sélection marocaine a perdu la finale de la Coupe d’Afrique des nations féminine de football (Maroc-2024), face au Nigéria par 3 buts à 2, samedi au stade olympique de Rabat.", 'size': 4}, {'id': '77', 'title': 'Désillusion pour les marocaines, qui s’inclinent en finale de la CAN 2024 contre le Nigéria', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/desillusion-pour-les-marocaines-qui-sinclinent-en-finale-de-la-can-2024-contre-le-nigeria.html', 'summary': 'Désillusion pour les marocaines, qui s’inclinent en finale de la CAN 2024 contre le Nigéria. La sélection nationale féminine du Nigeria a remporté la finale de la Coupe d’Afrique des Nations 2024 face aux Lionnes de l’Atlas au Stade olympique de Rabat. L’article est apparu en premier sur .', 'size': 3}], 'main_title': "Le Nigeria remporte le titre de la Coupe d'Afrique des Nations féminine face aux Lionnes de l’Atlas (3-2)"}, {'community_id': '1', 'articles': [{'id': '14', 'title': 'Football : Inauguration du Bureau Afrique de la FIFA au Maroc', 'source': 'lematin.ma', 'link': 'https://lematin.ma/videos/football-inauguration-du-bureau-afrique-de-la-fifa-au-maroc/293384', 'summary': "Football : Inauguration du Bureau Afrique de la FIFA au Maroc. Le bureau Afrique de la Fédération internationale de football (FIFA) a été inauguré, samedi au complexe Mohammed VI de football, lors d'une cérémonie présidée par le président.", 'size': 5}, {'id': '33', 'title': 'FIFA : Inauguration du Bureau Régional de Rabat', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/FIFA-Inauguration-du-Bureau-Regional-de-Rabat_a70305.html', 'summary': 'FIFA : Inauguration du Bureau Régional de Rabat. Ce samedi à Rabat, la FIFA a officiellement inauguré son bureau régional pour l’Afrique du Nord, un nouvel ajout à son réseau mondial d’antennes', 'size': 2}, {'id': '49', 'title': 'La FIFA inaugure son Bureau Afrique au Maroc, «un jour de fête» pour Infantino', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/la-fifa-inaugure-son-bureau-afrique-au-maroc-un-jour-de-fete-pour-infantino-307482/', 'summary': 'La FIFA inaugure son Bureau Afrique au Maroc, «un jour de fête» pour Infantino. La Fédération internationale de football (FIFA) a inauguré, samedi 26 juillet, le siège de son Bureau Afrique, sis au Complexe Mohammed VI de football à Salé, au cours d’une cérémonie présidée par Gianni Infantino, qui évoque « un moment historique et un jour de fête et de bonheur ». « Ce n’est pas', 'size': 4}, {'id': '67', 'title': 'Salé accueille le nouveau bureau Afrique de la FIFA au complexe Mohammed\u202fVI', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/sale-accueille-le-nouveau-bureau-afrique-de-la-fifa-au-complexe-mohammed-vi/', 'summary': 'Salé accueille le nouveau bureau Afrique de la FIFA au complexe Mohammed VI. Le bureau Afrique de la Fédération internationale de football (FIFA) a été inauguré, samedi au complexe Mohammed VI de football à Salé, lors d’une cérémonie présidée par le président de la FIFA, Gianni Infantino. Cette cérémonie s’est déroulée en présence du président de la Confédération africaine de football (CAF), Patrice Motsepe, du président de la .', 'size': 4}, {'id': '78', 'title': 'Maroc: inauguration du bureau Afrique de la FIFA au complexe Mohammed VI à Salé', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/275540.html', 'summary': 'Maroc: inauguration du bureau Afrique de la FIFA au complexe Mohammed VI à Salé. Le bureau Afrique de la Fédération internationale de football (FIFA) a été inauguré, samedi au complexe Mohammed VI de football à Salé, lors d’une cérémonie présidée par le président de la FIFA, Gianni Infantino. Cette cérémonie s’est déroulée en présence du président de la Confédération africaine de football (CAF), Patrice Motsepe, du président de la . L’article est apparu en premier sur .', 'size': 4}], 'main_title': 'Football : Inauguration du Bureau Afrique de la FIFA au Maroc'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
                        
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ? d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        // Fonction pour cacher le tooltip
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = '';
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
    
    
</body>




</html>
    