<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); 
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title"> Les principales actualités des dernières 24 heures

</div>    
        <div class="header-subtitle"> Dernière mise à jour : 12/09/2025 - 06h19</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"></div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '3', 'title': 'Auxerre : Le Marocain Oussama El Azzouzi absent un mois pour blessure', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/440818-auxerre-le-marocain-oussama-el-azzouzi-absent-un-mois-pour-blessure.html', 'summary': 'Auxerre : Le Marocain Oussama El Azzouzi absent un mois pour blessure. L’international marocain Oussama El Azzouzi, milieu défensif de l’AJ Auxerre, sera éloigné des terrains pendant au moins un mois à cause d’une blessure aux cervicales, a annoncé jeudi son club de Ligue 1. « Blessé aux cervicales, El Azzouzi sera indisponible jusqu’à la prochaine trêve internationale », soit au moins pendant un mois, a déploré l’entraîneur du . ', 'size': 2}, {'id': '27', 'title': 'Ligue 1 : Oussama El-Azzouzi absent un mois pour blessure', 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/ligue-1-oussama-el-azzouzi-absent-un-mois-pour-blessure/301016', 'summary': "Ligue 1 : Oussama El-Azzouzi absent un mois pour blessure. Blessé aux cervicales, Oussama El Azzouzi sera indisponible jusqu'à la prochaine trêve internationale, soit au moins pendant un mois, a déploré l'entraîneur du.", 'size': 2}], 'main_title': 'Auxerre : Le Marocain Oussama El Azzouzi absent un mois pour blessure'}, {'community_id': '20', 'articles': [{'id': '14', 'title': 'Bourita appelle à une refonte du Partenariat euro-méditerranéen pour en faire un espace de résultats concrets', 'source': 'lematin.ma', 'link': 'https://lematin.ma/nation/bourita-appelle-a-une-refonte-du-partenariat-euro-mediterraneen/301053', 'summary': 'Bourita appelle à une refonte du Partenariat euro-méditerranéen pour en faire un espace de résultats concrets. Intervenant à l’ouverture de la Retraite de haut niveau sur «L’avenir des relations euro-méditerranéennes», organisée par le ministère des Affaires étrangères, M. Bourita a dressé.', 'size': 5}, {'id': '66', 'title': 'Bourita appelle à une refonte profonde du Partenariat Euro-Méditerranéen', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Bourita-appelle-a-une-refonte-profonde-du-Partenariat-Euro-Mediterraneen_a71632.html', 'summary': 'Bourita appelle à une refonte profonde du Partenariat Euro-Méditerranéen. \u200bLe ministre des Affaires étrangères, de la Coopération africaine et des Marocains résidant à l’étranger, Nasser Bourita, a appelé, jeudi à Rabat, à une refonte profonde du Partenariat Euro-Méditerranéen, à même d’en faire un espace de résultats concrets.', 'size': 3}, {'id': '149', 'title': 'Partenariat Euro-Méditerranéen : Bourita plaide pour la refonte', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/pouvoirs/diplomatie/partenariat-euro-mediterraneen-bourita-plaide-pour-la-refonte/', 'summary': 'Partenariat Euro-Méditerranéen : Bourita plaide pour la refonte. Intervenant à l’ouverture de la Retraite de haut niveau sur "L’avenir des relations euro-méditerranéennes", organisée par le ministère des Affaires étrangères, M. Bourita a dressé un état des lieux franc de l\'Union pour la Méditerranée (UpM) du processus euro-méditerranéen, préconisant une feuille de route ambitieuse et concrète pour sa relance.', 'size': 4}, {'id': '169', 'title': 'Maroc–Union européenne : Vers un aggiornamento des relations euro-méditerranéennes', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/maroc-union-europeenne-vers-un-aggiornamento-des-relations-euro-mediterraneennes/', 'summary': 'Maroc–Union européenne : Vers un aggiornamento des relations euro-méditerranéennes. À l’ouverture de la Retraite de haut niveau sur « L’avenir des relations euro-méditerranéennes », le ministre des Affaires étrangères, M. Nasser Bourita, et la commissaire européenne chargée de la Méditerranée, Dubravka Šuica, ont exposé deux lectures convergentes sur la nécessité de refonder un partenariat souvent perçu comme inachevé. Derrière les formules de coopération et .', 'size': 4}, {'id': '207', 'title': 'Nasser Bourita appelle à une refonte profonde du Partenariat Euro-Méditerranéen pour en faire un espace de résultats concrets', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/nasser-bourita-appelle-a-une-refonte-profonde-du-partenariat-euro-mediterraneen-pour-en-faire-un-espace-de-resultats-concrets/', 'summary': 'Nasser Bourita appelle à une refonte profonde du Partenariat Euro-Méditerranéen pour en faire un espace de résultats concrets. Le ministre des Affaires étrangères, de la Coopération africaine et des Marocains résidant à l’étranger, Nasser Bourita, a appelé, jeudi à Rabat, à une refonte profonde du Partenariat Euro-Méditerranéen, à même d’en faire un espace de résultats concrets. Intervenant à l’ouverture de la Retraite de haut niveau sur “L’avenir des relations euro-méditerranéennes”, organisée par le ', 'size': 5}], 'main_title': 'Bourita appelle à une refonte du Partenariat euro-méditerranéen pour en faire un espace de résultats concrets'}, {'community_id': '6', 'articles': [{'id': '16', 'title': "Les déclarations sur l'occupation de Gaza et la déportation des Palestiniens sont dangereuses, inacceptables et doivent être traitées avec fermeté (Bourita)", 'source': 'lematin.ma', 'link': 'https://lematin.ma/nation/bourita-denonce-des-declarations-dangereuses-sur-gaza-et-les-palestiniens/301051', 'summary': "Les déclarations sur l'occupation de Gaza et la déportation des Palestiniens sont dangereuses, inacceptables et doivent être traitées avec fermeté (Bourita). Le danger (de ces déclarations) affecte les civils à Gaza et touche également la stabilité des pays voisins et celle de la région, a ajouté le ministre dans une déclara.", 'size': 3}, {'id': '140', 'title': 'Gaza\xa0: Les déclarations sur l’occupation de la bande et la déportation des Palestiniens sont dangereuses et inacceptables', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/pouvoirs/diplomatie/gaza-les-declarations-sur-loccupation-de-la-bande-et-la-deportation-des-palestiniens-sont-dangereuses-et-inacceptables/', 'summary': "Gaza : Les déclarations sur l’occupation de la bande et la déportation des Palestiniens sont dangereuses et inacceptables. Le Maroc considère les déclarations au sujet de l'occupation de la bande de Gaza et de la déportation des Palestiniens de cette enclave comme « dangereuses et inacceptables ». Elles « doivent être traitées avec la fermeté et la rigueur nécessaires », affirme Nasser Bourita", 'size': 4}, {'id': '167', 'title': 'Nasser Bourita : «\xa0Les déclarations sur l’occupation de Gaza et la déportation des Palestiniens sont dangereuses, inacceptables et doivent être traitées avec fermeté\xa0»', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/nasser-bourita-les-declarations-sur-loccupation-de-gaza-et-la-deportation-des-palestiniens-sont-dangereuses-inacceptables-et-doivent-etre-traitees-avec-fermete/', 'summary': 'Nasser Bourita : « Les déclarations sur l’occupation de Gaza et la déportation des Palestiniens sont dangereuses, inacceptables et doivent être traitées avec fermeté ». Le ministre des Affaires étrangères, de la Coopération africaine et des Marocains résidant à l’étranger, Nasser Bourita, a affirmé, jeudi à Rabat, que le Maroc considère les déclarations au sujet de l’occupation de la bande de Gaza et de la déportation des Palestiniens de cette enclave comme « dangereuses et inacceptables », soulignant qu’elles « doivent être traitées .', 'size': 3}, {'id': '244', 'title': 'Bourita : "La situation à Gaza interpelle la conscience humaine"', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Bourita-La-situation-a-Gaza-interpelle-la-conscience-humaine_a71641.html', 'summary': 'Bourita : "La situation à Gaza interpelle la conscience humaine". Le ministre des Affaires étrangères, de la Coopération africaine et des Marocains résidant à l\'étranger, Nasser Bourita, a affirmé, jeudi à Rabat, que le Maroc considère les déclarations au sujet de l\'occupation de la bande de Gaza et de la déportation des Palestiniens de cette enclave comme "dangereuses et inacceptables", soulignant qu\'elles "doivent être traitées avec la fermeté et la rigueur nécessaires".', 'size': 4}], 'main_title': 'Gaza\xa0: Les déclarations sur l’occupation de la bande et la déportation des Palestiniens sont dangereuses et inacceptables'}, {'community_id': '3', 'articles': [{'id': '20', 'title': 'Inauguration de la nouvelle gare ferroviaire de Taza', 'source': 'lematin.ma', 'link': 'https://lematin.ma/regions/inauguration-de-la-nouvelle-gare-ferroviaire-de-taza/301039', 'summary': 'Inauguration de la nouvelle gare ferroviaire de Taza. Le jeudi 11 septembre 2025, Abdessamad Kayouh, ministre du Transport et de la Logistique et Mohamed Rabie Khlie, directeur général de l’Office National des Chemins de Fer (ONCF), o.', 'size': 2}, {'id': '114', 'title': 'Inauguration de la nouvelle gare de Taza pour dynamiser le développement régional', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/176153/inauguration-nouvelle-gare-taza-pour.html', 'summary': 'Inauguration de la nouvelle gare de Taza pour dynamiser le développement régional. Ce jeudi, Abdessamad Kayouh, ministre des Transports et de la Logistique, accompagné de Mohamed Rabie Khlie, directeur général de lOffice National des Chemins de Fer (ONCF), a inauguré la nouvelle gare ferroviaire de Taza. Cette inauguration sinscrit dans le cadre dun projet ambitieux visant à moderniser les gares et à réhabiliter les espaces ferroviaires, selon un communiqué de lONCF.', 'size': 2}], 'main_title': 'Inauguration de la nouvelle gare ferroviaire de Taza'}, {'community_id': '4', 'articles': [{'id': '21', 'title': 'Le gouvernement valide le projet de réorganisation de la Délégation interministérielle aux droits de l’Homme', 'source': 'lematin.ma', 'link': 'https://lematin.ma/nation/reorganisation-de-la-delegation-interministerielle-aux-droits-de-lhomme/301038', 'summary': "Le gouvernement valide le projet de réorganisation de la Délégation interministérielle aux droits de l’Homme. Le Conseil de gouvernement a adopté, jeudi à Rabat, le projet de décret N° 2.25.541 portant réorganisation de la Délégation interministérielle aux droits de l'Homme, présenté p.", 'size': 3}, {'id': '65', 'title': 'La Délégation interministérielle aux droits de l’Homme change de tutelle', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/La-Delegation-interministerielle-aux-droits-de-l-Homme-change-de-tutelle_a71634.html', 'summary': "La Délégation interministérielle aux droits de l’Homme change de tutelle. Le Conseil de gouvernement a adopté, jeudi à Rabat, le projet de décret N° 2.25.541 portant réorganisation de la Délégation interministérielle aux droits de l'Homme, présenté par la ministre déléguée auprès du Chef du gouvernement chargée de la Transition numérique et de la Réforme de l’administration, Amal El Fallah.", 'size': 2}, {'id': '144', 'title': 'Droits de l’Homme\xa0: Le gouvernement redéfinit les attributions de la Délégation interministérielle', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/pouvoirs/droits-de-lhomme-le-gouvernement-redefinit-les-attributions-de-la-delegation-interministerielle/', 'summary': 'Droits de l’Homme : Le gouvernement redéfinit les attributions de la Délégation interministérielle. Un projet de décret a été adopté en Conseil de gouvernement, ce jeudi, dans l’objectif de redéfinir l’organisation et les attributions de la Délégation interministérielle aux droits de l’Homme à travers la mise en place d’une structure fonctionnelle cohérente, intégrée et spécialisée.', 'size': 2}], 'main_title': 'Le gouvernement valide le projet de réorganisation de la Délégation interministérielle aux droits de l’Homme'}, {'community_id': '16', 'articles': [{'id': '24', 'title': 'Conseil de gouvernement : trois nouvelles nominations à de hautes fonctions', 'source': 'lematin.ma', 'link': 'https://lematin.ma/nation/conseil-de-gouvernement-trois-nouvelles-nominations-a-de-hautes-fonctions/301030', 'summary': "Conseil de gouvernement : trois nouvelles nominations à de hautes fonctions. Il a été procédé aux nominations suivantes :Au niveau du ministère de la Santé et de la Protection sociale :Ahmed Dibane, directeur de l'Institut Supérieur des Professions Infi.", 'size': 2}, {'id': '125', 'title': 'Le Conseil de gouvernement approuve des propositions de nomination à des fonctions supérieures', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/politique/le-conseil-de-gouvernement-approuve-des-propositions-de-nomination-a-des-fonctions-superieures-36', 'summary': 'Le Conseil de gouvernement approuve des propositions de nomination à des fonctions supérieures. Le Conseil de gouvernement a approuvé, jeudi à Rabat, des propositions de nomination à des fonctions supérieures, conformément aux dispositions de l’article 92 de la Constitution. Ainsi, au niveau du ministère de la Santé et de la Protection sociale, M. Ahmed Dibane a été nommé directeur de l’Institut Supérieur des Professions Infirmières et Techniques de .', 'size': 3}, {'id': '146', 'title': 'Conseil de gouvernement : Trois nouvelles nominations à des fonctions supérieures', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/au-royaume/conseil-de-gouvernement-trois-nouvelles-nominations-a-des-fonctions-superieures/', 'summary': 'Conseil de gouvernement : Trois nouvelles nominations à des fonctions supérieures. Le Conseil de gouvernement a approuvé, ce jeudi à Rabat, des propositions de nomination à des fonctions supérieures, conformément aux dispositions de l’article 92 de la Constitution.', 'size': 2}], 'main_title': 'Le Conseil de gouvernement approuve des propositions de nomination à des fonctions supérieures'}, {'community_id': '1', 'articles': [{'id': '35', 'title': 'CGI finalise l’acquisition d’Apside, acteur français des services numériques', 'source': 'lematin.ma', 'link': 'https://lematin.ma/economie/cgi-finalise-lacquisition-dapside-et-renforce-sa-presence-au-maroc/300958', 'summary': 'CGI finalise l’acquisition d’Apside, acteur français des services numériques. CGI, l’une des plus grandes sociétés indépendantes de conseil en technologies et en management, a finalisé l’acquisition d’Apside, un spécialiste reconnu des services numériques et.', 'size': 2}, {'id': '152', 'title': 'CGI finalise l’acquisition d’Apside, leader français des services numériques et d’ingénierie', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/affaires/cgi-finalise-lacquisition-dapside-leader-francais-des-services-numeriques-et-dingenierie/', 'summary': 'CGI finalise l’acquisition d’Apside, leader français des services numériques et d’ingénierie. Grâce à cette acquisition, CGI consolide davantage sa présence au Maroc, en France, ainsi qu’en Europe, tout en renforçant ses capacités, notamment dans les secteurs manufacturier et des services financiers.', 'size': 2}], 'main_title': 'CGI finalise l’acquisition d’Apside, acteur français des services numériques'}, {'community_id': '8', 'articles': [{'id': '42', 'title': 'La Fête du Cinéma célèbre sa 2e édition du 11 au 14 septembre', 'source': 'lematin.ma', 'link': 'https://lematin.ma/culture/la-fete-du-cinema-celebre-sa-2e-edition-du-11-au-14-septembre/300888', 'summary': 'La Fête du Cinéma célèbre sa 2e édition du 11 au 14 septembre. Organisée en partenariat avec le Centre Cinématographique Marocain (CCM) et la Chambre Marocaine des Salles de Cinéma, cette initiative ambitionne de rendre le 7e art accessible à.', 'size': 2}, {'id': '102', 'title': 'La Fête du Cinéma célèbre sa 2ᵉ édition du 11 au 14 septembre à travers le Royaume', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/09/11/la-fete-du-cinema-celebre-sa-2%e1%b5%89-edition-du-11-au-14-septembre-a-travers-le-royaume_1949921/', 'summary': 'La Fête du Cinéma célèbre sa 2ᵉ édition du 11 au 14 septembre à travers le Royaume. La deuxième édition de la Fête du Cinéma se tiendra du 11 au 14 septembre courant dans 20 salles et multiplexes à travers le Royaume, ont annoncé mercredi soir les organisateurs lors d’une cérémonie de lancement au multiplexe Pathé Californie de Casablanca. Organisée en partenariat avec le Centre cinématographique marocain (CCM) et la Chambre marocaine.', 'size': 2}], 'main_title': 'La Fête du Cinéma célèbre sa 2e édition du 11 au 14 septembre'}, {'community_id': '14', 'articles': [{'id': '43', 'title': 'Ouverture de la prévente Visa pour les billets du Mondial 2026 (FIFA)', 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/ouverture-de-la-prevente-visa-pour-les-billets-du-mondial-2026-fifa/300885', 'summary': 'Ouverture de la prévente Visa pour les billets du Mondial 2026 (FIFA). Cette première étape de vente se fera via un tirage au sort, désormais accessible sur le site officiel FIFA.com/tickets, explique la faîtière mondiale du football dans un communiqu.', 'size': 2}, {'id': '104', 'title': 'FIFA : ouverture de la prévente Visa pour les billets du Mondial 2026', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/09/11/fifa-ouverture-de-la-prevente-visa-pour-les-billets-du-mondial-2026_1949923/', 'summary': 'FIFA : ouverture de la prévente Visa pour les billets du Mondial 2026. La Fédération internationale de football association (FIFA) a annoncé, mercredi, l’ouverture officielle de la période d’inscription pour la phase de prévente Visa des billets de la Coupe du Monde de la FIFA 2026, qui se déroulera aux États-Unis, au Canada et au Mexique. Cette première étape de vente se fera via un tirage au sort,.', 'size': 2}], 'main_title': 'Ouverture de la prévente Visa pour les billets du Mondial 2026 (FIFA)'}, {'community_id': '10', 'articles': [{'id': '44', 'title': 'Biotechnologies: Anouar Invest lance le chantier du projet industriel AYA à Jorf Lasfar', 'source': 'lematin.ma', 'link': 'https://lematin.ma/videos/biotechnologies-anouar-invest-lance-le-chantier-du-projet-industriel-aya/300883', 'summary': 'Biotechnologies: Anouar Invest lance le chantier du projet industriel AYA à Jorf Lasfar. Le Groupe Anouar Invest a procédé mercredi au lancement officiel du chantier du projet industriel AYA (Anouar Yieldest Additives), un investissement structurant de 480 millions de.', 'size': 2}, {'id': '120', 'title': 'Jorf Lasfar : Le projet AYA, 480 MDH pour l’industrialisation et la souveraineté alimentaire', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/176135/jorf-lasfar-projet-pour-l-industrialisation.html', 'summary': 'Jorf Lasfar : Le projet AYA, 480 MDH pour l’industrialisation et la souveraineté alimentaire. Le groupe Anouar Invest a procédé, mercredi, au lancement officiel du chantier du projet industriel AYA (Anouar Yieldest Additives), un investissement structurant de 480 MDH dans la filière agro-industrielle et biotechnologique, situé au niveau de la zone industrielle de Jorf Lasfar (province d’El Jadida).', 'size': 3}, {'id': '222', 'title': 'Anouar Invest lance AYA à Jorf Lasfar, un site biotechnologique pour levures et améliorants alimentaires', 'source': 'lnt.ma', 'link': 'https://lnt.ma/anouar-invest-lance-aya-a-jorf-lasfar-un-site-biotechnologique-pour-levures-et-ameliorants-alimentaires/', 'summary': 'Anouar Invest lance AYA à Jorf Lasfar, un site biotechnologique pour levures et améliorants alimentaires. Anouar Invest a lancé le chantier de l’unité Anouar Yieldest Additives (AYA) dans la zone industrielle de Jorf Lasfar, à El Jadida. La cérémonie s’est tenue en présence de responsables gouvernementaux, dont les ministres chargés de l’Industrie, de l’Agriculture, de l’Investissement et du Commerce extérieur. Une convention de partenariat a été signée entre les départements . ', 'size': 2}], 'main_title': 'Jorf Lasfar : Le projet AYA, 480 MDH pour l’industrialisation et la souveraineté alimentaire'}, {'community_id': '11', 'articles': [{'id': '47', 'title': 'Le Hamas ciblé au Qatar : Escalade régionale et condamnations internationales', 'source': 'lematin.ma', 'link': 'https://lematin.ma/videos/le-hamas-cible-au-qatarescalade-regionale-et-condamnations-internationales/300857', 'summary': 'Le Hamas ciblé au Qatar : Escalade régionale et condamnations internationales. Israël a mené une frappe ciblée contre des hauts responsables du Hamas à Doha. L’armée israélienne a affirmé que ces dirigeants avaient orchestré l’attaque du 7 octobre et dirigé l.', 'size': 2}, {'id': '109', 'title': "Ce que l'on sait de l'attaque israélienne contre le Hamas au Qatar", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/09/10/ce-que-lon-sait-de-lattaque-israelienne-contre-le-hamas-au-qatar_1949890/', 'summary': "Ce que l'on sait de l'attaque israélienne contre le Hamas au Qatar. L’attaque sans précédent menée par Israël au Qatar mardi visait des responsables du Hamas réunis dans un complexe résidentiel en plein coeur de Doha, la capitale de ce pays du Golfe allié des Etats-Unis. Israël n’a pas communiqué sur les résultats de l’attaque, mais le mouvement islamiste palestinien Hamas a assuré que les hauts responsables.", 'size': 2}], 'main_title': 'Le Hamas ciblé au Qatar : Escalade régionale et condamnations internationales'}, {'community_id': '15', 'articles': [{'id': '51', 'title': "Séisme d'Al Haouz : 51.154 familles ont reconstruit leurs logements", 'source': 'lematin.ma', 'link': 'https://lematin.ma/nation/seisme-dal-haouz-51154-familles-ont-reconstruit-leurs-logements/300850', 'summary': "Séisme d'Al Haouz : 51.154 familles ont reconstruit leurs logements. Aziz Akhannouch a présidé, mercredi 10 septembre 2025 à Rabat, une réunion de la Commission interministérielle chargée du programme de reconstruction et de réhabilitation générale.", 'size': 2}, {'id': '106', 'title': "Al Haouz : Akhannouch fait le point sur l'avancée du programme de reconstruction", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/09/11/al-haouz-akhannouch-fait-le-point-sur-lavancee-du-programme-de-reconstruction_1949926/', 'summary': "Al Haouz : Akhannouch fait le point sur l'avancée du programme de reconstruction. Le chef du gouvernement, Aziz Akhannouch, a présidé, mercredi à Rabat, une réunion de la Commission interministérielle chargée du programme de reconstruction et de réhabilitation générale des zones sinistrées par le séisme d’Al-Haouz, consacrée au suivi de la mise en œuvre des différents axes de ce programme, conformément aux hautes directives royales. Au début de.", 'size': 3}, {'id': '212', 'title': 'Rabat | Le Chef du gouvernement préside la réunion de suivi du programme de reconstruction d’Al‑Haouz', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/rabat-le-chef-du-gouvernement-preside-la-reunion-de-suivi-du-programme-de-reconstruction-dal%e2%80%91haouz/', 'summary': 'Rabat | Le Chef du gouvernement préside la réunion de suivi du programme de reconstruction d’Al‑Haouz. Le Chef du gouvernement, M. Aziz Akhannouch, a présidé, mercredi à Rabat, une réunion de la Commission interministérielle chargée du programme de reconstruction et de réhabilitation générale des zones sinistrées par le séisme d’Al-Haouz, consacrée au suivi de la mise en œuvre des différents axes de ce programme, conformément aux Hautes Directives Royales. Au début ', 'size': 2}], 'main_title': "Al Haouz : Akhannouch fait le point sur l'avancée du programme de reconstruction"}, {'community_id': '7', 'articles': [{'id': '54', 'title': 'Bourses de la formation professionnelle : nouveau système de gestion et de versement digitalisé', 'source': 'lematin.ma', 'link': 'https://lematin.ma/enseignement/bourses-de-la-formation-professionnelle-nouveau-systeme-de-gestion/300839', 'summary': 'Bourses de la formation professionnelle : nouveau système de gestion et de versement digitalisé. Le ministère de l’Inclusion économique, de la Petite entreprise, de l’Emploi et des Compétences, le ministère délégué chargé du Budget et Al Barid Bank ont scellé, ce mercredi, un.', 'size': 2}, {'id': '174', 'title': 'Stagiaires de la formation professionnelle : une nouvelle convention pour moderniser le système des bourses', 'source': 'leseco.ma', 'link': 'https://leseco.ma/maroc/stagiaires-de-la-formation-professionnelle-une-nouvelle-convention-pour-moderniser-le-systeme-des-bourses.html', 'summary': 'Stagiaires de la formation professionnelle : une nouvelle convention pour moderniser le système des bourses. Une convention signée à Rabat entre le ministère de l’Inclusion économique, le ministère délégué chargé du Budget et Al Barid Bank inaugure une nouvelle procédure de gestion et de versement des bourses des stagiaires. ', 'size': 2}], 'main_title': 'Bourses de la formation professionnelle : nouveau système de gestion et de versement digitalisé'}, {'community_id': '18', 'articles': [{'id': '69', 'title': 'Le Royaume en passe de se doter d’un cadre d’IA spécifiquement marocain', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Le-Royaume-en-passe-de-se-doter-d-un-cadre-d-IA-specifiquement-marocain_a71633.html', 'summary': 'Le Royaume en passe de se doter d’un cadre d’IA spécifiquement marocain. \u200bUne convention de partenariat a été signée, jeudi à Rabat, entre le ministère de la Transition Numérique et de la Réforme de l’Administration et la Commission nationale de contrôle de la protection des données à caractère personnel (CNDP), pour le développement d’une plateforme nationale de l’intelligence artificielle (IA) responsable et d’un framework de plateforme basée sur un Large Language Model (LLM).', 'size': 5}, {'id': '98', 'title': "Vers la mise en place d'un cadre d'intelligence artificielle responsable au Maroc", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/09/11/vers-la-mise-en-place-dun-cadre-dintelligence-artificielle-responsable-au-maroc_1949988/', 'summary': "Vers la mise en place d'un cadre d'intelligence artificielle responsable au Maroc. Une convention de partenariat a été signée, jeudi à Rabat, entre le ministère de la Transition numérique et de la réforme de l’administration et la Commission nationale de contrôle de la protection des données à caractère personnel (CNDP), pour le développement d’une plateforme nationale de l’intelligence artificielle (IA) responsable et d’un framework de plateforme basée.", 'size': 5}, {'id': '151', 'title': 'Une plateforme nationale de l’intelligence artificielle responsable verra le jour', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/au-royaume/une-plateforme-nationale-de-lintelligence-artificielle-responsable-verra-le-jour/', 'summary': "Une plateforme nationale de l’intelligence artificielle responsable verra le jour. Une convention de partenariat a été signée, jeudi à Rabat, entre le ministère de la Transition numérique et de la réforme de l’administration et la Commission nationale de contrôle de la protection des données à caractère personnel (CNDP), pour le développement d’une plateforme nationale de l'intelligence artificielle (IA) responsable et d'un framework de plateforme basée sur un Large Language Model (LLM).", 'size': 5}, {'id': '168', 'title': 'Ministère de la Transition numérique-CNDP: signature d’une convention pour la mise en place d’un cadre d’IA responsable', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/ministere-de-la-transition-numerique-cndp-signature-dune-convention-pour-la-mise-en-place-dun-cadre-dia-responsable/', 'summary': 'Ministère de la Transition numérique-CNDP: signature d’une convention pour la mise en place d’un cadre d’IA responsable. Une convention de partenariat a été signée, jeudi à Rabat, entre le ministère de la Transition Numérique et de la Réforme de l’Administration et la Commission nationale de contrôle de la protection des données à caractère personnel (CNDP), pour le développement d’une plateforme nationale de l’intelligence artificielle (IA) responsable et d’un framework de plateforme basée .', 'size': 5}, {'id': '216', 'title': 'Transition numérique : signature d’un accord sur l’IA responsable', 'source': 'lnt.ma', 'link': 'https://lnt.ma/transition-numerique-signature-dun-accord-sur-lia-responsable/', 'summary': 'Transition numérique : signature d’un accord sur l’IA responsable. Une convention de partenariat a été signée, jeudi à Rabat, entre le ministère de la Transition Numérique et de la Réforme de l’Administration et la Commission nationale de contrôle de la protection des données à caractère personnel (CNDP), pour le développement d’une plateforme nationale de l’intelligence artificielle (IA) responsable et d’un framework de plateforme basée . ', 'size': 5}], 'main_title': 'Le Royaume en passe de se doter d’un cadre d’IA spécifiquement marocain'}, {'community_id': '17', 'articles': [{'id': '83', 'title': 'Attaque israélienne : un sommet arabo-islamique extraordinaire, les 14 et 15 septembre à Doha', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/09/11/attaque-israelienne-un-sommet-arabo-islamique-extraordinaire-les-14-et-15-septembre-a-doha_1950103/', 'summary': 'Attaque israélienne : un sommet arabo-islamique extraordinaire, les 14 et 15 septembre à Doha. Un Sommet arabo-islamique extraordinaire consacré à l’examen de l’attaque israélienne contre l’État du Qatar se tiendra les 14 et 15 septembre à Doha, rapporte jeudi l’agence de presse qatarie (QNA). L’État du Qatar abritera, dimanche prochain, la réunion préparatoire des ministres des Affaires étrangères en prélude du Sommet arabo-islamique extraordinaire, précise la même source. L’attaque.', 'size': 2}, {'id': '266', 'title': 'Attaque israélienne | Un sommet arabo-islamique extraordinaire, le 14 septembre à Doha (QNA)', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/attaque-israelienne-un-sommet-arabo-islamique-extraordinaire-le-14-septembre-a-doha-qna/', 'summary': 'Attaque israélienne | Un sommet arabo-islamique extraordinaire, le 14 septembre à Doha (QNA). Un Sommet arabo-islamique extraordinaire consacré à l’examen de l’attaque israélienne contre l’État du Qatar se tiendra les 14 et 15 septembre à Doha, rapporte jeudi l’agence de presse qatarie (QNA). L’État du Qatar abritera, dimanche prochain, la réunion préparatoire des ministres des Affaires étrangères en prélude du Sommet arabo-islamique extraordinaire, précise la même source. L’agression ', 'size': 2}], 'main_title': 'Attaque israélienne : un sommet arabo-islamique extraordinaire, les 14 et 15 septembre à Doha'}, {'community_id': '19', 'articles': [{'id': '100', 'title': "Sécurité routière : le nombre d'accidents de la route en hausse de près de 24%", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/09/11/securite-routiere-le-nombre-daccidents-de-la-route-en-hausse-de-pres-de-24_1949919/', 'summary': "Sécurité routière : le nombre d'accidents de la route en hausse de près de 24%. Le Comité permanent de la sécurité routière (CPSR) a tenu, mercredi à Rabat, une réunion consacrée à la présentation des statistiques provisoires des accidents de la route, du bilan de la mise en œuvre du programme d’urgence de la sécurité routière pour la période estivale et des recommandations et propositions visant à améliorer le système.", 'size': 3}, {'id': '210', 'title': 'Sécurité routière | Le CPSR dévoile les chiffres des accidents et les mesures d’urgence', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/securite-routiere-le-cpsr-devoile-les-chiffres-des-accidents-et-les-mesures-durgence/', 'summary': 'Sécurité routière | Le CPSR dévoile les chiffres des accidents et les mesures d’urgence. Le Comité permanent de la sécurité routière (CPSR) a tenu, mercredi à Rabat, une réunion consacrée à la présentation des statistiques provisoires des accidents de la route, du bilan de la mise en œuvre du programme d’urgence de la sécurité routière pour la période estivale et des recommandations et propositions visant à améliorer le système de ', 'size': 3}, {'id': '223', 'title': 'Sécurité routière : hausse alarmante des accidents en 2025', 'source': 'lnt.ma', 'link': 'https://lnt.ma/securite-routiere-hausse-alarmante-des-accidents-en-2025/', 'summary': 'Sécurité routière : hausse alarmante des accidents en 2025. Le Comité permanent de la sécurité routière (CPSR) a tenu, mercredi à Rabat, une réunion consacrée à la présentation des statistiques provisoires des accidents de la route, du bilan de la mise en œuvre du programme d’urgence de la sécurité routière pour la période estivale et des recommandations et propositions visant à améliorer le système . ', 'size': 3}], 'main_title': "Sécurité routière : le nombre d'accidents de la route en hausse de près de 24%"}, {'community_id': '9', 'articles': [{'id': '103', 'title': "Qui était Charlie Kirk, l'influenceur pro-Trump assassiné par balle ?", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/09/11/qui-etait-charlie-kirk-linfluenceur-pro-trump-assassine-par-balle_1949917/', 'summary': "Qui était Charlie Kirk, l'influenceur pro-Trump assassiné par balle ?. Le président américain, Donald Trump, a promis de sévir contre la « violence politique », qui a conduit à l’assassinat par balle, mercredi, de son fidèle allié politique et jeune militant conservateur Charlie Kirk. L’influenceur conservateur Charlie Kirk, tué par balle mercredi, était une voix majeure de la jeunesse pro-Trump aux Etats-Unis : il pilotait un des.", 'size': 2}, {'id': '203', 'title': 'Assassinat de Charlie Kirk : Trump promet de sévir contre la «\xa0violence politique\xa0»', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/assassinat-de-charlie-kirk-trump-promet-de-sevir-contre-la-violence-politique.html', 'summary': 'Assassinat de Charlie Kirk : Trump promet de sévir contre la « violence politique ». Le président américain, Donald Trump, a promis de sévir contre la « violence politique », qui a conduit à l’assassinat par balle, mercredi, de son fidèle allié politique et jeune militant conservateur Charlie Kirk. « Mon administration retrouvera tous ceux qui ont contribué à cette atrocité et à toute autre violence politique, y compris les organisations qui les . L’article est apparu en premier sur .', 'size': 2}], 'main_title': "Qui était Charlie Kirk, l'influenceur pro-Trump assassiné par balle ?"}, {'community_id': '2', 'articles': [{'id': '155', 'title': 'Gouvernement : Akhannouch dresse le bilan de quatre années', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/pouvoirs/gouvernement-akhannouch-dresse-le-bilan-de-quatre-annees/', 'summary': 'Gouvernement : Akhannouch dresse le bilan de quatre années. Le Chef du gouvernement, Aziz Akhannouch, a affirmé que le bilan de l’action du gouvernement au cours des quatre dernières années a été "positif et concret", en dépit d’un contexte international instable et des conditions climatiques difficiles qui ont marqué cette période.', 'size': 3}, {'id': '209', 'title': 'Le gouvernement a réalisé un bilan positif dans un contexte international instable et des conditions climatiques difficiles', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/le-gouvernement-a-realise-un-bilan-positif-dans-un-contexte-international-instable-et-des-conditions-climatiques-difficiles/', 'summary': 'Le gouvernement a réalisé un bilan positif dans un contexte international instable et des conditions climatiques difficiles. Le Chef du gouvernement, Aziz Akhannouch, a affirmé que le bilan de l’action du gouvernement au cours des quatre dernières années a été “positif et concret”, en dépit d’un contexte international instable et des conditions climatiques difficiles qui ont marqué cette période. M. Akhannouch, qui s’exprimant mercredi soir lors d’une émission spéciale diffusée par Al ', 'size': 3}, {'id': '219', 'title': 'Aziz Akhannouch présente un bilan gouvernemental qu’il juge « positif » malgré un contexte difficile', 'source': 'lnt.ma', 'link': 'https://lnt.ma/aziz-akhannouch-presente-un-bilan-gouvernemental-quil-juge-positif-malgre-un-contexte-difficile/', 'summary': 'Aziz Akhannouch présente un bilan gouvernemental qu’il juge « positif » malgré un contexte difficile. Le chef du gouvernement, Aziz Akhannouch, a estimé que le bilan de l’action de l’Exécutif au cours des quatre dernières années est « positif et concret », en dépit d’un contexte international instable et de conditions climatiques défavorables. Intervenant mercredi soir lors d’une émission spéciale diffusée par Al Oula et 2M, il a passé en . ', 'size': 3}], 'main_title': 'Gouvernement : Akhannouch dresse le bilan de quatre années'}, {'community_id': '5', 'articles': [{'id': '158', 'title': 'Services marchands non financiers : 41% des patrons anticipent une hausse de l’activité', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/affaires/services-marchands-non-financiers-41-des-patrons-anticipent-une-hausse-de-lactivite/', 'summary': "Services marchands non financiers : 41% des patrons anticipent une hausse de l’activité. Les anticipations des chefs d’entreprise du secteur des services marchands non financiers (SMNF), pour le troisième trimestre 2025, révèlent une augmentation de l’activité globale selon 41% d’entre eux, et une stabilité d'après 37%, indique le Haut-Commissariat au Plan (HCP).", 'size': 2}, {'id': '221', 'title': 'HCP : activité en hausse attendue dans les services marchands au T3', 'source': 'lnt.ma', 'link': 'https://lnt.ma/hcp-activite-en-hausse-attendue-dans-les-services-marchands-au-t3/', 'summary': 'HCP : activité en hausse attendue dans les services marchands au T3. Les anticipations des chefs d’entreprise indiquent une progression modérée de l’activité dans les services marchands non financiers (SMNF) au troisième trimestre 2025, tandis que le commerce de gros s’orienterait vers une stabilité, selon la dernière note de conjoncture du Haut-Commissariat au Plan (HCP). Dans les SMNF, 41% des dirigeants prévoient une hausse de l’activité globale . ', 'size': 2}], 'main_title': 'Services marchands non financiers : 41% des patrons anticipent une hausse de l’activité'}, {'community_id': '12', 'articles': [{'id': '238', 'title': 'Le groupe CTM prend en charge le transport urbain par autobus à Fès', 'source': 'lematin.ma', 'link': 'https://lematin.ma/regions/le-groupe-ctm-prend-en-charge-le-transport-urbain-par-autobus-a-fes/301080', 'summary': 'Le groupe CTM prend en charge le transport urbain par autobus à Fès. CTM renforce sa présence dans le secteur du transport urbain. Après Tétouan, le Groupe étend désormais ses services à la ville de Fès via sa filiale Issal Fès, marquant ainsi une é.', 'size': 2}, {'id': '254', 'title': 'Mobilité urbaine : CTM aux commandes du transport public à Fès', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/au-royaume/mobilite-urbaine-ctm-aux-commandes-du-transport-public-a-fes/', 'summary': 'Mobilité urbaine : CTM aux commandes du transport public à Fès. Le groupe, à travers sa nouvelle filiale Issal fès, se charge désormais de la gestion du transport public urbain par autobus à Fès.', 'size': 2}], 'main_title': 'Le groupe CTM prend en charge le transport urbain par autobus à Fès'}, {'community_id': '13', 'articles': [{'id': '245', 'title': 'Commissaire européenne en charge de la Méditerranée: "Le Maroc, un partenaire privilégié de l\'UE"', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Commissaire-europeenne-en-charge-de-la-Mediterranee-Le-Maroc-un-partenaire-privilegie-de-l-UE_a71637.html', 'summary': 'Commissaire européenne en charge de la Méditerranée: "Le Maroc, un partenaire privilégié de l\'UE". La Commissaire européenne en charge de la Méditerranée, Dubravka Šuica, a affirmé, jeudi à Rabat, que le Maroc est un partenaire privilégié de l’Union européenne (UE).', 'size': 2}, {'id': '267', 'title': 'Le Maroc, un partenaire privilégié de l’UE (Commissaire européenne pour la Méditerranée)', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/le-maroc-un-partenaire-privilegie-de-lue-commissaire-europeenne-pour-la-mediterranee/', 'summary': 'Le Maroc, un partenaire privilégié de l’UE (Commissaire européenne pour la Méditerranée). La Commissaire européenne en charge de la Méditerranée, Dubravka Šuica, a affirmé, jeudi à Rabat, que le Maroc est un partenaire privilégié de l’Union européenne (UE). S’exprimant à l’issue d’entretiens avec le ministre des Affaires étrangères, de la Coopération africaine et des Marocains résidant à l’étranger, Nasser Bourita, tenus en amont de la “Retraite de ', 'size': 2}], 'main_title': 'Commissaire européenne en charge de la Méditerranée: "Le Maroc, un partenaire privilégié de l\'UE"'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
                        
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ? d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        // Fonction pour cacher le tooltip
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = '';
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
    
    
</body>




</html>
    