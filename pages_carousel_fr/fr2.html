<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); 
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title"> Les principales actualités des dernières 24 heures

</div>    
        <div class="header-subtitle"> Dernière mise à jour : 08/07/2025 - 12h29</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"></div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '0', 'title': "Le temps qu'il fera ce mardi 8 juillet 2025", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/430420-le-temps-quil-fera-ce-mardi-8-juillet-2025.html', 'summary': "Le temps qu'il fera ce mardi 8 juillet 2025. Voici les prévisions météorologiques établies par la Direction générale de la météorologie pour le mardi 8 juillet 2025 – Temps assez chaud à chaud sur les plaines de Tadla, Rhamna, l’Oriental, le Sud-Est et l’Est des Provinces Sahariennes. – Nuages bas assez nombreux avec bruines possibles sur le Nord-Ouest des provinces Sud. – Formations brumeuses . ", 'size': 2}, {'id': '246', 'title': 'Les prévisions du mardi 8 juillet', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/les-previsions-du-mardi-8-juillet-306272/', 'summary': 'Les prévisions du mardi 8 juillet. Voici les prévisions météorologiques établies par la Direction générale de la météorologie pour le mardi 8 juillet 2025 : – Temps assez chaud à chaud sur les plaines de Tadla, Rhamna, l’Oriental, le Sud-Est et l’Est des Provinces Sahariennes. – Nuages bas assez nombreux avec bruines possibles sur le Nord-Ouest', 'size': 2}], 'main_title': "Le temps qu'il fera ce mardi 8 juillet 2025"}, {'community_id': '7', 'articles': [{'id': '3', 'title': 'Jawad Ziyat élu nouveau président du Raja Casablanca', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/432352-jawad-ziyat-elu-nouveau-president-du-raja-casablanca.html', 'summary': 'Jawad Ziyat élu nouveau président du Raja Casablanca. Le Parlement du Raja Casablanca a voté, ce lundi soir dans un hôtel de Casablanca, pour l’élection de Jawad Ziyat à la tête de la présidence du Raja de Casablanca. Jawad Ziyat était en lice face à Abdellah Birouine qui assurait jusque-là l’intérim, et Saïd Hasbane. Au premier tour, il avait obtenu 67 voix, contre . ', 'size': 4}, {'id': '222', 'title': 'Jawad Ziyat, nouveau président du Raja de Casablanca', 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/jawad-ziyat-nouveau-president-du-raja-de-casablanca/289840', 'summary': 'Jawad Ziyat, nouveau président du Raja de Casablanca. Jawad Ziyat, élu pour un mandat de quatre ans, était en lice avec deux autres candidats, à savoir Abdellah Birouaine et Said Hasbane. Il avait déjà dirigé les Verts de septembre 20.', 'size': 4}, {'id': '240', 'title': 'Foot : Jawad Ziyat nouveau président du Raja de Casablanca', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/07/08/foot-jawad-ziyat-nouveau-president-du-raja-de-casablanca_1941360/', 'summary': 'Foot : Jawad Ziyat nouveau président du Raja de Casablanca. Jawad Ziyat a été élu président du Raja de Casablanca, à l’issue de l’assemblée générale ordinaire et extraordinaire du club, tenue lundi soir à Casablanca. Ziyat, élu pour un mandat de quatre ans, était en lice avec deux autres candidats, à savoir Abdellah Birouaine et Said Hasbane. Il avait déjà dirigé les Verts de septembre.', 'size': 4}, {'id': '251', 'title': 'Football : Jawad Ziyat nouveau président du Raja de Casablanca', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/171092/football-jawad-ziyat-nouveau-president.html', 'summary': 'Football : Jawad Ziyat nouveau président du Raja de Casablanca. Jawad Ziyat a été élu président du Raja de Casablanca, à l’issue de l’assemblée générale ordinaire et extraordinaire du club, tenue lundi soir à Casablanca. Elu pour un mandat de quatre ans, il était en lice avec deux autres candidats, à savoir Abdellah Birouaine et Said Hasbane.', 'size': 4}], 'main_title': 'Jawad Ziyat élu nouveau président du Raja Casablanca'}, {'community_id': '2', 'articles': [{'id': '23', 'title': 'La protection des animaux errants au menu du Conseil de gouvernement', 'source': 'lematin.ma', 'link': 'https://lematin.ma/nation/la-protection-des-animaux-errants-au-menu-du-conseil-de-gouvernement/289754', 'summary': 'La protection des animaux errants au menu du Conseil de gouvernement. Au début de ses travaux, le Conseil de gouvernement examinera trois projets de loi, dont le premier porte modification de la loi relative à l’état civil, le deuxième concerne la pr.', 'size': 2}, {'id': '54', 'title': 'Les animaux errants au menu du prochain Conseil du Gouvernement', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Les-animaux-errants-au-menu-du-prochain-Conseil-du-Gouvernement_a69575.html', 'summary': 'Les animaux errants au menu du prochain Conseil du Gouvernement. Un Conseil de gouvernement se tiendra jeudi sous la présidence du Chef du gouvernement Aziz Akhannouch, indique un communiqué de son Département.', 'size': 2}, {'id': '117', 'title': 'Trois projets de loi au menu du Conseil de gouvernement de jeudi', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/actualite/trois-projets-de-loi-au-menu-du-conseil-de-gouvernement-de-jeudi', 'summary': 'Trois projets de loi au menu du Conseil de gouvernement de jeudi. Un Conseil de gouvernement se tiendra jeudi sous la présidence du Chef du gouvernement Aziz Akhannouch, indique un communiqué de son Département. Au début de ses travaux, le Conseil examinera trois projets de loi, dont le premier porte modification de la loi relative à l’état civil, le deuxième concerne la protection des animaux errants et .', 'size': 3}], 'main_title': 'Trois projets de loi au menu du Conseil de gouvernement de jeudi'}, {'community_id': '3', 'articles': [{'id': '36', 'title': 'Tennis : Reda Bennani sacré champion du tournoi international WTT M15', 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/tennis-reda-bennani-sacre-champion-du-tournoi-international-wtt-m15/289708', 'summary': 'Tennis : Reda Bennani sacré champion du tournoi international WTT M15. Dans une finale 100% marocaine, Reda Bennani a dû recourir à un jeu décisif pour arracher le premier set, avant de conclure la rencontre dans la seconde manche, plus maîtrisée.**re.', 'size': 2}, {'id': '83', 'title': 'Tennis : le Marocain Reda Bennani sacré champion du tournoi international WTT M15 à Tanger', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/07/07/tennis-le-marocain-reda-bennani-sacre-champion-du-tournoi-international-wtt-m15-a-tanger_1941177/', 'summary': 'Tennis : le Marocain Reda Bennani sacré champion du tournoi international WTT M15 à Tanger. Le Marocain Reda Bennani a remporté, dimanche, le tournoi international WTT M15, disputé sur les courts du Tennis Club Municipal de Tanger (TCMT), en s’imposant en finale face à son compatriote Yassine Dlimi, sur le score de 7-6, 6-4. Dans une finale 100% marocaine, Reda Bennani a dû recourir à un jeu décisif pour arracher.', 'size': 2}], 'main_title': 'Tennis : Reda Bennani sacré champion du tournoi international WTT M15'}, {'community_id': '17', 'articles': [{'id': '41', 'title': 'Aéroport Mohammed V-Casablanca : début des travaux de terrassements pour le nouveau terminal', 'source': 'lematin.ma', 'link': 'https://lematin.ma/regions/aeroport-mohammed-v-debut-des-terrassements-pour-le-nouveau-terminal/289605', 'summary': 'Aéroport Mohammed V-Casablanca : début des travaux de terrassements pour le nouveau terminal. Le chantier du futur terminal de l’aéroport Mohammed V de Casablanca entre dans sa phase concrète. Les travaux de terrassement ont officiellement démarré, donnant le coup d’envoi à.', 'size': 5}, {'id': '100', 'title': 'Aéroport Mohammed V : coup d’envoi des travaux du nouveau terminal', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/aeroport-mohammed-v-coup-denvoi-des-travaux-du-nouveau-terminal-306220/', 'summary': 'Aéroport Mohammed V : coup d’envoi des travaux du nouveau terminal. L’Office National des Aéroports (ONDA) annonce le lancement officiel des travaux de terrassement du chantier du nouveau terminal de l’aéroport Mohammed V de Casablanca, première phase concrète pour l’un des projets d’infrastructure les plus ambitieux du Maroc à l’horizon 2030. Avec un investissement global estimé à 15 milliards de dirhams,', 'size': 4}, {'id': '194', 'title': 'Lancement des travaux du nouveau terminal de l’Aéroport Mohammed V de Casablanca', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/lancement-des-travaux-du-nouveau-terminal-de-laeroport-mohammed-v-de-casablanca/', 'summary': 'Lancement des travaux du nouveau terminal de l’Aéroport Mohammed V de Casablanca. L’Office National des Aéroports (ONDA) annonce le lancement officiel des travaux de terrassement du chantier du nouveau terminal de l’aéroport Mohammed V de Casablanca, première phase concrète pour l’un des projets d’infrastructure les plus ambitieux du Maroc à l’horizon 2030. Avec un investissement global estimé à 15 milliards de dirhams, ce nouveau terminal, conçu pour ', 'size': 4}, {'id': '201', 'title': 'Les travaux de terrassement du nouveau terminal de l’aéroport Mohammed V officiellement lancés', 'source': 'lnt.ma', 'link': 'https://lnt.ma/les-travaux-de-terrassement-du-nouveau-terminal-de-laeroport-mohammed-v-officiellement-lances/', 'summary': 'Les travaux de terrassement du nouveau terminal de l’aéroport Mohammed V officiellement lancés. Les travaux de terrassement du futur terminal de l’aéroport international Mohammed V de Casablanca ont été lancés, marquant le début de la phase opérationnelle d’un projet d’infrastructure d’envergure inscrit dans le cadre de la stratégie nationale « Aéroports 2030 ». Porté par l’Office National des Aéroports (ONDA), ce projet vise à accompagner l’évolution du trafic . ', 'size': 4}, {'id': '283', 'title': 'Casablanca : démarrage des travaux du nouveau terminal de l’aéroport Mohammed V', 'source': 'leseco.ma', 'link': 'https://leseco.ma/maroc/casablanca-demarrage-des-travaux-du-nouveau-terminal-de-laeroport-mohammed-v.html', 'summary': 'Casablanca : démarrage des travaux du nouveau terminal de l’aéroport Mohammed V. Le chantier du nouveau terminal passagers de l’aéroport Mohammed V à Casablanca a été officiellement lancé, en anticipation de la Coupe du monde 2030. ', 'size': 2}], 'main_title': 'Aéroport Mohammed V-Casablanca : début des travaux de terrassements pour le nouveau terminal'}, {'community_id': '13', 'articles': [{'id': '43', 'title': 'M2T lance son offre « Chaabi Payment »', 'source': 'lematin.ma', 'link': 'https://lematin.ma/economie/la-banque-populaire-accelere-la-digitalisation-des-paiements/289627', 'summary': 'M2T lance son offre « Chaabi Payment ». Destinée aux professionnels de tous horizons (commerçants de proximité, artisans, professions libérales, TPE, PME et grandes entreprises), l’offre « Chaabi Payment » permet l’accep.', 'size': 2}, {'id': '142', 'title': 'Paiement multicanal : M2T lance son offre «Chaabi Payment»', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/argent/paiement-multicanal-m2t-lance-son-offre-chaabi-payment/', 'summary': 'Paiement multicanal : M2T lance son offre «Chaabi Payment». Destinée aux professionnels (commerçants de proximité, artisans, professions libérales, TPE, PME et grandes entreprises), l’offre permet l’acceptation des paiements par carte ou via mobile, que ce soit sur un terminal de paiement électronique (TPE) ou en ligne.', 'size': 3}, {'id': '286', 'title': 'Paiement multicanal : M2T déploie «Chaabi Payment»', 'source': 'leseco.ma', 'link': 'https://leseco.ma/business/paiement-multicanal-m2t-deploie-chaabi-payment.html', 'summary': 'Paiement multicanal : M2T déploie «Chaabi Payment». M2T, filiale du Groupe BCP et acteur majeur du paiement au Maroc, lance Chaabi Payment, une offre dédiée à l’acceptation de paiements multicanaux (carte et mobile), en ligne ou via TPE. ', 'size': 2}], 'main_title': 'Paiement multicanal : M2T lance son offre «Chaabi Payment»'}, {'community_id': '15', 'articles': [{'id': '45', 'title': 'Etats-Unis : Entrée en vigueur le 1er août des nouveaux tarifs douaniers', 'source': 'lematin.ma', 'link': 'https://lematin.ma/monde/etats-unis-entree-en-vigueur-le-1er-aout-des-nouveaux-tarifs-douaniers/289598', 'summary': 'Etats-Unis : Entrée en vigueur le 1er août des nouveaux tarifs douaniers. Le président Trump va envoyer des lettres à certains de nos partenaires commerciaux pour leur dire que si vous ne faites pas avancer les choses alors ils retourneront, le 1er.', 'size': 3}, {'id': '90', 'title': 'États-Unis : entrée en vigueur des nouveaux tarifs douaniers le 1er août', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/07/07/etats-unis-entree-en-vigueur-des-nouveaux-tarifs-douaniers-le-1er-aout_1941175/', 'summary': 'États-Unis : entrée en vigueur des nouveaux tarifs douaniers le 1er août. Annoncés en avril dernier avant d’être suspendus, le secrétaire américain au Trésor a annoncé que les nouveaux tarifs douaniers — pouvant atteindre 50 % — entreront finalement en vigueur le 1er août. Les droits de douane annoncés en avril avant d’être suspendus entreront en vigueur le 1er août en l’absence d’accords commerciaux avec les Etats-Unis, a.', 'size': 3}, {'id': '190', 'title': 'USA : entrée en vigueur le 1er août des nouveaux tarifs douaniers', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/usa-entree-en-vigueur-le-1er-aout-des-nouveaux-tarifs-douaniers.html', 'summary': 'USA : entrée en vigueur le 1er août des nouveaux tarifs douaniers. Les droits de douane annoncés en avril avant d’être suspendus entreront en vigueur le 1er août en l’absence d’accords commerciaux avec les Etats-Unis, a indiqué dimanche le secrétaire américain au Trésor, Scott Bessent. « Le président Trump va envoyer des lettres à certains de nos partenaires commerciaux pour leur dire que si vous ne faites pas . L’article est apparu en premier sur .', 'size': 3}], 'main_title': 'Etats-Unis : Entrée en vigueur le 1er août des nouveaux tarifs douaniers'}, {'community_id': '8', 'articles': [{'id': '72', 'title': "Oscar 2025 : lancement de l'appel à candidature pour représenter le Maroc", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/07/07/oscar-2025-lancement-de-lappel-a-candidature-pour-representer-le-maroc_1941335/', 'summary': "Oscar 2025 : lancement de l'appel à candidature pour représenter le Maroc. Dans le cadre de la cérémonie des Oscars, le Centre cinématographique marocain (CCM) a lancé un appel à candidature pour participer à la présélection du prix du meilleur film international. Le Centre cinématographique marocain (CCM) vient de lancer un appel aux producteurs marocains désirant participer à la présélection de l’Oscar du Meilleur film international, dans.", 'size': 2}, {'id': '252', 'title': 'Le CCM lance l’appel à candidature pour l’Oscar du meilleur film international 2026', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/171088/lance-l-appel-candidature-pour-l-oscar.html', 'summary': 'Le CCM lance l’appel à candidature pour l’Oscar du meilleur film international 2026. Le Centre cinématographique marocain (CCM) vient de lancer un appel aux producteurs nationaux désirant participer à la présélection de l’Oscar du meilleur film international, dans le cadre de la 98e cérémonie des Oscars organisée par l’Academy of Motion Picture Arts and Sciences.', 'size': 2}], 'main_title': "Oscar 2025 : lancement de l'appel à candidature pour représenter le Maroc"}, {'community_id': '16', 'articles': [{'id': '74', 'title': 'Propriété intellectuelle : un accord pour la protection juridique du patrimoine culturel marocain', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/07/07/propriete-intellectuelle-un-accord-pour-la-protection-juridique-du-patrimoine-culturel-marocain_1941312/', 'summary': 'Propriété intellectuelle : un accord pour la protection juridique du patrimoine culturel marocain. Le Maroc franchit une étape historique dans la protection de son patrimoine culturel en signant un accord de coopération avec l’Organisation mondiale de la propriété intellectuelle (OMPI). Le ministre de la Jeunesse, de la Culture et de la Communication, Mohammed Mehdi Bensaid, a signé, lundi à Genève, un protocole d’accord avec le directeur général de.', 'size': 4}, {'id': '95', 'title': 'Signature à Genève d’un protocole d’accord entre le Maroc et l’OMPI pour la protection juridique du patrimoine culturel marocain', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/signature-a-geneve-dun-protocole-daccord-entre-le-maroc-et-lompi-pour-la-protection-juridique-du-patrimoine-culturel-marocain-306245/', 'summary': 'Signature à Genève d’un protocole d’accord entre le Maroc et l’OMPI pour la protection juridique du patrimoine culturel marocain. Le ministre de la Jeunesse, de la Culture et de la Communication, M. Mohammed Mehdi Bensaid, a signé, lundi à Genève, un protocole d’accord avec le Directeur général de l’Organisation Mondiale de la Propriété Intellectuelle (OMPI), M. Daren Tang. Cet accord vise à renforcer la coopération bilatérale dans le domaine', 'size': 4}, {'id': '192', 'title': 'Le Maroc et l’OMPI signent un accord pour la protection juridique du patrimoine culturel marocain', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/le-maroc-et-lompi-signent-un-accord-pour-la-protection-juridique-du-patrimoine-culturel-marocain/', 'summary': 'Le Maroc et l’OMPI signent un accord pour la protection juridique du patrimoine culturel marocain. Le ministre de la Jeunesse, de la Culture et de la Communication, M. Mohammed Mehdi Bensaid, a signé, lundi à Genève, un protocole d’accord avec le Directeur général de l’Organisation Mondiale de la Propriété Intellectuelle (OMPI), M. Daren Tang. Cet accord vise à renforcer la coopération bilatérale dans le domaine de la propriété intellectuelle, notamment ', 'size': 4}, {'id': '247', 'title': "Genève : Le Maroc et l'OMPI renforcent la protection juridique du patrimoine\xa0culturel national", 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/171105/geneve-maroc-l-ompi-renforcent-protection.html', 'summary': "Genève : Le Maroc et l'OMPI renforcent la protection juridique du patrimoine culturel national. Le ministre de la Jeunesse, de la culture et de la communication, Mohammed Mehdi Bensaid, a signé, lundi à Genève, un protocole daccord avec le directeur général de lOrganisation mondiale de la propriété intellectuelle (OMPI), Daren Tang.", 'size': 4}], 'main_title': 'Propriété intellectuelle : un accord pour la protection juridique du patrimoine culturel marocain'}, {'community_id': '4', 'articles': [{'id': '92', 'title': 'Le personnel de santé sera porté à plus de 90.000 d’ici à 2026, promet Akhannouch', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/le-personnel-de-sante-sera-porte-a-plus-de-90-000-dici-a-2026-promet-akhannouch-306268/', 'summary': 'Le personnel de santé sera porté à plus de 90.000 d’ici à 2026, promet Akhannouch. Le gouvernement œuvre à augmenter progressivement le nombre du personnel de santé à plus de 90.000 à l’horizon 2026, a affirmé le chef du gouvernement, Aziz Akhannouch, lors d’une séance de politique générale à la Chambre des représentants, lundi 7 juillet. Pour ce faire, l’exécutif a mis au point un', 'size': 5}, {'id': '113', 'title': 'Le gouvernement veille au renforcement de l’offre de soins et à la consolidation des infrastructures sanitaires', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/actualite/le-gouvernement-veille-au-renforcement-de-loffre-de-soins-et-a-la-consolidation-des-infrastructures-sanitaires', 'summary': 'Le gouvernement veille au renforcement de l’offre de soins et à la consolidation des infrastructures sanitaires. Le gouvernement veille au renforcement de l’offre de soins et à la consolidation des infrastructures sanitaires selon une vision ambitieuse, a affirmé, lundi à la Chambre de Représentants, le Chef du gouvernement, Aziz Akhannouch. Intervenant à la séance plénière consacrée aux questions adressées au Chef du gouvernement sur la politique générale et axée sur « Le .', 'size': 4}, {'id': '126', 'title': 'Personnel de la santé : Plus de 90.000 à l’horizon 2026', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/au-royaume/personnel-de-la-sante-plus-de-90-000-a-lhorizon-2026/', 'summary': 'Personnel de la santé : Plus de 90.000 à l’horizon 2026. Le gouvernement vise à augmenter graduellement le nombre du personnel de santé à plus de 90.000 à l’horizon 2026, a affirmé, lundi, le chef du gouvernement, Aziz Akhannouch.', 'size': 4}, {'id': '239', 'title': "Santé : le gouvernement vise 90.000 professionnels de santé à l'horizon 2026", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/07/08/sante-le-gouvernement-vise-90-000-professionnels-de-sante-a-lhorizon-2026_1941371/', 'summary': "Santé : le gouvernement vise 90.000 professionnels de santé à l'horizon 2026. Le gouvernement vise à augmenter graduellement le nombre du personnel de santé à plus de 90.000 à l’horizon 2026, a affirmé, lundi, le chef du gouvernement, Aziz Akhannouch. Dans un exposé présenté lors de la séance plénière consacrée aux questions orales sur la politique générale, axée sur « le système sanitaire national, entre les réalisations actuelles.", 'size': 5}, {'id': '273', 'title': 'Santé : un plan pour atteindre plus de 90\u202f000 agents médicaux à\xa0l’horizon\xa02026', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/sante-un-plan-pour-atteindre-plus-de-90-000-agents-medicaux-a-lhorizon-2026/', 'summary': 'Santé : un plan pour atteindre plus de 90 000 agents médicaux à l’horizon 2026. Le gouvernement vise à augmenter graduellement le nombre du personnel de santé à plus de 90.000 à l’horizon 2026, a affirmé, lundi, le chef du gouvernement, Aziz Akhannouch. Dans un exposé présenté lors de la séance plénière consacrée aux questions orales sur la politique générale, axée sur « le système sanitaire national, entre les réalisations actuelles .', 'size': 5}], 'main_title': 'Le personnel de santé sera porté à plus de 90.000 d’ici à 2026, promet Akhannouch'}, {'community_id': '12', 'articles': [{'id': '97', 'title': 'Bank of Africa UK doublement primée aux Business Chamber Awards', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/bank-of-africa-uk-doublement-primee-aux-business-chamber-awards-306236/', 'summary': 'Bank of Africa UK doublement primée aux Business Chamber Awards. Bank of Africa UK a été distinguée par deux prix prestigieux lors de la cérémonie des Business Chamber Awards, organisée récemment à Londres, indique la banque mère à Casablanca. La cérémonie s’est tenue en présence de plusieurs ambassadeurs africains, de hauts responsables britanniques, de maires d’origine africaine ainsi que de', 'size': 3}, {'id': '167', 'title': 'BANK OF AFRICA UK doublement primée aux Business Chamber Awards à Londres', 'source': 'leseco.ma', 'link': 'https://leseco.ma/business/bank-of-africa-uk-doublement-primee-aux-business-chamber-awards-a-londres.html', 'summary': 'BANK OF AFRICA UK doublement primée aux Business Chamber Awards à Londres. Lors de la prestigieuse cérémonie des Business Chamber Awards, tenue le 3 juillet 2025 à l’hôtel Millennium à Londres, BANK OF AFRICA UK s’est illustrée en recevant deux distinctions majeures, en présence de plusieurs ambassadeurs africains, de hauts responsables britanniques, de maires d’origine africaine ainsi que de figures influentes du monde des affaires et de la culture africaine. ', 'size': 3}, {'id': '298', 'title': 'BANK OF AFRICA UK distinguée à Londres lors des Business Chamber Awards 2025', 'source': 'lnt.ma', 'link': 'https://lnt.ma/bank-of-africa-uk-distinguee-a-londres-lors-des-business-chamber-awards-2025/', 'summary': 'BANK OF AFRICA UK distinguée à Londres lors des Business Chamber Awards 2025. BANK OF AFRICA UK a été doublement primée lors de la cérémonie des Business Chamber Awards, tenue le 3 juillet à l’hôtel Millennium à Londres, en présence d’un large panel de personnalités issues du monde diplomatique, politique et économique. Étaient notamment présents plusieurs ambassadeurs africains, des responsables britanniques de haut niveau, des maires d’origine africaine . ', 'size': 3}], 'main_title': 'Bank of Africa UK doublement primée aux Business Chamber Awards'}, {'community_id': '1', 'articles': [{'id': '109', 'title': 'Maroc-Allemagne : Premier entretien entre Nasser Bourita et  Johann Wadephul', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/171074/maroc-allemagne-premier-entretien-entre-nasser.html', 'summary': 'Maroc-Allemagne : Premier entretien entre Nasser Bourita et Johann Wadephul. Le ministre des Affaires étrangères, Nasser Bourita, a échangé ce lundi 7 juillet par téléphone avec son nouvel homologue allemand, Johann David Wadephul, récemment nommé le 6 mai. «Cet entretien inaugural a permis de souligner lexcellence des relations entre le Royaume du Maroc et la République Fédérale dAllemagne, tout en réaffirmant lengagement des deux nations à maintenir la dynamique positive de leur coopération bilatérale», indique la diplomatie marocaine dans un communiqué.', 'size': 4}, {'id': '124', 'title': 'Rabat et Berlin se projettent vers un partenariat stratégique tourné vers l’avenir', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/pouvoirs/diplomatie/rabat-et-berlin-se-projettent-vers-un-partenariat-strategique-tourne-vers-lavenir/', 'summary': "Rabat et Berlin se projettent vers un partenariat stratégique tourné vers l’avenir. Dans un entretien téléphonique, le premier du genre du nouveau Chef de la diplomatie allemande, avec le ministre des Affaires étrangères, Naser Bourita, les deux parties ont salué l'excellence des relations bilatérales, tout en réaffirmant l'engagement des deux pays à poursuivre la dynamique positive qui caractérise leur relation bilatérale.", 'size': 2}, {'id': '151', 'title': 'Diplomatie : Le nouveau ministre allemand salue le partenariat maroco-allemand', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/diplomatie-le-nouveau-ministre-allemand-salue-le-partenariat-maroco-allemand/', 'summary': 'Diplomatie : Le nouveau ministre allemand salue le partenariat maroco-allemand. Le nouveau ministre allemand des Affaires étrangères, Johann David Wadephul, a salué, lundi, la collaboration étroite entre son pays et le Royaume du Maroc dans divers domaines tels que, l’économie, l’énergie et l’emploi. Dans un entretien téléphonique, le premier du genre du nouveau Chef de la diplomatie allemande, avec le ministre des Affaires étrangères, de .', 'size': 5}, {'id': '228', 'title': 'Le nouveau chef de la diplomatie allemande salue la collaboration étroite entre Berlin et Rabat', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Le-nouveau-chef-de-la-diplomatie-allemande-salue-la-collaboration-etroite-entre-Berlin-et-Rabat_a69586.html', 'summary': "Le nouveau chef de la diplomatie allemande salue la collaboration étroite entre Berlin et Rabat. Le nouveau ministre allemand des Affaires étrangères, Johann David Wadephul, a salué, lundi, la collaboration étroite entre son pays et le Royaume du Maroc dans divers domaines tels que, l'économie, l'énergie et l'emploi.", 'size': 4}, {'id': '294', 'title': 'Le ministre allemand des Affaires étrangères salue la collaboration étroite entre Berlin et Rabat dans divers domaines', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/le-ministre-allemand-des-affaires-etrangeres-salue-la-collaboration-etroite-entre-berlin-et-rabat-dans-divers-domaines.html', 'summary': "Le ministre allemand des Affaires étrangères salue la collaboration étroite entre Berlin et Rabat dans divers domaines. Le nouveau ministre allemand des Affaires étrangères, Johann David Wadephul, a salué lundi, la collaboration étroite entre son pays et le Royaume du Maroc dans divers domaines tels que, l'économie, l'énergie et l'emploi. L’article est apparu en premier sur .", 'size': 4}], 'main_title': 'Diplomatie : Le nouveau ministre allemand salue le partenariat maroco-allemand'}, {'community_id': '11', 'articles': [{'id': '119', 'title': 'Renforcement des relations sino-arabes : L’ Université Tsinghua en Chine lance sa première bourse aux étudiants arabes', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/societe/renforcement-des-relations-sino-arabes-l-universite-tsinghua-en-chine-lance-sa-premiere-bourse-aux-etudiants-arabes', 'summary': 'Renforcement des relations sino-arabes : L’ Université Tsinghua en Chine lance sa première bourse aux étudiants arabes. Ce programme financera chaque année, pendant : cinq ans, jusqu’à 15 étudiants suivant un cursus de premier ou deuxième cycle à l’Université Tsinghua en Chine. Programme : Le programme de bourses Hazem Ben-Gacem destiné aux étudiants arabes débutera lors de l’année universitaire 2025-2026 . Cette bourse renforce les liens entre les États arabes et la .', 'size': 2}, {'id': '198', 'title': 'Une première bourse destinée aux étudiants arabes de l’université Tsinghua en Chine', 'source': 'lnt.ma', 'link': 'https://lnt.ma/une-premiere-bourse-destinee-aux-etudiants-arabes-de-luniversite-tsinghua-en-chine/', 'summary': 'Une première bourse destinée aux étudiants arabes de l’université Tsinghua en Chine. D’éminents ambassadeurs, dignitaires et responsables universitaires se sont réunis le jeudi 26 juin dernier, à l’université Tsinghua en Chine pour marquer le lancement officiel du programme de bourses Hazem Ben-Gacem destiné aux étudiants arabes, une initiative historique visant à faire bénéficier à des étudiants des pays de la Ligue Arabe d’un enseignement mondialement reconnu, tout . ', 'size': 2}], 'main_title': 'Renforcement des relations sino-arabes : L’ Université Tsinghua en Chine lance sa première bourse aux étudiants arabes'}, {'community_id': '14', 'articles': [{'id': '165', 'title': 'Attijari Payment lance officiellement son activité d’acquisition commerçants', 'source': 'leseco.ma', 'link': 'https://leseco.ma/business/attijari-payment-lance-officiellement-son-activite-dacquisition-commercants.html', 'summary': 'Attijari Payment lance officiellement son activité d’acquisition commerçants. Attijari Payment annonce le lancement officiel de son activité d’acquisition commerçants, effective depuis le 1ᵉʳ mai 2025. Cette initiative s’inscrit dans le cadre de l’évolution de l’écosystème des paiements au Maroc, en réponse aux réformes réglementaires du secteur et aux besoins des commerçants et des entreprises de toutes tailles. ', 'size': 3}, {'id': '242', 'title': 'Attijari Payment lance son activité d’acquisition commerçants au Maroc', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/attijari-payment-lance-son-activite-dacquisition-commercants-au-maroc-306293/', 'summary': 'Attijari Payment lance son activité d’acquisition commerçants au Maroc. Attijari Payment a officiellement lancé son activité d’acquisition commerçants depuis le 1er mai 2025, consolidant son positionnement dans l’écosystème marocain des paiements électroniques. Cette démarche s’inscrit dans le prolongement des réformes réglementaires engagées dans le secteur et vise à répondre aux besoins croissants des commerçants et des entreprises, quelle que', 'size': 3}, {'id': '300', 'title': 'Attijari Payment démarre officiellement son activité d’acquisition commerçants', 'source': 'lnt.ma', 'link': 'https://lnt.ma/attijari-payment-demarre-officiellement-son-activite-dacquisition-commercants/', 'summary': 'Attijari Payment démarre officiellement son activité d’acquisition commerçants. Attijari Payment a annoncé le lancement officiel de son activité d’acquisition commerçants, opérationnelle depuis le 1ᵉʳ mai 2025. Cette évolution s’inscrit dans le cadre des réformes réglementaires encadrant les établissements de paiement au Maroc et traduit une volonté d’accompagner la modernisation de l’écosystème des paiements, en phase avec les besoins croissants des commerçants et des . ', 'size': 3}], 'main_title': 'Attijari Payment lance officiellement son activité d’acquisition commerçants'}, {'community_id': '6', 'articles': [{'id': '234', 'title': 'Netanyahu présente le nom de Trump pour le prix Nobel de la Paix', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/07/08/netanyahu-presente-le-nom-de-trump-pour-le-prix-nobel-de-la-paix_1941416/', 'summary': 'Netanyahu présente le nom de Trump pour le prix Nobel de la Paix. Donald Trump, qui se dit déterminé à mettre fin à la guerre à Gaza, a reçu Benjamin Netanyahu à dîner à la Maison Blanche lundi soir, lequel a dit avoir présenté le président américain pour le Nobel de la Paix. La troisième visite à Washington du Premier ministre israélien M. Netanyahu depuis le retour au.', 'size': 2}, {'id': '245', 'title': 'Trump reçoit Netanyahu à la recherche d’un accord à Gaza', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/trump-recoit-netanyahu-a-la-recherche-dun-accord-a-gaza-306276/', 'summary': 'Trump reçoit Netanyahu à la recherche d’un accord à Gaza. Donald Trump, qui se dit déterminé à mettre fin à la guerre à Gaza, a reçu Benjamin Netanyahu à dîner à la Maison Blanche lundi soir, lequel a dit avoir présenté le président américain pour le Nobel de la Paix. La troisième visite à Washington du Premier ministre israélien M.', 'size': 2}], 'main_title': 'Netanyahu présente le nom de Trump pour le prix Nobel de la Paix'}, {'community_id': '10', 'articles': [{'id': '238', 'title': 'ONCF : le Maroc participe au Congrès mondial ferroviaire à Pékin', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/07/08/oncf-le-maroc-participe-au-congres-mondial-ferroviaire-a-pekin_1941364/', 'summary': 'ONCF : le Maroc participe au Congrès mondial ferroviaire à Pékin. La douzième édition du Congrès mondial sur la grande vitesse ferroviaire s’est ouverte mardi à Pékin sous le thème « la grande vitesse ferroviaire : innovation et développement pour une vie meilleure », avec la participation du Maroc. Organisé par l’Union internationale des chemins de fer (UIC), cet événement se déroule jusqu’à vendredi et réunit plus de.', 'size': 2}, {'id': '291', 'title': 'Pékin : ouverture du Congrès mondial sur la grande vitesse ferroviaire avec la participation du Maroc', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/pekin-ouverture-du-congres-mondial-sur-la-grande-vitesse-ferroviaire-avec-la-participation-du-maroc.html', 'summary': 'Pékin : ouverture du Congrès mondial sur la grande vitesse ferroviaire avec la participation du Maroc. La douzième édition du Congrès mondial sur la grande vitesse ferroviaire s\'est ouverte mardi à Pékin sous le thème "la grande vitesse ferroviaire: Innovation et développement pour une vie meilleure", avec la participation du Maroc. L’article est apparu en premier sur .', 'size': 2}], 'main_title': 'ONCF : le Maroc participe au Congrès mondial ferroviaire à Pékin'}, {'community_id': '9', 'articles': [{'id': '241', 'title': 'Trump annonce au moins 25% de surtaxe sur les produits de 14 pays, dont le Japon', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/trump-annonce-au-moins-25-de-surtaxe-sur-les-produits-de-14-pays-dont-le-japon-306297/', 'summary': 'Trump annonce au moins 25% de surtaxe sur les produits de 14 pays, dont le Japon. Le président américain Donald Trump a promis lundi une surtaxe douanière d’au moins 25% à plusieurs pays, dont le Japon et la Corée du Sud, nouvelle étape dans son offensive bouleversant les échanges économiques internationaux. Le dirigeant a distillé pendant la journée, sur sa plateforme Truth Social, 14 lettres quasiment', 'size': 2}, {'id': '274', 'title': 'Trump ravive la guerre commerciale : une surtaxe de 25% à 40% sur les produits de 14 pays', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/trump-ravive-la-guerre-commerciale-une-surtaxe-de-25-a-40-sur-les-produits-de-14-pays/', 'summary': 'Trump ravive la guerre commerciale : une surtaxe de 25% à 40% sur les produits de 14 pays. Dans un geste aux allures de bras de fer géopolitique, Donald Trump a lancé une salve commerciale qui pourrait redessiner les équilibres du commerce mondial. Lundi, le président américain a annoncé une surtaxe douanière d’au moins 25 % sur les produits provenant de 14 pays, parmi lesquels figurent le Japon, la Corée du Sud, la .', 'size': 2}], 'main_title': 'Trump annonce au moins 25% de surtaxe sur les produits de 14 pays, dont le Japon'}, {'community_id': '5', 'articles': [{'id': '244', 'title': 'Damancom : nouveau mode de connexion via e-ID ou OTP, délai prolongé pour les déclarations de juin', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/damancom-nouveau-mode-de-connexion-via-e-id-ou-otp-delai-prolonge-pour-les-declarations-de-juin-306280/', 'summary': 'Damancom : nouveau mode de connexion via e-ID ou OTP, délai prolongé pour les déclarations de juin. Le portail Damancom évolue. Désormais, l’accès au service en ligne de la CNSS destiné aux employeurs se fait via l’Identité Numérique (e-ID) de la DGSN ou, alternativement, par code à usage unique (OTP) envoyé par SMS — et, à titre exceptionnel ce mois-ci, par email. Cette transition vise à renforcer', 'size': 2}, {'id': '261', 'title': 'Connexion au portail Damancom : De nouvelles conditions d’accès', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/societe/connexion-au-portail-damancom-de-nouvelles-conditions-dacces', 'summary': 'Connexion au portail Damancom : De nouvelles conditions d’accès. La CNSS prolonge exceptionnellement jusqu’au 17 juillet 2025 le délai de déclaration et de paiement des cotisations, sans application de pénalité au titre du mois de juin 2025. Transition : Désormais, l’accès au portail Damancom se fait via l’identité numérique ( e-ID) de la DGSN ou par OTP ( code envoyé par SMS et à .', 'size': 2}], 'main_title': 'Damancom : nouveau mode de connexion via e-ID ou OTP, délai prolongé pour les déclarations de juin'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
                        
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ? d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        // Fonction pour cacher le tooltip
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = '';
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
    
    
</body>




</html>
    