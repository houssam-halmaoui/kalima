<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); 
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title"> Les principales actualités des dernières 24 heures

</div>    
        <div class="header-subtitle"> Dernière mise à jour : 14/09/2025 - 06h17</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"></div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '3', 'title': 'Lamine Yamal met en lumière le courage migratoire de sa grand-mère marocaine', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/441106-lamine-yamal-met-en-lumiere-le-courage-migratoire-de-sa-grand-mere-marocaine.html', 'summary': 'Lamine Yamal met en lumière le courage migratoire de sa grand-mère marocaine. Lamine Yamal s’est confié sur l’histoire familiale qui a façonné son parcours. Dans une récente interview sur YouTube, le jeune prodige du FC Barcelone a raconté le rôle déterminant de sa grand-mère paternelle, partie seule du Maroc vers l’Espagne pour offrir un avenir meilleur à sa famille. « Elle est arrivée seule à Mataró et . ', 'size': 2}, {'id': '64', 'title': 'Lamine Yamal révèle le parcours migratoire inspirant de sa grand-mère marocaine', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/176258/lamine-yamal-revele-parcours-migratoire.html', 'summary': 'Lamine Yamal révèle le parcours migratoire inspirant de sa grand-mère marocaine. La star montante du FC Barcelone, Lamine Yamal, a partagé des détails émouvants sur l’histoire migratoire de sa famille lors dune interview jeudi, mettant en lumière le rôle déterminant joué par le courage de sa grand-mère marocaine dans sa carrière de footballeur.', 'size': 2}], 'main_title': 'Lamine Yamal met en lumière le courage migratoire de sa grand-mère marocaine'}, {'community_id': '2', 'articles': [{'id': '7', 'title': 'Mondiaux d’athlétisme à Tokyo : Soufiane El Bakkali et Salahdine Benyazid qualifiés pour la finale du 3000 m steeple', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/441097-mondiaux-dathletisme-a-tokyo-soufiane-el-bakkali-et-salahdine-benyazid-qualifies-pour-la-finale-du-3000-m-steeple.html', 'summary': 'Mondiaux d’athlétisme à Tokyo : Soufiane El Bakkali et Salahdine Benyazid qualifiés pour la finale du 3000 m steeple. Le champion olympique et double tenant du titre mondial Soufiane El Bakkali a validé sans difficulté son billet pour la finale du 3000 m steeple aux Championnats du monde d’athlétisme, disputés dans la capitale japonaise. Auteur d’un chrono maîtrisé de 8:26.99, le Marocain a dominé sa série sans forcer son talent. Il sera accompagné en . ', 'size': 3}, {'id': '13', 'title': 'Mondiaux de Tokyo : Soufiane El Bakkali et Salaheddine Ben Yazide qualifiés pour la finale du 3.000 m steeple', 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/mondiaux-de-tokyo-el-bakkali-et-ben-yazide-qualifies-pour-la-finale/301351', 'summary': "Mondiaux de Tokyo : Soufiane El Bakkali et Salaheddine Ben Yazide qualifiés pour la finale du 3.000 m steeple. Soufiane El Bakkali s'est classé premier de la 3è série des qualifications avec un chrono de 8min 26sec 99/100è, devant l'Ethiopien Lamecha Girma (8:27.79) et l'América.", 'size': 3}, {'id': '31', 'title': 'Mondiaux de Tokyo: Soufiane El Bakkali et Salaheddine Ben Yazide qualifiés pour la finale du 3000 m steeple', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Mondiaux-de-Tokyo-Soufiane-El-Bakkali-et-Salaheddine-Ben-Yazide-qualifies-pour-la-finale-du-3000-m-steeple_a71703.html', 'summary': 'Mondiaux de Tokyo: Soufiane El Bakkali et Salaheddine Ben Yazide qualifiés pour la finale du 3000 m steeple. \u200bLe double champion du monde et olympique marocain Soufiane El Bakkali et son compatriote Salaheddine Ben Yazide se sont qualifiés, samedi, pour la finale du concours du 3000 m steeple, disputé dans le cadre des 20es championnats du monde d’athlétisme, qui se tiennent jusqu’au 21 septembre à Tokyo.', 'size': 4}, {'id': '109', 'title': 'Mondiaux d’Athlétisme | El Bakkali et Ben Yazide qualifiés pour la finale du 3.000 m steeple', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/mondiaux-dathletisme-el-bakkali-et-ben-yazide-qualifies-pour-la-finale-du-3-000-m-steeple/', 'summary': 'Mondiaux d’Athlétisme | El Bakkali et Ben Yazide qualifiés pour la finale du 3.000 m steeple. Le double champion du monde et olympique marocain Soufiane El Bakkali et son compatriote Salaheddine Ben Yazide se sont qualifiés, samedi, pour la finale du concours du 3000 m steeple, disputé dans le cadre des 20es championnats du monde d’athlétisme, qui se tiennent jusqu’au 21 septembre à Tokyo. El Bakkali s’est classé premier de la ', 'size': 4}], 'main_title': 'Mondiaux de Tokyo: Soufiane El Bakkali et Salaheddine Ben Yazide qualifiés pour la finale du 3000 m steeple'}, {'community_id': '4', 'articles': [{'id': '32', 'title': "Camps de Tindouf : des ONG alertent sur la persistance de l'esclavage", 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Camps-de-Tindouf-des-ONG-alertent-sur-la-persistance-de-l-esclavage_a71702.html', 'summary': "Camps de Tindouf : des ONG alertent sur la persistance de l'esclavage. Des ONG ont attiré l’attention de la communauté internationale, vendredi à la 60e session du Conseil des droits de l’Homme (CDH) à Genève, sur des pratiques esclavagistes persistantes dans les camps de Tindouf.", 'size': 2}, {'id': '107', 'title': 'CDH | Des ONG alertent sur la persistance de l’esclavage dans les camps de Tindouf', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/cdh-des-ong-alertent-sur-la-persistance-de-lesclavage-dans-les-camps-de-tindouf/', 'summary': 'CDH | Des ONG alertent sur la persistance de l’esclavage dans les camps de Tindouf. Des ONG ont attiré l’attention de la communauté internationale, vendredi à la 60e session du Conseil des droits de l’Homme (CDH) à Genève, sur des pratiques esclavagistes persistantes dans les camps de Tindouf. S’exprimant lors du dialogue interactif avec le Rapporteur spécial sur les formes contemporaines de l’esclavage, la juriste Lucia Ferreyra Perea a dénoncé ', 'size': 2}], 'main_title': "Camps de Tindouf : des ONG alertent sur la persistance de l'esclavage"}, {'community_id': '5', 'articles': [{'id': '33', 'title': 'Maroc-Finland : Entretiens parlementaires en plein rapprochement politique', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Maroc-Finland-Entretiens-parlementaires-en-plein-rapprochement-politique_a71701.html', 'summary': 'Maroc-Finland : Entretiens parlementaires en plein rapprochement politique. Le président de la Chambre des représentants, Rachid Talbi El Alami, accompagné d’une délégation parlementaire, a eu, vendredi à Helsinki, une série d’entretiens avec des responsables parlementaires et gouvernementaux de la République de Finlande.', 'size': 2}, {'id': '106', 'title': 'Diplomatie parlementaire | M. Talbi El Alami s’entretient avec des responsables finlandais', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/diplomatie-parlementaire-m-talbi-el-alami-sentretient-avec-des-responsables-finlandais/', 'summary': 'Diplomatie parlementaire | M. Talbi El Alami s’entretient avec des responsables finlandais. Le président de la Chambre des représentants, Rachid Talbi El Alami, accompagné d’une délégation parlementaire, a eu, vendredi à Helsinki, une série d’entretiens avec des responsables parlementaires et gouvernementaux de la République de Finlande. M. Talbi El Alami et la délégation l’accompagnant ont tenu des réunions de travail avec le président du parlement de Finlande, ', 'size': 2}], 'main_title': 'Maroc-Finland : Entretiens parlementaires en plein rapprochement politique'}, {'community_id': '6', 'articles': [{'id': '53', 'title': 'Les billets pour la CAN 2025 en vente à partir du 25 septembre', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/09/12/les-billets-pour-la-can-2025-en-vente-a-partir-du-25-septembre_1950363/', 'summary': 'Les billets pour la CAN 2025 en vente à partir du 25 septembre. À l’occasion du compte à rebours des 100 jours avant le coup d’envoi de la Coupe d’Afrique des Nations TotalEnergies Maroc 2025, la Confédération africaine de football (CAF) et le Comité local d’organisation (COL) ont annoncé vendredi le processus de vente des billets ainsi qu’une série d’initiatives destinées à améliorer l’expérience des supporters. Les billets.', 'size': 2}, {'id': '88', 'title': 'CAN Maroc-2025: La vente des billets débute le 25 septembre', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/can-maroc-2025-la-vente-des-billets-debute-le-25-septembre/', 'summary': 'CAN Maroc-2025: La vente des billets débute le 25 septembre. La vente des billets de la Coupe d’Afrique des Nations (CAN) de football Maroc-2025 débutera le 25 septembre, après une phase d’inscription préalable entre le 12 et le 24 septembre, ont annoncé la Confédération Africaine de Football (CAF) et le Comité Local d’Organisation (LOC), vendredi, à 100 jours du coup d’envoi de cette compétition. « La .', 'size': 2}], 'main_title': 'Les billets pour la CAN 2025 en vente à partir du 25 septembre'}, {'community_id': '7', 'articles': [{'id': '55', 'title': 'Irlande-Maroc: un guide pour renforcer les relations économiques', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/irlande-maroc-un-guide-pour-renforcer-les-relations-economiques-309933/', 'summary': 'Irlande-Maroc: un guide pour renforcer les relations économiques. L’Irlande vient de publier un guide « Doing Business in Morocco », à destination des entreprises irlandaises désireuses de s’implanter ou de renforcer leur présence au Maroc. Conçu par Enterprise Ireland, l’agence publique chargée du développement économique et du soutien aux exportations, ce document se présente comme une feuille de', 'size': 2}, {'id': '62', 'title': "L'Irlande publie un guide «Doing Business» au Maroc pour les entreprises irlandaises", 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/176262/l-irlande-publie-guide-doing-business.html', 'summary': "L'Irlande publie un guide «Doing Business» au Maroc pour les entreprises irlandaises. LIrlande vient de publier un guide intitulé «Doing Business», destiné aux entreprises irlandaises souhaitant simplanter ou sétendre sur le marché marocain. Ce document, conçu comme une feuille de route, a été élaboré par Enterprise Ireland, lagence nationale de développement économique, qui soutient les entreprises irlandaises dans leurs efforts dexportation.", 'size': 2}], 'main_title': 'Irlande-Maroc: un guide pour renforcer les relations économiques'}, {'community_id': '8', 'articles': [{'id': '56', 'title': 'Le dirham remonte face au dollar et à l’euro', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/le-dirham-remonte-face-au-dollar-et-a-leuro-309927/', 'summary': 'Le dirham remonte face au dollar et à l’euro. Le dirham s’est apprécié de 0,6% face au dollar américain et de 0,2% vis-à-vis de l’euro durant la période du 4 au 10 septembre 2025, indique le bulletin des indicateurs hebdomadaires de Bank Al-Maghrib (BAM), publié vendredi 12 septembre. Au cours de cette période, le marché des changes n’a enregistré', 'size': 2}, {'id': '84', 'title': 'Le dirham s’apprécie de 0,6% face au dollar du 4 au 10 septembre (BAM)', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/le-dirham-sapprecie-de-06-face-au-dollar-du-4-au-10-septembre-bam/', 'summary': 'Le dirham s’apprécie de 0,6% face au dollar du 4 au 10 septembre (BAM). Le dirham s’est apprécié de 0,6% face au dollar américain et de 0,2% vis-à-vis de l’euro durant la période du 4 au 10 septembre 2025, selon Bank Al-Maghrib (BAM). Au cours de cette période, aucune opération d’adjudication n’a été réalisée sur le marché des changes, indique BAM dans son récent bulletin des indicateurs hebdomadaires. Les .', 'size': 2}], 'main_title': 'Le dirham remonte face au dollar et à l’euro'}, {'community_id': '9', 'articles': [{'id': '57', 'title': 'Pêche: le Maroc continuera à exporter ses produits vers les USA', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/peche-le-maroc-continuera-a-exporter-ses-produits-vers-les-usa-309921/', 'summary': 'Pêche: le Maroc continuera à exporter ses produits vers les USA. Le Maroc a obtenu la reconnaissance officielle de l’Administration nationale américaine des océans et de l’atmosphère (NOAA Fisheries), confirmant la conformité de ses pêcheries aux dispositions législatives américaines du Marine Mammal Protection Act. L’accréditation entre en vigueur à partir de janvier 2026 et reste valide jusqu’à décembre 2029. Cela constitue', 'size': 4}, {'id': '85', 'title': 'Pêche/Conformité : Le Maroc obtient la reconnaissance officielle de l’Administration Nationale Américaine des Océans et de l’Atmosphère', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/peche-conformite-le-maroc-obtient-la-reconnaissance-officielle-de-ladministration-nationale-americaine-des-oceans-et-de-latmosphere/', 'summary': 'Pêche/Conformité : Le Maroc obtient la reconnaissance officielle de l’Administration Nationale Américaine des Océans et de l’Atmosphère. Le Maroc a obtenu la reconnaissance officielle de l’Administration Nationale Américaine des Océans et de l’Atmosphère (NOAA Fisheries), confirmant la conformité de ses pêcheries aux dispositions législatives américaines du Marine Mammal Protection Act, a annoncé, vendredi, le Secrétariat d’État chargé de la Pêche maritime. Cette accréditation qui va entrer en vigueur à partir du 1er .', 'size': 4}, {'id': '110', 'title': 'Pêche : Le Maroc reconnu officiellement par la NOAA américaine', 'source': 'lnt.ma', 'link': 'https://lnt.ma/peche-le-maroc-reconnu-officiellement-par-la-noaa-americaine/', 'summary': 'Pêche : Le Maroc reconnu officiellement par la NOAA américaine. Le Maroc a obtenu la reconnaissance officielle de la NOAA Fisheries (Administration nationale océanique et atmosphérique des États-Unis), confirmant la conformité de ses pêcheries aux exigences du Marine Mammal Protection Act (MMPA), a annoncé, vendredi 12 septembre 2025, le Secrétariat d’État chargé de la Pêche maritime à Rabat. Cette accréditation, qui couvre la période du . ', 'size': 4}, {'id': '123', 'title': 'Export : Les États-Unis ouvrent leurs portes aux poissons marocains', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Export-Les-Etats-Unis-ouvrent-leurs-portes-aux-poissons-marocains_a71716.html', 'summary': "Export : Les États-Unis ouvrent leurs portes aux poissons marocains. Le Maroc a obtenu la reconnaissance officielle de l'Administration Nationale Américaine des Océans et de l'Atmosphère (NOAA Fisheries), confirmant la conformité de ses pêcheries aux dispositions législatives américaines du Marine Mammal Protection Act, a annoncé, vendredi, le Secrétariat d'État chargé de la Pêche maritime.", 'size': 4}], 'main_title': 'Pêche: le Maroc continuera à exporter ses produits vers les USA'}, {'community_id': '3', 'articles': [{'id': '58', 'title': 'Les prévisions du samedi 13 septembre 2025', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/les-previsions-du-samedi-13-septembre-2025-309916/', 'summary': 'Les prévisions du samedi 13 septembre 2025. Voici les prévisions météorologiques établies par la Direction générale de la météorologie pour le samedi 13 septembre 2025: – Temps assez chaud sur les plaines de Tadla, Rhamna, le Sud-Est et l’extrême Sud du pays. – Nuages bas assez denses près des côtes avec formations brumeuses ou bruine par endroits.', 'size': 2}, {'id': '114', 'title': "Le temps qu'il fera ce dimanche 14 septembre 2025", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/441125-le-temps-quil-fera-ce-dimanche-14-septembre-2025.html', 'summary': "Le temps qu'il fera ce dimanche 14 septembre 2025. Voici les prévisions météorologiques établies par la Direction générale de la météorologie pour le dimanche 14 septembre 2025 – Temps assez chaud sur les plaines de Tadla, Rhamna, le Souss, le Sud-Est et l’intérieur des provinces sahariennes. – Formations brumeuses par endroits sur les côtes Nord et Centre et le Nord-Ouest des provinces sahariennes la . ", 'size': 2}], 'main_title': 'Les prévisions du samedi 13 septembre 2025'}, {'community_id': '1', 'articles': [{'id': '66', 'title': 'Laâyoune-Sakia El Hamra: M. Tehraoui s’informe de l’état d’avancement de plusieurs projets de santé', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/actualite/laayoune-sakia-el-hamra-m-tehraoui-sinforme-de-letat-davancement-de-plusieurs-projets-de-sante', 'summary': 'Laâyoune-Sakia El Hamra: M. Tehraoui s’informe de l’état d’avancement de plusieurs projets de santé. Le ministre de la Santé et de la Protection sociale, Amine Tehraoui, a effectué, vendredi, une visite de terrain pour assurer le suivi de l’avancement des travaux de construction du Centre Hospitalier Universitaire (CHU) de Laâyoune et s’informer du fonctionnement des établissements de santé existants ainsi que des projets en cours dans la région de .', 'size': 2}, {'id': '79', 'title': 'Santé : Tahraoui s’enquiert de l’avancement des projets hospitaliers dans la région de Laâyoune', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/au-royaume/sante-tehraoui-senquiert-de-lavancement-des-projets-hospitaliers-dans-la-region-de-laayoune/', 'summary': 'Santé : Tahraoui s’enquiert de l’avancement des projets hospitaliers dans la région de Laâyoune. Au cours d’une visite de suivi des chantiers des infrastructures sanitaires de la région Laâyoune-Sakia El Hamra, le ministre de la Santé a insisté sur l’impératif de veiller au respect des normes et des délais de réalisation.', 'size': 2}], 'main_title': 'Laâyoune-Sakia El Hamra: M. Tehraoui s’informe de l’état d’avancement de plusieurs projets de santé'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
                        
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ? d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        // Fonction pour cacher le tooltip
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = '';
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
    
    
</body>




</html>
    