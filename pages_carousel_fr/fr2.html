<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); 
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title"> Les principales actualités des dernières 24 heures

</div>    
        <div class="header-subtitle"> Dernière mise à jour : 14/10/2025 - 18h30</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"></div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '13', 'articles': [{'id': '2', 'title': 'ElleMoutmir : Plus de 1.600 femmes rurales accompagnées par OCP pour une agriculture durable', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/445312-ellemoutmir-plus-de-1-600-femmes-rurales-accompagnees-par-ocp-pour-une-agriculture-durable.html', 'summary': 'ElleMoutmir : Plus de 1.600 femmes rurales accompagnées par OCP pour une agriculture durable. À l’occasion de la Journée internationale des femmes rurales, célébrée le 13 octobre à l’Université Mohammed VI Polytechnique (UM6P) de Benguérir sous le thème « Coopératives agricoles portées par les femmes : le pouvoir collectif pour une agriculture durable et inclusive en Afrique », l’initiative Al Moutmir d’OCP met à l’honneur un pilier central du . ', 'size': 2}, {'id': '288', 'title': 'OCP\xa0: ElleMoutmir, l’autonomisation des femmes rurales par l’agriculture inclusive', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/178741/ellemoutmir-l-autonomisation-femmes-rurales-l-agriculture.html', 'summary': 'OCP : ElleMoutmir, l’autonomisation des femmes rurales par l’agriculture inclusive. Al Moutmir a organisé, lundi 13 octobre, une journée sur le thème «Coopératives agricoles portées par les femmes – le pouvoir collectif pour une agriculture durable et inclusive en Afrique». A l’occasion de la Journée internationale des femmes rurales, l’évènement a mis en lumière le rôle central des concitoyennes rurales «dans le développement agricole, la sécurité alimentaire et l’innovation sociale».', 'size': 2}], 'main_title': 'ElleMoutmir : Plus de 1.600 femmes rurales accompagnées par OCP pour une agriculture durable'}, {'community_id': '9', 'articles': [{'id': '4', 'title': 'Baitas : le gouvernement a répondu à environ 23.000 questions écrites, soit 70%', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/445292-baitas-le-gouvernement-a-repondu-a-environ-23-000-questions-ecrites-soit-70.html', 'summary': 'Baitas : le gouvernement a répondu à environ 23.000 questions écrites, soit 70%. Le ministre délégué chargé des relations avec le Parlement, porte-parole du gouvernement, Mustapha Baitas, a affirmé que le taux d’interaction du gouvernement avec les questions écrites des deux chambres du Parlement a atteint 70% depuis le début de la législature jusqu’au 9 octobre. En réponse à une question orale, lundi à la Chambre des représentants, . ', 'size': 3}, {'id': '58', 'title': "Le taux d'interaction du gouvernement avec les questions écrites du Parlement atteint 70%", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/10/14/le-taux-dinteraction-du-gouvernement-avec-les-questions-ecrites-du-parlement-atteint-70_1955650/', 'summary': "Le taux d'interaction du gouvernement avec les questions écrites du Parlement atteint 70%. Le taux d’interaction du gouvernement avec les questions écrites des deux chambres du Parlement a atteint 70% depuis le début de la législature jusqu’au 9 octobre, a affirmé, lundi à la Chambre des représentants, le ministre délégué chargé des relations avec le Parlement, porte-parole du gouvernement, Mustapha Baitas. En réponse à une question orale sur.", 'size': 2}, {'id': '122', 'title': 'Baitas : «\xa0Le taux d’interaction du gouvernement avec les questions écrites du Parlement atteint 70%\xa0»', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/au-royaume/baitas-le-taux-dinteraction-du-gouvernement-avec-les-questions-ecrites-du-parlement-atteint-70/', 'summary': 'Baitas : « Le taux d’interaction du gouvernement avec les questions écrites du Parlement atteint 70% ». Le gouvernement a répondu à environ 23.000 questions écrites sur un total de 33.000 posées par les députés et les conseillers parlementaires.', 'size': 2}], 'main_title': 'Baitas : le gouvernement a répondu à environ 23.000 questions écrites, soit 70%'}, {'community_id': '11', 'articles': [{'id': '13', 'title': "Les précisions d'El Midaoui sur la suppression des projets de fin d’études de licence", 'source': 'lematin.ma', 'link': 'https://lematin.ma/enseignement/les-precisions-del-midaoui-sur-la-suppression-des-pfe-de-licence/307386', 'summary': "Les précisions d'El Midaoui sur la suppression des projets de fin d’études de licence. Lors de la séance parlementaire du 13 octobre, Azzedine El Midaoui, ministre de l’Enseignement supérieur, de la Recherche scientifique et de l’Innovation, a précisé que la décision.", 'size': 2}, {'id': '257', 'title': 'Azzedine El Midaoui : "La recherche reste au cœur du système d’enseignement supérieur"', 'source': 'telquel.ma', 'link': 'https://telquel.ma/2025/10/14/azzedine-el-midaoui-la-recherche-reste-au-coeur-du-systeme-denseignement-superieur_1955807', 'summary': 'Azzedine El Midaoui : "La recherche reste au cœur du système d’enseignement supérieur". Face aux interrogations des parlementaires, le ministre de l’Enseignement supérieur, de la Recherche scientifique et de l’Innovation, Azzedine El Midaoui, a tenu à rétablir la vérité : les projets de recherche au niveau du master sont toujours maintenus. Pour la licence, leur suppression en 2023 répondait à des raisons objectives liées à la formation des.', 'size': 2}], 'main_title': "Les précisions d'El Midaoui sur la suppression des projets de fin d’études de licence"}, {'community_id': '16', 'articles': [{'id': '21', 'title': 'S.M. le Roi préside la cérémonie de présentation et de lancement des travaux de réalisation du complexe industriel de "moteurs d’avions" du groupe Safran à Nouaceur', 'source': 'lematin.ma', 'link': 'https://lematin.ma/videos/lancement-des-travaux-du-complexe-de-moteurs-davions-du-groupe-safran/307370', 'summary': 'S.M. le Roi préside la cérémonie de présentation et de lancement des travaux de réalisation du complexe industriel de "moteurs d’avions" du groupe Safran à Nouaceur. Sa Majesté le Roi Mohammed VI, que Dieu L’assiste, accompagné de S.A.R. le Prince Héritier Moulay El Hassan, a présidé, lundi à Nouaceur, la cérémonie de présentation et de lanceme.', 'size': 5}, {'id': '68', 'title': "Nouaceur : le roi Mohammed VI lance les travaux de l'unité de production de moteurs d'avions du groupe Safran", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/10/13/nouaceur-le-roi-mohammed-vi-lance-les-travaux-de-lunite-de-production-de-moteurs-davions-du-groupe-safran_1955621/', 'summary': "Nouaceur : le roi Mohammed VI lance les travaux de l'unité de production de moteurs d'avions du groupe Safran. Le roi Mohammed VI accompagné du prince héritier Moulay El Hassan, a présidé, lundi à Nouaceur, la cérémonie de présentation et de lancement des travaux de réalisation du complexe industriel de « moteurs d’avions » du groupe Safran, un projet visant à renforcer la position du Maroc en tant que hub stratégique mondial de l’industrie aéronautique. Ce.", 'size': 5}, {'id': '91', 'title': 'Le Souverain lance les travaux de réalisation d’un complexe industriel de «\xa0moteurs d’avions\xa0» du groupe Safran', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/le-souverain-lance-les-travaux-de-realisation-dun-complexe-industriel-de-moteurs-davions-du-groupe-safran-311579/', 'summary': 'Le Souverain lance les travaux de réalisation d’un complexe industriel de « moteurs d’avions » du groupe Safran. Sa Majesté le Roi Mohammed VI, accompagné de SAR le Prince Héritier Moulay El Hassan, a présidé, lundi à Nouaceur, la cérémonie de présentation et de lancement des', 'size': 5}, {'id': '101', 'title': 'Avions : Mohammed VI préside le lancement des travaux du complexe de moteurs Safran', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/178713/avions-mohammed-preside-lancement-travaux.html', 'summary': 'Avions : Mohammed VI préside le lancement des travaux du complexe de moteurs Safran. Le roi Mohammed VI, accompagné de du prince héritier Moulay El Hassan, a présidé, lundi à Nouaceur, la cérémonie de présentation et de lancement des travaux de réalisation du complexe industriel de moteurs d’avions du groupe Safran, un projet structurant qui renforce la vocation du Maroc en tant que hub stratégique mondial de lindustrie aéronautique.', 'size': 5}, {'id': '199', 'title': 'Le Roi Mohammed VI lance à Nouaceur les travaux d’un complexe industriel Safran', 'source': 'lnt.ma', 'link': 'https://lnt.ma/le-roi-mohammed-vi-lance-a-nouaceur-les-travaux-dun-complexe-industriel-safran/', 'summary': 'Le Roi Mohammed VI lance à Nouaceur les travaux d’un complexe industriel Safran. Le Roi Mohammed VI, accompagné de SAR le Prince Héritier Moulay El Hassan, a présidé lundi à Nouaceur la cérémonie de présentation et de lancement des travaux d’un complexe industriel du groupe Safran consacré aux moteurs d’avions. Implanté au sein de la plateforme Midparc, ce projet comprend une unité d’assemblage et de test des moteurs . ', 'size': 5}], 'main_title': 'S.M. le Roi préside la cérémonie de présentation et de lancement des travaux de réalisation du complexe industriel de "moteurs d’avions" du groupe Safran à Nouaceur'}, {'community_id': '4', 'articles': [{'id': '23', 'title': 'Akhannouch appelle à renforcer la coordination entre les services publics et l’Institution du Médiateur', 'source': 'lematin.ma', 'link': 'https://lematin.ma/nation/appel-a-renforcer-la-coordination-services-publicsinstitution-du-mediateur/307358', 'summary': 'Akhannouch appelle à renforcer la coordination entre les services publics et l’Institution du Médiateur. Dans une note adressée aux ministres, ministres délégués, secrétaires d’État, hauts commissaires et au délégué général, M. Akhannouch a insisté sur la nécessité de renforcer les mé.', 'size': 4}, {'id': '35', 'title': 'Le Chef du gouvernement appelle à plus de coordination entre les services publics et l’Institution du Médiateur', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Le-Chef-du-gouvernement-appelle-a-plus-de-coordination-entre-les-services-publics-et-l-Institution-du-Mediateur_a72806.html', 'summary': 'Le Chef du gouvernement appelle à plus de coordination entre les services publics et l’Institution du Médiateur. \u200bLe Chef du gouvernement, Aziz Akhannouch, a appelé lundi à renforcer la coordination, la coopération et la communication entre l’ensemble des services publics et l’Institution du Médiateur du Royaume.', 'size': 4}, {'id': '62', 'title': 'Akhannouch appelle à plus de coordination entre les services publics et l’Institution du Médiateur', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/10/14/akhannouch-appelle-a-plus-de-coordination-entre-les-services-publics-et-linstitution-du-mediateur_1955643/', 'summary': 'Akhannouch appelle à plus de coordination entre les services publics et l’Institution du Médiateur. Le Chef du gouvernement, Aziz Akhannouch, a appelé lundi à renforcer la coordination, la coopération et la communication entre l’ensemble des services publics et l’Institution du Médiateur du Royaume. Dans une note adressée aux ministres, ministres délégués, secrétaires d’Etat, hauts commissaires, et au délégué général, Akhannouch a souligné la nécessité d’appuyer les mécanismes susceptibles de.', 'size': 3}, {'id': '128', 'title': 'Médiateur du Royaume: Aziz Akhannouch incite les membres du gouvernement à coordonner davantage avec l’Institution', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/pouvoirs/mediateur-du-royaume-aziz-akhannouch-incite-les-membres-du-gouvernement-a-coordonner-davantage-avec-linstitution/', 'summary': 'Médiateur du Royaume: Aziz Akhannouch incite les membres du gouvernement à coordonner davantage avec l’Institution. Le Chef du gouvernement a tenu à mettre en avant le rôle majeur de l’Institution du Médiateur du Royaume en tant que mécanisme institutionnel de règlement des différends entre les usagers et l’administration.', 'size': 3}], 'main_title': 'Akhannouch appelle à renforcer la coordination entre les services publics et l’Institution du Médiateur'}, {'community_id': '7', 'articles': [{'id': '27', 'title': '450 personnes ont bénéficié des peines alternatives, 9 réincarcérées pour refus d’exécution', 'source': 'lematin.ma', 'link': 'https://lematin.ma/nation/450-personnes-ont-beneficie-des-peines-alternatives/307346', 'summary': '450 personnes ont bénéficié des peines alternatives, 9 réincarcérées pour refus d’exécution. Lors de son intervention à la Chambre des représentants, ce lundi, le ministre de la Justice, Abdellatif Ouahbi, a fait le point sur la mise en œuvre du dispositif des peines alter.', 'size': 3}, {'id': '36', 'title': 'Peines alternatives : 450 personnes condamnées dont 9 transgressions', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Peines-alternatives-450-personnes-condamnees-dont-9-transgressions_a72814.html', 'summary': 'Peines alternatives : 450 personnes condamnées dont 9 transgressions. Le nombre de jugements rendus par les tribunaux du Royaume avec des peines alternatives s’élève à 450 à ce jour, a indiqué, lundi à la Chambre des représentants, le ministre de la Justice, Abdellatif Ouahbi.', 'size': 3}, {'id': '63', 'title': 'Peines alternatives : 450 jugements prononcés à ce jour', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/10/14/peines-alternatives-450-jugements-prononces-a-ce-jour_1955641/', 'summary': 'Peines alternatives : 450 jugements prononcés à ce jour. Le nombre de jugements rendus par les tribunaux du Royaume avec des peines alternatives s’élève à 450 à ce jour, a indiqué, lundi à la Chambre des représentants, le ministre de la Justice, Abdellatif Ouahbi. En réponse à deux questions orales autour des « nouveautés de la justice réparatrice au Royaume », Ouahbi a relevé que dans.', 'size': 3}], 'main_title': '450 personnes ont bénéficié des peines alternatives, 9 réincarcérées pour refus d’exécution'}, {'community_id': '15', 'articles': [{'id': '53', 'title': "Sahara: Le Qatar réaffirme son soutien au plan d'autonomie", 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Sahara-Le-Qatar-reaffirme-son-soutien-au-plan-d-autonomie_a72796.html', 'summary': "Sahara: Le Qatar réaffirme son soutien au plan d'autonomie. L'Etat du Qatar a réaffirmé, lundi à New York, son soutien au plan d'autonomie présenté par le Royaume pour parvenir à un règlement définitif au différend régional autour du Sahara marocain.", 'size': 2}, {'id': '125', 'title': 'Sahara : Le Qatar réaffirme son soutien au plan marocain d’autonomie, «\xa0une initiative constructive\xa0»', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/pouvoirs/sahara-le-qatar-reaffirme-son-soutien-au-plan-marocain-dautonomie-une-initiative-constructive/', 'summary': 'Sahara : Le Qatar réaffirme son soutien au plan marocain d’autonomie, « une initiative constructive ». Le Qatar réaffirme son alignement sur une solution politique durable, fondée sur le dialogue et le respect de la souveraineté du Royaume.', 'size': 2}], 'main_title': "Sahara: Le Qatar réaffirme son soutien au plan d'autonomie"}, {'community_id': '18', 'articles': [{'id': '59', 'title': '7.400 établissements scolaires du royaume intègrent les enfants en situation de handicap', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/10/14/7-400-etablissements-scolaires-du-royaume-integrent-les-enfants-en-situation-de-handicap_1955656/', 'summary': '7.400 établissements scolaires du royaume intègrent les enfants en situation de handicap. Le nombre d’établissements scolaires intégrant les enfants en situation de handicap est passé de 3.000 en 2021 à 7.416 en 2025, soit une augmentation de 130%, a indiqué, lundi, le ministre de l’Éducation nationale, du Préscolaire et des Sports, Mohamed Saad Berrada. En réponse à une question orale à la Chambre des représentants sur “Le.', 'size': 2}, {'id': '98', 'title': 'Le ministre de l’Education nationale promet de revoir l’âge maximal d’accès à la fonction', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/178727/ministre-l-education-nationale-promet-revoir.html', 'summary': 'Le ministre de l’Education nationale promet de revoir l’âge maximal d’accès à la fonction. Le ministre de l’Éducation nationale, de l’enseignement préscolaire et des sports, Mohamed Saad Berrada, s’est engagé à réexaminer l’âge maximal d’accès dans le secteur de l’éducation, fixé à 30 ans. En réponse aux questions orales, lundi à la Chambre des représentants au Parlement, le ministre a affirmé que cette réforme allait se faire dans un délai d’un mois, avant le début du concours de recrutement de 20 000 postes cette année.', 'size': 2}], 'main_title': '7.400 établissements scolaires du royaume intègrent les enfants en situation de handicap'}, {'community_id': '2', 'articles': [{'id': '69', 'title': 'Ouverture à Dubaï du salon Gitex Global 2025, avec la participation du Maroc', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/10/13/ouverture-a-dubai-du-salon-gitex-global-2025-avec-la-participation-du-maroc_1955604/', 'summary': 'Ouverture à Dubaï du salon Gitex Global 2025, avec la participation du Maroc. La 45ème édition du salon Gitex Global 2025, un événement technologique mondial, s’est ouverte, lundi à Dubaï, avec la participation d’innovateurs, d’exposants, de start-ups et d’institutions des secteurs public et privé, venus de plus de 180 pays, dont le Maroc. Le Royaume participe à ce événement, qui met en lumière chaque année les plus importantes.', 'size': 2}, {'id': '200', 'title': 'Ouverture à Dubaï du salon «\xa0GITEX Global 2025\xa0», avec la participation du Maroc', 'source': 'lnt.ma', 'link': 'https://lnt.ma/ouverture-a-dubai-du-salon-gitex-global-2025-avec-la-participation-du-maroc/', 'summary': 'Ouverture à Dubaï du salon « GITEX Global 2025 », avec la participation du Maroc. La 45ème édition du salon « GITEX Global 2025 », un événement technologique mondial, s’est ouverte, lundi à Dubaï, avec la participation d’innovateurs, d’exposants, de start-ups et d’institutions des secteurs public et privé, venus de plus de 180 pays, dont le Maroc. Le Royaume participe à ce événement, qui met en lumière chaque année les plus importantes . ', 'size': 2}], 'main_title': 'Ouverture à Dubaï du salon Gitex Global 2025, avec la participation du Maroc'}, {'community_id': '1', 'articles': [{'id': '73', 'title': 'Tourisme durable : 820 MDH d’investissement pour Ouarzazate', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/10/13/tourisme-durable-820-mdh-dinvestissement-pour-ouarzazate_1955569/', 'summary': 'Tourisme durable : 820 MDH d’investissement pour Ouarzazate. Le ministère du Tourisme, de l’Artisanat et de l’Économie sociale et solidaire a annoncé, lundi, le déploiement d’un plan d’accélération visant à faire de Ouarzazate une destination de référence en matière de tourisme culturel durable, avec un budget mobilisé de 820 millions de dirhams (MDH). Dans le cadre de la feuille de route 2023-2026 du.', 'size': 2}, {'id': '188', 'title': 'Tourisme durable : 820 MDH d’investissement pour faire de Ouarzazate une destination culturelle de référence', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/tourisme-durable-820-mdh-dinvestissement-pour-faire-de-ouarzazate-une-destination-culturelle-de-reference-ministere.html', 'summary': 'Tourisme durable : 820 MDH d’investissement pour faire de Ouarzazate une destination culturelle de référence. Le ministère du Tourisme, de l’Artisanat et de l’Économie sociale et solidaire a annoncé, lundi, le déploiement d’un plan d’accélération ambitieux visant à faire de Ouarzazate une destination de référence en matière de tourisme culturel durable, avec un budget mobilisé de 820 millions de dirhams (MDH). « Dans le cadre de la feuille de route 2023-2026 . L’article est apparu en premier sur .', 'size': 2}], 'main_title': 'Tourisme durable : 820 MDH d’investissement pour Ouarzazate'}, {'community_id': '17', 'articles': [{'id': '94', 'title': 'Les recettes douanières en hausse de plus de 7% à fin septembre', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/les-recettes-douanieres-en-hausse-de-plus-de-7-a-fin-septembre-311530/', 'summary': 'Les recettes douanières en hausse de plus de 7% à fin septembre. Les recettes douanières nettes se sont établies à plus de 72,97 milliards de dirhams (MMDH) à fin septembre 2025, en hausse de 7,3% par rapport à la même', 'size': 2}, {'id': '141', 'title': 'TGR : Un déficit budgétaire de 50,5 MMDH à fin septembre', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/argent/tgr-un-deficit-budgetaire-de-505-mmdh-a-fin-septembre/', 'summary': 'TGR : Un déficit budgétaire de 50,5 MMDH à fin septembre. Les recettes ordinaires brutes se sont établies à 310,7 MMDH à fin septembre, en hausse de 17,4% par rapport à la même période de 2024, tandis que les dépenses ordinaires émises ont progressé de 18,9% à 280,2 MMDH, dégageant ainsi un solde ordinaire positif de 30,5 MMDH.', 'size': 3}, {'id': '163', 'title': 'Compensation : les dépenses progressent de 24,2% à fin septembre', 'source': 'leseco.ma', 'link': 'https://leseco.ma/business/compensation-les-depenses-progressent-de-242-a-fin-septembre.html', 'summary': 'Compensation : les dépenses progressent de 24,2% à fin septembre. Les émissions de dépenses au titre de la compensation se sont élevées à 10 milliards de dirhams (MMDH) à fin septembre 2025, enregistrant une hausse de 24,2% par rapport à la même période de l’année précédente, selon la Trésorerie générale du Royaume (TGR). ', 'size': 2}], 'main_title': 'TGR : Un déficit budgétaire de 50,5 MMDH à fin septembre'}, {'community_id': '19', 'articles': [{'id': '99', 'title': 'FIFA : Tila, la mascotte officielle du Mondial U17 féminin au Maroc', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/178720/fifa-tila-mascotte-officielle-mondial.html', 'summary': 'FIFA : Tila, la mascotte officielle du Mondial U17 féminin au Maroc. La Fédération internationale de football association (FIFA) a dévoilé, lundi, Tila, la mascotte officielle de la du Mondial U17 féminin, qui se joue du 17 octobre au 8 novembre 2025 au Maroc.', 'size': 3}, {'id': '151', 'title': 'Mondial Féminin U-17 Maroc 2025 : la FIFA présente “Tila”, la mascotte officielle du tournoi', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/mondial-feminin-u-17-maroc-2025-la-fifa-presente-tila-la-mascotte/', 'summary': 'Mondial Féminin U-17 Maroc 2025 : la FIFA présente “Tila”, la mascotte officielle du tournoi. La Fédération internationale du Football Association (FIFA) a levé le voile, lundi, sur « Tila », la mascotte officielle de la Coupe du Monde Féminine U-17 de la FIFA, prévue du 17 octobre au 8 novembre au Maroc. « Tila incarne l’élégance naturelle d’un caracal, une espèce de chat sauvage originaire de nombreux pays, dont le Maroc. Son .', 'size': 3}, {'id': '181', 'title': 'La FIFA dévoile «\xa0Tila\xa0», la mascotte officielle du Mondial Féminin U-17 Maroc 2025', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/la-fifa-devoile-tila-la-mascotte-officielle-du-mondial-feminin-u-17-maroc-2025.html', 'summary': 'La FIFA dévoile « Tila », la mascotte officielle du Mondial Féminin U-17 Maroc 2025. La Fédération internationale du Football Association (FIFA) a levé le voile, lundi, sur « Tila », la mascotte officielle de la Coupe du Monde Féminine U-17 de la FIFA, prévue du 17 octobre au 8 novembre au Maroc. « Tila incarne l’élégance naturelle d’un caracal, une espèce de chat sauvage originaire de nombreux pays, dont le Maroc. Son . L’article est apparu en premier sur .', 'size': 3}], 'main_title': 'FIFA : Tila, la mascotte officielle du Mondial U17 féminin au Maroc'}, {'community_id': '21', 'articles': [{'id': '108', 'title': 'Communication cloud : Les fans marocains réclament plus  de proximité numérique', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/high-tech/communication-cloud-les-fans-marocains-reclament-plus-de-proximite-numerique', 'summary': 'Communication cloud : Les fans marocains réclament plus de proximité numérique. Une étude Infobip révèle de nouvelles attentes autour de l’engagement sportif Infobip, plateforme mondiale de communication cloud, a publié, lundi, une étude internationale révélant une évolution majeure dans la manière dont les supporters souhaitent interagir avec leurs équipes. Réalisée auprès de 1.500 fans à travers le monde, l’enquête met en évidence une attente forte d’un .', 'size': 2}, {'id': '193', 'title': 'Etude Infobip : Les fans marocains veulent un lien plus direct avec leurs clubs', 'source': 'lnt.ma', 'link': 'https://lnt.ma/etude-infobip-les-fans-marocains-veulent-un-lien-plus-direct-avec-leurs-clubs/', 'summary': 'Etude Infobip : Les fans marocains veulent un lien plus direct avec leurs clubs. Une étude internationale menée par la plateforme de communication cloud Infobip révèle une transformation profonde dans les attentes des supporters vis-à-vis de leurs équipes, notamment dans le monde du football. L’enquête met en lumière le besoin croissant de proximité numérique et d’interaction personnalisée entre clubs et fans, un phénomène particulièrement marqué au Maroc, où le . ', 'size': 2}], 'main_title': 'Communication cloud : Les fans marocains réclament plus  de proximité numérique'}, {'community_id': '6', 'articles': [{'id': '145', 'title': 'Les prix à la consommation augmentent de 0,4% au T3-2025', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/les-prix-a-la-consommation-augmentent-de-04-au-t3-2025/', 'summary': 'Les prix à la consommation augmentent de 0,4% au T3-2025. Les prix à la consommation auraient augmenté, au troisième trimestre 2025, à un rythme bien plus tempéré qu’en début d’année, s’établissant à +0,4% en variation annuelle, après +2% et +0,5% aux premier et deuxième trimestres de la même année, selon le Haut-Commissariat au Plan (HCP). Cette évolution aurait été le fait d’une faible hausse des .', 'size': 2}, {'id': '220', 'title': 'HCP : hausse de 0,4% des prix à la consommation au T3-2025', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/445315-hcp-hausse-de-04-des-prix-a-la-consommation-au-t3-2025.html', 'summary': 'HCP : hausse de 0,4% des prix à la consommation au T3-2025. Les prix à la consommation auraient augmenté, au troisième trimestre 2025, à un rythme bien plus tempéré qu’en début d’année, s’établissant à +0,4% en variation annuelle, après +2% et +0,5% aux premier et deuxième trimestres de la même année, selon le Haut-Commissariat au Plan (HCP). Cette évolution aurait été le fait d’une faible hausse des . ', 'size': 2}], 'main_title': 'Les prix à la consommation augmentent de 0,4% au T3-2025'}, {'community_id': '20', 'articles': [{'id': '157', 'title': 'Journée nationale de l’alphabétisation : l’ANLCA lance une campagne nationale avec l’appui de l’Union européenne', 'source': 'leseco.ma', 'link': 'https://leseco.ma/maroc/journee-nationale-de-lalphabetisation-lanlca-lance-une-campagne-nationale-avec-lappui-de-lunion-europeenne.html', 'summary': 'Journée nationale de l’alphabétisation : l’ANLCA lance une campagne nationale avec l’appui de l’Union européenne. À l’occasion de la Journée nationale de l’alphabétisation, l’Agence nationale de lutte contre l’analphabétisme (ANLCA) a lancé une campagne nationale de sensibilisation sous le slogan «Faites le premier pas», avec le soutien de l’Union européenne. ', 'size': 2}, {'id': '333', 'title': 'Journée nationale de l’alphabétisation : une nouvelle dynamique portée par l’ANLCA et l’Union européenne', 'source': 'lnt.ma', 'link': 'https://lnt.ma/journee-nationale-de-lalphabetisation-une-nouvelle-dynamique-portee-par-lanlca-et-lunion-europeenne/', 'summary': 'Journée nationale de l’alphabétisation : une nouvelle dynamique portée par l’ANLCA et l’Union européenne. À l’occasion de la Journée nationale de l’alphabétisation, célébrée chaque année le 13 octobre, l’Agence nationale de lutte contre l’analphabétisme (ANLCA) a donné, ce lundi à Rabat, le coup d’envoi officiel d’une Campagne nationale de lutte contre l’analphabétisme, organisée avec le soutien de l’Union européenne au Maroc. Cet événement marque un moment fort de sensibilisation . ', 'size': 2}], 'main_title': 'Journée nationale de l’alphabétisation : l’ANLCA lance une campagne nationale avec l’appui de l’Union européenne'}, {'community_id': '12', 'articles': [{'id': '171', 'title': 'Tech Catalyst Week : quand les startups marocaines s’invitent au cœur de l’écosystème Glovo', 'source': 'leseco.ma', 'link': 'https://leseco.ma/business/tech-catalyst-week-quand-les-startups-marocaines-sinvitent-au-coeur-de-lecosysteme-glovo.html', 'summary': 'Tech Catalyst Week : quand les startups marocaines s’invitent au cœur de l’écosystème Glovo. Dans les coulisses du siège high-tech de Glovo à Barcelone, la Tech Catalyst Week a réuni une génération de fondateurs décidés à bousculer les frontières de l’innovation. ', 'size': 2}, {'id': '275', 'title': 'Tech Catalyst Week:\xa0les startups marocaines en tête d’affiche', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/tech-catalyst-week-les-startups-marocaines-en-tete-daffiche-311702/', 'summary': 'Tech Catalyst Week: les startups marocaines en tête d’affiche. Barcelone s’est transformée en capitale mondiale de la tech à l’occasion de la Tech Catalyst Week organisée du 06 au 10 Octobre, un événement signé Glovo, figure emblématique', 'size': 2}], 'main_title': 'Tech Catalyst Week : quand les startups marocaines s’invitent au cœur de l’écosystème Glovo'}, {'community_id': '0', 'articles': [{'id': '183', 'title': 'Réalisation d’un complexe industriel de moteurs d’avions Safran au Maroc : le Groupe fait le choix d’un pays doté de talents et d’infrastructures modernes, selon Andriès', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/realisation-dun-complexe-industriel-de-moteurs-davions-safran-au-maroc-le-groupe-fait-le-choix-dun-pays-dote-de-talents-et-dinfrastructures-modernes-selon-andries.html', 'summary': 'Réalisation d’un complexe industriel de moteurs d’avions Safran au Maroc : le Groupe fait le choix d’un pays doté de talents et d’infrastructures modernes, selon Andriès. En décidant l’implantation du nouveau complexe industriel de moteurs d’avions Safran au Maroc, le Groupe a fait le choix d’ »un pays doté de talents, d’infrastructures modernes et d’un cadre macroéconomique stable », a affirmé le Directeur général du Groupe, Olivier Andriès. Dans une allocution prononcée lors de la cérémonie de présentation et de lancement des travaux . L’article est apparu en premier sur .', 'size': 2}, {'id': '330', 'title': 'Safran au Maroc | Le Groupe a fait le choix d’un pays doté de talents et d’infrastructures modernes (M. Andriès)', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/safran-au-maroc-le-groupe-a-fait-le-choix-dun-pays-dote-de-talents-et-dinfrastructures-modernes-m-andries/', 'summary': 'Safran au Maroc | Le Groupe a fait le choix d’un pays doté de talents et d’infrastructures modernes (M. Andriès). En décidant l’implantation du nouveau complexe industriel de moteurs d’avions Safran au Maroc, le Groupe a fait le choix d’”un pays doté de talents, d’infrastructures modernes et d’un cadre macroéconomique stable”, a affirmé le Directeur général du Groupe, Olivier Andriès. Dans une allocution prononcée lors de la cérémonie de présentation et de lancement des travaux ', 'size': 2}], 'main_title': 'Réalisation d’un complexe industriel de moteurs d’avions Safran au Maroc : le Groupe fait le choix d’un pays doté de talents et d’infrastructures modernes, selon Andriès'}, {'community_id': '3', 'articles': [{'id': '213', 'title': 'Safi : une enquête judiciaire ouverte après des accusations de corruption visant un ex-gouverneur', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/445425-safi-une-enquete-judiciaire-ouverte-apres-des-accusations-de-corruption-visant-un-ex-gouverneur.html', 'summary': 'Safi : une enquête judiciaire ouverte après des accusations de corruption visant un ex-gouverneur. Le ministère de l’Intérieur a annoncé l’ouverture d’une enquête judiciaire à la suite de graves accusations relayées sur les réseaux sociaux, mettant en cause l’ancien gouverneur de la province de Safi. Les autorités affirment avoir saisi la justice après une enquête administrative approfondie menée par l’Inspection générale de l’administration territoriale. Le ministère de l’Intérieur a . ', 'size': 2}, {'id': '254', 'title': "Ouverture d'une enquête après des allégations de corruption contre l’ex-gouverneur de Safi", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/10/14/ouverture-dune-enquete-apres-des-allegations-de-corruption-contre-lex-gouverneur-de-safi_1955817/', 'summary': "Ouverture d'une enquête après des allégations de corruption contre l’ex-gouverneur de Safi. Le ministère de l’Intérieur a indiqué, mardi, avoir adressé une requête, étayée d’un rapport de l’Inspection générale de l’administration territoriale (IGAT), à la présidence du Ministère public en vue de l’ouverture d’une enquête suite aux déclarations faites par un membre du conseil communal de Lamsabih, relevant de la province de Safi. Dans ces déclarations, diffusées.", 'size': 2}], 'main_title': 'Safi : une enquête judiciaire ouverte après des accusations de corruption visant un ex-gouverneur'}, {'community_id': '14', 'articles': [{'id': '214', 'title': 'Akhannouch reçoit une délégation de hauts responsables de la province chinoise d’Anhui', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/445420-akhannouch-recoit-une-delegation-de-hauts-responsables-de-la-province-chinoise-danhui.html', 'summary': 'Akhannouch reçoit une délégation de hauts responsables de la province chinoise d’Anhui. Le Chef du gouvernement, Aziz Akhannouch a reçu, lundi à Rabat, une délégation de hauts responsables et d’opérateurs économiques de la Province chinoise d’Anhui, conduite par le Secrétaire du Parti Communiste Chinois pour la Province d’Anhui, Liang Yanshun. « Cette rencontre a été l’occasion d’examiner les moyens de renforcer le partenariat économique privilégié entre le Royaume . ', 'size': 3}, {'id': '258', 'title': "Automobile, énergie : le Maroc et la province chinoise d'Anhui renforcent leur coopération économique", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/10/14/le-maroc-et-la-province-chinoise-danhui-renforcent-leur-cooperation-economique_1955787/', 'summary': "Automobile, énergie : le Maroc et la province chinoise d'Anhui renforcent leur coopération économique. Le Chef du gouvernement, Aziz Akhannouch, a reçu lundi 13 octobre à Rabat une délégation de hauts responsables et d’opérateurs économiques de la province chinoise d’Anhui, conduite par le Secrétaire du Parti Communiste Chinois pour cette province, Liang Yanshun. Cette rencontre a permis d’examiner les moyens de renforcer le partenariat économique privilégié entre le Maroc.", 'size': 3}, {'id': '290', 'title': 'Le Chef du gouvernement reçoit une délégation de hauts responsables et d’opérateurs économiques de la province chinoise d’Anhui', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/actualite/le-chef-du-gouvernement-recoit-une-delegation-de-hauts-responsables-et-doperateurs-economiques-de-la-province-chinoise-danhui', 'summary': 'Le Chef du gouvernement reçoit une délégation de hauts responsables et d’opérateurs économiques de la province chinoise d’Anhui. Le Chef du gouvernement, M. Aziz Akhannouch a reçu, lundi 13 octobre 2025 à Rabat, une délégation de hauts responsables et d’opérateurs économiques de la Province chinoise d’Anhui, conduite par le Secrétaire du Parti Communiste Chinois pour la Province d’Anhui, M. Liang Yanshun. Cette rencontre a été l’occasion d’examiner les moyens de renforcer le partenariat .', 'size': 3}], 'main_title': 'Akhannouch reçoit une délégation de hauts responsables de la province chinoise d’Anhui'}, {'community_id': '5', 'articles': [{'id': '219', 'title': 'France: La suspension de la réforme des retraites saluée', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/445401-france-la-suspension-de-la-reforme-des-retraites-saluee.html', 'summary': 'France: La suspension de la réforme des retraites saluée. La suspension de la réforme des retraites annoncée mardi par le Premier ministre Sébastien Lecornu est « une première victoire pour les 500.000 salariés qui en profiteront dès cette année », a salué le patron du Parti communiste, Fabien Roussel. « La suspension de la réforme des retraites à 62 ans et 9 mois, 170 trimestres est une . ', 'size': 2}, {'id': '224', 'title': 'France : Sébastien Lecornu suspend la réforme des retraites', 'source': 'lematin.ma', 'link': 'https://lematin.ma/monde/france-sebastien-lecornu-suspend-la-reforme-des-retraites/307580', 'summary': 'France : Sébastien Lecornu suspend la réforme des retraites. «Je proposerai au Parlement, dès cet automne, que nous suspendions la réforme de 2023 sur les retraites jusqu’à l’élection présidentielle», a déclaré le Premier ministre, mettant u.', 'size': 2}], 'main_title': 'France: La suspension de la réforme des retraites saluée'}, {'community_id': '8', 'articles': [{'id': '234', 'title': 'Akhannouch reçoit une délégation de la province d’Anhui pour renforcer le partenariat économique Maroc–Chine', 'source': 'lematin.ma', 'link': 'https://lematin.ma/nation/marocchine-akhannouch-recoit-une-delegation-de-la-province-danhui/307559', 'summary': 'Akhannouch reçoit une délégation de la province d’Anhui pour renforcer le partenariat économique Maroc–Chine. Cette rencontre a été l’occasion d’examiner les moyens de renforcer le partenariat économique privilégié entre le Royaume du Maroc et la République populaire de Chine, en droite li.', 'size': 2}, {'id': '299', 'title': 'Maroc-Chine: Akhannouch reçoit de hauts responsables et opérateurs économiques de la province d’Anhui', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/affaires/maroc-chine-akhannouch-recoit-de-hauts-responsables-et-operateurs-economiques-de-la-province-danhui/', 'summary': 'Maroc-Chine: Akhannouch reçoit de hauts responsables et opérateurs économiques de la province d’Anhui. Cette rencontre a permis de prospecter les moyens de renforcer le partenariat bilatéral dans le domaine de la transition énergétique. Objectif: accélérer le développement des énergies renouvelables dans le Royaume et ériger l’énergie verte en levier économique.', 'size': 2}], 'main_title': 'Akhannouch reçoit une délégation de la province d’Anhui pour renforcer le partenariat économique Maroc–Chine'}, {'community_id': '10', 'articles': [{'id': '255', 'title': "Instagram va filtrer davantage de contenus sur les comptes ados et encadrer l'IA", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/10/14/instagram-va-filtrer-davantage-de-contenus-sur-les-comptes-ados-et-encadrer-lia_1955809/', 'summary': "Instagram va filtrer davantage de contenus sur les comptes ados et encadrer l'IA. Meta a présenté mardi un nouveau dispositif destiné aux comptes Instagram d’adolescents, qui va filtrer encore davantage de contenus, notamment ceux liés à des tendances virales considérées comme potentiellement nocives. Le groupe prévoit aussi d’encadrer, à partir de l’année prochaine, les conversations que les jeunes utilisateurs peuvent avoir avec ses assistants d’intelligence artificielle (IA). Cette.", 'size': 2}, {'id': '278', 'title': 'Instagram va filtrer davantage les contenus sur les comptes ados', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/instagram-va-filtrer-davantage-les-contenus-sur-les-comptes-ados-311680/', 'summary': 'Instagram va filtrer davantage les contenus sur les comptes ados. Meta a présenté, mardi 14 octobre, un nouveau dispositif destiné aux comptes Instagram d’adolescents, qui va filtrer encore davantage de contenus, notamment ceux liés à des tendances virales', 'size': 2}], 'main_title': "Instagram va filtrer davantage de contenus sur les comptes ados et encadrer l'IA"}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
                        
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ? d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        // Fonction pour cacher le tooltip
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = '';
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
    
    
</body>




</html>
    