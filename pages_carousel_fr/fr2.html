<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); 
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title"> Les principales actualités des dernières 24 heures

</div>    
        <div class="header-subtitle"> Dernière mise à jour : 08/08/2025 - 18h29</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"></div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '7', 'articles': [{'id': '3', 'title': "Décès de l'acteur égyptien Sayed Sadek à 80 ans", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/436985-deces-de-lacteur-egyptien-sayed-sadek-a-80-ans.html', 'summary': "Décès de l'acteur égyptien Sayed Sadek à 80 ans. L’artiste égyptien Sayed Sadek est décédé aujourd’hui, vendredi, à l’âge de 80 ans, des suites d’une maladie soudaine. L’artiste Sayed Sadek, pleuré par le Syndicat des acteurs, était l’une des figures les plus marquantes du théâtre et du cinéma égyptiens, laissant derrière lui un riche héritage artistique composé d’œuvres qui ont profondément marqué le public. . ", 'size': 2}, {'id': '221', 'title': 'Décès de l’artiste égyptien Sayed Sadek', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/08/deces-de-lartiste-egyptien-sayed-sadek_1945859/', 'summary': 'Décès de l’artiste égyptien Sayed Sadek. L’artiste égyptien Sayed Sadek est décédé vendredi à l’âge de 80 ans, après avoir été victime d’un malaise soudain, a annoncé le Syndicat égyptien des acteurs professionnels. Figure connue et reconnue du cinéma et de la télévision en Égypte, le défunt a laissé derrière lui un riche héritage artistique ayant profondément marqué les esprits et.', 'size': 2}], 'main_title': "Décès de l'acteur égyptien Sayed Sadek à 80 ans"}, {'community_id': '10', 'articles': [{'id': '4', 'title': "Israël se dote d'un plan controversé pour prendre le contrôle de Gaza", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/436978-israel-se-dote-dun-plan-controverse-pour-prendre-le-controle-de-gaza.html', 'summary': "Israël se dote d'un plan controversé pour prendre le contrôle de Gaza. Le cabinet de sécurité israélien a approuvé dans la nuit de jeudi à vendredi un plan présenté par Benjamin Netanyahu pour « vaincre » le Hamas et « prendre le contrôle » de la ville de Gaza, dévastée par la guerre et en proie à une grave crise humanitaire. Les réactions internationales ont immédiatement condamné cette décision prise malgré . ", 'size': 3}, {'id': '62', 'title': 'Israël se dote d’un plan pour “prendre le contrôle” de la ville de Gaza', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/08/israel-se-dote-dun-plan-pour-prendre-le-controle-de-la-ville-de-gaza_1945801/', 'summary': 'Israël se dote d’un plan pour “prendre le contrôle” de la ville de Gaza. Le cabinet de sécurité israélien a approuvé dans la nuit de jeudi à vendredi un plan présenté par Benjamin Netanyahu pour “vaincre” le Hamas et “prendre le contrôle” de la ville de Gaza, dévastée par les bombardements israéliens et en proie à une grave crise humanitaire. Le plan “visant à une prise de contrôle militaire.', 'size': 3}, {'id': '135', 'title': 'Israël adopte un plan pour prendre le contrôle de la ville de Gaza', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/israel-adopte-un-plan-pour-prendre-le-controle-de-la-ville-de-gaza/', 'summary': 'Israël adopte un plan pour prendre le contrôle de la ville de Gaza. Le cabinet de sécurité israélien a validé, dans la nuit du 7 au 8 août, un plan présenté par le Premier ministre Benjamin Netanyahou visant à « vaincre » le Hamas et à « prendre le contrôle » de la ville de Gaza, actuellement en proie à de graves destructions et à une crise humanitaire .', 'size': 3}], 'main_title': "Israël se dote d'un plan controversé pour prendre le contrôle de Gaza"}, {'community_id': '2', 'articles': [{'id': '14', 'title': 'Espagne : incendie maîtrisé près de la ville de Tarifa', 'source': 'lematin.ma', 'link': 'https://lematin.ma/monde/espagne-incendie-maitrise-pres-de-la-ville-de-tarifa/295544', 'summary': "Espagne : incendie maîtrisé près de la ville de Tarifa. L'incendie s'est déclaré mardi dans une zone boisée près d'une plage à l'extérieur de cette ville côtière d'environ 19.000 habitants connue pour ses vents puiss.", 'size': 2}, {'id': '65', 'title': 'Espagne : incendie maîtrisé près de la ville touristique de Tarifa', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/08/espagne-incendie-maitrise-pres-de-la-ville-touristique-de-tarifa_1945796/', 'summary': 'Espagne : incendie maîtrisé près de la ville touristique de Tarifa. Les pompiers ont maîtrisé un incendie de forêt attisé par le vent près de la ville touristique de Tarifa, dans le sud de l’Espagne, qui a contraint plus de 1.500 personnes à évacuer, ont annoncé vendredi les autorités. L’incendie s’est déclaré mardi dans une zone boisée près d’une plage à l’extérieur de cette ville côtière.', 'size': 2}], 'main_title': 'Espagne : incendie maîtrisé près de la ville de Tarifa'}, {'community_id': '3', 'articles': [{'id': '15', 'title': 'Le Barça retire le brassard de capitaine à son gardien Ter Stegen', 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/le-barca-retire-le-brassard-de-capitaine-a-son-gardien-ter-stegen/295543', 'summary': 'Le Barça retire le brassard de capitaine à son gardien Ter Stegen. Suite à l’ouverture d’une procédure disciplinaire à l’encontre du joueur Marc-André ter Stegen, et dans l’attente d’une résolution définitive, le Club, en accord avec la dire.', 'size': 2}, {'id': '139', 'title': 'Liga: le Barça retire le brassard de capitaine à son gardien Ter Stegen', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/liga-le-barca-retire-le-brassard-de-capitaine-a-son-gardien-ter-stegen/', 'summary': 'Liga: le Barça retire le brassard de capitaine à son gardien Ter Stegen. Le FC Barcelone a annoncé jeudi avoir retiré temporairement le brassard de capitaine à son gardien allemand Marc-André ter Stegen, visé par une procédure disciplinaire. « Suite à l’ouverture d’une procédure disciplinaire à l’encontre du joueur Marc-André ter Stegen, et dans l’attente d’une résolution définitive, le Club, en accord avec la direction sportive et le staff .', 'size': 2}], 'main_title': 'Le Barça retire le brassard de capitaine à son gardien Ter Stegen'}, {'community_id': '4', 'articles': [{'id': '21', 'title': 'Le Maroc ciblé par un malware chinois : plus de 11.000 téléphones Android piratés dans le monde', 'source': 'lematin.ma', 'link': 'https://lematin.ma/societe/cyberattaque-chinoise-cible-les-smartphones-android-au-maroc/295504', 'summary': 'Le Maroc ciblé par un malware chinois : plus de 11.000 téléphones Android piratés dans le monde. Un groupe de hackers parlant chinois a mis au point PlayPraetor, un virus ciblant les appareils Android et conférant à ses opérateurs un contrôle total sur les smartphones infectés.', 'size': 2}, {'id': '229', 'title': 'PlayPraetor: un nouveau malware Android cible les utilisateurs marocains', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/playpraetor-un-nouveau-malware-android-cible-les-utilisateurs-marocains-308271/', 'summary': 'PlayPraetor: un nouveau malware Android cible les utilisateurs marocains. Un puissant cheval de Troie Android, baptisé PlayPraetor, a infecté plus de 11.000 appareils à travers le monde. Le Maroc, seul pays africain visé à ce stade, figure parmi les cibles prioritaires d’une campagne orchestrée via de fausses pages Google Play. Une nouvelle cybermenace plane sur les utilisateurs de smartphones', 'size': 2}], 'main_title': 'Le Maroc ciblé par un malware chinois : plus de 11.000 téléphones Android piratés dans le monde'}, {'community_id': '5', 'articles': [{'id': '22', 'title': "Participation d’un détachement des FAR aux festivités du 65e anniversaire de l'indépendance de la Côte d’Ivoire", 'source': 'lematin.ma', 'link': 'https://lematin.ma/nation/participation-des-far-aux-festivites-de-lindependance-de-la-cote-divoire/295494', 'summary': "Participation d’un détachement des FAR aux festivités du 65e anniversaire de l'indépendance de la Côte d’Ivoire. Le détachement relevant de la première Brigade d’Infanterie parachutiste a participé, jeudi à Bouaké, au défilé militaire commémorant la fête nationale d’indépendance, aux côtés de.", 'size': 2}, {'id': '99', 'title': 'Les FAR participent au 65e anniversaire de l’indépendance de la Côte d’Ivoire', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/173818/participent-anniversaire-l-independance-cote-d-ivoire.html', 'summary': 'Les FAR participent au 65e anniversaire de l’indépendance de la Côte d’Ivoire. Sur instructions du roi Mohammed VI, chef suprême et chef d’état-major général des Forces armées royales, un détachement des FAR a pris part à la commémoration du 65e anniversaire de l’indépendance de la Côte d’Ivoire et ce, suite à une invitation adressée au Maroc.', 'size': 2}, {'id': '123', 'title': 'Indépendance de la Côte d’Ivoire : Les FAR participent aux festivités du 65e anniversaire', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/pouvoirs/independance-de-la-cote-divoire-les-far-participent-aux-festivites-du-65e-anniversaire/', 'summary': 'Indépendance de la Côte d’Ivoire : Les FAR participent aux festivités du 65e anniversaire. Un détachement des FAR a participé au défilé militaire commémorant le 65e anniversaire de l’indépendance de la Côte d’Ivoire, sur Hautes Instructions Royales.', 'size': 3}], 'main_title': 'Indépendance de la Côte d’Ivoire : Les FAR participent aux festivités du 65e anniversaire'}, {'community_id': '9', 'articles': [{'id': '24', 'title': 'Virgin Megastore ouvre son 11ème magasin à Casablanca', 'source': 'lematin.ma', 'link': 'https://lematin.ma/lifestyle/virgin-megastore-ouvre-son-11eme-magasin-a-casablanca/295487', 'summary': 'Virgin Megastore ouvre son 11ème magasin à Casablanca. Cette expansion, soutenue par un investissement de 10 millions de dirhams, reflète l’ambition de Virgin Megastore de se rapprocher toujours plus de ses clients et de répondre à la.', 'size': 2}, {'id': '177', 'title': 'Virgin Megastore ouvre un nouveau magasin à Casablanca', 'source': 'lnt.ma', 'link': 'https://lnt.ma/virgin-megastore-ouvre-un-nouveau-magasin-a-casablanca/', 'summary': 'Virgin Megastore ouvre un nouveau magasin à Casablanca. Virgin Megastore a inauguré son quatrième point de vente à Casablanca, portant à onze le nombre total de ses magasins au Maroc. Cette ouverture s’inscrit dans le cadre d’un plan d’expansion soutenu par un investissement de 10 millions de dirhams. Selon le Département Marketing et Communication de l’entreprise, cette nouvelle implantation vise à renforcer la . ', 'size': 2}, {'id': '246', 'title': 'Virgin Megastore à Casablanca ouvre son 11ème magasin au Maroc', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/lifestyle/virgin-megastore-a-casablanca-ouvre-son-11eme-magasin-au-maroc', 'summary': 'Virgin Megastore à Casablanca ouvre son 11ème magasin au Maroc. Virgin Megastore Maroc, l’enseigne emblématique spécialisée dans la distribution de produits high-tech, culturels et de loisirs, a ouvert, jeudi à Casablanca, son 4ème magasin, portant à onze son réseau national. Cette expansion, soutenue par un investissement de 10 millions de dirhams, reflète l’ambition de Virgin Megastore de se rapprocher toujours plus de ses clients et .', 'size': 4}, {'id': '283', 'title': 'Virgin Megastore poursuit son expansion au Maroc avec une 11ème adresse', 'source': 'leseco.ma', 'link': 'https://leseco.ma/business/virgin-megastore-poursuit-son-expansion-au-maroc-avec-une-11eme-adresse.html', 'summary': 'Virgin Megastore poursuit son expansion au Maroc avec une 11ème adresse. Virgin Megastore renforce sa présence au Maroc avec une nouvelle ouverture à Casablanca. L’enseigne spécialisée dans la distribution de produits technologiques et culturels inaugure son 4ème magasin dans la métropole, portant à onze son réseau national. ', 'size': 2}], 'main_title': 'Virgin Megastore à Casablanca ouvre son 11ème magasin au Maroc'}, {'community_id': '1', 'articles': [{'id': '26', 'title': "Ballon d'Or 2025 : Achraf Hakimi en lice, Yassine Bounou nommé au Trophée Yachine", 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/ballon-dor-2025-hakimi-en-lice-bounou-nomme-au-trophee-yachine/295482', 'summary': "Ballon d'Or 2025 : Achraf Hakimi en lice, Yassine Bounou nommé au Trophée Yachine. France Football a officiellement dévoilé, jeudi, les listes des nommés pour le Ballon d'Or 2025. Comme attendu, l'international marocain Achraf Hakimi figure parmi les 30 f.", 'size': 4}, {'id': '72', 'title': "Foot : Achraf Hakimi nommé au Ballon d'Or 2025", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/07/foot-achraf-hakimi-nomme-au-ballon-dor-2025_1945731/', 'summary': "Foot : Achraf Hakimi nommé au Ballon d'Or 2025. C’est désormais officiel, le latéral droit marocain Achraf Hakimi franchit une nouvelle étape dans sa carrière en décrochant sa première nomination au Ballon d’Or. Une annonce qui intervient alors que le footballeur est sous le coup d’une instruction judiciaire, suite à des accusations de viol proférées en 2023 par une jeune femme. Sans surprise, l’international.", 'size': 3}, {'id': '125', 'title': 'Ballon d’Or 2025 : Achraf Hakimi parmi les 30 nommés', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/influences/ballon-dor-2025-achraf-hakimi-parmi-les-30-nommes/', 'summary': "Ballon d’Or 2025 : Achraf Hakimi parmi les 30 nommés. L’international marocain Achraf Hakimi est nommé au Ballon d'Or 2025, une distinction qui récompense le meilleur footballeur du monde.", 'size': 4}, {'id': '174', 'title': 'L’international marocain Achraf Hakimi nommé au Ballon d’or 2025', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/linternational-marocain-achraf-hakimi-nomme-au-ballon-dord-2025.html', 'summary': "L’international marocain Achraf Hakimi nommé au Ballon d’or 2025. L’international marocain Achraf Hakimi est nommé au Ballon d'Or 2025, une distinction qui récompense le meilleur footballeur du monde. L’article est apparu en premier sur .", 'size': 3}], 'main_title': "Ballon d'Or 2025 : Achraf Hakimi en lice, Yassine Bounou nommé au Trophée Yachine"}, {'community_id': '8', 'articles': [{'id': '38', 'title': 'CHAN2025 : Les Lions de l’Atlas déterminés à signer un bon résultat contre le Kenya (Anas El Mahraoui)', 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/chan-2024-les-joueurs-determines-a-signer-un-bon-resultat-contre-le-kenya/295369', 'summary': 'CHAN2025 : Les Lions de l’Atlas déterminés à signer un bon résultat contre le Kenya (Anas El Mahraoui). Dans une déclaration à la MAP en marge d’une séance d’entraînement de l’équipe nationale au stade Sacco, El Mahraoui a indiqué que l’effectif est motivé pour poursuivre sur sa note.', 'size': 2}, {'id': '108', 'title': 'Anas El Mahraoui : Les joueurs marocains déterminés à signer  un bon résultat contre le Kenya', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/sports/anas-el-mahraoui-les-joueurs-marocains-determines-a-signer-un-bon-resultat-contre-le-kenya', 'summary': 'Anas El Mahraoui : Les joueurs marocains déterminés à signer un bon résultat contre le Kenya. Les éléments nationaux sont déterminés à signer un bon résultat lors de leur prochain match contre le Kenya, prévu dimanche, pour le compte de la 2è journée du groupe A du Championnat d’Afrique des Nations de football (CHAN-2024), a affirmé, mercredi à Nairobi, le joueur de l’équipe marocaine des locaux, Anas El Mahraoui. Dans une .', 'size': 3}, {'id': '190', 'title': "CHAN: Algérie et l'Afrique du Sud se neutralisent (1-1)", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/437024-chan-algerie-et-lafrique-du-sud-se-neutralisent-1-1.html', 'summary': "CHAN: Algérie et l'Afrique du Sud se neutralisent (1-1). L’équipe algérienne des joueurs locaux et son homologue sud africaine se sont neutralisées (1-1), vendredi, au stade national Nelson Mandela à Kampala, lors de la deuxième journée du groupe C du Championnat d’Afrique des nations de football (CHAN-2024). Les buts marqués lors de cette rencontre sont signés par l’Algérien Abdennour Belhocini qui a ouvert le . ", 'size': 2}], 'main_title': 'Anas El Mahraoui : Les joueurs marocains déterminés à signer  un bon résultat contre le Kenya'}, {'community_id': '11', 'articles': [{'id': '59', 'title': "Ballon d'Or/ Trophée  Cruyff", 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Ballon-d-Or-Trophee-Cruyff_a70639.html', 'summary': "Ballon d'Or/ Trophée Cruyff.", 'size': 2}, {'id': '251', 'title': "Hakimi et Bounou nommés au Ballon d'Or 2025", 'source': 'www.libe.ma', 'link': 'https://www.libe.ma/Hakimi-et-Bounou-nommes-au-Ballon-d-Or-2025_a155131.html', 'summary': "Hakimi et Bounou nommés au Ballon d'Or 2025.", 'size': 2}], 'main_title': "Ballon d'Or/ Trophée  Cruyff"}, {'community_id': '12', 'articles': [{'id': '66', 'title': '11,6 millions de touristes au Maroc depuis janvier, en hausse de 16%', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/08/116-millions-de-touristes-au-maroc-depuis-janvier-en-hausse-de-16_1945791/', 'summary': '11,6 millions de touristes au Maroc depuis janvier, en hausse de 16%. Le Maroc a accueilli 11,6 millions de touristes à fin juillet 2025, en hausse de 16% par rapport à la même période en 2024, annonce le ministère du Tourisme, de l’Artisanat et de l’Économie sociale et solidaire. Ces résultats confirment le maintien d’une dynamique solide, souligne le ministère dans un communiqué, précisant que 52% des.', 'size': 4}, {'id': '90', 'title': 'Le Maroc accueille 11,6 millions de touristes à fin juillet, une augmentation de 16%', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/le-maroc-accueille-116-millions-de-touristes-a-fin-juillet-une-augmentation-de-16-308228/', 'summary': 'Le Maroc accueille 11,6 millions de touristes à fin juillet, une augmentation de 16%. Le Maroc a accueilli 11,6 millions de touristes à fin juillet 2025, en hausse de 16% par rapport à la même période en 2024, annonce le ministère du Tourisme, de l’Artisanat et de l’Économie sociale et solidaire. Ces résultats confirment le maintien d’une dynamique solide, souligne le ministère dans un', 'size': 5}, {'id': '148', 'title': 'Tourisme : 11,6 millions de visiteurs à fin juillet', 'source': 'leseco.ma', 'link': 'https://leseco.ma/maroc/tourisme-116-millions-de-visiteurs-a-fin-juillet.html', 'summary': 'Tourisme : 11,6 millions de visiteurs à fin juillet. Le secteur touristique poursuit sa dynamique positive. En juillet 2025, et selon la ministre du Tourisme, Fatim-Zahra Ammor, le Maroc a accueilli 2,7 millions de visiteurs, en hausse de 6% par rapport à l’année précédente. ', 'size': 2}, {'id': '173', 'title': 'Tourisme : le Maroc accueille 11,6 millions de touristes à fin juillet 2025', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/tourisme-le-maroc-accueille-116-millions-de-touristes-a-fin-juillet-2025.html', 'summary': 'Tourisme : le Maroc accueille 11,6 millions de touristes à fin juillet 2025. Le Maroc a accueilli 11,6 millions de touristes à fin juillet 2025, en hausse de 16% par rapport à la même période en 2024, annonce le ministère du Tourisme, de l’Artisanat et de l’Économie sociale et solidaire. Ces résultats confirment le maintien d’une dynamique solide, souligne le ministère dans un communiqué, précisant que 52% des . L’article est apparu en premier sur .', 'size': 4}, {'id': '179', 'title': 'Tourisme : La dynamique positive persiste avec l’été', 'source': 'lnt.ma', 'link': 'https://lnt.ma/tourisme-la-dynamique-positive-persiste-avec-lete/', 'summary': 'Tourisme : La dynamique positive persiste avec l’été. Le Maroc a accueilli 11,6 millions de touristes au cours des sept premiers mois de 2025, soit une progression de 16 % par rapport à la même période en 2024, selon les données communiquées par le ministère du Tourisme, de l’Artisanat et de l’Économie sociale et solidaire. Plus de la moitié de ces arrivées (52 . ', 'size': 4}], 'main_title': 'Le Maroc accueille 11,6 millions de touristes à fin juillet, une augmentation de 16%'}, {'community_id': '14', 'articles': [{'id': '73', 'title': "La France suspend l'exemption de visas pour les diplomates algériens, Alger tempête", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/07/la-france-suspend-lexemption-de-visas-pour-les-diplomates-algeriens-alger-tempete_1945737/', 'summary': "La France suspend l'exemption de visas pour les diplomates algériens, Alger tempête. L’Algérie a accusé jeudi la France de s’exonérer « de ses responsabilités » dans la crise bilatérale et annoncé, dans un communiqué officiel, la dénonciation de l’accord sur l’exemption des visas au profit des titulaires de passeports diplomatiques et de service dont Paris a annoncé la suspension la veille. La lettre, où le président français Emmanuel Macron.", 'size': 2}, {'id': '103', 'title': 'L’Algérie répond à la décision du président Macron de mettre fin à l’exemption de visas pour les officiels algériens', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/173799/l-algerie-repond-decision-president-macron.html', 'summary': 'L’Algérie répond à la décision du président Macron de mettre fin à l’exemption de visas pour les officiels algériens. L’Algérie a décrété, ce jeudi, la fin de la gratuité des biens octroyés, depuis 1962, à l’ambassade française. Alger répond, ainsi, à la décision du président français de mettre un terme à l’exemption de visa pour les officiels algériens.', 'size': 2}], 'main_title': "La France suspend l'exemption de visas pour les diplomates algériens, Alger tempête"}, {'community_id': '18', 'articles': [{'id': '74', 'title': "Ballon d'Or 2025 : Yassine Bounou parmi les 10 nommés pour le Trophée Yachine", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/07/ballon-dor-2025-yassine-bounou-parmi-les-10-nommes-pour-le-trophee-yachine_1945713/', 'summary': "Ballon d'Or 2025 : Yassine Bounou parmi les 10 nommés pour le Trophée Yachine. Le gardien de but de la sélection marocaine de football, Yassine Bounou, figure parmi les dix nommés pour le Trophée Yachine, une distinction qui récompense le meilleur goalkeeper de l’année. Le Lion de l’Atlas, qui évolue pour le club saoudien Al-Hilal, en est à sa troisième nomination pour ce prix, avec comme meilleur classement une.", 'size': 2}, {'id': '92', 'title': 'Ballon d’Or 2025: Yassine Bounou parmi les 10 nominés au Trophée Yachine', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/ballon-dor-2025-yassine-bounou-parmi-les-10-nomines-au-trophee-yachine-308218/', 'summary': 'Ballon d’Or 2025: Yassine Bounou parmi les 10 nominés au Trophée Yachine. Le gardien de but de la sélection marocaine de football, Yassine Bounou figure parmi les dix nominés au Trophée Lev Yachine, une distinction qui récompense le meilleur goalkeeper de l’année. Le Lion de l’Atlas, qui évolue pour le club saoudien Al-Hilal, en est à sa troisième nomination pour ce prix,', 'size': 2}], 'main_title': "Ballon d'Or 2025 : Yassine Bounou parmi les 10 nommés pour le Trophée Yachine"}, {'community_id': '0', 'articles': [{'id': '88', 'title': 'Dans la liste des 30, Achraf Hakimi est un sérieux prétendant au Ballon d’Or 2025', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/dans-la-liste-des-30-achraf-hakimi-est-un-serieux-pretendant-au-ballon-dor-2025-308239/', 'summary': 'Dans la liste des 30, Achraf Hakimi est un sérieux prétendant au Ballon d’Or 2025. L’international marocain Achraf Hakimi est un sérieux prétendant au Ballon d’Or 2025 du meilleur footballeur du monde, dont la liste des 30 nominés vient d’être dévoilée. La prestigieuse récompense sera décernée le 22 septembre. Figurant pour la première fois parmi les finalistes, le latéral droit des Lions de l’Atlas a', 'size': 3}, {'id': '172', 'title': 'Les Marocains Hakimi et Bounou nommés au Ballon d’Or 2025', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/les-marocains-hakimi-et-bounou-nommes-au-ballon-dor-2025.html', 'summary': 'Les Marocains Hakimi et Bounou nommés au Ballon d’Or 2025. Les internationaux marocains Achraf Hakimi, défenseur du Paris Saint-Germain, et Yassine Bounou, portier d’Al Hilal saoudien, se sont assurés une place parmi les prétendants aux prix du Ballon d’Or 2025, dévoilés jeudi par le magazine France Football. Le latéral droit des Lions de l’Atlas figure dans la liste des 30 nommés au Ballon d’Or, grâce . L’article est apparu en premier sur .', 'size': 3}, {'id': '274', 'title': 'Ballon d’or 2025 : le Maroc valablement représenté', 'source': 'leseco.ma', 'link': 'https://leseco.ma/sports/ballon-dor-2025-le-maroc-valablement-represente.html', 'summary': 'Ballon d’or 2025 : le Maroc valablement représenté. Les premières nominations pour la cérémonie du Ballon d’or ont été annoncées jeudi. Auteur d’une saison historique avec le Paris-Saint Germain, Achraf Hakimi, le capitaine des Lions de l’Atlas, s’offre une place de choix dans le gotha du football mondial. Chez les gardiens, Yassine Bounou a lui aussi passé le cut. ', 'size': 3}], 'main_title': 'Dans la liste des 30, Achraf Hakimi est un sérieux prétendant au Ballon d’Or 2025'}, {'community_id': '19', 'articles': [{'id': '98', 'title': 'Chefchaouen : Le président du Conseil provincial poursuivi pour détournement de fonds publics', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/173817/chefchaouen-president-conseil-provincial-poursuivi.html', 'summary': 'Chefchaouen : Le président du Conseil provincial poursuivi pour détournement de fonds publics. La chambre des crimes financiers de première instance près la Cour dappel de Rabat a ordonné, jeudi, la détention du président du Conseil provincial de Chefchaouen, El Yazid Taghi, à la prison de Tamesna. Soupçonné de détournement de fonds publics, le responsable sera poursuivi en état darrestation.', 'size': 2}, {'id': '226', 'title': 'La corruption fait tomber le président du conseil provincial de Chefchaouen', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/08/la-corruption-fait-tomber-le-president-du-conseil-provincial-de-chefchaouen_1945824/', 'summary': 'La corruption fait tomber le président du conseil provincial de Chefchaouen. Selon des sources citées par le journal Al3omk, le président du conseil provincial de Chefchaouen, El Yazid Taghi, a été placé en détention à la prison de Tamesna, près de Rabat. La chambre criminelle de première instance chargée des crimes financiers auprès de la Cour d’appel de Rabat a décidé de le poursuivre en état.', 'size': 2}], 'main_title': 'Chefchaouen : Le président du Conseil provincial poursuivi pour détournement de fonds publics'}, {'community_id': '15', 'articles': [{'id': '110', 'title': 'Disponibilité des stocks durant l’été : L’Agence marocaine du sang  et de ses dérivés rassure', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/societe/disponibilite-des-stocks-durant-lete-lagence-marocaine-du-sang-et-de-ses-derives-rassure', 'summary': 'Disponibilité des stocks durant l’été : L’Agence marocaine du sang et de ses dérivés rassure. L’agence précise que les opérations de don de sang se poursuivent d’une manière régulière dans toutes les régions du Royaume. Démenti : de l’Agence marocaine du sang et de ses dérivés dément les rumeurs stipulant une pénurie de sang en cette période estivale. Aucun risque de rupture n’est à signaler. La conscience croissante des citoyens .', 'size': 2}, {'id': '185', 'title': 'Réserves de sang : la situation est stable et sous contrôle, selon l’Agence marocaine du sang', 'source': 'lnt.ma', 'link': 'https://lnt.ma/reserves-de-sang-la-situation-est-stable-et-sous-controle-selon-lagence-marocaine-du-sang/', 'summary': 'Réserves de sang : la situation est stable et sous contrôle, selon l’Agence marocaine du sang. L’Agence Marocaine du Sang et de ses Dérivés a assuré, mercredi, que les stocks de sang disponibles à l’échelle nationale sont actuellement à un niveau rassurant, écartant ainsi tout risque imminent de pénurie durant la période estivale. Cette mise au point intervient en réaction à certaines informations relayées dans les médias évoquant une prétendue situation . ', 'size': 2}], 'main_title': 'Disponibilité des stocks durant l’été : L’Agence marocaine du sang  et de ses dérivés rassure'}, {'community_id': '16', 'articles': [{'id': '119', 'title': 'Alain Ebobissé, DG d’Africa 50 : Le Maroc, un modèle d’investissement de référence pour l’Afrique', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/affaires/investissements/alain-ebobisse-dg-dafrica-50-le-maroc-un-modele-dinvestissement-de-reference-pour-lafrique/', 'summary': "Alain Ebobissé, DG d’Africa 50 : Le Maroc, un modèle d’investissement de référence pour l’Afrique. Le Maroc, qui s’est affirmé comme leader continental dans les domaines des infrastructures intelligentes, de l’industrialisation et de la modernisation économique, est un modèle d'investissement de référence pour l’Afrique, a indiqué Alain Ebobissé, directeur général d'Africa50, plateforme panafricaine d'investissement dans les infrastructures.", 'size': 2}, {'id': '231', 'title': 'Le Maroc «\xa0un modèle d’investissement\xa0» dans le continent, assure le patron d’Africa 50', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/le-maroc-un-modele-dinvestissement-dans-le-continent-assure-le-patron-dafrica-50-308264/', 'summary': 'Le Maroc « un modèle d’investissement » dans le continent, assure le patron d’Africa 50. Le Maroc, qui s’est affirmé comme leader continental dans les domaines des infrastructures intelligentes, de l’industrialisation et de la modernisation économique, est un modèle d’investissement de référence pour l’Afrique, a indiqué Alain Ebobissé, directeur général d’Africa50, plateforme panafricaine d’investissement dans les infrastructures. « L’essor du Maroc comme hub d’infrastructures intelligentes est', 'size': 2}], 'main_title': 'Alain Ebobissé, DG d’Africa 50 : Le Maroc, un modèle d’investissement de référence pour l’Afrique'}, {'community_id': '20', 'articles': [{'id': '138', 'title': 'France : le Conseil constitutionnel annule une loi réautorisant un pesticide interdit', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/france-le-conseil-constitutionnel-annule-une-loi-reautorisant-un-pesticide-interdit/', 'summary': 'France : le Conseil constitutionnel annule une loi réautorisant un pesticide interdit. Le Conseil constitutionnel français a décidé, jeudi, d’abroger une loi adoptée, début juillet dernier, qui visait à réintroduire un pesticide interdit. La loi controversée, qui a fait l’objet d’une pétition ayant recueilli plus de 2 millions de signatures, a été jugée par les sages comme étant contraire à la Charte de l’environnement. Lire aussi : Air .', 'size': 2}, {'id': '170', 'title': 'Le Conseil constitutionnel français abroge une loi ayant réintroduit un pesticide interdit', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/le-conseil-constitutionnel-francais-abroge-une-loi-ayant-reintroduit-un-pesticide-interdit.html', 'summary': 'Le Conseil constitutionnel français abroge une loi ayant réintroduit un pesticide interdit. Le Conseil constitutionnel français a décidé jeudi d’abroger une loi adoptée début juillet dernier qui visait à réintroduire un pesticide interdit. La loi controversée qui a fait l’objet d’une pétition ayant recueilli plus de 2 millions de signatures a été jugée par les sages comme étant contraire à la Charte de l’environnement. La « loi Duplomb » . L’article est apparu en premier sur .', 'size': 2}], 'main_title': 'France : le Conseil constitutionnel annule une loi réautorisant un pesticide interdit'}, {'community_id': '6', 'articles': [{'id': '150', 'title': 'Initiative LEAD : l’UM6P et Africa CEO Forum transforment la gouvernance publique en Afrique', 'source': 'leseco.ma', 'link': 'https://leseco.ma/maroc/initiative-lead-lum6p-et-africa-ceo-forum-transforment-la-gouvernance-publique-en-afrique.html', 'summary': 'Initiative LEAD : l’UM6P et Africa CEO Forum transforment la gouvernance publique en Afrique. L’initiative panafricaine LEAD a été lancée par l’Africa CEO Forum, en partenariat avec l’Université Mohammed VI Polytechnique (UM6P), pour renforcer la gouvernance publique sur le continent. ', 'size': 2}, {'id': '186', 'title': 'Africa CEO Forum et l’UM6P lancent LEAD pour transformer la gouvernance africaine', 'source': 'lnt.ma', 'link': 'https://lnt.ma/africa-ceo-forum-et-lum6p-lancent-lead-pour-transformer-la-gouvernance-africaine/', 'summary': 'Africa CEO Forum et l’UM6P lancent LEAD pour transformer la gouvernance africaine. Africa CEO Forum, en partenariat avec l’Université Mohammed VI Polytechnique, s’associe à trois partenaires – la Fondation Aig-Imoukhuede, la Banque Arabe pour le Développement Économique en Afrique (BADEA) et Afreximbank – pour lancer LEAD, une nouvelle initiative panafricaine visant à combler le déficit de gouvernance qui freine encore le potentiel économique de l’Afrique. Accueillie sur . ', 'size': 2}], 'main_title': 'Initiative LEAD : l’UM6P et Africa CEO Forum transforment la gouvernance publique en Afrique'}, {'community_id': '17', 'articles': [{'id': '220', 'title': 'Croissance à 4,5%, justice sociale et spatiale... le PLF 2026 dévoile ses priorités', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/08/croissance-a-45-justice-sociale-et-spatiale-le-plf-2026-devoile-ses-priorites_1945883/', 'summary': 'Croissance à 4,5%, justice sociale et spatiale. le PLF 2026 dévoile ses priorités. Le projet de loi de finances (PLF) au titre de l’exercice 2026 fixe, en application des orientations royales, quatre grandes priorités, selon la note d’orientation dudit projet adressée par le Chef du gouvernement aux départements ministériels. Il est également prévu d’atteindre un taux de croissance de près de 4,5% en 2026. Il s’agit de la.', 'size': 4}, {'id': '244', 'title': 'Le PLF-2026 fixe quatre grandes priorités, selon la note d’orientation du Chef du gouvernement', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/actualite/le-plf-2026-fixe-quatre-grandes-priorites-selon-la-note-dorientation-du-chef-du-gouvernement', 'summary': 'Le PLF-2026 fixe quatre grandes priorités, selon la note d’orientation du Chef du gouvernement. Le projet de loi de finances (PLF) au titre de l’exercice 2026 fixe, en application des Hautes Orientations Royales, quatre grandes priorités, traçant les contours d’une nouvelle étape, selon la note d’orientation dudit projet adressée par le Chef du gouvernement aux départements ministériels. Il s’agit de la consolidation de l’émergence du Royaume, l’équilibre entre le .', 'size': 4}, {'id': '268', 'title': 'Le PLF-2026 fixe quatre grandes priorités', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/le-plf-2026-fixe-quatre-grandes-priorites/', 'summary': 'Le PLF-2026 fixe quatre grandes priorités. Le projet de loi de finances (PLF) au titre de l’exercice 2026 fixe, en application des Hautes Orientations Royales, quatre grandes priorités, traçant les contours d’une nouvelle étape, selon la note d’orientation dudit projet adressée par le Chef du gouvernement aux départements ministériels. Il s’agit de la consolidation de l’émergence du Royaume, l’équilibre entre le .', 'size': 4}, {'id': '291', 'title': 'Maroc : Le PLF-2026 fixe quatre grandes priorités', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/maroc-le-plf-2026-fixe-quatre-grandes-priorites-note-dorientation.html', 'summary': 'Maroc : Le PLF-2026 fixe quatre grandes priorités. Le projet de loi de finances (PLF) au titre de l’exercice 2026 fixe, en application des Hautes Orientations Royales, quatre grandes priorités, traçant les contours d’une nouvelle étape, selon la note d’orientation dudit projet adressée par le Chef du gouvernement aux départements ministériels. Il s’agit de la consolidation de l’émergence du Royaume, l’équilibre entre le . L’article est apparu en premier sur .', 'size': 4}], 'main_title': 'Croissance à 4,5%, justice sociale et spatiale... le PLF 2026 dévoile ses priorités'}, {'community_id': '13', 'articles': [{'id': '223', 'title': "Jusqu'à 48°C de vendredi à mardi dans plusieurs provinces du Maroc", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/08/jusqua-48c-de-vendredi-a-mardi-dans-plusieurs-provinces-du-maroc_1945856/', 'summary': "Jusqu'à 48°C de vendredi à mardi dans plusieurs provinces du Maroc. Une vague de chaleur avec des températures variant entre 39 et 48 °C, accompagnée de chergui, et des averses orageuses avec chutes de grêle et rafales de vent sous orages sont attendues, du vendredi 8 au mardi 12 août, dans plusieurs provinces du Royaume, a annoncé la Direction générale de la météorologie (DGM). Des températures.", 'size': 4}, {'id': '236', 'title': "Maroc : Jusqu'à 48°C et averses orageuses de vendredi à mardi", 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/173856/maroc-jusqu-a-averses-orageuses-vendredi.html', 'summary': "Maroc : Jusqu'à 48°C et averses orageuses de vendredi à mardi. Une vague de chaleur avec des températures variant entre 39 et 48°C, accompagnée de chergui, avec des averses orageuses, des chutes de grêle et rafales de vent sous orages sont attendues, du vendredi 8 au mardi 12 août, dans plusieurs provinces du Maroc, a annoncé la Direction générale de la météorologie (DGM).", 'size': 4}, {'id': '245', 'title': 'Alerte météo : Vague de chaleur accompagnée de chergui et averses orageuses, de vendredi à mardi', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/actualite/alerte-meteo-vague-de-chaleur-accompagnee-de-chergui-et-averses-orageuses-de-vendredi-a-mardi', 'summary': 'Alerte météo : Vague de chaleur accompagnée de chergui et averses orageuses, de vendredi à mardi. Une vague de chaleur avec des températures variant entre 39 et 48 °C, accompagnée de chergui, et des averses orageuses avec chutes de grêle et rafales de vent sous orages sont attendues, du vendredi 08 au mardi 12 août, dans plusieurs provinces du Royaume, a annoncé la Direction générale de la météorologie (DGM). Des températures .', 'size': 4}, {'id': '260', 'title': 'Alerte météo. Chaleur extrême, chergui et orages dans plusieurs provinces', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/au-royaume/alerte-meteo-chaleur-extreme-chergui-et-orages-dans-plusieurs-provinces/', 'summary': 'Alerte météo. Chaleur extrême, chergui et orages dans plusieurs provinces. Une vague de chaleur avec des températures variant entre 39 et 48 °C, accompagnée de chergui, et des averses orageuses avec chutes de grêle et rafales de vent sous orages sont attendues, du vendredi 08 au mardi 12 août, dans plusieurs provinces du Royaume, a annoncé la Direction générale de la météorologie (DGM).', 'size': 4}], 'main_title': "Jusqu'à 48°C de vendredi à mardi dans plusieurs provinces du Maroc"}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
                        
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ? d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        // Fonction pour cacher le tooltip
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = '';
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
    
    
</body>




</html>
    