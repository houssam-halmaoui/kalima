<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); 
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title"> Les principales actualités des dernières 24 heures

</div>    
        <div class="header-subtitle"> Dernière mise à jour : 29/09/2025 - 12h26</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"></div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '1', 'title': "Inondations: Plus de 22 millions de dirhams engagés dans la région d'Ifrane et Azrou", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/443166-inondations-plus-de-22-millions-de-dirhams-engages-dans-la-region-difrane-et-azrou.html', 'summary': "Inondations: Plus de 22 millions de dirhams engagés dans la région d'Ifrane et Azrou. Des travaux de protection contre les inondations à Ifrane et Azrou et de plusieurs douars en milieu rural ont été réalisés avec un coût global de 22,55 millions de dirhams, a-t-on indiqué lors d’une réunion consacrée à la gestion durable des ressources en eau et à la lutte contre les crues. Cette rencontre, présidée récemment . ", 'size': 2}, {'id': '137', 'title': 'Protection contre les crues : plus de 22 MDH mobilisés à Ifrane et Azrou', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/09/29/protection-contre-les-crues-plus-de-22-mdh-mobilises-a-ifrane-et-azrou_1952813/', 'summary': 'Protection contre les crues : plus de 22 MDH mobilisés à Ifrane et Azrou. Des travaux de protection contre les inondations à Ifrane et Azrou et de plusieurs douars en milieu rural ont été réalisés avec un coût global de 22,55 millions de dirhams, a-t-on indiqué lors d’une réunion consacrée à la gestion durable des ressources en eau et à la lutte contre les crues. Cette rencontre, présidée récemment.', 'size': 2}], 'main_title': "Inondations: Plus de 22 millions de dirhams engagés dans la région d'Ifrane et Azrou"}, {'community_id': '9', 'articles': [{'id': '2', 'title': "U20: Ouahbi heureux de la victoire du Maroc contre l'Espagne", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/443167-u20-ouahbi-heureux-de-la-victoire-du-maroc-contre-lespagne.html', 'summary': "U20: Ouahbi heureux de la victoire du Maroc contre l'Espagne. Le sélectionneur de l’équipe nationale des moins de 20 ans de football, Mohamed Ouahbi, s’est dit « heureux » de la victoire des Lionceaux de l’Atlas contre l’Espagne (2-0) pour le compte de la première journée du Groupe C du Mondial U20 qui se tient au Chili, assurant que ses joueurs ont fait preuve de . ", 'size': 2}, {'id': '113', 'title': 'Mondial U20 : le Maroc entame son parcours par une victoire historique face à l’Espagne 2 à 0', 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/mondial-u20-le-maroc-demarre-par-une-victoire-face-a-lespagne/304495', 'summary': 'Mondial U20 : le Maroc entame son parcours par une victoire historique face à l’Espagne 2 à 0. Les Lionceaux de l’Atlas se sont imposés grâce aux buts de Mohamed Yassir Zabiri (54e) et Yassine Gessime (58e).**related_articles[304279]**Le match a démarré sur un rythme élevé,.', 'size': 4}, {'id': '138', 'title': 'Mondial U20 : le Maroc entame son parcours par une victoire face à l’Espagne 2 à 0', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/09/29/mondial-u20-le-maroc-entame-son-parcours-par-une-victoire-face-a-lespagne-2-a-0_1952807/', 'summary': 'Mondial U20 : le Maroc entame son parcours par une victoire face à l’Espagne 2 à 0. La sélection marocaine a entamé son parcours en Coupe du Monde U20 de football par une victoire historique face à son homologue espagnole, par 2 buts à 0, en match de la première journée du groupe C, dimanche à Santiago. Les Lionceaux de l’Atlas se sont imposés grâce aux buts de Mohamed Yassir Zabiri (54e).', 'size': 5}, {'id': '165', 'title': 'Mondial U20: Le Maroc entame son parcours par une victoire face à l’Espagne', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/influences/mondial-u20-le-maroc-entame-son-parcours-par-une-victoire-face-a-lespagne/', 'summary': 'Mondial U20: Le Maroc entame son parcours par une victoire face à l’Espagne. Les Lionceaux de l’Atlas se sont imposés 2 buts à 0 grâce à des réalisations de Mohamed Yassir Zabiri (54e) et Yassine Gessime (58e). Prochain adversaire : le Brésil, jeudi prochain.', 'size': 4}, {'id': '192', 'title': 'Mondial U20 : entrée en matière idéale pour le Maroc, qui domine l’Espagne 2–0', 'source': 'lnt.ma', 'link': 'https://lnt.ma/mondial-u20-entree-en-matiere-ideale-pour-le-maroc-qui-domine-lespagne-2-0/', 'summary': 'Mondial U20 : entrée en matière idéale pour le Maroc, qui domine l’Espagne 2–0. La sélection marocaine U20 a réussi ses débuts en Coupe du monde en s’imposant avec autorité face à l’Espagne (2–0), lors de la première journée du groupe C au Stade National de Santiago. Les Lionceaux de l’Atlas ont fait la différence en seconde période grâce à Mohamed Yassir Zabiri (54e) et Yassine Gessime (peu après . ', 'size': 4}], 'main_title': 'Mondial U20 : le Maroc entame son parcours par une victoire face à l’Espagne 2 à 0'}, {'community_id': '2', 'articles': [{'id': '11', 'title': 'Le Maroc célèbre ce lundi l’anniversaire de S.A.R. la Princesse Lalla Asmaa', 'source': 'lematin.ma', 'link': 'https://lematin.ma/nation/le-maroc-celebre-ce-lundi-lanniversaire-de-sar-la-princesse-lalla-asmaa/304450', 'summary': 'Le Maroc célèbre ce lundi l’anniversaire de S.A.R. la Princesse Lalla Asmaa. Princesse au grand cœur, S.A.R. la Princesse Lalla Asmaa s’est engagée dès son jeune âge dans le militantisme social, en veillant en permanence au bien-être des enfants sourds-muet.', 'size': 2}, {'id': '82', 'title': 'Le peuple marocain célèbre lundi l’anniversaire de S.A.R. la Princesse Lalla Asmaa', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/le-peuple-marocain-celebre-lundi-lanniversaire-de-s-a-r-la-princesse-lalla-asmaa/', 'summary': 'Le peuple marocain célèbre lundi l’anniversaire de S.A.R. la Princesse Lalla Asmaa. La Famille Royale et, avec elle, le peuple marocain, célèbrent lundi l’anniversaire de SAR la Princesse Lalla Asmaa, une occasion de mettre en avant les différentes actions de Son Altesse Royale dans le domaine social et son engagement constant en faveur de l’amélioration des conditions des enfants à besoins spécifiques, notamment les enfants sourds-muets. Princesse .', 'size': 3}, {'id': '100', 'title': 'Revue de presse de ce lundi 29 septembre 2025', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/443177-revue-de-presse-de-ce-lundi-29-septembre-2025.html', 'summary': 'Revue de presse de ce lundi 29 septembre 2025. Voici les principaux titres développés par la presse nationale ce lundi 29 septembre 2025 Le Matin Le peuple marocain célèbre lundi l’anniversaire de SAR la Princesse Lalla Asmaa La Famille Royale et, avec elle, le peuple marocain, célèbrent lundi l’anniversaire de SAR la Princesse Lalla Asmaa, une occasion de mettre en avant les différentes actions . ', 'size': 2}], 'main_title': 'Le peuple marocain célèbre lundi l’anniversaire de S.A.R. la Princesse Lalla Asmaa'}, {'community_id': '3', 'articles': [{'id': '25', 'title': 'ENSA d’Agadir : le tribunal administratif ordonne la réintégration des étudiants contestataires', 'source': 'lematin.ma', 'link': 'https://lematin.ma/enseignement/ensa-agadir-la-justice-reintegre-les-etudiants-exclus-apres-contestation/304352', 'summary': 'ENSA d’Agadir : le tribunal administratif ordonne la réintégration des étudiants contestataires. Le tribunal administratif d’Agadir a rendu, jeudi 25 septembre, un jugement en première instance favorable aux étudiants de l’École Nationale des Sciences Appliquées (Ensa) qui ava.', 'size': 2}, {'id': '39', 'title': 'ENSA d’Agadir : la justice impose la réintégration des étudiants exclus', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/ENSA-d-Agadir-la-justice-impose-la-reintegration-des-etudiants-exclus_a72280.html', 'summary': 'ENSA d’Agadir : la justice impose la réintégration des étudiants exclus. Confrontée à un taux d’échec record et à des critiques sur ses méthodes d’évaluation, l’École nationale des sciences appliquées d’Agadir traverse une crise institutionnelle. Le tribunal administratif a ordonné la réintégration immédiate des étudiants contestataires, en attendant un jugement sur le fond.', 'size': 2}], 'main_title': 'ENSA d’Agadir : le tribunal administratif ordonne la réintégration des étudiants contestataires'}, {'community_id': '5', 'articles': [{'id': '64', 'title': 'Maroc\xa0: L’école 1337 en tête du Moroccan Collegiate Programming Contest', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/177501/maroc-l-ecole-1337-tete-moroccan.html', 'summary': 'Maroc : L’école 1337 en tête du Moroccan Collegiate Programming Contest. L’école de programmation 1337 s’est classé en tête du Moroccan Collegiate Programming Contest (MCPC), tenu du 19 au 21 septembre 2025 au campus de l’Université Mohammed VI polytechnique (UM6P) de Rabat. L’entraînement des étudiants participants pour l’établissement a été coordonné par Jalal Maaouni, lauréat de la même école et qui a accompagné les quatre équipes.', 'size': 2}, {'id': '141', 'title': 'Le MCPC 2025 consacre l’école 1337 et signe un record national', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/le-mcpc-2025-consacre-lecole-1337-et-signe-un-record-national-310699/', 'summary': 'Le MCPC 2025 consacre l’école 1337 et signe un record national. Le Moroccan Collegiate Programming Contest (MCPC) a tenu, dernièrement, sa finale 2025 sur le campus de Rabat de l’Université Mohammed VI Polytechnique (UM6P). Durant trois jours (19-21 septembre),', 'size': 2}], 'main_title': 'Maroc\xa0: L’école 1337 en tête du Moroccan Collegiate Programming Contest'}, {'community_id': '7', 'articles': [{'id': '74', 'title': 'Investissement: Le Maroc, un «hub stratégique» selon le Département d’État américain', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/affaires/investissement-le-maroc-un-hub-strategique-selon-le-departement-detat-americain/', 'summary': "Investissement: Le Maroc, un «hub stratégique» selon le Département d’État américain. Dans la dernière livraison de son rapport sur le climat d'investissement, le Département d’Etat américain a mis en avant les atouts majeurs du Royaume dans le domaine, le qualifiant de hub stratégique pour les affaires et l’industrie.", 'size': 2}, {'id': '81', 'title': 'Le Département d’État américain met en avant les atouts du Maroc comme «\xa0hub stratégique\xa0» pour les affaires et l’industrie', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/le-departement-detat-americain-met-en-avant-les-atouts-du-maroc-comme-hub-strategique-pour-les-affaires-et-lindustrie/', 'summary': 'Le Département d’État américain met en avant les atouts du Maroc comme « hub stratégique » pour les affaires et l’industrie. Dans son rapport 2025 sur le climat d’investissement au Maroc, publié cette semaine, le Département d’État américain met en avant les atouts majeurs et les opportunités d’investissement qui font du Royaume un « hub régional stratégique pour les affaires et l’industrie ». Dans ce rapport couvrant plusieurs volets, notamment l’investissement, les politiques industrielles, le secteur financier et .', 'size': 2}], 'main_title': 'Investissement: Le Maroc, un «hub stratégique» selon le Département d’État américain'}, {'community_id': '1', 'articles': [{'id': '87', 'title': 'Foot/Amical : la vente des billets du match Maroc-Bahreïn lancée le 29 septembre', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/foot-amical-la-vente-des-billets-du-match-maroc-bahrein-lancee-le-29-septembre/', 'summary': 'Foot/Amical : la vente des billets du match Maroc-Bahreïn lancée le 29 septembre. La vente des billets du match amical qui opposera l’équipe nationale marocaine à son homologue du Bahreïn, le 9 octobre prochain au stade Prince Moulay Abdellah à Rabat (20h00), sera lancée à partir du 29 septembre à 09h00, annonce le comité d’organisation de cette rencontre. Dans un souci d’offrir une expérience fluide et sécurisée aux .', 'size': 2}, {'id': '106', 'title': "Regragui dévoile sa liste pour les matchs d'octobre ce jeudi", 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/regragui-devoile-sa-liste-pour-les-matchs-doctobre-ce-jeudi/304513', 'summary': "Regragui dévoile sa liste pour les matchs d'octobre ce jeudi. L’équipe du Maroc affrontera son homologue du Bahreïn, en amical, le 9 octobre prochain au Stade Prince Moulay Abdellah de Rabat (20h00).**related_articles[300577]**Lors de la dern.", 'size': 2}], 'main_title': 'Foot/Amical : la vente des billets du match Maroc-Bahreïn lancée le 29 septembre'}, {'community_id': '10', 'articles': [{'id': '95', 'title': 'Walid Regragui dévoilera sa liste jeudi avant les matches contre Bahreïn et le Congo', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/443201-walid-regragui-devoilera-sa-liste-jeudi-avant-les-matches-contre-bahrein-et-le-congo.html', 'summary': 'Walid Regragui dévoilera sa liste jeudi avant les matches contre Bahreïn et le Congo. Le sélectionneur national Walid Regragui s’apprête à livrer ses choix. L’entraîneur des Lions de l’Atlas tiendra une conférence de presse jeudi prochain au Complexe Mohammed VI de Football à Salé, à partir de 11h00, afin de présenter la liste des joueurs convoqués pour les prochaines échéances internationales. Au programme : un match amical face au . ', 'size': 3}, {'id': '127', 'title': 'Foot : Walid Regragui en conférence de presse jeudi, à Salé', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/09/29/foot-walid-regragui-en-conference-de-presse-jeudi-a-sale_1952877/', 'summary': 'Foot : Walid Regragui en conférence de presse jeudi, à Salé. L’entraîneur de l’équipe nationale « A » de football, Walid Regragui, tiendra une conférence de presse, jeudi prochain à Salé, pour la présentation de la liste des joueurs retenus pour disputer le prochain match amical face au Bahreïn et face au Congo pour le compte des éliminatoires (groupe E) africaines de la Coupe du Monde-2026. Cette rencontre.', 'size': 3}, {'id': '172', 'title': 'Foot: Conférence de presse du sélectionneur national Walid Regragui, jeudi à Salé', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/foot-conference-de-presse-du-selectionneur-national-walid-regragui-jeudi-a-sale/', 'summary': 'Foot: Conférence de presse du sélectionneur national Walid Regragui, jeudi à Salé. L’entraîneur de l’équipe nationale « A » de football, Walid Regragui, tiendra une conférence de presse, jeudi prochain à Salé, pour la présentation de la liste des joueurs retenus pour disputer le prochain match amical face au Bahreïn et face au Congo pour le compte des éliminatoires (groupe E) africaines de la Coupe du Monde-2026. Cette rencontre .', 'size': 3}], 'main_title': 'Walid Regragui dévoilera sa liste jeudi avant les matches contre Bahreïn et le Congo'}, {'community_id': '11', 'articles': [{'id': '104', 'title': 'Attijari Payment, Visa et Woliz unissent leurs forces pour digitaliser le commerce au Maroc', 'source': 'lematin.ma', 'link': 'https://lematin.ma/economie/attijari-payment-visa-et-woliz-sallient-pour-digitaliser-le-commerce/304520', 'summary': 'Attijari Payment, Visa et Woliz unissent leurs forces pour digitaliser le commerce au Maroc. Attijari Payment, filiale du groupe Attijariwafa bank spécialisée dans les services d’acceptation et de traitement des paiements, a officialisé ce 26 septembre 2025 un protocole d’.', 'size': 3}, {'id': '152', 'title': 'Pour accélérer  la digitalisation  des paiements : Attijari Payment, Visa et Woliz s’associent', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/economie/pour-accelerer-la-digitalisation-des-paiements-attijari-payment-visa-et-woliz-sassocient', 'summary': 'Pour accélérer la digitalisation des paiements : Attijari Payment, Visa et Woliz s’associent. Partenariat : Attijari Payment, en partenariat avec Visa et Woliz, annonce dans un communiqué la signature d’un protocole de coopération stratégique destiné à accélérer la digitalisation des paiements dans le secteur de la grande consommation au Maroc. Cet accord a pour objectif d’intégrer les solutions innovantes d’acceptation d’Attijari Payment dans l’offre de Woliz, au service .', 'size': 3}, {'id': '189', 'title': 'Paiements : Attijari Payment, Visa et Woliz scellent un partenariat pour accélérer la digitalisation chez les commerçants', 'source': 'lnt.ma', 'link': 'https://lnt.ma/paiements-attijari-payment-visa-et-woliz-scellent-un-partenariat-pour-accelerer-la-digitalisation-chez-les-commercants/', 'summary': 'Paiements : Attijari Payment, Visa et Woliz scellent un partenariat pour accélérer la digitalisation chez les commerçants. Attijari Payment a annoncé la signature d’un protocole de coopération stratégique avec Visa et la fintech marocaine Woliz, visant à accélérer la digitalisation des paiements dans le secteur de la grande consommation et à élargir l’accès des commerçants aux services financiers. L’accord prévoit l’intégration des solutions d’acceptation d’Attijari Payment au sein de l’offre Woliz, afin . ', 'size': 3}], 'main_title': 'Attijari Payment, Visa et Woliz unissent leurs forces pour digitaliser le commerce au Maroc'}, {'community_id': '4', 'articles': [{'id': '114', 'title': "Averses orageuses, mercredi et jeudi, dans les provinces d'Aousserd et de Oued Ed-Dahab (DGM)", 'source': 'lematin.ma', 'link': 'https://lematin.ma/regions/averses-orageuses-dans-les-provinces-daousserd-et-oued-ed-dahab-dgm/304496', 'summary': "Averses orageuses, mercredi et jeudi, dans les provinces d'Aousserd et de Oued Ed-Dahab (DGM). Ces fortes averses sont prévues de mercredi à 12h00 jusqu’à jeudi à 18h00 dans les deux provinces, avec des cumuls estimés entre 50 et 80 mm, a précisé la DGM dans un bulletin de p.", 'size': 2}, {'id': '135', 'title': "Averses orageuses, mercredi et jeudi, dans les provinces d'Aousserd et de Oued Ed-Dahab", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/09/29/averses-orageuses-mercredi-et-jeudi-dans-les-provinces-daousserd-et-de-oued-ed-dahab_1952809/', 'summary': "Averses orageuses, mercredi et jeudi, dans les provinces d'Aousserd et de Oued Ed-Dahab. De fortes averses orageuses sont attendues, mercredi et jeudi, dans les provinces d’Aousserd et de Oued Ed-Dahab, a annoncé dimanche la Direction générale de la météorologie (DGM). Ces fortes averses sont prévues de mercredi à 12h00 jusqu’à jeudi à 18h00 dans les deux provinces, avec des cumuls estimés entre 50 et 80 mm, a précisé.", 'size': 2}], 'main_title': "Averses orageuses, mercredi et jeudi, dans les provinces d'Aousserd et de Oued Ed-Dahab (DGM)"}, {'community_id': '6', 'articles': [{'id': '126', 'title': "Tourisme : les établissements d'hébergement classés enregistrent plus de 17,13 millions de nuitées à fin juillet", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/09/29/tourisme-les-etablissements-dhebergement-classes-enregistrent-plus-de-1713-millions-de-nuitees-a-fin-juillet_1952880/', 'summary': "Tourisme : les établissements d'hébergement classés enregistrent plus de 17,13 millions de nuitées à fin juillet. Le volume des nuitées réalisées dans les établissements d’hébergement touristique classés (EHTC) a atteint plus de 17,13 millions de nuitées à fin juillet 2025, en hausse de 12% par rapport à la même période un an auparavant, selon l’Observatoire du Tourisme. Ces nuitées se répartissent sur le tourisme national (+6%) et le tourisme international (+14%),.", 'size': 2}, {'id': '168', 'title': 'Maroc : les EHTC enregistrent plus de 17,13 millions de nuitées à fin juillet', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/maroc-les-ehtc-enregistrent-plus-de-1713-millions-de-nuitees-a-fin-juillet/', 'summary': 'Maroc : les EHTC enregistrent plus de 17,13 millions de nuitées à fin juillet. Le volume des nuitées réalisées dans les établissements d’hébergement touristique classés (EHTC) a atteint plus de 17,13 millions de nuitées à fin juillet 2025, en hausse de 12% par rapport à la même période un an auparavant, selon l’Observatoire du Tourisme. Ces nuitées se répartissent sur le tourisme national (+6%) et le tourisme international (+14%), .', 'size': 2}], 'main_title': "Tourisme : les établissements d'hébergement classés enregistrent plus de 17,13 millions de nuitées à fin juillet"}, {'community_id': '8', 'articles': [{'id': '134', 'title': 'Trump veut arracher à Netanyahu un accord sur Gaza', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/09/29/trump-veut-arracher-a-netanyahu-un-accord-sur-gaza_1952824/', 'summary': 'Trump veut arracher à Netanyahu un accord sur Gaza. Donald Trump reçoit lundi le Premier ministre Benjamin Netanyahu à la Maison Blanche, peu après avoir promis un “accord” à Gaza et mis son veto à une annexion de la Cisjordanie occupée. Nous avons une réelle chance d’atteindre quelque chose de grand au Moyen-Orient. Tout le monde est prêt pour quelque chose de spécial, une.', 'size': 2}, {'id': '139', 'title': 'Gaza: Trump peut-il arracher un cessez-le-feu à Netanyahu\xa0?', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/gaza-trump-peut-il-arracher-un-cessez-le-feu-a-netanyahu-310704/', 'summary': 'Gaza: Trump peut-il arracher un cessez-le-feu à Netanyahu ?. Le président américain Donald Trump reçoit, lundi en fin d’après-midi (heure marocaine), le Premier ministre Benjamin Netanyahu à la Maison Blanche, peu après avoir promis un « accord » à', 'size': 2}], 'main_title': 'Trump veut arracher à Netanyahu un accord sur Gaza'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
                        
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ? d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        // Fonction pour cacher le tooltip
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = '';
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
    
    
</body>




</html>
    