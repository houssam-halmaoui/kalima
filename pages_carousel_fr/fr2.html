<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); 
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title"> Les principales actualités des dernières 24 heures

</div>    
        <div class="header-subtitle"> Dernière mise à jour : 10/08/2025 - 06h28</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"></div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '3', 'title': 'Tomate marocaine : croissance soutenue des importations espagnoles malgré la flambée des prix', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/436806-tomate-marocaine-croissance-soutenue-des-importations-espagnoles-malgre-la-flambee-des-prix.html', 'summary': 'Tomate marocaine : croissance soutenue des importations espagnoles malgré la flambée des prix. Selon une analyse récente réalisée par Hortoinfo, les importations de tomates en provenance du Maroc vers l’Espagne ont connu une croissance notable au cours de la période allant de juin 2024 à mai 2025. Le volume total importé a progressé de 40,33 % par rapport à la saison précédente (2023/2024), atteignant ainsi 80,29 millions de . ', 'size': 2}, {'id': '27', 'title': 'Exportations agricoles : 80 millions de kilos de tomates marocaines écoulés en Espagne', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Exportations-agricoles-80-millions-de-kilos-de-tomates-marocaines-ecoules-en-Espagne_a70686.html', 'summary': 'Exportations agricoles : 80 millions de kilos de tomates marocaines écoulés en Espagne. Les exportations marocaines de tomates vers l’Espagne ont connu une progression spectaculaire au cours de la période allant de juin 2024 à mai 2025. Selon les données rapportées par le site spécialisé Hortoinfo, s’appuyant sur les statistiques de l’ICEX (Agence espagnole du commerce extérieur) et de l’Agencia Tributaria, la hausse atteint 40,33 % par rapport à la même période de l’année précédente.', 'size': 2}], 'main_title': 'Tomate marocaine : croissance soutenue des importations espagnoles malgré la flambée des prix'}, {'community_id': '8', 'articles': [{'id': '13', 'title': 'CHAN-2024 : le Maroc va chercher la victoire face au Kenya (Sektioui)', 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/chan-2024-le-maroc-va-chercher-la-victoire-face-au-kenya-sektioui/295736', 'summary': 'CHAN-2024 : le Maroc va chercher la victoire face au Kenya (Sektioui). « Notre objectif principal est de passer le premier tour et cela passe par une victoire contre le Kenya », a-t-il indiqué en conférence de presse d’avant match, ajoutant que «la re.', 'size': 2}, {'id': '103', 'title': 'CHAN 2024 : Pour Tarik Sektioui, le Maroc va chercher la victoire face au Kenya', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/437130-chan-2024-pour-tarik-sektioui-le-maroc-va-chercher-la-victoire-face-au-kenya.html', 'summary': 'CHAN 2024 : Pour Tarik Sektioui, le Maroc va chercher la victoire face au Kenya. Le sélectionneur national, Tarik Sektioui a affirmé, samedi à Nairobi, que l’équipe nationale du Maroc des joueurs locaux va chercher la victoire face au Kenya, en match de la 3è journée du groupe A du Championnat d’Afrique des nations (CHAN-2024), prévu dimanche au stade Kasarani. « Notre objectif principal est de passer le premier tour . ', 'size': 2}], 'main_title': 'CHAN-2024 : le Maroc va chercher la victoire face au Kenya (Sektioui)'}, {'community_id': '2', 'articles': [{'id': '15', 'title': 'El Jadida : ouverture du Moussem Moulay Abdellah Amghar', 'source': 'lematin.ma', 'link': 'https://lematin.ma/regions/el-jadida-ouverture-du-moussem-moulay-abdellah-amghar/295725', 'summary': 'El Jadida : ouverture du Moussem Moulay Abdellah Amghar. Organisé jusqu’au 16 août, sous le Haut Patronage de Sa Majesté le Roi Mohammed VI, cet événement s’est ouvert par une cérémonie religieuse de samâa et de madih, ainsi que par des.', 'size': 2}, {'id': '98', 'title': 'Ouverture à El Jadida du Moussem Moulay Abdellah Amghar', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/ouverture-a-el-jadida-du-moussem-moulay-abdellah-amghar.html', 'summary': 'Ouverture à El Jadida du Moussem Moulay Abdellah Amghar. Le Moussem Moulay Abdellah Amghar, l’une des plus importantes manifestations culturelles et religieuses dans le Royaume, a débuté vendredi à El Jadida (Maroc) avec au menu une programmation riche et variée. L’article est apparu en premier sur .', 'size': 2}], 'main_title': 'El Jadida : ouverture du Moussem Moulay Abdellah Amghar'}, {'community_id': '4', 'articles': [{'id': '17', 'title': 'Décès de Jamal Eddine Al Qadiri Boutchich, Cheikh de la Tariqa Qadirya Boutchichia', 'source': 'lematin.ma', 'link': 'https://lematin.ma/societe/deces-de-jamal-eddine-al-qadiri-boutchich/295726', 'summary': 'Décès de Jamal Eddine Al Qadiri Boutchich, Cheikh de la Tariqa Qadirya Boutchichia. Le défunt sera inhumé dimanche au siège de la Zaouia à Madagh, ajoute-t-on de même source.Né en 1942 à Madagh, feu Jamal Eddine Al Qadiri Boutchich, l’une des grandes figures du so.', 'size': 2}, {'id': '109', 'title': 'Message de condoléances du Roi à la famille de feu Jamal Eddine Al Qadiri Boutchich, Cheikh de la Tariqa Qadirya Boutchichia', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/437133-message-de-condoleances-du-roi-a-la-famille-de-feu-jamal-eddine-al-qadiri-boutchich-cheikh-de-la-tariqa-qadirya-boutchichia.html', 'summary': 'Message de condoléances du Roi à la famille de feu Jamal Eddine Al Qadiri Boutchich, Cheikh de la Tariqa Qadirya Boutchichia. Le Roi Mohammed VI a adressé un message de condoléances et de compassion aux membres de la famille du Cheikh de la Tariqa Qadirya Boutchichia, Jamal Eddine Al Qadiri Boutchich. Dans ce message, le Roi affirme avoir appris avec une profonde affliction la triste nouvelle de la disparition du Cheikh Jamal Eddine Al Qadiri Boutchich, . ', 'size': 2}, {'id': '118', 'title': 'Les condoléances de Mohammed VI à la famille du cheikh de la Tariqa Qadirya Boutchichia', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/173914/condoleances-mohammed-famille-cheikh-tariqa.html', 'summary': 'Les condoléances de Mohammed VI à la famille du cheikh de la Tariqa Qadirya Boutchichia. Le roi Mohammed VI a transmis un message de condoléances et de compassion à la famille du Cheikh de la Tariqa Qadirya Boutchichia, Jamal Eddine Al Qadiri Boutchich.', 'size': 3}], 'main_title': 'Les condoléances de Mohammed VI à la famille du cheikh de la Tariqa Qadirya Boutchichia'}, {'community_id': '5', 'articles': [{'id': '50', 'title': 'Accès au crédit : les industriels rassurés au deuxième trimestre 2025', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/acces-au-credit-les-industriels-rassures-au-deuxieme-trimestre-2025-308303/', 'summary': 'Accès au crédit : les industriels rassurés au deuxième trimestre 2025. L’accès au financement bancaire aurait été jugé normal par 80% des entreprises industrielles dans le Royaume, tandis que 16% d’entre elles l’auraient qualifié de difficile au deuxième trimestre 2025, indique Bank Al-Maghrib (BAM). Par branche d’activité, ces proportions sont de 78% et 14% dans la chimie et parachimie, 78% et', 'size': 2}, {'id': '76', 'title': 'BAM : L’accès au financement bancaire jugé normal par 80% des patrons d’industrie', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/argent/bam-lacces-au-financement-bancaire-juge-normal-par-80-des-patrons-dindustrie/', 'summary': 'BAM : L’accès au financement bancaire jugé normal par 80% des patrons d’industrie. L\'accès au financement bancaire aurait été jugé "normal" par 80% des entreprises industrielles, tandis que 16% d\'entre elles l\'auraient qualifié de "difficile" au deuxième trimestre 2025, indique Bank Al-Maghrib (BAM).', 'size': 2}], 'main_title': 'Accès au crédit : les industriels rassurés au deuxième trimestre 2025'}, {'community_id': '6', 'articles': [{'id': '51', 'title': 'Maroc\xa0: les dépôts bancaires enregistrent une croissance à fin juin', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/maroc-les-depots-bancaires-enregistrent-une-croissance-a-fin-juin-308295/', 'summary': 'Maroc : les dépôts bancaires enregistrent une croissance à fin juin. Les dépôts auprès des banques se sont établis à 1 309 milliards de DH (MMDH) à fin juin 2025, enregistrant une hausse annuelle de 9,6%, indique Bank Al-Maghrib (BAM) dans son récent tableau de bord «Crédits-Dépôts bancaires». Dans le détail, les dépôts des ménages ont progressé de 6,6% pour atteindre', 'size': 2}, {'id': '100', 'title': 'BAM : Le crédit bancaire en progression de 5,8% à fin juin', 'source': 'lnt.ma', 'link': 'https://lnt.ma/bam-le-credit-bancaire-en-progression-de-58-a-fin-juin/', 'summary': 'BAM : Le crédit bancaire en progression de 5,8% à fin juin. L’encours du crédit bancaire a atteint 1.175,5 milliards de dirhams (MMDH) à fin juin 2025, en progression de 5,8 % sur un an, selon le tableau de bord « Crédits-Dépôts bancaires » publié par Bank Al-Maghrib (BAM). Cette évolution recouvre une hausse de 4,4 % des crédits aux agents non financiers et de 13,3 % . ', 'size': 2}], 'main_title': 'Maroc\xa0: les dépôts bancaires enregistrent une croissance à fin juin'}, {'community_id': '7', 'articles': [{'id': '53', 'title': 'Les prévisions du samedi 9 août 2025', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/les-previsions-du-samedi-9-aout-2025-308280/', 'summary': 'Les prévisions du samedi 9 août 2025. Voici les prévisions météorologiques établies par la Direction générale de la météorologie pour le samedi 9 août 2025. -Temps chaud à localement très chaud sur les plaines intérieures, le Souss, le Sud-Est et les provinces sahariennes. -Averses orageuses par endroits sur les Haut et Moyen Atlas, le Rif et l’extrême', 'size': 2}, {'id': '102', 'title': "Le temps qu'il fera ce dimanche 10 août 2025", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/437116-le-temps-quil-fera-ce-dimanche-10-aout-2025.html', 'summary': "Le temps qu'il fera ce dimanche 10 août 2025. Voici les prévisions météorologiques établies par la Direction générale de la météorologie pour le dimanche 10 août 2025 – Temps chaud à localement très chaud sur les plaines de Tadla, Rhamna, Chiadma, Abda, le Souss,l’intérieur de Chaouia, le Saiss, Oulmès, le Sud-Est et les provinces sahariennes. – Nuages bas assez fréquents avec formations brumeuses ou . ", 'size': 2}], 'main_title': 'Les prévisions du samedi 9 août 2025'}, {'community_id': '3', 'articles': [{'id': '72', 'title': 'Journée nationale des MRE : La digitalisation au centre des priorités', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/au-royaume/journee-nationale-des-mre-la-digitalisation-au-centre-des-priorites/', 'summary': 'Journée nationale des MRE : La digitalisation au centre des priorités. Le Maroc célèbre, dimanche, la Journée nationale des Marocains résidant à l\'étranger (MRE) sous le thème "Le chantier de la digitalisation : un levier pour renforcer les services de proximité au profit des Marocains du Monde".', 'size': 2}, {'id': '97', 'title': 'Journée nationale des Marocains résidant à l’étranger sous le signe de la digitalisation', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/journee-nationale-des-marocains-residant-a-letranger-sous-le-signe-de-la-digitalisation.html', 'summary': 'Journée nationale des Marocains résidant à l’étranger sous le signe de la digitalisation. Le Maroc célèbre dimanche la Journée nationale des Marocains résidant à l’étranger (MRE) sous le thème « Le chantier de la digitalisation : un levier pour renforcer les services de proximité au profit des Marocains du Monde », une occasion idoine pour renforcer les liens entre les MRE et leur pays d’origine, particulièrement dans un contexte marqué . L’article est apparu en premier sur .', 'size': 2}], 'main_title': 'Journée nationale des MRE : La digitalisation au centre des priorités'}, {'community_id': '1', 'articles': [{'id': '73', 'title': 'Mourabaha immobilière : L’encours progresse de 17,1% à fin juin 2025', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/argent/mourabaha-immobiliere-lencours-progresse-de-171-a-fin-juin-2025/', 'summary': "Mourabaha immobilière : L’encours progresse de 17,1% à fin juin 2025. Le financement participatif destiné à l'habitat, notamment sous forme de Mourabaha immobilière, a poursuivi sa progression pour atteindre un encours de 27 milliards de dirhams (MMDH) à fin juin 2025, contre 23,1 MMDH un an auparavant, selon Bank Al-Maghrib (BAM).", 'size': 2}, {'id': '83', 'title': 'Financement participatif destiné à l’habitat : un encours de 27 MMDH à fin juin (BAM)', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/financement-participatif-destine-a-lhabitat-un-encours-de-27-mmdh-a-fin-juin-bam/', 'summary': 'Financement participatif destiné à l’habitat : un encours de 27 MMDH à fin juin (BAM). Le financement participatif destiné à l’habitat, notamment sous forme de Mourabaha immobilière, a poursuivi sa progression pour atteindre un encours de 27 milliards de dirhams (MMDH) à fin juin 2025, contre 23,1 MMDH un an auparavant, selon Bank Al-Maghrib (BAM). Cette hausse représente une amélioration annuelle de 17,1%, précise BAM dans son tableau de bord .', 'size': 2}], 'main_title': 'Mourabaha immobilière : L’encours progresse de 17,1% à fin juin 2025'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
                        
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ? d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        // Fonction pour cacher le tooltip
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = '';
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
    
    
</body>




</html>
    