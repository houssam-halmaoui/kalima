<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); 
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title"> Les principales actualités des dernières 24 heures

</div>    
        <div class="header-subtitle"> Dernière mise à jour : 11/10/2025 - 18h27</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"></div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '3', 'articles': [{'id': '3', 'title': 'Discours royal : les élus appelés à être "dignes de confiance" "à la hauteur de la responsabilité"', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/444834-discours-royal-les-elus-appeles-a-etre-dignes-de-confiance-a-la-hauteur-de-la-responsabilite.html', 'summary': 'Discours royal : les élus appelés à être "dignes de confiance" "à la hauteur de la responsabilité". Le Roi Mohammed VI s’est adressé, vendredi soir, aux parlementaires à l’occasion de l’ouverture de la session d’automne du Parlement, pour rappeler les fondamentaux de l’action du Maroc et ses objectifs, appelant à une transformation majeure en matière de développement territorial, tout en exhortant à faire prévaloir les intérêts supérieurs de la Nation et des . ', 'size': 2}, {'id': '15', 'title': 'S.M. le Roi appelle à la mobilisation générale pour accélérer la mise en œuvre des programmes de développement inclusif', 'source': 'lematin.ma', 'link': 'https://lematin.ma/nation/sm-le-roi-fixe-le-cap-pour-un-developpement-inclusif/306913', 'summary': 'S.M. le Roi appelle à la mobilisation générale pour accélérer la mise en œuvre des programmes de développement inclusif. S.M. le Roi Mohammed VI a présidé, ce vendredi, la cérémonie d’ouverture de la dernière année législative du mandat en cours de la Chambre des Représentants. À cette occasion, le S.', 'size': 5}, {'id': '52', 'title': '[Discours intégral] Mohammed VI : “Il ne devrait pas y avoir de rivalité entre les grands projets nationaux et les programmes sociaux”', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/10/10/mohammed-vi-il-ne-devrait-pas-y-avoir-de-rivalite-entre-les-grands-projets-nationaux-et-les-programmes-sociaux_1955425/', 'summary': '[Discours intégral] Mohammed VI : “Il ne devrait pas y avoir de rivalité entre les grands projets nationaux et les programmes sociaux”. Le roi Mohammed VI s’est adressé ce vendredi 10 octobre devant les membres des deux chambres du Parlement, la Chambre des représentants et la Chambre des conseillers, pour l’ouverture de la première session de la 5e année législative de la 11e Législature. Voici le discours intégral. Sa Majesté le Roi Mohammed VI, que Dieu L’assiste,.', 'size': 7}, {'id': '123', 'title': 'Discours Royal : mobilisation, réformes et bien-être collectif au cœur des priorités', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/discours-royal-mobilisation-reformes-et-bien-etre-collectif-au-coeur-des-priorites/', 'summary': 'Discours Royal : mobilisation, réformes et bien-être collectif au cœur des priorités. Le modèle de développement promu par Sa Majesté le Roi Mohammed VI exige une mobilisation générale, un véritable changement de mentalités et une valorisation de l’humain, afin que les fruits du développement profitent équitablement à tous les citoyens, a affirmé le politologue Brahim Akdim. Le discours prononcé, vendredi, par SM le Roi, à l’ouverture de .', 'size': 3}, {'id': '125', 'title': 'Talbi Alami : Le discours Royal appelle à une responsabilité partagée pour le développement', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/talbi-alami-le-discours-royal-appelle-a-une-responsabilite-partagee-pour-le-developpement/', 'summary': 'Talbi Alami : Le discours Royal appelle à une responsabilité partagée pour le développement. Le discours adressé par Sa Majesté le Roi Mohammed VI à l’ouverture de la première session de la cinquième année législative de la 11e Législature, comporte de Hautes Orientations visant à consolider l’esprit de responsabilité partagée entre les différentes institutions, en vue de conforter l’élan de développement global et durable que connaît le Royaume, a .', 'size': 8}, {'id': '157', 'title': 'Le Roi Mohammed VI insiste sur le développement territorial et le changement des mentalités', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/le-roi-mohammed-vi-insiste-sur-le-developpement-territorial-et-le-changement-des-mentalites.html', 'summary': 'Le Roi Mohammed VI insiste sur le développement territorial et le changement des mentalités. La transformation majeure à opérer en matière de développement territorial requiert un changement significatif des mentalités et des méthodes de travail, ainsi qu’un véritable enracinement de la culture du résultat, a affirmé le Roi Mohammed VI. Dans son discours à l’ouverture de la 1e session de la 5e année législative de la 11e législature, le . L’article est apparu en premier sur .', 'size': 2}, {'id': '158', 'title': 'Texte intégral du discours du Roi Mohammed VI devant le Parlement marocain', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/integralite-du-discours-du-roi-mohammed-vi-devant-le-parlement-marocain.html', 'summary': 'Texte intégral du discours du Roi Mohammed VI devant le Parlement marocain. Le Roi Mohammed VI a présidé, vendredi, l’ouverture de la première session de la 5e année législative de la 11e Législature. A cette occasion, le souverain a prononcé un discours devant les membres des deux Chambres du Parlement : la Chambre des Représentants et la Chambre des Conseillers. Ci-joint le texte intégral du discours: . L’article est apparu en premier sur .', 'size': 3}], 'main_title': 'Talbi Alami : Le discours Royal appelle à une responsabilité partagée pour le développement'}, {'community_id': '1', 'articles': [{'id': '4', 'title': 'ONU: des pétitionnaires pointent la collusion avérée entre le polisario et les groupes terroristes', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/444929-onu-des-petitionnaires-pointent-la-collusion-averee-entre-le-polisario-et-les-groupes-terroristes.html', 'summary': 'ONU: des pétitionnaires pointent la collusion avérée entre le polisario et les groupes terroristes. Devant la 4è Commission de l’Assemblée générale de l’ONU réunie à New York, des pétitionnaires ont mis en garde contre la collusion avérée entre le groupe séparatiste armé du polisario et les groupuscules terroristes actifs dans la région du Sahel, évoquant une menace sérieuse à la stabilité et à la sécurité régionales. Intervenant à cette . ', 'size': 2}, {'id': '205', 'title': 'ONU : des pétitionnaires mettent en garde contre la collusion avérée entre le «\xa0polisario\xa0» et les groupes terroristes', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/onu-des-petitionnaires-mettent-en-garde-contre-la-collusion-averee-entre-le-polisario-et-les-groupes-terroristes.html', 'summary': "ONU : des pétitionnaires mettent en garde contre la collusion avérée entre le « polisario » et les groupes terroristes. Devant la 4è Commission de l'Assemblée générale de l’ONU réunie à New York, des pétitionnaires ont mis en garde contre la collusion avérée entre le groupe séparatiste armé du “polisario” et les groupuscules terroristes actifs dans la région du Sahel, évoquant une menace sérieuse à la stabilité et à la sécurité régionales. L’article est apparu en premier sur .", 'size': 2}], 'main_title': 'ONU: des pétitionnaires pointent la collusion avérée entre le polisario et les groupes terroristes'}, {'community_id': '2', 'articles': [{'id': '9', 'title': 'Hausse de 11% des exportations de l’artisanat marocain à fin septembre', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/444838-hausse-de-11-des-exportations-de-lartisanat-marocain-a-fin-septembre.html', 'summary': 'Hausse de 11% des exportations de l’artisanat marocain à fin septembre. L’Observatoire de l’Artisanat a fait savoir que les exportations des produits de l’artisanat marocain ont atteint 903,5 millions de dirhams (MDH) à fin septembre 2025, en hausse de 11% par rapport à la même période de 2024. Dans son récent bulletin d’export de l’artisanat, l’Observatoire précise que dans le détail, la poterie et la pierre . ', 'size': 2}, {'id': '12', 'title': 'Les exportations de l’artisanat marocain en hausse de 11% à fin septembre 2025', 'source': 'lematin.ma', 'link': 'https://lematin.ma/economie/les-exportations-de-lartisanat-marocain-en-hausse-de-11-a-fin-septembre/306948', 'summary': "Les exportations de l’artisanat marocain en hausse de 11% à fin septembre 2025. Dans le détail, la poterie et la pierre occupent une place de choix dans les exportations du secteur, représentant plus d'un tiers du total (313,14 MDH, +6%), fait savoir l#39.", 'size': 2}, {'id': '108', 'title': 'Artisanat : Les exportations en hausse de 11% à fin septembre 2025', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/affaires/artisanat-les-exportations-en-hausse-de-11-a-fin-septembre-2025/', 'summary': "Artisanat : Les exportations en hausse de 11% à fin septembre 2025. La poterie et la pierre occupent une place de choix dans les exportations du secteur, représentant plus d'un tiers du total (313,14 MDH, +6%), fait savoir l'Observatoire dans son récent bulletin d'export de l'artisanat.", 'size': 3}], 'main_title': 'Artisanat : Les exportations en hausse de 11% à fin septembre 2025'}, {'community_id': '4', 'articles': [{'id': '24', 'title': 'Mondial U20 : Les Lionceaux de l’Atlas écrivent une nouvelle page du football marocain', 'source': 'lematin.ma', 'link': 'https://lematin.ma/videos/mondial-u20-les-lionceaux-de-latlas-font-briller-le-football-marocain/306919', 'summary': 'Mondial U20 : Les Lionceaux de l’Atlas écrivent une nouvelle page du football marocain. Les Lionceaux de l’Atlas ont signé une victoire méritée face à la Corée du Sud, en huitièmes de finale de la Coupe du monde U20. Seule équipe africaine qualifiée, le Maroc affronte.', 'size': 2}, {'id': '75', 'title': 'Mondial U20 : le Maroc élimine la Corée (2-1) et file en quarts de finale', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/10/10/mondial-u20-le-maroc-elimine-la-coree-2-1-et-file-en-quarts-de-finale_1955267/', 'summary': 'Mondial U20 : le Maroc élimine la Corée (2-1) et file en quarts de finale. La sélection marocaine des moins de 20 ans de football s’est qualifiée pour les quarts de finale de la Coupe du monde U20 qui se tient au Chili, en battant la Corée par 2 buts à 1 (mi-temps 1-0), vendredi à Rancagua. Les Lionceaux de l’Atlas ont ouvert le score dès la 8e minute grâce.', 'size': 2}], 'main_title': 'Mondial U20 : Les Lionceaux de l’Atlas écrivent une nouvelle page du football marocain'}, {'community_id': '5', 'articles': [{'id': '42', 'title': 'Bouayach : l\'abolition de la peine de mort au Maroc est un processus "graduel et ascendant"', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Bouayach-l-abolition-de-la-peine-de-mort-au-Maroc-est-un-processus-graduel-et-ascendant_a72712.html', 'summary': 'Bouayach : l\'abolition de la peine de mort au Maroc est un processus "graduel et ascendant". L’abolition de la peine de mort au Maroc est un processus "graduel et ascendant" qui reflète la dynamique d’une société où interagissent les avis sur les droits humains avec les décisions politiques et se conjugue la volonté civile avec l’évolution législative, a affirmé, vendredi à Rabat, la présidente du Conseil national des droits de l’Homme (CNDH), Amina Bouayach.', 'size': 2}, {'id': '210', 'title': 'Abolition de la peine de mort : un processus « graduel et ascendant » au Maroc, selon le CNDH', 'source': 'lnt.ma', 'link': 'https://lnt.ma/abolition-de-la-peine-de-mort-un-processus-graduel-et-ascendant-au-maroc-selon-le-cndh/', 'summary': 'Abolition de la peine de mort : un processus « graduel et ascendant » au Maroc, selon le CNDH. L’abolition de la peine de mort au Maroc s’inscrit dans un processus « graduel et ascendant » où se conjuguent évolution législative, décisions publiques et débat sociétal, a indiqué vendredi la présidente du Conseil national des droits de l’Homme (CNDH), Amina Bouayach, lors d’une conférence de presse organisée à l’occasion de la Journée mondiale contre . ', 'size': 2}], 'main_title': 'Bouayach : l\'abolition de la peine de mort au Maroc est un processus "graduel et ascendant"'}, {'community_id': '6', 'articles': [{'id': '48', 'title': "Céréales : L'ONICL, Intercéréales et FranceAgriMer signent un protocole d'accord pour la période 2025-2028", 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Cereales-L-ONICL-Intercereales-et-FranceAgriMer-signent-un-protocole-d-accord-pour-la-periode-2025-2028_a72711.html', 'summary': "Céréales : L'ONICL, Intercéréales et FranceAgriMer signent un protocole d'accord pour la période 2025-2028. L'Office national interprofessionnel des céréales et des légumineuses (ONICL), l'interprofession des céréales françaises (Intercéréales) et FranceAgriMer ont signé, récemment à Casablanca, un nouveau Protocole d'accord pour la période 2025-2028.", 'size': 2}, {'id': '117', 'title': 'Céréales: L’ONICL, Intercéréales et FranceAgriMer signent un protocole d’accord', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/affaires/cereales-lonicl-intercereales-et-franceagrimer-signent-un-protocole-daccord/', 'summary': 'Céréales: L’ONICL, Intercéréales et FranceAgriMer signent un protocole d’accord. Signé à Casablanca en marge des Rencontres franco-marocaines des céréales, le nouveau protocole 2025-2028 entre l’ONICL, Intercéréales et FranceAgriMer vise à renforcer l’échange d’expertise, la formation et l’innovation pour la filière céréalière marocaine.', 'size': 2}], 'main_title': "Céréales : L'ONICL, Intercéréales et FranceAgriMer signent un protocole d'accord pour la période 2025-2028"}, {'community_id': '7', 'articles': [{'id': '49', 'title': 'Les “Ateliers de Tétouan” : une plateforme pour la création cinématographique méditerranéenne', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Les-Ateliers-de-Tetouan-une-plateforme-pour-la-creation-cinematographique-mediterraneenne_a72705.html', 'summary': 'Les “Ateliers de Tétouan” : une plateforme pour la création cinématographique méditerranéenne. Du 25 octobre au 1er novembre 2025, le Festival du Cinéma Méditerranéen de Tétouan célébrera sa 30ᵉ édition sous le signe de la création et du partage. Parmi ses rendez-vous phares, la troisième édition des Ateliers de Tétouan s’impose désormais comme une pépinière pour les talents émergents du pourtour méditerranéen.', 'size': 2}, {'id': '91', 'title': 'Le Festival du cinéma méditerranéen de Tétouan célèbre ses 30 ans', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/culture/le-festival-du-cinema-mediterraneen-de-tetouan-celebre-ses-30-ans', 'summary': 'Le Festival du cinéma méditerranéen de Tétouan célèbre ses 30 ans. 7ÈME ART Du 25 octobre au 1er novembre 2025, le Festival du cinéma méditerranéen de Tétouan fête sa 30e édition avec un programme foisonnant de colloques, rencontres et ateliers. Au Centre culturel de Tétouan et dans plusieurs lieux de la ville, cinéastes, critiques et universitaires débattront de la création méditerranéenne à travers des thèmes comme .', 'size': 2}], 'main_title': 'Les “Ateliers de Tétouan” : une plateforme pour la création cinématographique méditerranéenne'}, {'community_id': '8', 'articles': [{'id': '67', 'title': "Le Nobel de la paix à l'opposante vénézuélienne Maria Corina Machado", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/10/10/le-nobel-de-la-paix-a-lopposante-venezuelienne-maria-corina-machado_1955322/', 'summary': "Le Nobel de la paix à l'opposante vénézuélienne Maria Corina Machado. Le prix Nobel de la paix a été attribué vendredi à la cheffe de l’opposition vénézuélienne Maria Corina Machado pour ses efforts “en faveur d’une transition juste et pacifique de la dictature à la démocratie”. Maria Corina Machado est l’un des exemples les plus extraordinaires de courage civique en Amérique latine ces derniers temps”, a.", 'size': 2}, {'id': '169', 'title': 'Nobel de la paix : Machado récompensée, Trump recalé', 'source': 'lnt.ma', 'link': 'https://lnt.ma/nobel-de-la-paix-machado-recompensee-trump-recale/', 'summary': 'Nobel de la paix : Machado récompensée, Trump recalé. Le prix Nobel de la paix a été attribué vendredi à la cheffe de l’opposition vénézuélienne Maria Corina Machado pour ses efforts « en faveur d’une transition juste et pacifique de la dictature à la démocratie ». « Maria Corina Machado est l’un des exemples les plus extraordinaires de courage civique en Amérique latine ces derniers temps », a . ', 'size': 2}], 'main_title': "Le Nobel de la paix à l'opposante vénézuélienne Maria Corina Machado"}, {'community_id': '0', 'articles': [{'id': '79', 'title': 'Parlement: le développement territorial au coeur du Discours Royal', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/parlement-le-developpement-territorial-au-coeur-du-discours-royal-311485/', 'summary': 'Parlement: le développement territorial au coeur du Discours Royal. Sa Majesté le Roi Mohammed VI, accompagné de SAR le Prince Héritier Moulay El Hassan et de SAR le Prince Moulay Rachid, a adressé, vendredi, un discours au', 'size': 5}, {'id': '86', 'title': 'SM le Roi adresse un discours au Parlement à l’occasion de l’ouverture de la première session de la 5e année législative', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/actualite/sm-le-roi-adresse-un-discours-au-parlement-a-loccasion-de-louverture-de-la-premiere-session-de-la-5e-annee-legislative-1', 'summary': 'SM le Roi adresse un discours au Parlement à l’occasion de l’ouverture de la première session de la 5e année législative. Sa Majesté le Roi Mohammed VI, que Dieu L’assiste, accompagné de SAR le Prince Héritier Moulay El Hassan et de SAR le Prince Moulay Rachid, a adressé, vendredi, un discours au Parlement à l’occasion de l’ouverture de la première session de la 5e année législative de la 11e Législature. Voici le texte intégral du .', 'size': 6}, {'id': '112', 'title': 'Ouverture de l’année législative: Texte intégral du Discours Royal', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/au-royaume/ouverture-de-lannee-legislative-texte-integral-du-discours-royal/', 'summary': "Ouverture de l’année législative: Texte intégral du Discours Royal. Sa Majesté le Roi Mohammed VI, que Dieu L'assiste, accompagné de SAR le Prince Héritier Moulay El Hassan et de SAR le Prince Moulay Rachid, a adressé, vendredi, un discours au Parlement à l'occasion de l’ouverture de la première session de la 5e année législative de la 11e Législature.", 'size': 7}, {'id': '126', 'title': 'S.M. le Roi adresse un discours au Parlement à l’occasion de l’ouverture de la première session de la 5e année législative de la 11e Législature', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/s-m-le-roi-adresse-un-discours-au-parlement-a-loccasion-de-louverture/', 'summary': 'S.M. le Roi adresse un discours au Parlement à l’occasion de l’ouverture de la première session de la 5e année législative de la 11e Législature. Sa Majesté le Roi Mohammed VI, que Dieu L’assiste, accompagné de SAR le Prince Héritier Moulay El Hassan et de SAR le Prince Moulay Rachid, a adressé, vendredi, un discours au Parlement à l’occasion de l’ouverture de la première session de la 5e année législative de la 11e Législature. Voici le texte intégral du Discours .', 'size': 7}, {'id': '161', 'title': 'SM le Roi adresse un discours à l’ouverture de la 1ère session de la 5e année législative de la 11e Législature', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/sm-le-roi-adresse-un-discours-a-louverture-de-la-1ere-session-de-la-5e-annee-legislative-de-la-11e-legislature/', 'summary': 'SM le Roi adresse un discours à l’ouverture de la 1ère session de la 5e année législative de la 11e Législature. Sa Majesté le Roi Mohammed VI, que Dieu L’assiste, accompagné de SAR le Prince Héritier Moulay El Hassan et de SAR le Prince Moulay Rachid, a adressé, vendredi, un discours au Parlement à l’occasion de l’ouverture de la première session de la 5e année législative de la 11e Législature. Texte intégral du Discours Royal : ', 'size': 7}], 'main_title': 'Ouverture de l’année législative: Texte intégral du Discours Royal'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
                        
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ? d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        // Fonction pour cacher le tooltip
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = '';
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
    
    
</body>




</html>
    