<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); 
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title"> Les principales actualités des dernières 24 heures

</div>    
        <div class="header-subtitle"> Dernière mise à jour : 14/09/2025 - 18h27</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"></div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '11', 'title': 'Mondiaux de Tokyo : les athlètes Marocains Fouad Messaoudi, Hafid Rizqy et Anas Essayi éliminés', 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/mondiaux-de-tokyo-fouad-messaoudi-hafid-rizqy-et-anas-essayi-elimines/301423', 'summary': 'Mondiaux de Tokyo : les athlètes Marocains Fouad Messaoudi, Hafid Rizqy et Anas Essayi éliminés. Fouad Messaoudi a occupé la 10e place de la première série avec un chrono de 3min 37sec 83/100è. Hafid Rizqy a occupé la 7e place (3:41.55) de la 2e série alors que Anas Essayi a t.', 'size': 3}, {'id': '38', 'title': 'Mondiaux de Tokyo: Soufiane El Bakkali et Salaheddine Ben Yazide qualifiés pour la finale du 3000 m steeple', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Mondiaux-de-Tokyo-Soufiane-El-Bakkali-et-Salaheddine-Ben-Yazide-qualifies-pour-la-finale-du-3000-m-steeple_a71703.html', 'summary': 'Mondiaux de Tokyo: Soufiane El Bakkali et Salaheddine Ben Yazide qualifiés pour la finale du 3000 m steeple. \u200bLe double champion du monde et olympique marocain Soufiane El Bakkali et son compatriote Salaheddine Ben Yazide se sont qualifiés, samedi, pour la finale du concours du 3000 m steeple, disputé dans le cadre des 20es championnats du monde d’athlétisme, qui se tiennent jusqu’au 21 septembre à Tokyo.', 'size': 4}, {'id': '73', 'title': 'Mondiaux d’Athlétisme | El Bakkali et Ben Yazide qualifiés pour la finale du 3.000 m steeple', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/mondiaux-dathletisme-el-bakkali-et-ben-yazide-qualifies-pour-la-finale-du-3-000-m-steeple/', 'summary': 'Mondiaux d’Athlétisme | El Bakkali et Ben Yazide qualifiés pour la finale du 3.000 m steeple. Le double champion du monde et olympique marocain Soufiane El Bakkali et son compatriote Salaheddine Ben Yazide se sont qualifiés, samedi, pour la finale du concours du 3000 m steeple, disputé dans le cadre des 20es championnats du monde d’athlétisme, qui se tiennent jusqu’au 21 septembre à Tokyo. El Bakkali s’est classé premier de la ', 'size': 4}, {'id': '85', 'title': 'Mondiaux d’athlétisme à Tokyo : les Marocains déçoivent', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/441186-mondiaux-dathletisme-a-tokyo-les-marocains-decoivent.html', 'summary': 'Mondiaux d’athlétisme à Tokyo : les Marocains déçoivent. Les athlètes marocains n’ont pas réussi à se qualifier pour les demi-finales du 1 500 mètres lors des championnats du monde d’athlétisme à Tokyo, qui se poursuivent jusqu’au 21 septembre. Fouad El Massoudi a terminé 10ᵉ de sa série avec un chrono de 3:43.37, tandis que Hafid Rezki s’est classé 7ᵉ de la deuxième série . ', 'size': 5}, {'id': '115', 'title': 'Mondiaux de Tokyo : Fouad Messaoudi, Hafid Rizqy et Anas Essayi éliminés du\xa01500 m', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/176311/mondiaux-tokyo-fouad-messaoudi-hafid.html', 'summary': 'Mondiaux de Tokyo : Fouad Messaoudi, Hafid Rizqy et Anas Essayi éliminés du 1500 m. Les athlètes marocains Fouad Messaoudi, Hafid Rizqy et Anas Essayi ont été éliminés, dimanche, en qualifications du concours du 1500 m hommes comptant pour les 20ès championnats du monde dathlétisme, qui se tiennent jusquau 21 septembre à Tokyo.', 'size': 5}], 'main_title': 'Mondiaux d’athlétisme à Tokyo : les Marocains déçoivent'}, {'community_id': '1', 'articles': [{'id': '27', 'title': 'Export : Les États-Unis ouvrent leurs portes aux poissons marocains', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Export-Les-Etats-Unis-ouvrent-leurs-portes-aux-poissons-marocains_a71716.html', 'summary': "Export : Les États-Unis ouvrent leurs portes aux poissons marocains. Le Maroc a obtenu la reconnaissance officielle de l'Administration Nationale Américaine des Océans et de l'Atmosphère (NOAA Fisheries), confirmant la conformité de ses pêcheries aux dispositions législatives américaines du Marine Mammal Protection Act, a annoncé, vendredi, le Secrétariat d'État chargé de la Pêche maritime.", 'size': 2}, {'id': '75', 'title': 'Pêche : Le Maroc reconnu officiellement par la NOAA américaine', 'source': 'lnt.ma', 'link': 'https://lnt.ma/peche-le-maroc-reconnu-officiellement-par-la-noaa-americaine/', 'summary': 'Pêche : Le Maroc reconnu officiellement par la NOAA américaine. Le Maroc a obtenu la reconnaissance officielle de la NOAA Fisheries (Administration nationale océanique et atmosphérique des États-Unis), confirmant la conformité de ses pêcheries aux exigences du Marine Mammal Protection Act (MMPA), a annoncé, vendredi 12 septembre 2025, le Secrétariat d’État chargé de la Pêche maritime à Rabat. Cette accréditation, qui couvre la période du . ', 'size': 2}], 'main_title': 'Export : Les États-Unis ouvrent leurs portes aux poissons marocains'}, {'community_id': '3', 'articles': [{'id': '39', 'title': "Camps de Tindouf : des ONG alertent sur la persistance de l'esclavage", 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Camps-de-Tindouf-des-ONG-alertent-sur-la-persistance-de-l-esclavage_a71702.html', 'summary': "Camps de Tindouf : des ONG alertent sur la persistance de l'esclavage. Des ONG ont attiré l’attention de la communauté internationale, vendredi à la 60e session du Conseil des droits de l’Homme (CDH) à Genève, sur des pratiques esclavagistes persistantes dans les camps de Tindouf.", 'size': 2}, {'id': '71', 'title': 'CDH | Des ONG alertent sur la persistance de l’esclavage dans les camps de Tindouf', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/cdh-des-ong-alertent-sur-la-persistance-de-lesclavage-dans-les-camps-de-tindouf/', 'summary': 'CDH | Des ONG alertent sur la persistance de l’esclavage dans les camps de Tindouf. Des ONG ont attiré l’attention de la communauté internationale, vendredi à la 60e session du Conseil des droits de l’Homme (CDH) à Genève, sur des pratiques esclavagistes persistantes dans les camps de Tindouf. S’exprimant lors du dialogue interactif avec le Rapporteur spécial sur les formes contemporaines de l’esclavage, la juriste Lucia Ferreyra Perea a dénoncé ', 'size': 2}], 'main_title': "Camps de Tindouf : des ONG alertent sur la persistance de l'esclavage"}, {'community_id': '4', 'articles': [{'id': '40', 'title': 'Maroc-Finland : Entretiens parlementaires en plein rapprochement politique', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Maroc-Finland-Entretiens-parlementaires-en-plein-rapprochement-politique_a71701.html', 'summary': 'Maroc-Finland : Entretiens parlementaires en plein rapprochement politique. Le président de la Chambre des représentants, Rachid Talbi El Alami, accompagné d’une délégation parlementaire, a eu, vendredi à Helsinki, une série d’entretiens avec des responsables parlementaires et gouvernementaux de la République de Finlande.', 'size': 2}, {'id': '70', 'title': 'Diplomatie parlementaire | M. Talbi El Alami s’entretient avec des responsables finlandais', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/diplomatie-parlementaire-m-talbi-el-alami-sentretient-avec-des-responsables-finlandais/', 'summary': 'Diplomatie parlementaire | M. Talbi El Alami s’entretient avec des responsables finlandais. Le président de la Chambre des représentants, Rachid Talbi El Alami, accompagné d’une délégation parlementaire, a eu, vendredi à Helsinki, une série d’entretiens avec des responsables parlementaires et gouvernementaux de la République de Finlande. M. Talbi El Alami et la délégation l’accompagnant ont tenu des réunions de travail avec le président du parlement de Finlande, ', 'size': 2}], 'main_title': 'Maroc-Finland : Entretiens parlementaires en plein rapprochement politique'}, {'community_id': '5', 'articles': [{'id': '43', 'title': 'Paris : Le Maroc fête sa cuisine au Village international de la gastronomie', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/176302/paris-maroc-fete-cuisine-village.html', 'summary': 'Paris : Le Maroc fête sa cuisine au Village international de la gastronomie. Sous les arches du 7áµ‰ Village international de la gastronomie (11-14 septembre), au pied de la Tour Eiffel, le Maroc rayonne à travers sa cuisine, son artisanat et son art de vivre. Un voyage sensoriel, mais surtout émotionnel, qui touche les cœurs bien au-delà des papilles.', 'size': 2}, {'id': '65', 'title': 'La cuisine marocaine étincelle de mille saveurs au Village international de la gastronomie à Paris', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/la-cuisine-marocaine-etincelle-de-mille-saveurs-au-village-international-de-la-gastronomie-a-paris/', 'summary': 'La cuisine marocaine étincelle de mille saveurs au Village international de la gastronomie à Paris. Sous les arches du 7ᵉ Village international de la gastronomie (11-14 septembre), au pied de la Tour Eiffel, le Maroc rayonne à travers sa cuisine, son artisanat et son art de vivre. Un voyage sensoriel, mais surtout émotionnel, qui touche les cœurs bien au-delà des papilles. Le pavillon marocain, pavoisé aux couleurs nationales et décoré .', 'size': 2}], 'main_title': 'Paris : Le Maroc fête sa cuisine au Village international de la gastronomie'}, {'community_id': '6', 'articles': [{'id': '44', 'title': "Huit courses palpitantes ont marqué le Grand Prix d'Afrique à Casablanca", 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/176291/huit-courses-palpitantes-marque-grand.html', 'summary': "Huit courses palpitantes ont marqué le Grand Prix d'Afrique à Casablanca. Lhippodrome de Casa-Anfa a accueilli la journée de clôture du Grand Prix dAfrique, avec huit courses, dont le Grand Prix d’Afrique, remporté par Zouhair Madihi. Les deux premiers jours de lévénement étaient consacrés à des expositions pour les professionnels et à des séminaires sur le développement des loteries africaines.", 'size': 2}, {'id': '93', 'title': 'Sport équestre : la 4e édition du Grand Prix d’Afrique rend son verdict à l’hippodrome Casa-Anfa', 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/grand-prix-dafrique-la-4e-edition-rend-son-verdict/301472', 'summary': 'Sport équestre : la 4e édition du Grand Prix d’Afrique rend son verdict à l’hippodrome Casa-Anfa. Huit courses haletantes, des stands technologiques innovants et un séminaire stratégique : la 4e édition du Grand Prix d’Afrique s’est clôturée, ce samedi, à l’hippodrome de Casa-A.', 'size': 2}], 'main_title': "Huit courses palpitantes ont marqué le Grand Prix d'Afrique à Casablanca"}, {'community_id': '8', 'articles': [{'id': '59', 'title': 'Diapo: Le porte-hélicoptères français Tonnerre en escale stratégique à Casablanca', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/diapo-le-porte-helicopteres-francais-tonnerre-en-escale-strategique-a-casablanca/', 'summary': 'Diapo: Le porte-hélicoptères français Tonnerre en escale stratégique à Casablanca. Le porte-hélicoptères amphibie (PHA) Tonnerre a effectué une escale dans le port de Casablanca ce 13 septembre 2025. Il repartira le 16 septembre vers le Golfe de Guinée. Ce navire polyvalent, qui peut accueillir à son bord plusieurs hélicoptères et engins de débarquement amphibie (pour le changement de milieu mer – terre), 650 militaires, une .', 'size': 2}, {'id': '116', 'title': 'Casablanca\xa0: Le PHA français Tonnerre fait escale du 13 au 16 septembre 2025', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/176306/casablanca-francais-tonnerre-fait-escale.html', 'summary': 'Casablanca : Le PHA français Tonnerre fait escale du 13 au 16 septembre 2025. Le porte-hélicoptères amphibie (PHA) Tonnerre est en escale, du 13 au 16 septembre 2025 dans le port de Casablanca. A cette occasion, une réception y a été organisée, samedi, par l’ambassadeur de France Christophe Lecourtier et le capitaine de vaisseau Arnaud Bolelli, commandant du PHA. Ce dernier reprend le large, le 16 septembre vers le Golfe de Guinée, pour la mission «Corymbe» de soutien à la sécurité régionale, sur trois mois.', 'size': 2}], 'main_title': 'Diapo: Le porte-hélicoptères français Tonnerre en escale stratégique à Casablanca'}, {'community_id': '7', 'articles': [{'id': '83', 'title': "Fès: Arrestation de 4 membres présumés d'un réseau d'escroquerie", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/441194-fes-arrestation-de-4-membres-presumes-dun-reseau-descroquerie.html', 'summary': "Fès: Arrestation de 4 membres présumés d'un réseau d'escroquerie. Les éléments de la Brigade régionale de la police judiciaire de Fès, en étroite coordination avec les services de la Direction générale de la surveillance du territoire (DGST), ont procédé, samedi, à l’arrestation de quatre personnes soupçonnées de faire partie d’un réseau criminel d’escroquerie sur des candidats à l’immigration. Selon les premiers éléments de l’enquête, . ", 'size': 3}, {'id': '104', 'title': "Fès: Démantèlement d'un réseau d'escroquerie ciblant des candidats à l'immigration", 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Fes-Demantelement-d-un-reseau-d-escroquerie-ciblant-des-candidats-a-l-immigration_a71730.html', 'summary': "Fès: Démantèlement d'un réseau d'escroquerie ciblant des candidats à l'immigration. Les éléments de la Brigade régionale de la police judiciaire de Fès, en étroite coordination avec les services de la Direction générale de la surveillance du territoire (DGST), ont procédé, samedi, à l’arrestation de quatre personnes soupçonnées de faire partie d'un réseau criminel d’escroquerie sur des candidats à l'immigration.", 'size': 3}, {'id': '113', 'title': "Fès : 4 arrestations\xa0liées pour escroquerie visant des candidats à l'immigration", 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/176319/arrestations-liees-pour-escroquerie-visant.html', 'summary': "Fès : 4 arrestations liées pour escroquerie visant des candidats à l'immigration. Les éléments de la Brigade régionale de la police judiciaire de Fès, en étroite coordination avec les services de la Direction générale de la surveillance du territoire (DGST), ont procédé, samedi, à l’arrestation de quatre personnes soupçonnées de faire partie dun réseau criminel d’escroquerie sur des candidats à limmigration.", 'size': 3}], 'main_title': "Fès: Arrestation de 4 membres présumés d'un réseau d'escroquerie"}, {'community_id': '2', 'articles': [{'id': '84', 'title': "Bourita à Doha pour la réunion préparatoire du Sommet arabo-islamique d'urgence", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/441214-bourita-a-doha-pour-la-reunion-preparatoire-du-sommet-arabo-islamique-durgence.html', 'summary': "Bourita à Doha pour la réunion préparatoire du Sommet arabo-islamique d'urgence. Les travaux de la réunion préparatoire des ministres des Affaires étrangères en prélude du Sommet arabo-islamique d’urgence consacré à l’examen de l’attaque israélienne contre l’État du Qatar ont débuté dimanche à Doha, avec la participation du Maroc Le Maroc est représenté à cette réunion par le ministre des Affaires étrangères, de la Coopération africaine et . ", 'size': 4}, {'id': '92', 'title': "Doha : Réunion préparatoire du Sommet arabo-islamique d'urgence avec la participation du Maroc", 'source': 'lematin.ma', 'link': 'https://lematin.ma/nation/doha-reunion-preparatoire-du-sommet-arabo-islamique/301475', 'summary': "Doha : Réunion préparatoire du Sommet arabo-islamique d'urgence avec la participation du Maroc. Le Maroc est représenté à cette réunion par le ministre des Affaires étrangères, de la coopération africaine et des Marocains résidant à l’étranger, Nasser Bourita. La délégation m.", 'size': 4}, {'id': '105', 'title': "Le Maroc prend part au préparatifs du Sommet arabo-islamique d'urgence à Doha", 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Le-Maroc-prend-part-au-preparatifs-du-Sommet-arabo-islamique-d-urgence-a-Doha_a71728.html', 'summary': "Le Maroc prend part au préparatifs du Sommet arabo-islamique d'urgence à Doha. Les travaux de la réunion préparatoire des ministres des Affaires étrangères en prélude du Sommet arabo-islamique d’urgence consacré à l’examen de l’attaque israélienne contre l’État du Qatar ont débuté dimanche à Doha, avec la participation du Maroc", 'size': 4}, {'id': '112', 'title': "Doha : Le Maroc participe à la réunion préparatoire du Sommet arabo-islamique d'urgence", 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/176321/doha-maroc-participe-reunion-preparatoire.html', 'summary': "Doha : Le Maroc participe à la réunion préparatoire du Sommet arabo-islamique d'urgence. Les travaux de la réunion préparatoire des ministres des Affaires étrangères en prélude du Sommet arabo-islamique d’urgence consacré à l’examen de l’attaque israélienne contre l’État du Qatar ont débuté dimanche à Doha, avec la participation du Maroc", 'size': 4}], 'main_title': "Bourita à Doha pour la réunion préparatoire du Sommet arabo-islamique d'urgence"}, {'community_id': '9', 'articles': [{'id': '118', 'title': 'Le Maroc, sous la conduite de SM le Roi, est engagé en faveur de la coopération Sud-Sud et du co-développement en Afrique, souligne Mme Nadia Fettah', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/actualite/le-maroc-sous-la-conduite-de-sm-le-roi-est-engage-en-faveur-de-la-cooperation-sud-sud-et-du-co-developpement-en-afrique-souligne-mme-nadia-fettah', 'summary': 'Le Maroc, sous la conduite de SM le Roi, est engagé en faveur de la coopération Sud-Sud et du co-développement en Afrique, souligne Mme Nadia Fettah. Le Maroc, sous la conduite éclairée de Sa Majesté le Roi Mohammed VI, que Dieu L’assiste, est constamment engagé en faveur de la promotion de la coopération Sud-Sud et du co-développement en Afrique, a souligné, dimanche à Casablanca, la ministre de l’Économie et des Finances, Nadia Fettah. S’exprimant à l’ouverture de la Table Ronde d’Investissement .', 'size': 2}, {'id': '119', 'title': 'Le président Faustin-Archange Touadéra salue le leadership africain «\xa0éclairé et exemplaire\xa0» de SM le Roi', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/le-president-faustin-archange-touadera-salue-le-leadership-africain-eclaire-et-exemplaire-de-sm-le-roi/', 'summary': 'Le président Faustin-Archange Touadéra salue le leadership africain « éclairé et exemplaire » de SM le Roi. Le Président de la République centrafricaine, Professeur Faustin-Archange Touadéra, a salué, dimanche à Casablanca, « la conduite éclairée et le leadership exemplaire » de Sa Majesté le Roi Mohammed VI en faveur d’une Afrique solidaire et prospère. Dans une allocution prononcée à l’occasion de l’ouverture de la Table Ronde d’Investissement consacrée au financement du Plan National de .', 'size': 2}], 'main_title': 'Le Maroc, sous la conduite de SM le Roi, est engagé en faveur de la coopération Sud-Sud et du co-développement en Afrique, souligne Mme Nadia Fettah'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
                        
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ? d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        // Fonction pour cacher le tooltip
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = '';
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
    
    
</body>




</html>
    