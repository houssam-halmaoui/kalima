<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); 
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title"> Les principales actualités des dernières 24 heures

</div>    
        <div class="header-subtitle"> Dernière mise à jour : 30/06/2025 - 06h26</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"></div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '6', 'title': 'L\'Iran dit avoir de "sérieux doutes" sur le respect du cessez-le-feu par Israël', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/431080-liran-dit-avoir-de-serieux-doutes-sur-le-respect-du-cessez-le-feu-par-israel.html', 'summary': 'L\'Iran dit avoir de "sérieux doutes" sur le respect du cessez-le-feu par Israël. L’Iran a dit dimanche avoir de « sérieux doutes » sur le respect par Israël du cessez-le-feu en vigueur depuis mardi après 12 jours de guerre entre les deux pays ennemis. « Nous n’avons pas déclenché la guerre mais nous avons répondu à l’agresseur de toutes nos forces », a déclaré le chef d’état-major des forces armées Abdolrahim Moussavi, . ', 'size': 2}, {'id': '35', 'title': "L'Iran doute du respect du cessez-le-feu par Israël", 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/L-Iran-doute-du-respect-du-cessez-le-feu-par-Israel_a69285.html', 'summary': 'L\'Iran doute du respect du cessez-le-feu par Israël. L\'Iran a exprimé dimanche de "sérieux doutes" sur les intentions d\'Israël de continuer à respecter le cessez-le-feu entré vigueur le 24 juin après 12 jours de guerre sans précédent entre les deux pays ennemis.', 'size': 2}], 'main_title': 'L\'Iran dit avoir de "sérieux doutes" sur le respect du cessez-le-feu par Israël'}, {'community_id': '1', 'articles': [{'id': '15', 'title': 'Pêche à Laâyoune : l’État dément toute destruction des ressources halieutiques', 'source': 'lematin.ma', 'link': 'https://lematin.ma/regions/peche-a-laayoune-letat-dement-toute-destruction-des-ressources/288204', 'summary': "Pêche à Laâyoune : l’État dément toute destruction des ressources halieutiques. Dans un démenti rendu public dimanche, le Secrétariat d’État a qualifié de contrevérités, d'allégations infondées et de mensonges, le contenu de l'article en qu.", 'size': 2}, {'id': '73', 'title': 'Laâyoune: le Secrétariat d’État chargé de la pêche maritime dément les allégations sur la «\xa0destruction des ressources halieutiques\xa0»', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/laayoune-le-secretariat-detat-charge-de-la-peche-maritime-dement-les-allegations-sur-la-destruction-des-ressources-halieutiques/', 'summary': 'Laâyoune: le Secrétariat d’État chargé de la pêche maritime dément les allégations sur la « destruction des ressources halieutiques ». Le Secrétariat d’État chargé de la pêche maritime a catégoriquement démenti les allégations contenues dans un article publié, samedi, sur un site électronique au sujet d’une prétendue « destruction des ressources halieutiques à travers la capture de sardines juvéniles par des chalutiers côtiers au niveau du port de Laâyoune ». Dans un démenti rendu public dimanche, le .', 'size': 2}], 'main_title': 'Pêche à Laâyoune : l’État dément toute destruction des ressources halieutiques'}, {'community_id': '2', 'articles': [{'id': '21', 'title': 'Casablanca Music Week : une nuit d’union musicale avec Rahma Riad et Hussain El Jassmi', 'source': 'lematin.ma', 'link': 'https://lematin.ma/culture/cmw-rahma-riad-et-hussain-al-jassmi-celebrent-la-musique-arabe/288143', 'summary': 'Casablanca Music Week : une nuit d’union musicale avec Rahma Riad et Hussain El Jassmi. Vêtue d’un somptueux caftan marocain, la chanteuse irakienne Rahma Riad a fait une entrée très remarquée sur scène, chaleureusement accueillie par un public casablancais conquis d’.', 'size': 2}, {'id': '60', 'title': 'Casablanca Music Week : Rahma Riad et Hussain Al Jassmi célèbrent la musique arabe', 'source': 'www.libe.ma', 'link': 'https://www.libe.ma/Casablanca-Music-Week-Rahma-Riad-et-Hussain-Al-Jassmi-celebrent-la-musique-arabe_a154619.html', 'summary': 'Casablanca Music Week : Rahma Riad et Hussain Al Jassmi célèbrent la musique arabe.', 'size': 2}], 'main_title': 'Casablanca Music Week : une nuit d’union musicale avec Rahma Riad et Hussain El Jassmi'}, {'community_id': '3', 'articles': [{'id': '37', 'title': '30 investisseurs saoudiens en visite officielle au Maroc dès ce 29 juin', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/30-investisseurs-saoudiens-en-visite-officielle-au-Maroc-des-ce-29-juin_a69286.html', 'summary': '30 investisseurs saoudiens en visite officielle au Maroc dès ce 29 juin. \u200bUne délégation de haut niveau de la Fédération des Chambres de Commerce saoudiennes (FSC) entame dès le dimanche 29 juin 2025, une visite officielle au Maroc et en Mauritanie. Détails.', 'size': 2}, {'id': '86', 'title': "Des investisseurs saoudiens explorent les opportunités d'investissement au Maroc", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/431120-des-investisseurs-saoudiens-explorent-les-opportunites-dinvestissement-au-maroc.html', 'summary': "Des investisseurs saoudiens explorent les opportunités d'investissement au Maroc. Une délégation de haut niveau de la Fédération des Chambres de Commerce saoudiennes (FSC) entame dimanche une visite au Maroc, précédée d’une visite similaire en Mauritanie, au cours de laquelle elle tiendra des réunions avec des acteurs économiques marocains en vue de conclure des accords commerciaux et des partenariats. Un total de 30 entreprises saoudiennes . ", 'size': 2}], 'main_title': '30 investisseurs saoudiens en visite officielle au Maroc dès ce 29 juin'}, {'community_id': '4', 'articles': [{'id': '42', 'title': 'Agadir: Arrestation de deux Britanniques poursuivis au Royaume-Uni', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Agadir-Arrestation-de-deux-Britanniques-poursuivis-au-Royaume-Uni_a69279.html', 'summary': 'Agadir: Arrestation de deux Britanniques poursuivis au Royaume-Uni. Les éléments du service préfectoral de la police judiciaire d’Agadir ont interpellé, samedi, sur la base de renseignements précis fournis par la Direction Générale de la Surveillance du Territoire (DGST), deux ressortissants britanniques faisant l’objet de mandats d’arrêt internationaux émis par les autorités judiciaires de leur pays.', 'size': 3}, {'id': '54', 'title': 'Agadir : Deux Britanniques recherchés par Interpol arrêtés en vue d’extradition', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/170294/agadir-deux-britanniques-recherches-interpol.html', 'summary': 'Agadir : Deux Britanniques recherchés par Interpol arrêtés en vue d’extradition. Les éléments du service préfectoral de la police judiciaire d’Agadir ont interpellé, samedi, deux ressortissants britanniques faisant l’objet de mandats d’arrêt internationaux émis par les autorités judiciaires de leur pays, sur la base de renseignements précis fournis par la Direction Générale de la Surveillance du Territoire (DGST).', 'size': 3}, {'id': '80', 'title': 'Agadir : Arrestation de deux ressortissants britanniques recherchés à l’international', 'source': 'lnt.ma', 'link': 'https://lnt.ma/agadir-arrestation-de-deux-ressortissants-britanniques-recherches-a-linternational/', 'summary': 'Agadir : Arrestation de deux ressortissants britanniques recherchés à l’international. Deux ressortissants britanniques faisant l’objet de mandats d’arrêt internationaux ont été interpellés samedi à Agadir par les services de la police judiciaire de la préfecture de la ville, sur la base de renseignements fournis par la Direction Générale de la Surveillance du Territoire (DGST), selon une source sécuritaire. L’opération s’est déroulée dans le quartier d’Anza, . ', 'size': 3}], 'main_title': 'Agadir: Arrestation de deux Britanniques poursuivis au Royaume-Uni'}, {'community_id': '5', 'articles': [{'id': '49', 'title': 'Le Parlement arabe souligne le rôle important de Sa Majesté le Roi dans la défense des Palestiniens', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/le-parlement-arabe-souligne-le-role-important-de-sa-majeste-le-roi-dans-la-defense-des-palestiniens-305669/', 'summary': 'Le Parlement arabe souligne le rôle important de Sa Majesté le Roi dans la défense des Palestiniens. Le Parlement arabe a souligné, samedi au Caire, le rôle important et les efforts continus déployés par Sa Majesté le Roi Mohammed VI, Président du Comité Al-Qods, dans la défense de la cause palestinienne. Dans une résolution sur la situation dans les territoires palestiniens occupés, issue des travaux de la', 'size': 2}, {'id': '78', 'title': 'Le Parlement arabe souligne le rôle important de S.M. le Roi dans la défense de la cause palestinienne', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/le-parlement-arabe-souligne-le-role-important-de-s-m-le-roi-dans-la-defense-de-la-cause-palestinienne/', 'summary': 'Le Parlement arabe souligne le rôle important de S.M. le Roi dans la défense de la cause palestinienne. Le Parlement arabe a souligné, samedi au Caire, le rôle important et les efforts continus déployés par Sa Majesté le Roi Mohammed VI, Président du Comité Al-Qods, dans la défense de la cause palestinienne. Dans une résolution sur la situation dans les territoires palestiniens occupés, issue des travaux de la 5e session plénière au titre .', 'size': 2}], 'main_title': 'Le Parlement arabe souligne le rôle important de Sa Majesté le Roi dans la défense des Palestiniens'}, {'community_id': '6', 'articles': [{'id': '66', 'title': 'Casablanca Music Week: Ambiance survoltée à La Casablancaise', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/influences/culture/casablanca-music-week-ambiance-survoltee-a-la-casablancaise/', 'summary': 'Casablanca Music Week: Ambiance survoltée à La Casablancaise. Organisée par NRJ Maroc, la Casablanca Music Week attire les foules à travers une programmation éclectique, mêlant musiques actuelles, rencontres culturelles et événements artistiques.', 'size': 2}, {'id': '81', 'title': 'Casablanca Music Week : une première édition réussie qui a trouvé son public', 'source': 'lnt.ma', 'link': 'https://lnt.ma/casablanca-music-week-une-premiere-edition-reussie-qui-a-trouve-son-public/', 'summary': 'Casablanca Music Week : une première édition réussie qui a trouvé son public. La première édition de la Casablanca Music Week (CMW), organisée par NRJ Maroc, a pris fin ce week-end après plusieurs jours de concerts, de rencontres culturelles et d’activités artistiques, ayant rassemblé un public large et diversifié sur le site de La Casablancaise. L’événement, conçu comme une vitrine des industries culturelles et créatives, a mis en . ', 'size': 2}], 'main_title': 'Casablanca Music Week: Ambiance survoltée à La Casablancaise'}, {'community_id': '7', 'articles': [{'id': '87', 'title': 'Algérie : un journaliste sportif français condamné à 7 ans de prison, alerte RSF', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/431119-algerie-un-journaliste-sportif-francais-condamne-a-7-ans-de-prison-alerte-rsf.html', 'summary': 'Algérie : un journaliste sportif français condamné à 7 ans de prison, alerte RSF. Le journaliste indépendant, collaborateur des magazines So Foot et Society, s’est rendu en Algérie en mai 2024, notamment pour un sujet sur le club de la Jeunesse Sportive de Kabylie. La justice algérienne lui reproche notamment des contacts avec un responsable du Mouvement pour l’autodétermination de la Kabylie. Une lourde condamnation. Un journaliste français spécialiste . ', 'size': 2}, {'id': '108', 'title': 'Algérie: un journaliste sportif français condamné à 7 ans de prison selon RSF', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Algerie-un-journaliste-sportif-francais-condamne-a-7-ans-de-prison-selon-RSF_a69300.html', 'summary': 'Algérie: un journaliste sportif français condamné à 7 ans de prison selon RSF. Un journaliste français spécialiste de football, Christophe Gleizes, a été condamné à sept ans de prison ferme en Algérie, notamment pour "apologie du terrorisme", ont indiqué dimanche Reporters sans frontières (RSF) et son employeur, le groupe So Press, en dénonçant une sanction "injuste".', 'size': 2}], 'main_title': 'Algérie : un journaliste sportif français condamné à 7 ans de prison, alerte RSF'}, {'community_id': '8', 'articles': [{'id': '89', 'title': 'Le Prince Moulay Rachid préside à Fès la finale de la Coupe du Trône', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/431116-le-prince-moulay-rachid-preside-a-fes-la-finale-de-la-coupe-du-trone.html', 'summary': 'Le Prince Moulay Rachid préside à Fès la finale de la Coupe du Trône. Le Prince Moulay Rachid a présidé, dimanche au complexe sportif de Fès, la finale de la Coupe du Trône de football, saison 2023-2024, remportée par l’Olympic Safi qui s’est imposée par 6 tirs au but à 5 face à la Renaissance sportive de Berkane (1-1 temps réglementaire et prolongations). A son arrivée au complexe sportif . ', 'size': 5}, {'id': '91', 'title': 'Safi remporte la Coupe du trône face à Berkane', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/431107-safi-remporte-la-coupe-du-trone-face-a-berkane.html', 'summary': 'Safi remporte la Coupe du trône face à Berkane. L’Olympique de Safi a remporté sa première Coupe du Trône après sa victoire sur la Renaissance de Berkane à l’issue de la séance de tirs au but (1-1 ; 6 tab 5). ', 'size': 2}, {'id': '94', 'title': 'S.A.R. le Prince Moulay Rachid préside à Fès la finale de la Coupe du Trône', 'source': 'lematin.ma', 'link': 'https://lematin.ma/videos/sar-le-prince-moulay-rachid-preside-a-fes-la-finale-de-la-coupe-du-trone/288274', 'summary': 'S.A.R. le Prince Moulay Rachid préside à Fès la finale de la Coupe du Trône. Son Altesse Royale le Prince Moulay Rachid a présidé, dimanche au complexe sportif de Fès, la finale de la Coupe du Trône de football, saison 2023-2024, remportée par l’Olympic Saf.', 'size': 4}, {'id': '95', 'title': "L'Olympic Safi remporte sa première Coupe du Trône", 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/lolympic-safi-remporte-sa-premiere-coupe-du-trone/288258', 'summary': "L'Olympic Safi remporte sa première Coupe du Trône. Salaheddine Rahouli a ouvert le score pour les Safiots à la 39è minute de jeu, avant que Issoufou Dayo n’égalise pour la Renaissance Berkane en transformant un penalty (45+5è).**re.", 'size': 3}, {'id': '120', 'title': 'Coupe du trône de football : Historique, l’Olympic Safi remporte le\xa0titre', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/170312/coupe-trone-football-historique-l-olympic.html', 'summary': 'Coupe du trône de football : Historique, l’Olympic Safi remporte le titre. L’Olympic Safi a remporté la Coupe du trône de football 2023-2024 en battant la Renaissance sportive de Berkane (RSB) par 6 tirs au but à 5 (temps réglementaire: 1-1), en finale disputée dimanche soir au Grand stade de Fès.', 'size': 4}, {'id': '121', 'title': 'Coupe du Trône de football: l’Olympic Safi remporte le titre', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/une/coupe-du-trone-de-football-lolympic-safi-remporte-le-titre', 'summary': 'Coupe du Trône de football: l’Olympic Safi remporte le titre. L’Olympic Safi a remporté la Coupe du Trône de football 2023-2024 en battant la Renaissance Berkane par 6 tirs au but à 5 (temps réglementaire: 1-1), en finale disputée dimanche soir au Grand stade de Fès. Salaheddine Rahouli a ouvert le score pour les Safiots à la 39è minute de jeu, avant que Issoufou Dayo .', 'size': 5}, {'id': '127', 'title': 'Fès : Abdellatif Hammouchi supervise les dispositifs de sécurité de la finale de la Coupe du Trône', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/fes-abdellatif-hammouchi-supervise-les-dispositifs-de-securite-de-la-finale-de-la-coupe-du-trone/', 'summary': 'Fès : Abdellatif Hammouchi supervise les dispositifs de sécurité de la finale de la Coupe du Trône. Fès, le 29 juin 2025, à quelques heures du coup d’envoi du tant attendu match de la finale de la Coupe du Trône opposant l’Olympique de Safi à la Renaissance de Berkane, le directeur général de Direction Générale de la Sûreté Nationale et de la Surveillance du Territoire, M. Abdellatif Hammouchi, s’est rendu personnellement au .', 'size': 2}], 'main_title': 'Le Prince Moulay Rachid préside à Fès la finale de la Coupe du Trône'}, {'community_id': '9', 'articles': [{'id': '93', 'title': "Séville: Akhannouch représente le Roi à la conférence de l'ONU sur le financement du développement", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/431105-seville-akhannouch-represente-le-roi-a-la-conference-de-lonu-sur-le-financement-du-developpement.html', 'summary': "Séville: Akhannouch représente le Roi à la conférence de l'ONU sur le financement du développement. Le Chef du gouvernement, Aziz Akhannouch, est arrivé, dimanche à Séville, pour représenter le Roi Mohammed VI, à la quatrième Conférence internationale sur le financement du développement. Akhannouch a pris part au dîner offert par le Roi Felipe VI d’Espagne et la Reine Letizia en l’honneur des Chefs d’Etat et de gouvernement participant à cet . ", 'size': 3}, {'id': '97', 'title': "Akhannouch représente S.M. le Roi à la conférence de l'ONU sur le financement du développement à Séville", 'source': 'lematin.ma', 'link': 'https://lematin.ma/nation/akhannouch-represente-sm-le-roi-a-la-conference-de-lonu-a-seville/288260', 'summary': "Akhannouch représente S.M. le Roi à la conférence de l'ONU sur le financement du développement à Séville. La délégation marocaine prenant part à cette conférence comprend notamment la ministre de l'Économie et des Finances, Nadia Fettah, l’Ambassadeur, Représentant permanent du Mar.", 'size': 2}, {'id': '109', 'title': "Séville: M. Akhannouch représente SM le Roi à la conférence de l'ONU sur le financement du développement", 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Seville-M-Akhannouch-represente-SM-le-Roi-a-la-conference-de-l-ONU-sur-le-financement-du-developpement_a69299.html', 'summary': "Séville: M. Akhannouch représente SM le Roi à la conférence de l'ONU sur le financement du développement. Le Chef du gouvernement, Aziz Akhannouch, est arrivé, dimanche à Séville, pour représenter SM le Roi Mohammed VI, à la quatrième Conférence internationale sur le financement du développement. M. Akhannouch a pris part au dîner offert par le Roi Felipe VI d'Espagne et la Reine Letizia en l’honneur des Chefs d’Etat et de gouvernement participant à cet événement.", 'size': 3}, {'id': '125', 'title': 'Séville: Akhannouch représente SM le Roi à la conférence de l’ONU sur le financement du développement', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/pouvoirs/seville-akhannouch-represente-sm-le-roi-a-la-conference-de-lonu-sur-le-financement-du-developpement/', 'summary': "Séville: Akhannouch représente SM le Roi à la conférence de l’ONU sur le financement du développement. Le Chef du gouvernement a pris part au dîner offert par le Roi Felipe VI d'Espagne et la Reine Letizia en l’honneur des Chefs d’Etat et de gouvernement participant à cet événement.", 'size': 4}], 'main_title': 'Séville: Akhannouch représente SM le Roi à la conférence de l’ONU sur le financement du développement'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
                        
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ? d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        // Fonction pour cacher le tooltip
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = '';
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
    
    
</body>




</html>
    