<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); 
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title"> Les principales actualités des dernières 24 heures

</div>    
        <div class="header-subtitle"> Dernière mise à jour : 21/09/2025 - 18h27</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"></div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '4', 'articles': [{'id': '2', 'title': 'Gianni Infantino en visite au Grand Stade de Tanger', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/442131-gianni-infantino-en-visite-au-grand-stade-de-tanger.html', 'summary': 'Gianni Infantino en visite au Grand Stade de Tanger. ', 'size': 3}, {'id': '14', 'title': 'Le président de la FIFA émerveillé par le Grand Stade de Tanger', 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/le-president-de-la-fifa-visite-le-grand-stade-de-tanger/302766', 'summary': 'Le président de la FIFA émerveillé par le Grand Stade de Tanger. Au cours de cette visite, effectuée par M. Infantino aux côtés de MM. Fouzi Lekjaa, président de la FRMF et Younes Tazi, Wali de la région de Tanger-Tétouan-Al Hoceima, les respons.', 'size': 3}, {'id': '38', 'title': 'FIFA : Gianni Infantino en visite au Grand Stade de Tanger', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/FIFA-Gianni-Infantino-en-visite-au-Grand-Stade-de-Tanger_a71980.html', 'summary': 'FIFA : Gianni Infantino en visite au Grand Stade de Tanger.', 'size': 4}, {'id': '68', 'title': 'Gianni Infantino visite le Grand Stade de Tanger', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/videos/gianni-infantino-visite-le-grand-stade-de-tanger/', 'summary': 'Gianni Infantino visite le Grand Stade de Tanger. Le président de la Fédération internationale de football (FIFA), a visité le Grand Stade de Tanger afin de suivre l’état d’avancement des travaux en cours, qui sont "sur le point d’être achevés dans un délai record", a indiqué samedi la Fédération royale marocaine de football (FRMF).', 'size': 5}, {'id': '99', 'title': 'FRMF | Le président de la FIFA M. Gianni Infantino en visite au Grand Stade de Tanger', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/frmf-le-president-de-la-fifa-m-gianni-infantino-en-visite-au-grand-stade-de-tanger/', 'summary': 'FRMF | Le président de la FIFA M. Gianni Infantino en visite au Grand Stade de Tanger. M. Gianni Infantino a effectué une visite dans la ville de Tanger, aux côtés de M. Fouzi Lekjaa, président de la Fédération Royale Marocaine de Football, afin de suivre l’état d’avancement des travaux en cours au Grand Stade de Tanger, qui sont sur le point d’être achevés dans un délai record, en présence de M. ', 'size': 4}], 'main_title': 'Gianni Infantino visite le Grand Stade de Tanger'}, {'community_id': '1', 'articles': [{'id': '5', 'title': 'Alerte météo : averses orageuses avec rafales de vent ce dimanche dans certaines régions', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/442129-alerte-meteo-averses-orageuses-avec-rafales-de-vent-ce-dimanche-dans-certaines-regions.html', 'summary': 'Alerte météo : averses orageuses avec rafales de vent ce dimanche dans certaines régions. La Direction générale de la météorologie (DGM), a annoncé des averses orageuses localement fortes avec rafales de vent sous orages sont attendues, ce dimanche, dans certaines provinces du Royaume. Dans un bulletin d’alerte météorologique de niveau de vigilance orange, la DGM précise que ces averses orageuses (20 à 30 mm) sont prévues de 14h à . ', 'size': 3}, {'id': '11', 'title': 'Averses orageuses localement fortes avec rafales de vent ce dimanche dans plusieurs régions du Maroc', 'source': 'lematin.ma', 'link': 'https://lematin.ma/regions/averses-orageuses-localement-fortes-avec-rafales-de-vent-ce-dimanche/302839', 'summary': 'Averses orageuses localement fortes avec rafales de vent ce dimanche dans plusieurs régions du Maroc. Des averses orageuses (20 à 30 mm) localement fortes avec rafales de vent sous orages sont prévues de 14h à 22h dans les provinces de Jerada, Figuig, Boulemane, Midelt, Ouarzazate.', 'size': 2}, {'id': '47', 'title': 'Maroc : Averses orageuses localement fortes avec rafales de vent dimanche', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/176903/maroc-averses-orageuses-localement-fortes.html', 'summary': 'Maroc : Averses orageuses localement fortes avec rafales de vent dimanche. Des averses orageuses localement fortes avec rafales de vent sous orages sont attendues, ce dimanche, dans certaines provinces du Maroc, a annoncé la Direction générale de la météorologie (DGM).', 'size': 4}, {'id': '63', 'title': 'Alerte météo : Averses orageuses et rafales de vent ce dimanche', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/au-royaume/alerte-meteo-averses-orageuses-et-rafales-de-vent-ce-dimanche/', 'summary': 'Alerte météo : Averses orageuses et rafales de vent ce dimanche. Des averses orageuses localement fortes avec rafales de vent sous orages sont attendues, ce dimanche, dans certaines provinces du Royaume, a annoncé la Direction générale de la météorologie (DGM).', 'size': 3}], 'main_title': 'Maroc : Averses orageuses localement fortes avec rafales de vent dimanche'}, {'community_id': '2', 'articles': [{'id': '7', 'title': 'Tournoi FIFA de futsal : le Maroc s’impose face au Chili 5-3', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/442120-tournoi-fifa-de-futsal-le-maroc-simpose-face-au-chili-5-3.html', 'summary': 'Tournoi FIFA de futsal : le Maroc s’impose face au Chili 5-3. La sélection marocaine de futsal a signé une victoire convaincante face au Chili par 5 buts à 3, samedi, lors de son premier match dans le cadre du tournoi FIFA organisé en Argentine. La rencontre, disputée au siège de la Fédération argentine de Football (AFA), a été marquée par une grande intensité et une volonté . ', 'size': 2}, {'id': '15', 'title': 'Tournoi FIFA de futsal à Buenos Aires : le Maroc s’impose face au Chili 5-3', 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/tournoi-fifa-de-futsal-a-buenos-aires-le-maroc-simpose-face-au-chili-5-3/302836', 'summary': 'Tournoi FIFA de futsal à Buenos Aires : le Maroc s’impose face au Chili 5-3. La rencontre, disputée au siège de la Fédération argentine de Football (AFA), a été marquée par une grande intensité et une volonté manifeste des deux équipes de s’imposer.**relate.', 'size': 2}], 'main_title': 'Tournoi FIFA de futsal : le Maroc s’impose face au Chili 5-3'}, {'community_id': '3', 'articles': [{'id': '19', 'title': 'Lancement de la première Junior NBA League de Basketball au Maroc', 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/lancement-de-la-premiere-junior-nba-league-de-basketball-au-maroc/302764', 'summary': 'Lancement de la première Junior NBA League de Basketball au Maroc. La Junior NBA League Maroc se structure autour de trois objectifs complémentaires. D’abord, structurer un vivier de talents en offrant aux jeunes Marocains un encadrement conforme.', 'size': 2}, {'id': '73', 'title': 'Benguérir: L’UM6P lance la première Junior NBA League de Basketball au Maroc', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/au-royaume/benguerir-lum6p-lance-la-premiere-junior-nba-league-de-basketball-au-maroc/', 'summary': 'Benguérir: L’UM6P lance la première Junior NBA League de Basketball au Maroc. Le programme souhaite bâtir une base solide de jeunes talents marocains selon les standards internationaux, et utiliser le sport comme moyen d’inclusion sociale et de promotion de l’égalité des chances.', 'size': 2}], 'main_title': 'Lancement de la première Junior NBA League de Basketball au Maroc'}, {'community_id': '5', 'articles': [{'id': '23', 'title': 'Abdellatif Hammouchi effectue une visite de travail en Turquie', 'source': 'lematin.ma', 'link': 'https://lematin.ma/nation/abdellatif-hammouchi-effectue-une-visite-de-travail-en-turquie/302726', 'summary': "Abdellatif Hammouchi effectue une visite de travail en Turquie. Lors de cette visite qui intervient à l'invitation officielle des autorités turques, Abdellatif Hammouchi a rencontré son homologue turc, Mahmut Demirtaş, directeur général de.", 'size': 2}, {'id': '80', 'title': 'Coopération sécuritaire: Hammouchi effectue une visite de travail en Turquie', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/pouvoirs/securite/cooperation-securitaire-hammouchi-effectue-une-visite-de-travail-en-turquie/', 'summary': "Coopération sécuritaire: Hammouchi effectue une visite de travail en Turquie. Lors de cette visite qui intervient à l'invitation officielle des autorités turques, Abdellatif Hammouchi, Directeur général de la Sûreté nationale et de la Surveillance du Territoire, a rencontré son homologue turc, M. Mahmut Demirtaş, directeur général de la Police nationale turque, indique un communiqué du Pôle DGSN-DGST.", 'size': 4}, {'id': '98', 'title': 'Abdellatif Hammouchi en visite de travail en Turquie', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/abdellatif-hammouchi-en-visite-de-travail-en-turquie.html', 'summary': "Abdellatif Hammouchi en visite de travail en Turquie. Le Directeur général de la Sûreté nationale et de la Surveillance du Territoire, M. Abdellatif Hammouchi, effectue une visite de travail en Turquie à la tête d'une délégation sécuritaire de haut niveau en marge de sa participation au Salon des équipements de sécurité intérieure (IGEF 2025), qui se tient du 18 au 20 septembre à Ankara. L’article est apparu en premier sur .", 'size': 3}, {'id': '101', 'title': 'Coopération sécuritaire | Abdellatif Hammouchi effectue une visite de travail en Turquie', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/cooperation-securitaire-abdellatif-hammouchi-effectue-une-visite-de-travail-en-turquie/', 'summary': 'Coopération sécuritaire | Abdellatif Hammouchi effectue une visite de travail en Turquie. Le Directeur général de la Sûreté nationale et de la Surveillance du Territoire, M. Abdellatif Hammouchi, effectue une visite de travail en Turquie, à la tête d’une délégation sécuritaire de haut niveau, en marge de sa participation au Salon des équipements de sécurité intérieure (IGEF 2025), qui se tient du 18 au 20 septembre à ', 'size': 3}], 'main_title': 'Coopération sécuritaire: Hammouchi effectue une visite de travail en Turquie'}, {'community_id': '0', 'articles': [{'id': '51', 'title': 'Le Groupe Pickalbatros inaugure son nouvel hôtel à Marrakech', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/economie/le-groupe-pickalbatros-inaugure-son-nouvel-hotel-a-marrakech', 'summary': 'Le Groupe Pickalbatros inaugure son nouvel hôtel à Marrakech. Le Groupe Pickalbatros Hotels & Resorts, acteur majeur de l’hôtellerie de prestige, a inauguré, vendredi à Marrakech, son nouvel établissement « Pickalbatros Sungo Club ». Ce nouvel hôtel, dont l’inauguration s’est déroulée en présence du président et fondateur du Groupe, Kamel Abou Ali, en plus d’élus et d’opérateurs économiques et touristiques de la cité ocre, témoigne de .', 'size': 2}, {'id': '120', 'title': "L'hôtel Pickalbatros Sungo Club ouvre ses portes à Marrakech", 'source': 'lematin.ma', 'link': 'https://lematin.ma/economie/lhotel-pickalbatros-sungo-club-ouvre-ses-portes-a-marrakech/302901', 'summary': "L'hôtel Pickalbatros Sungo Club ouvre ses portes à Marrakech. Ce nouvel hôtel, dont l'inauguration s'est déroulée en présence du président et fondateur du Groupe, Kamel Abou Ali, en plus d’élus et d’opérateurs économiques et touristiq.", 'size': 2}], 'main_title': 'Le Groupe Pickalbatros inaugure son nouvel hôtel à Marrakech'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
                        
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ? d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        // Fonction pour cacher le tooltip
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = '';
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
    
    
</body>




</html>
    