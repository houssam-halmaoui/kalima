<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); 
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title"> Les principales actualités des dernières 24 heures

</div>    
        <div class="header-subtitle"> Dernière mise à jour : 07/09/2025 - 18h28</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"></div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '1', 'title': 'France: François Bayrou achève une tournée médiatique avant un vote de confiance', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/440211-france-francois-bayrou-acheve-une-tournee-mediatique-avant-un-vote-de-confiance.html', 'summary': 'France: François Bayrou achève une tournée médiatique avant un vote de confiance. A la veille du vote de confiance qu’il a convoqué et de sa chute plus que probable, François Bayrou achève dimanche sa tournée médiatique sans se faire d’illusion, alors qu’Emmanuel Macron est déjà en quête de son successeur, sous la pression des oppositions.Le compte à rebours est enclenché, les heures du gouvernement Bayrou sont comptées. . ', 'size': 2}, {'id': '101', 'title': 'A la veille du naufrage de François Bayrou, la France plonge dans le vide', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/A-la-veille-du-naufrage-de-Francois-Bayrou-la-France-plonge-dans-le-vide_a71480.html', 'summary': "A la veille du naufrage de François Bayrou, la France plonge dans le vide. A la veille du vote de confiance qu'il a convoqué et de sa chute plus que probable, François Bayrou achève dimanche sa tournée médiatique sans se faire d'illusion, alors qu'Emmanuel Macron est déjà en quête de son successeur, sous la pression des oppositions.", 'size': 2}], 'main_title': 'France: François Bayrou achève une tournée médiatique avant un vote de confiance'}, {'community_id': '1', 'articles': [{'id': '7', 'title': 'Les températures attendues ce dimanche 7 septembre', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/440204-les-temperatures-attendues-ce-dimanche-7-septembre.html', 'summary': 'Les températures attendues ce dimanche 7 septembre. Voici les températures minimales et maximales prévues par la Direction générale de la météorologie pour le dimanche 07 septembre 2025: Min Max – Oujda 22 36 – Bouarfa 24 33 – Al Hoceima 23 30 – Tétouan 19 31 – Sebta 22 26 – Mellilia 22 28 – Tanger 22 29 – Kénitra 19 26 . ', 'size': 2}, {'id': '54', 'title': 'Températures prévues pour le lundi 08 septembre 2025', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/temperatures-prevues-pour-le-lundi-08-septembre-2025/', 'summary': 'Températures prévues pour le lundi 08 septembre 2025. Voici les températures minimales et maximales prévues par la Direction générale de la météorologie pour le lundi 08 septembre 2025: Min Max – Oujda 21 34 – Bouarfa 17 26 – Al Hoceima 21 30 – Tétouan 19 31 – Sebta 22 25 – Mellilia 21 27 – Tanger 21 27 – Kénitra 20 28 .', 'size': 2}], 'main_title': 'Les températures attendues ce dimanche 7 septembre'}, {'community_id': '2', 'articles': [{'id': '9', 'title': 'Festival de Venise: Le film Calle Malaga de Maryam Touzani remporte le Prix du public', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/440196-festival-de-venise-le-film-calle-malaga-de-maryam-touzani-remporte-le-prix-du-public.html', 'summary': 'Festival de Venise: Le film Calle Malaga de Maryam Touzani remporte le Prix du public. Le long-métrage marocain « Calle Malaga » de Maryam Touzani a remporté, samedi soir, le Prix du public dans la catégorie Spotlight en sélection officielle de la 82e édition du Festival International du Film de Venise. Tourné au Maroc, « Calle Malaga » raconte l’histoire d’une espagnole de 79 ans qui vit seule a Tanger où elle profite de . ', 'size': 4}, {'id': '10', 'title': '82e Mostra de Venise : “Calle Malaga” de Maryam Touzani décroche le Prix du public', 'source': 'lematin.ma', 'link': 'https://lematin.ma/culture/venise-2025-calle-malaga-de-maryam-touzani-prime-par-le-public/300081', 'summary': '82e Mostra de Venise : “Calle Malaga” de Maryam Touzani décroche le Prix du public. Le cinéma marocain a brillé à la 82e édition du Festival international du film de Venise. Samedi soir, “Calle Malaga”, réalisé par Maryam Touzani et produit par Nabil Ayouch, s’est.', 'size': 4}, {'id': '100', 'title': '82e Mostra de Venise: “Calle Malaga” de Maryam Touzani remporte le Prix du public', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/82e-Mostra-de-Venise-Calle-Malaga-de-Maryam-Touzani-remporte-le-Prix-du-public_a71481.html', 'summary': '82e Mostra de Venise: “Calle Malaga” de Maryam Touzani remporte le Prix du public. Le long-métrage marocain “Calle Malaga” de Maryam Touzani a remporté, samedi soir, le Prix du public dans la catégorie Spotlight en sélection officielle de la 82e édition du Festival International du Film de Venise.', 'size': 4}, {'id': '103', 'title': '82e Mostra de Venise : «Calle Malaga» de Maryam Touzani remporte le prix du public', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/175833/mostra-venise-calle-malaga-maryam.html', 'summary': '82e Mostra de Venise : «Calle Malaga» de Maryam Touzani remporte le prix du public. Le long-métrage marocain «Calle Malaga» de Maryam Touzani a remporté, samedi soir, le prix du public dans la catégorie Spotlight en sélection officielle de la 82e édition du Festival international du film de venise.', 'size': 4}], 'main_title': 'Festival de Venise: Le film Calle Malaga de Maryam Touzani remporte le Prix du public'}, {'community_id': '4', 'articles': [{'id': '16', 'title': 'Match Maroc-Zambie : à quelle heure et sur quelles chaînes ?', 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/match-maroc-zambie-a-quelle-heure-et-sur-quelles-chaines/300016', 'summary': 'Match Maroc-Zambie : à quelle heure et sur quelles chaînes ?. Les Lions de l’Atlas se sont offerts une victoire éclatante vendredi soir au stade Prince Moulay Abdellah de Rabat, en battant le Niger par cinq buts à zéro. Un succès qui scelle l.', 'size': 2}, {'id': '36', 'title': 'Un festival offensif à Rabat propulse le Maroc vers sa 7ème Coupe du monde', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Un-festival-offensif-a-Rabat-propulse-le-Maroc-vers-sa-7eme-Coupe-du-monde_a71462.html', 'summary': 'Un festival offensif à Rabat propulse le Maroc vers sa 7ème Coupe du monde. Le Stade Prince Moulay AbdAllah a vibré, vendredi soir, au rythme d’une victoire éclatante des Lions de l’Atlas.', 'size': 2}], 'main_title': 'Match Maroc-Zambie : à quelle heure et sur quelles chaînes ?'}, {'community_id': '5', 'articles': [{'id': '17', 'title': 'Casablanca : Interpellation de 6 individus pour leur lien présumé à un braquage à main armée en France', 'source': 'lematin.ma', 'link': 'https://lematin.ma/societe/casablanca-6-interpelles-pour-un-braquage-arme-presume-en-france/300014', 'summary': 'Casablanca : Interpellation de 6 individus pour leur lien présumé à un braquage à main armée en France. Selon les premiers éléments de l’enquête, les investigations techniques menées par la BNPJ ont permis la saisie de 31 téléphones portables provenant d’une attaque à main armée perp.', 'size': 4}, {'id': '31', 'title': 'Arrestation de six individus impliqués dans un braquage en France', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Arrestation-de-six-individus-impliques-dans-un-braquage-en-France_a71467.html', 'summary': 'Arrestation de six individus impliqués dans un braquage en France. La Brigade nationale de la police judiciaire (BNPJ) a déféré six individus devant le parquet compétent à Casablanca, pour leur implication présumée dans un réseau criminel spécialisé dans le vol et le recel de biens issus d’un braquage à main armée commis sur le territoire français, apprend-on de source sécuritaire.', 'size': 3}, {'id': '51', 'title': 'Casablanca: Arrestation de six présumés auteurs d’un braquage en France', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/influences/societe/casablanca-arrestation-de-six-presumes-auteurs-dun-braquage-en-france/', 'summary': 'Casablanca: Arrestation de six présumés auteurs d’un braquage en France. Les investigations techniques menées par la BNPJ ont permis la saisie de 31 téléphones portables provenant d’une attaque à main armée perpétrée en février dernier en France.', 'size': 3}, {'id': '72', 'title': 'Casablanca : six personnes déférées pour lien présumé avec un braquage à main armée en France', 'source': 'lnt.ma', 'link': 'https://lnt.ma/casablanca-six-personnes-deferees-pour-lien-presume-avec-un-braquage-a-main-armee-en-france/', 'summary': 'Casablanca : six personnes déférées pour lien présumé avec un braquage à main armée en France. La Brigade nationale de la police judiciaire (BNPJ) a déféré devant le parquet compétent six individus soupçonnés d’appartenir à un réseau criminel spécialisé dans le vol et le recel de biens issus d’un braquage à main armée commis en France, apprend-on de source sécuritaire. Les premières investigations techniques ont permis la saisie de 31 téléphones . ', 'size': 4}], 'main_title': 'Casablanca : Interpellation de 6 individus pour leur lien présumé à un braquage à main armée en France'}, {'community_id': '3', 'articles': [{'id': '21', 'title': 'ONU: le Maroc conclut avec succès la négociation de la déclaration politique du deuxième Sommet social prévu à Doha', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/ONU-le-Maroc-conclut-avec-succes-la-negociation-de-la-declaration-politique-du-deuxieme-Sommet-social-prevu-a-Doha_a71477.html', 'summary': "ONU: le Maroc conclut avec succès la négociation de la déclaration politique du deuxième Sommet social prévu à Doha. L'ambassadeur représentant permanent du Maroc auprès de l’ONU, Omar Hilale, accompagné de son homologue de Belgique, Sophie De Smedt, a remis au président de la 79e session de l’Assemblée générale des Nations Unies le projet final de la Déclaration politique de Doha pour le développement social qui sera adoptée par les chefs d’État et de gouvernement lors du Sommet qui aura lieu du 4 au 6 novembre prochain dans la capitale du Qatar.", 'size': 3}, {'id': '117', 'title': 'ONU: M. Hilale conclut avec succès la négociation de la déclaration politique du deuxième Sommet social prévu à Doha', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/onu-m-hilale-conclut-avec-succes-la-negociation-de-la-declaration-politique-du-deuxieme-sommet-social-prevu-a-doha/', 'summary': 'ONU: M. Hilale conclut avec succès la négociation de la déclaration politique du deuxième Sommet social prévu à Doha. L’ambassadeur représentant permanent du Maroc auprès de l’ONU, Omar Hilale, accompagné de son homologue de Belgique, Sophie De Smedt, a remis au président de la 79e session de l’Assemblée générale des Nations Unies le projet final de la Déclaration politique de Doha pour le développement social qui sera adoptée par les chefs d’État et de .', 'size': 3}, {'id': '118', 'title': 'ONU – Développement social : un consensus scellé pour la Déclaration politique de Doha', 'source': 'lnt.ma', 'link': 'https://lnt.ma/onu-developpement-social-un-consensus-scelle-pour-la-declaration-politique-de-doha/', 'summary': 'ONU – Développement social : un consensus scellé pour la Déclaration politique de Doha. L’ambassadeur représentant permanent du Maroc auprès de l’ONU, Omar Hilale, accompagné de son homologue de Belgique, Sophie De Smedt, a remis au président de la 79e session de l’Assemblée générale des Nations Unies le projet final de la Déclaration politique de Doha pour le développement social, qui sera soumis à l’adoption des chefs d’État et . ', 'size': 3}], 'main_title': 'ONU: le Maroc conclut avec succès la négociation de la déclaration politique du deuxième Sommet social prévu à Doha'}, {'community_id': '6', 'articles': [{'id': '22', 'title': 'Sidi Bennour: Lancement des fouilles archéologiques sur le site de l\'ancienne cité de "Mouchtraya"', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Sidi-Bennour-Lancement-des-fouilles-archeologiques-sur-le-site-de-l-ancienne-cite-de-Mouchtraya_a71476.html', 'summary': 'Sidi Bennour: Lancement des fouilles archéologiques sur le site de l\'ancienne cité de "Mouchtraya". Les travaux de fouilles archéologiques sur le site de l’ancienne cité de "Mouchtraya" dans la commune d\'El Gharbia (province de Sidi Bennour) ont été récemment lancés, et ce afin de recenser le patrimoine archéologique de la région.', 'size': 2}, {'id': '89', 'title': 'Sidi Bennour : lancement de fouilles archéologiques sur l’ancienne cité de Mouchtraya', 'source': 'lematin.ma', 'link': 'https://lematin.ma/regions/sidi-bennour-lancement-de-fouilles-archeologiques-a-mouchtraya/300150', 'summary': 'Sidi Bennour : lancement de fouilles archéologiques sur l’ancienne cité de Mouchtraya. Les travaux de fouilles archéologiques ont été lancés cette semaine sur le site de l’ancienne cité de Mouchtraya, connue aussi sous le nom d’Al Madina, jadis considérée comme la pl.', 'size': 2}], 'main_title': 'Sidi Bennour: Lancement des fouilles archéologiques sur le site de l\'ancienne cité de "Mouchtraya"'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
                        
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ? d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        // Fonction pour cacher le tooltip
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = '';
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
    
    
</body>




</html>
    