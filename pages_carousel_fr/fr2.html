<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); 
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title"> Les principales actualités des dernières 24 heures

</div>    
        <div class="header-subtitle"> Dernière mise à jour : 04/08/2025 - 06h41</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"></div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '1', 'title': 'Kenya : dispositif sécuritaire renforcé pour le CHAN', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/436355-kenya-dispositif-securitaire-renforce-pour-le-chan.html', 'summary': 'Kenya : dispositif sécuritaire renforcé pour le CHAN. Le ministère kényan de l’Intérieur a annoncé avoir déployé un dispositif sécuritaire renforcé pour le Championnat d’Afrique des Nations (CHAN), organisé du 2 au 30 août par le Kenya, la Tanzanie et l’Ouganda. Le secrétaire du Cabinet de l’Intérieur et de l’administration nationale, Kipchumba Murkomen a indiqué que son département a mis en place des . ', 'size': 2}, {'id': '65', 'title': 'Kenya : Un dispositif sécuritaire renforcé pour le CHAN', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/kenya-un-dispositif-securitaire-renforce-pour-le-chan/', 'summary': 'Kenya : Un dispositif sécuritaire renforcé pour le CHAN. Le ministère kényan de l’Intérieur a annoncé avoir déployé un dispositif sécuritaire renforcé pour le Championnat d’Afrique des Nations (CHAN), organisé du 2 au 30 août par le Kenya, la Tanzanie et l’Ouganda. Le secrétaire du Cabinet de l’Intérieur et de l’administration nationale, Kipchumba Murkomen a indiqué que son département a mis en place des .', 'size': 2}], 'main_title': 'Kenya : dispositif sécuritaire renforcé pour le CHAN'}, {'community_id': '1', 'articles': [{'id': '21', 'title': 'CHAN : A quelle heure et sur quelle chaînes regarder le match Maroc-Angola ?', 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/chan-a-quelle-heure-et-sur-quelle-chaines-regarder-le-match-maroc-angola/294531', 'summary': "CHAN : A quelle heure et sur quelle chaînes regarder le match Maroc-Angola ?. Premiers arrivés au Kenya, un des trois pays hôte du CHAN 2024, les Lions de l'Atlas affrontent l’Angola pour la première journée du groupe A. Forts de leurs titres en 2018 et.", 'size': 2}, {'id': '30', 'title': 'CHAN 2024 : Les Lions réussissent l’entame', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/CHAN-2024-Les-Lions-reussissent-l-entame_a70506.html', 'summary': "CHAN 2024 : Les Lions réussissent l’entame. Les Lions de l'Atlas ont parfaitement lancé leur campagne pour le CHAN 2024. Ce dimanche, face à l'Angola, ils ont conclu leur première sortie dans le tournoi avec un but d'avance (1-0) avant d'affronter le Kenya le 10 août.", 'size': 2}], 'main_title': 'CHAN : A quelle heure et sur quelle chaînes regarder le match Maroc-Angola ?'}, {'community_id': '7', 'articles': [{'id': '25', 'title': 'Législatives 2026 : Laftit réunit les partis politiques à Rabat', 'source': 'lematin.ma', 'link': 'https://lematin.ma/nation/legislatives-2026-laftit-reunit-les-partis-politiques-a-rabat/294587', 'summary': 'Législatives 2026 : Laftit réunit les partis politiques à Rabat. Ces réunions s’inscrivent dans le cadre de la mise en œuvre immédiate des Hautes Directives de Sa Majesté le Roi Mohammed VI, contenues dans le Discours du Trône du 29 juillet dern.', 'size': 4}, {'id': '71', 'title': 'Rabat : Le ministre de l’Intérieur consulte les partis sur les prochaines législatives', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/rabat-le-ministre-de-linterieur-consulte-les-partis-sur-les-prochaines-legislatives/', 'summary': 'Rabat : Le ministre de l’Intérieur consulte les partis sur les prochaines législatives. Le ministre de l’Intérieur a tenu, samedi à Rabat, deux réunions successives avec les dirigeants de l’ensemble des partis politiques, consacrées aux prochaines élections législatives des membres de la Chambre des représentants, prévues en 2026. Ces réunions s’inscrivent dans le cadre de la mise en œuvre immédiate des Hautes Directives de Sa Majesté le Roi .', 'size': 4}, {'id': '79', 'title': 'Élections législatives 2026 : Le ministre de l’Intérieur entame les concertations avec les partis politiques', 'source': 'lnt.ma', 'link': 'https://lnt.ma/elections-legislatives-2026-le-ministre-de-linterieur-entame-les-concertations-avec-les-partis-politiques/', 'summary': 'Élections législatives 2026 : Le ministre de l’Intérieur entame les concertations avec les partis politiques. Le ministre de l’Intérieur a présidé, samedi à Rabat, deux réunions successives avec les chefs des partis politiques représentés sur la scène nationale. Ces rencontres ont été consacrées à l’organisation des élections législatives de 2026 et s’inscrivent dans le cadre de la mise en œuvre immédiate des Hautes Directives du Roi Mohammed VI, formulées dans . ', 'size': 4}, {'id': '109', 'title': 'Législatives 2026 :  Laftit tient deux réunions avec les dirigeants des partis politiques', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/au-royaume/legislatives-2026-laftit-tient-deux-reunions-avec-les-dirigeants-des-partis-politiques/', 'summary': 'Législatives 2026 : Laftit tient deux réunions avec les dirigeants des partis politiques. Ces réunions s’inscrivent dans le cadre de la mise en œuvre immédiate des Hautes Directives de Sa Majesté le Roi Mohammed VI, contenues dans le Discours du Trône du 29 juillet dernier, dans lequel le Souverain a annoncé la tenue des prochaines législatives à l’échéance constitutionnelle et légale ordinaire.', 'size': 4}], 'main_title': 'Législatives 2026 : Laftit réunit les partis politiques à Rabat'}, {'community_id': '4', 'articles': [{'id': '48', 'title': 'Trump réaffirme la reconnaissance par les États-Unis de la souveraineté marocaine sur le Sahara', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/trump-reaffirme-la-reconnaissance-par-les-etats-unis-de-la-souverainete-marocaine-sur-le-sahara-308028/', 'summary': 'Trump réaffirme la reconnaissance par les États-Unis de la souveraineté marocaine sur le Sahara. Dans un message adressé à Sa Majesté le Roi Mohammed VI à l’occasion de la Fête du Trône, le président Donald J. Trump a réaffirmé la reconnaissance par les États-Unis de la souveraineté marocaine sur le Sahara et leur soutien à la proposition d’autonomie marocaine « comme seule base pour un', 'size': 4}, {'id': '57', 'title': 'Le Président Trump réaffirme la reconnaissance par les États-Unis de la souveraineté marocaine sur le Sahara et leur soutien à la Proposition d’Autonomie', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/actualite/le-president-trump-reaffirme-la-reconnaissance-par-les-etats-unis-de-la-souverainete-marocaine-sur-le-sahara-et-leur-soutien-a-la-proposition-dautonomie', 'summary': 'Le Président Trump réaffirme la reconnaissance par les États-Unis de la souveraineté marocaine sur le Sahara et leur soutien à la Proposition d’Autonomie. Dans un message adressé à SM le Roi Mohammed VI à l’occasion de la Fête du Trône, le Président des Etats-Unis d’Amérique Donald J. Trump a réaffirmé la reconnaissance par les États-Unis d’Amérique de la souveraineté marocaine sur le Sahara et leur soutien à la Proposition d’Autonomie marocaine « comme seule base pour un règlement juste .', 'size': 4}, {'id': '62', 'title': 'Fête du Trône: Dans un message à S.M. le Roi, le Président Trump réaffirme la reconnaissance par les États-Unis de la souveraineté marocaine sur le Sahara', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/pouvoirs/fete-du-trone-dans-un-message-a-s-m-le-roi-le-president-trump-reaffirme-la-reconnaissance-par-les-etats-unis-de-la-souverainete-marocaine-sur-le-sahara/', 'summary': 'Fête du Trône: Dans un message à S.M. le Roi, le Président Trump réaffirme la reconnaissance par les États-Unis de la souveraineté marocaine sur le Sahara. Dans son message adressé au Souverain à l’occasion de la fête du Trône, le locataire de la Maison Blanche réaffirme le soutien de Washington à la Proposition marocaine d’autonomie « comme seule base de règlement juste et durable de ce différend».', 'size': 4}, {'id': '78', 'title': 'Fête du trône | Le Président Trump réaffirme à SM le Roi la reconnaissance par les États-Unis de la souveraineté marocaine sur le Sahara', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/fete-du-trone-le-president-trump-reaffirme-a-sm-le-roi-la-reconnaissance-par-les-etats-unis-de-la-souverainete-marocaine-sur-le-sahara/', 'summary': 'Fête du trône | Le Président Trump réaffirme à SM le Roi la reconnaissance par les États-Unis de la souveraineté marocaine sur le Sahara. Dans un message adressé à SM le Roi Mohammed VI à l’occasion de la Fête du Trône, le Président des États-Unis d’Amérique Donald J. Trump a réaffirmé la reconnaissance par les États-Unis d’Amérique de la souveraineté marocaine sur le Sahara et leur soutien à la Proposition d’Autonomie marocaine “comme seule base pour un règlement juste ', 'size': 4}], 'main_title': 'Trump réaffirme la reconnaissance par les États-Unis de la souveraineté marocaine sur le Sahara'}, {'community_id': '2', 'articles': [{'id': '51', 'title': "Maroc : Jusqu'à 44°,\xa0averses orageuses, grêle et rafales de vent jusqu'à vendredi", 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/173387/maroc-jusqu-a-averses-orageuses-grele.html', 'summary': "Maroc : Jusqu'à 44°, averses orageuses, grêle et rafales de vent jusqu'à vendredi. Une vague de chaleur et des averses orageuses avec chutes de grêle et rafales de vent sous orages sont prévues de dimanche à vendredi dans plusieurs provinces du Maroc, a annoncé la Direction générale de la météorologie (DGM).", 'size': 5}, {'id': '56', 'title': 'Alerte météo: Vague de chaleur et averses orageuses avec chutes de grêle et rafales de vent sous orages de dimanche à vendredi', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/actualite/alerte-meteo-vague-de-chaleur-et-averses-orageuses-avec-chutes-de-grele-et-rafales-de-vent-sous-orages-de-dimanche-a-vendredi', 'summary': 'Alerte météo: Vague de chaleur et averses orageuses avec chutes de grêle et rafales de vent sous orages de dimanche à vendredi. Une vague de chaleur et des averses orageuses avec chutes de grêle et rafales de vent sous orages sont prévues de dimanche à vendredi dans plusieurs provinces du Royaume, a annoncé la Direction générale de la météorologie (DGM). Ainsi, une vague de chaleur, avec des températures oscillant entre 40 et 44°C, sera enregistrée dimanche et .', 'size': 5}, {'id': '59', 'title': 'Alerte météo : Vague de chaleur et averses orageuses de dimanche à vendredi', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/au-royaume/alerte-meteo-vague-de-chaleur-et-averses-orageuses-de-dimanche-a-vendredi/', 'summary': 'Alerte météo : Vague de chaleur et averses orageuses de dimanche à vendredi. Une vague de chaleur et des averses orageuses avec chutes de grêle et rafales de vent sous orages sont prévues de dimanche à vendredi dans plusieurs provinces du Royaume, a annoncé la Direction générale de la météorologie (DGM).', 'size': 5}, {'id': '66', 'title': 'Météo : Vague de chaleur et orages avec grêle et vents violents dans plusieurs provinces', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/meteo-vague-de-chaleur-et-orages-avec-grele-et-vents-violents/', 'summary': 'Météo : Vague de chaleur et orages avec grêle et vents violents dans plusieurs provinces. Une vague de chaleur et des averses orageuses avec chutes de grêle et rafales de vent sous orages sont prévues de dimanche à vendredi dans plusieurs provinces du Royaume, a annoncé la Direction générale de la météorologie (DGM). Ainsi, une vague de chaleur, avec des températures oscillant entre 40 et 44°C, sera enregistrée dimanche et .', 'size': 5}, {'id': '81', 'title': 'Vague de chaleur et épisodes orageux attendus dans plusieurs provinces du Royaume', 'source': 'lnt.ma', 'link': 'https://lnt.ma/vague-de-chaleur-et-episodes-orageux-attendus-dans-plusieurs-provinces-du-royaume/', 'summary': 'Vague de chaleur et épisodes orageux attendus dans plusieurs provinces du Royaume. Une vague de chaleur accompagnée par endroits d’averses orageuses, de chutes de grêle et de rafales de vent est attendue dans plusieurs provinces du Royaume à partir de dimanche et jusqu’à vendredi prochain, selon un bulletin d’alerte émis par la Direction générale de la météorologie (DGM). Cette alerte, de niveau de vigilance orange, fait état . ', 'size': 5}], 'main_title': "Maroc : Jusqu'à 44°,\xa0averses orageuses, grêle et rafales de vent jusqu'à vendredi"}, {'community_id': '9', 'articles': [{'id': '53', 'title': 'Championnat d’Afrique des nations CHAN-2024: Bonne entrée en la matière du Maroc', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/une/championnat-dafrique-des-nations-chan-2024-bonne-entree-en-la-matiere-du-maroc', 'summary': 'Championnat d’Afrique des nations CHAN-2024: Bonne entrée en la matière du Maroc. La sélection marocaine des joueurs locaux a battu son homologue angolaise par 2 buts à 0, en match de la première journée du groupe A du Championnat d’Afrique des nations de football (CHAN-2024), disputé dimanche au stade national Nyayo à Nairobi. Les Lions de l’Atlas se sont imposés grâce aux buts de Imad Riahi (29e) .', 'size': 3}, {'id': '58', 'title': 'CHAN-2024 : Le Maroc bat l’Angola par 2 buts à 0', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/influences/chan-2024-le-maroc-bat-langola-par-2-buts-a-0/', 'summary': 'CHAN-2024 : Le Maroc bat l’Angola par 2 buts à 0. La sélection marocaine des joueurs locaux a battu son homologue angolaise par 2 buts à 0, en match de la première journée du groupe A du Championnat d’Afrique des nations de football (CHAN-2024), disputé dimanche au stade national Nyayo à Nairobi.', 'size': 3}, {'id': '106', 'title': 'CHAN-2024 : Le Maroc bat l’Angola (2-0)', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/173403/chan-2024-maroc-l-angola.html', 'summary': 'CHAN-2024 : Le Maroc bat l’Angola (2-0). La sélection marocaine des joueurs locaux a remporté son match douverture du groupe A du Championnat d’Afrique des nations de football (CHAN-2024) en battant lAngola 2-0. Le match sest déroulé au stade national Nyayo à Nairobi.', 'size': 3}], 'main_title': 'Championnat d’Afrique des nations CHAN-2024: Bonne entrée en la matière du Maroc'}, {'community_id': '3', 'articles': [{'id': '60', 'title': 'Activité portuaire : En hausse, le trafic commercial atteint  130 millions de tonnes traités', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/affaires/activite-portuaire-en-hausse-le-trafic-commercial-atteint-130-millions-de-tonnes-traites/', 'summary': 'Activité portuaire : En hausse, le trafic commercial atteint 130 millions de tonnes traités. Le volume global des trafics de commerce traités par les ports du Maroc a atteint 130 millions de tonnes au titre du 1er semestre de l’année 2025, contre 116,4 millions de tonnes à la même période de l’année précédente, soit une hausse de 11,6%.', 'size': 3}, {'id': '67', 'title': 'Ports marocains : Hausse du trafic commercial de 11,6% au 1er semestre 2025', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/ports-marocains-hausse-du-trafic-commercial-de-116-au-1er-semestre-2025/', 'summary': 'Ports marocains : Hausse du trafic commercial de 11,6% au 1er semestre 2025. Le volume global des trafics de commerce traités par les ports du Maroc a atteint 130 millions de tonnes au titre du 1er semestre de l’année 2025, contre 116,4 millions de tonnes à la même période de l’année précédente, soit une hausse de 11,6%. Le trafic domestique a enregistré un volume de 65,7 millions de .', 'size': 3}, {'id': '80', 'title': 'Ports marocains : Le trafic en hausse à deux chiffres aux S1', 'source': 'lnt.ma', 'link': 'https://lnt.ma/ports-marocains-le-trafic-en-hausse-a-deux-chiffres-aux-s1/', 'summary': 'Ports marocains : Le trafic en hausse à deux chiffres aux S1. Le trafic commercial global dans les ports marocains a progressé de 11,6% au premier semestre 2025, atteignant 130 millions de tonnes, contre 116,4 millions à la même période de l’année précédente, selon les données publiées par le ministère de l’Équipement et de l’Eau. Cette hausse est tirée à la fois par le trafic domestique, qui . ', 'size': 2}, {'id': '89', 'title': 'Hausse de 11,6% du trafic commercial dans les ports marocains au S1 2025', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/436330-hausse-de-116-du-trafic-commercial-dans-les-ports-marocains-au-s1-2025.html', 'summary': 'Hausse de 11,6% du trafic commercial dans les ports marocains au S1 2025. Le ministère de l’Équipement et de l’Eau a indiqué que le volume global des trafics de commerce traités par les ports du Maroc a atteint 130 millions de tonnes au titre du 1er semestre de l’année 2025, contre 116,4 millions de tonnes à la même période de l’année précédente, soit une hausse de 11,6%. Le trafic domestique . ', 'size': 4}], 'main_title': 'Hausse de 11,6% du trafic commercial dans les ports marocains au S1 2025'}, {'community_id': '6', 'articles': [{'id': '63', 'title': 'Football : Le Raja passe de l’association à l’entreprise', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/influences/football-le-raja-passe-de-lassociation-a-lentreprise/', 'summary': 'Football : Le Raja passe de l’association à l’entreprise. C’est officiel ! Le Raja Club Athletic et l’association Ports4Impact ont scellé, ce samedi, un partenariat pour l’activation de la société sportive Raja S.A.', 'size': 2}, {'id': '72', 'title': 'Le Raja scelle un partenariat avec Ports4Impact pour lancer la société sportive Raja S.A.', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/le-raja-scelle-un-partenariat-avec-ports4impact-pour-lancer-la-societe/', 'summary': 'Le Raja scelle un partenariat avec Ports4Impact pour lancer la société sportive Raja S.A.. Le Raja Club Athletic et l’association Ports4Impact, entité autonome chargée de la mise en œuvre de la politique de responsabilité sociétale de Marsa Maroc, ont signé, samedi à Casablanca, une convention d’investissement visant à activer et dynamiser la société sportive Raja S.A. Ce partenariat, conclu lors d’une cérémonie présidée par le président de la Fédération .', 'size': 2}], 'main_title': 'Football : Le Raja passe de l’association à l’entreprise'}, {'community_id': '5', 'articles': [{'id': '69', 'title': 'Dakar : Abdoulaye Fall élu nouveau président de la Fédération Sénégalaise de Football', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/dakar-abdoulaye-fall-elu-nouveau-president-de-la-federation/', 'summary': 'Dakar : Abdoulaye Fall élu nouveau président de la Fédération Sénégalaise de Football. Abdoulaye Fall a été élu dimanche à Dakar, nouveau président de la Fédération Sénégalaise de Football (FSF), à l’issue de l’Assemblée générale élective de cette instance sportive tenue sur deux jours. Inspecteur du Trésor et président de la Ligue régionale de football de Diourbel, M. Fall succède ainsi, à Augustin Senghor, pour un mandat de .', 'size': 2}, {'id': '75', 'title': 'Abdoulaye Fall élu nouveau président de la Fédération Sénégalaise de Football', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/abdoulaye-fall-elu-nouveau-president-de-la-federation-senegalaise-de-football.html', 'summary': 'Abdoulaye Fall élu nouveau président de la Fédération Sénégalaise de Football. Abdoulaye Fall a été élu dimanche à Dakar, nouveau président de la Fédération Sénégalaise de Football (FSF), à l’issue de l’Assemblée générale élective de cette instance sportive tenue sur deux jours. Inspecteur du Trésor et président de la Ligue régionale de football de Diourbel, M. Fall succède ainsi, à Augustin Senghor, pour un mandat de . L’article est apparu en premier sur .', 'size': 2}], 'main_title': 'Dakar : Abdoulaye Fall élu nouveau président de la Fédération Sénégalaise de Football'}, {'community_id': '8', 'articles': [{'id': '73', 'title': 'Maroc-Palestine : Aide humanitaire pour Gaza en denrées alimentaires et médicaments', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/maroc-palestine-aide-humanitaire-pour-gaza-en-denrees-alimentaires/', 'summary': 'Maroc-Palestine : Aide humanitaire pour Gaza en denrées alimentaires et médicaments. L’aide humanitaire et médicale d’urgence envoyée, sur Très Hautes Instructions de Sa Majesté le Roi Mohammed VI, Président du Comité Al-Qods, en faveur du peuple palestinien, en particulier les populations de la bande de Gaza, contribuera à répondre à leurs besoins en denrées alimentaires et en médicaments, a affirmé la ministre palestinienne du Développement social, .', 'size': 2}, {'id': '107', 'title': 'Des personnalités maqdessies saluent hautement l’aide humanitaire et médicale  du Maroc', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/societe/des-personnalites-maqdessies-saluent-hautement-laide-humanitaire-et-medicale-du-maroc', 'summary': 'Des personnalités maqdessies saluent hautement l’aide humanitaire et médicale du Maroc. Des personnalités maqdessies ont salué hautement l’initiative de SM le Roi Mohammed VI, Président du Comité Al-Qods, d’envoyer une aide humanitaire et médicale d’urgence en faveur du peuple palestinien, en particulier les populations de la bande de Gaza. Dans des déclarations à la MAP, elles ont loué les efforts inlassables du Souverain en soutien à .', 'size': 2}], 'main_title': 'Maroc-Palestine : Aide humanitaire pour Gaza en denrées alimentaires et médicaments'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
                        
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ? d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        // Fonction pour cacher le tooltip
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = '';
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
    
    
</body>




</html>
    