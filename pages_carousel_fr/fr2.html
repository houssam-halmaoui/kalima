<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); 
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title"> Les principales actualités des dernières 24 heures

</div>    
        <div class="header-subtitle"> Dernière mise à jour : 20/07/2025 - 12h25</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"></div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '0', 'title': "Le temps qu'il fera ce dimanche 20 juillet 2025", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/434217-le-temps-quil-fera-ce-dimanche-20-juillet-2025.html', 'summary': "Le temps qu'il fera ce dimanche 20 juillet 2025. Voici les prévisions météorologiques établies par la Direction générale de la météorologie pour le dimanche 20 juillet 2025 -Rafraîchissement des températures sur l’ensemble du pays avec un temps assez chaud sur l’extrême Sud-Est et l’intérieur des provinces sahariennes. -Formations brumeuses sur les plaines Nord et les côtes Centre la nuit suivante. -Bruines locales entre Sidi-Ifni . ", 'size': 2}, {'id': '50', 'title': 'Les prévisions du samedi 19 juillet', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/les-previsions-du-samedi-19-juillet-307001/', 'summary': 'Les prévisions du samedi 19 juillet. Voici les prévisions météorologiques établies par la Direction générale de la météorologie pour le samedi 19 juillet 2025. -Rafraîchissement des températures sur l’ensemble du pays avec un temps assez chaud sur l’extrême Sud-Est et l’intérieur des provinces sahariennes. -Formations brumeuses sur les plaines Nord et les côtes Centre la nuit', 'size': 2}], 'main_title': "Le temps qu'il fera ce dimanche 20 juillet 2025"}, {'community_id': '1', 'articles': [{'id': '1', 'title': 'Cinéma : Voici les projets admis à l’avance sur recettes au titre de la 2e session de 2025', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/434228-cinema-voici-les-projets-admis-a-lavance-sur-recettes-au-titre-de-la-2e-session-de-2025.html', 'summary': 'Cinéma : Voici les projets admis à l’avance sur recettes au titre de la 2e session de 2025. La Commission d’aide à la production des œuvres cinématographiques a dévoilé les projets admis à l’avance sur recettes au titre de la 2è session de l’année 2025. Dans la catégorie de la fiction, la commission, qui a tenu sa deuxième session du 07 au 17 juillet, a examiné, pour l’avance sur recettes après production, un . ', 'size': 3}, {'id': '40', 'title': 'Subventions aux œuvres cinématographiques : la commission dévoile la liste des bénéficiaires', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Subventions-aux-oeuvres-cinematographiques-la-commission-devoile-la-liste-des-beneficiaires_a70054.html', 'summary': "Subventions aux œuvres cinématographiques : la commission dévoile la liste des bénéficiaires. La Commission d'aide à la production des œuvres cinématographiques a dévoilé les projets admis à l’avance sur recettes au titre de la 2è session de l’année 2025.", 'size': 3}, {'id': '74', 'title': 'La Commission d’aide à la production des œuvres cinématographiques dévoile les projets admis à l’avance sur recettes au titre de la 2e session de 2025', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/la-commission-daide-a-la-production/', 'summary': 'La Commission d’aide à la production des œuvres cinématographiques dévoile les projets admis à l’avance sur recettes au titre de la 2e session de 2025. La Commission d’aide à la production des œuvres cinématographiques a dévoilé les projets admis à l’avance sur recettes au titre de la 2è session de l’année 2025. Dans la catégorie de la fiction, la commission, qui a tenu sa deuxième session du 07 au 17 juillet, a examiné, pour l’avance sur recettes après production, un .', 'size': 3}], 'main_title': 'Cinéma : Voici les projets admis à l’avance sur recettes au titre de la 2e session de 2025'}, {'community_id': '4', 'articles': [{'id': '2', 'title': 'CAN de rugby à XV (Ouganda-2025) : le Maroc termine à la 6è place', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/434226-can-de-rugby-a-xv-ouganda-2025-le-maroc-termine-a-la-6e-place.html', 'summary': 'CAN de rugby à XV (Ouganda-2025) : le Maroc termine à la 6è place. La sélection marocaine de rugby à XV a occupé la 6è place lors de la Coupe d’Afrique des Nations (CAN), qui prend fin samedi en Ouganda. En match de classement pour la cinquième place, l’équipe nationale du Maroc a perdu face à son homologue sénégalaise sur le score de 28 à 33. Le Maroc avait . ', 'size': 2}, {'id': '56', 'title': 'CAN de rugby à XV : Le Maroc termine à la sixième place', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/172137/rugby-maroc-termine-sixieme-place.html', 'summary': 'CAN de rugby à XV : Le Maroc termine à la sixième place. La sélection marocaine de rugby à XV a occupé la sixième place lors de la Coupe dAfrique des nations (CAN), qui prend fin samedi en Ouganda. En match de classement pour la cinquième place, léquipe du Maroc a perdu face à son homologue sénégalaise sur le score de 28 à 33.', 'size': 2}], 'main_title': 'CAN de rugby à XV (Ouganda-2025) : le Maroc termine à la 6è place'}, {'community_id': '6', 'articles': [{'id': '9', 'title': 'Capacité future à épargner : perception pessimiste des ménages au T2-2025', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/434178-capacite-future-a-epargner-perception-pessimiste-des-menages-au-t2-2025.html', 'summary': 'Capacité future à épargner : perception pessimiste des ménages au T2-2025. Les résultats de l’enquête de conjoncture auprès des ménages réalisée par le Haut-Commissariat au Plan (HCP) au titre du deuxième trimestre de 2025, révèlent que 8,7% des ménages s’attendent à épargner au cours des 12 prochains mois. Le solde d’opinion de cet indicateur s’est établi à -82,6 points, contre -77,6 points le trimestre précédent et . ', 'size': 2}, {'id': '75', 'title': 'Capacité future à épargner : perception pessimiste des ménages au T2-2025 (HCP)', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/capacite-future-a-epargner-perception-pessimiste-des-menages-au-t2-2025-hcp/', 'summary': 'Capacité future à épargner : perception pessimiste des ménages au T2-2025 (HCP). Les résultats de l’enquête de conjoncture auprès des ménages réalisée par le Haut-Commissariat au Plan (HCP) au titre du deuxième trimestre de 2025, révèlent que 8,7% des ménages s’attendent à épargner au cours des 12 prochains mois. Le solde d’opinion de cet indicateur s’est établi à -82,6 points, contre -77,6 points le trimestre précédent et .', 'size': 2}], 'main_title': 'Capacité future à épargner : perception pessimiste des ménages au T2-2025'}, {'community_id': '9', 'articles': [{'id': '12', 'title': 'Le Maroc est devenu un des centres mondiaux du football (Gianni Infantino)', 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/le-maroc-est-devenu-un-des-centres-mondiaux-du-football-gianni-infantino/292039', 'summary': 'Le Maroc est devenu un des centres mondiaux du football (Gianni Infantino). Les sélections marocaines masculine et féminine disposent d’un niveau extrêmement bien et comptent en leurs rangs des talents incroyables, a souligné M. Infantino. Le M.', 'size': 3}, {'id': '85', 'title': 'Gianni Infantino : « Le Maroc est devenu un des centres mondiaux du football »', 'source': 'lnt.ma', 'link': 'https://lnt.ma/gianni-infantino-le-maroc-est-devenu-un-des-centres-mondiaux-du-football/', 'summary': 'Gianni Infantino : « Le Maroc est devenu un des centres mondiaux du football ». Le président de la Fédération internationale de football association (FIFA), Gianni Infantino, a salué samedi à Rabat le rôle central que joue désormais le Maroc dans le paysage mondial du football, soulignant les avancées remarquables enregistrées par le Royaume tant sur le plan des performances sportives que de l’organisation des compétitions internationales. « Je suis . ', 'size': 3}, {'id': '121', 'title': 'Gianni Infantino: le Maroc est devenu un des centres mondiaux du football', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/gianni-infantino-le-maroc-est-devenu-un-des-centres-mondiaux-du-football.html', 'summary': 'Gianni Infantino: le Maroc est devenu un des centres mondiaux du football. Le Maroc est devenu un des centres mondiaux du football, a affirmé le président de la Fédération internationale de football (FIFA), Gianni Infantino. L’article est apparu en premier sur .', 'size': 3}], 'main_title': 'Le Maroc est devenu un des centres mondiaux du football (Gianni Infantino)'}, {'community_id': '7', 'articles': [{'id': '16', 'title': 'Un nouveau partenariat de 6 millions de dollars conclu entre l’UM6P, l’UNESCO et la Fondation OCP', 'source': 'lematin.ma', 'link': 'https://lematin.ma/culture/accord-de-6-m-entre-lum6p-lunesco-et-la-fondation-ocp-pour-lafrique/292023', 'summary': 'Un nouveau partenariat de 6 millions de dollars conclu entre l’UM6P, l’UNESCO et la Fondation OCP. L’accord, signé par Mostapha Terrab, Président du Groupe OCP, et Audrey Azoulay, Directrice générale de l’UNESCO, vient consolider une alliance construite sur une volonté partagée.', 'size': 2}, {'id': '34', 'title': "L'UM6P, l’UNESCO et la Fondation OCP s'accordent sur les agendas de développement centrés sur l’Afrique", 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/L-UM6P-l-UNESCO-et-la-Fondation-OCP-s-accordent-sur-les-agendas-de-developpement-centres-sur-l-Afrique_a70062.html', 'summary': "L'UM6P, l’UNESCO et la Fondation OCP s'accordent sur les agendas de développement centrés sur l’Afrique. L'Université Mohammed VI Polytechnique (UM6P), l’UNESCO et la Fondation OCP ont signé, vendredi à Paris, un accord ouvrant un nouveau chapitre de leur collaboration pour la période 2025-2027, en activant une plateforme triangulaire dédiée aux agendas de développement centrés sur l’Afrique, avec un engagement financier de 6 millions de dollars.", 'size': 4}, {'id': '57', 'title': 'Afrique\xa0: 6 M$ pour une plateforme des agendas de développement par l’UM6P, l’UNESCO et la Fondation OCP', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/172135/afrique-pour-plateforme-agendas-developpement.html', 'summary': 'Afrique : 6 M$ pour une plateforme des agendas de développement par l’UM6P, l’UNESCO et la Fondation OCP. L’Université Mohammed VI polytechnique (UM6P), l’UNESCO et la Fondation OCP lancent une plateforme triangulaire, dédiée aux agendas de développement centrés sur l’Afrique. Avec un engagement financier de 6 millions de dollars, cette initiative annoncée le 18 juillet à Benguerir s’inscrit dans le cadre d’une collaboration tripartite pour la période 2025-2027, afin de «consolider une alliance construite sur une volonté partagée d’agir au plus près des enjeux africains».', 'size': 4}, {'id': '79', 'title': 'L’UM6P, l’UNESCO et la Fondation OCP activent une plateforme triangulaire dédiée aux agendas de développement de l’Afrique', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/lum6p-lunesco-et-la-fondation-ocp-activent-une-plateforme-triangulaire-dediee-aux-agendas-de-developpement-de-lafrique.html', 'summary': 'L’UM6P, l’UNESCO et la Fondation OCP activent une plateforme triangulaire dédiée aux agendas de développement de l’Afrique. L’Université Mohammed VI Polytechnique (UM6P), l’UNESCO et la Fondation OCP ont signé, vendredi à Paris, un accord ouvrant un nouveau chapitre de leur collaboration pour la période 2025-2027, en activant une plateforme triangulaire dédiée aux agendas de développement centrés sur l’Afrique, avec un engagement financier de 6 millions de dollars. Signé par Mostapha Terrab, président . L’article est apparu en premier sur .', 'size': 4}, {'id': '86', 'title': 'L’UM6P, l’UNESCO et la Fondation OCP lancent une plateforme triangulaire pour les agendas de développement centrés sur l’Afrique', 'source': 'lnt.ma', 'link': 'https://lnt.ma/lum6p-lunesco-et-la-fondation-ocp-lancent-une-plateforme-triangulaire-pour-les-agendas-de-developpement-centres-sur-lafrique/', 'summary': 'L’UM6P, l’UNESCO et la Fondation OCP lancent une plateforme triangulaire pour les agendas de développement centrés sur l’Afrique. L’Université Mohammed VI Polytechnique (UM6P), l’UNESCO et la Fondation OCP ont scellé un partenariat stratégique pour la période 2025-2027 en activant une plateforme triangulaire dédiée aux agendas de développement centrés sur l’Afrique, avec un engagement financier de 6 millions de dollars. L’accord a été signé vendredi à Paris par Mostapha Terrab, président du Groupe OCP, . ', 'size': 5}], 'main_title': 'L’UM6P, l’UNESCO et la Fondation OCP lancent une plateforme triangulaire pour les agendas de développement centrés sur l’Afrique'}, {'community_id': '3', 'articles': [{'id': '31', 'title': 'CAN (f) 2024 : Pas de demi-finale Maroc–Algérie, les Lionnes affronteront le Ghana', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/CAN-f-2024-Pas-de-demi-finale-Maroc-Algerie-les-Lionnes-affronteront-le-Ghana_a70065.html', 'summary': 'CAN (f) 2024 : Pas de demi-finale Maroc–Algérie, les Lionnes affronteront le Ghana. Le Maroc affrontera le Ghana en demi-finale de la CAN féminine 2024, mardi prochain au stade Olympique de Rabat, à partir de 20h00.', 'size': 4}, {'id': '53', 'title': 'CAN 2024 féminine : Le Maroc affronte le Ghana qui a battu l’Algérie\xa0aux\xa0tirs\xa0au\xa0but', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/172149/2024-feminine-maroc-affronte-ghana.html', 'summary': 'CAN 2024 féminine : Le Maroc affronte le Ghana qui a battu l’Algérie aux tirs au but. Le Ghana a rejoint le Maroc en demi-finale de la Coupe dAfrique des nations (CAN 2024) féminine de football, en battant l’Algérie par quatre tirs au but à 2 (0-0 après prolongations), en quart de finale joué samedi à Berkane.', 'size': 3}, {'id': '83', 'title': 'CAN Féminine 2024 | L’Algérie éliminée, le Ghana rejoint le Maroc en demi-finale', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/can-feminine-2024-lalgerie-eliminee-le-ghana-rejoint-le-maroc-en-demi-finale/', 'summary': 'CAN Féminine 2024 | L’Algérie éliminée, le Ghana rejoint le Maroc en demi-finale. Le Ghana a rejoint le Maroc en demi-finale de la Coupe d’Afrique des Nations (CAN) féminine de football, en éliminant l’Algérie par 4 tirs au but à 2 (0-0 après prolongations), en quart de finale joué, samedi 19 juillet 2025, à Berkane. La demi-finale Maroc-Ghana se jouera, mardi 22 juillet prochain, au stade olympique de ', 'size': 3}, {'id': '95', 'title': 'CAN féminine : Le Ghana bat l’Algérie et rejoint le Maroc en demi-finale', 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/can-feminine-le-ghana-bat-lalgerie-et-rejoint-le-maroc-en-demi-finale/292100', 'summary': 'CAN féminine : Le Ghana bat l’Algérie et rejoint le Maroc en demi-finale. La demi-finale Maroc-Ghana se jouera mardi prochain, au stade olympique de Rabat, à partir de 20h00 (GMT+1).**related_articles[292006]**La sélection marocaine a composté son ticket.', 'size': 2}], 'main_title': 'CAN (f) 2024 : Pas de demi-finale Maroc–Algérie, les Lionnes affronteront le Ghana'}, {'community_id': '5', 'articles': [{'id': '39', 'title': 'Economie verte : la BERD octroie 55 M€ à Saham Bank pour appuyer les projets de développement durable', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Economie-verte-la-BERD-octroie-55-M-a-Saham-Bank-pour-appuyer-les-projets-de-developpement-durable_a70055.html', 'summary': "Economie verte : la BERD octroie 55 M€ à Saham Bank pour appuyer les projets de développement durable. Saham Bank a obtenu un financement de 55 millions d'euros de la Banque européenne pour la reconstruction et le développement (BERD). Ce partenariat stratégique vise à promouvoir les initiatives d'économie verte au Maroc, dans le cadre du programme GEFF Plus (Green Economy Financing Facility).", 'size': 2}, {'id': '59', 'title': 'Saham Bank obtient 55 millions d’euros de la BERD', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/affaires/investissements/saham-bank-obtient-55-millions-deuros-de-la-berd/', 'summary': 'Saham Bank obtient 55 millions d’euros de la BERD. Saham Bank obtient un financement de 55 millions d’euros de la BERD, avec l’appui de l’Union européenne, du Canada et du Fonds Vert pour le Climat, pour soutenir la transition énergétique au Maroc. Ce partenariat s’inscrit dans le cadre du programme GEFF Plus et marque une étape stratégique dans l’engagement de la banque en faveur d’une finance durable.', 'size': 2}], 'main_title': 'Economie verte : la BERD octroie 55 M€ à Saham Bank pour appuyer les projets de développement durable'}, {'community_id': '2', 'articles': [{'id': '49', 'title': 'Le moral des ménages repart à la hausse au 2ᵉ trimestre 2025', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/le-moral-des-menages-repart-a-la-hausse-au-2%e1%b5%89-trimestre-2025-307012/', 'summary': 'Le moral des ménages repart à la hausse au 2ᵉ trimestre 2025. Selon le Haut-Commissariat au Plan (HCP), l’indice de confiance des ménages (ICM) atteint 54,6 points au deuxième trimestre 2025, contre 46,6 points au trimestre précédent. Une progression de 8 points en l’espace d’un trimestre qui traduit un net regain d’optimisme chez les ménages marocains. «Les résultats de l’enquête permanente de', 'size': 2}, {'id': '84', 'title': 'Confiance des ménages : une nette amélioration au deuxième trimestre 2025, malgré des inquiétudes persistantes', 'source': 'lnt.ma', 'link': 'https://lnt.ma/confiance-des-menages-une-nette-amelioration-au-deuxieme-trimestre-2025-malgre-des-inquietudes-persistantes/', 'summary': 'Confiance des ménages : une nette amélioration au deuxième trimestre 2025, malgré des inquiétudes persistantes. L’Indice de Confiance des Ménages (ICM) a connu une progression notable au deuxième trimestre de l’année 2025, atteignant 54,6 points contre 46,6 points au trimestre précédent, selon les résultats de l’enquête permanente de conjoncture menée par le Haut-Commissariat au Plan (HCP). Cette évolution positive traduit une amélioration généralisée des perceptions des ménages sur plusieurs volets . ', 'size': 2}], 'main_title': 'Le moral des ménages repart à la hausse au 2ᵉ trimestre 2025'}, {'community_id': '8', 'articles': [{'id': '93', 'title': 'Les températures attendues ce dimanche 20 juillet 2025', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/434218-les-temperatures-attendues-ce-dimanche-20-juillet-2025.html', 'summary': 'Les températures attendues ce dimanche 20 juillet 2025. Voici les températures minimales et maximales prévues par la Direction générale de la météorologie pour la journée du dimanche 20 juillet 2025 Min Max – Oujda 23 39 – Bouarfa 25 39 – Al Hoceima 23 30 – Tétouan 20 32 – Sebta 22 26 – Mellilia 25 28 – Tanger 21 27 – Kénitra . ', 'size': 2}, {'id': '115', 'title': 'Températures prévues pour le lundi 21 juillet 2025', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/temperatures-prevues-pour-le-lundi-21-juillet-2025/', 'summary': 'Températures prévues pour le lundi 21 juillet 2025. Voici les températures minimales et maximales prévues par la Direction générale de la météorologie pour le lundi 21 juillet 2025 : Min Max – Oujda 22 37 – Bouarfa 21 40 – Al Hoceima 23 30 – Tétouan 20 33 – Sebta 21 25 – Mellilia 24 28 – Tanger 20 28 – Kénitra 20 .', 'size': 2}], 'main_title': 'Les températures attendues ce dimanche 20 juillet 2025'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
                        
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ? d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        // Fonction pour cacher le tooltip
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = '';
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
    
    
</body>




</html>
    