<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); 
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title"> Les principales actualités des dernières 24 heures

</div>    
        <div class="header-subtitle"> Dernière mise à jour : 27/07/2025 - 06h30</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"></div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '4', 'articles': [{'id': '6', 'title': 'IA: La Chine appelle à un consensus mondial pour prévenir les risques', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/435139-ia-la-chine-appelle-a-un-consensus-mondial-pour-prevenir-les-risques.html', 'summary': 'IA: La Chine appelle à un consensus mondial pour prévenir les risques. Le Premier ministre chinois Li Qiang a appelé samedi à concilier le développement de l’intelligence artificielle (IA) et les risques induits par cette technologie, appelant à un consensus mondial malgré la rivalité Pékin-Washington en la matière. Donald Trump a dévoilé cette semaine un plan d’action pour favoriser le développement sans entrave des modèles américains d’IA . ', 'size': 2}, {'id': '84', 'title': 'La Chine entend créer une organisation mondiale pour la gouvernance de l’IA', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/la-chine-entend-creer-une-organisation-mondiale-pour-la-gouvernance-de-lia/', 'summary': 'La Chine entend créer une organisation mondiale pour la gouvernance de l’IA. La Chine a annoncé, samedi, son intention de créer une organisation visant à promouvoir la gouvernance et la coopération mondiales en matière d’intelligence artificielle (IA). Lors de la Conférence mondiale annuelle sur l’intelligence artificielle à Shanghai, le Premier ministre chinois Li Qiang a exprimé la volonté de son pays de coordonner les efforts internationaux pour .', 'size': 2}], 'main_title': 'IA: La Chine appelle à un consensus mondial pour prévenir les risques'}, {'community_id': '2', 'articles': [{'id': '10', 'title': 'Football : Inauguration du Bureau Afrique de la FIFA au Maroc', 'source': 'lematin.ma', 'link': 'https://lematin.ma/videos/football-inauguration-du-bureau-afrique-de-la-fifa-au-maroc/293384', 'summary': "Football : Inauguration du Bureau Afrique de la FIFA au Maroc. Le bureau Afrique de la Fédération internationale de football (FIFA) a été inauguré, samedi au complexe Mohammed VI de football, lors d'une cérémonie présidée par le président.", 'size': 5}, {'id': '32', 'title': 'FIFA : Inauguration du Bureau Régional de Rabat', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/FIFA-Inauguration-du-Bureau-Regional-de-Rabat_a70305.html', 'summary': 'FIFA : Inauguration du Bureau Régional de Rabat. Ce samedi à Rabat, la FIFA a officiellement inauguré son bureau régional pour l’Afrique du Nord, un nouvel ajout à son réseau mondial d’antennes', 'size': 2}, {'id': '57', 'title': 'La FIFA inaugure son Bureau Afrique au Maroc, «un jour de fête» pour Infantino', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/la-fifa-inaugure-son-bureau-afrique-au-maroc-un-jour-de-fete-pour-infantino-307482/', 'summary': 'La FIFA inaugure son Bureau Afrique au Maroc, «un jour de fête» pour Infantino. La Fédération internationale de football (FIFA) a inauguré, samedi 26 juillet, le siège de son Bureau Afrique, sis au Complexe Mohammed VI de football à Salé, au cours d’une cérémonie présidée par Gianni Infantino, qui évoque « un moment historique et un jour de fête et de bonheur ». « Ce n’est pas', 'size': 4}, {'id': '81', 'title': 'Salé accueille le nouveau bureau Afrique de la FIFA au complexe Mohammed\u202fVI', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/sale-accueille-le-nouveau-bureau-afrique-de-la-fifa-au-complexe-mohammed-vi/', 'summary': 'Salé accueille le nouveau bureau Afrique de la FIFA au complexe Mohammed VI. Le bureau Afrique de la Fédération internationale de football (FIFA) a été inauguré, samedi au complexe Mohammed VI de football à Salé, lors d’une cérémonie présidée par le président de la FIFA, Gianni Infantino. Cette cérémonie s’est déroulée en présence du président de la Confédération africaine de football (CAF), Patrice Motsepe, du président de la .', 'size': 4}, {'id': '134', 'title': 'Maroc: inauguration du bureau Afrique de la FIFA au complexe Mohammed VI à Salé', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/275540.html', 'summary': 'Maroc: inauguration du bureau Afrique de la FIFA au complexe Mohammed VI à Salé. Le bureau Afrique de la Fédération internationale de football (FIFA) a été inauguré, samedi au complexe Mohammed VI de football à Salé, lors d’une cérémonie présidée par le président de la FIFA, Gianni Infantino. Cette cérémonie s’est déroulée en présence du président de la Confédération africaine de football (CAF), Patrice Motsepe, du président de la . L’article est apparu en premier sur .', 'size': 4}], 'main_title': 'Football : Inauguration du Bureau Afrique de la FIFA au Maroc'}, {'community_id': '7', 'articles': [{'id': '14', 'title': 'Vague de chaleur de dimanche à mardi dans plusieurs régions du Maroc', 'source': 'lematin.ma', 'link': 'https://lematin.ma/regions/vague-de-chaleur-de-dimanche-a-mardi-dans-plusieurs-regions-du-maroc/293361', 'summary': 'Vague de chaleur de dimanche à mardi dans plusieurs régions du Maroc. Une vague de chaleur avec des températures comprises entre 45 et 48°C sera enregistrée de dimanche à mardi dans les provinces de Zagora, Tata, Assa-Zag, Es-Semara, Boujdour, Oued E.', 'size': 2}, {'id': '89', 'title': 'Maroc : alerte à une vague de chaleur de 42°C à 48°C du dimanche au mardi dans plusieurs provinces', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/maroc-alerte-a-une-vague-de-chaleur-de-42c-a-48c-du-dimanche-au-mardi-dans-plusieurs-provinces/', 'summary': 'Maroc : alerte à une vague de chaleur de 42°C à 48°C du dimanche au mardi dans plusieurs provinces. La Direction générale de la météorologie (DGM) annonce une nouvelle vague de chaleur qui touchera plusieurs régions du Royaume entre dimanche et mardi, avec des températures extrêmes comprises entre 42°C et 48°C. Selon le bulletin d’alerte de vigilance orange publié par la DGM, les provinces de Zagora, Tata, Assa-Zag, Es-Semara, Boujdour, Oued Ed-Dahab et Aousserd .', 'size': 2}], 'main_title': 'Vague de chaleur de dimanche à mardi dans plusieurs régions du Maroc'}, {'community_id': '3', 'articles': [{'id': '22', 'title': 'Le mois de Safar 1447 débute ce samedi 26 juillet', 'source': 'lematin.ma', 'link': 'https://lematin.ma/nation/le-mois-de-safar-1447-debute-ce-samedi-26-juillet/293351', 'summary': 'Le mois de Safar 1447 débute ce samedi 26 juillet. Dans un communiqué, le ministère des Habous et des Affaires islamiques souligne avoir observé le croissant lunaire annonçant le début du mois de Safar après le coucher du soleil du.', 'size': 2}, {'id': '74', 'title': 'Safar 1447 : Le croissant lunaire aperçu, début du mois fixé au 26 juillet', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/172724/safar-1447-croissant-lunaire-apercu.html', 'summary': 'Safar 1447 : Le croissant lunaire aperçu, début du mois fixé au 26 juillet. Le mois de Safar 1447 de l’hégire débute ce samedi 26 juillet, a annoncé, vendredi, le ministère des Habous et des Affaires islamiques.', 'size': 2}], 'main_title': 'Le mois de Safar 1447 débute ce samedi 26 juillet'}, {'community_id': '5', 'articles': [{'id': '45', 'title': 'CAN féminine  2024 - Jorge Vilda : « Avec un moral au beau fixe, la sélection marocaine lorgne le titre »', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/CAN-feminine-2024-Jorge-Vilda-Avec-un-moral-au-beau-fixe-la-selection-marocaine-lorgne-le-titre_a70292.html', 'summary': 'CAN féminine 2024 - Jorge Vilda : « Avec un moral au beau fixe, la sélection marocaine lorgne le titre ». \u200bLa sélection marocaine féminine de football est déterminée à décrocher le titre de la Coupe d’Afrique des Nations (CAN) qui se tient dans le Royaume, en affrontant le Nigeria, samedi soir (21h00) en finale au stade olympique de Rabat, a indiqué le coach Jorge Vilda.', 'size': 3}, {'id': '96', 'title': 'CAN féminine de football: «\xa0avec un moral au beau fixe, la sélection marocaine lorgne le titre\xa0» (Jorge Vilda)', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/can-feminine-de-football-avec-un-moral-au-beau-fixe-la-selection-marocaine-lorgne-le-titre-jorge-vilda.html', 'summary': 'CAN féminine de football: « avec un moral au beau fixe, la sélection marocaine lorgne le titre » (Jorge Vilda). La sélection marocaine féminine de football est déterminée à décrocher le titre de la Coupe d’Afrique des Nations (CAN) qui se tient dans le Royaume, en affrontant le Nigeria, samedi soir (21h00) en finale au stade olympique de Rabat, a indiqué le coach Jorge Vilda. « Avec un moral au beau fixe, la sélection marocaine lorgne . L’article est apparu en premier sur .', 'size': 3}, {'id': '100', 'title': 'CAN féminine | Avec un moral au beau fixe, la sélection marocaine lorgne le titre', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/can-feminine-avec-un-moral-au-beau-fixe-la-selection-marocaine-lorgne-le-titre/', 'summary': 'CAN féminine | Avec un moral au beau fixe, la sélection marocaine lorgne le titre. La sélection marocaine féminine de football est déterminée à décrocher le titre de la Coupe d’Afrique des Nations (CAN) qui se tient dans le Royaume, en affrontant le Nigeria, samedi soir (21h00) en finale au stade olympique de Rabat, a indiqué le coach Jorge Vilda. “Avec un moral au beau fixe, la sélection marocaine lorgne ', 'size': 4}, {'id': '124', 'title': "Le Nigeria remporte le titre de la Coupe d'Afrique des Nations féminine face aux Lionnes de l’Atlas (3-2)", 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/172786/nigeria-remporte-titre-coupe-d-afrique.html', 'summary': "Le Nigeria remporte le titre de la Coupe d'Afrique des Nations féminine face aux Lionnes de l’Atlas (3-2). La sélection marocaine a perdu la finale de la Coupe d’Afrique des nations féminine de football (Maroc-2024), face au Nigéria par 3 buts à 2, samedi au stade olympique de Rabat.", 'size': 2}], 'main_title': 'CAN féminine | Avec un moral au beau fixe, la sélection marocaine lorgne le titre'}, {'community_id': '6', 'articles': [{'id': '47', 'title': 'CAN féminine : les Lionnes à un pas de l’or, CHAN 2024 : cap sur le triplé', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/07/25/can-feminine-les-lionnes-a-un-pas-de-lor-chan-2024-cap-sur-le-triple-%d9%83%d8%a3%d8%b3-%d8%a3%d9%85%d9%85-%d8%a3%d9%81%d8%b1%d9%8a%d9%82%d9%8a%d8%a7-%d9%84%d9%84%d8%b3%d9%8a%d8%af%d8%a7_1944059/', 'summary': 'CAN féminine : les Lionnes à un pas de l’or, CHAN 2024 : cap sur le triplé. Elles l’ont refait. Pour la deuxième fois consécutive, les Lionnes de l’Atlas joueront la finale de la CAN féminine, avec un défi immense : battre le Nigeria, géant du continent, et décrocher un premier titre historique. Pendant ce temps, les regards se tournent aussi vers les joueurs locaux, appelés à défendre leur double couronne au.', 'size': 2}, {'id': '120', 'title': 'Finale CAN (f) Maroc 24 : Le Nigeria Champion d’Afrique pour la 10e fois', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Finale-CAN-f-Maroc-24-Le-Nigeria-Champion-d-Afrique-pour-la-10e-fois_a70312.html', 'summary': 'Finale CAN (f) Maroc 24 : Le Nigeria Champion d’Afrique pour la 10e fois. Cruelle désillusion Les Lionnes passent tout près du sacre continental. Après une première période remarquable, elles auront subi la furia nigériane sans réussir à inverser la tendance. Le Nigeria, porté par son mental et son efficacité, signe une remontada historique et décroche le titre.', 'size': 2}], 'main_title': 'CAN féminine : les Lionnes à un pas de l’or, CHAN 2024 : cap sur le triplé'}, {'community_id': '8', 'articles': [{'id': '51', 'title': 'Délais de paiement : les TPE, maillon faible du secteur privé malgré la réforme', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/07/25/delais-de-paiement-les-tpe-maillon-faible-du-secteur-prive-malgre-la-reforme_1943990/', 'summary': 'Délais de paiement : les TPE, maillon faible du secteur privé malgré la réforme. Depuis l’entrée en vigueur de la loi n° 69-21 en juillet 2023, les délais de paiement dans le secteur privé connaissent une évolution globalement favorable, selon l’Observatoire des délais de paiement (ODP). Ce qu’il s’est passé En 2023, les délais clients se sont établis à 125 jours du chiffre d’affaires (JCA), contre 85 jours pour.', 'size': 2}, {'id': '101', 'title': 'Paiement | Les entreprises privées enregistrent une amélioration des délais de règlement', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/paiement-les-entreprises-privees-enregistrent-une-amelioration-des-delais-de-reglement/', 'summary': 'Paiement | Les entreprises privées enregistrent une amélioration des délais de règlement. Les délais de paiement enregistrent une évolution globalement favorable dans le secteur privé depuis l’entrée en vigueur de la loi n° 69-21 en juillet 2023, selon l’Observatoire des délais de paiement (ODP). En 2023, les délais clients se sont établis à 125 jours du chiffre d’affaires (JCA), tandis que les délais fournisseurs ont atteint 85 JA, fait savoir ', 'size': 2}], 'main_title': 'Délais de paiement : les TPE, maillon faible du secteur privé malgré la réforme'}, {'community_id': '1', 'articles': [{'id': '61', 'title': 'L’ANRT attribue les licences 5G à trois opérateurs', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/brouilanrt-attribue-les-licences-5g-a-trois-operateursllon-auto-307459/', 'summary': 'L’ANRT attribue les licences 5G à trois opérateurs. À l’issue du Conseil d’Administration de l’Agence Nationale de Réglementation des Télécommunications (ANRT), tenu le 25 juillet courant, Aziz Akhannouch, Chef du Gouvernement, a officiellement validé le rapport d’instruction relatif à l’attribution des licences pour l’établissement et l’exploitation de réseaux mobiles de cinquième génération (5G). Élaboré par l’ANRT, ce rapport', 'size': 2}, {'id': '77', 'title': 'Le Chef du Gouvernement préside le Conseil d’administration de l’ANRT', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/actualite/le-chef-du-gouvernement-preside-le-conseil-dadministration-de-lanrt', 'summary': 'Le Chef du Gouvernement préside le Conseil d’administration de l’ANRT. C’est en présence du Chef de Gouvernement Aziz Akhannouch, que l’Agence Nationale de Réglementation des télécommunications (ANRT) a tenu vendredi 25 juillet 2025 son Conseil d’administration. La séance a été en effet consacrée à l’examen de la situation actuelle du secteur des télécommunications et des projets et programmes de l’agence pour les années prochaines. Au .', 'size': 2}], 'main_title': 'L’ANRT attribue les licences 5G à trois opérateurs'}, {'community_id': '0', 'articles': [{'id': '62', 'title': 'Les prévisions du samedi 26 juillet', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/les-previsions-du-samedi-26-juillet-307436/', 'summary': 'Les prévisions du samedi 26 juillet. Voici les prévisions météorologiques établies par la Direction générale de la météorologie pour le samedi 26 juillet 2025. -Temps assez chaud à localement chaud sur les plaines intérieures, le Sud-Est, le Sud de l’Oriental et sur les provinces Sud. -Nuages cumuliformes et faiblement instables sur le Nord du Haut Atlas,', 'size': 2}, {'id': '106', 'title': "Le temps qu'il fera ce dimanche 27 juillet 2025", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/435152-le-temps-quil-fera-ce-dimanche-27-juillet-2025.html', 'summary': "Le temps qu'il fera ce dimanche 27 juillet 2025. Voici les prévisions météorologiques établies par la Direction générale de la météorologie pour le dimanche 27 juillet 2025: – Temps chaud sur le Sud et le Sud-Est et assez chaud sur les plaines à l’Ouest de l’Atlas. – Nuages bas nombreux sur les côtes Nord et Centre avec formations brumeuses ou bruines locales. – Ciel . ", 'size': 2}], 'main_title': 'Les prévisions du samedi 26 juillet'}, {'community_id': '9', 'articles': [{'id': '111', 'title': "CAN féminine: Le Roi Mohammed VI félicite les Lionnes de l'Atlas pour leur parcours", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/435206-can-feminine-le-roi-mohammed-vi-felicite-les-lionnes-de-latlas-pour-leur-parcours.html', 'summary': "CAN féminine: Le Roi Mohammed VI félicite les Lionnes de l'Atlas pour leur parcours. Le Roi Mohammed VI a adressé, samedi soir, un message de félicitations aux membres de la sélection nationale féminine de football pour leur brillant parcours à la Coupe d’Afrique des Nations féminine de Football 2024. Dans ce message, le souverain affirme avoir suivi avec une grande fierté le brillant parcours de l’équipe nationale à la . ", 'size': 5}, {'id': '116', 'title': 'S.M. le Roi félicite les membres de la sélection nationale de football pour leur brillant parcours à la CAN féminine', 'source': 'lematin.ma', 'link': 'https://lematin.ma/activites-royales/sm-le-roi-felicite-les-membres-de-la-selection-nationale-feminine/293402', 'summary': "S.M. le Roi félicite les membres de la sélection nationale de football pour leur brillant parcours à la CAN féminine. Dans ce message, le Souverain affirme avoir suivi avec une grande fierté le brillant parcours de l’équipe nationale à la Coupe d'Afrique des Nations féminine 2024, couronné par.", 'size': 5}, {'id': '119', 'title': 'SM le Roi félicite les membres de la sélection nationale de football pour leur brillant parcours à la CAN féminine 2024', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/SM-le-Roi-felicite-les-membres-de-la-selection-nationale-de-football-pour-leur-brillant-parcours-a-la-CAN-feminine-2024_a70313.html', 'summary': 'SM le Roi félicite les membres de la sélection nationale de football pour leur brillant parcours à la CAN féminine 2024. \u200bSa Majesté le Roi Mohammed VI, que Dieu L’assiste, a adressé un message de félicitations aux membres de la sélection nationale féminine de football pour leur brillant parcours à la Coupe d’Afrique des Nations féminine de football 2024.', 'size': 5}, {'id': '131', 'title': 'Le Roi Mohammed VI félicite la sélection nationale de football pour leur brillant parcours à la CAN féminine 2024', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/coupe-dafrique-des-nations-feminine-de-football-2024.html', 'summary': 'Le Roi Mohammed VI félicite la sélection nationale de football pour leur brillant parcours à la CAN féminine 2024. Le Roi Mohammed VI a adressé un message de félicitations aux membres de la sélection nationale féminine de football pour leur brillant parcours à la Coupe d’Afrique des Nations féminine de football 2024. Dans ce message, le souverain affirme avoir suivi avec une grande fierté le brillant parcours de l’équipe nationale à la Coupe d’Afrique . L’article est apparu en premier sur .', 'size': 5}, {'id': '135', 'title': 'SM le Roi félicite la sélection nationale de football pour leur brillant parcours à la CAN féminine 2024', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/sm-le-roi-felicite-la-selection-nationale-de-football-pour-leur-brillant-parcours-a-la-can-feminine-2024/', 'summary': 'SM le Roi félicite la sélection nationale de football pour leur brillant parcours à la CAN féminine 2024. Sa Majesté le Roi Mohammed VI, que Dieu L’assiste, a adressé un message de félicitations aux membres de la sélection nationale féminine de football pour leur brillant parcours à la Coupe d’Afrique des Nations féminine de football 2024. Dans ce message, le Souverain affirme avoir suivi avec une grande fierté le brillant parcours de l’équipe ', 'size': 5}], 'main_title': "CAN féminine: Le Roi Mohammed VI félicite les Lionnes de l'Atlas pour leur parcours"}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
                        
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ? d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        // Fonction pour cacher le tooltip
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = '';
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
    
    
</body>




</html>
    