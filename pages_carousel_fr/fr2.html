<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); 
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title"> Les principales actualités des dernières 24 heures

</div>    
        <div class="header-subtitle"> Dernière mise à jour : 01/09/2025 - 06h29</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"></div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '3', 'articles': [{'id': '5', 'title': 'Le film "Mon Père n’est pas mort" lauréat du grand prix du Ciné Plage Harhoura', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/439334-le-film-mon-pere-nest-pas-mort-laureat-du-grand-prix-du-cine-plage-harhoura.html', 'summary': 'Le film "Mon Père n’est pas mort" lauréat du grand prix du Ciné Plage Harhoura. Le film « Mon Père n’est pas mort » de son réalisateur Adil El Fadili a remporté le Grand Prix du 6è Festival Ciné-Plage Harhoura, clôturé samedi soir. La cérémonie de clôture de cet événement, initié par l’Association marocaine des arts sans frontières (AMAF), en partenariat avec la Commune de Harhoura et le Centre Cinématographique Marocain (CCM) . ', 'size': 2}, {'id': '17', 'title': 'Clôture de Ciné Plage Harhoura : le film "Mon Père n’est pas mort" remporte le grand prix', 'source': 'lematin.ma', 'link': 'https://lematin.ma/culture/cine-plage-le-film-mon-pere-nest-pas-mort-remporte-le-grand-prix/298999', 'summary': 'Clôture de Ciné Plage Harhoura : le film "Mon Père n’est pas mort" remporte le grand prix. La cérémonie de clôture de cet événement, initié par l\'Association marocaine des arts sans frontières (AMAF), en partenariat avec la Commune de Harhoura et le Centre Cinématogr.', 'size': 2}], 'main_title': 'Le film "Mon Père n’est pas mort" lauréat du grand prix du Ciné Plage Harhoura'}, {'community_id': '9', 'articles': [{'id': '8', 'title': 'Hammouchi apporte son soutien à la famille du "policier d’Imouzzer"', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/439358-hammouchi-apporte-son-soutien-a-la-famille-du-policier-dimouzzer.html', 'summary': 'Hammouchi apporte son soutien à la famille du "policier d’Imouzzer". Le Directeur général du pôle DGSN-DGST, Abdellatif Hammouchi, a rendu visite, ce dimanche 31 août, à la famille du policier tombé en service à Imouzzer, suite à une violente agression subie lors de l’exercice de ses fonctions. Selon une source sécuritaire, Hammouchi s’est déplacé au domicile familial de ce martyr du devoir, où il a . ', 'size': 2}, {'id': '77', 'title': 'Abdellatif Hammouchi se rend chez la famille du policier tué à Imouzzer', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Abdellatif-Hammouchi-se-rend-chez-la-famille-du-policier-tue-a-Imouzzer_a71248.html', 'summary': "Abdellatif Hammouchi se rend chez la famille du policier tué à Imouzzer. Le Directeur général de la Sûreté nationale et de la Surveillance du Territoire National, Abdellatif Hammouchi, s'est rendu, ce dimanche, chez la famille du policier décédé à Imouzzer lors de l'exercice de ses fonctions. Détails.", 'size': 2}], 'main_title': 'Hammouchi apporte son soutien à la famille du "policier d’Imouzzer"'}, {'community_id': '2', 'articles': [{'id': '14', 'title': 'Lions de l’Atlas : Igamane et Sahraoui s’illustrent lors du carton du LOSC face à Lorient', 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/lions-de-latlas-igamane-et-sahraoui-sillustrent-avec-losc/299059', 'summary': 'Lions de l’Atlas : Igamane et Sahraoui s’illustrent lors du carton du LOSC face à Lorient. Arrivé à Lille il y a tout juste quelques jours, Hamza Igamane a déjà entamé son opération de séduction ! Le jeune fer de lance, qui s’est engagé en provenance des Glasgow Rangers,.', 'size': 2}, {'id': '33', 'title': 'Ligue 1 : Igamane doublé, Sahraoui conclut… Lille écrase Lorient', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Ligue-1-Igamane-double-Sahraoui-conclut-Lille-ecrase-Lorient_a71234.html', 'summary': 'Ligue 1 : Igamane doublé, Sahraoui conclut Lille écrase Lorient. Hamza Igamane brille dès ses débuts et inscrit un doublé, tandis qu’Osame Sahraoui scelle la large victoire du LOSC contre Lorient (7-1) en Ligue 1.', 'size': 2}], 'main_title': 'Lions de l’Atlas : Igamane et Sahraoui s’illustrent lors du carton du LOSC face à Lorient'}, {'community_id': '4', 'articles': [{'id': '21', 'title': 'Gianni Infantino : Le Maroc est un grand pays de football', 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/gianni-infantino-le-maroc-est-un-grand-pays-de-football/298951', 'summary': 'Gianni Infantino : Le Maroc est un grand pays de football. Dans une déclaration à la MAP, le patron du football mondial n’a pas caché sa satisfaction : « Je suis très content pour le Maroc qui a remporté son troisième sacre du CHAN et démo.', 'size': 3}, {'id': '42', 'title': 'Gianni Infantino : «\xa0Le Maroc, un grand pays du football\xa0»', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/influences/gianni-infantino-le-maroc-un-grand-pays-du-football/', 'summary': 'Gianni Infantino : « Le Maroc, un grand pays du football ». "Je suis très content pour le Maroc qui a remporté son troisième sacre du CHAN et démontré qu\'il mérite amplement le trophée", a notamment indiqué le patron du footbal mondial.', 'size': 3}, {'id': '86', 'title': 'CHAN-2024. Gianni Infantino : Le Maroc, un grand pays du football', 'source': 'www.libe.ma', 'link': 'https://www.libe.ma/CHAN-2024-Gianni-Infantino-Le-Maroc-un-grand-pays-du-football_a155559.html', 'summary': 'CHAN-2024. Gianni Infantino : Le Maroc, un grand pays du football.', 'size': 3}], 'main_title': 'Gianni Infantino : Le Maroc est un grand pays de football'}, {'community_id': '10', 'articles': [{'id': '23', 'title': 'S.M. le Roi félicite la sélection nationale de football des joueurs locaux vainqueurs du CHAN-2024', 'source': 'lematin.ma', 'link': 'https://lematin.ma/activites-royales/sm-le-roi-felicite-la-selection-nationale-des-joueurs-vainqueurs-du-chan/298929', 'summary': "S.M. le Roi félicite la sélection nationale de football des joueurs locaux vainqueurs du CHAN-2024. Dans ce message, S.M. le Roi souligne avoir suivi avec une grande fierté et enthousiasme votre victoire bien méritée à la finale de la huitième édition du Championnat d'A.", 'size': 3}, {'id': '40', 'title': 'SM le Roi adresse un message de félicitations aux membres de la sélection nationale de football vainqueurs du CHAN', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/une/sm-le-roi-adresse-un-message-de-felicitations-aux-membres-de-la-selection-nationale-de-football-vainqueurs-du-chan', 'summary': 'SM le Roi adresse un message de félicitations aux membres de la sélection nationale de football vainqueurs du CHAN. Sa Majesté le Roi Mohammed VI a adressé un message de félicitations aux membres de la sélection nationale de football des joueurs locaux, vainqueurs du Championnat d’Afrique des Nations de football (CHAN-2024). Dans ce message, SM le Roi souligne avoir suivi avec une grande fierté et enthousiasme « votre victoire bien méritée à la finale de .', 'size': 4}, {'id': '43', 'title': 'CHAN 2024 : SM le Roi félicite les Lions de l’Atlas', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/influences/chan-2024-sm-le-roi-felicite-les-lions-de-latlas/', 'summary': "CHAN 2024 : SM le Roi félicite les Lions de l’Atlas. Sa Majesté le Roi Mohammed VI a adressé un message de félicitations aux membres de la sélection nationale de football des joueurs locaux, vainqueurs du Championnat d'Afrique des Nations de football (CHAN-2024).", 'size': 5}, {'id': '58', 'title': 'Le Roi Mohammed VI adresse un message de félicitations à la sélection nationale de football des joueurs locaux vainqueurs du CHAN-2024', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/le-roi-mohammed-vi-adresse-un-message-de-felicitations-aux-membres-de-la-selection-nationale-de-football-des-joueurs-locaux-vainqueurs-du-chan-2024.html', 'summary': 'Le Roi Mohammed VI adresse un message de félicitations à la sélection nationale de football des joueurs locaux vainqueurs du CHAN-2024. Le Roi Mohammed VI a adressé un message de félicitations aux membres de la sélection nationale de football des joueurs locaux, vainqueurs du Championnat d’Afrique des Nations de football (CHAN-2024). Dans ce message, le Roi souligne avoir suivi avec une grande fierté et enthousiasme « votre victoire bien méritée à la finale de la huitième édition . L’article est apparu en premier sur .', 'size': 4}], 'main_title': 'CHAN 2024 : SM le Roi félicite les Lions de l’Atlas'}, {'community_id': '11', 'articles': [{'id': '24', 'title': "CHAN 2025 : Les Lions de l'Atlas décrochent un troisième sacre historique face à Madagascar (3-2)", 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/chan-2025-les-lions-de-latlas-decrochent-un-troisieme-sacre/298917', 'summary': "CHAN 2025 : Les Lions de l'Atlas décrochent un troisième sacre historique face à Madagascar (3-2). Le rêve est devenu réalité à Nairobi ! Dans un stade Kasarani électrisé, en présence de Fouzi Lekjaa, président de la FRMF venu soutenir les Lions, les protégés de Tarik Sektioui o.", 'size': 2}, {'id': '41', 'title': 'CHAN-2024: Le Maroc remporte son troisième titre', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/une/chan-2024-le-maroc-remporte-son-troisieme-titre', 'summary': 'CHAN-2024: Le Maroc remporte son troisième titre. La sélection marocaine des joueurs locaux a remporté son troisième titre du Championnat d’Afrique des nations de football (CHAN-2024), en battant son homologue du Madagascar par 3 buts à 2, en finale samedi au stade international Moi de Kasarani à Nairobi. Les Lions de l’Atlas, déjà sacrés en 2018 et 2020, se sont imposés grâce .', 'size': 4}, {'id': '61', 'title': 'CHAN-2024 (Finale) : Le Maroc bat Madagascar (3-2) et remporte son troisième titre', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/chan-2024-finale-le-maroc-bat-madagascar-3-2-et-remporte-son-troisieme-titre.html', 'summary': 'CHAN-2024 (Finale) : Le Maroc bat Madagascar (3-2) et remporte son troisième titre. La sélection marocaine des joueurs locaux a remporté son troisième titre du Championnat d’Afrique des nations de football (CHAN-2024), en battant son homologue du Madagascar par 3 buts à 2, en finale samedi au stade international Moi de Kasarani à Nairobi. Les Lions de l’Atlas, déjà sacrés en 2018 et 2020, se sont imposés grâce . L’article est apparu en premier sur .', 'size': 3}, {'id': '62', 'title': 'CHAN 2025 : le Maroc sacré pour la troisième fois, un record historique', 'source': 'lnt.ma', 'link': 'https://lnt.ma/chan-2025-le-maroc-sacre-pour-la-troisieme-fois-un-record-historique/', 'summary': 'CHAN 2025 : le Maroc sacré pour la troisième fois, un record historique. Les Lions de l’Atlas ont réussi l’exploit historique de remporter leur troisième titre du Championnat d’Afrique des nations de football (CHAN), en battant lors d’une finale haletante, le Madagascar, sur le score de 3 buts à 2, samedi soir au stade international Moi de Kasarani à Nairobi, signant ainsi un record absolu de cette compétition . ', 'size': 5}], 'main_title': 'CHAN 2025 : le Maroc sacré pour la troisième fois, un record historique'}, {'community_id': '5', 'articles': [{'id': '29', 'title': 'Nairobi: la Fondation Mohammed VI des Ouléma Africains organise les éliminatoires du concours du Hadith Nabawi Acharif', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Nairobi-la-Fondation-Mohammed-VI-des-Oulema-Africains-organise-les-eliminatoires-du-concours-du-Hadith-Nabawi-Acharif_a71239.html', 'summary': 'Nairobi: la Fondation Mohammed VI des Ouléma Africains organise les éliminatoires du concours du Hadith Nabawi Acharif. La section de la Fondation Mohammed VI des Ouléma Africains au Kenya a organisé, samedi à Nairobi, les éliminatoires de la 2e édition du concours de la Fondation du Hadith Nabawi Acharif.', 'size': 2}, {'id': '59', 'title': 'Kenya: la Fondation Mohammed VI des Ouléma Africains organise les éliminatoires du 2e concours du Hadith Nabawi Acharif', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/kenya-la-fondation-mohammed-vi-des-oulema-africains-organise-les-eliminatoires-du-2e-concours-du-hadith-nabawi-acharif.html', 'summary': 'Kenya: la Fondation Mohammed VI des Ouléma Africains organise les éliminatoires du 2e concours du Hadith Nabawi Acharif. La section de la Fondation Mohammed VI des Ouléma Africains au Kenya a organisé, samedi à Nairobi, les éliminatoires de la 2e édition du concours de la Fondation du Hadith Nabawi Acharif. Un total de 22 candidats et candidates issus des différentes régions du Kenya ont participé à ce concours, qui s’est déroulé au Collège . L’article est apparu en premier sur .', 'size': 2}], 'main_title': 'Nairobi: la Fondation Mohammed VI des Ouléma Africains organise les éliminatoires du concours du Hadith Nabawi Acharif'}, {'community_id': '8', 'articles': [{'id': '32', 'title': "L'AMPPS interdit les produits cosmétiques contenant du TPO", 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/L-AMPPS-interdit-les-produits-cosmetiques-contenant-du-TPO_a71236.html', 'summary': "L'AMPPS interdit les produits cosmétiques contenant du TPO. L’Agence marocaine du médicament et des produits de santé (AMMPS) a annoncé l’interdiction de la mise sur le marché, la fabrication, l'importation, la distribution et l’utilisation des produits cosmétiques contenant de l'Oxyde de Diphényl Triméthylbenzoyl Phosphine, connu sous le nom de TPO.", 'size': 2}, {'id': '54', 'title': 'Interdiction des produits cosmétiques contenant du TPO (AMMPS)', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/interdiction-des-produits-cosmetiques-contenant-du-tpo-ammps/', 'summary': 'Interdiction des produits cosmétiques contenant du TPO (AMMPS). L’Agence marocaine du médicament et des produits de santé (AMMPS) a annoncé l’interdiction de la mise sur le marché, la fabrication, l’importation, la distribution et l’utilisation des produits cosmétiques contenant de l’Oxyde de Diphényl Triméthylbenzoyl Phosphine, connu sous le nom de TPO. Dans un communiqué, l’AMMPS porte à la connaissance des professionnels de santé, des .', 'size': 2}], 'main_title': "L'AMPPS interdit les produits cosmétiques contenant du TPO"}, {'community_id': '6', 'articles': [{'id': '46', 'title': 'Baisse de 11 % des investissements directs étrangers au niveau mondial', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/baisse-de-11-des-investissements-directs-etrangers-au-niveau-mondial/', 'summary': 'Baisse de 11 % des investissements directs étrangers au niveau mondial. Les investissements directs étrangers (IDE) ont accusé une baisse de 11 % au niveau mondial, selon le Rapport sur les investissements dans le monde 2025, publié par ONU commerce et développement (CNUCED). Il s’agit de la deuxième année consécutive de baisse des IDE, souligne le rapport cité par un communiqué de la CNUCED, notant que .', 'size': 2}, {'id': '65', 'title': 'Baisse de 11 % des IDE au niveau mondial', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/439361-baisse-de-11-des-ide-au-niveau-mondial.html', 'summary': 'Baisse de 11 % des IDE au niveau mondial. Un récent rapport d’ONU commerce et développement (CNUCED), fait savoir que les investissements directs étrangers (IDE) ont accusé une baisse de 11 % au niveau mondial, selon le Rapport sur les investissements dans le monde 2025. Il s’agit de la deuxième année consécutive de baisse des IDE, souligne le rapport cité par un communiqué de . ', 'size': 2}], 'main_title': 'Baisse de 11 % des investissements directs étrangers au niveau mondial'}, {'community_id': '1', 'articles': [{'id': '50', 'title': 'Le Japon envisage de fixer un cap au nombre d’étrangers', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/le-japon-envisage-de-fixer-un-cap-au-nombre-detrangers/', 'summary': 'Le Japon envisage de fixer un cap au nombre d’étrangers. Le Japon doit revoir en profondeur sa politique à l’égard des résidents étrangers et envisager l’introduction éventuelle d’un plafond, préconise un rapport gouvernemental publié samedi. Le document, présenté par le ministre de la Justice Keisuke Suzuki, souligne l’absence de stratégie unifiée concernant les étrangers et appelle à examiner l’impact social, les risques de tensions et .', 'size': 2}, {'id': '57', 'title': 'Le Japon envisage de fixer un cap au nombre d’étrangers (rapport)', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/le-japon-envisage-de-fixer-un-cap-au-nombre-detrangers-rapport.html', 'summary': 'Le Japon envisage de fixer un cap au nombre d’étrangers (rapport). Le Japon doit revoir en profondeur sa politique à l’égard des résidents étrangers et envisager l’introduction éventuelle d’un plafond, préconise un rapport gouvernemental publié samedi. Le document, présenté par le ministre de la Justice Keisuke Suzuki, souligne l’absence de stratégie unifiée concernant les étrangers et appelle à examiner l’impact social, les risques de tensions et . L’article est apparu en premier sur .', 'size': 2}], 'main_title': 'Le Japon envisage de fixer un cap au nombre d’étrangers'}, {'community_id': '0', 'articles': [{'id': '51', 'title': 'La Chine et l’Inde affichent leur volonté de rapprochement', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/la-chine-et-linde-affichent-leur-volonte-de-rapprochement/', 'summary': 'La Chine et l’Inde affichent leur volonté de rapprochement. Le président chinois Xi Jinping et le Premier ministre indien Narendra Modi ont exprimé dimanche leur volonté de rapprochement lors d’une rencontre en marge du sommet de l’Organisation de coopération de Shanghai (OCS) à Tianjin, dans le nord de la Chine. « Nous sommes les deux pays les plus peuplés du monde et faisons partie du .', 'size': 2}, {'id': '55', 'title': 'Sommet OCS : La guerre commerciale américaine, catalyseur d’un rapprochement Chine-Inde?', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/sommet-ocs-la-guerre-commerciale-americaine-catalyseur-dun-rapprochement-chine-inde-monde.html', 'summary': 'Sommet OCS : La guerre commerciale américaine, catalyseur d’un rapprochement Chine-Inde?. Le Premier ministre indien Narendra Modi est arrivé samedi dans la ville chinoise de Tianjin (nord) pour participer au sommet de l’Organisation de coopération de Shanghai (OCS), marquant sa première visite dans le pays depuis sept ans. Ce premier déplacement de M. Modi en Chine depuis 2018 laisse entrevoir une possible évolution favorable des relations . L’article est apparu en premier sur .', 'size': 2}], 'main_title': 'La Chine et l’Inde affichent leur volonté de rapprochement'}, {'community_id': '7', 'articles': [{'id': '69', 'title': "Eliesse Ben Seghir s'engage au Bayer Leverkusen jusqu'en 2030", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/439389-eliesse-ben-seghir-sengage-au-bayer-leverkusen-jusquen-2030.html', 'summary': "Eliesse Ben Seghir s'engage au Bayer Leverkusen jusqu'en 2030. L’international marocain Eliesse Ben Seghir s’est engagé dimanche avec le Bayer Leverkusen pour cinq saisons jusqu’au 30 juin 2030, après deux saisons et demie à l’AS Monaco, ont annoncé les deux clubs. Le montant de la transaction n’a pas été révélé, mais selon des sources proches du club monégasque, elle s’élève à 32 millions d’euros . ", 'size': 2}, {'id': '74', 'title': 'C’est Officiel : Eliesse Ben Seghir file à Leverkusen', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/C-est-Officiel-Eliesse-Ben-Seghir-file-a-Leverkusen_a71250.html', 'summary': "C’est Officiel : Eliesse Ben Seghir file à Leverkusen. C’est officiel : Eliesse Ben Seghir quitte Monaco pour rejoindre le Bayer Leverkusen. Le lion de l'Atlas de 20 ans signe jusqu’en 2030 et disputera la Ligue des Champions.", 'size': 2}], 'main_title': "Eliesse Ben Seghir s'engage au Bayer Leverkusen jusqu'en 2030"}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
                        
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ? d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        // Fonction pour cacher le tooltip
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = '';
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
    
    
</body>




</html>
    