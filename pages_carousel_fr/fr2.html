<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); 
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title"> Les principales actualités des dernières 24 heures

</div>    
        <div class="header-subtitle"> Dernière mise à jour : 07/08/2025 - 06h35</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"></div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '14', 'title': 'Semaine de l’investissement pour les Marocains du monde, du 11 au 15 août', 'source': 'lematin.ma', 'link': 'https://lematin.ma/economie/semaine-de-linvestissement-pour-les-marocains-du-monde-du-11-au-15-aout/295315', 'summary': 'Semaine de l’investissement pour les Marocains du monde, du 11 au 15 août. Cette initiative s’inscrit dans la mise en œuvre des Hautes Orientations de Sa Majesté le Roi Mohammed VI, qui accorde une importance particulière à la mobilisation des Marocains d.', 'size': 2}, {'id': '191', 'title': 'Semaine de l’investissement pour la diaspora marocaine du 11 au 15 août', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/semaine-de-linvestissement-pour-la-diaspora-marocaine-du-11-au-15-aout.html', 'summary': 'Semaine de l’investissement pour la diaspora marocaine du 11 au 15 août. Le ministère de l’Investissement, de la Convergence et de l’Évaluation des Politiques Publiques, organise du 11 au 15 août, une semaine dédiée aux Marocains du Monde (MDM) dans les 12 Centres Régionaux d’Investissement (CRI) du Royaume. Cette initiative s’inscrit dans la mise en œuvre des Hautes Orientations de Sa Majesté le Roi Mohammed VI, qui . L’article est apparu en premier sur .', 'size': 2}], 'main_title': 'Semaine de l’investissement pour les Marocains du monde, du 11 au 15 août'}, {'community_id': '1', 'articles': [{'id': '38', 'title': 'Le Maroc élu vice-président de la 3e Conférence des Nations Unies sur les pays en développement sans littoral', 'source': 'lematin.ma', 'link': 'https://lematin.ma/nation/le-maroc-vice-president-de-la-conference-des-nations-unies-sur-les-lldcs/295147', 'summary': 'Le Maroc élu vice-président de la 3e Conférence des Nations Unies sur les pays en développement sans littoral. L’annonce a été faite lors d’une session plénière des délégations participantes à cette conférence (05-08 août), à laquelle le Maroc sera parmi les pays représentant le continent a.', 'size': 2}, {'id': '146', 'title': 'Le Maroc vice-président de la 3è Conférence onusienne sur les pays en développement sans littoral', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/pouvoirs/diplomatie/le-maroc-vice-president-de-la-3e-conference-onusienne-sur-les-pays-en-developpement-sans-littoral/', 'summary': 'Le Maroc vice-président de la 3è Conférence onusienne sur les pays en développement sans littoral. L’annonce de la vice-présidence du Royaume, en la personne de Omar Hilale, a été faite lors d’une session plénière des délégations participantes à cette conférence (05-08 août), à laquelle le Maroc sera parmi les pays représentant le continent africain.', 'size': 2}], 'main_title': 'Le Maroc élu vice-président de la 3e Conférence des Nations Unies sur les pays en développement sans littoral'}, {'community_id': '2', 'articles': [{'id': '69', 'title': "L'aide humanitaire marocaine aura “un impact tangible sur les habitants de Gaza”, selon un ministre palestinien", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/06/laide-humanitaire-marocaine-aura-un-impact-tangible-sur-les-habitants-de-gaza-selon-un-ministre-palestinien_1945507/', 'summary': "L'aide humanitaire marocaine aura “un impact tangible sur les habitants de Gaza”, selon un ministre palestinien. L’aide humanitaire et médicale urgente, envoyée sur instructions du roi Mohammed VI, président du Comité Al-Qods, en faveur du peuple palestinien, en particulier à la population de Gaza, aura “un impact tangible sur les habitants de Gaza”, a affirmé le ministre en charge de l’information officielle palestinienne, Ahmed Assaf. Dans une déclaration à la MAP,.", 'size': 4}, {'id': '154', 'title': 'L’aide humanitaire et médicale marocaine aura un impact concret à Gaza', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/laide-humanitaire-et-medicale-marocaine-aura-un-impact-concret-a-gaza/', 'summary': 'L’aide humanitaire et médicale marocaine aura un impact concret à Gaza. L’aide humanitaire et médicale urgente, envoyée sur Très Hautes Instructions de Sa Majesté le Roi Mohammed VI, Président du Comité Al-Qods, en faveur du peuple palestinien, en particulier à la population de Gaza, aura un impact positif tangible sur les habitants de cette enclave palestinienne, a affirmé le ministre en charge de l’information officielle palestinienne, .', 'size': 4}, {'id': '199', 'title': "Gaza: l'aide marocaine fortement appréciée", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/436734-gaza-laide-marocaine-fortement-appreciee.html', 'summary': "Gaza: l'aide marocaine fortement appréciée. L’aide humanitaire et médicale urgente, envoyée sur Très Hautes Instructions du Roi Mohammed VI, Président du Comité Al-Qods, en faveur du peuple palestinien, en particulier à la population de Gaza, aura un impact positif tangible sur les habitants de cette enclave palestinienne, a affirmé le ministre en charge de l’information officielle palestinienne, Ahmed Assaf. Dans . ", 'size': 4}, {'id': '226', 'title': 'Pour le ministre palestinien de l’information : L’aide humanitaire marocaine aura un impact tangible sur les habitants de Gaza', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/societe/pour-le-ministre-palestinien-de-linformation-laide-humanitaire-marocaine-aura-un-impact-tangible-sur-les-habitants-de-gaza', 'summary': 'Pour le ministre palestinien de l’information : L’aide humanitaire marocaine aura un impact tangible sur les habitants de Gaza. Solidarité : L’aide humanitaire et médicale urgente, envoyée sur Hautes Instructions de Sa Majesté le Roi Mohammed VI, Président du Comité Al-Qods, en faveur du peuple palestinien, en particulier à la population de Gaza, aura un impact positif tangible sur les habitants de cette enclave palestinienne, a affirmé le ministre en charge de l’information officielle .', 'size': 4}], 'main_title': "L'aide humanitaire marocaine aura “un impact tangible sur les habitants de Gaza”, selon un ministre palestinien"}, {'community_id': '3', 'articles': [{'id': '70', 'title': 'Foot : le tirage au sort des compétitions interclubs de la CAF, samedi en Tanzanie', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/06/foot-le-tirage-au-sort-des-competitions-interclubs-de-la-caf-samedi-en-tanzanie_1945505/', 'summary': 'Foot : le tirage au sort des compétitions interclubs de la CAF, samedi en Tanzanie. Le tirage au sort préliminaire des compétitions interclubs TotalEnergies de la Confédération africaine de football (CAF) se tiendra samedi prochain à Dar es Salam (Tanzanie), a annoncé mercredi la Confédération dans un communiqué. Ce tirage au sort marquera le lancement officiel de la saison 2025-2026 des compétitions interclubs de la CAF, dont le calendrier prévoit.', 'size': 2}, {'id': '157', 'title': 'Tirage au sort des compétitions interclubs de la CAF ce samedi à Dar es Salam', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/tirage-au-sort-des-competitions-interclubs-de-la-caf-ce-samedi-a-dar-es-salam/', 'summary': 'Tirage au sort des compétitions interclubs de la CAF ce samedi à Dar es Salam. Le tirage au sort préliminaire des compétitions interclubs TotalEnergies de la Confédération africaine de football (CAF) se tiendra, samedi prochain à Dar es Salam (Tanzanie), a annoncé mercredi la Confédération dans un communiqué. Ce tirage au sort marquera le lancement officiel de la saison 2025/26 des compétitions interclubs de la CAF, dont le calendrier prévoit .', 'size': 2}], 'main_title': 'Foot : le tirage au sort des compétitions interclubs de la CAF, samedi en Tanzanie'}, {'community_id': '7', 'articles': [{'id': '72', 'title': 'Vague de chaleur et averses orageuses, de mercredi à dimanche, dans plusieurs provinces du Royaume', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/06/vague-de-chaleur-et-averses-orageuses-de-mercredi-a-dimanche-dans-plusieurs-provinces-du-royaume_1945453/', 'summary': 'Vague de chaleur et averses orageuses, de mercredi à dimanche, dans plusieurs provinces du Royaume. Une vague de chaleur, avec des températures oscillant entre 40 et 47°C, et des averses orageuses accompagnées de chutes de grêle et rafales de vent sous orages sont attendues de mercredi à dimanche dans plusieurs provinces du Royaume, a annoncé la Direction générale de la météorologie (DGM) dans un bulletin d’alerte de niveau de vigilance.', 'size': 4}, {'id': '92', 'title': 'Alerte. Vague de chaleur et averses orageuses jusqu’à la fin de la semaine', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/alerte-vague-de-chaleur-et-averses-orageuses-jusqua-la-fin-de-la-semaine-308152/', 'summary': 'Alerte. Vague de chaleur et averses orageuses jusqu’à la fin de la semaine. Une vague de chaleur, avec des températures oscillant entre 40 et 47°C, et des averses orageuses accompagnées de chutes de grêle et rafales de vent sous orages sont attendues de mercredi à dimanche dans plusieurs provinces du Royaume, a annoncé la Direction générale de la météorologie (DGM) dans un bulletin', 'size': 4}, {'id': '110', 'title': "Maroc : Averses et jusqu'à 47°\xa0de mercredi à dimanche", 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/173627/maroc-averses-jusqu-a-mercredi-dimanche.html', 'summary': "Maroc : Averses et jusqu'à 47° de mercredi à dimanche. Une vague de chaleur, avec des températures oscillant entre 40 et 47°C, et des averses orageuses accompagnées de chutes de grêle et rafales de vent sous orages sont attendues de mercredi à dimanche dans plusieurs provinces du Maroc, a annoncé la Direction générale de la météorologie (DGM) dans un bulletin d’alerte de niveau de vigilance orange.", 'size': 4}, {'id': '151', 'title': 'Vague de chaleur et orages attendus de mercredi à dimanche dans plusieurs provinces du Royaume', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/vague-de-chaleur-et-orages-attendus-de-mercredi/', 'summary': 'Vague de chaleur et orages attendus de mercredi à dimanche dans plusieurs provinces du Royaume. Une vague de chaleur, avec des températures oscillant entre 40 et 47°C, et des averses orageuses accompagnées de chutes de grêle et rafales de vent sous orages sont attendues de mercredi à dimanche dans plusieurs provinces du Royaume, a annoncé la Direction générale de la météorologie (DGM) dans un bulletin d’alerte de niveau de vigilance .', 'size': 4}], 'main_title': 'Vague de chaleur et averses orageuses, de mercredi à dimanche, dans plusieurs provinces du Royaume'}, {'community_id': '5', 'articles': [{'id': '77', 'title': 'France : un Marocain accusé d’avoir profané la flamme du Soldat inconnu va perdre son titre de séjour', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/06/france-un-marocain-accuse-davoir-profane-la-flamme-du-soldat-inconnu-va-perdre-son-titre-de-sejour_1945438/', 'summary': 'France : un Marocain accusé d’avoir profané la flamme du Soldat inconnu va perdre son titre de séjour. Un geste qui provoque une onde de choc politique et médiatique en France. Selon les informations exclusives d’Europe 1, le ministre français de l’Intérieur, Bruno Retailleau, a décidé de retirer le titre de séjour à un ressortissant marocain de 47 ans, accusé d’avoir profané la flamme du Soldat inconnu à Paris, un haut lieu symbolique.', 'size': 2}, {'id': '106', 'title': 'France\xa0: Retrait du titre de séjour pour le Marocain qui a profané la tombe du Soldat inconnu', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/173647/france-retrait-titre-sejour-pour.html', 'summary': 'France : Retrait du titre de séjour pour le Marocain qui a profané la tombe du Soldat inconnu. Le ministre français de l’Intérieur, Bruno Retailleau, a décidé de retirer le titre de séjour du ressortissant marocain arrêté pour profanation de la tombe du Soldat inconnu. Révélée par Europe1 et confirmées par Le Figaro, ce mercredi, cette mesure a été prise après le placement en garde à vue du mis en cause, identifié sur une vidéo documentant les faits incriminés.', 'size': 2}], 'main_title': 'France : un Marocain accusé d’avoir profané la flamme du Soldat inconnu va perdre son titre de séjour'}, {'community_id': '6', 'articles': [{'id': '85', 'title': 'Opération Marhaba : un responsable dément les rumeurs de baisse des arrivées de MRE', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/06/operation-marhaba-2025-hausse-de-plus-de-10-des-entrees-de-mre-au-4-aout_1945391/', 'summary': 'Opération Marhaba : un responsable dément les rumeurs de baisse des arrivées de MRE. Un total de 2.789.197 membres de la communauté marocaine résidant à l’étranger sont entrés au pays jusqu’au 4 août courant, enregistrant ainsi une hausse de 10,37% par rapport à 2024, a indiqué mardi Omar Moussa Abdellah, responsable des projets et superviseur de l’opération Marhaba au sein de la Fondation Mohammed V pour la Solidarité. Invité.', 'size': 4}, {'id': '95', 'title': 'Marhaba 2025: les MRE plus nombreux à rentrer au pays, en hausse de 10,3%', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/marhaba-2025-les-mre-plus-nombreux-a-rentrer-au-pays-en-hausse-de-103-308135/', 'summary': 'Marhaba 2025: les MRE plus nombreux à rentrer au pays, en hausse de 10,3%. Depuis le démarrage de l’opération Marhaba, le 10 juin 2025, les chiffres montrent une hausse du nombre des membres de la diaspora marocaine rentrés au pays durant cet été, contrairement aux « rumeurs infondées » colportées sur les réseaux sociaux, assure Omar Moussa Abdellah, responsable des projets et superviseur de l’opération Marhaba', 'size': 3}, {'id': '108', 'title': 'Marhaba 2025 : Plus de 2,78 millions de MRE (+10,37%) accueillis jusqu’au 4 août', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/173632/marhaba-2025-plus-millions-accueillis.html', 'summary': 'Marhaba 2025 : Plus de 2,78 millions de MRE (+10,37%) accueillis jusqu’au 4 août. Un total de 2 789 197 membres de la communauté marocaine résidant à l’étranger sont entrés au pays jusqu’au 4 août courant, enregistrant ainsi une hausse de 10,37% par rapport à 2024, a indiqué mardi Omar Moussa Abdellah, responsable des projets et superviseur de l’opération Marhaba au sein de la Fondation Mohammed V pour la solidarité.', 'size': 4}, {'id': '197', 'title': 'Opération Marhaba 2025 : Les arrivées de MRE en hausse à deux chiffres', 'source': 'lnt.ma', 'link': 'https://lnt.ma/operation-marhaba-2025-les-arrivees-de-mre-en-hausse-a-deux-chiffres/', 'summary': 'Opération Marhaba 2025 : Les arrivées de MRE en hausse à deux chiffres. L’opération Marhaba 2025, coordonnée par la Fondation Mohammed V pour la Solidarité, poursuit son déroulement avec une affluence en hausse significative. Jusqu’au 4 août, 2.789.197 Marocains résidant à l’étranger (MRE) ont rejoint le Royaume par les différents points de passage, soit une progression de 10,37 % par rapport à la même période en 2024. C’est . ', 'size': 3}], 'main_title': 'Opération Marhaba : un responsable dément les rumeurs de baisse des arrivées de MRE'}, {'community_id': '4', 'articles': [{'id': '96', 'title': 'Les prévisions météorologiques du mercredi 6 août 2025', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/les-previsions-meteorologiques-du-mercredi-6-aout-2025-308131/', 'summary': 'Les prévisions météorologiques du mercredi 6 août 2025. Voici les prévisions météorologiques établies par la Direction générale de la météorologie pour le mercredi 6 août 2025 : – Temps chaud sur les plaines intérieures, le Sud du Rif, le Sud-Est et l’intérieur des provinces Sud. – Ondées ou averses orageuses avec rafales de vent et risque de grêle', 'size': 2}, {'id': '198', 'title': "Le temps qu'il fera ce jeudi 7 août 2025", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/436189-le-temps-quil-fera-ce-jeudi-7-aout-2025.html', 'summary': "Le temps qu'il fera ce jeudi 7 août 2025. Voici les prévisions météorologiques établies par la Direction générale de la météorologie pour le jeudi 7 août 2025 – Temps chaud sur l’intérieur des provinces sud et du Souss, le Sud-Est, le Nord de l’Oriental, le Saiss, le Sud du Rif et les plaines à l’Ouest du Haut Atlas. – Instabilités orageuses accompagnées de rafales . ", 'size': 2}], 'main_title': 'Les prévisions météorologiques du mercredi 6 août 2025'}, {'community_id': '8', 'articles': [{'id': '214', 'title': 'France-Algérie: Emmanuel Macron demande à son gouvernement "la suspension formelle" de l\'exemption de visa pour les passeports officiels et diplomatiques', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/France-Algerie-Emmanuel-Macron-demande-a-son-gouvernement-la-suspension-formelle-de-l-exemption-de-visa-pour-les_a70621.html', 'summary': 'France-Algérie: Emmanuel Macron demande à son gouvernement "la suspension formelle" de l\'exemption de visa pour les passeports officiels et diplomatiques. Emmanuel Macron a demandé au gouvernement d\'agir "avec plus de fermeté et de détermination" à l\'égard de l\'Algérie, prenant acte de l\'inflexibilité des autorités algériennes sur les questions migratoires et sur la détention de deux ressortissants français que la France juge arbitraire.', 'size': 3}, {'id': '224', 'title': 'France : Le président Macron met fin à un privilège accordé aux officiels algériens', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/173672/france-president-macron-privilege-accorde.html', 'summary': 'France : Le président Macron met fin à un privilège accordé aux officiels algériens. La France a décidé de mettre un terme à un privilège accordé aux officiels et diplomates algériens. Désormais, ils devront passer par les fourches caudines du système des visas pour pouvoir entrer sur le territoire français.', 'size': 2}, {'id': '231', 'title': 'Macron suspend officiellement «\xa0les exemptions de visa\xa0» pour «\xa0les passeports officiels et diplomatiques\xa0» algériens', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/macron-suspend-officiellement-les-exemptions-de-visa-pour-les-passeports-officiels-et-diplomatiques-algeriens.html', 'summary': 'Macron suspend officiellement « les exemptions de visa » pour « les passeports officiels et diplomatiques » algériens. Dans une lettre adressée au Premier ministre François Bayrou que le Figaro a dévoilé mercredi, le chef de l’État français met l’accent sur les « difficultés croissantes » avec le régime d’Alger et charge le gouvernement de « prendre des décisions supplémentaires », notamment la suspension officielle de l’accord de 2013 sur « les exemptions de visa » pour « les . L’article est apparu en premier sur .', 'size': 2}], 'main_title': 'France-Algérie: Emmanuel Macron demande à son gouvernement "la suspension formelle" de l\'exemption de visa pour les passeports officiels et diplomatiques'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
                        
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ? d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        // Fonction pour cacher le tooltip
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = '';
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
    
    
</body>




</html>
    