<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); 
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title"> Les principales actualités des dernières 24 heures

</div>    
        <div class="header-subtitle"> Dernière mise à jour : 13/10/2025 - 06h10</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"></div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '0', 'title': 'Deux universitaires japonais plaident pour une approche lucide et sécuritaire du dossier du Sahara à l’ONU', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/445065-deux-universitaires-japonais-plaident-pour-une-approche-lucide-et-securitaire-du-dossier-du-sahara-a-lonu.html', 'summary': 'Deux universitaires japonais plaident pour une approche lucide et sécuritaire du dossier du Sahara à l’ONU. Deux professeurs japonais, Kei Nakagawa et Shoji Matsumoto, ont appelé, devant la 4e Commission de l’Assemblée générale des Nations Unies, à adopter une lecture rationnelle et dépassionnée de la question du Sahara marocain, rompant avec les discours idéologiques et les automatismes diplomatiques hérités du passé. La professeure Kei Nakagawa, présidente de l’Université Hagoromo au Japon, . ', 'size': 2}, {'id': '98', 'title': '4è Commission de l’AG de l’ONU: deux éminents professeurs japonais défendent une approche rationnelle et pacifique de la question du Sahara', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/4e-commission-de-lag-de-lonu-deux-eminents-professeurs-japonais-defendent-une-approche-rationnelle-et-pacifique-de-la-question-du-sahara.html', 'summary': '4è Commission de l’AG de l’ONU: deux éminents professeurs japonais défendent une approche rationnelle et pacifique de la question du Sahara. Deux voix japonaises, celles de la professeure Kei Nakagawa et du professeur Shoji Matsumoto, se sont élevées à la 4è Commission de l’Assemblée générale de l’ONU pour inviter la communauté internationale à un regard lucide et dépassionné sur la question du Sahara. Leur message converge : il est temps de rompre avec les discours idéologiques . L’article est apparu en premier sur .', 'size': 2}], 'main_title': 'Deux universitaires japonais plaident pour une approche lucide et sécuritaire du dossier du Sahara à l’ONU'}, {'community_id': '1', 'articles': [{'id': '18', 'title': 'Glory 104 : Tarik Khbabez récupère son titre mondial des poids mi-lourds', 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/glory-104-tarik-khbabez-recupere-son-titre-mondial-des-poids-mi-lourds/307125', 'summary': "Glory 104 : Tarik Khbabez récupère son titre mondial des poids mi-lourds. La RTM Stage de Rotterdam a été le théâtre d'un affrontement mémorable lors du GLORY 104. Tarik Khbabez (53-12-1, 28 KO) a affronté l'Azerbaïdjanais Bahram Rajabzadeh (72-6.", 'size': 2}, {'id': '47', 'title': 'Kickboxing : Tarik Khbabez reprend son titre mondial au Glory 104 à Rotterdam', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/178594/kickboxing-tarik-khbabez-reprend-titre.html', 'summary': 'Kickboxing : Tarik Khbabez reprend son titre mondial au Glory 104 à Rotterdam. Le champion marocain Tarik Khbabez a repris son titre mondial dans la catégorie des poids mi-lourds de kickboxing, après une victoire contre lAzerbaïdjanais Bahram Rajabzadeh, lors du Glory 104 qui sest déroulé à Rotterdam, aux Pays-Bas.', 'size': 2}], 'main_title': 'Glory 104 : Tarik Khbabez récupère son titre mondial des poids mi-lourds'}, {'community_id': '2', 'articles': [{'id': '24', 'title': 'L’Égypte annonce de nouvelles facilités d’entrée pour les Marocains', 'source': 'lematin.ma', 'link': 'https://lematin.ma/societe/legypte-annonce-de-nouvelles-facilites-dentree-pour-les-marocains/307028', 'summary': 'L’Égypte annonce de nouvelles facilités d’entrée pour les Marocains. Selon un communiqué de l’ambassade d’Égypte à Rabat, les Marocains titulaires de visas ou de titres de séjour valides délivrés par les pays suivants : les États-Unis, le Royaume-Un.', 'size': 2}, {'id': '31', 'title': 'Visas : L’Égypte assouplit les conditions d’entrée pour les Marocains', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Visas-L-Egypte-assouplit-les-conditions-d-entree-pour-les-Marocains_a72755.html', 'summary': 'Visas : L’Égypte assouplit les conditions d’entrée pour les Marocains. De nouvelles mesures d’entrée en Égypte sont entrées en vigueur afin de permettre aux citoyens marocains, notamment ceux détenteurs d’un titre de séjour ou d’un visa préalablement délivré par certains pays, d’obtenir un visa à leur arrivée en Egypte.', 'size': 2}, {'id': '50', 'title': 'Nouvelles facilités de visa pour les Marocains voyageant en Égypte', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/178588/nouvelles-facilites-visa-pour-marocains.html', 'summary': 'Nouvelles facilités de visa pour les Marocains voyageant en Égypte. Lambassade dÉgypte à Rabat a récemment dévoilé de nouvelles mesures pour faciliter laccès des Marocains au territoire égyptien.', 'size': 3}], 'main_title': 'Nouvelles facilités de visa pour les Marocains voyageant en Égypte'}, {'community_id': '3', 'articles': [{'id': '25', 'title': 'Sommet pour la paix à Gaza lundi en Egypte, présidé par Trump et Al-Sissi', 'source': 'lematin.ma', 'link': 'https://lematin.ma/monde/sommet-pour-la-paix-a-gaza-lundi-en-egypte-preside-par-trump-et-al-sissi/307033', 'summary': 'Sommet pour la paix à Gaza lundi en Egypte, présidé par Trump et Al-Sissi. Le sommet se tiendra sous la coprésidence du président égyptien Abdel Fattah Al-Sissi et du président américain Donald Trump, avec la participation de dirigeants de plus de vingt p.', 'size': 2}, {'id': '68', 'title': 'Charm el-Cheikh : les présidents égyptien et américain coprésident lundi un sommet international pour mettre fin à la guerre à Gaza', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/charm-el-cheikh-les-presidents-egyptien-et-americain-copresident-lundi-un-sommet-international-pour-mettre/', 'summary': 'Charm el-Cheikh : les présidents égyptien et américain coprésident lundi un sommet international pour mettre fin à la guerre à Gaza. La présidence égyptienne a annoncé, samedi soir, la tenue lundi prochain à Charm el-Cheikh d’un sommet international intitulé « Sommet de Charm el-Cheikh pour la paix », visant à mettre fin à la guerre dans la bande de Gaza. Le sommet se tiendra sous la coprésidence du président égyptien Abdel Fattah Al-Sissi et du président américain Donald .', 'size': 2}], 'main_title': 'Sommet pour la paix à Gaza lundi en Egypte, présidé par Trump et Al-Sissi'}, {'community_id': '4', 'articles': [{'id': '49', 'title': 'CAN 2025 : Ouverture de la billetterie à partir du 13 octobre (CAF)', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/178589/2025-ouverture-billetterie-partir-octobre.html', 'summary': 'CAN 2025 : Ouverture de la billetterie à partir du 13 octobre (CAF). La vente des billets pour la Coupe d’Afrique des nations (CAN Maroc 2025) débutera lundi 13 octobre 2025 à partir de 9h00 (8h00 GMT), a annoncé samedi la Confédération Africaine de Football (CAF). Selon un communiqué, une fenêtre exclusive de 48 heures est réservée aux détenteurs de cartes VISA, du 13 au 15 courant.', 'size': 2}, {'id': '67', 'title': 'Lancement lundi prochain de l’opération de vente des billets pour la CAN Maroc-2025', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/lancement-lundi-prochain-de-loperation-de-vente-des-billets-pour-la-can-maroc-2025/', 'summary': 'Lancement lundi prochain de l’opération de vente des billets pour la CAN Maroc-2025. La vente des billets pour la Coupe d’Afrique des Nations (CAN) Maroc-2025, plus grand événement sportif du continent, débutera lundi 13 octobre 2025, a annoncé samedi la Confédération Africaine de Football (CAF). Selon un communiqué de la CAF, l’opération de vente des billets pour CAN Maroc-2025 sera lancée à partir de 09h00 (08h00 GMT), avec .', 'size': 2}], 'main_title': 'CAN 2025 : Ouverture de la billetterie à partir du 13 octobre (CAF)'}, {'community_id': '5', 'articles': [{'id': '76', 'title': 'Mondial U20 : les Lionceaux de l’Atlas continuent d’écrire l’histoire et accèdent au carré d’As', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/445104-mondial-u20-les-lionceaux-de-latlas-continuent-decrire-lhistoire-et-accedent-au-carre-das.html', 'summary': 'Mondial U20 : les Lionceaux de l’Atlas continuent d’écrire l’histoire et accèdent au carré d’As. La sélection marocaine des moins de 20 ans monte en puissance au Chili. Les lionceaux ont validé leur ticket pour le carré d’as de la Coupe du monde de la catégorie, en battant une solide équipe des USA (3-1) ce dimanche au stade El Teniente, à Rancagua. Les buts de la rencontre ont été inscrits . ', 'size': 2}, {'id': '81', 'title': '(Images) Coupe du monde U20 : le Maroc domine les États-Unis (3-1) et file en demi-finales !', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Images-Coupe-du-monde-U20-le-Maroc-domine-les-Etats-Unis-3-1-et-file-en-demi-finales-_a72765.html', 'summary': '(Images) Coupe du monde U20 : le Maroc domine les États-Unis (3-1) et file en demi-finales !. La sélection marocaine des moins de 20 ans de football s’est qualifiée pour les demi-finales de la Coupe du Monde U-20, qui se déroule actuellement au Chili, après avoir battu son homologue américaine (3-1) en quart de finale, disputé dimanche soir au stade El Teniente de Rancagua (87 km au sud de Santiago).', 'size': 3}, {'id': '89', 'title': 'Coupe du Monde U-20 au Chili : le Maroc s’impose face aux Etats-Unis (3-1) et file demi-finales', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/178609/coupe-monde-u-20-chili-maroc.html', 'summary': 'Coupe du Monde U-20 au Chili : le Maroc s’impose face aux Etats-Unis (3-1) et file demi-finales. Les Lionceaux continuent de rugir en Amérique. La sélection marocaine des moins de 20 ans sest qualifiée pour les demi-finales de la Coupe du Monde U-20 au Chili après une victoire convaincante contre les États-Unis, avec un score de 3-1.', 'size': 2}, {'id': '91', 'title': 'Coupe du Monde U-20 au Chili : le Maroc s’impose face aux États-Unis et se qualifie pour les demi-finales', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/une/coupe-du-monde-u-20-au-chili-le-maroc-simpose-face-aux-etats-unis-et-se-qualifie-pour-les-demi-finales', 'summary': 'Coupe du Monde U-20 au Chili : le Maroc s’impose face aux États-Unis et se qualifie pour les demi-finales. La sélection marocaine des moins de 20 ans de football s’est qualifiée pour les demi-finales de la Coupe du Monde U-20, qui se déroule actuellement au Chili, après avoir battu son homologue américaine (3-1) en quart de finale, disputé dimanche soir au stade El Teniente de Rancagua (87 km au sud de Santiago). L’équipe marocaine .', 'size': 3}], 'main_title': '(Images) Coupe du monde U20 : le Maroc domine les États-Unis (3-1) et file en demi-finales !'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
                        
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ? d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        // Fonction pour cacher le tooltip
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = '';
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
    
    
</body>




</html>
    