<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); 
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title"> Les principales actualités des dernières 24 heures

</div>    
        <div class="header-subtitle"> Dernière mise à jour : 25/08/2025 - 12h28</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"></div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '0', 'title': "Le temps qu'il fera ce lundi 25 août 2025", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/438553-le-temps-quil-fera-ce-lundi-25-aout-2025.html', 'summary': "Le temps qu'il fera ce lundi 25 août 2025. Voici les prévisions météorologiques établies par la Direction générale de la météorologie pour le lundi 25 août 2025 – Temps assez chaud sur le Sud-Est et l’extrême Sud du pays. – Ondées et orages par endroits sur le Nord-Ouest, le Rif, le Saiss, la rive méditerranéenne, le Moyen Atlas et l’Oriental. – Gouttes de pluie . ", 'size': 2}, {'id': '115', 'title': 'Les prévisions du lundi 25 août 2025', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/les-previsions-du-lundi-25-aout-2025-308987/', 'summary': 'Les prévisions du lundi 25 août 2025. Voici les prévisions météorologiques établies par la Direction générale de la météorologie pour le lundi 25 août 2025: – Temps assez chaud sur le Sud-Est et l’extrême Sud du pays. – Ondées et orages par endroits sur le Nord-Ouest, le Rif, le Saiss, la rive méditerranéenne, le Moyen Atlas et', 'size': 2}], 'main_title': "Le temps qu'il fera ce lundi 25 août 2025"}, {'community_id': '1', 'articles': [{'id': '1', 'title': 'Le dirham s’apprécie de 0,2% face à l’euro', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/438558-le-dirham-sapprecie-de-02-face-a-leuro-2.html', 'summary': 'Le dirham s’apprécie de 0,2% face à l’euro. Le dirham s’est apprécié de 0,2% face à l’euro et s’est déprécié de 0,1% vis-à-vis du dollar américain durant la période du 13 au 19 août 2025, selon Bank Al-Maghrib (BAM). Au cours de cette période, aucune opération d’adjudication n’a été réalisée sur le marché des changes, précise BAM dans son récent bulletin des indicateurs . ', 'size': 2}, {'id': '130', 'title': 'Réserves internationales : 408,1 milliards de dirhams relevés par Bank Al-Maghrib à mi-août', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/economie/reserves-internationales-4081-milliards-de-dirhams-releves-par-bank-al-maghrib-a-mi-aout', 'summary': 'Réserves internationales : 408,1 milliards de dirhams relevés par Bank Al-Maghrib à mi-août. Marché des changes Le dirham s’est apprécié de 0,2% face à l’euro et s’est déprécié de 0,1% vis-à-vis du dollar américain durant la période du 13 au 19 août 2025. C’est ce que l’on peut relever du récent bulletin statistique de Bank Al-Maghrib (BAM). « Au cours de cette période, aucune opération d’adjudication n’a été réalisée .', 'size': 2}], 'main_title': 'Le dirham s’apprécie de 0,2% face à l’euro'}, {'community_id': '2', 'articles': [{'id': '2', 'title': 'Port d’Essaouira : Baisse de 30% des débarquements de la pêche à fin juillet', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/438559-port-dessaouira-baisse-de-30-des-debarquements-de-la-peche-a-fin-juillet.html', 'summary': 'Port d’Essaouira : Baisse de 30% des débarquements de la pêche à fin juillet. Les débarquements des produits de la pêche côtière et artisanale au niveau du port d’Essaouira ont enregistré, durant les sept premiers mois de l’année en cours, une baisse de 30% en poids et de 1% en valeur, selon l’Office national des pêches (ONP). Les quantités débarquées dans ce port se sont établies à fin juillet . ', 'size': 3}, {'id': '45', 'title': 'Port d’Essaouira: les prises des bateaux baissent lourdement à fin juillet', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/port-dessaouira-les-prises-des-bateaux-baissent-lourdement-a-fin-juillet-308976/', 'summary': 'Port d’Essaouira: les prises des bateaux baissent lourdement à fin juillet. Les débarquements des produits de la pêche côtière et artisanale au niveau du port d’Essaouira ont enregistré, durant les sept premiers mois de l’année en cours, une baisse de 30% en poids et de 1% en valeur, selon l’Office national des pêches (ONP). Les quantités débarquées dans ce port se', 'size': 3}, {'id': '109', 'title': 'Port d’Essaouira : baisse de 30% des débarquements de la pêche à fin juillet', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/25/port-dessaouira-baisse-de-30-des-debarquements-de-la-peche-a-fin-juillet_1947384/', 'summary': 'Port d’Essaouira : baisse de 30% des débarquements de la pêche à fin juillet. Le port d’Essaouira fait face à un recul de ses débarquements de pêche durant les sept premiers mois de 2025, avec une chute de 30% des volumes malgré une valeur quasi stable. Cette baisse s’inscrit dans une tendance nationale où la pêche côtière et artisanale marocaine affiche un repli de 16% en tonnage et de.', 'size': 3}], 'main_title': 'Port d’Essaouira : Baisse de 30% des débarquements de la pêche à fin juillet'}, {'community_id': '3', 'articles': [{'id': '5', 'title': 'Roi Mohammed VI: Le Maroc a toujours inscrit son action extérieure dans le respect du droit international', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/438556-roi-mohammed-vi-le-maroc-a-toujours-inscrit-son-action-exterieure-dans-le-respect-du-droit-international.html', 'summary': 'Roi Mohammed VI: Le Maroc a toujours inscrit son action extérieure dans le respect du droit international. Le Royaume du Maroc a toujours inscrit son action extérieure dans une démarche légaliste, structurée, fondée sur le respect du droit international et des principes de la Charte des Nations Unies, a affirmé le Roi Mohammed VI. « Il n’y a pas d’ordre viable sans règles. C’est dans cette conviction que s’ancre la diplomatie marocaine », a . ', 'size': 3}, {'id': '103', 'title': 'SM le Roi : Il n’y a pas d’ordre viable sans règles, c’est dans cette conviction que s’ancre la diplomatie marocaine"', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/SM-le-Roi-Il-n-y-a-pas-d-ordre-viable-sans-regles-c-est-dans-cette-conviction-que-s-ancre-la-diplomatie-marocaine_a71057.html', 'summary': 'SM le Roi : Il n’y a pas d’ordre viable sans règles, c’est dans cette conviction que s’ancre la diplomatie marocaine". Le Royaume du Maroc a toujours inscrit son action extérieure dans une démarche légaliste, structurée, fondée sur le respect du droit international et des principes de la Charte des Nations Unies, a affirmé Sa Majesté le Roi Mohammed VI.', 'size': 3}, {'id': '152', 'title': 'Mohammed VI : «\xa0Il n’y a pas d’ordre viable sans règles\xa0»', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/mohammed-vi-le-maroc-a-toujours-inscrit-son-action-exterieure-dans-une-demarche-legaliste-structuree-fondee-sur-le-respect-du-droit-international-et-des-principes-de-la-charte-des-nations-unies.html', 'summary': 'Mohammed VI : « Il n’y a pas d’ordre viable sans règles ». Le Royaume du Maroc a toujours inscrit son action extérieure dans une démarche légaliste, structurée, fondée sur le respect du droit international et des principes de la Charte des Nations Unies, a affirmé le Roi Mohammed VI. « Il n’y a pas d’ordre viable sans règles. C’est dans cette conviction que s’ancre la diplomatie marocaine », a . L’article est apparu en premier sur .', 'size': 3}], 'main_title': 'Roi Mohammed VI: Le Maroc a toujours inscrit son action extérieure dans le respect du droit international'}, {'community_id': '5', 'articles': [{'id': '46', 'title': 'Aid Al Mawlid célébré le 5 septembre. Un jour férié ou deux ? Ce que prévoit la loi', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/aid-al-mawlid-celebre-le-5-septembre-un-jour-ferie-ou-deux-ce-que-prevoit-la-loi-308971/', 'summary': 'Aid Al Mawlid célébré le 5 septembre. Un jour férié ou deux ? Ce que prévoit la loi. Au Maroc, le mois de Rabie-I 1447 de l’hégire débutera le lundi 25 août 2025 et Aïd Al Mawlid Annabaoui sera célébré le vendredi 5 septembre, annonce le ministère des Habous et des Affaires islamiques. « Avons-nous droit à un jour de congé ou plutôt deux ? » Cette question que se', 'size': 5}, {'id': '60', 'title': 'Aïd Al Mawlid Annabaoui célébré le vendredi 05 septembre', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/au-royaume/aid-al-mawlid-annabaoui-celebre-le-vendredi-05-septembre/', 'summary': 'Aïd Al Mawlid Annabaoui célébré le vendredi 05 septembre. Le mois de Rabie-I 1447 de l’hégire débutera le lundi 25 août 2025 et Aïd Al Mawlid Annabaoui sera célébré le vendredi 05 septembre, a annoncé, samedi soir, le ministère des Habous et des Affaires islamiques.', 'size': 5}, {'id': '76', 'title': 'Aïd Al Mawlid Annabaoui sera célébré le vendredi 05 septembre', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/maroc-aid-al-mawlid-annabaoui-sera-celebre-le-vendredi-05-septembre.html', 'summary': 'Aïd Al Mawlid Annabaoui sera célébré le vendredi 05 septembre. Le mois de Rabie-I 1447 de l’hégire débutera le lundi 25 août 2025 et Aïd Al Mawlid Annabaoui sera célébré le vendredi 05 septembre, a annoncé samedi soir à Rabat le ministère des Habous et des Affaires islamiques. Dans un communiqué, le ministère indique que l’observation du croissant lunaire du mois de Rabie-I 1447 a . L’article est apparu en premier sur .', 'size': 5}, {'id': '80', 'title': 'Aïd Al Mawlid Annabaoui célébré le 5 septembre au Maroc', 'source': 'lnt.ma', 'link': 'https://lnt.ma/aid-al-mawlid-annabaoui-celebre-le-5-septembre-au-maroc/', 'summary': 'Aïd Al Mawlid Annabaoui célébré le 5 septembre au Maroc. Le mois de Rabie-I 1447 de l’hégire débutera le lundi 25 août 2025 et Aïd Al Mawlid Annabaoui sera célébré le vendredi 05 septembre, a annoncé, samedi soir, le ministère des Habous et des Affaires islamiques. Dans un communiqué, le ministère indique que l’observation du croissant lunaire du mois de Rabie-I 1447 a eu lieu . ', 'size': 5}, {'id': '102', 'title': 'Aïd Al Mawlid Annabaoui sera célébré le vendredi 5 septembre', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Aid-Al-Mawlid-Annabaoui-sera-celebre-le-vendredi-5-septembre_a71058.html', 'summary': 'Aïd Al Mawlid Annabaoui sera célébré le vendredi 5 septembre. Le mois de Rabie-I 1447 de l’hégire débutera le lundi 25 août 2025 et Aïd Al Mawlid Annabaoui sera célébré le vendredi 05 septembre, a annoncé, samedi soir, le ministère des Habous et des Affaires islamiques.', 'size': 5}], 'main_title': 'Aid Al Mawlid célébré le 5 septembre. Un jour férié ou deux ? Ce que prévoit la loi'}, {'community_id': '6', 'articles': [{'id': '50', 'title': 'Aéroport Mohammed V : Interpellation d’un ressortissant turc faisant l’objet d’un mandat d’arrêt international', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/actualite/aeroport-mohammed-v-interpellation-dun-ressortissant-turc-faisant-lobjet-dun-mandat-darret-international', 'summary': 'Aéroport Mohammed V : Interpellation d’un ressortissant turc faisant l’objet d’un mandat d’arrêt international. Les éléments de la sûreté nationale de l’aéroport international Mohammed V de Casablanca ont interpellé, vendredi, un ressortissant turc faisant l’objet d’un mandat d’arrêt international émis par les autorités judiciaires allemandes, a-t-on appris de source sécuritaire. Le mis en cause (43 ans) a été appréhendé immédiatement à son arrivée à bord d’un vol en provenance .', 'size': 2}, {'id': '112', 'title': 'Aéroport Mohammed V : interpellation d’un ressortissant turc recherché par Interpol', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/25/aeroport-mohammed-v-interpellation-dun-ressortissant-turc-recherche-par-interpol_1947372/', 'summary': 'Aéroport Mohammed V : interpellation d’un ressortissant turc recherché par Interpol. Un homme de 43 ans d’origine turque, faisant l’objet d’un mandat d’arrêt international, a été arrêté vendredi à l’aéroport de Mohammed V Casablanca. L’individu était recherché pour son implication présumée dans une affaire de trafic de cocaïne. Les éléments de la sûreté nationale de l’aéroport international Mohammed V de Casablanca ont interpellé, vendredi, un ressortissant.', 'size': 2}], 'main_title': 'Aéroport Mohammed V : Interpellation d’un ressortissant turc faisant l’objet d’un mandat d’arrêt international'}, {'community_id': '7', 'articles': [{'id': '57', 'title': 'SM Le Roi adresse un Message aux participants à la 82e session de l’Institut de Droit International', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/au-royaume/evenement/sm-le-roi-adresse-un-message-aux-participants-a-la-82e-session-de-linstitut-de-droit-international/', 'summary': 'SM Le Roi adresse un Message aux participants à la 82e session de l’Institut de Droit International. Sa Majesté le Roi Mohammed VI a adressé un Message aux participants à la 82e session de l’Institut de Droit International, qui a ouvert ses travaux, dimanche au siège de l’Académie du Royaume du Maroc, à Rabat.', 'size': 3}, {'id': '72', 'title': 'Le Roi Mohammed VI adresse un message aux participants à la 82e session de l’Institut de Droit International (Texte intégral)', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/le-roi-mohammed-vi-adresse-un-message-aux-participants-a-la-82e-session-de-linstitut-de-droit-international-texte-integral.html', 'summary': 'Le Roi Mohammed VI adresse un message aux participants à la 82e session de l’Institut de Droit International (Texte intégral). Le Roi Mohammed VI a adressé un Message aux participants à la 82e session de l’Institut de Droit International, qui a ouvert ses travaux dimanche au siège de l’Académie du Royaume du Marocà Rabat. Voici le texte intégral du Message Royal, dont lecture a été donnée par le président de l’Institut de Droit International, Mohamed . L’article est apparu en premier sur .', 'size': 3}, {'id': '77', 'title': 'SM le Roi adresse un Message aux participants à la 82e session de l’Institut de Droit International', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/sm-le-roi-adresse-un-message-aux-participants-a-la-82e-session-de-linstitut-de-droit-international/', 'summary': 'SM le Roi adresse un Message aux participants à la 82e session de l’Institut de Droit International. Sa Majesté le Roi Mohammed VI, que Dieu L’assiste, a adressé un Message aux participants à la 82e session de l’Institut de Droit International, qui a ouvert ses travaux, dimanche au siège de l’Académie du Royaume du Maroc, à Rabat. Voici le texte intégral du Message Royal, dont lecture a été donnée par le président ', 'size': 3}], 'main_title': 'SM Le Roi adresse un Message aux participants à la 82e session de l’Institut de Droit International'}, {'community_id': '9', 'articles': [{'id': '62', 'title': 'Lutte anti-crime : Le Pentagone entend déployer des militaires à Chicago', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/lutte-anti-crime-le-pentagone-entend-deployer-des-militaires-a-chicago/', 'summary': 'Lutte anti-crime : Le Pentagone entend déployer des militaires à Chicago. Le département américain de la Défense s’attèle à l’élaboration de plans visant à déployer l’armée dans la ville de Chicago, au moment où le président Donald Trump affirme vouloir intensifier la lutte contre la criminalité, le sans-abrisme et l’immigration clandestine, rapportent des médias US. Le Pentagone prépare, depuis plusieurs semaines, des plans visant notamment le .', 'size': 2}, {'id': '149', 'title': 'Le Pentagone entend déployer des militaires à Chicago', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/lutte-anti-crime-le-pentagone-entend-deployer-des-militaires-a-chicago.html', 'summary': "Le Pentagone entend déployer des militaires à Chicago. Le département américain de la Défense s'attèle à l'élaboration de plans visant à déployer l'armée dans la ville de Chicago, au moment où le président Donald Trump affirme vouloir intensifier la lutte contre la criminalité, le sans-abrisme et l'immigration clandestine, rapportent des médias US. L’article est apparu en premier sur .", 'size': 2}], 'main_title': 'Lutte anti-crime : Le Pentagone entend déployer des militaires à Chicago'}, {'community_id': '4', 'articles': [{'id': '85', 'title': 'La Bourse de Casablanca démarre en baisse', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/438581-la-bourse-de-casablanca-demarre-en-baisse-17.html', 'summary': 'La Bourse de Casablanca démarre en baisse. La Bourse de Casablanca a débuté ses échanges en baisse lundi, son indice principal, le MASI, cédant 0,08% à 19.966,85 points (pts). Le MASI 20, regroupant les 20 valeurs les plus liquides, reculait de 0,04% à 1.633,91 pts, et le MASI ESG, indice des entreprises ayant la meilleure notation ESG publiée par Moody’s ESG Solutions, . ', 'size': 2}, {'id': '143', 'title': 'La Bourse de Casablanca débute en baisse', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/la-bourse-de-casablanca-debute-2/', 'summary': 'La Bourse de Casablanca débute en baisse. La Bourse de Casablanca a débuté ses échanges en baisse lundi, son indice principal, le MASI, cédant 0,08% à 19.966,85 points (pts). Le MASI 20, regroupant les 20 valeurs les plus liquides, reculait de 0,04% à 1.633,91 pts, et le MASI ESG, indice des entreprises ayant la meilleure notation ESG publiée par Moody’s ESG Solutions, .', 'size': 2}], 'main_title': 'La Bourse de Casablanca démarre en baisse'}, {'community_id': '8', 'articles': [{'id': '119', 'title': 'Maroc\xa0: Akdital inaugure trois nouveaux hôpitaux à Oujda et Nador', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/174881/maroc-akdital-inaugure-trois-nouveaux.html', 'summary': 'Maroc : Akdital inaugure trois nouveaux hôpitaux à Oujda et Nador. Avec le premier centre d’oncologie et de médecine nucléaire à Nador, l’hôpital pluridisciplinaire et le centre international d’oncologie à Oujda, Akdital a inauguré récemment trois établissements hospitaliers pour renforcer l’offre de santé dans l’Oriental.', 'size': 2}, {'id': '136', 'title': 'Infrastructures de santé : Akdital inaugure trois nouveaux hôpitaux à Oujda et Nador', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/au-royaume/infrastructures-de-sante-akdital-inaugure-trois-nouveaux-hopitaux-a-oujda-et-nador/', 'summary': 'Infrastructures de santé : Akdital inaugure trois nouveaux hôpitaux à Oujda et Nador. Avec la mise en service de ces trois nouveaux établissements représentant une capacité totale de 298 lits, Akdital confirme son rôle de leader dans la transformation du système de santé marocain, offrant désormais une couverture complète des 12 régions du Royaume.', 'size': 2}], 'main_title': 'Maroc\xa0: Akdital inaugure trois nouveaux hôpitaux à Oujda et Nador'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
                        
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ? d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        // Fonction pour cacher le tooltip
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = '';
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
    
    
</body>




</html>
    