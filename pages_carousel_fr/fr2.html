<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); 
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title"> Les principales actualités des dernières 24 heures

</div>    
        <div class="header-subtitle"> Dernière mise à jour : 15/06/2025 - 06h23</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"></div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '3', 'title': 'Israel menace de "brûler" Téhéran et "plus à venir"', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/428767-israel-menace-de-bruler-teheran-et-plus-a-venir.html', 'summary': 'Israel menace de "brûler" Téhéran et "plus à venir". Israël a menacé samedi de « brûler » Téhéran et affirmé avoir la maîtrise du ciel sur tout l’ouest de l’Iran jusqu’à la capitale, au deuxième jour d’une attaque sans précédent menée sur le territoire iranien. L’armée de l’air israélienne a poursuivi ses frappes contre plusieurs sites en Iran, ciblant notamment des systèmes de défense aériens dans . ', 'size': 3}, {'id': '29', 'title': 'Israël affirme poursuivre ses frappes sur l\'Iran "à pleine force"', 'source': 'lematin.ma', 'link': 'https://lematin.ma/monde/israel-affirme-poursuivre-ses-frappes-sur-liran-a-pleine-force/285332', 'summary': 'Israël affirme poursuivre ses frappes sur l\'Iran "à pleine force". L\'Iran est capable de nuire considérablement à Israël, a déclaré vendredi le porte-parole de l\'armée israélienne après l\'attaque massive lancée par son pays.', 'size': 3}, {'id': '39', 'title': 'Dominant le ciel, Israël menace de "brûler" Téhéran si l\'Iran continue ses frappes', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Dominant-le-ciel-Israel-menace-de-bruler-Teheran-si-l-Iran-continue-ses-frappes_a68654.html', 'summary': 'Dominant le ciel, Israël menace de "brûler" Téhéran si l\'Iran continue ses frappes. Israël a averti samedi que "Téhéran brûlera" si l\'Iran continuait de lancer des missiles contre son territoire, après le tir de dizaines de ces projectiles en riposte à une attaque israélienne d\'une ampleur sans précédent sur le sol iranien.', 'size': 3}], 'main_title': 'Israel menace de "brûler" Téhéran et "plus à venir"'}, {'community_id': '1', 'articles': [{'id': '7', 'title': "Le Roi Mohammed VI félicite le Roi Charles III à l'occasion de son anniversaire", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/428750-le-roi-mohammed-vi-felicite-le-roi-charles-iii-a-loccasion-de-son-anniversaire.html', 'summary': "Le Roi Mohammed VI félicite le Roi Charles III à l'occasion de son anniversaire. Le Roi Mohammed VI a adressé un message de félicitations à Charles III, souverain du Royaume-Uni, à l’occasion de son anniversaire. Dans ce message, le souverain exprime ses sincères vœux de santé et de bonheur au Roi Charles III, à la Reine Camilla ainsi qu’aux membres de la famille royale, et de davantage de progrès . ", 'size': 2}, {'id': '101', 'title': 'S.M. le Roi félicite le Roi Charles III à l’occasion de son anniversaire', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/s-m-le-roi-felicite-le-roi-charles-iii-a-loccasion-de-son-anniversaire/', 'summary': 'S.M. le Roi félicite le Roi Charles III à l’occasion de son anniversaire. Sa Majesté le Roi Mohammed VI a adressé un message de félicitations à SM Charles III, Souverain du Royaume-Uni, à l’occasion de son anniversaire. Dans ce message, le Souverain exprime Ses sincères vœux de santé et de bonheur à SM le Roi Charles III, à SM la Reine Camilla ainsi qu’aux membres de la Famille .', 'size': 2}], 'main_title': "Le Roi Mohammed VI félicite le Roi Charles III à l'occasion de son anniversaire"}, {'community_id': '8', 'articles': [{'id': '12', 'title': "Crash d’Air India: Message de condoléances et de compassion de S.M. le Roi à la présidente de la République de l'Inde", 'source': 'lematin.ma', 'link': 'https://lematin.ma/activites-royales/message-de-condoleances-de-sm-le-roi-a-la-presidente-de-linde/285384', 'summary': "Crash d’Air India: Message de condoléances et de compassion de S.M. le Roi à la présidente de la République de l'Inde. Dans ce message, Sa Majesté le Roi affirme avoir appris, avec une profonde affliction, la nouvelle du crash d'un avion de ligne d'Air India à Ahmedabad, ayant fait de nombr.", 'size': 3}, {'id': '158', 'title': "Condoléances royales à la présidente l'Inde suite au tragique accident d’Air India", 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Condoleances-royales-a-la-presidente-l-Inde-suite-au-tragique-accident-d-Air-India_a68655.html', 'summary': "Condoléances royales à la présidente l'Inde suite au tragique accident d’Air India. Sa Majesté le Roi Mohammed VI a adressé un message de condoléances et de compassion à la présidente de la République de l'Inde, Mme Droupadi Murmu, suite au crash d'un avion de ligne d'Air India qui a fait plusieurs victimes.", 'size': 3}, {'id': '167', 'title': 'Message de condoléances et de compassion de S.M. le Roi à la présidente de la République de l’Inde suite au crash d’un avion d’Air India', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/message-de-condoleances-et-de-compassion-de-s-m-le-roi-a-la-presidente-de-la-republique-de-linde-suite-au-crash-dun-avion-dair-india/', 'summary': 'Message de condoléances et de compassion de S.M. le Roi à la présidente de la République de l’Inde suite au crash d’un avion d’Air India. Sa Majesté le Roi Mohammed VI a adressé un message de condoléances et de compassion à la présidente de la République de l’Inde, Mme Droupadi Murmu, suite au crash d’un avion de ligne d’Air India qui a fait plusieurs victimes. Dans ce message, Sa Majesté le Roi affirme avoir appris, avec une profonde affliction, la .', 'size': 3}], 'main_title': "Crash d’Air India: Message de condoléances et de compassion de S.M. le Roi à la présidente de la République de l'Inde"}, {'community_id': '3', 'articles': [{'id': '17', 'title': "Mondial des clubs: Youssef Amrani rend visite au WAC en camp d'entraînement aux États-Unis", 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/amrani-soutient-le-wydad-avant-le-mondial-des-clubs/285365', 'summary': "Mondial des clubs: Youssef Amrani rend visite au WAC en camp d'entraînement aux États-Unis. À quelques jours du coup d’envoi de la Coupe du Monde des Clubs de la FIFA 2025, qui se tiendra pour la première fois aux États-Unis, le Wydad Athletic Club de Casablanca, représen.", 'size': 3}, {'id': '40', 'title': 'Coupe du Monde des Clubs : Youssef Amrani rend visite au Wydad', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Coupe-du-Monde-des-Clubs-Youssef-Amrani-rend-visite-au-Wydad_a68653.html', 'summary': "Coupe du Monde des Clubs : Youssef Amrani rend visite au Wydad. L'Ambassadeur du Maroc à Washington, Youssef Amrani, a rendu visite au camp d'entrainement du Wydad de Casablanca à la veille du coup d'envoi de la Coupe du Monde des Clubs 2025. Une visite durant laquelle il a fait part de son soutien au club qui porte les couleurs du Royaume avant son match décisif contre Manchester City. Détails", 'size': 3}, {'id': '77', 'title': 'Youssef Amrani rend visite au WAC en camp d’entraînement aux États-Unis', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/une/youssef-amrani-rend-visite-au-wac-en-camp-dentrainement-aux-etats-unis', 'summary': 'Youssef Amrani rend visite au WAC en camp d’entraînement aux États-Unis. L’Ambassadeur du Maroc aux USA, Youssef Amrani, a salué le parcours du club casablancais et exprimé son soutien à l’équipe, symbole de l’ambition sportive du Royaume. À quelques jours du coup d’envoi de la Coupe du Monde des Clubs de la FIFA 2025, qui se tiendra pour la première fois aux États-Unis, le Wydad Athletic .', 'size': 3}], 'main_title': "Mondial des clubs: Youssef Amrani rend visite au WAC en camp d'entraînement aux États-Unis"}, {'community_id': '4', 'articles': [{'id': '23', 'title': 'Baccalauréat 2025 : 250.075 candidats réussissent la session normale, un taux de réussite de 66,8 %', 'source': 'lematin.ma', 'link': 'https://lematin.ma/enseignement/bac-2025-6680-de-reussite-les-filles-en-tete/285352', 'summary': 'Baccalauréat 2025 : 250.075 candidats réussissent la session normale, un taux de réussite de 66,8 %. La session normale du Baccalauréat 2025 s’est achevée avec 250.075 lauréats, dont 154.918 filles, selon les chiffres rendus publics par le ministère de l’Éducation nationale, du Pr.', 'size': 5}, {'id': '62', 'title': 'Baccalauréat: 66,8% des admis, en légère baisse par rapport à 2024', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/baccalaureat-668-des-admis-un-leger-mieux-par-rapport-a-2024-304746/', 'summary': 'Baccalauréat: 66,8% des admis, en légère baisse par rapport à 2024. Au total 250.075 candidats de l’enseignement public et privé ont réussi les épreuves de la session ordinaire de l’examen national unifié du baccalauréat au titre de la session de juin 2025, annonce le ministère de l’Éducation nationale, du Préscolaire et des Sports. Le taux de réussite s’est établi à 66,8%', 'size': 5}, {'id': '78', 'title': 'Taux de réussite, mentions, filières…. Les résultats du Bac 2025 en chiffres', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/actualite/taux-de-reussite-mentions-filieres-les-resultats-du-bac-2025-en-chiffres', 'summary': 'Taux de réussite, mentions, filières. Les résultats du Bac 2025 en chiffres. Enseignement. Le ministère de l’Éducation nationale, de l’Enseignement préscolaire et des Sports a annoncé samedi les résultats définitifs de la session ordinaire du baccalauréat 2025. Le taux de réussite national a atteint 66,80 % de tous les candidats en âge scolaire, marquant une légère baisse par rapport aux résultats de l’année dernière, qui atteignaient 67,86 .', 'size': 5}, {'id': '85', 'title': 'Baccalauréat 2025: Un taux de réussite de 66,8% lors de la session ordinaire', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/au-royaume/baccalaureat-2025-un-taux-de-reussite-de-668-lors-de-la-session-ordinaire/', 'summary': 'Baccalauréat 2025: Un taux de réussite de 66,8% lors de la session ordinaire. Un total de 250.075 candidats scolarisés dans les établissements d’enseignement public et privé ont réussi les épreuves de la session ordinaire de l’examen national unifié du baccalauréat au titre de la session de juin 2025, a annoncé samedi le ministère de l’Éducation nationale, du Préscolaire et des Sports.', 'size': 5}, {'id': '130', 'title': 'Baccalauréat 2025 : un taux de réussite de 66,8 %, en légère baisse', 'source': 'lnt.ma', 'link': 'https://lnt.ma/baccalaureat-2025-un-taux-de-reussite-de-668-en-legere-baisse/', 'summary': 'Baccalauréat 2025 : un taux de réussite de 66,8 %, en légère baisse. Le ministère de l’Éducation nationale, du Préscolaire et des Sports a annoncé, ce samedi, que 250.075 candidats scolarisés ont été déclarés admis à l’issue de la session ordinaire de l’examen national unifié du baccalauréat de juin 2025. Le taux de réussite global s’établit ainsi à 66,8 %, en légère baisse par rapport à celui enregistré . ', 'size': 5}], 'main_title': 'Baccalauréat 2025 : 250.075 candidats réussissent la session normale, un taux de réussite de 66,8 %'}, {'community_id': '5', 'articles': [{'id': '50', 'title': "La taxe d'habitation et la taxe de services communaux confiées désormais à la DGI", 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/La-taxe-d-habitation-et-la-taxe-de-services-communaux-confiees-desormais-a-la-DGI_a68642.html', 'summary': "La taxe d'habitation et la taxe de services communaux confiées désormais à la DGI. La Direction Générale des Impôts (DGI) a annoncé qu'elle assure désormais la gestion de la taxe d'habitation (TH) et de la taxe de services communaux (TSC).", 'size': 3}, {'id': '66', 'title': 'La taxe d’habitation et la taxe de services communaux désormais gérées par la DGI', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/la-taxe-dhabitation-et-la-taxe-de-services-communaux-desormais-gerees-par-la-dgi-304725/', 'summary': 'La taxe d’habitation et la taxe de services communaux désormais gérées par la DGI. La Direction Générale des Impôts (DGI) a annoncé qu’elle prend désormais en charge la gestion de la taxe d’habitation (TH) et de la taxe de services communaux (TSC). Cette mesure fait suite à la publication, au Bulletin Officiel n°7412, de la loi n°14.25, qui modifie et complète la loi n°47.06', 'size': 3}, {'id': '93', 'title': 'Fiscalité locale: La gestion de la TH et de la TSC confiée à la DGI', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/argent/fiscalite-locale-la-gestion-de-la-th-et-de-la-tsc-confiee-a-la-dgi/', 'summary': "Fiscalité locale: La gestion de la TH et de la TSC confiée à la DGI. La Direction Générale des Impôts (DGI) prend officiellement en charge la gestion de la taxe d'habitation (TH) et de la taxe de services communaux (TSC). Cette mesure est entrée en vigueur le 12 juin 2025.", 'size': 3}], 'main_title': "La taxe d'habitation et la taxe de services communaux confiées désormais à la DGI"}, {'community_id': '2', 'articles': [{'id': '54', 'title': 'Reconstitution du cheptel national : El Bouari rassure les éleveurs', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Reconstitution-du-cheptel-national-El-Bouari-rassure-les-eleveurs_a68637.html', 'summary': "Reconstitution du cheptel national : El Bouari rassure les éleveurs. L’opération de reconstitution du cheptel national sera mise en œuvre selon des critères objectifs permettant l'acheminement du soutien aux éleveurs à travers des commissions placées sous la supervision des autorités locales, a affirmé, vendredi à Rabat, le ministre de l’Agriculture, de la Pêche maritime, du Développement rural et des Eaux et Forêts, Ahmed El Bouari.", 'size': 3}, {'id': '94', 'title': 'Reconstitution du cheptel: El Bouari précise les conditions de mise en œuvre de l’opération', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/au-royaume/reconstitution-du-cheptel-el-bouari-precise-les-conditions-de-mise-en-oeuvre-de-loperation/', 'summary': "Reconstitution du cheptel: El Bouari précise les conditions de mise en œuvre de l’opération. L’opération de reconstitution du cheptel national sera mise en œuvre selon des critères objectifs permettant l'acheminement du soutien aux éleveurs à travers des commissions placées sous la supervision des autorités locales, a affirmé, vendredi à Rabat, le ministre de l’Agriculture, de la Pêche maritime, du Développement rural et des Eaux et Forêts, Ahmed El Bouari.", 'size': 3}, {'id': '124', 'title': 'Soutien aux éleveurs | Bouari dévoile l’opération de reconstitution du cheptel national', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/soutien-aux-eleveurs-bouari-devoile-loperation-de-reconstitution-du-cheptel-national/', 'summary': 'Soutien aux éleveurs | Bouari dévoile l’opération de reconstitution du cheptel national. L’opération de reconstitution du cheptel national sera mise en œuvre selon des critères objectifs permettant l’acheminement du soutien aux éleveurs à travers des commissions placées sous la supervision des autorités locales, a affirmé, vendredi à Rabat, le ministre de l’Agriculture, de la Pêche maritime, du Développement rural et des Eaux et Forêts, Ahmed El Bouari. ', 'size': 3}], 'main_title': 'Reconstitution du cheptel national : El Bouari rassure les éleveurs'}, {'community_id': '7', 'articles': [{'id': '65', 'title': 'Vague de chaleur dans plusieurs régions, des températures jusqu’à 45 degrés', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/vague-de-chaleur-dans-plusieurs-regions-des-temperatures-jusqua-45-degres-304730/', 'summary': 'Vague de chaleur dans plusieurs régions, des températures jusqu’à 45 degrés. Une vague de chaleur est prévue de lundi à mercredi prochains dans plusieurs provinces du Royaume, avec des températures oscillant entre 38 et 45°C, a annoncé la Direction générale de la météorologie (DGM). Des températures variant entre 42 et 45°C seront enregistrées dans les provinces de Taounate, Aousserd, Ouezzane, Larache,', 'size': 5}, {'id': '79', 'title': 'Alerte météo : Vague de chaleur de lundi à mercredi', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/actualite/alerte-meteo-vague-de-chaleur-de-lundi-a-mercredi', 'summary': 'Alerte météo : Vague de chaleur de lundi à mercredi. Une vague de chaleur est prévue de lundi à mercredi prochains dans plusieurs provinces du Royaume, avec des températures oscillant entre 38 et 45°C, a annoncé la Direction générale de la météorologie (DGM). Des températures variant entre 42 et 45°C seront ainsi enregistrées dans les provinces de Taounate, Aousserd, Ouezzane, Larache, Oued-Ed Dahab, Boujdour, Assa–Zag, .', 'size': 5}, {'id': '86', 'title': 'Alerte météo : Vague de chaleur de lundi à mercredi dans plusieurs provinces', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/au-royaume/alerte-meteo-vague-de-chaleur-de-lundi-a-mercredi-dans-plusieurs-provinces/', 'summary': 'Alerte météo : Vague de chaleur de lundi à mercredi dans plusieurs provinces. Une vague de chaleur est prévue de lundi à mercredi prochains dans plusieurs provinces du Royaume, avec des températures oscillant entre 38 et 45°C, a annoncé la Direction générale de la météorologie (DGM).', 'size': 5}, {'id': '102', 'title': 'Vague de chaleur de lundi à mercredi dans plusieurs provinces du Royaume (bulletin d’alerte)', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/vague-de-chaleur-de-lundi-a-mercredi-dans-plusieurs-provinces-du-royaume-bulletin-dalerte/', 'summary': 'Vague de chaleur de lundi à mercredi dans plusieurs provinces du Royaume (bulletin d’alerte). Une vague de chaleur est prévue de lundi à mercredi prochains dans plusieurs provinces du Royaume, avec des températures oscillant entre 38 et 45°C, a annoncé la Direction générale de la météorologie (DGM). Des températures variant entre 42 et 45°C seront ainsi enregistrées dans les provinces de Taounate, Aousserd, Ouezzane, Larache, Oued-Ed Dahab, Boujdour, Assa–Zag, .', 'size': 5}, {'id': '129', 'title': 'Météo : Une vague de chaleur attendue de lundi à mercredi', 'source': 'lnt.ma', 'link': 'https://lnt.ma/meteo-une-vague-de-chaleur-attendue-de-lundi-a-mercredi/', 'summary': 'Météo : Une vague de chaleur attendue de lundi à mercredi. La Direction générale de la météorologie (DGM) a annoncé, ce samedi, l’arrivée d’une vague de chaleur qui touchera de nombreuses provinces du Royaume entre lundi 16 et mercredi 18 juin. Les températures maximales devraient osciller entre 38 et 45°C, selon un bulletin d’alerte de niveau de vigilance « orange ». Les températures les plus élevées, . ', 'size': 5}], 'main_title': 'Vague de chaleur dans plusieurs régions, des températures jusqu’à 45 degrés'}, {'community_id': '6', 'articles': [{'id': '81', 'title': 'La reconstitution du cheptel national permettra aux éleveurs d’exercer leur activité dans les meilleures conditions, rassure Fouzi Lekjaa', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/actualite/la-reconstitution-du-cheptel-national-permettra-aux-eleveurs-dexercer-leur-activite-dans-les-meilleures-conditions-rassure-fouzi-lekjaa', 'summary': 'La reconstitution du cheptel national permettra aux éleveurs d’exercer leur activité dans les meilleures conditions, rassure Fouzi Lekjaa. Les mesures relatives à l’opération de reconstitution du cheptel national visent à permettre aux éleveurs d’exercer leur activité dans les meilleures conditions et à atténuer les difficultés engendrées par les années successives de sécheresse, a affirmé, vendredi à Rabat, le ministre délégué chargé du Budget, Fouzi Lekjaa. Dans une déclaration à la presse à l’issue .', 'size': 2}, {'id': '125', 'title': 'Lekjaa | Les mesures pour reconstituer le cheptel national visent à soutenir les éleveurs', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/lekjaa-les-mesures-pour-reconstituer-le-cheptel-national-visent-a-soutenir-les-eleveurs/', 'summary': 'Lekjaa | Les mesures pour reconstituer le cheptel national visent à soutenir les éleveurs. Les mesures relatives à l’opération de reconstitution du cheptel national visent à permettre aux éleveurs d’exercer leur activité dans les meilleures conditions et à atténuer les difficultés engendrées par les années successives de sécheresse, a affirmé, vendredi à Rabat, le ministre délégué chargé du Budget, Fouzi Lekjaa. Dans une déclaration à la presse à l’issue ', 'size': 2}], 'main_title': 'La reconstitution du cheptel national permettra aux éleveurs d’exercer leur activité dans les meilleures conditions, rassure Fouzi Lekjaa'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
                        
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ? d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        // Fonction pour cacher le tooltip
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = '';
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
    
    
</body>




</html>
    