<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); 
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title"> Les principales actualités des dernières 24 heures

</div>    
        <div class="header-subtitle"> Dernière mise à jour : 28/08/2025 - 06h15</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"></div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '6', 'title': 'Maroc – Niger : toutes les places vendues pour le match des éliminatoires du Mondial', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/438859-maroc-niger-toutes-les-places-vendues-pour-le-match-des-eliminatoires-du-mondial.html', 'summary': 'Maroc – Niger : toutes les places vendues pour le match des éliminatoires du Mondial. La rencontre qui opposera l’équipe nationale marocaine au Niger, le vendredi 5 septembre prochain au complexe sportif Prince Moulay Abdellah de Rabat (20h00), se jouera à guichets fermés. Le comité d’organisation a en effet annoncé, ce mercredi, que l’ensemble des billets mis en vente ont trouvé preneur et qu’aucune nouvelle mise en circulation n’est prévue. . ', 'size': 5}, {'id': '41', 'title': 'Match Maroc-Niger : Plus de 47.500 tickets vendus en quelques heures', 'source': 'lematin.ma', 'link': 'https://lematin.ma/videos/match-maroc-niger-plus-de-47500-tickets-vendus-en-quelques-heures/298238', 'summary': 'Match Maroc-Niger : Plus de 47.500 tickets vendus en quelques heures. Le Maroc affrontera le Niger le vendredi 5 septembre 2025 au Complexe sportif Prince Moulay Abdellah de Rabat. Le coup d’envoi de cette rencontre comptant pour les éliminatoires de.', 'size': 5}, {'id': '71', 'title': 'Maroc-Niger : tous les tickets vendus en 24h', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/27/maroc-niger-tous-les-tickets-vendus-en-24h_1947735/', 'summary': 'Maroc-Niger : tous les tickets vendus en 24h. Le Comité d’organisation du match officiel Maroc–Niger, prévu le 5 septembre 2025 au Complexe sportif Prince Moulay Abdellah de Rabat, a annoncé que tous les billets ont été écoulés. La rencontre, qui marquera la réouverture du stade dans sa nouvelle version, se jouera donc à guichets fermés, sans mise en vente supplémentaire. Le premier test.', 'size': 5}, {'id': '82', 'title': 'Qualifications du Mondial 2026 : Maroc–Niger à guichets fermés', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/qualifications-du-mondial-2026-maroc-niger-a-guichets-fermes-309095/', 'summary': 'Qualifications du Mondial 2026 : Maroc–Niger à guichets fermés. Pour la grande ouverture du nouveau stade du Complexe sportif Prince Moulay Abdellah de Rabat, prévue le jeudi 5 septembre, le match Maroc–Niger, au titre des éliminatoires africaines de la Coupe du monde 2026, se jouera à guichets fermés, a annoncé le comité d’organisation. «Le comité d’organisation du match officiel', 'size': 5}, {'id': '164', 'title': 'Éliminatoires Mondial 2026 : Le match Maroc-Niger se jouera à guichet fermé', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/175073/eliminatoires-mondial-2026-match-maroc-niger.html', 'summary': 'Éliminatoires Mondial 2026 : Le match Maroc-Niger se jouera à guichet fermé. Le comité dorganisation du match entre le Maroc et le Niger, prévu vendredi 5 septembre 2025 au Complexe Sportif Prince Moulay Abdellah à Rabat, à partir de 20h00, a annoncé que tous les billets disponibles avaient été vendus. De ce fait, la rencontre se déroulera à guichet fermé.', 'size': 5}], 'main_title': 'Maroc – Niger : toutes les places vendues pour le match des éliminatoires du Mondial'}, {'community_id': '7', 'articles': [{'id': '25', 'title': 'Régulation des marchés : 174 décisions et avis rendus en 2024, le Conseil de la concurrence dresse son bilan', 'source': 'lematin.ma', 'link': 'https://lematin.ma/economie/2024-une-annee-charniere-pour-le-conseil-de-la-concurrence/298327', 'summary': 'Régulation des marchés : 174 décisions et avis rendus en 2024, le Conseil de la concurrence dresse son bilan. La majeure partie de l’activité décisionnelle du Conseil a porté sur le contrôle préventif des concentrations économiques, qui représente plus de 93% des décisions rendues. Au tota.', 'size': 3}, {'id': '74', 'title': 'Régulation des marchés : le Conseil de la concurrence rend 174 décisions et avis en 2024', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/27/regulation-des-marches-le-conseil-de-la-concurrence-rend-174-decisions-et-avis-en-2024_1947711/', 'summary': 'Régulation des marchés : le Conseil de la concurrence rend 174 décisions et avis en 2024. Le Conseil de la concurrence a rendu 174 décisions et avis en 2024 dans le cadre de la régulation des marchés, ressort-il du rapport annuel dudit conseil au titre de l’année 2024. Ce bilan couvre les différents champs de compétence du Conseil, tels que prévus par l’article 166 de la Constitution, la loi n°104-12 relative.', 'size': 3}, {'id': '115', 'title': 'Conseil de la concurrence : Le contrôle préventif des concentrations économiques domine l’activité', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/affaires/conseil-de-la-concurrence-le-controle-preventif-des-concentrations-economiques-domine-lactivite/', 'summary': "Conseil de la concurrence : Le contrôle préventif des concentrations économiques domine l’activité. Le Conseil de la concurrence a rendu 174 décisions et avis en 2024 dans le cadre de la régulation des marchés, ressort-il du rapport annuel dudit conseil au titre de l'année 2024.", 'size': 3}], 'main_title': 'Régulation des marchés : 174 décisions et avis rendus en 2024, le Conseil de la concurrence dresse son bilan'}, {'community_id': '3', 'articles': [{'id': '45', 'title': 'S.M. le Roi adresse un message de condoléances et de compassion à la famille du journaliste feu Mohamed Hassan El Wali', 'source': 'lematin.ma', 'link': 'https://lematin.ma/activites-royales/message-de-condoleances-de-sm-le-roi-a-la-famille-de-mohamed-hassan-el-wali/298212', 'summary': 'S.M. le Roi adresse un message de condoléances et de compassion à la famille du journaliste feu Mohamed Hassan El Wali. Dans ce message, le Souverain dit avoir appris avec une grande émotion le décès de l’éminent journaliste feu Mohamed Hassan El Wali, que Dieu l’ait en Sa sainte miséricorde, implor.', 'size': 2}, {'id': '81', 'title': 'Le roi présente ses condoléances à la famille de Ali Hassan', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/26/le-roi-presente-ses-condoleances-a-la-famille-de-ali-hassan_1947656/', 'summary': 'Le roi présente ses condoléances à la famille de Ali Hassan. Le roi Mohammed VI a adressé un message de condoléances et de compassion aux membres de la famille de Mohamed Hassan El Wali, dit Ali Hassan, figure emblématique de la télévision et du cinéma marocains, décédé lundi 25 août à l’âge de 80 ans. Dans ce message, le souverain dit avoir appris avec « une grande.', 'size': 2}], 'main_title': 'S.M. le Roi adresse un message de condoléances et de compassion à la famille du journaliste feu Mohamed Hassan El Wali'}, {'community_id': '1', 'articles': [{'id': '56', 'title': '\u200bMaroc : 151.755 voitures de tourisme dédouanées en 2024 (ADII)', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/\u200bMaroc-151-755-voitures-de-tourisme-dedouanees-en-2024-ADII_a71131.html', 'summary': "\u200bMaroc : 151.755 voitures de tourisme dédouanées en 2024 (ADII). Le nombre de voitures de tourisme dédouanées au Maroc a atteint 151.755 unités en 2024, marquant une augmentation de 6% par rapport à une annnée auparavant, selon l'Administration des Douanes et Impôts indirects (ADII).", 'size': 3}, {'id': '76', 'title': 'Contrôle des voyageurs : saisie de 167 MDH de devises en 2024', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/27/controle-des-voyageurs-saisie-de-167-mdh-de-devises-en-2024_1947704/', 'summary': 'Contrôle des voyageurs : saisie de 167 MDH de devises en 2024. Le montant global des devises saisies lors du contrôle des voyageurs s’est élevé à 167 millions de dirhams (MDH) en 2024, en hausse de 59% par rapport à une année auparavant, selon l’Administration des Douanes et Impôts indirects (ADII). Durant 2024, l’ADII a intensifié ses efforts en matière de contrôle des mouvements de devises et.', 'size': 4}, {'id': '113', 'title': 'ADII : 151.755 voitures de tourisme dédouanées en 2024', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/influences/auto/adii-151-755-voitures-de-tourisme-dedouanees-en-2024/', 'summary': "ADII : 151.755 voitures de tourisme dédouanées en 2024. Le nombre de voitures de tourisme dédouanées au Maroc a atteint 151.755 unités en 2024, marquant une augmentation de 6% par rapport à une annnée auparavant, selon l'Administration des Douanes et Impôts indirects (ADII).", 'size': 3}, {'id': '137', 'title': 'Recettes douanières : un record historique de 144,8 MMDH en 2024', 'source': 'lnt.ma', 'link': 'https://lnt.ma/recettes-douanieres-un-record-historique-de-1448-mmdh-en-2024/', 'summary': 'Recettes douanières : un record historique de 144,8 MMDH en 2024. Les recettes douanières encaissées ont atteint un record historique de 144,8 milliards de dirhams (MMDH) au titre de l’année 2024 contre 132,5 MMDH en 2023, affichant un taux de croissance de 9,2%, selon l’Administration des Douanes et Impôts Indirects (ADII). Cette performance s’explique principalement par la hausse des recettes de la taxe sur la valeur . ', 'size': 2}], 'main_title': 'Contrôle des voyageurs : saisie de 167 MDH de devises en 2024'}, {'community_id': '5', 'articles': [{'id': '63', 'title': 'Élevage : La barre des 32,8 millions de têtes franchie, l’importation suspendue', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Elevage-La-barre-des-328-millions-de-tetes-franchie-l-importation-suspendue_a71123.html', 'summary': 'Élevage : La barre des 32,8 millions de têtes franchie, l’importation suspendue. Le ministère de l’Agriculture a procédé à une opération de recensement du cheptel national, qui fait état de 32.832.573 têtes. Sur la base de ces données, il a été décidé de mettre fin, dès fin septembre 2025, à la suspension des droits de douane et de la TVA appliquée jusque-là aux importations d’ovins, de caprins et de lait en poudre.', 'size': 2}, {'id': '84', 'title': 'Le Maroc réactive les droits de douane pour les ovins et caprins, les bovins toujours exempts', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/le-maroc-reactive-les-droits-de-douane-pour-les-ovins-et-caprins-les-bovins-toujours-exempts-309070/', 'summary': 'Le Maroc réactive les droits de douane pour les ovins et caprins, les bovins toujours exempts. Selon une décision du ministère de l’Agriculture, communiquée le mardi 26 août 2025, le Maroc rétablira bientôt les droits de douane et la TVA sur les importations d’ovins et de caprins, suite aux résultats de l’opération de recensement du cheptel national. À partir de fin septembre, le gouvernement remettra en', 'size': 2}], 'main_title': 'Élevage : La barre des 32,8 millions de têtes franchie, l’importation suspendue'}, {'community_id': '6', 'articles': [{'id': '77', 'title': "CHAN-2024 : les Lions de l’Atlas battent le Sénégal et se rapprochent d'un troisième sacre", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/27/chan-2024-les-lions-de-latlas-battent-le-senegal-et-se-rapprochent-dun-troisieme-sacre_1947703/', 'summary': "CHAN-2024 : les Lions de l’Atlas battent le Sénégal et se rapprochent d'un troisième sacre. L’équipe nationale du Maroc des joueurs locaux s’est qualifiée pour la finale du Championnat d’Afrique des nations (CHAN) après sa victoire face à son homologue sénégalaise par 5 tirs au but à 3 (temps réglementaire et prolongations 1-1), en demi-finale disputée, mardi soir, au stade Mandela à Kampala. Les Lions de l’Atlas se sont qualifiés.", 'size': 5}, {'id': '89', 'title': 'Oussama Lamlioui, le «game changer» du Maroc au CHAN 2024, selon la CAF', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/175051/oussama-lamlioui-game-changer-maroc.html', 'summary': 'Oussama Lamlioui, le «game changer» du Maroc au CHAN 2024, selon la CAF. Alors que le Championnat dAfrique des Nations (CHAN) 2024 entre dans sa phase finale, tous les regards se tournent vers Oussama Lamlioui, lattaquant du RS Berkane dont les performances remarquables ont propulsé le Maroc jusquà ce stade. Les Lions de lAtlas, composés exclusivement de joueurs locaux, sapprêtent à affronter Madagascar en finale, après avoir éliminé les champions en titre, le Sénégal, 5-3 aux tirs au but lors de la demi-finale de mardi au stade Mandela à Kampala.', 'size': 4}, {'id': '130', 'title': 'CHAN-2024 (demi-finale) : «\xa0le billet de la finale a été amplement méritée face à une solide équipe du Sénégal\xa0» (Tarik Sektioui)', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/chan-2024-demi-finale-le-billet-de-la-finale-a-ete-amplement-meritee-face-a-une-solide-equipe-du-senegal-tarik-sektioui.html', 'summary': 'CHAN-2024 (demi-finale) : « le billet de la finale a été amplement méritée face à une solide équipe du Sénégal » (Tarik Sektioui). L’entraineur de la sélection marocaine des joueurs locaux, Tarik Sektioui a affirmé, mardi à Kampala, que la qualification de l’équipe du Maroc en finale du Championnat d’Afrique des nations (CHAN) de football a été amplement méritée face au Sénégal. « On ne peut qu’être fiers de cette qualification qui a été très difficile face au . L’article est apparu en premier sur .', 'size': 4}, {'id': '132', 'title': 'CHAN 2024 | Le Maroc se qualifie pour la finale après sa victoire face au Sénégal', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/chan-2024-le-maroc-se-qualifie-pour-la-finale-apres-sa-victoire-face-au-senegal/', 'summary': 'CHAN 2024 | Le Maroc se qualifie pour la finale après sa victoire face au Sénégal. L’équipe nationale du Maroc des joueurs locaux s’est qualifiée pour la finale du Championnat d’Afrique des nations (CHAN) après sa victoire face à son homologue sénégalaise par 5 tirs au but à 3 (temps réglementaire et prolongations 1-1), en demi-finale disputée, mardi soir, au stade Mandela à Kampala. Le but du Sénégal a été inscrit ', 'size': 5}, {'id': '140', 'title': 'CHAN: Le Maroc se qualifie pour la finale après sa victoire face au Sénégal', 'source': 'lnt.ma', 'link': 'https://lnt.ma/chan-le-maroc-se-qualifie-pour-la-finale-apres-sa-victoire-face-au-senegal/', 'summary': 'CHAN: Le Maroc se qualifie pour la finale après sa victoire face au Sénégal. Les Lions de l’Atlas se sont qualifiés haut la main pour la finale du Championnat d’Afrique des nations (CHAN) en battant le Sénégal par 5 tirs au but à 3 après prolongations (temps réglementaire 1-1), en demi-finale disputée, mardi soir, au stade Mandela à Kampala, se rapprochant davantage d’un troisième sacre historique. Les joueurs marocains, . ', 'size': 5}], 'main_title': "CHAN-2024 : les Lions de l’Atlas battent le Sénégal et se rapprochent d'un troisième sacre"}, {'community_id': '2', 'articles': [{'id': '118', 'title': 'L’ANME dénonce une dérive journalistique du journal Le Monde', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/lanme-denonce-une-derive-journalistique-du-journal-le-monde/', 'summary': 'L’ANME dénonce une dérive journalistique du journal Le Monde. L’Association Nationale des Médias et des Éditeurs (ANME) dénonce avec la plus grande vigueur la série d’articles à charge contre le Roi du Maroc Mohammed VI et l’institution monarchique, publiés à partir du 24 août dans le quotidien français « Le Monde ». Ces articles ne relèvent pas de l’exercice journalistique et laisseront une tache .', 'size': 3}, {'id': '176', 'title': 'L’ANME dénonce le caractère «\xa0mensonger et tendancieux\xa0» d’une série d’articles du journal «\xa0Le Monde\xa0»', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/au-royaume/lanme-denonce-le-caractere-mensonger-et-tendancieux-dune-serie-darticles-du-journal-le-monde/', 'summary': 'L’ANME dénonce le caractère « mensonger et tendancieux » d’une série d’articles du journal « Le Monde ». L’Association nationale des médias et des éditeurs (ANME) dénonce avec la plus grande vigueur la série d’articles à charge contre le Roi du Maroc Mohammed VI et l’institution monarchique, publiés à partir du 24 août dans le quotidien français Le Monde.', 'size': 3}, {'id': '177', 'title': 'L’ANME condamne le «\xa0caractère mensonger et tendancieux\xa0» des articles du journal Le Monde', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/lanme-condamne-le-caractere-mensonger-et-tendancieux-des-articles-du-journal-le-monde/', 'summary': 'L’ANME condamne le « caractère mensonger et tendancieux » des articles du journal Le Monde. L’Association Nationale des Médias et des Editeurs (ANME), a fermement condamné, ce mercredi 27 août 2025 la série d’articles publiés par le quotidien français « Le Monde », dont elle dénonce le caractère mensonger et diffamatoire à l’égard du Roi Mohammed VI et de l’Institution monarchique. La plus grande Association des patrons de presse marocaine dénonce avec ', 'size': 3}], 'main_title': 'L’ANME dénonce une dérive journalistique du journal Le Monde'}, {'community_id': '4', 'articles': [{'id': '131', 'title': 'Nasser Bourita : La Vision Royale consacre la mer comme vecteur essentiel de prospérité nationale', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/nasser-bourita-la-vision-royale-consacre-la-mer-comme-vecteur-essentiel-de-prosperite-nationale-de-lien-continental-et-de-defense-de-la-souverainete.html', 'summary': 'Nasser Bourita : La Vision Royale consacre la mer comme vecteur essentiel de prospérité nationale. La Vision Royale consacre la mer comme vecteur essentiel de prospérité nationale, de lien continental et de défense de la souveraineté, a souligné mardi à Rabat, le ministre des Affaires étrangères, de la Coopération africaine et des Marocains résidant à l’étranger, Nasser Bourita. Dans une allocution lue en son nom à l’ouverture d’un séminaire sous . L’article est apparu en premier sur .', 'size': 3}, {'id': '139', 'title': 'Bourita : La Vision Royale fait de la mer un pilier de souveraineté et de prospérité', 'source': 'lnt.ma', 'link': 'https://lnt.ma/bourita-la-vision-royale-fait-de-la-mer-un-pilier-de-souverainete-et-de-prosperite/', 'summary': 'Bourita : La Vision Royale fait de la mer un pilier de souveraineté et de prospérité. La Vision Royale consacre la mer comme vecteur essentiel de prospérité nationale, de lien continental et de défense de la souveraineté, a souligné, mardi à Rabat, le ministre des Affaires étrangères, de la Coopération africaine et des Marocains résidant à l’étranger, Nasser Bourita. Dans une allocution lue en son nom à l’ouverture d’un séminaire sous . ', 'size': 3}, {'id': '172', 'title': 'Nasser Bourita : La Vision Royale consacre la mer comme vecteur essentiel de prospérité nationale, de lien continental et de défense de la souveraineté', 'source': 'www.libe.ma', 'link': 'https://www.libe.ma/Nasser-Bourita-La-Vision-Royale-consacre-la-mer-comme-vecteur-essentiel-de-prosperite-nationale-de-lien-continental-et_a155463.html', 'summary': 'Nasser Bourita : La Vision Royale consacre la mer comme vecteur essentiel de prospérité nationale, de lien continental et de défense de la souveraineté.', 'size': 3}], 'main_title': 'Nasser Bourita : La Vision Royale consacre la mer comme vecteur essentiel de prospérité nationale'}, {'community_id': '8', 'articles': [{'id': '149', 'title': "Exportations d'oignons : une saison record et de nouveaux marchés conquis", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/438869-exportations-doignons-une-saison-record-et-de-nouveaux-marches-conquis.html', 'summary': "Exportations d'oignons : une saison record et de nouveaux marchés conquis. Après une année marquée par des restrictions, les exportations d’oignons frais du Maroc ont explosé, atteignant des niveaux historiques et ouvrant de nouvelles perspectives commerciales, notamment au Moyen-Orient. Selon les données du Global Trade Tracker relayées par la plateforme spécialisée EastFruit, le Royaume a expédié pas moins de 64.900 tonnes d’oignons frais entre juin 2024 . ", 'size': 2}, {'id': '167', 'title': "Maroc : Les exportations d'oignons atteignent un niveau record jusqu'en mai 2025", 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/175060/maroc-exportations-d-oignons-atteignent-niveau.html', 'summary': "Maroc : Les exportations d'oignons atteignent un niveau record jusqu'en mai 2025. Les exportations doignons frais du Maroc ont atteint des niveaux records suite à la levée des restrictions en 2024. Selon EastFruit, entre juin 2024 et mai 2025, le pays a expédié 64 900 tonnes doignons pour une valeur de 238 millions de dollars, soit une augmentation de 4,8 fois par rapport à la saison précédente et 3% de plus que le record de 2022/23.", 'size': 2}], 'main_title': "Exportations d'oignons : une saison record et de nouveaux marchés conquis"}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
                        
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ? d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        // Fonction pour cacher le tooltip
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = '';
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
    
    
</body>




</html>
    