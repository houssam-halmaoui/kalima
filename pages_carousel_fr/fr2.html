<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); 
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title"> Les principales actualités des dernières 24 heures

</div>    
        <div class="header-subtitle"> Dernière mise à jour : 29/08/2025 - 12h26</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"></div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '9', 'articles': [{'id': '0', 'title': 'Rapport : 7.500 millionnaires et 4 milliardaires, la richesse privée explose en dix ans au Maroc', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/439031-rapport-7-500-millionnaires-et-4-milliardaires-la-richesse-privee-explose-en-dix-ans-au-maroc.html', 'summary': 'Rapport : 7.500 millionnaires et 4 milliardaires, la richesse privée explose en dix ans au Maroc. Au cours de la dernière décennie, le Maroc a connu l’une des plus remarquables croissances de la richesse privée sur le continent africain, selon le rapport sur la richesse en Afrique 2025, publié par l’institution Henley & Partners en partenariat avec la société New World Wealth. Le rapport révèle que le nombre de personnes très . ', 'size': 2}, {'id': '60', 'title': 'Le Maroc compte 7500 millionnaires en 2025, le 3ème en Afrique', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Le-Maroc-compte-7500-millionnaires-en-2025-le-3eme-en-Afrique_a71173.html', 'summary': 'Le Maroc compte 7500 millionnaires en 2025, le 3ème en Afrique. Le continent africain a perdu 12.700 millionnaires en dollars à fin juin 2025 par rapport à l’année précédente, révèle l’édition 2025 de l’Africa Wealth Report, publiée par le cabinet international Henley & Partners en collaboration avec le spécialiste de la veille patrimoniale New World Wealth. Le Maroc conserve sa 3ème place dans le podium. Détails.', 'size': 2}], 'main_title': 'Rapport : 7.500 millionnaires et 4 milliardaires, la richesse privée explose en dix ans au Maroc'}, {'community_id': '1', 'articles': [{'id': '7', 'title': 'Ouahbi signe avec son homologue irakien un accord relatif au transfert des personnes condamnées', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/439014-ouahbi-signe-avec-son-homologue-irakien-un-accord-relatif-au-transfert-des-personnes-condamnees.html', 'summary': 'Ouahbi signe avec son homologue irakien un accord relatif au transfert des personnes condamnées. Dans le cadre des relations fraternelles et de coopération qui unissent le Royaume du Maroc et la République d’Irak, le Ministre de la Justice, Abdellatif Ouahbi, a reçu ce jeudi 28 août 2025, au siège du ministère à Rabat, son homologue irakien Khaled Shawani, accompagné d’une délégation officielle de haut niveau, dans le cadre d’une . ', 'size': 4}, {'id': '50', 'title': "Le Maroc et l'Irak signent un accord de transfert des personnes condamnées", 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Le-Maroc-et-l-Irak-signent-un-accord-de-transfert-des-personnes-condamnees_a71180.html', 'summary': "Le Maroc et l'Irak signent un accord de transfert des personnes condamnées. Le Ministre de la Justice, Abdellatif Ouahbi, a reçu ce jeudi 28 août 2025, au siège du ministère à Rabat, son homologue irakien, Khaled Shawani, accompagné d’une délégation officielle de haut niveau, dans le cadre d’une visite de travail officielle au Maroc, prévue du 27 au 31 août 2025.", 'size': 4}, {'id': '175', 'title': "Terrorisme: le Maroc et l'Irak signent un accord sur le transfert des prisonniers", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/29/terrorisme-le-maroc-et-lirak-signent-un-accord-sur-le-transfert-des-prisonniers_1947961/', 'summary': "Terrorisme: le Maroc et l'Irak signent un accord sur le transfert des prisonniers. Le Maroc et la République d’Irak ont conclu, jeudi à Rabat, une convention de coopération en matière de transfèrement des personnes condamnées à des peines privatives de liberté, ainsi qu’un mémorandum d’entente relatif à la coopération dans le domaine des peines alternatives. Signée par le ministre de la Justice, Abdellatif Ouahbi, et son homologue irakien,.", 'size': 5}, {'id': '184', 'title': 'Le Maroc et l’Irak renforcent leur coopération judiciaire', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/175224/maroc-l-irak-renforcent-leur-cooperation.html', 'summary': 'Le Maroc et l’Irak renforcent leur coopération judiciaire. Le Maroc et l’Irak ont conclu, jeudi à Rabat, une convention de coopération en matière de transfèrement des personnes condamnées à des peines privatives de liberté, ainsi qu’un mémorandum d’entente relatif à la coopération dans le domaine des peines alternatives.', 'size': 3}, {'id': '212', 'title': 'Le Maroc et l’Irak renforcent leur coopération dans le domaine judiciaire', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/le-maroc-et-lirak-renforcent-leur-cooperation-dans-le-domaine-judiciaire/', 'summary': 'Le Maroc et l’Irak renforcent leur coopération dans le domaine judiciaire. Le Maroc et la République d’Irak ont conclu, jeudi à Rabat, une convention de coopération en matière de transfèrement des personnes condamnées à des peines privatives de liberté, ainsi qu’un mémorandum d’entente relatif à la coopération dans le domaine des peines alternatives. Signée par le ministre de la Justice, Abdellatif Ouahbi, et son homologue irakien, .', 'size': 5}], 'main_title': "Terrorisme: le Maroc et l'Irak signent un accord sur le transfert des prisonniers"}, {'community_id': '14', 'articles': [{'id': '15', 'title': 'Qualifications Mondial 2026 : De nouveaux visages sur la liste de Regragui face au Niger et à la Zambie', 'source': 'lematin.ma', 'link': 'https://lematin.ma/videos/de-nouveaux-visages-sur-la-liste-de-regragui-face-au-niger-et-a-la-zambie/298622', 'summary': 'Qualifications Mondial 2026 : De nouveaux visages sur la liste de Regragui face au Niger et à la Zambie. Walid Regragui a convoqué 27 joueurs pour affronter le Niger et la Zambie en éliminatoires de la Coupe du Monde 2026. La liste inclut la première convocation de Neil El Aynaoui, no.', 'size': 3}, {'id': '47', 'title': 'Qualifications Mondial 2026 - Walid Regragui : « Face au Niger, le Maroc a tout pour gagner »', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Qualifications-Mondial-2026-Walid-Regragui-Face-au-Niger-le-Maroc-a-tout-pour-gagner_a71184.html', 'summary': 'Qualifications Mondial 2026 - Walid Regragui : « Face au Niger, le Maroc a tout pour gagner ». Le sélectionneur national, Walid Regragui, a affirmé jeudi, que le match de l’équipe du Maroc face à son homologue du Niger, le 5 septembre à Rabat pour le compte des qualifications africaines au Mondial 2026, « ne sera pas de tout repos » face à une équipe qui « sait bien défendre ».', 'size': 4}, {'id': '79', 'title': 'Qualifications Mondial-2026 : Walid Regragui convoque 27 joueurs pour le match Maroc-Niger', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/28/qualifications-mondial-2026-walid-regragui-convoque-27-joueurs-pour-le-match-maroc-niger_1947841/', 'summary': 'Qualifications Mondial-2026 : Walid Regragui convoque 27 joueurs pour le match Maroc-Niger. Le sélectionneur national Walid Regragui a convoqué 27 joueurs afin de prendre part au match qui mettra aux prises les sélections marocaines et nigérienne, le 5 septembre prochain au complexe sportif Prince Moulay Abdellah à Rabat, pour le compte de la 7è journée (groupe E) des qualifications africaines de la Coupe du monde 2026. La.', 'size': 4}, {'id': '144', 'title': 'Qualif. Mondial 2026 (7è j/Gr-E) | Face au Niger, le Maroc a tout pour gagner (Regragui)', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/qualif-mondial-2026-7e-j-gr-e-face-au-niger-le-maroc-a-tout-pour-gagner-regragui/', 'summary': 'Qualif. Mondial 2026 (7è j/Gr-E) | Face au Niger, le Maroc a tout pour gagner (Regragui). Le sélectionneur national, Walid Regragui, a affirmé jeudi, que le match de l’équipe du Maroc face à son homologue du Niger, le 5 septembre à Rabat pour le compte des qualifications africaines au Mondial 2026, “ne sera pas de tout repos” face à une équipe qui “sait bien défendre”. “C’est difficile de marquer contre cette ', 'size': 3}], 'main_title': 'Qualifications Mondial 2026 - Walid Regragui : « Face au Niger, le Maroc a tout pour gagner »'}, {'community_id': '3', 'articles': [{'id': '29', 'title': 'Le Dislog Maroc Padel Masters revient à Casablanca pour une 5e édition', 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/le-dislog-maroc-padel-masters-revient-a-casablanca-pour-une-5e-edition/298591', 'summary': 'Le Dislog Maroc Padel Masters revient à Casablanca pour une 5e édition. Placé sous l’égide de la Fédération Royale marocaine de tennis (FRMT), le Dislog Maroc Padel Masters (DMPM) tiendra sa cinquième édition du 5 au 7 septembre 2025 au Club Paradise d.', 'size': 2}, {'id': '131', 'title': 'Le Dislog Maroc Padel Masters revient au Paradise de Casablanca', 'source': 'leseco.ma', 'link': 'https://leseco.ma/sports/le-dislog-maroc-padel-masters-revient-au-paradise-de-casablanca.html', 'summary': 'Le Dislog Maroc Padel Masters revient au Paradise de Casablanca. Après une saison 2025 déjà riche en émotions et marquée par des étapes à succès, le Dislog Maroc Padel Masters (DMPM) revient au Club Paradise de Casablanca, du 5 au 7 septembre 2025, pour une nouvelle édition qui s’annonce encore plus intense. ', 'size': 2}], 'main_title': 'Le Dislog Maroc Padel Masters revient à Casablanca pour une 5e édition'}, {'community_id': '4', 'articles': [{'id': '30', 'title': 'Royal Air Maroc, transporteur officiel de la Biennale de Sao Paulo', 'source': 'lematin.ma', 'link': 'https://lematin.ma/culture/royal-air-maroc-transporteur-officiel-de-la-biennale-de-sao-paulo/298539', 'summary': 'Royal Air Maroc, transporteur officiel de la Biennale de Sao Paulo. Un communiqué de la représentation de la RAM au Brésil indique que ce partenariat inédit positionne la compagnie aérienne marocaine comme un lien logistique et culturel entre l#39.', 'size': 2}, {'id': '87', 'title': 'Royal air Maroc devient transporteur officiel de la Biennale de São Paulo', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/175207/royal-maroc-devient-transporteur-officiel.html', 'summary': 'Royal air Maroc devient transporteur officiel de la Biennale de São Paulo. La compagnie nationale Royal air Maroc (RAM) sera le transporteur officiel de la 36e Biennale de São Paulo, principal événement dart contemporain en Amérique latine qui se tiendra du 6 septembre 2025 au 11 janvier 2026.', 'size': 2}], 'main_title': 'Royal Air Maroc, transporteur officiel de la Biennale de Sao Paulo'}, {'community_id': '5', 'articles': [{'id': '33', 'title': 'Enseignement supérieur : un front contestataire étudiant prend forme contre le projet de loi 59.24', 'source': 'lematin.ma', 'link': 'https://lematin.ma/enseignement/enseignement-superieur-un-front-contestataire-etudiant-prend-forme/298594', 'summary': "Enseignement supérieur : un front contestataire étudiant prend forme contre le projet de loi 59.24. Au moment où le Conseil du gouvernement s’apprêtait à examiner jeudi le projet de loi 59.24 régissant l'enseignement supérieur, la recherche scientifique et l'innovation, l.", 'size': 2}, {'id': '111', 'title': 'Enseignement supérieur : Le projet de loi 59.24 adopté en Conseil de gouvernement', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/au-royaume/enseignement-superieur-le-projet-de-loi-59-24-adopte-en-conseil-de-gouvernement/', 'summary': 'Enseignement supérieur : Le projet de loi 59.24 adopté en Conseil de gouvernement. Ce texte vise notamment à renforcer le rôle fondamental de l’enseignement supérieur et de la recherche scientifique dans la réalisation des priorités de développement et sa contribution à la formation d’un capital humain qualifié.', 'size': 2}], 'main_title': 'Enseignement supérieur : un front contestataire étudiant prend forme contre le projet de loi 59.24'}, {'community_id': '18', 'articles': [{'id': '44', 'title': 'USA : Vol test réussi pour la mégafusée Starship de SpaceX', 'source': 'lematin.ma', 'link': 'https://lematin.ma/monde/usa-vol-test-reussi-pour-la-megafusee-starship-de-spacex/298483', 'summary': 'USA : Vol test réussi pour la mégafusée Starship de SpaceX. Le vaisseau, haut de plus de 120 mètres, a décollé mardi soir du Texas peu après 18H30 locales (23H30 GMT) après des reports dimanche et lundi causés par des problèmes techniques.*.', 'size': 2}, {'id': '139', 'title': 'USA : vol test réussi pour la mégafusée Starship de SpaceX', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/usa-vol-test-reussi-pour-la-megafusee-starship-de-spacex.html', 'summary': 'USA : vol test réussi pour la mégafusée Starship de SpaceX. La mégafusée Starship, développée par la société astronautique SpaceX pour aller sur la Lune et Mars, a réussi son 10e vol test après plusieurs échecs et une série d’essais entachés d’explosions. Le vaisseau, haut de plus de 120 mètres, a décollé mardi soir du Texas peu après 18H30 locales (23H30 GMT) après des reports dimanche . L’article est apparu en premier sur .', 'size': 2}], 'main_title': 'USA : Vol test réussi pour la mégafusée Starship de SpaceX'}, {'community_id': '10', 'articles': [{'id': '69', 'title': 'Construction : les ventes de ciment augmentent de 11% à fin juillet', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/28/construction-les-ventes-de-ciment-augmentent-de-11-a-fin-juillet_1947937/', 'summary': 'Construction : les ventes de ciment augmentent de 11% à fin juillet. Les ventes de ciment, principal baromètre de l’activité de construction, se sont accrues de 11% au terme des sept premiers mois de 2025, au lieu d’une augmentation de 6,8% un an plus tôt, selon la Direction des études et des prévisions financières (DEPF). Cette consolidation revient au renforcement des livraisons dans les segments du béton.', 'size': 3}, {'id': '107', 'title': 'Secteur du tourisme: L’élan se poursuit à fin juillet', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/affaires/secteur-du-tourisme-lelan-se-poursuit-a-fin-juillet/', 'summary': "Secteur du tourisme: L’élan se poursuit à fin juillet. Le secteur du tourisme, après une amélioration de sa valeur ajoutée de 9,7% au premier trimestre 2025, au lieu d'une hausse de 3,2% un an auparavant, a poursuivi son élan au cours des mois suivants, relève la Direction des études et des prévisions financières (DEPF).", 'size': 4}, {'id': '153', 'title': "Téléphonie mobile : 58,8 millions d'abonnés à fin juin 2025", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/439061-telephonie-mobile-588-millions-dabonnes-a-fin-juin-2025.html', 'summary': "Téléphonie mobile : 58,8 millions d'abonnés à fin juin 2025. Le parc de la téléphonie mobile s’est élevé à 58,8 millions d’abonnés au cours des six premiers mois de cette année, en hausse de 3,2% par rapport à la même période en 2024, selon la Direction des études et des prévisions financières (DEPF). « Au terme du premier semestre 2025, le parc de la téléphonie mobile . ", 'size': 3}, {'id': '207', 'title': 'Secteur du tourisme : l’élan se poursuit à fin juillet 2025', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/secteur-du-tourisme-lelan-se-poursuit-a-fin-juillet-2025/', 'summary': 'Secteur du tourisme : l’élan se poursuit à fin juillet 2025. Le secteur du tourisme, après une amélioration de sa valeur ajoutée de 9,7% au premier trimestre 2025, au lieu d’une hausse de 3,2% un an auparavant, a poursuivi son élan au cours des mois suivants, relève la Direction des études et des prévisions financières (DEPF). La destination « Maroc » a, en effet, confirmé son attractivité au .', 'size': 2}], 'main_title': 'Secteur du tourisme: L’élan se poursuit à fin juillet'}, {'community_id': '11', 'articles': [{'id': '70', 'title': 'Bovins : suspension des droits d’importation et mobilisation de 11 milliards de DH pour soutenir le cheptel', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/28/bovins-suspension-des-droits-dimportation-et-mobilisation-de-11-milliards-de-dh-pour-soutenir-le-cheptel_1947920/', 'summary': 'Bovins : suspension des droits d’importation et mobilisation de 11 milliards de DH pour soutenir le cheptel. Le Conseil de gouvernement, réuni jeudi à Rabat, a adopté le projet de décret portant suspension de la perception du droit d’importation applicable aux bovins domestiques. Présenté par le ministre de l’Agriculture, de la Pêche maritime, du Développement rural et des Eaux et forêts, Ahmed Bouari, au nom du ministre délégué chargé du Budget, Fouzi.', 'size': 3}, {'id': '105', 'title': 'El Bouari met en avant l’efficacité des initiatives Royales visant à préserver le cheptel national', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/affaires/agriculture/el-bouari-met-en-avant-lefficacite-des-initiatives-royales-visant-a-preserver-le-cheptel-national/', 'summary': "El Bouari met en avant l’efficacité des initiatives Royales visant à préserver le cheptel national. Le ministre de l’Agriculture, de la Pêche maritime, du Développement rural et des Eaux et Forêts, Ahmed El Bouari, a mis en avant, jeudi à Rabat, l'efficacité des initiatives de Sa Majesté le Roi Mohammed VI visant à préserver le cheptel national durant les années de sécheresse sévère.", 'size': 3}, {'id': '224', 'title': 'El Bouari : les mesures Royales ont permis de préserver le cheptel national', 'source': 'lnt.ma', 'link': 'https://lnt.ma/el-bouari-les-mesures-royales-ont-permis-de-preserver-le-cheptel-national/', 'summary': 'El Bouari : les mesures Royales ont permis de préserver le cheptel national. Le ministre de l’Agriculture, de la Pêche maritime, du Développement rural et des Eaux et Forêts, Ahmed El Bouari, a mis en avant, jeudi à Rabat, l’efficacité des initiatives de SM le Roi Mohammed VI visant à préserver le cheptel national durant les années de sécheresse sévère. Intervenant lors d’un point de presse tenu à . ', 'size': 3}], 'main_title': 'Bovins : suspension des droits d’importation et mobilisation de 11 milliards de DH pour soutenir le cheptel'}, {'community_id': '12', 'articles': [{'id': '71', 'title': 'Le général Mohammed Berrid reçoit à Agadir, le commandant de la Minurso', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/28/le-general-mohammed-berrid-recoit-a-agadir-le-commandant-de-la-minurso_1947904/', 'summary': 'Le général Mohammed Berrid reçoit à Agadir, le commandant de la Minurso. Le Général Mohammed Berrid, Inspecteur Général des FAR et Commandant la Zone Sud, a reçu jeudi à Agadir le Commandant de la mission onusienne dans les provinces Sud pour examiner la coordination opérationnelle et sécuritaire entre les deux forces. Dans le cadre des rencontres périodiques entre les Forces Armées Royales et la mission des Nations.', 'size': 3}, {'id': '109', 'title': 'Mohammed Berrid s’entretient avec le commandant de la Force de la mission onusienne dans les Provinces Sud', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/pouvoirs/securite/mohammed-berrid-sentretient-avec-le-commandant-de-la-force-de-la-mission-onusienne-dans-les-provinces-sud/', 'summary': "Mohammed Berrid s’entretient avec le commandant de la Force de la mission onusienne dans les Provinces Sud. La rencontre entre l'Inspecteur Général des FAR et Fakhrul Ahsan s'est tenue à Agadir, au siège de l’Etat-Major de la Zone Sud.", 'size': 2}, {'id': '141', 'title': 'L’inspecteur général des FAR Mohammed Berrid reçoit à Agadir le commandant de la force MINURSO', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/linspecteur-general-des-far-mohammed-berrid-recoit-a-agadir-le-commandant-de-la-force-minurso/', 'summary': 'L’inspecteur général des FAR Mohammed Berrid reçoit à Agadir le commandant de la force MINURSO. Dans le cadre des rencontres périodiques entre les Forces Armées Royales et la Mission des Nations Unies dans les provinces Sud du Royaume, le Général de Corps d’Armée, Mohammed Berrid, Inspecteur Général des FAR et Commandant la Zone Sud, a reçu, jeudi au siège de l’Etat-Major de la Zone Sud à Agadir, le Général de Division ', 'size': 2}], 'main_title': 'Le général Mohammed Berrid reçoit à Agadir, le commandant de la Minurso'}, {'community_id': '15', 'articles': [{'id': '75', 'title': 'Crimes fictifs et faux documents : diffamé sur les réseaux sociaux, un policier attaque le compte "Jabaroot" en justice', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/28/crimes-fictifs-et-faux-documents-diffame-sur-les-reseaux-sociaux-un-policier-attaque-le-compte-jabaroot-en-justice_1947852/', 'summary': 'Crimes fictifs et faux documents : diffamé sur les réseaux sociaux, un policier attaque le compte "Jabaroot" en justice. Un fonctionnaire de police porte plainte contre un compte intitulé « Jabaroot » sur les réseaux sociaux, pour diffamation et usurpation d’identité, après avoir été accusé à tort de crimes fictifs sur les plateformes. Le Pôle de la Direction Générale de la Sûreté Nationale et de la Direction Générale de la Surveillance du Territoire (DGSN-DGST) a indiqué,.', 'size': 2}, {'id': '114', 'title': 'Police : Un fonctionnaire porte plainte suite à des allégations mensongères et crimes fictifs', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/influences/societe/police-un-fonctionnaire-porte-plainte-suite-a-des-allegations-mensongeres-et-crimes-fictifs/', 'summary': 'Police : Un fonctionnaire porte plainte suite à des allégations mensongères et crimes fictifs. Le fonctionnaire de police (A. N.) a déposé une plainte auprès du Procureur Général du Roi près la Cour d’Appel de Casablanca, suite aux allégations mensongères et aux crimes fictifs qui lui ont été attribués par un compte sur les réseaux sociaux, intitulé "Jabaroot"', 'size': 2}, {'id': '124', 'title': 'Un policier porte plainte après des allégations mensongères sur les réseaux sociaux', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/un-policier-porte-plainte-apres-des-allegations-mensongeres-sur-les-reseaux-sociaux/', 'summary': 'Un policier porte plainte après des allégations mensongères sur les réseaux sociaux. Le Pôle de la Direction Générale de la Sûreté Nationale et de la Direction Générale de la Surveillance du Territoire (DGSN-DGST) a indiqué, jeudi, que le fonctionnaire de police (A. N.) a déposé une plainte auprès du Procureur Général du Roi près la Cour d’Appel de Casablanca, suite aux allégations mensongères et aux crimes fictifs .', 'size': 3}], 'main_title': 'Un policier porte plainte après des allégations mensongères sur les réseaux sociaux'}, {'community_id': '17', 'articles': [{'id': '80', 'title': "L'ANME dénonce vigoureusement les articles du Monde contre le Roi Mohammed VI", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/28/lanme-denonce-vigoureusement-les-articles-du-monde-contre-le-roi-mohammed-vi_1947826/', 'summary': "L'ANME dénonce vigoureusement les articles du Monde contre le Roi Mohammed VI. L’Association nationale des médias et des éditeurs (ANME) a publié mardi un communiqué dénonçant « avec la plus grande vigueur la série d’articles à charge contre le roi du Maroc Mohammed VI et l’institution monarchique, publiés à partir du 24 août dans le quotidien français « Le Monde » ». Selon l’association, « ces articles.", 'size': 2}, {'id': '95', 'title': 'L’ANME dénonce le journal «Le Monde» : Une réponse ferme suite à la publication d’articles à charge contre l’Institution monarchique', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/actualite/lanme-denonce-le-journal-le-monde-une-reponse-ferme-suite-a-la-publication-darticles-a-charge-contre-linstitution-monarchique', 'summary': 'L’ANME dénonce le journal «Le Monde» : Une réponse ferme suite à la publication d’articles à charge contre l’Institution monarchique. L’Association nationale des médias et des éditeurs (ANME) dénonce avec la plus grande vigueur la série d’articles à charge contre SM le Roi Mohammed VI et l’Institution monarchique, publiés à partir du 24 août dans le quotidien français «Le Monde». Ces articles ne relèvent pas de l’exercice journalistique et laisseront une tache indélébile dans .', 'size': 2}], 'main_title': "L'ANME dénonce vigoureusement les articles du Monde contre le Roi Mohammed VI"}, {'community_id': '16', 'articles': [{'id': '112', 'title': 'Corps enseignant: Approbation du projet de décret fixant les indemnités pour heures supplémentaires', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/pouvoirs/corps-enseignant-approbation-du-projet-de-decret-fixant-les-indemnites-pour-heures-supplementaires/', 'summary': 'Corps enseignant: Approbation du projet de décret fixant les indemnités pour heures supplémentaires. Le Conseil de gouvernement, réuni jeudi à Rabat, a approuvé le projet de décret n° 2.25.539 modifiant le décret n° 2.05.1012 du 5 Rabi II 1427H (3 mai 2006) relatif à la détermination des indemnités pour heures supplémentaires accordées au personnel enseignant.', 'size': 2}, {'id': '126', 'title': 'Heures supplémentaires : le gouvernement fixe les indemnités des cadres enseignants', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/heures-supplementaires-le-gouvernement-fixe-les-indemnites-des-cadres-enseignants/', 'summary': 'Heures supplémentaires : le gouvernement fixe les indemnités des cadres enseignants. Le Conseil de gouvernement, réuni jeudi à Rabat, a approuvé le projet de décret n° 2.25.539 modifiant le décret n° 2.05.1012 du 5 Rabi II 1427H (3 mai 2006) relatif à la détermination des indemnités pour heures supplémentaires accordées au personnel enseignant. Ce projet, qui a été présenté par le ministre de l’Éducation nationale, du .', 'size': 2}], 'main_title': 'Corps enseignant: Approbation du projet de décret fixant les indemnités pour heures supplémentaires'}, {'community_id': '2', 'articles': [{'id': '148', 'title': 'Mondial 2026: Regragui dévoile une liste mêlant cadres confirmés et nouveaux visages', 'source': 'lnt.ma', 'link': 'https://lnt.ma/mondial-2026-regragui-devoile-une-liste-melant-cadres-confirmes-et-nouveaux-visages/', 'summary': 'Mondial 2026: Regragui dévoile une liste mêlant cadres confirmés et nouveaux visages. Le sélectionneur national Walid Regragui a rendu publique, ce jeudi, la liste des joueurs convoqués pour les prochaines échéances des Lions de l’Atlas dans le cadre des éliminatoires de la Coupe du monde 2026. Fidèle à sa ligne de continuité, il maintient la présence de plusieurs cadres tout en ouvrant la porte à de nouvelles . ', 'size': 2}, {'id': '185', 'title': 'Eliminatoires de la Coupe du monde 2026: Regragui convoque El Aynaoui,  El Karouani et le gardien Al Harrar', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/sports/eliminatoires-de-la-coupe-du-monde-2026-regragui-convoque-el-aynaoui-el-karouani-et-le-gardien-al-harrar', 'summary': 'Eliminatoires de la Coupe du monde 2026: Regragui convoque El Aynaoui, El Karouani et le gardien Al Harrar. Très attendue, la nouvelle liste du sélectionneur national Walid Regragui a été dévoilée jeudi pour le compte des deux prochaines confrontations des Lions de l’Atlas rentrant dans le cadre des éliminatoires de la Coupe du monde 2026. Quelques jours seulement nous séparent du prochain rassemblement de la sélection nationale. Jeudi, le coach national Walid Regragui .', 'size': 2}], 'main_title': 'Mondial 2026: Regragui dévoile une liste mêlant cadres confirmés et nouveaux visages'}, {'community_id': '0', 'articles': [{'id': '155', 'title': "Mercato : Le LOSC officialise l'arrivée de Hamza Igamane", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/439049-mercato-le-losc-officialise-larrivee-de-hamza-igamane.html', 'summary': "Mercato : Le LOSC officialise l'arrivée de Hamza Igamane. C’est désormais acté. Le LOSC a officialisé de Hamza Igamane, en provenance des Glasgow Rangers. L’attaquant international marocain de 22 ans a signé un contrat de cinq saisons, le liant aux Dogues jusqu’en juin 2030. Pour le club nordiste, l’arrivée d’Igamane s’inscrit dans une volonté de densifier son attaque après les recrutements d’Olivier Giroud, Félix . ", 'size': 2}, {'id': '171', 'title': 'Hamza Igamane rejoint officiellement Lille jusqu’en 2030', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Hamza-Igamane-rejoint-officiellement-Lille-jusqu-en-2030_a71186.html', 'summary': 'Hamza Igamane rejoint officiellement Lille jusqu’en 2030. Le LOSC a annoncé ce vendredi la signature d’Hamza Igamane, attaquant de 22 ans en provenance des Glasgow Rangers. Révélation en Écosse, il s’engage jusqu’en 2030 afin de renforcer l’attaque lilloise.', 'size': 2}], 'main_title': "Mercato : Le LOSC officialise l'arrivée de Hamza Igamane"}, {'community_id': '13', 'articles': [{'id': '164', 'title': 'Auteur de Parasite, Bong Joon Ho présidera le jury de la 22ème édition du FIFM', 'source': 'lematin.ma', 'link': 'https://lematin.ma/culture/bong-joon-ho-presidera-le-jury-du-festival-de-marrakech-2025/298682', 'summary': 'Auteur de Parasite, Bong Joon Ho présidera le jury de la 22ème édition du FIFM. C’est un coup d’éclat pour le Festival International du Film de Marrakech. Pour sa 22e édition, prévue du 28 novembre au 6 décembre 2025, le prestigieux rendez-vous du 7e art au Ma.', 'size': 3}, {'id': '176', 'title': 'Le réalisateur sud-coréen Bong Joon Ho, président de la 22e édition du Festival international du film de Marrakech', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/29/le-realisateur-sud-coreen-bong-joon-ho-president-de-la-22e-edition-du-festival-international-du-film-de-marrakech_1947975/', 'summary': 'Le réalisateur sud-coréen Bong Joon Ho, président de la 22e édition du Festival international du film de Marrakech. Bong Joon Ho, le réalisateur sud-coréen oscarisé pour « Parasite » et entré dans l’histoire comme premier cinéaste non anglophone à remporter l’Oscar du Meilleur film, présidera le jury de la 22e édition du Festival international du film de Marrakech, du 28 novembre au 6 décembre 2025. Le réalisateur sud-coréen, Bong Joon Ho, couronné par les plus.', 'size': 4}, {'id': '182', 'title': 'FIFM 2025 : Le réalisateur oscarisé Bong Joon Ho préside le jury', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/175235/fifm-2025-realisateur-oscarise-bong.html', 'summary': 'FIFM 2025 : Le réalisateur oscarisé Bong Joon Ho préside le jury. La 22e édition du Festival international du film de Marrakech (FIFM 2025), qui se tient du 28 novembre au 6 décembre prochain, aura comme président de jury le réalisateur sud–coréen Bong Joon Ho. «Son jury décernera l’Étoile d’or à l’un des 14 premiers et seconds longs métrages de la compétition internationale, dédiée à la découverte de cinéastes à travers le monde», a annoncé ce vendredi un communiqué des organisateurs.', 'size': 4}, {'id': '201', 'title': 'FIFM 2025: Le réalisateur sud-coréen Bong Joon Ho, président du jury', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/influences/culture/fifm-2025-le-realisateur-sud-coreen-bong-joon-ho-president-du-jury/', 'summary': 'FIFM 2025: Le réalisateur sud-coréen Bong Joon Ho, président du jury. Le réalisateur sud-coréen, distingué par les plus prestigieuses récompenses internationales, de la Palme d’or aux Oscars en passant par les Golden Globes et les Bafta, est entré dans l’histoire en devenant, avec son film "Parasite", le premier cinéaste non anglophone à remporter l’Oscar du Meilleur film.', 'size': 2}, {'id': '225', 'title': 'Bong Joon Ho présidera le jury du Festival de Marrakech 2025', 'source': 'lnt.ma', 'link': 'https://lnt.ma/bong-joon-ho-presidera-le-jury-du-festival-de-marrakech-2025/', 'summary': 'Bong Joon Ho présidera le jury du Festival de Marrakech 2025. Le réalisateur sud-coréen, Bong Joon Ho, couronné par les plus grands prix internationaux dont l’Oscar, présidera le jury de la 22e édition du Festival international du film de Marrakech, prévue du 28 novembre au 6 décembre 2025. Le jury de cette édition décernera l’Étoile d’or à l’un des 14 premiers et seconds longs métrages de . ', 'size': 4}], 'main_title': 'Le réalisateur sud-coréen Bong Joon Ho, président de la 22e édition du Festival international du film de Marrakech'}, {'community_id': '6', 'articles': [{'id': '174', 'title': 'Epson annonce une offre exclusive autour de sa gamme EcoTank pour soutenir l’apprentissage des jeunes', 'source': 'telquel.ma', 'link': 'https://telquel.ma/sponsors/epson-annonce-une-offre-exclusive-autour-de-sa-gamme-ecotank-pour-soutenir-lapprentissage-des-jeunes_1948024', 'summary': 'Epson annonce une offre exclusive autour de sa gamme EcoTank pour soutenir l’apprentissage des jeunes. Deux mois après l’annonce de son partenariat régional avec l’icône mondiale de la musique Shakira, également engagée en faveur de l’éducation et de l’inclusion des enfants dans les régions défavorisées, Epson inscrit cette rentrée scolaire sous le signe de l’innovation, de la créativité et du soutien à la jeunesse. La marque déploie ainsi une initiative.', 'size': 2}, {'id': '203', 'title': 'Rentrée scolaire : Epson soutient l’apprentissage numérique  avec sa gamme EcoTank', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/comese/rentree-scolaire-epson-soutient-lapprentissage-numerique-avec-sa-gamme-ecotank/', 'summary': 'Rentrée scolaire : Epson soutient l’apprentissage numérique avec sa gamme EcoTank. Deux mois après l’annonce de son partenariat régional avec l’icône mondiale de la musique Shakira, également engagée en faveur de l’éducation et de l’inclusion des enfants dans les régions défavorisées, Epson inscrit cette rentrée scolaire sous le signe de l’innovation, de la créativité et du soutien à la jeunesse.', 'size': 2}], 'main_title': 'Epson annonce une offre exclusive autour de sa gamme EcoTank pour soutenir l’apprentissage des jeunes'}, {'community_id': '8', 'articles': [{'id': '177', 'title': 'Banques : un besoin de liquidité de 113 MMDH en juillet (DEPF)', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/29/banques-un-besoin-de-liquidite-de-113-mmdh-en-juillet-depf_1947957/', 'summary': 'Banques : un besoin de liquidité de 113 MMDH en juillet (DEPF). Le besoin en liquidité des banques a quasiment stagné, se situant en moyenne hebdomadaire à 113 milliards de dirhams (MMDH) au cours du mois de juillet 2025, contre 114 MMDH en juin dernier, selon la Direction des études et des prévisions financières (DEPF). Le volume des injections de liquidité de la Banque Centrale s’est établi.', 'size': 2}, {'id': '213', 'title': 'Banques : un besoin de liquidité de 113 MMDH en juillet', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/banques-un-besoin-de-liquidite-de-113-mmdh/', 'summary': 'Banques : un besoin de liquidité de 113 MMDH en juillet. Le besoin en liquidité des banques a quasiment stagné, se situant en moyenne hebdomadaire à 113 milliards de dirhams (MMDH) au cours du mois de juillet 2025, contre 114 MMDH en juin dernier, selon la Direction des études et des prévisions financières (DEPF). Le volume des injections de liquidité de la Banque Centrale s’est établi .', 'size': 2}], 'main_title': 'Banques : un besoin de liquidité de 113 MMDH en juillet (DEPF)'}, {'community_id': '7', 'articles': [{'id': '205', 'title': 'Industries manufacturières : Légère baisse de l’indice des prix à la production en juillet', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/affaires/industries-manufacturieres-legere-baisse-de-lindice-des-prix-a-la-production-en-juillet/', 'summary': 'Industries manufacturières : Légère baisse de l’indice des prix à la production en juillet. L’indice des prix à la production du secteur des « Industries manufacturières hors raffinage de pétrole » a enregistré une baisse de 0,1% au cours du mois de juillet 2025 par rapport à juin dernier, selon le Haut-Commissariat au plan (HCP).', 'size': 2}, {'id': '211', 'title': 'Industries manufacturières : baisse de l’indice des prix à la production de 0,1% en juillet', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/industries-manufacturieres-baisse-de-lindice-des-prix-a-la-production-de-01-en-juillet/', 'summary': 'Industries manufacturières : baisse de l’indice des prix à la production de 0,1% en juillet. L’indice des prix à la production du secteur des « Industries manufacturières hors raffinage de pétrole » a enregistré, en juillet 2025, une baisse de 0,1% par rapport au mois de juin dernier, selon le Haut-Commissariat au Plan (HCP). Ce repli est le résultat de la baisse des prix des « Industries alimentaires » de 0,4%, de « l’Industrie d’habillement » .', 'size': 2}], 'main_title': 'Industries manufacturières : Légère baisse de l’indice des prix à la production en juillet'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
                        
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ? d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        // Fonction pour cacher le tooltip
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = '';
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
    
    
</body>




</html>
    