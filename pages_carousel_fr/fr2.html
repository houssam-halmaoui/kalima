<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); 
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title"> Les principales actualités des dernières 24 heures

</div>    
        <div class="header-subtitle"> Dernière mise à jour : 18/08/2025 - 12h29</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"></div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '0', 'title': 'Les températures attendues ce lundi 18 août 2025', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/437925-les-temperatures-attendues-ce-lundi-18-aout-2025.html', 'summary': 'Les températures attendues ce lundi 18 août 2025. Voici les températures minimales et maximales prévues par la Direction générale de la météorologie pour le lundi 18 août 2025: Min Max – Oujda 24 42 – Bouarfa 23 37 – Al Hoceima 28 33 – Tétouan 23 37 – Sebta 21 29 – Mellilia 25 34 – Tanger 24 31 – Kénitra 21 33 . ', 'size': 2}, {'id': '59', 'title': 'Températures prévues pour le lundi 18 août 2025', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/temperatures-prevues-pour-le-lundi-18-aout-2025/', 'summary': 'Températures prévues pour le lundi 18 août 2025. Voici les températures minimales et maximales prévues par la Direction générale de la météorologie pour le lundi 18 août 2025: Min Max – Oujda 24 42 – Bouarfa 23 37 – Al Hoceima 28 33 – Tétouan 23 37 – Sebta 21 29 – Mellilia 25 34 – Tanger 24 31 – Kénitra 21 33 .', 'size': 2}], 'main_title': 'Les températures attendues ce lundi 18 août 2025'}, {'community_id': '1', 'articles': [{'id': '4', 'title': 'Sahara: La MINURSO accueille une délégation américaine', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/437928-sahara-la-minurso-accueille-une-delegation-americaine.html', 'summary': 'Sahara: La MINURSO accueille une délégation américaine. Une source onusienne a indiqué que le siège de la mission des Nations unies « MINURSO » à Laâyoune accueillera lundi, une délégation américaine relevant de l’ambassade des États-Unis à Rabat. La source a précisé que cette délégation, composée de diplomates et d’un responsable militaire de l’ambassade, se rendra dans les provinces du Sud pour . ', 'size': 2}, {'id': '48', 'title': 'Etats-Unis: Une délégation diplomatique et militaire attendue à Laayoune', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/174416/etats-unis-delegation-diplomatique-militaire-attendue.html', 'summary': 'Etats-Unis: Une délégation diplomatique et militaire attendue à Laayoune. Des diplomates et des militaires de lambassade des États-Unis à Rabat prévoient de se rendre à Laâyoune ce lundi 18 août. Au programme de leur visite, des réunions avec les hauts responsables de la MINURSO au Sahara, notamment le représentant spécial du secrétaire général des Nations unies pour le Sahara occidental et chef de la MINURSO, le Russe Alexander Ivanko.', 'size': 2}], 'main_title': 'Sahara: La MINURSO accueille une délégation américaine'}, {'community_id': '2', 'articles': [{'id': '6', 'title': 'Potasse de Khemisset : le tribunal arbitral attend la nomination de son président', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/437890-potasse-de-khemisset-le-tribunal-arbitral-attend-la-nomination-de-son-president.html', 'summary': 'Potasse de Khemisset : le tribunal arbitral attend la nomination de son président. Après la désignation par chaque partie de son arbitre, l’affaire opposant Khemisset UK Limited et Potasse de Khemisset S.A., filiales d’Emmerson, au Royaume du Maroc devant le CIRDI se trouve désormais en attente de la nomination de l’arbitre président, dernière étape avant le début effectif des débats substantiels. Le Centre international pour le règlement des . ', 'size': 2}, {'id': '35', 'title': 'Affaire Potasse au CIRDI : Zachary douglas nommé arbitre à la demande du Maroc', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Affaire-Potasse-au-CIRDI-Zachary-douglas-nomme-arbitre-a-la-demande-du-Maroc_a70877.html', 'summary': "Affaire Potasse au CIRDI : Zachary douglas nommé arbitre à la demande du Maroc. En pleine constitution du tribunal arbitral au CIRDI, le Maroc a désigné le juriste australien, Zachary Douglas en tant qu'arbitre dans le cadre du litige opposant le Royaume au groupe britannique Britannique Emmerson sur le projet de potasse à Khemisset.", 'size': 2}], 'main_title': 'Potasse de Khemisset : le tribunal arbitral attend la nomination de son président'}, {'community_id': '3', 'articles': [{'id': '8', 'title': "Un séisme de magnitude 5,8 sur Richter frappe l'Algérie", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/437920-un-seisme-de-magnitude-58-sur-richter-frappe-lalgerie.html', 'summary': "Un séisme de magnitude 5,8 sur Richter frappe l'Algérie. La chaîne de télévision algérienne Ennahar a annoncé qu’un séisme d’une magnitude de 5,8 sur l’échelle de Richter s’est produit à 10 kilomètres au sud-est de Nefrine, dans la wilaya de Tébessa, ce dimanche soir. Elle a précisé qu’une réplique d’une magnitude de 4,8 a suivi le séisme à Tébessa, localisée à 26 kilomètres au . ", 'size': 2}, {'id': '90', 'title': 'Un séisme de magnitude 5,8 frappe l’Algérie', 'source': 'lematin.ma', 'link': 'https://lematin.ma/monde/algerie-seisme-de-magnitude-58-enregistre-pas-de-pertes-signalees/296988', 'summary': 'Un séisme de magnitude 5,8 frappe l’Algérie. Un séisme de magnitude 5,8 sur l’échelle de Richter a été enregistré le 17 août à 20h11 dans la région de Négrine, à 10 kilomètres au sud-est de la wilaya de Tébessa, selon les don.', 'size': 2}], 'main_title': "Un séisme de magnitude 5,8 sur Richter frappe l'Algérie"}, {'community_id': '6', 'articles': [{'id': '21', 'title': 'Hassan Baraka devient le premier athlète marocain à boucler le tour de Manhattan à la nage', 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/hassan-baraka-premier-marocain-a-reussir-le-tour-de-manhattan-a-la-nage/296858', 'summary': 'Hassan Baraka devient le premier athlète marocain à boucler le tour de Manhattan à la nage. L’aventure s’est déroulée vendredi 15 août à New York. Parti en fin de matinée du sud de Manhattan, Hassan Baraka a parcouru les 48,5 km dans le sens inverse des aiguilles d’une mo.', 'size': 3}, {'id': '64', 'title': 'L’athlète marocain Hassan Baraka réussit l’exploit du tour de Manhattan à la nage', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/usa-lathlete-marocain-hassan-baraka-reussit-lexploit-du-tour-de-manhattan-a-la-nage.html', 'summary': 'L’athlète marocain Hassan Baraka réussit l’exploit du tour de Manhattan à la nage. L’athlète Hassan Baraka a accompli vendredi l’exploit du tour à la nage de l’île de Manhattan à New York sur une distance de 48,5 km devenant le premier Marocain à réussir cette performance. Baraka a entamé ce challenge vendredi en fin de matinée (heure locale) au sud de l’île de Manhattan, avant de faire le . L’article est apparu en premier sur .', 'size': 3}, {'id': '106', 'title': "Hassan Baraka réussit l'exploit du tour de Manhattan à la nage", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/18/hassan-baraka-reussit-lexploit-du-tour-de-manhattan-a-la-nage_1946747/', 'summary': "Hassan Baraka réussit l'exploit du tour de Manhattan à la nage. L’athlète Hassan Baraka a accompli vendredi 15 août l’exploit du tour à la nage de l’île de Manhattan, à New York, sur une distance de 48,5 km, devenant le premier Marocain à réussir cette performance. Baraka a entamé ce challenge vendredi en fin de matinée (heure locale) au sud de l’île de Manhattan, avant de.", 'size': 3}], 'main_title': 'Hassan Baraka devient le premier athlète marocain à boucler le tour de Manhattan à la nage'}, {'community_id': '10', 'articles': [{'id': '29', 'title': "\u200bSous les feux d'artifice: Clôture triomphale du Moussem Moulay Abdallah Amghar", 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/\u200bSous-les-feux-d-artifice-Cloture-triomphale-du-Moussem-Moulay-Abdallah-Amghar_a70884.html', 'summary': "\u200bSous les feux d'artifice: Clôture triomphale du Moussem Moulay Abdallah Amghar. L’édition 2025 du Moussem Moulay Abdellah Amghar s’est achevée ce samedi 16 août par un feu d’artifice monumental, illuminant le ciel de Moulay Abdellah sous les yeux subjugués de milliers de spectateurs. Cet épilogue féerique a couronné huit jours de festivités, confirmant le statut de l’événement comme le plus grand rassemblement culturel et religieux du Maroc, placé sous le Haut Patronage de Sa Majesté le Roi Mohammed VI .", 'size': 3}, {'id': '120', 'title': 'Clap de fin des festivités du Moussem Moulay Abdallah Amghar', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/culture/clap-de-fin-des-festivites-du-moussem-moulay-abdallah-amghar', 'summary': 'Clap de fin des festivités du Moussem Moulay Abdallah Amghar. Les festivités du Moussem Moulay Abdellah Amghar, l’une des plus importantes manifestations religieuses et culturelles du Royaume, ont pris fin samedi soir. La cérémonie de clôture de ce festival placé sous le Haut patronage de Sa Majesté le Roi Mohammed VI, a été marquée par l’organisation de prestations artistiques variées, dans une ambiance festive mêlant .', 'size': 3}, {'id': '146', 'title': 'El Jadida: Clap de fin des festivités du Moussem Moulay Abdallah Amghar', 'source': 'lnt.ma', 'link': 'https://lnt.ma/el-jadida-clap-de-fin-des-festivites-du-moussem-moulay-abdallah-amghar/', 'summary': 'El Jadida: Clap de fin des festivités du Moussem Moulay Abdallah Amghar. Les festivités du Moussem Moulay Abdellah Amghar, l’une des plus importantes manifestations religieuses et culturelles du Royaume, ont pris fin samedi soir. La cérémonie de clôture de ce festival placé sous le Haut Patronage de SM le Roi Mohammed VI a été marquée par l’organisation de prestations artistiques variées, dans une ambiance festive mêlant arts . ', 'size': 3}], 'main_title': "\u200bSous les feux d'artifice: Clôture triomphale du Moussem Moulay Abdallah Amghar"}, {'community_id': '9', 'articles': [{'id': '45', 'title': 'Championnat d’Afrique des nations\xa0de football: le Maroc file en quarts', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/championnat-dafrique-des-nations-de-football-le-maroc-file-en-quarts-308671/', 'summary': 'Championnat d’Afrique des nations de football: le Maroc file en quarts. La sélection marocaine des joueurs locaux s’est qualifiée pour les quarts de finale du Championnat d’Afrique des nations de football (CHAN), en battant la RD Congo par 3 buts à 1, en match comptant pour la 5e et dernière journée du groupe A, dimanche au stade Nyayo à Nairobi. Les', 'size': 5}, {'id': '52', 'title': 'CHAN-2024 : Le Maroc bat la RD Congo 3-1, se qualifie pour les quarts de finale', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/une/chan-2024-le-maroc-bat-la-rd-congo-3-1-se-qualifie-pour-les-quarts-de-finale', 'summary': 'CHAN-2024 : Le Maroc bat la RD Congo 3-1, se qualifie pour les quarts de finale. La sélection marocaine des joueurs locaux s’est qualifiée pour les quarts de finale du Championnat d’Afrique des nations de football (CHAN), en battant son homologue de la RD Congo par 3 buts à 1, en match de la 5e et dernière journée du groupe A, disputé dimanche au stade Nyayo à Nairobi. Les Lions de .', 'size': 5}, {'id': '54', 'title': 'CHAN-2024 : Le Maroc bat la RD Congo et se qualifie pour les quarts de finale', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/influences/chan-2024-le-maroc-bat-la-rd-congo-et-se-qualifie-pour-les-quarts-de-finale/', 'summary': 'CHAN-2024 : Le Maroc bat la RD Congo et se qualifie pour les quarts de finale. L’équipe nationale des joueurs locaux s’est imposée par 3 buts à 1 contre la RD Congo, lors de la dernière journée du groupe A.', 'size': 5}, {'id': '73', 'title': 'CHAN 2024 | Le Maroc bat la RD Congo 3-1 et se qualifie pour les quarts de finale', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/chan-2024-le-maroc-bat-la-rd-congo-3-1-et-se-qualifie-pour-les-quarts-de-finale/', 'summary': 'CHAN 2024 | Le Maroc bat la RD Congo 3-1 et se qualifie pour les quarts de finale. La sélection marocaine des joueurs locaux s’est qualifiée pour les quarts de finale du Championnat d’Afrique des nations de football (CHAN), en battant son homologue de la RD Congo par 3 buts à 1, en match de la 5e et dernière journée du groupe A, disputé dimanche au stade Nyayo à Nairobi. Les Lions de ', 'size': 5}, {'id': '107', 'title': 'CHAN : les Lions de l’Atlas en quarts de finale après avoir battu la RD Congo', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/18/chan-les-lions-de-latlas-en-quarts-de-finale-apres-avoir-battu-la-rd-congo_1946741/', 'summary': 'CHAN : les Lions de l’Atlas en quarts de finale après avoir battu la RD Congo. L’équipe nationale du Maroc des joueurs locaux s’est qualifiée pour les quarts de finale du Championnat d’Afrique des nations de football (CHAN), en dominant la RD Congo sur le score de 3 buts à 1, en match de la 5e et dernière journée du groupe A, disputé dimanche au stade Nyayo à Nairobi. Les Lions.', 'size': 5}], 'main_title': 'Championnat d’Afrique des nations\xa0de football: le Maroc file en quarts'}, {'community_id': '4', 'articles': [{'id': '76', 'title': 'Averses orageuses et vague de chaleur avec chergui, de lundi à mercredi dans plusieurs provinces', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/437940-averses-orageuses-et-vague-de-chaleur-avec-chergui-de-lundi-a-mercredi-dans-plusieurs-provinces.html', 'summary': 'Averses orageuses et vague de chaleur avec chergui, de lundi à mercredi dans plusieurs provinces. Des averses orageuses avec chutes de grêle et rafales de vent sous orages et une vague de chaleur, avec chergui et des températures variant entre 39 et 47 °C, sont attendues, du lundi 18 au mercredi 20 août, dans plusieurs provinces du Royaume, a annoncé la Direction générale de la météorologie (DGM). Ces averses orageuses . ', 'size': 5}, {'id': '99', 'title': 'Nouvelle vague de chaleur ce début de semaine dans plusieurs régions du Maroc', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/18/nouvelle-vague-de-chaleur-ce-debut-de-semaine-dans-plusieurs-regions-du-maroc_1946785/', 'summary': 'Nouvelle vague de chaleur ce début de semaine dans plusieurs régions du Maroc. Des averses orageuses avec chutes de grêle et rafales de vent sous orages et une vague de chaleur, avec chergui et des températures variant entre 39 et 47 °C, sont attendues, du lundi 18 au mercredi 20 août, dans plusieurs provinces du Royaume, a annoncé la Direction générale de la météorologie (DGM). Ces averses orageuses.', 'size': 5}, {'id': '116', 'title': 'Alerte météo: Averses orageuses et vague de chaleur avec chergui, de lundi à mercredi', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/actualite/alerte-meteo-averses-orageuses-et-vague-de-chaleur-avec-chergui-de-lundi-a-mercredi', 'summary': 'Alerte météo: Averses orageuses et vague de chaleur avec chergui, de lundi à mercredi. Des averses orageuses avec chutes de grêle et rafales de vent sous orages et une vague de chaleur, avec chergui et des températures variant entre 39 et 47 °C, sont attendues, du lundi 18 au mercredi 20 août, dans plusieurs provinces du Royaume, a annoncé la Direction générale de la météorologie (DGM). Ces averses orageuses .', 'size': 5}, {'id': '130', 'title': 'Averses orageuses et vague de chaleur avec chergui, de lundi à mercredi dans plusieurs provinces du Royaume', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/averses-orageuses-et-vague-de-chaleur-avec-chergui-de-lundi/', 'summary': 'Averses orageuses et vague de chaleur avec chergui, de lundi à mercredi dans plusieurs provinces du Royaume. Des averses orageuses avec chutes de grêle et rafales de vent sous orages et une vague de chaleur, avec chergui et des températures variant entre 39 et 47 °C, sont attendues, du lundi 18 au mercredi 20 août, dans plusieurs provinces du Royaume, a annoncé la Direction générale de la météorologie (DGM). Ces averses orageuses .', 'size': 5}, {'id': '144', 'title': 'Météo: Averses orageuses et vague de chaleur avec chergui au menu', 'source': 'lnt.ma', 'link': 'https://lnt.ma/meteo-averses-orageuses-et-vague-de-chaleur-avec-chergui-au-menu/', 'summary': 'Météo: Averses orageuses et vague de chaleur avec chergui au menu. Des averses orageuses avec chutes de grêle et rafales de vent sous orages et une vague de chaleur, avec chergui et des températures variant entre 39 et 47 °C, sont attendues, du lundi 18 au mercredi 20 août, dans plusieurs provinces du Royaume, a annoncé la Direction générale de la météorologie (DGM). Ces averses orageuses . ', 'size': 5}], 'main_title': 'Averses orageuses et vague de chaleur avec chergui, de lundi à mercredi dans plusieurs provinces'}, {'community_id': '5', 'articles': [{'id': '79', 'title': 'Revue de presse de ce lundi 18 août 2025', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/437930-revue-de-presse-de-ce-lundi-18-aout-2025.html', 'summary': 'Revue de presse de ce lundi 18 août 2025. Voici les principaux titres développés par la presse nationale ce lundi 18 août 2025 Le Matin Cartographie et cadastre: 2030 en ligne de mire, la Conservation foncière redéfinit sa stratégie À quelques mois de l’arrivée à terme de son Plan stratégique 2022-2025, l’Agence nationale de la conservation foncière, du cadastre et de la cartographie lance . ', 'size': 2}, {'id': '84', 'title': 'La Conservation foncière concocte sa nouvelle vision pour 2030', 'source': 'lematin.ma', 'link': 'https://lematin.ma/economie/la-conservation-fonciere-prepare-sa-nouvelle-strategie-2030/296961', 'summary': 'La Conservation foncière concocte sa nouvelle vision pour 2030. À quelques mois de l’arrivée à échéance (fin décembre prochain) de son Plan stratégique 2022-2025, l’Agence nationale de la conservation foncière, du cadastre et de la cartographie.', 'size': 2}], 'main_title': 'Revue de presse de ce lundi 18 août 2025'}, {'community_id': '7', 'articles': [{'id': '82', 'title': "Le temps qu'il fera ce lundi 18 août 2025", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/437924-le-temps-quil-fera-ce-lundi-18-aout-2025.html', 'summary': "Le temps qu'il fera ce lundi 18 août 2025. Voici les prévisions météorologiques établies par la Direction générale de la météorologie pour le lundi 18 août 2025: – Temps chaud à localement très chaud avec chergui local sur les plaines intérieures Nord et Centre, la Méditerranée, le Nord de l’Oriental, le Sud-Est et l’intérieur du Souss et des provinces sahariennes. – Nuages bas avec . ", 'size': 2}, {'id': '111', 'title': 'Les prévisions du lundi 18 août 2025', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/les-previsions-du-lundi-18-aout-2025-308679/', 'summary': 'Les prévisions du lundi 18 août 2025. Voici les prévisions météorologiques établies par la Direction générale de la météorologie pour le lundi 18 août 2025. -Temps chaud à localement très chaud avec chergui local sur les plaines intérieures Nord et Centre, la Méditerranée, le Nord de l’Oriental, le Sud-Est et l’intérieur du Souss et des provinces sahariennes.', 'size': 2}], 'main_title': "Le temps qu'il fera ce lundi 18 août 2025"}, {'community_id': '8', 'articles': [{'id': '83', 'title': 'Averses orageuses et vague de chaleur avec chergui, de lundi à mercredi dans plusieurs régions (Alerte météo)', 'source': 'lematin.ma', 'link': 'https://lematin.ma/regions/averses-orageuses-et-vague-de-chaleur-dans-plusieurs-regions-du-maroc/297017', 'summary': "Averses orageuses et vague de chaleur avec chergui, de lundi à mercredi dans plusieurs régions (Alerte météo). Ces averses orageuses avec chutes de grêle et des rafales de vent sous orages (20 à 40 mm) sont prévues lundi de 15h à 23h dans les provinces d'Al Haouz, Ouarzazate et Taroudan.", 'size': 2}, {'id': '127', 'title': 'Météo: Orages violents et vague de chaleur dans plusieurs provinces', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/influences/climat/meteo-orages-violents-et-vague-de-chaleur-dans-plusieurs-provinces/', 'summary': "Météo: Orages violents et vague de chaleur dans plusieurs provinces. Les averses orageuses avec chutes de grêle et des rafales de vent sous orages sont prévues à partir de ce lundi 18 août dans les provinces d'Al Haouz, Ouarzazate et Taroudant.", 'size': 2}], 'main_title': 'Averses orageuses et vague de chaleur avec chergui, de lundi à mercredi dans plusieurs régions (Alerte météo)'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
                        
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ? d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        // Fonction pour cacher le tooltip
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = '';
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
    
    
</body>




</html>
    