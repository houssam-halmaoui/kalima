<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); 
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title"> Les principales actualités des dernières 24 heures

</div>    
        <div class="header-subtitle"> Dernière mise à jour : 05/08/2025 - 12h30</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"></div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '0', 'title': "Le temps qu'il fera ce mardi 5 août 2025", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/436186-le-temps-quil-fera-ce-mardi-5-aout-2025.html', 'summary': "Le temps qu'il fera ce mardi 5 août 2025. Voici les prévisions météorologiques établies par la Direction générale de la météorologie pour le mardi 5 août 2025 – Temps chaud sur les plaines de Tadla, Rehamna, le Saiss, Oulmès, le Sud-Est, l’Oriental et l’intérieur des provinces du Sud. – Ondées ou averses orageuses avec rafales de vent sur l’Atlas, le Sud-Est, l’Oriental et l’Est . ", 'size': 2}, {'id': '213', 'title': 'Les prévisions météorologiques du mardi 5 août 2025', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/les-previsions-meteorologiques-du-mardi-5-aout-2025-308081/', 'summary': 'Les prévisions météorologiques du mardi 5 août 2025. Voici les prévisions météorologiques établies par la Direction générale de la météorologie pour le mardi 5 août 2025 : – Temps chaud sur les plaines de Tadla, Rehamna, le Saiss, Oulmès, le Sud-Est, l’Oriental et l’intérieur des provinces du Sud. – Ondées ou averses orageuses avec rafales de vent sur', 'size': 2}], 'main_title': "Le temps qu'il fera ce mardi 5 août 2025"}, {'community_id': '1', 'articles': [{'id': '1', 'title': 'Habitat/Financement participatif : encours en hausse de près de 16% en 2024', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/436501-habitat-financement-participatif-encours-en-hausse-de-pres-de-16-en-2024.html', 'summary': 'Habitat/Financement participatif : encours en hausse de près de 16% en 2024. L’encours de financement octroyé par les banques et fenêtres participatives, sous forme de Mourabaha destinés à l’acquisition de logement, a augmenté de près de 16% pour atteindre 25 milliards de dirhams (MMDH) au titre de 2024, selon le 12ème rapport annuel sur la stabilité financière. En effet, l’encours des crédits à l’habitat s’est établi à . ', 'size': 2}, {'id': '95', 'title': 'Financement participatif destiné à l’habitat : un encours de 25 milliards DH en 2024', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/actualite/financement-participatif-destine-a-lhabitat-un-encours-de-25-milliards-dh-en-2024', 'summary': 'Financement participatif destiné à l’habitat : un encours de 25 milliards DH en 2024. L’encours de financement octroyé par les banques et fenêtres participatives, sous forme de Mourabaha destinés à l’acquisition de logement, a augmenté de près de 16% pour atteindre 25 milliards de dirhams (MMDH) au titre de 2024, selon le 12ème rapport annuel sur la stabilité financière. En effet, l’encours des crédits à l’habitat s’est établi à .', 'size': 2}], 'main_title': 'Habitat/Financement participatif : encours en hausse de près de 16% en 2024'}, {'community_id': '2', 'articles': [{'id': '8', 'title': 'Les quatre routiers marocains enlevés en janvier au Burkina Faso, libérés', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/436528-les-quatre-routiers-marocains-enleves-en-janvier-au-burkina-faso-liberes.html', 'summary': 'Les quatre routiers marocains enlevés en janvier au Burkina Faso, libérés. Le Gouvernement de la République du Mali a annoncé, ce lundi 4 août, la libération de quatre chauffeurs routiers marocains, enlevés le 18 janvier 2025, au nord-est du Burkina Faso près de la frontière avec le Niger par le groupe terroriste « Etat Islamique dans la Province du Sahel », branche sahélienne de « DAECH ». Dans un communiqué, le . ', 'size': 5}, {'id': '91', 'title': 'Terrorisme : Les quatre camionneurs marocains enlevés au Sahel enfin libres', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/173510/terrorisme-quatre-camionneurs-marocains-enleves.html', 'summary': 'Terrorisme : Les quatre camionneurs marocains enlevés au Sahel enfin libres. Fin de calvaire pour quatre camionneurs marocains enlevés le 18 janvier 2025, au nord-est du Burkina Faso, près de la frontière avec le Niger, par un groupe terroriste. Leur libération a eu lieu dans la soirée du dimanche 3 août, a annoncé ce lundi le gouvernement malien dans un communiqué.', 'size': 5}, {'id': '157', 'title': 'Bamako: Libération de quatre chauffeurs routiers marocains (Communiqué du gouvernement malien)', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/bamako-liberation-de-quatre-chauffeurs-routiers-marocains-communique-du-gouvernement-malien.html', 'summary': 'Bamako: Libération de quatre chauffeurs routiers marocains (Communiqué du gouvernement malien). Quatre chauffeurs routiers marocains, enlevés en janvier 2025 au nord-est du Burkina Faso près de la frontière avec le Niger, ont été libérés dans la soirée du dimanche 03 août 2025, a annoncé, lundi, le gouvernement de la République du Mali dans un communiqué. « Le gouvernement de la République du Mali informe l’opinion nationale et . L’article est apparu en premier sur .', 'size': 5}, {'id': '205', 'title': 'Mali : libération de quatre Marocains enlevés au Sahel en janvier', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/05/mali-liberation-de-quatre-marocains-enleves-au-sahel-en-janvier_1945246/', 'summary': 'Mali : libération de quatre Marocains enlevés au Sahel en janvier. Quatre chauffeurs routiers marocains enlevés au Sahel par le groupe Etat islamique le 18 janvier « ont été libérés sains et saufs » dimanche soir, a annoncé le gouvernement malien dans un communiqué lu à la télévision nationale lundi. Les quatre hommes, « enlevés au nord-est du Burkina Faso, près de la frontière avec le Niger », sont apparus.', 'size': 5}, {'id': '250', 'title': 'Bamako: Libération de quatre chauffeurs routiers marocains', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/bamako-liberation-de-quatre-chauffeurs-routiers-marocains/', 'summary': 'Bamako: Libération de quatre chauffeurs routiers marocains. Quatre chauffeurs routiers marocains, enlevés en janvier 2025 au nord-est du Burkina Faso près de la frontière avec le Niger, ont été libérés dans la soirée du dimanche 03 août 2025, a annoncé, lundi, le gouvernement de la République du Mali dans un communiqué. « Le gouvernement de la République du Mali informe l’opinion nationale et .', 'size': 5}], 'main_title': 'Les quatre routiers marocains enlevés en janvier au Burkina Faso, libérés'}, {'community_id': '13', 'articles': [{'id': '11', 'title': 'CHAN 2025 : Les Lions de l’Atlas démarrent tout en maîtrise face à l’Angola', 'source': 'lematin.ma', 'link': 'https://lematin.ma/videos/chan-2025-les-lions-de-latlas-demarrent-tout-en-maitrise-face-a-langola/294934', 'summary': 'CHAN 2025 : Les Lions de l’Atlas démarrent tout en maîtrise face à l’Angola. Le Maroc entame idéalement le CHAN 2025 au Kenya en s’imposant 2-0 face à l’Angola. Malgré une préparation perturbée, Tarik Sektioui a bâti un groupe soudé et compétitif. Le onze d.', 'size': 2}, {'id': '78', 'title': "CHAN : le Maroc bat l'Angola grâce à la “maturité tactique” des joueurs, selon Sektioui", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/04/chan-le-maroc-bat-langola-grace-a-la-maturite-tactique-des-joueurs-selon-sektioui_1945026/', 'summary': "CHAN : le Maroc bat l'Angola grâce à la “maturité tactique” des joueurs, selon Sektioui. Le sélectionneur national Tarik Sektioui a affirmé, dimanche à Nairobi, que la victoire par 2 buts à 0 contre l’Angola, en match de la première journée du groupe A du championnat d’Afrique des nations de football (CHAN-2025), est le résultat de la maturité tactique exemplaire des joueurs de l’équipe nationale. S’exprimant en conférence de presse.", 'size': 3}, {'id': '162', 'title': 'CHAN 2024 : Le Maroc s’impose face à l’Angola et confirme son statut de favori', 'source': 'lnt.ma', 'link': 'https://lnt.ma/chan-2024-le-maroc-simpose-face-a-langola-et-confirme-son-statut-de-favori/', 'summary': 'CHAN 2024 : Le Maroc s’impose face à l’Angola et confirme son statut de favori. L’équipe nationale marocaine des joueurs locaux a entamé sa campagne dans le Championnat d’Afrique des Nations (CHAN 2024) par une victoire convaincante contre l’Angola (2-0), dimanche, au stade national Nyayo à Nairobi, lors de la première journée du groupe A. Cette performance permet aux Lions de l’Atlas de prendre la tête du classement et de . ', 'size': 4}, {'id': '229', 'title': 'Tarik Sektioui : La victoire contre l’Angola, résultat de la maturité tactique des joueurs', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/sports/tarik-sektioui-la-victoire-contre-langola-resultat-de-la-maturite-tactique-des-joueurs', 'summary': 'Tarik Sektioui : La victoire contre l’Angola, résultat de la maturité tactique des joueurs. Le sélectionneur national Tarik Sektioui a affirmé, dimanche à Nairobi, que la victoire par 2 buts à 0 contre l’Angola, en match de la première journée du groupe A du Championnat d’Afrique des Nations de football (CHAN-2024), est le résultat de la maturité tactique exemplaire des joueurs de l’équipe nationale. S’exprimant en conférence de presse .', 'size': 3}], 'main_title': 'CHAN 2024 : Le Maroc s’impose face à l’Angola et confirme son statut de favori'}, {'community_id': '4', 'articles': [{'id': '18', 'title': 'Automobile : les ventes en hausse de 36,5% à fin juillet 2025', 'source': 'lematin.ma', 'link': 'https://lematin.ma/automobile/automobile-les-ventes-en-hausse-de-365-a-fin-juillet-2025/294918', 'summary': 'Automobile : les ventes en hausse de 36,5% à fin juillet 2025. Pour le seul mois de juillet 2025, le marché a enregistré 19 713 unités vendues, en augmentation de 38,64% par rapport aux 14 219 unités écoulées en juillet 2024. Cette progression.', 'size': 2}, {'id': '253', 'title': 'Marché automobile : l’été confirme une croissance robuste', 'source': 'leseco.ma', 'link': 'https://leseco.ma/business/marche-automobile-lete-confirme-une-croissance-robuste.html', 'summary': 'Marché automobile : l’été confirme une croissance robuste. Porté par une demande soutenue, le marché automobile enregistre en juillet une importante progression, prolongeant la dynamique enclenchée depuis le début de l’année. ', 'size': 2}], 'main_title': 'Automobile : les ventes en hausse de 36,5% à fin juillet 2025'}, {'community_id': '15', 'articles': [{'id': '24', 'title': 'Nader Al Zouabi, nommé à la tête de Schneider Electric Maroc et Mauritanie', 'source': 'lematin.ma', 'link': 'https://lematin.ma/economie/nader-al-zouabi-nomme-a-la-tete-de-schneider-electric-maroc-et-mauritanie/294816', 'summary': "Nader Al Zouabi, nommé à la tête de Schneider Electric Maroc et Mauritanie. Avec plus de 20 ans chez Schneider Electric, Nader Al Zouabi incarne une vision stratégique et opérationnelle axée sur l'innovation, la croissance durable et la transformation.", 'size': 3}, {'id': '211', 'title': 'Schneider Electric nomme un nouveau DG pour le Maroc et la Mauritanie', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/schneider-electric-nomme-un-nouveau-dg-pour-le-maroc-et-la-mauritanie-308091/', 'summary': 'Schneider Electric nomme un nouveau DG pour le Maroc et la Mauritanie. Schneider Electric, leader de la transformation numérique de la gestion de l’énergie et des automatismes, annonce la nomination de Nader Al Zouabi en tant que directeur général pour le Maroc et la Mauritanie. Dans ses nouvelles fonctions, M. Al Zouabi aura la responsabilité de déployer les solutions du groupe qui', 'size': 3}, {'id': '260', 'title': 'Schneider Electric : Nader Al Zouabi, nouveau DG', 'source': 'leseco.ma', 'link': 'https://leseco.ma/maroc/schneider-electric-nader-al-zouabi-nouveau-dg.html', 'summary': 'Schneider Electric : Nader Al Zouabi, nouveau DG. Schneider Electric a nommé Nader Al Zouabi en tant que directeur général pour le Maroc et la Mauritanie. ', 'size': 3}], 'main_title': 'Nader Al Zouabi, nommé à la tête de Schneider Electric Maroc et Mauritanie'}, {'community_id': '17', 'articles': [{'id': '29', 'title': 'Le taux de chômage recule à 12,8% au deuxième trimestre 2025 (HCP)', 'source': 'lematin.ma', 'link': 'https://lematin.ma/economie/le-taux-de-chomage-recule-a-128-au-deuxieme-trimestre-2025-hcp/294768', 'summary': 'Le taux de chômage recule à 12,8% au deuxième trimestre 2025 (HCP). Entre le deuxième trimestre 2024 et celui de 2025, le marché du travail a enregistré une création nette de 5.000 emplois. Cette évolution résulte d’un gain de 113.000 postes en mil.', 'size': 2}, {'id': '125', 'title': 'Emploi: Le taux de chômage recule à 12,8%', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/au-royaume/emploi-le-taux-de-chomage-recule-a-128/', 'summary': 'Emploi: Le taux de chômage recule à 12,8%. Le taux de chômage a baissé de 0,3 point entre le deuxième trimestre de 2024 et celui de 2025, passant de 13,1% à 12,8%, selon le HCP.', 'size': 2}], 'main_title': 'Le taux de chômage recule à 12,8% au deuxième trimestre 2025 (HCP)'}, {'community_id': '16', 'articles': [{'id': '30', 'title': 'Wafacash introduit le renouvellement automatique pour sa micro-assurance', 'source': 'lematin.ma', 'link': 'https://lematin.ma/economie/wafacash-lance-le-renouvellement-automatique-de-sa-micro-assurance/294791', 'summary': 'Wafacash introduit le renouvellement automatique pour sa micro-assurance. Les clients Hissab Bikhir de Wafacash peuvent désormais bénéficier d’une gestion simplifiée de leur assurance. Une fois la couverture Taamine activée en agence, la prime est automa.', 'size': 2}, {'id': '261', 'title': 'Assurance Taamine : Wafacash simplifie la souscription pour les clients Hissab Bikhir', 'source': 'leseco.ma', 'link': 'https://leseco.ma/business/assurance-taamine-wafacash-simplifie-la-souscription-pour-les-clients-hissab-bikhir.html', 'summary': 'Assurance Taamine : Wafacash simplifie la souscription pour les clients Hissab Bikhir. Wafacash annonce l’automatisation du renouvellement annuel de son offre de micro-assurance Taamine Wafacash, désormais directement accessible aux clients détenteurs d’un compte Hissab Bikhir. ', 'size': 2}], 'main_title': 'Wafacash introduit le renouvellement automatique pour sa micro-assurance'}, {'community_id': '8', 'articles': [{'id': '34', 'title': 'Casabus adapte son réseau : entre retours à la normale et déviations maintenues', 'source': 'lematin.ma', 'link': 'https://lematin.ma/regions/casabus-adapte-son-reseau-a-casablanca-durant-les-travaux-urbains/294780', 'summary': 'Casabus adapte son réseau : entre retours à la normale et déviations maintenues. À Casablanca, les travaux d’aménagement urbain en cours modifient la circulation sur plusieurs axes. Pour assurer la continuité du service public, Casabus, opéré par Alsa, procède.', 'size': 2}, {'id': '141', 'title': 'Casabus ajuste temporairement son réseau', 'source': 'leseco.ma', 'link': 'https://leseco.ma/business/casabus-ajuste-temporairement-son-reseau.html', 'summary': 'Casabus ajuste temporairement son réseau. Casabus opéré par Alsa ajuste temporairement son service pour garantir la continuité de la mobilité urbaine durant les travaux d’aménagement ', 'size': 2}], 'main_title': 'Casabus adapte son réseau : entre retours à la normale et déviations maintenues'}, {'community_id': '9', 'articles': [{'id': '38', 'title': 'Inter Miami : Messi forfait pour une durée indéterminée', 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/inter-miami-messi-forfait-pour-une-duree-indeterminee/294770', 'summary': "Inter Miami : Messi forfait pour une durée indéterminée. La star argentine, Lionel Messi, s'est blessée samedi en début de match face au club mexicain de Necaxa, à Fort Lauderdale (Floride), dans le cadre de la Leagues Cup, une compé.", 'size': 2}, {'id': '227', 'title': 'En raison d’une blessure musculaire: Messi forfait pour une durée indéterminée', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/sports/en-raison-dune-blessure-musculaire-messi-forfait-pour-une-duree-indeterminee', 'summary': 'En raison d’une blessure musculaire: Messi forfait pour une durée indéterminée. Lionel Messi sera absent pour une durée indéterminée en raison d’une «blessure musculaire mineure à la jambe droite», a annoncé dimanche son club de l’Inter Miami. La star argentine s’est blessée samedi en début de match face au club mexicain de Necaxa, à Fort Lauderdale (Floride), dans le cadre de la Leagues Cup, une compétition .', 'size': 2}], 'main_title': 'Inter Miami : Messi forfait pour une durée indéterminée'}, {'community_id': '3', 'articles': [{'id': '50', 'title': 'La représentante spéciale de l’ONU pour la Libye salue l’engagement du Maroc pour la facilitation du dialogue inter-libyen', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/La-representante-speciale-de-l-ONU-pour-la-Libye-salue-l-engagement-du-Maroc-pour-la-facilitation-du-dialogue-inter_a70535.html', 'summary': 'La représentante spéciale de l’ONU pour la Libye salue l’engagement du Maroc pour la facilitation du dialogue inter-libyen. La Représentante spéciale et Cheffe de la Mission d’appui des Nations Unies en Libye (MANUL), Hanna Serwaa Tetteh, a salué, lundi à Rabat, l’engagement du Maroc pour la facilitation du dialogue entre les parties libyennes.', 'size': 3}, {'id': '132', 'title': 'Libye : l’ONU salue le rôle clé du Maroc dans le dialogue inter-libyen', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/libye-lonu-salue-le-role-cle-du-maroc-dans-le-dialogue-inter-libyen/', 'summary': 'Libye : l’ONU salue le rôle clé du Maroc dans le dialogue inter-libyen. La Représentante spéciale et Cheffe de la Mission d’appui des Nations Unies en Libye (MANUL), Hanna Serwaa Tetteh, a salué, lundi à Rabat, l’engagement du Maroc pour la facilitation du dialogue entre les parties libyennes. Dans une déclaration à la presse à l’issue de sa rencontre avec le ministre des Affaires étrangères, de la Coopération .', 'size': 3}, {'id': '158', 'title': 'Mme Hanna Tetteh salue l’engagement du Maroc pour la facilitation du dialogue inter-libyen', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/mme-hanna-tetteh-salue-lengagement-du-maroc-pour-la-facilitation-du-dialogue-inter-libyen/', 'summary': 'Mme Hanna Tetteh salue l’engagement du Maroc pour la facilitation du dialogue inter-libyen. La Représentante spéciale et Cheffe de la Mission d’appui des Nations Unies en Libye (MANUL), Hanna Serwaa Tetteh, a salué, lundi à Rabat, l’engagement du Maroc pour la facilitation du dialogue entre les parties libyennes. Dans une déclaration à la presse à l’issue de sa rencontre avec le ministre des Affaires étrangères, de la Coopération africaine ', 'size': 3}], 'main_title': 'La représentante spéciale de l’ONU pour la Libye salue l’engagement du Maroc pour la facilitation du dialogue inter-libyen'}, {'community_id': '11', 'articles': [{'id': '52', 'title': 'L’Espagnol Ona fait son entrée sur le marché hôtelier marocain', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/L-Espagnol-Ona-fait-son-entree-sur-le-marche-hotelier-marocain_a70532.html', 'summary': 'L’Espagnol Ona fait son entrée sur le marché hôtelier marocain. Le groupe hôtelier espagnol Ona Hotels & Apartments prend la relève de la chaîne hôtelière Be Live dans la gestion de trois hôtels à Marrakech et Saïdia, marquant ainsi son entrée dans le marché marocain.', 'size': 2}, {'id': '115', 'title': 'Hôtellerie: L’Espagnol Ona Hotels & Apartments acquiert trois établissements à Marrakech et à Saidia', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/affaires/secteurs/hotellerie-lespagnol-ona-hotels-apartments-acquiert-trois-etablissements-a-marrakech-et-a-saidia/', 'summary': "Hôtellerie: L’Espagnol Ona Hotels & Apartments acquiert trois établissements à Marrakech et à Saidia. Le groupe hôtelier espagnol reprend l'exploitation de Be Live Experience Marrakech Palmerie, Be Live Collection Marrakech Adults et Be Live Collection Saïdia, disposant d'une capacité de près de 870 chambres.", 'size': 2}], 'main_title': 'L’Espagnol Ona fait son entrée sur le marché hôtelier marocain'}, {'community_id': '12', 'articles': [{'id': '55', 'title': '\u200bVague de chaleur et averses orageuses du lundi au vendredi dans plusieurs provinces du Royaume (bulletin d’alerte)', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/\u200bVague-de-chaleur-et-averses-orageuses-du-lundi-au-vendredi-dans-plusieurs-provinces-du-Royaume-bulletin-d-alerte_a70534.html', 'summary': '\u200bVague de chaleur et averses orageuses du lundi au vendredi dans plusieurs provinces du Royaume (bulletin d’alerte). Une vague de chaleur ainsi que des averses orageuses avec chutes de grêle et rafales de vent sous orages sont attendues du lundi au vendredi dans plusieurs provinces du Royaume, a annoncé la Direction générale de la météorologie (DGM) dans un bulletin d’alerte de niveau orange.', 'size': 4}, {'id': '122', 'title': 'Météo :  Vague de chaleur et averses orageuses du lundi au vendredi', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/influences/climat/meteo-vague-de-chaleur-et-averses-orageuses-du-lundi-au-vendredi/', 'summary': 'Météo : Vague de chaleur et averses orageuses du lundi au vendredi. Dans un bulletin d’alerte de niveau orange, la Direction générale de la météorologie annonce des températures pouvant aller jusqu’à 47°C dans plusieurs provinces. Des averses orageuses avec chutes de grêle et rafales de vent sous orages sont également prévues.', 'size': 4}, {'id': '164', 'title': 'Alerte météo: Orages entre mardi et vendredi dans différentes provinces', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/436571-alerte-meteo-orages-entre-mardi-et-vendredi-dans-differentes-provinces.html', 'summary': 'Alerte météo: Orages entre mardi et vendredi dans différentes provinces. Une vague de chaleur et des averses orageuses avec chutes de grêle et rafales de vent sous orages sont attendues du mardi au vendredi dans plusieurs provinces du Royaume, a annoncé la Direction générale de la météorologie (DGM) dans un bulletin d’alerte de niveau orange. Ainsi, des températures comprises entre 40 et 44°C sont prévues, . ', 'size': 4}, {'id': '202', 'title': "Jusqu'à 47°C cette semaine dans plusieurs provinces du Royaume", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/05/jusqua-47c-cette-semaine-dans-plusieurs-provinces-du-royaume_1945266/', 'summary': "Jusqu'à 47°C cette semaine dans plusieurs provinces du Royaume. Une vague de chaleur et des averses orageuses avec chutes de grêle et rafales de vent sous orages sont attendues du mardi 5 août au vendredi 8 août dans plusieurs provinces du Royaume, a annoncé la Direction générale de la météorologie (DGM) dans un bulletin d’alerte de niveau orange. Ainsi, des températures comprises entre 40.", 'size': 4}], 'main_title': '\u200bVague de chaleur et averses orageuses du lundi au vendredi dans plusieurs provinces du Royaume (bulletin d’alerte)'}, {'community_id': '18', 'articles': [{'id': '62', 'title': "Côte d'Ivoire : le Maroc au cœur du défilé militaire du 7 août à Bouaké", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/04/cote-divoire-le-maroc-au-coeur-du-defile-militaire-du-7-aout-a-bouake_1945189/', 'summary': "Côte d'Ivoire : le Maroc au cœur du défilé militaire du 7 août à Bouaké. Le Maroc prendra part au défilé militaire marquant la fête de l’indépendance ivoirienne, le 7 août 2025 à Bouaké, aux côtés des armées française et américaine, annonce l’Agence ivoirienne de presse (AIP). Un détachement marocain d’environ 100 militaires participera à cette cérémonie, symbole du partenariat stratégique et de la coopération militaire entre Rabat et Abidjan..", 'size': 2}, {'id': '82', 'title': 'Côte d’Ivoire: les FAR participent au défilé militaire du 7 août à Bouaké', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/cote-divoire-les-far-participent-au-defile-militaire-du-7-aout-a-bouake-308070/', 'summary': 'Côte d’Ivoire: les FAR participent au défilé militaire du 7 août à Bouaké. Le traditionnel défilé militaire de la fête de l’indépendance en Côte d’Ivoire se tiendra cette année à Bouaké, le jeudi 7 août 2025. Et pour l’occasion, trois armées étrangères seront à l’honneur. En réponse à une invitation d’Abidjan, un détachement des Forces Armées Royales (FAR) participera, aux côtés des armées des', 'size': 2}], 'main_title': "Côte d'Ivoire : le Maroc au cœur du défilé militaire du 7 août à Bouaké"}, {'community_id': '21', 'articles': [{'id': '74', 'title': 'Le trafic commercial en hausse dans les ports marocains', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/04/le-trafic-commercial-en-hausse-dans-les-ports-marocains_1945035/', 'summary': 'Le trafic commercial en hausse dans les ports marocains. Le volume global des trafics de commerce traités par les ports du Maroc a atteint 130 millions de tonnes au titre du 1er semestre de l’année 2025, contre 116,4 millions de tonnes à la même période de l’année précédente, soit une hausse de 11,6%. Le trafic domestique a enregistré un volume de 65,7 millions de.', 'size': 2}, {'id': '155', 'title': 'Trafic portier : hausse à deux chiffres au 1er semestre 2025', 'source': 'leseco.ma', 'link': 'https://leseco.ma/maroc/trafic-portier-hausse-a-deux-chiffres-au-1er-semestre-2025.html', 'summary': 'Trafic portier : hausse à deux chiffres au 1er semestre 2025. 130 millions de tonnes au titre du 1er semestre de l’année 2025. C’est le volume global des trafics de commerce traités par les ports du Maroc qui a augmenté de 11,6% contre 116,4 millions de tonnes à la même période de l’année précédente, selon les chiffres fournis par le ministère de l’Équipement et de l’Eau dans un communiqué. ', 'size': 2}], 'main_title': 'Le trafic commercial en hausse dans les ports marocains'}, {'community_id': '5', 'articles': [{'id': '76', 'title': 'Marché du travail : cinq régions abritent plus de 70% des actifs', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/04/marche-du-travail-cinq-regions-abritent-plus-de-70-des-actifs_1945022/', 'summary': 'Marché du travail : cinq régions abritent plus de 70% des actifs. Cinq régions ont abrité 72,3% de l’ensemble des actifs âgés de 15 ans et plus au 2è trimestre 2025 (T2-2025), selon le Haut-Commissariat au Plan (HCP). La région de Casablanca-Settat se situe en première position avec 22,2% d’actifs, suivie de Rabat-Salé-Kénitra (13,6%), de Marrakech-Safi (13%), de Fès-Meknès (11,8%) et de Tanger-Tétouan-Al Hoceima (11,7%), précise le.', 'size': 2}, {'id': '160', 'title': 'Marché du travail | 72,3% des actifs résident dans cinq régions au T2-2025', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/marche-du-travail-723-des-actifs-resident-dans-cinq-regions-au-t2-2025/', 'summary': 'Marché du travail | 72,3% des actifs résident dans cinq régions au T2-2025. Cinq régions ont abrité 72,3% de l’ensemble des actifs âgés de 15 ans et plus au 2è trimestre 2025 (T2-2025), selon le Haut-Commissariat au Plan (HCP). La région de Casablanca-Settat se situe en première position avec 22,2% d’actifs, suivie de Rabat-Salé-Kénitra (13,6%), de Marrakech-Safi (13%), de Fès-Meknès (11,8%) et de Tanger-Tétouan-Al Hoceima (11,7%), précise le ', 'size': 2}], 'main_title': 'Marché du travail : cinq régions abritent plus de 70% des actifs'}, {'community_id': '19', 'articles': [{'id': '79', 'title': 'Emploi : le taux de chômage en légère baisse au 2e trimestre', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/04/emploi-le-taux-de-chomage-en-legere-baisse-au-2e-trimestre_1945024/', 'summary': 'Emploi : le taux de chômage en légère baisse au 2e trimestre. Le taux de chômage a atteint 12,8% au deuxième trimestre 2025 (T2-2025), ressort-il de la récente note d’information du Haut-Commissariat au Plan (HCP) relative à la situation du marché du travail. Le taux de chômage a baissé de 0,3 point entre le deuxième trimestre de 2024 et celui de 2025, passant de 13,1% à 12,8%,.', 'size': 2}, {'id': '88', 'title': 'Maroc: le taux de chômage baisse à 12,8% au T2-2025', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/maroc-le-taux-de-chomage-baisse-a-a-128-au-t2-2025-308038/', 'summary': 'Maroc: le taux de chômage baisse à 12,8% au T2-2025. Le taux de chômage a atteint 12,8% au deuxième trimestre 2025 (T2-2025), contre 13,1% à la même période de l’année précédente, d’après note d’information du Haut-Commissariat au Plan (HCP) relative à la situation du marché du travail. Le nombre de chômeurs a reculé de 38.000 personnes entre le deuxième trimestre', 'size': 2}], 'main_title': 'Emploi : le taux de chômage en légère baisse au 2e trimestre'}, {'community_id': '20', 'articles': [{'id': '93', 'title': "Vertical s'associe avec Aciturri, actif au Maroc, pour la construction d’avion à décollage vertical", 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/173507/vertical-s-associe-avec-aciturri-actif.html', 'summary': "Vertical s'associe avec Aciturri, actif au Maroc, pour la construction d’avion à décollage vertical. Le fabricant aéronautique britannique, Vertical Aerospace, a révélé ce lundi un partenariat stratégique de longue durée avec Aciturri Aerostructures. Cette entreprise, qui opère dans plusieurs pays dont le Maroc, sera chargée de la fabrication de la structure de lavion VX4, un appareil électrique et hybride à décollage et atterrissage verticaux (eVTOL).", 'size': 2}, {'id': '131', 'title': 'Le Maroc s’invite dans l’aviation du futur aux côtés de Vertical Aerospace et Aciturri', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/le-maroc-sinvite-dans-laviation-du-futur-aux-cotes-de-vertical/', 'summary': 'Le Maroc s’invite dans l’aviation du futur aux côtés de Vertical Aerospace et Aciturri. Le Royaume participe à la fabrication du VX4, un aéronef eVTOL innovant, via l’implantation industrielle d’Aciturri. Vertical Aerospace a annoncé, lundi 4 août, la conclusion d’un accord à long terme avec Aciturri Aerostructures, acteur majeur des structures aéronautiques, pour la construction de l’armature de son aéronef à décollage et atterrissage verticaux (eVTOL), le VX4. La .', 'size': 2}], 'main_title': "Vertical s'associe avec Aciturri, actif au Maroc, pour la construction d’avion à décollage vertical"}, {'community_id': '6', 'articles': [{'id': '111', 'title': 'Transition énergétique : ACWA Power décroche les projets NOOR Midelt 2 & 3', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/affaires/transition-energetique-acwa-power-decroche-les-projets-noor-midelt-2-3/', 'summary': 'Transition énergétique : ACWA Power décroche les projets NOOR Midelt 2 & 3. ACWA Power renforce sa présence stratégique au Maroc avec les projets NOOR Midelt 2 & 3 et réaffirme son leadership mondial dans les solutions d’énergie solaire intégrée.', 'size': 2}, {'id': '199', 'title': 'Acwa Power développera les centrales solaires Noor 2 et 3 à Midelt', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/05/acwa-power-developpera-les-centrales-solaires-noor-2-et-3-a-midelt_1945250/', 'summary': 'Acwa Power développera les centrales solaires Noor 2 et 3 à Midelt. L’entreprise saoudienne Acwa Power a remporté un appel d’offres international pour le développement des deux centrales photovoltaïques, Noor Midelt 2 et Noor Midelt 3, d’une capacité combinée de 800 mégawatts. Dans un communiqué publié ce lundi, Acwa Power a annoncé avoir été retenue à l’issue de cette procédure lancée par l’Agence marocaine pour l’énergie durable.', 'size': 3}, {'id': '212', 'title': 'ACWA Power décroche deux contrats majeurs d’énergie solaire au Maroc', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/acwa-power-decroche-deux-contrats-majeurs-denergie-solaire-au-maroc-308086/', 'summary': 'ACWA Power décroche deux contrats majeurs d’énergie solaire au Maroc. La société saoudienne ACWA Power, acteur mondial de la transition énergétique et du dessalement de l’eau de mer, a été retenue pour le développement des projets NOOR Midelt 2 et 3, à la suite d’un appel d’offres international lancé par l’Agence marocaine pour l’énergie durable (MASEN). En partenariat avec « des', 'size': 4}, {'id': '218', 'title': 'Maroc\xa0: ACWA Power retenue pour développer les projets NOOR Midelt 2 et 3', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/173530/maroc-acwa-power-retenue-pour.html', 'summary': 'Maroc : ACWA Power retenue pour développer les projets NOOR Midelt 2 et 3. ACWA Power a été retenue pour développer les projets NOOR Midelt 2 et NOOR Midelt 3, après un appel d’offres international lancé par l’Agence marocaine pour l’énergie durable (MASEN). La plus grande entreprise privée de désalinisation d’eau au monde et leader dans la diversification énergétique s’engage ainsi dans les deux des centrales photovoltaïques d’une capacité de 400 MWc chacune, complétées par 602 MWh de stockage par batteries (BESS), avec une capacité de pointe de 230 MWac pendant deux heures.', 'size': 3}], 'main_title': 'ACWA Power décroche deux contrats majeurs d’énergie solaire au Maroc'}, {'community_id': '7', 'articles': [{'id': '127', 'title': 'Le taux d’endettement moyen des particuliers atteint 34% en 2024', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/le-taux-dendettement-moyen-des-particuliers-atteint-34-en-2024/', 'summary': 'Le taux d’endettement moyen des particuliers atteint 34% en 2024. Le taux d’endettement moyen des particuliers a atteint 34% en 2024 contre 35% en 2023, selon le 12ème rapport annuel sur la stabilité financière. L’analyse de l’évolution du taux d’endettement des particuliers est basée sur les données recueillies auprès des établissements de crédit, couvrant environ 439.780 dossiers de crédit accordés au cours de l’année 2024, .', 'size': 2}, {'id': '206', 'title': "Crédits : en 2024, le taux d'endettement des Marocains était de 34% en moyenne", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/05/credits-en-2024-le-taux-dendettement-des-marocains-etait-de-34-en-moyenne_1945232/', 'summary': "Crédits : en 2024, le taux d'endettement des Marocains était de 34% en moyenne. Le taux d’endettement moyen des particuliers a atteint 34% en 2024 contre 35% en 2023, selon le 12ème rapport annuel sur la stabilité financière. L’analyse de l’évolution du taux d’endettement des particuliers est basée sur les données recueillies auprès des établissements de crédit, couvrant environ 439.780 dossiers de crédit accordés au cours de l’année 2024,.", 'size': 2}], 'main_title': 'Le taux d’endettement moyen des particuliers atteint 34% en 2024'}, {'community_id': '10', 'articles': [{'id': '180', 'title': "Marrakech : suspension d'un Caïd pour son implication présumée dans un délit de corruption (Ministère)", 'source': 'lematin.ma', 'link': 'https://lematin.ma/societe/marrakech-un-caid-suspendu-pour-soupcon-de-corruption/294960', 'summary': "Marrakech : suspension d'un Caïd pour son implication présumée dans un délit de corruption (Ministère). Dans un communiqué, le ministère explique que cette décision, qui procède de son attachement à la déontologie de la fonction publique et s'inscrit dans le cadre du suivi quotid.", 'size': 2}, {'id': '207', 'title': 'Marrakech : un caïd suspendu pour corruption', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/08/05/marrakech-un-caid-suspendu-pour-corruption_1945230/', 'summary': 'Marrakech : un caïd suspendu pour corruption. Le ministère de l’Intérieur a annoncé avoir procédé à la suspension d’un caïd au niveau de la préfecture de Marrakech pour son implication présumée dans un délit de corruption. Dans un communiqué, le ministère explique que cette décision, qui procède de son attachement à la déontologie de la fonction publique et s’inscrit dans le cadre.', 'size': 4}, {'id': '219', 'title': 'Marrakech : Suspension d’un caïd pour soupçons de corruption', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/173526/marrakech-suspension-d-un-caid-pour.html', 'summary': 'Marrakech : Suspension d’un caïd pour soupçons de corruption. Le ministère de l’Intérieur a annoncé avoir procédé à la suspension d’un caïd au niveau de la préfecture de Marrakech, pour son implication présumée dans un délit de corruption.', 'size': 2}, {'id': '270', 'title': 'Marrakech : Un responsable administratif suspendu pour une affaire présumée de corruption', 'source': 'lnt.ma', 'link': 'https://lnt.ma/marrakech-un-responsable-administratif-suspendu-pour-une-affaire-presumee-de-corruption/', 'summary': 'Marrakech : Un responsable administratif suspendu pour une affaire présumée de corruption. Le ministère de l’Intérieur a annoncé la suspension d’un Caïd relevant de la Préfecture de Marrakech, en lien avec une affaire présumée de corruption actuellement sous investigation judiciaire. Dans un communiqué publié lundi, le ministère précise que cette décision s’inscrit dans le cadre du suivi régulier de l’activité des agents d’autorité, et reflète l’attachement de . ', 'size': 2}], 'main_title': 'Marrakech : un caïd suspendu pour corruption'}, {'community_id': '14', 'articles': [{'id': '244', 'title': 'Trésor: les besoins prévisionnels entre 12 et 12,5 MMDH en août', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/tresor-les-besoins-previsionnels-entre-12-et-125/', 'summary': 'Trésor: les besoins prévisionnels entre 12 et 12,5 MMDH en août. Les besoins prévisionnels du Trésor varient entre 12 et 12,5 milliards de dirhams (MMDH) en août 2025, annonce la Direction du Trésor et des finances extérieures (DTFE), relevant du ministère de l’Économie et des finances. « La Direction du Trésor et des Finances Extérieures porte à la connaissance des investisseurs que le recours au marché des .', 'size': 2}, {'id': '258', 'title': 'Excédents de trésorerie : le Trésor place 6,6 MMDH', 'source': 'leseco.ma', 'link': 'https://leseco.ma/business/excedents-de-tresorerie-le-tresor-place-66-mmdh.html', 'summary': 'Excédents de trésorerie : le Trésor place 6,6 MMDH. La Direction du Trésor et des Finances extérieures (DTFE) a procédé lundi à trois opérations de placement d’excédents de trésorerie pour un montant global de 6,6 milliards de dirhams (MMDH). ', 'size': 2}], 'main_title': 'Trésor: les besoins prévisionnels entre 12 et 12,5 MMDH en août'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
                        
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ? d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        // Fonction pour cacher le tooltip
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = '';
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
    
    
</body>




</html>
    