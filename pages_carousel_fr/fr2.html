<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); 
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title"> Les principales actualités des dernières 24 heures

</div>    
        <div class="header-subtitle"> Dernière mise à jour : 24/08/2025 - 06h23</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"></div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '5', 'articles': [{'id': '3', 'title': "Peines alternatives : le ministère Public publie un guide pour encadrer l'application", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/438435-peines-alternatives-le-ministere-public-publie-un-guide-pour-encadrer-lapplication.html', 'summary': "Peines alternatives : le ministère Public publie un guide pour encadrer l'application. La Présidence du ministère public a mis à disposition des magistrats un guide pratique destiné à encadrer l’application des peines alternatives. Cette initiative intervient après l’entrée en vigueur, ce vendredi, de la loi n° 43.22 relative aux peines alternatives et de son décret d’application, marquant une étape importante dans la modernisation du système judiciaire marocain. . ", 'size': 2}, {'id': '19', 'title': 'Peines alternatives : Le Ministère public publie un guide de référence destiné aux magistrats du parquet', 'source': 'lematin.ma', 'link': 'https://lematin.ma/nation/peines-alternatives-publication-dun-guide-destine-aux-magistrats/297656', 'summary': "Peines alternatives : Le Ministère public publie un guide de référence destiné aux magistrats du parquet. Cette initiative s'inscrit dans le cadre de l'accompagnement de la mise en œuvre de la loi n° 43.22 relative aux peines alternatives et de son décret d'application, ent.", 'size': 2}], 'main_title': "Peines alternatives : le ministère Public publie un guide pour encadrer l'application"}, {'community_id': '1', 'articles': [{'id': '7', 'title': 'Les recettes fiscales progressent de 15,9% à fin juillet 2025', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/438441-les-recettes-fiscales-progressent-de-159-a-fin-juillet-2025.html', 'summary': 'Les recettes fiscales progressent de 15,9% à fin juillet 2025. Les recettes fiscales ont atteint plus de 201,8 milliards de dirhams (MMDH) à fin juillet 2025, en hausse de 15,9% comparativement à la même période un an auparavant, selon le ministère de l’Économie et des Finances. Ces recettes ont affiché un taux de réalisation de 63,1% par rapport aux prévisions de la loi de finances . ', 'size': 2}, {'id': '72', 'title': 'Finances publiques: Un déficit budgétaire de 55 MMDH à fin juillet 2025', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/argent/budget/finances-publiques-un-deficit-budgetaire-de-55-mmdh-a-fin-juillet-2025/', 'summary': 'Finances publiques: Un déficit budgétaire de 55 MMDH à fin juillet 2025. Les recettes, ont enregistré un taux de réalisation de 57,4% par rapport aux prévisions de la Loi de Finances (LF), en hausse de 14,5% par rapport à fin juillet 2024, soit +28,7 MMDH.', 'size': 2}], 'main_title': 'Les recettes fiscales progressent de 15,9% à fin juillet 2025'}, {'community_id': '2', 'articles': [{'id': '8', 'title': 'Qualifs Mondial 2026 : Walid Regragui dévoilera sa liste le jeudi 28 août', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/438459-qualifs-mondial-2026-walid-regragui-devoilera-sa-liste-le-jeudi-28-aout.html', 'summary': 'Qualifs Mondial 2026 : Walid Regragui dévoilera sa liste le jeudi 28 août. Walid Regragui tiendra une conférence de presse le jeudi 28 août 2025, à partir de 11h00, dans l’auditorium du Complexe Mohammed VI de football à Maâmora, pour dévoiler la liste des joueurs convoqués en vue des deux prochaines échéances des qualifications africaines pour la Coupe du monde 2026. Le Maroc disputera deux rencontres cruciales dans . ', 'size': 2}, {'id': '16', 'title': 'Mondial 2026 : Regragui dévoile sa liste pour les matchs de septembre ce jeudi', 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/mondial-2026-regragui-devoile-jeudi-sa-liste-pour-les-matchs-de-septembre/297661', 'summary': 'Mondial 2026 : Regragui dévoile sa liste pour les matchs de septembre ce jeudi. Le sélectionneur de l’équipe du Maroc, Walid Regragui, tiendra une conférence de presse, jeudi prochain au Complexe Mohammed VI de football, indique la Fédération royale marocaine.', 'size': 2}], 'main_title': 'Qualifs Mondial 2026 : Walid Regragui dévoilera sa liste le jeudi 28 août'}, {'community_id': '4', 'articles': [{'id': '17', 'title': 'Mondial 2026 : le tirage au sort prévu le 5 décembre à Washington (Trump)', 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/mondial-2026-le-tirage-au-sort-prevu-le-5-decembre-a-washington/297659', 'summary': 'Mondial 2026 : le tirage au sort prévu le 5 décembre à Washington (Trump). Entouré du président de la FIFA, Gianni Infantino, au bureau ovale de la Maison Blanche, Donald Trump a précisé que le tirage au sort du prochain Mondial se déroulera au Kennedy Ce.', 'size': 2}, {'id': '52', 'title': 'Mondial 2026 : Donald Trump annonce le lieu du tirage au sort', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/mondial-2026-donald-trump-annonce-le-lieu-du-tirage-au-sort-308944/', 'summary': 'Mondial 2026 : Donald Trump annonce le lieu du tirage au sort. Le président américain Donald Trump a annoncé, vendredi, que le tirage au sort de la Coupe du Monde de football 2026, co-organisée par les Etats-Unis, le Canada et le Mexique, aura lieu le 5 décembre à Washington. Depuis le bureau ovale de la Maison Blanche, en présence du président de', 'size': 2}], 'main_title': 'Mondial 2026 : le tirage au sort prévu le 5 décembre à Washington (Trump)'}, {'community_id': '6', 'articles': [{'id': '35', 'title': '\u200bRissani: Un inspecteur de police fait usage de son arme de service pour neutraliser un individu ayant mis en danger la vie des citoyens et des éléments de la police (source sécuritaire)', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/\u200bRissani-Un-inspecteur-de-police-fait-usage-de-son-arme-de-service-pour-neutraliser-un-individu-ayant-mis-en-danger-la_a71024.html', 'summary': "\u200bRissani: Un inspecteur de police fait usage de son arme de service pour neutraliser un individu ayant mis en danger la vie des citoyens et des éléments de la police (source sécuritaire). Un inspecteur de police, en fonction au district provincial de la police de Rissani, a été contraint, vendredi, de faire usage de son arme de service pour neutraliser le danger émanant d'un multirécidiviste (28 ans) en état de forte agitation ayant mis en danger la vie des citoyens et des éléments de la police en utilisant une arme blanche.", 'size': 4}, {'id': '76', 'title': 'Rissani : un policier neutralise un individu dangereux en utilisant son arme de service', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/rissani-un-policier-neutralise-un-individu-dangereux-en-utilisant-son-arme-de-service/', 'summary': 'Rissani : un policier neutralise un individu dangereux en utilisant son arme de service. Un inspecteur de police, en fonction au district provincial de la police de Rissani, a été contraint, vendredi, de faire usage de son arme de service pour neutraliser le danger émanant d’un multirécidiviste (28 ans) en état de forte agitation ayant mis en danger la vie des citoyens et des éléments de la police en .', 'size': 4}, {'id': '87', 'title': 'Maroc : un inspecteur de police fait usage de son arme de service pour neutraliser un individu ayant mis en danger la vie des citoyens', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/maroc-un-inspecteur-de-police-fait-usage-de-son-arme-de-service-pour-neutraliser-un-individu-ayant-mis-en-danger-la-vie-des-citoyens-et-des-elements-de-la-police.html', 'summary': 'Maroc : un inspecteur de police fait usage de son arme de service pour neutraliser un individu ayant mis en danger la vie des citoyens. Un inspecteur de police en fonction au district provincial de la police de Rissani a été contraint vendredi de faire usage de son arme de service pour neutraliser le danger émanant d’un multirécidiviste (28 ans) en état de forte agitation ayant mis en danger la vie des citoyens et des éléments de la police en . L’article est apparu en premier sur .', 'size': 4}, {'id': '95', 'title': 'Rissani : Un policier contraint d’utiliser son arme pour neutraliser un multirécidiviste armé', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/438490-rissani-un-policier-contraint-dutiliser-son-arme-pour-neutraliser-un-multirecidiviste-arme.html', 'summary': 'Rissani : Un policier contraint d’utiliser son arme pour neutraliser un multirécidiviste armé. Un inspecteur de police relevant du district provincial de Rissani a dû faire usage, vendredi, de son arme de service afin de mettre fin à la menace représentée par un individu de 28 ans, multirécidiviste, en état de forte agitation et armé d’une arme blanche. L’homme avait mis en danger la vie de plusieurs citoyens . ', 'size': 4}], 'main_title': '\u200bRissani: Un inspecteur de police fait usage de son arme de service pour neutraliser un individu ayant mis en danger la vie des citoyens et des éléments de la police (source sécuritaire)'}, {'community_id': '0', 'articles': [{'id': '49', 'title': 'Lancement de l’association «The Moroccan Pulse», un nouveau cadre pour fédérer les MRE', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/lancement-de-lassociation-the-moroccan-pulse-un-nouveau-cadre-pour-federer-les-mre-308964/', 'summary': 'Lancement de l’association «The Moroccan Pulse», un nouveau cadre pour fédérer les MRE. A l’initiative de MRE issus de plus de 10 pays, l’association «The Moroccan Pulse – Beyond Nations» vient de voir le jour, avec l’objectif de mettre en lumière les Marocains du Monde évoluant dans divers domaines de compétences. Le lancement officiel de cette organisation à but non lucratif aura lieu', 'size': 2}, {'id': '58', 'title': 'The Moroccan Pulse : une nouvelle association pour fédérer les Marocains du monde', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/174824/moroccan-pulse-nouvelle-association-pour.html', 'summary': 'The Moroccan Pulse : une nouvelle association pour fédérer les Marocains du monde. Une nouvelle structure vient enrichir le paysage associatif marocain. Baptisée “The Moroccan Pulse - Beyond Nations”, cette organisation à but non lucratif ambitionne de fédérer les Marocains du monde autour de cinq valeurs clés : vivre-ensemble, diversité, solidarité, culture et développement.', 'size': 2}], 'main_title': 'Lancement de l’association «The Moroccan Pulse», un nouveau cadre pour fédérer les MRE'}, {'community_id': '8', 'articles': [{'id': '51', 'title': 'IA : Meta et Google scellent une alliance à 10 milliards de dollars', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/ia-meta-et-google-scellent-une-alliance-a-10-milliards-de-dollars-308951/', 'summary': 'IA : Meta et Google scellent une alliance à 10 milliards de dollars. Le groupe Meta (Facebook, Instagram) vient de signer un contrat avec Google Cloud de plus de 10 milliards de dollars pour utiliser ses serveurs et d’autres services d’informatique à distance. Le contrat, qui s’étend sur six ans, est l’un des plus gros jamais obtenu par la branche de cloud de', 'size': 2}, {'id': '82', 'title': 'IA: Meta conclut un accord de plus de 10 milliards USD avec Google Cloud pour utiliser ses serveurs', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/ia-meta-conclut-un-accord-de-plus-de-10-milliards-usd-avec-google-cloud/', 'summary': 'IA: Meta conclut un accord de plus de 10 milliards USD avec Google Cloud pour utiliser ses serveurs. Le groupe Meta (Facebook, Instagram) vient de signer un contrat avec Google Cloud de plus de 10 milliards de dollars pour utiliser ses serveurs et d’autres services d’informatique à distance. Le contrat, qui s’étend sur six ans, est l’un des plus gros jamais obtenu par la branche de cloud de Google depuis sa création il .', 'size': 2}], 'main_title': 'IA : Meta et Google scellent une alliance à 10 milliards de dollars'}, {'community_id': '9', 'articles': [{'id': '53', 'title': 'Les prévisions du samedi 23 août 2025', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/les-previsions-du-samedi-23-aout-2025-308938/', 'summary': 'Les prévisions du samedi 23 août 2025. Voici les prévisions météorologiques établies par la Direction générale de la météorologie pour ce samedi 23 août 2025. -Temps assez chaud sur le Sud-Est et l’intérieur des provinces sahariennes. -Averses orageuses sur les Haut et Moyen Atlas. -Ondées et orages sur les versants Sud-Est, les Hauts plateaux et l’extrême Sud', 'size': 2}, {'id': '92', 'title': "Le temps qu'il fera ce dimanche 24 août 2025", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/438487-le-temps-quil-fera-ce-dimanche-24-aout-2025.html', 'summary': "Le temps qu'il fera ce dimanche 24 août 2025. Voici les prévisions météorologiques établies par la Direction générale de la météorologie pour le dimanche 24 août 2025 – Temps assez chaud sur le Sud-Est et l’extrême Sud du pays. – Nuages bas fréquents la matinée près des côtes, avec brume, et bruine sur l’Ouest de la Méditerranée ainsi que sur le Nord-Ouest des provinces . ", 'size': 2}], 'main_title': 'Les prévisions du samedi 23 août 2025'}, {'community_id': '3', 'articles': [{'id': '54', 'title': 'Championnat d’Afrique des Nations (CHAN): le Maroc dans le dernier carré', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/championnat-dafrique-des-nations-chan-le-maroc-dans-le-dernier-carre-308928/', 'summary': 'Championnat d’Afrique des Nations (CHAN): le Maroc dans le dernier carré. La sélection marocaine a décroché son billet pour les demi-finales du Championnat d’Afrique des nations de football des joueurs locaux (CHAN) locaux, en dominant son homologue tanzanienne par 1 but à 0, en quart de finale disputé vendredi 22 août à Dar Es Salaam. Oussama Lamlioui a inscrit le but', 'size': 5}, {'id': '60', 'title': 'CHAN-2024: Le Maroc bat la Tanzanie et va en demi-finale', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/une/chan-2024-le-maroc-bat-la-tanzanie-et-va-en-demi-finale', 'summary': 'CHAN-2024: Le Maroc bat la Tanzanie et va en demi-finale. La sélection marocaine des joueurs locaux s’est qualifiée pour les demi-finales du Championnat d’Afrique des nations de football (CHAN), en battant son homologue tanzanienne par 1 but à 0, en quart de finale disputé vendredi à Dar Es Salaam. Oussama Lamlioui a inscrit le but de victoire des Lions de l’Atlas à la 65e minute .', 'size': 4}, {'id': '80', 'title': 'CHAN-2024 (Quarts de finale): Le Maroc bat la Tanzanie (1-0), va en demi-finale', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/chan-2024-quarts-de-finale-le-maroc-bat-la-tanzanie-1-0-va-en-demi-finale/', 'summary': 'CHAN-2024 (Quarts de finale): Le Maroc bat la Tanzanie (1-0), va en demi-finale. La sélection marocaine des joueurs locaux s’est qualifiée pour les demi-finales du Championnat d’Afrique des nations de football (CHAN), en battant son homologue tanzanienne par 1 but à 0, en quart de finale disputé vendredi à Dar Es Salaam. Oussama Lamlioui a inscrit le but de victoire des Lions de l’Atlas à la 65e minute .', 'size': 4}, {'id': '91', 'title': 'CHAN-2024 : Le Maroc bat la Tanzanie (1-0), va en demi-finale', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/chan-2024-le-maroc-bat-la-tanzanie-1-0-va-en-demi-finale.html', 'summary': 'CHAN-2024 : Le Maroc bat la Tanzanie (1-0), va en demi-finale. La sélection marocaine des joueurs locaux s’est qualifiée pour les demi-finales du Championnat d’Afrique des nations de football (CHAN), en battant son homologue tanzanienne par 1 but à 0, en quart de finale disputé vendredi à Dar Es Salaam. Oussama Lamlioui a inscrit le but de victoire des Lions de l’Atlas à la 65e minute . L’article est apparu en premier sur .', 'size': 4}, {'id': '98', 'title': 'CHAN 2024 : le Maroc dans le dernier carré avec une prime déjà garantie', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/438493-chan-2024-le-maroc-dans-le-dernier-carre-avec-une-prime-deja-garantie.html', 'summary': 'CHAN 2024 : le Maroc dans le dernier carré avec une prime déjà garantie. L’équipe nationale marocaine A’ a validé son billet pour les demi-finales du Championnat d’Afrique des Nations 2024, s’assurant ainsi une récompense financière conséquente. En atteignant le dernier carré, les joueurs de Tarik Sektioui figurent désormais parmi les quatre meilleures sélections africaines de la compétition. Le succès décroché face à la Tanzanie (1-0), vendredi 23 août, . ', 'size': 2}], 'main_title': 'Championnat d’Afrique des Nations (CHAN): le Maroc dans le dernier carré'}, {'community_id': '7', 'articles': [{'id': '73', 'title': 'Grippe aviaire : L’UE développe de nouveaux outils pour briser la propagation', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/grippe-aviaire-lue-developpe-de-nouveaux-outils-pour-briser-la-propagation/', 'summary': 'Grippe aviaire : L’UE développe de nouveaux outils pour briser la propagation. Le Centre commun de recherche (CCR) de l’Union européenne a annoncé, vendredi, avoir développé de nouveaux tests précis pouvant détecter spécifiquement la grippe aviaire hautement pathogène, qui a déjà infecté des millions d’oiseaux et apparaît aujourd’hui chez certains mammifères. Le CCR, en collaboration avec le Laboratoire de référence de l’Union européenne (EURL) pour la grippe .', 'size': 2}, {'id': '88', 'title': 'Grippe aviaire : l’UE développe de nouveaux outils pour briser la propagation', 'source': 'atlasinfo.fr', 'link': 'https://atlasinfo.fr/grippe-aviaire-lue-developpe-de-nouveaux-outils-pour-briser-la-propagation.html', 'summary': 'Grippe aviaire : l’UE développe de nouveaux outils pour briser la propagation. Le Centre commun de recherche (CCR) de l’Union européenne a annoncé, vendredi, avoir développé de nouveaux tests précis pouvant détecter spécifiquement la grippe aviaire hautement pathogène, qui a déjà infecté des millions d’oiseaux et apparaît aujourd’hui chez certains mammifères. Le CCR, en collaboration avec le Laboratoire de référence de l’Union européenne (EURL) pour la grippe . L’article est apparu en premier sur .', 'size': 2}], 'main_title': 'Grippe aviaire : L’UE développe de nouveaux outils pour briser la propagation'}, {'community_id': '10', 'articles': [{'id': '100', 'title': 'Le 1er Rabie-I 1447 correspond au lundi 25 août, Aïd Al Mawlid Annabaoui célébré le vendredi 5 septembre', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/438507-le-1er-rabie-i-1447-correspond-au-lundi-25-aout-aid-al-mawlid-annabaoui-celebre-le-vendredi-5-septembre.html', 'summary': 'Le 1er Rabie-I 1447 correspond au lundi 25 août, Aïd Al Mawlid Annabaoui célébré le vendredi 5 septembre. Le mois de Rabie-I 1447 de l’hégire débutera le lundi 25 août 2025 et Aïd Al Mawlid Annabaoui sera célébré le vendredi 5 septembre, a annoncé, samedi soir, le ministère des Habous et des Affaires islamiques. Dans un communiqué, le ministère indique que l’observation du croissant lunaire du mois de Rabie-I 1447 a eu lieu . ', 'size': 4}, {'id': '102', 'title': 'Aïd Al Mawlid Annabaoui célébré le vendredi 05 septembre', 'source': 'lematin.ma', 'link': 'https://lematin.ma/nation/aid-al-mawlid-annabaoui-celebre-le-vendredi-05-septembre/297708', 'summary': 'Aïd Al Mawlid Annabaoui célébré le vendredi 05 septembre. Dans un communiqué, le ministère indique que l’observation du croissant lunaire du mois de Rabie-I 1447 a eu lieu le samedi 29 Safar 1447 de l’hégire, correspondant au 23 août 2025.', 'size': 3}, {'id': '107', 'title': 'Le 1er Rabie I 1447 correspond au lundi 25 août, Aïd Al Mawlid Annabaoui sera\xa0 le 5 septembre', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/174837/rabie-1447-correspond-lundi-aout.html', 'summary': 'Le 1er Rabie I 1447 correspond au lundi 25 août, Aïd Al Mawlid Annabaoui sera le 5 septembre. Le mois de Rabie I 1447 de l’hégire débutera le lundi 25 août 2025 et Aïd Al Mawlid Annabaoui sera célébré le vendredi 5 septembre, a annoncé, samedi soir, le ministère des Habous et des affaires islamiques.', 'size': 3}, {'id': '109', 'title': 'Le 1er Rabie-I 1447 correspond au lundi 25 août, Aïd Al Mawlid Annabaoui célébré le vendredi 05 septembre', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/actualite/le-1er-rabie-i-1447-correspond-au-lundi-25-aout-aid-al-mawlid-annabaoui-celebre-le-vendredi-05-septembre', 'summary': 'Le 1er Rabie-I 1447 correspond au lundi 25 août, Aïd Al Mawlid Annabaoui célébré le vendredi 05 septembre. Le mois de Rabie-I 1447 de l’hégire débutera le lundi 25 août 2025 et Aïd Al Mawlid Annabaoui sera célébré le vendredi 05 septembre, a annoncé, samedi soir, le ministère des Habous et des Affaires islamiques. Dans un communiqué, le ministère indique que l’observation du croissant lunaire du mois de Rabie-I 1447 a eu lieu .', 'size': 4}], 'main_title': 'Le 1er Rabie-I 1447 correspond au lundi 25 août, Aïd Al Mawlid Annabaoui célébré le vendredi 5 septembre'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
                        
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ? d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        // Fonction pour cacher le tooltip
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = '';
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
    
    
</body>




</html>
    