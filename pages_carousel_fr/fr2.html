<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); 
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title"> Les principales actualités des dernières 24 heures

</div>    
        <div class="header-subtitle"> Dernière mise à jour : 29/06/2025 - 18h27</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"></div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '7', 'title': 'Les températures attendues ce dimanche 29 juin 2025', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/431024-les-temperatures-attendues-ce-dimanche-29-juin-2025.html', 'summary': 'Les températures attendues ce dimanche 29 juin 2025. Voici les températures minimales et maximales prévues par la Direction générale de la météorologie pour la journée du dimanche 29 juin 2025 Min Max – Oujda 22 38 – Bouarfa 22 38 – Al Hoceima 19 28 – Tétouan 20 29 – Sebta 20 25 – Mellilia 21 28 – Tanger 22 35 – Kénitra . ', 'size': 2}, {'id': '72', 'title': 'Températures prévues pour le lundi 30 juin 2025', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/temperatures-prevues-pour-le-lundi-30-juin-2025/', 'summary': 'Températures prévues pour le lundi 30 juin 2025. Voici les températures minimales et maximales prévues par la Direction générale de la météorologie pour le lundi 30 juin 2025 : Min Max – Oujda 21 37 – Bouarfa 21 38 – Al Hoceima 19 28 – Tétouan 19 31 – Sebta 20 25 – Mellilia 21 27 – Tanger 23 37 – Kénitra 24 .', 'size': 2}], 'main_title': 'Les températures attendues ce dimanche 29 juin 2025'}, {'community_id': '2', 'articles': [{'id': '9', 'title': "Foot féminin: Le Maroc s'impose face à la Tanzanie", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/431050-foot-feminin-le-maroc-simpose-face-a-la-tanzanie.html', 'summary': "Foot féminin: Le Maroc s'impose face à la Tanzanie. L’équipe nationale féminine de football s’est imposée face à son homologue tanzanienne sur le score de 4 buts à 0, en match amical disputé samedi soir au stade Olympique de Rabat. Les buts des Lionnes de l’Atlas ont été inscrits par Ibtissam Jraidi sur penalty (28è), Ghizlane Chebbak (45è), Imène El Ghazouani (68è) et Najat . ", 'size': 2}, {'id': '13', 'title': "Préparatifs CAN féminine : L’équipe nationale s'impose face à la Tanzanie en amical", 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/lequipe-nationale-feminine-simpose-face-a-la-tanzanie-en-amical/288154', 'summary': "Préparatifs CAN féminine : L’équipe nationale s'impose face à la Tanzanie en amical. Les buts des Lionnes de l’Atlas ont été inscrits par Ibtissam Jraidi sur penalty (28è), Ghizlane Chebbak (45è), Imène El Ghazouani (68è) et Najat Badri (75è).Cette rencontre s'.", 'size': 2}], 'main_title': "Foot féminin: Le Maroc s'impose face à la Tanzanie"}, {'community_id': '3', 'articles': [{'id': '15', 'title': "Le Maroc et l'Ukraine signent à Istanbul un accord de transport routier international", 'source': 'lematin.ma', 'link': 'https://lematin.ma/economie/le-maroc-et-lukraine-signent-un-accord-de-transport-routier-international/288145', 'summary': "Le Maroc et l'Ukraine signent à Istanbul un accord de transport routier international. Paraphé par le ministre du Transport et de la Logistique, Abdessamad Kayouh, et le vice-ministre ukrainien du Développement des communautés, des territoires et des infrastructures,.", 'size': 2}, {'id': '75', 'title': 'Istanbul : Le Maroc et l’Ukraine signent un accord de transport routier international', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/istanbul-le-maroc-et-lukraine-signent-un-accord-de-transport-routier-international/', 'summary': 'Istanbul : Le Maroc et l’Ukraine signent un accord de transport routier international. Le Maroc et l’Ukraine ont signé un accord sur le transport routier international, samedi à Istanbul, en marge du Forum mondial sur la connectivité des transports. Paraphé par le ministre du Transport et de la Logistique, Abdessamad Kayouh, et le vice-ministre ukrainien du Développement des communautés, des territoires et des infrastructures, Serhiy Derkach, à l’issue .', 'size': 2}], 'main_title': "Le Maroc et l'Ukraine signent à Istanbul un accord de transport routier international"}, {'community_id': '4', 'articles': [{'id': '27', 'title': 'Agadir: Arrestation de deux Britanniques poursuivis au Royaume-Uni', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Agadir-Arrestation-de-deux-Britanniques-poursuivis-au-Royaume-Uni_a69279.html', 'summary': 'Agadir: Arrestation de deux Britanniques poursuivis au Royaume-Uni. Les éléments du service préfectoral de la police judiciaire d’Agadir ont interpellé, samedi, sur la base de renseignements précis fournis par la Direction Générale de la Surveillance du Territoire (DGST), deux ressortissants britanniques faisant l’objet de mandats d’arrêt internationaux émis par les autorités judiciaires de leur pays.', 'size': 4}, {'id': '54', 'title': 'Agadir : Deux Britanniques recherchés par Interpol arrêtés en vue d’extradition', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/170294/agadir-deux-britanniques-recherches-interpol.html', 'summary': 'Agadir : Deux Britanniques recherchés par Interpol arrêtés en vue d’extradition. Les éléments du service préfectoral de la police judiciaire d’Agadir ont interpellé, samedi, deux ressortissants britanniques faisant l’objet de mandats d’arrêt internationaux émis par les autorités judiciaires de leur pays, sur la base de renseignements précis fournis par la Direction Générale de la Surveillance du Territoire (DGST).', 'size': 4}, {'id': '76', 'title': 'Agadir: interpellation de deux ressortissants britanniques faisant l’objet de mandats d’arrêt internationaux', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/agadir-interpellation-de-deux-ressortissants-britanniques-faisant-lobjet-de-mandats-darret-internationaux/', 'summary': 'Agadir: interpellation de deux ressortissants britanniques faisant l’objet de mandats d’arrêt internationaux. Les éléments du service préfectoral de la police judiciaire d’Agadir ont interpellé, samedi, sur la base de renseignements précis fournis par la Direction Générale de la Surveillance du Territoire (DGST), deux ressortissants britanniques faisant l’objet de mandats d’arrêt internationaux émis par les autorités judiciaires de leur pays. Les deux ressortissants étrangers ont été interpellés lors .', 'size': 4}, {'id': '83', 'title': 'Agadir : Arrestation de deux ressortissants britanniques recherchés à l’international', 'source': 'lnt.ma', 'link': 'https://lnt.ma/agadir-arrestation-de-deux-ressortissants-britanniques-recherches-a-linternational/', 'summary': 'Agadir : Arrestation de deux ressortissants britanniques recherchés à l’international. Deux ressortissants britanniques faisant l’objet de mandats d’arrêt internationaux ont été interpellés samedi à Agadir par les services de la police judiciaire de la préfecture de la ville, sur la base de renseignements fournis par la Direction Générale de la Surveillance du Territoire (DGST), selon une source sécuritaire. L’opération s’est déroulée dans le quartier d’Anza, . ', 'size': 4}], 'main_title': 'Agadir: Arrestation de deux Britanniques poursuivis au Royaume-Uni'}, {'community_id': '5', 'articles': [{'id': '40', 'title': 'Le Maroc et la Turquie signent un accord sur les corridors maritimes', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Le-Maroc-et-la-Turquie-signent-un-accord-sur-les-corridors-maritimes_a69266.html', 'summary': "Le Maroc et la Turquie signent un accord sur les corridors maritimes. Le Maroc et la Turquie ont signé, vendredi à Istanbul, en marge du Forum mondial sur la connectivité des transports, deux mémorandums d'entente (MoU) relatifs à la sécurité routière et aux corridors maritimes.", 'size': 3}, {'id': '49', 'title': 'Transport routier et maritime : Rabat et Ankara coopèrent', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/transport-routier-et-maritime-rabat-et-ankara-cooperent-305647/', 'summary': 'Transport routier et maritime : Rabat et Ankara coopèrent. Le Maroc et la Turquie ont signé, vendredi à Istanbul, en marge du Forum mondial sur la connectivité des transports, deux mémorandums d’entente (MoU) relatifs à la sécurité routière et aux corridors maritimes. Ces deux MoU ont été signés par le ministre du Transport et de la Logistique, Abdessamad Kayouh,', 'size': 3}, {'id': '82', 'title': 'Transport : le Maroc et la Turquie signent deux protocoles d’accord sur la sécurité routière et la coopération maritime', 'source': 'lnt.ma', 'link': 'https://lnt.ma/transport-le-maroc-et-la-turquie-signent-deux-protocoles-daccord-sur-la-securite-routiere-et-la-cooperation-maritime/', 'summary': 'Transport : le Maroc et la Turquie signent deux protocoles d’accord sur la sécurité routière et la coopération maritime. Le Maroc et la Turquie ont procédé, vendredi à Istanbul, à la signature de deux mémorandums d’entente (MoU) portant respectivement sur la sécurité routière et le développement des corridors maritimes. Ces accords ont été paraphés en marge du Forum mondial sur la connectivité des transports, qui se tient du 27 au 29 juin dans la . ', 'size': 3}], 'main_title': 'Le Maroc et la Turquie signent un accord sur les corridors maritimes'}, {'community_id': '6', 'articles': [{'id': '41', 'title': 'Gestion de l’eau : Nizar Baraka suit l’avancement des chantiers à Al Haouz', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Gestion-de-l-eau-Nizar-Baraka-suit-l-avancement-des-chantiers-a-Al-Haouz_a69265.html', 'summary': 'Gestion de l’eau : Nizar Baraka suit l’avancement des chantiers à Al Haouz. Le ministre de l\'Equipement et de l\'Eau, Nizar Baraka, a effectué, vendredi, une visite de terrain dans la province d\'Al Haouz et ce, dans le cadre du projet de coopération maroco-allemande-danoise dans le secteur de l\'eau "Territoires Durables-Modes de vies durables et résilients au Maroc".', 'size': 2}, {'id': '80', 'title': 'Al Haouz : M. Baraka visite des projets hydrauliques et s’informe des actions du projet «\xa0Territoires durables\xa0»', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/al-haouz-m-baraka-visite-des-projets-hydrauliques-et-sinforme-des-actions-du-projet-territoires-durables/', 'summary': 'Al Haouz : M. Baraka visite des projets hydrauliques et s’informe des actions du projet « Territoires durables ». Le ministre de l’Equipement et de l’Eau, Nizar Baraka, a effectué, vendredi, une visite de terrain dans la province d’Al Haouz et ce, dans le cadre du projet de coopération maroco-allemande-danoise dans le secteur de l’eau « Territoires Durables-Modes de vies durables et résilients au Maroc ». Cette visite, au cours de laquelle M. Baraka était accompagné .', 'size': 2}], 'main_title': 'Gestion de l’eau : Nizar Baraka suit l’avancement des chantiers à Al Haouz'}, {'community_id': '7', 'articles': [{'id': '45', 'title': 'Le Parlement arabe souligne le rôle important de Sa Majesté le Roi dans la défense des Palestiniens', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/le-parlement-arabe-souligne-le-role-important-de-sa-majeste-le-roi-dans-la-defense-des-palestiniens-305669/', 'summary': 'Le Parlement arabe souligne le rôle important de Sa Majesté le Roi dans la défense des Palestiniens. Le Parlement arabe a souligné, samedi au Caire, le rôle important et les efforts continus déployés par Sa Majesté le Roi Mohammed VI, Président du Comité Al-Qods, dans la défense de la cause palestinienne. Dans une résolution sur la situation dans les territoires palestiniens occupés, issue des travaux de la', 'size': 2}, {'id': '74', 'title': 'Le Parlement arabe souligne le rôle important de S.M. le Roi dans la défense de la cause palestinienne', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/le-parlement-arabe-souligne-le-role-important-de-s-m-le-roi-dans-la-defense-de-la-cause-palestinienne/', 'summary': 'Le Parlement arabe souligne le rôle important de S.M. le Roi dans la défense de la cause palestinienne. Le Parlement arabe a souligné, samedi au Caire, le rôle important et les efforts continus déployés par Sa Majesté le Roi Mohammed VI, Président du Comité Al-Qods, dans la défense de la cause palestinienne. Dans une résolution sur la situation dans les territoires palestiniens occupés, issue des travaux de la 5e session plénière au titre .', 'size': 2}], 'main_title': 'Le Parlement arabe souligne le rôle important de Sa Majesté le Roi dans la défense des Palestiniens'}, {'community_id': '1', 'articles': [{'id': '51', 'title': 'Rabat : arrestation d’une extrémiste affiliée à «\xa0Daech\xa0»', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/rabat-arrestation-dune-extremiste-affiliee-a-daech-305634/', 'summary': 'Rabat : arrestation d’une extrémiste affiliée à « Daech ». Le Bureau Central d’Investigations Judiciaires (BCIJ) a interpellé, vendredi, sur la base de renseignements précis fournis par la Direction Générale de la Surveillance du Territoire (DGST), une extrémiste affiliée à l’organisation terroriste « Daech », poursuivant ses études dans l’un des institut supérieurs techniques, pour son implication présumée dans la préparation et', 'size': 3}, {'id': '60', 'title': 'BCIJ: Interpellation à Rabat d’une extrémiste affiliée à Daech', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/actualite/bcij-interpellation-a-rabat-dune-extremiste-affiliee-a-daech', 'summary': 'BCIJ: Interpellation à Rabat d’une extrémiste affiliée à Daech. Le Bureau Central d’Investigations Judiciaires (BCIJ) a interpellé, vendredi, sur la base de renseignements précis fournis par la Direction Générale de la Surveillance du Territoire (DGST), une extrémiste affiliée à l’organisation terroriste « Daech », poursuivant ses études dans l’un des institut supérieurs techniques, pour son implication présumée dans la préparation et la planification de l’exécution d’un .', 'size': 3}, {'id': '86', 'title': 'Rabat : Arrestation d’une étudiante pour implication présumée dans un projet à caractère terroriste', 'source': 'lnt.ma', 'link': 'https://lnt.ma/rabat-arrestation-dune-etudiante-pour-implication-presumee-dans-un-projet-a-caractere-terroriste/', 'summary': 'Rabat : Arrestation d’une étudiante pour implication présumée dans un projet à caractère terroriste. Le Bureau Central d’Investigations Judiciaires (BCIJ) a procédé, vendredi 28 juin à Rabat, à l’interpellation d’une étudiante âgée de 21 ans, soupçonnée d’être affiliée à l’organisation terroriste dite « Daech » et d’être impliquée dans la préparation d’un projet à caractère terroriste, selon un communiqué officiel. L’opération a été menée sur la base de renseignements précis fournis . ', 'size': 3}], 'main_title': 'Rabat : arrestation d’une extrémiste affiliée à «\xa0Daech\xa0»'}, {'community_id': '8', 'articles': [{'id': '67', 'title': 'Casablanca Music Week: Ambiance survoltée à La Casablancaise', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/influences/culture/casablanca-music-week-ambiance-survoltee-a-la-casablancaise/', 'summary': 'Casablanca Music Week: Ambiance survoltée à La Casablancaise. Organisée par NRJ Maroc, la Casablanca Music Week attire les foules à travers une programmation éclectique, mêlant musiques actuelles, rencontres culturelles et événements artistiques.', 'size': 2}, {'id': '84', 'title': 'Casablanca Music Week : une première édition réussie qui a trouvé son public', 'source': 'lnt.ma', 'link': 'https://lnt.ma/casablanca-music-week-une-premiere-edition-reussie-qui-a-trouve-son-public/', 'summary': 'Casablanca Music Week : une première édition réussie qui a trouvé son public. La première édition de la Casablanca Music Week (CMW), organisée par NRJ Maroc, a pris fin ce week-end après plusieurs jours de concerts, de rencontres culturelles et d’activités artistiques, ayant rassemblé un public large et diversifié sur le site de La Casablancaise. L’événement, conçu comme une vitrine des industries culturelles et créatives, a mis en . ', 'size': 2}], 'main_title': 'Casablanca Music Week: Ambiance survoltée à La Casablancaise'}, {'community_id': '9', 'articles': [{'id': '93', 'title': 'L\'Iran dit avoir de "sérieux doutes" sur le respect du cessez-le-feu par Israël', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/431080-liran-dit-avoir-de-serieux-doutes-sur-le-respect-du-cessez-le-feu-par-israel.html', 'summary': 'L\'Iran dit avoir de "sérieux doutes" sur le respect du cessez-le-feu par Israël. L’Iran a dit dimanche avoir de « sérieux doutes » sur le respect par Israël du cessez-le-feu en vigueur depuis mardi après 12 jours de guerre entre les deux pays ennemis. « Nous n’avons pas déclenché la guerre mais nous avons répondu à l’agresseur de toutes nos forces », a déclaré le chef d’état-major des forces armées Abdolrahim Moussavi, . ', 'size': 2}, {'id': '112', 'title': "L'Iran doute du respect du cessez-le-feu par Israël", 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/L-Iran-doute-du-respect-du-cessez-le-feu-par-Israel_a69285.html', 'summary': 'L\'Iran doute du respect du cessez-le-feu par Israël. L\'Iran a exprimé dimanche de "sérieux doutes" sur les intentions d\'Israël de continuer à respecter le cessez-le-feu entré vigueur le 24 juin après 12 jours de guerre sans précédent entre les deux pays ennemis.', 'size': 2}], 'main_title': 'L\'Iran dit avoir de "sérieux doutes" sur le respect du cessez-le-feu par Israël'}, {'community_id': '10', 'articles': [{'id': '100', 'title': 'Pêche à Laâyoune : l’État dément toute destruction des ressources halieutiques', 'source': 'lematin.ma', 'link': 'https://lematin.ma/regions/peche-a-laayoune-letat-dement-toute-destruction-des-ressources/288204', 'summary': "Pêche à Laâyoune : l’État dément toute destruction des ressources halieutiques. Dans un démenti rendu public dimanche, le Secrétariat d’État a qualifié de contrevérités, d'allégations infondées et de mensonges, le contenu de l'article en qu.", 'size': 2}, {'id': '132', 'title': 'Laâyoune: le Secrétariat d’État chargé de la pêche maritime dément les allégations sur la «\xa0destruction des ressources halieutiques\xa0»', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/laayoune-le-secretariat-detat-charge-de-la-peche-maritime-dement-les-allegations-sur-la-destruction-des-ressources-halieutiques/', 'summary': 'Laâyoune: le Secrétariat d’État chargé de la pêche maritime dément les allégations sur la « destruction des ressources halieutiques ». Le Secrétariat d’État chargé de la pêche maritime a catégoriquement démenti les allégations contenues dans un article publié, samedi, sur un site électronique au sujet d’une prétendue « destruction des ressources halieutiques à travers la capture de sardines juvéniles par des chalutiers côtiers au niveau du port de Laâyoune ». Dans un démenti rendu public dimanche, le .', 'size': 2}], 'main_title': 'Pêche à Laâyoune : l’État dément toute destruction des ressources halieutiques'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
                        
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ? d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        // Fonction pour cacher le tooltip
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = '';
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
    
    
</body>




</html>
    