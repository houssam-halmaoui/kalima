<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); 
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title"> Les principales actualités des dernières 24 heures

</div>    
        <div class="header-subtitle"> Dernière mise à jour : 13/06/2025 - 06h24</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"></div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '5', 'articles': [{'id': '3', 'title': "Calendrier des matchs, équipes, villes ... Ce qu'il faut savoir sur la Coupe du monde des clubs", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/428268-calendrier-des-matchs-equipes-villes-ce-quil-faut-savoir-sur-la-coupe-du-monde-des-clubs.html', 'summary': "Calendrier des matchs, équipes, villes . Ce qu'il faut savoir sur la Coupe du monde des clubs. La Coupe du Monde des Clubs de la FIFA 2025 marquera le début d’une nouvelle ère pour le football international. Lancée en 2000 et dont le prestige n’a cessé de croître, cette compétition réunira pour la première fois 32 équipes dont le Wydad de Casablanca, réparties en huit groupes de quatre, reprenant le format traditionnel de . ", 'size': 2}, {'id': '37', 'title': 'Mondial des clubs : la liste officielle du Wydad dévoilée', 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/mondial-des-clubs-la-liste-officielle-du-wydad-devoilee/284918', 'summary': 'Mondial des clubs : la liste officielle du Wydad dévoilée. La nouvelle Coupe du Monde des Clubs de la FIFA verra les 32 meilleures équipes du monde s’affronter dans pas moins de 63 rencontres disputées dans 12 stades et 11 villes des États.', 'size': 2}], 'main_title': "Calendrier des matchs, équipes, villes ... Ce qu'il faut savoir sur la Coupe du monde des clubs"}, {'community_id': '12', 'articles': [{'id': '6', 'title': "Gaza: Distribution de 500 paniers alimentaires à l’initiative de l'Agence Bayt Mal Al-Qods Acharif", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/428461-gaza-distribution-de-500-paniers-alimentaires-a-linitiative-de-lagence-bayt-mal-al-qods-acharif.html', 'summary': "Gaza: Distribution de 500 paniers alimentaires à l’initiative de l'Agence Bayt Mal Al-Qods Acharif. Les équipes de secours de l’association Ertiqaa pour le développement communautaire à Gaza ont achevé, mercredi, la distribution de 500 paniers alimentaires au profit des familles les plus démunies dans plusieurs régions de la bande de Gaza, à l’initiative de l’Agence Bayt Mal Al-Qods Acharif, relevant du Comité Al-Qods présidé par le Roi Mohammed VI. . ", 'size': 3}, {'id': '118', 'title': 'Gaza : Distribution de 500 paniers alimentaires par l’Agence Bayt Mal Al-Qods Acharif', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/168831/gaza-distribution-paniers-alimentaires-l-agence.html', 'summary': 'Gaza : Distribution de 500 paniers alimentaires par l’Agence Bayt Mal Al-Qods Acharif. Les équipes de secours de l’association Ertiqaa pour le développement communautaire à Gaza ont achevé, mercredi, la distribution de 500 paniers alimentaires au profit des familles dans plusieurs régions de la bande de Gaza, à l’initiative de l’Agence Bayt Mal Al-Qods Acharif, relevant du Comité Al-Qods présidé par le roi Mohammed VI.', 'size': 3}, {'id': '251', 'title': 'Gaza : 500 paniers alimentaires distribués par Bayt Mal Al-Qods', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Gaza-500-paniers-alimentaires-distribues-par-Bayt-Mal-Al-Qods_a68593.html', 'summary': 'Gaza : 500 paniers alimentaires distribués par Bayt Mal Al-Qods. Les équipes de secours de l’association Ertiqaa pour le développement communautaire à Gaza ont achevé, mercredi, la distribution de 500 paniers alimentaires au profit des familles les plus démunies dans plusieurs régions de la bande de Gaza, à l’initiative de l’Agence Bayt Mal Al-Qods Acharif, relevant du Comité Al-Qods présidé par Sa Majesté le Roi Mohammed VI.', 'size': 3}], 'main_title': "Gaza: Distribution de 500 paniers alimentaires à l’initiative de l'Agence Bayt Mal Al-Qods Acharif"}, {'community_id': '1', 'articles': [{'id': '18', 'title': "La rhétorique sélective et fallacieuse de l'Algérie sur le Sahara marocain mise à nu devant le C24 de l'ONU", 'source': 'lematin.ma', 'link': 'https://lematin.ma/nation/la-rhetorique-selective-de-lalgerie-sur-le-sahara-mise-a-nu-devant-le-c24/285071', 'summary': "La rhétorique sélective et fallacieuse de l'Algérie sur le Sahara marocain mise à nu devant le C24 de l'ONU. Faisant usage du droit de réponse lors de la session ordinaire de ce Comité qui se tient du 9 au 20 juin, Majda Moutchou a relevé que l'Algérie en ce faisant tente vainement de.", 'size': 2}, {'id': '176', 'title': 'ONU: La rhétorique sélective et fallacieuse de l’Algérie sur le Sahara marocain mise à nu devant le C24', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/onu-la-rhetorique-selective-et-fallacieuse-de-lalgerie-sur-le-sahara-marocain-mise-a-nu-devant-le-c24/', 'summary': 'ONU: La rhétorique sélective et fallacieuse de l’Algérie sur le Sahara marocain mise à nu devant le C24. La Représentante permanente adjointe du Maroc auprès de l’ONU, Majda Moutchou, a épinglé, devant le Comité des 24 de l’ONU (C24), la rhétorique sélective et fallacieuse à laquelle recourt l’Algérie pour masquer sa responsabilité historique et sans équivoque dans le différend régional autour du Sahara marocain. Faisant usage du droit de réponse lors de la .', 'size': 2}], 'main_title': "La rhétorique sélective et fallacieuse de l'Algérie sur le Sahara marocain mise à nu devant le C24 de l'ONU"}, {'community_id': '3', 'articles': [{'id': '31', 'title': 'Crash d’un avion d’Air India après son départ vers Londres avec 242 personnes à bord', 'source': 'lematin.ma', 'link': 'https://lematin.ma/monde/crash-dun-avion-dair-india-apres-son-depart-vers-londres/284965', 'summary': 'Crash d’un avion d’Air India après son départ vers Londres avec 242 personnes à bord. Le vol AI 171, reliant Ahmedabad à Londres Gatwick, a été impliqué dans un accident le 12 juin 2025. Nous rassemblons actuellement les faits et communiquerons dès que possibl.', 'size': 2}, {'id': '69', 'title': "Inde: un avion à destination de Londres s'écrase à Ahmedabad avec 242 personnes à bord", 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Inde-un-avion-a-destination-de-Londres-s-ecrase-a-Ahmedabad-avec-242-personnes-a-bord_a68567.html', 'summary': "Inde: un avion à destination de Londres s'écrase à Ahmedabad avec 242 personnes à bord. Un avion de la compagnie Air India, avec un total de 242 passagers et membres d'équipage à bord et à destination de Londres-Gatwick, s'est écrasé jeudi au décollage de l'aéroport d'Ahmedabad dans le nord-ouest de l'Inde, ont annoncé les autorités.", 'size': 2}, {'id': '89', 'title': "Inde : un avion d'Air India à destination de Londres s’écrase après son décollage", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/06/12/inde-un-avion-dair-india-a-destination-de-londres-secrase-apres-son-decollage_1937315/', 'summary': "Inde : un avion d'Air India à destination de Londres s’écrase après son décollage. Un avion de la compagnie Air India, opérant un vol au départ d’Ahmedabad (nord-ouest de l’Inde) vers Londres Gatwick, s’est écrasé jeudi peu après son décollage. Le vol AI 171, reliant Ahmedabad à Londres Gatwick, a été impliqué dans un accident le 12 juin 2025. Nous rassemblons actuellement les faits et communiquerons dès que possible »,.", 'size': 3}], 'main_title': "Inde : un avion d'Air India à destination de Londres s’écrase après son décollage"}, {'community_id': '23', 'articles': [{'id': '34', 'title': 'Classement féminin FIFA : le Maroc se maintient au 60e rang mondial, 3e en Afrique', 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/classement-feminin-fifa-le-maroc-se-maintient-au-60e-rang-mondial/284937', 'summary': 'Classement féminin FIFA : le Maroc se maintient au 60e rang mondial, 3e en Afrique. Avec une défaite contre le Cameroun (0-1) et une victoire face à la Tunisie (3-1), tous deux disputés en match amical, le Maroc termine le classement FIFA de juin avec 1419,63 poin.', 'size': 2}, {'id': '117', 'title': 'Classement féminin FIFA : Le Maroc se maintient 60e mondial, 3e en Afrique', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/168837/classement-feminin-fifa-maroc-maintient.html', 'summary': 'Classement féminin FIFA : Le Maroc se maintient 60e mondial, 3e en Afrique. La sélection nationale féminine de football s’est maintenue au 60e rang mondial du classement de la Fédération internationale de football (FIFA), publié jeudi, et reste installée à la troisième place au niveau africain.', 'size': 2}, {'id': '209', 'title': 'Classement féminin FIFA | Le Maroc se maintient au 60e rang mondial', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/classement-feminin-fifa-le-maroc-se-maintient-au-60e-rang-mondial/', 'summary': 'Classement féminin FIFA | Le Maroc se maintient au 60e rang mondial. La sélection nationale féminine de football s’est maintenue au 60e rang mondial du classement de la Fédération internationale de football (FIFA), publié jeudi, et reste installée à la troisième place au niveau africain. Avec une défaite contre le Cameroun (0-1) et une victoire face à la Tunisie (3-1), tous deux disputés en match amical, le ', 'size': 3}], 'main_title': 'Classement féminin FIFA | Le Maroc se maintient au 60e rang mondial'}, {'community_id': '6', 'articles': [{'id': '40', 'title': 'Festival du film arabe de Casablanca : 31 films en compétition', 'source': 'lematin.ma', 'link': 'https://lematin.ma/culture/festival-du-film-arabe-de-casablanca-31-films-en-competition/284910', 'summary': 'Festival du film arabe de Casablanca : 31 films en compétition. Un total de 12 films participeront à la compétition des longs-métrages de fiction et documentaires, tandis que la compétition des courts-métrages de fiction et documentaires porter.', 'size': 2}, {'id': '161', 'title': 'Festival du film arabe de Casablanca : 31 films en compétition lors de la 6ᵉ édition', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/influences/culture/festival-du-film-arabe-de-casablanca-31-films-en-competition-lors-de-la-6%e1%b5%89-edition/', 'summary': 'Festival du film arabe de Casablanca : 31 films en compétition lors de la 6ᵉ édition. Selon les organisateurs, le jury de la compétition des longs-métrages sera présidé par le réalisateur et producteur marocain Nabil Ayouch.', 'size': 2}], 'main_title': 'Festival du film arabe de Casablanca : 31 films en compétition'}, {'community_id': '7', 'articles': [{'id': '47', 'title': 'Le Maroc lancera un méga parc éolien offshore de 1.000 MW près d’Essaouira', 'source': 'lematin.ma', 'link': 'https://lematin.ma/economie/le-maroc-lancera-un-mega-parc-eolien-offshore-de-1000-mw-pres-dessaouira/284870', 'summary': 'Le Maroc lancera un méga parc éolien offshore de 1.000 MW près d’Essaouira. Un vaste Parc éolien offshore d’une capacité de 1.000 mégawatts verra le jour près d’Essaouira. Ce projet figure parmi les tout premiers investissements du Partenariat Bleu Méditer.', 'size': 2}, {'id': '230', 'title': 'Un parc éolien offshore prévu au large d’Essaouira', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/428398-un-parc-eolien-offshore-prevu-au-large-dessaouira.html', 'summary': 'Un parc éolien offshore prévu au large d’Essaouira. Le Maroc franchit une nouvelle étape dans sa transition énergétique avec le lancement d’un projet éolien offshore d’envergure au large d’Essaouira, soutenu par un fonds régional dédié à l’économie bleue durable. Un parc éolien en mer d’une capacité de 1.000 mégawatts verra prochainement le jour au large d’Essaouira. Ce projet inédit au Maroc s’inscrit dans . ', 'size': 2}], 'main_title': 'Le Maroc lancera un méga parc éolien offshore de 1.000 MW près d’Essaouira'}, {'community_id': '9', 'articles': [{'id': '53', 'title': 'Le gouvernement approuve un décret sur l’organisation des universités et des diplômes', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Le-gouvernement-approuve-un-decret-sur-l-organisation-des-universites-et-des-diplomes_a68589.html', 'summary': 'Le gouvernement approuve un décret sur l’organisation des universités et des diplômes. Le Conseil de gouvernement approuve un projet de décret sur la vocation des établissements universitaires, les cycles des études supérieures et les diplômes nationaux correspondants.', 'size': 2}, {'id': '238', 'title': 'Universités à accès régulé : ce qui va changer pour les étudiants', 'source': 'lematin.ma', 'link': 'https://lematin.ma/enseignement/universites-a-acces-regule-ce-qui-va-changer-pour-les-etudiants/285099', 'summary': 'Universités à accès régulé : ce qui va changer pour les étudiants. Le Conseil de gouvernement a approuvé jeudi un projet de décret relatif à la vocation des établissements universitaires, les cycles des études supérieures et les diplômes nationaux.', 'size': 2}], 'main_title': 'Le gouvernement approuve un décret sur l’organisation des universités et des diplômes'}, {'community_id': '14', 'articles': [{'id': '61', 'title': 'Sean Paul célèbre Casablanca dans son dernier clip tourné au Dar Dada', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Sean-Paul-celebre-Casablanca-dans-son-dernier-clip-tourne-au-Dar-Dada_a68578.html', 'summary': "Sean Paul célèbre Casablanca dans son dernier clip tourné au Dar Dada. Le célèbre artiste jamaïcain Sean Paul a récemment mis Casablanca à l’honneur dans le clip de son nouveau single TUFF, tourné dans l’écrin raffiné du restaurant Dar Dada, en plein cœur de la médina de la capitale économique. Profitant de sa participation en mai dernier au festival Timeless, où il était l'une des principales têtes d'affiche, l'icône du dancehall a choisi la ville blanche comme décor de sa dernière création visuelle.", 'size': 2}, {'id': '88', 'title': 'Sean Paul réalise un clip dans le restaurant Dar Dada à Casablanca', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/06/12/sean-paul-realise-un-clip-dans-le-restaurant-dar-dada-a-casablanca_1937322/', 'summary': 'Sean Paul réalise un clip dans le restaurant Dar Dada à Casablanca. Ambiance feutrée, décors orientaux et pulsations dancehall : Sean Paul s’offre une parenthèse marocaine dans le clip de « TUFF », tourné à Casablanca à l’occasion de son passage lors du festival Timeless. Tête d’affiche du festival Timeless, à Casablanca, qui s’est déroulé en mai dernier, la star jamaïcaine Sean Paul a profité de son passage au.', 'size': 3}, {'id': '130', 'title': 'Sean Paul tourne un nouveau clip vidéo dans un riad marocain', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/168781/sean-paul-tourne-nouveau-clip.html', 'summary': 'Sean Paul tourne un nouveau clip vidéo dans un riad marocain. Le chanteur de dancehall et rappeur jamaïcain Sean Paul sapprête à sortir un nouveau clip vidéo pour son dernier morceau «Tuff», tourné au Maroc.', 'size': 2}], 'main_title': 'Sean Paul réalise un clip dans le restaurant Dar Dada à Casablanca'}, {'community_id': '10', 'articles': [{'id': '62', 'title': "Sa Majesté le Roi félicite Vladimir Poutine à l'occasion de la fête nationale de la Russie", 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Sa-Majeste-le-Roi-felicite-Vladimir-Poutine-a-l-occasion-de-la-fete-nationale-de-la-Russie_a68577.html', 'summary': "Sa Majesté le Roi félicite Vladimir Poutine à l'occasion de la fête nationale de la Russie. Sa Majesté le Roi Mohammed VI a adressé un message de félicitations au Président de la Fédération de Russie, M. Vladimir Poutine, à l'occasion de la fête nationale de son pays.", 'size': 2}, {'id': '210', 'title': 'SM le Roi félicite le président russe à l’occasion de la fête nationale de son pays', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/sm-le-roi-felicite-le-president-russe-a-loccasion-de-la-fete-nationale-de-son-pays-2/', 'summary': 'SM le Roi félicite le président russe à l’occasion de la fête nationale de son pays. Sa Majesté le Roi Mohammed VI a adressé un message de félicitations au Président de la Fédération de Russie, M. Vladimir Poutine, à l’occasion de la fête nationale de son pays. Dans ce message, Sa Majesté le Roi exprime, en Son nom et en celui du peuple marocain, Ses chaleureuses félicitations à M. Poutine et ', 'size': 2}], 'main_title': "Sa Majesté le Roi félicite Vladimir Poutine à l'occasion de la fête nationale de la Russie"}, {'community_id': '21', 'articles': [{'id': '71', 'title': "Rabat : tenue de la 7ème réunion de l'Observatoire des Délais de Paiement", 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Rabat-tenue-de-la-7eme-reunion-de-l-Observatoire-des-Delais-de-Paiement_a68570.html', 'summary': "Rabat : tenue de la 7ème réunion de l'Observatoire des Délais de Paiement. La septième réunion de l’Observatoire des Délais de Paiement s’est tenue, mardi à Rabat, sous la présidence du ministre de l’Économie et des Finances, Nadia Fettah, et du Vice-président général de la Confédération Générale des Entreprises du Maroc (CGEM), Mehdi Tazi.", 'size': 3}, {'id': '110', 'title': 'L’Observatoire des délais de paiement tient sa septième réunion', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/lobservatoire-des-delais-de-paiement-tient-sa-septieme-reunion-304498/', 'summary': 'L’Observatoire des délais de paiement tient sa septième réunion. La septième réunion de l’Observatoire des délais de paiement s’est tenue, mardi à Rabat, sous la présidence du ministre de l’Économie et des Finances, Nadia Fettah, et du Vice-président général de la Confédération Générale des Entreprises du Maroc (CGEM), Mehdi Tazi. Cette rencontre s’inscrit dans le cadre des hautes orientations', 'size': 3}, {'id': '167', 'title': 'Nadia Fettah préside la 7e réunion de l’Observatoire des délais de paiement', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/affaires/nadia-fettah-preside-la-7e-reunion-de-lobservatoire-des-delais-de-paiement/', 'summary': "Nadia Fettah préside la 7e réunion de l’Observatoire des délais de paiement. La 7e réunion de l’Observatoire des délais de paiement, présidée par la ministre de l'Économie et des Finances, Nadia Fettah, et du Vice-président général de la Confédération générale des entreprises du Maroc (CGEM), Mehdi Tazi, a évalué la loi 69-21 et ses sanctions, avec 17.636 déclarations en 2024.", 'size': 3}], 'main_title': "Rabat : tenue de la 7ème réunion de l'Observatoire des Délais de Paiement"}, {'community_id': '8', 'articles': [{'id': '79', 'title': 'Le Maroc enregistre un déficit budgétaire de 22,9 MMDH à fin mai', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/06/12/le-maroc-enregistre-un-deficit-budgetaire-de-229-mmdh-a-fin-mai_1937369/', 'summary': 'Le Maroc enregistre un déficit budgétaire de 22,9 MMDH à fin mai. La situation des charges et ressources du Trésor dégage un déficit budgétaire de 22,9 milliards de dirhams (MMDH) à fin mai 2025, contre un déficit de 11,2 MMDH un an auparavant, selon la Trésorerie Générale du Royaume (TGR). Ce déficit tient compte d’un solde positif de 14,1 MMDH dégagé par les comptes spéciaux du Trésor.', 'size': 3}, {'id': '105', 'title': 'Les recettes douanières s’apprécient de 6% à fin mai', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/les-recettes-douanieres-sapprecient-de-6-a-fin-mai-304563/', 'summary': 'Les recettes douanières s’apprécient de 6% à fin mai. Les recettes douanières nettes se sont établies à près de 39,1 milliards de dirhams (MMDH) à fin mai 2025, en hausse de 6,1% par rapport à la même période de l’année précédente, indique la Trésorerie Générale du Royaume (TGR). Ces recettes, qui proviennent des droits de douane, de la taxe', 'size': 3}, {'id': '231', 'title': 'Maroc : un déficit budgétaire de 22,9 MMDH à fin mai', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/428427-maroc-un-deficit-budgetaire-de-229-mmdh-a-fin-mai.html', 'summary': 'Maroc : un déficit budgétaire de 22,9 MMDH à fin mai. La situation des charges et ressources du Trésor dégage un déficit budgétaire de 22,9 milliards de dirhams (MMDH) à fin mai 2025, contre un déficit de 11,2 MMDH un an auparavant, selon la Trésorerie Générale du Royaume (TGR). Ce déficit tient compte d’un solde positif de 14,1 MMDH dégagé par les comptes spéciaux du Trésor . ', 'size': 3}], 'main_title': 'Le Maroc enregistre un déficit budgétaire de 22,9 MMDH à fin mai'}, {'community_id': '16', 'articles': [{'id': '97', 'title': "Neuf individus interpellés à Nador et Guercif pour faux visas, immigration irrégulière et traite d'êtres humains", 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/06/11/neuf-individus-interpelles-a-nador-et-guercif-pour-faux-visas-immigration-irreguliere-et-traite-detres-humains_1937260/', 'summary': "Neuf individus interpellés à Nador et Guercif pour faux visas, immigration irrégulière et traite d'êtres humains. Dans le cadre d’une opération contre un réseau spécialisé dans la falsification de documents administratifs, neuf personnes ont été arrêtées à Nador et Guercif pour falsification de documents liés aux visas Schengen et implication présumée dans un réseau d’immigration illégale. La police judiciaire de Nador et Guercif, en coordination avec les services de la Direction.", 'size': 2}, {'id': '219', 'title': 'Nador-Guercif : démantèlement d’un réseau de falsification de visas Schengen', 'source': 'lnt.ma', 'link': 'https://lnt.ma/nador-guercif-demantelement-dun-reseau-de-falsification-de-visas-schengen/', 'summary': 'Nador-Guercif : démantèlement d’un réseau de falsification de visas Schengen. Les éléments de la police judiciaire de Nador et Guercif, en coordination avec les services de la Direction générale de la surveillance du territoire (DGST), ont interpellé, mercredi, neuf individus présumés impliqués dans une affaire de faux et d’usage de faux pour la constitution de dossiers de visa Schengen et l’organisation d’opérations d’immigration irrégulière et . ', 'size': 2}], 'main_title': "Neuf individus interpellés à Nador et Guercif pour faux visas, immigration irrégulière et traite d'êtres humains"}, {'community_id': '18', 'articles': [{'id': '100', 'title': 'Le gouvernement\xa0valide des propositions de nomination de hauts fonctionnaires', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/le-gouvernement-valide-des-propositions-de-nomination-de-hauts-fonctionnaires-304593/', 'summary': 'Le gouvernement valide des propositions de nomination de hauts fonctionnaires. Le Conseil de gouvernement a approuvé, jeudi à Rabat, des propositions de nomination à des fonctions supérieures, conformément aux dispositions de l’article 92 de la Constitution. Ainsi, au niveau du ministère de l’Éducation nationale, du Préscolaire et des sports — Département de l’Éducation nationale et du Préscolaire, Mme Mounia Mouzouri', 'size': 2}, {'id': '134', 'title': 'Le Conseil de gouvernement approuve des propositions de nomination à des fonctions supérieures', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/actualite/le-conseil-de-gouvernement-approuve-des-propositions-de-nomination-a-des-fonctions-superieures-33', 'summary': 'Le Conseil de gouvernement approuve des propositions de nomination à des fonctions supérieures. Le Conseil de gouvernement a approuvé, jeudi à Rabat, des propositions de nomination à des fonctions supérieures, conformément aux dispositions de l’article 92 de la Constitution. Ainsi, au niveau du ministère de l’Éducation nationale, du Préscolaire et des sports — Département de l’Éducation nationale et du Préscolaire, Mme Mounia Mouzouri a été nommée directrice de .', 'size': 2}], 'main_title': 'Le gouvernement\xa0valide des propositions de nomination de hauts fonctionnaires'}, {'community_id': '19', 'articles': [{'id': '106', 'title': 'IA et publicité : LinkAI arrive au Maroc pour prédire l’impact des campagnes avant leur diffusion', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/ia-et-publicite-linkai-arrive-au-maroc-pour-predire-limpact-des-campagnes-avant-leur-diffusion-304520/', 'summary': 'IA et publicité : LinkAI arrive au Maroc pour prédire l’impact des campagnes avant leur diffusion. Le cabinet Integrate, partenaire exclusif de Kantar au Maroc, organise le 24 juin un événement dédié à la présentation de LinkAI, une solution d’analyse prédictive fondée sur l’intelligence artificielle. Cet outil promet d’aider les marques à anticiper l’efficacité de leurs publicités avant même leur mise en ligne. L’événement, qui prendra', 'size': 2}, {'id': '200', 'title': 'Publicité : Integrate lance LinkAI pour prédire l’impact avant diffusion', 'source': 'leseco.ma', 'link': 'https://leseco.ma/business/publicite-integrate-lance-linkai-pour-predire-limpact-avant-diffusion.html', 'summary': 'Publicité : Integrate lance LinkAI pour prédire l’impact avant diffusion. Integrate, affilié exclusif de Kantar au Maroc, annonce l’arrivée de LinkAI, une technologie d’analyse prédictive qui permet de tester l’impact d’une publicité avant sa diffusion. ', 'size': 2}], 'main_title': 'IA et publicité : LinkAI arrive au Maroc pour prédire l’impact des campagnes avant leur diffusion'}, {'community_id': '4', 'articles': [{'id': '109', 'title': 'Les prévisions du jeudi 12 juin', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/les-previsions-du-jeudi-12-juin-304504/', 'summary': 'Les prévisions du jeudi 12 juin. Voici les prévisions météorologiques établies par la Direction générale de la météorologie pour jeudi 12 juin 2025 : – Temps assez chaud à localement chaud sur le Sud de l’Oriental, le Sud-Est et sur le Sud et l’Est des provinces Sahariennes. – Nuages instables avec gouttes de pluies et orages', 'size': 2}, {'id': '223', 'title': "Le temps qu'il fera ce vendredi 13 juin 2025", 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/427964-le-temps-quil-fera-ce-vendredi-13-juin-2025.html', 'summary': "Le temps qu'il fera ce vendredi 13 juin 2025. Voici les prévisions météorologiques établies par la Direction générale de la météorologie pour le vendredi 13 juin 2025 – Temps assez chaud sur le Sud de l’Oriental, le Sud-Est et sur le Sud et l’Est des provinces Sahariennes. – Nuages instables avec gouttes de pluies éparses et orages isolés sur l’Oriental. – Nuages bas fréquents . ", 'size': 2}], 'main_title': 'Les prévisions du jeudi 12 juin'}, {'community_id': '22', 'articles': [{'id': '112', 'title': 'Avis aux gamers: les inscriptions pour le Morocco Gaming Expo 2025 sont ouvertes', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/avis-aux-gamers-les-inscriptions-pour-le-morocco-gaming-expo-2025-sont-ouvertes-304485/', 'summary': 'Avis aux gamers: les inscriptions pour le Morocco Gaming Expo 2025 sont ouvertes. Le ministère de la Jeunesse, de la Culture et de la Communication a annoncé l’ouverture des inscriptions pour participer au « Morocco Gaming Expo 2025 », qui se tiendra du 2 au 6 juillet prochain à Rabat. Prévu au Palais des Sports du Complexe sportif Prince Moulay Abdellah, cet événement se présente', 'size': 2}, {'id': '218', 'title': 'Morocco Gaming Expo 2025: Rabat accueille la vitrine du jeu vidéo marocain', 'source': 'lnt.ma', 'link': 'https://lnt.ma/morocco-gaming-expo-2025-rabat-accueille-la-vitrine-du-jeu-video-marocain/', 'summary': 'Morocco Gaming Expo 2025: Rabat accueille la vitrine du jeu vidéo marocain. Le ministère de la Jeunesse, de la Culture et de la Communication a annoncé l’ouverture des inscriptions pour participer au « Morocco Gaming Expo 2025 », qui se tiendra du 2 au 6 juillet prochain à Rabat. Prévu au Palais des Sports du Complexe sportif Prince Moulay Abdellah, cet événement se présente comme un rendez-vous incontournable pour . ', 'size': 2}], 'main_title': 'Avis aux gamers: les inscriptions pour le Morocco Gaming Expo 2025 sont ouvertes'}, {'community_id': '15', 'articles': [{'id': '122', 'title': "Commerce extérieur : Le Maroc va augmenter ses exportations de 80 MMDH d'ici 2027", 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/168813/commerce-exterieur-maroc-augmenter-exportations.html', 'summary': "Commerce extérieur : Le Maroc va augmenter ses exportations de 80 MMDH d'ici 2027. Le secrétariat dÉtat au commerce extérieur a organisé une réunion, le 11 juin à Casablanca, pour suivre la mise en œuvre du programme 2025-2027. Cette rencontre, présidée par Omar Hejira, secrétaire dÉtat chargé du commerce extérieur, a réuni des représentants des délégations régionales du ministère de lIndustrie et du Commerce, de lASMEX, de la CGEM, ainsi que du secteur des assurances.", 'size': 2}, {'id': '243', 'title': 'Commerce extérieur : Le Maroc vise 80 milliards de dirhams d’exportations supplémentaires d’ici 2027', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Commerce-exterieur-Le-Maroc-vise-80-milliards-de-dirhams-d-exportations-supplementaires-d-ici-2027_a68604.html', 'summary': 'Commerce extérieur : Le Maroc vise 80 milliards de dirhams d’exportations supplémentaires d’ici 2027. Le secrétariat d’État chargé du commerce extérieur a tenu, mardi 11 juin à Casablanca, une réunion de travail consacrée au suivi de la mise en œuvre du programme national 2025-2027.', 'size': 2}], 'main_title': "Commerce extérieur : Le Maroc va augmenter ses exportations de 80 MMDH d'ici 2027"}, {'community_id': '17', 'articles': [{'id': '128', 'title': 'Lamine Yamal nommé ambassadeur de Visa pour le Mondial 2026', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/168789/lamine-yamal-nomme-ambassadeur-visa.html', 'summary': 'Lamine Yamal nommé ambassadeur de Visa pour le Mondial 2026. Le prodige du FC Barcelone, Lamine Yamal, a été nommé nouvel ambassadeur mondial de Visa en vue de la Coupe du monde de la FIFA 2026, qui se déroulera au Canada, au Mexique et aux États-Unis.', 'size': 2}, {'id': '216', 'title': 'Visa annonce Lamine Yamal comme ambassadeur mondial pour le Mondial 2026', 'source': 'lnt.ma', 'link': 'https://lnt.ma/visa-annonce-lamine-yamal-comme-ambassadeur-mondial-pour-le-mondial-2026/', 'summary': 'Visa annonce Lamine Yamal comme ambassadeur mondial pour le Mondial 2026. À un an du coup d’envoi de la Coupe du Monde de la FIFA 2026, Visa a annoncé la signature d’un partenariat avec le jeune joueur de football Lamine Yamal, qui devient ainsi ambassadeur mondial de la marque pour la prochaine édition du tournoi. L’événement sportif se déroulera au Canada, au Mexique et aux États-Unis, . ', 'size': 2}], 'main_title': 'Lamine Yamal nommé ambassadeur de Visa pour le Mondial 2026'}, {'community_id': '20', 'articles': [{'id': '165', 'title': 'Mezzour : La diversité des filières productives, clé du développement de l’industrie nationale', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/affaires/secteurs/mezzour-la-diversite-des-filieres-productives-cle-du-developpement-de-lindustrie-nationale/', 'summary': 'Mezzour : La diversité des filières productives, clé du développement de l’industrie nationale. Le Maroc renforce son industrie nationale grâce à la diversification de ses filières productives, telles que l’automobile, l’aéronautique, l’agroalimentaire ou encore les batteries électriques et l’hydrogène vert, a souligné le ministre de l’Industrie et du Commerce, Ryad Mezzour, lors d’un colloque national à Rabat.', 'size': 2}, {'id': '220', 'title': 'Mezzour mise sur la diversification industrielle pour soutenir l’emploi et l’investissement', 'source': 'lnt.ma', 'link': 'https://lnt.ma/mezzour-mise-sur-la-diversification-industrielle-pour-soutenir-lemploi-et-linvestissement/', 'summary': 'Mezzour mise sur la diversification industrielle pour soutenir l’emploi et l’investissement. Le développement de l’industrie nationale repose sur la diversité de ses filières productives, qui contribuent activement à l’ancrage du secteur industriel dans le tissu économique national, a souligné, mercredi à Rabat, le ministre de l’Industrie et du Commerce, Ryad Mezzour. S’exprimant lors d’une session de discussion autour du thème « Politiques macroéconomiques, climat de l’investissement et . ', 'size': 2}], 'main_title': 'Mezzour : La diversité des filières productives, clé du développement de l’industrie nationale'}, {'community_id': '13', 'articles': [{'id': '170', 'title': 'Chine: La réunion des coordonnateurs du FOCAC adopte la Déclaration de Changsha', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/chine-la-reunion-des-coordonnateurs-du-focac-adopte-la-declaration-de-changsha/', 'summary': 'Chine: La réunion des coordonnateurs du FOCAC adopte la Déclaration de Changsha. La Chine et 53 États africains ont adopté mercredi la “Déclaration sino-africaine de Changsha sur la préservation de la solidarité et de la coopération du Sud global”, à l’issue d’une réunion ministérielle de haut niveau consacrée au suivi des recommandations du Forum sur la coopération sino-africaine (FOCAC). Cette déclaration vise à assurer la mise en .', 'size': 2}, {'id': '274', 'title': 'Coopération Chine-Afrique : à Changsha, Pékin réaffirme ses ambitions économiques et stratégiques', 'source': 'leseco.ma', 'link': 'https://leseco.ma/maroc/cooperation-chine-afrique-a-changsha-pekin-reaffirme-ses-ambitions-economiques-et-strategiques.html', 'summary': 'Coopération Chine-Afrique : à Changsha, Pékin réaffirme ses ambitions économiques et stratégiques. La réunion ministérielle de haut niveau du Forum sur la coopération sino-africaine (FOCAC) s’est ouverte mercredi 11 juin à Changsha, dans la province chinoise du Hunan. ', 'size': 2}], 'main_title': 'Chine: La réunion des coordonnateurs du FOCAC adopte la Déclaration de Changsha'}, {'community_id': '0', 'articles': [{'id': '175', 'title': 'Code des bonnes pratiques de gouvernance des EEP : levier d’une transformation structurelle majeure', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/code-des-bonnes-pratiques-de-gouvernance-des-eep-levier-dune-transformation-structurelle-majeure/', 'summary': 'Code des bonnes pratiques de gouvernance des EEP : levier d’une transformation structurelle majeure. Le Code des bonnes pratiques de gouvernance des établissements et entreprises publics (EEP) constitue un levier concret d’une transformation structurelle majeure au Maroc, consacrée par la loi-cadre n°50-21 relative à la réforme des EEP, a affirmé, jeudi à Rabat, le ministre délégué chargé du Budget, Fouzi Lekjaa. Intervenant lors d’une journée d’étude autour du code .', 'size': 2}, {'id': '250', 'title': 'EEP : Lekjaa prône une gouvernance moteur de transformation', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/EEP-Lekjaa-prone-une-gouvernance-moteur-de-transformation_a68594.html', 'summary': 'EEP : Lekjaa prône une gouvernance moteur de transformation. Le Code des bonnes pratiques de gouvernance des établissements et entreprises publics (EEP) constitue un levier concret d’une transformation structurelle majeure au Maroc, consacrée par la loi-cadre n°50-21 relative à la réforme des EEP, a affirmé, jeudi à Rabat, le ministre délégué chargé du Budget, Fouzi Lekjaa.', 'size': 2}], 'main_title': 'Code des bonnes pratiques de gouvernance des EEP : levier d’une transformation structurelle majeure'}, {'community_id': '2', 'articles': [{'id': '213', 'title': 'Le président de l’Université Al Akhawayn dévoile les résultats de la période 2020-2025', 'source': 'www.lereporter.ma', 'link': 'https://www.lereporter.ma/le-president-de-luniversite-al-akhawayn-devoile-les-resultats-de-la-periode-2020-2025/', 'summary': 'Le président de l’Université Al Akhawayn dévoile les résultats de la période 2020-2025. Le président de l’Université Al Akhawayn, Amine Bensaid, a affirmé, mercredi à Rabat, que la qualité de l’offre de formation proposée par l’université favorise l’insertion de ses lauréats sur le marché du travail. Intervenant lors d’une conférence de presse consacrée à la présentation du bilan de l’université au titre de la période 2020-2025, M. Bensaid ', 'size': 2}, {'id': '217', 'title': 'L’Université Al Akhawayn fait son bilan et affiche ses ambitions pour 2030', 'source': 'lnt.ma', 'link': 'https://lnt.ma/luniversite-al-akhawayn-fait-son-bilan-et-affiche-ses-ambitions-pour-2030/', 'summary': 'L’Université Al Akhawayn fait son bilan et affiche ses ambitions pour 2030. Le président de l’Université Al Akhawayn, Amine Bensaid, a souligné, mercredi à Rabat, l’impact positif de la qualité de l’offre de formation de l’établissement sur l’insertion professionnelle de ses diplômés, à l’occasion d’une conférence de presse consacrée à la présentation du bilan de l’université sur la période 2020-2025. D’après M. Bensaid, les orientations stratégiques adoptées . ', 'size': 2}], 'main_title': 'Le président de l’Université Al Akhawayn dévoile les résultats de la période 2020-2025'}, {'community_id': '11', 'articles': [{'id': '248', 'title': 'C24 : Le CCG réaffirme son soutien à la marocanité du Sahara', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/C24-Le-CCG-reaffirme-son-soutien-a-la-marocanite-du-Sahara_a68599.html', 'summary': "C24 : Le CCG réaffirme son soutien à la marocanité du Sahara. Les six pays du Conseil de coopération du Golfe (GCC) ont réitéré, dans une déclaration lors de la session ordinaire du Comité des 24 de l'ONU (C24) à New York, leurs positions constantes en soutien à la marocanité du Sahara et à l'intégrité territoriale du Royaume.", 'size': 3}, {'id': '253', 'title': 'Sahara marocain: les pays du Golfe confortent la dynamique internationale', 'source': 'www.challenge.ma', 'link': 'https://www.challenge.ma/sahara-marocain-les-pays-du-golfe-confortent-la-dynamique-internationale-304597/', 'summary': 'Sahara marocain: les pays du Golfe confortent la dynamique internationale. Devant le Comité des 24 de l’ONU (C24) à New York, le Conseil de coopération du Golfe (GCC) a réitéré ses positions constantes de soutien à la marocanité du Sahara et à la préservation de la sécurité, de la stabilité et de l’intégrité territoriale du Royaume. Cette position vient conforter', 'size': 3}, {'id': '265', 'title': 'C24: Le Conseil de coopération du Golfe réaffirme ses positions constantes en soutien à la marocanité du Sahara', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/pouvoirs/diplomatie/c24-le-conseil-de-cooperation-du-golfe-reaffirme-ses-positions-constantes-en-soutien-a-la-marocanite-du-sahara/', 'summary': 'C24: Le Conseil de coopération du Golfe réaffirme ses positions constantes en soutien à la marocanité du Sahara. Les Etats du CCG se sont félicités des efforts continus menés sous la supervision du Secrétaire général de l’ONU et son Envoyé personnel pour le Sahara marocain, appelant à reprendre le dialogue dans un esprit de sérieux, de réalisme et de respect mutuel sous l’égide des Nations Unies.', 'size': 3}], 'main_title': 'C24 : Le CCG réaffirme son soutien à la marocanité du Sahara'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
                        
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ? d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        // Fonction pour cacher le tooltip
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = '';
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
    
    
</body>




</html>
    