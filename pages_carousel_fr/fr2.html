<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); 
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title"> Les principales actualités des dernières 24 heures

</div>    
        <div class="header-subtitle"> Dernière mise à jour : 08/09/2025 - 12h26</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"></div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '4', 'title': 'Regragui avant Maroc-Zambie: "Nous jouons chaque match pour le gagner"', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/440269-regragui-avant-maroc-zambie-nous-jouons-chaque-match-pour-le-gagner.html', 'summary': 'Regragui avant Maroc-Zambie: "Nous jouons chaque match pour le gagner". Le sélectionneur national, Walid Regragui, a assuré que l’équipe du Maroc respecte tous les adversaires et affrontera la Zambie lundi en qualifications du Mondial-2026 avec « l’objectif de l’emporter ». « Nous jouons chaque match pour le gagner. Nous sommes venus en Zambie pour faire un bon match », a fait savoir Regragui, dimanche en conférence de . ', 'size': 4}, {'id': '113', 'title': 'Qualifications Mondial 2026 : “Nous affronterons la Zambie avec l’objectif de gagner”, assure Regragui', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/09/08/qualifications-mondial-2026-nous-affronterons-la-zambie-avec-lobjectif-de-gagner-assure-regragui_1949150/', 'summary': 'Qualifications Mondial 2026 : “Nous affronterons la Zambie avec l’objectif de gagner”, assure Regragui. Le sélectionneur national, Walid Regragui, a assuré que l’équipe du Maroc respecte tous les adversaires et affrontera la Zambie lundi en qualifications du Mondial-2026 avec “l’objectif de l’emporter”. Nous jouons chaque match pour le gagner. Nous sommes venus en Zambie pour faire un bon match”, a fait savoir Regragui, dimanche en conférence de presse à.', 'size': 4}, {'id': '125', 'title': 'Éliminatoires Mondial 2026 : «Nous affronterons la Zambie avec l’objectif de gagner» (Walid Regragui)', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/175854/eliminatoires-mondial-2026-nous-affronterons.html', 'summary': 'Éliminatoires Mondial 2026 : «Nous affronterons la Zambie avec l’objectif de gagner» (Walid Regragui). Le sélectionneur national, Walid Regragui, a assuré que l’équipe du Maroc respecte tous les adversaires et affrontera la Zambie lundi en qualifications du Mondial 2026 avec «l’objectif de l’emporter».', 'size': 4}, {'id': '168', 'title': 'Qualifs Mondial 2026: Regragui promet sérieux et victoire contre la Zambie', 'source': 'lnt.ma', 'link': 'https://lnt.ma/qualifs-mondial-2026-regragui-promet-serieux-et-victoire-contre-la-zambie/', 'summary': 'Qualifs Mondial 2026: Regragui promet sérieux et victoire contre la Zambie. Le sélectionneur national, Walid Regragui, a assuré que l’équipe du Maroc respecte tous les adversaires et affrontera la Zambie lundi en qualifications du Mondial-2026 avec « l’objectif de l’emporter ». « Nous jouons chaque match pour le gagner. Nous sommes venus en Zambie pour faire un bon match », a fait savoir Regragui, dimanche en conférence de . ', 'size': 4}], 'main_title': 'Regragui avant Maroc-Zambie: "Nous jouons chaque match pour le gagner"'}, {'community_id': '1', 'articles': [{'id': '14', 'title': "Mondial 2026 : Les Lions de l'Atlas débarquent en Zambie pour assurer le sans-faute, une opportunité pour les remplaçants de Regragui", 'source': 'lematin.ma', 'link': 'https://lematin.ma/sports/mondial-2026-les-lions-de-latlas-debarquent-en-zambie/300185', 'summary': "Mondial 2026 : Les Lions de l'Atlas débarquent en Zambie pour assurer le sans-faute, une opportunité pour les remplaçants de Regragui. Vendredi dernier, sur la pelouse d’une sublime enceinte tout juste inaugurée, les Lions de l’Atlas ont enchaîné une sixième victoire de rang en qualifications pour le prochain Mond.", 'size': 2}, {'id': '134', 'title': 'Qualification en poche, Walid Regragui a le choix de garder ou d’aligner de nouveaux joueurs pour le match contre la Zambie : On prend les mêmes et on recommence ?', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/sports/qualification-en-poche-walid-regragui-a-le-choix-de-garder-ou-daligner-de-nouveaux-joueurs-pour-le-match-contre-la-zambie-on-prend-les-memes-et-on-recommence', 'summary': 'Qualification en poche, Walid Regragui a le choix de garder ou d’aligner de nouveaux joueurs pour le match contre la Zambie : On prend les mêmes et on recommence ?. Eliminatoires Mondial 2026 Le Maroc se rend en Zambie pour disputer la 8me journée du groupe E des qualifications africaines pour la Coupe du monde 2026. La possibilité se présente donc pour le coach national de tester de nouvelles recrues et de nouveaux automatismes. Ne laissant aucune place au hasard, les Lions de l’Atlas ont .', 'size': 2}], 'main_title': "Mondial 2026 : Les Lions de l'Atlas débarquent en Zambie pour assurer le sans-faute, une opportunité pour les remplaçants de Regragui"}, {'community_id': '2', 'articles': [{'id': '18', 'title': 'Sidi Bennour : lancement de fouilles archéologiques sur l’ancienne cité de Mouchtraya', 'source': 'lematin.ma', 'link': 'https://lematin.ma/regions/sidi-bennour-lancement-de-fouilles-archeologiques-a-mouchtraya/300150', 'summary': 'Sidi Bennour : lancement de fouilles archéologiques sur l’ancienne cité de Mouchtraya. Les travaux de fouilles archéologiques ont été lancés cette semaine sur le site de l’ancienne cité de Mouchtraya, connue aussi sous le nom d’Al Madina, jadis considérée comme la pl.', 'size': 2}, {'id': '41', 'title': 'Sidi Bennour: Lancement des fouilles archéologiques sur le site de l\'ancienne cité de "Mouchtraya"', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Sidi-Bennour-Lancement-des-fouilles-archeologiques-sur-le-site-de-l-ancienne-cite-de-Mouchtraya_a71476.html', 'summary': 'Sidi Bennour: Lancement des fouilles archéologiques sur le site de l\'ancienne cité de "Mouchtraya". Les travaux de fouilles archéologiques sur le site de l’ancienne cité de "Mouchtraya" dans la commune d\'El Gharbia (province de Sidi Bennour) ont été récemment lancés, et ce afin de recenser le patrimoine archéologique de la région.', 'size': 2}], 'main_title': 'Sidi Bennour : lancement de fouilles archéologiques sur l’ancienne cité de Mouchtraya'}, {'community_id': '3', 'articles': [{'id': '22', 'title': '82e Mostra de Venise : “Calle Malaga” de Maryam Touzani décroche le Prix du public', 'source': 'lematin.ma', 'link': 'https://lematin.ma/culture/venise-2025-calle-malaga-de-maryam-touzani-prime-par-le-public/300081', 'summary': '82e Mostra de Venise : “Calle Malaga” de Maryam Touzani décroche le Prix du public. Le cinéma marocain a brillé à la 82e édition du Festival international du film de Venise. Samedi soir, “Calle Malaga”, réalisé par Maryam Touzani et produit par Nabil Ayouch, s’est.', 'size': 4}, {'id': '36', 'title': '82e Mostra de Venise: “Calle Malaga” de Maryam Touzani remporte le Prix du public', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/82e-Mostra-de-Venise-Calle-Malaga-de-Maryam-Touzani-remporte-le-Prix-du-public_a71481.html', 'summary': '82e Mostra de Venise: “Calle Malaga” de Maryam Touzani remporte le Prix du public. Le long-métrage marocain “Calle Malaga” de Maryam Touzani a remporté, samedi soir, le Prix du public dans la catégorie Spotlight en sélection officielle de la 82e édition du Festival International du Film de Venise.', 'size': 4}, {'id': '117', 'title': 'Mostra de Venise : “Calle Malaga” de Maryam Touzani remporte le Prix du public', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/09/08/mostra-de-venise-calle-malaga-de-maryam-touzani-remporte-le-prix-du-public_1949154/', 'summary': 'Mostra de Venise : “Calle Malaga” de Maryam Touzani remporte le Prix du public. Le long-métrage marocain “Calle Malaga” de Maryam Touzani a remporté, samedi soir, le Prix du public dans la catégorie Spotlight en sélection officielle de la 82e édition du Festival international du film de Venise. Tourné au Maroc, « Calle Malaga » raconte l’histoire d’une Espagnole de 79 ans qui vit seule a Tanger où elle profite de.', 'size': 4}, {'id': '133', 'title': 'Festival international du film de Venise: «Calle Malaga» de Maryam Touzani remporte le Prix du public', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/culture/festival-international-du-film-de-venise-calle-malaga-de-maryam-touzani-remporte-le-prix-du-public', 'summary': 'Festival international du film de Venise: «Calle Malaga» de Maryam Touzani remporte le Prix du public. Le long-métrage marocain «Calle Malaga» de Maryam Touzani vient de remporter le Prix du public dans la catégorie Spotlight en sélection officielle de la 82ème édition du Festival international du film de Venise. Tourné au Maroc, «Calle Malaga» raconte l’histoire d’une Espagnole de 79 ans qui vit seule à Tanger où elle profite de sa .', 'size': 4}], 'main_title': '82e Mostra de Venise : “Calle Malaga” de Maryam Touzani décroche le Prix du public'}, {'community_id': '4', 'articles': [{'id': '35', 'title': 'Al-Haouz : deux ans après le séisme, plus de 91% des logements reconstruits ou réhabilités', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/Al-Haouz-deux-ans-apres-le-seisme-plus-de-91-des-logements-reconstruits-ou-rehabilites_a71485.html', 'summary': "Al-Haouz : deux ans après le séisme, plus de 91% des logements reconstruits ou réhabilités. L'opération de reconstruction des logements sinistrés par le séisme ayant secoué la province d’Al Haouz en septembre 2023 est entrée dans sa phase finale à la faveur d’une mobilisation sans précédent de toutes les parties prenantes, comme en témoignent les chiffres dévoilés par le coordinateur du programme de reconstruction et de réhabilitation des zones sinistrées, Hassan Ighighi.", 'size': 4}, {'id': '47', 'title': 'Séisme d’Al Haouz : La reconstruction bat son plein dans les provinces concernées', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/175844/seisme-d-al-haouz-reconstruction-plein.html', 'summary': 'Séisme d’Al Haouz : La reconstruction bat son plein dans les provinces concernées. L’opération de reconstruction dans les provinces touchées par le séisme d’Al Haouz de 2023 se poursuit à un rythme soutenu à la faveur de la mobilisation collective de l’ensemble des parties prenantes.', 'size': 2}, {'id': '77', 'title': 'Reconstruction à Al Haouz : 96 % de logements avancés, 4 % en suspens', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/440254-reconstruction-a-al-haouz-96-de-logements-avances-4-en-suspens.html', 'summary': 'Reconstruction à Al Haouz : 96 % de logements avancés, 4 % en suspens. La reconstruction des habitations touchées par le séisme qui a frappé la province d’Al Haouz en septembre 2023 entre dans sa phase finale, portée par une mobilisation sans précédent des autorités locales, des ingénieurs, des entrepreneurs et des associations. Selon Hassan Ighighi, coordinateur du programme de reconstruction et de réhabilitation, le taux d’avancement des travaux . ', 'size': 3}, {'id': '170', 'title': 'Al Haouz : la reconstruction des logements entre dans sa phase finale, selon les responsables', 'source': 'lnt.ma', 'link': 'https://lnt.ma/al-haouz-la-reconstruction-des-logements-entre-dans-sa-phase-finale-selon-les-responsables/', 'summary': 'Al Haouz : la reconstruction des logements entre dans sa phase finale, selon les responsables. Deux ans après le séisme de septembre 2023, la reconstruction des logements sinistrés dans la province d’Al Haouz atteint un stade avancés, selon Hassan Ighighi, coordinateur du programme de reconstruction et de réhabilitation des zones touchées. L’état d’avancement s’élèverait à 91,33%, avec près de 24.000 habitations déjà rebâties selon des normes techniques et architecturales de . ', 'size': 3}], 'main_title': 'Al-Haouz : deux ans après le séisme, plus de 91% des logements reconstruits ou réhabilités'}, {'community_id': '5', 'articles': [{'id': '40', 'title': 'ONU: le Maroc conclut avec succès la négociation de la déclaration politique du deuxième Sommet social prévu à Doha', 'source': 'www.lopinion.ma', 'link': 'https://www.lopinion.ma/ONU-le-Maroc-conclut-avec-succes-la-negociation-de-la-declaration-politique-du-deuxieme-Sommet-social-prevu-a-Doha_a71477.html', 'summary': "ONU: le Maroc conclut avec succès la négociation de la déclaration politique du deuxième Sommet social prévu à Doha. L'ambassadeur représentant permanent du Maroc auprès de l’ONU, Omar Hilale, accompagné de son homologue de Belgique, Sophie De Smedt, a remis au président de la 79e session de l’Assemblée générale des Nations Unies le projet final de la Déclaration politique de Doha pour le développement social qui sera adoptée par les chefs d’État et de gouvernement lors du Sommet qui aura lieu du 4 au 6 novembre prochain dans la capitale du Qatar.", 'size': 3}, {'id': '68', 'title': 'ONU: M. Hilale conclut avec succès la négociation de la déclaration politique du deuxième Sommet social prévu à Doha', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/onu-m-hilale-conclut-avec-succes-la-negociation-de-la-declaration-politique-du-deuxieme-sommet-social-prevu-a-doha/', 'summary': 'ONU: M. Hilale conclut avec succès la négociation de la déclaration politique du deuxième Sommet social prévu à Doha. L’ambassadeur représentant permanent du Maroc auprès de l’ONU, Omar Hilale, accompagné de son homologue de Belgique, Sophie De Smedt, a remis au président de la 79e session de l’Assemblée générale des Nations Unies le projet final de la Déclaration politique de Doha pour le développement social qui sera adoptée par les chefs d’État et de .', 'size': 3}, {'id': '73', 'title': 'ONU – Développement social : un consensus scellé pour la Déclaration politique de Doha', 'source': 'lnt.ma', 'link': 'https://lnt.ma/onu-developpement-social-un-consensus-scelle-pour-la-declaration-politique-de-doha/', 'summary': 'ONU – Développement social : un consensus scellé pour la Déclaration politique de Doha. L’ambassadeur représentant permanent du Maroc auprès de l’ONU, Omar Hilale, accompagné de son homologue de Belgique, Sophie De Smedt, a remis au président de la 79e session de l’Assemblée générale des Nations Unies le projet final de la Déclaration politique de Doha pour le développement social, qui sera soumis à l’adoption des chefs d’État et . ', 'size': 3}], 'main_title': 'ONU: le Maroc conclut avec succès la négociation de la déclaration politique du deuxième Sommet social prévu à Doha'}, {'community_id': '6', 'articles': [{'id': '72', 'title': 'Casablanca: Interpellation de 6 individus pour leur lien présumé à un braquage à main armée en France', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/casablanca-interpellation-de-6-individus-pour-leur-lien-presume-a-un-braquage-a-main-armee-en-france/', 'summary': 'Casablanca: Interpellation de 6 individus pour leur lien présumé à un braquage à main armée en France. La Brigade nationale de la police judiciaire (BNPJ) a déféré six individus devant le parquet compétent à Casablanca, pour leur implication présumée dans un réseau criminel spécialisé dans le vol et le recel de biens issus d’un braquage à main armée commis sur le territoire français, apprend-on de source sécuritaire. Selon les premiers éléments de .', 'size': 2}, {'id': '118', 'title': 'Casablanca : 6 individus interpellés pour leur lien présumé à un braquage à main armée en France', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/09/08/casablanca-6-individus-interpelles-pour-leur-lien-presume-a-un-braquage-a-main-armee-en-france_1949156/', 'summary': 'Casablanca : 6 individus interpellés pour leur lien présumé à un braquage à main armée en France. La Brigade nationale de la police judiciaire (BNPJ) a déféré six individus devant le parquet compétent à Casablanca, pour leur implication présumée dans un réseau criminel spécialisé dans le vol et le recel de biens issus d’un braquage à main armée commis sur le territoire français, apprend-on de source sécuritaire. Selon les premiers éléments de.', 'size': 2}], 'main_title': 'Casablanca: Interpellation de 6 individus pour leur lien présumé à un braquage à main armée en France'}, {'community_id': '7', 'articles': [{'id': '74', 'title': 'France : vote décisif à l’AN pour le gouvernement de François Bayrou', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/440322-france-vote-decisif-a-lan-pour-le-gouvernement-de-francois-bayrou.html', 'summary': 'France : vote décisif à l’AN pour le gouvernement de François Bayrou. Le Premier ministre français, François Bayrou s’apprête à engager, ce lundi, la responsabilité de son gouvernement devant l’Assemblée nationale en sollicitant un vote de confiance pour valider ses choix budgétaires. Bayrou tenait à obtenir une base claire de soutien avant même la présentation du projet de loi de finances 2026 en créant un accord national . ', 'size': 2}, {'id': '151', 'title': 'France : vote décisif à l’Assemblée nationale pour le gouvernement de François Bayrou', 'source': 'maroc-diplomatique.net', 'link': 'https://maroc-diplomatique.net/france-vote-decisif-a-lassemblee-nationale-pour-le-gouvernement-de-francois-bayrou/', 'summary': 'France : vote décisif à l’Assemblée nationale pour le gouvernement de François Bayrou. Le Premier ministre français, François Bayrou s’apprête à engager, ce lundi, la responsabilité de son gouvernement devant l’Assemblée nationale en sollicitant un vote de confiance pour valider ses choix budgétaires. M. Bayrou tenait à obtenir une base claire de soutien avant même la présentation du projet de loi de finances 2026 en créant un accord .', 'size': 2}], 'main_title': 'France : vote décisif à l’AN pour le gouvernement de François Bayrou'}, {'community_id': '8', 'articles': [{'id': '76', 'title': 'Alerte météo : averses orageuses avec rafales de vent ce lundi dans plusieurs régions', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/440324-alerte-meteo-averses-orageuses-avec-rafales-de-vent-ce-lundi-dans-plusieurs-regions.html', 'summary': 'Alerte météo : averses orageuses avec rafales de vent ce lundi dans plusieurs régions. La Direction générale de la météorologie (DGM), a annoncé des averses orageuses localement fortes avec rafales de vent sous orages attendues, ce lundi, dans plusieurs provinces du Royaume. Dans un bulletin d’alerte météorologique de niveau de vigilance orange, la DGM précise que ces averses orageuses (25 à 35 mm) sont prévues lundi de 14h à . ', 'size': 3}, {'id': '87', 'title': 'Averses orageuses avec rafales de vent ce lundi dans plusieurs régions du Maroc', 'source': 'lematin.ma', 'link': 'https://lematin.ma/regions/averses-orageuses-avec-rafales-de-vent-dans-plusieurs-regions-du-maroc/300230', 'summary': 'Averses orageuses avec rafales de vent ce lundi dans plusieurs régions du Maroc. De fortes averses orageuses (25-35 mm) avec rafales de vent sont attendues ce lundi de 14h00 à 23h00 dans les provinces de Béni Mellal, Azilal, Ifrane, Boulemane, Khénifra, Khourib.', 'size': 2}, {'id': '111', 'title': 'Averses orageuses avec rafales de vent ce lundi dans plusieurs provinces du Royaume', 'source': 'telquel.ma', 'link': 'https://telquel.ma/instant-t/2025/09/08/averses-orageuses-avec-rafales-de-vent-ce-lundi-dans-plusieurs-provinces-du-royaume_1949195/', 'summary': 'Averses orageuses avec rafales de vent ce lundi dans plusieurs provinces du Royaume. Des averses orageuses localement fortes avec rafales de vent sous orages sont attendues, ce lundi, dans plusieurs provinces du Royaume, a annoncé la Direction générale de la météorologie (DGM). Ces averses orageuses (25 à 35 mm) sont prévues lundi de 14h à 23h dans les provinces d’Aousserd, Azilal, Béni Mellal, Khénifra, Oued Ed-Dahab, Boujdour et.', 'size': 3}, {'id': '121', 'title': 'Maroc : Vigilance orange, averses orageuses et rafales de vent ce lundi', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/175874/maroc-vigilance-orange-averses-orageuses.html', 'summary': 'Maroc : Vigilance orange, averses orageuses et rafales de vent ce lundi. Des averses orageuses localement fortes avec rafales de vent sous orages sont attendues, ce lundi, dans plusieurs provinces du Maroc, a annoncé la Direction générale de la météorologie (DGM).', 'size': 2}], 'main_title': 'Alerte météo : averses orageuses avec rafales de vent ce lundi dans plusieurs régions'}, {'community_id': '9', 'articles': [{'id': '83', 'title': 'Marrakech : deux morts dans un incendie au douar Moulay Azzouz Elmelk', 'source': 'fr.hespress.com', 'link': 'https://fr.hespress.com/440300-marrakech-deux-morts-dans-un-incendie-au-douar-moulay-azzouz-elmelk.html', 'summary': 'Marrakech : deux morts dans un incendie au douar Moulay Azzouz Elmelk. Deux personnes ont trouvé la mort dans un incendie qui s’est déclaré, lundi vers 5h30 du matin, dans cinq baraques au douar Moulay Azzouz Elmelk, relevant de la zone urbaine Annakhil à Marrakech, a-t-on appris auprès de la Wilaya de Marrakech-Safi. Aussitôt informés, les autorités locales et sécuritaires ainsi que les services de la Protection . ', 'size': 2}, {'id': '123', 'title': 'Marrakech : Deux morts dans un incendie au douar Moulay Azzouz Elmelk', 'source': 'www.yabiladi.com', 'link': 'https://www.yabiladi.com/articles/details/175866/marrakech-deux-morts-dans-incendie.html', 'summary': 'Marrakech : Deux morts dans un incendie au douar Moulay Azzouz Elmelk. Deux personnes ont été tuées dans un incendie qui s’est déclaré, ce lundi vers 5h30 du matin, dans cinq baraques au douar Moulay Azzouz Elmelk, relevant de la zone urbaine Annakhil à Marrakech, a-t-on appris auprès de la wilaya de Marrakech-Safi.', 'size': 2}], 'main_title': 'Marrakech : deux morts dans un incendie au douar Moulay Azzouz Elmelk'}, {'community_id': '10', 'articles': [{'id': '84', 'title': 'La fonction publique, premier choix des jeunes diplômés marocains en 2025 (Enquête)', 'source': 'lematin.ma', 'link': 'https://lematin.ma/emploi/la-fonction-publique-premier-choix-des-jeunes-diplomes-marocains-en-2025/300244', 'summary': 'La fonction publique, premier choix des jeunes diplômés marocains en 2025 (Enquête). En 2025, la fonction publique marocaine attire, séduit et fait rêver les jeunes diplômés des grandes écoles. Une enquête menée par Careers, cabinet de conseil en ressources humaine.', 'size': 2}, {'id': '167', 'title': 'Enquête : L’attrait du secteur public pour les jeunes diplômés', 'source': 'lnt.ma', 'link': 'https://lnt.ma/enquete-lattrait-du-secteur-public-pour-les-jeunes-diplomes/', 'summary': 'Enquête : L’attrait du secteur public pour les jeunes diplômés. Une enquête récente menée entre le 26 juin et le 22 juillet 2025 par ‘’Careers in Morocco’’, auprès de plus de 1000 lauréats issus des grandes écoles marocaines (Ecoles d’ingénieurs, écoles de commerce et universités de renom) met en lumière les préférences professionnelles des jeunes diplômés lorsqu’il s’agit d’intégrer le secteur du travail. Alors que . ', 'size': 2}], 'main_title': 'La fonction publique, premier choix des jeunes diplômés marocains en 2025 (Enquête)'}, {'community_id': '11', 'articles': [{'id': '132', 'title': 'Il se produira à Casablanca et Rabat:  Erick Baert revient au Maroc avec «Illusions Vocales»', 'source': 'aujourdhui.ma', 'link': 'https://aujourdhui.ma/culture/il-se-produira-a-casablanca-et-rabat-erick-baert-revient-au-maroc-avec-illusions-vocales', 'summary': 'Il se produira à Casablanca et Rabat: Erick Baert revient au Maroc avec «Illusions Vocales». Après avoir marqué les esprits à Comediablanca, Erick Baert fait son grand retour au Maroc. L’artiste, véritable phénomène vocal, revient cette fois avec son spectacle intégral “ILLUSIONS VOCALES” accompagné de ses musiciens pour deux soirées qui s’annoncent inoubliables : le 30 septembre à Casablanca au Studio des Arts Vivants et le 1er octobre à Rabat .', 'size': 2}, {'id': '139', 'title': 'Erick Baert, l’homme aux 100 voix, de retour au Maroc avec son spectacle “Illusions vocales”', 'source': 'www.lavieeco.com', 'link': 'https://www.lavieeco.com/comese/erick-baert-lhomme-aux-100-voix-de-retour-au-maroc-avec-son-spectacle-illusions-vocales/', 'summary': "Erick Baert, l’homme aux 100 voix, de retour au Maroc avec son spectacle “Illusions vocales”. Après avoir marqué les esprits à Comediablanca, Erick Baert fait son grand retour au Maroc, soutenu par Tendansia qui orchestre cette nouvelle aventure. L'artiste, véritable phénomène vocal, revient cette fois avec son spectacle intégral “ILLUSIONS VOCALES” accompagné de ses musiciens pour deux soirées qui s'annoncent inoubliables : le 30 septembre à Casablanca au Studio des Arts Vivants et le 1er octobre à Rabat au Cinéma Renaissance.", 'size': 2}], 'main_title': 'Il se produira à Casablanca et Rabat:  Erick Baert revient au Maroc avec «Illusions Vocales»'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
                        
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ? d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        // Fonction pour cacher le tooltip
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = '';
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
    
    
</body>




</html>
    