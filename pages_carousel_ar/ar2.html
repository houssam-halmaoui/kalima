<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 11/07/2025 - 06h28</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '7', 'title': 'صرف منحة لأرامل ومتقاعدي الأمن', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d8%b5%d8%b1%d9%81-%d9%85%d9%86%d8%ad%d8%a9-%d9%84%d8%a3%d8%b1%d8%a7%d9%85%d9%84-%d9%88%d9%85%d8%aa%d9%82%d8%a7%d8%b9%d8%af%d9%8a-%d8%a7%d9%84%d8%a3%d9%85%d9%86-1590583.html', 'summary': 'صرف منحة لأرامل ومتقاعدي الأمن. خصصت مؤسسة محمد السادس للأعمال الاجتماعية لموظفي الأمن الوطني مساعدة مالية استثنائية لفائدة أرامل الأمن الوطني، ممن يتقاضون معاشا يساوي أو يقل عن 2000 درهم، وكذا للمتقاعدين الذين يتقاضون راتبا شهريا في حدود 2500 درهم. وتأتي هذه المبادرة الاجتماعية في سياق تنزيل توجيهات المدير العام للأمن الوطني ولمراقبة التراب الوطني عبد اللطيف حموشي، القاضية بالنهوض  صرف منحة لأرامل ومتقاعدي الأمن     - هسبريس جريدة إلكترونية مغربية .', 'size': 4}, {'id': '34', 'title': 'صرف منحة استثنائية لفائدة أرامل ومتقاعدي الأمن الوطني', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-639139.html', 'summary': 'صرف منحة استثنائية لفائدة أرامل ومتقاعدي الأمن الوطني. هبة بريس خصصت مؤسسة محمد السادس للأعمال الاجتماعية لموظفي الأمن الوطني مساعدة مالية استثنائية لفائدة أرامل الأمن الوطني، ممن يتقاضون معاشا يساوي أو يقل عن 2000 درهم، وكذا للمتقاعدين الذين يتقاضون راتبا شهريا في حدود 2500 درهم. وتأتي هذه المبادرة الاجتماعية في سياق تنزيل توجيهات المدير العام للأمن الوطني ولمراقبة التراب الوطني عبد اللطيف حموشي، القاضية بالنهوض بالأوضاع الاجتماعية لأسرة الأمن الوطني، بما فيها فئة الأرامل والمتقاعدين، مع الحرص على توسيع قاعدة المستفيدات والمستفيدين والذين بلغ عددهم 4226 أرملة و572 متقاعدة ومتقاعدا. وضمانا لتسليم هذا الدعم المالي لمستحقيه من الأرامل والمتقاعدين في الوقت المناسب، وفي أيسر الآجال، فقد تم التوافق مع الصندوق المغربي للتقاعد لتحويل المبالغ المرصودة لحسابات المستحقين ابتداءً من يوم أمس الأربعاء 9 يوليوز الجاري. كما تعكف حاليا مؤسسة محمد السادس للأعمال الاجتماعية لموظفي الأمن الوطني، بتوجيهات من عبد اللطيف حموشي، على دراسة الوضعيات المالية للدفعة الثانية من الأرامل والمتقاعدين الذين تتوافر فيهم شروط الاستفادة من هذا الدعم التضامني، وذلك ليتسنى تحويل مبالغ الدعم لحساباتهم البنكية في القريب العاجل. وتجسد هذه المبادرة الاجتماعية والتضامنية العناية الموصولة لفئة أرامل ومتقاعدي الأمن الوطني، كما أنها تعزز أواصر التواصل والتضامن مع هذه الفئة العزيزة من أسرة الأمن الوطني.', 'size': 2}, {'id': '134', 'title': 'بتوجيهات من حموشي.. صرف منحة استثنائية لفائدة أرامل ومتقاعدي الأمن الوطني', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a8%d8%aa%d9%88%d8%ac%d9%8a%d9%87%d8%a7%d8%aa-%d9%85%d9%86-%d8%ad%d9%85%d9%88%d8%b4%d9%8a-%d8%b5%d8%b1%d9%81-%d9%85%d9%86%d8%ad%d8%a9-%d8%a7%d8%b3%d8%aa%d8%ab%d9%86%d8%a7%d8%a6%d9%8a%d8%a9-%d9%84/', 'summary': 'بتوجيهات من حموشي.. صرف منحة استثنائية لفائدة أرامل ومتقاعدي الأمن الوطني. خصصت مؤسسة محمد السادس للأعمال الاجتماعية لموظفي الأمن الوطني مساعدة مالية استثنائية لفائدة أرامل الأمن الوطني، ممن يتقاضون معاشا يساوي أو يقل عن 2000 درهم، وكذا للمتقاعدين الذين يتقاضون راتبا شهريا في حدود 2500 درهم. وأوضح مصدر مطلع أن هذه المبادرة الاجتماعية تأتي في سياق تنزيل توجيهات المدير العام للأمن الوطني لمراقبة التراب الوطني عبد', 'size': 3}, {'id': '182', 'title': 'إدارة الأمن تصرف منحة استثنائية لفائدة أرامل منتسبيها ومتقاعديها', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a5%d8%af%d8%a7%d8%b1%d8%a9-%d8%a7%d9%84%d8%a3%d9%85%d9%86-%d8%aa%d8%b5%d8%b1%d9%81-%d9%85%d9%86%d8%ad%d8%a9-%d8%a7%d8%b3%d8%aa%d8%ab%d9%86%d8%a7%d8%a6%d9%8a%d8%a9-%d9%84%d9%81%d8%a7%d8%a6%d8%af/', 'summary': 'إدارة الأمن تصرف منحة استثنائية لفائدة أرامل منتسبيها ومتقاعديها. خصصت مؤسسة محمد السادس للأعمال الاجتماعية لموظفي الأمن الوطني مساعدة مالية استثنائية لفائدة أرامل الأمن الوطني، ممن يتقاضون معاشا يساوي أو يقل عن 2000 درهم، وكذا للمتقاعدين الذين يتقاضون راتبا شهريا في حدود 2500 درهم. وتأتي هذه المبادرة الاجتماعية، بحسب مصدر أمني، في سياق تنزيل توجيهات المدير العام للأمن الوطني ولمراقبة التراب الوطني عبد اللطيف  إدارة الأمن تصرف منحة استثنائية لفائدة أرامل منتسبيها ومتقاعديها     .', 'size': 3}, {'id': '209', 'title': 'مبادرة اجتماعية جديدة من حموشي: منحة استثنائية لأرامل ومتقاعدي الأمن الوطني', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/224450/', 'summary': 'مبادرة اجتماعية جديدة من حموشي: منحة استثنائية لأرامل ومتقاعدي الأمن الوطني. خصصت مؤسسة محمد السادس للأعمال الاجتماعية لموظفي الأمن الوطني مساعدة مالية استثنائية لفائدة أرامل الأمن الوطني، ممن يتقاضون معاشا يساوي أو يقل عن 2000 درهم، وكذا للمتقاعدين الذين يتقاضون راتبا شهريا في حدود 2500 درهم. وتأتي هذه المبادرة الاجتماعية في سياق تنزيل توجيهات المدير العام للأمن الوطني لمراقبة التراب الوطني عبد اللطيف حموشي، القاضية', 'size': 5}], 'main_title': 'مبادرة اجتماعية جديدة من حموشي: منحة استثنائية لأرامل ومتقاعدي الأمن الوطني'}, {'community_id': '1', 'articles': [{'id': '113', 'title': 'المنتخب المغربي يحافظ على مركزه في تصنيف الفيفا', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/sport/lionatlas/409060.html', 'summary': 'المنتخب المغربي يحافظ على مركزه في تصنيف الفيفا. حافظ المنتخب المغربي لكرة القدم (رجال) على مركزه الـ12 عالميا في أحدث تصنيف للإتحاد الدولي لكرة القدم (فيفا)، الصادر اليوم الخميس. وأضاف المنتخب المغربي لرصيده 4.48', 'size': 2}, {'id': '204', 'title': 'المنتخب الوطني لكرة القدم يحافظ على مركزه الـ12 عالميا', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/224467/', 'summary': 'المنتخب الوطني لكرة القدم يحافظ على مركزه الـ12 عالميا. كواليس اليوم حافظ المنتخب المغربي لكرة القدم (رجال) على مركزه الـ12 عالميا في أحدث تصنيف للإتحاد الدولي لكرة القدم (فيفا)، الصادر اليوم الخميس. وأضاف المنتخب المغربي لرصيده 4.48 نقاط بعد تحقيقه لفوزين في مبارتين وديتين على كل من تونس بحصة (2-0) يوم 6 يونيو، ثم على بنين بحصة (1-0) يوم 9 يونيو، لينهي بذلك', 'size': 2}], 'main_title': 'المنتخب المغربي يحافظ على مركزه في تصنيف الفيفا'}, {'community_id': '2', 'articles': [{'id': '115', 'title': 'السياحة المغربية تسجل رقما قياسيا جديدا في شهر يونيو', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/economy/409062.html', 'summary': 'السياحة المغربية تسجل رقما قياسيا جديدا في شهر يونيو. أعلنت وزارة السياحة والصناعة التقليدية والاقتصاد الاجتماعي والتضامني أن المغرب استقبل، خلال النصف الأول من السنة الجارية، 8,9 ملايين سائح، بارتفاع بنسبة 19 في المئة', 'size': 2}, {'id': '214', 'title': 'وزارة السياحة: المغرب استقبل قرابة 9 ملايين سائح في 6 أشهر', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d9%88%d8%b2%d8%a7%d8%b1%d8%a9-%d8%a7%d9%84%d8%b3%d9%8a%d8%a7%d8%ad%d8%a9-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d8%a7%d8%b3%d8%aa%d9%82%d8%a8%d9%84-%d9%82%d8%b1%d8%a7%d8%a8%d8%a9-9-%d9%85%d9%84%d8%a7/', 'summary': 'وزارة السياحة: المغرب استقبل قرابة 9 ملايين سائح في 6 أشهر. المساء اليوم: أعلنت وزارة السياحة والصناعة التقليدية والاقتصاد الاجتماعي والتضامني أن المغرب استقبل، خلال النصف الأول من السنة الجارية، 8,9 ملايين سائح، بارتفاع بنسبة 19 في المئة مقارنةً بالفترة ذاتها من سنة 2024، أي ما', 'size': 2}], 'main_title': 'السياحة المغربية تسجل رقما قياسيا جديدا في شهر يونيو'}, {'community_id': '3', 'articles': [{'id': '117', 'title': 'رئيس مجلس الشيوخ النيجيري يشيد بدينامية الشراكة الاقتصادية مع المغرب', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/divers/409064.html', 'summary': 'رئيس مجلس الشيوخ النيجيري يشيد بدينامية الشراكة الاقتصادية مع المغرب. أشاد رئيس مجلس الشيوخ النيجيري، غودسويل أكبابيو، بدينامية العلاقات الاقتصادية مع المغرب "الشريك الذي تزيد أهميته" بالنسبة لنيجيريا في مختلف القطاعات. وجدد رئيس مجلس الشيوخ، خلال', 'size': 2}, {'id': '199', 'title': 'رئيس مجلس الشيوخ النيجيري.. أبوجا تتطلع إلى تصدير الغاز عبر مشروع الأنبوب الإفريقي الأطلسي', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/469114.html', 'summary': 'رئيس مجلس الشيوخ النيجيري.. أبوجا تتطلع إلى تصدير الغاز عبر مشروع الأنبوب الإفريقي الأطلسي. أشاد رئيس مجلس الشيوخ النيجيري، غودسويل أكبابيو، بدينامية العلاقات الاقتصادية مع المغرب “الشريك الذي تزيد أهميته” بالنسبة لنيجيريا في مختلف القطاعات', 'size': 2}], 'main_title': 'رئيس مجلس الشيوخ النيجيري يشيد بدينامية الشراكة الاقتصادية مع المغرب'}, {'community_id': '4', 'articles': [{'id': '130', 'title': 'العرائش.. توقيف شخص ظهر في فيديو يحوز سلاحا أبيضا وشكل خطرا على الأشخاص والممتلكات', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a7%d9%84%d8%b9%d8%b1%d8%a7%d8%a6%d8%b4-%d8%aa%d9%88%d9%82%d9%8a%d9%81-%d8%b4%d8%ae%d8%b5-%d8%b8%d9%87%d8%b1-%d9%81%d9%8a-%d9%81%d9%8a%d8%af%d9%8a%d9%88-%d9%8a%d8%ad%d9%88%d8%b2-%d8%b3%d9%84/', 'summary': 'العرائش.. توقيف شخص ظهر في فيديو يحوز سلاحا أبيضا وشكل خطرا على الأشخاص والممتلكات. تفاعلت ولاية أمن تطوان، “بجدية كبيرة”، مع شريط فيديو منشور على صفحات مواقع التواصل الاجتماعي، زوال اليوم الخميس (10 يوليوز)، يظهر فيه شخص يحوز سلاحا أبيضا في ظروف تشكل خطرا على الأشخاص والممتلكات، بمدينة العرائش. وكشف مصدر أمني أن الأبحاث والتحريات المنجزة على ضوء هذا الشريط أوضحت أن الأمر يتعلق بقضية زجرية عالجتها مصالح الأمن', 'size': 5}, {'id': '291', 'title': 'أمن العرائش يوقف شخصا ظهر في فيديو يهدد المواطنين بسلاح أبيض', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-639318.html', 'summary': 'أمن العرائش يوقف شخصا ظهر في فيديو يهدد المواطنين بسلاح أبيض. هبة بريس - تطوان تفاعلت ولاية أمن تطوان ، مع شريط فيديو منشور على صفحات مواقع التواصل الاجتماعي زوال اليوم الخميس 10 يوليوز 2025 ، يظهر فيه شخص يحوز سلاحا أبيضا في ظروف تشكل خطرا على الأشخاص والممتلكات بمدينة العرائش. ووفقا لبلاغ أمني فقد أوضحت الأبحاث والتحريات المنجزة على ضوء هذا الشريط، أن الأمر يتعلق بقضية زجرية عالجتها مصالح الأمن الوطني بمدينة العرائش يوم أمس الأربعاء، حيث تمكنت عناصر الشرطة من توقيف المشتبه فيه بعد مرور وقت وجيز من ارتكاب هذه الأفعال الإجرامية. وقد تم إخضاع المشتبه فيه للبحث القضائي الذي تشرف عليه النيابة العامة المختصة، وذلك للكشف عن جميع ظروف وملابسات هذه القضية وكذا تحديد الخلفيات الحقيقية وراء ارتكاب هذه الأفعال الإجرامية.', 'size': 2}, {'id': '326', 'title': 'في وقت وجيز.. أمن العرائش يوقف متهماً ظهر في فيديو وهو يشهر سلاحاً أبيضاً في الشارع', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/society/409085.html', 'summary': 'في وقت وجيز.. أمن العرائش يوقف متهماً ظهر في فيديو وهو يشهر سلاحاً أبيضاً في الشارع. تفاعلت ولاية أمن تطوان، بجدية كبيرة، مع شريط فيديو منشور على صفحات مواقع التواصل الاجتماعي زوال اليوم الخميس 10 يوليوز 2025 ، يظهر فيه شخص', 'size': 4}, {'id': '356', 'title': 'الأمن يوقف حاملا لسلاح أبيض بالعرائش بعد تداول فيديو خطير', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/317943/', 'summary': 'الأمن يوقف حاملا لسلاح أبيض بالعرائش بعد تداول فيديو خطير. تفاعلت ولاية أمن تطوان، بجدية كبيرة، مع شريط فيديو منشور على صفحات مواقع التواصل الاجتماعي زوال اليوم الخميس 10 يوليوز 2025 ، يظهر فيه شخص يحوز سلاحا أبيضا في ظروف تشكل خطرا على الأشخاص والممتلكات بمدينة العرائش. وقد أوضحت الأبحاث والتحريات المنجزة على ضوء هذا الشريط، أن الأمر يتعلق بقضية زجرية عالجتها مصالح الأمن الوطني', 'size': 6}, {'id': '381', 'title': 'أمن العرائش يوقف مسلحا روع السكان', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a3%d9%85%d9%86-%d8%a7%d9%84%d8%b9%d8%b1%d8%a7%d8%a6%d8%b4-%d9%8a%d9%88%d9%82%d9%81-%d9%85%d8%b3%d9%84%d8%ad%d8%a7-%d8%b1%d9%88%d8%b9-%d8%a7%d9%84%d8%b3%d9%83%d8%a7%d9%86/', 'summary': 'أمن العرائش يوقف مسلحا روع السكان. أوقفت عناصر الشرطة بمدينة العرائش، الأربعاء، شخصا ظهر في شريط فيديو متداول على مواقع التواصل الاجتماعي وهو يحوز سلاحا أبيض في ظروف من شأنها تهديد سلامة الأشخاص والممتلكات. وجاء هذا التوقيف في إطار تفاعل جدي من قبل ولاية أمن تطوان مع مضمون الفيديو، الذي وثّق لحظة حيازة المشتبه فيه لسلاح أبيض بطريقة وصفت بالخطيرة، ما  أمن العرائش يوقف مسلحا روع السكان     .', 'size': 5}, {'id': '397', 'title': 'ولاية أمن تطوان توقف صعصع العرائش الذي روع الساكنة بسيف', 'source': 'rue20.com', 'link': 'https://rue20.com/919380.html', 'summary': 'ولاية أمن تطوان توقف صعصع العرائش الذي روع الساكنة بسيف. . تطوان تفاعلت ولاية أمن تطوان، بجدية كبيرة، مع شريط فيديو منشور على صفحات مواقع التواصل الاجتماعي زوال اليوم الخميس 10 يوليوز 2025 ، يظهر فيه شخص يحوز سلاحا أبيضا في ظروف تشكل خطرا على الأشخاص والممتلكات بمدينة العرائش. وقد أوضحت الأبحاث والتحريات المنجزة على ضوء هذا الشريط، أن الأمر يتعلق بقضية زجرية عالجتها الخبر ولاية أمن تطوان توقف صعصع العرائش الذي روع الساكنة بسيف  .', 'size': 4}], 'main_title': 'الأمن يوقف حاملا لسلاح أبيض بالعرائش بعد تداول فيديو خطير'}, {'community_id': '5', 'articles': [{'id': '132', 'title': 'تحضيرات المونديال.. الحكومة تصادق على إحداث مؤسسة المغرب 2030', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%aa%d8%ad%d8%b6%d9%8a%d8%b1%d8%a7%d8%aa-%d8%a7%d9%84%d9%85%d9%88%d9%86%d8%af%d9%8a%d8%a7%d9%84-%d8%a7%d9%84%d8%ad%d9%83%d9%88%d9%85%d8%a9-%d8%aa%d8%b5%d8%a7%d8%af%d9%82-%d8%b9%d9%84%d9%89-%d8%a5/', 'summary': 'تحضيرات المونديال.. الحكومة تصادق على إحداث مؤسسة المغرب 2030. صادق مجلس الحكومة، اليوم الخميس (10 يوليوز)، على مشروع القانون رقم 35.25 يتعلق بإحداث “مؤسسة المغرب 2030″، قدمه الوزير المنتدب لدى وزيرة الاقتصاد والمالية المكلف بالميزانية فوزي لقجع. وأوضح الوزير المنتدب لدى رئيس الحكومة المكلف بالعلاقات مع البرلمان، الناطق الرسمي باسم الحكومة، مصطفى بايتاس في لقاء صحفي عقب انعقاد المجلس، أن مشروع هذا القانون يندرج', 'size': 2}, {'id': '358', 'title': 'نحو مونديال تاريخي.. الحكومة تحدث “مؤسسة المغرب 2030” لتنفيذ رؤية جلالة الملك', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/317937/', 'summary': 'نحو مونديال تاريخي.. الحكومة تحدث “مؤسسة المغرب 2030” لتنفيذ رؤية جلالة الملك. صادق مجلس الحكومة، اليوم الخميس، على مشروع القانون رقم 35.25 يتعلق بإحداث “مؤسسة المغرب 2030″، قدمه الوزير المنتدب لدى وزيرة الاقتصاد والمالية المكلف بالميزانية فوزي لقجع. وأوضح الوزير المنتدب لدى رئيس الحكومة المكلف بالعلاقات مع البرلمان، الناطق الرسمي باسم الحكومة، مصطفى بايتاس في لقاء صحفي عقب انعقاد المجلس، أن مشروع هذا القانون يندرج في إطار', 'size': 2}], 'main_title': 'تحضيرات المونديال.. الحكومة تصادق على إحداث مؤسسة المغرب 2030'}, {'community_id': '7', 'articles': [{'id': '160', 'title': 'الحكومة تصادق على مشروع قانون يوازن بين سلامة المواطنين والرفق بالحيوان', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1084520.html', 'summary': 'الحكومة تصادق على مشروع قانون يوازن بين سلامة المواطنين والرفق بالحيوان. صادق مجلس الحكومة، خلال اجتماعه المنعقد الخميس 10 يوليوز 2025، على مشروع القانون رقم 19.25 المتعلق بحماية الحيوانات الضالة والوقاية من أخطارها، قدمه وزير الفلاحة والصيد البحري والتنمية القروية والمياه والغابات، أحمد البواري. وحسب بلاغ لرئاسة الحكومة، فإن هذا المشروع يأتي استجابة لتحد متزايد فرض نفسه في الآونة الأخيرة، نتيجة لما تشكله ظاهرة الحيوانات الضالة ظهرت المقالة الحكومة تصادق على مشروع قانون يوازن بين سلامة المواطنين والرفق بالحيوان  .', 'size': 3}, {'id': '187', 'title': 'مشروع قانون جديد لحماية الحيوانات الضالة والوقاية من أخطارها', 'source': 'rue20.com', 'link': 'https://rue20.com/919340.html', 'summary': 'مشروع قانون جديد لحماية الحيوانات الضالة والوقاية من أخطارها.  الرباط صادق مجلس الحكومة، خلال اجتماعه المنعقد يوم الخميس 10 يوليوز 2025، على مشروع القانون رقم 19.25 المتعلق بحماية الحيوانات الضالة والوقاية من أخطارها، والذي قدمه أحمد البواري، وزير الفلاحة والصيد البحري والتنمية القروية والمياه والغابات. ويأتي هذا المشروع في سياق تزايد الإشكالات المرتبطة بظاهرة انتشار الحيوانات الضالة، والتي أصبحت في الآونة الأخيرة تشكل الخبر مشروع قانون جديد لحماية الحيوانات الضالة والوقاية من أخطارها  .', 'size': 2}, {'id': '194', 'title': 'مجلس الحكومة يصادق على حماية الحيوانات الضالة والوقاية من أخطارها', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/469129.html', 'summary': 'مجلس الحكومة يصادق على حماية الحيوانات الضالة والوقاية من أخطارها. تداول مجلس الحكومة وصادق، اليوم الخميس، على مشروع القانون رقم 19.25 يتعلق بحماية الحيوانات الضالة والوقاية من أخطارها، قدمه أحمد البواري، وزير الفلاحة والصيد البحري والتنمية القروية والمياه والغابات. ويأتي هذا المشروع، وفق موقع رئاسة الحكومة، بعدما أضحت ظاهرة الحيوانات الضالة، تشكل في الآونة الأخيرة إحدى التحديات البارزة التي تفرض على الدولة اتخاذ تدابير عاجلة …', 'size': 3}, {'id': '211', 'title': 'مجلس الحكومة يصادق على مشروع قانون لحماية الحيوانات الضالة', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/224446/', 'summary': 'مجلس الحكومة يصادق على مشروع قانون لحماية الحيوانات الضالة. أحمد التدلاوي مجلس الحكومة خلال اجتماعه المنعقد اليوم الخميس، على مشروع القانون رقم 19.25 يتعلق بحماية الحيوانات الضالة والوقاية من أخطارها، قدمه أحمد البواري، وزير الفلاحة والصيد البحري والتنمية القروية والمياه والغابات. ويأتي هذا المشروع بعدما أضحت ظاهرة الحيوانات الضالة، تشكل في الآونة الأخيرة إحدى التحديات البارزة التي تفرض على الدولة اتخاذ تدابير عاجلة', 'size': 2}], 'main_title': 'الحكومة تصادق على مشروع قانون يوازن بين سلامة المواطنين والرفق بالحيوان'}, {'community_id': '6', 'articles': [{'id': '334', 'title': 'للرد على أسئلة البرلمانيين حول الحصيلة المالية والاقتصادية.. أخنوش يحل بمجلس المستشارين الثلاثاء المقبل', 'source': 'kifache.com', 'link': 'https://kifache.com/%d9%84%d9%84%d8%b1%d8%af-%d8%b9%d9%84%d9%89-%d8%a3%d8%b3%d8%a6%d9%84%d8%a9-%d8%a7%d9%84%d8%a8%d8%b1%d9%84%d9%85%d8%a7%d9%86%d9%8a%d9%8a%d9%86-%d8%ad%d9%88%d9%84-%d8%a7%d9%84%d8%ad%d8%b5%d9%8a%d9%84/', 'summary': 'للرد على أسئلة البرلمانيين حول الحصيلة المالية والاقتصادية.. أخنوش يحل بمجلس المستشارين الثلاثاء المقبل. يعقد مجلس المستشارين، الثلاثاء المقبل (15 يوليوز)، جلسة عمومية تخصص للأسئلة الشفهية الشهرية الموجهة إلى رئيس الحكومة حول السياسة العامة. وذكر بلاغ للمجلس أن هذه الجلسة ستنطلق على الساعة الثالثة بعد الزوال، وستتناول موضوع “الحصيلة الاقتصادية والمالية وأثرها على دينامية الاستثمار والتشغيل بالمغرب”. وتعقد هذه الجلسة طبقا لأحكام الفصل 100 من الدستور.', 'size': 2}, {'id': '415', 'title': 'رئيس الحكومة يحل الثلاثاء المقبل بمجلس المستشارين', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%b1%d8%a6%d9%8a%d8%b3-%d8%a7%d9%84%d8%ad%d9%83%d9%88%d9%85%d8%a9-%d9%8a%d8%ad%d9%84-%d8%a7%d9%84%d8%ab%d9%84%d8%a7%d8%ab%d8%a7%d8%a1-%d8%a7%d9%84%d9%85%d9%82%d8%a8%d9%84-%d8%a8%d9%85%d8%ac%d9%84/', 'summary': 'رئيس الحكومة يحل الثلاثاء المقبل بمجلس المستشارين. يعقد مجلس المستشارين، الثلاثاء المقبل، جلسة عمومية تخصص للأسئلة الشفهية الشهرية الموجهة إلى رئيس الحكومة حول السياسة العامة. وذكر بلاغ للمجلس، أن هذه الجلسة التي تعقد طبقا لأحكام الفصل 100 من الدستور، ستنطلق على الساعة الثالثة بعد الزوال. وتابع البلاغ، أن الجلسة ستتناول موضوع “الحصيلة الاقتصادية والمالية وأثرها على دينامية الاستثمار والتشغيل بالمغرب”.  رئيس الحكومة يحل الثلاثاء المقبل بمجلس المستشارين     .', 'size': 2}], 'main_title': 'للرد على أسئلة البرلمانيين حول الحصيلة المالية والاقتصادية.. أخنوش يحل بمجلس المستشارين الثلاثاء المقبل'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    