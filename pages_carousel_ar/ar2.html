<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 06/10/2025 - 18h27</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '2', 'articles': [{'id': '13', 'title': 'منح جائزة نوبل في الطب ل3 علماء في مجال التحكم في الجهاز المناعي', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-663606.html', 'summary': 'منح جائزة نوبل في الطب ل3 علماء في مجال التحكم في الجهاز المناعي. هبة بريس – وكالات مُنحت جائزة نوبل في الطب لعام 2025، الاثنين، للباحثين الأمريكيين ماري إي. برونكو وفريد رامسديل، والعالم الياباني شيمون ساكاغوتشي، تقديرا لأبحاثهم حول كيفية تحكم الجسم في الجهاز المناعي. وأعلنت لجنة نوبل أن الجائزة تُقدّر “اكتشافاتهم المتعلقة بالتحمل المناعي المحيطي”. وأوضحت الأستاذة في معهد كارولينا ماري فاهرين-هيرلينيوس أن “جائزة نوبل في علم', 'size': 2}, {'id': '405', 'title': 'منح جائزة نوبل في الطب لثلاثة علماء عن أبحاثهم في مجال التحكم في الجهاز المناعي', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/228071/', 'summary': 'منح جائزة نوبل في الطب لثلاثة علماء عن أبحاثهم في مجال التحكم في الجهاز المناعي. منحت جائزة نوبل في الطب لعام 2025، اليوم الاثنين، للباحثين الأمريكيين ماري إي. برونكو وفريد رامسديل، والعالم الياباني شيمون ساكاغوتشي، تقديرا لأبحاثهم حول كيفية تحكم الجسم في الجهاز المناعي. وأعلنت لجنة نوبل أن الجائزة تقدر “اكتشافاتهم المتعلقة بالتحمل المناعي المحيطي”. وأوضحت الأستاذة في معهد كارولينا ماري فاهرين-هيرلينيوس أن “جائزة نوبل في علم وظائف الأعضاء أو', 'size': 2}], 'main_title': 'منح جائزة نوبل في الطب ل3 علماء في مجال التحكم في الجهاز المناعي'}, {'community_id': '1', 'articles': [{'id': '31', 'title': 'استئنافية مراكش تؤيد إدانة رئيس جماعة “آيت حمو”', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-663478.html', 'summary': 'استئنافية مراكش تؤيد إدانة رئيس جماعة “آيت حمو”. مراكش-محمد الهروالي أيدت محكمة الاستئناف بمراكش الحكم الابتدائي الصادر في حقّ ميلود جبران، رئيس جماعة آيت حمو بإقليم الرحامنة، والقاضي بشهر واحد موقوف التنفيذ وغرامة 2000 درهم، على خلفية تصويته في غرفتين مهنيتين مختلفتين خلال الاستحقاقات الأخيرة. وتوبع المعني بالأمر، المنتمي لحزب التجمع الوطني للأحرار، في حالة سراح، بجنحة “الحصول على قيد في أكثر من', 'size': 2}, {'id': '151', 'title': 'محكمة الإستئناف بمراكش تؤيد إدانة رئيس جماعة بسبب خرق انتخابي', 'source': 'rue20.com', 'link': 'https://rue20.com/942398.html', 'summary': 'محكمة الإستئناف بمراكش تؤيد إدانة رئيس جماعة بسبب خرق انتخابي.  ا مراكش | محمد المفرك أيدت محكمة الاستئناف بمراكش الحكم الابتدائي الصادر في حق ميلود جبران، رئيس مجلس جماعة آيت حمّو بإقليم الرحامنة، والقاضي بشهر حبس موقوف التنفيذ وغرامة مالية قدرها 2000 درهم، على خلفية تصويته في غرفتين مهنيتين مختلفتين خلال الانتخابات المهنية الأخيرة. وتعود تفاصيل القضية إلى شكاية تقدم بها خمسة مستشارين الخبر محكمة الإستئناف بمراكش تؤيد إدانة رئيس جماعة بسبب خرق انتخابي  .', 'size': 2}], 'main_title': 'استئنافية مراكش تؤيد إدانة رئيس جماعة “آيت حمو”'}, {'community_id': '10', 'articles': [{'id': '53', 'title': 'الأحرار بجهة الرباط يدعو إلى الإنصات للشباب ويـ ـحذر من محاولات تأليـب الرأي العام ضد المؤسسات', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/207052', 'summary': 'الأحرار بجهة الرباط يدعو إلى الإنصات للشباب ويـ ـحذر من محاولات تأليـب الرأي العام ضد المؤسسات.  دعا المكتب الجهوي لحزب التجمع الوطني للأحرار بجهة الرباط سلا القنيطرة؛ الى الانصات الواعي والمسؤول؛ محذرا في الوقت ذاته من الانزلاقات ومحاولات استغلال المطالب المشروعة لتأليب الرأي العام ضد المؤسسات؛ وذلك تفاعلا مع النقاشات المجتمعية التي تعرفها الساحة الوطنية حول مطالب فئة من الشباب. وخصص التجمعيون خلال اجتماعهم المنعقد أمس السبت 4 أكتوبر', 'size': 2}, {'id': '362', 'title': '"أحرار" جهة الرباط: نتضامن مع أخنوش والتشويش يستهدف مصداقية الحكومة', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a3%d8%ad%d8%b1%d8%a7%d8%b1-%d8%ac%d9%87%d8%a9-%d8%a7%d9%84%d8%b1%d8%a8%d8%a7%d8%b7-%d9%86%d8%aa%d8%b6%d8%a7%d9%85%d9%86-%d9%85%d8%b9-%d8%b9%d8%b2%d9%8a%d8%b2-%d8%a3%d8%ae%d9%86%d9%88%d8%b4/', 'summary': '"أحرار" جهة الرباط: نتضامن مع أخنوش والتشويش يستهدف مصداقية الحكومة. سجل المكتب الجهوي لحزب التجمع الوطني للأحرار بجهة الرباط-سلا-القنيطرة ما وصفه بـ"تورط بعض المؤثرين وتجار الأزمات وصناع الفتن ومخترقي الإعلانات الرقمية في توجيه وتأطير غير بريء لجزء من الشباب، من خلال استغلال مطالبهم الاجتماعية المشروعة لمحاولة تأجيجها ضد المؤسسات الدستورية للدولة، في مسعى مكشوف لضرب علاقة الثقة المتبادلة بين المواطنين ومؤسساتهم". وأدان المكتب الجهوي، الذي  "أحرار" جهة الرباط: نتضامن مع أخنوش والتشويش يستهدف مصداقية الحكومة     .', 'size': 2}], 'main_title': 'الأحرار بجهة الرباط يدعو إلى الإنصات للشباب ويـ ـحذر من محاولات تأليـب الرأي العام ضد المؤسسات'}, {'community_id': '3', 'articles': [{'id': '54', 'title': 'ولي العهد الأمير مولاي الحسن يترأس بالجديدة حفل تسليم الجائزة الكبرى لصاحب الجلالة الملك محمد السادس للقفز على الحواجز', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/207049', 'summary': 'ولي العهد الأمير مولاي الحسن يترأس بالجديدة حفل تسليم الجائزة الكبرى لصاحب الجلالة الملك محمد السادس للقفز على الحواجز.  ترأس صاحب السمو الملكي ولي العهد الأمير مولاي الحسن، عشية اليوم الأحد بمركز المعارض محمد السادس بالجديدة، حفل تسليم الجائزة الكبرى لصاحب الجلالة الملك محمد السادس للقفز على الحواجز، برسم المرحلة النهائية من النسخة الرابعة عشرة للدوري الملكي المغربي الدولي للقفز على الحواجز(فئة أربع نجوم)، المنظمة في إطار الدورة السادسة عشرة لمعرض الفرس. ولدى', 'size': 3}, {'id': '70', 'title': 'الأمير مولاي الحسن يترأس بالجديدة حفل تسليم الجائزة الكبرى للملك محمد السادس في القفز على الحواجز', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/413987.html', 'summary': 'الأمير مولاي الحسن يترأس بالجديدة حفل تسليم الجائزة الكبرى للملك محمد السادس في القفز على الحواجز. ترأس صاحب السمو الملكي ولي العهد الأمير مولاي الحسن، عشية اليوم الأحد بمركز المعارض محمد السادس بالجديدة، حفل تسليم الجائزة الكبرى لصاحب الجلالة الملك محمد', 'size': 3}, {'id': '189', 'title': 'ولي العهد مولاي الحسن يسلم الجائزة الكبرى لصاحب الجلالة الملك محمد السادس للقفز على الحواجز', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/228061/', 'summary': 'ولي العهد مولاي الحسن يسلم الجائزة الكبرى لصاحب الجلالة الملك محمد السادس للقفز على الحواجز. ترأس صاحب السمو الملكي ولي العهد الأمير مولاي الحسن، عشية اليوم الأحد بمركز المعارض محمد السادس بالجديدة، حفل تسليم الجائزة الكبرى لصاحب الجلالة الملك محمد السادس للقفز على الحواجز، برسم المرحلة النهائية من النسخة الرابعة عشرة للدوري الملكي المغربي الدولي للقفز على الحواجز(فئة أربع نجوم)، المنظمة في إطار الدورة السادسة عشرة لمعرض الفرس. ولدى وصول', 'size': 3}], 'main_title': 'ولي العهد الأمير مولاي الحسن يترأس بالجديدة حفل تسليم الجائزة الكبرى لصاحب الجلالة الملك محمد السادس للقفز على الحواجز'}, {'community_id': '5', 'articles': [{'id': '87', 'title': 'بالصور.. وثائق أمريكية نادرة تنتصر للشرعية المغربية على الصحراء وتفضح زيف مزاعم الجزائر وصنيعتها البوليساريو', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/politic/414007.html', 'summary': 'بالصور.. وثائق أمريكية نادرة تنتصر للشرعية المغربية على الصحراء وتفضح زيف مزاعم الجزائر وصنيعتها البوليساريو. أعاد الصحفي الجزائري المعارض "وليد كبير" إلى الواجهة التاريخية قضية الصحراء المغربية، بعد أن نشر عبر موقعه الإلكتروني وحساباته على مواقع التواصل الاجتماعي وثائق أرشيفية', 'size': 2}, {'id': '258', 'title': 'وثائق تاريخية نادرة من “نيويورك تايمز” تنسف أكاذيب الجزائر حول الصحراء المغربية', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-663679.html', 'summary': 'وثائق تاريخية نادرة من “نيويورك تايمز” تنسف أكاذيب الجزائر حول الصحراء المغربية. هبة بريس أماط الصحفي الجزائري والمعارض وليد كبير اللثام عن ملف الصحراء المغربية من زاوية تاريخية تُسقط الأقنعة عن النظام الجزائري وجبهة البوليساريو، بعد أن نشر عبر موقعه ومنصاته الرسمية وثائق أرشيفية نادرة من صحيفة “نيويورك تايمز” الأمريكية، تثبت بالدلائل التاريخية أن الكفاح المسلح المغربي ضد الاستعمار الإسباني في الصحراء بدأ منذ خمسينيات القرن الماضي،', 'size': 2}], 'main_title': 'بالصور.. وثائق أمريكية نادرة تنتصر للشرعية المغربية على الصحراء وتفضح زيف مزاعم الجزائر وصنيعتها البوليساريو'}, {'community_id': '6', 'articles': [{'id': '143', 'title': 'أزمة سياسية في فرنسا.. رئيس الوزراء يقدم استقالته', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a3%d8%b2%d9%85%d8%a9-%d8%b3%d9%8a%d8%a7%d8%b3%d9%8a%d8%a9-%d9%81%d9%8a-%d9%81%d8%b1%d9%86%d8%b3%d8%a7-%d8%b1%d8%a6%d9%8a%d8%b3-%d8%a7%d9%84%d9%88%d8%b2%d8%b1%d8%a7%d8%a1-%d9%8a%d9%82%d8%af%d9%85/', 'summary': 'أزمة سياسية في فرنسا.. رئيس الوزراء يقدم استقالته. قدم رئيس الوزراء الفرنسي سيبستيان لوكورنو استقالته الاثنين إلى الرئيس إيمانويل ماكرون على ما أعلن قصر الإليزيه في بيان، ما يعمق الأزمة السياسية المستفحلة في البلاد. وعين لوكورنو في التاسع من شتنبر وتعرض لانتقادات المعارضين واليمين بعدما كشف مساء الأحد تشكيلة حكومته وهي الثالثة في البلاد في غضون سنة.  أزمة سياسية في فرنسا.. رئيس الوزراء يقدم استقالته     .', 'size': 2}, {'id': '155', 'title': 'رئيس وزراء فرنسا يقدم استقالته بعد شهر فقط من تعيينه', 'source': 'rue20.com', 'link': 'https://rue20.com/942381.html', 'summary': 'رئيس وزراء فرنسا يقدم استقالته بعد شهر فقط من تعيينه.  | وكالات قدّم رئيس الوزراء الفرنسي سيباستيان لوكورنو استقالته إلى الرئيس إيمانويل ماكرون، اليوم الاثنين، وفق ما أعلن قصر الإليزيه في بيان، وهو ما يعمق الأزمة السياسية المستفحلة في البلاد. وعين لوكورنو في التاسع من سبتمبر، وتعرض لانتقادات المعارضين واليمين بعدما كشف مساء الأحد عن تشكيلة حكومته، وهي الثالثة في البلاد في غضون الخبر رئيس وزراء فرنسا يقدم استقالته بعد شهر فقط من تعيينه  .', 'size': 2}], 'main_title': 'أزمة سياسية في فرنسا.. رئيس الوزراء يقدم استقالته'}, {'community_id': '11', 'articles': [{'id': '190', 'title': 'معبر الكركارات.. إجهاض محاولة للتهريب الدولي للمخدرات وحجز 53 كلغ و630 غراما من الكوكايين', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/228059/', 'summary': 'معبر الكركارات.. إجهاض محاولة للتهريب الدولي للمخدرات وحجز 53 كلغ و630 غراما من الكوكايين. أسفرت عملية أمنية مشتركة بين عناصر الأمن الوطني والجمارك بمعبر الكركارات الحدودي، جنوب مدينة الداخلة، مساء اليوم السبت، عن إجهاض محاولة للتهريب الدولي للمخدرات وحجز 53 كيلوغراما و 630 غراما من مخدر الكوكايين. وذكر مصدر أمني أن عملية المراقبة الحدودية وإجراءات التفتيش، التي شاركت فيها الكلاب المدربة للشرطة، مكنت من ضبط شحنات المخدرات مخبأة بعناية', 'size': 2}, {'id': '201', 'title': 'قادمة من دولة إفريقية.. إجهاض محاولة تهريب شحنة من الكوكايين', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d9%82%d8%a7%d8%af%d9%85%d8%a9-%d9%85%d9%86-%d8%af%d9%88%d9%84%d8%a9-%d8%a5%d9%81%d8%b1%d9%8a%d9%82%d9%8a%d8%a9-%d8%a5%d8%ac%d9%87%d8%a7%d8%b6-%d9%85%d8%ad%d8%a7%d9%88%d9%84%d8%a9-%d8%aa%d9%87%d8%b1-2/', 'summary': 'قادمة من دولة إفريقية.. إجهاض محاولة تهريب شحنة من الكوكايين. المساء أسفرت عملية أمنية مشتركة بين عناصر الأمن الوطني والجمارك بمعبر الكركارات الحدودي، جنوب مدينة الداخلة، أمس السبت (4 أكتوبر)، عن إجهاض محاولة للتهريب الدولي للمخدرات وحجز 53 كيلوغراما و 630 غراما من مخدر', 'size': 2}], 'main_title': 'معبر الكركارات.. إجهاض محاولة للتهريب الدولي للمخدرات وحجز 53 كلغ و630 غراما من الكوكايين'}, {'community_id': '14', 'articles': [{'id': '265', 'title': 'الاستراتيجية الوطنية للتنمية المستدامة 2035 على طاولة المجلس الحكومي', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-663674.html', 'summary': 'الاستراتيجية الوطنية للتنمية المستدامة 2035 على طاولة المجلس الحكومي. هبة بريس ينعقد، الخميس المقبل، مجلس للحكومة برئاسة عزيز أخنوش، رئيس الحكومة. وذكر بلاغ لرئاسة الحكومة أن المجلس سيتتبع فى بدايته عرضا لوزيرة الانتقال الطاقي والتنمية المستدامة حول الاستراتيجية الوطنية للتنمية المستدامة 2035. وسيتدارس المجلس، إثر ذلك، مشروع قانون يقضي بتغيير وتتميم القانون المتعلق بمدونة التجارة، قبل أن ينتقل إلى دراسة مشروعي مرسومين يتعلق الأول', 'size': 3}, {'id': '295', 'title': 'جدول أعمـال مجلس الحكومـة الخميس المقبل', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/414016.html', 'summary': 'جدول أعمـال مجلس الحكومـة الخميس المقبل. ينعقد، بعد غد الخميس، مجلس للحكومة برئاسة عزيز أخنوش، رئيس الحكومة. وذكر بلاغ لرئاسة الحكومة أن المجلس سيتتبع فى بدايته عرضا لوزيرة الانتقال الطاقي والتنمية المستدامة', 'size': 4}, {'id': '338', 'title': 'تطبيق قانون مؤسسات الرعاية الاجتماعية على طاولة مجلس الحكومة', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1105826.html', 'summary': 'تطبيق قانون مؤسسات الرعاية الاجتماعية على طاولة مجلس الحكومة. ينعقد، بعد غد الخميس، مجلس للحكومة برئاسة عزيز أخنوش، رئيس الحكومة. وذكر بلاغ لرئاسة الحكومة أن المجلس سيتتبع فى بدايته عرضا لوزيرة الانتقال الطاقي والتنمية المستدامة حول الاستراتيجية الوطنية للتنمية المستدامة 2035. وسيتدارس المجلس، إثر ذلك، مشروع قانون يقضي بتغيير وتتميم القانون المتعلق بمدونة التجارة، قبل أن ينتقل إلى دراسة مشروعي مرسومين يتعلق الأول منهما ظهرت المقالة تطبيق قانون مؤسسات الرعاية الاجتماعية على طاولة مجلس الحكومة  .', 'size': 5}, {'id': '375', 'title': 'ملفات مهمة على طاولة مجلس الحكومة الخميس المقبل', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/477696.html', 'summary': 'ملفات مهمة على طاولة مجلس الحكومة الخميس المقبل. ينعقد، يوم الخميس المقبل، مجلس للحكومة برئاسة عزيز أخنوش رئيس الحكومة. وذكر بلاغ لرئاسة الحكومة، أن المجلس سيتتبع فى بدايته عرضا لوزيرة الانتقال الطاقي والتنمية المستدامة حول الاستراتيجية الوطنية للتنمية المستدامة 2035. وسيتدارس المجلس، إثر ذلك، مشروع قانون يقضي بتغيير وتتميم القانون المتعلق بمدونة التجارة، قبل أن ينتقل إلى دراسة مشروعي مرسومين يتعلق الأول منهما …', 'size': 3}, {'id': '386', 'title': 'بلاغ لرئاسة الحكومة', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d8%a8%d9%84%d8%a7%d8%ba-%d9%84%d8%b1%d8%a6%d8%a7%d8%b3%d8%a9-%d8%a7%d9%84%d8%ad%d9%83%d9%88%d9%85%d8%a9-9/', 'summary': 'بلاغ لرئاسة الحكومة. ينعقد، يوم الخميس المقبل، مجلس للحكومة برئاسة عزيز أخنوش، رئيس الحكومة. وذكر بلاغ لرئاسة الحكومة أن المجلس سيتتبع فى بدايته عرضا لوزيرة الانتقال الطاقي  بلاغ لرئاسة الحكومة     .', 'size': 4}], 'main_title': 'تطبيق قانون مؤسسات الرعاية الاجتماعية على طاولة مجلس الحكومة'}, {'community_id': '13', 'articles': [{'id': '289', 'title': 'مجلس جهة الرباط-سلا-القنيطرة يصادق على مشاريع للبنيات التحتية والتنمية', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/207064', 'summary': 'مجلس جهة الرباط-سلا-القنيطرة يصادق على مشاريع للبنيات التحتية والتنمية.  صادق مجلس جهة الرباط-سلا-القنيطرة، اليوم الاثنين بالرباط، خلال دورته العادية لشهر أكتوبر 2025، على مشاريع للبنيات التحتية والتنمية. وصادق المجلس خلال هذه الدورة، التي ترأسها رئيس المجلس، رشيد العبدي، بحضور والي جهة الرباط-سلا-القنيطرة، عامل عمالة الرباط، محمد اليعقوبي، على عدد من المشاريع التي عبأ لها غلافا ماليا يناهز ملياري درهم، تتعلق بتزويد ساكنة', 'size': 2}, {'id': '373', 'title': 'بملياري درهم.. مجلس جهة الرباط يصادق على مشاريع للبنيات التحتية والتنمية', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/477699.html', 'summary': 'بملياري درهم.. مجلس جهة الرباط يصادق على مشاريع للبنيات التحتية والتنمية. صادق مجلس جهة الرباط-سلا-القنيطرة، اليوم الاثنين بالرباط، خلال دورته العادية لشهر أكتوبر 2025، على مشاريع للبنيات التحتية والتنمية، برئاسة رشيد العبدي، رئيس المجلس، وبحضور محمد اليعقوبي، والي الجهة، إلى جانب أعضاء المجلس وممثلي مختلف القطاعات الشريكة. وصادق المجلس على عدد من المشاريع التي عبأ لها غلافا ماليا يناهز ملياري درهم، تتعلق بتزويد ساكنة العالم القروي …', 'size': 2}], 'main_title': 'مجلس جهة الرباط-سلا-القنيطرة يصادق على مشاريع للبنيات التحتية والتنمية'}, {'community_id': '4', 'articles': [{'id': '304', 'title': 'انفصال ودي بين أولمبيك آسفي والمدرب أمين الكرمة', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/sport/footmarocain/414025.html', 'summary': 'انفصال ودي بين أولمبيك آسفي والمدرب أمين الكرمة. أعلن نادي أولمبيك آسفي، في بلاغ رسمي، عن انفصاله بالتراضي مع المدرب أمين الكرمة، الذي كان يشرف على العارضة التقنية للفريق الأول، وذلك عقب جلسة', 'size': 2}, {'id': '324', 'title': 'الكرمة يغادر أولمبيك آسفي', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-592622.html', 'summary': 'الكرمة يغادر أولمبيك آسفي. أعلن نادي أولمبيك آسفي عن انفصاله بالتراضي مع الإطار الوطني أمين الكرمة، مدرب الفريق الأول، وذلك عقب جلسة ودية جمعت الطرفين، تم خلالها الاتفاق على إنهاء العلاقة التعاقدية في أجواء يسودها الاحترام والتقدير المتبادل. وعبّر المكتب المديري للنادي عن شكره وامتنانه للمدرب أمين الكرمة على الجهود التي بذلها خلال فترة إشرافه على', 'size': 2}], 'main_title': 'انفصال ودي بين أولمبيك آسفي والمدرب أمين الكرمة'}, {'community_id': '7', 'articles': [{'id': '312', 'title': 'مقاطع مفبركة تروج لـ”تعذيب متظاهرين” في المغرب.. الأمن يكشف الحقيقة', 'source': 'kifache.com', 'link': 'https://kifache.com/%d9%85%d9%82%d8%a7%d8%b7%d8%b9-%d9%85%d9%81%d8%a8%d8%b1%d9%83%d8%a9-%d8%aa%d8%b1%d9%88%d8%ac-%d9%84%d9%80%d8%aa%d8%b9%d8%b0%d9%8a%d8%a8-%d9%85%d8%aa%d8%b8%d8%a7%d9%87%d8%b1%d9%8a%d9%86-%d9%81/', 'summary': 'مقاطع مفبركة تروج لـ”تعذيب متظاهرين” في المغرب.. الأمن يكشف الحقيقة. نشرت صفحات وحسابات أجنبية على مواقع التواصل الاجتماعي “صورا ومقاطع مبتورة من شريط تمثيلي قصير منشور سابقا على يوتيوب، وقدمتها بشكل تضليلي ومغرض على أنها أعمال عنف وتعذيب منسوبة لموظفي الأمن ضد المتظاهرين بالمغرب”. وتفنيدا لهذه المزاعم المشوبة بالتدليس والتضليل، أوضح مصدر أمني بأن المقاطع والمشاهد المنشورة هي جزء من فيلم تمثيلي لا علاقة لها', 'size': 5}, {'id': '339', 'title': 'الأمن يفضح “فيلما تمثيليا” روج  لـ”تعذيب متظاهرين” في حملة تضليل أجنبية', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1105819.html', 'summary': 'الأمن يفضح “فيلما تمثيليا” روج لـ”تعذيب متظاهرين” في حملة تضليل أجنبية. نشرت صفحات وحسابات أجنبية على مواقع التواصل الاجتماعي “صورا ومقاطع مبتورة من شريط تمثيلي قصير منشور سابقا على يوتيوب، وقدمتها بشكل تضليلي ومغرض على أنها أعمال عنف وتعذيب منسوبة لموظفي الأمن ضد المتظاهرين بالمغرب”. وتفنيدا لهذه المزاعم المشوبة بالتدليس والتضليل، أوضح مصدر أمني بأن المقاطع والمشاهد المنشورة هي جزء من فيلم تمثيلي لا علاقة لها ظهرت المقالة الأمن يفضح “فيلما تمثيليا” روج لـ”تعذيب متظاهرين” في حملة تضليل أجنبية  .', 'size': 5}, {'id': '361', 'title': 'الأمن ينفي مزاعم تعذيب منشورة على حسابات أجنبية', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a7%d9%84%d8%a3%d9%85%d9%86-%d9%8a%d9%86%d9%81%d9%8a-%d9%85%d8%b2%d8%a7%d8%b9%d9%85-%d8%aa%d8%b9%d8%b0%d9%8a%d8%a8-%d9%85%d9%86%d8%b4%d9%88%d8%b1%d8%a9-%d8%b9%d9%84%d9%89-%d8%ad%d8%b3%d8%a7%d8%a8/', 'summary': 'الأمن ينفي مزاعم تعذيب منشورة على حسابات أجنبية. نشرت صفحات وحسابات أجنبية على مواقع التواصل الاجتماعي "صورا ومقاطع مبتورة من شريط تمثيلي قصير منشور سابقا على يوتيوب، وقدمتها بشكل تضليلي ومغرض على أنها أعمال عنف وتعذيب منسوبة لموظفي الأمن ضد المتظاهرين بالمغرب". وتفنيدا لهذه المزاعم المشوبة بالتدليس والتضليل، أوضح مصدر أمني بأن المقاطع والمشاهد المنشورة هي جزء من فيلم تمثيلي لا علاقة  الأمن ينفي مزاعم تعذيب منشورة على حسابات أجنبية     .', 'size': 5}, {'id': '399', 'title': 'كشف خيوط المؤامرة: صفحات جزائرية تستعمل لقطات من فيلم قصير للافتراء على المخابرات', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/228087/', 'summary': 'كشف خيوط المؤامرة: صفحات جزائرية تستعمل لقطات من فيلم قصير للافتراء على المخابرات. نشرت صفحات وحسابات أجنبية على مواقع التواصل الاجتماعي “صورا ومقاطع مبتورة من شريط تمثيلي قصير منشور سابقا على يوتيوب، وقدمتها بشكل تضليلي ومغرض على أنها أعمال عنف وتعذيب منسوبة لموظفي الأمن ضد المتظاهرين بالمغرب”. وتفنيدا لهذه المزاعم المشوبة بالتدليس والتضليل، أوضح مصدر أمني بأن المقاطع والمشاهد المنشورة هي جزء من فيلم تمثيلي لا علاقة لها', 'size': 5}, {'id': '416', 'title': 'السلطات الأمنية تكشف حقيقة مقاطع فيديو مزيفة منسوبة لموظفي الأمن ضد المتظاهرين بالمغرب (صور)', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d8%b3%d9%84%d8%b7%d8%a7%d8%aa-%d8%a7%d9%84%d8%a3%d9%85%d9%86%d9%8a%d8%a9-%d8%aa%d9%83%d8%b4%d9%81-%d8%ad%d9%82%d9%8a%d9%82%d8%a9-%d9%85%d9%82%d8%a7%d8%b7%d8%b9-%d9%81%d9%8a%d8%af%d9%8a/', 'summary': 'السلطات الأمنية تكشف حقيقة مقاطع فيديو مزيفة منسوبة لموظفي الأمن ضد المتظاهرين بالمغرب (صور). نشرت صفحات وحسابات أجنبية على مواقع التواصل الاجتماعي”صورا ومقاطع مبتورة من شريط تمثيلي قصير منشور سابقا على يوتيوب، وقدمتها بشكل تضليلي ومغرض على أنها أعمال عنف وتعذيب منسوبة لموظفي الأمن ضد المتظاهرين بالمغرب”. وتفنيدا لهذه المزاعم المشوبة بالتدليس والتضليل، أوضح مصدر أمني، بأن المقاطع والمشاهد المنشورة هي جزء من فيلم تمثيلي لا علاقة …  السلطات الأمنية تكشف حقيقة مقاطع فيديو مزيفة منسوبة لموظفي الأمن ضد المتظاهرين بالمغرب (صور)     .', 'size': 5}], 'main_title': 'مقاطع مفبركة تروج لـ”تعذيب متظاهرين” في المغرب.. الأمن يكشف الحقيقة'}, {'community_id': '0', 'articles': [{'id': '320', 'title': 'احالة ملف وفيات مستشفى أكادير على القضاء وتوقيف المعنيين مؤقتاً', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/325449/', 'summary': 'احالة ملف وفيات مستشفى أكادير على القضاء وتوقيف المعنيين مؤقتاً. احالة ملف وفيات مستشفى أكادير على القضاء وتوقيف المعنيين مؤقتاً', 'size': 2}, {'id': '345', 'title': 'وزارة الصحة تحيل ملف وفيات مستشفى أكادير على القضاء وتوقف المعنيين احترازيا', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1105783.html', 'summary': 'وزارة الصحة تحيل ملف وفيات مستشفى أكادير على القضاء وتوقف المعنيين احترازيا. أعلنت وزارة الصحة والحماية الاجتماعية، أنها أحالت ملف ظهرت المقالة وزارة الصحة تحيل ملف وفيات مستشفى أكادير على القضاء وتوقف المعنيين احترازيا  .', 'size': 3}, {'id': '378', 'title': 'وزارة الصحة تحيل ملف وفيات مستشفى أكادير على القضاء', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/477691.html', 'summary': 'وزارة الصحة تحيل ملف وفيات مستشفى أكادير على القضاء. أعلنت وزارة الصحة والحماية الاجتماعية أنها استكملت التحقيقات التي باشرتها المفتشية العامة التابعة لها بشأن حالات الوفيات المسجلة بمستشفى عمومي بمدينة أكادير، وقد تم إحالة التقرير المتعلق بهذه القضية على أنظار النيابة العامة المختصة. كما أكدت وزارة الصحة في بلاغ لها أنه تقرر توقيف المعنيين بالأمر احترازياً، إلى حين انتهاء التحقيقات القضائية والإدارية الجارية. وأوضحت …', 'size': 2}, {'id': '392', 'title': 'وزارة الصحة تحيل ملف وفيات مستشفى أكادير على القضاء وتوقف المعنيين مؤقتا', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d9%88%d8%b2%d8%a7%d8%b1%d8%a9-%d8%a7%d9%84%d8%b5%d8%ad%d8%a9-%d8%aa%d8%ad%d9%8a%d9%84-%d9%85%d9%84%d9%81-%d9%88%d9%81%d9%8a%d8%a7%d8%aa-%d9%85%d8%b3%d8%aa%d8%b4%d9%81%d9%89-%d8%a3%d9%83%d8%a7%d8%af/', 'summary': 'وزارة الصحة تحيل ملف وفيات مستشفى أكادير على القضاء وتوقف المعنيين مؤقتا. أعلنت وزارة الصحة والحماية الاجتماعية أنها استكملت التحقيقات التي باشرتها المفتشية العامة التابعة لها بشأن حالات الوفيات المسجلة بمستشفى عمومي بمدينة أكادير.  وزارة الصحة تحيل ملف وفيات مستشفى أكادير على القضاء وتوقف المعنيين مؤقتا     .', 'size': 4}, {'id': '408', 'title': 'بعد استكمال التحقيق.. وزارة الصحة تحيل ملف حالات الوفيات بمستشفى أكادير على النيابة العامة', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%a8%d8%b9%d8%af-%d8%a7%d8%b3%d8%aa%d9%83%d9%85%d8%a7%d9%84-%d8%a7%d9%84%d8%aa%d8%ad%d9%82%d9%8a%d9%82-%d9%88%d8%b2%d8%a7%d8%b1%d8%a9-%d8%a7%d9%84%d8%b5%d8%ad%d8%a9-%d8%aa%d8%ad%d9%8a%d9%84-%d9%85/', 'summary': 'بعد استكمال التحقيق.. وزارة الصحة تحيل ملف حالات الوفيات بمستشفى أكادير على النيابة العامة. المساء قالت وزارة الصحة والحماية الاجتماعية إنها استكملت التحقيقات التي باشرتها المفتشية العامة التابعة لها بشأن حالات الوفيات المسجلة بمستشفى عمومي بمدينة أكادير. وأكدت الوزارة، في بلاغ لها، أنه قد تم إحالة التقرير', 'size': 4}], 'main_title': 'وزارة الصحة تحيل ملف وفيات مستشفى أكادير على القضاء وتوقف المعنيين مؤقتا'}, {'community_id': '8', 'articles': [{'id': '327', 'title': 'موتسيبي: المغرب هو الخطة \u200fA و\u200fB و\u200fC لاستضافة كأس الأمم الإفريقية 2025', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-592606.html', 'summary': 'موتسيبي: المغرب هو الخطة \u200fA و\u200fB و\u200fC لاستضافة كأس الأمم الإفريقية 2025. أكد رئيس الاتحاد الإفريقي لكرة القدم، باتريس موتسيبي، إيمانه بأن المغرب سيحتضن نسخة غير مسبوقة من كأس أمم إفريقيا، لافتا إلى أن جهاز “الكاف” ينخرط بالتنسيق والتعاون مع الحكومة المغربية لتنظيم أفضل دورة في تاريخ مسابقات “الكاف”. ووجه موتسيبي، رسالة واضحة خلال الجمعية \u200fالعامة للإتحاد الإفريقي، اليوم الإثنين، قائلا: “كانت لدي تساؤلات', 'size': 2}, {'id': '414', 'title': 'موتسيبي يصدم أعداء المملكة: المغرب هو الخطة الوحيدة لتنظيم كأس أمم إفريقيا 2025', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d9%85%d9%88%d8%aa%d8%b3%d9%8a%d8%a8%d9%8a-%d9%8a%d8%b5%d8%af%d9%85-%d8%a3%d8%b9%d8%af%d8%a7%d8%a1-%d8%a7%d9%84%d9%85%d9%85%d9%84%d9%83%d8%a9-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d9%87%d9%88-%d8%a7/', 'summary': 'موتسيبي يصدم أعداء المملكة: المغرب هو الخطة الوحيدة لتنظيم كأس أمم إفريقيا 2025. أكد رئيس الاتحاد الإفريقي لكرة القدم (الكاف)، باتريس موتسيبي، اليوم الإثنين 6 أكتوبر 2025، أن المغرب سيظل الخيار الوحيد لتنظيم نهائيات كأس الأمم الإفريقية 2025، نافيا بذلك كل الشائعات. وخلال المؤتمر الصحفي الذي عقده في كينشاسا، عقب اختتام الجمعية العمومية العادية للاتحاد الإفريقي لكرة القدم، والتي انطلقت على الساعة 12:30 بالتوقيت المحلي (11:30 …  موتسيبي يصدم أعداء المملكة: المغرب هو الخطة الوحيدة لتنظيم كأس أمم إفريقيا 2025     .', 'size': 2}], 'main_title': 'موتسيبي: المغرب هو الخطة \u200fA و\u200fB و\u200fC لاستضافة كأس الأمم الإفريقية 2025'}, {'community_id': '12', 'articles': [{'id': '343', 'title': 'الاتحاد الإفريقي يرفع الجوائز.. لقجع: نستهدف مليار دولار في العائدات بحلول السنوات المقبلة', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1105766.html', 'summary': 'الاتحاد الإفريقي يرفع الجوائز.. لقجع: نستهدف مليار دولار في العائدات بحلول السنوات المقبلة. أكد فوزي لقجع، رئيس الجامعة الملكية المغربية لكرة القدم، والنائب الأول لباتريس موتسيبي رئيس الاتحاد الإفريقي، أن الطموح الأكبر داخل “الكاف” يتمثل في مواصلة تطوير كرة القدم الإفريقية عبر تعزيز البرامج التنموية وتوفير أفضل الظروف للمواهب الصاعدة في القارة. وأوضح لقجع، اليوم الاثنين خلال كلمته في الجمع العام للاتحاد الإفريقي لكرة القدم بالعاصمة الكونغولية كينشاسا، ظهرت المقالة الاتحاد الإفريقي يرفع الجوائز.. لقجع: نستهدف مليار دولار في العائدات بحلول السنوات المقبلة  .', 'size': 2}, {'id': '364', 'title': 'بالأرقام.. لقجع يحقق تطورا ماليا مهما للإتحاد الأفريقي لكرة القدم', 'source': 'rue20.com', 'link': 'https://rue20.com/942697.html', 'summary': 'بالأرقام.. لقجع يحقق تطورا ماليا مهما للإتحاد الأفريقي لكرة القدم.  . الرباط أعلن فوزي لقجع، النائب الأول لرئيس الاتحاد الإفريقي لكرة القدم ورئيس لجنة المالية، خلال أشغال الجمعية العامة العادية الـ47 المنعقدة في كينشاسا، أن إيرادات الكاف ارتفعت من 109 ملايين دولار إلى 166 مليون دولار خلال السنة المالية 2023-2024. وأوضح لقجع أن عوائد المسابقات القارية تضاعفت تقريباً، حيث انتقلت من 75 مليون الخبر بالأرقام.. لقجع يحقق تطورا ماليا مهما للإتحاد الأفريقي لكرة القدم  .', 'size': 2}], 'main_title': 'الاتحاد الإفريقي يرفع الجوائز.. لقجع: نستهدف مليار دولار في العائدات بحلول السنوات المقبلة'}, {'community_id': '9', 'articles': [{'id': '346', 'title': 'العثور على الراعي المختفي بورزازات حيا يرزق ومروحية الدرك تنقله إلى المستشفى', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1105781.html', 'summary': 'العثور على الراعي المختفي بورزازات حيا يرزق ومروحية الدرك تنقله إلى المستشفى. تمكن متطوعون، اليوم الإثنين، من العثور على الراعي الستيني الحسين الشاذلي حيا يرزق، بمنطقة أنفركال التابعة إداريا لجماعة تلوات بإقليم ورزازات، وذلك بعد ثلاثة أيام من البحث المتواصل الذي انخرطت فيه ساكنة المنطقة إلى جانب السلطات المحلية والدرك الملكي. وحسب مصادر محلية لجريدة “العمق المغربي”، فقد جرى نقل الراعي الذي عثر عليه وسط تضاريس جبلية ظهرت المقالة العثور على الراعي المختفي بورزازات حيا يرزق ومروحية الدرك تنقله إلى المستشفى  .', 'size': 2}, {'id': '355', 'title': 'العثور على الراعي المفقود بورزازات حيا بعد ثلاثة أيام من البحث بجبال تلوات', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a7%d9%84%d8%b9%d8%ab%d9%88%d8%b1-%d8%b9%d9%84%d9%89-%d8%a7%d9%84%d8%b1%d8%a7%d8%b9%d9%8a-%d8%a7%d9%84%d9%85%d9%81%d9%82%d9%88%d8%af-%d8%a8%d9%88%d8%b1%d8%b2%d8%a7%d8%b2%d8%a7%d8%aa-%d8%ad%d9%8a/', 'summary': 'العثور على الراعي المفقود بورزازات حيا بعد ثلاثة أيام من البحث بجبال تلوات. في نهاية سباق مع الزمن، تكللت جهود فرق الإنقاذ بالنجاح صباح اليوم، بعدما تمكنت من العثور على الراعي الحسين الشاذلي حيًّا بين مرتفعات تلوات، وذلك عقب اختفائه لما يقارب ثلاثة أيام وسط ظروف مناخية وجغرافية صعبة. وجرى نقل الراعي على متن مروحية تابعة للدرك الملكي نحو المستشفى الإقليمي سيدي حساين بناصر بمدينة ورزازات، حيث يخضع  العثور على الراعي المفقود بورزازات حيا بعد ثلاثة أيام من البحث بجبال تلوات     .', 'size': 2}], 'main_title': 'العثور على الراعي المختفي بورزازات حيا يرزق ومروحية الدرك تنقله إلى المستشفى'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    