<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 10/07/2025 - 12h24</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '11', 'title': 'حمدون ينضم إلى ريال بيتيس إشبيلية', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d8%ad%d9%85%d8%af%d9%88%d9%86-%d9%8a%d9%86%d8%b6%d9%85-%d8%a5%d9%84%d9%89-%d8%b1%d9%8a%d8%a7%d9%84-%d8%a8%d9%8a%d8%aa%d9%8a%d8%b3-%d8%a5%d8%b4%d8%a8%d9%8a%d9%84%d9%8a%d8%a9-1590136.html', 'summary': 'حمدون ينضم إلى ريال بيتيس إشبيلية. أعلن نادي ريال بيتيس الإسباني لكرة القدم، أمس الأربعاء، عن تعاقده مع المدافع المغربي محمد ياسين حمدون حتى عام 2029. وقال النادي الإسباني، الذي سيشارك في النسخة المقبلة من الدوري الأوروبي، “محمد حمدون يعد أول تعزيز لفريق ريال بيتيس ديبورتيفو استعدادا لموسم 2025-2026”. وتلقى اللاعب، البالغ 21 عاما، تكوينه في أكاديمية محمد السادس لكرة القدم،  حمدون ينضم إلى ريال بيتيس إشبيلية     - هسبريس جريدة إلكترونية مغربية .', 'size': 2}, {'id': '191', 'title': 'المدافع المغربي محمد حمدون ينضم إلى ريال بيتيس إشبيلية', 'source': 'rue20.com', 'link': 'https://rue20.com/919115.html', 'summary': 'المدافع المغربي محمد حمدون ينضم إلى ريال بيتيس إشبيلية. . مالقة أعلن نادي ريال بيتيس الإسباني، اليوم الأربعاء، عن تعاقده مع المدافع المغربي محمد ياسين حمدون حتى عام 2029. وقال النادي الإسباني، الذي سيشارك في النسخة المقبلة من الدوري الأوروبي: “محمد حمدون ي عد أول تعزيز لفريق ريال بيتيس ديبورتيفو استعدادا لموسم 2025-2026”. وتلقى اللاعب، البالغ من العمر 21 عاما، تكوينه في أكاديمية الخبر المدافع المغربي محمد حمدون ينضم إلى ريال بيتيس إشبيلية  .', 'size': 2}], 'main_title': 'حمدون ينضم إلى ريال بيتيس إشبيلية'}, {'community_id': '1', 'articles': [{'id': '68', 'title': 'في إطار تحديث البنية الأمنية.. تعيينات جديدة بالخميسات', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/203206', 'summary': 'في إطار تحديث البنية الأمنية.. تعيينات جديدة بالخميسات. الاحداث/محمد طويل أعلنت، المديرية العامة للأمن الوطني، اليوم الأربعاء، عن قائمة جديدة تتضمن عددا من التعيينات في مناصب المسؤولية بالمصالح اللاممركزة للأمن الوطني، بمدن وجدة والخميسات والرشيدية والرباط، وتويسيت بوبكر ومراكش وويسلان والدار البيضاء. وشملت، التعيينات الجديدة، التي أشر عليها المدير العام للأمن الوطني عبد اللطيف حموشي تعيين كل من رشيد ناصيري رئيساً للدائرة الأمنية', 'size': 2}, {'id': '163', 'title': 'حموشي يؤشر على تعيينات أمنية جديدة في 8 مدن', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1084346.html', 'summary': 'حموشي يؤشر على تعيينات أمنية جديدة في 8 مدن. بكل من وجدة، والخميسات، والرشيدية، والرباط، وتويسيت بوبكر، ومراكش، وويسلان، والدار البيضاء، ظهرت المقالة حموشي يؤشر على تعيينات أمنية جديدة في 8 مدن  .', 'size': 3}, {'id': '176', 'title': '11 تعيينا جديدا لمسؤولين أمنيين بينها نائب لوالي أمن وجدة', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/11-%d8%aa%d8%b9%d9%8a%d9%8a%d9%86%d8%a7-%d8%ac%d8%af%d9%8a%d8%af%d8%a7-%d9%84%d9%85%d8%b3%d8%a4%d9%88%d9%84%d9%8a%d9%86-%d8%a3%d9%85%d9%86%d9%8a%d9%8a%d9%86-%d8%a8%d9%8a%d9%86%d9%87%d8%a7-%d9%86%d8%a7/', 'summary': '11 تعيينا جديدا لمسؤولين أمنيين بينها نائب لوالي أمن وجدة. تعيينات جديدة في مناصب المسؤولية بمصالح الأمن الوطني أعلنت المديرية العامة للأمن الوطني، الأربعاء، عن قائمة جديدة تتضمن عددا من التعيينات في مناصب المسؤولية بالمصالح اللاممركزة للأمن الوطني بمدن وجدة والخميسات والرشيدية والرباط وتويسيت بوبكر ومراكش وويسلان والدار البيضاء. تأتي هذه التعيينات بحسب مصدر أمني، "مواصلة لمسار تنزيل استراتيجية ترسيخ التداول على مناصب المسؤولية وفتح  11 تعيينا جديدا لمسؤولين أمنيين بينها نائب لوالي أمن وجدة     .', 'size': 3}, {'id': '208', 'title': 'حموشي يؤشر على 11 منصبا جديدا للمسؤولية في ثماني مدن مغربية', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/224397/', 'summary': 'حموشي يؤشر على 11 منصبا جديدا للمسؤولية في ثماني مدن مغربية. مواصلة لمسار تنزيل استراتيجية ترسيخ التداول على مناصب المسؤولية وفتح الباب أمام الكفاءات المتمرسة والشابة لتحمل مسؤولية التسيير الأمني، أعلنت المديرية العامة للأمن الوطني، زوال اليوم الأربعاء 9 يوليوز الجاري، عن قائمة جديدة تتضمن عددا من التعيينات في مناصب المسؤولية بالمصالح اللاممركزة للأمن الوطني بمدن وجدة والخميسات والرشيدية والرباط وتويسيت بوبكر ومراكش وويسلان والدار البيضاء.', 'size': 5}, {'id': '225', 'title': 'حموشي يؤشر على تعيينات جديدة في مناصب المسؤولية بمصالح الأمن الوطني', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%ad%d9%85%d9%88%d8%b4%d9%8a-%d9%8a%d8%a4%d8%b4%d8%b1-%d8%b9%d9%84%d9%89-%d8%aa%d8%b9%d9%8a%d9%8a%d9%86%d8%a7%d8%aa-%d8%ac%d8%af%d9%8a%d8%af%d8%a9-%d9%81%d9%8a-%d9%85%d9%86%d8%a7%d8%b5%d8%a8-30/', 'summary': 'حموشي يؤشر على تعيينات جديدة في مناصب المسؤولية بمصالح الأمن الوطني. أعلنت المديرية العامة للأمن الوطني، زوال اليوم الأربعاء 9 يوليوز الجاري، عن قائمة جديدة تتضمن عددا من التعيينات في مناصب المسؤولية بالمصالح اللاممركزة للأمن الوطني بمدن وجدة والخميسات والرشيدية والرباط وتويسيت بوبكر ومراكش وويسلان والدار البيضاء، وذلك مواصلة المسار تنزيل استراتيجية ترسيخ التداول على مناصب المسؤولية وفتح الباب أمام الكفاءات المتمرسة والشابة لتحمل …  حموشي يؤشر على تعيينات جديدة في مناصب المسؤولية بمصالح الأمن الوطني     .', 'size': 4}], 'main_title': 'حموشي يؤشر على 11 منصبا جديدا للمسؤولية في ثماني مدن مغربية'}, {'community_id': '2', 'articles': [{'id': '106', 'title': 'دعم عالمي غير مشروط لمغربية الصحراء: 123 دولة تعزز موقف المغرب', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/politic/409010.html', 'summary': 'دعم عالمي غير مشروط لمغربية الصحراء: 123 دولة تعزز موقف المغرب. تتواصل الدينامية الدولية الداعمة لمغربية الصحراء ولمبادرة الحكم الذاتي، التي يقودها صاحب الجلالة الملك محمد السادس، نصره الله، منذ سنوات، مجسدة بذلك توافق المجتمع الدولي', 'size': 2}, {'id': '148', 'title': 'توافق دولي لا رجعة فيه حول مغربية الصحراء', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/317857/', 'summary': 'توافق دولي لا رجعة فيه حول مغربية الصحراء. تتواصل الدينامية الدولية الداعمة لمغربية الصحراء ولمبادرة الحكم الذاتي، التي يقودها صاحب الجلالة الملك محمد السادس، نصره الله، منذ سنوات، مجسدة بذلك توافق المجتمع الدولي من أجل الطي النهائي لهذا النزاع الإقليمي، في إطار السيادة الوطنية والوحدة الترابية للمملكة. ومنذ أبريل 2025، شهدت هذه الدينامية الدولية تطورات كبرى جديدة، تتسم بتوسع دائرة دعم مغربية الصحراء', 'size': 3}, {'id': '199', 'title': 'توافق دولي لا رجعة فيه حول مغربية الصحراء ودعم ثابت لمبادرة الحكم الذاتي', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/469022.html', 'summary': 'توافق دولي لا رجعة فيه حول مغربية الصحراء ودعم ثابت لمبادرة الحكم الذاتي. و.م.ع تتواصل الدينامية الدولية الداعمة لمغربية الصحراء ولمبادرة الحكم الذاتي، التي يقودها الملك محمد السادس، منذ سنوات، مجسدة بذلك توافق المجتمع الدولي من أجل الطي النهائي لهذا النزاع الإقليمي، في إطار السيادة الوطنية والوحدة الترابية للمملكة. ومنذ أبريل 2025، شهدت هذه الدينامية الدولية تطورات كبرى جديدة، تتسم بتوسع دائرة دعم مغربية الصحراء والمبادرة المغربية للحكم …', 'size': 2}], 'main_title': 'توافق دولي لا رجعة فيه حول مغربية الصحراء'}, {'community_id': '3', 'articles': [{'id': '117', 'title': 'رئيس الحكومة يترأس اجتماعا للجنة قيادة البرنامج الوطني للتزويد بالماء الشروب ومياه \u200fالسقي 2020-2027', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/409021.html', 'summary': 'رئيس الحكومة يترأس اجتماعا للجنة قيادة البرنامج الوطني للتزويد بالماء الشروب ومياه \u200fالسقي 2020-2027. ترأس رئيس الحكومة عزيز أخنوش، يوم الأربعاء 9 يوليوز 2025 بالرباط، اجتماعا للجنة \u200fقيادة البرنامج الوطني للتزويد بالماء الشروب ومياه \u200fالسقي 2020-2027\u200f\u200e، يندرج في سياق', 'size': 3}, {'id': '174', 'title': 'اجتماع حكومي يرصد بـ"قلق" وضعية المياه رغم تحسن مخزون السدود', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a7%d8%ac%d8%aa%d9%85%d8%a7%d8%b9-%d8%ad%d9%83%d9%88%d9%85%d9%8a-%d9%8a%d8%b1%d8%b5%d8%af-%d8%a8%d9%80%d9%82%d9%84%d9%82-%d9%88%d8%b6%d8%b9%d9%8a%d8%a9-%d8%a7%d9%84%d9%85%d9%8a%d8%a7%d9%87/', 'summary': 'اجتماع حكومي يرصد بـ"قلق" وضعية المياه رغم تحسن مخزون السدود. ترأس رئيس الحكومة، عزيز أخنوش، الأربعاء بالرباط، اجتماعاً للجنة قيادة البرنامج الوطني للتزويد بالماء الشروب ومياه السقي 2020-2027، خصص لتتبع تطورات هذا الملف الاستراتيجي، في ظل التحديات المتزايدة المرتبطة بندرة المياه. وسجل الاجتماع، وفق بلاغ صادر عن رئاسة الحكومة، أن مخزون السدود بلغ إلى غاية 7 يوليوز الجاري حوالي 4.3 مليار متر مكعب، ما يعادل  اجتماع حكومي يرصد بـ"قلق" وضعية المياه رغم تحسن مخزون السدود     .', 'size': 3}, {'id': '205', 'title': 'أخنوش يترأس اجتماعا للجنة قيادة البرنامج الوطني للتزويد بالماء الشروب ومياه \u200fالسقي', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/224405/', 'summary': 'أخنوش يترأس اجتماعا للجنة قيادة البرنامج الوطني للتزويد بالماء الشروب ومياه \u200fالسقي. كواليس اليوم ترأس رئيس الحكومة عزيز أخنوش، يوم الأربعاء 9 يوليوز 2025 بالرباط، اجتماعا للجنة \u200fقيادة البرنامج الوطني للتزويد بالماء الشروب ومياه \u200fالسقي 2020-2027\u200f\u200e، يندرج في سياق التتبع المستمر لهذا الموضوع الاستراتيجي، حيث تم الوقوف على تقدم تنزيل محاور البرنامج والإجراءات الاستعجالية التي تم اتخاذها لضمان التزويد بالماء الشروب، وتخفيف العجز في احتياجات مياه', 'size': 4}, {'id': '344', 'title': 'أخنوش يترأس اجتماع لجنة قيادة البرنامج الوطني للماء ويؤكد على ضرورة التناغم بين السياسة المائية والفلاحية', 'source': 'rue20.com', 'link': 'https://rue20.com/919184.html', 'summary': 'أخنوش يترأس اجتماع لجنة قيادة البرنامج الوطني للماء ويؤكد على ضرورة التناغم بين السياسة المائية والفلاحية.  الرباط ترأس رئيس الحكومة عزيز أخنوش، يوم الأربعاء 9 يوليوز 2025 بالرباط، اجتماعا للجنة \u200fقيادة البرنامج الوطني للتزويد بالماء الشروب ومياه \u200fالسقي 2020-2027\u200f\u200e، يندرج في سياق التتبع المستمر لهذا الموضوع الاستراتيجي، حيث تم الوقوف على تقدم تنزيل محاور البرنامج والإجراءات الاستعجالية التي تم اتخاذها لضمان التزويد بالماء الشروب، وتخفيف العجز في احتياجات مياه السقي، الخبر أخنوش يترأس اجتماع لجنة قيادة البرنامج الوطني للماء ويؤكد على ضرورة التناغم بين السياسة المائية والفلاحية  .', 'size': 2}], 'main_title': 'أخنوش يترأس اجتماعا للجنة قيادة البرنامج الوطني للتزويد بالماء الشروب ومياه \u200fالسقي'}, {'community_id': '4', 'articles': [{'id': '143', 'title': 'كأس إفريقيا للسيدات.. لبؤات الأطلس يكتسحن الكونغو برباعية', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/317875/', 'summary': 'كأس إفريقيا للسيدات.. لبؤات الأطلس يكتسحن الكونغو برباعية. تمكن المنتخب المغربي للسيدات من تحقيق فوز مهم وثمين على نظيره منتخب الكونغو الديمقراطية بنتيجة 4-2 في مباراة مثيرة ومليئة بالتقلبات، جمعتهما مساء اليوم الأربعاء في إطار الجولة الثانية من دور المجموعات في كأس أمم إفريقيا، التي تقام على الأراضي المغربية. وانطلقت المباراة بمفاجأة من الكونغو الديمقراطية، حيث سجلت اللاعبة ميغفيي كانجينغا هدفًا مبكرًا في', 'size': 2}, {'id': '203', 'title': 'كأس إفريقيا للسيدات..لبؤات الأطلس يفزن برباعية على حساب الكونغو', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/224411/', 'summary': 'كأس إفريقيا للسيدات..لبؤات الأطلس يفزن برباعية على حساب الكونغو. كواليس اليوم تمكن المنتخب المغربي النسوي من تحقيق فوز مهم على حساب منتخب الكونغو الديمقراطية ببأربعة أهداف مقابل هدفين ، في مباراة جمعتهما اليوم الاربعاء 9 يوليوز 2025 ، في إطار مباريات الجولة الثانية من دور مجموعات كأس أمم إفريقيا المقامة حاليا في المغرب. وافتتح الكونغوليات التسجيل مبكراً في الدقيقة الـ 6، لكن رد لبؤات', 'size': 2}], 'main_title': 'كأس إفريقيا للسيدات.. لبؤات الأطلس يكتسحن الكونغو برباعية'}, {'community_id': '5', 'articles': [{'id': '146', 'title': 'تهريب المخدرات.. أمن مراكش يوقف فرنسيا من أصول جزائرية', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/317866/', 'summary': 'تهريب المخدرات.. أمن مراكش يوقف فرنسيا من أصول جزائرية. تمكنت عناصر الشرطة بولاية أمن مراكش، يوم أمس الثلاثاء 8 يوليوز الجاري، من توقيف مواطن فرنسي من أصول جزائرية يبلغ من العمر 44 سنة، يشكل موضوع أمر دولي بإلقاء القبض صادر عن السلطات القضائية الفرنسية. وقد تم توقيف المشتبه فيه بعدما كشفت عملية تنقيطه بقاعدة بيانات المنظمة الدولية للشرطة الجنائية “انتربول”، أنه مبحوث عنه على', 'size': 2}, {'id': '209', 'title': 'توقيف فرنسي من أصول جزائرية موضوع أمر دولي بإلقاء القبض صادر عن السلطات القضائية الفرنسية', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/224395/', 'summary': 'توقيف فرنسي من أصول جزائرية موضوع أمر دولي بإلقاء القبض صادر عن السلطات القضائية الفرنسية. تمكنت عناصر الشرطة بولاية أمن مراكش، يوم أمس الثلاثاء 8 يوليوز الجاري، من توقيف مواطن فرنسي من أصول جزائرية يبلغ من العمر 44 سنة، يشكل موضوع أمر دولي بإلقاء القبض صادر عن السلطات القضائية الفرنسية. وقد تم توقيف المشتبه فيه بعدما كشفت عملية تنقيطه بقاعدة بيانات المنظمة الدولية للشرطة الجنائية “انتربول”، أنه مبحوث عنه على', 'size': 2}], 'main_title': 'تهريب المخدرات.. أمن مراكش يوقف فرنسيا من أصول جزائرية'}, {'community_id': '9', 'articles': [{'id': '172', 'title': 'حكيمي يتأهل لنهائي كأس العالم للأندية بعد فوز باريس سان جيرمان أمام ريال مدريد', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%ad%d9%83%d9%8a%d9%85%d9%8a-%d9%8a%d8%aa%d8%a3%d9%87%d9%84-%d9%84%d9%86%d9%87%d8%a7%d8%a6%d9%8a-%d9%83%d8%a3%d8%b3-%d8%a7%d9%84%d8%b9%d8%a7%d9%84%d9%85-%d9%84%d9%84%d8%a3%d9%86%d8%af%d9%8a%d8%a9/', 'summary': 'حكيمي يتأهل لنهائي كأس العالم للأندية بعد فوز باريس سان جيرمان أمام ريال مدريد. تمكن نادي باريس سان جيرمان من الفوز أمام ريال مدريد بنتيجة أربعة أهداف دون مقابل، لحساب نصف نهائي كأس العالم للأندية المقامة بالولايات المتحدة الأمريكية. وتأهل باريس سان جيرمان بعد فوزه في المباراة التي أقيمت على ملعب ميتلايف في نيوجيرسي، بعدما تعاقب على تسجيل الأهداف اللاعب فابيان رويز في الدقيقة السادسة، فيما أضاف الهدف الثاني  حكيمي يتأهل لنهائي كأس العالم للأندية بعد فوز باريس سان جيرمان أمام ريال مدريد     .', 'size': 2}, {'id': '345', 'title': 'حكيمي يتعملق مع PSG ليطيح بفريقه السابق ريال مدريد برباعية نظيفة', 'source': 'rue20.com', 'link': 'https://rue20.com/919200.html', 'summary': 'حكيمي يتعملق مع PSG ليطيح بفريقه السابق ريال مدريد برباعية نظيفة. . الرباط تأهل باريس سان جيرمان الفرنسي لنهائي بطولة كأس العالم للأندية لكرة القدم للمرة الأولى في تاريخه، بعد فوزه على ريال مدريد الإسباني حامل اللقب بأربعة أهداف نظيفة، أمس الأربعاء، في نصف نهائي البطولة المقامة بالولايات المتحدة الأمريكية. وسجل رباعية نادي العاصمة الفرنسية كل من، فابيان رويس هدفين في الدقيقتين 6 و24، وعثمان الخبر حكيمي يتعملق مع PSG ليطيح بفريقه السابق ريال مدريد برباعية نظيفة  .', 'size': 2}], 'main_title': 'حكيمي يتأهل لنهائي كأس العالم للأندية بعد فوز باريس سان جيرمان أمام ريال مدريد'}, {'community_id': '6', 'articles': [{'id': '210', 'title': 'بتعليمات ملكية.. المغرب يعيد فتح سفارته في دمشق', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/224389/', 'summary': 'بتعليمات ملكية.. المغرب يعيد فتح سفارته في دمشق. و م ع تنفيذا للتعليمات السامية لصاحب الجلالة الملك محمد السادس، نصره الله، تم يوم الأحد الماضي، إعادة فتح سفارة المملكة المغربية بدمشق واستئناف العمل بمختلف مصالحها الإدارية بكامل جاهزيتها وبكل أطقمها الإدارية. وكان صاحب الجلالة الملك محمد السادس قد أعلن في الخطاب الذي وجهه إلى القمة الرابعة والثلاثين لجامعة الدول العربية، التي انعقدت', 'size': 2}, {'id': '360', 'title': 'المغرب يعيد فتح سفارته في دمشق', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d9%8a%d8%b9%d9%8a%d8%af-%d9%81%d8%aa%d8%ad-%d8%b3%d9%81%d8%a7%d8%b1%d8%aa%d9%87-%d9%81%d9%8a-%d8%af%d9%85%d8%b4%d9%82/', 'summary': 'المغرب يعيد فتح سفارته في دمشق. المساء اليوم: أعاد المغرب فتح سفارته بالعاصمة السورية دمشق، واستئناف العمل بمختلف مصالحها الإدارية بكامل جاهزيتها وبكل أطقمها الإدارية. وكان الملك محمد السادس قد أعلن في الخطاب الذي وجهه إلى القمة الرابعة والثلاثين لجامعة الدول', 'size': 2}], 'main_title': 'بتعليمات ملكية.. المغرب يعيد فتح سفارته في دمشق'}, {'community_id': '8', 'articles': [{'id': '217', 'title': 'تقرير: المغرب يسرّع وتيرة مواجهة الجفاف.. من قيود الاستهلاك إلى حلول الابتكار', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%aa%d9%82%d8%b1%d9%8a%d8%b1-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d9%8a%d8%b3%d8%b1%d9%91%d8%b9-%d9%88%d8%aa%d9%8a%d8%b1%d8%a9-%d9%85%d9%88%d8%a7%d8%ac%d9%87%d8%a9-%d8%a7%d9%84%d8%ac%d9%81%d8%a7/', 'summary': 'تقرير: المغرب يسرّع وتيرة مواجهة الجفاف.. من قيود الاستهلاك إلى حلول الابتكار. يجد المغرب نفسه أمام تحدٍ مصيري خلال السنوات المقبلة، ففي أعقاب ست سنوات متوالية من الجفاف المستفحل وارتفاع درجات الحرارة لمستويات قياسية، باتت المملكة تكابد أزمة مائية لم يسبق لها مثيل، تهدد أركان استقرارها البيئي والاقتصادي والاجتماعي، وتؤكد المعطيات الحديثة هذه الصورة القاتمة، مسجلة عجزا مائيا بلغ 57% بحلول يناير 2024، مع تنبؤات …  تقرير: المغرب يسرّع وتيرة مواجهة الجفاف.. من قيود الاستهلاك إلى حلول الابتكار     .', 'size': 2}, {'id': '329', 'title': 'الباعة الجائلون في المغرب.. اقتصاد الظل بين واقع الحاجة ورهانات الإدماج', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1084117.html', 'summary': 'الباعة الجائلون في المغرب.. اقتصاد الظل بين واقع الحاجة ورهانات الإدماج. تكتظ الأرصفة والأزقة في معظم المدن المغربية بعربات البيع، حيث يتخذ مئات الآلاف من الباعة الجائلين من الفضاء العام ملاذا لتأمين معاشهم اليومي. ويعكس هذا المشهد المتنامي تحولات اقتصادية واجتماعية عميقة، ويطرح في الوقت ذاته تساؤلات حقيقية حول مدى قدرة السياسات العمومية على استيعاب هذه الشريحة الواسعة ضمن منظومة الاقتصاد المهيكل. وقد تنامت هذه الظاهرة ظهرت المقالة الباعة الجائلون في المغرب.. اقتصاد الظل بين واقع الحاجة ورهانات الإدماج  .', 'size': 2}], 'main_title': 'تقرير: المغرب يسرّع وتيرة مواجهة الجفاف.. من قيود الاستهلاك إلى حلول الابتكار'}, {'community_id': '7', 'articles': [{'id': '325', 'title': 'طقس الخميس…أجواء حارة بعدد من المناطق', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/317885/', 'summary': 'طقس الخميس…أجواء حارة بعدد من المناطق. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الخميس، أن يبقى الطقس حارا نسبيا إلى حار محليا داخل الأقاليم الجنوبية، والجنوب الشرقي للبلاد، والمناطق المجاورة لمرتفعات الأطلس والمنطقة الشرقية. كما يرتقب نزول قطرات مطرية أو زخات رعدية محلية مع هبات واحتمال برد بمرتفعات الأطلس الكبير والمتوسط، والسفوح الجنوبية الشرقية، والريف، والمنطقة الشرقية. ويتوقع كذلك نزول أمطار', 'size': 3}, {'id': '336', 'title': 'طقس حار مع زخات رعدية متوقع اليوم الخميس', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%b7%d9%82%d8%b3-%d8%ad%d8%a7%d8%b1-%d9%85%d8%b9-%d8%b2%d8%ae%d8%a7%d8%aa-%d8%b1%d8%b9%d8%af%d9%8a%d8%a9-%d9%85%d8%aa%d9%88%d9%82%d8%b9-%d8%a7%d9%84%d9%8a%d9%88%d9%85-%d8%a7%d9%84%d8%ae%d9%85%d9%8a/', 'summary': 'طقس حار مع زخات رعدية متوقع اليوم الخميس. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الخميس، أن يبقى الطقس حارا نسبيا إلى حار محليا داخل الأقاليم الجنوبية، والجنوب الشرقي للبلاد، والمناطق المجاورة لمرتفعات الأطلس والمنطقة الشرقية. كما يرتقب نزول قطرات مطرية أو زخات رعدية محلية مع هبات واحتمال برد بمرتفعات الأطلس الكبير والمتوسط، والسفوح الجنوبية الشرقية، والريف، والمنطقة الشرقية. ويتوقع كذلك نزول أمطار  طقس حار مع زخات رعدية متوقع اليوم الخميس     .', 'size': 3}, {'id': '357', 'title': 'طقس الخميس.. حار نسبيا مع نزول قطرات مطرية في بعض المناطق', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/224418/', 'summary': 'طقس الخميس.. حار نسبيا مع نزول قطرات مطرية في بعض المناطق. كواليس اليوم تتوقع المديرية العامة للأرصاد الجوية، اليوم الخميس، أن يبقى الطقس حارا نسبيا إلى حار محليا داخل الأقاليم الجنوبية، والجنوب الشرقي للبلاد، والمناطق المجاورة لمرتفعات الأطلس والمنطقة الشرقية. كما يرتقب نزول قطرات مطرية أو زخات رعدية محلية مع هبات واحتمال برد بمرتفعات الأطلس الكبير والمتوسط، والسفوح الجنوبية الشرقية، والريف، والمنطقة الشرقية. ويتوقع كذلك', 'size': 3}], 'main_title': 'طقس الخميس…أجواء حارة بعدد من المناطق'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    