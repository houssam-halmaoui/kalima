<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 19/09/2025 - 06h16</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '11', 'articles': [{'id': '0', 'title': 'لقجع يستقبل رئيس الاتحاد البرتغالي', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d9%84%d9%82%d8%ac%d8%b9-%d9%8a%d8%b3%d8%aa%d9%82%d8%a8%d9%84-%d8%b1%d8%a6%d9%8a%d8%b3-%d8%a7%d9%84%d8%a7%d8%aa%d8%ad%d8%a7%d8%af-%d8%a7%d9%84%d8%a8%d8%b1%d8%aa%d8%ba%d8%a7%d9%84%d9%8a-1626141.html', 'summary': 'لقجع يستقبل رئيس الاتحاد البرتغالي. استقبل فوزي لقجع، رئيس الجامعة الملكية المغربية لكرة القدم، نظيره رئيس الاتحاد البرتغالي لكرة القدم، بيدرو بروينسا، وذلك في إطار التنسيق المشترك بين المغرب والبرتغال وإسبانيا لتنظيم نهائيات كأس العالم 2030. وخلال هذا اللقاء، الذي يندرج ضمن الدينامية المتواصلة بين الدول الثلاث المنظمة، عبّر بروينسا عن شكره وتقديره للجامعة الملكية المغربية لكرة القدم على حفاوة  لقجع يستقبل رئيس الاتحاد البرتغالي     - هسبريس جريدة إلكترونية مغربية .', 'size': 2}, {'id': '374', 'title': 'المغرب والبرتغال يتبادلان وجهات النظر حول عدد من المواضيع المتعلقة بمونديال 2030', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/323770/', 'summary': 'المغرب والبرتغال يتبادلان وجهات النظر حول عدد من المواضيع المتعلقة بمونديال 2030. استقبل رئيس الجامعة الملكية المغربية لكرة القدم، فوزي لقجع، اليوم الخميس، رئيس الاتحاد البرتغالي لكرة القدم ،بيدرو بروينسا، وتبادل معه وجهات النظر حول عدد من المواضيع المتعلقة بمونديال 2030. وأفاد بلاغ للجامعة الملكية المغربية لكرة القدم بأنه خلال هذا اللقاء الذي جمع الشريكين في تنظيم كأس العالم 2030، بالإضافة إلى إسبانيا، “تبادل الطرفان وجهات النظر', 'size': 5}, {'id': '415', 'title': 'المغرب والبرتغال يتبادلان وجهات النظر حول المواضيع المتعلقة بمونديال 2030', 'source': 'machahid24.com', 'link': 'https://machahid24.com/sport/476028.html', 'summary': 'المغرب والبرتغال يتبادلان وجهات النظر حول المواضيع المتعلقة بمونديال 2030. استقبل رئيس الجامعة الملكية المغربية لكرة القدم، فوزي لقجع، الخميس، رئيس الاتحاد البرتغالي لكرة القدم، بيدرو بروينسا، وتبادل معه وجهات النظر حول عدد من المواضيع المتعلقة بمونديال 2030. وأفاد بلاغ للجامعة الملكية المغربية لكرة القدم بأنه خلال هذا اللقاء الذي جمع الشريكين في تنظيم كأس العالم 2030، بالإضافة إلى إسبانيا، “تبادل الطرفان وجهات النظر حول …', 'size': 4}, {'id': '441', 'title': 'كرة القدم.. المغرب والبرتغال يتبادلان وجهات النظر حول عدد من المواضيع المتعلقة بمونديال 2030 (بلاغ)', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/227272/', 'summary': 'كرة القدم.. المغرب والبرتغال يتبادلان وجهات النظر حول عدد من المواضيع المتعلقة بمونديال 2030 (بلاغ). الرباط – استقبل رئيس الجامعة الملكية المغربية لكرة القدم، فوزي لقجع، اليوم الخميس، رئيس الاتحاد البرتغالي لكرة القدم ،بيدرو بروينسا، وتبادل معه وجهات النظر حول عدد من المواضيع المتعلقة بمونديال 2030. وأفاد بلاغ للجامعة الملكية المغربية لكرة القدم بأنه خلال هذا اللقاء الذي جمع الشريكين في تنظيم كأس العالم 2030، بالإضافة إلى إسبانيا، “تبادل الطرفان', 'size': 3}, {'id': '454', 'title': 'فوزي لقجع يستقبل رئيس الاتحاد البرتغالي لمناقشة ترتيبات مونديال 2030', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d9%81%d9%88%d8%b2%d9%8a-%d9%84%d9%82%d8%ac%d8%b9-%d9%8a%d8%b3%d8%aa%d9%82%d8%a8%d9%84-%d8%b1%d8%a6%d9%8a%d8%b3-%d8%a7%d9%84%d8%a7%d8%aa%d8%ad%d8%a7%d8%af-%d8%a7%d9%84%d8%a8%d8%b1%d8%aa%d8%ba%d8%a7/', 'summary': 'فوزي لقجع يستقبل رئيس الاتحاد البرتغالي لمناقشة ترتيبات مونديال 2030. استقبل رئيس الجامعة الملكية المغربية لكرة القدم، فوزي لقجع، اليوم الخميس 18 شتنبر 2025، رئيس الاتحاد البرتغالي لكرة القدم، بيدرو بروينسا، وتبادل معه وجهات النظر حول عدد من المواضيع المتعلقة بمونديال 2030. وأكد بلاغ للجامعة الملكية المغربية لكرة القدم، بأنه خلال هذا اللقاء الذي جمع الشريكين في تنظيم كأس العالم 2030، بالإضافة إلى …  فوزي لقجع يستقبل رئيس الاتحاد البرتغالي لمناقشة ترتيبات مونديال 2030     .', 'size': 3}], 'main_title': 'المغرب والبرتغال يتبادلان وجهات النظر حول عدد من المواضيع المتعلقة بمونديال 2030'}, {'community_id': '2', 'articles': [{'id': '48', 'title': 'نشرة إنذارية: زخات رعدية قوية مصحوبة بهبات رياح بهذه المناطق', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-658282.html', 'summary': 'نشرة إنذارية: زخات رعدية قوية مصحوبة بهبات رياح بهذه المناطق. هبة بريس أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب تسجيل زخات رعدية محليا قوية (من 20 إلى 30 ملم) مصحوبة بهبات رياح، الخميس، بعدد من مناطق المملكة. وأوضحت المديرية، في نشرة إنذارية من مستوى يقظة "برتقالي"، أنه من المرتقب تسجيل هذه الزخات الرعدية بكل من عمالات وأقاليم الحوز، إفران، بني ملال، أزيلال، شيشاوة، وخنيفرة من الساعة الثانية بعد الزوال إلى التاسعة ليلا.', 'size': 2}, {'id': '217', 'title': 'زخات رعدية محليا قوية مصحوبة بهبات رياح مرتقبة اليوم الخميس بعدد من مناطق المملكة', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/227242/', 'summary': 'زخات رعدية محليا قوية مصحوبة بهبات رياح مرتقبة اليوم الخميس بعدد من مناطق المملكة. الرباط – أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب تسجيل زخات رعدية محليا قوية (من 20 إلى 30 ملم) مصحوبة بهبات رياح، اليوم الخميس، بعدد من مناطق المملكة. وأوضحت المديرية، في نشرة إنذارية من مستوى يقظة “برتقالي”، أنه من المرتقب تسجيل هذه الزخات الرعدية بكل من عمالات وأقاليم الحوز، إفران، بني ملال، أزيلال، شيشاوة، وخنيفرة', 'size': 2}], 'main_title': 'نشرة إنذارية: زخات رعدية قوية مصحوبة بهبات رياح بهذه المناطق'}, {'community_id': '6', 'articles': [{'id': '65', 'title': 'تجديد الثقة في إدريس شحتان على رأس الجمعية الوطنية للإعلام والناشرين', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/206391', 'summary': 'تجديد الثقة في إدريس شحتان على رأس الجمعية الوطنية للإعلام والناشرين.  جدد الجمع العام العادي للجمعية الوطنية للإعلام والناشرين، المنعقد صباح اليوم الخميس 18 شتنبر 2025 ، الثقة في إدريس شحتان رئيسا للجمعية، وذلك بعد المصادقة بالإجماع على التقريرين الأدبي والمالي. وأكد شحتان في كلمة له بالمناسبة، أن المكتب التنفيذي سيواصل دفاعه عن العاملين في قطاع الصحافة، والعمل على مجموعة من المشاريع التي تهم المجال.', 'size': 2}, {'id': '122', 'title': 'رئيس جمعية الإعلام والناشرين: سنوجه رسالة إلى رئيس الحكومة لرفع الدعم العمومي المخصص للصحافة', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%b1%d8%a6%d9%8a%d8%b3-%d8%ac%d9%85%d8%b9%d9%8a%d8%a9-%d8%a7%d9%84%d8%a5%d8%b9%d9%84%d8%a7%d9%85-%d9%88%d8%a7%d9%84%d9%86%d8%a7%d8%b4%d8%b1%d9%8a%d9%86-%d8%b3%d9%86%d9%88%d8%ac%d9%87-%d8%b1%d8%b3/', 'summary': 'رئيس جمعية الإعلام والناشرين: سنوجه رسالة إلى رئيس الحكومة لرفع الدعم العمومي المخصص للصحافة. التزم إدريس شحتان، رئيس الجمعية الوطنية للإعلام والناشرين، بتوجيه رسالة إلى رئيس الحكومة بغرض رفع الدعم العمومي المخصص للصحافة. وقال شحتان، اليوم الخميس (18 شتنبر)، مباشرة بعد تجدد الثقة فيه لولاية رئاسية جديدة على رأس الجمعية الوطنية للإعلام والناشرين، “أشعر بالفخر والامتنان العميق على هذه الثقة المتجددة من زملائي”، مؤكدا وعيه التام بحجم المسؤوليات الملقاة', 'size': 2}], 'main_title': 'تجديد الثقة في إدريس شحتان على رأس الجمعية الوطنية للإعلام والناشرين'}, {'community_id': '7', 'articles': [{'id': '78', 'title': 'إلياس المالكي يقتحم أرضية ملعب محمد الخامس في مواجهة الرجاء و الجيش..والأمن يتدخل لإخراجه', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/videos/412924.html', 'summary': 'إلياس المالكي يقتحم أرضية ملعب محمد الخامس في مواجهة الرجاء و الجيش..والأمن يتدخل لإخراجه. إلياس المالكي يقتحم أرضية ملعب محمد الخامس في مواجهة الرجاء و الجيش..والأمن يتدخل لإخراجه', 'size': 2}, {'id': '141', 'title': 'المالكي في قلب الجدل بعد اقتحامه ملعب محمد الخامس…فما القصة؟', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/323709/', 'summary': 'المالكي في قلب الجدل بعد اقتحامه ملعب محمد الخامس…فما القصة؟. المالكي في قلب الجدل بعد اقتحامه ملعب محمد الخامس…فما القصة؟', 'size': 2}], 'main_title': 'إلياس المالكي يقتحم أرضية ملعب محمد الخامس في مواجهة الرجاء و الجيش..والأمن يتدخل لإخراجه'}, {'community_id': '13', 'articles': [{'id': '111', 'title': 'العداءة المغربية آسية رزيقي تتأهل إلى نصف نهائي 800 م في بطولة العالم', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/sport/others/412963.html', 'summary': 'العداءة المغربية آسية رزيقي تتأهل إلى نصف نهائي 800 م في بطولة العالم. تأهلت العداءة المغربية آسية رزيقي، اليوم الخميس ،إلى نصف نهائي سباق 800 م ،المدرج ضمن فعاليات بطولة العالم لألعاب القوى التي تحتضنها حاليا العاصمة اليابانية', 'size': 3}, {'id': '190', 'title': 'بطولة العالم لألعاب القوى.. تأهل المغربية رزيقي إلى نصف نهائي 800 م', 'source': 'machahid24.com', 'link': 'https://machahid24.com/sport/475992.html', 'summary': 'بطولة العالم لألعاب القوى.. تأهل المغربية رزيقي إلى نصف نهائي 800 م. تأهلت العداءة المغربية آسية رزيقي، اليوم الخميس، إلى نصف نهائي سباق 800 م، المدرج ضمن فعاليات بطولة العالم لألعاب القوى التي تحتضنها حاليا العاصمة اليابانية طوكيو إلى غاية 21 شتنبر الجاري.', 'size': 3}, {'id': '249', 'title': 'رزقي تتأهل لنصف نهائي بطولة العالم', 'source': 'www.alalam.ma', 'link': 'https://www.alalam.ma/notes/رزقي-تتأهل-لنصف-نهائي-بطولة-العالم_b91180346.html', 'summary': 'رزقي تتأهل لنصف نهائي بطولة العالم. تأهلت المغربية آسية رزيقي، صباح اليوم الخميس، إلى نصف نهائي سباق 800 متر ضمن بطولة العالم لألعاب القوى المقامة حاليا في طوكيو.', 'size': 3}], 'main_title': 'العداءة المغربية آسية رزيقي تتأهل إلى نصف نهائي 800 م في بطولة العالم'}, {'community_id': '8', 'articles': [{'id': '120', 'title': '“فصول الأمل”.. دراما أمازيغية بلمسة عصرية', 'source': 'kifache.com', 'link': 'https://kifache.com/%d9%81%d8%b5%d9%88%d9%84-%d8%a7%d9%84%d8%a3%d9%85%d9%84-%d8%af%d8%b1%d8%a7%d9%85%d8%a7-%d8%a3%d9%85%d8%a7%d8%b2%d9%8a%d8%ba%d9%8a%d8%a9-%d8%a8%d9%84%d9%85%d8%b3%d8%a9-%d8%b9%d8%b5%d8%b1%d9%8a/', 'summary': '“فصول الأمل”.. دراما أمازيغية بلمسة عصرية. انطلق قبل أسابيع في المدينة الحمراء تصوير مشاهد المسلسل الأمازيغي الدرامي الجديد “فصول الأمل”، للمخرجة غزلان أسيف. وكشف السيناريست لحسن سرحان في تصريح لموقع “كيفاش” أن المسلسل يخرج عن النمطية حيث جرى الاشتغال على سيناريو عصري غير تقليدي. وتدور قصته حول سيدة تدعى كريمة وبناتها الثلاث اللواتي يواجهن مجموعة من العراقيل بعد رحيل رب الأسرة.', 'size': 2}, {'id': '391', 'title': '“فصول الألم”.. دراما اجتماعية تكسر الصورة النمطية للمرأة الأمازيغية', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1100764.html', 'summary': '“فصول الألم”.. دراما اجتماعية تكسر الصورة النمطية للمرأة الأمازيغية. انطلقت بمدينة مراكش أشغال تصوير المسلسل الأمازيغي الجديد “فصول الألم”، وهو عمل درامي اجتماعي من 30 حلقة، من توقيع المخرجة غزلان أسيف، وسيناريو السيناريست والممثل لحسن سرحان، ويهدف صناعه من خلاله إلى إحداث نقلة نوعية في الدراما الأمازيغية، من خلال طرح مواضيع معاصرة، وتقديم صورة مغايرة لما اعتاد عليه المشاهد المغربي في الأعمال السابقة. وكشف ظهرت المقالة “فصول الألم”.. دراما اجتماعية تكسر الصورة النمطية للمرأة الأمازيغية  .', 'size': 2}], 'main_title': '“فصول الأمل”.. دراما أمازيغية بلمسة عصرية'}, {'community_id': '1', 'articles': [{'id': '150', 'title': 'الحكومة ورهان العدالة الضريبية في مشروع قانون المالية 2026', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1100844.html', 'summary': 'الحكومة ورهان العدالة الضريبية في مشروع قانون المالية 2026. تعتبر السياسة الضريبية إحدى أهم الركائز التي تعتمدها الدولة لضمان استقرارها الاقتصادي والاجتماعي، فهي ليست مجرد وسيلة لتعبئة موارد مالية لميزانية الدولة، بل أداة استراتيجية لتوجيه النشاط الاقتصادي، وتحفيز الاستثمار، وتحقيق العدالة الاجتماعية. وفي المغرب تكتسي هذه السياسة أهمية مضاعفة بالنظر إلى التحديات المتعددة التي تواجه البلاد، من محدودية الموارد المالية وضغط النفقات العمومية، إلى ظهرت المقالة الحكومة ورهان العدالة الضريبية في مشروع قانون المالية 2026  .', 'size': 2}, {'id': '458', 'title': 'المنبر الحر | حسابات الحكومة بين العدالة الضريبية ومتطلبات الاستثمار في قانون المالية 2026', 'source': 'www.alousboue.ma', 'link': 'https://www.alousboue.ma/124061/', 'summary': 'المنبر الحر | حسابات الحكومة بين العدالة الضريبية ومتطلبات الاستثمار في قانون المالية 2026. تعتبر السياسة الضريبية إحدى أهم الركائز التي تعتمدها الدولة لضمان استقرارها الاقتصادي والاجتماعي، فهي ليست مجرد وسيلة لتعبئة موارد مالية لميزانية الدولة، بل أداة استراتيجية لتوجيه النشاط الاقتصادي، وتحفيز الاستثمار، وتحقيق العدالة الاجتماعية. وفي المغرب، تكتسي هذه السياسة أهمية مضاعفة بالنظر إلى التحديات المتعددة التي تواجه البلاد، من محدودية الموارد المالية، وضغط النفقات …  المنبر الحر | حسابات الحكومة بين العدالة الضريبية ومتطلبات الاستثمار في قانون المالية 2026     .', 'size': 2}], 'main_title': 'الحكومة ورهان العدالة الضريبية في مشروع قانون المالية 2026'}, {'community_id': '9', 'articles': [{'id': '165', 'title': 'الشرطة الإسبانية تستعيد 22 سيارة مسروقة وتوقف 11 متهما خلال عملية عبور مغاربة الخارج', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a7%d9%84%d8%b4%d8%b1%d8%b7%d8%a9-%d8%a7%d9%84%d8%a5%d8%b3%d8%a8%d8%a7%d9%86%d9%8a%d8%a9-%d8%aa%d8%b3%d8%aa%d8%b9%d9%8a%d8%af-22-%d8%b3%d9%8a%d8%a7%d8%b1%d8%a9-%d9%85%d8%b3%d8%b1%d9%88%d9%82%d8%a9/', 'summary': 'الشرطة الإسبانية تستعيد 22 سيارة مسروقة وتوقف 11 متهما خلال عملية عبور مغاربة الخارج. تمكنت الشرطة الوطنية الإسبانية من تحقيق نجاح أمني كبير خلال تنفيذها عملية أمنية خاصة ضمن إطار «عملية مرحبا/ عبور المضيق»، التي تُنفَّذ سنويا لتأمين حركة السفر الكثيفة بين إسبانيا وشمال المغرب، وخاصة في ميناء الجزيرة الخضراء بإقليم قادس. وأسفرت العملية عن استعادة 22 سيارة فاخرة ومتوسطة الطراز كانت قد سُرقت سابقاً ضمن شبكة متخصصة في  الشرطة الإسبانية تستعيد 22 سيارة مسروقة وتوقف 11 متهما خلال عملية عبور مغاربة الخارج     .', 'size': 2}, {'id': '373', 'title': 'إسبانيا تستعيد سيارات فاخرة مسروقة خلال عبور مغاربة الخارج', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/323773/', 'summary': 'إسبانيا تستعيد سيارات فاخرة مسروقة خلال عبور مغاربة الخارج. تمكنت الشرطة الوطنية الإسبانية من تحقيق إنجاز أمني لافت خلال تنفيذها عملية خاصة في إطار خطة «مرحبا/عبور المضيق» التي تنظم سنويا لتأمين الحركة الكثيفة للمسافرين بين إسبانيا وشمال المغرب، حيث أسفرت العملية عن استعادة 22 مركبة فاخرة ومتوسطة الطراز كانت قد سُرقت ضمن شبكة متخصصة في جرائم السرقة والتهريب، إضافة إلى توقيف 11 شخصا يشتبه', 'size': 2}], 'main_title': 'الشرطة الإسبانية تستعيد 22 سيارة مسروقة وتوقف 11 متهما خلال عملية عبور مغاربة الخارج'}, {'community_id': '10', 'articles': [{'id': '167', 'title': 'مجلس الحكومة.. مرسوم لمكافحة تعاطي المنشطات', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d9%85%d8%ac%d9%84%d8%b3-%d8%a7%d9%84%d8%ad%d9%83%d9%88%d9%85%d8%a9-%d9%85%d8%b1%d8%b3%d9%88%d9%85-%d9%84%d9%85%d9%83%d8%a7%d9%81%d8%ad%d8%a9-%d8%aa%d8%b9%d8%a7%d8%b7%d9%8a-%d8%a7%d9%84%d9%85%d9%86/', 'summary': 'مجلس الحكومة.. مرسوم لمكافحة تعاطي المنشطات. تداول مجلس الحكومة وصادق على مشروع المرسوم رقم 2.25.431 بتغيير وتتميم المرسوم رقم 2.18.303 الصادر في 2 ذي القعدة 1440 (5 يوليوز 2019) بتطبيق القانون رقم 97.12 المتعلق بمكافحة تعاطي المنشطات في مجال الرياضة، قدمه محمد سعد برادة، وزير التربية الوطنية والتعليم الأولي والرياضة. وأورد البلاغ الصادر عقب انعقاد المجلس الحكومي، زوال اليوم الخميس، أن  مجلس الحكومة.. مرسوم لمكافحة تعاطي المنشطات     .', 'size': 3}, {'id': '184', 'title': 'الحكومة تعزز المنظومة التشريعية الوطنية لمكافحة المنشطات في المجال الرياضي', 'source': 'rue20.com', 'link': 'https://rue20.com/937520.html', 'summary': 'الحكومة تعزز المنظومة التشريعية الوطنية لمكافحة المنشطات في المجال الرياضي.  ا الرباط صادق مجلس الحكومة اليوم الخميس على مشروع المرسوم رقم 2.25.431 بتغيير وتتميم المرسوم رقم 2.18.303 الصادر في 2 ذي القعدة 1440 (5 يوليوز 2019) بتطبيق القانون رقم 97.12 المتعلق بمكافحة تعاطي المنشطات في مجال الرياضة، قدمه محمد سعد برادة، وزير التربية الوطنية والتعليم الأولي والرياضة. وحسب بلاغ للحكومة يأتي هذا المشروع الخبر الحكومة تعزز المنظومة التشريعية الوطنية لمكافحة المنشطات في المجال الرياضي  .', 'size': 3}, {'id': '188', 'title': 'الحكومة تصادق على مشروع مرسوم مكافحة تعاطي المنشطات في مجال الرياضة', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/476003.html', 'summary': 'الحكومة تصادق على مشروع مرسوم مكافحة تعاطي المنشطات في مجال الرياضة. تداول مجلس الحكومة وصادق اليوم الخميس، على مشروع المرسوم رقم 2.25.431 بتغيير وتتميم المرسوم رقم 2.18.303 الصادر في 2 ذي القعدة 1440 (5 يوليوز 2019) بتطبيق القانون رقم 97.12 المتعلق بمكافحة تعاطي المنشطات في مجال الرياضة، قدمه محمد سعد برادة، وزير التربية الوطنية والتعليم الأولي والرياضة.', 'size': 3}], 'main_title': 'مجلس الحكومة.. مرسوم لمكافحة تعاطي المنشطات'}, {'community_id': '14', 'articles': [{'id': '215', 'title': 'جلالة الملك يهنئ رئيس جمهورية الشيلي بمناسبة احتفال بلاده بعيدها الوطني', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/227247/', 'summary': 'جلالة الملك يهنئ رئيس جمهورية الشيلي بمناسبة احتفال بلاده بعيدها الوطني. بعث الملك محمد السادس برقية تهنئة إلى رئيس جمهورية الشيلي، غابرييل بوريك فونت، وذلك بمناسبة احتفال بلاده بعيدها الوطني. وأعرب الملك، في هذه البرقية، عن تهانيه الحارة، مشفوعة بمتمنياته الخالصة لبوريك فونت شخصيا بموفور الصحة والسعادة، وللشعب الشيلي بمزيد الازدهار والرخاء. ومما جاء في البرقية الملكية: “لا يفوتني بهذه المناسبة أن أجدد الإعراب عن تقديري', 'size': 2}, {'id': '237', 'title': 'برقية تهنئة من الملك محمد السادس إلى رئيس جمهورية الشيلي بمناسبة العيد الوطني لبلاده', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a8%d8%b1%d9%82%d9%8a%d8%a9-%d8%aa%d9%87%d9%86%d8%a6%d8%a9-%d9%85%d9%86-%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%85%d8%ad%d9%85%d8%af-%d8%a7%d9%84%d8%b3%d8%a7%d8%af%d8%b3-%d8%a5%d9%84%d9%89-%d8%b1-18/', 'summary': 'برقية تهنئة من الملك محمد السادس إلى رئيس جمهورية الشيلي بمناسبة العيد الوطني لبلاده. بعث الملك محمد السادس برقية تهنئة إلى رئيس جمهورية الشيلي، غابرييل بوريك فونت، وذلك بمناسبة احتفال بلاده بعيدها الوطني. وأعرب الملك محمد السادس، في هذه البرقية، عن تهانئه الحارة، مشفوعة بمتمنيات جلالته الخالصة لبوريك فونت شخصيا بموفور الصحة والسعادة، وللشعب الشيلي بمزيد الازدهار والرخاء. ومما جاء في برقية الملك محمد السادس “ولا يفوتني …  برقية تهنئة من الملك محمد السادس إلى رئيس جمهورية الشيلي بمناسبة العيد الوطني لبلاده     .', 'size': 2}], 'main_title': 'جلالة الملك يهنئ رئيس جمهورية الشيلي بمناسبة احتفال بلاده بعيدها الوطني'}, {'community_id': '3', 'articles': [{'id': '334', 'title': 'الملك يدشن ويزور عددا من المشاريع الكبرى المندرجة في إطار إعادة هيكلة وتطوير المركب المينائي للدار البيضاء', 'source': 'www.alakhbar.press.ma', 'link': 'https://www.alakhbar.press.ma/%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%8a%d8%af%d8%b4%d9%86-%d9%88%d9%8a%d8%b2%d9%88%d8%b1-%d8%b9%d8%af%d8%af%d8%a7-%d9%85%d9%86-%d8%a7%d9%84%d9%85%d8%b4%d8%a7%d8%b1%d9%8a%d8%b9-%d8%a7%d9%84%d9%83%d8%a8-273305.html', 'summary': 'الملك يدشن ويزور عددا من المشاريع الكبرى المندرجة في إطار إعادة هيكلة وتطوير المركب المينائي للدار البيضاء. أشرف الملك محمد السادس، اليوم الخميس بالدار البيضاء، على تدشين وزيارة عدد من المشاريع الكبرى المندرجة في إطار إعادة هيكلة وتطوير المركب المينائي للدار البيضاء، والرامية إلى تعزيز الإشعاع الاقتصادي والسياحي للعاصمة الاقتصادية للمملكة. وتهدف هذه المشاريع إلى ترسيخ مكانة الدار البيضاء كقطب اقتصادي ومالي رائد على المستوى القاري، منفتح بالكامل على محيطه الدولي. …  الملك يدشن ويزور عددا من المشاريع الكبرى المندرجة في إطار إعادة هيكلة وتطوير المركب المينائي للدار البيضاء     .', 'size': 5}, {'id': '338', 'title': 'الملك محمد السادس يدشن مشاريع كبرى لتطوير المركب المينائي للدار البيضاء', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/206402', 'summary': 'الملك محمد السادس يدشن مشاريع كبرى لتطوير المركب المينائي للدار البيضاء.  أشرف صاحب الجلالة الملك محمد السادس، نصره الله، اليوم الخميس بالدار البيضاء، على تدشين وزيارة عدد من المشاريع الكبرى المندرجة في إطار إعادة هيكلة وتطوير المركب المينائي للدار البيضاء، والرامية إلى تعزيز الإشعاع الاقتصادي والسياحي للعاصمة الاقتصادية للمملكة. وتهدف هذه المشاريع إلى ترسيخ مكانة الدار البيضاء كقطب اقتصادي ومالي رائد على المستوى القاري، منفتح', 'size': 5}, {'id': '395', 'title': 'بـ5 مليارات درهم.. الملك يدشن مشاريع كبرى لتعزيز الإشعاع الاقتصادي والسياحي للدار البيضاء', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1100874.html', 'summary': 'بـ5 مليارات درهم.. الملك يدشن مشاريع كبرى لتعزيز الإشعاع الاقتصادي والسياحي للدار البيضاء. أشرف الملك محمد السادس، اليوم الخميس بالدار البيضاء، على تدشين وزيارة عدد من المشاريع الكبرى المندرجة في إطار إعادة هيكلة وتطوير المركب المينائي للدار البيضاء، والرامية إلى تعزيز الإشعاع الاقتصادي والسياحي للعاصمة الاقتصادية للمملكة. وهدفت هذه المشاريع إلى ترسيخ مكانة الدار البيضاء كقطب اقتصادي ومالي رائد على المستوى القاري، منفتح بالكامل على محيطه الدولي. وشملت ظهرت المقالة بـ5 مليارات درهم.. الملك يدشن مشاريع كبرى لتعزيز الإشعاع الاقتصادي والسياحي للدار البيضاء  .', 'size': 5}, {'id': '448', 'title': 'جلالة الملك يدشن ويزور عددا من المشاريع الكبرى المندرجة في إطار إعادة هيكلة وتطوير المركب المينائي للدار البيضاء', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/227249/', 'summary': 'جلالة الملك يدشن ويزور عددا من المشاريع الكبرى المندرجة في إطار إعادة هيكلة وتطوير المركب المينائي للدار البيضاء. الدار البيضاء – أشرف صاحب الجلالة الملك محمد السادس، نصره الله، اليوم الخميس بالدار البيضاء، على تدشين وزيارة عدد من المشاريع الكبرى المندرجة في إطار إعادة هيكلة وتطوير المركب المينائي للدار البيضاء، والرامية إلى تعزيز الإشعاع الاقتصادي والسياحي للعاصمة الاقتصادية للمملكة. وتهدف هذه المشاريع إلى ترسيخ مكانة الدار البيضاء كقطب اقتصادي ومالي رائد على', 'size': 5}, {'id': '455', 'title': 'الملك محمد السادس يدشن ويزور عددا من المشاريع الكبرى المندرجة في إطار إعادة هيكلة وتطوير المركب المينائي للدار البيضاء (صور)', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%85%d8%ad%d9%85%d8%af-%d8%a7%d9%84%d8%b3%d8%a7%d8%af%d8%b3-%d9%8a%d8%af%d8%b4%d9%86-%d9%88%d9%8a%d8%b2%d9%88%d8%b1-%d8%b9%d8%af%d8%af%d8%a7-%d9%85%d9%86-%d8%a7%d9%84/', 'summary': 'الملك محمد السادس يدشن ويزور عددا من المشاريع الكبرى المندرجة في إطار إعادة هيكلة وتطوير المركب المينائي للدار البيضاء (صور). أشرف الملك محمد السادس، اليوم الخميس بالدار البيضاء، على تدشين وزيارة عدد من المشاريع الكبرى المندرجة في إطار إعادة هيكلة وتطوير المركب المينائي للدار البيضاء، والرامية إلى تعزيز الإشعاع الاقتصادي والسياحي للعاصمة الاقتصادية للمملكة. وتهدف هذه المشاريع إلى ترسيخ مكانة الدار البيضاء كقطب اقتصادي ومالي رائد على المستوى القاري، منفتح بالكامل على محيطه …  الملك محمد السادس يدشن ويزور عددا من المشاريع الكبرى المندرجة في إطار إعادة هيكلة وتطوير المركب المينائي للدار البيضاء (صور)     .', 'size': 5}], 'main_title': 'الملك يدشن ويزور عددا من المشاريع الكبرى المندرجة في إطار إعادة هيكلة وتطوير المركب المينائي للدار البيضاء'}, {'community_id': '4', 'articles': [{'id': '351', 'title': 'زلزال بقوة 7.8 درجات يهز شرق روسيا وتحذيرات من تسونامي', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/world/412983.html', 'summary': 'زلزال بقوة 7.8 درجات يهز شرق روسيا وتحذيرات من تسونامي. هزّ زلزال قوي بلغت شدته 7.8 درجات على مقياس ريختر، صباح الخميس، شبه جزيرة كامتشاتكا في أقصى شرق روسيا، وفق ما أعلنت هيئة المسح الجيولوجي', 'size': 2}, {'id': '420', 'title': 'زلزال بقوة 7.8 درجات يضرب شبه جزيرة كامتشاتكا شرقي روسيا', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d8%b2%d9%84%d8%b2%d8%a7%d9%84-%d8%a8%d9%82%d9%88%d8%a9-7-8-%d8%af%d8%b1%d8%ac%d8%a7%d8%aa-%d9%8a%d8%b6%d8%b1%d8%a8-%d8%b4%d8%a8%d9%87-%d8%ac%d8%b2%d9%8a%d8%b1%d8%a9-%d9%83%d8%a7%d9%85%d8%aa%d8%b4/', 'summary': 'زلزال بقوة 7.8 درجات يضرب شبه جزيرة كامتشاتكا شرقي روسيا. ضرب زلزال بقوة 7.8 درجات على مقياس ريختر، الخميس، شبه جزيرة كامتشاتكا شرقي روسيا. وأفادت هيئة المسح الجيولوجي الأمريكية بأن مركز الزلزال  زلزال بقوة 7.8 درجات يضرب شبه جزيرة كامتشاتكا شرقي روسيا     .', 'size': 2}], 'main_title': 'زلزال بقوة 7.8 درجات يهز شرق روسيا وتحذيرات من تسونامي'}, {'community_id': '12', 'articles': [{'id': '370', 'title': 'الورش الجديد لإصلاح السفن بالدار البيضاء .. نحو تعزيز مكانة ميناء المدينة في السوق العالمية', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/323784/', 'summary': 'الورش الجديد لإصلاح السفن بالدار البيضاء .. نحو تعزيز مكانة ميناء المدينة في السوق العالمية. يعد الورش الجديد لإصلاح السفن بالدار البيضاء، الذي دشنه صاحب الجلالة الملك محمد السادس، اليوم الخميس، مشروعا مهيكلا يروم تعزيز مكانة ميناء العاصمة الاقتصادية في السوق العالمية للصناعات البحرية، إن على مستوى بناء السفن أو إصلاحها. كما يروم هذا المشروع الوازن إعادة هيكلة وتطوير قطاع صناعة وإصلاح السفن في المغرب، وجذب المزيد من الاستثمارات في', 'size': 2}, {'id': '445', 'title': 'الورش الجديد لإصلاح السفن يعزز مكانة ميناء العاصمة الاقتصادية في السوق العالمية للصناعات البحرية', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/227258/', 'summary': 'الورش الجديد لإصلاح السفن يعزز مكانة ميناء العاصمة الاقتصادية في السوق العالمية للصناعات البحرية. يعد الورش الجديد لإصلاح السفن بالدار البيضاء، الذي دشنه صاحب الجلالة الملك محمد السادس، اليوم الخميس، مشروعا مهيكلا يروم تعزيز مكانة ميناء العاصمة الاقتصادية في السوق العالمية للصناعات البحرية، إن على مستوى بناء السفن أو إصلاحها. كما يروم هذا المشروع الوازن إعادة هيكلة وتطوير قطاع صناعة وإصلاح السفن في المغرب، وجذب المزيد من الاستثمارات في', 'size': 2}], 'main_title': 'الورش الجديد لإصلاح السفن بالدار البيضاء .. نحو تعزيز مكانة ميناء المدينة في السوق العالمية'}, {'community_id': '5', 'articles': [{'id': '386', 'title': 'الدريوش: ميناء الصيد الجديد بالدار البيضاء رافعة استراتيجية لدعم القطاع وتثمين المنتوجات البحرية', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1100901.html', 'summary': 'الدريوش: ميناء الصيد الجديد بالدار البيضاء رافعة استراتيجية لدعم القطاع وتثمين المنتوجات البحرية. أكد مسؤولون بارزون في قطاعي الصيد البحري والموانئ أن المشاريع الكبرى التي دشنها الملك محمد السادس بالمركب المينائي للدار البيضاء، اليوم الخميس، تمثل تحولا استراتيجيا يهدف إلى تعزيز مكانة المغرب كقوة بحرية إقليمية، وتطوير منظومات صناعية متكاملة قادرة على المنافسة عالميا. وفي هذا الإطار، وصفت كاتبة الدولة المكلفة بالصيد البحري، زكية الدريوش، ميناء الصيد البحري ظهرت المقالة الدريوش: ميناء الصيد الجديد بالدار البيضاء رافعة استراتيجية لدعم القطاع وتثمين المنتوجات البحرية  .', 'size': 2}, {'id': '424', 'title': 'الدريوش: ميناء الصيد البحري الجديد بالدار البيضاء رافعة استراتيجية جديدة للنهوض بالقطاع', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d8%a7%d9%84%d8%af%d8%b1%d9%8a%d9%88%d8%b4-%d9%85%d9%8a%d9%86%d8%a7%d8%a1-%d8%a7%d9%84%d8%b5%d9%8a%d8%af-%d8%a7%d9%84%d8%a8%d8%ad%d8%b1%d9%8a-%d8%a7%d9%84%d8%ac%d8%af%d9%8a%d8%af-%d8%a8%d8%a7%d9%84/', 'summary': 'الدريوش: ميناء الصيد البحري الجديد بالدار البيضاء رافعة استراتيجية جديدة للنهوض بالقطاع. أكدت كاتبة الدولة المكلفة بالصيد البحري، زكية الدريوش، أن ميناء الصيد البحري الجديد الذي دشنه صاحب الجلالة الملك محمد السادس، اليوم الخميس بالدار البيضاء،  الدريوش: ميناء الصيد البحري الجديد بالدار البيضاء رافعة استراتيجية جديدة للنهوض بالقطاع     .', 'size': 2}], 'main_title': 'الدريوش: ميناء الصيد الجديد بالدار البيضاء رافعة استراتيجية لدعم القطاع وتثمين المنتوجات البحرية'}, {'community_id': '0', 'articles': [{'id': '446', 'title': 'المشاريع التي دشنها جلالة الملك “تعزز تموقع المغرب كجسر بين أوروبا وإفريقيا”', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/227255/', 'summary': 'المشاريع التي دشنها جلالة الملك “تعزز تموقع المغرب كجسر بين أوروبا وإفريقيا”. لندن – أكد السفير السابق للمملكة المتحدة بالمغرب، توماس رايلي، أن المشاريع التي أشرف صاحب الجلالة الملك محمد السادس، على تدشينها، اليوم الخميس، في إطار إعادة هيكلة وتطوير المركب المينائي للدار البيضاء، “تعزز تموقع المغرب كجسر يربط بين أوروبا وإفريقيا”. وقال السيد رايلي، في تصريح لوكالة المغرب العربي للأنباء، إن “الأمر يتعلق بمشاريع مبهرة”، مبرزا', 'size': 2}, {'id': '451', 'title': 'السفير البريطاني السابق: مشاريع الملك بالمركب المينائي للدار البيضاء تعزز تموقع المغرب كجسر بين أوروبا وإفريقيا', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d8%b3%d9%81%d9%8a%d8%b1-%d8%a7%d9%84%d8%a8%d8%b1%d9%8a%d8%b7%d8%a7%d9%86%d9%8a-%d8%a7%d9%84%d8%b3%d8%a7%d8%a8%d9%82-%d9%85%d8%b4%d8%a7%d8%b1%d9%8a%d8%b9-%d8%a7%d9%84%d9%85%d9%84%d9%83/', 'summary': 'السفير البريطاني السابق: مشاريع الملك بالمركب المينائي للدار البيضاء تعزز تموقع المغرب كجسر بين أوروبا وإفريقيا. قال السفير السابق للمملكة المتحدة بالمغرب، توماس رايلي، إن المشاريع التي أشرف الملك محمد السادس، على تدشينها، اليوم الخميس 18 شتنبر 2025، في إطار إعادة هيكلة وتطوير المركب المينائي للدار البيضاء، “تعزز تموقع المغرب كجسر يربط بين أوروبا وإفريقيا”. وأكد رايلي، في تصريح لوكالة المغرب العربي للأنباء، أن “الأمر يتعلق بمشاريع مبهرة”، مبرزا …  السفير البريطاني السابق: مشاريع الملك بالمركب المينائي للدار البيضاء تعزز تموقع المغرب كجسر بين أوروبا وإفريقيا     .', 'size': 2}], 'main_title': 'المشاريع التي دشنها جلالة الملك “تعزز تموقع المغرب كجسر بين أوروبا وإفريقيا”'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    