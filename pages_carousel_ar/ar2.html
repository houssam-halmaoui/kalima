<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 10/08/2025 - 06h27</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '75', 'title': 'العصبة الاحترافية تؤجل انطلاق البطولة الوطنية لكرة القدم', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/sport/footmarocain/410744.html', 'summary': 'العصبة الاحترافية تؤجل انطلاق البطولة الوطنية لكرة القدم. أعلنت العصبة الوطنية لكرة القدم الاحترافية عن تأجيل موعد انطلاق منافسات البطولة الوطنية في قسميها الأول والثاني للموسم الرياضي 2025-2026، وذلك إلى يوم 12 شتنبر', 'size': 2}, {'id': '249', 'title': 'تأجيل انطلاق البطولة الوطنية وتمديد فترة الانتقالات الصيفية', 'source': 'www.alalam.ma', 'link': 'https://www.alalam.ma/تأجيل-انطلاق-البطولة-الوطنية-وتمديد-فترة-الانتقالات-الصيفية_a29094.html', 'summary': 'تأجيل انطلاق البطولة الوطنية وتمديد فترة الانتقالات الصيفية.  قررت العصبة الوطنية لكرة القدم الاحترافية، تأجيل انطلاق البطولة الاحترافية بقسميها الأول والثاني إلى غاية 12 شتنبر 2025...', 'size': 2}], 'main_title': 'العصبة الاحترافية تؤجل انطلاق البطولة الوطنية لكرة القدم'}, {'community_id': '5', 'articles': [{'id': '84', 'title': 'ولاية أمن مراكش تفتح بحثا إداريا وقضائيا في تجاوزات منسوبة لضابط أمن بفرقة السير الطرقي', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/society/410753.html', 'summary': 'ولاية أمن مراكش تفتح بحثا إداريا وقضائيا في تجاوزات منسوبة لضابط أمن بفرقة السير الطرقي. فتحت ولاية أمن مراكش بحثا ، يوم الجمعة 08 غشت الجاري، وذلك لتحديد التجاوزات المهنية والإخلالات الوظيفية المنسوبة لموظف شرطة برتبة ضابط أمن يعمل بفرقة', 'size': 2}, {'id': '132', 'title': 'رشوة تجر ضابطا أمنيا بمراكش للتحقيق', 'source': 'assabah.ma', 'link': 'https://assabah.ma/864774.html', 'summary': 'رشوة تجر ضابطا أمنيا بمراكش للتحقيق. فتحت ولاية أمن مراكش بحثا ، يوم الجمعة 08 غشت الجاري وذلك لتحديد التجاوزات المهنية والإخلالات الوظيفية المنسوبة لموظف شرطة برتبة ضابط أمن يعمل بفرقة السير الطرقي بنفس المدينة. وكانت مصالح الأمن الوطني قد تعاطت بجدية كبيرة مع تسجيل متداول على مواقع التواصل الاجتماعي، يوثقأكمل القراءة » المقالة رشوة تجر ضابطا أمنيا بمراكش للتحقيق  .', 'size': 2}, {'id': '182', 'title': 'توقيف ضابط شرطة بمراكش ظهر في شريط فيديو يحاول إستخلاص مخالفة بطريقة غير قانونية', 'source': 'rue20.com', 'link': 'https://rue20.com/927418.html', 'summary': 'توقيف ضابط شرطة بمراكش ظهر في شريط فيديو يحاول إستخلاص مخالفة بطريقة غير قانونية. . مراكش فتحت ولاية أمن مراكش بحثا ، يوم الجمعة 08 غشت الجاري، وذلك لتحديد التجاوزات المهنية والإخلالات الوظيفية المنسوبة لموظف شرطة برتبة ضابط أمن يعمل بفرقة السير الطرقي بنفس المدينة. وكانت مصالح الأمن الوطني قد تعاطت بجدية كبيرة مع تسجيل متداول على مواقع التواصل الاجتماعي، يوثق لقيام موظف الشرطة بمحاولة استخلاص مبلغ مالي الخبر توقيف ضابط شرطة بمراكش ظهر في شريط فيديو يحاول إستخلاص مخالفة بطريقة غير قانونية  .', 'size': 4}, {'id': '222', 'title': 'عاجل.. إحالة ضابط الأمن في شبهة طلب رشوة على التحقيق', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/225765/', 'summary': 'عاجل.. إحالة ضابط الأمن في شبهة طلب رشوة على التحقيق. فتحت ولاية أمن مراكش بحثا ، يوم الجمعة 08 غشت الجاري، وذلك لتحديد التجاوزات المهنية والإخلالات الوظيفية المنسوبة لموظف شرطة برتبة ضابط أمن يعمل بفرقة السير الطرقي بنفس المدينة. وكانت مصالح الأمن الوطني قد تعاطت بجدية كبيرة مع تسجيل متداول على مواقع التواصل الاجتماعي، يوثق لقيام موظف الشرطة بمحاولة استخلاص مبلغ مالي من سائق سيارة', 'size': 3}, {'id': '246', 'title': 'فتح بحث قضائي مع ضابط شرطة بمراكش بعد تداول فيديو يوثق شبهة رشوة', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d9%81%d8%aa%d8%ad-%d8%a8%d8%ad%d8%ab-%d9%82%d8%b6%d8%a7%d8%a6%d9%8a-%d9%85%d8%b9-%d8%b6%d8%a7%d8%a8%d8%b7-%d8%b4%d8%b1%d8%b7%d8%a9-%d8%a8%d9%85%d8%b1%d8%a7%d9%83%d8%b4-%d8%a8%d8%b9%d8%af-%d8%aa%d8%af/', 'summary': 'فتح بحث قضائي مع ضابط شرطة بمراكش بعد تداول فيديو يوثق شبهة رشوة. فتحت ولاية أمن مراكش بحثا، يوم أمس الجمعة، وذلك لتحديد التجاوزات المهنية والإخلالات الوظيفية المنسوبة لموظف شرطة برتبة ضابط أمن يعمل بفرقة السير الطرقي بنفس المدينة. وكشفت مصادر أمنية، أن مصالح الأمن الوطني، كانت قد تعاطت بجدية كبيرة مع تسجيل متداول على مواقع التواصل الاجتماعي، يوثق لقيام موظف الشرطة بمحاولة استخلاص مبلغ مالي …  فتح بحث قضائي مع ضابط شرطة بمراكش بعد تداول فيديو يوثق شبهة رشوة     .', 'size': 2}], 'main_title': 'توقيف ضابط شرطة بمراكش ظهر في شريط فيديو يحاول إستخلاص مخالفة بطريقة غير قانونية'}, {'community_id': '2', 'articles': [{'id': '115', 'title': 'دوري أبطال إفريقيا .. نهضة بركان والجيش الملكي يتعرفان على خصميهما في الدور التمهيدي', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/sport/footmarocain/410786.html', 'summary': 'دوري أبطال إفريقيا .. نهضة بركان والجيش الملكي يتعرفان على خصميهما في الدور التمهيدي. يواجه فريق نهضة بركان نظيره أسكو دي كارا الطوغولي، فيما يلاقي الجيش الملكي ريال دي بانجول الغامبي، في الدور التمهيدي الأول لدوري أبطال إفريقيا لكرة', 'size': 3}, {'id': '127', 'title': 'الدور التمهيدي. الجيش الملكي ونهضة بركان يتعرفان على منافسيهما في دوري أبطال إفريقيا', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a7%d9%84%d8%af%d9%88%d8%b1-%d8%a7%d9%84%d8%aa%d9%85%d9%87%d9%8a%d8%af%d9%8a-%d8%a7%d9%84%d8%ac%d9%8a%d8%b4-%d8%a7%d9%84%d9%85%d9%84%d9%83%d9%8a-%d9%88%d9%86%d9%87%d8%b6%d8%a9-%d8%a8%d8%b1%d9%83/', 'summary': 'الدور التمهيدي. الجيش الملكي ونهضة بركان يتعرفان على منافسيهما في دوري أبطال إفريقيا. أسفرت قرعة الدور التمهيدي الأول لدوري أبطال إفريقيا عن مواجهة الجيش الملكي لفريق ريال بانجول الغامبي، بينما يلتقي نهضة بركان مع أسكو كارا التوغولي. وسيخوض الجيش الملكي مباراة الذهاب خارج الديار في غامبيا أحد أيام 19 أو 20 أو 21 شتنبر الجاري، على أن تُقام مواجهة الإياب بالمغرب في 26 أو 27 أو 28 من', 'size': 2}, {'id': '352', 'title': 'نهضة بركان يدشن أول مشاركة في دوري أبطال أفريقيا بمواجهة منافس طوغولي', 'source': 'rue20.com', 'link': 'https://rue20.com/927446.html', 'summary': 'نهضة بركان يدشن أول مشاركة في دوري أبطال أفريقيا بمواجهة منافس طوغولي. . الرباط يواجه فريق نهضة بركان نظيره أسكو دي كارا الطوغولي، فيما يلاقي الجيش الملكي ريال دي بانجول الغامبي، في الدور التمهيدي الأول لدوري أبطال إفريقيا لكرة القدم 2025-2026، الذي جرت قرعته اليوم السبت بدار السلام في تنزانيا. وكان نهضة بركان، حامل لقب كأس الكونفدرالية الإفريقية، تأهل إلى هذه المسابقة بفوزه بلقب البطولة الوطنية الخبر نهضة بركان يدشن أول مشاركة في دوري أبطال أفريقيا بمواجهة منافس طوغولي  .', 'size': 2}], 'main_title': 'دوري أبطال إفريقيا .. نهضة بركان والجيش الملكي يتعرفان على خصميهما في الدور التمهيدي'}, {'community_id': '3', 'articles': [{'id': '128', 'title': 'حيازة وترويج مخدر الكوكايين.. توقيف ستة أشخاص بتطوان', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%ad%d9%8a%d8%a7%d8%b2%d8%a9-%d9%88%d8%aa%d8%b1%d9%88%d9%8a%d8%ac-%d9%85%d8%ae%d8%af%d8%b1-%d8%a7%d9%84%d9%83%d9%88%d9%83%d8%a7%d9%8a%d9%8a%d9%86-%d8%aa%d9%88%d9%82%d9%8a%d9%81-%d8%b3%d8%aa%d8%a9/', 'summary': 'حيازة وترويج مخدر الكوكايين.. توقيف ستة أشخاص بتطوان. تمكنت عناصر الشرطة القضائية بولاية أمن تطوان بتنسيق مع مصالح المديرية العامة لمراقبة التراب الوطني، في الساعات الأولى من صباح اليوم السبت (9 غشت)، من توقيف ستة أشخاص من بينهم سيدتان، وذلك للاشتباه في تورطهم في قضية تتعلق بحيازة وترويج مخدر الكوكايين. وتم تنفيذ هذه العملية الأمنية بتنسيق مع عناصر الدرك الملكي بضواحي مدينة وزان،', 'size': 2}, {'id': '221', 'title': 'بتنسيق مع الديستي: أمن تطوان يطيح بستة أشخاص بينهم سيدتان بحيازة وترويج الكوكايين', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/225768/', 'summary': 'بتنسيق مع الديستي: أمن تطوان يطيح بستة أشخاص بينهم سيدتان بحيازة وترويج الكوكايين. تمكنت عناصر الشرطة القضائية بولاية أمن تطوان بتنسيق مع مصالح المديرية العامة لمراقبة التراب الوطني، في الساعات الأولى من صباح اليوم السبت 9 غشت الجاري، من توقيف ستة أشخاص من بينهم سيدتان، وذلك للاشتباه في تورطهم في قضية تتعلق بحيازة وترويج مخدر الكوكايين. وقد تم تنفيذ هذه العملية الأمنية بتنسيق مع عناصر الدرك الملكي بضواحي', 'size': 2}], 'main_title': 'حيازة وترويج مخدر الكوكايين.. توقيف ستة أشخاص بتطوان'}, {'community_id': '4', 'articles': [{'id': '129', 'title': 'حادث مأساوي بإقليم تنغير.. وفاة عامل في منجم للفضة وإصابة آخر', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%ad%d8%a7%d8%af%d8%ab-%d9%85%d8%a3%d8%b3%d8%a7%d9%88%d9%8a-%d8%a8%d8%a5%d9%82%d9%84%d9%8a%d9%85-%d8%aa%d9%86%d8%ba%d9%8a%d8%b1-%d9%88%d9%81%d8%a7%d8%a9-%d8%b9%d8%a7%d9%85%d9%84-%d9%81%d9%8a/', 'summary': 'حادث مأساوي بإقليم تنغير.. وفاة عامل في منجم للفضة وإصابة آخر. لقي عامل منجمي مصرعه وأصيب آخر إصابات بليغة، يوم أمس الجمعة (8 غشت)، إثر انهيار بئر معدني بمنجم للفضة بجماعة إميضر في إقليم تنغير. وحسب مصادر محلية، كان العاملان يباشران مهام التنقيب داخل المنجم حين وقع الانهيار المفاجئ، مما أدى إلى إصابة أحدهما بجروح خطيرة وكسر بليغ، فيما لقي الآخر حتفه في الحادث. وتدخلت فرق', 'size': 2}, {'id': '187', 'title': 'وفاة عامل إثر انهيار في منجم الفضة بإميضر', 'source': 'rue20.com', 'link': 'https://rue20.com/927389.html', 'summary': 'وفاة عامل إثر انهيار في منجم الفضة بإميضر.  | متابعة شهد منجم الفضة الواقع بجماعة إميضر، التابعة لإقليم تنغير، بعد زوال اليوم الجمعة 8 غشت، حادث انهيار داخل أحد الأنفاق، أسفر عن مصرع عامل تحت الأنقاض. وبحسب مصادر محلية، فقد تمكنت فرق الإنقاذ من انتشال أحد العاملين وهو على قيد الحياة، حيث تم نقله على وجه السرعة إلى المستشفى في حالة الخبر وفاة عامل إثر انهيار في منجم الفضة بإميضر  .', 'size': 2}], 'main_title': 'حادث مأساوي بإقليم تنغير.. وفاة عامل في منجم للفضة وإصابة آخر'}, {'community_id': '6', 'articles': [{'id': '179', 'title': 'عقوبات مالية وإيقافات تطال ليفاندوفسكي ويامال وفليك بعد نصف نهائي الأبطال', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%b9%d9%82%d9%88%d8%a8%d8%a7%d8%aa-%d9%85%d8%a7%d9%84%d9%8a%d8%a9-%d9%88%d8%a5%d9%8a%d9%82%d8%a7%d9%81%d8%a7%d8%aa-%d8%aa%d8%b7%d8%a7%d9%84-%d9%84%d9%8a%d9%81%d8%a7%d9%86%d8%af%d9%88%d9%81%d8%b3/', 'summary': 'عقوبات مالية وإيقافات تطال ليفاندوفسكي ويامال وفليك بعد نصف نهائي الأبطال. فرض الاتحاد الأوروبي لكرة القدم غرامة قدرها 5 آلاف يورو على نجمي برشلونة روبرت ليفاندوفسكي ولامين يامال، لعدم امتثالهما لتعليمات ضابط مكافحة المنشطات وعدم توجههما مباشرة إلى نقطة الفحص عقب مباراة نصف نهائي دوري أبطال أوروبا أمام إنتر ميلان في ماي الماضي. كما عاقب الاتحاد مدرب برشلونة هانسي فليك ومساعده ماركوس زورغ بتغريم كل منهما  عقوبات مالية وإيقافات تطال ليفاندوفسكي ويامال وفليك بعد نصف نهائي الأبطال     .', 'size': 2}, {'id': '390', 'title': 'الاتحاد الأوروبي يفرض عقوبات على برشلونة وإنتر ميلان بعد مواجهة دوري الأبطال', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d8%a7%d8%aa%d8%ad%d8%a7%d8%af-%d8%a7%d9%84%d8%a3%d9%88%d8%b1%d9%88%d8%a8%d9%8a-%d9%8a%d9%81%d8%b1%d8%b6-%d8%b9%d9%82%d9%88%d8%a8%d8%a7%d8%aa-%d8%b9%d9%84%d9%89-%d8%a8%d8%b1%d8%b4%d9%84/', 'summary': 'الاتحاد الأوروبي يفرض عقوبات على برشلونة وإنتر ميلان بعد مواجهة دوري الأبطال. فرض الاتحاد الأوروبي لكرة القدم (UEFA) مجموعة من العقوبات المالية والتأديبية على ناديي برشلونة وإنتر ميلان، بالإضافة إلى بعض لاعبيهم ومدربيهم، على خلفية مباراة نصف نهائي دوري أبطال أوروبا التي أقيمت في شهر ماي الماضي. وتم تغريم نجمي برشلونة، روبرت ليفاندوفسكي ولامين يامال، بمبلغ 5 آلاف يورو لكل منهما، بسبب عدم امتثالهما لتعليمات …  الاتحاد الأوروبي يفرض عقوبات على برشلونة وإنتر ميلان بعد مواجهة دوري الأبطال     .', 'size': 2}], 'main_title': 'عقوبات مالية وإيقافات تطال ليفاندوفسكي ويامال وفليك بعد نصف نهائي الأبطال'}, {'community_id': '7', 'articles': [{'id': '186', 'title': 'أخنوش يؤكد استقرار أسعار البوتان والكهرباء في 2026 والشروع في إصلاح التقاعد ابتداءً من شتنبر', 'source': 'rue20.com', 'link': 'https://rue20.com/927392.html', 'summary': 'أخنوش يؤكد استقرار أسعار البوتان والكهرباء في 2026 والشروع في إصلاح التقاعد ابتداءً من شتنبر.  | الرباط أكد عزيز أخنوش، رئيس الحكومة، في رسالة تأطيرية لمشروع قانون المالية 2026 ، إلى الوزراء، أن سنة 2026 تعتبر منعطفا أساسيا في منظور تدخل الدولة في المجال الاجتماعي، وذلك بالانتقال إلى الأثر الاجتماعي الموجه والفعال في تنزيل السياسات والبرامج الاجتماعية، مشددا على ان بلادنا تشهد انتقالا تدريجيا نحو مقاربة فعالة للاستهداف الخبر أخنوش يؤكد استقرار أسعار البوتان والكهرباء في 2026 والشروع في إصلاح التقاعد ابتداءً من شتنبر  .', 'size': 2}, {'id': '203', 'title': 'الحكومة تؤكد استقرار أسعار البوتان والكهرباء في 2026', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d8%a7%d9%84%d8%ad%d9%83%d9%88%d9%85%d8%a9-%d8%aa%d8%a4%d9%83%d8%af-%d8%a7%d8%b3%d8%aa%d9%82%d8%b1%d8%a7%d8%b1-%d8%a3%d8%b3%d8%b9%d8%a7%d8%b1-%d8%a7%d9%84%d8%a8%d9%88%d8%aa%d8%a7%d9%86-%d9%88%d8%a7/', 'summary': 'الحكومة تؤكد استقرار أسعار البوتان والكهرباء في 2026. - متابعات أكد عزيز أخنوش، رئيس الحكومة، في رسالة تأطيرية لمشروع قانون المالية 2026 ، إلى الوزراء، أن سنة 2026 تعتبر منعطفا أساسيا في منظور تدخل الدولة في المجال...  الحكومة تؤكد استقرار أسعار البوتان والكهرباء في 2026     .', 'size': 2}], 'main_title': 'أخنوش يؤكد استقرار أسعار البوتان والكهرباء في 2026 والشروع في إصلاح التقاعد ابتداءً من شتنبر'}, {'community_id': '8', 'articles': [{'id': '245', 'title': 'بنك المغرب: 71 بالمائة من المقاولات تعتبر مناخ الأعمال عاديا', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a8%d9%86%d9%83-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-71-%d8%a8%d8%a7%d9%84%d9%85%d8%a7%d8%a6%d8%a9-%d9%85%d9%86-%d8%a7%d9%84%d9%85%d9%82%d8%a7%d9%88%d9%84%d8%a7%d8%aa-%d8%aa%d8%b9%d8%aa%d8%a8/', 'summary': 'بنك المغرب: 71 بالمائة من المقاولات تعتبر مناخ الأعمال عاديا. كشف بنك المغرب بأن 71 بالمائة من الصناعيين اعتبروا مناخ الأعمال في القطاع الصناعي “عاديا”، مقابل 16 بالمائة وصفوه بـ”غير الملائم” خلال الفصل الثاني من سنة 2025. وأضاف بنك المغرب في نشرته الأخيرة حول نتائج البحث الفصلي للظرفية، أن هذه النسب بلغت على التوالي 89 بالمائة و11 بالمائة في “قطاع النسيج والجلد”، و75 …  بنك المغرب: 71 بالمائة من المقاولات تعتبر مناخ الأعمال عاديا     .', 'size': 2}, {'id': '316', 'title': 'تقرير: 80 في المائة من المقاولات الصناعية تعتبر الولوج إلى التمويل البنكي عادياً', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%aa%d9%82%d8%b1%d9%8a%d8%b1-80-%d9%81%d9%8a-%d8%a7%d9%84%d9%85%d8%a7%d8%a6%d8%a9-%d9%85%d9%86-%d8%a7%d9%84%d9%85%d9%82%d8%a7%d9%88%d9%84%d8%a7%d8%aa-%d8%a7%d9%84%d8%b5%d9%86%d8%a7%d8%b9%d9%8a/', 'summary': 'تقرير: 80 في المائة من المقاولات الصناعية تعتبر الولوج إلى التمويل البنكي عادياً. أفاد بنك المغرب بأن 80 في المائة من المقاولات الصناعية اعتبرت الولوج إلى التمويل البنكي “عاديا”، فيما رأت 16 في المائة منها أنه “صعب” خلال الفصل الثاني من سنة 2025. وحسب الفروع، بلغت هذه النسب على التوالي 78 و14 في المائة في قطاع “الكيمياء وشبه الكيمياء”، و78 و19 في المائة في “الصناعات الغذائية”، و88 و12', 'size': 2}], 'main_title': 'بنك المغرب: 71 بالمائة من المقاولات تعتبر مناخ الأعمال عاديا'}, {'community_id': '9', 'articles': [{'id': '300', 'title': 'برقية تعزية ومواساة من جلالة الملك إلى أفراد أسرة المرحوم فضيلة الشيخ جمال الدين القادري بودشيش', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/204833', 'summary': 'برقية تعزية ومواساة من جلالة الملك إلى أفراد أسرة المرحوم فضيلة الشيخ جمال الدين القادري بودشيش.  بعث صاحب الجلالة الملك محمد السادس برقية تعزية ومواساة إلى أفراد أسرة المرحوم فضيلة الشيخ جمال الدين القادري بودشيش. وجاء في برقية جلالة الملك، “فقد تلقينا ببالغ التأثر وعميق الأسى، نعي المشمول بعفو الله ورضاه، المرحوم الشيخ جمال الدين القادري بودشيش، شيخ الطريقة القادرية البودشيشية، تقبله الله في عداد الصالحين من عباده، المنعم', 'size': 5}, {'id': '319', 'title': 'وصفه بالفقيد الكبير والمبرور.. تعزية من جلالة الملك إلى أسرة الشيخ جمال الدين القادري بودشيش', 'source': 'kifache.com', 'link': 'https://kifache.com/%d9%88%d8%b5%d9%81%d9%87-%d8%a8%d8%a7%d9%84%d9%81%d9%82%d9%8a%d8%af-%d8%a7%d9%84%d9%83%d8%a8%d9%8a%d8%b1-%d9%88%d8%a7%d9%84%d9%85%d8%a8%d8%b1%d9%88%d8%b1-%d8%aa%d8%b9%d8%b2%d9%8a%d8%a9-%d9%85%d9%86/', 'summary': 'وصفه بالفقيد الكبير والمبرور.. تعزية من جلالة الملك إلى أسرة الشيخ جمال الدين القادري بودشيش. بعث جلالة الملك محمد السادس برقية تعزية ومواساة إلى أفراد أسرة المرحوم فضيلة الشيخ جمال الدين القادري بودشيش. وجاء في برقية جلالة الملك، “فقد تلقينا ببالغ التأثر وعميق الأسى، نعي المشمول بعفو الله ورضاه، المرحوم الشيخ جمال الدين القادري بودشيش، شيخ الطريقة القادرية البودشيشية، تقبله الله في عداد الصالحين من عباده، المنعم عليهم بالمغفرة والرضوان”.', 'size': 5}, {'id': '328', 'title': 'الملك يعزي في وفاة الشيخ جمال الدين القادري بودشيش', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/320629/', 'summary': 'الملك يعزي في وفاة الشيخ جمال الدين القادري بودشيش. بعث صاحب الجلالة الملك محمد السادس برقية تعزية ومواساة إلى أفراد أسرة المرحوم فضيلة الشيخ جمال الدين القادري بودشيش. وجاء في برقية جلالة الملك، “فقد تلقينا ببالغ التأثر وعميق الأسى، نعي المشمول بعفو الله ورضاه، المرحوم الشيخ جمال الدين القادري بودشيش، شيخ الطريقة القادرية البودشيشية، تقبله الله في عداد الصالحين من عباده، المنعم عليهم بالمغفرة', 'size': 5}, {'id': '380', 'title': 'برقية تعزية ومواساة من جلالة الملك إلى أسرة الشيخ جمال الدين القادري بودشيش', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/225773/', 'summary': 'برقية تعزية ومواساة من جلالة الملك إلى أسرة الشيخ جمال الدين القادري بودشيش. بعث صاحب الجلالة الملك محمد السادس برقية تعزية ومواساة إلى أفراد أسرة المرحوم فضيلة الشيخ جمال الدين القادري بودشيش. وجاء في برقية جلالة الملك، “فقد تلقينا ببالغ التأثر وعميق الأسى، نعي المشمول بعفو الله ورضاه، المرحوم الشيخ جمال الدين القادري بودشيش، شيخ الطريقة القادرية البودشيشية، تقبله الله في عداد الصالحين من عباده، المنعم عليهم بالمغفرة', 'size': 5}, {'id': '382', 'title': 'الملك محمد السادس يعزي في وفاة شيخ الطريقة القادرية اليودشيشية', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%85%d8%ad%d9%85%d8%af-%d8%a7%d9%84%d8%b3%d8%a7%d8%af%d8%b3-%d9%8a%d8%b9%d8%b2%d9%8a-%d9%81%d9%8a-%d9%88%d9%81%d8%a7%d8%a9-%d8%b4%d9%8a%d8%ae-%d8%a7%d9%84%d8%b7%d8%b1/', 'summary': 'الملك محمد السادس يعزي في وفاة شيخ الطريقة القادرية اليودشيشية. المساء اليوم – آل باط: بعث الملك محمد السادس برقية تعزية ومواساة إلى أفراد أسرة المرحوم الشيخ جمال الدين القادري بودشيش. وجاء في البرقية الملكية “فقد تلقينا ببالغ التأثر وعميق الأسى، نعي المشمول بعفو الله', 'size': 5}], 'main_title': 'برقية تعزية ومواساة من جلالة الملك إلى أفراد أسرة المرحوم فضيلة الشيخ جمال الدين القادري بودشيش'}, {'community_id': '10', 'articles': [{'id': '310', 'title': 'أشرف حكيمي يفاجئ الجميع ويتحدث بشكل غير مسبوق عن حظوظه في التتويج بالكرة الذهبية', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/sport/proplayers/410807.html', 'summary': 'أشرف حكيمي يفاجئ الجميع ويتحدث بشكل غير مسبوق عن حظوظه في التتويج بالكرة الذهبية. في مقابلة مع قناة "كانال +" الفرنسية، عبّر الدولي المغربي أشرف حكيمي عن فخره بترشيحه لجائزة الكرة الذهبية، مشيرًا إلى أن الموسم الاستثنائي الذي قدمه', 'size': 2}, {'id': '325', 'title': 'حكيمي يرد على اتهامات الاغتصاب: الظلم مؤلم.. والحقيقة ستظهر قريبا', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/320639/', 'summary': 'حكيمي يرد على اتهامات الاغتصاب: الظلم مؤلم.. والحقيقة ستظهر قريبا. في ظل تدفق الأخبار والتكهنات التي أثارتها الاتهامات الموجهة إليه بقضية اغتصاب تعود إلى عام 2023، خرج نجم كرة القدم المغربي أشرف حكيمي عن صمته، مؤكداً ثقته في أن العدالة ستأخذ مجراها وأن الحقيقة ستنكشف في الوقت المناسب. في مقابلة خاصة مع قناة “كانال+” الفرنسية، تحدث حكيمي لأول مرة منذ بداية القضية التي أثارت جدلاً', 'size': 2}], 'main_title': 'أشرف حكيمي يفاجئ الجميع ويتحدث بشكل غير مسبوق عن حظوظه في التتويج بالكرة الذهبية'}, {'community_id': '1', 'articles': [{'id': '330', 'title': 'السكتيوي: عازمون على تحقيق الفوز أمام كينيا', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/320620/', 'summary': 'السكتيوي: عازمون على تحقيق الفوز أمام كينيا. أكد الناخب الوطني، طارق السكتيوي، اليوم السبت بنيروبي، أن المنتخب الوطني للاعبين المحليين عازم على تحقيق الفوز أمام كينيا، غدا الأحد بملعب كاساراني، في مباراة الجولة الثالثة عن المجموعة الأولى لبطولة إفريقيا للاعبين المحليين (شان 2024). وقال السكتيوي خلال ندوة صحفية عقدت قبل المباراة، أن “الهدف الرئيسي هو التأهل إلى الدور الثاني، ولن يتحقق ذلك', 'size': 2}, {'id': '381', 'title': 'المدرب السكيتيوي: المواجهة أمام كينيا صعبة.. لكننا سنفوز', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%a7%d9%84%d9%85%d8%af%d8%b1%d8%a8-%d8%a7%d9%84%d8%b3%d9%83%d9%8a%d8%aa%d9%8a%d9%88%d9%8a-%d8%a7%d9%84%d9%85%d9%88%d8%a7%d8%ac%d9%87%d8%a9-%d8%a3%d9%85%d8%a7%d9%85-%d9%83%d9%8a%d9%86%d9%8a%d8%a7/', 'summary': 'المدرب السكيتيوي: المواجهة أمام كينيا صعبة.. لكننا سنفوز. المساء اليوم: قال مدرب المنتخب الوطني للمحليين، طارق السكتيوي، إن المنتخب عازم على تحقيق الفوز أمام كينيا، اليوم الأحد بملعب كاساراني، في مباراة الجولة الثالثة عن المجموعة الأولى لبطولة إفريقيا للاعبين المحليين (شان 2024). وأضاف', 'size': 2}], 'main_title': 'السكتيوي: عازمون على تحقيق الفوز أمام كينيا'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    