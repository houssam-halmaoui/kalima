<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 03/07/2025 - 12h26</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '7', 'articles': [{'id': '66', 'title': 'بتعليمات ملكية سامية،مؤسسة محمد الخامس للتضامن تطلق العمل بـ13مركزا جديدا في عدد من مدن المملكة', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/202861', 'summary': 'بتعليمات ملكية سامية،مؤسسة محمد الخامس للتضامن تطلق العمل بـ13مركزا جديدا في عدد من مدن المملكة.  أعطى صاحب الجلالة الملك محمد السادس ، نصره الله ، رئيس مؤسسة محمد الخامس للتضامن،تعليماته السامية بوضع المراكز التي أنشأتها المؤسسة في مجالات الصحة والإعاقة و التكوين رهن إشارة الساكنة المعوزة المستفيدة. وأوضحت المؤسسة في بلاغ لها أن الإطلاق الفوري يهم 13 مركزا جديدا تم الانتهاء من أشغال بنائها وتجهيزها بثمان من عمالات', 'size': 5}, {'id': '112', 'title': 'بتعليمات ملكية.. مراكز تضامنية جديدة تفتح أبوابها للفئات المعوزة والشباب', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/408612.html', 'summary': 'بتعليمات ملكية.. مراكز تضامنية جديدة تفتح أبوابها للفئات المعوزة والشباب. أعطى صاحب الجلالة الملك محمد السادس، نصره الله، رئيس مؤسسة محمد الخامس للتضامن، تعليماته السامية بوضع المراكز التي أنشأتها المؤسسة في مجالات الصحة والإعاقة والتكوين', 'size': 5}, {'id': '137', 'title': 'تعليمات ملكية لتفعيل مراكز اجتماعية جديدة تخدم الفئات الهشة', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/317236/', 'summary': 'تعليمات ملكية لتفعيل مراكز اجتماعية جديدة تخدم الفئات الهشة. أعطى صاحب الجلالة الملك محمد السادس، نصره الله، رئيس مؤسسة محمد الخامس للتضامن، تعليماته السامية بوضع المراكز التي أنشأتها المؤسسة في مجالات الصحة والإعاقة والتكوين رهن إشارة الساكنة المعوزة المستفيدة. وأوضحت المؤسسة في بلاغ لها أن الإطلاق الفوري يهم 13 مركزا جديدا تم الانتهاء من أشغال بنائها وتجهيزها بثمان من عمالات وأقاليم المملكة، مضيفة أن', 'size': 5}, {'id': '179', 'title': 'جلالة الملك يأمر بوضع مراكز صحية رهن إشارة الساكنة المعوزة', 'source': 'rue20.com', 'link': 'https://rue20.com/917730.html', 'summary': 'جلالة الملك يأمر بوضع مراكز صحية رهن إشارة الساكنة المعوزة.  . الرباط أعطى صاحب الجلالة الملك محمد السادس، نصره الله، رئيس مؤسسة محمد الخامس للتضامن، تعليماته السامية بوضع المراكز التي أنشأتها المؤسسة في مجالات الصحة والإعاقة والتكوين رهن إشارة الساكنة المعوزة المستفيدة. وأوضحت المؤسسة في بلاغ لها أن الإطلاق الفوري يهم 13 مركزا جديدا تم الانتهاء من أشغال بنائها وتجهيزها بثمان من عمالات الخبر جلالة الملك يأمر بوضع مراكز صحية رهن إشارة الساكنة المعوزة  .', 'size': 5}, {'id': '221', 'title': 'بتعليمات ملكية سامية: محمد الخامس للتضامن تطلق العمل بـ13 مركزا جديدا في عدد من مدن المملكة', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/223945/', 'summary': 'بتعليمات ملكية سامية: محمد الخامس للتضامن تطلق العمل بـ13 مركزا جديدا في عدد من مدن المملكة. الرباط – أعطى صاحب الجلالة الملك محمد السادس، نصره الله، رئيس مؤسسة محمد الخامس للتضامن، تعليماته السامية بوضع المراكز التي أنشأتها المؤسسة في مجالات الصحة والإعاقة والتكوين رهن إشارة الساكنة المعوزة المستفيدة. وأوضحت المؤسسة في بلاغ لها أن الإطلاق الفوري يهم 13 مركزا جديدا تم الانتهاء من أشغال بنائها وتجهيزها بثمان من عمالات وأقاليم المملكة،', 'size': 5}], 'main_title': 'بتعليمات ملكية سامية،مؤسسة محمد الخامس للتضامن تطلق العمل بـ13مركزا جديدا في عدد من مدن المملكة'}, {'community_id': '1', 'articles': [{'id': '67', 'title': 'لفتيت يترأس حفل تخرج الفوج الستين لرجال السلطة', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/202846', 'summary': 'لفتيت يترأس حفل تخرج الفوج الستين لرجال السلطة.  ترأس السيد وزير الداخلية، يومه الأربعاء 2 يوليوز 2025 بالمعهد الملكي للإدارة الترابية بالقنيطرة، حفل تخرج الفوج الستين للسلك العادي لرجال السلطة والذي يضم 113 خريجا و خريجة،وذلك بحضور عدد من الشخصيات المدنية والعسكرية. وقد تخللت هذا الحفل مراسم توزيع الشهادات على المتفوقين، وكذا تقديم استعراض عسكري من طرف المتخرجين. وجسدت هذه المناسبة', 'size': 4}, {'id': '115', 'title': 'وزير الداخلية يترأس حفل تخرج الفوج الستين للسلك العادي لرجال السلطة', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/408615.html', 'summary': 'وزير الداخلية يترأس حفل تخرج الفوج الستين للسلك العادي لرجال السلطة. ترأس وزير الداخلية، عبد الوافي لفتيت، اليوم الأربعاء بالمعهد الملكي للإدارة الترابية بالقنيطرة، حفل تخرج الفوج الستين للسلك العادي لرجال السلطة الذي يضم 113 خريجا', 'size': 2}, {'id': '125', 'title': 'يضم 113 خريجا وخريجة.. وزير الداخلية يترأس حفل تخرج الفوج الـ60 للسلك العادي لرجال السلطة', 'source': 'kifache.com', 'link': 'https://kifache.com/%d9%8a%d8%b6%d9%85-113-%d8%ae%d8%b1%d9%8a%d8%ac%d8%a7-%d9%88%d8%ae%d8%b1%d9%8a%d8%ac%d8%a9-%d9%88%d8%b2%d9%8a%d8%b1-%d8%a7%d9%84%d8%af%d8%a7%d8%ae%d9%84%d9%8a%d8%a9-%d9%8a%d8%aa%d8%b1%d8%a3%d8%b3/', 'summary': 'يضم 113 خريجا وخريجة.. وزير الداخلية يترأس حفل تخرج الفوج الـ60 للسلك العادي لرجال السلطة. ترأس وزير الداخلية، عبد الوافي لفتيت، اليوم الأربعاء (2 يوليوز)، بالمعهد الملكي للإدارة الترابية بالقنيطرة، حفل تخرج الفوج الستين للسلك العادي لرجال السلطة، والذي يضم 113 خريجا وخريجة، وذلك بحضور عدد من الشخصيات المدنية والعسكرية. وأفاد بلاغ لوزارة الداخلية بأن هذا الحفل تخللته مراسم توزيع الشهادات على المتفوقين، وكذا تقديم استعراض عسكري من طرف المتخرجين.', 'size': 4}, {'id': '166', 'title': 'وزير الداخلية يترأس حفل تخرج الفوج الـ60 لرجال السلطة', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d9%88%d8%b2%d9%8a%d8%b1-%d8%a7%d9%84%d8%af%d8%a7%d8%ae%d9%84%d9%8a%d8%a9-%d9%8a%d8%aa%d8%b1%d8%a3%d8%b3-%d8%ad%d9%81%d9%84-%d8%aa%d8%ae%d8%b1%d8%ac-%d8%a7%d9%84%d9%81%d9%88%d8%ac-%d8%a7%d9%84%d9%8060/', 'summary': 'وزير الداخلية يترأس حفل تخرج الفوج الـ60 لرجال السلطة. ترأس وزير الداخلية، عبد الوافي لفتيت، اليوم الأربعاء بالمعهد الملكي للإدارة الترابية بالقنيطرة، حفل تخرج الفوج الستين للسلك العادي لرجال السلطة الذي يضم 113 خريجا وخريجة، وذلك بحضور عدد من الشخصيات المدنية والعسكرية. وذكر بلاغ لوزارة الداخلية أنه تخللت هذا الحفل مراسم توزيع الشهادات على المتفوقين، وكذا تقديم استعراض عسكري من طرف المتخرجين. وأضاف المصدر  وزير الداخلية يترأس حفل تخرج الفوج الـ60 لرجال السلطة     .', 'size': 5}, {'id': '177', 'title': 'لفتيت يشرف على تخرج فوج جديد من رجال السلطة على بعد سنة من الإنتخابات', 'source': 'rue20.com', 'link': 'https://rue20.com/917738.html', 'summary': 'لفتيت يشرف على تخرج فوج جديد من رجال السلطة على بعد سنة من الإنتخابات. . الرباط ترأس وزير الداخلية، عبد الوافي لفتيت، اليوم الأربعاء بالمعهد الملكي للإدارة الترابية بالقنيطرة، حفل تخرج الفوج الستين للسلك العادي لرجال السلطة الذي يضم 113 خريجا وخريجة، وذلك بحضور عدد من الشخصيات المدنية والعسكرية. وذكر بلاغ لوزارة الداخلية أنه تخللت هذا الحفل مراسم توزيع الشهادات على المتفوقين، وكذا تقديم استعراض عسكري من طرف الخبر لفتيت يشرف على تخرج فوج جديد من رجال السلطة على بعد سنة من الإنتخابات  .', 'size': 4}], 'main_title': 'وزير الداخلية يترأس حفل تخرج الفوج الـ60 لرجال السلطة'}, {'community_id': '2', 'articles': [{'id': '95', 'title': 'نقابة مصرية تكرم شيرين بعد جدل حفلها في موازين', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/culture/408595.html', 'summary': 'نقابة مصرية تكرم شيرين بعد جدل حفلها في موازين. في خطوة مثيرة للجدل، قررت نقابة المهن الموسيقية في مصر، برئاسة الفنان مصطفى كامل، تكريم الفنانة شيرين عبد الوهاب، عقب مشاركتها الأخيرة في اختتام مهرجان', 'size': 2}, {'id': '330', 'title': 'نقابة المهن الموسيقية تنصف شرين وتكرمها بعد جدل موازين', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/317214/', 'summary': 'نقابة المهن الموسيقية تنصف شرين وتكرمها بعد جدل موازين. تعتزم نقابة المهن الموسيقية في مصر، برئاسة الفنان مصطفى كامل، تكريم الفنانة شيرين عبد الوهاب، وذلك في خطوة لافتة تأتي عقب الجدل الذي أثارته مشاركتها الأخيرة في حفل ختام النسخة 20 لمهرجان موازين. وفي بيان رسمي، أبدى مصطفى كامل دعمه الكامل لشيرين، واصفا إياها بـ”الزميلة والفنانة المحترمة”، مشيدا بمسيرتها الفنية التي تمتد لأكثر من 25', 'size': 2}], 'main_title': 'نقابة مصرية تكرم شيرين بعد جدل حفلها في موازين'}, {'community_id': '3', 'articles': [{'id': '98', 'title': 'عصابة الحسابات البنكية تسقط في قبضة أمن جرسيف', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/society/408598.html', 'summary': 'عصابة الحسابات البنكية تسقط في قبضة أمن جرسيف. تمكنت عناصر الشرطة بالمنطقة الإقليمية للأمن بمدينة جرسيف بتنسيق مع مصالح المديرية العامة لمراقبة التراب الوطني، صباح اليوم الأربعاء 2 يوليوز الجاري، من توقيف سبعة', 'size': 2}, {'id': '222', 'title': 'جرسيف.. توقيف 7 أشخاص يشتبه تورطهم في النصب وانتحال صفات', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/223942/', 'summary': 'جرسيف.. توقيف 7 أشخاص يشتبه تورطهم في النصب وانتحال صفات. كواليس اليوم تمكنت عناصر الشرطة بالمنطقة الإقليمية للأمن بمدينة جرسيف بتنسيق مع مصالح المديرية العامة لمراقبة التراب الوطني، صباح اليوم الأربعاء 2 يوليوز الجاري، من توقيف سبعة أشخاص يشتبه في تورطهم في قضية تتعلق بالنصب والاحتيال وانتحال صفات ينظمها القانون. وحسب المعطيات الأولية للبحث، فقد كان المشتبه فيهم يتصلون هاتفيا بالضحايا، وينتحلون صفات موظفين', 'size': 2}], 'main_title': 'عصابة الحسابات البنكية تسقط في قبضة أمن جرسيف'}, {'community_id': '4', 'articles': [{'id': '158', 'title': 'تقليص العضوية وتمديد فترة الانتداب.. هذه تفاصيل مشروع جديد يعيد تنظيم مجلس الصحافة', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1082610.html', 'summary': 'تقليص العضوية وتمديد فترة الانتداب.. هذه تفاصيل مشروع جديد يعيد تنظيم مجلس الصحافة. ينتظر أن تصادق الحكومة يوم غد الخميس خلال انعقاد مجلسها الأسبوعي تحت رئاسة عزيز أخنوش رئيس الحكومة، على مشروع قانون رقم 26.25 يتعلق بإعادة تنظيم المجلس الوطني للصحافة. ويهدف هذا المشروع وفق مذكرته التقديمية التي حصلت “العمق المغربي” على نسخة منها إلى تكريس المكتسبات التي حققها القانون رقم 90.13، الصادر بتنفيذه الظهير الشريف رقم 1.16.24 ظهرت المقالة تقليص العضوية وتمديد فترة الانتداب.. هذه تفاصيل مشروع جديد يعيد تنظيم مجلس الصحافة  .', 'size': 2}, {'id': '234', 'title': 'من الانتخاب إلى الانتداب.. مشروع قانون لإعادة تنظيم المجلس الوطني للصحافة يثير الجدل.. وهذه أهم مستجداته', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d9%85%d9%86-%d8%a7%d9%84%d8%a7%d9%86%d8%aa%d8%ae%d8%a7%d8%a8-%d8%a5%d9%84%d9%89-%d8%a7%d9%84%d8%a7%d9%86%d8%aa%d8%af%d8%a7%d8%a8-%d9%85%d8%b4%d8%b1%d9%88%d8%b9-%d9%82%d8%a7%d9%86%d9%88%d9%86-%d9%84/', 'summary': 'من الانتخاب إلى الانتداب.. مشروع قانون لإعادة تنظيم المجلس الوطني للصحافة يثير الجدل.. وهذه أهم مستجداته. ينعقد غدا الخميس 3 يوليوز 2025، مجلس للحكومة برئاسة رئيس الحكومة عزيز أخنوش، حيث من المرتقب أن يتدارس المجلس في بدايته مشروعي قانونين، يتعلق الأول منهما بإعادة تنظيم المجلس الوطني للصحافة، فيما يهم الثاني تعديل وتتميم القانون المتعلق بالنظام الأساسي للصحافيين المهنيين. ووفق ما تضمنته المذكرة التقديمية لمشروع قانون رقم 26.25 المتعلق بإعادة …  من الانتخاب إلى الانتداب.. مشروع قانون لإعادة تنظيم المجلس الوطني للصحافة يثير الجدل.. وهذه أهم مستجداته     .', 'size': 2}], 'main_title': 'تقليص العضوية وتمديد فترة الانتداب.. هذه تفاصيل مشروع جديد يعيد تنظيم مجلس الصحافة'}, {'community_id': '5', 'articles': [{'id': '171', 'title': 'السكوري: الحد من الهدر المدرسي واعتماد التدرج المهني من آليات التصدي للبطالة', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a7%d9%84%d8%b3%d9%83%d9%88%d8%b1%d9%8a-%d8%a7%d9%84%d8%ad%d8%af-%d9%85%d9%86-%d8%a7%d9%84%d9%87%d8%af%d8%b1-%d8%a7%d9%84%d9%85%d8%af%d8%b1%d8%b3%d9%8a-%d9%88%d8%a7%d8%b9%d8%aa%d9%85%d8%a7%d8%af/', 'summary': 'السكوري: الحد من الهدر المدرسي واعتماد التدرج المهني من آليات التصدي للبطالة. أكد وزير الإدماج الاقتصادي والمقاولة الصغرى والتشغيل والكفاءات، يونس السكوري، اليوم الأربعاء بالرباط، أن الحد من الهدر المدرسي واعتماد نمط التدرج المهني يعدان من الآليات الميسرة للولوج إلى سوق الشغل وبالتالي التصدي للبطالة. وأوضح السكوري، في عرض قدمه خلال اجتماع للجنة القطاعات الاجتماعية بمجلس النواب، أن توسيع الطاقة الاستيعابية لمدارس الفرصة الثانية من بين أبرز  السكوري: الحد من الهدر المدرسي واعتماد التدرج المهني من آليات التصدي للبطالة     .', 'size': 2}, {'id': '343', 'title': 'السكوري يدعو إلى إعادة هيكلة “أنابيك” وتوسيع التكوين بالتدرج لمكافحة البطالة', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1082653.html', 'summary': 'السكوري يدعو إلى إعادة هيكلة “أنابيك” وتوسيع التكوين بالتدرج لمكافحة البطالة. أكد وزير الإدماج الاقتصادي والمقاولة الصغرى والتشغيل والكفاءات، يونس السكوري، أن الحد من الهدر المدرسي واعتماد نمط التدرج المهني يعدان من الآليات الميسرة للولوج الى سوق الشغل وبالتالي التصدي للبطالة. وأوضحالسكوري، في عرض قدمه خلال اجتماع للجنة القطاعات الاجتماعية بمجلس النواب، أن توسيع الطاقة الاستيعابية لمدارس الفرصة الثانية من بين أبرز الآليات الكفيلة بالحد من ظهرت المقالة السكوري يدعو إلى إعادة هيكلة “أنابيك” وتوسيع التكوين بالتدرج لمكافحة البطالة  .', 'size': 2}], 'main_title': 'السكوري: الحد من الهدر المدرسي واعتماد التدرج المهني من آليات التصدي للبطالة'}, {'community_id': '8', 'articles': [{'id': '176', 'title': 'الكرة المغربية تسطع بمونديال الأندية بتألق بونو وحكيمي ضمن التشكيلة المثالية', 'source': 'rue20.com', 'link': 'https://rue20.com/917744.html', 'summary': 'الكرة المغربية تسطع بمونديال الأندية بتألق بونو وحكيمي ضمن التشكيلة المثالية. . الرباط كشف الاتحاد الدولي لكرة القدم “فيفا”، اليوم الأربعاء، عن التشكيلة المثالية للدور ثمن النهائي لكأس العالم للأندية، والتي ضمت حارس مرمى الهلال السعودي ياسين بونو، ولاعب باريس سان جيرمان أشرف حكيمي. واستند هذا الاختيار إلى الأداء اللافت الذي قدمه اللاعبان المغربيان؛ فمن جهة قاد حكيمي الفريق الباريسي، بتسجيله الهدف الرابع في شباك الخبر الكرة المغربية تسطع بمونديال الأندية بتألق بونو وحكيمي ضمن التشكيلة المثالية  .', 'size': 2}, {'id': '394', 'title': 'بونو وحكيمي يتألقان ويدخلان التشكيلة المثالية لثمن نهائي مونديال الأندية', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a8%d9%88%d9%86%d9%88-%d9%88%d8%ad%d9%83%d9%8a%d9%85%d9%8a-%d9%8a%d8%aa%d8%a3%d9%84%d9%82%d8%a7%d9%86-%d9%88%d9%8a%d8%af%d8%ae%d9%84%d8%a7%d9%86-%d8%a7%d9%84%d8%aa%d8%b4%d9%83%d9%8a%d9%84%d8%a9/', 'summary': 'بونو وحكيمي يتألقان ويدخلان التشكيلة المثالية لثمن نهائي مونديال الأندية. كشف الاتحاد الدولي لكرة القدم (فيفا) اليوم الأربعاء، عن التشكيلة المثالية للدور ثمن النهائي لبطولة كأس العالم للأندية، والتي شهدت حضوراً مغربياً لافتاً بتواجد كل من حارس مرمى الهلال السعودي ياسين بونو ونجم باريس سان جيرمان أشرف حكيمي. ويأتي هذا الاختيار تتويجاً للأداء الاستثنائي الذي قدمه اللاعبان، حيث قاد أشرف حكيمي فريقه باريس …  بونو وحكيمي يتألقان ويدخلان التشكيلة المثالية لثمن نهائي مونديال الأندية     .', 'size': 2}], 'main_title': 'الكرة المغربية تسطع بمونديال الأندية بتألق بونو وحكيمي ضمن التشكيلة المثالية'}, {'community_id': '0', 'articles': [{'id': '180', 'title': 'إيقاف موثقين عن ممارسة المهنة', 'source': 'rue20.com', 'link': 'https://rue20.com/917727.html', 'summary': 'إيقاف موثقين عن ممارسة المهنة.  . الرباط أصدرت اللجنة المكلفة بالبت في الملفات التأديبية للموثقين، برئاسة مدير الشؤون المدنية والمهن القانونية والقضائية، بوزارة العدل قرارات تأديبية في 26 ملفا. و بحسب بلاغ صادر عن وزارة العدل ، تم إصدار عقوبة الإيقاف عن ممارسة المهنة لمدة ستة أشهر في حق موثق واحد. كما تمت معاقبة موثق واحد و إيقافه الخبر إيقاف موثقين عن ممارسة المهنة  .', 'size': 2}, {'id': '224', 'title': 'تمديد أجل إيداع ملفات طلبات الدعم للصحافة والنشر والطباعة والتوزيع', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%aa%d9%85%d8%af%d9%8a%d8%af-%d8%a3%d8%ac%d9%84-%d8%a5%d9%8a%d8%af%d8%a7%d8%b9-%d9%85%d9%84%d9%81%d8%a7%d8%aa-%d8%b7%d9%84%d8%a8%d8%a7%d8%aa-%d8%a7%d9%84%d8%af%d8%b9%d9%85-%d9%84%d9%84%d8%b5%d8%ad/', 'summary': 'تمديد أجل إيداع ملفات طلبات الدعم للصحافة والنشر والطباعة والتوزيع. المساء اليوم – الرباط: أعلنت وزارة الشباب والثقافة والتواصل (قطاع التواصل)، اليوم الأربعاء، عن تمديد أجل إيداع ملفات طلبات الدعم العمومي لفائدة مؤسسات الصحافة والنشر وشركات الطباعة وشركات التوزيع برسم سنة 2025 إلى غاية 30', 'size': 2}], 'main_title': 'إيقاف موثقين عن ممارسة المهنة'}, {'community_id': '6', 'articles': [{'id': '331', 'title': 'طقس اليوم الخميس…أجواء حارة بعدد من المناطق', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/317254/', 'summary': 'طقس اليوم الخميس…أجواء حارة بعدد من المناطق. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الخميس، أن تتميز الحالة الجوية عامة باستمرار الطقس الحار بالجنوب الشرقي للبلاد وبداخل كل من منطقة سوس والأقاليم الصحراوية للمملكة، بينما سيكون حارا نسبيا إلى حار بالسهول الداخلية. ومن المرتقب نزول قطرات مطرية رعدية فوق كل من مرتفعات الأطلسين الكبير والمتوسط وسفوحها الشرقية، وهضاب الفوسفاط، إضافة إلى كل', 'size': 4}, {'id': '354', 'title': 'حالة الطقس: الحرارة متواصلة مع زخات رعدية', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%ad%d8%a7%d9%84%d8%a9-%d8%a7%d9%84%d8%b7%d9%82%d8%b3-%d8%a7%d9%84%d8%ad%d8%b1%d8%a7%d8%b1%d8%a9-%d9%85%d8%aa%d9%88%d8%a7%d8%b5%d9%84%d8%a9-%d9%85%d8%b9-%d8%b2%d8%ae%d8%a7%d8%aa-%d8%b1%d8%b9%d8%af/', 'summary': 'حالة الطقس: الحرارة متواصلة مع زخات رعدية. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة للخميس، أن تتميز الحالة الجوية عامة باستمرار الطقس الحار بالجنوب الشرقي للبلاد وبداخل كل من منطقة سوس والأقاليم الصحراوية للمملكة، بينما سيكون حارا نسبيا إلى حار بالسهول الداخلية. ومن المرتقب نزول قطرات مطرية رعدية فوق كل من مرتفعات الأطلسين الكبير والمتوسط وسفوحها الشرقية، وهضاب الفوسفاط ، إضافة إلى كل  حالة الطقس: الحرارة متواصلة مع زخات رعدية     .', 'size': 4}, {'id': '355', 'title': 'توقعات أحوال الطقس لليوم الخميس', 'source': 'soltana.ma', 'link': 'https://soltana.ma/1357519.html', 'summary': 'توقعات أحوال الطقس لليوم الخميس. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الخميس، أن تتميز الحالة الجوية عامة باستمرار الطقس الحار بالجنوب الشرقي للبلاد وبداخل كل من منطقة سوس والأقاليم الصحراوية للمملكة، بينما سيكون حارا نسبيا إلى حار بالسهول الداخلية. ومن المرتقب نزول قطرات مطرية رعدية فوق كل من مرتفعات الأطلسين الكبير والمتوسط وسفوحها الشرقية، وهضاب الفوسفاط ، إضافة إلى', 'size': 4}, {'id': '398', 'title': 'طقس حار اليوم الخميس بعدد من مناطق المملكة', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%b7%d9%82%d8%b3-%d8%ad%d8%a7%d8%b1-%d8%a7%d9%84%d9%8a%d9%88%d9%85-%d8%a7%d9%84%d8%ae%d9%85%d9%8a%d8%b3-%d8%a8%d8%b9%d8%af%d8%af-%d9%85%d9%86-%d9%85%d9%86%d8%a7%d8%b7%d9%82-%d8%a7%d9%84%d9%85%d9%85/', 'summary': 'طقس حار اليوم الخميس بعدد من مناطق المملكة. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الخميس، أن تتميز الحالة الجوية عامة باستمرار الطقس الحار بالجنوب الشرقي للبلاد وبداخل كل من منطقة سوس والأقاليم الصحراوية للمملكة، بينما سيكون حارا نسبيا إلى حار بالسهول الداخلية. ومن المرتقب نزول قطرات مطرية رعدية فوق كل من مرتفعات الأطلسين الكبير والمتوسط وسفوحها الشرقية، وهضاب الفوسفاط ، …  طقس حار اليوم الخميس بعدد من مناطق المملكة     .', 'size': 4}], 'main_title': 'طقس اليوم الخميس…أجواء حارة بعدد من المناطق'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    