<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 05/09/2025 - 18h27</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '3', 'title': 'إصابة مدرس طعنا بسكين في ألمانيا', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d8%a5%d8%b5%d8%a7%d8%a8%d8%a9-%d9%85%d8%af%d8%b1%d8%b3-%d8%b7%d8%b9%d9%86%d8%a7-%d9%81%d9%8a-%d8%ba%d8%b1%d8%a8-%d8%a3%d9%84%d9%85%d8%a7%d9%86%d9%8a%d8%a7-1619207.html', 'summary': 'إصابة مدرس طعنا بسكين في ألمانيا. أصيب مدرس، صباح اليوم الجمعة، طعنا في معهد للتعليم المهني في إيسن في غرب ألمانيا، وفق ما أعلنت الشرطة التي قالت إنها تنفذ “عملية تدخل واسعة”. وكتبت شرطة رينانيا الشمالية-فيستفاليا، عبر منصة “إكس”، “أصيب المدرس بجروح جراء سلاح أبيض خلال هجوم”. وأوضحت الشرطة ذاتها أن عناصرها منتشرون بأعداد كبيرة في المكان؛ لكن من دون إعطاء  إصابة مدرس طعنا بسكين في ألمانيا     - هسبريس جريدة إلكترونية مغربية .', 'size': 2}, {'id': '401', 'title': 'إصابة مدرس طعنا بسكين في معهد للتعليم بألمانيا', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a5%d8%b5%d8%a7%d8%a8%d8%a9-%d9%85%d8%af%d8%b1%d8%b3-%d8%b7%d8%b9%d9%86%d8%a7-%d8%a8%d8%b3%d9%83%d9%8a%d9%86-%d9%81%d9%8a-%d9%85%d8%b9%d9%87%d8%af-%d9%84%d9%84%d8%aa%d8%b9%d9%84%d9%8a%d9%85-%d8%a8/', 'summary': 'إصابة مدرس طعنا بسكين في معهد للتعليم بألمانيا. أفادت وكالة “فرانس بريس” أن مدرسا أصيب صباح اليوم الجمعة 5 شتنبر 2025، طعنا في معهد للتعليم المهني في إيسن في غرب ألمانيا، وفق ما أعلنت الشرطة التي قالت إنها تنفذ “عملية تدخل واسعة”. وكتبت شرطة رينانيا الشمالية-فيستفاليا، عبر منصة “إكس”، “أصيب المدرس بجروح جراء سلاح أبيض خلال هجوم”. وأوضحت الشرطة ذاتها أن …  إصابة مدرس طعنا بسكين في معهد للتعليم بألمانيا     .', 'size': 2}], 'main_title': 'إصابة مدرس طعنا بسكين في ألمانيا'}, {'community_id': '1', 'articles': [{'id': '30', 'title': 'الملك يهنئ قادة الدول الإسلامية بمناسبة ذكرى المولد النبوي', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-654566.html', 'summary': 'الملك يهنئ قادة الدول الإسلامية بمناسبة ذكرى المولد النبوي. هبة بريس ـ الرباط بمناسبة احتفال الأمة الإسلامية بذكرى المولد النبوي الشريف (1447 هـ – 2025 م)، بعث أمير المؤمنين، صاحب الجلالة الملك محمد السادس، حفظه الله ورعاه، بطاقات تهنئة إلى أشقائه أصحاب الجلالة والفخامة والسمو، ملوك ورؤساء وأمراء الدول الإسلامية، ضمنها جلالته أسمى التهاني والتبريكات، وأطيب المتمنيات لهم بموفور الصحة والسعادة والهناء.', 'size': 2}, {'id': '205', 'title': 'الملك يهنئ ملوك ورؤساء وأمراء الدول الإسلامية بمناسبة ذكرى المولد النبوي', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/474556.html', 'summary': 'الملك يهنئ ملوك ورؤساء وأمراء الدول الإسلامية بمناسبة ذكرى المولد النبوي. و.م.ع بمناسبة احتفال الأمة الإسلامية بذكرى المولد النبوي الشريف (1447 هـ – 2025 م)، بعث أمير المؤمنين، الملك محمد السادس، بطاقات تهنئة إلى ملوك ورؤساء وأمراء الدول الإسلامية، ضمنها جلالته أسمى التهاني والتبريكات، وأطيب المتمنيات لهم بموفور الصحة والسعادة والهناء.', 'size': 2}], 'main_title': 'الملك يهنئ قادة الدول الإسلامية بمناسبة ذكرى المولد النبوي'}, {'community_id': '2', 'articles': [{'id': '63', 'title': 'ولي العهد الأمير مولاي الحسن يدشن ملعب “الأمير مولاي عبد الله” بالرباط', 'source': 'www.alakhbar.press.ma', 'link': 'https://www.alakhbar.press.ma/%d9%88%d9%84%d9%8a-%d8%a7%d9%84%d8%b9%d9%87%d8%af-%d8%a7%d9%84%d8%a3%d9%85%d9%8a%d8%b1-%d9%85%d9%88%d9%84%d8%a7%d9%8a-%d8%a7%d9%84%d8%ad%d8%b3%d9%86-%d9%8a%d8%af%d8%b4%d9%86-%d9%85%d9%84%d8%b9%d8%a8-272398.html', 'summary': 'ولي العهد الأمير مولاي الحسن يدشن ملعب “الأمير مولاي عبد الله” بالرباط. بأمر من الملك محمد السادس أشرف ولي العهد الأمير مولاي الحسن، اليوم الخميس بالرباط، على تدشين ملعب “الأمير مولاي عبد الله”، بعد أشغال إعادة تشييده، والتي مكنت من ملاءمة هذه البنية التحتية الرياضية الرفيعة، مع معايير الاتحاد الدولي لكرة القدم (فيفا) 2030. وتم تصميم هذا الملعب الجديد، الذي تأتي إعادة بنائه تنفيذا للتوجيهات …  ولي العهد الأمير مولاي الحسن يدشن ملعب “الأمير مولاي عبد الله” بالرباط     .', 'size': 2}, {'id': '237', 'title': 'ولي العهد يشرف على تدشين ملعب الأمير مولاي عبد الله', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d9%88%d9%84%d9%8a-%d8%a7%d9%84%d8%b9%d9%87%d8%af-%d9%8a%d8%b4%d8%b1%d9%81-%d8%b9%d9%84%d9%89-%d8%aa%d8%af%d8%b4%d9%8a%d9%86-%d9%85%d9%84%d8%b9%d8%a8-%d8%a7%d9%84%d8%a3%d9%85%d9%8a%d8%b1-%d9%85%d9%88/', 'summary': 'ولي العهد يشرف على تدشين ملعب الأمير مولاي عبد الله. المساء اليوم – الرباط: أشرف ولي العهد الأمير مولاي الحسن، اليوم الخميس بالرباط، على تدشين ملعب “الأمير مولاي عبد الله”، بعد أشغال إعادة تشييده، والتي مكنته من الملاءمة مع معايير الاتحاد الدولي لكرة القدم (فيفا)', 'size': 2}], 'main_title': 'ولي العهد الأمير مولاي الحسن يدشن ملعب “الأمير مولاي عبد الله” بالرباط'}, {'community_id': '3', 'articles': [{'id': '66', 'title': 'أمير المؤمنين يصدر أمره المطاع إلى المجلس العلمي الأعلى بإصدار فتوى شاملة توضح للناس أحكام الشرع في موضوع الزكاة', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/205762', 'summary': 'أمير المؤمنين يصدر أمره المطاع إلى المجلس العلمي الأعلى بإصدار فتوى شاملة توضح للناس أحكام الشرع في موضوع الزكاة.  تفضل أمير المؤمنين، صاحب الجلالة الملك محمد السادس، أعزه الله، فأصدر أمره المطاع إلى المجلس العلمي الأعلى بإصدار فتوى شاملة توضح للناس أحكام الشرع في موضوع الزكاة. وفي ما يلي بلاغ المجلس العلمي الأعلى بهذا الخصوص: “يعلن المجلس العلمي الأعلى أن مولانا أمير المؤمنين، صاحب الجلالة الملك محمد السادس، أعزه الله، قد تفضل فأصدر', 'size': 5}, {'id': '133', 'title': 'المجلس العلمي الأعلى: أمير المؤمنين يأمر بإصدار فتوى توضح أحكام الشرع في الزكاة', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a7%d9%84%d9%85%d8%ac%d9%84%d8%b3-%d8%a7%d9%84%d8%b9%d9%84%d9%85%d9%8a-%d8%a7%d9%84%d8%a3%d8%b9%d9%84%d9%89-%d8%a3%d9%85%d9%8a%d8%b1-%d8%a7%d9%84%d9%85%d8%a4%d9%85%d9%86%d9%8a%d9%86-%d9%8a%d8%a3/', 'summary': 'المجلس العلمي الأعلى: أمير المؤمنين يأمر بإصدار فتوى توضح أحكام الشرع في الزكاة. تفضل أمير المؤمنين، صاحب الجلالة الملك محمد السادس، أعزه الله، فأصدر أمره المطاع إلى المجلس العلمي الأعلى بإصدار فتوى شاملة توضح للناس أحكام الشرع في موضوع الزكاة. وفي ما يلي بلاغ المجلس العلمي الأعلى بهذا الخصوص: “يعلن المجلس العلمي الأعلى أن مولانا أمير المؤمنين، صاحب الجلالة الملك محمد السادس، أعزه الله، قد تفضل فأصدر أمره', 'size': 5}, {'id': '148', 'title': 'أمر ملكي للمجلس العلمي الأعلى لإصدار فتوى حول احكام الزكاة', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/322564/', 'summary': 'أمر ملكي للمجلس العلمي الأعلى لإصدار فتوى حول احكام الزكاة. أمير المؤمنين يصدر أمره المطاع إلى المجلس العلمي الأعلى بإصدار فتوى شاملة توضح للناس أحكام الشرع في موضوع الزكاة تفضل أمير المؤمنين، صاحب الجلالة الملك محمد السادس، أعزه الله، فأصدر أمره المطاع إلى المجلس العلمي الأعلى بإصدار فتوى شاملة توضح للناس أحكام الشرع في موضوع الزكاة. وفي ما يلي بلاغ المجلس العلمي الأعلى بهذا', 'size': 5}, {'id': '186', 'title': 'الملك يأمر بإصدار فتوى شاملة توضح للناس أحكام الشرع في الزكاة', 'source': 'soltana.ma', 'link': 'https://soltana.ma/1357759.html', 'summary': 'الملك يأمر بإصدار فتوى شاملة توضح للناس أحكام الشرع في الزكاة. أصدر الملك محمد السادس، أمره إلى المجلس العلمي الأعلى بإصدار فتوى شاملة توضح للناس أحكام الشرع في موضوع الزكاة. وفي ما يلي بلاغ المجلس العلمي الأعلى بهذا الخصوص: “يعلن المجلس العلمي الأعلى أن مولانا أمير المؤمنين، صاحب الجلالة الملك محمد السادس، أعزه الله، قد تفضل فأصدر أمره المطاع إلى المجلس العلمي الأعلى بإصدار فتوى شاملة', 'size': 5}, {'id': '243', 'title': 'أمير المؤمنين الملك محمد السادس يأمر بإصدار فتوى توضح أحكام الشرع في الزكاة', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a3%d9%85%d9%8a%d8%b1-%d8%a7%d9%84%d9%85%d8%a4%d9%85%d9%86%d9%8a%d9%86-%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%85%d8%ad%d9%85%d8%af-%d8%a7%d9%84%d8%b3%d8%a7%d8%af%d8%b3-%d9%8a%d8%a3%d9%85%d8%b1-%d8%a8/', 'summary': 'أمير المؤمنين الملك محمد السادس يأمر بإصدار فتوى توضح أحكام الشرع في الزكاة. تفضل أمير المؤمنين، الملك محمد السادس، فأصدر أمره المطاع إلى المجلس العلمي الأعلى بإصدار فتوى شاملة توضح للناس أحكام الشرع في موضوع الزكاة. وفي ما يلي بلاغ المجلس العلمي الأعلى بهذا الخصوص: “يعلن المجلس العلمي الأعلى أن مولانا أمير المؤمنين، صاحب الجلالة الملك محمد السادس، أعزه الله، قد تفضل فأصدر أمره المطاع إلى …  أمير المؤمنين الملك محمد السادس يأمر بإصدار فتوى توضح أحكام الشرع في الزكاة     .', 'size': 5}], 'main_title': 'أمير المؤمنين يصدر أمره المطاع إلى المجلس العلمي الأعلى بإصدار فتوى شاملة توضح للناس أحكام الشرع في موضوع الزكاة'}, {'community_id': '4', 'articles': [{'id': '104', 'title': 'حكومة مالي ترفع دعوى قضائية ضد الجزائر أمام محكمة العدل الدولية', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/world/412183.html', 'summary': 'حكومة مالي ترفع دعوى قضائية ضد الجزائر أمام محكمة العدل الدولية. أعلنت الحكومة المالية اليوم الخميس أنها تقدمت بدعوى قضائية ضد الجزائر أمام محكمة العدل الدولية. جاء ذلك في بيان صادر عن وزارة الإدارة الترابية واللامركزية', 'size': 2}, {'id': '206', 'title': 'مالي تلجأ لمحكمة العدل الدولية وترفع دعوى ضد الجزائر', 'source': 'machahid24.com', 'link': 'https://machahid24.com/international/474551.html', 'summary': 'مالي تلجأ لمحكمة العدل الدولية وترفع دعوى ضد الجزائر. لجأت مالي إلى محكمة العدل الدولية ورفعت دعوى ضد الدولة الجزائرية، على خلفية تدمير قواتها طائرة استطلاع مسيّرة تابعة للقوات المسلحة المالية قبل أشهر.', 'size': 2}], 'main_title': 'حكومة مالي ترفع دعوى قضائية ضد الجزائر أمام محكمة العدل الدولية'}, {'community_id': '5', 'articles': [{'id': '105', 'title': 'الأمن يطيح ببطل فيديو سرقة بالخطف باستخدام دراجة نارية', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/society/412184.html', 'summary': 'الأمن يطيح ببطل فيديو سرقة بالخطف باستخدام دراجة نارية. تمكنت عناصر الشرطة بولاية أمن القنيطرة بتنسيق مع نظيرتها بمدينة أيت ملول، وعلى ضوء معلومات دقيقة وفرتها مصالح المديرية العامة لمراقبة التراب الوطني، زوال اليوم', 'size': 2}, {'id': '249', 'title': 'القنيطرة.. تنسيق أمني يُسقط متورطًا في السرقة بالخطف في أيت ملول', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d9%82%d9%86%d9%8a%d8%b7%d8%b1%d8%a9-%d8%aa%d9%86%d8%b3%d9%8a%d9%82-%d8%a3%d9%85%d9%86%d9%8a-%d9%8a%d9%8f%d8%b3%d9%82%d8%b7-%d9%85%d8%aa%d9%88%d8%b1%d8%b7%d9%8b%d8%a7-%d9%81%d9%8a-%d8%a7/', 'summary': 'القنيطرة.. تنسيق أمني يُسقط متورطًا في السرقة بالخطف في أيت ملول. تمكنت عناصر الشرطة بولاية أمن القنيطرة بتنسيق مع نظيرتها بمدينة أيت ملول، وعلى ضوء معلومات دقيقة وفرتها مصالح المديرية العامة لمراقبة التراب الوطني، زوال اليوم الخميس 4 شتنبر 2025، من توقيف شخص يبلغ من العمر 25 سنة، وذلك للاشتباه في تورطه في قضية تتعلق بالسرقة بالخطف وباستعمال ناقلة ذات محرك. وكشفت مصادر أمنية، …  القنيطرة.. تنسيق أمني يُسقط متورطًا في السرقة بالخطف في أيت ملول     .', 'size': 3}, {'id': '360', 'title': 'السرقة بالخطف توقع بشاب في قبضة أمن القنيطرة', 'source': 'rue20.com', 'link': 'https://rue20.com/933907.html', 'summary': 'السرقة بالخطف توقع بشاب في قبضة أمن القنيطرة.  | علي التومي تمكنت عناصر الشرطة بولاية أمن القنيطرة، بتنسيق مع نظيرتها بمدينة أيت ملول، وبدعم من معلومات دقيقة وفرتها مصالح المديرية العامة لمراقبة التراب الوطني، امس الخميس 4 شتنبر الجاري، من توقيف شاب يبلغ من العمر 25 سنة، للاشتباه في تورطه في قضية تتعلق بالسرقة بالخطف باستعمال ناقلة ذات محرك. وكان المشتبه الخبر السرقة بالخطف توقع بشاب في قبضة أمن القنيطرة  .', 'size': 2}], 'main_title': 'القنيطرة.. تنسيق أمني يُسقط متورطًا في السرقة بالخطف في أيت ملول'}, {'community_id': '10', 'articles': [{'id': '110', 'title': '"شابة إسبانية تروي كيف استرجعت هاتفها المسروق بفضل تدخل سريع من الشرطة المغربية', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/society/412190.html', 'summary': '"شابة إسبانية تروي كيف استرجعت هاتفها المسروق بفضل تدخل سريع من الشرطة المغربية. شابة إسبانية تُدعى كريستينا روت تجربتها في استرجاع هاتفها المسروق، الذي تم رصده عبر خاصية "Find my iPhe" في المغرب بعد أن سُرق في مدريد. رغم', 'size': 2}, {'id': '181', 'title': 'شابة إسبانية تسترجع هاتفها المسروق من المغرب بفضل تدخل أمني سريع', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%b4%d8%a7%d8%a8%d8%a9-%d8%a5%d8%b3%d8%a8%d8%a7%d9%86%d9%8a%d8%a9-%d8%aa%d8%b3%d8%aa%d8%b1%d8%ac%d8%b9-%d9%87%d8%a7%d8%aa%d9%81%d9%87%d8%a7-%d8%a7%d9%84%d9%85%d8%b3%d8%b1%d9%88%d9%82-%d9%85%d9%86/', 'summary': 'شابة إسبانية تسترجع هاتفها المسروق من المغرب بفضل تدخل أمني سريع. في واقعة أثارت جدلاً على شبكات التواصل الاجتماعي، روت شابة إسبانية تُدعى كريستينا تجربتها في استرجاع هاتفها المسروق بعدما تبين أنه انتقل من مدريد إلى المغرب، مؤكدة أن الشرطة المغربية تعاملت مع قضيتها "بسرعة وفعالية" مقارنة بنظيرتها الإسبانية. من مدريد إلى المغرب عبر خاصية "تحديد الموقع" كريستينا أوضحت أنها تعرضت لسرقة هاتفها في العاصمة مدريد  شابة إسبانية تسترجع هاتفها المسروق من المغرب بفضل تدخل أمني سريع     .', 'size': 2}], 'main_title': '"شابة إسبانية تروي كيف استرجعت هاتفها المسروق بفضل تدخل سريع من الشرطة المغربية'}, {'community_id': '9', 'articles': [{'id': '172', 'title': 'المنتخب الوطني ينهي استعداداته لمواجهة النيجر على ملعب الأمير مولاي عبد الله', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1097359.html', 'summary': 'المنتخب الوطني ينهي استعداداته لمواجهة النيجر على ملعب الأمير مولاي عبد الله. أنهى المنتخب الوطني استعداداته لمواجهة النيجر، ضمن التصفيات الإفريقية المؤهلة إلى نهائيات كأس العالم 2026، والمقررة مساء غد الجمعة على أرضية المجمع الرياضي الأمير مولاي عبد الله بالرباط. وجرت الحصة التدريبية الأخيرة مساء الخميس على أرضية الملعب ذاته، بعد ساعات قليلة من تدشينه رسميًا من قبل الأمير مولاي الحسن، وعرفت حضورًا إعلاميًا وازنًا. وركز الناخب ظهرت المقالة المنتخب الوطني ينهي استعداداته لمواجهة النيجر على ملعب الأمير مولاي عبد الله  .', 'size': 2}, {'id': '366', 'title': 'آلاف الجماهير المغربية تتوافد على ملعب مولاي عبد الله لمساندة الأسود', 'source': 'rue20.com', 'link': 'https://rue20.com/933884.html', 'summary': 'آلاف الجماهير المغربية تتوافد على ملعب مولاي عبد الله لمساندة الأسود.  ا الرباط توافدت أعداد كبيرة من الجماهير المغربية، منذ الساعة الثالثة زوالا الجمعة، على المجمع الرياضي الأمير مولاي عبد الله بالرباط، وذلك لمتابعة المباراة التي تجمع المنتخب الوطني المغربي بنظيره منتخب النيجر برسم تصفيات كأس العالم 2026. وعرفت محيط المركب حضورًا جماهيريًا لافتًا، حيث تزينت المدرجات بألوان العلم الوطني، وسط أجواء حماسية رددت الخبر آلاف الجماهير المغربية تتوافد على ملعب مولاي عبد الله لمساندة الأسود  .', 'size': 2}], 'main_title': 'المنتخب الوطني ينهي استعداداته لمواجهة النيجر على ملعب الأمير مولاي عبد الله'}, {'community_id': '11', 'articles': [{'id': '185', 'title': 'العقار في المغرب: أسعار شبه مستقرة ومعاملات تتهاوى بأكثر من 20%', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a7%d9%84%d8%b9%d9%82%d8%a7%d8%b1-%d9%81%d9%8a-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d8%a3%d8%b3%d8%b9%d8%a7%d8%b1-%d8%b4%d8%a8%d9%87-%d9%85%d8%b3%d8%aa%d9%82%d8%b1%d8%a9-%d9%88%d9%85%d8%b9%d8%a7/', 'summary': 'العقار في المغرب: أسعار شبه مستقرة ومعاملات تتهاوى بأكثر من 20%. كشف بنك المغرب والوكالة الوطنية للمحافظة العقارية والمسح العقاري والخرائطية أن مؤشر أسعار الأصول العقارية ظل شبه مستقر خلال الفصل الثاني من سنة 2025، لكن السوق واصل تسجيل ركود واضح مع تراجع المعاملات بنسبة تفوق 21 في المائة. ورغم تسجيل ارتفاع طفيف في أسعار العقارات السكنية بنسبة 0,1 في المائة، فإن أسعار الأراضي والعقارات ذات  العقار في المغرب: أسعار شبه مستقرة ومعاملات تتهاوى بأكثر من 20%     .', 'size': 2}, {'id': '399', 'title': 'سوق العقار بالمغرب يسجل تراجعا ملحوظا خلال السنة الجارية', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%b3%d9%88%d9%82-%d8%a7%d9%84%d8%b9%d9%82%d8%a7%d8%b1-%d8%a8%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d9%8a%d8%b3%d8%ac%d9%84-%d8%aa%d8%b1%d8%a7%d8%ac%d8%b9%d8%a7-%d9%85%d9%84%d8%ad%d9%88%d8%b8%d8%a7/', 'summary': 'سوق العقار بالمغرب يسجل تراجعا ملحوظا خلال السنة الجارية. كشف بنك المغرب والوكالة الوطنية للمحافظة العقارية والمسح العقاري والخرائطية أن مؤشر أسعار الأصول العقارية عرف استقرارا على أساس سنوي خلال الفصل الثاني من 2025، في وقت واصلت فيه المعاملات منحاها التراجعي. وأوضح المصدر ذاته، في مذكرة حول توجهات سوق العقار، أن هذا الاستقرار يعكس ارتفاعا طفيفا بنسبة 0,1% في أسعار العقارات السكنية، …  سوق العقار بالمغرب يسجل تراجعا ملحوظا خلال السنة الجارية     .', 'size': 2}], 'main_title': 'العقار في المغرب: أسعار شبه مستقرة ومعاملات تتهاوى بأكثر من 20%'}, {'community_id': '6', 'articles': [{'id': '299', 'title': 'تعيينات جديدة في مناصب المسؤولية بالمصالح اللاممركزة للأمن الوطني', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/205779', 'summary': 'تعيينات جديدة في مناصب المسؤولية بالمصالح اللاممركزة للأمن الوطني.  مواصلة لمسار تنزيل استراتيجية ترسيخ التداول على مناصب المسؤولية وفتح الباب أمام الكفاءات المتمرسة والشابة لتحمل مسؤولية التسيير الأمني، أعلنت المديرية العامة للأمن الوطني، زوال اليوم الجمعة 05 شتنبر الجاري،عن قائمة جديدة تتضمن عددا من التعيينات في مناصب المسؤولية بالمصالح اللاممركزة للأمن الوطني بمدن تزنيت والرباط والمحمدية ووجدة وأكادير وتارودانت وفاس. وقد شملت', 'size': 3}, {'id': '321', 'title': 'شملت 7 مدن.. حموشي يؤشر على تعيينات جديدة في مناصب المسؤولية بمصالح الأمن الوطني', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%b4%d9%85%d9%84%d8%aa-7-%d9%85%d8%af%d9%86-%d8%ad%d9%85%d9%88%d8%b4%d9%8a-%d9%8a%d8%a4%d8%b4%d8%b1-%d8%b9%d9%84%d9%89-%d8%aa%d8%b9%d9%8a%d9%8a%d9%86%d8%a7%d8%aa-%d8%ac%d8%af%d9%8a%d8%af%d8%a9/', 'summary': 'شملت 7 مدن.. حموشي يؤشر على تعيينات جديدة في مناصب المسؤولية بمصالح الأمن الوطني. أعلنت المديرية العامة للأمن الوطني، زوال اليوم الجمعة (5 شتنبر)، عن قائمة جديدة تتضمن عددا من التعيينات في مناصب المسؤولية بالمصالح اللاممركزة للأمن الوطني، بمدن تزنيت والرباط والمحمدية ووجدة وأكادير وتارودانت وفاس. وأفاد مصدر أمني بأن هذه التعينات تأتي مواصلة لمسار تنزيل استراتيجية ترسيخ التداول على مناصب المسؤولية وفتح الباب أمام الكفاءات المتمرسة والشابة لتحمل', 'size': 3}, {'id': '392', 'title': 'عبد اللطيف حموشي يؤشر على تعيينات جديدة في مناصب المسؤولية بمصالح الأمن الوطني', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/226706/', 'summary': 'عبد اللطيف حموشي يؤشر على تعيينات جديدة في مناصب المسؤولية بمصالح الأمن الوطني. مواصلة لمسار تنزيل استراتيجية ترسيخ التداول على مناصب المسؤولية وفتح الباب أمام الكفاءات المتمرسة والشابة لتحمل مسؤولية التسيير الأمني، أعلنت المديرية العامة للأمن الوطني، زوال اليوم الجمعة 05 شتنبر الجاري، عن قائمة جديدة تتضمن عددا من التعيينات في مناصب المسؤولية بالمصالح اللاممركزة للأمن الوطني بمدن تزنيت والرباط والمحمدية ووجدة وأكادير وتارودانت وفاس. وقد شملت', 'size': 3}], 'main_title': 'تعيينات جديدة في مناصب المسؤولية بالمصالح اللاممركزة للأمن الوطني'}, {'community_id': '8', 'articles': [{'id': '324', 'title': 'الر كراكي يستدعي الباش لتعويض داري', 'source': 'assabah.ma', 'link': 'https://assabah.ma/869421.html', 'summary': 'الر كراكي يستدعي الباش لتعويض داري. وجه وليد الركراكي، مدرب المنتخب الوطني، الدعوة إلى أنس الباش، لاعب الجيش الملكي، لحضور مباراة المنتخب الوطني أمام زامبيا، المقرر إجراؤها، الاثنين المقبل، لحساب الجولة الثامنة، من مباريات المجموعة الخامسة، المؤهلة إلى نهائيات كأس العالم. وعلمت “الصباح”، أن الركراكي استدعى الباش، لتعويض غياب أشرف داري، مدافعأكمل القراءة » المقالة الر كراكي يستدعي الباش لتعويض داري  .', 'size': 2}, {'id': '343', 'title': 'الركراكي يستدعي أنس باش للمنتخب الوطني لتعويض داري المصاب', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1097488.html', 'summary': 'الركراكي يستدعي أنس باش للمنتخب الوطني لتعويض داري المصاب. وجه مدرب المنتخب الوطني الأول، وليد الركراكي، الدعوة إلى اللاعب أنس باش، للالتحاق بالمجموعة قبل مواجهتيْ النيجر وزامبيا، لحساب التصفيات الأفريقية المؤهلة إلى نهائيات كأس العالم 2026. وعلمت جريدة “العمق المغربي” أن المناداة على لاعب الجيش الملكي، تأتي لتعويض غياب المدافع أشرف داري، الذي غادر معسكر “أسود الأطلس” بسبب الإصابة التي يعاني منها. وتألق باش ظهرت المقالة الركراكي يستدعي أنس باش للمنتخب الوطني لتعويض داري المصاب  .', 'size': 2}], 'main_title': 'الر كراكي يستدعي الباش لتعويض داري'}, {'community_id': '7', 'articles': [{'id': '340', 'title': 'التوفيق: ضعف التدين بارز وكلفة الدولة لإصلاح الحياة تزداد فداحة ويجب تقوية وازع القرآن', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1097499.html', 'summary': 'التوفيق: ضعف التدين بارز وكلفة الدولة لإصلاح الحياة تزداد فداحة ويجب تقوية وازع القرآن. قال وزير الأوقاف والشؤون الإسلامية، أحمد التوفيق، إن الواقع يكشف أن ضعف التدين، على أساس السلوك، بارز في ما هو مرصود بمؤشرات الإحصاء، وأن كلفة تدخل الدولة لإصلاح الحياة في هذا الوضع كلفة تزداد كل عام فداحة. وأوضح التوفيق، خلال عرض حصيلة أنشطة المجلس العلمي الأعلى، قدمه أمام الملك محمد السادس، خلال الحفل الديني الذي ظهرت المقالة التوفيق: ضعف التدين بارز وكلفة الدولة لإصلاح الحياة تزداد فداحة ويجب تقوية وازع القرآن  .', 'size': 2}, {'id': '352', 'title': 'التوفيق: ضعف التدين يفاقم كلفة تدخل الدولة.. وخطة التبليغ تستقطب الاهتمام', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a7%d9%84%d8%aa%d9%88%d9%81%d9%8a%d9%82-%d8%b6%d8%b9%d9%81-%d8%a7%d9%84%d8%aa%d8%af%d9%8a%d9%86-%d9%8a%d9%81%d8%a7%d9%82%d9%85-%d9%83%d9%84%d9%81%d8%a9-%d8%aa%d8%af%d8%ae%d9%84-%d8%a7%d9%84%d8%af/', 'summary': 'التوفيق: ضعف التدين يفاقم كلفة تدخل الدولة.. وخطة التبليغ تستقطب الاهتمام. قال أحمد توفيق، وزير الأوقاف والشؤون الإسلامية حين حديثه عن "تحقيق الحياة الطيبة" أن "الواقع الحالي يكشف عن أمرين، أولهما أن ضعف التدين، على أساس السلوك، بارز في ما هو مرصود بمؤشرات الإحصاء، وثانيهما أن كلفة تدخل الدولة لإصلاح الحياة في هذا الوضع كلفة تزداد كل عام فداحة". وأضاف في كلمته أمام الملك محمد السادس  التوفيق: ضعف التدين يفاقم كلفة تدخل الدولة.. وخطة التبليغ تستقطب الاهتمام     .', 'size': 2}], 'main_title': 'التوفيق: ضعف التدين بارز وكلفة الدولة لإصلاح الحياة تزداد فداحة ويجب تقوية وازع القرآن'}, {'community_id': '12', 'articles': [{'id': '373', 'title': '“ذي إيكونوميست” البريطانية: المغرب بقيادة الملك يرسخ مكانته كقوة تجارية وصناعية', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/474604.html', 'summary': '“ذي إيكونوميست” البريطانية: المغرب بقيادة الملك يرسخ مكانته كقوة تجارية وصناعية. كتبت مجلة "ذي إيكونوميست" البريطانية، أن المغرب بقيادة الملك محمد السادس، رسخ مكانته كقوة تجارية وصناعية.', 'size': 2}, {'id': '397', 'title': 'ذي إيكونوميست: رؤية الملك محمد السادس تحوّل المغرب إلى منصة عالمية للتجارة والصناعة', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%b0%d9%8a-%d8%a5%d9%8a%d9%83%d9%88%d9%86%d9%88%d9%85%d9%8a%d8%b3%d8%aa-%d8%b1%d8%a4%d9%8a%d8%a9-%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%85%d8%ad%d9%85%d8%af-%d8%a7%d9%84%d8%b3%d8%a7%d8%af%d8%b3-%d8%aa/', 'summary': 'ذي إيكونوميست: رؤية الملك محمد السادس تحوّل المغرب إلى منصة عالمية للتجارة والصناعة. أكدت مجلة “ذي إيكونوميست” البريطانية أن المغرب، تحت قيادة الملك محمد السادس، يرسخ مكانته كقوة صناعية وتجارية صاعدة، بفضل رؤية استراتيجية واستثمارات ضخمة غيرت موقعه في الاقتصاد العالمي. وأوضحت المجلة، في مقال نشر أمس الخميس 05 شتنبر 2025 بعنوان “المغرب أضحى قوة تجارية وصناعية”، أن المملكة نجحت منذ سنة 2020 في جذب ما …  ذي إيكونوميست: رؤية الملك محمد السادس تحوّل المغرب إلى منصة عالمية للتجارة والصناعة     .', 'size': 2}], 'main_title': '“ذي إيكونوميست” البريطانية: المغرب بقيادة الملك يرسخ مكانته كقوة تجارية وصناعية'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    