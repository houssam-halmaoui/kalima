<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 26/06/2025 - 06h23</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '3', 'title': 'انعقاد مجلس الرقابة للقرض الفلاحي', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d8%a7%d9%86%d8%b9%d9%82%d8%a7%d8%af-%d9%85%d8%ac%d9%84%d8%b3-%d8%a7%d9%84%d8%b1%d9%82%d8%a7%d8%a8%d8%a9-%d9%84%d9%84%d9%82%d8%b1%d8%b6-%d8%a7%d9%84%d9%81%d9%84%d8%a7%d8%ad%d9%8a-1581667.html', 'summary': 'انعقاد مجلس الرقابة للقرض الفلاحي. ترأس عزيز أخنوش، رئيس الحكومة، اليوم الأربعاء بالرباط، اجتماعا لمجلس الرقابة للقرض الفلاحي للمغرب، خصص لعرض أنشطة ونتائج البنك، وكذا برنامج عمله للسنوات القادمة. وفي مستهل الاجتماع، نوه رئيس الحكومة بـ”وفاء مجموعة القرض الفلاحي للمغرب لدورها كمؤسسة تساهم في دعم ومواكبة العالم القروي والمساهمة في التنمية الاقتصادية”، مستحضرا التوجيهات الملكية السامية المتعلقة بـ”تنزيل برنامج دعم  انعقاد مجلس الرقابة للقرض الفلاحي     - هسبريس جريدة إلكترونية مغربية .', 'size': 3}, {'id': '132', 'title': 'رئيس الحكومة يترأس اجتماع مجلس الرقابة للقرض الفلاحي للمغرب', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/economy/408199.html', 'summary': 'رئيس الحكومة يترأس اجتماع مجلس الرقابة للقرض الفلاحي للمغرب. ترأس رئيس الحكومة عزيز أخنوش، يوم الأربعاء 25 يونيو 2025 بالرباط، اجتماعا لمجلس الرقابة للقرض الفلاحي للمغرب، خصص لعرض أنشطة ونتائج البنك، وكذا برنامج عمله', 'size': 2}, {'id': '133', 'title': 'لعرض أنشطة ونتائج البنك وكذا برنامج عمله.. أخنوش يترأس اجتماع مجلس الرقابة للقرض الفلاحي للمغرب', 'source': 'kifache.com', 'link': 'https://kifache.com/%d9%84%d8%b9%d8%b1%d8%b6-%d8%a3%d9%86%d8%b4%d8%b7%d8%a9-%d9%88%d9%86%d8%aa%d8%a7%d8%a6%d8%ac-%d8%a7%d9%84%d8%a8%d9%86%d9%83-%d9%88%d9%83%d8%b0%d8%a7-%d8%a8%d8%b1%d9%86%d8%a7%d9%85%d8%ac-%d8%b9%d9%85/', 'summary': 'لعرض أنشطة ونتائج البنك وكذا برنامج عمله.. أخنوش يترأس اجتماع مجلس الرقابة للقرض الفلاحي للمغرب. ترأس رئيس الحكومة، عزيز أخنوش، اليوم الأربعاء (25 يونيو) بالرباط، اجتماعا لمجلس الرقابة للقرض الفلاحي للمغرب، خصص لعرض أنشطة ونتائج البنك، وكذا برنامج عمله للسنوات القادمة. وأفاد بلاغ لرئاسة الحكومة، أنه في مستهل هذا الاجتماع، نوه رئيس الحكومة، بوفاء مجموعة القرض الفلاحي للمغرب، لدورها كمؤسسة تساهم في دعم ومواكبة العالم القروي والمساهمة في التنمية الاقتصادية،', 'size': 5}, {'id': '188', 'title': 'برنامج دعم مربي الماشية وإعادة تكوين القطيع الوطني يخيم على اجتماع مجلس القرض الفلاحي', 'source': 'rue20.com', 'link': 'https://rue20.com/915777.html', 'summary': 'برنامج دعم مربي الماشية وإعادة تكوين القطيع الوطني يخيم على اجتماع مجلس القرض الفلاحي.  ا الرباط ترأس رئيس الحكومة عزيز أخنوش، يوم الأربعاء 25 يونيو 2025 بالرباط، اجتماعا لمجلس الرقابة للقرض الفلاحي للمغرب، خصص لعرض أنشطة ونتائج البنك، وكذا برنامج عمله للسنوات القادمة. وحسب بلاغ لرئاسة الحكومة وفي مستهل الاجتماع، نوه رئيس الحكومة، بوفاء مجموعة القرض الفلاحي للمغرب، لدورها كمؤسسة تساهم في دعم ومواكبة العالم القروي والمساهمة الخبر برنامج دعم مربي الماشية وإعادة تكوين القطيع الوطني يخيم على اجتماع مجلس القرض الفلاحي  .', 'size': 2}, {'id': '375', 'title': 'الحكومة ترصد 700 مليون درهم لدعم مربي الماشية وإعادة تكوين القطيع الوطني', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/316578/', 'summary': 'الحكومة ترصد 700 مليون درهم لدعم مربي الماشية وإعادة تكوين القطيع الوطني. ترأس رئيس الحكومة، عزيز أخنوش، اليوم الأربعاء بالرباط، اجتماعا لمجلس الرقابة للقرض الفلاحي للمغرب، خصص لعرض أنشطة ونتائج البنك، وكذا برنامج عمله للسنوات القادمة. وذكر بلاغ لرئاسة الحكومة أن أخنوش نوه، في مستهل الاجتماع، بوفاء مجموعة القرض الفلاحي للمغرب لدورها كمؤسسة تساهم في دعم ومواكبة العالم القروي والمساهمة في التنمية الاقتصادية، مستحضرا التوجيهات الملكية السامية', 'size': 3}], 'main_title': 'لعرض أنشطة ونتائج البنك وكذا برنامج عمله.. أخنوش يترأس اجتماع مجلس الرقابة للقرض الفلاحي للمغرب'}, {'community_id': '1', 'articles': [{'id': '53', 'title': 'طقس الأربعاء.. أجواء حارة بعموم مناطق المملكة', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-634520.html', 'summary': 'طقس الأربعاء.. أجواء حارة بعموم مناطق المملكة. هبة بريس تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الأربعاء، ارتفاعا في درجة الحرارة مع طقس حار في الجنوب الشرقي وداخل الأقاليم الجنوبية، وطقس نسبيا حار بالمنطقة الشرقية والسهول الداخلية الشمالية والوسطى. كما سيلاحظ نمو خلايا رعدية مرفوقة بقطرات مطرية أو بزخات فوق كل من مرتفعات الأطلس المتوسط و الكبير والهضاب الشرقية. وستكون السماء قليلة السحب إلى غائمة جزئيا بباقي المنطقة الشرقية والجنوب الشرقي والأطلس الصغير، مع تسجيل هبات رياح محليا قوية نوعا ما بالسواحل المحيطية. وستتراوح درجات الحرارة الدنيا، ما بين 23 و 28 درجة بالجنوب الشرقي وشرق الأقاليم الجنوبية، وما بين 17 إلى 23 درجة في باقي المناطق. وسيكون البحر هادئا إلى قليل الهيجان بالواجهة المتوسطية، وبالبوغاز، وقليل الهيجان إلى هائج ومحليا هائجا إلى قوي الهيجان جنوب كاب بباريس في بداية الصلاحية.', 'size': 2}, {'id': '186', 'title': 'توقعات أحوال الطقس لليوم الأربعاء', 'source': 'soltana.ma', 'link': 'https://soltana.ma/1357474.html', 'summary': 'توقعات أحوال الطقس لليوم الأربعاء. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليومه الأربعاء، ارتفاعا في درجة الحرارة مع طقس حار في الجنوب الشرقي وداخل الأقاليم الجنوبية، وطقس نسبيا حار بالمنطقة الشرقية والسهول الداخلية الشمالية والوسطى. كما سيلاحظ نمو خلايا رعدية مرفوقة بقطرات مطرية أو بزخات فوق كل من مرتفعات الأطلس المتوسط والكبير والهضاب الشرقية. وستكون السماء قليلة السحب إلى غائمة', 'size': 2}, {'id': '235', 'title': 'طقس الأربعاء.. حار نسبيا مع خلايا رعدية في بعض المناطق', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/223391/', 'summary': 'طقس الأربعاء.. حار نسبيا مع خلايا رعدية في بعض المناطق. كواليس اليوم تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الأربعاء، ارتفاعا في درجة الحرارة مع طقس حار في الجنوب الشرقي وداخل الأقاليم الجنوبية، وطقس نسبيا حار بالمنطقة الشرقية والسهول الداخلية الشمالية والوسطى. كما سيلاحظ نمو خلايا رعدية مرفوقة بقطرات مطرية أو بزخات فوق كل من مرتفعات الأطلس المتوسط و الكبير والهضاب الشرقية. وستكون السماء', 'size': 3}], 'main_title': 'طقس الأربعاء.. حار نسبيا مع خلايا رعدية في بعض المناطق'}, {'community_id': '2', 'articles': [{'id': '69', 'title': 'ولاية أمن تطوان تكشف حقيقة شريط فيديو منشور على موقع التواصل الاجتماعي', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/202491', 'summary': 'ولاية أمن تطوان تكشف حقيقة شريط فيديو منشور على موقع التواصل الاجتماعي.  اطلعت ولاية أمن تطوان على شريط فيديو منشور على موقع التواصل الاجتماعي يوتيوب، استضاف فيه صاحب إحدى الصفحات شخصا كان في وضعية خلاف مع القانون، وخضع لإجراءات البحث التمهيدي. وأوضحت ولاية أمن تطوان، في بيان حقيقة توصل موقع القناة الثانية بنسخة منه، أن الشريط تضمن تصريحات وتعليقات غير صحيحة ومشوبة بتحريف وقائع قانونية', 'size': 2}, {'id': '88', 'title': 'بيان حقيقة لولاية أمن تطوان بخصوص فيديو منشور على يوتيوب', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/408151.html', 'summary': 'بيان حقيقة لولاية أمن تطوان بخصوص فيديو منشور على يوتيوب. اطلعت ولاية أمن تطوان على شريط فيديو منشور على موقع التواصل الاجتماعي يوتيوب، استضاف فيه صاحب إحدى الصفحات شخصا كان في وضعية خلاف مع القانون', 'size': 2}], 'main_title': 'ولاية أمن تطوان تكشف حقيقة شريط فيديو منشور على موقع التواصل الاجتماعي'}, {'community_id': '3', 'articles': [{'id': '70', 'title': 'اجتماع بوزارة الداخلية لتحديد معايير استخراج أسماء الشباب المدعوين لأداء الخدمة العسكرية برسم الفوج المقبل للمجندين', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/202486', 'summary': 'اجتماع بوزارة الداخلية لتحديد معايير استخراج أسماء الشباب المدعوين لأداء الخدمة العسكرية برسم الفوج المقبل للمجندين.  تنفيذا للتعليمات السامية لصاحب الجلالة الملك محمد السادس نصره الله وأيده،القائد الأعلى ورئيس أركان الحرب العامة للقوات المسلحة الملكية،بخصوص اتخاذ التدابير اللازمة لإدماج الفوج المقبل للمجندين في الخدمة العسكرية ابتداء من فاتح شتنبر 2025،يحيط وزير الداخلية العموم علما أن اللجنة المركزية للإحصاء الخاص بالخدمة العسكرية عقدت اليوم الأربعاء اجتماعا بمقر وزارة الداخلية،برئاسة القاضي', 'size': 5}, {'id': '117', 'title': 'اجتماع بوزارة الداخلية لتحديد معايير انتقاء المجندين الجدد', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/408180.html', 'summary': 'اجتماع بوزارة الداخلية لتحديد معايير انتقاء المجندين الجدد. تنفيذا للتعليمات السامية لصاحب الجلالة الملك محمد السادس نصره الله وأيده، القائد الأعلى ورئيس أركان الحرب العامة للقوات المسلحة الملكية، بخصوص اتخاذ التدابير اللازمة لإدماج', 'size': 5}, {'id': '151', 'title': 'اجتماع بوزارة الداخلية لتحديد معايير استخراج أسماء المدعوين لأداء الخدمة العسكرية', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/316542/', 'summary': 'اجتماع بوزارة الداخلية لتحديد معايير استخراج أسماء المدعوين لأداء الخدمة العسكرية. تنفيذا للتعليمات السامية لاملك محمد السادس، القائد الأعلى ورئيس أركان الحرب العامة للقوات المسلحة الملكية، بخصوص اتخاذ التدابير اللازمة لإدماج الفوج المقبل للمجندين في الخدمة العسكرية ابتداء من فاتح شتنبر 2025، يحيط وزير الداخلية العموم علما أن اللجنة المركزية للإحصاء الخاص بالخدمة العسكرية عقدت الأربعاء اجتماعا بمقر وزارة الداخلية، برئاسة القاضي رئيس غرفة بمحكمة النقض،', 'size': 5}, {'id': '232', 'title': 'اجتماع بوزارة الداخلية لتحديد معايير استخراج أسماء الشباب المدعوين للخدمة العسكرية', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/223400/', 'summary': 'اجتماع بوزارة الداخلية لتحديد معايير استخراج أسماء الشباب المدعوين للخدمة العسكرية. كواليس اليوم تنفيذا للتعليمات السامية لصاحب الجلالة الملك محمد السادس نصره الله وأيده، القائد الأعلى ورئيس أركان الحرب العامة للقوات المسلحة الملكية، بخصوص اتخاذ التدابير اللازمة لإدماج الفوج المقبل للمجندين في الخدمة العسكرية ابتداء من فاتح شتنبر 2025، يحيط وزير الداخلية العموم علما أن اللجنة المركزية للإحصاء الخاص بالخدمة العسكرية عقدت اليوم الأربعاء اجتماعا', 'size': 5}, {'id': '248', 'title': 'اجتماع بالداخلية لتحديد معايير استخراج أسماء الشباب المدعوين لأداء الخدمة العسكرية', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d8%ac%d8%aa%d9%85%d8%a7%d8%b9-%d8%a8%d8%a7%d9%84%d8%af%d8%a7%d8%ae%d9%84%d9%8a%d8%a9-%d9%84%d8%aa%d8%ad%d8%af%d9%8a%d8%af-%d9%85%d8%b9%d8%a7%d9%8a%d9%8a%d8%b1-%d8%a7%d8%b3%d8%aa%d8%ae%d8%b1/', 'summary': 'اجتماع بالداخلية لتحديد معايير استخراج أسماء الشباب المدعوين لأداء الخدمة العسكرية. تم يومه الأربعاء، بمقر وزارة الداخلية، عقد اجتماع، خصص لتحديد المعايير الواجب اعتمادها لاستخراج أسماء الشباب، ذكورا وإناثا، المدعوين لأداء الخدمة العسكرية برسم الفوج المقبل للمجندين. وحسب بلاغ وزارة الداخلية، فإنه تنفيذا للتعليمات السامية للملك محمد السادس، القائد الأعلى ورئيس أركان الحرب العامة للقوات المسلحة الملكية، بخصوص اتخاذ التدابير اللازمة لإدماج الفوج المقبل …  اجتماع بالداخلية لتحديد معايير استخراج أسماء الشباب المدعوين لأداء الخدمة العسكرية     .', 'size': 5}], 'main_title': 'اجتماع بوزارة الداخلية لتحديد معايير استخراج أسماء الشباب المدعوين لأداء الخدمة العسكرية برسم الفوج المقبل للمجندين'}, {'community_id': '4', 'articles': [{'id': '112', 'title': 'لأول مرة في المغرب.. تدشين مصنع لإنتاج مواد بطاريات "الليثيوم"', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/economy/408175.html', 'summary': 'لأول مرة في المغرب.. تدشين مصنع لإنتاج مواد بطاريات "الليثيوم". دشنت شركة "كوبكو" (COBCO) اليوم الأربعاء بالجرف الأصفر، أول وحدة صناعية لمواد بطاريات الليثيوم - أيون بطاقة إنتاجية تبلغ 40.000 طن، المشروع الرائد الذي يمثل', 'size': 2}, {'id': '146', 'title': 'الجرف الأصفر .. شركة “كوبكو” تدشن أول وحدة صناعية لمواد بطاريات الليثيوم', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/316539/', 'summary': 'الجرف الأصفر .. شركة “كوبكو” تدشن أول وحدة صناعية لمواد بطاريات الليثيوم. دشنت شركة “كوبكو” (COBCO) اليوم الأربعاء بالجرف الأصفر، أول وحدة صناعية لمواد بطاريات الليثيوم – أيون بطاقة إنتاجية تبلغ 40.000 طن، المشروع الرائد الذي يمثل محطة بارزة في إنشاء منظومة صناعية للبطاريات في المغرب. ويندرج هذا المشروع في إطار المرحلة الأولى من استثمار الشركة في مركبها الصناعي المتكامل لإنتاج مواد الكاثود الأولية (PCAM) من النيكل،', 'size': 2}], 'main_title': 'لأول مرة في المغرب.. تدشين مصنع لإنتاج مواد بطاريات "الليثيوم"'}, {'community_id': '6', 'articles': [{'id': '147', 'title': 'تقرير يكشف أوجه اختلالات تدبير الحكومة للماء', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/316549/', 'summary': 'تقرير يكشف أوجه اختلالات تدبير الحكومة للماء. لم تعد أزمة الماء في المغرب مجرد انعكاس لظروف مناخية قاسية أو سنوات جفاف متتالية، بل أضحت، بحسب تقرير حديث، نتيجة لمسار طويل من السياسات التنموية التي اتخذت توجهات لم تراع ندرة الموارد المائية ولا ارتفاع الضغط السكاني والعمراني المتزايد. تقرير صدر عن المعهد المغربي للذكاء الاستراتيجي، نبه إلى أن السبب الأول للأزمة المائية بالمغرب', 'size': 2}, {'id': '287', 'title': 'تقرير: "تشظي المؤسسات" يعرقل تدبير الأزمات المائية في المغرب', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d8%aa%d9%82%d8%b1%d9%8a%d8%b1-%d8%aa%d8%b4%d8%b8%d9%8a-%d8%a7%d9%84%d9%85%d8%a4%d8%b3%d8%b3%d8%a7%d8%aa-%d9%8a%d8%b9%d8%b1%d9%82%d9%84-%d8%aa%d8%af%d8%a8%d9%8a%d8%b1-%d8%a7%d9%84%d8%a3%d8%b2-1581874.html', 'summary': 'تقرير: "تشظي المؤسسات" يعرقل تدبير الأزمات المائية في المغرب. نبّه تقرير جماعي أعدّه “المعهد المغربي للذكاء الاستراتيجي” إلى أن “إشكالية التشظي المؤسساتي وتعدّد الفاعلين المعنيين بتدبير شؤون الماء بالمغرب (وزارة الماء، الأحواض المائية، المكتب الوطني للكهرباء، وزارة الفلاحة، الجماعات، المجلس الأعلى للماء والمناخ، المؤسسات العمومية..) تؤدي إلى تداخلٍ في الاختصاصات وضعف في تحمّل المسؤولية”. وثمّن التقرير، المعنون بـ”الماء والمناخ.. المغرب في مفترق طرق”، الخيارات  تقرير: "تشظي المؤسسات" يعرقل تدبير الأزمات المائية في المغرب     - هسبريس جريدة إلكترونية مغربية .', 'size': 2}], 'main_title': 'تقرير يكشف أوجه اختلالات تدبير الحكومة للماء'}, {'community_id': '7', 'articles': [{'id': '168', 'title': 'ترامواي الرباط – سلا يثقل كاهل الركاب بزيادات جديدة وسط تذمر من ضعف الخدمات', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1080632.html', 'summary': 'ترامواي الرباط – سلا يثقل كاهل الركاب بزيادات جديدة وسط تذمر من ضعف الخدمات. أعلنت شركة ترامواي الرباط – سلا عن زيادات في أسعار تذاكرها واشتراكاتها، تدخل حيز التنفيذ ابتداءً من فاتح يوليوز 2025، وذلك في إطار مراجعة جدولها التعريفي، وفق موقعها الرسمي. وتشمل هذه الزيادات مختلف أنواع التذاكر، بدءًا من الرحلات الفردية ووصولًا إلى الاشتراكات السنوية، دون أن ييصاحب ذلك تحسن ملموس في جودة الخدمات، الأمر الذي أثار ظهرت المقالة ترامواي الرباط – سلا يثقل كاهل الركاب بزيادات جديدة وسط تذمر من ضعف الخدمات  .', 'size': 2}, {'id': '194', 'title': 'ترامواي الرباط يعلن عن زيادة في سعر التذاكر', 'source': 'rue20.com', 'link': 'https://rue20.com/915788.html', 'summary': 'ترامواي الرباط يعلن عن زيادة في سعر التذاكر.  | متابعة كشفت شركة ترامواي الرباط سلا عن تعريفة جديدة ستدخل حيز التنفيذ ابتداء من فاتح يوليوز المقبل. ورفعت الشركة ثمن تذكرة الرحلة الواحدة إلى 7 دراهم بدل 6 دراهم. وتشمل هذه التذكرة الحق في تغيير المسار على خط مختلف في حدود 60 دقيقة، كما سيشمل السعر الجديد أيضا النسخة الإلكترونية من التذكرة. الخبر ترامواي الرباط يعلن عن زيادة في سعر التذاكر  .', 'size': 3}, {'id': '209', 'title': 'زيادات جديدة في تسعيرة ترامواي الرباط-سلا ابتداءً من ..', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d8%b2%d9%8a%d8%a7%d8%af%d8%a7%d8%aa-%d8%ac%d8%af%d9%8a%d8%af%d8%a9-%d9%81%d9%8a-%d8%aa%d8%b3%d8%b9%d9%8a%d8%b1%d8%a9-%d8%aa%d8%b1%d8%a7%d9%85%d9%88%d8%a7%d9%8a-%d8%a7%d9%84%d8%b1%d8%a8%d8%a7%d8%b7/', 'summary': 'زيادات جديدة في تسعيرة ترامواي الرباط-سلا ابتداءً من ...  – متابعة زيادات جديدة في تسعيرة ترامواي الرباط-سلا ابتداءً من .. أعلنت شركة “ترامواي الرباط-سلا” عن اعتماد تعديل جديد في تعريفة التنقل، سيدخل حيز التنفيذ ابتداءً من 1...  زيادات جديدة في تسعيرة ترامواي الرباط-سلا ابتداءً من ..     .', 'size': 2}], 'main_title': 'ترامواي الرباط يعلن عن زيادة في سعر التذاكر'}, {'community_id': '8', 'articles': [{'id': '200', 'title': 'في برقية تهنئة.. الملك يعتز بالعلاقات الوثيقة مع سلوفينيا', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/467539.html', 'summary': 'في برقية تهنئة.. الملك يعتز بالعلاقات الوثيقة مع سلوفينيا. بعث الملك محمد السادس، برقية تهنئة إلى ناتاشا بيرك موسار رئيسة جمهورية سلوفينيا، بمناسبة العيد الوطني لبلادها.', 'size': 2}, {'id': '246', 'title': 'برقية تهنئة من الملك محمد السادس إلى رئيسة جمهورية سلوفينيا بمناسبة العيد الوطني لبلادها', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a8%d8%b1%d9%82%d9%8a%d8%a9-%d8%aa%d9%87%d9%86%d8%a6%d8%a9-%d9%85%d9%86-%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%85%d8%ad%d9%85%d8%af-%d8%a7%d9%84%d8%b3%d8%a7%d8%af%d8%b3-%d8%a5%d9%84%d9%89-%d8%b1-13/', 'summary': 'برقية تهنئة من الملك محمد السادس إلى رئيسة جمهورية سلوفينيا بمناسبة العيد الوطني لبلادها. بعث الملك محمد السادس برقية تهنئة إلى ناتاشا بيرك موسار، رئيسة جمهورية سلوفينيا، بمناسبة العيد الوطني لبلادها. ومما جاء في برقية الملك محمد السادس “في غمرة احتفال جمهورية سلوفينيا بعيدها الوطني، يسرني أن أعرب لكن عن أحر التهاني وأصدق المتمنيات للشعب السلوفيني بتحقيق ما يرجوه من مزيد التقدم والازدهار”. وأضاف الملك محمد السادس “وبهذه …  برقية تهنئة من الملك محمد السادس إلى رئيسة جمهورية سلوفينيا بمناسبة العيد الوطني لبلادها     .', 'size': 2}], 'main_title': 'في برقية تهنئة.. الملك يعتز بالعلاقات الوثيقة مع سلوفينيا'}, {'community_id': '9', 'articles': [{'id': '228', 'title': 'مفوضة أوروبية: المغرب والاتحاد الأوروبي يتقاسمان علاقة فريدة وهدفا مشتركا', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/223412/', 'summary': 'مفوضة أوروبية: المغرب والاتحاد الأوروبي يتقاسمان علاقة فريدة وهدفا مشتركا. و م ع أكدت المفوضة الأوروبية لشؤون البحر الأبيض المتوسط، السيدة دوبرافكا سويكا، أمس الثلاثاء، أن المغرب والاتحاد الأوروبي يتقاسمان علاقة فريدة وهدفا مشتركا يتمثل في تعميق شراكتهما. وقالت المسؤولة الأوروبية، في تغريدة نشرتها على حسابها على منصة “إكس”، عقب محادثة هاتفية أجرتها مع وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج، السيد ناصر', 'size': 2}, {'id': '460', 'title': 'مفوضة أوروبية: المغرب والاتحاد الأوروبي يتقاسمان علاقة فريدة وهدفا مشتركا لتعميق شراكتهما', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d9%85%d9%81%d9%88%d8%b6%d8%a9-%d8%a3%d9%88%d8%b1%d9%88%d8%a8%d9%8a%d8%a9-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d9%88%d8%a7%d9%84%d8%a7%d8%aa%d8%ad%d8%a7%d8%af-%d8%a7%d9%84%d8%a3%d9%88%d8%b1%d9%88/', 'summary': 'مفوضة أوروبية: المغرب والاتحاد الأوروبي يتقاسمان علاقة فريدة وهدفا مشتركا لتعميق شراكتهما. شددت المفوضة الأوروبية لشؤون البحر الأبيض المتوسط، دوبرافكا سويكا، أمس الثلاثاء، على أن المغرب والاتحاد الأوروبي يتقاسمان علاقة فريدة وهدفا مشتركا يتمثل في تعميق شراكتهما. وفي هذا السياق، قالت المسؤولة الأوروبية، في تغريدة نشرتها على حسابها على منصة “إكس”، عقب محادثة هاتفية أجرتها مع وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج، ناصر بوريطة: …  مفوضة أوروبية: المغرب والاتحاد الأوروبي يتقاسمان علاقة فريدة وهدفا مشتركا لتعميق شراكتهما     .', 'size': 2}], 'main_title': 'مفوضة أوروبية: المغرب والاتحاد الأوروبي يتقاسمان علاقة فريدة وهدفا مشتركا'}, {'community_id': '10', 'articles': [{'id': '229', 'title': 'نشرة إنذارية.. موجة حر تجتاح العديد من المناطق بالمملكة', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/223409/', 'summary': 'نشرة إنذارية.. موجة حر تجتاح العديد من المناطق بالمملكة. كواليس اليوم أفادت المديرية العامة للأرصاد الجوية، بأنه يرتقب تسجيل موجة حر مع “الشركي” ابتداء من اليوم الأربعاء، وإلى غاية يوم الاثنين المقبل، بمجموعة من المدن المغربية. وأوضحت المديرية، في نشرة إنذارية من مستوى يقظة “برتقالي”، أن درجة الحرارة ستتراوح ما بين 40 و 45 درجة، ستهم كل من زاكورة، طاطا، أسا زاك، السمارة،', 'size': 2}, {'id': '247', 'title': 'نشرة إنذارية: موجة حر شديدة تضرب المغرب لـ6 أيام متتالية', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d9%86%d8%b4%d8%b1%d8%a9-%d8%a5%d9%86%d8%b0%d8%a7%d8%b1%d9%8a%d8%a9-%d9%85%d9%88%d8%ac%d8%a9-%d8%ad%d8%b1-%d8%b4%d8%af%d9%8a%d8%af%d8%a9-%d8%aa%d8%b6%d8%b1%d8%a8-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8/', 'summary': 'نشرة إنذارية: موجة حر شديدة تضرب المغرب لـ6 أيام متتالية. أعلنت المديرية العامة للأرصاد الجوية، بأنه يرتقب تسجيل موجة حر مع “الشركي” ابتداء من اليوم الأربعاء، وإلى غاية يوم الاثنين المقبل، بمجموعة من المدن المغربية. وأفادت المديرية، في نشرة إنذارية من مستوى يقظة “برتقالي”، أن درجة الحرارة ستتراوح ما بين 40 و 45 درجة، ستهم كل من زاكورة، طاطا، أسا زاك، السمارة، بوجدور، …  نشرة إنذارية: موجة حر شديدة تضرب المغرب لـ6 أيام متتالية     .', 'size': 2}], 'main_title': 'نشرة إنذارية.. موجة حر تجتاح العديد من المناطق بالمملكة'}, {'community_id': '11', 'articles': [{'id': '387', 'title': 'الملف الشائك على طاولة مباحثات بين المغرب وفرنسا', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-577054.html', 'summary': 'الملف الشائك على طاولة مباحثات بين المغرب وفرنسا. المجموعة المشتركة الدائمة المغربية-الفرنسية حول الهجرة، اليوم الأربعاء بباريس، اجتماعها السابع في صيغته العامة، برئاسة مشتركة لكل من الوالي مدير الهجرة ومراقبة الحدود بوزارة الداخلية خالد الزروالي، ومدير الهجرة بوزارة الداخلية الفرنسية فريديريك جورام. وأوضح بلاغ مشترك لوزارتي الداخلية بالمغرب وفرنسا أن هذا اللقاء يأتي امتدادا للإعلان حول “الشراكة الاستثنائية الوطيدة”، الذي وقعه بتاريخ', 'size': 3}, {'id': '419', 'title': 'انعقاد الاجتماع السابع للمجموعة المشتركة الدائمة المغربية – الفرنسية حول الهجرة', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/467548.html', 'summary': 'انعقاد الاجتماع السابع للمجموعة المشتركة الدائمة المغربية – الفرنسية حول الهجرة. عقدت المجموعة المشتركة الدائمة المغربية – الفرنسية حول الهجرة، اليوم الأربعاء بباريس، اجتماعها السابع في صيغته العامة، برئاسة مشتركة لكل من الوالي مدير الهجرة ومراقبة الحدود بوزارة الداخلية خالد الزروالي، ومدير الهجرة بوزارة الداخلية الفرنسية فريديريك جورام. وأوضح بلاغ مشترك لوزارتي الداخلية بالمغرب وفرنسا، أن هذا اللقاء يأتي امتدادا للإعلان حول “الشراكة الاستثنائية الوطيدة“، الذي …', 'size': 3}, {'id': '447', 'title': 'باريس .. انعقاد الاجتماع السابع للمجموعة المشتركة الدائمة المغربية – الفرنسية حول الهجرة', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/223449/', 'summary': 'باريس .. انعقاد الاجتماع السابع للمجموعة المشتركة الدائمة المغربية – الفرنسية حول الهجرة. عقدت المجموعة المشتركة الدائمة المغربية – الفرنسية حول الهجرة، اليوم الأربعاء بباريس، اجتماعها السابع في صيغته العامة، برئاسة مشتركة لكل من الوالي مدير الهجرة ومراقبة الحدود بوزارة الداخلية خالد الزروالي، ومدير الهجرة بوزارة الداخلية الفرنسية فريديريك جورام. وأوضح بلاغ مشترك لوزارتي الداخلية بالمغرب وفرنسا، أن هذا اللقاء يأتي امتدادا للإعلان حول “الشراكة الاستثنائية الوطيدة “،', 'size': 3}], 'main_title': 'الملف الشائك على طاولة مباحثات بين المغرب وفرنسا'}, {'community_id': '5', 'articles': [{'id': '415', 'title': 'توقيع إعلان نوايا بين المغرب وفرنسا لتعزيز التعاون في مجال الوقاية من العنف ضد النساء', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/467554.html', 'summary': 'توقيع إعلان نوايا بين المغرب وفرنسا لتعزيز التعاون في مجال الوقاية من العنف ضد النساء. متابعة وقع المغرب وفرنسا، اليوم الأربعاء بمراكش، إعلان نوايا يروم تعزيز التعاون الثنائي في مجال التكوين والوقاية من العنف ضد النساء. ويهم الإعلان الذي وقعته وزيرة التضامن والإدماج الاجتماعي والأسرة، نعيمة ابن يحيى، والوزيرة الفرنسية المنتدبة المكلفة بالمساواة بين النساء والرجال ومكافحة التمييز، أورور بيرجي، تقاسم أدوات التكوين والخبرات بين البلدين، وتنظيم دورات تكوينية حول …', 'size': 2}, {'id': '448', 'title': 'مراكش.. توقيع إعلان نوايا بين المغرب وفرنسا لتعزيز التعاون في مجال العنف ضد النساء', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/223445/', 'summary': 'مراكش.. توقيع إعلان نوايا بين المغرب وفرنسا لتعزيز التعاون في مجال العنف ضد النساء. و م ع وقع المغرب وفرنسا، اليوم الأربعاء بمراكش، إعلان نوايا يروم تعزيز التعاون الثنائي في مجال التكوين والوقاية من العنف ضد النساء. ويهم الإعلان الذي وقعته وزيرة التضامن والإدماج الاجتماعي والأسرة، نعيمة ابن يحيى، والوزيرة الفرنسية المنتدبة المكلفة بالمساواة بين النساء والرجال ومكافحة التمييز، أورور بيرجي، تقاسم أدوات التكوين والخبرات بين البلدين، وتنظيم', 'size': 2}], 'main_title': 'توقيع إعلان نوايا بين المغرب وفرنسا لتعزيز التعاون في مجال الوقاية من العنف ضد النساء'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    