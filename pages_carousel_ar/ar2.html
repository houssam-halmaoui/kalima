<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 28/08/2025 - 12h26</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '70', 'title': 'مديرية الأمن تفتتح قاعة للرياضة بمدينة الحسيمة', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/205400', 'summary': 'مديرية الأمن تفتتح قاعة للرياضة بمدينة الحسيمة.  افتتحت المديرية العامة للأمن الوطني، يومه الأربعاء 27 غشت الجاري، قاعة رياضية جديدة متعددة التخصصات بمدينة الحسيمة، وذلك في إطار تنزيلها لمخطط تعزيز الخدمات الرياضية والاجتماعية التي يستفيد منها منخرطو مؤسسة محمد السادس للأعمال الاجتماعية لموظفي الأمن الوطني. وقد تم تدشين القاعة الرياضية الجديدة على مستوى مقر الأمن الجهوي بمدينة الحسيمة، وتم تجهيزها بمعدات', 'size': 3}, {'id': '112', 'title': 'افتتاح قاعة رياضية جديدة متعددة التخصصات بمدينة الحسيمة لفائدة أسرة الأمن الوطني', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/divers/411752.html', 'summary': 'افتتاح قاعة رياضية جديدة متعددة التخصصات بمدينة الحسيمة لفائدة أسرة الأمن الوطني. افتتحت المديرية العامة للأمن الوطني، يوم الأربعاء 27 غشت 2025، قاعة رياضية جديدة متعددة التخصصات بمدينة الحسيمة، وذلك في إطار تنزيل مخططها الرامي إلى تعزيز', 'size': 2}, {'id': '397', 'title': 'مديرية الأمن تفتح قاعة رياضية جديدة متعددة التخصصات بمدينة الحسيمة', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d9%85%d8%af%d9%8a%d8%b1%d9%8a%d8%a9-%d8%a7%d9%84%d8%a3%d9%85%d9%86-%d8%aa%d9%81%d8%aa%d8%ad-%d9%82%d8%a7%d8%b9%d8%a9-%d8%b1%d9%8a%d8%a7%d8%b6%d9%8a%d8%a9-%d8%ac%d8%af%d9%8a%d8%af%d8%a9-%d9%85%d8%aa/', 'summary': 'مديرية الأمن تفتح قاعة رياضية جديدة متعددة التخصصات بمدينة الحسيمة. افتتحت المديرية العامة للأمن الوطني، يوم أمس الأربعاء 27 غشت الجاري، قاعة رياضية جديدة متعددة التخصصات بمدينة الحسيمة، وذلك في إطار تنزيلها لمخطط تعزيز الخدمات الرياضية والاجتماعية التي يستفيد منها منخرطو مؤسسة محمد السادس للأعمال الاجتماعية لموظفي الأمن الوطني. وكشف مصدر أمني، أنه قد تم تدشين القاعة الرياضية الجديدة على مستوى مقر الأمن …  مديرية الأمن تفتح قاعة رياضية جديدة متعددة التخصصات بمدينة الحسيمة     .', 'size': 2}], 'main_title': 'مديرية الأمن تفتتح قاعة للرياضة بمدينة الحسيمة'}, {'community_id': '4', 'articles': [{'id': '100', 'title': 'محاكمة ابتسام لشكر ..الدفاع يطلب السراح المؤقت لإجراء عملية عاجلة', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/society/411740.html', 'summary': 'محاكمة ابتسام لشكر ..الدفاع يطلب السراح المؤقت لإجراء عملية عاجلة. مثلت ابتسام لشكر، الناشطة المغربية المتابعة في ملف “الإساءة للذات الإلهية”، أمام المحكمة الابتدائية بالرباط، حيث طلب دفاعها المكوّن من ثلاثة محامين، تمتيعها بالسراح المؤقت', 'size': 2}, {'id': '157', 'title': 'مستجدات محاكمة ابتسام لشكر', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-586750.html', 'summary': 'مستجدات محاكمة ابتسام لشكر. التمست النيابة العامة لدى المحكمة الابتدائية بالرباط، اليوم الأربعاء، رفض طلب تمتيع الناشطة الحقوقية ابتسام لشكر بالسراح المؤقت، وذلك في إطار متابعتها على خلفية قضية تتعلق بـ”الإساءة للذات الإلهية”. وقد قررت المحكمة تأجيل النظر في هذا الطلب إلى الأسبوع المقبل. وخلال جلسة المحاكمة، قدم دفاع ابتسام لشكر، الذي يتكون من', 'size': 3}, {'id': '187', 'title': 'هيئة الدفاع: ابتسام لشكر تحتاج إلى متابعة في حالة سراح لأسباب صحية', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d9%87%d9%8a%d8%a6%d8%a9-%d8%a7%d9%84%d8%af%d9%81%d8%a7%d8%b9-%d8%a7%d8%a8%d8%aa%d8%b3%d8%a7%d9%85-%d9%84%d8%b4%d9%83%d8%b1-%d8%aa%d8%ad%d8%aa%d8%a7%d8%ac-%d8%a5%d9%84%d9%89-%d9%85%d8%aa%d8%a7%d8%a8/', 'summary': 'هيئة الدفاع: ابتسام لشكر تحتاج إلى متابعة في حالة سراح لأسباب صحية. طالبت هيئة دفاع الناشطة الحقوقية ابتسام لشكر، صباح اليوم الأربعاء، خلال جلسة محاكمتها بالمحكمة الابتدائية بالرباط، بتمتيعها بالسراح المؤقت. وأوضحت هيئة الدفاع في مرافعتها، أن موكلتها تعاني من مرض السرطان، وأنها مقبلة على عملية جراحية على مستوى إحدى يديها. في المقابل، عارضت النيابة العامة تمتيع لشكر بالسراح المؤقت. وقررت هيئة الحكم تأجيل النظر في الملف  هيئة الدفاع: ابتسام لشكر تحتاج إلى متابعة في حالة سراح لأسباب صحية     .', 'size': 2}], 'main_title': 'مستجدات محاكمة ابتسام لشكر'}, {'community_id': '5', 'articles': [{'id': '150', 'title': '7500 مليونير بالمغرب.. والمملكة في مقدمة عدد المليونيرات بالقارة', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-586766.html', 'summary': '7500 مليونير بالمغرب.. والمملكة في مقدمة عدد المليونيرات بالقارة. حلّ المغرب في المرتبة الثالثة إفريقيا من حيث عدد المليونيرات، وفقاً لتقرير “الثروة في إفريقيا لسنة 2025” الصادر عن شركة Henley & Partner الدولية المتخصصة في الاستشارات المالية، بشراكة مع مؤسسة New World Wealth. وبحسب التقرير، فإن عدد المليونيرات المقيمين في المملكة يبلغ نحو 7500 شخص، ما يضعها خلف كل من جنوب', 'size': 2}, {'id': '163', 'title': 'المغرب ثالث أغنى بلد إفريقي بـ7500 مليونير.. وبنجلون على رأس قائمة الأثرياء', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1095559.html', 'summary': 'المغرب ثالث أغنى بلد إفريقي بـ7500 مليونير.. وبنجلون على رأس قائمة الأثرياء. كشف تقرير “الثروة في إفريقيا 2024” (Africa Wealth Report 2024)، الصادر عن شركة استشارات الجنسية والإقامة العالمية “Henley & Partner” بالتعاون مع شركة استخبارات الثروة “New World Wealth”، عن ترسيخ المغرب لمكانته ضمن أغنى خمس دول في القارة، حيث حل في المرتبة الثالثة بإجمالي ثروة قابلة للاستثمار تقدر بـ127 مليار دولار. وأظهر التقرير أن المغرب ظهرت المقالة المغرب ثالث أغنى بلد إفريقي بـ7500 مليونير.. وبنجلون على رأس قائمة الأثرياء  .', 'size': 2}], 'main_title': '7500 مليونير بالمغرب.. والمملكة في مقدمة عدد المليونيرات بالقارة'}, {'community_id': '2', 'articles': [{'id': '256', 'title': 'سقوط لوموند عند عروة العرش بالشعب وصلابة السيادة المغربية', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%b3%d9%82%d9%88%d8%b7-%d9%84%d9%88%d9%85%d9%88%d9%86%d8%af-%d8%b9%d9%86%d8%af-%d8%b9%d8%b1%d9%88%d8%a9-%d8%a7%d9%84%d8%b9%d8%b1%d8%b4-%d8%a8%d8%a7%d9%84%d8%b4%d8%b9%d8%a8-%d9%88%d8%b5%d9%84%d8%a7/', 'summary': 'سقوط لوموند عند عروة العرش بالشعب وصلابة السيادة المغربية. لم يكن مقال لوموند الأخير عن المغرب سوى صدى لعقلية استعمارية قديمة لم تشف بعد من هزيمة 1956، يوم انتزع المغرب استقلاله وأثبت أنّه دولة ذات سيادة وقرار، وأنّ ملكيته العلوية ليست زينة للبلاط، بل عمودا فقريا لكيان الدولة وضامنا لوحدة الأمة. أن يكتبوا اليوم عن “أجواء نهاية عهد”، فذلك ليس وصفا لواقع …  سقوط لوموند عند عروة العرش بالشعب وصلابة السيادة المغربية     .', 'size': 2}, {'id': '346', 'title': 'الإعلام الغربي بين نزعة الهيمنة وخصوصية الشرعية المغربية', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1095606.html', 'summary': 'الإعلام الغربي بين نزعة الهيمنة وخصوصية الشرعية المغربية. تجددت في الآونة الأخيرة الحملة الإعلامية التي تقودها جريدة لوموند الفرنسية ضد المغرب، حيث أعادت إنتاج سرديات مشوبة بالتحامل والاختزال، لا تستند إلى قراءة علمية موضوعية بقدر ما تعكس ذهنية استعمارية متجددة ترتدي لبوسًا إعلاميًا حديثًا. إن هذا النمط من الخطاب يندرج ضمن ما يسميه باحثو السوسيولوجيا السياسية بـ”نزعة الوصاية الفكرية” التي تحاول من خلالها ظهرت المقالة الإعلام الغربي بين نزعة الهيمنة وخصوصية الشرعية المغربية  .', 'size': 2}], 'main_title': 'سقوط لوموند عند عروة العرش بالشعب وصلابة السيادة المغربية'}, {'community_id': '8', 'articles': [{'id': '297', 'title': 'في ظرف قياسي.. أمن بركان يفك لغز سرقة وكالة لتحويل الأموال والتحقيق يكشف عن مفاجأة', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/society/411767.html', 'summary': 'في ظرف قياسي.. أمن بركان يفك لغز سرقة وكالة لتحويل الأموال والتحقيق يكشف عن مفاجأة. أوقفت عناصر الشرطة بالمنطقة الإقليمية للأمن بمدينة بركان، زوال يوم أمس الأربعاء، شخصا يبلغ من العمر 32 سنة، من ذوي السوابق القضائية، وذلك للاشتباه في', 'size': 4}, {'id': '349', 'title': 'شرطة بركان توقف لصا متخصصا في سرقة وكالات تحويل الأموال', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1095600.html', 'summary': 'شرطة بركان توقف لصا متخصصا في سرقة وكالات تحويل الأموال. أوقفت عناصر الشرطة بالمنطقة الإقليمية للأمن بمدينة بركان ظهرت المقالة شرطة بركان توقف لصا متخصصا في سرقة وكالات تحويل الأموال  .', 'size': 4}, {'id': '380', 'title': 'أمن بركان يوقف شخصا للاشتباه في تورطه في سرقة وكالة لتحويل الأموال', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/473877.html', 'summary': 'أمن بركان يوقف شخصا للاشتباه في تورطه في سرقة وكالة لتحويل الأموال. أوقفت عناصر الشرطة بالمنطقة الإقليمية للأمن بمدينة بركان، زوال أمس الأربعاء، شخصا يبلغ من العمر 32 سنة، من ذوي السوابق القضائية،', 'size': 4}, {'id': '396', 'title': 'بركان.. يقظة رجال الأمن تطيح بثلاثيني يشتبه تورطه في سرقة وكالة لتحويل الأموال', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a8%d8%b1%d9%83%d8%a7%d9%86-%d9%8a%d9%82%d8%b8%d8%a9-%d8%b1%d8%ac%d8%a7%d9%84-%d8%a7%d9%84%d8%a3%d9%85%d9%86-%d8%aa%d8%b7%d9%8a%d8%ad-%d8%a8%d8%ab%d9%84%d8%a7%d8%ab%d9%8a%d9%86%d9%8a-%d9%8a%d8%b4/', 'summary': 'بركان.. يقظة رجال الأمن تطيح بثلاثيني يشتبه تورطه في سرقة وكالة لتحويل الأموال. أوقفت عناصر الشرطة بالمنطقة الإقليمية للأمن بمدينة بركان، زوال يوم أمس الأربعاء، شخصا يبلغ من العمر 32 سنة، من ذوي السوابق القضائية، وذلك للاشتباه في تورطه في قضية تتعلق بالسرقة من داخل وكالة لتحويل الأموال. وذكر مصدر أمني أن المشتبه فيه كان قد أقدم رفقة شخص آخر، على ارتكاب عملية للسرقة باستعمال الكسر …  بركان.. يقظة رجال الأمن تطيح بثلاثيني يشتبه تورطه في سرقة وكالة لتحويل الأموال     .', 'size': 5}], 'main_title': 'بركان.. يقظة رجال الأمن تطيح بثلاثيني يشتبه تورطه في سرقة وكالة لتحويل الأموال'}, {'community_id': '9', 'articles': [{'id': '298', 'title': 'بوريطة يؤكد دخول المغرب في مفاوضات مباشرة مع إسبانيا لترسيم الحدود البحرية', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/world/411768.html', 'summary': 'بوريطة يؤكد دخول المغرب في مفاوضات مباشرة مع إسبانيا لترسيم الحدود البحرية. أكد ناصر بوريطة، وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج، أن المغرب وإسبانيا دخلا في مفاوضات مباشرة من أجل ترسيم حدودهما البحرية بما ينسجم', 'size': 2}, {'id': '404', 'title': 'بوريطة يؤكد التزام المغرب بالحوار مع إسبانيا حول ملف ترسيم الحدود', 'source': 'www.alalam.ma', 'link': 'https://www.alalam.ma/بوريطة-يؤكد-التزام-المغرب-بالحوار-مع-إسبانيا-حول-ملف-ترسيم-الحدود_a29269.html', 'summary': 'بوريطة يؤكد التزام المغرب بالحوار مع إسبانيا حول ملف ترسيم الحدود.  أكد وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج، ناصر بوريطة، خلال افتتاح ندوة حول "الممارسات الدولي...', 'size': 2}], 'main_title': 'بوريطة يؤكد دخول المغرب في مفاوضات مباشرة مع إسبانيا لترسيم الحدود البحرية'}, {'community_id': '1', 'articles': [{'id': '324', 'title': 'توقيف ثلاثيني متورط في سرقة وكالة لتحويل الأموال ببركان', 'source': 'assabah.ma', 'link': 'https://assabah.ma/867836.html', 'summary': 'توقيف ثلاثيني متورط في سرقة وكالة لتحويل الأموال ببركان. تمكنت عناصر الشرطة بالمنطقة الإقليمية للأمن بمدينة بركان زوال أمس الأربعاء 27 غشت الجاري، من توقيف شخص يبلغ من العمر 32 سنة من ذوي السوابق القضائية، وذلك للاشتباه في تورطه في قضية تتعلق بالسرقة من داخل وكالة لتحويل الأموال. وكان المشتبه فيه قد أقدم، رفقة شخصأكمل القراءة » المقالة توقيف ثلاثيني متورط في سرقة وكالة لتحويل الأموال ببركان  .', 'size': 3}, {'id': '333', 'title': 'توقيف ثلاثيتي يشتبه في تورطه في سرقة وكالة لتحويل الأموال ببركان', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/321806/', 'summary': 'توقيف ثلاثيتي يشتبه في تورطه في سرقة وكالة لتحويل الأموال ببركان. تمكنت عناصر الشرطة بالمنطقة الإقليمية للأمن بمدينة بركان أمس الأربعاء، من توقيف شخص يبلغ من العمر 32 سنة من ذوي السوابق القضائية، وذلك للاشتباه في تورطه في قضية تتعلق بالسرقة من داخل وكالة لتحويل الأموال. وكان المشتبه فيه قد أقدم، رفقة شخص آخر، على ارتكاب عملية للسرقة باستعمال الكسر من داخل وكالة لتحويل الأموال', 'size': 3}, {'id': '356', 'title': 'توقيف مشتبه بسرقته لوكالة لتحويل الأموال ببركان', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%aa%d9%88%d9%82%d9%8a%d9%81-%d9%85%d8%b4%d8%aa%d8%a8%d9%87-%d8%a8%d8%b3%d8%b1%d9%82%d8%aa%d9%87-%d9%84%d9%88%d9%83%d8%a7%d9%84%d8%a9-%d9%84%d8%aa%d8%ad%d9%88%d9%8a%d9%84-%d8%a7%d9%84%d8%a3%d9%85/', 'summary': 'توقيف مشتبه بسرقته لوكالة لتحويل الأموال ببركان. أوقفت عناصر الشرطة بالمنطقة الإقليمية للأمن بمدينة بركان، زوال يوم أمس الأربعاء، شخصا يبلغ من العمر 32 سنة، من ذوي السوابق القضائية، وذلك للاشتباه في تورطه في قضية تتعلق بالسرقة من داخل وكالة لتحويل الأموال. وذكر مصدر أمني أن المشتبه فيه كان قد أقدم رفقة شخص آخر، على ارتكاب عملية للسرقة باستعمال الكسر من داخل  توقيف مشتبه بسرقته لوكالة لتحويل الأموال ببركان     .', 'size': 4}], 'main_title': 'توقيف مشتبه بسرقته لوكالة لتحويل الأموال ببركان'}, {'community_id': '10', 'articles': [{'id': '334', 'title': 'توقعات طقس اليوم الخميس', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/321804/', 'summary': 'توقعات طقس اليوم الخميس. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الخميس، أن يبقى الطقس حارا نسبيا بكل من الجنوب الشرقي وأقصى جنوب المملكة. كما يرتقب تشكل سحب منخفضة كثيفة، مصحوبة بقطرات مطرية جد خفيفة أو كتل ضبابية فوق كل من سهول المحيط الأطلسي والشمال الغربي للأقاليم الجنوبية، وذلك خلال الليل والصباح، فضلا عن نزول قطرات مطرية وبروز رعد', 'size': 3}, {'id': '361', 'title': 'طقس حار مع قطرات مطرية متوقع اليوم الخميس', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%b7%d9%82%d8%b3-%d8%ad%d8%a7%d8%b1-%d9%85%d8%b9-%d9%82%d8%b7%d8%b1%d8%a7%d8%aa-%d9%85%d8%b7%d8%b1%d9%8a%d8%a9-%d9%85%d8%aa%d9%88%d9%82%d8%b9-%d8%a7%d9%84%d9%8a%d9%88%d9%85-%d8%a7%d9%84%d8%ae%d9%85/', 'summary': 'طقس حار مع قطرات مطرية متوقع اليوم الخميس. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الخميس، أن يبقى الطقس حارا نسبيا بكل من الجنوب الشرقي وأقصى جنوب المملكة. كما يرتقب تشكل سحب منخفضة كثيفة، مصحوبة بقطرات مطرية جد خفيفة أو كتل ضبابية فوق كل من سهول المحيط الأطلسي والشمال الغربي للأقاليم الجنوبية، وذلك خلال الليل والصباح، فضلا عن نزول قطرات مطرية وبروز رعد  طقس حار مع قطرات مطرية متوقع اليوم الخميس     .', 'size': 3}, {'id': '399', 'title': 'توقعات الأرصاد الجوية لطقس اليوم الخميس', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%aa%d9%88%d9%82%d8%b9%d8%a7%d8%aa-%d8%a7%d9%84%d8%a3%d8%b1%d8%b5%d8%a7%d8%af-%d8%a7%d9%84%d8%ac%d9%88%d9%8a%d8%a9-%d9%84%d8%b7%d9%82%d8%b3-%d8%a7%d9%84%d9%8a%d9%88%d9%85-%d8%a7%d9%84%d8%ae%d9%85-5/', 'summary': 'توقعات الأرصاد الجوية لطقس اليوم الخميس. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الخميس، أن يبقى الطقس حارا نسبيا بكل من الجنوب الشرقي وأقصى جنوب المملكة. كما يرتقب تشكل سحب منخفضة كثيفة، مصحوبة بقطرات مطرية جد خفيفة أو كتل ضبابية فوق كل من سهول المحيط الأطلسي والشمال الغربي للأقاليم الجنوبية، وذلك خلال الليل والصباح، فضلا عن نزول قطرات مطرية …  توقعات الأرصاد الجوية لطقس اليوم الخميس     .', 'size': 3}], 'main_title': 'توقعات طقس اليوم الخميس'}, {'community_id': '3', 'articles': [{'id': '336', 'title': 'وزارة الفلاحة تستثمر مليوني درهم لمواجهة الهجمات السيبرانية', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1095614.html', 'summary': 'وزارة الفلاحة تستثمر مليوني درهم لمواجهة الهجمات السيبرانية. في ظل موجة الهجمات السيبرانية المتزايدة التي استهدفت مؤخرا مواقع إلكترونية تابعة لمؤسسات رسمية مغربية، أعلنت وزارة الفلاحة والصيد البحري والتنمية القروية والمياه والغابات – قطاع الفلاحة، عن إطلاق طلب عروض دولي مفتوح يهدف إلى تدبير البنية التحتية للمعلومات والأمن السيبراني الخاص بها. وتسعى الوزارة من خلال هذه المبادرة إلى تحصين نظام معلوماتها وضمان استمراريته، ظهرت المقالة وزارة الفلاحة تستثمر مليوني درهم لمواجهة الهجمات السيبرانية  .', 'size': 2}, {'id': '357', 'title': 'الرقمنة تمكن الجمارك من كشف 34 مليون درهم من الرسوم المتملص منها سنة 2024', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a7%d9%84%d8%b1%d9%82%d9%85%d9%86%d8%a9-%d8%aa%d9%85%d9%83%d9%86-%d8%a7%d9%84%d8%ac%d9%85%d8%a7%d8%b1%d9%83-%d9%85%d9%86-%d9%83%d8%b4%d9%81-34-%d9%85%d9%84%d9%8a%d9%88%d9%86-%d8%af%d8%b1%d9%87/', 'summary': 'الرقمنة تمكن الجمارك من كشف 34 مليون درهم من الرسوم المتملص منها سنة 2024. كشفت إدارة الجمارك والضرائب غير المباشرة أن الوسائل التكنولوجية المعتمدة في استهداف المبادلات التجارية، استنادا إلى تحليل البيانات الضخمة وتقاطع الاتجاهات الحديثة لتيارات الغش، مكنت من ضبط ما يقرب من 34 مليون درهم من الرسوم والمكوس المتملص منها، مقارنة بـ 24 مليون درهم خلال السنة الفارطة، منها 20 مليون درهم تم تحصيلها و14 مليون درهم  الرقمنة تمكن الجمارك من كشف 34 مليون درهم من الرسوم المتملص منها سنة 2024     .', 'size': 2}], 'main_title': 'وزارة الفلاحة تستثمر مليوني درهم لمواجهة الهجمات السيبرانية'}, {'community_id': '7', 'articles': [{'id': '359', 'title': 'علماء روس يكتشفون طريقة جديدة لعلاج مرض الزهايمر', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%b9%d9%84%d9%85%d8%a7%d8%a1-%d8%b1%d9%88%d8%b3-%d9%8a%d9%83%d8%aa%d8%b4%d9%81%d9%88%d9%86-%d8%b7%d8%b1%d9%8a%d9%82%d8%a9-%d8%ac%d8%af%d9%8a%d8%af%d8%a9-%d9%84%d8%b9%d9%84%d8%a7%d8%ac-%d9%85%d8%b1/', 'summary': 'علماء روس يكتشفون طريقة جديدة لعلاج مرض الزهايمر. كشف فريق من العلماء والباحثين الروس في معهد النظم الطبية الحيوية بجامعة البوليتيكنيك في بطرسبورغ عن طريقة علاجية واعدة لمرض الزهايمر، ترتكز على إعادة التوازن لأيونات الكالسيوم داخل الخلايا العصبية، ما قد يسهم في تطوير مقاربة جديدة للتعامل مع أحد أكثر الأمراض العصبية شيوعا في العالم. وأوضح الباحث يفغيني غيراسيموف، أحد المشاركين في الدراسة، أن  علماء روس يكتشفون طريقة جديدة لعلاج مرض الزهايمر     .', 'size': 2}, {'id': '398', 'title': 'علماء روس يبتكرون طريقة جديدة واعدة لعلاج مرض الزهايمر', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%b9%d9%84%d9%85%d8%a7%d8%a1-%d8%b1%d9%88%d8%b3-%d9%8a%d8%a8%d8%aa%d9%83%d8%b1%d9%88%d9%86-%d8%b7%d8%b1%d9%8a%d9%82%d8%a9-%d8%ac%d8%af%d9%8a%d8%af%d8%a9-%d9%88%d8%a7%d8%b9%d8%af%d8%a9-%d9%84%d8%b9/', 'summary': 'علماء روس يبتكرون طريقة جديدة واعدة لعلاج مرض الزهايمر. كشف فريق من العلماء والباحثين الروس في معهد النظم الطبية الحيوية بجامعة البوليتيكنيك في بطرسبورغ عن طريقة علاجية جديدة لمرض الزهايمر، تعتمد على إعادة التوازن لأيونات الكالسيوم داخل الخلايا العصبية، ما قد يفتح آفاقا جديدة للتعامل مع أحد أكثر الأمراض العصبية انتشارا في العالم. وأوضح الباحث يفغيني غيراسيموف، أحد المشاركين في الدراسة، أن …  علماء روس يبتكرون طريقة جديدة واعدة لعلاج مرض الزهايمر     .', 'size': 2}], 'main_title': 'علماء روس يكتشفون طريقة جديدة لعلاج مرض الزهايمر'}, {'community_id': '6', 'articles': [{'id': '373', 'title': 'الرباط.. انطلاق الدورة الثالثة من مهرجان السويسي وسط حضور جماهيري كبير', 'source': 'machahid24.com', 'link': 'https://machahid24.com/panorama/473902.html', 'summary': 'الرباط.. انطلاق الدورة الثالثة من مهرجان السويسي وسط حضور جماهيري كبير. انطلقت، مساء أمس الأربعاء، بمنصة “OLM السويسي” بالرباط، فعاليات الدورة الثالثة من مهرجان السويسي الذي ينظمه مجلس مقاطعة السويسي، بشراكة مع وزارة الشباب والثقافة والتواصل، وذلك بمناسبة احتفالات الشعب المغربي بعيد الشباب. وانطلقت السهرة الافتتاحية للمهرجان بوصلة موسيقية من توقيع الديجي صوفيا، التي بصمت على حضور نسائي لافت في مجال الموسيقى الإلكترونية، من خلال عرض …', 'size': 2}, {'id': '390', 'title': 'انطلاق فعاليات الدورة الثالثة من مهرجان السويسي', 'source': 'almassaa.com', 'link': 'https://almassaa.com/113076-2/', 'summary': 'انطلاق فعاليات الدورة الثالثة من مهرجان السويسي. المساء اليوم – الرباط: انطلقت، مساء أمس الأربعاء، بمنصة “OLM السويسي” بالرباط، فعاليات الدورة الثالثة من مهرجان السويسي الذي ينظم بمناسبة احتفالات عيد الشباب. وانطلقت السهرة الافتتاحية للمهرجان بوصلة موسيقية من توقيع الديجي صوفيا، التي', 'size': 2}], 'main_title': 'الرباط.. انطلاق الدورة الثالثة من مهرجان السويسي وسط حضور جماهيري كبير'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    