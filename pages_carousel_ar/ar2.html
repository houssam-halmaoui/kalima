<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 04/09/2025 - 06h16</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '1', 'articles': [{'id': '8', 'title': 'الإمارات تصبح أول مستثمر في المغرب', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d8%a7%d9%84%d8%a5%d9%85%d8%a7%d8%b1%d8%a7%d8%aa-%d8%a3%d9%88%d9%84-%d9%85%d8%b3%d8%aa%d8%ab%d9%85%d8%b1-%d8%a8%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d8%b3%d9%86%d8%a9-2024-1618369.html', 'summary': 'الإمارات تصبح أول مستثمر في المغرب. أفاد مكتب الصرف بأن الإمارات العربية المتحدة أصبحت المستثمر الأول بالمغرب برسم سنة 2024، بحصة تبلغ 18،9 في المائة من صافي تدفقات الاستثمارات الأجنبية المباشرة. ويشير المكتب في تقريره “ميزان المدفوعات والوضع الخارجي العام للمغرب” لسنة 2024 إلى أن صافي التدفقات الاستثمارية الإماراتية ارتفع بنسبة 57،8 في المائة إلى 3،1 مليار درهم. من جهته ارتفع  الإمارات تصبح أول مستثمر في المغرب     - هسبريس جريدة إلكترونية مغربية .', 'size': 2}, {'id': '425', 'title': 'الإمارات تتصدر قائمة المستثمرين الأجانب في المغرب خلال 2024', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d8%a5%d9%85%d8%a7%d8%b1%d8%a7%d8%aa-%d8%aa%d8%aa%d8%b5%d8%af%d8%b1-%d9%82%d8%a7%d8%a6%d9%85%d8%a9-%d8%a7%d9%84%d9%85%d8%b3%d8%aa%d8%ab%d9%85%d8%b1%d9%8a%d9%86-%d8%a7%d9%84%d8%a3%d8%ac/', 'summary': 'الإمارات تتصدر قائمة المستثمرين الأجانب في المغرب خلال 2024. كشف مكتب الصرف أن الإمارات العربية المتحدة احتلت المرتبة الأولى كأكبر مستثمر أجنبي بالمغرب خلال سنة 2024، حيث استحوذت على 18,9 في المائة من صافي تدفقات الاستثمارات الأجنبية المباشرة. وأوضح المكتب، في تقريره حول ميزان المدفوعات والوضع الخارجي العام للمغرب لسنة 2024، أن الاستثمارات الإماراتية سجلت ارتفاعا لافتا بنسبة 57,8 في المائة، لتصل …  الإمارات تتصدر قائمة المستثمرين الأجانب في المغرب خلال 2024     .', 'size': 2}], 'main_title': 'الإمارات تصبح أول مستثمر في المغرب'}, {'community_id': '10', 'articles': [{'id': '68', 'title': 'توقعات أحوال الطقس ليوم غد الأربعاء', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/205647', 'summary': 'توقعات أحوال الطقس ليوم غد الأربعاء.  تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليوم غد الأربعاء، أن يظل الطقس حارا نسبيا بكل من السهول المتواجدة غرب الأطلس، والجنوب-الشرقي، وجنوب المنطقة الشرقية، وكذا بأقصى جنوب البلاد. ويرتقب تشكل سحب منخفضة كثيفة بعض الشيء ومصحوبة بكتل من الضباب على السواحل الوسطى وأيضا بالشمال-الغربي للأقاليم الصحراوية للمملكة. عدا ذلك،سيظل الطقس مستقرا مع سماء', 'size': 3}, {'id': '187', 'title': 'طقس اليوم: استمرار الجو الحار بهذه المناطق', 'source': 'soltana.ma', 'link': 'https://soltana.ma/1357754.html', 'summary': 'طقس اليوم: استمرار الجو الحار بهذه المناطق. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الأربعاء، أن يظل الطقس حارا نسبيا بالجنوب الشرقي للبلاد، والمنطقة الشرقية والسهول غرب الأطلس وداخل الأقاليم الجنوبية. ويرتقب، كذلك، تشكل سحب منخفضة كثيفة بالسواحل الوسطى مع كتل ضبابية محلية خلال الصباح والليل. كما سيكون الطقس هادئا مع سماء صافية الى قليلة السحب.وستتراوح درجات الحرارة الدنيا، ما بين 20', 'size': 3}, {'id': '241', 'title': 'طقس الأربعاء: استمرار الحرارة النسبية في عموم البلاد', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%b7%d9%82%d8%b3-%d8%a7%d9%84%d8%a3%d8%b1%d8%a8%d8%b9%d8%a7%d8%a1-%d8%a7%d8%b3%d8%aa%d9%85%d8%b1%d8%a7%d8%b1-%d8%a7%d9%84%d8%ad%d8%b1%d8%a7%d8%b1%d8%a9-%d8%a7%d9%84%d9%86%d8%b3%d8%a8%d9%8a%d8%a9/', 'summary': 'طقس الأربعاء: استمرار الحرارة النسبية في عموم البلاد. المساء اليوم: تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الأربعاء، أن يظل الطقس حارا نسبيا بكل من السهول المتواجدة غرب الأطلس، والجنوب-الشرقي، وجنوب المنطقة الشرقية، وكذا بأقصى جنوب البلاد. ويرتقب تشكل سحب منخفضة كثيفة بعض', 'size': 3}], 'main_title': 'توقعات أحوال الطقس ليوم غد الأربعاء'}, {'community_id': '4', 'articles': [{'id': '120', 'title': 'تحويلات الجالية المغربية تسجل رقماً قياسياً جديداً', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/412105.html', 'summary': 'تحويلات الجالية المغربية تسجل رقماً قياسياً جديداً. أفاد مكتب الصرف بأن تحويلات المغاربة المقيمين بالخارج سجلت سنة 2024 رقما قياسيا بلغ 119 مليار درهم، أي بارتفاع بنسبة 3,3 في المائة مقارنة بالسنة', 'size': 5}, {'id': '170', 'title': 'تحويلات الجالية تحطم رقم قياسيا ببلوغ 119 مليارا في 2024', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1096969.html', 'summary': 'تحويلات الجالية تحطم رقم قياسيا ببلوغ 119 مليارا في 2024. أفاد مكتب الصرف بأن تحويلات المغاربة المقيمين بالخارج سجلت سنة 2024 رقما قياسيا بلغ 119 مليار درهم، أي بارتفاع بنسبة 3,3 في المائة مقارنة بالسنة السابقة. وأوضح المكتب، في تقريره حول ميزان المدفوعات ووضع الاستثمار الدولي برسم سنة 2024، أن هذه المداخيل حققت معدل نمو سنوي متوسط بنسبة 5,7 في المائة خلال الفترة 2021-2024. وكشف ظهرت المقالة تحويلات الجالية تحطم رقم قياسيا ببلوغ 119 مليارا في 2024  .', 'size': 5}, {'id': '183', 'title': 'تحويلات مغاربة العالم.. مكتب الصرف: تسجيل رقم قياسي خلال 2024', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%aa%d8%ad%d9%88%d9%8a%d9%84%d8%a7%d8%aa-%d9%85%d8%ba%d8%a7%d8%b1%d8%a8%d8%a9-%d8%a7%d9%84%d8%b9%d8%a7%d9%84%d9%85-%d9%85%d9%83%d8%aa%d8%a8-%d8%a7%d9%84%d8%b5%d8%b1%d9%81-%d8%aa%d8%b3%d8%ac%d9%8a/', 'summary': 'تحويلات مغاربة العالم.. مكتب الصرف: تسجيل رقم قياسي خلال 2024. أفاد مكتب الصرف أن تحويلات المغاربة المقيمين بالخارج سجلت سنة 2024 رقما قياسيا بلغ 119 مليار درهم، أي بارتفاع بنسبة 3,3 في المائة مقارنة بالسنة السابقة. وأوضح المكتب، في تقريره حول ميزان المدفوعات ووضع الاستثمار الدولي برسم سنة 2024، أن هذه المداخيل حققت معدل نمو سنوي متوسط بنسبة 5,7 في المائة خلال الفترة 2021-2024. وكشف  تحويلات مغاربة العالم.. مكتب الصرف: تسجيل رقم قياسي خلال 2024     .', 'size': 5}, {'id': '206', 'title': 'تحويلات المغاربة المقيمين بالخارج تسجل رقما قياسيا سنة 2024', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/474424.html', 'summary': 'تحويلات المغاربة المقيمين بالخارج تسجل رقما قياسيا سنة 2024. أفاد مكتب الصرف بأن تحويلات المغاربة المقيمين بالخارج سجلت سنة 2024 رقما قياسيا بلغ 119 مليار درهم، أي بارتفاع بنسبة 3,3 في المائة مقارنة بالسنة السابقة.', 'size': 5}, {'id': '235', 'title': 'تحويلات مغاربة العالم سجلت رقما قياسيا سنة 2024', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%aa%d8%ad%d9%88%d9%8a%d9%84%d8%a7%d8%aa-%d9%85%d8%ba%d8%a7%d8%b1%d8%a8%d8%a9-%d8%a7%d9%84%d8%b9%d8%a7%d9%84%d9%85-%d8%b3%d8%ac%d9%84%d8%aa-%d8%b1%d9%82%d9%85%d8%a7-%d9%82%d9%8a%d8%a7%d8%b3%d9%8a/', 'summary': 'تحويلات مغاربة العالم سجلت رقما قياسيا سنة 2024. المساء اليوم: أفاد مكتب الصرف بأن تحويلات المغاربة المقيمين بالخارج سجلت سنة 2024 رقما قياسيا بلغ 119 مليار درهم، أي بارتفاع بنسبة 3,3 في المائة مقارنة بالسنة السابقة. وأوضح المكتب، في تقريره حول ميزان المدفوعات', 'size': 5}], 'main_title': 'تحويلات الجالية المغربية تسجل رقماً قياسياً جديداً'}, {'community_id': '7', 'articles': [{'id': '132', 'title': 'ورزازات.. إيقاف شخص انتحل صفة مسؤولين عسكريين للنصب والاحتيال', 'source': 'kifache.com', 'link': 'https://kifache.com/%d9%88%d8%b1%d8%b2%d8%a7%d8%b2%d8%a7%d8%aa-%d8%a5%d9%8a%d9%82%d8%a7%d9%81-%d8%b4%d8%ae%d8%b5-%d8%a7%d9%86%d8%aa%d8%ad%d9%84-%d8%b5%d9%81%d8%a9-%d9%85%d8%b3%d8%a4%d9%88%d9%84%d9%8a%d9%86-%d8%b9%d8%b3/', 'summary': 'ورزازات.. إيقاف شخص انتحل صفة مسؤولين عسكريين للنصب والاحتيال. تمكنت عناصر الشرطة بالأمن الجهوي بورزازات بتنسيق مع نظيرتها بمدينة سلا، على ضوء معلومات وفرتها مصالح المديرية العامة لمراقبة التراب الوطني، اليوم الأربعاء (3 غشت)، من توقيف شخص يشتبه في تورطه في انتحال صفة ينظمها القانون والنصب والاحتيال. وكان المشتبه فيه قد انتحل صفة مسؤولين عسكريين وأمنيين، وعرّض مجموعة من الأشخاص للنصب والاحتيال بمدينة سلا،', 'size': 4}, {'id': '292', 'title': '“الديستي” يطيح بنصاب انتحل صفة مسؤولين أمنيين و عسكريين كبار', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-654259.html', 'summary': '“الديستي” يطيح بنصاب انتحل صفة مسؤولين أمنيين و عسكريين كبار. هبة بريس ـ الرباط تمكنت عناصر الشرطة بالأمن الجهوي بورزازات بتنسيق مع نظيرتها بمدينة سلا، على ضوء معلومات وفرتها مصالح المديرية العامة لمراقبة التراب الوطني، اليوم الأربعاء 3 غشت الجاري، من توقيف شخص يشتبه في تورطه في انتحال صفة ينظمها القانون والنصب والاحتيال. وكان المشتبه فيه قد انتحل صفة مسؤولين عسكريين وأمنيين، وعرّض مجموعة من الأشخاص للنصب والاحتيال بمدينة سلا، حيث سلبهم مبالغ مالية مقابل وعود وهمية بالتوظيف في أسلاك القوات العمومية، أو بتسجيلهم في معاهد رياضية، وكذا التدخل لفائدتهم في قضايا حوادث السير. وقد أسفرت الأبحاث والتحريات المنجزة عن تحديد هوية المشتبه فيه وتوقيفه بورزازات، فيما أظهرت عملية تنقيطه في قاعدة بيانات الأمن الوطني، أنه يشكل موضوع مذكرتي بحث على الصعيد الوطني، وذلك للاشتباه في تورطه في قضية تتعلق بإصدار شيك بدون رصيد والنصب والاحتيال . وقد تم إخضاع المشتبه فيه لتدبير الحراسة النظرية رهن إشارة البحث القضائي الذي يجري تحت إشراف النيابة العامة المختصة، وذلك للكشف عن جميع ظروف وملابسات هذه القضية، وكذا تحديد جميع الأفعال الإجرامية المنسوبة للمعني با لأمر.', 'size': 2}, {'id': '321', 'title': 'توقيف شخص متورط في انتحال صفة مسؤولين أمنيين وعسكريين', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/society/412117.html', 'summary': 'توقيف شخص متورط في انتحال صفة مسؤولين أمنيين وعسكريين. تمكنت عناصر الشرطة بالأمن الجهوي بورزازات بتنسيق مع نظيرتها بمدينة سلا، على ضوء معلومات وفرتها مصالح المديرية العامة لمراقبة التراب الوطني، اليوم الأربعاء 3 غشت', 'size': 3}, {'id': '358', 'title': 'الأمن يضع حدا لمحتال بورزازات استغل صفات عسكرية وأمنية للنصب', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/322425/', 'summary': 'الأمن يضع حدا لمحتال بورزازات استغل صفات عسكرية وأمنية للنصب. تمكنت عناصر الشرطة بالأمن الجهوي بورزازات بتنسيق مع نظيرتها بمدينة سلا، على ضوء معلومات وفرتها مصالح المديرية العامة لمراقبة التراب الوطني، اليوم الأربعاء 3 غشت الجاري، من توقيف شخص يشتبه في تورطه في انتحال صفة ينظمها القانون والنصب والاحتيال. وكان المشتبه فيه قد انتحل صفة مسؤولين عسكريين وأمنيين، وعرّض مجموعة من الأشخاص للنصب والاحتيال بمدينة', 'size': 4}, {'id': '413', 'title': 'مصالح “الديستي” تطيح بمتورط في انتحال صفة مسؤولين عسكريين وأمنيين بغرض النصب', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/226637/', 'summary': 'مصالح “الديستي” تطيح بمتورط في انتحال صفة مسؤولين عسكريين وأمنيين بغرض النصب. تمكنت عناصر الشرطة بالأمن الجهوي بورزازات بتنسيق مع نظيرتها بمدينة سلا، على ضوء معلومات وفرتها مصالح المديرية العامة لمراقبة التراب الوطني، اليوم الأربعاء 3 غشت الجاري، من توقيف شخص يشتبه في تورطه في انتحال صفة ينظمها القانون والنصب والاحتيال. وكان المشتبه فيه قد انتحل صفة مسؤولين عسكريين وأمنيين، وعرّض مجموعة من الأشخاص للنصب والاحتيال بمدينة', 'size': 4}], 'main_title': 'ورزازات.. إيقاف شخص انتحل صفة مسؤولين عسكريين للنصب والاحتيال'}, {'community_id': '9', 'articles': [{'id': '167', 'title': 'فيدرالية اليسار: الانتخابات المقبلة تتطلب إصلاحا عميقا لمواجهة الفساد واستعادة الثقة', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1096960.html', 'summary': 'فيدرالية اليسار: الانتخابات المقبلة تتطلب إصلاحا عميقا لمواجهة الفساد واستعادة الثقة. أعلن عبد السلام العزيز، الأمين العام لحزب فيدرالية اليسار الديمقراطي، أن المذكرة التي قدمها الحزب بخصوص الإطار المنظم للانتخابات التشريعية لسنة 2026 لا تقتصر على مجرد اقتراحات تقنية مرتبطة بالقوانين والمساطر، بل تنطلق من قراءة سياسية دقيقة لما يعيشه المغرب اليوم من تراجع ديمقراطي وتضييق على الفضاء العام. وأكد العزيز اليوم الأربعاء خلال ندوة صحفية ظهرت المقالة فيدرالية اليسار: الانتخابات المقبلة تتطلب إصلاحا عميقا لمواجهة الفساد واستعادة الثقة  .', 'size': 2}, {'id': '184', 'title': 'العزيز: لا إصلاح انتخابي دون إطلاق سراح معتقلي الريف ومحاربة الفساد', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a7%d9%84%d8%b9%d8%b2%d9%8a%d8%b2-%d9%84%d8%a7-%d8%a5%d8%b5%d9%84%d8%a7%d8%ad-%d8%a7%d9%86%d8%aa%d8%ae%d8%a7%d8%a8%d9%8a-%d8%af%d9%88%d9%86-%d8%a5%d8%b7%d9%84%d8%a7%d9%82-%d8%b3%d8%b1%d8%a7%d8%ad/', 'summary': 'العزيز: لا إصلاح انتخابي دون إطلاق سراح معتقلي الريف ومحاربة الفساد. أكد عبد السلام العزيز، الأمين العام لحزب فيدرالية اليسار الديمقراطي، أن أي إصلاح تقني سيبقى بلا معنى إذا لم يسبق بمصالحة وطنية حقيقية ومناخ سياسي سليم ومحفز على المشاركة. وأكد العزيز، في الندوة الصحفية المخصصة لتقديم مذكرة الحزب حول إصلاح المنظومة الانتخابية التي نظمت اليوم بالدار البيضاء، أن البداية تقتضي إطلاق سراح كافة المعتقلين، وفي  العزيز: لا إصلاح انتخابي دون إطلاق سراح معتقلي الريف ومحاربة الفساد     .', 'size': 2}], 'main_title': 'فيدرالية اليسار: الانتخابات المقبلة تتطلب إصلاحا عميقا لمواجهة الفساد واستعادة الثقة'}, {'community_id': '5', 'articles': [{'id': '168', 'title': 'انطلاق عملية انتقاء وإدماج مجندي التجريدة الـ40 للخدمة العسكرية', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1096979.html', 'summary': 'انطلاق عملية انتقاء وإدماج مجندي التجريدة الـ40 للخدمة العسكرية. تنفيذا لتعليمات الملك محمد السادس، القائد الأعلى ورئيس أركان الحرب العامة للقوات المسلحة الملكية، انطلقت الإثنين بالمركز الأول لتكوين المجندين في الحاجب، عملية انتقاء وإدماج مجندي التجريدة الـ40 للخدمة العسكرية. وتجرى هذه العملية، التي ستتواصل إلى غاية متم شتنبر الجاري، تحت إشراف لجنة مكونة من أعضاء يمثلون مختلف مكاتب ومصالح القيادة العامة للقوات المسلحة الملكية. ظهرت المقالة انطلاق عملية انتقاء وإدماج مجندي التجريدة الـ40 للخدمة العسكرية  .', 'size': 2}, {'id': '205', 'title': 'الخدمة العسكرية.. انطلاق عملية انتقاء وإدماج مجندي التجريدة الـ40 بالحاجب', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/474426.html', 'summary': 'الخدمة العسكرية.. انطلاق عملية انتقاء وإدماج مجندي التجريدة الـ40 بالحاجب. تنفيذا للتعليمات السامية للملك محمد السادس، القائد الأعلى ورئيس أركان الحرب العامة للقوات المسلحة الملكية، انطلقت الاثنين بالمركز الأول لتكوين المجندين في الحاجب، عملية انتقاء وإدماج مجندي التجريدة الـ40 للخدمة العسكرية.', 'size': 2}], 'main_title': 'انطلاق عملية انتقاء وإدماج مجندي التجريدة الـ40 للخدمة العسكرية'}, {'community_id': '2', 'articles': [{'id': '172', 'title': 'وزارة الصحة تتعهد بتسوية وضعية خريجي التمريض وتقنيي الصحة قبل نهاية 2025', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1096932.html', 'summary': 'وزارة الصحة تتعهد بتسوية وضعية خريجي التمريض وتقنيي الصحة قبل نهاية 2025. تعهدت وزارة الصحة والحماية الاجتماعية بفتح باب التوظيف لاستيعاب جميع الممرضين وتقنيي الصحة خريجي المعاهد العليا للمهن التمريضية وتقنيات الصحة قبل نهاية السنة الجارية أو مطلع السنة المقبلة على أبعد تقدير. وجاء هذا التعهد الرسمي في ختام اجتماع انعقد يوم الثلاثاء 2 شتنبر 2025 بمقر الوزارة في الرباط، بدعوة من مديرية الموارد البشرية، وجمعها بممثلي ظهرت المقالة وزارة الصحة تتعهد بتسوية وضعية خريجي التمريض وتقنيي الصحة قبل نهاية 2025  .', 'size': 2}, {'id': '189', 'title': 'إصلاح التقاعد يدخل منعطفاً جديداً.. الحكومة والنقابات على طاولة الحوار', 'source': 'rue20.com', 'link': 'https://rue20.com/933495.html', 'summary': 'إصلاح التقاعد يدخل منعطفاً جديداً.. الحكومة والنقابات على طاولة الحوار.  | الرباط في خطوة جديدة ضمن مسار إصلاح أنظمة التقاعد، أطلقت وزارة الاقتصاد والمالية سلسلة من المشاورات مع المركزيات النقابية، تمهيدًا لانعقاد أول اجتماع للجنة التقنية المكلفة بالملف. ووفقًا لمصادر نقابية ، فإن اللقاء الأول من المنتظر أن يُعقد يوم الخميس 18 شتنبر بمقر الوزارة في العاصمة الرباط. تأتي هذه المشاورات كترجمة عملية الخبر إصلاح التقاعد يدخل منعطفاً جديداً.. الحكومة والنقابات على طاولة الحوار  .', 'size': 2}], 'main_title': 'وزارة الصحة تتعهد بتسوية وضعية خريجي التمريض وتقنيي الصحة قبل نهاية 2025'}, {'community_id': '3', 'articles': [{'id': '199', 'title': 'فيدرالية اليسار ترفع مقترحات لتحقيق المناصفة في انتخابات 2026', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/474433.html', 'summary': 'فيدرالية اليسار ترفع مقترحات لتحقيق المناصفة في انتخابات 2026. قدمت فيدرالية اليسار الديمقراطي في مذكرتها الموجهة إلى وزارة الداخلية بشأن الانتخابات التشريعية المقبلة، عدة مقترحات.', 'size': 2}, {'id': '367', 'title': 'فيدرالية اليسار تقترح تخفيض الدعم العمومي للأحزاب عند تورط برلمانييها في قضايا فساد', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1097043.html', 'summary': 'فيدرالية اليسار تقترح تخفيض الدعم العمومي للأحزاب عند تورط برلمانييها في قضايا فساد. دعا حزب فيدرالية اليسار الديمقراطي، ضمن مذكرته للإصلاح الانتخابي، ظهرت المقالة فيدرالية اليسار تقترح تخفيض الدعم العمومي للأحزاب عند تورط برلمانييها في قضايا فساد  .', 'size': 2}], 'main_title': 'فيدرالية اليسار ترفع مقترحات لتحقيق المناصفة في انتخابات 2026'}, {'community_id': '6', 'articles': [{'id': '270', 'title': 'مسؤول بريطاني يشيد بمكانة المغرب', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d9%85%d8%b3%d8%a4%d9%88%d9%84-%d8%a8%d8%b1%d9%8a%d8%b7%d8%a7%d9%86%d9%8a-%d9%8a%d8%b4%d9%8a%d8%af-%d8%a8%d9%85%d9%83%d8%a7%d9%86%d8%a9-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-1618470.html', 'summary': 'مسؤول بريطاني يشيد بمكانة المغرب. قال هاميش فالكونر، نائب كاتب الدولة المكلف بالشؤون البرلمانية في وزارة الخارجية البريطانية، إن الحوار الاستراتيجي بين المغرب والمملكة المتحدة، الذي انعقد في يونيو الماضي بالرباط، شكل “تغييرا مهما” في العلاقات بين البلدين. وذكر فالكونر، في تصريح أمام مجلس العموم البريطاني، بأن “ديفيد لامي، وزير الخارجية، ترأس، بشكل مشترك، يوم فاتح يونيو الماضي بالرباط، دورة  مسؤول بريطاني يشيد بمكانة المغرب     - هسبريس جريدة إلكترونية مغربية .', 'size': 2}, {'id': '354', 'title': 'المملكة المتحدة تؤكد دعمها لمخطط الحكم الذاتي وتعتبر الحوار مع المغرب محطة فارقة', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/322438/', 'summary': 'المملكة المتحدة تؤكد دعمها لمخطط الحكم الذاتي وتعتبر الحوار مع المغرب محطة فارقة. قال هاميش فالكونر، نائب كاتب الدولة المكلف بالشؤون البرلمانية في وزارة الخارجية البريطانية، إن الحوار الاستراتيجي بين المغرب والمملكة المتحدة، الذي انعقد في يونيو الماضي بالرباط، شكل “تغييرا مهما” في العلاقات بين البلدين. وذكر فالكونر في تصريح أمام مجلس العموم البريطاني، بأن “وزير الخارجية ديفيد لامي ترأس بشكل مشترك، يوم 1 يونيو الماضي بالرباط، دورة', 'size': 3}, {'id': '394', 'title': 'مسؤول بريطاني: الحوار الاستراتيجي المغرب-المملكة المتحدة شكل”تغييرا مهما” في العلاقات بين البلدين', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/474444.html', 'summary': 'مسؤول بريطاني: الحوار الاستراتيجي المغرب-المملكة المتحدة شكل”تغييرا مهما” في العلاقات بين البلدين. و.م.ع قال هاميش فالكونر، نائب كاتب الدولة المكلف بالشؤون البرلمانية في وزارة الخارجية البريطانية، إن الحوار الاستراتيجي بين المغرب والمملكة المتحدة، الذي انعقد في يونيو الماضي بالرباط، شكل “تغييرا مهما” في العلاقات بين البلدين. وذكر فالكونر في تصريح أمام مجلس العموم البريطاني، بأن “وزير الخارجية ديفيد لامي ترأس بشكل مشترك، يوم 1 يونيو الماضي بالرباط، …', 'size': 2}], 'main_title': 'المملكة المتحدة تؤكد دعمها لمخطط الحكم الذاتي وتعتبر الحوار مع المغرب محطة فارقة'}, {'community_id': '8', 'articles': [{'id': '301', 'title': 'الملك يحيي غدا ليلة المولد النبوي بمسجد حسان بالرباط', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-654225.html', 'summary': 'الملك يحيي غدا ليلة المولد النبوي بمسجد حسان بالرباط. هبة بريس ـ الرباط أعلنت وزارة القصور الملكية والتشريفات والأوسمة أن أمير المؤمنين صاحب الجلالة الملك محمد السادس، نصره الله، سيترأس يوم غد الخميس إحياء ليلة المولد النبوي الشريف بمسجد حسان بمدينة الرباط. وفي ما يلي نص بلاغ الوزارة بهذا الخصوص: “تعلن وزارة القصور الملكية والتشريفات والأوسمة أن أمير المؤمنين صاحب الجلالة الملك محمد السادس نصره الله وأيده سيترأس إحياء ليلة المولد النبوي الشريف بمسجد حسان بمدينة الرباط، وذلك ابتداء من الساعة السابعة من مساء يوم غد الخميس 11 ربيع الأول 1447 هـ موافق 04 شتنبر 2025 م”.', 'size': 5}, {'id': '389', 'title': 'جلالة الملك يترأس الخميس إحياء ليلة المولد النبوي الشريف بمسجد حسان بالرباط', 'source': 'rue20.com', 'link': 'https://rue20.com/933521.html', 'summary': 'جلالة الملك يترأس الخميس إحياء ليلة المولد النبوي الشريف بمسجد حسان بالرباط.  . الرباط أعلنت وزارة القصور الملكية والتشريفات والأوسمة أن أمير المؤمنين صاحب الجلالة الملك محمد السادس، نصره الله، سيترأس يوم غد الخميس إحياء ليلة المولد النبوي الشريف بمسجد حسان بمدينة الرباط. وفي ما يلي نص بلاغ الوزارة بهذا الخصوص: “تعلن وزارة القصور الملكية والتشريفات والأوسمة أن أمير المؤمنين صاحب الجلالة الملك محمد السادس الخبر جلالة الملك يترأس الخميس إحياء ليلة المولد النبوي الشريف بمسجد حسان بالرباط  .', 'size': 5}, {'id': '412', 'title': 'جلالة الملك يترأس غدا الخميس إحياء ليلة المولد النبوي الشريف بمسجد حسان بالرباط', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/226642/', 'summary': 'جلالة الملك يترأس غدا الخميس إحياء ليلة المولد النبوي الشريف بمسجد حسان بالرباط. أعلنت وزارة القصور الملكية والتشريفات والأوسمة أن أمير المؤمنين صاحب الجلالة الملك محمد السادس، نصره الله، سيترأس يوم غد الخميس إحياء ليلة المولد النبوي الشريف بمسجد حسان بمدينة الرباط. وفي ما يلي نص بلاغ الوزارة بهذا الخصوص: “تعلن وزارة القصور الملكية والتشريفات والأوسمة أن أمير المؤمنين صاحب الجلالة الملك محمد السادس نصره الله وأيده سيترأس', 'size': 5}, {'id': '416', 'title': 'الملك محمد السادس يترأس إحياء ليلة المولد النبوي بمسجد حسان بالرباط', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%85%d8%ad%d9%85%d8%af-%d8%a7%d9%84%d8%b3%d8%a7%d8%af%d8%b3-%d9%8a%d8%aa%d8%b1%d8%a3%d8%b3-%d8%a5%d8%ad%d9%8a%d8%a7%d8%a1-%d9%84%d9%8a%d9%84%d8%a9-%d8%a7%d9%84%d9%85/', 'summary': 'الملك محمد السادس يترأس إحياء ليلة المولد النبوي بمسجد حسان بالرباط. المساء اليوم – الرباط: أعلنت وزارة القصور الملكية والتشريفات والأوسمة أن الملك محمد السادس، سيترأس يوم غد الخميس إحياء ليلة المولد النبوي الشريف بمسجد حسان بمدينة الرباط. وفي ما يلي نص بلاغ الوزارة بهذا الخصوص:', 'size': 5}, {'id': '424', 'title': 'أمير المؤمنين الملك محمد السادس يترأس غدا الخميس إحياء ليلة المولد النبوي الشريف بمسجد حسان بالرباط', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a3%d9%85%d9%8a%d8%b1-%d8%a7%d9%84%d9%85%d8%a4%d9%85%d9%86%d9%8a%d9%86-%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%85%d8%ad%d9%85%d8%af-%d8%a7%d9%84%d8%b3%d8%a7%d8%af%d8%b3-%d9%8a%d8%aa%d8%b1%d8%a3%d8%b3-4/', 'summary': 'أمير المؤمنين الملك محمد السادس يترأس غدا الخميس إحياء ليلة المولد النبوي الشريف بمسجد حسان بالرباط. أعلنت وزارة القصور الملكية والتشريفات والأوسمة أن أمير المؤمنين الملك محمد السادس، سيترأس يوم غد الخميس 04 شتنبر 2025، إحياء ليلة المولد النبوي الشريف بمسجد حسان بمدينة الرباط. وفي ما يلي نص بلاغ الوزارة بهذا الخصوص: “تعلن وزارة القصور الملكية والتشريفات والأوسمة أن أمير المؤمنين صاحب الجلالة الملك محمد السادس نصره الله وأيده …  أمير المؤمنين الملك محمد السادس يترأس غدا الخميس إحياء ليلة المولد النبوي الشريف بمسجد حسان بالرباط     .', 'size': 5}], 'main_title': 'الملك يحيي غدا ليلة المولد النبوي بمسجد حسان بالرباط'}, {'community_id': '0', 'articles': [{'id': '325', 'title': 'الحكم الصادر في حق ابتسام لشكر بعد إساءتها لـ"الذات الإلهية"', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/society/412123.html', 'summary': 'الحكم الصادر في حق ابتسام لشكر بعد إساءتها لـ"الذات الإلهية". أدانت المحكمة الابتدائية بالرباط، مساء الأربعاء 3 شتنبر 2025، الناشطة النسوية ابتسام لشكر، بسنتين ونصف حبسا نافذا وغرامة مالية حددت في 50 ألف درهم، على', 'size': 5}, {'id': '355', 'title': 'سنتان ونصف حبسا نافذا لابتسام لشكر بتهمة الإساءة للدين الإسلامي', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/322441/', 'summary': 'سنتان ونصف حبسا نافذا لابتسام لشكر بتهمة الإساءة للدين الإسلامي. أصدرت المحكمة الابتدائية بالرباط، اليوم الأربعاء، حكماً يقضي بالحبس النافذ لمدة سنتين ونصف في حق ابتسام لشكر، مع تغريمها مبلغاً مالياً قدره خمسون ألف درهم، على خلفية قضية أثارت جدلاً واسعاً في الأوساط الإعلامية ومواقع التواصل الاجتماعي خلال الأسابيع الماضية. وجاء الحكم بعد أن وضعت المتهمة رهن الاعتقال منذ 10 غشت الماضي، مباشرة عقب نشرها', 'size': 3}, {'id': '385', 'title': 'سنتان ونصف حبسا نافذا بحق ابتسام لشكر بعد حادث "التيشورت"', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%b3%d9%86%d8%aa%d8%a7%d9%86-%d9%88%d9%86%d8%b5%d9%81-%d8%ad%d8%a8%d8%b3%d8%a7-%d9%86%d8%a7%d9%81%d8%b0%d8%a7-%d8%a8%d8%ad%d9%82-%d8%a7%d8%a8%d8%aa%d8%b3%d8%a7%d9%85-%d9%84%d8%b4%d9%83%d8%b1-%d8%a8/', 'summary': 'سنتان ونصف حبسا نافذا بحق ابتسام لشكر بعد حادث "التيشورت". قضت المحكمة الابتدائية بالرباط، اليوم الأربعاء، بسنتين ونصف حبسا نافذا وغرامة مالية قدرها 50 ألف درهم، في حق المدافعة عن الحريات الفردية ابتسام لشكر. وكانت هيئة دفاع الناشطة الحقوقية قد طالبت، خلال جلسة الأسبوع الماضي، بتمتيعها بالسراح المؤقت، فيما جرى اعتقالها يوم 10 غشت الجاري بالرباط. وأوضحت هيئة الدفاع في مرافعتها أن موكلتها تعاني من  سنتان ونصف حبسا نافذا بحق ابتسام لشكر بعد حادث "التيشورت"     .', 'size': 4}, {'id': '390', 'title': 'القضاء يدين ابتسام لشكر بسنتين ونصف حبسا نافذا', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/474455.html', 'summary': 'القضاء يدين ابتسام لشكر بسنتين ونصف حبسا نافذا. أدانت المحكمة الابتدائية بالرباط، مساء اليوم الأربعاء، الناشطة المثيرة للجدل ابتسام لشكر، بسنتين ونصف السنة حبسا نافذا، وغرامة مالية تناهز 50 ألف درهم، بتهمة الإساءة للذات الإلهية. وكانت ابتسام لشكر، قد نشرت قبل أسابيع، صورة لها بحسابها على إحدى منصات التواصل الاجتماعي، تظهر فيها وهي ترتدي قميصا مكتوب عليه عبارات مسيئة للذات الإلهية، وأرفقت الصورة …', 'size': 3}, {'id': '423', 'title': 'ابتدائية الرباط تدين المدعوة ابتسام لشكر بالحبس النافذ', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d8%a8%d8%aa%d8%af%d8%a7%d8%a6%d9%8a%d8%a9-%d8%a7%d9%84%d8%b1%d8%a8%d8%a7%d8%b7-%d8%aa%d8%af%d9%8a%d9%86-%d8%a7%d9%84%d9%85%d8%af%d8%b9%d9%88%d8%a9-%d8%a7%d8%a8%d8%aa%d8%b3%d8%a7%d9%85-%d9%84/', 'summary': 'ابتدائية الرباط تدين المدعوة ابتسام لشكر بالحبس النافذ. أصدرت المحكمة الابتدائية بالرباط، اليوم الأربعاء 3 شتنبر 2025، حكما يقضي بإدانة الناشطة ابتسام لشكر بسنتين ونصف حبسا نافذا، إضافة إلى غرامة 50 ألف درهم، وذلك على خلفية متابعتها بتهمة الإساءة إلى الذات الإلهية. وكانت هيئة الدفاع قد التمست تمتيع لشكر بالسراح المؤقت مراعاة لوضعها الصحي، حيث أكدت حاجتها إلى عملية جراحية في …  ابتدائية الرباط تدين المدعوة ابتسام لشكر بالحبس النافذ     .', 'size': 2}], 'main_title': 'الحكم الصادر في حق ابتسام لشكر بعد إساءتها لـ"الذات الإلهية"'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    