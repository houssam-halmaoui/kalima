<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 03/08/2025 - 06h32</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '2', 'articles': [{'id': '62', 'title': 'حكيمي مُهدد بالسجن لمدة قد تصل 15 سنة بتهمة الاغتصاب', 'source': 'www.alakhbar.press.ma', 'link': 'https://www.alakhbar.press.ma/%d8%ad%d9%83%d9%8a%d9%85%d9%8a-%d9%85%d9%8f%d9%87%d8%af%d8%af-%d8%a8%d8%a7%d9%84%d8%b3%d8%ac%d9%86-%d9%84%d9%85%d8%af%d8%a9-%d9%82%d8%af-%d8%aa%d8%b5%d9%84-15-%d8%b3%d9%86%d8%a9-%d8%a8%d8%aa%d9%87-270374.html', 'summary': 'حكيمي مُهدد بالسجن لمدة قد تصل 15 سنة بتهمة الاغتصاب. كشفت صحيفة “لوباريزيان” الفرنسية، اليوم الجمعة، أن النيابة العامة في نانتير طالبت، رسميا، بإحالة الدولي المغربي أشرف حكيمي، لاعب باريس سان جيرمان، إلى المحكمة الجنائية في مقاطعة “أو- دو سين” لمتابعته بتهمة الاغتصاب، وذلك على خلفية القضية التي تعود إلى فبراير 2023، والتي تتهمه فيها شابة فرنسية بالاعتداء الجنسي عليها داخل منزله. وأوضح المصدر ذاته …  حكيمي مُهدد بالسجن لمدة قد تصل 15 سنة بتهمة الاغتصاب     .', 'size': 2}, {'id': '72', 'title': 'بعقوبة سجن تصل لـ15 عاماً .. النيابة العامة الفرنسية تفتح مجددا قضية محاكمة حكيمي بتهمة الاغتصاب', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/sport/proplayers/410343.html', 'summary': 'بعقوبة سجن تصل لـ15 عاماً .. النيابة العامة الفرنسية تفتح مجددا قضية محاكمة حكيمي بتهمة الاغتصاب. طالبت النيابة العامة بمدينة نانتير الفرنسية، رسميًا، بإحالة الدولي المغربي أشرف حكيمي، لاعب نادي باريس سان جيرمان، على المحكمة الجنائية بمقاطعة “هوت دو سين”، لمتابعته', 'size': 2}], 'main_title': 'حكيمي مُهدد بالسجن لمدة قد تصل 15 سنة بتهمة الاغتصاب'}, {'community_id': '1', 'articles': [{'id': '69', 'title': 'تطوان : لقاء يجمع عددا من الوزارء والولاة والعمال لتداول السبل الكفیلة بإطلاق جیل جدید من برامج التنمیة الترابیة', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/204547', 'summary': 'تطوان : لقاء يجمع عددا من الوزارء والولاة والعمال لتداول السبل الكفیلة بإطلاق جیل جدید من برامج التنمیة الترابیة.  تجسیدا للتعلیمات الملكیة السامیة الواردة في خطاب عید العرش المجید لیوم 29 یولیوز 2025، والتي دعا من خلالھا صاحب الجلالة الملك محمد السادس، نصره الله وأیده، الحكومة إلى إطلاق جیل جدید من برامج التنمیة الترابیة و الانتقال من المقاربات التقلیدیة للتنمیة الاجتماعیة، إلى مقاربة للتنمیة المجالیة المندمجة، تم، اليوم الجمعة بتطوان، على ھامش', 'size': 2}, {'id': '74', 'title': 'بعد خطاب عيد العرش..لقاء بتطوان يجمع عددا من الوزارء والولاة والعمال لتداول السبل الكفیلة بإطلاق جیل جدید من برامج التنمیة الترابیة', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/410345.html', 'summary': 'بعد خطاب عيد العرش..لقاء بتطوان يجمع عددا من الوزارء والولاة والعمال لتداول السبل الكفیلة بإطلاق جیل جدید من برامج التنمیة الترابیة. تجسیدا للتعلیمات الملكیة السامیة الواردة في خطاب عید العرش المجید لیوم 29 یولیوز 2025، والتي دعا من خلالھا صاحب الجلالة الملك محمد السادس، نصره الله', 'size': 2}], 'main_title': 'تطوان : لقاء يجمع عددا من الوزارء والولاة والعمال لتداول السبل الكفیلة بإطلاق جیل جدید من برامج التنمیة الترابیة'}, {'community_id': '4', 'articles': [{'id': '112', 'title': 'عيد العرش.. ترامب يجدد التأكيد على اعتراف الولايات المتحدة بالسيادة المغربية على الصحراء', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%b9%d9%8a%d8%af-%d8%a7%d9%84%d8%b9%d8%b1%d8%b4-%d8%aa%d8%b1%d8%a7%d9%85%d8%a8-%d9%8a%d8%ac%d8%af%d8%af-%d8%a7%d9%84%d8%aa%d8%a3%d9%83%d9%8a%d8%af-%d8%b9%d9%84%d9%89-%d8%a7%d8%b9%d8%aa%d8%b1%d8%a7/', 'summary': 'عيد العرش.. ترامب يجدد التأكيد على اعتراف الولايات المتحدة بالسيادة المغربية على الصحراء. جدد رئيس الولايات المتحدة الأمريكية، دونالد ج. ترامب، في برقية إلى صاحب الجلالة الملك محمد السادس بمناسبة عيد العرش، التأكيد على اعتراف الولايات المتحدة الأمريكية بالسيادة المغربية على الصحراء، ودعمها للمقترح المغربي للحكم الذاتي “باعتباره الأساس الوحيد من أجل تسوية عادلة ودائمة لهذا النزاع”. وأكد ترامب، في برقيته إلى جلالة الملك، “كما أود أن أجدد', 'size': 4}, {'id': '127', 'title': 'ترامب يجدد اعتراف أمريكا بسيادة المغرب على الصحراء', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/320046/', 'summary': 'ترامب يجدد اعتراف أمريكا بسيادة المغرب على الصحراء. جدد رئيس الولايات المتحدة الأمريكية، دونالد ج. ترامب، في برقية إلى صاحب الجلالة الملك محمد السادس بمناسبة عيد العرش، التأكيد على اعتراف الولايات المتحدة الأمريكية بالسيادة المغربية على الصحراء، ودعمها للمقترح المغربي للحكم الذاتي “باعتباره الأساس الوحيد من أجل تسوية عادلة ودائمة لهذا النزاع”. وأكد ترامب، في برقيته إلى جلالة الملك، “كما أود أن أجدد', 'size': 4}, {'id': '139', 'title': 'في تهنئة عيد العرش.. ترامب يجدد اعتراف أمريكا بمغربية الصحراء ودعمها لمقترح الحكم الذاتي', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1090199.html', 'summary': 'في تهنئة عيد العرش.. ترامب يجدد اعتراف أمريكا بمغربية الصحراء ودعمها لمقترح الحكم الذاتي. جدد رئيس الولايات المتحدة الأمريكية، دونالد ج. ترامب، في برقية إلى الملك محمد السادس بمناسبة عيد العرش، التأكيد على اعتراف الولايات المتحدة الأمريكية بالسيادة المغربية على الصحراء، ودعمها للمقترح المغربي للحكم الذاتي “باعتباره الأساس الوحيد من أجل تسوية عادلة ودائمة لهذا النزاع”. وأكد ترامب، في برقيته إلى الملك، “كما أود أن أجدد التأكيد على أن ظهرت المقالة في تهنئة عيد العرش.. ترامب يجدد اعتراف أمريكا بمغربية الصحراء ودعمها لمقترح الحكم الذاتي  .', 'size': 4}, {'id': '307', 'title': 'ترامب يوجّه رسالة إلى الملك محمد السادس ويجدّد الاعتراف الأمريكي بمغربية الصحراء', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/politic/410384.html', 'summary': 'ترامب يوجّه رسالة إلى الملك محمد السادس ويجدّد الاعتراف الأمريكي بمغربية الصحراء. جدد رئيس الولايات المتحدة الأمريكية، دونالد ج. ترامب، في برقية إلى صاحب الجلالة الملك محمد السادس بمناسبة عيد العرش، التأكيد على اعتراف الولايات المتحدة الأمريكية', 'size': 4}], 'main_title': 'عيد العرش.. ترامب يجدد التأكيد على اعتراف الولايات المتحدة بالسيادة المغربية على الصحراء'}, {'community_id': '5', 'articles': [{'id': '115', 'title': 'وزيرة فلسطينية: مساعدات جلالة الملك محمد السادس ستلبي حاجيات غزة الإنسانية والطبية', 'source': 'kifache.com', 'link': 'https://kifache.com/%d9%88%d8%b2%d9%8a%d8%b1%d8%a9-%d9%81%d9%84%d8%b3%d8%b7%d9%8a%d9%86%d9%8a%d8%a9-%d9%85%d8%b3%d8%a7%d8%b9%d8%af%d8%a7%d8%aa-%d8%ac%d9%84%d8%a7%d9%84%d8%a9-%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%85%d8%ad/', 'summary': 'وزيرة فلسطينية: مساعدات جلالة الملك محمد السادس ستلبي حاجيات غزة الإنسانية والطبية. أكدت وزيرة التنمية الاجتماعية الفلسطينية، سماح حمد، أن المساعدة الإنسانية والطبية العاجلة التي أعطى صاحب الجلالة الملك محمد السادس تعليماته السامية من أجل إرسالها إلى الشعب الفلسطيني وخاصة ساكنة غزة ستساعد على تلبية احتياجات ساكنة القطاع من الأغذية والأدوية. وقالت سماح في تصريح لوكالة المغرب العربي للأنباء، “نشكر جلالة الملك على كل مبادراته الإنسانية ونقدر', 'size': 2}, {'id': '160', 'title': 'وزيرة فلسطينية تشكر الملك محمد السادس على دعم صمود غزة في ظل الأزمة الإنسانية', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d9%88%d8%b2%d9%8a%d8%b1%d8%a9-%d9%81%d9%84%d8%b3%d8%b7%d9%8a%d9%86%d9%8a%d8%a9-%d8%aa%d8%b4%d9%83%d8%b1-%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%85%d8%ad%d9%85%d8%af-%d8%a7%d9%84%d8%b3%d8%a7%d8%af%d8%b3/', 'summary': 'وزيرة فلسطينية تشكر الملك محمد السادس على دعم صمود غزة في ظل الأزمة الإنسانية. أكدت وزيرة التنمية الاجتماعية الفلسطينية، سماح حمد، أن المساعدة الإنسانية والطبية العاجلة التي أعطى الملك محمد السادس تعليماته من أجل إرسالها إلى الشعب الفلسطيني وخاصة ساكنة غزة ستساعد على تلبية احتياجات ساكنة القطاع من الأغذية والأدوية. وقالت سماح في تصريح لوكالة المغرب العربي للأنباء، "نشكر الملك محمد السادس على كل مبادراته الإنسانية ونقدر مساعيه القيمة  وزيرة فلسطينية تشكر الملك محمد السادس على دعم صمود غزة في ظل الأزمة الإنسانية     .', 'size': 2}], 'main_title': 'وزيرة فلسطينية: مساعدات جلالة الملك محمد السادس ستلبي حاجيات غزة الإنسانية والطبية'}, {'community_id': '6', 'articles': [{'id': '142', 'title': 'حادثة مميتة تحصد أرواح 3 أشخاص وتصيب طفلين على الطريق السيار قرب سطات', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1090186.html', 'summary': 'حادثة مميتة تحصد أرواح 3 أشخاص وتصيب طفلين على الطريق السيار قرب سطات. شهدت الطريق السيار الرابطة بين الدار البيضاء وأكادير، صباح اليوم السبت 2 غشت، حادثة سير خطيرة أسفرت عن مصرع ثلاثة أشخاص، بينهم زوجان وسائق سيارة أخرى، بالإضافة إلى إصابة طفلين بجروح متفاوتة الخطورة. وحسب معطيات أولية، فإن الحادث وقع عند النقطة الكيلومترية 70 التابعة لجماعة المزامزة الجنوبية بإقليم سطات، إثر اصطدام عنيف بين سيارتين خفيفتين. ظهرت المقالة حادثة مميتة تحصد أرواح 3 أشخاص وتصيب طفلين على الطريق السيار قرب سطات  .', 'size': 3}, {'id': '396', 'title': 'اصطدام بين سيارتين يودي بحياة ثلاثة أشخاص وإصابة طفلين بالطريق السيار الدار البيضاء أكادير', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/225565/', 'summary': 'اصطدام بين سيارتين يودي بحياة ثلاثة أشخاص وإصابة طفلين بالطريق السيار الدار البيضاء أكادير. السعيد بنلباه وقعت اليوم السبت 2 غشت 2025 حادثة مميتة بين سيارتين خفيفتين بالطريق السيار بالنقطة الكيلومترية 70 على مستوى منطقة المزامزة الجنوبية نواحي مدينة سطات . وراح ضحية الحادثة 3 أشخاص فيما أصيب طفلان إصابات متفاوتة الخطورة ، وذلك بالطريق السيار وتشوفي الأشخاص الثلاثة فورا ويتعلق الأمر بابوي الطفلين وهما زوجان يشتغلان مديرين تربويين', 'size': 2}, {'id': '409', 'title': 'حادثة سير مروعة قرب سطات تخلف ثلاثة قتلى وطفلين مصابين', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%ad%d8%a7%d8%af%d8%ab%d8%a9-%d8%b3%d9%8a%d8%b1-%d9%85%d8%b1%d9%88%d8%b9%d8%a9-%d9%82%d8%b1%d8%a8-%d8%b3%d8%b7%d8%a7%d8%aa-%d8%aa%d8%ae%d9%84%d9%81-%d8%ab%d9%84%d8%a7%d8%ab%d8%a9-%d9%82%d8%aa%d9%84/', 'summary': 'حادثة سير مروعة قرب سطات تخلف ثلاثة قتلى وطفلين مصابين. لقي ثلاثة أشخاص مصرعهم، صباح اليوم السبت 2 غشت 2025، في حادثة سير مروعة وقعت بالطريق السيار الرابط بين الدار البيضاء وأكادير، وبالضبط على مقربة من مدينة سطات. وبحسب المعطيات المتوفرة فإن الحادث نجم عن اصطدام عنيف بين سيارتين، أسفر عن وفاة ثلاثة أشخاص في عين المكان، من بينهم سيدة، فيما أصيب طفلان …  حادثة سير مروعة قرب سطات تخلف ثلاثة قتلى وطفلين مصابين     .', 'size': 2}], 'main_title': 'حادثة مميتة تحصد أرواح 3 أشخاص وتصيب طفلين على الطريق السيار قرب سطات'}, {'community_id': '3', 'articles': [{'id': '212', 'title': 'المغرب بقيادة جلالة الملك محمد السادس.. نفذ “إصلاحات منهجية وموجهة نحو المستقبل”', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/225536/', 'summary': 'المغرب بقيادة جلالة الملك محمد السادس.. نفذ “إصلاحات منهجية وموجهة نحو المستقبل”. ذكرت صحيفة غلوبال تايمز الصينية أن المغرب، بقيادة جلالة الملك محمد السادس، نفذ “إصلاحات منهجية وموجهة نحو المستقبل” حققت نتائج ملحوظة في عدة مجالات رئيسية على مدى السنوات الست والعشرين الماضية. وفي مقال مرفق بصورتين لجلالة الملك، سلطت النسخة الانجليزية من صحيفة غلوبال تايمز الضوء على التقدم الذي حققه المغرب في مجال البنية التحتية، مشيرة', 'size': 2}, {'id': '232', 'title': 'صحيفة صينية: المغرب نفّذ إصلاحات منهجية موجهة نحو المستقبل بقيادة الملك محمد السادس', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%b5%d8%ad%d9%8a%d9%81%d8%a9-%d8%b5%d9%8a%d9%86%d9%8a%d8%a9-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d9%86%d9%81%d9%91%d8%b0-%d8%a5%d8%b5%d9%84%d8%a7%d8%ad%d8%a7%d8%aa-%d9%85%d9%86%d9%87%d8%ac%d9%8a/', 'summary': 'صحيفة صينية: المغرب نفّذ إصلاحات منهجية موجهة نحو المستقبل بقيادة الملك محمد السادس. نشرت صحيفة غلوبال تايمز الصينية، في نسختها الإنجليزية، مقالا مطولا بمناسبة احتفالات المغرب بعيد العرش، أبرزت فيه المسار التنموي الذي عرفته المملكة خلال 26 سنة من حكم الملك محمد السادس، ووصفت الإصلاحات التي شهدها المغرب بأنها “منهجية وموجهة نحو المستقبل”، محققة إنجازات ملموسة في عدة قطاعات استراتيجية. وذكرت الصحيفة أن المغرب شهد تطورا …  صحيفة صينية: المغرب نفّذ إصلاحات منهجية موجهة نحو المستقبل بقيادة الملك محمد السادس     .', 'size': 2}], 'main_title': 'المغرب بقيادة جلالة الملك محمد السادس.. نفذ “إصلاحات منهجية وموجهة نحو المستقبل”'}, {'community_id': '7', 'articles': [{'id': '214', 'title': 'الاتحاد الألماني للمقاولات الصغرى والمتوسطة: يفتح آفاقا إفريقية أمام الشركات الألمانية والأوروبية', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/225529/', 'summary': 'الاتحاد الألماني للمقاولات الصغرى والمتوسطة: يفتح آفاقا إفريقية أمام الشركات الألمانية والأوروبية. برلين – أكد أندرياس يان، رئيس الاتحاد الألماني للمقاولات الصغرى والمتوسطة والأمين العام لتحالف المقاولات الألمانية من أجل إفريقيا، أن المغرب، بقيادة صاحب الجلالة الملك محمد السادس، وبفضل مسار تنموي عميق وتحولي، يفتح الآن آفاقا قارية أمام الشركات الألمانية والأوروبية. وقال السيد يان، في تصريح لوكالة المغرب العربي للأنباء، إن المملكة، بفضل ما تزخر به', 'size': 2}, {'id': '329', 'title': 'المغرب يفتح آفاقا إفريقية أمام الشركات الألمانية والأوروبية', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/320055/', 'summary': 'المغرب يفتح آفاقا إفريقية أمام الشركات الألمانية والأوروبية. أكد أندرياس يان، رئيس الاتحاد الألماني للمقاولات الصغرى والمتوسطة والأمين العام لتحالف المقاولات الألمانية من أجل إفريقيا، أن المغرب، بقيادة صاحب الجلالة الملك محمد السادس، وبفضل مسار تنموي عميق وتحولي، يفتح الآن آفاقا قارية أمام الشركات الألمانية والأوروبية. وقال يان، في تصريح لوكالة المغرب العربي للأنباء، إن المملكة، بفضل ما تزخر به من إمكانيات متعددة،', 'size': 2}], 'main_title': 'الاتحاد الألماني للمقاولات الصغرى والمتوسطة: يفتح آفاقا إفريقية أمام الشركات الألمانية والأوروبية'}, {'community_id': '0', 'articles': [{'id': '303', 'title': 'وزير الداخلية يعقد  اجتماعا مع قادة الأحزاب السياسية في شأن التحضير للانتخابات التشريعية المقبلة', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/204580', 'summary': 'وزير الداخلية يعقد اجتماعا مع قادة الأحزاب السياسية في شأن التحضير للانتخابات التشريعية المقبلة.  عقد وزير الداخلية، يومه السبت 2 غشت الجاري، اجتماعين متواليين مع قادة كافة الأحزاب السياسية خصصا لموضوع تحضير الانتخابات التشريعية المتعلقة بانتخاب أعضاء مجلس النواب لسنة 2026. ويندرج هذان الاجتماعان في إطار التنفيذ الفوري للتوجيهات السامية لصاحب الجلالة الملك محمد السادس نصره الله وأيده، الواردة في خطاب العرش ليوم 29 يوليوز المنصرم، بمناسبة تخليد', 'size': 4}, {'id': '331', 'title': 'بأمر ملكي.. الداخلية تبدأ التحضير لانتخابات 2026 والأحزاب مدعوة لتقديم مقترحاتها', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/320058/', 'summary': 'بأمر ملكي.. الداخلية تبدأ التحضير لانتخابات 2026 والأحزاب مدعوة لتقديم مقترحاتها. عقد وزير الداخلية، عبد الوافي لفتيت، اليوم السبت 2 غشت الجاري، اجتماعين متواليين مع قادة كافة الأحزاب السياسية خصصا لموضوع تحضير الانتخابات التشريعية المتعلقة بانتخاب أعضاء مجلس النواب لسنة 2026. ووفقًا لبلاغ صادر عن وزارة الداخلية، فإن الأمر يندرج إطار التنفيذ الفوري للتوجيهات السامية للملك محمد السادس الواردة في خطاب العرش ليوم 29 يوليوز المنصرم،', 'size': 3}, {'id': '345', 'title': 'انتخابات 2026.. الداخلية تتفق مع الأحزاب السياسية على نهاية غشت لتقديم مقترحاتها', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1090243.html', 'summary': 'انتخابات 2026.. الداخلية تتفق مع الأحزاب السياسية على نهاية غشت لتقديم مقترحاتها. عقد وزير الداخلية، اليوم السبت 2 غشت الجاري، اجتماعين متواليين مع قادة كافة الأحزاب السياسية خصصا لموضوع تحضير الانتخابات التشريعية المتعلقة بانتخاب أعضاء مجلس النواب لسنة 2026. ويندرج هذان الاجتماعان، وفق بلاغ لوزارة الداخلية في إطار التنفيذ الفوري للتوجيهات السامية للملك محمد السادس الواردة في خطاب العرش ليوم 29 يوليوز المنصرم، بمناسبة تخليد الذكرى السادسة ظهرت المقالة انتخابات 2026.. الداخلية تتفق مع الأحزاب السياسية على نهاية غشت لتقديم مقترحاتها  .', 'size': 3}, {'id': '355', 'title': 'بعد التوجيهات الملكية.. انطلاق التحضيرات التشريعية المبكرة لانتخابات 2026', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a8%d8%b9%d8%af-%d8%a7%d9%84%d8%aa%d9%88%d8%ac%d9%8a%d9%87%d8%a7%d8%aa-%d8%a7%d9%84%d9%85%d9%84%d9%83%d9%8a%d8%a9-%d8%a8%d8%af%d8%a1-%d8%a7%d9%84%d8%aa%d8%ad%d8%b6%d9%8a%d8%b1-%d8%a7%d9%84%d8%aa/', 'summary': 'بعد التوجيهات الملكية.. انطلاق التحضيرات التشريعية المبكرة لانتخابات 2026. عقد وزير الداخلية، اليوم السبت بالرباط، اجتماعين متواليين مع قادة كافة الأحزاب السياسية، خصصا لموضوع تحضير الانتخابات التشريعية المتعلقة بانتخاب أعضاء مجلس النواب لسنة 2026. وذكر بلاغ لوزير الداخلية أن هذين الاجتماعين يندرجان في إطار التنفيذ الفوري للتوجيهات الملك محمد السادس، الواردة في خطاب العرش ليوم 29 يوليوز المنصرم، بمناسبة تخليد الذكرى السادسة والعشرين لتربع  بعد التوجيهات الملكية.. انطلاق التحضيرات التشريعية المبكرة لانتخابات 2026     .', 'size': 4}], 'main_title': 'وزير الداخلية يعقد  اجتماعا مع قادة الأحزاب السياسية في شأن التحضير للانتخابات التشريعية المقبلة'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    