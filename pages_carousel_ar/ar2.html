<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 29/07/2025 - 18h34</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '6', 'title': 'إسرائيل تقترف مجزرة جديدة في غزة', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d8%a5%d8%b3%d8%b1%d8%a7%d8%a6%d9%8a%d9%84-%d8%aa%d9%82%d8%aa%d8%b1%d9%81-%d9%85%d8%ac%d8%b2%d8%b1%d8%a9-%d8%ac%d8%af%d9%8a%d8%af%d8%a9-%d9%81%d9%8a-%d8%ba%d8%b2%d8%a9-2-1600808.html', 'summary': 'إسرائيل تقترف مجزرة جديدة في غزة. أعلن محمود بصل، الناطق باسم الدفاع المدني في قطاع غزة، أن 30 فلسطينيا، غالبيتهم نساء وأطفال، قتلوا في غارات شنّها الطيران الحربي الإسرائيلي ليل الاثنين-الثلاثاء على مخيم النصيرات. وقتل 13 آخرون بنيران الجيش الإسرائيلي؛ بينهم سبعة قرب مركز للمساعدات في منطقة النصيرات. وقال بصل: “مجزرة جديدة في مخيم النصيرات ارتكبها الاحتلال إثر غارات جوية إسرائيلية  إسرائيل تقترف مجزرة جديدة في غزة     - هسبريس جريدة إلكترونية مغربية .', 'size': 2}, {'id': '175', 'title': 'استشهاد 30 فلسطينيا في قصف للاحتلال الإسرائيلي على مخيم النصيرات', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a7%d8%b3%d8%aa%d8%b4%d9%87%d8%a7%d8%af-30-%d9%81%d9%84%d8%b3%d8%b7%d9%8a%d9%86%d9%8a%d8%a7-%d9%81%d9%8a-%d9%82%d8%b5%d9%81-%d9%84%d9%84%d8%a7%d8%ad%d8%aa%d9%84%d8%a7%d9%84-%d8%a7%d9%84%d8%a5%d8%b3/', 'summary': 'استشهاد 30 فلسطينيا في قصف للاحتلال الإسرائيلي على مخيم النصيرات. أعلن الناطق باسم الدفاع المدني في قطاع غزة أن 30 فلسطينيا غالبيتهم نساء وأطفال استشهدوا في غارات شنها الطيران الحربي للاحتلال الإسرائيلي ليل الاثنين الثلاثاء على مخيم النصيرات. وقال محمود بصل "مجزرة جديدة في مخيم النصيرات ارتكبها الاحتلال إثر غارات جوية إسرائيلية ليلا وفجر اليوم استهدفت عددا من منازل المواطنين في منطقة المخيم الجديد في  استشهاد 30 فلسطينيا في قصف للاحتلال الإسرائيلي على مخيم النصيرات     .', 'size': 2}], 'main_title': 'إسرائيل تقترف مجزرة جديدة في غزة'}, {'community_id': '1', 'articles': [{'id': '48', 'title': 'الطقس غدا الثلاثاء.. حرارة مرتفعة بالجنوب الشرقي وأجواء ضبابية قرب السواحل', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-644733.html', 'summary': 'الطقس غدا الثلاثاء.. حرارة مرتفعة بالجنوب الشرقي وأجواء ضبابية قرب السواحل. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليوم غد الثلاثاء، أن تتميز الحالة الجوية عامة، بطقس حار بالجنوب الشرقي للبلاد، وبداخل الأقاليم الصحراوية، وحار نسبيا بالسهول الممتدة غرب الأطلس الكبير. كما يرتقب تشكل سحب منخفضة مصحوبة بكتل ضبابية بالقرب من السواحل، فضلا عن تسجيل هبات رياح قوية نوعا ما بكل من المنطقة الشرقية، مرتفعات الأطلس وجنوب البلاد، وستكون مرفوقة بتطاير الغبار محليا. وستتراوح درجات الحرارة الدنيا، ما بين 25 و31 درجة بالجنوب الشرقي وبشرق الأقاليم الصحراوية، وما بين 18 و 25 درجة بباقي الأرجاء الأخرى. أما درجات الحرارة خلال النهار، فستشهد بعض الانخفاض الطفيف فوق كافة ربوع المملكة. وسيكون البحر قليل الهيجان إلى هائج بالواجهة المتوسطية والبوغاز وعلى طول الساحل الأطلسي. عناوين مناسبة وكلمات مفتاحية', 'size': 2}, {'id': '149', 'title': 'توقعات طقس اليوم الثلاثاء بالبلاد', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/319608/', 'summary': 'توقعات طقس اليوم الثلاثاء بالبلاد. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الثلاثاء، أن تتميز الحالة الجوية عامة، بطقس حار بالجنوب الشرقي للبلاد، وبداخل الأقاليم الصحراوية، وحار نسبيا بالسهول الممتدة غرب الأطلس الكبير. كما يرتقب تشكل سحب منخفضة مصحوبة بكتل ضبابية بالقرب من السواحل، فضلا عن تسجيل هبات رياح قوية نوعا ما بكل من المنطقة الشرقية، مرتفعات الأطلس وجنوب البلاد،', 'size': 4}, {'id': '177', 'title': 'حالة الطقس: الحرارة مستمرة مع رياح قوية', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%ad%d8%a7%d9%84%d8%a9-%d8%a7%d9%84%d8%b7%d9%82%d8%b3-%d8%ad%d8%a7%d8%b1-%d9%85%d8%b9-%d8%b1%d9%8a%d8%a7%d8%ad-%d9%82%d9%88%d9%8a%d8%a9/', 'summary': 'حالة الطقس: الحرارة مستمرة مع رياح قوية. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليوم الثلاثاء، أن تتميز الحالة الجوية عامة، بطقس حار بالجنوب الشرقي للبلاد، وبداخل الأقاليم الصحراوية، وحار نسبيا بالسهول الممتدة غرب الأطلس الكبير. كما يرتقب تشكل سحب منخفضة مصحوبة بكتل ضبابية بالقرب من السواحل، فضلا عن تسجيل هبات رياح قوية نوعا ما بكل من المنطقة الشرقية، مرتفعات الأطلس وجنوب البلاد،  حالة الطقس: الحرارة مستمرة مع رياح قوية     .', 'size': 3}, {'id': '237', 'title': 'طقس الاثنين: استمرار الحرارة.. وقطرات مطرية محدودة', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%b7%d9%82%d8%b3-%d8%a7%d9%84%d8%a7%d8%ab%d9%86%d9%8a%d9%86-%d8%a7%d8%b3%d8%aa%d9%85%d8%b1%d8%a7%d8%b1-%d8%a7%d9%84%d8%ad%d8%b1%d8%a7%d8%b1%d8%a9-%d9%88%d9%82%d8%b7%d8%b1%d8%a7%d8%aa-%d9%85%d8%b7/', 'summary': 'طقس الاثنين: استمرار الحرارة.. وقطرات مطرية محدودة. المساء اليوم: تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الاثنين، أن يكون الطقس حارا بالسهول غرب الأطلس، والجنوب الشرقي، وبداخل الأقاليم الصحراوية. كما يرتقب تشكل سحب منخفضة كثيفة بالسواحل والسهول الشمالية والوسطى، مصحوبة بكتل ضبابية', 'size': 3}], 'main_title': 'توقعات طقس اليوم الثلاثاء بالبلاد'}, {'community_id': '2', 'articles': [{'id': '78', 'title': 'مقاطع الفيديو حول قضية وفاة " هشام منداري" لا تمت للحقيقة بأي صلة', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/society/410086.html', 'summary': 'مقاطع الفيديو حول قضية وفاة " هشام منداري" لا تمت للحقيقة بأي صلة. أعلن وكيل الملك لدى المحكمة الابتدائية الزجرية بالدار البيضاء أن مقاطع الفيديو التي تم نشرها بأحد المواقع الإلكترونية والتي تضمنت مجموعة من المعطيات والمزاعم حول', 'size': 3}, {'id': '228', 'title': 'وكيل الملك بالدار البيضاء: الفيديوهات حول وفاة “هشام منداري” لا تمت للحقيقة بأي صلة', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/225285/', 'summary': 'وكيل الملك بالدار البيضاء: الفيديوهات حول وفاة “هشام منداري” لا تمت للحقيقة بأي صلة. أعلن وكيل الملك لدى المحكمة الابتدائية الزجرية بالدار البيضاء أن مقاطع الفيديو التي تم نشرها بأحد المواقع الإلكترونية والتي تضمنت مجموعة من المعطيات والمزاعم حول قضية وفاة المسمى قيد حياته” هشام منداري”، “لا تمت للحقيقة بأي صلة”. وأوضح وكيل الملك، في بلاغ له، أن التسجيلات المذكورة شكلت موضوع بحث قضائي قدم بموجبه أخ الهالك أمام', 'size': 3}, {'id': '233', 'title': 'بيان لوكيل الملك لدى المحكمة الابتدائية الزجرية بالدار البيضاء حول قضية وفاة هشام منداري', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%a8%d9%8a%d8%a7%d9%86-%d9%84%d9%88%d9%83%d9%8a%d9%84-%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%84%d8%af%d9%89-%d8%a7%d9%84%d9%85%d8%ad%d9%83%d9%85%d8%a9-%d8%a7%d9%84%d8%a7%d8%a8%d8%aa%d8%af%d8%a7%d8%a6/', 'summary': 'بيان لوكيل الملك لدى المحكمة الابتدائية الزجرية بالدار البيضاء حول قضية وفاة هشام منداري. المساء اليوم – الدار البيضاء: أعلن وكيل الملك لدى المحكمة الابتدائية الزجرية بالدار البيضاء أن مقاطع الفيديو التي تم نشرها بأحد المواقع الإلكترونية والتي تضمنت “مجموعة من المعطيات والمزاعم حول قضية وفاة المسمى قيد حياته”', 'size': 3}], 'main_title': 'مقاطع الفيديو حول قضية وفاة " هشام منداري" لا تمت للحقيقة بأي صلة'}, {'community_id': '3', 'articles': [{'id': '96', 'title': 'رئيس الحكومة يترأس أشغال أول مجلس إدارة للمجموعة الصحية الترابية بجهة طنجة-تطوان-الحسيمة', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/410104.html', 'summary': 'رئيس الحكومة يترأس أشغال أول مجلس إدارة للمجموعة الصحية الترابية بجهة طنجة-تطوان-الحسيمة. ترأس رئيس الحكومة عزيز أخنوش، يوم الإثنين 28 يوليوز 2025 بالمركز الاستشفائي الجامعي محمد السادس بطنجة، أشغال أول مجلس إدارة للمجموعة الصحية الترابية بجهة طنجة-تطوان-الحسيمة،', 'size': 3}, {'id': '197', 'title': 'أخنوش يعطي الانطلاقة لأول مجموعة صحية ترابية بجهة طنجة', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/470876.html', 'summary': 'أخنوش يعطي الانطلاقة لأول مجموعة صحية ترابية بجهة طنجة. ترأس رئيس الحكومة عزيز أخنوش، يوم الإثنين 28 يوليوز 2025 بالمركز الاستشفائي الجامعي محمد السادس بطنجة، أشغال أول مجلس إدارة للمجموعة الصحية الترابية بجهة طنجة-تطوان-الحسيمة، كأول منطقة نموذجية لإطلاق مشروع المجموعات الصحية الترابية، في سياق تنزيل التوجيهات الملكية السامية للملك محمد السادس، الرامية إلى إحداث إصلاح جذري وعميق للمنظومة الصحية الوطنية، في إطار تفعيل ورش …', 'size': 2}, {'id': '209', 'title': 'انعقاد أول مجلس إدارة للمجموعة الصحية الترابية بجهة طنجة-تطوان-الحسيمة', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d8%a7%d9%86%d8%b9%d9%82%d8%a7%d8%af-%d8%a3%d9%88%d9%84-%d9%85%d8%ac%d9%84%d8%b3-%d8%a5%d8%af%d8%a7%d8%b1%d8%a9-%d9%84%d9%84%d9%85%d8%ac%d9%85%d9%88%d8%b9%d8%a9-%d8%a7%d9%84%d8%b5%d8%ad%d9%8a%d8%a9/', 'summary': 'انعقاد أول مجلس إدارة للمجموعة الصحية الترابية بجهة طنجة-تطوان-الحسيمة. ترأس رئيس الحكومة، عزيز أخنوش، اليوم الإثنين بالمركز الاستشفائي الجامعي محمد السادس بطنجة، أشغال أول مجلس إدارة للمجموعة الصحية الترابية بجهة  انعقاد أول مجلس إدارة للمجموعة الصحية الترابية بجهة طنجة-تطوان-الحسيمة     .', 'size': 2}], 'main_title': 'رئيس الحكومة يترأس أشغال أول مجلس إدارة للمجموعة الصحية الترابية بجهة طنجة-تطوان-الحسيمة'}, {'community_id': '4', 'articles': [{'id': '99', 'title': 'هام ... موعد ومكان الاستعراضات الجوية بمناسبة الاحتفالات بعيد العرش', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/410108.html', 'summary': 'هام ... موعد ومكان الاستعراضات الجوية بمناسبة الاحتفالات بعيد العرش. في إطار الاحتفال المجيد بالذكرى السادسة والعشرين لتربع صاحب الجلالة الملك، القائد الأعلى ورئيس أركان الحرب العامة للقوات المسلحة الملكية، نصره الله، على عرش أسلافه', 'size': 2}, {'id': '220', 'title': 'بمناسبة عيد العرش المجيد: القوات المسلحة الملكية تنظم عروضا جوية وقفزات استعراضية بالمظلات', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/225308/', 'summary': 'بمناسبة عيد العرش المجيد: القوات المسلحة الملكية تنظم عروضا جوية وقفزات استعراضية بالمظلات. في إطار الاحتفال المجيد بالذكرى السادسة والعشرين لتربع صاحب الجلالة الملك، القائد الأعلى ورئيس أركان الحرب العامة للقوات المسلحة الملكية، نصره الله، على عرش أسلافه الميامين، تنظم القوات المسلحة الملكية عروضا جوية وقفزات استعراضية بالمظلات يومي 30 و31 يوليوز 2025. وأفاد بلاغ للقيادة العامة للقوات المسلحة الملكية بأن هذه العروض الجوية ستقام على طول ساحل', 'size': 2}], 'main_title': 'هام ... موعد ومكان الاستعراضات الجوية بمناسبة الاحتفالات بعيد العرش'}, {'community_id': '5', 'articles': [{'id': '148', 'title': 'لمجرد يروج ل”دياب الغابة”', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/319611/', 'summary': 'لمجرد يروج ل”دياب الغابة”. يستعد الفنان سعد لمجود، لإطلاق جديده الفني بعنوان «دياب الغابة»، حيث استهل الترويج له على مواقع التواصل الإجتماعي. وأعلن لمجرد، في منشور على حسابه الرسمي بموقع «إنستغرام»، عن قرب إصدار جديده، حيث اكتفى بتعليق مقتضب قال فيه: “دياب الغابة… قريبا”، دون الإفصاح عن أي تفاصيل إضافية بشأن تاريخ الإصدار أو طبيعة المشروع. ورغم شح المعلومات،', 'size': 2}, {'id': '351', 'title': 'بعنوان “دياب الغابة”.. سعد لمجرد يروج لجديده الفني', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a8%d8%b9%d9%86%d9%88%d8%a7%d9%86-%d8%af%d9%8a%d8%a7%d8%a8-%d8%a7%d9%84%d8%ba%d8%a7%d8%a8%d8%a9-%d8%b3%d8%b9%d8%af-%d9%84%d9%85%d8%ac%d8%b1%d8%af-%d9%8a%d8%b1%d9%88%d8%ac-%d9%84%d8%ac%d8%af/', 'summary': 'بعنوان “دياب الغابة”.. سعد لمجرد يروج لجديده الفني. شوق الفنان سعد لمجرد جمهوره لجديده الفني، وهي أغنية بعنوان “دياب الغابة” من المتوقع أن يقوم بطرحها خلال الأيام المقبلة. وتقاسم لمجرد مع متابعي حسابه على إنستغرام بوستر الأغنية، دون أن يكشف عن أي تفاصيل، كما جرت العادة مع جمهوره ومحبيه. ويأتي هذا الإصدار الفني بعد مرور أسابيع قليلة على آخر عمل للمجرد، أغنية “ريسكينا”،', 'size': 2}], 'main_title': 'لمجرد يروج ل”دياب الغابة”'}, {'community_id': '6', 'articles': [{'id': '330', 'title': 'وزير التعليم يعفي رئيس جامعة ابن طفيل بعد “فضيحة الشيخات”', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/204246', 'summary': 'وزير التعليم يعفي رئيس جامعة ابن طفيل بعد “فضيحة الشيخات”.  في أعقاب الضجة الواسعة التي أثارها ما أصبح يُعرف بـ”فضيحة الشيخات”، قرر وزير التعليم العالي والبحث العلمي والابتكار، عز الدين ميداوي، إعفاء محمد العربي كركب من مهامه كرئيس لجامعة ابن طفيل بمدينة القنيطرة، وذلك بعد موافقة رئيس الحكومة. وجاء هذا القرار على خلفية تنظيم حفل تخرج داخل حرم الجامعة، تخللته فقرات موسيقية شعبية أدّتها', 'size': 2}, {'id': '379', 'title': '“الشيخات” تطيح برئيس جامعة ابن طفيل..  ومسؤول لـ”العمق”: أخل بالمسؤولية', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1089146.html', 'summary': '“الشيخات” تطيح برئيس جامعة ابن طفيل.. ومسؤول لـ”العمق”: أخل بالمسؤولية. قرر وزير التعليم العالي والبحث العلمي والابتكار عز الدين ميداوي إعفاء رئيس جامعة بن طفيل بالقنيطرة محمد العربي كركب على خلفية واقعة الحفل الغنائي الذي نظمته المدرسة الوطنية للتجارة والتسيير بمدينة القنيطرة، والذي وصف من قبل عدد من المعلقين بـ”غير الملائم” لصرح جامعي. أثار تنظيم حفل تخرج بمشاركة “الشيخات”، موجة من الجدل والاستنكار على مواقع ظهرت المقالة “الشيخات” تطيح برئيس جامعة ابن طفيل.. ومسؤول لـ”العمق”: أخل بالمسؤولية  .', 'size': 2}], 'main_title': 'وزير التعليم يعفي رئيس جامعة ابن طفيل بعد “فضيحة الشيخات”'}, {'community_id': '7', 'articles': [{'id': '331', 'title': 'جلالة الملك يوجه خطابا ساميا إلى شعبه الوفي بمناسبة عيد العرش المجيد ويترأس مراسم الاحتفالات بهذه المناسبة (وزارة القصور الملكية والتشريفات والأوسمة)', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/204237', 'summary': 'جلالة الملك يوجه خطابا ساميا إلى شعبه الوفي بمناسبة عيد العرش المجيد ويترأس مراسم الاحتفالات بهذه المناسبة (وزارة القصور الملكية والتشريفات والأوسمة).  أعلنت وزارة القصور الملكية والتشريفات والأوسمة أنه بمناسبة تخليد الذكرى السادسة والعشرين لتربع صاحب الجلالة الملك محمد السادس، نصره الله وأيده، على عرش أسلافه الميامين، سيوجه جلالته حفظه الله، مساء اليوم الثلاثاء خطابا ساميا إلى شعبه الوفي. كما سيترأس جلالته يومي الاربعاء والخميس مراسم الاحتفالات التي تخلد هذه المناسبة. وفي ما يلي نص البلاغ', 'size': 6}, {'id': '345', 'title': 'عيد العرش: جلالة الملك يقر جدول الترقية لسنة 2025 لأفراد القوات المسلحة الملكية والدرك الملكي والحرس الملكي والقوات المساعدة', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/410150.html', 'summary': 'عيد العرش: جلالة الملك يقر جدول الترقية لسنة 2025 لأفراد القوات المسلحة الملكية والدرك الملكي والحرس الملكي والقوات المساعدة. استقبل صاحب الجلالة الملك محمد السادس، القائد الأعلى ورئيس أركان الحرب العامة للقوات المسلحة الملكية، نصره الله وأيده، اليوم الثلاثاء 29 يوليوز 2025 بالقصر الملكي', 'size': 5}, {'id': '347', 'title': 'عيد العرش.. جلالة الملك يقر على جدول الترقية لسنة 2025 المتعلق بأفراد القوات المسلحة الملكية والدرك الملكي والحرس الملكي والقوات المساعدة', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%b9%d9%8a%d8%af-%d8%a7%d9%84%d8%b9%d8%b1%d8%b4-%d8%ac%d9%84%d8%a7%d9%84%d8%a9-%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%8a%d9%82%d8%b1-%d8%b9%d9%84%d9%89-%d8%ac%d8%af%d9%88%d9%84-%d8%a7%d9%84%d8%aa/', 'summary': 'عيد العرش.. جلالة الملك يقر على جدول الترقية لسنة 2025 المتعلق بأفراد القوات المسلحة الملكية والدرك الملكي والحرس الملكي والقوات المساعدة. استقبل صاحب الجلالة الملك محمد السادس، القائد الأعلى ورئيس أركان الحرب العامة للقوات المسلحة الملكية، نصره الله وأيده، اليوم الثلاثاء (29 يوليوز)، بالقصر الملكي بتطوان أعضاء لجنة الترقية العسكرية. وذكر بلاغ للقيادة العامة للقوات المسلحة الملكية أنه خلال هذا الاستقبال، رفعت اللجنة إلى صاحب الجلالة الملك، القائد الأعلى ورئيس أركان الحرب العامة للقوات المسلحة الملكية،', 'size': 5}, {'id': '359', 'title': 'عيد العرش.. جلالة الملك يقر على جدول الترقية لسنة 2025', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/319663/', 'summary': 'عيد العرش.. جلالة الملك يقر على جدول الترقية لسنة 2025. استقبل صاحب الجلالة الملك محمد السادس، القائد الأعلى ورئيس أركان الحرب العامة للقوات المسلحة الملكية، نصره الله وأيده، اليوم الثلاثاء 29 يوليوز 2025 بالقصر الملكي بتطوان أعضاء لجنة الترقية العسكرية. وذكر بلاغ للقيادة العامة للقوات المسلحة الملكية أنه خلال هذا الاستقبال، رفعت اللجنة إلى صاحب الجلالة الملك، القائد الأعلى ورئيس أركان الحرب العامة للقوات المسلحة', 'size': 5}, {'id': '396', 'title': 'جلالة الملك يؤشر على الترقية السنوية لأفراد الجيش/الدرك /الحرس الملكي/القوات المساعدة', 'source': 'rue20.com', 'link': 'https://rue20.com/924936.html', 'summary': 'جلالة الملك يؤشر على الترقية السنوية لأفراد الجيش/الدرك /الحرس الملكي/القوات المساعدة.  . الرباط استقبل صاحب الجلالة الملك محمد السادس، القائد الأعلى ورئيس أركان الحرب العامة للقوات المسلحة الملكية، نصره الله وأيده، اليوم الثلاثاء 29 يوليوز 2025 بالقصر الملكي بتطوان أعضاء لجنة الترقية العسكرية. وذكر بلاغ للقيادة العامة للقوات المسلحة الملكية أنه خلال هذا الاستقبال، رفعت اللجنة إلى صاحب الجلالة الملك، القائد الأعلى ورئيس أركان الخبر جلالة الملك يؤشر على الترقية السنوية لأفراد الجيش/الدرك /الحرس الملكي/القوات المساعدة  .', 'size': 5}, {'id': '409', 'title': 'الملك يوجه خطابا ساميا إلى الشعب ويترأس احتفالات عيد العرش', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/470965.html', 'summary': 'الملك يوجه خطابا ساميا إلى الشعب ويترأس احتفالات عيد العرش. أعلنت وزارة القصور الملكية والتشريفات والأوسمة أنه بمناسبة تخليد الذكرى السادسة والعشرين لتربع الملك محمد السادس على عرش أسلافه الميامين، سيوجه، مساء اليوم الثلاثاء خطابا ساميا إلى شعبه الوفي. كما سيترأس يومي الأربعاء والخميس مراسم الاحتفالات التي تخلد هذه المناسبة. وفي ما يلي نص البلاغ الذي أصدرته وزارة القصور الملكية والتشريفات والأوسمة بهذا الخصوص: “تعلن …', 'size': 2}, {'id': '445', 'title': 'الملك محمد السادس يوجه خطابا ساميا إلى شعبه الوفي بمناسبة عيد العرش المجيد ويترأس مراسم الاحتفالات بهذه المناسبة', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%85%d8%ad%d9%85%d8%af-%d8%a7%d9%84%d8%b3%d8%a7%d8%af%d8%b3-%d9%8a%d9%88%d8%ac%d9%87-%d8%ae%d8%b7%d8%a7%d8%a8%d8%a7-%d8%b3%d8%a7%d9%85%d9%8a%d8%a7-%d8%a5%d9%84%d9%89-3/', 'summary': 'الملك محمد السادس يوجه خطابا ساميا إلى شعبه الوفي بمناسبة عيد العرش المجيد ويترأس مراسم الاحتفالات بهذه المناسبة. أعلنت وزارة القصور الملكية والتشريفات والأوسمة، أنه بمناسبة تخليد الذكرى السادسة والعشرين لتربع الملك محمد السادس، على عرش أسلافه الميامين، سيوجه جلالته، مساء اليوم الثلاثاء خطابا ساميا إلى شعبه الوفي، كما سيترأس جلالته يومي الاربعاء والخميس مراسم الاحتفالات التي تخلد هذه المناسبة. وفي ما يلي نص البلاغ الذي أصدرته وزارة القصور الملكية والتشريفات …  الملك محمد السادس يوجه خطابا ساميا إلى شعبه الوفي بمناسبة عيد العرش المجيد ويترأس مراسم الاحتفالات بهذه المناسبة     .', 'size': 3}], 'main_title': 'جلالة الملك يوجه خطابا ساميا إلى شعبه الوفي بمناسبة عيد العرش المجيد ويترأس مراسم الاحتفالات بهذه المناسبة (وزارة القصور الملكية والتشريفات والأوسمة)'}, {'community_id': '8', 'articles': [{'id': '338', 'title': 'حلوى "مشبوهة" تُربك زايو.. والسلطات تُغلق المحل وتطمئن السكان بعد فحوصات دقيقة', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/410143.html', 'summary': 'حلوى "مشبوهة" تُربك زايو.. والسلطات تُغلق المحل وتطمئن السكان بعد فحوصات دقيقة. أكدت السلطات المحلية بإقليم الناظور أن نتائج الفحوصات والتحاليل الطبية التي أجريت على مجموعة من الأشخاص كانوا قد توافدوا على مستشفى القرب بزايو، أول أمس', 'size': 2}, {'id': '423', 'title': 'السلطات المحلية: الوافدون على مستشفى زايو ليست لديهم أية إصابات ويمتعون بصحة جيدة', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d8%a7%d9%84%d8%b3%d9%84%d8%b7%d8%a7%d8%aa-%d8%a7%d9%84%d9%85%d8%ad%d9%84%d9%8a%d8%a9-%d8%a7%d9%84%d9%88%d8%a7%d9%81%d8%af%d9%88%d9%86-%d8%b9%d9%84%d9%89-%d9%85%d8%b3%d8%aa%d8%b4%d9%81%d9%89-%d8%b2/', 'summary': 'السلطات المحلية: الوافدون على مستشفى زايو ليست لديهم أية إصابات ويمتعون بصحة جيدة. أكدت السلطات المحلية بإقليم الناظور أن نتائج الفحوصات والتحاليل الطبية التي أجريت على مجموعة من الأشخاص كانوا قد توافدوا على مستشفى القرب بزايو،  السلطات المحلية: الوافدون على مستشفى زايو ليست لديهم أية إصابات ويمتعون بصحة جيدة     .', 'size': 3}, {'id': '436', 'title': 'سلطات الناظور: التحاليل الطبية والفحوصات بالصدى أثبتت عدم وجود آثار ابتلاع قطع زجاجية', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/225317/', 'summary': 'سلطات الناظور: التحاليل الطبية والفحوصات بالصدى أثبتت عدم وجود آثار ابتلاع قطع زجاجية. على إثر تداول أخبار تتحدث عن تعرض عدة أشخاص بزايو لإصابات متفاوتة الخطورة، جراء تناولهم لحلوى احتوت على قطع زجاجية، توضح السلطات المحلية بإقليم الناظور أن نتائج الفحوصات والتحاليل الطبية التي أجريت على مجموعة من الأشخاص كانوا قد توافدوا على مستشفى القرب بزايو الأحد 27 يوليوز الجاري، خلصت إلى عدم وجود أية إصابات لديهم وتمتعهم', 'size': 2}], 'main_title': 'السلطات المحلية: الوافدون على مستشفى زايو ليست لديهم أية إصابات ويمتعون بصحة جيدة'}, {'community_id': '9', 'articles': [{'id': '348', 'title': 'رفع إلى جلالته التقرير السنوي لبنك المغرب.. جلالة الملك يستقبل الجواهري بالقصر الملكي بتطوان', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%b1%d9%81%d8%b9-%d8%a5%d9%84%d9%89-%d8%ac%d9%84%d8%a7%d9%84%d8%aa%d9%87-%d8%a7%d9%84%d8%aa%d9%82%d8%b1%d9%8a%d8%b1-%d8%a7%d9%84%d8%b3%d9%86%d9%88%d9%8a-%d9%84%d8%a8%d9%86%d9%83-%d8%a7%d9%84%d9%85/', 'summary': 'رفع إلى جلالته التقرير السنوي لبنك المغرب.. جلالة الملك يستقبل الجواهري بالقصر الملكي بتطوان. استقبل صاحب الجلالة الملك محمد السادس، نصره الله، مرفوقا بصاحب السمو الملكي ولي العهد الأمير مولاي الحسن، وصاحب السمو الملكي الأمير مولاي رشيد، اليوم الثلاثاء (29 يوليوز)، بالقصر الملكي بتطوان، عبد اللطيف الجواهري، والي بنك المغرب، الذي رفع إلى جلالته التقرير السنوي للبنك المركزي حول الوضعية الاقتصادية والنقدية والمالية برسم سنة 2024. وفي معرض كلمته', 'size': 5}, {'id': '358', 'title': 'تقرير بنك المغرب بين يدي الملك.. الجواهري يقدم ملامح تعافي الاقتصاد المغربي', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/319667/', 'summary': 'تقرير بنك المغرب بين يدي الملك.. الجواهري يقدم ملامح تعافي الاقتصاد المغربي. استقبل صاحب الجلالة الملك محمد السادس، نصره الله، مرفوقا بصاحب السمو الملكي ولي العهد الأمير مولاي الحسن، وصاحب السمو الملكي الأمير مولاي رشيد، اليوم الثلاثاء، بالقصر الملكي بتطوان، السيد عبد اللطيف الجواهري، والي بنك المغرب، الذي رفع إلى جلالته التقرير السنوي للبنك المركزي حول الوضعية الاقتصادية والنقدية والمالية برسم سنة 2024. وفي معرض كلمته بين', 'size': 5}, {'id': '387', 'title': 'والي بنك المغرب يعتبر في استقبال ملكي مناصب العمل المحدثة "غير كافية" لوقف تفاقم البطالة', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d9%88%d8%a7%d9%84%d9%8a-%d8%a8%d9%86%d9%83-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d9%8a%d8%b9%d9%86%d8%a8%d8%b1-%d9%81%d9%8a-%d8%a7%d8%b3%d8%aa%d9%82%d8%a8%d8%a7%d9%84-%d9%85%d9%84%d9%83%d9%8a-%d9%85/', 'summary': 'والي بنك المغرب يعتبر في استقبال ملكي مناصب العمل المحدثة "غير كافية" لوقف تفاقم البطالة. استقبل الملك محمد السادس، اليوم الثلاثاء، بالقصر الملكي بتطوان، عبد اللطيف الجواهري، والي بنك المغرب، الذي رفع التقرير السنوي للبنك المركزي حول الوضعية الاقتصادية والنقدية والمالية برسم سنة 2024. وفي معرض كلمته بين يدي الملك، قال الجواهري إنه رغم سياق دولي متسم بمستوى عال من اللايقين وتوالي سنوات الجفاف، تمكن الاقتصاد الوطني خلال سنة 2024  والي بنك المغرب يعتبر في استقبال ملكي مناصب العمل المحدثة "غير كافية" لوقف تفاقم البطالة     .', 'size': 4}, {'id': '398', 'title': 'الجواهري يقدم تقريراً إلى الملك حول الوضعية الإقتصادية و المالية.. تحولات استراتيجية وسباق نحو 2030', 'source': 'rue20.com', 'link': 'https://rue20.com/924912.html', 'summary': 'الجواهري يقدم تقريراً إلى الملك حول الوضعية الإقتصادية و المالية.. تحولات استراتيجية وسباق نحو 2030.  | الرباط استقبل الملك محمد السادس، مرفوقا بولي العهد الأمير مولاي الحسن، والأمير مولاي رشيد، اليوم الثلاثاء، بالقصر الملكي بتطوان، عبد اللطيف الجواهري، والي بنك المغرب، الذي رفع إلى جلالته التقرير السنوي للبنك المركزي حول الوضعية الاقتصادية والنقدية والمالية برسم سنة 2024. وفي معرض كلمته بين يدي الملك، قال الجواهري إنه رغم سياق الخبر الجواهري يقدم تقريراً إلى الملك حول الوضعية الإقتصادية و المالية.. تحولات استراتيجية وسباق نحو 2030  .', 'size': 5}, {'id': '433', 'title': 'جلالة الملك يستقبل والي بنك المغرب ويطلع على التقرير السنوي حول الوضعية الاقتصادية والنقدية والمالية', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/225323/', 'summary': 'جلالة الملك يستقبل والي بنك المغرب ويطلع على التقرير السنوي حول الوضعية الاقتصادية والنقدية والمالية. تطوان – استقبل صاحب الجلالة الملك محمد السادس، نصره الله، مرفوقا بصاحب السمو الملكي ولي العهد الأمير مولاي الحسن، وصاحب السمو الملكي الأمير مولاي رشيد، اليوم الثلاثاء، بالقصر الملكي بتطوان، السيد عبد اللطيف الجواهري، والي بنك المغرب، الذي رفع إلى جلالته التقرير السنوي للبنك المركزي حول الوضعية الاقتصادية والنقدية والمالية برسم سنة 2024. وفي معرض', 'size': 4}], 'main_title': 'رفع إلى جلالته التقرير السنوي لبنك المغرب.. جلالة الملك يستقبل الجواهري بالقصر الملكي بتطوان'}, {'community_id': '10', 'articles': [{'id': '394', 'title': 'المغرب يعزز موقعه كلاعب دولي في ملف الهجرة بمساهمة استثنائية في صندوق أممي', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d9%85%d8%b3%d8%a4%d9%88%d9%84%d8%a9-%d8%a3%d9%85%d9%85%d9%8a%d8%a9-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d8%a3%d9%88%d9%84-%d8%a8%d9%84%d8%af-%d9%85%d8%b3%d8%a7%d9%87%d9%85-%d9%81%d9%8a-%d8%b5%d9%86/', 'summary': 'المغرب يعزز موقعه كلاعب دولي في ملف الهجرة بمساهمة استثنائية في صندوق أممي. أعلنت المديرة العامة للمنظمة الدولية للهجرة، إيمي بوب، أن المملكة المغربية أصبحت، أمس الاثنين، أول بلد مساهم في "صندوق الصمود" الجديد التابع لهذه الوكالة الأممية. وكتبت في رسالة منشورة على وسائل التواصل الاجتماعي: "نحن فخورون بالإعلان عن تقديم المغرب مساهمة طوعية استثنائية لصندوق الصمود التابع للمنظمة الدولية للهجرة، الذي أطلق مؤخرا، ليصبح بذلك أول  المغرب يعزز موقعه كلاعب دولي في ملف الهجرة بمساهمة استثنائية في صندوق أممي     .', 'size': 2}, {'id': '413', 'title': 'مديرة عامة: المغرب أول بلد مساهم في صندوق الصمود التابع للمنظمة الدولية للهجرة', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/470949.html', 'summary': 'مديرة عامة: المغرب أول بلد مساهم في صندوق الصمود التابع للمنظمة الدولية للهجرة. أعلنت المديرة العامة للمنظمة الدولية للهجرة، إيمي بوب، أن المملكة المغربية أصبحت، أمس الاثنين، أول بلد مساهم في “صندوق الصمود” الجديد التابع لهذه الوكالة الأممية. وكتبت في رسالة منشورة على وسائل التواصل الاجتماعي: “نحن فخورون بالإعلان عن تقديم المغرب مساهمة طوعية استثنائية لصندوق الصمود التابع للمنظمة الدولية للهجرة، الذي أطلق مؤخرا، ليصبح بذلك أول بلد …', 'size': 2}], 'main_title': 'المغرب يعزز موقعه كلاعب دولي في ملف الهجرة بمساهمة استثنائية في صندوق أممي'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    