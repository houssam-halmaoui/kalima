<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 29/07/2025 - 12h25</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '36', 'title': 'الطقس غدا الثلاثاء.. حرارة مرتفعة بالجنوب الشرقي وأجواء ضبابية قرب السواحل', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-644733.html', 'summary': 'الطقس غدا الثلاثاء.. حرارة مرتفعة بالجنوب الشرقي وأجواء ضبابية قرب السواحل. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليوم غد الثلاثاء، أن تتميز الحالة الجوية عامة، بطقس حار بالجنوب الشرقي للبلاد، وبداخل الأقاليم الصحراوية، وحار نسبيا بالسهول الممتدة غرب الأطلس الكبير. كما يرتقب تشكل سحب منخفضة مصحوبة بكتل ضبابية بالقرب من السواحل، فضلا عن تسجيل هبات رياح قوية نوعا ما بكل من المنطقة الشرقية، مرتفعات الأطلس وجنوب البلاد، وستكون مرفوقة بتطاير الغبار محليا. وستتراوح درجات الحرارة الدنيا، ما بين 25 و31 درجة بالجنوب الشرقي وبشرق الأقاليم الصحراوية، وما بين 18 و 25 درجة بباقي الأرجاء الأخرى. أما درجات الحرارة خلال النهار، فستشهد بعض الانخفاض الطفيف فوق كافة ربوع المملكة. وسيكون البحر قليل الهيجان إلى هائج بالواجهة المتوسطية والبوغاز وعلى طول الساحل الأطلسي. عناوين مناسبة وكلمات مفتاحية', 'size': 2}, {'id': '74', 'title': 'طقس الإثنين.. أجواء حارة بمختلف مناطق المملكة', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/410061.html', 'summary': 'طقس الإثنين.. أجواء حارة بمختلف مناطق المملكة. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الاثنين، أن يكون الطقس حارا بالسهول غرب الأطلس، والجنوب الشرقي، وبداخل الأقاليم الصحراوية. كما يرتقب تشكل سحب منخفضة كثيفة', 'size': 4}, {'id': '233', 'title': 'طقس الاثنين: استمرار الحرارة.. وقطرات مطرية محدودة', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%b7%d9%82%d8%b3-%d8%a7%d9%84%d8%a7%d8%ab%d9%86%d9%8a%d9%86-%d8%a7%d8%b3%d8%aa%d9%85%d8%b1%d8%a7%d8%b1-%d8%a7%d9%84%d8%ad%d8%b1%d8%a7%d8%b1%d8%a9-%d9%88%d9%82%d8%b7%d8%b1%d8%a7%d8%aa-%d9%85%d8%b7/', 'summary': 'طقس الاثنين: استمرار الحرارة.. وقطرات مطرية محدودة. المساء اليوم: تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الاثنين، أن يكون الطقس حارا بالسهول غرب الأطلس، والجنوب الشرقي، وبداخل الأقاليم الصحراوية. كما يرتقب تشكل سحب منخفضة كثيفة بالسواحل والسهول الشمالية والوسطى، مصحوبة بكتل ضبابية', 'size': 4}, {'id': '346', 'title': 'توقعات طقس اليوم الثلاثاء بالبلاد', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/319608/', 'summary': 'توقعات طقس اليوم الثلاثاء بالبلاد. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الثلاثاء، أن تتميز الحالة الجوية عامة، بطقس حار بالجنوب الشرقي للبلاد، وبداخل الأقاليم الصحراوية، وحار نسبيا بالسهول الممتدة غرب الأطلس الكبير. كما يرتقب تشكل سحب منخفضة مصحوبة بكتل ضبابية بالقرب من السواحل، فضلا عن تسجيل هبات رياح قوية نوعا ما بكل من المنطقة الشرقية، مرتفعات الأطلس وجنوب البلاد،', 'size': 5}, {'id': '364', 'title': 'حالة الطقس: الحرارة مستمرة مع رياح قوية', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%ad%d8%a7%d9%84%d8%a9-%d8%a7%d9%84%d8%b7%d9%82%d8%b3-%d8%ad%d8%a7%d8%b1-%d9%85%d8%b9-%d8%b1%d9%8a%d8%a7%d8%ad-%d9%82%d9%88%d9%8a%d8%a9/', 'summary': 'حالة الطقس: الحرارة مستمرة مع رياح قوية. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليوم الثلاثاء، أن تتميز الحالة الجوية عامة، بطقس حار بالجنوب الشرقي للبلاد، وبداخل الأقاليم الصحراوية، وحار نسبيا بالسهول الممتدة غرب الأطلس الكبير. كما يرتقب تشكل سحب منخفضة مصحوبة بكتل ضبابية بالقرب من السواحل، فضلا عن تسجيل هبات رياح قوية نوعا ما بكل من المنطقة الشرقية، مرتفعات الأطلس وجنوب البلاد،  حالة الطقس: الحرارة مستمرة مع رياح قوية     .', 'size': 4}], 'main_title': 'توقعات طقس اليوم الثلاثاء بالبلاد'}, {'community_id': '4', 'articles': [{'id': '62', 'title': 'من جهة طنجة.. الحكامة الترابية لقطاع الصحة تتعزز بإطلاق أول مجموعة صحية ترابية', 'source': 'www.alakhbar.press.ma', 'link': 'https://www.alakhbar.press.ma/%d9%85%d9%86-%d8%ac%d9%87%d8%a9-%d8%b7%d9%86%d8%ac%d8%a9-%d8%a7%d9%84%d8%ad%d9%83%d8%a7%d9%85%d8%a9-%d8%a7%d9%84%d8%aa%d8%b1%d8%a7%d8%a8%d9%8a%d8%a9-%d9%84%d9%82%d8%b7%d8%a7%d8%b9-%d8%a7%d9%84%d8%b5-270073.html', 'summary': 'من جهة طنجة.. الحكامة الترابية لقطاع الصحة تتعزز بإطلاق أول مجموعة صحية ترابية. ترأس رئيس الحكومة، عزيز أخنوش، اليوم الإثنين بالمركز الاستشفائي الجامعي محمد السادس بطنجة، أشغال أول مجلس إدارة للمجموعة الصحية الترابية بجهة طنجة-تطوان-الحسيمة، التي يُنتظر أن يعزز انطلاقها الحكامة الترابية لقطاع الصحة بالجهة، في أفق تعميمه في جميع جهات المملكة. وأوضح بلاغ صادر عن رئاسة الحكومة، أن جهة طنجة تمثل أول منطقة نموذجية لإطلاق مشروع …  من جهة طنجة.. الحكامة الترابية لقطاع الصحة تتعزز بإطلاق أول مجموعة صحية ترابية     .', 'size': 2}, {'id': '117', 'title': 'رئيس الحكومة يترأس أشغال أول مجلس إدارة للمجموعة الصحية الترابية بجهة طنجة-تطوان-الحسيمة', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/410104.html', 'summary': 'رئيس الحكومة يترأس أشغال أول مجلس إدارة للمجموعة الصحية الترابية بجهة طنجة-تطوان-الحسيمة. ترأس رئيس الحكومة عزيز أخنوش، يوم الإثنين 28 يوليوز 2025 بالمركز الاستشفائي الجامعي محمد السادس بطنجة، أشغال أول مجلس إدارة للمجموعة الصحية الترابية بجهة طنجة-تطوان-الحسيمة،', 'size': 3}, {'id': '189', 'title': 'أخنوش يعطي الانطلاقة لأول مجموعة صحية ترابية بجهة طنجة', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/470876.html', 'summary': 'أخنوش يعطي الانطلاقة لأول مجموعة صحية ترابية بجهة طنجة. ترأس رئيس الحكومة عزيز أخنوش، يوم الإثنين 28 يوليوز 2025 بالمركز الاستشفائي الجامعي محمد السادس بطنجة، أشغال أول مجلس إدارة للمجموعة الصحية الترابية بجهة طنجة-تطوان-الحسيمة، كأول منطقة نموذجية لإطلاق مشروع المجموعات الصحية الترابية، في سياق تنزيل التوجيهات الملكية السامية للملك محمد السادس، الرامية إلى إحداث إصلاح جذري وعميق للمنظومة الصحية الوطنية، في إطار تفعيل ورش …', 'size': 3}, {'id': '201', 'title': 'انعقاد أول مجلس إدارة للمجموعة الصحية الترابية بجهة طنجة-تطوان-الحسيمة', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d8%a7%d9%86%d8%b9%d9%82%d8%a7%d8%af-%d8%a3%d9%88%d9%84-%d9%85%d8%ac%d9%84%d8%b3-%d8%a5%d8%af%d8%a7%d8%b1%d8%a9-%d9%84%d9%84%d9%85%d8%ac%d9%85%d9%88%d8%b9%d8%a9-%d8%a7%d9%84%d8%b5%d8%ad%d9%8a%d8%a9/', 'summary': 'انعقاد أول مجلس إدارة للمجموعة الصحية الترابية بجهة طنجة-تطوان-الحسيمة. ترأس رئيس الحكومة، عزيز أخنوش، اليوم الإثنين بالمركز الاستشفائي الجامعي محمد السادس بطنجة، أشغال أول مجلس إدارة للمجموعة الصحية الترابية بجهة  انعقاد أول مجلس إدارة للمجموعة الصحية الترابية بجهة طنجة-تطوان-الحسيمة     .', 'size': 2}], 'main_title': 'رئيس الحكومة يترأس أشغال أول مجلس إدارة للمجموعة الصحية الترابية بجهة طنجة-تطوان-الحسيمة'}, {'community_id': '2', 'articles': [{'id': '69', 'title': 'عيد العرش المجيد..القوات المسلحة الملكية تنظم عروضا جوية وقفزات استعراضية بالمظلات', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/204187', 'summary': 'عيد العرش المجيد..القوات المسلحة الملكية تنظم عروضا جوية وقفزات استعراضية بالمظلات.  في إطار الاحتفال المجيد بالذكرى السادسة والعشرين لتربع صاحب الجلالة الملك، القائد الأعلى ورئيس أركان الحرب العامة للقوات المسلحة الملكية، نصره الله،على عرش أسلافه الميامين، تنظم القوات المسلحة الملكية عروضا جوية وقفزات استعراضية بالمظلات يومي 30 و31 يوليوز 2025. وأفاد بلاغ للقيادة العامة للقوات المسلحة الملكية بأن هذه العروض الجوية ستقام على طول', 'size': 3}, {'id': '120', 'title': 'هام ... موعد ومكان الاستعراضات الجوية بمناسبة الاحتفالات بعيد العرش', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/410108.html', 'summary': 'هام ... موعد ومكان الاستعراضات الجوية بمناسبة الاحتفالات بعيد العرش. في إطار الاحتفال المجيد بالذكرى السادسة والعشرين لتربع صاحب الجلالة الملك، القائد الأعلى ورئيس أركان الحرب العامة للقوات المسلحة الملكية، نصره الله، على عرش أسلافه', 'size': 3}, {'id': '219', 'title': 'بمناسبة عيد العرش المجيد: القوات المسلحة الملكية تنظم عروضا جوية وقفزات استعراضية بالمظلات', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/225308/', 'summary': 'بمناسبة عيد العرش المجيد: القوات المسلحة الملكية تنظم عروضا جوية وقفزات استعراضية بالمظلات. في إطار الاحتفال المجيد بالذكرى السادسة والعشرين لتربع صاحب الجلالة الملك، القائد الأعلى ورئيس أركان الحرب العامة للقوات المسلحة الملكية، نصره الله، على عرش أسلافه الميامين، تنظم القوات المسلحة الملكية عروضا جوية وقفزات استعراضية بالمظلات يومي 30 و31 يوليوز 2025. وأفاد بلاغ للقيادة العامة للقوات المسلحة الملكية بأن هذه العروض الجوية ستقام على طول ساحل', 'size': 3}], 'main_title': 'عيد العرش المجيد..القوات المسلحة الملكية تنظم عروضا جوية وقفزات استعراضية بالمظلات'}, {'community_id': '3', 'articles': [{'id': '99', 'title': 'مقاطع الفيديو حول قضية وفاة " هشام منداري" لا تمت للحقيقة بأي صلة', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/society/410086.html', 'summary': 'مقاطع الفيديو حول قضية وفاة " هشام منداري" لا تمت للحقيقة بأي صلة. أعلن وكيل الملك لدى المحكمة الابتدائية الزجرية بالدار البيضاء أن مقاطع الفيديو التي تم نشرها بأحد المواقع الإلكترونية والتي تضمنت مجموعة من المعطيات والمزاعم حول', 'size': 4}, {'id': '183', 'title': 'وكيل الملك بالدارالبيضاء يكشف تفاصيل “تسجيلات المنداري” وإدانة شقيقه بالسجن خمس سنوات', 'source': 'rue20.com', 'link': 'https://rue20.com/924604.html', 'summary': 'وكيل الملك بالدارالبيضاء يكشف تفاصيل “تسجيلات المنداري” وإدانة شقيقه بالسجن خمس سنوات.  | الرباط أعلن وكيل الملك لدى المحكمة الابتدائية الزجرية بالدار البيضاء أن مقاطع الفيديو التي تم نشرها بأحد المواقع الإلكترونية والتي تضمنت مجموعة من المعطيات والمزاعم حول قضية وفاة المسمى قيد حياته” هشام منداري”، “لا تمت للحقيقة بأي صلة”. وأوضح وكيل الملك، في بلاغ له، أن التسجيلات المذكورة شكلت موضوع بحث قضائي قدم الخبر وكيل الملك بالدارالبيضاء يكشف تفاصيل “تسجيلات المنداري” وإدانة شقيقه بالسجن خمس سنوات  .', 'size': 2}, {'id': '196', 'title': 'وكيل الملك يكشف حقيقة مقاطع فيديو حول قضية وفاة “هشام منداري”', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/470862.html', 'summary': 'وكيل الملك يكشف حقيقة مقاطع فيديو حول قضية وفاة “هشام منداري”. أعلن وكيل الملك لدى المحكمة الابتدائية الزجرية بالدار البيضاء أن مقاطع الفيديو التي تم نشرها بأحد المواقع الإلكترونية والتي تضمنت مجموعة من المعطيات والمزاعم حول قضية وفاة المسمى قيد حياته” هشام منداري”، “لا تمت للحقيقة بأي صلة”. وأوضح وكيل الملك، في بلاغ له، أن التسجيلات المذكورة شكلت موضوع بحث قضائي قدم بموجبه أخ الهالك أمام …', 'size': 3}, {'id': '226', 'title': 'وكيل الملك بالدار البيضاء: الفيديوهات حول وفاة “هشام منداري” لا تمت للحقيقة بأي صلة', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/225285/', 'summary': 'وكيل الملك بالدار البيضاء: الفيديوهات حول وفاة “هشام منداري” لا تمت للحقيقة بأي صلة. أعلن وكيل الملك لدى المحكمة الابتدائية الزجرية بالدار البيضاء أن مقاطع الفيديو التي تم نشرها بأحد المواقع الإلكترونية والتي تضمنت مجموعة من المعطيات والمزاعم حول قضية وفاة المسمى قيد حياته” هشام منداري”، “لا تمت للحقيقة بأي صلة”. وأوضح وكيل الملك، في بلاغ له، أن التسجيلات المذكورة شكلت موضوع بحث قضائي قدم بموجبه أخ الهالك أمام', 'size': 5}, {'id': '229', 'title': 'بيان لوكيل الملك لدى المحكمة الابتدائية الزجرية بالدار البيضاء حول قضية وفاة هشام منداري', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%a8%d9%8a%d8%a7%d9%86-%d9%84%d9%88%d9%83%d9%8a%d9%84-%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%84%d8%af%d9%89-%d8%a7%d9%84%d9%85%d8%ad%d9%83%d9%85%d8%a9-%d8%a7%d9%84%d8%a7%d8%a8%d8%aa%d8%af%d8%a7%d8%a6/', 'summary': 'بيان لوكيل الملك لدى المحكمة الابتدائية الزجرية بالدار البيضاء حول قضية وفاة هشام منداري. المساء اليوم – الدار البيضاء: أعلن وكيل الملك لدى المحكمة الابتدائية الزجرية بالدار البيضاء أن مقاطع الفيديو التي تم نشرها بأحد المواقع الإلكترونية والتي تضمنت “مجموعة من المعطيات والمزاعم حول قضية وفاة المسمى قيد حياته”', 'size': 3}], 'main_title': 'وكيل الملك بالدار البيضاء: الفيديوهات حول وفاة “هشام منداري” لا تمت للحقيقة بأي صلة'}, {'community_id': '5', 'articles': [{'id': '125', 'title': 'وزير الصحة: المجموعات الصحية الترابية ستمكن من تحسين العرض الصحي وتجويد استغلال الموارد', 'source': 'kifache.com', 'link': 'https://kifache.com/%d9%88%d8%b2%d9%8a%d8%b1-%d8%a7%d9%84%d8%b5%d8%ad%d8%a9-%d8%a7%d9%84%d9%85%d8%ac%d9%85%d9%88%d8%b9%d8%a7%d8%aa-%d8%a7%d9%84%d8%b5%d8%ad%d9%8a%d8%a9-%d8%a7%d9%84%d8%aa%d8%b1%d8%a7%d8%a8%d9%8a%d8%a9/', 'summary': 'وزير الصحة: المجموعات الصحية الترابية ستمكن من تحسين العرض الصحي وتجويد استغلال الموارد. أكد وزير الصحة والحماية الاجتماعية، أمين التهراوي، اليوم الاثنين (28 يوليوز) بطنجة، أن المجموعات الصحية الترابية ستمكن بشكل كبير من تحسين العرض الصحي وجودة الخدمات المقدمة، فضلا عن تجويد استغلال الموارد المتاحة. وأبرز الوزير، في تصريح للصحافة على هامش أول اجتماع لمجلس إدارة المجموعة الصحية الترابية لجهة طنجة-تطوان-الحسيمة المنعقد تحت رئاسة رئيس الحكومة عزيز أخنوش،', 'size': 2}, {'id': '140', 'title': 'الحق في العلاج أولوية.. الحكومة تطلق أول مجموعة صحية ترابية بجهة الشمال', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/319593/', 'summary': 'الحق في العلاج أولوية.. الحكومة تطلق أول مجموعة صحية ترابية بجهة الشمال. أكد رئيس الحكومة عزيز أخنوش، اليوم الإثنين بطنجة، أن إطلاق المجموعة الصحية لجهة طنجة-تطوان-الحسيمة يشكل نقطة الانطلاق لإصلاح وطني وهيكلي، يعكس الإرادة القوية في جعل الحق في الصحة واقعا ملموسا لجميع المواطنين في جميع أنحاء المملكة. وأوضح أخنوش، في كلمة بمناسبة انعقاد الاجتماع الأول لمجلس إدارة المجموعة الصحية الترابية لجهة طنجة-تطوان-الحسيمة، أن إحداث المجموعات الصحية', 'size': 4}, {'id': '175', 'title': 'أخنوش يرأس أول مجلس لإدارة "الصحة الجهوية" إيذانا ببدء العد العكسي لإصلاح النظام الصحي', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a3%d8%ae%d9%86%d9%88%d8%b4-%d9%8a%d8%b1%d8%a3%d8%b3-%d8%a3%d9%88%d9%84-%d9%85%d8%ac%d9%84%d8%b3-%d9%84%d8%a5%d8%af%d8%a7%d8%b1%d8%a9-%d8%a7%d9%84%d8%b5%d8%ad%d8%a9-%d8%a7%d9%84%d8%ac%d9%87%d9%88/', 'summary': 'أخنوش يرأس أول مجلس لإدارة "الصحة الجهوية" إيذانا ببدء العد العكسي لإصلاح النظام الصحي. ترأس رئيس الحكومة، عزيز أخنوش، الإثنين، بالمركز الاستشفائي الجامعي محمد السادس بمدينة طنجة، أشغال أول مجلس إدارة للمجموعة الصحية الترابية بجهة طنجة-تطوان-الحسيمة، في خطوة تُعد إيذانا بانطلاق أول نموذج عملي لتنزيل إصلاحات جذرية في المنظومة الصحية الوطنية، في إطار مشروع تعميم الحماية الاجتماعية وتنفيذاً للتوجيهات الملكية السامية. هذا الاجتماع، الذي حضره وزراء ومسؤولون كبار على  أخنوش يرأس أول مجلس لإدارة "الصحة الجهوية" إيذانا ببدء العد العكسي لإصلاح النظام الصحي     .', 'size': 2}, {'id': '213', 'title': 'أخنوش يتحدث عن إطلاق المجموعة الصحية لجهة طنجة-تطوان-الحسيمة', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d8%a3%d8%ae%d9%86%d9%88%d8%b4-%d9%8a%d8%aa%d8%ad%d8%af%d8%ab-%d8%b9%d9%86-%d8%a5%d8%b7%d9%84%d8%a7%d9%82-%d8%a7%d9%84%d9%85%d8%ac%d9%85%d9%88%d8%b9%d8%a9-%d8%a7%d9%84%d8%b5%d8%ad%d9%8a%d8%a9-%d9%84/', 'summary': 'أخنوش يتحدث عن إطلاق المجموعة الصحية لجهة طنجة-تطوان-الحسيمة. أكد رئيس الحكومة عزيز أخنوش، اليوم الإثنين بطنجة، أن إطلاق المجموعة الصحية لجهة طنجة-تطوان-الحسيمة يشكل نقطة الانطلاق لإصلاح وطني وهيكلي،  أخنوش يتحدث عن إطلاق المجموعة الصحية لجهة طنجة-تطوان-الحسيمة     .', 'size': 2}], 'main_title': 'الحق في العلاج أولوية.. الحكومة تطلق أول مجموعة صحية ترابية بجهة الشمال'}, {'community_id': '6', 'articles': [{'id': '144', 'title': 'المغرب يدعو إلى إحداث صندوق دولي لتعزيز الأمن الغذائي في إفريقيا', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/319584/', 'summary': 'المغرب يدعو إلى إحداث صندوق دولي لتعزيز الأمن الغذائي في إفريقيا. دعا المغرب، اليوم الاثنين بأديس أبابا، إلى إحداث صندوق دولي مخصص للأمن الغذائي في إفريقيا بهدف تعزيز السيادة الغذائية للقارة. وقال وزير الفلاحة والصيد البحري والتنمية القروية والمياه والغابات، أحمد البواري، خلال مشاركته في أشغال التقييم الثاني لقمة الأمم المتحدة حول الأنظمة الغذائية، إن “المملكة تدعو إلى إحداث صندوق دولي موجه للأمن الغذائي في إفريقيا،', 'size': 2}, {'id': '150', 'title': 'المغرب يعرض بأديس أبابا تجربته في “الجيل الأخضر” ويدعو لصندوق غذائي إفريقي', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1088840.html', 'summary': 'المغرب يعرض بأديس أبابا تجربته في “الجيل الأخضر” ويدعو لصندوق غذائي إفريقي. دعا المغرب، اليوم الاثنين بأديس أبابا، إلى إحداث صندوق دولي مخصص للأمن الغذائي في إفريقيا بهدف تعزيز السيادة الغذائية للقارة. وقال وزير الفلاحة والصيد البحري والتنمية القروية والمياه والغابات، أحمد البواري، خلال مشاركته في أشغال التقييم الثاني لقمة الأمم المتحدة حول الأنظمة الغذائية، إن “المملكة تدعو إلى إحداث صندوق دولي موجه للأمن الغذائي في إفريقيا، ظهرت المقالة المغرب يعرض بأديس أبابا تجربته في “الجيل الأخضر” ويدعو لصندوق غذائي إفريقي  .', 'size': 2}], 'main_title': 'المغرب يدعو إلى إحداث صندوق دولي لتعزيز الأمن الغذائي في إفريقيا'}, {'community_id': '7', 'articles': [{'id': '223', 'title': 'السيدة الأولى لجمهورية السلفادور تزور مركز التشخيص والتأهيل السمعي التابع لمؤسسة للا أسماء', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/225298/', 'summary': 'السيدة الأولى لجمهورية السلفادور تزور مركز التشخيص والتأهيل السمعي التابع لمؤسسة للا أسماء. الرباط – قامت السيدة الأولى لجمهورية السلفادور، السيدة غابرييلا رودريغيز دي بوكيلي، اليوم الاثنين بالرباط، بزيارة مركز التشخيص والتأهيل السمعي التابع لمؤسسة للا أسماء. وبهذه المناسبة، تابعت السيدة غابرييلا رودريغيز دي بوكيلي عرضا حول مختلف أنشطة هذا المركز، الذي يجسد التزام المغرب لفائدة إدماج الأطفال الصم، تحت القيادة السامية لصاحب الجلالة الملك محمد السادس، وبرعاية', 'size': 2}, {'id': '238', 'title': 'السيدة الأولى لجمهورية السلفادور تزور بالرباط مركز التشخيص والتأهيل السمعي التابع لمؤسسة للا أسماء', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d8%b3%d9%8a%d8%af%d8%a9-%d8%a7%d9%84%d8%a3%d9%88%d9%84%d9%89-%d9%84%d8%ac%d9%85%d9%87%d9%88%d8%b1%d9%8a%d8%a9-%d8%a7%d9%84%d8%b3%d9%84%d9%81%d8%a7%d8%af%d9%88%d8%b1-%d8%aa%d8%b2%d9%88/', 'summary': 'السيدة الأولى لجمهورية السلفادور تزور بالرباط مركز التشخيص والتأهيل السمعي التابع لمؤسسة للا أسماء. قامت السيدة الأولى لجمهورية السلفادور، غابرييلا رودريغيز دي بوكيلي، اليوم الاثنين بالرباط، بزيارة مركز التشخيص والتأهيل السمعي التابع لمؤسسة للا أسماء. وبهذه المناسبة، تابعت غابرييلا رودريغيز دي بوكيلي عرضا حول مختلف أنشطة هذا المركز، الذي يجسد التزام المغرب لفائدة إدماج الأطفال الصم، تحت القيادة السامية للملك محمد السادس، وبرعاية من صاحبة السمو الملكي …  السيدة الأولى لجمهورية السلفادور تزور بالرباط مركز التشخيص والتأهيل السمعي التابع لمؤسسة للا أسماء     .', 'size': 2}], 'main_title': 'السيدة الأولى لجمهورية السلفادور تزور مركز التشخيص والتأهيل السمعي التابع لمؤسسة للا أسماء'}, {'community_id': '1', 'articles': [{'id': '278', 'title': 'إسرائيل تقترف مجزرة جديدة في غزة', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d8%a5%d8%b3%d8%b1%d8%a7%d8%a6%d9%8a%d9%84-%d8%aa%d9%82%d8%aa%d8%b1%d9%81-%d9%85%d8%ac%d8%b2%d8%b1%d8%a9-%d8%ac%d8%af%d9%8a%d8%af%d8%a9-%d9%81%d9%8a-%d8%ba%d8%b2%d8%a9-2-1600808.html', 'summary': 'إسرائيل تقترف مجزرة جديدة في غزة. أعلن محمود بصل، الناطق باسم الدفاع المدني في قطاع غزة، أن 30 فلسطينيا، غالبيتهم نساء وأطفال، قتلوا في غارات شنّها الطيران الحربي الإسرائيلي ليل الاثنين-الثلاثاء على مخيم النصيرات. وقتل 13 آخرون بنيران الجيش الإسرائيلي؛ بينهم سبعة قرب مركز للمساعدات في منطقة النصيرات. وقال بصل: “مجزرة جديدة في مخيم النصيرات ارتكبها الاحتلال إثر غارات جوية إسرائيلية  إسرائيل تقترف مجزرة جديدة في غزة     - هسبريس جريدة إلكترونية مغربية .', 'size': 2}, {'id': '362', 'title': 'استشهاد 30 فلسطينيا في قصف للاحتلال الإسرائيلي على مخيم النصيرات', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a7%d8%b3%d8%aa%d8%b4%d9%87%d8%a7%d8%af-30-%d9%81%d9%84%d8%b3%d8%b7%d9%8a%d9%86%d9%8a%d8%a7-%d9%81%d9%8a-%d9%82%d8%b5%d9%81-%d9%84%d9%84%d8%a7%d8%ad%d8%aa%d9%84%d8%a7%d9%84-%d8%a7%d9%84%d8%a5%d8%b3/', 'summary': 'استشهاد 30 فلسطينيا في قصف للاحتلال الإسرائيلي على مخيم النصيرات. أعلن الناطق باسم الدفاع المدني في قطاع غزة أن 30 فلسطينيا غالبيتهم نساء وأطفال استشهدوا في غارات شنها الطيران الحربي للاحتلال الإسرائيلي ليل الاثنين الثلاثاء على مخيم النصيرات. وقال محمود بصل "مجزرة جديدة في مخيم النصيرات ارتكبها الاحتلال إثر غارات جوية إسرائيلية ليلا وفجر اليوم استهدفت عددا من منازل المواطنين في منطقة المخيم الجديد في  استشهاد 30 فلسطينيا في قصف للاحتلال الإسرائيلي على مخيم النصيرات     .', 'size': 2}], 'main_title': 'إسرائيل تقترف مجزرة جديدة في غزة'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    