<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 27/06/2025 - 12h25</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '6', 'articles': [{'id': '28', 'title': 'الملك يهنئ ملوك ورؤساء وأمراء الدول الإسلامية بمناسبة حلول العام الهجري الجديد', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-634968.html', 'summary': 'الملك يهنئ ملوك ورؤساء وأمراء الدول الإسلامية بمناسبة حلول العام الهجري الجديد. هبة بريس بمناسبة حلول العام الهجري الجديد، بعث أمير المؤمنين، صاحب الجلالة الملك محمد السادس ، نصره الله وأيده، بطاقات تهنئة إلى أشقائه أصحاب الجلالة والفخامة والسمو، ملوك ورؤساء وأمراء الدول الإسلامية، ضمنها أطيب تهاني ومتمنيات جلالته، مقرونة بدعائه لله تعالى بأن يهل عليهم هذا العام المبارك بدوام الصحة والعافية والهناء.', 'size': 3}, {'id': '192', 'title': 'العام الهجري الجديد.. الملك يبعث بطاقات تهنئة إلى ملوك ورؤساء وأمراء الدول الإسلامية', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/467674.html', 'summary': 'العام الهجري الجديد.. الملك يبعث بطاقات تهنئة إلى ملوك ورؤساء وأمراء الدول الإسلامية. و.م.ع بمناسبة حلول العام الهجري الجديد، بعث أمير المؤمنين، الملك محمد السادس، بطاقات تهنئة إلى ملوك ورؤساء وأمراء الدول الإسلامية، ضمنها أطيب تهاني ومتمنيات جلالته، مقرونة بدعائه لله تعالى بأن يهل عليهم هذا العام المبارك بدوام الصحة والعافية والهناء.', 'size': 4}, {'id': '243', 'title': 'أمير المؤمنين يبعث بطاقات تهنئة إلى ملوك ورؤساء وأمراء الدول الإسلامية بمناسبة حلول العام الهجري الجديد 1447', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%85%d8%ad%d9%85%d8%af-%d8%a7%d9%84%d8%b3%d8%a7%d8%af%d8%b3-%d9%8a%d8%a8%d8%b9%d8%ab-%d8%a8%d8%b7%d8%a7%d9%82%d8%a7%d8%aa-%d8%aa%d9%87%d9%86%d8%a6%d8%a9-%d8%a5%d9%84-2/', 'summary': 'أمير المؤمنين يبعث بطاقات تهنئة إلى ملوك ورؤساء وأمراء الدول الإسلامية بمناسبة حلول العام الهجري الجديد 1447. بمناسبة حلول العام الهجري الجديد، بعث الملك محمد السادس، بطاقات تهنئة إلى أشقائه ملوك ورؤساء وأمراء الدول الإسلامية، ضمنها أطيب تهاني ومتمنيات جلالته، مقرونة بدعائه لله تعالى بأن يهلّ عليهم هذا العام المبارك بدوام الصحة والعافية والهناء. وكانت وزارة الأوقاف والشؤون الإسلامية، قد أعلنت أن فاتح شهر محرم لعام 1447 هجرية هو يوم …  أمير المؤمنين يبعث بطاقات تهنئة إلى ملوك ورؤساء وأمراء الدول الإسلامية بمناسبة حلول العام الهجري الجديد 1447     .', 'size': 3}, {'id': '391', 'title': 'بمناسبة حلول العام الهجري الجديد.. الملك يهنئ ملوك ورؤساء وأمراء الدول الإسلامية', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/223535/', 'summary': 'بمناسبة حلول العام الهجري الجديد.. الملك يهنئ ملوك ورؤساء وأمراء الدول الإسلامية. و م ع بمناسبة حلول العام الهجري الجديد، بعث أمير المؤمنين، صاحب الجلالة الملك محمد السادس، نصره الله وأيده، بطاقات تهنئة إلى أشقائه أصحاب الجلالة والفخامة والسمو، ملوك ورؤساء وأمراء الدول الإسلامية، ضمنها أطيب تهاني ومتمنيات جلالته، مقرونة بدعائه لله تعالى بأن يهل عليهم هذا العام المبارك بدوام الصحة والعافية والهناء.', 'size': 4}], 'main_title': 'العام الهجري الجديد.. الملك يبعث بطاقات تهنئة إلى ملوك ورؤساء وأمراء الدول الإسلامية'}, {'community_id': '1', 'articles': [{'id': '65', 'title': 'برلمان دول أمريكا الوسطى يصادق على\xa0 دعم الوحدة الترابية وسيادة المغرب على صحراءه', 'source': 'www.alakhbar.press.ma', 'link': 'https://www.alakhbar.press.ma/%d8%a8%d8%b1%d9%84%d9%85%d8%a7%d9%86-%d8%af%d9%88%d9%84-%d8%a3%d9%85%d8%b1%d9%8a%d9%83%d8%a7-%d8%a7%d9%84%d9%88%d8%b3%d8%b7%d9%89-%d9%8a%d8%b5%d8%a7%d8%af%d9%82-%d8%b9%d9%84%d9%89-%d8%af%d8%b9-267860.html', 'summary': 'برلمان دول أمريكا الوسطى يصادق على دعم الوحدة الترابية وسيادة المغرب على صحراءه. صادق برلمان أمريكا الوسطى (البرلاسين)، على قرار يعلن من خلاله تأكيد دعمه لمخطط الحكم الذاتي في الصحراء المغربية وللوحدة الترابية للمملكة وسيادتها الوطنية. وصادقت الجمعية العامة للبرلاسين، المنعقدة أمس الأربعاء بسان سلفادور، على قرار بالأغلبية أكدت فيه أن “برلمان أمريكا الوسطى يعبّر عن دعمه لمخطط الحكم الذاتي المقترح من طرف المملكة المغربية باعتباره الحل الجدي …  برلمان دول أمريكا الوسطى يصادق على دعم الوحدة الترابية وسيادة المغرب على صحراءه     .', 'size': 2}, {'id': '101', 'title': 'برلمان أمريكا الوسطى يجدد تأكيد دعمه لمخطط الحكم الذاتي وللوحدة الترابية للمملكة', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/politic/408256.html', 'summary': 'برلمان أمريكا الوسطى يجدد تأكيد دعمه لمخطط الحكم الذاتي وللوحدة الترابية للمملكة. جدد برلمان أمريكا الوسطى (البرلاسين)، تأكيد دعمه لمخطط الحكم الذاتي في الصحراء المغربية وللوحدة الترابية للمملكة وسيادتها الوطنية. وصادقت الجمعية العامة للبرلاسين، المنعقدة الأربعاء بسان سلفادور،', 'size': 2}, {'id': '200', 'title': 'الصحراء.. برلمان أمريكا الوسطى يجدد تأكيد دعمه لمخطط الحكم الذاتي وللوحدة الترابية للمملكة', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/467658.html', 'summary': 'الصحراء.. برلمان أمريكا الوسطى يجدد تأكيد دعمه لمخطط الحكم الذاتي وللوحدة الترابية للمملكة. جدد برلمان أمريكا الوسطى (البرلاسين)، تأكيد دعمه لمخطط الحكم الذاتي في الصحراء المغربية وللوحدة الترابية للمملكة وسيادتها الوطنية. وصادقت الجمعية العامة للبرلاسين، بسان سلفادور، على قرار بالأغلبية أكدت فيه أن “برلمان أمريكا الوسطى يعبّر عن دعمه لمخطط الحكم الذاتي المقترح من طرف المملكة المغربية باعتباره الحل الجدي والواقعي وذا المصداقية للنزاع حول الصحراء، ويؤكد دعمه …', 'size': 3}], 'main_title': 'الصحراء.. برلمان أمريكا الوسطى يجدد تأكيد دعمه لمخطط الحكم الذاتي وللوحدة الترابية للمملكة'}, {'community_id': '5', 'articles': [{'id': '86', 'title': 'هلال يدعو إلى تحمل المسؤولية الجماعية بشكل عاجل لحماية الشعوب من الفظائع', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/social/408241.html', 'summary': 'هلال يدعو إلى تحمل المسؤولية الجماعية بشكل عاجل لحماية الشعوب من الفظائع. أبرز الممثل الدائم للمغرب لدى منظمة الأمم المتحدة، السفير عمر هلال، بصفته رئيسا مشاركا لمجموعة الأصدقاء المعنية بمسؤولية الحماية، أمس الأربعاء بنيويورك، الحاجة العاجلة إلى', 'size': 2}, {'id': '142', 'title': 'هلال يدعو بالأمم المتحدة إلى إصلاح آليات الحماية لمنع الإبادة وجرائم الحرب', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/316680/', 'summary': 'هلال يدعو بالأمم المتحدة إلى إصلاح آليات الحماية لمنع الإبادة وجرائم الحرب. أبرز الممثل الدائم للمغرب لدى منظمة الأمم المتحدة، السفير عمر هلال، بصفته رئيسا مشاركا لمجموعة الأصدقاء المعنية بمسؤولية الحماية، أمس الأربعاء بنيويورك، الحاجة العاجلة إلى تحمل المسؤولية الجماعية من أجل حماية الشعوب من الفظائع. وفي كلمة باسم هذه المجموعة، التي تضم 54 دولة عضوا والاتحاد الأوروبي، خلال المناقشة السنوية للجمعية العامة الأممية بشأن مسؤولية الحماية،', 'size': 2}], 'main_title': 'هلال يدعو إلى تحمل المسؤولية الجماعية بشكل عاجل لحماية الشعوب من الفظائع'}, {'community_id': '0', 'articles': [{'id': '129', 'title': 'الدورة الـ8 للجنة الوطنية للاستثمارات.. المصادقة على 47 مشروعا بقيمة إجمالية تناهز 51 مليار درهم', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a7%d9%84%d8%af%d9%88%d8%b1%d8%a9-%d8%a7%d9%84%d9%808-%d9%84%d9%84%d8%ac%d9%86%d8%a9-%d8%a7%d9%84%d9%88%d8%b7%d9%86%d9%8a%d8%a9-%d9%84%d9%84%d8%a7%d8%b3%d8%aa%d8%ab%d9%85%d8%a7%d8%b1%d8%a7%d8%aa/', 'summary': 'الدورة الـ8 للجنة الوطنية للاستثمارات.. المصادقة على 47 مشروعا بقيمة إجمالية تناهز 51 مليار درهم. صادقت اللجنة الوطنية للاستثمارات، اليوم الخميس (26 يونيو) بالرباط، على 47 مشروعا بقيمة استثمارية إجمالية تناهز 51 مليار درهم، ستمكن من إحداث قرابة 17 ألف منصب شغل. وذكر بلاغ لرئاسة الحكومة أن رئيس الحكومة عزيز أخنوش، ترأس الدورة الثامنة للجنة الوطنية للاستثمارات، المحدثة بموجب ميثاق الاستثمار الجديد، الذي دخل حيز التطبيق منذ شهر مارس 2023،', 'size': 2}, {'id': '393', 'title': 'اللجنة الوطنية للاستثمارات تصادق على 47 مشروعا', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/223528/', 'summary': 'اللجنة الوطنية للاستثمارات تصادق على 47 مشروعا. كواليس اليوم صادقت اللجنة الوطنية للاستثمارات، أمس الخميس بالرباط، على 47 مشروعا بقيمة استثمارية إجمالية تناهز 51 مليار درهم، ستمكن من إحداث قرابة 17 ألف منصب شغل. وذكر بلاغ لرئاسة الحكومة أن رئيس الحكومة عزيز أخنوش، ترأس الدورة الثامنة للجنة الوطنية للاستثمارات، المحدثة بموجب ميثاق الاستثمار الجديد، الذي دخل حيز التطبيق منذ شهر مارس', 'size': 2}], 'main_title': 'الدورة الـ8 للجنة الوطنية للاستثمارات.. المصادقة على 47 مشروعا بقيمة إجمالية تناهز 51 مليار درهم'}, {'community_id': '3', 'articles': [{'id': '143', 'title': 'العين يعمق جراح الوداد وينهي مشاركته الباهتة في الموندياليتو', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/316696/', 'summary': 'العين يعمق جراح الوداد وينهي مشاركته الباهتة في الموندياليتو. ودّع نادي الوداد الرياضي منافسات كأس العالم للأندية “أمريكا 2025” بخسارة جديدة تلقاها أمام فريق العين الإماراتي بنتيجة هدفين مقابل هدف، في مباراة احتضنها ملعب “أودي فيلد” بواشنطن ضمن الجولة الثالثة من المجموعة السابعة، التي ضمّت إلى جانب الفريقين كلًا من مانشستر سيتي الإنجليزي ويوفنتوس الإيطالي. ودخل الفريق الأحمر المواجهة برغبة في تحقيق أول فوز', 'size': 2}, {'id': '164', 'title': 'مونديال الأندية.. الوداد ينهزم أمام العين الإماراتي ويغادر بدون نقاط', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1081096.html', 'summary': 'مونديال الأندية.. الوداد ينهزم أمام العين الإماراتي ويغادر بدون نقاط. انهزم نادي الوداد الرياضي أمام فريق العين الإماراتي بهدفين مقابل واحد، خلال اللقاء الذي جرى على أرضية ملعب أودي فيلد بالعاصمة الأمريكية واشنطن، لحساب ثالث مباريات دور مجموعات كأس العالم للأندية “الولايات المتحدة 2025”. مع بداية المواجهة، انطلق ضغط الوداد الرياضي الذي ظهر باندفاع هجومي واضح، مما مكنه من افتتاح التسجيل عند الدقيقة الرابعة، وذلك ظهرت المقالة مونديال الأندية.. الوداد ينهزم أمام العين الإماراتي ويغادر بدون نقاط  .', 'size': 2}, {'id': '221', 'title': 'الوداد يودع مونديال الأندية بهزيمة ثالثة في البطولة أمام العين الإماراتي', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/223525/', 'summary': 'الوداد يودع مونديال الأندية بهزيمة ثالثة في البطولة أمام العين الإماراتي. ودع فريق الوداد الرياضي لكرة القدم بطولة كأس العالم للأندية 2025 المقامة حاليا بالولايات المتحدة الأمريكية، بهزيمة ثالثة أمام نادي العين الإماراتي بنتيجة 2-1، في مباراة دارت أطوارها، مساء اليوم الخميس 26 يونيو 2025، على أرضية ملعب “أودي فيلد”، برم الجولة الثالثة والأخيرة من دور المجموعات. وسجل الوداد هدفه الوحيد في بداية المباراة عند الدقيقة', 'size': 3}], 'main_title': 'الوداد يودع مونديال الأندية بهزيمة ثالثة في البطولة أمام العين الإماراتي'}, {'community_id': '4', 'articles': [{'id': '146', 'title': 'الحسيمة.. الأمن يجهض محاولة للهجرة السرية ويوقف 3 متورطين', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/316671/', 'summary': 'الحسيمة.. الأمن يجهض محاولة للهجرة السرية ويوقف 3 متورطين. تمكنت عناصر الشرطة بالأمن الجهوي بمدينة الحسيمة بتنسيق مع مصالح المديرية العامة لمراقبة التراب الوطني، مساء أمس الأربعاء 25 يونيو الجاري، من توقيف ثلاثة أشخاص تتراوح أعمارهم ما بين 23 و42 سنة، اثنان منهم من ذوي السوابق القضائية، وذلك للاشتباه في ارتباطهم بشبكة إجرامية تنشط في تنظيم الهجرة غير المشروعة والاتجار بالبشر. وقد جرى توقيف', 'size': 2}, {'id': '222', 'title': 'الحسيمة.. توقيف ثلاثة أشخاص ضمن شبكة للهجرة السرية', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/223522/', 'summary': 'الحسيمة.. توقيف ثلاثة أشخاص ضمن شبكة للهجرة السرية. كواليس اليوم أوقفت عناصر الشرطة بالأمن الجهوي بمدينة الحسيمة بتنسيق مع مصالح المديرية العامة لمراقبة التراب الوطني، مساء أمس الأربعاء ثلاثة أشخاص تتراوح أعمارهم ما بين 23 و42 سنة، اثنان منهم من ذوي السوابق القضائية، وذلك للاشتباه في ارتباطهم بشبكة إجرامية تنشط في تنظيم الهجرة غير المشروعة والاتجار بالبشر. وقد جرى توقيف المشتبه فيه', 'size': 2}], 'main_title': 'الحسيمة.. الأمن يجهض محاولة للهجرة السرية ويوقف 3 متورطين'}, {'community_id': '8', 'articles': [{'id': '152', 'title': '“القيصر” يطرب الرباط والتنظيم يعكر الأجواء.. ليلة غير مكتملة في “موازين”', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1081115.html', 'summary': '“القيصر” يطرب الرباط والتنظيم يعكر الأجواء.. ليلة غير مكتملة في “موازين”. أحيا المغني العراقي كاظم الساهر، مساء الخميس، حفلا فنيا بمسرح محمد الخامس في الرباط، ضمن فعاليات الدورة العشرين لمهرجان “موازين.. إيقاعات العالم”، وسط حضور جماهيري كثيف أضفى على الأمسية أجواء استثنائية، رغم ما شابها من اختلالات تنظيمية واضحة أثارت الكثير من الانتقادات. وامتلأت القاعة عن آخرها قبل حوالي ساعة من موعد الحفل، ما اضطر العشرات ظهرت المقالة “القيصر” يطرب الرباط والتنظيم يعكر الأجواء.. ليلة غير مكتملة في “موازين”  .', 'size': 2}, {'id': '188', 'title': 'من يتعمد الإساءة لصورة المغرب..مهرجان موازين يتسبب في فضيحة دولية بمسرح محمد الخامس بالرباط', 'source': 'rue20.com', 'link': 'https://rue20.com/916103.html', 'summary': 'من يتعمد الإساءة لصورة المغرب..مهرجان موازين يتسبب في فضيحة دولية بمسرح محمد الخامس بالرباط. . الرباط تحول مسرح محمد الخامس بمدينة الأنوار الرباط، تحول، هذه الليلة، إلى حمام حقيقي بسبب سوء التنظيم وغياب التكييف داخل المسرح الأشهر والأقدم بالمملكة خلال الحفل الذي أقامه الفنان العراقي كاظم الساهر ضمن حفلات مهرجان “موازين”. واقعة غياب التكييف وسوء التنظيم تسببت في فضيحة كبرى تسيء لصورة المغرب الذي يشهد تطوراً ملحوظاً في الخبر من يتعمد الإساءة لصورة المغرب..مهرجان موازين يتسبب في فضيحة دولية بمسرح محمد الخامس بالرباط  .', 'size': 2}], 'main_title': '“القيصر” يطرب الرباط والتنظيم يعكر الأجواء.. ليلة غير مكتملة في “موازين”'}, {'community_id': '7', 'articles': [{'id': '193', 'title': 'وزارة الأوقاف: فاتح شهر محرم غدا الجمعة', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/467672.html', 'summary': 'وزارة الأوقاف: فاتح شهر محرم غدا الجمعة. أعلنت وزارة الأوقاف والشؤون الإسلامية أن فاتح شهر محرم لعام 1447 هجرية هو يوم غد الجمعة 27 يونيو 2025 ميلادية. وذكرت الوزارة، في بلاغ لها، أنها راقبت هلال شهر محرم لعام 1447 هـ، مساء يوم الخميس 29 ذي الحجة 1446 هـ موافق 26 يونيو 2025م، فثبتت لديها رؤية الهلال ثبوتا شرعيا. وفي ما يلي نص …', 'size': 2}, {'id': '244', 'title': 'وزارة الأوقاف تعلن غدا الجمعة أول أيام العام الهجري الجديد 1447', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d9%88%d8%b2%d8%a7%d8%b1%d8%a9-%d8%a7%d9%84%d8%a3%d9%88%d9%82%d8%a7%d9%81-%d8%aa%d8%b9%d9%84%d9%86-%d8%ba%d8%af%d8%a7-%d8%a7%d9%84%d8%ac%d9%85%d8%b9%d8%a9-%d8%a3%d9%88%d9%84-%d8%a3%d9%8a%d8%a7%d9%85/', 'summary': 'وزارة الأوقاف تعلن غدا الجمعة أول أيام العام الهجري الجديد 1447. أعلنت وزارة الأوقاف والشؤون الإسلامية، يومه الخميس، أن فاتح شهر محرم لعام 1447 هجرية، هو يوم غد الجمعة 27 يونيو 2025 ميلادية. وذكرت الوزارة، في بلاغ لها، أنها راقبت هلال شهر محرم لعام 1447 هـ، بعد مغرب يوم الخميس 29 ذي الحجة 1446 هـ موافق 26 يونيو، فثبتت لديها رؤية الهلال ثبوتا شرعيا. …  وزارة الأوقاف تعلن غدا الجمعة أول أيام العام الهجري الجديد 1447     .', 'size': 2}], 'main_title': 'وزارة الأوقاف: فاتح شهر محرم غدا الجمعة'}, {'community_id': '13', 'articles': [{'id': '195', 'title': 'سيناتور أمريكي يقدم مشروع قانون إلى الكونغرس لتصنيف “البوليساريو” منظمة إرهابية', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/467668.html', 'summary': 'سيناتور أمريكي يقدم مشروع قانون إلى الكونغرس لتصنيف “البوليساريو” منظمة إرهابية. أعلن السيناتور الجمهوري الأمريكي، جو ويلسون، اليوم الخميس، عن تقديم مشروع قانون إلى الكونغرس الأمريكي يقضي بتصنيف جبهة “البوليساريو” الانفصالية منظمة إرهابية. وكتب ويلسون في تغريدة على حسابه بمنصة “إكس”: “البوليساريو ميليشيا ماركسية مدعومة من إيران، وحزب الله، وروسيا. توفر لطهران موطئ قدم استراتيجيا في إفريقيا، وتزعزع استقرار المملكة المغربية، الحليف التاريخي للولايات المتحدة منذ …', 'size': 2}, {'id': '242', 'title': 'جو ويلسون يُقدّم مشروع قانون إلى الكونغرس الأمريكي لتصنيف البوليساريو كمنظمة إرهابية', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%ac%d9%88-%d9%88%d9%8a%d9%84%d8%b3%d9%88%d9%86-%d9%8a%d9%8f%d9%82%d8%af%d9%91%d9%85-%d9%85%d8%b4%d8%b1%d9%88%d8%b9-%d9%82%d8%a7%d9%86%d9%88%d9%86-%d8%a5%d9%84%d9%89-%d8%a7%d9%84%d9%83%d9%88%d9%86/', 'summary': 'جو ويلسون يُقدّم مشروع قانون إلى الكونغرس الأمريكي لتصنيف البوليساريو كمنظمة إرهابية. أكدّ عضو مجلس النواب الأمريكي، جو ويلسون، أنه قدم إلى الكونغرس الأمريكي، مشروع قانون، لتصنيف جبهة البوليساريو الانفصالية التي تنشط بجنوب غرب الجزائر، كمنظمة إرهابية. وأوضح النائب عن الحزب الجمهوري، عبر حسابه موقع “إكس”، أن البوليساريو ميليشيا ماركسية مدعومة من إيران وحزب الله وروسيا، وتُوفر لإيران موقعًا استراتيجيًا في أفريقيا، وتُزعزع استقرار المملكة المغربية، …  جو ويلسون يُقدّم مشروع قانون إلى الكونغرس الأمريكي لتصنيف البوليساريو كمنظمة إرهابية     .', 'size': 2}], 'main_title': 'سيناتور أمريكي يقدم مشروع قانون إلى الكونغرس لتصنيف “البوليساريو” منظمة إرهابية'}, {'community_id': '2', 'articles': [{'id': '212', 'title': 'اللجنة الوطنية للاستثمارات.. المصادقة على 47 مشروعا بقيمة إجمالية تناهز 51 مليار درهم', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d8%a7%d9%84%d9%84%d8%ac%d9%86%d8%a9-%d8%a7%d9%84%d9%88%d8%b7%d9%86%d9%8a%d8%a9-%d9%84%d9%84%d8%a7%d8%b3%d8%aa%d8%ab%d9%85%d8%a7%d8%b1%d8%a7%d8%aa-%d8%a7%d9%84%d9%85%d8%b5%d8%a7%d8%af%d9%82%d8%a9/', 'summary': 'اللجنة الوطنية للاستثمارات.. المصادقة على 47 مشروعا بقيمة إجمالية تناهز 51 مليار درهم.  – و م ع صادقت اللجنة الوطنية للاستثمارات، اليوم الخميس بالرباط، على 47 مشروعا بقيمة استثمارية إجمالية تناهز 51 مليار درهم، ستمكن من إحداث قرابة 17 ألف منصب...  اللجنة الوطنية للاستثمارات.. المصادقة على 47 مشروعا بقيمة إجمالية تناهز 51 مليار درهم     .', 'size': 2}, {'id': '358', 'title': 'الدعم الأساسي للاستثمار.. اللجنة الوطنية تصادق على 47 مشروعا', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a7%d9%84%d8%af%d8%b9%d9%85-%d8%a7%d9%84%d8%a3%d8%b3%d8%a7%d8%b3%d9%8a-%d9%84%d9%84%d8%a7%d8%b3%d8%aa%d8%ab%d9%85%d8%a7%d8%b1-%d8%a7%d9%84%d9%84%d8%ac%d9%86%d8%a9-%d8%a7%d9%84%d9%88%d8%b7%d9%86/', 'summary': 'الدعم الأساسي للاستثمار.. اللجنة الوطنية تصادق على 47 مشروعا. صادقت اللجنة الوطنية للاستثمارات، في دورتها الثامنة، على 36 مشروع اتفاقية و11 ملحق اتفاقية، يندرج في إطار نظام الدعم الأساسي للاستثمار، الذي جاء به ميثاق الاستثمار الجديد. وتناهز القيمة الاستثمارية الإجمالية للمشاريع الـ 47 المصادق عليها حوالي 51 مليار درهم، حيث ستمكن هذه المشاريع من إحداث قرابة 17.000 منصب شغل، من بينها 9.000 منصب شغل مباشر،  الدعم الأساسي للاستثمار.. اللجنة الوطنية تصادق على 47 مشروعا     .', 'size': 2}], 'main_title': 'اللجنة الوطنية للاستثمارات.. المصادقة على 47 مشروعا بقيمة إجمالية تناهز 51 مليار درهم'}, {'community_id': '9', 'articles': [{'id': '293', 'title': 'كأس العالم للأندية.. الهلال السعودي يبلغ ثمن النهائي عقب فوزه على باتشوكا المكسيكي', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/202661', 'summary': 'كأس العالم للأندية.. الهلال السعودي يبلغ ثمن النهائي عقب فوزه على باتشوكا المكسيكي.  بلغ نادي الهلال السعودي دور ثمن نهائي بطولة كأس العالم للأندية لكرة القدم، عقب فوزه، أمس الجمعة، على باتشوكا المكسيكي (2-0) على ملعب “جيوديس بارك” في ناشفيل، ضمن منافسات المجموعة الثامنة. وسجل أهداف الهلال كل من سالم الدوسري في الدقيقة 23، إثر تمريرة دقيقة من ناصر الدوسري، وأضاف ليوناردو الهدف الثاني للفريق في الدقيقة', 'size': 2}, {'id': '388', 'title': 'كأس العالم للأندية.. الهلال السعودي أول فريق عربي يبلغ دور ثمن النهائي', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/223545/', 'summary': 'كأس العالم للأندية.. الهلال السعودي أول فريق عربي يبلغ دور ثمن النهائي. كواليس اليوم بلغ نادي الهلال السعودي دور ثمن نهائي بطولة كأس العالم للأندية لكرة القدم، عقب فوزه، أمس الجمعة، على باتشوكا المكسيكي (2-0) على ملعب “جيوديس بارك” في ناشفيل، ضمن منافسات المجموعة الثامنة. وسجل أهداف الهلال كل من سالم الدوسري في الدقيقة 23، إثر تمريرة دقيقة من ناصر الدوسري، وأضاف ليوناردو الهدف الثاني للفريق', 'size': 2}], 'main_title': 'كأس العالم للأندية.. الهلال السعودي يبلغ ثمن النهائي عقب فوزه على باتشوكا المكسيكي'}, {'community_id': '12', 'articles': [{'id': '294', 'title': 'الوكالة الوطنية للمياه والغابات تكشف عن النشرة الانذارية الجديدة الوطنية بشأن مخاطر اندلاع الحرائق الشديدة', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/202658', 'summary': 'الوكالة الوطنية للمياه والغابات تكشف عن النشرة الانذارية الجديدة الوطنية بشأن مخاطر اندلاع الحرائق الشديدة.  من أجل استباق ظاهرة حرائق الغابات على الصعيد الوطني، تصدر الوكالة الوطنية للمياه والغابات بناء ًا على معطيات علمية، خرائط تنبؤ تحدد بدقة المناطق الحساسة والمعرضة لخطر اندلاع الحرائق الغابوية، ابتداء ًا من يوم 27/06/2025 إلى يوم 04/07/2025 وبعد تحليل البيانات المتعلقة خصوصا ب: • نوعية الغطاء الغابوي وقابليته للاشتعال والاحتراق؛ • التوقعات المناخية والظروف الطبوغرافية', 'size': 5}, {'id': '340', 'title': 'وكالة المياه والغابات تصدر خرائط المناطق المهددة بخطر اندلاع الحرائق الغابوية', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/316708/', 'summary': 'وكالة المياه والغابات تصدر خرائط المناطق المهددة بخطر اندلاع الحرائق الغابوية. أعلنت الوكالة الوطنية للمياه والغابات أنها ستشرع، ابتداء من الجمعة وإلى غاية 04 يوليوز المقبل، بناء على معطيات علمية، في نشر خرائط تنبؤ تحدد بدقة المناطق الحساسة والمعرضة لخطر اندلاع الحرائق الغابوية، وذلك من أجل استباق ظاهرة حرائق الغابات على الصعيد الوطني. وأوضحت الوكالة، في بلاغ لها، أنه بعد تحليل البانات المتعلقة، خصوصا، بنوعية الغطاء الغابوي', 'size': 5}, {'id': '348', 'title': 'إنذار أحمر من “المياه والغابات” يحذر من خطر إندلاع حرائق وشيك بهذه الأقاليم', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1081149.html', 'summary': 'إنذار أحمر من “المياه والغابات” يحذر من خطر إندلاع حرائق وشيك بهذه الأقاليم. أعلنت الوكالة الوطنية للمياه والغابات أنها ستشرع، ابتداء من اليوم الجمعة وإلى غاية 04 يوليوز المقبل، بناءا على معطيات علمية، في نشر خرائط تنبؤ تحدد بدقة المناطق الحساسة والمعرضة لخطر اندلاع الحرائق الغابوية، وذلك من أجل استباق ظاهرة حرائق الغابات على الصعيد الوطني. وأوضحت الوكالة، في بلاغ لها، أنه بعد تحليل البانات المتعلقة، خصوصا، بنوعية ظهرت المقالة إنذار أحمر من “المياه والغابات” يحذر من خطر إندلاع حرائق وشيك بهذه الأقاليم  .', 'size': 5}, {'id': '355', 'title': 'المياه والغابات تصدر خرائط تنبؤ للمناطق المعرضة لخطر اندلاع الحرائق الغابوية', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a7%d9%84%d9%85%d9%8a%d8%a7%d9%87-%d9%88%d8%a7%d9%84%d8%ba%d8%a7%d8%a8%d8%a7%d8%aa-%d8%aa%d8%b5%d8%af%d8%b1-%d8%ae%d8%b1%d8%a7%d8%a6%d8%b7-%d8%aa%d9%86%d8%a8%d8%a4-%d9%84%d9%84%d9%85%d9%86%d8%a7/', 'summary': 'المياه والغابات تصدر خرائط تنبؤ للمناطق المعرضة لخطر اندلاع الحرائق الغابوية. أعلنت الوكالة الوطنية للمياه والغابات أنها ستشرع، ابتداء من اليوم الجمعة وإلى غاية 04 يوليوز المقبل، بناء على معطيات علمية، في نشر خرائط تنبؤ تحدد بدقة المناطق الحساسة والمعرضة لخطر اندلاع الحرائق الغابوية، من أجل استباق ظاهرة حرائق الغابات على الصعيد الوطني. وأوضحت الوكالة، في بلاغ لها، أنه بعد تحليل البيانات المتعلقة، خصوصا، بنوعية الغطاء  المياه والغابات تصدر خرائط تنبؤ للمناطق المعرضة لخطر اندلاع الحرائق الغابوية     .', 'size': 5}, {'id': '367', 'title': 'حسب خرائط تنبؤ.. هذه هي المناطق المعرضة لخطر اندلاع الحرائق الغابوية', 'source': 'machahid24.com', 'link': 'https://machahid24.com/international/467740.html', 'summary': 'حسب خرائط تنبؤ.. هذه هي المناطق المعرضة لخطر اندلاع الحرائق الغابوية. أعلنت الوكالة الوطنية للمياه والغابات أنها ستشرع، ابتداء من اليوم الجمعة وإلى غاية 04 يوليوز المقبل، بناءا على معطيات علمية، في نشر خرائط تنبؤ تحدد بدقة المناطق الحساسة والمعرضة لخطر اندلاع الحرائق الغابوية', 'size': 5}], 'main_title': 'الوكالة الوطنية للمياه والغابات تكشف عن النشرة الانذارية الجديدة الوطنية بشأن مخاطر اندلاع الحرائق الشديدة'}, {'community_id': '10', 'articles': [{'id': '299', 'title': 'منظمو "موازين" يتسببون في فضيحة كبرى.. حفل "القيصر" يتحول إلى "حمام شعبي" أهين فيه الجمهور وصورة المغرب', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/culture/408288.html', 'summary': 'منظمو "موازين" يتسببون في فضيحة كبرى.. حفل "القيصر" يتحول إلى "حمام شعبي" أهين فيه الجمهور وصورة المغرب. تحوّل الحفل الفني الذي أحياه النجم العراقي "كاظم الساهر"، مساء أمس الخميس، بمسرح محمد الخامس بالرباط، ضمن فعاليات مهرجان موازين، إلى كارثة تنظيمية وفضيحة حقيقية', 'size': 2}, {'id': '341', 'title': 'مسرح محمد الخامس يتحول إلى “سوق” في حفل القيصر…فوضى وتنظيم كارثي', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/316706/', 'summary': 'مسرح محمد الخامس يتحول إلى “سوق” في حفل القيصر…فوضى وتنظيم كارثي. شهد مسرح محمد الخامس مساء أمس الخميس، حالة من الفوضى والتنظيم العشوائي، خلال الحفل الذي أحياه الفنان كاظم الساهر، على هامش النسخة ال20 من مهرجان موازين، الجمهور، الذي دفع مبلغ 1500 درهم لحضور الحفل، تفاجأ بعدم توفر مقاعد كافية للجلوس، ما أدى إلى حالة من الارتباك داخل القاعة التي تحولت إلى ما يشبه “السوق الشعبي”،', 'size': 2}], 'main_title': 'منظمو "موازين" يتسببون في فضيحة كبرى.. حفل "القيصر" يتحول إلى "حمام شعبي" أهين فيه الجمهور وصورة المغرب'}, {'community_id': '11', 'articles': [{'id': '342', 'title': 'توقعات طقس اليوم الجمعة', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/316704/', 'summary': 'توقعات طقس اليوم الجمعة. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الجمعة، استمرار الطقس الحار بكل من السواحل والسهول الشمالية والوسطى، ومناطق الأطلس الصغير، وأقصى الجنوب الشرقي للبلاد، وداخل الأقاليم الجنوبية، وكذا المنطقة الشرقية. ويرتقب نزول قطرات مطرية أو زخات رعدية من المحتمل أن تكون مصحوبة ببرد محلي فوق كل من مناطق الأطلسين الكبير والمتوسط والسهول الوسطى، وهضاب الفوسفاط', 'size': 2}, {'id': '362', 'title': 'حالة الطقس: استمرار الحرارة مع زخات رعدية', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%ad%d8%a7%d9%84%d8%a9-%d8%a7%d9%84%d8%b7%d9%82%d8%b3-%d8%a7%d8%b3%d8%aa%d9%85%d8%b1%d8%a7%d8%b1-%d8%a7%d9%84%d8%ad%d8%b1%d8%a7%d8%b1%d8%a9-%d9%85%d8%b9-%d8%b2%d8%ae%d8%a7%d8%aa-%d8%b1%d8%b9%d8%af/', 'summary': 'حالة الطقس: استمرار الحرارة مع زخات رعدية. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليوم الجمعة، استمرار الطقس الحار بكل من السواحل والسهول الشمالية والوسطى، ومناطق الأطلس الصغير، وأقصى الجنوب الشرقي للبلاد، وداخل الأقاليم الجنوبية، وكذا المنطقة الشرقية. ويرتقب نزول قطرات مطرية أو زخات رعدية من المحتمل أن تكون مصحوبة ببرد محلي فوق كل من مناطق الأطلسين الكبير والمتوسط والسهول الوسطى، وهضاب الفوسفاط  حالة الطقس: استمرار الحرارة مع زخات رعدية     .', 'size': 2}], 'main_title': 'توقعات طقس اليوم الجمعة'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    