<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 20/06/2025 - 06h22</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '14', 'title': 'مجلس الحكومة يطلع على اتفاق بين المغرب وكوت ديفوار بشأن الخدمات الجوية', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-633138.html', 'summary': 'مجلس الحكومة يطلع على اتفاق بين المغرب وكوت ديفوار بشأن الخدمات الجوية. هبة بريس اطلع مجلس الحكومة ، اليوم الخميس، على اتفاق بشأن الخدمات الجوية بين حكومة المملكة المغربية وحكومة جمهورية الكوت ديفوار. وذكر بلاغ للوزارة المنتدبة المكلفة بالعلاقات مع البرلمان، الناطق الرسمي باسم الحكومة، أن الاتفاق، الموقع بالعيون في 17 يناير 2025، ومشروع القانون رقم 12.25 يوافق بموجبه على الاتفاق المذكور، قدمهما وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج ناصر بوريطة.', 'size': 2}, {'id': '227', 'title': 'بوريطة يطلع الحكومة على اتفاق للخدمات الجوية بين المغرب والكوت ديفوار', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/223173/', 'summary': 'بوريطة يطلع الحكومة على اتفاق للخدمات الجوية بين المغرب والكوت ديفوار. كمال عسو واختتم مجلس الحكومة أشغاله بالاطلاع على اتفاق بشأن الخدمات الجوية بين حكومة المملكة المغربية وحكومة جمهورية الكوت ديفوار، الموقع بالعيون في 17 يناير 2025، ومشروع القانون رقم 12.25 يوافق بموجبه على الاتفاق المذكور، قدمهما ناصر بوريطة، وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج.', 'size': 2}], 'main_title': 'مجلس الحكومة يطلع على اتفاق بين المغرب وكوت ديفوار بشأن الخدمات الجوية'}, {'community_id': '1', 'articles': [{'id': '25', 'title': 'الحكومة تصادق على إحداث وتنظيم المعهد الوطني للموسيقى والفن الكوريغرافي', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-633099.html', 'summary': 'الحكومة تصادق على إحداث وتنظيم المعهد الوطني للموسيقى والفن الكوريغرافي. هبة بريس تداول مجلس الحكومة وصادق على مشروع المرسوم رقم 2.25.438 بإحداث وتنظيم المعهد الوطني العالي للموسيقى والفن الكوريغرافي، قدمه محمد المهدي بنسعيد، وزير الشباب والثقافة والتواصل. يهدف مشروع هذا المرسوم إلى إحداث المعهد الوطني العالي للموسيقى والفن الكوريغرافي كمؤسسة للتعليم العالي تابعة للسلطة الحكومية المكلفة بالثقافة. وتناط بالمعهد المذكور، مهام التكوين الأساسي في ميادين الموسيقى المغربية بمختلف أنماطها وكذا الموسيقى العربية والعالمية وتعزيز الجانب العملي والنظري في كل هذه الأنماط، كما ينظم المعهد أطوار استكمال الخبرة وإعادة التدريب، والتي تهدف إلى تجديد المعلومات المرتبطة بالإبداع الموسيقي والكوريغرافي.', 'size': 3}, {'id': '181', 'title': 'يهدف إلى التكوين في الموسيقى العالمية.. الحكومة تحدث معهدا للموسيقى والفن الكوريغرافي', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d9%8a%d9%87%d8%af%d9%81-%d8%a5%d9%84%d9%89-%d8%a7%d9%84%d8%aa%d9%83%d9%88%d9%8a%d9%86-%d9%81%d9%8a-%d8%a7%d9%84%d9%85%d9%88%d8%b3%d9%8a%d9%82%d9%89-%d8%a7%d9%84%d8%b9%d8%a7%d9%84%d9%85%d9%8a%d8%a9/', 'summary': 'يهدف إلى التكوين في الموسيقى العالمية.. الحكومة تحدث معهدا للموسيقى والفن الكوريغرافي. صادق مجلس الحكومة، الخميس، على إحداث وتنظيم المعهد الوطني العالي للموسيقى والفن الكوريغرافي، وفق مشروع المرسوم رقم 2.25.438 قدمه وزير الشباب والثقافة والتواصل محمد المهدي بنسعيد. وذكر بلاغ للوزارة المنتدبة المكلفة بالعلاقات مع البرلمان، الناطق الرسمي باسم الحكومة، أن مشروع هذا المرسوم يهدف إلى إحداث المعهد الوطني العالي للموسيقى والفن الكوريغرافي كمؤسسة للتعليم العالي تابعة  يهدف إلى التكوين في الموسيقى العالمية.. الحكومة تحدث معهدا للموسيقى والفن الكوريغرافي     .', 'size': 3}, {'id': '228', 'title': 'بنسعيد يحدث المعهد الوطني العالي للموسيقى والفن الكوريغرافي', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/223170/', 'summary': 'بنسعيد يحدث المعهد الوطني العالي للموسيقى والفن الكوريغرافي. كمال عسو صادقت الحكومة في مجلسها المنعقد اليوم الخميس، على مشروع المرسوم رقم 2.25.438 بإحداث وتنظيم المعهد الوطني العالي للموسيقى والفن الكوريغرافي، قدمه محمد المهدي بنسعيد، وزير الشباب والثقافة والتواصل. ويهدف مشروع هذا المرسوم إلى إحداث المعهد الوطني العالي للموسيقى والفن الكوريغرافي كمؤسسة للتعليم العالي تابعة للسلطة الحكومية المكلفة بالثقافة. وتناط بالمعهد المذكور، مهام', 'size': 3}], 'main_title': 'الحكومة تصادق على إحداث وتنظيم المعهد الوطني للموسيقى والفن الكوريغرافي'}, {'community_id': '2', 'articles': [{'id': '66', 'title': 'الجريمة المنظمة العابرة للحدود.. النيابة العامة تعتبر التعاون القضائي الدولي مدخلا أساسيا للردع', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/202247', 'summary': 'الجريمة المنظمة العابرة للحدود.. النيابة العامة تعتبر التعاون القضائي الدولي مدخلا أساسيا للردع.  أكد الوكيل العام للملك لدى محكمة النقض، رئيس النيابة العامة، هشام بلاوي، اليوم الخميس بالرباط، أن رئاسة النيابة العامة تولي اهتماما بالغا لآليات التعاون القضائي الدولي باعتبارها أحد المداخل الأساسية لمكافحة الجريمة المنظمة العابرة للحدود. وأبرز السيد هشام بلاوي، في كلمة خلال افتتاح ندوة دولية حول مكافحة الجريمة المنظمة العابرة للحدود الوطنية، ينظمها المجلس', 'size': 3}, {'id': '135', 'title': 'البلاوي يدعو إلى تعزيز التعاون الدولي لمكافحة الجريمة المنظمة العابرة للحدود', 'source': 'assabah.ma', 'link': 'https://assabah.ma/854477.html', 'summary': 'البلاوي يدعو إلى تعزيز التعاون الدولي لمكافحة الجريمة المنظمة العابرة للحدود. أكد هشام البلاوي، الوكيل العام للملك لدى محكمة النقض، رئيس النيابة العامة، على أهمية تعزيز التعاون القضائي الدولي وتطوير الأطر القانونية والآليات التقنية، لمواجهة التهديدات المتزايدة للجريمة المنظمة العابرة للحدود، وذلك خلال افتتاح أشغال الندوة الدولية المنظمة يومي 19 و20 يونيو 2025 بالرباط حول موضوع: “مكافحة الجريمةأكمل القراءة » المقالة البلاوي يدعو إلى تعزيز التعاون الدولي لمكافحة الجريمة المنظمة العابرة للحدود  .', 'size': 2}, {'id': '192', 'title': 'بلاوي : التعاون القضائي الدولي مدخل أساسي لردع الجريمة المنظمة العابرة للحدود', 'source': 'rue20.com', 'link': 'https://rue20.com/914303.html', 'summary': 'بلاوي : التعاون القضائي الدولي مدخل أساسي لردع الجريمة المنظمة العابرة للحدود. . الرباط أكد الوكيل العام للملك لدى محكمة النقض، رئيس النيابة العامة، هشام بلاوي، اليوم الخميس بالرباط، أن رئاسة النيابة العامة تولي اهتماما بالغا لآليات التعاون القضائي الدولي باعتبارها أحد المداخل الأساسية لمكافحة الجريمة المنظمة العابرة للحدود. وأبرز السيد هشام بلاوي، في كلمة خلال افتتاح ندوة دولية حول مكافحة الجريمة المنظمة العابرة للحدود الوطنية، الخبر بلاوي : التعاون القضائي الدولي مدخل أساسي لردع الجريمة المنظمة العابرة للحدود  .', 'size': 2}], 'main_title': 'الجريمة المنظمة العابرة للحدود.. النيابة العامة تعتبر التعاون القضائي الدولي مدخلا أساسيا للردع'}, {'community_id': '4', 'articles': [{'id': '115', 'title': 'ريال مدريد يعلن نقل كيليان مبابي إلى المستشفى', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/sport/realmadrid/407853.html', 'summary': 'ريال مدريد يعلن نقل كيليان مبابي إلى المستشفى. أعلن نادي ريال مدريد الإسباني، الخميس، نقل مهاجمه الدولي الفرنسي كيليان مبابي إلى المستشفى من أجل الخضوع لسلسلة من الفحوصات وتلقي للعلاج بسبب معاناته من', 'size': 2}, {'id': '131', 'title': 'التهاب حاد في المعدة.. مبابي في السبيطار!', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a7%d9%84%d8%aa%d9%87%d8%a7%d8%a8-%d8%ad%d8%a7%d8%af-%d9%81%d9%8a-%d8%a7%d9%84%d9%85%d8%b9%d8%af%d8%a9-%d9%85%d8%a8%d8%a7%d8%a8%d9%8a-%d9%81%d9%8a-%d8%a7%d9%84%d8%b3%d8%a8%d9%8a%d8%b7%d8%a7%d8%b1/', 'summary': 'التهاب حاد في المعدة.. مبابي في السبيطار!. أعلن نادي ريال مدريد الإسباني، اليوم الخميس (19 يونيو)، أن لاعبه الفرنسي كيليان مبابي يعاني من حالة حادة من التهاب المعدة والأمعاء، مما استدعى نقله إلى المستشفى لإجراء مجموعة من الفحوصات الطبية الضرورية واتباع العلاج المناسب. وأكد النادي في بيان رسمي أن الحالة الصحية لمبابي تخضع لمتابعة دقيقة من قبل الطاقم الطبي للفريق، مع الحرص', 'size': 2}], 'main_title': 'ريال مدريد يعلن نقل كيليان مبابي إلى المستشفى'}, {'community_id': '5', 'articles': [{'id': '146', 'title': 'وسيط المملكة يحذر من الذكاء الاصطناعي', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/315952/', 'summary': 'وسيط المملكة يحذر من الذكاء الاصطناعي. في وقت تتسارع فيه خطوات الرقمنة داخل الإدارة المغربية، حذر وسيط المملكة، حسن طارق، من مخاطر الركون إلى “الانبهار التقني” على حساب القيم الجوهرية للمرفق العمومي. ودعا وسيط المملكة إلى يقظة مؤسساتية وأخلاقية في التعامل مع الذكاء الاصطناعي. وأكد طارق، في كلمة ألقاها خلال افتتاح يوم دراسي حول “دور وسيط المملكة بين تجويد الخدمات', 'size': 2}, {'id': '238', 'title': 'طارق: الوساطة في التجارب المقارنة تواجه أنماطا جديدة من الإشكاليات', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%b7%d8%a7%d8%b1%d9%82-%d8%a7%d9%84%d9%88%d8%b3%d8%a7%d8%b7%d8%a9-%d9%81%d9%8a-%d8%a7%d9%84%d8%aa%d8%ac%d8%a7%d8%b1%d8%a8-%d8%a7%d9%84%d9%85%d9%82%d8%a7%d8%b1%d9%86%d8%a9-%d8%aa%d9%88%d8%a7%d8%ac/', 'summary': 'طارق: الوساطة في التجارب المقارنة تواجه أنماطا جديدة من الإشكاليات. المساء اليوم: قال وسيط المملكة، حسن طارق، أن مؤسسات الوساطة في التجارب المقارنة تواجه اليوم أنماطا جديدة من الإشكاليات تتمحور حول أثر التحول الرقمي للإدارة لضمان حقوق المرتفقين وفعلية قيم العدالة والإنصاف وتأمين سلاسة الولوج', 'size': 2}], 'main_title': 'وسيط المملكة يحذر من الذكاء الاصطناعي'}, {'community_id': '7', 'articles': [{'id': '150', 'title': 'نشرة إنذارية…طقس حار وزخات رعدية في عدد من المناطق', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/315961/', 'summary': 'نشرة إنذارية…طقس حار وزخات رعدية في عدد من المناطق. أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب تسجيل زخات رعدية مصحوبة بتساقط للبرد وبهبات رياح اليوم الخميس، وطقس حار يومي الخميس والجمعة بعدد من مناطق المملكة. وأوضحت المديرية، في نشرة إنذارية من مستوى يقظة “برتقالي”، أن هذه الزخات الرعدية (من 15 إلى 25 ملم) ستهم عمالات وأقاليم الرحامنة ومراكش والحوز وشيشاوة وميدلت، اليوم الخميس من', 'size': 2}, {'id': '249', 'title': 'نشرة إنذارية..طقس حار وزخات رعدية مصحوبة بتساقط للبرد وبهبات رياح بعدد من مناطق المملكة', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d9%86%d8%b4%d8%b1%d8%a9-%d8%a5%d9%86%d8%b0%d8%a7%d8%b1%d9%8a%d8%a9-%d8%b7%d9%82%d8%b3-%d8%ad%d8%a7%d8%b1-%d9%88%d8%b2%d8%ae%d8%a7%d8%aa-%d8%b1%d8%b9%d8%af%d9%8a%d8%a9-%d9%85%d8%b5%d8%ad%d9%88%d8%a8-2/', 'summary': 'نشرة إنذارية..طقس حار وزخات رعدية مصحوبة بتساقط للبرد وبهبات رياح بعدد من مناطق المملكة. أفادت المديرية العامة للأرصاد الجوية، بأنه يرتقب تسجيل زخات رعدية مصحوبة بتساقط للبرد وبهبات رياح اليوم الخميس، وطقس حار يومي الخميس والجمعة بعدد من مناطق المملكة. وأوضحت المديرية، في نشرة إنذارية من مستوى يقظة “برتقالي”، أن هذه الزخات الرعدية (من 15 إلى 25 ملم) ستهم عمالات وأقاليم الرحامنة ومراكش والحوز وشيشاوة وميدلت، اليوم …  نشرة إنذارية..طقس حار وزخات رعدية مصحوبة بتساقط للبرد وبهبات رياح بعدد من مناطق المملكة     .', 'size': 2}], 'main_title': 'نشرة إنذارية…طقس حار وزخات رعدية في عدد من المناطق'}, {'community_id': '8', 'articles': [{'id': '157', 'title': 'اتصالات المغرب تعتمد نظام حكامة جديد وتعيد تعيين بنشعبون مديرا عاما', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1079049.html', 'summary': 'اتصالات المغرب تعتمد نظام حكامة جديد وتعيد تعيين بنشعبون مديرا عاما. أعلنت مجموعة اتصالات المغرب اليوم عن تغيير جوهري في نظام حكامتها، وذلك في خطوة تهدف إلى تعزيز فعالية اتخاذ القرارات وتجانس إدارة الشركة. يأتي هذا التغيير، بحسب بلاغ للمجموعة عقب موافقة الجمعية العامة غير العادية التي انعقدت أمس، 18 يونيو 2025، على الانتقال من نظام حكامة ثنائي (مجلس رقابة ومجلس إدارة جماعية) إلى نظام موحد ظهرت المقالة اتصالات المغرب تعتمد نظام حكامة جديد وتعيد تعيين بنشعبون مديرا عاما  .', 'size': 4}, {'id': '186', 'title': 'رسمياً.. تعيين بنشعبون مديراً عاماً لاتصالات المغرب والشركة تطوي مرحلة التدبير السيئ لأحيزون', 'source': 'rue20.com', 'link': 'https://rue20.com/914327.html', 'summary': 'رسمياً.. تعيين بنشعبون مديراً عاماً لاتصالات المغرب والشركة تطوي مرحلة التدبير السيئ لأحيزون.  | الرباط أعلن مجلس إدارة مجموعة اتصالات المغرب، خلال اجتماعه المنعقد يوم الأربعاء 19 يونيو 2025، عن اعتماد تغيير هيكلي في نظام الحكامة، جرى تفعيله بعد مصادقة الجمعية العامة غير العادية المنعقدة في 18 يونيو الجاري، حيث تم الانتقال من نظام ثنائي يضم مجلس رقابة ومجلس إدارة جماعية إلى نظام موحد بمجلس إدارة الخبر رسمياً.. تعيين بنشعبون مديراً عاماً لاتصالات المغرب والشركة تطوي مرحلة التدبير السيئ لأحيزون  .', 'size': 2}, {'id': '316', 'title': 'اتصالات المغرب تغير نظام حكامتها وتجدد الثقة في بنشعبون', 'source': 'www.alakhbar.press.ma', 'link': 'https://www.alakhbar.press.ma/%d8%a7%d8%aa%d8%b5%d8%a7%d9%84%d8%a7%d8%aa-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d8%aa%d8%ba%d9%8a%d8%b1-%d9%86%d8%b8%d8%a7%d9%85-%d8%ad%d9%83%d8%a7%d9%85%d8%aa%d9%87%d8%a7-%d9%88%d8%aa%d8%ac%d8%af-267391.html', 'summary': 'اتصالات المغرب تغير نظام حكامتها وتجدد الثقة في بنشعبون. اجتمع مجلس إدارة اتصالات المغرب في 19 يونيو 2025، وتناول التغيير الذي تم إقراره في نظام حكامة المجموعة من قبل الجمعية العامة غير العادية التي انعقدت في 18 يونيو 2025، حيث تم الانتقال من نظام ثنائي مكون من مجلس رقابة ومجلس إدارة جماعية إلى نظام موحد بمجلس إدارة واحد، وفقًا للمقتضيات القانونية المعمول بها. وضمن هذا …  اتصالات المغرب تغير نظام حكامتها وتجدد الثقة في بنشعبون     .', 'size': 2}, {'id': '387', 'title': '"اتصالات المغرب" تدمج مجلس رقابتها في مجلس الإدارة في تغييرات جديدة لنظام حكامتها', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a7%d8%aa%d8%b5%d8%a7%d9%84%d8%a7%d8%aa-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d8%aa%d8%af%d9%85%d8%ac-%d9%85%d8%ac%d9%84%d8%b3-%d8%b1%d9%82%d8%a7%d8%a8%d8%aa%d9%87%d8%a7-%d9%81%d9%8a-%d9%85/', 'summary': '"اتصالات المغرب" تدمج مجلس رقابتها في مجلس الإدارة في تغييرات جديدة لنظام حكامتها. أكد مجلس إدارة اتصالات المغرب، المنعقد اليوم الخميس، التحول الذي شهده نظام حكامة المجموعة، والذي أقرته الجمعية العامة غير العادية التي انعقدت في 18 يونيو الجاري، من خلال الانتقال من نظام حكامة ثنائي (مجلس رقابة/مجلس إدارة جماعية) إلى حكامة موحدة عبر مجلس إدارة واحد، وذلك طبقا للمقتضيات القانونية الجاري بها العمل. وأوضح بلاغ للمجموعة أنه  "اتصالات المغرب" تدمج مجلس رقابتها في مجلس الإدارة في تغييرات جديدة لنظام حكامتها     .', 'size': 2}], 'main_title': 'اتصالات المغرب تعتمد نظام حكامة جديد وتعيد تعيين بنشعبون مديرا عاما'}, {'community_id': '9', 'articles': [{'id': '164', 'title': 'الحكومة تحدث وكالة وطنية لحماية الطفل ومعهد عال للموسيقى', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1079018.html', 'summary': 'الحكومة تحدث وكالة وطنية لحماية الطفل ومعهد عال للموسيقى. صادق مجلس الحكومة، المنعقد الخميس 19 يونيو 2025، على مشروع القانون رقم 29.24 يتعلق بإحداث الوكالة الوطنية لحماية الطفولة وبمراكز حماية الطفولة التابعة لها وبمؤسسات الرعاية الاجتماعية الخاصة بالأطفال، أخذا بعين الاعتبار الملاحظات المثارة، قدمه عبد اللطيف وهبي، وزير العدل. وبحسب بلاغ لرئاسة الحكومة، فإن هذا المشروع يندرج في إطار ما تحظى به الطفولة من ظهرت المقالة الحكومة تحدث وكالة وطنية لحماية الطفل ومعهد عال للموسيقى  .', 'size': 3}, {'id': '179', 'title': 'بعد إقرار قانون وكالتها الوطنية.. الحكومة تطوي صفحة مراكز حماية الطفولة', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a8%d8%b9%d8%af-%d8%a5%d9%82%d8%b1%d8%a7%d8%b1-%d9%82%d8%a7%d9%86%d9%88%d9%86-%d9%88%d9%83%d8%a7%d9%84%d8%aa%d9%87%d8%a7-%d8%a7%d9%84%d9%88%d8%b7%d9%86%d9%8a%d8%a9-%d8%a7%d9%84%d8%ad%d9%83%d9%88/', 'summary': 'بعد إقرار قانون وكالتها الوطنية.. الحكومة تطوي صفحة مراكز حماية الطفولة. صادق مجلس الحكومة، اليوم الخميس، على مشروع القانون رقم 29.24 يتعلق بإحداث الوكالة الوطنية لحماية الطفولة وبمراكز حماية الطفولة التابعة لها وبمؤسسات الرعاية الاجتماعية الخاصة بالأطفال، قدمه وزير العدل عبد اللطيف وهبي. وذكر بلاغ للوزارة المنتدبة المكلفة بالعلاقات مع البرلمان، الناطق الرسمي باسم الحكومة، أن هذا المشروع يندرج في إطار ما تحظى به الطفولة من  بعد إقرار قانون وكالتها الوطنية.. الحكومة تطوي صفحة مراكز حماية الطفولة     .', 'size': 3}, {'id': '195', 'title': 'الحكومة تصادق على مشروع إحداث الوكالة الوطنية لحماية الطفولة', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/467001.html', 'summary': 'الحكومة تصادق على مشروع إحداث الوكالة الوطنية لحماية الطفولة. صادق المجلس الحكومي المنعقد اليوم الخميس، على مشروع القانون رقم 29.24 يتعلق بإحداث الوكالة الوطنية لحماية الطفولة وبمراكز حماية الطفولة التابعة لها وبمؤسسات الرعاية الاجتماعية الخاصة بالأطفال، أخذاً بعين الاعتبار الملاحظات المثارة، قدمه عبد اللطيف وهبي، وزير العدل. ويندرج هذا المشروع – وفق ما أورده موقع رئاسة الحكومة – في إطار ما تحظى به الطفولة …', 'size': 3}], 'main_title': 'الحكومة تحدث وكالة وطنية لحماية الطفل ومعهد عال للموسيقى'}, {'community_id': '11', 'articles': [{'id': '166', 'title': 'رسميا .. المغرب يقنن استعمال “التروتينيت” و”الدراجات الكهربائية”', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1079012.html', 'summary': 'رسميا .. المغرب يقنن استعمال “التروتينيت” و”الدراجات الكهربائية”. صادق مجلس الحكومة، المنعقد الخميس 19 يونيو 2025، على مشروع المرسوم رقم 2.24.393 بتغيير وتتميم المرسوم رقم 2.10.421 الصادر في 20 من شوال 1431 (29 سبتمبر 2010) بتطبيق أحكام القانون رقم 52.05 المتعلق بمدونة السير على الطرق بشأن المركبات، أخذا بعين الاعتبار الملاحظات المثارة، قدمه عبد الصمد قيوح، وزير النقل واللوجيستيك. ويندرج هذا المشروع، بحسب ظهرت المقالة رسميا .. المغرب يقنن استعمال “التروتينيت” و”الدراجات الكهربائية”  .', 'size': 2}, {'id': '173', 'title': 'الحكومة تمرر قانونا يفرض "أنظمة مساعدة للسياقة" بالسيارات على طرق المغرب', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a7%d9%84%d8%ad%d9%83%d9%88%d9%85%d8%a9-%d8%aa%d9%85%d8%b1%d8%b1-%d9%82%d8%a7%d9%86%d9%88%d9%86%d8%a7-%d9%8a%d9%81%d8%b1%d8%b6-%d8%a3%d9%86%d8%b8%d9%85%d8%a9-%d9%85%d8%b3%d8%a7%d8%b9%d8%af%d8%a9/', 'summary': 'الحكومة تمرر قانونا يفرض "أنظمة مساعدة للسياقة" بالسيارات على طرق المغرب. صادق مجلس الحكومة، اليوم الخميس، على مشروع مرسوم يتعلق بتطبيق أحكام القانون رقم 52.05 المتعلق بمدونة السير على الطرق بشأن المركبات، أخذا بعين الاعتبار الملاحظات المثارة، قدمه وزير النقل واللوجيستيك عبد الصمد قيوح. ويتعلق الأمر بمشروع المرسوم رقم 2.24.393 بتغيير وتتميم المرسوم رقم 2.10.421 الصادر في 20 من شوال 1431 (29 سبتمبر 2010) بتطبيق أحكام  الحكومة تمرر قانونا يفرض "أنظمة مساعدة للسياقة" بالسيارات على طرق المغرب     .', 'size': 2}], 'main_title': 'رسميا .. المغرب يقنن استعمال “التروتينيت” و”الدراجات الكهربائية”'}, {'community_id': '12', 'articles': [{'id': '175', 'title': 'الرباط.. دورة تكوينية حول تدبير الأوبئة في الوسط العسكري', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a7%d9%84%d8%b1%d8%a8%d8%a7%d8%b7-%d8%af%d9%88%d8%b1%d8%a9-%d8%aa%d9%83%d9%88%d9%8a%d9%86%d9%8a%d8%a9-%d8%ad%d9%88%d9%84-%d8%aa%d8%af%d8%a8%d9%8a%d8%b1-%d8%a7%d9%84%d8%a3%d9%88%d8%a8%d8%a6%d8%a9/', 'summary': 'الرباط.. دورة تكوينية حول تدبير الأوبئة في الوسط العسكري. بتعليمات من الملك محمد السادس، القائد الأعلى ورئيس أركان الحرب العامة للقوات المسلحة الملكية، تنظم مفتشية مصلحة الصحة للقوات المسلحة الملكية، من 16 إلى 20 يونيو الجاري بالرباط، أول دورة تكوينية حول تدبير الأوبئة في الوسط العسكري. وتندرج هذه الورشة التكوينية، المنظمة تحت إشراف اللجنة الدولية للطب العسكري، في إطار أنشطة مجموعة العمل الإقليمية الإفريقية  الرباط.. دورة تكوينية حول تدبير الأوبئة في الوسط العسكري     .', 'size': 3}, {'id': '198', 'title': 'بحضور خبراء.. الرباط تحتضن دورة تكوينية حول تدبير الأوبئة في الوسط العسكري', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/466997.html', 'summary': 'بحضور خبراء.. الرباط تحتضن دورة تكوينية حول تدبير الأوبئة في الوسط العسكري. بتعليمات سامية من الملك محمد السادس، القائد الأعلى ورئيس أركان الحرب العامة للقوات المسلحة الملكية، تنظم مفتشية مصلحة الصحة للقوات المسلحة الملكية، من 16 إلى 20 يونيو الجاري بالرباط، أول دورة تكوينية حول تدبير الأوبئة في الوسط العسكري.', 'size': 2}, {'id': '225', 'title': 'بتعليمات ملكية.. دورة تكوينية حول تدبير الأوبئة في الوسط العسكري', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/223180/', 'summary': 'بتعليمات ملكية.. دورة تكوينية حول تدبير الأوبئة في الوسط العسكري. كواليس اليوم بتعليمات سامية من جلالة الملك، القائد الأعلى ورئيس أركان الحرب العامة للقوات المسلحة الملكية، تنظم مفتشية مصلحة الصحة للقوات المسلحة الملكية، من 16 إلى 20 يونيو الجاري بالرباط، أول دورة تكوينية حول تدبير الأوبئة في الوسط العسكري. وتندرج هذه الورشة التكوينية، المنظمة تحت إشراف اللجنة الدولية للطب العسكري، في إطار أنشطة مجموعة', 'size': 2}], 'main_title': 'الرباط.. دورة تكوينية حول تدبير الأوبئة في الوسط العسكري'}, {'community_id': '13', 'articles': [{'id': '178', 'title': 'لمكافحة الجريمة المنظمة العابرة للحدود.. وزير العدل يعول على "الابتكار التشريعي"', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d9%84%d9%85%d9%83%d8%a7%d9%81%d8%ad%d8%a9-%d8%a7%d9%84%d8%ac%d8%b1%d9%8a%d9%85%d8%a9-%d8%a7%d9%84%d9%85%d9%86%d8%b8%d9%85%d8%a9-%d8%a7%d9%84%d8%b9%d8%a7%d8%a8%d8%b1%d8%a9-%d9%84%d9%84%d8%ad%d8%af/', 'summary': 'لمكافحة الجريمة المنظمة العابرة للحدود.. وزير العدل يعول على "الابتكار التشريعي". قال وزير العدل عبد اللطيف وهبي، إن النموذج المغربي في مجال مكافحة الجريمة المنظمة العابرة للحدود الوطنية يرتكز، بالأساس، على الابتكار التشريعي والمؤسساتي والفعالية العملياتية والتعاون الدولي. وأوضح وهبي، خلال ندوة دولية حول مكافحة الجريمة المنظمة العابرة للحدود الوطنية، ينظمها المجلس الأعلى للسلطة القضائية بشراكة مع وزارة العدل الفرنسية، الخميس بالرباط"، إن النموذج المغربي لمكافحة الجريمة  لمكافحة الجريمة المنظمة العابرة للحدود.. وزير العدل يعول على "الابتكار التشريعي"     .', 'size': 2}, {'id': '357', 'title': 'وهبي: المغرب يسجل 4.80 نقطة في مكافحة الجريمة المنظمة مقابل 5.25 كنسبة إفريقية', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/315986/', 'summary': 'وهبي: المغرب يسجل 4.80 نقطة في مكافحة الجريمة المنظمة مقابل 5.25 كنسبة إفريقية. أكد وزير العدل عبد اللطيف وهبي، اليوم الخميس بالرباط، أن النموذج المغربي في مجال مكافحة الجريمة المنظمة العابرة للحدود الوطنية يرتكز، بالأساس، على الابتكار التشريعي والمؤسساتي والفعالية العملياتية والتعاون الدولي. وقال وهبي، خلال ندوة دولية حول مكافحة الجريمة المنظمة العابرة للحدود الوطنية، ينظمها المجلس الأعلى للسلطة القضائية بشراكة مع وزارة العدل الفرنسية، إن “النموذج المغربي', 'size': 2}], 'main_title': 'لمكافحة الجريمة المنظمة العابرة للحدود.. وزير العدل يعول على "الابتكار التشريعي"'}, {'community_id': '6', 'articles': [{'id': '318', 'title': 'جهود متواصلة لإخماد حريق غابوي بجماعة عين لحصن بإقليم تطوان', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/202262', 'summary': 'جهود متواصلة لإخماد حريق غابوي بجماعة عين لحصن بإقليم تطوان.  تواصل فرق الإطفاء جهودها المكثفة لإخماد حريق غابوي اندلع، زوال اليوم الخميس، بالغطاء الغابوي بمنطقة ودراس بجماعة عين لحصن بإقليم تطوان. وتعمل فرق الإطفاء في ظل ظروف مناخية صعبة تتمثل في هبوب رياح “الشرقي” وارتفاع درجة الحرارة، ما ساهم في إذكاء حدة النيران، التي أتت لحد الساعة على حوالي 15 هكتارا مكونة بشكل', 'size': 3}, {'id': '328', 'title': 'جهود متواصلة لإخماد حريق غابوي التهم الهكتارات ضواحي تطوان', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/407876.html', 'summary': 'جهود متواصلة لإخماد حريق غابوي التهم الهكتارات ضواحي تطوان. تواصل فرق الإطفاء جهودها المكثفة لإخماد حريق غابوي اندلع، زوال اليوم الخميس، بالغطاء الغابوي بمنطقة ودراس بجماعة عين لحصن بإقليم تطوان. وتعمل فرق الإطفاء في ظل', 'size': 3}, {'id': '338', 'title': 'بالصور من تطوان.. جهود متواصلة لإخماد حريق غابوي بجماعة عين لحصن', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a8%d8%a7%d9%84%d8%b5%d9%88%d8%b1-%d9%85%d9%86-%d8%aa%d8%b7%d9%88%d8%a7%d9%86-%d8%ac%d9%87%d9%88%d8%af-%d9%85%d8%aa%d9%88%d8%a7%d8%b5%d9%84%d8%a9-%d9%84%d8%a5%d8%ae%d9%85%d8%a7%d8%af-%d8%ad%d8%b1/', 'summary': 'بالصور من تطوان.. جهود متواصلة لإخماد حريق غابوي بجماعة عين لحصن. تواصل فرق الإطفاء جهودها المكثفة لإخماد حريق غابوي اندلع، زوال اليوم الخميس (19 يونيو)، بالغطاء الغابوي بمنطقة ودراس بجماعة عين لحصن بإقليم تطوان. وتعمل فرق الإطفاء في ظل ظروف مناخية صعبة تتمثل في هبوب رياح “الشرقي” وارتفاع درجة الحرارة، ما ساهم في إذكاء حدة النيران، التي أتت لحد الساعة على حوالي 15 هكتارا مكونة بشكل', 'size': 3}], 'main_title': 'جهود متواصلة لإخماد حريق غابوي بجماعة عين لحصن بإقليم تطوان'}, {'community_id': '10', 'articles': [{'id': '353', 'title': 'المغرب يدعو إلى وضع حقوق الإنسان في صلب جهود مكافحة الفساد', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/315998/', 'summary': 'المغرب يدعو إلى وضع حقوق الإنسان في صلب جهود مكافحة الفساد. دعا السفير الممثل الدائم للمغرب لدى مكتب الأمم المتحدة بجنيف، السيد عمر زنيبر، اليوم الخميس بجنيف، إلى وضع حقوق الإنسان في قلب جهود مكافحة الفساد. وقال زنيبر خلال افتتاح لقاء حول موضوع “حقوق الإنسان ومكافحة ممارسة الفساد”، تم تنظيمه على هامش الدورة الـ 59 لمجلس حقوق الإنسان بجنيف، ” إن مقاربة مرتكزة على حقوق الإنسان', 'size': 2}, {'id': '423', 'title': 'جنيف.. المغرب يدعو إلى وضع حقوق الإنسان في صلب جهود مكافحة الفساد', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/223200/', 'summary': 'جنيف.. المغرب يدعو إلى وضع حقوق الإنسان في صلب جهود مكافحة الفساد. و م ع دعا السفير الممثل الدائم للمغرب لدى مكتب الأمم المتحدة بجنيف، عمر زنيبر، اليوم الخميس بجنيف، إلى وضع حقوق الإنسان في قلب جهود مكافحة الفساد. وقال زنيبر خلال افتتاح لقاء حول موضوع “حقوق الإنسان ومكافحة ممارسة الفساد”، تم تنظيمه على هامش الدورة الـ 59 لمجلس حقوق الإنسان بجنيف، ” إن مقاربة مرتكزة', 'size': 2}], 'main_title': 'المغرب يدعو إلى وضع حقوق الإنسان في صلب جهود مكافحة الفساد'}, {'community_id': '3', 'articles': [{'id': '395', 'title': 'لتجنب تصنيفها منظمة إرهابية.. الجزائر تأمر بسحب الأسلحة الإيرانية من “البوليساريو”', 'source': 'machahid24.com', 'link': 'https://machahid24.com/international/467018.html', 'summary': 'لتجنب تصنيفها منظمة إرهابية.. الجزائر تأمر بسحب الأسلحة الإيرانية من “البوليساريو”. في خطوة تروم فصل جبهة “البوليساريو” عن المحور الإيراني، أصدر رئيس أركان الجيش الجزائري الجنرال سعيد شنقريحة، قبل أيام، أوامره للجبهة الانفصالية بسحب فوري للأسلحة والطائرات بدون طيار التي زودتها بها القيادة العليا الإيرانية، وتسليمها للمخابرات الجزائرية. وبحسب منصة “ahel-intelligence” تأتي هذه الخطوة، التي وصفتها المصادر بأنها تهدف إلى منع فرض عقوبات على الجبهة الانفصالية …', 'size': 2}, {'id': '437', 'title': 'الجزائر تسحب أسلحة إيرانية من البوليساريو.. مناورة لتجنب تصنيفها منظمة إرهابية وسط تصاعد التوترات الإقليمية', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d8%ac%d8%b2%d8%a7%d8%a6%d8%b1-%d8%aa%d8%b3%d8%ad%d8%a8-%d8%a3%d8%b3%d9%84%d8%ad%d8%a9-%d8%a5%d9%8a%d8%b1%d8%a7%d9%86%d9%8a%d8%a9-%d9%85%d9%86-%d8%a7%d9%84%d8%a8%d9%88%d9%84%d9%8a%d8%b3/', 'summary': 'الجزائر تسحب أسلحة إيرانية من البوليساريو.. مناورة لتجنب تصنيفها منظمة إرهابية وسط تصاعد التوترات الإقليمية. في ظل التصعيد المتواصل بين إيران وإسرائيل، كشفت تقارير إعلامية متطابقة، نقلا عن مصادر جزائرية مقربة من هيئة الأركان العامة للجيش، عن تحركات عسكرية وسياسية لافتة في الجزائر. ووفقا لمنصة “ahel-intelligence” فقد أصدر الجنرال سعيد شنقريحة، أوامر لجبهة البوليساريو بسحب فوري للأسلحة والطائرات بدون طيار التي زودتها بها القيادة العليا الإيرانية، وتسليمها للمخابرات …  الجزائر تسحب أسلحة إيرانية من البوليساريو.. مناورة لتجنب تصنيفها منظمة إرهابية وسط تصاعد التوترات الإقليمية     .', 'size': 2}], 'main_title': 'لتجنب تصنيفها منظمة إرهابية.. الجزائر تأمر بسحب الأسلحة الإيرانية من “البوليساريو”'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    