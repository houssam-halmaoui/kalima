<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 01/08/2025 - 18h31</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '7', 'title': 'مدير "الأقصى" يشكر جهود المغرب', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d9%85%d8%af%d9%8a%d8%b1-%d8%a7%d9%84%d8%a3%d9%82%d8%b5%d9%89-%d9%8a%d8%b4%d9%83%d8%b1-%d8%ac%d9%87%d9%88%d8%af-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-1602432.html', 'summary': 'مدير "الأقصى" يشكر جهود المغرب. ثمن الشيخ عمر الكسواني، مدير المسجد الأقصى المبارك، مبادرة الملك محمد السادس، رئيس لجنة القدس، بإرسال مساعدة إنسانية وطبية عاجلة إلى الشعب الفلسطيني، وخاصة إلى ساكنة غزة. وقال الشيخ الكسواني، في تصريح صحافي، إن “مبادرة جلالة الملك محمد السادس التفاتة طيبة من أجل التخفيف من معاناة أهلنا في غزة، وسد رمق المجاعة التي تحاصرهم”. كما  مدير "الأقصى" يشكر جهود المغرب     - هسبريس جريدة إلكترونية مغربية .', 'size': 2}, {'id': '434', 'title': 'مدير المسجد الأقصى يشيد بمبادرة الملك محمد السادس في دعم الشعب الفلسطيني بمساعدة إنسانية وطبية عاجلة', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d9%85%d8%af%d9%8a%d8%b1-%d8%a7%d9%84%d9%85%d8%b3%d8%ac%d8%af-%d8%a7%d9%84%d8%a3%d9%82%d8%b5%d9%89-%d9%8a%d8%b4%d9%8a%d8%af-%d8%a8%d9%85%d8%a8%d8%a7%d8%af%d8%b1%d8%a9-%d8%a7%d9%84%d9%85%d9%84%d9%83/', 'summary': 'مدير المسجد الأقصى يشيد بمبادرة الملك محمد السادس في دعم الشعب الفلسطيني بمساعدة إنسانية وطبية عاجلة. ثمن الشيخ عمر الكسواني، مدير المسجد الأقصى المبارك، مبادرة الملك محمد السادس، رئيس لجنة القدس، بإرسال مساعدة إنسانية وطبية عاجلة إلى الشعب الفلسطيني، وخاصة إلى ساكنة غزة. وقال الشيخ الكسواني، في تصريح صحافي، إن “مبادرة جلالة الملك محمد السادس التفاتة طيبة من أجل التخفيف من معاناة أهلنا في غزة، وسد رمق المجاعة التي …  مدير المسجد الأقصى يشيد بمبادرة الملك محمد السادس في دعم الشعب الفلسطيني بمساعدة إنسانية وطبية عاجلة     .', 'size': 2}], 'main_title': 'مدير "الأقصى" يشكر جهود المغرب'}, {'community_id': '1', 'articles': [{'id': '69', 'title': 'عيد العرش .. أمير المؤمنين جلالة الملك يترأس حفل الولاء بالقصر الملكي بتطوان', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/204468', 'summary': 'عيد العرش .. أمير المؤمنين جلالة الملك يترأس حفل الولاء بالقصر الملكي بتطوان.  ترأس أمير المؤمنين صاحب الجلالة الملك محمد السادس ، نصره الله ،مرفوقا بصاحب السمو الملكي ولي العهد الأمير مولاي الحسن،وصاحب السمو الملكي الأمير مولاي رشيد، و صاحب السمو الأمير مولاي أحمد ،بعد زوال اليوم الخميس ، بساحة المشور بالقصر الملكي بتطوان، حفل الولاء،وذلك تخليدا للذكرى السادسة والعشرين لتربع جلالة الملك على عرش أسلافه', 'size': 2}, {'id': '237', 'title': 'أمير المؤمنين جلالة الملك يترأس حفل الولاء بالقصر الملكي بتطوان', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/225463/', 'summary': 'أمير المؤمنين جلالة الملك يترأس حفل الولاء بالقصر الملكي بتطوان. تطوان – ترأس أمير المؤمنين صاحب الجلالة الملك محمد السادس، نصره الله، مرفوقا بصاحب السمو الملكي ولي العهد الأمير مولاي الحسن، وصاحب السمو الملكي الأمير مولاي رشيد، وصاحب السمو الأمير مولاي أحمد، بعد زوال اليوم الخميس، بساحة المشور بالقصر الملكي بتطوان، حفل الولاء، وذلك تخليدا للذكرى السادسة والعشرين لتربع جلالة الملك على عرش أسلافه المنعمين.', 'size': 3}, {'id': '241', 'title': 'الملك محمد السادس يترأس حفل الولاء بساحة المشور بالقصر الملكي بتطوان', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%85%d8%ad%d9%85%d8%af-%d8%a7%d9%84%d8%b3%d8%a7%d8%af%d8%b3-%d9%8a%d8%aa%d8%b1%d8%a3%d8%b3-%d8%ad%d9%81%d9%84-%d8%a7%d9%84%d9%88%d9%84%d8%a7%d8%a1-%d8%a8%d8%b3%d8%a7/', 'summary': 'الملك محمد السادس يترأس حفل الولاء بساحة المشور بالقصر الملكي بتطوان. المساء اليوم – تطوان: ترأس جلالة الملك محمد السادس، مرفوقا بصاحب السمو الملكي ولي العهد الأمير مولاي الحسن، وصاحب السمو الملكي الأمير مولاي رشيد، وصاحب السمو الأمير مولاي أحمد، بعد زوال اليوم الخميس، بساحة المشور', 'size': 2}], 'main_title': 'أمير المؤمنين جلالة الملك يترأس حفل الولاء بالقصر الملكي بتطوان'}, {'community_id': '7', 'articles': [{'id': '119', 'title': 'في عملية نوعية.. عشرات الألاف من الأقراص المهلوسة تقع في قبضة المصالح الأمنية قبل مرورها من معبر باب سبتة', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/society/410306.html', 'summary': 'في عملية نوعية.. عشرات الألاف من الأقراص المهلوسة تقع في قبضة المصالح الأمنية قبل مرورها من معبر باب سبتة. أسفرت عملية نوعية باشرتها عناصر الأمن الوطني والجمارك بمركز باب سبتة، مساء يوم الخميس 31 يوليوز المنصرم، عن إجهاض عملية تهريب 54 ألف قرص مخدر', 'size': 4}, {'id': '186', 'title': 'باب سبتة.. إجهاض عملية إدخال 54 ألف قرص طبي مخدر إلى التراب الوطني', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a8%d8%a7%d8%a8-%d8%b3%d8%a8%d8%aa%d8%a9-%d8%a5%d8%ac%d9%87%d8%a7%d8%b6-%d8%b9%d9%85%d9%84%d9%8a%d8%a9-%d8%a5%d8%af%d8%ae%d8%a7%d9%84-54-%d8%a3%d9%84%d9%81-%d9%82%d8%b1%d8%b5-%d8%b7%d8%a8%d9%8a/', 'summary': 'باب سبتة.. إجهاض عملية إدخال 54 ألف قرص طبي مخدر إلى التراب الوطني. أسفرت عملية نوعية باشرتها عناصر الأمن الوطني والجمارك بمركز باب سبتة، مساء يوم الخميس 31 يوليوز المنصرم، عن إجهاض عملية تهريب 54 ألف قرص مخدر إلى داخل التراب الوطني، وتوقيف شخص يبلغ من العمر 34 سنة، يشتبه في تورطه في قضية تتعلق بالتهريب الدولي للمخدرات والمؤثرات العقلية. وأوضح مصدر أمني أنه جرى توقيف المشتبه فيه  باب سبتة.. إجهاض عملية إدخال 54 ألف قرص طبي مخدر إلى التراب الوطني     .', 'size': 4}, {'id': '231', 'title': 'عملية نوعية للأمن والجمارك: إجهاض عملية تهريب 54 ألف قرص مخدر إلى داخل التراب الوطني', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/225482/', 'summary': 'عملية نوعية للأمن والجمارك: إجهاض عملية تهريب 54 ألف قرص مخدر إلى داخل التراب الوطني. أسفرت عملية نوعية باشرتها عناصر الأمن الوطني والجمارك بمركز باب سبتة، مساء يوم الخميس 31 يوليوز المنصرم، عن إجهاض عملية تهريب 54 ألف قرص مخدر إلى داخل التراب الوطني، وتوقيف شخص يبلغ من العمر 34 سنة، يشتبه في تورطه في قضية تتعلق بالتهريب الدولي للمخدرات والمؤثرات العقلية. وقد جرى توقيف المشتبه فيه مباشرة بعد وصوله', 'size': 4}, {'id': '249', 'title': 'توقيف شخص وإجهاض عملية تهريب 54 ألف قرص مخدر بمركز باب سبتة المحتلة', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%aa%d9%88%d9%82%d9%8a%d9%81-%d8%b4%d8%ae%d8%b5-%d9%88%d8%a5%d8%ac%d9%87%d8%a7%d8%b6-%d8%b9%d9%85%d9%84%d9%8a%d8%a9-%d8%aa%d9%87%d8%b1%d9%8a%d8%a8-54-%d8%a3%d9%84%d9%81-%d9%82%d8%b1%d8%b5-%d9%85/', 'summary': 'توقيف شخص وإجهاض عملية تهريب 54 ألف قرص مخدر بمركز باب سبتة المحتلة. أسفرت عملية نوعية باشرتها عناصر الأمن الوطني والجمارك بمركز باب سبتة، مساء أمس الخميس، عن إجهاض عملية تهريب 54 ألف قرص مخدر إلى داخل التراب الوطني، وتوقيف شخص يبلغ من العمر 34 سنة، يشتبه في تورطه في قضية تتعلق بالتهريب الدولي للمخدرات والمؤثرات العقلية. وكشفت مصادر أمنية، أنه قد جرى توقيف المشتبه فيه …  توقيف شخص وإجهاض عملية تهريب 54 ألف قرص مخدر بمركز باب سبتة المحتلة     .', 'size': 4}], 'main_title': 'في عملية نوعية.. عشرات الألاف من الأقراص المهلوسة تقع في قبضة المصالح الأمنية قبل مرورها من معبر باب سبتة'}, {'community_id': '3', 'articles': [{'id': '137', 'title': 'عضو منظمة التحرير الفلسطينية: الفلسطينيون في غزة يقدرون عاليا المساعدة الإنسانية والطبية التي أرسلتها المملكة بتعليمات سامية من جلالة الملك', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%b9%d8%b6%d9%88-%d9%85%d9%86%d8%b8%d9%85%d8%a9-%d8%a7%d9%84%d8%aa%d8%ad%d8%b1%d9%8a%d8%b1-%d8%a7%d9%84%d9%81%d9%84%d8%b3%d8%b7%d9%8a%d9%86%d9%8a%d8%a9-%d8%a7%d9%84%d9%81%d9%84%d8%b3%d8%b7%d9%8a/', 'summary': 'عضو منظمة التحرير الفلسطينية: الفلسطينيون في غزة يقدرون عاليا المساعدة الإنسانية والطبية التي أرسلتها المملكة بتعليمات سامية من جلالة الملك. قال أحمد مجدلاني عضو اللجنة التنفيذية لمنظمة التحرير الفلسطينية، إن الفلسطينيين في غزة يقدرون عاليا المساعدة الإنسانية والطبية العاجلة التي أعطى صاحب الجلالة الملك محمد السادس، رئيس لجنة القدس، تعليماته السامية من أجل إرسالها إلى الشعب الفلسطيني وخاصة ساكنة قطاع غزة. وأوضح مجدلاني في تصريح لوكالة المغرب العربي للأنباء ”نتقدم بالشكر والتقدير لجلالة الملك محمد', 'size': 2}, {'id': '430', 'title': 'عضو في منظمة التحرير الفلسطينية: سكان غزة يثمنون عالياً المساعدة الإنسانية والطبية من الملك محمد السادس', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%b9%d8%b6%d9%88-%d9%81%d9%8a-%d9%85%d9%86%d8%b8%d9%85%d8%a9-%d8%a7%d9%84%d8%aa%d8%ad%d8%b1%d9%8a%d8%b1-%d8%a7%d9%84%d9%81%d9%84%d8%b3%d8%b7%d9%8a%d9%86%d9%8a%d8%a9-%d8%b3%d9%83%d8%a7%d9%86-%d8%ba/', 'summary': 'عضو في منظمة التحرير الفلسطينية: سكان غزة يثمنون عالياً المساعدة الإنسانية والطبية من الملك محمد السادس. قال أحمد مجدلاني عضو اللجنة التنفيذية لمنظمة التحرير الفلسطينية، إن الفلسطينيين في غزة يقدرون عاليا المساعدة الإنسانية والطبية العاجلة التي أعطى الملك محمد السادس، رئيس لجنة القدس، تعليماته السامية من أجل إرسالها إلى الشعب الفلسطيني وخاصة ساكنة قطاع غزة. وأوضح مجدلاني في تصريح لوكالة المغرب العربي للأنباء ”نتقدم بالشكر والتقدير للملك محمد السادس …  عضو في منظمة التحرير الفلسطينية: سكان غزة يثمنون عالياً المساعدة الإنسانية والطبية من الملك محمد السادس     .', 'size': 2}], 'main_title': 'عضو منظمة التحرير الفلسطينية: الفلسطينيون في غزة يقدرون عاليا المساعدة الإنسانية والطبية التي أرسلتها المملكة بتعليمات سامية من جلالة الملك'}, {'community_id': '4', 'articles': [{'id': '140', 'title': 'مسؤول فدرالي سويسري: المغرب شريك ذو أولوية بالنسبة لسويسرا', 'source': 'kifache.com', 'link': 'https://kifache.com/%d9%85%d8%b3%d8%a4%d9%88%d9%84-%d9%81%d8%af%d8%b1%d8%a7%d9%84%d9%8a-%d8%b3%d9%88%d9%8a%d8%b3%d8%b1%d9%8a-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d8%b4%d8%b1%d9%8a%d9%83-%d8%b0%d9%88-%d8%a3%d9%88%d9%84/', 'summary': 'مسؤول فدرالي سويسري: المغرب شريك ذو أولوية بالنسبة لسويسرا. أكد كاتب الدولة المساعد لدى كتابة الدولة للاقتصاد بالاتحاد السويسري، السفير إيفو غيرمان، أمس الخميس (31 يوليوز) ببرن، أن المغرب يعد “أحد أهم الشركاء التجاريين لسويسرا في إفريقيا”. وأوضح غيرمان، في تصريح لوكالة المغرب العربي للأنباء، على هامش حفل استقبال نظمته سفارة المملكة في سويسرا بمناسبة الاحتفال بالذكرى الـ26 لتربع صاحب الجلالة الملك محمد السادس', 'size': 2}, {'id': '423', 'title': 'مسؤول فيدرالي سويسري: المغرب شريك ذو أولوية', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/225494/', 'summary': 'مسؤول فيدرالي سويسري: المغرب شريك ذو أولوية. برن – أكد كاتب الدولة المساعد لدى كتابة الدولة للاقتصاد بالاتحاد السويسري، السفير إيفو غيرمان، اليوم الخميس ببرن، أن المغرب يعد “أحد أهم الشركاء التجاريين لسويسرا في إفريقيا”. وأوضح السيد غيرمان، في تصريح لوكالة المغرب العربي للأنباء، على هامش حفل استقبال نظمته سفارة المملكة في سويسرا بمناسبة الاحتفال بالذكرى الـ26 لتربع صاحب الجلالة الملك محمد', 'size': 2}], 'main_title': 'مسؤول فدرالي سويسري: المغرب شريك ذو أولوية بالنسبة لسويسرا'}, {'community_id': '11', 'articles': [{'id': '142', 'title': 'وزير الخارجية الرواندي يشيد بمبادرات جلالة الملك لصالح إفريقيا', 'source': 'assabah.ma', 'link': 'https://assabah.ma/863040.html', 'summary': 'وزير الخارجية الرواندي يشيد بمبادرات جلالة الملك لصالح إفريقيا. أشاد وزير الشؤون الخارجية الرواندي، أوليفييه ندهونجيريهي، أول أمس الأربعاء بكيغالي، بمبادرات صاحب الجلالة الملك محمد السادس لصالح إفريقيا وكذا بجهوده من أجل تعزيز التعاون جنوب-جنوب. وقال ندهونجيريهي، في تصريح لوكالة المغرب العربي للأنباء على هامش حفل استقبال نظمته سفارة المغرب بكيغالي لتخليد الذكرى ال26 لعيد العرشأكمل القراءة » المقالة وزير الخارجية الرواندي يشيد بمبادرات جلالة الملك لصالح إفريقيا  .', 'size': 2}, {'id': '432', 'title': 'وزير الخارجية الرواندي يشيد بمبادرات الملك محمد السادس لصالح إفريقيا', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d9%88%d8%b2%d9%8a%d8%b1-%d8%a7%d9%84%d8%ae%d8%a7%d8%b1%d8%ac%d9%8a%d8%a9-%d8%a7%d9%84%d8%b1%d9%88%d8%a7%d9%86%d8%af%d9%8a-%d9%8a%d8%b4%d9%8a%d8%af-%d8%a8%d9%85%d8%a8%d8%a7%d8%af%d8%b1%d8%a7%d8%aa/', 'summary': 'وزير الخارجية الرواندي يشيد بمبادرات الملك محمد السادس لصالح إفريقيا. أشاد وزير الشؤون الخارجية الرواندي، أوليفييه ندهونجيريهي، بمبادرات الملك محمد السادس الرامية إلى دعم إفريقيا وتعزيز التعاون بين بلدان الجنوب، مؤكداً أن مقاربة العاهل المغربي في هذا المجال تستحق كل التقدير. جاء هذا التصريح خلال مشاركته في حفل نظمته سفارة المملكة المغربية بكيغالي، بمناسبة الذكرى الـ26 لعيد العرش المجيد. وأوضح ندهونجيريهي أن رواندا …  وزير الخارجية الرواندي يشيد بمبادرات الملك محمد السادس لصالح إفريقيا     .', 'size': 2}], 'main_title': 'وزير الخارجية الرواندي يشيد بمبادرات جلالة الملك لصالح إفريقيا'}, {'community_id': '2', 'articles': [{'id': '180', 'title': 'نشرة إنذارية.. موجة حر من السبت إلى الأربعاء بعدد من مناطق المملكة', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d9%86%d8%b4%d8%b1%d8%a9-%d8%a5%d9%86%d8%b0%d8%a7%d8%b1%d9%8a%d8%a9-%d9%85%d9%88%d8%ac%d8%a9-%d8%ad%d8%b1-%d9%85%d9%86-%d8%a7%d9%84%d8%b3%d8%a8%d8%aa-%d8%a5%d9%84%d9%89-%d8%a7%d9%84%d8%a3%d8%b1%d8%a8/', 'summary': 'نشرة إنذارية.. موجة حر من السبت إلى الأربعاء بعدد من مناطق المملكة. أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب تسجيل موجة حر (ما بين 41 و 45 درجة)، ابتداء من يوم غد السبت إلى غاية يوم الأربعاء المقبل بعدد من مناطق المملكة. وأوضحت المديرية، في نشرة إنذارية من مستوى يقظة برتقالي، أنه يرتقب تسجيل موجة حر، تتراوح ما بين 41 و45 درجة، يوم السبت، بعمالات وأقاليم سيدي  نشرة إنذارية.. موجة حر من السبت إلى الأربعاء بعدد من مناطق المملكة     .', 'size': 2}, {'id': '255', 'title': 'توقعات أحوال الطقس في العديد من مناطق المملكة اليوم الجمعة', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%aa%d9%88%d9%82%d8%b9%d8%a7%d8%aa-%d8%a3%d8%ad%d9%88%d8%a7%d9%84-%d8%a7%d9%84%d8%b7%d9%82%d8%b3-%d9%81%d9%8a-%d8%a7%d9%84%d8%b9%d8%af%d9%8a%d8%af-%d9%85%d9%86-%d9%85%d9%86%d8%a7%d8%b7%d9%82-96/', 'summary': 'توقعات أحوال الطقس في العديد من مناطق المملكة اليوم الجمعة. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليومه الجمعة، أن تتميز الحالة الجوية عامة بطقس نسبيا حار إلى محليا حار مع هبوب الشركي محليا بكل من السهول الداخلية، وجنوب المنطقة الشرقية، والريف الغربي، والجنوب-الشرقي للبلاد، وشرق الأقاليم الصحراوية. كما يرتقب نزول قطرات مطرية مرفوقة برعد محلي بالأطلس المتوسط، والهضاب العليا الشرقية، وستكون السماء غائمة …  توقعات أحوال الطقس في العديد من مناطق المملكة اليوم الجمعة     .', 'size': 2}], 'main_title': 'نشرة إنذارية.. موجة حر من السبت إلى الأربعاء بعدد من مناطق المملكة'}, {'community_id': '8', 'articles': [{'id': '187', 'title': 'طقس حار مع رياح الشركي متوقع اليوم الجمعة', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%b7%d9%82%d8%b3-%d8%ad%d8%a7%d8%b1-%d9%85%d8%b9-%d8%b1%d9%8a%d8%a7%d8%ad-%d8%a7%d9%84%d8%b4%d8%b1%d9%83%d9%8a-%d9%85%d8%aa%d9%88%d9%82%d8%b9-%d8%a7%d9%84%d9%8a%d9%88%d9%85-%d8%a7%d9%84%d8%ac%d9%85/', 'summary': 'طقس حار مع رياح الشركي متوقع اليوم الجمعة. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الجمعة، أن تتميز الحالة الجوية عامة بطقس نسبيا حار إلى حار محليا مع هبوب الشركي محليا بكل من السهول الداخلية، وجنوب المنطقة الشرقية، والريف الغربي، والجنوب-الشرقي للبلاد، وشرق الأقاليم الصحراوية. كما يرتقب نزول قطرات مطرية مرفوقة برعد محلي بالأطلس المتوسط، والهضاب العليا الشرقية. وستكون السماء غائمة جزئيا بالأطلس الكبير،  طقس حار مع رياح الشركي متوقع اليوم الجمعة     .', 'size': 2}, {'id': '190', 'title': 'طقس اليوم: جو حار مع رياح “الشركي” بعدد من المناطق', 'source': 'soltana.ma', 'link': 'https://soltana.ma/1357559.html', 'summary': 'طقس اليوم: جو حار مع رياح “الشركي” بعدد من المناطق. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليومه الجمعة، أن تتميز الحالة الجوية عامة بطقس نسبيا حار إلى محليا حار مع هبوب الشركي محليا بكل من السهول الداخلية، وجنوب المنطقة الشرقية، والريف الغربي، والجنوب-الشرقي للبلاد، وشرق الأقاليم الصحراوية. كما يرتقب نزول قطرات مطرية مرفوقة برعد محلي بالأطلس المتوسط، والهضاب العليا الشرقية. وستكون السماء غائمة جزئيا بالأطلس', 'size': 2}], 'main_title': 'طقس حار مع رياح الشركي متوقع اليوم الجمعة'}, {'community_id': '10', 'articles': [{'id': '221', 'title': 'في خلفيات دعوات المغرب المتكررة للحوار مع الجزائر', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d9%81%d9%8a-%d8%ae%d9%84%d9%81%d9%8a%d8%a7%d8%aa-%d8%af%d8%b9%d9%88%d8%a7%d8%aa-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d8%a7%d9%84%d9%85%d8%aa%d9%83%d8%b1%d8%b1%d8%a9-%d9%84%d9%84%d8%ad%d9%88%d8%a7/', 'summary': 'في خلفيات دعوات المغرب المتكررة للحوار مع الجزائر. في خلفيات دعوات المغرب المتكررة للحوار مع الجزائر  – بلال التليدي ثمة تساؤل مشروع حول دعوة المغرب الجزائر كل مرة للحوار لحل المشكلات العالقة، دون أن تظهر مؤشرات...  في خلفيات دعوات المغرب المتكررة للحوار مع الجزائر     .', 'size': 2}, {'id': '427', 'title': 'ما وراء دعوات المغرب المتكررة للتصالح مع الجزائر..', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d9%85%d8%a7-%d9%88%d8%b1%d8%a7%d8%a1-%d8%af%d8%b9%d9%88%d8%a7%d8%aa-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d8%a7%d9%84%d9%85%d8%aa%d9%83%d8%b1%d8%b1%d8%a9-%d9%84%d9%84%d8%aa%d8%b5%d8%a7%d9%84%d8%ad/', 'summary': 'ما وراء دعوات المغرب المتكررة للتصالح مع الجزائر... بلال التليدي ثمة تساؤل مشروع حول دعوة المغرب الجزائر كل مرة للحوار لحل المشكلات العالقة، دون أن تظهر مؤشرات على إمكان نجاح هذا المسعى، وهل يفعل ذلك من باب الإقناع المتكرر بأنه لا خيار للبلدين', 'size': 2}], 'main_title': 'في خلفيات دعوات المغرب المتكررة للحوار مع الجزائر'}, {'community_id': '5', 'articles': [{'id': '289', 'title': '"أوكسير" الفرنسي يستعير العزوزي', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d8%a3%d9%88%d9%83%d8%b3%d9%8a%d8%b1-%d8%a7%d9%84%d9%81%d8%b1%d9%86%d8%b3%d9%8a-%d9%8a%d8%b3%d8%aa%d8%b9%d9%8a%d8%b1-%d8%a7%d9%84%d8%b9%d8%b2%d9%88%d8%b2%d9%8a-1602598.html', 'summary': '"أوكسير" الفرنسي يستعير العزوزي. أعلن نادي أوكسير الفرنسي لكرة القدم تعاقده مع الدولي المغربي أسامة العزوزي، متوسط ميدان بولونيا الإيطالي، ليعزز التركيبة البشرية للفريق بداية من الموسم الكروي القادم. وتعاقد أوكسير مع العزوزي بنظام الإعارة من بولونيا لموسم واحد، ليتم تقديمه اليوم الجمعة لوسائل الإعلام وجمهور الفريق بالقميص رقم 17، الذي سيرتديه الموسم المقبل. ودافع الدولي المغربي عن ألوان  "أوكسير" الفرنسي يستعير العزوزي     - هسبريس جريدة إلكترونية مغربية .', 'size': 2}, {'id': '344', 'title': 'على سبيل الإعارة من بولونيا.. أسامة العزوزي ينضم إلى أوكسير الفرنسي', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%b9%d9%84%d9%89-%d8%b3%d8%a8%d9%8a%d9%84-%d8%a7%d9%84%d8%a5%d8%b9%d8%a7%d8%b1%d8%a9-%d9%85%d9%86-%d8%a8%d9%88%d9%84%d9%88%d9%86%d9%8a%d8%a7-%d8%a3%d8%b3%d8%a7%d9%85%d8%a9-%d8%a7%d9%84%d8%b9%d8%b2/', 'summary': 'على سبيل الإعارة من بولونيا.. أسامة العزوزي ينضم إلى أوكسير الفرنسي. أعلن نادي أوكسير الفرنسي، اليوم الجمعة، تعاقده مع الدولي المغربي أسامة العزوزي، قادمًا من بولونيا الإيطالي، على سبيل الإعارة لموسم واحد، في صفقة تهدف إلى تعزيز خط وسط الفريق انطلاقًا من الموسم الكروي 2025-2026. وجرى تقديم العزوزي لوسائل الإعلام وجمهور النادي، حيث ظهر بالقميص رقم 17، الذي سيرتديه خلال الموسم المقبل. وتأتي هذه الخطوة في', 'size': 2}], 'main_title': '"أوكسير" الفرنسي يستعير العزوزي'}, {'community_id': '6', 'articles': [{'id': '303', 'title': 'مهرجان شواطئ اتصالات المغرب يُبهر جمهور طنجة والحسيمة والمضيق(صور)', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-645815.html', 'summary': 'مهرجان شواطئ اتصالات المغرب يُبهر جمهور طنجة والحسيمة والمضيق(صور). أطلق مهرجان شواطئ اتصالات المغرب نسخته الخاصة بعيد العرش المجيد، من خلال تنظيم سهرات موسيقية ضخمة شهدتها مدن المضيق، الحسيمة وطنجة يومي 30 و31 يوليوز، حيث تفاعل آلاف المتفرجين مع عروض فنية استثنائية أبدع خلالها نجوم الصف الأول من الساحة الفنية المغربية. وألهب كل من أمينوكس، عبد العزيز الستاتي، سعيدة شرف، مسلم، موتشي، نجاة عتابو ودوزي حماس الجماهير التي تقاطرت بأعداد قياسية إلى ساحات العروض، حيث بلغ عدد الحضور أكثر من 300 ألف متفرج، في أجواء احتفالية شعبية عائلية متميزة. وتندرج هذه السهرات في إطار فعاليات مهرجان شواطئ اتصالات المغرب، الذي انطلق مطلع الصيف، ويستمر إلى غاية 21 غشت الجاري، متنقلاً بين أبرز المدن الساحلية، في جولة صيفية غنية بالمواهب والمفاجآت الفنية. وأكدت اللجنة المنظمة أن برنامج الحفلات سيُعلن عنه يومياً عبر المنصات الرسمية للمهرجان، بهدف تمكين الجمهور من مواكبة مستجدات الجولة الفنية والاطلاع على مواعيد النجوم المفضلين. وينتظر أن تلتحق مدن مرتيل، السعيدية والناظور بركب المهرجان ابتداءً من 15 غشت، لتستمر أجواء الاحتفال بالموسيقى والفرح حتى أواخر فصل الصيف، في مبادرة ثقافية وفنية تعزز إشعاع الفن المغربي وتدعم السياحة الساحلية.', 'size': 2}, {'id': '343', 'title': 'احتفالات عيد العرش.. عتابو والستاتي ومسلم ودوزي يشعلون منصات مهرجان الشواطئ', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a7%d8%ad%d8%aa%d9%81%d8%a7%d9%84%d8%a7%d8%aa-%d8%b9%d9%8a%d8%af-%d8%a7%d9%84%d8%b9%d8%b1%d8%b4-%d8%b9%d8%aa%d8%a7%d8%a8%d9%88-%d9%88%d8%a7%d9%84%d8%b3%d8%aa%d8%a7%d8%aa%d9%8a-%d9%88%d9%85%d8%b3/', 'summary': 'احتفالات عيد العرش.. عتابو والستاتي ومسلم ودوزي يشعلون منصات مهرجان الشواطئ. بمناسبة احتفالات عيد العرش، اهتزت مدن المضيق، الحسيمة وطنجة يومي 30 و31 يوليوز على إيقاع سهرات استثنائية. وأحيا هذه السهرات نخبة من ألمع النجوم، من بينهم أمينوكس، سعيدة شرف، عبد العزيز الستاتي، موتشي، مسلم، نجاة اعتابو ودوزي، الذين أشعلوا حماس الجماهير، محققين رقما قياسيا في الحضور بلغ 300.000 متفرج، وسط أجواء احتفالية، شعبية وعائلية بامتياز.', 'size': 2}], 'main_title': 'مهرجان شواطئ اتصالات المغرب يُبهر جمهور طنجة والحسيمة والمضيق(صور)'}, {'community_id': '9', 'articles': [{'id': '379', 'title': 'أديسينا: المغرب بقيادة الملك محمد السادس يرسخ مكانته كقوة صاعدة في إفريقيا', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a3%d8%af%d9%8a%d8%b3%d9%8a%d9%86%d8%a7-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d8%a8%d9%82%d9%8a%d8%a7%d8%af%d8%a9-%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%85%d8%ad%d9%85%d8%af-%d8%a7%d9%84%d8%b3%d8%a7/', 'summary': 'أديسينا: المغرب بقيادة الملك محمد السادس يرسخ مكانته كقوة صاعدة في إفريقيا. أكد رئيس البنك الإفريقي للتنمية، أكينوومي أديسينا، أن المملكة المغربية، بقيادة الملك محمد السادس، تبرز اليوم كـ"قوة صاعدة" في إفريقيا، بفضل إنجازاتها المتميزة وخياراتها الحديثة. وأوضح أديسينا، في تصريح لوكالة المغرب العربي للأنباء، أن المغرب، المنخرط في دينامية تحول قوية، كما جاء في الخطاب الذي وجهه الملك محمد السادس بمناسبة عيد العرش، يثير الإعجاب بالنظر  أديسينا: المغرب بقيادة الملك محمد السادس يرسخ مكانته كقوة صاعدة في إفريقيا     .', 'size': 3}, {'id': '396', 'title': 'رئيس البنك الإفريقي: المغرب بقيادة الملك يرسخ مكانته كقوة صاعدة في إفريقيا', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/471374.html', 'summary': 'رئيس البنك الإفريقي: المغرب بقيادة الملك يرسخ مكانته كقوة صاعدة في إفريقيا. أكد رئيس البنك الإفريقي للتنمية، أكينوومي أديسينا، أن المملكة المغربية، بقيادة الملك محمد السادس، تبرز اليوم كـ”قوة صاعدة” في إفريقيا، بفضل إنجازاتها المتميزة وخياراتها الحديثة. وأوضح أديسينا، في تصريح صحفي أن المغرب، المنخرط في دينامية تحول قوية، كما جاء في الخطاب الذي وجهه الملك محمد السادس بمناسبة عيد العرش، يثير الإعجاب بالنظر إلى اتساق وتماسك …', 'size': 3}, {'id': '431', 'title': 'رئيس البنك الإفريقي للتنمية: المغرب بقيادة الملك محمد السادس يرسخ مكانته كقوة صاعدة في إفريقيا', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%b1%d8%a6%d9%8a%d8%b3-%d8%a7%d9%84%d8%a8%d9%86%d9%83-%d8%a7%d9%84%d8%a5%d9%81%d8%b1%d9%8a%d9%82%d9%8a-%d9%84%d9%84%d8%aa%d9%86%d9%85%d9%8a%d8%a9-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d8%a8%d9%82/', 'summary': 'رئيس البنك الإفريقي للتنمية: المغرب بقيادة الملك محمد السادس يرسخ مكانته كقوة صاعدة في إفريقيا. أكد رئيس البنك الإفريقي للتنمية، أكينوومي أديسينا، أن المملكة المغربية، بقيادة الملك محمد السادس، تبرز اليوم كـ”قوة صاعدة” في إفريقيا، بفضل إنجازاتها المتميزة وخياراتها الحديثة. وأوضح أديسينا، في تصريح لوكالة المغرب العربي للأنباء، أن المغرب، المنخرط في دينامية تحول قوية، كما جاء في الخطاب السامي الذي وجهه الملك محمد السادس بمناسبة عيد العرش …  رئيس البنك الإفريقي للتنمية: المغرب بقيادة الملك محمد السادس يرسخ مكانته كقوة صاعدة في إفريقيا     .', 'size': 3}], 'main_title': 'أديسينا: المغرب بقيادة الملك محمد السادس يرسخ مكانته كقوة صاعدة في إفريقيا'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    