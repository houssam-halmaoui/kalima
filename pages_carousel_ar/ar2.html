<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 13/06/2025 - 18h26</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '5', 'articles': [{'id': '4', 'title': 'مكتب الكهرماء يوضح بشأن ماء زاكورة', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d8%a7%d9%84%d9%83%d9%87%d8%b1%d9%85%d8%a7%d8%a1-%d9%8a%d9%88%d8%b6%d8%ad-%d8%a8%d8%b4%d8%a3%d9%86-%d9%85%d8%a7%d8%a1-%d8%b2%d8%a7%d9%83%d9%88%d8%b1%d8%a9-1575429.html', 'summary': 'مكتب الكهرماء يوضح بشأن ماء زاكورة. تفاعلا مع الاستنكار الذي عبّر عنه سكان دواوير بزاكورة بسبب انقطاع الماء، أصدرت المديرية الجهوية لدرعة تافيلالت للمكتب الوطني للكهرباء والماء الصالح للشرب-قطاع الماء بلاغا توضيحيا بخصوص وضعية التزويد بالماء الصالح للشرب في إقليم زاكورة. وأوضح البلاغ سالف الذكر أن “المكتب الوطني للكهرباء والماء الصالح للشرب يتدخل في تسيير خدمة التزويد بالماء الصالح للشرب على  مكتب الكهرماء يوضح بشأن ماء زاكورة     - هسبريس جريدة إلكترونية مغربية .', 'size': 2}, {'id': '213', 'title': '“ماء زاكورة”.. مكتب الماء يخرج ببيان', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d9%85%d8%a7%d8%a1-%d8%b2%d8%a7%d9%83%d9%88%d8%b1%d8%a9-%d9%85%d9%83%d8%aa%d8%a8-%d8%a7%d9%84%d9%85%d8%a7%d8%a1-%d9%8a%d8%ae%d8%b1%d8%ac-%d8%a8%d8%a8%d9%8a%d8%a7%d9%86/', 'summary': '“ماء زاكورة”.. مكتب الماء يخرج ببيان.  – متابعات في أعقاب استياء سكان دواوير زاكورة بسبب انقطاع المياه، أصدرت المديرية الجهوية لدرعة تافيلالت التابعة للمكتب الوطني للكهرباء والماء الصالح للشرب – قطاع الماء بياناً توضيحياً...  “ماء زاكورة”.. مكتب الماء يخرج ببيان     .', 'size': 2}], 'main_title': 'مكتب الكهرماء يوضح بشأن ماء زاكورة'}, {'community_id': '9', 'articles': [{'id': '6', 'title': 'إيران: الهجوم الإٍسرائيلي "إعلان حرب"', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d8%a5%d9%8a%d8%b1%d8%a7%d9%86-%d8%a7%d9%84%d9%87%d8%ac%d9%88%d9%85-%d8%a7%d9%84%d8%a5%d9%8d%d8%b3%d8%b1%d8%a7%d8%a6%d9%8a%d9%84%d9%8a-%d8%a5%d8%b9%d9%84%d8%a7%d9%86-%d8%ad%d8%b1%d8%a8-1575468.html', 'summary': 'إيران: الهجوم الإٍسرائيلي "إعلان حرب". عيّنَ آية الله علي خامنئي، المرشد الأعلى للجمهورية الإيرانية، قائدا جديدا لكل من هيئة الأركان وللحرس الثوري خلفا لمسؤولي الجهازين اللذين قتلا في الضربات الإسرائيلية على إيران الجمعة. وفي مرسومين منفصلين، عيّن خامنئي عبد الرحيم موسوي مكان محمد باقري قائدا للهيئة المشتركة للقوات المسلحة، ومحمد باكبور ليحل مكان حسين سلامي قائدا للحرس الثوري الإيراني. وقالت  إيران: الهجوم الإٍسرائيلي "إعلان حرب"     - هسبريس جريدة إلكترونية مغربية .', 'size': 2}, {'id': '185', 'title': 'بعد مقتل باقري وسلامي.. إيران تعين قائدين جديدين للجيش والحرس الثوري', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a8%d8%b9%d8%af-%d9%85%d9%82%d8%aa%d9%84-%d8%a8%d8%a7%d9%82%d8%b1%d9%8a-%d9%88%d8%b3%d9%84%d8%a7%d9%85%d9%8a-%d8%a5%d9%8a%d8%b1%d8%a7%d9%86-%d8%aa%d8%b9%d9%8a%d9%86-%d9%82%d8%a7%d8%a6%d8%af%d9%8a/', 'summary': 'بعد مقتل باقري وسلامي.. إيران تعين قائدين جديدين للجيش والحرس الثوري. عين المرشد الأعلى للجمهورية الإيرانية آية الله علي خامنئي قائدا جديدا لكل من هيئة الأركان وللحرس الثوري خلفا لمسوؤلي الجهازين اللذين قتلا في الضربات الإسرائيلية على إيران الجمعة. وفي مرسومين منفصلين عين خامنئي عبد الرحيم موسوي مكان محمد باقري قائدا للهيئة المشتركة للقوات المسلحة ومحمد باكبور ليحل مكان حسين سلامي قائدا للحرس الثوري الإيراني.  بعد مقتل باقري وسلامي.. إيران تعين قائدين جديدين للجيش والحرس الثوري     .', 'size': 2}, {'id': '235', 'title': 'إيران تعين قائدين جديدين للجيش والحرس الثوري بعد مقتل باقري وسلامي', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/222714/', 'summary': 'إيران تعين قائدين جديدين للجيش والحرس الثوري بعد مقتل باقري وسلامي. وكالات عين المرشد الأعلى للجمهورية الإيرانية آية الله علي خامنئي قائدا جديدا لكل من هيئة الأركان وللحرس الثوري خلفا لمسوؤلي الجهازين اللذين قتلا في الضربات الإسرائيلية على إيران الجمعة. وفي مرسومين منفصلين عين خامنئي عبد الرحيم موسوي مكان محمد باقري قائدا للهيئة المشتركة للقوات المسلحة ومحمد باكبور ليحل مكان حسين سلامي قائدا للحرس الثوري', 'size': 3}], 'main_title': 'إيران تعين قائدين جديدين للجيش والحرس الثوري بعد مقتل باقري وسلامي'}, {'community_id': '6', 'articles': [{'id': '40', 'title': 'الدار البيضاء.. فيديو سرقة بالشارع يقود لتوقيف المشتبه فيه', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-631547.html', 'summary': 'الدار البيضاء.. فيديو سرقة بالشارع يقود لتوقيف المشتبه فيه. هبة بريس تفاعلت ولاية أمن الدار البيضاء ، مع شريط فيديو منشور على صفحات مواقع التواصل الاجتماعي، يظهر فيه سائق سيارة يعرض شخصا للسرقة بالشارع العام بالمدينة. وكشفت الولاية في بلاغ أمني أن الأبحاث والتحريات المنجزة على ضوء هذا الشريط، أوضحت أن الأمر يتعلق بقضية زجرية تعالجها مصالح منطقة أمن ابن مسيك بمدينة الدار البيضاء، حيث أظهرت إجراءات البحث أن الضحية لم يقدم أية شكاية أو بلاغ في شأن ارتكاب هذه الأفعال الإجرامية، قبل أن تمكن التحريات المتواصلة من تحديد هوية المشتبه فيه وتوقيفه مساء اليوم الخميس. ويضيف المصدر أنه تم إخضاع المشتبه فيه للبحث القضائي الذي تشرف عليه النيابة العامة المختصة، للكشف عن جميع ظروف وملابسات وخلفيات هذه القضية، وكذا تحديد كافة الأفعال الإجرامية المنسوبة للمعني بالأمر.', 'size': 2}, {'id': '138', 'title': 'سرقة موثّقة بالفيديو.. تفاعل أمني سريع يقود إلى توقيف المشتبه فيه في كازا!', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%b3%d8%b1%d9%82%d8%a9-%d9%85%d9%88%d8%ab%d9%91%d9%82%d8%a9-%d8%a8%d8%a7%d9%84%d9%81%d9%8a%d8%af%d9%8a%d9%88-%d8%aa%d9%81%d8%a7%d8%b9%d9%84-%d8%a3%d9%85%d9%86%d9%8a-%d8%b3%d8%b1%d9%8a%d8%b9-%d9%8a/', 'summary': 'سرقة موثّقة بالفيديو.. تفاعل أمني سريع يقود إلى توقيف المشتبه فيه في كازا!. تفاعلت ولاية أمن الدار البيضاء بجدية كبيرة مع شريط فيديو منشور على مواقع التواصل الاجتماعي، يُظهر سائق سيارة وهو يُعرض شخصًا للسرقة بالشارع العام وسط المدينة. وأوضحت الأبحاث والتحريات الأولية، المنجزة على ضوء هذا الشريط، أن الأمر يتعلق بقضية زجرية تباشرها مصالح منطقة أمن ابن مسيك بالدار البيضاء، حيث تبيّن أن الضحية لم يتقدم بأي', 'size': 2}], 'main_title': 'الدار البيضاء.. فيديو سرقة بالشارع يقود لتوقيف المشتبه فيه'}, {'community_id': '3', 'articles': [{'id': '66', 'title': 'كيف هي توقعات أحوال الطقس لليوم الجمعة؟!', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/202019', 'summary': 'كيف هي توقعات أحوال الطقس لليوم الجمعة؟!.  تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الجمعة، أن تتميز الحالة الجوية عامة، بطقس حار نسبيا بكل من جنوب المنطقة الشرقية، والجنوب الشرقي للبلاد، وجنوب وشرق الأقاليم الصحراوية. كما يرتقب تشكل سحب غير مستقرة مع نزول قطرات مطرية متفرقة وبروز رعد محلي بالمنطقة الشرقية، فضلا عن تمركز سحب منخفضة كثيفة خلال الصباح والليل شمال', 'size': 3}, {'id': '237', 'title': 'طقس الجمعة.. استمرار حرارة الجو ببعض المناطق في المملكة', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/222705/', 'summary': 'طقس الجمعة.. استمرار حرارة الجو ببعض المناطق في المملكة. كواليس اليوم تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الجمعة، أن تتميز الحالة الجوية عامة، بطقس حار نسبيا بكل من جنوب المنطقة الشرقية، والجنوب الشرقي للبلاد، وجنوب وشرق الأقاليم الصحراوية. كما يرتقب تشكل سحب غير مستقرة مع نزول قطرات مطرية متفرقة وبروز رعد محلي بالمنطقة الشرقية، فضلا عن تمركز سحب منخفضة كثيفة خلال الصباح', 'size': 2}, {'id': '260', 'title': 'توقعات أحوال الطقس في العديد من مناطق المملكة اليوم الجمعة', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%aa%d9%88%d9%82%d8%b9%d8%a7%d8%aa-%d8%a3%d8%ad%d9%88%d8%a7%d9%84-%d8%a7%d9%84%d8%b7%d9%82%d8%b3-%d9%81%d9%8a-%d8%a7%d9%84%d8%b9%d8%af%d9%8a%d8%af-%d9%85%d9%86-%d9%85%d9%86%d8%a7%d8%b7%d9%82-85/', 'summary': 'توقعات أحوال الطقس في العديد من مناطق المملكة اليوم الجمعة. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليومه الجمعة، أن تتميز الحالة الجوية عامة، بطقس حار نسبيا بكل من جنوب المنطقة الشرقية، والجنوب الشرقي للبلاد، وجنوب وشرق الأقاليم الصحراوية. كما يرتقب تشكل سحب غير مستقرة مع نزول قطرات مطرية متفرقة وبروز رعد محلي بالمنطقة الشرقية، فضلا عن تمركز سحب منخفضة كثيفة خلال الصباح والليل …  توقعات أحوال الطقس في العديد من مناطق المملكة اليوم الجمعة     .', 'size': 2}], 'main_title': 'كيف هي توقعات أحوال الطقس لليوم الجمعة؟!'}, {'community_id': '4', 'articles': [{'id': '69', 'title': 'ولاية أمن الدار البيضاء تتفاعل مع فيديو يظهر فيه سائق سيارة يعرض شخصا للسرقة بالشارع العام', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/202007', 'summary': 'ولاية أمن الدار البيضاء تتفاعل مع فيديو يظهر فيه سائق سيارة يعرض شخصا للسرقة بالشارع العام. الأحداث من الرباط تفاعلت ولاية أمن الدار البيضاء، بجدية كبيرة،مع شريط فيديو منشور على صفحات مواقع التواصل الاجتماعي، يظهر فيه سائق سيارة يعرض شخصا للسرقة بالشارع العام بالمدينة. وقد أوضحت الأبحاث والتحريات المنجزة على ضوء هذا الشريط، أن الأمر يتعلق بقضية زجرية تعالجها مصالح منطقة أمن ابن مسيك بمدينة الدار البيضاء، حيث أظهرت إجراءات البحث', 'size': 2}, {'id': '195', 'title': 'واقعة نالت تعاطف المغاربة.. اعتقال سارق مسن بالدارالبيضاء', 'source': 'rue20.com', 'link': 'https://rue20.com/912570.html', 'summary': 'واقعة نالت تعاطف المغاربة.. اعتقال سارق مسن بالدارالبيضاء.  | علي التومي تفاعلت ولاية أمن الدار البيضاء بسرعة وجدية مع شريط فيديو تم تداوله على مواقع التواصل الاجتماعي، يوثق لعملية سرقة نفذها سائق سيارة في الشارع العام. وقد كشفت التحريات أن الواقعة تعالجها مصالح منطقة أمن ابن مسيك، حيث تبيّن أن الضحية لم يتقدم بأي شكاية رسمية. ورغم ذلك، أسفرت الأبحاث المتواصلة الخبر واقعة نالت تعاطف المغاربة.. اعتقال سارق مسن بالدارالبيضاء  .', 'size': 2}], 'main_title': 'ولاية أمن الدار البيضاء تتفاعل مع فيديو يظهر فيه سائق سيارة يعرض شخصا للسرقة بالشارع العام'}, {'community_id': '1', 'articles': [{'id': '137', 'title': 'الأمم المتحدة.. غلا بهية تبرز بنيويورك الدعم الدولي المكثف للمخطط المغربي للحكم الذاتي', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a7%d9%84%d8%a3%d9%85%d9%85-%d8%a7%d9%84%d9%85%d8%aa%d8%ad%d8%af%d8%a9-%d8%ba%d9%84%d8%a7-%d8%a8%d9%87%d9%8a%d8%a9-%d8%aa%d8%a8%d8%b1%d8%b2-%d8%a8%d9%86%d9%8a%d9%88%d9%8a%d9%88%d8%b1%d9%83-%d8%a7/', 'summary': 'الأمم المتحدة.. غلا بهية تبرز بنيويورك الدعم الدولي المكثف للمخطط المغربي للحكم الذاتي. استعرضت المنتخبة عن جهة الداخلة-وادي الذهب، غلا بهية، بنيويورك، دينامية الدعم الدولي المكثف للمخطط المغربي للحكم الذاتي، الحل الوحيد والأوحد من أجل الطي النهائي للنزاع حول الصحراء. وفي كلمة خلال الاجتماع السنوي للجنة الـ24 (9-20 يونيو)، أبرزت بهية أن أزيد من 118 بلدا تعتبر أن هذه المبادرة التي قدمها المغرب في 2007 تعد الأساس الوحيد', 'size': 4}, {'id': '395', 'title': 'الأمم المتحدة.. وفد مغربي يبرز بنيويورك الدعم الدولي المكثف لمخطط الحكم الذاتي', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/466390.html', 'summary': 'الأمم المتحدة.. وفد مغربي يبرز بنيويورك الدعم الدولي المكثف لمخطط الحكم الذاتي. استعرضت المنتخبة عن جهة الداخلة-وادي الذهب، غلا بهية، بنيويورك، دينامية الدعم الدولي المكثف للمخطط المغربي للحكم الذاتي، الحل الوحيد والأوحد من أجل الطي النهائي للنزاع حول الصحراء. وفي كلمة خلال الاجتماع السنوي للجنة الـ24 (9-20 يونيو)، أبرزت السيدة بهية أن أزيد من 118 بلدا تعتبر أن هذه المبادرة التي قدمها المغرب في 2007 تعد الأساس …', 'size': 3}, {'id': '409', 'title': 'الأمم المتحدة.. المغرب يبرز بنيويورك الدعم الدولي المكثف للمخطط المغربي للحكم الذاتي', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d8%a7%d9%84%d8%a3%d9%85%d9%85-%d8%a7%d9%84%d9%85%d8%aa%d8%ad%d8%af%d8%a9-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d9%8a%d8%a8%d8%b1%d8%b2-%d8%a8%d9%86%d9%8a%d9%88%d9%8a%d9%88%d8%b1%d9%83-%d8%a7%d9%84/', 'summary': 'الأمم المتحدة.. المغرب يبرز بنيويورك الدعم الدولي المكثف للمخطط المغربي للحكم الذاتي.  – و م ع استعرضت المنتخبة عن جهة الداخلة-وادي الذهب، غلا بهية، بنيويورك، دينامية الدعم الدولي المكثف للمخطط المغربي للحكم الذاتي، الحل الوحيد والأوحد من أجل الطي النهائي...  الأمم المتحدة.. المغرب يبرز بنيويورك الدعم الدولي المكثف للمخطط المغربي للحكم الذاتي     .', 'size': 3}, {'id': '422', 'title': 'الأمم المتحدة.. غلا بهية تبرز الدعم الدولي المكثف للمخطط المغربي للحكم الذاتي', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/222743/', 'summary': 'الأمم المتحدة.. غلا بهية تبرز الدعم الدولي المكثف للمخطط المغربي للحكم الذاتي. و م ع استعرضت المنتخبة عن جهة الداخلة-وادي الذهب، غلا بهية، بنيويورك، دينامية الدعم الدولي المكثف للمخطط المغربي للحكم الذاتي، الحل الوحيد والأوحد من أجل الطي النهائي للنزاع حول الصحراء. وفي كلمة خلال الاجتماع السنوي للجنة الـ24 (9-20 يونيو)، أبرزت بهية أن أزيد من 118 بلدا تعتبر أن هذه المبادرة التي قدمها المغرب في', 'size': 4}], 'main_title': 'الأمم المتحدة.. غلا بهية تبرز بنيويورك الدعم الدولي المكثف للمخطط المغربي للحكم الذاتي'}, {'community_id': '7', 'articles': [{'id': '151', 'title': 'الحموشي يرقي شرطي أصيب أثناء مهامه بالبيضاء', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/315385/', 'summary': 'الحموشي يرقي شرطي أصيب أثناء مهامه بالبيضاء. قرر المدير العام للأمن الوطني ولمراقبة التراب الوطني عبد اللطيف حموشي، يومه الجمعة 13 يونيو الجاري، منح ترقية استثنائية في الرتبة لموظف شرطة يعمل بالفرقة المتنقلة للدراجيين بمنطقة أمن الفداء مرس السلطان بالدار البيضاء، والذي كان ضحية حادثة سير عمدية بجروح بليغة أثناء مزاولته لمهامه النظامية. وتنفيذا لهذا القرار، تمت ترقية ضابط الأمن المصاب', 'size': 3}, {'id': '232', 'title': 'حموشي يمنح ترقية استثنائية لشرطي كان ضحية حادثة سير عمدية', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/222724/', 'summary': 'حموشي يمنح ترقية استثنائية لشرطي كان ضحية حادثة سير عمدية. كمال عسو أصدر المدير العام للأمن الوطني ولمراقبة التراب الوطني، عبد اللطيف حموشي، اليوم الجمعة، قرارا يقضي بمنح ترقية استثنائية في الرتبة لموظف شرطة يعمل بالفرقة المتنقلة للدراجين بمنطقة أمن الفداء مرس السلطان بالدار البيضاء، والذي كان ضحية حادثة سير عمدية بجروح بليغة أثناء مزاولته لمهامه النظامية. وتنفيذا لهذا القرار، تمت ترقية ضابط الأمن', 'size': 3}, {'id': '436', 'title': 'حموشي يمنح ترقية استثنائية لرجل أمن تعرض لحادثة سير عمدية أثناء مزاولته لمهامه بالبيضاء', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%ad%d9%85%d9%88%d8%b4%d9%8a-%d9%8a%d9%85%d9%86%d8%ad-%d8%aa%d8%b1%d9%82%d9%8a%d8%a9-%d8%a7%d8%b3%d8%aa%d8%ab%d9%86%d8%a7%d8%a6%d9%8a%d8%a9-%d9%84%d8%b1%d8%ac%d9%84-%d8%a3%d9%85%d9%86-%d8%aa%d8%b9/', 'summary': 'حموشي يمنح ترقية استثنائية لرجل أمن تعرض لحادثة سير عمدية أثناء مزاولته لمهامه بالبيضاء. قرر المدير العام للأمن الوطني ولمراقبة التراب الوطني عبد اللطيف حموشي، يومه الجمعة 13 يونيو الجاري، منح ترقية استثنائية في الرتبة لموظف شرطة يعمل بالفرقة المتنقلة للدراجيين بمنطقة أمن الفداء مرس السلطان بالدار البيضاء، والذي كان ضحية حادثة سير عمدية بجروح بليغة أثناء مزاولته لمهامه النظامية. وكشفت مصادر أمنية، أنه وتنفيذا لهذا القرار، …  حموشي يمنح ترقية استثنائية لرجل أمن تعرض لحادثة سير عمدية أثناء مزاولته لمهامه بالبيضاء     .', 'size': 3}], 'main_title': 'الحموشي يرقي شرطي أصيب أثناء مهامه بالبيضاء'}, {'community_id': '8', 'articles': [{'id': '154', 'title': 'بركة: سياسة السدود رافعة استراتيجية لتعزيز المرونة المائية', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/315377/', 'summary': 'بركة: سياسة السدود رافعة استراتيجية لتعزيز المرونة المائية. أكد وزير التجهيز والماء نزار بركة، أمس الخميس بالدار البيضاء، أن سياسة السدود، التي يتم تنفيذها تحت القيادة الرشيدة للملك محمد السادس، تشكل رافعة أساسية في تعزيز المرونة المائية للمغرب. وأوضح الوزير، خلال ندوة نقاش نظمتها “ميديا 24” تحت عنوان “تحديات الماء: أين وصل المغرب في 2025 ؟”، أن هذه الرافعة الاستراتيجية تقوم على أربعة', 'size': 2}, {'id': '236', 'title': 'بركة: سياسة السدود التي يتم تنفيذها تحت قيادة جلالة الملك تعزز المرونة المائية للمغرب', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/222708/', 'summary': 'بركة: سياسة السدود التي يتم تنفيذها تحت قيادة جلالة الملك تعزز المرونة المائية للمغرب. كواليس اليوم أكد وزير التجهيز والماء نزار بركة، أن سياسة السدود، التي يتم تنفيذها تحت القيادة الرشيدة لصاحب الجلالة الملك محمد السادس، تشكل رافعة أساسية في تعزيز المرونة المائية للمغرب. وأوضح الوزير، خلال ندوة احتضنتها أمس الخميس مدينة الدار البيضاء تحت عنوان “تحديات الماء: أين وصل المغرب في 2025 ؟ ، أن هذه الرافعة', 'size': 2}], 'main_title': 'بركة: سياسة السدود رافعة استراتيجية لتعزيز المرونة المائية'}, {'community_id': '2', 'articles': [{'id': '328', 'title': 'الرباط:  اجتماع حول عملية إعادة تكوين القطيع الوطني للماشية', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/202029', 'summary': 'الرباط: اجتماع حول عملية إعادة تكوين القطيع الوطني للماشية.  تنفيذا للتوجيهات السامية لصاحب الجلالة الملك محمد السادس، نصره الله، الداعية إلى إعادة تكوين القطيع الوطني للماشية بشكل مستدام، انعقد اليوم الجمعة بوزارة الداخلية، اجتماع بحضور وزير الداخلية ووزير الفلاحة والصيد البحري والتنمية القروية والمياه و الغابات والوزير المنتدب لدى وزيرة الاقتصاد والمالية، المكلف بالميزانية وعدد من المسؤولين المركزيين للقطاعات الوزارية المعنية. كما', 'size': 5}, {'id': '333', 'title': 'بتعليمات ملكية.. اجتماع رفيع المستوى بمقر وزارة الداخلية شارك فيه 3 وزراء وجميع الولاة والعمال وهذا هو هدفه الأساسي', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/economy/407497.html', 'summary': 'بتعليمات ملكية.. اجتماع رفيع المستوى بمقر وزارة الداخلية شارك فيه 3 وزراء وجميع الولاة والعمال وهذا هو هدفه الأساسي. تنفيذا للتوجيهات السامية لصاحب الجلالة الملك محمد السادس، نصره الله، الداعية إلى إعادة تكوين القطيع الوطني للماشية بشكل مستدام، انعقد اليوم الجمعة بوزارة الداخلية، اجتماع', 'size': 3}, {'id': '377', 'title': 'إعادة تكوين القطيع الوطني.. اعتماد لجنة قيادة مركزية برئاسة وزارة الداخلية', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a5%d8%b9%d8%a7%d8%af%d8%a9-%d8%aa%d9%83%d9%88%d9%8a%d9%86-%d8%a7%d9%84%d9%82%d8%b7%d9%8a%d8%b9-%d8%a7%d9%84%d9%88%d8%b7%d9%86%d9%8a-%d8%a7%d8%b9%d8%aa%d9%85%d8%a7%d8%af-%d9%84%d8%ac%d9%86%d8%a9/', 'summary': 'إعادة تكوين القطيع الوطني.. اعتماد لجنة قيادة مركزية برئاسة وزارة الداخلية. تنفيذا لتوجيهات الملك محمد السادس، الداعية إلى إعادة تكوين القطيع الوطني للماشية بشكل مستدام، انعقد اليوم الجمعة بوزارة الداخلية، اجتماع بحضور وزير الداخلية ووزير الفلاحة والصيد البحري والتنمية القروية والمياه والغابات والوزير المنتدب لدى وزيرة الاقتصاد والمالية، المكلف بالميزانية وعدد من المسؤولين المركزيين للقطاعات الوزارية المعنية. كما شارك في هذا الاجتماع، عن بعد وعبر تقنية  إعادة تكوين القطيع الوطني.. اعتماد لجنة قيادة مركزية برئاسة وزارة الداخلية     .', 'size': 4}, {'id': '391', 'title': 'اجتماع حكومي رفيع يجمع ثلاثة وزراء لتنزيل التعليمات الملكية بإعادة تكوين القطيع الوطني', 'source': 'rue20.com', 'link': 'https://rue20.com/912642.html', 'summary': 'اجتماع حكومي رفيع يجمع ثلاثة وزراء لتنزيل التعليمات الملكية بإعادة تكوين القطيع الوطني.  ا الرباط تنفيذا للتوجيهات السامية لصاحب الجلالة الملك محمد السادس، الداعية إلى إعادة تكوين القطيع الوطني للماشية بشكل مستدام، انعقد يوم الجمعة 13 يونيو 2025 بوزارة الداخلية، اجتماع بحضور وزير الداخلية ووزير الفلاحة والصيد البحري والتنمية القروية والمياه والغابات والوزير المنتدب لدى وزيرة الاقتصاد والمالية، المكلف بالميزانية وعدد من المسؤولين المركزيين للقطاعات الوزارية الخبر اجتماع حكومي رفيع يجمع ثلاثة وزراء لتنزيل التعليمات الملكية بإعادة تكوين القطيع الوطني  .', 'size': 4}, {'id': '426', 'title': 'تنفيذا للتوجيهات الملكية السامية: وزارة الداخلية تعقد اجتماعا رفيعا لإعادة تكوين القطيع الوطني للماشية بشكل مستدام', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/222729/', 'summary': 'تنفيذا للتوجيهات الملكية السامية: وزارة الداخلية تعقد اجتماعا رفيعا لإعادة تكوين القطيع الوطني للماشية بشكل مستدام. تنفيذا للتوجيهات السامية لصاحب الجلالة الملك محمد السادس، نصره الله، الداعية إلى إعادة تكوين القطيع الوطني للماشية بشكل مستدام، انعقد يوم الجمعة 13 يونيو 2025 بوزارة الداخلية، اجتماع بحضور السادة وزير الداخلية ووزير الفلاحة والصيد البحري والتنمية القروية والمياه والغابات والوزير المنتدب لدى وزيرة الاقتصاد والمالية، المكلف بالميزانية وعدد من المسؤولين المركزيين للقطاعات الوزارية المعنية.', 'size': 5}], 'main_title': 'الرباط:  اجتماع حول عملية إعادة تكوين القطيع الوطني للماشية'}, {'community_id': '0', 'articles': [{'id': '345', 'title': 'الميركاتو الصيفي.. الزلزولي غيمشي للطاليان؟', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a7%d9%84%d9%85%d9%8a%d8%b1%d9%83%d8%a7%d8%aa%d9%88-%d8%a7%d9%84%d8%b5%d9%8a%d9%81%d9%8a-%d8%a7%d9%84%d8%b2%d9%84%d8%b2%d9%88%d9%84%d9%8a-%d8%ba%d9%8a%d9%85%d8%b4%d9%8a-%d9%84%d9%84%d8%b7%d8%a7/', 'summary': 'الميركاتو الصيفي.. الزلزولي غيمشي للطاليان؟. اقترب الدولي المغربي عبد الصمد الزلزولي، لاعب نادي ريال بيتيس، من مغادرة الفريق الإسباني خلال فترة الانتقالات الصيفية الجارية. ووفقا لصحيفة “سبورت” الإسبانية، فإن “الأسد المغربي” بات قريبا من الانتقال إلى نادي كومو الإيطالي بموجب عقد يمتد حتى عام 2030. وأشارت الصحيفة إلى أن المفاوضات لا تزال جارية، في انتظار التوصل إلى اتفاق نهائي يقضي', 'size': 2}, {'id': '361', 'title': 'الميركاتو الصيفي.. كومو الإيطالي يقترب من حسم صفقة الزلزولي', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1077669.html', 'summary': 'الميركاتو الصيفي.. كومو الإيطالي يقترب من حسم صفقة الزلزولي. بات الدولي المغربي عبد الصمد الزلزولي، لاعب نادي ريال بيتيس الإسباني، قريبا من الانضمام لفريق كومو الإيطالي، وذلك خلال فترة الانتقالات الصيفية الحالية. ووفقا لصحيفة “سبورت الإسبانية”، فإن مهاجم المنتخب الوطني يتجه للانضمام إلى فريق كومو، في صفقة قد تبلغ 18 مليون يورو بعقد يمتد حتى نهاية موسم 2029/2030، إذ لم يتبقّ سوى الاتفاق الرسمي ظهرت المقالة الميركاتو الصيفي.. كومو الإيطالي يقترب من حسم صفقة الزلزولي  .', 'size': 2}], 'main_title': 'الميركاتو الصيفي.. الزلزولي غيمشي للطاليان؟'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    