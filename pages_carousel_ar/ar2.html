<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 28/07/2025 - 06h32</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '3', 'title': 'المنتخب المغربي المحلي يطير إلى كينيا', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d8%a7%d9%84%d9%85%d9%86%d8%aa%d8%ae%d8%a8-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8%d9%8a-%d8%a7%d9%84%d9%85%d8%ad%d9%84%d9%8a-%d9%8a%d8%b7%d9%8a%d8%b1-%d8%a5%d9%84%d9%89-%d9%83%d9%8a%d9%86%d9%8a%d8%a7-1599994.html', 'summary': 'المنتخب المغربي المحلي يطير إلى كينيا. غادرت بعثة المنتخب الوطني المغربي للاعبين المحليين، اليوم الأحد مطار الرباط-سلا في اتجاه العاصمة الكينية نيروبي، للمشاركة في نهائيات كأس إفريقيا للاعبين المحليين (شان 2024)، التي ستُقام أطوارها بكل من كينيا وأوغندا وتنزانيا. ووضعت قرعة البطولة “أسود الأطلس” في المجموعة الأولى، إلى جانب منتخب البلد المضيف كينيا، إضافة إلى منتخبات زامبيا، أنغولا، والكونغو الديمقراطية، في  المنتخب المغربي المحلي يطير إلى كينيا     - هسبريس جريدة إلكترونية مغربية .', 'size': 2}, {'id': '172', 'title': 'للمشاركة في كأس أمم إفريقيا للمحليين.. المنتخب الوطني يشد الرحال صوب كينيا', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d9%84%d9%84%d9%85%d8%b4%d8%a7%d8%b1%d9%83%d8%a9-%d9%81%d9%8a-%d9%83%d8%a3%d8%b3-%d8%a3%d9%85%d9%85-%d8%a5%d9%81%d8%b1%d9%8a%d9%82%d9%8a%d8%a7-%d9%84%d9%84%d9%85%d8%ad%d9%84%d9%8a%d9%8a%d9%86-%d8%a7/', 'summary': 'للمشاركة في كأس أمم إفريقيا للمحليين.. المنتخب الوطني يشد الرحال صوب كينيا. غادرت بعثة المنتخب الوطني للاعبين المحليين، اليوم، مطار الرباط-سلا في اتجاه العاصمة الكينية نيروبي، من أجل المشاركة في بطولة إفريقيا للاعبين المحليين، التي ستجرى أطوارها في كل من كينيا وأوغندا وتنزانيا. وكانت قرعة البطولة قد أسفرت عن تواجد المنتخب الوطني المغربي في المجموعة الأولى إلى جانب منتخبات: كينيا (البلد المضيف)، زامبيا، أنغولا والكونغو الديمقراطية. وسيفتتح  للمشاركة في كأس أمم إفريقيا للمحليين.. المنتخب الوطني يشد الرحال صوب كينيا     .', 'size': 2}], 'main_title': 'المنتخب المغربي المحلي يطير إلى كينيا'}, {'community_id': '7', 'articles': [{'id': '67', 'title': 'طنجة .. إجهاض محاولة تهريب أربعة أطنان و374 كيلوغراما من مخدر الشيرا', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/204124', 'summary': 'طنجة .. إجهاض محاولة تهريب أربعة أطنان و374 كيلوغراما من مخدر الشيرا.  تمكنت عناصر الأمن الوطني والجمارك العاملة بميناء طنجة المتوسط، خلال الساعات الأولى من صباح اليوم الأحد، من إجهاض محاولة تهريب أربعة أطنان و374 كيلوغراما من مخدر الشيرا على متن شاحنة للنقل الدولي للبضائع. وذكر مصدر أمني أن عمليات المراقبة الحدودية المشتركة بين الأمن الوطني والجمارك كانت قد أسفرت عن ضبط هذه المحجوزات الكبيرة من المخدرات', 'size': 5}, {'id': '150', 'title': 'إحباط تهريب أكثر من 4 أطنان من مخدر الشيرا بميناء طنجة', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/319431/', 'summary': 'إحباط تهريب أكثر من 4 أطنان من مخدر الشيرا بميناء طنجة. تمكنت عناصر الأمن الوطني والجمارك العاملة بميناء طنجة المتوسط، خلال الساعات الأولى من صباح اليوم الأحد 27 يوليوز الجاري، من إجهاض محاولة تهريب أربعة أطنان و374 كيلوغراما من مخدر الشيرا على متن شاحنة للنقل الدولي للبضائع. وكانت عمليات المراقبة الحدودية المشتركة بين الأمن الوطني والجمارك قد أسفرت عن ضبط هذه المحجوزات الكبيرة من المخدرات', 'size': 5}, {'id': '187', 'title': 'إحباط تهريب “شحنة فواكه” محمّلة بـ4 أطنان من الشيرا بميناء طنجة', 'source': 'rue20.com', 'link': 'https://rue20.com/924249.html', 'summary': 'إحباط تهريب “شحنة فواكه” محمّلة بـ4 أطنان من الشيرا بميناء طنجة.  | متابعة تمكنت عناصر الأمن الوطني والجمارك العاملة بميناء طنجة المتوسط، خلال الساعات الأولى من صباح اليوم الأحد، من إجهاض محاولة تهريب أربعة أطنان و374 كيلوغراما من مخدر الشيرا على متن شاحنة للنقل الدولي للبضائع. وذكر مصدر أمني أن عمليات المراقبة الحدودية المشتركة بين الأمن الوطني والجمارك كانت قد أسفرت عن ضبط هذه الخبر إحباط تهريب “شحنة فواكه” محمّلة بـ4 أطنان من الشيرا بميناء طنجة  .', 'size': 4}, {'id': '219', 'title': 'مخدرات في شاحنة الفواكه: إجهاض محاولة تهريب أربعة أطنان و374 كيلو من الشيرا بطنجة', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/225244/', 'summary': 'مخدرات في شاحنة الفواكه: إجهاض محاولة تهريب أربعة أطنان و374 كيلو من الشيرا بطنجة. تمكنت عناصر الأمن الوطني والجمارك العاملة بميناء طنجة المتوسط، خلال الساعات الأولى من صباح اليوم الأحد 27 يوليوز الجاري، من إجهاض محاولة تهريب أربعة أطنان و374 كيلوغراما من مخدر الشيرا على متن شاحنة للنقل الدولي للبضائع. وكانت عمليات المراقبة الحدودية المشتركة بين الأمن الوطني والجمارك قد أسفرت عن ضبط هذه المحجوزات الكبيرة من المخدرات مخبأة', 'size': 4}, {'id': '231', 'title': 'إفشال عملية تهريب قرابة 5 أطنان من الحشيش بالميناء المتوسطي', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%a5%d9%81%d8%b4%d8%a7%d9%84-%d8%b9%d9%85%d9%84%d9%8a%d8%a9-%d8%aa%d9%87%d8%b1%d9%8a%d8%a8-%d9%82%d8%b1%d8%a7%d8%a8%d8%a9-5-%d8%a3%d8%b7%d9%86%d8%a7%d9%86-%d9%85%d9%86-%d8%a7%d9%84%d8%ad%d8%b4%d9%8a/', 'summary': 'إفشال عملية تهريب قرابة 5 أطنان من الحشيش بالميناء المتوسطي. المساء اليوم: أفشلت مصالح الأمن الوطني والجمارك بميناء طنجة المتوسط، صباح اليوم الأحد، محاولة تهريب أربعة أطنان و374 كيلوغراما من مخدر الشيرا على متن شاحنة للنقل الدولي للبضائع. وذكر مصدر أمني أن عمليات المراقبة الحدودية', 'size': 3}], 'main_title': 'طنجة .. إجهاض محاولة تهريب أربعة أطنان و374 كيلوغراما من مخدر الشيرا'}, {'community_id': '2', 'articles': [{'id': '139', 'title': 'جلالة الملك يهنئ المنتخب الوطني النسوي', 'source': 'assabah.ma', 'link': 'https://assabah.ma/861896.html', 'summary': 'جلالة الملك يهنئ المنتخب الوطني النسوي. بعث صاحب الجلالة الملك محمد السادس، نصره الله، برقية تهنئة إلى أعضاء المنتخب الوطني المغربي النسوي لكرة القدم على المسيرة المتألقة التي بصم عليها في كأس أمم إفريقيا للسيدات نسخة 2024. وقال جلالة الملك في هذه البرقية “فقد تتبعنا بكل اعتزاز مسيرتكن المتألقة في منافسات كأس أممأكمل القراءة » المقالة جلالة الملك يهنئ المنتخب الوطني النسوي  .', 'size': 2}, {'id': '244', 'title': 'الملك محمد السادس يهنئ المنتخب الوطني المغربي النسوي على المسيرة المتألقة في كأس أمم إفريقيا', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%85%d8%ad%d9%85%d8%af-%d8%a7%d9%84%d8%b3%d8%a7%d8%af%d8%b3-%d9%8a%d9%87%d9%86%d8%a6-%d8%a7%d9%84%d9%85%d9%86%d8%aa%d8%ae%d8%a8-%d8%a7%d9%84%d9%88%d8%b7%d9%86%d9%8a/', 'summary': 'الملك محمد السادس يهنئ المنتخب الوطني المغربي النسوي على المسيرة المتألقة في كأس أمم إفريقيا. بعث الملك محمد السادس، برقية تهنئة إلى أعضاء المنتخب الوطني المغربي النسوي لكرة القدم على المسيرة المتألقة التي بصم عليها في كأس أمم إفريقيا للسيدات نسخة 2024. وقال الملك محمد السادس في هذه البرقية “فقد تتبعنا بكل اعتزاز مسيرتكن المتألقة في منافسات كأس أمم إفريقيا للسيدات (نسخة 2024)، والتي تكللت ببلوغكن للدور النهائي …  الملك محمد السادس يهنئ المنتخب الوطني المغربي النسوي على المسيرة المتألقة في كأس أمم إفريقيا     .', 'size': 2}], 'main_title': 'جلالة الملك يهنئ المنتخب الوطني النسوي'}, {'community_id': '3', 'articles': [{'id': '144', 'title': 'مدرب اللبؤات: اللقب ضاع بسبب تفاصيل صغيرة', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/319450/', 'summary': 'مدرب اللبؤات: اللقب ضاع بسبب تفاصيل صغيرة. مدرب المنتخب الوطني المغربي لكرة القدم للسيدات، خورخي فيلدا رودريغيز، اليوم الأحد بالرباط، أن لقب كأس إفريقيا للأمم ضاع بسبب تفاصيل صغيرة. وأوضح السيد فيلدا، خلال مؤتمر صحافي أعقب نهائي كأس إفريقيا للأمم للسيدات (المغرب – 2024)، الذي انتهى بهزيمة المنتخب الوطني أمام نظيره النيجيري بنتيجة 3-2، أن اللاعبات قدمن شوطا أولا مثاليا “غير أنهن انهرن', 'size': 2}, {'id': '237', 'title': 'خورخي فيلدا: اللقب ضاع بسبب تفاصيل صغيرة', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%ae%d9%88%d8%b1%d8%ae%d9%8a-%d9%81%d9%8a%d9%84%d8%af%d8%a7-%d8%a7%d9%84%d9%84%d9%82%d8%a8-%d8%b6%d8%a7%d8%b9-%d8%a8%d8%b3%d8%a8%d8%a8-%d8%aa%d9%81%d8%a7%d8%b5%d9%8a%d9%84-%d8%b5%d8%ba%d9%8a%d8%b1/', 'summary': 'خورخي فيلدا: اللقب ضاع بسبب تفاصيل صغيرة. أكد خورخي فيلدا رودريغيز، مدرب المنتخب الوطني المغربي لكرة القدم للسيدات، أن الخسارة بلقب كأس إفريقيا للأمم جاءت نتيجة “تفاصيل صغيرة”. وخلال مؤتمر صحفي عُقد بعد نهائي كأس إفريقيا للأمم للسيدات 2024، والذي انتهى بهزيمة المنتخب المغربي بنتيجة 3-2 أمام نيجيريا، أوضح فيلدا أن اللاعبات قدمن شوطًا أول مثاليًا. ومع ذلك، “انهارن بدنيًا …  خورخي فيلدا: اللقب ضاع بسبب تفاصيل صغيرة     .', 'size': 2}], 'main_title': 'مدرب اللبؤات: اللقب ضاع بسبب تفاصيل صغيرة'}, {'community_id': '5', 'articles': [{'id': '152', 'title': 'سلطات الاحتلال الإسرائيلي تفرج عن الصحافي محمد البقالي وأفراد طاقم السفينة “حنظلة”', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1088673.html', 'summary': 'سلطات الاحتلال الإسرائيلي تفرج عن الصحافي محمد البقالي وأفراد طاقم السفينة “حنظلة”. علمت جريدة “العمق المغربي” من مصادر جيدة الاطلاع أن سلطات الاحتلال الإسرائيلي، أفرجت اليوم الأحد 27 يوليوز الجاري، عن الصحافي والإعلامي المغربي بقناة الجزيرة محمد البقالي إلى جانب أفراد طاقم السفينة حنظلة بعد توقيعهم على وثيقة يلتزمون بموجبها بعدم تكرار المحاولة. وسيتم ترحيل الصحافي البقالي وفق ما أفادت مصادر الجريدة إلى العاصمة الفرنسية باريس يوم ظهرت المقالة سلطات الاحتلال الإسرائيلي تفرج عن الصحافي محمد البقالي وأفراد طاقم السفينة “حنظلة”  .', 'size': 2}, {'id': '351', 'title': 'سينتقل غدا إلى باريس.. الاحتلال يفرج عن الصحافي محمد البقالي', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%b3%d9%8a%d9%86%d8%aa%d9%82%d9%84-%d8%ba%d8%af%d8%a7-%d8%a5%d9%84%d9%89-%d8%a8%d8%a7%d8%b1%d9%8a%d8%b3-%d8%a7%d9%84%d8%a7%d8%ad%d8%aa%d9%84%d8%a7%d9%84-%d9%8a%d9%81%d8%b1%d8%ac-%d8%b9%d9%86/', 'summary': 'سينتقل غدا إلى باريس.. الاحتلال يفرج عن الصحافي محمد البقالي. أفرجت اليوم الأحد 27 يوليوز 2025 سلطات الاحتلال الإسرائيلي عن الصحافي المغربي العامل بقناة الجزيرة محمد البقالي إلى جانب أفراد طاقم السفينة "حنظلة"، وذلك بعد توقيعهم على وثيقة يلتزمون بموجبها بعدم تكرار المحاولة. وسيتم ترحيل الصحافي البقالي إلى العاصمة الفرنسية باريس يوم غد الاثنين 28 يوليوز، بعدما تعذر الحجز في رحلة مباشرة هذا اليوم.  سينتقل غدا إلى باريس.. الاحتلال يفرج عن الصحافي محمد البقالي     .', 'size': 2}], 'main_title': 'سلطات الاحتلال الإسرائيلي تفرج عن الصحافي محمد البقالي وأفراد طاقم السفينة “حنظلة”'}, {'community_id': '8', 'articles': [{'id': '191', 'title': 'بحضور فلسطيني وازن.. كرسي الدراسات المغربية في جامعة القدس يحتفي بعيد العرش', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/470789.html', 'summary': 'بحضور فلسطيني وازن.. كرسي الدراسات المغربية في جامعة القدس يحتفي بعيد العرش. احتضنت جامعة القدس لقاء علميا تزامنا مع الاحتفالات بعيد العرش، ضمن برنامج الأنشطة الأكاديمية لكرسي الدراسات المغربية في جامعة القدس في موضوع “عيد العرش بالمملكة المغربية: بين تقاليد الدولة العريقة وطموحات الإصلاح والتحديث”، بمشاركة مسؤولين وجامعيين مغاربة وفلسطينيين. بهذه المناسبة، التي حضرها على الخصوص سفير المغرب لدى دولة فلسطين عبد الرحيم مزيان، والمدير المكلف بتسيير …', 'size': 2}, {'id': '332', 'title': 'عيد العرش.. خبراء يبرزون النموذج المغربي في الإصلاح والتحديث', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/319481/', 'summary': 'عيد العرش.. خبراء يبرزون النموذج المغربي في الإصلاح والتحديث. احتضنت جامعة القدس أمس السبت لقاء علميا تزامنا مع الاحتفالات بعيد العرش، ضمن برنامج الأنشطة الأكاديمية لكرسي الدراسات المغربية في جامعة القدس في موضوع “عيد العرش بالمملكة المغربية: بين تقاليد الدولة العريقة وطموحات الإصلاح والتحديث”، بمشاركة مسؤولين وجامعيين مغاربة وفلسطينيين. بهذه المناسبة، التي حضرها على الخصوص سفير المغرب لدى دولة فلسطين عبد الرحيم مزيان، والمدير', 'size': 2}], 'main_title': 'بحضور فلسطيني وازن.. كرسي الدراسات المغربية في جامعة القدس يحتفي بعيد العرش'}, {'community_id': '4', 'articles': [{'id': '294', 'title': 'السيدة الأولى لجمهورية السلفادور السيدة غابرييلا رودريغيز دي بوكيلي تحل بالمغرب في زيارة عمل للمملكة', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/204156', 'summary': 'السيدة الأولى لجمهورية السلفادور السيدة غابرييلا رودريغيز دي بوكيلي تحل بالمغرب في زيارة عمل للمملكة.  حلت السيدة الأولى لجمهورية السلفادور السيدة غابرييلا رودريغيز دي بوكيلي، اليوم الأحد بسلا، في إطار زيارة عمل للمغرب. ولدى نزولها من الطائرة بمطار الرباط-سلا،وجدت السيدة غابرييلا رودريغيز دي بوكيلي في استقبالها صاحبة السمو الملكي الأميرة للا أسماء. وبعد استعراض تشكيلة من القوات المساعدة التي أدت التحية، تقدم للسلام على صاحبة السمو الملكي الأميرة', 'size': 5}, {'id': '311', 'title': 'استقبلتها الأميرة للا أسماء.. “سيدة السلفادور” تزور المغرب!', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a7%d8%b3%d8%aa%d9%82%d8%a8%d9%84%d8%aa%d9%87%d8%a7-%d8%a7%d9%84%d8%a3%d9%85%d9%8a%d8%b1%d8%a9-%d9%84%d9%84%d8%a7-%d8%a3%d8%b3%d9%85%d8%a7%d8%a1-%d8%b3%d9%8a%d8%af%d8%a9-%d8%a7%d9%84%d8%b3/', 'summary': 'استقبلتها الأميرة للا أسماء.. “سيدة السلفادور” تزور المغرب!. حلت السيدة الأولى لجمهورية السلفادور غابرييلا رودريغيز دي بوكيلي، اليوم الأحد بسلا، في إطار زيارة عمل للمغرب. ولدى نزولها من الطائرة بمطار الرباط-سلا، وجدت في استقبالها الأميرة للا أسماء. وقدم لغابرييلا رودريغيز دي بوكيلي الحليب والتمر جريا على التقاليد المغربية الأصيلة. وبعد استراحة قصيرة بالقاعة الشرفية للمطار، توجه موكب الأميرة للا أسماء والسيدة الأولى لجمهورية', 'size': 5}, {'id': '330', 'title': 'للا أسماء تستقبل السيدة الأولى للسلفادور', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/319493/', 'summary': 'للا أسماء تستقبل السيدة الأولى للسلفادور. حلت السيدة الأولى لجمهورية السلفادور السيدة غابرييلا رودريغيز دي بوكيلي، اليوم الأحد بسلا، في إطار زيارة عمل للمغرب. ولدى نزولها من الطائرة بمطار الرباط-سلا، وجدت السيدة غابرييلا رودريغيز دي بوكيلي في استقبالها صاحبة السمو الملكي الأميرة للا أسماء. وبعد استعراض تشكيلة من القوات المساعدة التي أدت التحية، تقدم للسلام على صاحبة السمو الملكي الأميرة للا', 'size': 5}, {'id': '354', 'title': 'زوجة رئيس السالفادور تحل بالعاصمة الرباط', 'source': 'rue20.com', 'link': 'https://rue20.com/924332.html', 'summary': 'زوجة رئيس السالفادور تحل بالعاصمة الرباط. . الرباط حلت السيدة الأولى لجمهورية السلفادور السيدة غابرييلا رودريغيز دي بوكيلي، اليوم الأحد بسلا، في إطار زيارة عمل للمغرب. ولدى نزولها من الطائرة بمطار الرباط-سلا، وجدت السيدة غابرييلا رودريغيز دي بوكيلي في استقبالها صاحبة السمو الملكي الأميرة للا أسماء. وبعد استعراض تشكيلة من القوات المساعدة التي أدت التحية، تقدم للسلام على صاحبة السمو الخبر زوجة رئيس السالفادور تحل بالعاصمة الرباط  .', 'size': 5}, {'id': '383', 'title': 'السيدة الأولى لجمهورية السلفادور غابرييلا رودريغيز دي بوكيلي تحل بالمغرب في زيارة عمل للمملكة', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d8%b3%d9%8a%d8%af%d8%a9-%d8%a7%d9%84%d8%a3%d9%88%d9%84%d9%89-%d9%84%d8%ac%d9%85%d9%87%d9%88%d8%b1%d9%8a%d8%a9-%d8%a7%d9%84%d8%b3%d9%84%d9%81%d8%a7%d8%af%d9%88%d8%b1-%d8%ba%d8%a7%d8%a8/', 'summary': 'السيدة الأولى لجمهورية السلفادور غابرييلا رودريغيز دي بوكيلي تحل بالمغرب في زيارة عمل للمملكة. حلت السيدة الأولى لجمهورية السلفادور غابرييلا رودريغيز دي بوكيلي، اليوم الأحد بسلا، في إطار زيارة عمل للمغرب. وعند نزولها من الطائرة بمطار الرباط-سلا، وجدت غابرييلا رودريغيز دي بوكيلي في استقبالها الأميرة للا أسماء. وعقب استعراض تشكيلة من القوات المساعدة التي أدت التحية، تقدم للسلام على الأميرة للا أسماء والسيدة الأولى لجمهورية السلفادور، والي …  السيدة الأولى لجمهورية السلفادور غابرييلا رودريغيز دي بوكيلي تحل بالمغرب في زيارة عمل للمملكة     .', 'size': 5}], 'main_title': 'السيدة الأولى لجمهورية السلفادور السيدة غابرييلا رودريغيز دي بوكيلي تحل بالمغرب في زيارة عمل للمملكة'}, {'community_id': '6', 'articles': [{'id': '308', 'title': 'السلطات الإسرائيلية تفرج عن الصحافي المغربي البقالي', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/society/410052.html', 'summary': 'السلطات الإسرائيلية تفرج عن الصحافي المغربي البقالي. قامت السلطات الإسرائيلية، اليوم الأحد، بالإفراج عن الصحافي المغربي محمد البقالي، مراسل قناة "الجزيرة"، إضافة إلى أفراد طاقم السفينة "حنظلة" التي كانت في مهمة إنسانية', 'size': 2}, {'id': '363', 'title': 'الإفراج عن الصحافي المغربي محمد البقالي', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d8%a7%d9%84%d8%a5%d9%81%d8%b1%d8%a7%d8%ac-%d8%b9%d9%86-%d8%a7%d9%84%d8%b5%d8%ad%d8%a7%d9%81%d9%8a-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8%d9%8a-%d9%85%d8%ad%d9%85%d8%af-%d8%a7%d9%84%d8%a8%d9%82%d8%a7/', 'summary': 'الإفراج عن الصحافي المغربي محمد البقالي. أفرجت سلطات الاحتلال الإسرائيلي، اليوم الأحد، عن الصحافي المغربي محمد البقالي، الذي يشتغل مراسلا لقناة الجزيرة، بعد احتجازه رفقة طاقم "سفينة حنظلة"  الإفراج عن الصحافي المغربي محمد البقالي     .', 'size': 2}], 'main_title': 'السلطات الإسرائيلية تفرج عن الصحافي المغربي البقالي'}, {'community_id': '1', 'articles': [{'id': '313', 'title': 'وصفه بالجوهرة الكروية.  إنفانتينو يُشيد بملعب الأمير مولاي عبد الله', 'source': 'kifache.com', 'link': 'https://kifache.com/%d9%88%d8%b5%d9%81%d9%87-%d8%a8%d8%a7%d9%84%d8%ac%d9%88%d9%87%d8%b1%d8%a9-%d8%a7%d9%84%d9%83%d8%b1%d9%88%d9%8a%d8%a9-%d8%a5%d9%86%d9%81%d8%a7%d9%86%d8%aa%d9%8a%d9%86%d9%88-%d9%8a%d9%8f%d8%b4%d9%8a/', 'summary': 'وصفه بالجوهرة الكروية. إنفانتينو يُشيد بملعب الأمير مولاي عبد الله. أعرب جياني إنفانتينو، رئيس الاتحاد الدولي لكرة القدم “فيفا”، عن إعجابه الكبير بالمجمع الرياضي الأمير مولاي عبد الله في العاصمة الرباط، وذلك خلال زيارة تفقدية قام بها اليوم الأحد، رفقة فوزي لقجع، رئيس الجامعة الملكية المغربية لكرة القدم. وتأتي هذه الزيارة في سياق الاستعدادات لاحتضان الملعب لعدد من مباريات نهائيات كأس أمم إفريقيا “المغرب 2025”.', 'size': 2}, {'id': '385', 'title': 'رئيس الفيفا يشيد بملعب الأمير مولاي عبد الله ويصفه بـ”الجوهرة”', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%b1%d8%a6%d9%8a%d8%b3-%d8%a7%d9%84%d9%81%d9%8a%d9%81%d8%a7-%d9%8a%d8%b4%d9%8a%d8%af-%d8%a8%d9%85%d9%84%d8%b9%d8%a8-%d8%a7%d9%84%d8%a3%d9%85%d9%8a%d8%b1-%d9%85%d9%88%d9%84%d8%a7%d9%8a-%d8%b9%d8%a8/', 'summary': 'رئيس الفيفا يشيد بملعب الأمير مولاي عبد الله ويصفه بـ”الجوهرة”. عبّر رئيس الاتحاد الدولي لكرة القدم، جياني إنفانتينو، عن إعجابه الكبير بملعب الأمير مولاي عبد الله في الرباط، خلال زيارة قام بها، يومه الأحد، برفقة رئيس الجامعة الملكية المغربية لكرة القدم، فوزي لقجع. وقال رئيس الفيفا، في منشور له على صفحته الرسمية بموقع التواصل الاجتماعي “إنستغرام”: “إن الملعب يُعدّ من بين أحدث وأكثر …  رئيس الفيفا يشيد بملعب الأمير مولاي عبد الله ويصفه بـ”الجوهرة”     .', 'size': 2}], 'main_title': 'وصفه بالجوهرة الكروية.  إنفانتينو يُشيد بملعب الأمير مولاي عبد الله'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    