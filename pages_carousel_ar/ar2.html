<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 21/06/2025 - 06h21</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '1', 'articles': [{'id': '38', 'title': 'ترويج الأقراص المخدرة يجر ثلاثينيا للاعتقال ببني ملال', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-633306.html', 'summary': 'ترويج الأقراص المخدرة يجر ثلاثينيا للاعتقال ببني ملال. هبة بريس تمكنت عناصر الشرطة بولاية أمن بني ملال بناءً على معلومات دقيقة وفرتها مصالح المديرية العامة لمراقبة التراب الوطني، صباح اليوم الجمعة 20 يونيو الجاري، من توقيف شخص يبلغ من العمر 31 سنة، يشتبه في تورطه في قضية تتعلق بحيازة وترويج المخدرات والمؤثرات العقلية. وقد جرى توقيف المشتبه فيه مباشرة بعد وصوله على متن حافلة لنقل المسافرين كانت قادمة من إحدى مدن شمال المملكة، حيث أسفرت عملية التفتيش عن العثور بحوزته على 2885 قرص طبي مخدر من نوع "ريفوتريل". وقد تم إخضاع المشتبه فيه للبحث القضائي الذي تشرف عليه النيابة العامة المختصة، وذلك لتحديد باقي الامتدادات المحتملة لهذا النشاط الإجرامي، وكذا توقيف باقي المتورطين في ارتكاب هذه الأفعال الإجرامية.', 'size': 3}, {'id': '140', 'title': 'توقيف شخص يشتبه في تورطه في حيازة وترويج المخدرات والمؤثرات العقلية ببني ملال', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/316048/', 'summary': 'توقيف شخص يشتبه في تورطه في حيازة وترويج المخدرات والمؤثرات العقلية ببني ملال. تمكنت عناصر الشرطة بولاية أمن بني ملال بناءً على معلومات دقيقة وفرتها مصالح المديرية العامة لمراقبة التراب الوطني، صباح اليوم الجمعة، من توقيف شخص يبلغ من العمر 31 سنة، يشتبه في تورطه في قضية تتعلق بحيازة وترويج المخدرات والمؤثرات العقلية. وقد جرى توقيف المشتبه فيه مباشرة بعد وصوله على متن حافلة لنقل المسافرين كانت قادمة', 'size': 4}, {'id': '179', 'title': 'توقيف شخص تورط في ترويج المخدرات ببني ملال', 'source': 'rue20.com', 'link': 'https://rue20.com/914532.html', 'summary': 'توقيف شخص تورط في ترويج المخدرات ببني ملال.  الرباط تمكنت عناصر الشرطة بولاية أمن بني ملال بناءً على معلومات دقيقة وفرتها مصالح المديرية العامة لمراقبة التراب الوطني، صباح اليوم الجمعة 20 يونيو الجاري، من توقيف شخص يبلغ من العمر 31 سنة، يشتبه في تورطه في قضية تتعلق بحيازة وترويج المخدرات والمؤثرات العقلية. وقد جرى توقيف المشتبه فيه مباشرة بعد وصوله على متن الخبر توقيف شخص تورط في ترويج المخدرات ببني ملال  .', 'size': 3}, {'id': '218', 'title': 'بني ملال.. توقيف ثلاثيني متحوزا ل2885 قرص مخدر', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/223223/', 'summary': 'بني ملال.. توقيف ثلاثيني متحوزا ل2885 قرص مخدر. كواليس اليوم تمكنت عناصر الشرطة بولاية أمن بني ملال بناءً على معلومات دقيقة وفرتها مصالح المديرية العامة لمراقبة التراب الوطني، صباح اليوم الجمعة 20 يونيو الجاري، من توقيف شخص يبلغ من العمر 31 سنة، يشتبه في تورطه في قضية تتعلق بحيازة وترويج المخدرات والمؤثرات العقلية. وقد جرى توقيف المشتبه فيه مباشرة بعد وصوله على', 'size': 2}], 'main_title': 'توقيف شخص يشتبه في تورطه في حيازة وترويج المخدرات والمؤثرات العقلية ببني ملال'}, {'community_id': '8', 'articles': [{'id': '66', 'title': 'المغرب: تراجع ملحوظ في حرائق الغابات خلال سنة 2025 وسط دعوات لتعزيز اليقظة', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/202281', 'summary': 'المغرب: تراجع ملحوظ في حرائق الغابات خلال سنة 2025 وسط دعوات لتعزيز اليقظة. الأحداث نت – مراسلة: م.ع. الإدريسي أعلنت الوكالة الوطنية للمياه والغابات، في بلاغ رسمي توصلت به جريدة “الأحداث”، عن الوضعية الراهنة لحرائق الغابات على الصعيد الوطني، مرفقة بمعطيات دقيقة حول عدد الحرائق، المساحات المتضررة، والإجراءات الاستباقية المتخذة في ظل استمرار موجات الحرارة والجفاف. ووفقاً للوكالة، تم تسجيل ثمانية حرائق جديدة خلال الـ24 ساعة الماضية من', 'size': 2}, {'id': '114', 'title': 'السيطرة على ثمانية حرائق سجلت على الصعيد الوطني أمس الخميس', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/407913.html', 'summary': 'السيطرة على ثمانية حرائق سجلت على الصعيد الوطني أمس الخميس. أفادت الوكالة الوطنية للمياه والغابات أنه تم تسجيل ثمانية حرائق على الصعيد الوطني أمس الخميس، منها ستة حرائق في المجال الغابوي وحريقان خارجه، مؤكدة أنه', 'size': 4}, {'id': '163', 'title': 'بعد تضرر 20 هكتارا.. المياه والغابات: السيطرة على 8 حرائق في يوم واحد', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a8%d8%b9%d8%af-%d8%aa%d8%b6%d8%b1%d8%b1-20-%d9%87%d9%83%d8%aa%d8%a7%d8%b1%d8%a7-%d8%a7%d9%84%d9%85%d9%8a%d8%a7%d9%87-%d9%88%d8%a7%d9%84%d8%ba%d8%a7%d8%a8%d8%a7%d8%aa-%d8%a7%d9%84%d8%b3%d9%8a/', 'summary': 'بعد تضرر 20 هكتارا.. المياه والغابات: السيطرة على 8 حرائق في يوم واحد. كشفت الوكالة الوطنية للمياه والغابات أنه تم تسجيل ثمانية حرائق على الصعيد الوطني، أمس الخميس، منها ستة حرائق في المجال الغابوي وحريقان خارجه، مؤكدة أنه تمت السيطرة عليها بالكامل. وأوضحت الوكالة، في بلاغ لها حول "الوضعية الراهنة لحرائق الغابات"، أنه تمت السيطرة على جميع هذه الحرائق بفضل يقظة وتدخلات المصالح المختصة السريعة والمنسقة، مشيرة إلى  بعد تضرر 20 هكتارا.. المياه والغابات: السيطرة على 8 حرائق في يوم واحد     .', 'size': 4}, {'id': '326', 'title': '“المياه والغابات” تدعو إلى الحيطة والحذر.. السيطرة الكاملة على 8 حرائق على الصعيد الوطني في يوم واحد!', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a7%d9%84%d9%85%d9%8a%d8%a7%d9%87-%d9%88%d8%a7%d9%84%d8%ba%d8%a7%d8%a8%d8%a7%d8%aa-%d8%aa%d8%af%d8%b9%d9%88-%d8%a5%d9%84%d9%89-%d8%a7%d9%84%d8%ad%d9%8a%d8%b7%d8%a9-%d9%88%d8%a7%d9%84%d8%ad/', 'summary': '“المياه والغابات” تدعو إلى الحيطة والحذر.. السيطرة الكاملة على 8 حرائق على الصعيد الوطني في يوم واحد!. أفادت الوكالة الوطنية للمياه والغابات أنه تم تسجيل ثمانية حرائق على الصعيد الوطني، أمس الخميس (19 يونيو)، منها ستة حرائق في المجال الغابوي وحريقان خارجه، مؤكدة أنه تمت السيطرة عليها بالكامل. وأوضحت الوكالة، في بلاغ لها حول “الوضعية الراهنة لحرائق الغابات”، أنه تمت السيطرة على جميع هذه الحرائق بفضل يقظة وتدخلات المصالح المختصة السريعة والمنسقة،', 'size': 5}, {'id': '384', 'title': 'الوكالة الوطنية للمياه والغابات تعلن السيطرة على 8 حرائق', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/467112.html', 'summary': 'الوكالة الوطنية للمياه والغابات تعلن السيطرة على 8 حرائق. أعلنت الوكالة الوطنية للمياه والغابات أنه تم تسجيل ثمانية حرائق على الصعيد الوطني أمس الخميس، منها ستة حرائق في المجال الغابوي وحريقان خارجه، مؤكدة أنه تمت السيطرة عليها بالكامل. وأوضحت الوكالة، في بلاغ لها حول “الوضعية الراهنة لحرائق الغابات”، أنه تمت السيطرة على جميع هذه الحرائق بفضل يقظة وتدخلات المصالح المختصة السريعة والمنسقة، مشيرة إلى …', 'size': 4}], 'main_title': '“المياه والغابات” تدعو إلى الحيطة والحذر.. السيطرة الكاملة على 8 حرائق على الصعيد الوطني في يوم واحد!'}, {'community_id': '2', 'articles': [{'id': '76', 'title': 'تزوير العملة الوطنية يقود رجلا وامرأة إلى السجن بعد اعتقالهما متلبسين', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/society/407874.html', 'summary': 'تزوير العملة الوطنية يقود رجلا وامرأة إلى السجن بعد اعتقالهما متلبسين. تمكنت عناصر الشرطة بالمفوضية الجهوية للأمن بمدينة عين بني مطهر، يوم أمس الأربعاء 18 يونيو الجاري، من توقيف شخص وسيدة من ذوي السوابق القضائية، وذلك', 'size': 2}, {'id': '216', 'title': 'بني مطهر.. اعتقال شخص وسيدة من أجل تزوير أوراق مالية', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/223230/', 'summary': 'بني مطهر.. اعتقال شخص وسيدة من أجل تزوير أوراق مالية. كمال عسو اعتقلت عناصر الشرطة بالمفوضية الجهوية للأمن بمدينة عين بني مطهر، شخصا وسيدة من ذوي السوابق القضائية، يشتبه تورطهما في قضية تتعلق بتزوير الأوراق المالية الوطنية وعرضها للتداول. وأفادت مصادر أمنية، بأن توقيف المشتبه فيها الأولى جرى بمدينة عين بني مطهر، وهي في حالة تلبس بحيازة ورقة مالية مزورة من فئة 200 درهما،', 'size': 2}], 'main_title': 'تزوير العملة الوطنية يقود رجلا وامرأة إلى السجن بعد اعتقالهما متلبسين'}, {'community_id': '3', 'articles': [{'id': '78', 'title': 'جهود متواصلة لإخماد حريق غابوي التهم الهكتارات ضواحي تطوان', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/407876.html', 'summary': 'جهود متواصلة لإخماد حريق غابوي التهم الهكتارات ضواحي تطوان. تواصل فرق الإطفاء جهودها المكثفة لإخماد حريق غابوي اندلع، زوال اليوم الخميس، بالغطاء الغابوي بمنطقة ودراس بجماعة عين لحصن بإقليم تطوان. وتعمل فرق الإطفاء في ظل', 'size': 2}, {'id': '228', 'title': 'حريق عين لحصن أتى على عشرات الهكتارات.. وإمكانيات كبيرة لتطويقه', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%ad%d8%b1%d9%8a%d9%82-%d8%b9%d9%8a%d9%86-%d9%84%d8%ad%d8%b5%d9%86-%d8%a3%d8%aa%d9%89-%d8%b9%d9%84%d9%89-%d8%b9%d8%b4%d8%b1%d8%a7%d8%aa-%d8%a7%d9%84%d9%87%d9%83%d8%aa%d8%a7%d8%b1%d8%a7%d8%aa/', 'summary': 'حريق عين لحصن أتى على عشرات الهكتارات.. وإمكانيات كبيرة لتطويقه. المساء اليوم – تطوان: أنهت فرق الإطفاء إخماد حريق غابوي اندلع، زوال أمس الخميس، بالغطاء الغابوي بمنطقة ودراس بجماعة عين لحصن بإقليم تطوان. وعملت فرق الإطفاء في ظل ظروف مناخية صعبة تتمثل في هبوب رياح', 'size': 2}], 'main_title': 'جهود متواصلة لإخماد حريق غابوي التهم الهكتارات ضواحي تطوان'}, {'community_id': '5', 'articles': [{'id': '133', 'title': 'العيون..منصة جديدة لتكامل جنوب-جنوب', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/316053/', 'summary': 'العيون..منصة جديدة لتكامل جنوب-جنوب. تحتضن مدينة العيون، اليوم الجمعة 20 يونيو 2025، أشغال المنتدى البرلماني للتعاون الاقتصادي بين المملكة المغربية وبرلمان مجموعة دول CEMAC (المجموعة الاقتصادية والنقدية لوسط إفريقيا)، بمبادرة من مجلس المستشارين (المغرب) وبرلمان المجموعة، وبشراكة مع الاتحاد العام لمقاولات المغرب. ويهدف المنتدى، وفق الجهة المنظمة، إلى خلق إطار مؤسساتي لتبادل الرؤى بين ممثلي المؤسسات التشريعية والاقتصادية من', 'size': 2}, {'id': '181', 'title': 'إعلان العيون يؤسس لشراكة فاعلة وتنمية مشتركة بين المملكة المغربية ودول سيماك', 'source': 'rue20.com', 'link': 'https://rue20.com/914494.html', 'summary': 'إعلان العيون يؤسس لشراكة فاعلة وتنمية مشتركة بين المملكة المغربية ودول سيماك.  العيون” علي التومي إحتضنت مدينة العيون، الوم الجمعة 20 يونيو الجاري أشغال المنتدى البرلماني للتعاون الاقتصادي بين المملكة المغربية والمجموعة الاقتصادية والنقدية لوسط إفريقيا “سيماك”، وذلك بشراكة مع الاتحاد العام لمقاولات المغرب، وبمشاركة فاعلة لرؤساء وممثلي برلمانات وهيئات أرباب العمل بالدول الأعضاء في سيماك. ويأتي تنظيم هذا المنتدى في إطار تعزيز العلاقات البرلمانية والاقتصادية الخبر إعلان العيون يؤسس لشراكة فاعلة وتنمية مشتركة بين المملكة المغربية ودول سيماك  .', 'size': 2}], 'main_title': 'العيون..منصة جديدة لتكامل جنوب-جنوب'}, {'community_id': '6', 'articles': [{'id': '137', 'title': 'توقيف 10 أشخاص يشتبه في تورطهم في ترويج المخدرات وحيازة السلاح الناري', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/316063/', 'summary': 'توقيف 10 أشخاص يشتبه في تورطهم في ترويج المخدرات وحيازة السلاح الناري. تمكنت عناصر الشرطة القضائية بالأمن الجهوي بمدينة الناظور بتنسيق مع مصالح المديرية العامة لمراقبة التراب الوطني، صباح اليوم الجمعة 20 يونيو الجاري، من توقيف عشرة أشخاص يشتبه في تورطهم في قضية تتعلق بحيازة وترويج المخدرات والمؤثرات العقلية وحيازة السلاح الناري في ظروف تشكل خطرا على الأشخاص والممتلكات. وقد تم تنفيذ هذه العملية الأمنية بمدينة', 'size': 2}, {'id': '215', 'title': 'بتنسيق مع الديستي: أمن الناظور يوقف 10 أشخاص ويحجز كميات ضخمة من المخدرات القوية', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/223234/', 'summary': 'بتنسيق مع الديستي: أمن الناظور يوقف 10 أشخاص ويحجز كميات ضخمة من المخدرات القوية. تمكنت عناصر الشرطة القضائية بالأمن الجهوي بمدينة الناظور بتنسيق مع مصالح المديرية العامة لمراقبة التراب الوطني، صباح اليوم الجمعة 20 يونيو الجاري، من توقيف عشرة أشخاص يشتبه في تورطهم في قضية تتعلق بحيازة وترويج المخدرات والمؤثرات العقلية وحيازة السلاح الناري في ظروف تشكل خطرا على الأشخاص والممتلكات. وقد تم تنفيذ هذه العملية الأمنية بمدينة الناظور', 'size': 2}], 'main_title': 'توقيف 10 أشخاص يشتبه في تورطهم في ترويج المخدرات وحيازة السلاح الناري'}, {'community_id': '7', 'articles': [{'id': '139', 'title': 'القنيطرة…توقيف مواطن نرويجي يشكل موضوع أمر دولي بإلقاء القبض عليه', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/316051/', 'summary': 'القنيطرة…توقيف مواطن نرويجي يشكل موضوع أمر دولي بإلقاء القبض عليه. تمكنت عناصر الشرطة القضائية بولاية أمن القنيطرة، مساء أمس الخميس 19 يونيو الجاري، من توقيف مواطن نرويجي من أصول سودانية، يشكل موضوع أمر دولي بإلقاء القبض صادر عن السلطات القضائية النرويجية. وقد تم توقيف هذا المواطن الأجنبي بمدينة القنيطرة، حيث كشفت عملية تنقيطه بقاعدة بيانات المنظمة الدولية للشرطة الجنائية “أنتربول”، أنه مبحوث عنه على', 'size': 3}, {'id': '219', 'title': 'القنيطرة.. نشرة حمراء من “الإنتربول” تجر نرويجيا للاعتقال', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/223218/', 'summary': 'القنيطرة.. نشرة حمراء من “الإنتربول” تجر نرويجيا للاعتقال. كمال عسو اعتقلت عناصر الشرطة القضائية بولاية أمن القنيطرة، مساء أمس الخميس مواطنا نرويجيا من أصول سودانية، يشكل موضوع أمر دولي بإلقاء القبض صادر عن السلطات القضائية النرويجية. وحسب مصدر أمني، فإن توقيف هذا المواطن الأجنبي جرى بمدينة القنيطرة، حيث كشفت عملية تنقيطه بقاعدة بيانات المنظمة الدولية للشرطة الجنائية “أنتربول”، أنه مبحوث عنه على', 'size': 2}, {'id': '239', 'title': 'توقيف مواطن نرويجي بالقنيطرة مبحوث عنه دوليا', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%aa%d9%88%d9%82%d9%8a%d9%81-%d9%85%d9%88%d8%a7%d8%b7%d9%86-%d9%86%d8%b1%d9%88%d9%8a%d8%ac%d9%8a-%d8%a8%d8%a7%d9%84%d9%82%d9%86%d9%8a%d8%b7%d8%b1%d8%a9-%d9%85%d8%a8%d8%ad%d9%88%d8%ab-%d8%b9%d9%86/', 'summary': 'توقيف مواطن نرويجي بالقنيطرة مبحوث عنه دوليا. تمكنت عناصر الشرطة القضائية بولاية أمن القنيطرة، مساء أمس الخميس، من توقيف مواطن نرويجي من أصول سودانية، يشكل موضوع أمر دولي بإلقاء القبض صادر عن السلطات القضائية النرويجية. وكشفت مصادر أمنية، أنه قد تم توقيف هذا المواطن الأجنبي بمدينة القنيطرة، حيث كشفت عملية تنقيطه بقاعدة بيانات المنظمة الدولية للشرطة الجنائية “أنتربول”، أنه مبحوث …  توقيف مواطن نرويجي بالقنيطرة مبحوث عنه دوليا     .', 'size': 2}], 'main_title': 'القنيطرة…توقيف مواطن نرويجي يشكل موضوع أمر دولي بإلقاء القبض عليه'}, {'community_id': '0', 'articles': [{'id': '173', 'title': 'نشرة إنذارية..أمطار رعدية قوية وجو حار من الجمعة إلى الثلاثاء بهذه المدن', 'source': 'rue20.com', 'link': 'https://rue20.com/914554.html', 'summary': 'نشرة إنذارية..أمطار رعدية قوية وجو حار من الجمعة إلى الثلاثاء بهذه المدن. . الرباط أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب تسجيل زخات رعدية مصحوبة بتساقط للبرد وبهبات رياح اليوم الجمعة، وطقس حار من الجمعة إلى الثلاثاء بعدد من مناطق المملكة. وأوضحت المديرية، في نشرة إنذارية من مستوى يقظة “برتقالي”، أن هذه الزخات الرعدية (من 15 إلى 25 ملم) ستهم عمالات وأقاليم أزيلال والرحامنة ومراكش وقلعة الخبر نشرة إنذارية..أمطار رعدية قوية وجو حار من الجمعة إلى الثلاثاء بهذه المدن  .', 'size': 2}, {'id': '236', 'title': 'نشرة إنذارية: طقس حار من الجمعة إلى الثلاثاء وزخات رعدية اليوم الجمعة بعدد من مناطق المملكة', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d9%86%d8%b4%d8%b1%d8%a9-%d8%a5%d9%86%d8%b0%d8%a7%d8%b1%d9%8a%d8%a9-%d8%b7%d9%82%d8%b3-%d8%ad%d8%a7%d8%b1-%d9%85%d9%86-%d8%a7%d9%84%d8%ac%d9%85%d8%b9%d8%a9-%d8%a5%d9%84%d9%89-%d8%a7%d9%84%d8%ab%d9%84/', 'summary': 'نشرة إنذارية: طقس حار من الجمعة إلى الثلاثاء وزخات رعدية اليوم الجمعة بعدد من مناطق المملكة. أفادت المديرية العامة للأرصاد الجوية، بأنه يرتقب تسجيل زخات رعدية مصحوبة بتساقط للبرد وبهبات رياح اليوم الجمعة، وطقس حار من الجمعة إلى الثلاثاء بعدد من مناطق المملكة. وأوضحت المديرية، في نشرة إنذارية من مستوى يقظة “برتقالي”، أن هذه الزخات الرعدية (من 15 إلى 25 ملم) ستهم عمالات وأقاليم أزيلال والرحامنة ومراكش وقلعة السراغنة وشيشاوة والحوز، اليوم الجمعة …  نشرة إنذارية: طقس حار من الجمعة إلى الثلاثاء وزخات رعدية اليوم الجمعة بعدد من مناطق المملكة     .', 'size': 2}], 'main_title': 'نشرة إنذارية..أمطار رعدية قوية وجو حار من الجمعة إلى الثلاثاء بهذه المدن'}, {'community_id': '4', 'articles': [{'id': '185', 'title': 'في لقاء بغوتيريش.. بوعياش تبرز بنيويورك دور المؤسسات الوطنية لحقوق الإنسان', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/467103.html', 'summary': 'في لقاء بغوتيريش.. بوعياش تبرز بنيويورك دور المؤسسات الوطنية لحقوق الإنسان. استقبل الأمين العام للأمم المتحدة، أنطونيو غوتيريش، رئيسة التحالف العالمي للمؤسسات الوطنية لحقوق الإنسان، آمنة بوعياش، وذلك في إطار سعيها وفريق التحالف لتعزيز دور المؤسسات الوطنية وحقوق الإنسان في صنع القرار الدولي. وذكر بلاغ للمجلس الوطني لحقوق الإنسان أنه في سياق ترافع دولي حثيث تقوده بنيويورك، التقت رئيسة المجلس، بوعياش، بصفتها رئيسة التحالف العالمي، غوتيريش …', 'size': 2}, {'id': '325', 'title': 'نيويورك.. تفاصيل لقاء بوعياش والأمين العام للأمم المتحدة', 'source': 'kifache.com', 'link': 'https://kifache.com/%d9%86%d9%8a%d9%88%d9%8a%d9%88%d8%b1%d9%83-%d8%aa%d9%81%d8%a7%d8%b5%d9%8a%d9%84-%d9%84%d9%82%d8%a7%d8%a1-%d8%a8%d9%88%d8%b9%d9%8a%d8%a7%d8%b4-%d9%88%d8%a7%d9%84%d8%a3%d9%85%d9%8a%d9%86-%d8%a7%d9%84/', 'summary': 'نيويورك.. تفاصيل لقاء بوعياش والأمين العام للأمم المتحدة. استقبل الأمين العام للأمم المتحدة، أنطونيو غوتيريش، أمس الخميس (19 يونيو)، رئيسة التحالف العالمي للمؤسسات الوطنية لحقوق الإنسان، آمنة بوعياش، وذلك في إطار سعيها وفريق التحالف لتعزيز دور المؤسسات الوطنية وحقوق الإنسان في صنع القرار الدولي. وذكر بلاغ للمجلس الوطني لحقوق الإنسان أنه في سياق ترافع دولي حثيث تقوده بنيويورك، التقت رئيسة المجلس، بوعياش، بصفتها', 'size': 2}], 'main_title': 'في لقاء بغوتيريش.. بوعياش تبرز بنيويورك دور المؤسسات الوطنية لحقوق الإنسان'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    