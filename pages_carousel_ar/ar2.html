<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 25/08/2025 - 12h27</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '25', 'title': 'الطقس غدا الإثنين.. انخفاض درجات الحرارة خلال النهار مع استمرار الحرارة المرتفعة بالجنوب الشرقي', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-651696.html', 'summary': 'الطقس غدا الإثنين.. انخفاض درجات الحرارة خلال النهار مع استمرار الحرارة المرتفعة بالجنوب الشرقي. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليوم غد الاثنين، أن تتميز الحالة الجوية عامة، بطقس حار نسبيا بالجنوب الشرقي للبلاد وبأقصى جنوب المملكة. وسيلاحظ تساقط قطرات مطرية أخرى متفرقة مصحوبة بالرعد محليا بالشمال الغربي، والريف، والسايس، والواجهة المتوسطية والمنطقة الشرقية، فضلا عن نزول قطرات مطرية أو ضباب محلي بالسواحل ما بين سيدي إيفني والعيون، مع تكون ضباب محلي بالسواحل الأطلسية الشمالية والوسطى، خصوصا خلال الليلة القادمة. ويرتقب تسجيل هبات رياح قوية نوعا ما بكل من السواحل الوسطى، وجنوب المنطقة الشرقية والأقاليم الصحراوية مع تطاير الغبار محليا. وستتراوح درجات الحرارة الدنيا، ما بين 23 و29 درجة بأقصى الجنوب والجنوب الشرقي للبلاد، وما بين 20 و24 درجة بهضبة ملوية وما بين 14 و21 درجة فيما تبقى من ربوع المملكة. أما درجات الحرارة خلال النهار، فستكون في انخفاض بمعظم أرجاء المملكة. وسيكون البحر هادئا إلى قليل الهيجان بالواجهة المتوسطية، والبوغاز، وقليل الهيجان إلى هائج على طول الساحل الأطلسي.', 'size': 2}, {'id': '320', 'title': 'توقعات أحوال الطقس.. تساقط قطرات مطرية أخرى متفرقة', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%aa%d9%88%d9%82%d8%b9%d8%a7%d8%aa-%d8%a3%d8%ad%d9%88%d8%a7%d9%84-%d8%a7%d9%84%d8%b7%d9%82%d8%b3-%d8%aa%d8%b3%d8%a7%d9%82%d8%b7-%d9%82%d8%b7%d8%b1%d8%a7%d8%aa-%d9%85%d8%b7%d8%b1%d9%8a%d8%a9-%d8%a3/', 'summary': 'توقعات أحوال الطقس.. تساقط قطرات مطرية أخرى متفرقة. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الاثنين، أن تتميز الحالة الجوية عامة، بطقس حار نسبيا بالجنوب الشرقي للبلاد وبأقصى جنوب المملكة. وسيلاحظ تساقط قطرات مطرية أخرى متفرقة مصحوبة بالرعد محليا بالشمال الغربي، والريف، والسايس، والواجهة المتوسطية والمنطقة الشرقية، فضلا عن نزول قطرات مطرية أو ضباب محلي بالسواحل ما بين سيدي إيفني والعيون، مع تكون  توقعات أحوال الطقس.. تساقط قطرات مطرية أخرى متفرقة     .', 'size': 2}], 'main_title': 'الطقس غدا الإثنين.. انخفاض درجات الحرارة خلال النهار مع استمرار الحرارة المرتفعة بالجنوب الشرقي'}, {'community_id': '4', 'articles': [{'id': '105', 'title': 'موجة الحر الأخيرة في إسبانيا هي الأكثر شدّة منذ بدأ تسجيل البيانات', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/last/411576.html', 'summary': 'موجة الحر الأخيرة في إسبانيا هي الأكثر شدّة منذ بدأ تسجيل البيانات. ذكرت الوكالة الوطنية للأرصاد الجوية في إسبانيا أن موجة الحر التي ضربت البلاد لستة عشر يوما خلال شهر غشت الجاري تعد الأكثر شدة منذ البدء', 'size': 4}, {'id': '126', 'title': 'هيأة الأرصاد.. موجة الحر الأخيرة في إسبانيا هي الأشدّ منذ بدأ تسجيل البيانات', 'source': 'kifache.com', 'link': 'https://kifache.com/%d9%87%d9%8a%d8%a3%d8%a9-%d8%a7%d9%84%d8%a3%d8%b1%d8%b5%d8%a7%d8%af-%d9%85%d9%88%d8%ac%d8%a9-%d8%a7%d9%84%d8%ad%d8%b1-%d8%a7%d9%84%d8%a3%d8%ae%d9%8a%d8%b1%d8%a9-%d9%81%d9%8a-%d8%a5%d8%b3%d8%a8%d8%a7/', 'summary': 'هيأة الأرصاد.. موجة الحر الأخيرة في إسبانيا هي الأشدّ منذ بدأ تسجيل البيانات. ذكرت الوكالة الوطنية للأرصاد الجوية في إسبانيا أن موجة الحر التي ضربت البلاد لستة عشر يوما خلال شهر غشت الجاري تعد الأكثر شد ة منذ البدء بتسجيل البيانات في هذا الخصوص. وحسب المعطيات المؤقتة، تخط ت الموجة الأخيرة تلك المسج لة في يوليوز 2022 ، مع حرارة أعلى بـ4,6 درجات مئوية من تلك المصاحبة عادة', 'size': 4}, {'id': '138', 'title': 'موجة الحر الأخيرة في إسبانيا هي الأكثر شدة', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/321625/', 'summary': 'موجة الحر الأخيرة في إسبانيا هي الأكثر شدة. ذكرت الوكالة الوطنية للأرصاد الجوية في إسبانيا أن موجة الحر التي ضربت البلاد لستة عشر يوما خلال شهر غشت الجاري تعد الأكثر شدّة منذ البدء بتسجيل البيانات في هذا الخصوص. وحسب المعطيات المؤقتة، تخطّت الموجة الأخيرة تلك المسجّلة في يوليوز 2022 ، مع حرارة أعلى بـ4,6 درجات مئوية من تلك المصاحبة عادة لموجات الحرّ. وخلال', 'size': 4}, {'id': '226', 'title': 'إسبانيا تسجل أشد موجة حر منذ بدء رصد البيانات', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a5%d8%b3%d8%a8%d8%a7%d9%86%d9%8a%d8%a7-%d8%aa%d8%b3%d8%ac%d9%84-%d8%a3%d8%b4%d8%af-%d9%85%d9%88%d8%ac%d8%a9-%d8%ad%d8%b1-%d9%85%d9%86%d8%b0-%d8%a8%d8%af%d8%a1-%d8%b1%d8%b5%d8%af-%d8%a7%d9%84%d8%a8/', 'summary': 'إسبانيا تسجل أشد موجة حر منذ بدء رصد البيانات. أفادت الوكالة الوطنية للأرصاد الجوية في إسبانيا أن موجة الحر التي اجتاحت البلاد لمدة ستة عشر يوما خلال شهر غشت الجاري تعد الأكثر شدة منذ بدء تسجيل المعطيات المناخية. ووفق البيانات الأولية، تجاوزت درجات الحرارة المسجلة خلال هذه الموجة المعدلات المعتادة لموجات الحر بـ4.6 درجات مئوية، متخطية بذلك الرقم القياسي السابق المسجل في …  إسبانيا تسجل أشد موجة حر منذ بدء رصد البيانات     .', 'size': 4}], 'main_title': 'موجة الحر الأخيرة في إسبانيا هي الأكثر شدّة منذ بدأ تسجيل البيانات'}, {'community_id': '2', 'articles': [{'id': '115', 'title': 'فرنسا تستدعي السفير الأميركي عقب اتهامات "غير مقبولة"', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/world/411586.html', 'summary': 'فرنسا تستدعي السفير الأميركي عقب اتهامات "غير مقبولة". استدعت فرنسا السفير الأمريكي في باريس تشارلز كوشنر الاثنين بعد اتهاماته “غير المقبولة” للرئيس إيمانويل ماكرون “بعدم اتخاذ إجراءات كافية” لمكافحة معاداة السامية. وقالت الخارجية الفرنسية', 'size': 2}, {'id': '355', 'title': 'فرنسا تستدعي السفير الأميركي على خلفية اتهامات بالتقصير في مكافحة معاداة السامية', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d9%81%d8%b1%d9%86%d8%b3%d8%a7-%d8%aa%d8%b3%d8%aa%d8%af%d8%b9%d9%8a-%d8%a7%d9%84%d8%b3%d9%81%d9%8a%d8%b1-%d8%a7%d9%84%d8%a3%d9%85%d9%8a%d8%b1%d9%83%d9%8a-%d8%b9%d9%84%d9%89-%d8%ae%d9%84%d9%81%d9%8a/', 'summary': 'فرنسا تستدعي السفير الأميركي على خلفية اتهامات بالتقصير في مكافحة معاداة السامية. استدعت وزارة الخارجية الفرنسية السفير الأميركي في باريس، تشارلز كوشنر، على خلفية تصريحات اعتبرتها باريس “غير مقبولة”، اتهم فيها الرئيس إيمانويل ماكرون بالتقصير في اتخاذ إجراءات كافية لمواجهة معاداة السامية. وفي هذا السياق، قالت الخارجية الفرنسية في بيانها، أمس الأحد، إن تصريحات السفير الأميركي “تشكل خرقا لمبدأ عدم التدخل في الشؤون الداخلية للدول، …  فرنسا تستدعي السفير الأميركي على خلفية اتهامات بالتقصير في مكافحة معاداة السامية     .', 'size': 2}], 'main_title': 'فرنسا تستدعي السفير الأميركي عقب اتهامات "غير مقبولة"'}, {'community_id': '1', 'articles': [{'id': '125', 'title': 'جلالة الملك: السياسة الخارجية للمغرب قائمة على احترام القانون الدولي وميثاق الأمم المتحدة', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%ac%d9%84%d8%a7%d9%84%d8%a9-%d8%a7%d9%84%d9%85%d9%84%d9%83-%d8%a7%d9%84%d8%b3%d9%8a%d8%a7%d8%b3%d8%a9-%d8%a7%d9%84%d8%ae%d8%a7%d8%b1%d8%ac%d9%8a%d8%a9-%d9%84%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d9%82/', 'summary': 'جلالة الملك: السياسة الخارجية للمغرب قائمة على احترام القانون الدولي وميثاق الأمم المتحدة. أكد جلالة الملك محمد السادس أن السياسة الخارجية للمملكة المغربية ظلت تسير وفق مقاربة قانونية منهجية قائمة على احترام القانون الدولي ومبادئ ميثاق الأمم المتحدة. وأوضح جلالة الملك في الرسالة السامية الموجهة إلى المشاركين في الدورة الثانية والثمانين لمعهد القانون الدولي، التي افتتحت أشغالها اليوم الأحد (24 غشت) في أكاديمية المملكة المغربية بالرباط، أنه “لا', 'size': 3}, {'id': '187', 'title': 'الملك: السياسة الخارجية للمملكة المغربية ظلت تسير وفق مقاربة قانونية منهجية قائمة على احترام القانون الدولي ومبادئ ميثاق الأمم المتحدة', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/473545.html', 'summary': 'الملك: السياسة الخارجية للمملكة المغربية ظلت تسير وفق مقاربة قانونية منهجية قائمة على احترام القانون الدولي ومبادئ ميثاق الأمم المتحدة. أكد الملك محمد السادس أن السياسة الخارجية للمملكة المغربية، ظلت تسير وفق مقاربة قانونية منهجية قائمة على احترام القانون الدولي ومبادئ ميثاق الأمم المتحدة. وأوضح الملك في الرسالة الموجهة إلى المشاركين في الدورة الثانية والثمانين لمعهد القانون الدولي، التي افتتحت أشغالها اليوم الأحد بأكاديمية المملكة المغربية بالرباط، أنه “لا سبيل لضمان استمرار أي نظام دون …', 'size': 3}, {'id': '218', 'title': 'جلالة الملك: السياسة الخارجية للمملكة ظلت تسير وفق مقاربة قانونية منهجية قائمة على احترام القانون الدولي ومبادئ الأمم المتحدة', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/226290/', 'summary': 'جلالة الملك: السياسة الخارجية للمملكة ظلت تسير وفق مقاربة قانونية منهجية قائمة على احترام القانون الدولي ومبادئ الأمم المتحدة. أكد صاحب الجلالة الملك محمد السادس أن السياسة الخارجية للمملكة المغربية ظلت تسير وفق مقاربة قانونية منهجية قائمة على احترام القانون الدولي ومبادئ ميثاق الأمم المتحدة. وأوضح جلالة الملك في الرسالة السامية الموجهة إلى المشاركين في الدورة الثانية والثمانين لمعهد القانون الدولي، التي افتتحت أشغالها اليوم الأحد بأكاديمية المملكة المغربية بالرباط، أنه “لا سبيل لضمان', 'size': 3}], 'main_title': 'جلالة الملك: السياسة الخارجية للمغرب قائمة على احترام القانون الدولي وميثاق الأمم المتحدة'}, {'community_id': '6', 'articles': [{'id': '141', 'title': 'مطار محمد الخامس.. توقيف مواطن تركي يشكل موضوع أمر دولي بإلقاء القبض', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/321623/', 'summary': 'مطار محمد الخامس.. توقيف مواطن تركي يشكل موضوع أمر دولي بإلقاء القبض. تمكنت عناصر الأمن الوطني بمطار محمد الخامس الدولي بمدينة الدار البيضاء، أول أمس الجمعة، من توقيف مواطن تركي يبلغ من العمر 43 سنة، كان يشكل موضوع أمر دولي بإلقاء القبض صادر في حقه من طرف السلطات القضائية بألمانيا.\u200e وبحسب مصدر أمني، فقد جرى توقيف المعني بالأمر مباشرة بعد وصوله على متن رحلة جوية كانت قادمة', 'size': 5}, {'id': '174', 'title': 'توقيف تركي في مطار الدار البيضاء مطلوب من ألمانيا في قضية كوكايين', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%aa%d9%88%d9%82%d9%8a%d9%81-%d8%aa%d8%b1%d9%83%d9%8a-%d9%81%d9%8a-%d9%85%d8%b7%d8%a7%d8%b1-%d8%a7%d9%84%d8%b8%d8%a7%d8%b1-%d8%a7%d9%84%d8%a8%d9%8a%d8%b6%d8%a7%d8%a1-%d9%85%d8%b7%d9%84%d9%88%d8%a8/', 'summary': 'توقيف تركي في مطار الدار البيضاء مطلوب من ألمانيا في قضية كوكايين. تمكنت عناصر الأمن الوطني بمطار محمد الخامس الدولي بمدينة الدار البيضاء، أول أمس الجمعة، من توقيف مواطن تركي يبلغ من العمر 43 سنة، كان يشكل موضوع أمر دولي بإلقاء القبض صادر في حقه من طرف السلطات القضائية بألمانيا.\u200e وقد جرى توقيف المعني بالأمر مباشرة بعد وصوله على متن رحلة جوية كانت قادمة من تركيا،  توقيف تركي في مطار الدار البيضاء مطلوب من ألمانيا في قضية كوكايين     .', 'size': 4}, {'id': '189', 'title': 'توقيف مواطن تركي بمطار محمد الخامس يشكل موضوع أمر دولي', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/473539.html', 'summary': 'توقيف مواطن تركي بمطار محمد الخامس يشكل موضوع أمر دولي. تمكنت عناصر الأمن الوطني بمطار محمد الخامس الدولي بمدينة الدار البيضاء، أول أمس الجمعة، من توقيف مواطن تركي يبلغ من العمر 43 سنة، كان يشكل موضوع أمر دولي بإلقاء القبض صادر في حقه من طرف السلطات القضائية بألمانيا.\u200e وبحسب ما أكدت مصادر أمنية، فقد جرى توقيف المعني بالأمر مباشرة بعد وصوله على متن رحلة جوية …', 'size': 4}, {'id': '215', 'title': 'توقيف مواطن تركي مطلوب دوليا لألمانيا بتهم الاتجار في الكوكايين', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/226298/', 'summary': 'توقيف مواطن تركي مطلوب دوليا لألمانيا بتهم الاتجار في الكوكايين. تمكنت عناصر الأمن الوطني بمطار محمد الخامس الدولي بمدينة الدار البيضاء، أول أمس الجمعة، من توقيف مواطن تركي يبلغ من العمر 43 سنة، كان يشكل موضوع أمر دولي بإلقاء القبض صادر في حقه من طرف السلطات القضائية بألمانيا. وبحسب مصدر أمني، فقد جرى توقيف المعني بالأمر مباشرة بعد وصوله على متن رحلة جوية كانت قادمة', 'size': 5}, {'id': '227', 'title': 'توقيف مواطن تركي بمطار محمد الخامس مبحوث عنه من طرف السلطات الألمانية', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%aa%d9%88%d9%82%d9%8a%d9%81-%d9%85%d9%88%d8%a7%d8%b7%d9%86-%d8%aa%d8%b1%d9%83%d9%8a-%d8%a8%d9%85%d8%b7%d8%a7%d8%b1-%d9%85%d8%ad%d9%85%d8%af-%d8%a7%d9%84%d8%ae%d8%a7%d9%85%d8%b3-%d9%85%d8%a8%d8%ad/', 'summary': 'توقيف مواطن تركي بمطار محمد الخامس مبحوث عنه من طرف السلطات الألمانية. تمكنت عناصر الأمن الوطني بمطار محمد الخامس الدولي بمدينة الدار البيضاء، أول أمس الجمعة 22 غشت الجاري، من توقيف مواطن تركي يبلغ من العمر 43 سنة، كان يشكل موضوع أمر دولي بإلقاء القبض صادر في حقه من طرف السلطات القضائية بألمانيا.\u200e وكشفت مصادر أمنية، أنه جرى توقيف المعني بالأمر مباشرة بعد وصوله على …  توقيف مواطن تركي بمطار محمد الخامس مبحوث عنه من طرف السلطات الألمانية     .', 'size': 5}], 'main_title': 'مطار محمد الخامس.. توقيف مواطن تركي يشكل موضوع أمر دولي بإلقاء القبض'}, {'community_id': '7', 'articles': [{'id': '146', 'title': '“أنا حرة” تخرج من عباءة السباق الرمضاني', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/321606/', 'summary': '“أنا حرة” تخرج من عباءة السباق الرمضاني. استهلت قناة “ام بي سي5″، الترويج للمسلسل الدرامي الجديد “أنا حرة“ الذي تقرر عرضه خارج الموسم الرمضاني، ليخوض بذلك تجربة فنية مختلفة بعيدة عن زخم السباق الدرامي المعتاد في الشهر الفضيل. ويجمع العمل الذي ينتظره جمهور الدراما، في بطولته كل من الممثل أمين الناجي والممثلة كريمة غيث، فيما عاد الإخراج لأحمد أكتاروس، في تجربة يتوقع', 'size': 2}, {'id': '337', 'title': '“إم بي سي5” تعرض “أنا حرة” خارج السباق الرمضاني', 'source': 'machahid24.com', 'link': 'https://machahid24.com/panorama/473512.html', 'summary': '“إم بي سي5” تعرض “أنا حرة” خارج السباق الرمضاني. قررت قناة “إم بي سي5” عرض الجزء الأول من مسلسلها الجديد “أنا حرة”، للمخرج أحمد أكساس الشهير بـ”أكتاروس”، خارج الموسم الرمضاني، وذلك عبر شاشتها ومنصة “شاهد”. وشرعت القناة في الترويج للعمل من خلال “بوستر” خاص يجمع بطلة العمل كريمة غيث إلى جانب الفنان أمين الناجي. ويُصنف “أنا حرة” كدراما اجتماعية تسلط الضوء على قضايا النساء …', 'size': 2}], 'main_title': '“أنا حرة” تخرج من عباءة السباق الرمضاني'}, {'community_id': '8', 'articles': [{'id': '164', 'title': 'الملك يؤكد حرص المغرب على تعزيز علاقاته مع أوكرانيا', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1094930.html', 'summary': 'الملك يؤكد حرص المغرب على تعزيز علاقاته مع أوكرانيا. بعث الملك محمد السادس برقية تهنئة إلى فولوديمير زيلينسكي، رئيس أوكرانيا، وذلك بمناسبة العيد الوطني لبلاده. ومما جاء في برقية الملك “يطيب لي بمناسبة العيد الوطني لدولة أوكرانيا أن أبعث إليكم بأحر التهاني، مقرونة بأصدق المتمنيات للشعب الأوكراني بالرخاء والازدهار في ظل الأمن والسلام”. وأضاف الملك “وأغتنم هذه المناسبة لأعرب لكم عن ارتياحي لما يجمع ظهرت المقالة الملك يؤكد حرص المغرب على تعزيز علاقاته مع أوكرانيا  .', 'size': 2}, {'id': '214', 'title': 'الملك محمد السادس يراسل زيلينسكي', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%85%d8%ad%d9%85%d8%af-%d8%a7%d9%84%d8%b3%d8%a7%d8%af%d8%b3-%d9%8a%d8%b1%d8%a7%d8%b3%d9%84-%d8%b2%d9%8a%d9%84%d9%8a%d9%86%d8%b3%d9%83%d9%8a/', 'summary': 'الملك محمد السادس يراسل زيلينسكي. الملك محمد السادس يراسل زيلينسكي  – و م ع بعث الملك محمد السادس برقية تهنئة إلى فولوديمير زيلينسكي، رئيس أوكرانيا، وذلك بمناسبة العيد الوطني لبلاده. ومما جاء في...  الملك محمد السادس يراسل زيلينسكي     .', 'size': 2}, {'id': '228', 'title': 'الملك محمد السادس يهنئ الرئيس الأوكراني بمناسبة العيد الوطني لبلاده', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%85%d8%ad%d9%85%d8%af-%d8%a7%d9%84%d8%b3%d8%a7%d8%af%d8%b3-%d9%8a%d9%87%d9%86%d8%a6-%d8%a7%d9%84%d8%b1%d8%a6%d9%8a%d8%b3-%d8%a7%d9%84%d8%a3%d9%88%d9%83%d8%b1%d8%a7/', 'summary': 'الملك محمد السادس يهنئ الرئيس الأوكراني بمناسبة العيد الوطني لبلاده. بعث الملك محمد السادس برقية تهنئة إلى فولوديمير زيلينسكي، رئيس أوكرانيا، وذلك بمناسبة العيد الوطني لبلاده. ومما جاء في برقية الملك محمد السادس “يطيب لي بمناسبة العيد الوطني لدولة أوكرانيا أن أبعث إليكم بأحر التهاني، مقرونة بأصدق المتمنيات للشعب الأوكراني بالرخاء والازدهار في ظل الأمن والسلام”. وأضاف الملك محمد السادس “وأغتنم هذه المناسبة …  الملك محمد السادس يهنئ الرئيس الأوكراني بمناسبة العيد الوطني لبلاده     .', 'size': 3}], 'main_title': 'الملك محمد السادس يهنئ الرئيس الأوكراني بمناسبة العيد الوطني لبلاده'}, {'community_id': '10', 'articles': [{'id': '167', 'title': 'تهديد داخل مسجد بالدار البيضاء.. الأمن يوقف شابا ويكشف معاناته النفسية', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%aa%d9%87%d8%af%d9%8a%d8%af-%d8%af%d8%a7%d8%ae%d9%84-%d9%85%d8%b3%d8%ac%d8%af-%d8%a8%d8%a7%d9%84%d8%af%d8%a7%d8%b1-%d8%a7%d9%84%d8%a8%d9%8a%d8%b6%d8%a7%d8%a1-%d8%a7%d9%84%d8%a3%d9%85%d9%86-%d9%8a/', 'summary': 'تهديد داخل مسجد بالدار البيضاء.. الأمن يوقف شابا ويكشف معاناته النفسية. تمكنت عناصر الشرطة بمنطقة البرنوصي بولاية أمن الدار البيضاء، مساء الأحد، من توقيف شخص يبلغ من العمر 28 سنة، تظهر عليه علامات الخلل العقلي، وذلك في أعقاب نشره لشريط فيديو يهدد فيه بارتكاب جنايات ضد الأشخاص بمسجد الأندلس بمنطقة أناسي بالدار البيضاء. وكانت مصالح اليقظة المعلوماتية للأمن الوطني قد رصدت شريط التهديد الذي  تهديد داخل مسجد بالدار البيضاء.. الأمن يوقف شابا ويكشف معاناته النفسية     .', 'size': 3}, {'id': '285', 'title': 'ظهر في فيديو يهدد فيه بارتكاب جنايات ضد الأشخاص بمسجد.. أمن كازا يوقف مختلا عقليا في منطقة البرنوصي', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%b8%d9%87%d8%b1-%d9%81%d9%8a-%d9%81%d9%8a%d8%af%d9%8a%d9%88-%d9%8a%d9%87%d8%af%d8%af-%d9%81%d9%8a%d9%87-%d8%a8%d8%a7%d8%b1%d8%aa%d9%83%d8%a7%d8%a8-%d8%ac%d9%86%d8%a7%d9%8a%d8%a7%d8%aa-%d8%b6%d8%af/', 'summary': 'ظهر في فيديو يهدد فيه بارتكاب جنايات ضد الأشخاص بمسجد.. أمن كازا يوقف مختلا عقليا في منطقة البرنوصي. تمكنت عناصر الشرطة بمنطقة البرنوصي بولاية أمن الدار البيضاء، مساء الأحد (24 غشت)، من توقيف شخص يبلغ من العمر 28 سنة، تظهر عليه علامات الخلل العقلي، وذلك في أعقاب نشره لشريط فيديو يهدد فيه بارتكاب جنايات ضد الأشخاص بمسجد الأندلس بمنطقة أناسي بالدار البيضاء. وأفاد مصدر أمني، أن مصالح اليقظة المعلوماتية للأمن الوطني رصدت شريط', 'size': 3}, {'id': '302', 'title': 'توقيف شاب نشر فيديو يهدد فيه بارتكاب جنايات داخل مسجد بالبيضاء', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/321638/', 'summary': 'توقيف شاب نشر فيديو يهدد فيه بارتكاب جنايات داخل مسجد بالبيضاء. تمكنت عناصر الشرطة بمنطقة البرنوصي بولاية أمن الدار البيضاء، مساء أمس الأحد، من توقيف شخص يبلغ من العمر 28 سنة، تظهر عليه علامات الخلل العقلي، وذلك في أعقاب نشره لشريط فيديو يهدد فيه بارتكاب جنايات ضد الأشخاص بمسجد الأندلس بمنطقة أناسي بالدار البيضاء. وكانت مصالح اليقظة المعلوماتية للأمن الوطني قد رصدت شريط التهديد الذي نشره', 'size': 3}], 'main_title': 'تهديد داخل مسجد بالدار البيضاء.. الأمن يوقف شابا ويكشف معاناته النفسية'}, {'community_id': '3', 'articles': [{'id': '168', 'title': 'الملك: الدبلوماسية المغربية تقوم على "القانون الدولي" و"لا سبيل لضمان استمرار أي نظام دون قواعد ضابطة"', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a7%d9%84%d9%85%d9%84%d9%83-%d8%a7%d9%84%d8%af%d8%a8%d9%84%d9%88%d9%85%d8%a7%d8%b3%d9%8a%d8%a9-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8%d9%8a%d8%a9-%d8%aa%d9%82%d9%88%d9%85-%d8%b9%d9%84%d9%89-%d8%a7/', 'summary': 'الملك: الدبلوماسية المغربية تقوم على "القانون الدولي" و"لا سبيل لضمان استمرار أي نظام دون قواعد ضابطة". أكد الملك محمد السادس أن السياسة الخارجية للمغرب ظلت تسير وفق مقاربة قانونية منهجية، قائمة على احترام القانون الدولي ومبادئ ميثاق الأمم المتحدة. وأوضح في الرسالة الموجهة إلى المشاركين في الدورة الـ82 لمعهد القانون الدولي، المنعقدة الأحد بأكاديمية المملكة بالرباط، أنه "لا سبيل لضمان استمرار أي نظام دون قواعد ضابطة، وعلى أساس هذه القناعة يرتكز  الملك: الدبلوماسية المغربية تقوم على "القانون الدولي" و"لا سبيل لضمان استمرار أي نظام دون قواعد ضابطة"     .', 'size': 2}, {'id': '217', 'title': 'الملك محمد السادس: المغرب يرسخ الدبلوماسية على أسس القانون الدولي في عالم مضطرب', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/226293/', 'summary': 'الملك محمد السادس: المغرب يرسخ الدبلوماسية على أسس القانون الدولي في عالم مضطرب. في رسالة سامية وُجّهت إلى المشاركين في الدورة الثانية والثمانين لمعهد القانون الدولي، المنعقدة بالرباط، أكد صاحب الجلالة الملك محمد السادس أن السياسة الخارجية للمملكة المغربية ظلت ثابتة على نهج واضح وراسخ، يقوم على احترام القانون الدولي ومبادئ ميثاق الأمم المتحدة. جلالته شدد على أن أي نظام دولي لا يمكن أن يستمر دون قواعد ضابطة،', 'size': 2}], 'main_title': 'الملك: الدبلوماسية المغربية تقوم على "القانون الدولي" و"لا سبيل لضمان استمرار أي نظام دون قواعد ضابطة"'}, {'community_id': '11', 'articles': [{'id': '171', 'title': 'بنكيران: لسنا انقلابيين ولا ثوريين.. رسالتنا الإصلاح لا الغنائم', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a8%d9%86%d9%83%d9%8a%d8%b1%d8%a7%d9%86-%d9%84%d8%b3%d9%86%d8%a7-%d8%a7%d9%86%d9%82%d9%84%d8%a7%d8%a8%d9%8a%d9%8a%d9%86-%d9%88%d9%84%d8%a7-%d8%ab%d9%88%d8%b1%d9%8a%d9%8a%d9%86-%d8%b1%d8%b3%d8%a7/', 'summary': 'بنكيران: لسنا انقلابيين ولا ثوريين.. رسالتنا الإصلاح لا الغنائم. قال عبد الإله بنكيران، الأمين العام لحزب العدالة والتنمية، إن حزبه "ليس انقلابيا ولا ثوريا"، مضيفا في كلمة له خلال اجتماع الأمانة العامة للحزب أمس السبت: "نحمد الله على الأمن والاستقرار، والأوراش التي يقودها جلالة الملك، لكن صورة بلدنا في التعليم والصحة والشغل، وأيضا في مؤشرات الفساد والمخدرات، مزعجة وغير مشرفة". وأكد بنكيران أن خطاب  بنكيران: لسنا انقلابيين ولا ثوريين.. رسالتنا الإصلاح لا الغنائم     .', 'size': 2}, {'id': '206', 'title': 'فيديو.. بنكيران: لا مجال للمجاملة حين يتعلق الأمر باحترام المبادئ الدستورية', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d9%81%d9%8a%d8%af%d9%8a%d9%88-%d8%a8%d9%86%d9%83%d9%8a%d8%b1%d8%a7%d9%86-%d9%84%d8%a7-%d9%85%d8%ac%d8%a7%d9%84-%d9%84%d9%84%d9%85%d8%ac%d8%a7%d9%85%d9%84%d8%a9-%d8%ad%d9%8a%d9%86-%d9%8a%d8%aa/', 'summary': 'فيديو.. بنكيران: لا مجال للمجاملة حين يتعلق الأمر باحترام المبادئ الدستورية. فيديو.. بنكيران: لا مجال للمجاملة حين يتعلق الأمر باحترام المبادئ الدستورية  – متابعات ألقى الأمين العام لحزب العدالة والتنمية عبد الإله بنكيران كلمة مطولة خلال اجتماع الأمانة العامة...  فيديو.. بنكيران: لا مجال للمجاملة حين يتعلق الأمر باحترام المبادئ الدستورية     .', 'size': 2}], 'main_title': 'بنكيران: لسنا انقلابيين ولا ثوريين.. رسالتنا الإصلاح لا الغنائم'}, {'community_id': '5', 'articles': [{'id': '188', 'title': 'الرباط .. افتتاح أشغال الدورة الثانية والثمانين لمعهد القانون الدولي', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/473542.html', 'summary': 'الرباط .. افتتاح أشغال الدورة الثانية والثمانين لمعهد القانون الدولي. افتتحت، اليوم الأحد، بمقر أكاديمية المملكة المغربية بالرباط، أشغال الدورة الثانية والثمانين لمعهد القانون الدولي. وتميزت الجلسة الافتتاحية بالرسالة السامية التي وجهها الملك محمد السادس، إلى المشاركين في هذه الدورة، والتي تلاها رئيس المعهد، محمد بنونة. وستتواصل أشغال الدورة الثانية والثمانين لمعهد القانون الدولي يوم غد الاثنين بجلسات علمية تحتضنها جامعة محمد الخامس، وستتمحور حول …', 'size': 2}, {'id': '219', 'title': 'جلالة الملك يوجه رسالة سامية إلى المشاركين في الدورة الثانية والثمانين لمعهد القانون الدولي', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/226288/', 'summary': 'جلالة الملك يوجه رسالة سامية إلى المشاركين في الدورة الثانية والثمانين لمعهد القانون الدولي. الرباط – وجه صاحب الجلالة الملك محمد السادس، نصره الله، رسالة سامية إلى المشاركين في الدورة الثانية والثمانين لمعهد القانون الدولي، التي انطلقت أشغالها اليوم الأحد بمقر أكاديمية المملكة المغربية بالرباط. وفي ما يلي النص الكامل للرسالة الملكية السامية التي تلاها السيد محمد بنونة، رئيس معهد القانون الدولي. ” الحمد لله، والصلاة والسلام على مـولانا', 'size': 2}, {'id': '225', 'title': 'الملك محمد السادس يوجه رسالة سامية إلى المشاركين في الدورة 82 لمعهد القانون الدولي بالرباط', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%85%d8%ad%d9%85%d8%af-%d8%a7%d9%84%d8%b3%d8%a7%d8%af%d8%b3-%d9%8a%d9%88%d8%ac%d9%87-%d8%b1%d8%b3%d8%a7%d9%84%d8%a9-%d8%b3%d8%a7%d9%85%d9%8a%d8%a9-%d8%a5%d9%84%d9%89-5/', 'summary': 'الملك محمد السادس يوجه رسالة سامية إلى المشاركين في الدورة 82 لمعهد القانون الدولي بالرباط. وجه الملك محمد السادس، رسالة سامية إلى المشاركين في الدورة الثانية والثمانين لمعهد القانون الدولي، التي انطلقت أشغالها اليوم الأحد بمقر أكاديمية المملكة المغربية بالرباط. وفي ما يلي النص الكامل للرسالة الملكية السامية التي تلاها محمد بنونة، رئيس معهد القانون الدولي. ” الحمد لله، والصلاة والسلام على مـولانا رسول الله وآله وصحبه.السيـدات والسادة …  الملك محمد السادس يوجه رسالة سامية إلى المشاركين في الدورة 82 لمعهد القانون الدولي بالرباط     .', 'size': 3}], 'main_title': 'الملك محمد السادس يوجه رسالة سامية إلى المشاركين في الدورة 82 لمعهد القانون الدولي بالرباط'}, {'community_id': '9', 'articles': [{'id': '251', 'title': 'بورصة البيضاء تبدأ التداولات بانخفاض', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d8%a8%d9%88%d8%b1%d8%b5%d8%a9-%d8%a7%d9%84%d8%a8%d9%8a%d8%b6%d8%a7%d8%a1-%d8%aa%d8%a8%d8%af%d8%a3-%d8%a7%d9%84%d8%aa%d8%af%d8%a7%d9%88%d9%84%d8%a7%d8%aa-%d8%a8%d8%a7%d9%86%d8%ae%d9%81%d8%a7%d8%b6-3-1613998.html', 'summary': 'بورصة البيضاء تبدأ التداولات بانخفاض. استهلت بورصة الدار البيضاء تداولاتها اليوم الإثنين على وقع الانخفاض، إذ سجل مؤشرها الرئيسي “مازي” تراجعا بنسبة 0,08 في المائة ليستقر عند 19.966,85 نقطة. وسجل مؤشر “MASI.20″، الذي يعكس أداء 20 مقاولة مدرجة بالبورصة، انخفاضا بنسبة 0,04 في المائة إلى 1.633,91 نقطة، فيما سجل MASI.ESG، مؤشر المقاولات الحاصلة على أفضل تصنيف، خسارة بنسبة 0,12 في  بورصة البيضاء تبدأ التداولات بانخفاض     - هسبريس جريدة إلكترونية مغربية .', 'size': 2}, {'id': '298', 'title': 'تراجع مؤشرات بورصة الدار البيضاء', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/321650/', 'summary': 'تراجع مؤشرات بورصة الدار البيضاء. استهلت بورصة الدار البيضاء تداولاتها اليوم الإثنين على وقع الانخفاض، إذ سجل مؤشرها الرئيسي “مازي” تراجعا بنسبة 0,08 في المائة ليستقر عند 19.966,85 نقطة. وسجل مؤشر “MASI.20″، الذي يعكس أداء 20 مقاولة مدرجة بالبورصة، انخفاضا بنسبة 0,04 في المائة إلى 1.633,91 نقطة، فيما سجل MASI.ESG، مؤشر المقاولات الحاصلة على أفضل تصنيف، خسارة بنسبة 0,12 في', 'size': 2}], 'main_title': 'بورصة البيضاء تبدأ التداولات بانخفاض'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    