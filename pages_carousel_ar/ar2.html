<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 28/06/2025 - 18h25</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '48', 'title': 'دفن الإعلامية والفنانة كوثر بودراجة في صمت تام', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-635149.html', 'summary': 'دفن الإعلامية والفنانة كوثر بودراجة في صمت تام. جرت بعد ظهر اليوم الجمعة مراسم دفن الإعلامية والفنانة المغربية كوثر بودراجة في أجواء طبعها الصمت، بعدما وافتها المنية إثر صراع طويل مع المرض. واختارت عائلة الراحلة إقامة الجنازة في هدوء، بعيدًا عن الأضواء، حيث لم يُعلَن عن خبر وفاتها إلا بعد انتهاء مراسم الدفن، وهو ما حال دون حضور عدد من أصدقائها وزملائها في الوسطين الفني والإعلامي. وكانت كوثر بودراجة قد عانت من مرض عضال لم ينفع معه العلاج، قبل أن تسلم الروح لبارئها اليوم الجمعة، بعد مسيرة مهنية حافلة بالنجاحات، بصمت من خلالها على حضور مميز في مجالي الإعلام والتمثيل، قبل أن ترحل في صمت.', 'size': 2}, {'id': '88', 'title': 'الموت يُغيّب الإعلامية والفنانة المغربية كوثر بودراجة بعد صراع مؤلم مع السرطان', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/culture/408330.html', 'summary': 'الموت يُغيّب الإعلامية والفنانة المغربية كوثر بودراجة بعد صراع مؤلم مع السرطان. في خبر أليم، توفيت صباح اليوم الجمعة، الإعلامية والممثلة المغربية كوثر بودراجة، بعد صراع مرير مع مرض السرطان الذي أنهك جسدها في الشهور الأخيرة، تاركة', 'size': 2}], 'main_title': 'دفن الإعلامية والفنانة كوثر بودراجة في صمت تام'}, {'community_id': '1', 'articles': [{'id': '62', 'title': 'الرباط.. توقيف متطرفة موالية لتنظيم “داعش” الإرهابي للاشتباه في تورطها في الإعداد والتحضير لتنفيذ مخطط إرهابي بالغ الخطورة', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/202680', 'summary': 'الرباط.. توقيف متطرفة موالية لتنظيم “داعش” الإرهابي للاشتباه في تورطها في الإعداد والتحضير لتنفيذ مخطط إرهابي بالغ الخطورة.  تمكن المكتب المركزي للأبحاث القضائية على ضوء معلومات استخباراتية دقيقة وفرتها المديرية العامة لمراقبة التراب الوطني، أمس الجمعة، من توقيف متطرفة موالية لتنظيم “داعش” الإرهابي، تبلغ من العمر 21 سنة وتتابع دراستها في أحد المعاهد التقنية العليا، وذلك للاشتباه في تورطها في الإعداد والتحضير لتنفيذ مخطط إرهابي بالغ الخطورة يستهدف المساس الخطير بالنظام العام.', 'size': 4}, {'id': '181', 'title': 'التعاون الإستخبارات المغربي الفرنسي يطيح بطالبة إرهابية كانت تخطط لإستهداف منشأة دينية بالرباط', 'source': 'rue20.com', 'link': 'https://rue20.com/916409.html', 'summary': 'التعاون الإستخبارات المغربي الفرنسي يطيح بطالبة إرهابية كانت تخطط لإستهداف منشأة دينية بالرباط. . الرباط تمكن المكتب المركزي للأبحاث القضائية على ضوء معلومات استخباراتية دقيقة وفرتها المديرية العامة لمراقبة التراب الوطني، أمس الجمعة، من توقيف متطرفة موالية لتنظيم “داعش” الإرهابي، تبلغ من العمر 21 سنة وتتابع دراستها في أحد المعاهد التقنية العليا، وذلك للاشتباه في تورطها في الإعداد والتحضير لتنفيذ مخطط إرهابي بالغ الخطورة يستهدف المساس الخطير الخبر التعاون الإستخبارات المغربي الفرنسي يطيح بطالبة إرهابية كانت تخطط لإستهداف منشأة دينية بالرباط  .', 'size': 3}, {'id': '218', 'title': 'عاجل.. توقيف طالبة متطرفة موالية لـ”داعش” خططت لتنفيذ هجوم إرهابي بالغ الخطورة', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/223615/', 'summary': 'عاجل.. توقيف طالبة متطرفة موالية لـ”داعش” خططت لتنفيذ هجوم إرهابي بالغ الخطورة. تمكن المكتب المركزي للأبحاث القضائية على ضوء معلومات استخباراتية دقيقة وفرتها المديرية العامة لمراقبة التراب الوطني، أمس الجمعة، من توقيف متطرفة موالية لتنظيم “داعش” الإرهابي، تبلغ من العمر 21 سنة وتتابع دراستها في أحد المعاهد التقنية العليا، وذلك للاشتباه في تورطها في الإعداد والتحضير لتنفيذ مخطط إرهابي بالغ الخطورة يستهدف المساس الخطير بالنظام العام.', 'size': 3}, {'id': '234', 'title': 'ضربة استباقية جديدة.. الأمن المغربي يُجهض مخططًا انتحاريًا تقوده شابة متطرفة', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%b6%d8%b1%d8%a8%d8%a9-%d8%a7%d8%b3%d8%aa%d8%a8%d8%a7%d9%82%d9%8a%d8%a9-%d8%ac%d8%af%d9%8a%d8%af%d8%a9-%d8%a7%d9%84%d8%a3%d9%85%d9%86-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8%d9%8a-%d9%8a%d9%8f%d8%ac/', 'summary': 'ضربة استباقية جديدة.. الأمن المغربي يُجهض مخططًا انتحاريًا تقوده شابة متطرفة. تمكن المكتب المركزي للأبحاث القضائية على ضوء معلومات استخباراتية دقيقة وفرتها المديرية العامة لمراقبة التراب الوطني، أمس الجمعة، من توقيف متطرفة موالية لتنظيم “داعش” الإرهابي، تبلغ من العمر 21 سنة وتتابع دراستها في أحد المعاهد التقنية العليا، وذلك للاشتباه في تورطها في الإعداد والتحضير لتنفيذ مخطط إرهابي بالغ الخطورة يستهدف المساس الخطير بالنظام …  ضربة استباقية جديدة.. الأمن المغربي يُجهض مخططًا انتحاريًا تقوده شابة متطرفة     .', 'size': 2}, {'id': '322', 'title': 'أعدت لمخطط إرهابي.. توقيف متطرفة موالية لـ”داعش” بالرباط', 'source': 'assabah.ma', 'link': 'https://assabah.ma/855987.html', 'summary': 'أعدت لمخطط إرهابي.. توقيف متطرفة موالية لـ”داعش” بالرباط. تمكن المكتب المركزي للأبحاث القضائية على ضوء معلومات استخباراتية دقيقة وفرتها المديرية العامة لمراقبة التراب الوطني، أمس الجمعة، من توقيف متطرفة موالية لتنظيم “داعش” الإرهابي، تبلغ من العمر 21 سنة وتتابع دراستها في أحد المعاهد التقنية العليا، وذلك للاشتباه في تورطها في الإعداد والتحضير لتنفيذ مخطط إرهابيأكمل القراءة » المقالة أعدت لمخطط إرهابي.. توقيف متطرفة موالية لـ”داعش” بالرباط  .', 'size': 3}], 'main_title': 'الرباط.. توقيف متطرفة موالية لتنظيم “داعش” الإرهابي للاشتباه في تورطها في الإعداد والتحضير لتنفيذ مخطط إرهابي بالغ الخطورة'}, {'community_id': '2', 'articles': [{'id': '64', 'title': 'توقيف شخصين بابن جرير بسبب تعريضهما لعناصر الشرطة للإهانة وإحداث الفوضى وتعييب منشأة مخصصة للمنفعة العامة', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/202670', 'summary': 'توقيف شخصين بابن جرير بسبب تعريضهما لعناصر الشرطة للإهانة وإحداث الفوضى وتعييب منشأة مخصصة للمنفعة العامة.  أفادت النيابة العامة لدى المحكمة الابتدائية بابن جرير، بأنه على إثر ما يتم تداوله ببعض مواقع التواصل الاجتماعي من أخبار زائفة عن اعتقال تحكمي مزعوم لشخصين بابن جرير، فإن الأمر يتعلق في حقيقته بتوقيف قانوني لشخصين كانا في حالة سكر علني بين،وقاما بتعريض عناصر الشرطة للإهانة وإحداث الفوضى وتعييب منشآت مخصصة للمنفعة العامة.', 'size': 5}, {'id': '131', 'title': 'إهانة الشرطة وتخريب مقرهم يجر شخصين للاعتقال بابن جرير', 'source': 'assabah.ma', 'link': 'https://assabah.ma/855983.html', 'summary': 'إهانة الشرطة وتخريب مقرهم يجر شخصين للاعتقال بابن جرير. أفادت النيابة العامة لدى المحكمة الابتدائية بابن جرير، بأنه على إثر ما يتم تداوله ببعض مواقع التواصل الاجتماعي من أخبار زائفة عن اعتقال تحكمي مزعوم لشخصين بابن جرير، فإن الأمر يتعلق في حقيقته بتوقيف قانوني لشخصين كانا في حالة سكر علني بين، وقاما بتعريض عناصر الشرطة للإهانةأكمل القراءة » المقالة إهانة الشرطة وتخريب مقرهم يجر شخصين للاعتقال بابن جرير  .', 'size': 4}, {'id': '179', 'title': 'توقيف شخصين بابن جرير عرضا عناصر الشرطة للإهانة وإحداث الفوضى', 'source': 'rue20.com', 'link': 'https://rue20.com/916393.html', 'summary': 'توقيف شخصين بابن جرير عرضا عناصر الشرطة للإهانة وإحداث الفوضى.  الرباط أفادت النيابة العامة لدى المحكمة الابتدائية بابن جرير، بأنه على إثر ما يتم تداوله ببعض مواقع التواصل الاجتماعي من أخبار زائفة عن اعتقال تحكمي مزعوم لشخصين بابن جرير، فإن الأمر يتعلق في حقيقته بتوقيف قانوني لشخصين كانا في حالة سكر علني بين، وقاما بتعريض عناصر الشرطة للإهانة وإحداث الفوضى وتعييب منشآت مخصصة للمنفعة الخبر توقيف شخصين بابن جرير عرضا عناصر الشرطة للإهانة وإحداث الفوضى  .', 'size': 5}, {'id': '191', 'title': 'توقيف شخصين بابن جرير بسبب تعريضهما لعناصر الشرطة للإهانة وإحداث الفوضى', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/467783.html', 'summary': 'توقيف شخصين بابن جرير بسبب تعريضهما لعناصر الشرطة للإهانة وإحداث الفوضى. أفادت النيابة العامة لدى المحكمة الابتدائية بابن جرير، بأنه على إثر ما يتم تداوله ببعض مواقع التواصل الاجتماعي من أخبار زائفة عن اعتقال تحكمي مزعوم لشخصين بابن جرير، فإن الأمر يتعلق في حقيقته بتوقيف قانوني لشخصين كانا في حالة سكر علني بين، وقاما بتعريض عناصر الشرطة للإهانة وإحداث الفوضى وتعييب منشآت مخصصة للمنفعة العامة. وأوضح …', 'size': 4}, {'id': '242', 'title': 'النيابة العامة بابن جرير توضح بخصوص توقيف شخصين في قضية سكر علني وإهانة عناصر شرطة', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d9%86%d9%8a%d8%a7%d8%a8%d8%a9-%d8%a7%d9%84%d8%b9%d8%a7%d9%85%d8%a9-%d8%a8%d8%a7%d8%a8%d9%86-%d8%ac%d8%b1%d9%8a%d8%b1-%d8%aa%d9%88%d8%b6%d8%ad-%d8%a8%d8%ae%d8%b5%d9%88%d8%b5-%d8%aa%d9%88/', 'summary': 'النيابة العامة بابن جرير توضح بخصوص توقيف شخصين في قضية سكر علني وإهانة عناصر شرطة. أفادت النيابة العامة لدى المحكمة الابتدائية بابن جرير، بأنه على إثر ما يتم تداوله ببعض مواقع التواصل الاجتماعي من أخبار زائفة عن اعتقال تحكمي مزعوم لشخصين بابن جرير، فإن الأمر يتعلق في حقيقته بتوقيف قانوني لشخصين كانا في حالة سكر علني بين، وقاما بتعريض عناصر الشرطة للإهانة وإحداث الفوضى وتعييب منشآت مخصصة للمنفعة …  النيابة العامة بابن جرير توضح بخصوص توقيف شخصين في قضية سكر علني وإهانة عناصر شرطة     .', 'size': 5}], 'main_title': 'توقيف شخصين بابن جرير بسبب تعريضهما لعناصر الشرطة للإهانة وإحداث الفوضى وتعييب منشأة مخصصة للمنفعة العامة'}, {'community_id': '3', 'articles': [{'id': '154', 'title': 'تحذير دولي: تراجع التطعيم يعرض ملايين الأطفال لأمراض قاتلة', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1081209.html', 'summary': 'تحذير دولي: تراجع التطعيم يعرض ملايين الأطفال لأمراض قاتلة. تشهد عملية تلقيح الأطفال ضد الأمراض التي قد تكون مميتة تراجعا في العالم، بحسب دراسة حديثة نشرت في مجلة “ذي لانست”. وعزت الدراسة، التي تستعرض تلقيح الأطفال بين عامي 1980 و2023 في 204 دولة وإقليما، هذا التراجع لاستمرار التفاوتات الاقتصادية، والاضطرابات المرتبطة بمرحلة كوفيد، وانتشار معلومات مضللة بشأن اللقاحات، ما يعرض حياة ملايين الأشخاص للخطر. ظهرت المقالة تحذير دولي: تراجع التطعيم يعرض ملايين الأطفال لأمراض قاتلة  .', 'size': 2}, {'id': '236', 'title': 'تراجع تلقيح الأطفال عالميا يهدد حياة الملايين ويُنبئ بعودة أمراض منسية', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%aa%d8%b1%d8%a7%d8%ac%d8%b9-%d8%aa%d9%84%d9%82%d9%8a%d8%ad-%d8%a7%d9%84%d8%a3%d8%b7%d9%81%d8%a7%d9%84-%d8%b9%d8%a7%d9%84%d9%85%d9%8a%d8%a7-%d9%8a%d9%87%d8%af%d8%af-%d8%ad%d9%8a%d8%a7%d8%a9-%d8%a7/', 'summary': 'تراجع تلقيح الأطفال عالميا يهدد حياة الملايين ويُنبئ بعودة أمراض منسية. كشفت دراسة حديثة نُشرت في مجلة “ذي لانست” عن تراجع مقلق في وتيرة تلقيح الأطفال عبر العالم، محذّرة من أن هذا الانخفاض يعرض حياة ملايين الأشخاص للخطر، ويهدد بموجات جديدة من تفشي أمراض يمكن الوقاية منها. وشملت الدراسة، التي غطت الفترة ما بين 1980 و2023، بيانات من 204 دول وأقاليم، وأرجعت هذا التراجع …  تراجع تلقيح الأطفال عالميا يهدد حياة الملايين ويُنبئ بعودة أمراض منسية     .', 'size': 2}], 'main_title': 'تحذير دولي: تراجع التطعيم يعرض ملايين الأطفال لأمراض قاتلة'}, {'community_id': '4', 'articles': [{'id': '166', 'title': 'حالة الطقس: ارتفاع الحرارة مع زخات رعدية', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%ad%d8%a7%d9%84%d8%a9-%d8%a7%d9%84%d8%b7%d9%82%d8%b3-%d8%a7%d8%b1%d8%aa%d9%81%d8%a7%d8%b9-%d8%a7%d9%84%d8%ad%d8%b1%d8%a7%d8%b1%d8%a9-%d9%85%d8%b9-%d8%b2%d8%ae%d8%a7%d8%aa-%d8%b1%d8%b9%d8%af%d9%8a/', 'summary': 'حالة الطقس: ارتفاع الحرارة مع زخات رعدية. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليوم السبت، استمرار الطقس الحار إلى محليا جد حار بكل من السواحل والسهول الشمالية والوسطى ومناطق الأطلس الصغير، وأقصى الجنوب الشرقي للبلاد، وداخل الأقاليم الجنوبية. ويرتقب أيضا، تشكل خلايا رعدية ستعطي قطرات مطرية متفرقة أو زخات فوق كل من مناطق الأطلسين الكبير والمتوسط، وجنوب المنطقة الشرقية ومن المحتمل منطقة  حالة الطقس: ارتفاع الحرارة مع زخات رعدية     .', 'size': 2}, {'id': '217', 'title': 'طقس السبت.. استمرار حرارة الجو مع قطرات مطرية في بعض المناطق', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/223617/', 'summary': 'طقس السبت.. استمرار حرارة الجو مع قطرات مطرية في بعض المناطق. كواليس اليوم تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليوم السبت، استمرار الطقس الحار إلى محليا جد حار بكل من السواحل والسهول الشمالية والوسطى ومناطق الأطلس الصغير، وأقصى الجنوب الشرقي للبلاد، وداخل الأقاليم الجنوبية. ويرتقب أيضا، تشكل خلايا رعدية ستعطي قطرات مطرية متفرقة أو زخات فوق كل من مناطق الأطلسين الكبير والمتوسط، وجنوب المنطقة الشرقية', 'size': 3}, {'id': '238', 'title': 'أجواء حارة وزخات رعدية اليوم السبت', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a3%d8%ac%d9%88%d8%a7%d8%a1-%d8%ad%d8%a7%d8%b1%d8%a9-%d9%88%d8%b2%d8%ae%d8%a7%d8%aa-%d8%b1%d8%b9%d8%af%d9%8a%d8%a9-%d8%a7%d9%84%d9%8a%d9%88%d9%85-%d8%a7%d9%84%d8%b3%d8%a8%d8%aa/', 'summary': 'أجواء حارة وزخات رعدية اليوم السبت. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليومه السبت، استمرار الطقس الحار إلى محليا جد حار بكل من السواحل والسهول الشمالية والوسطى ومناطق الأطلس الصغير، وأقصى الجنوب الشرقي للبلاد، وداخل الأقاليم الجنوبية. ويرتقب أيضا، تشكل خلايا رعدية ستعطي قطرات مطرية متفرقة أو زخات فوق كل من مناطق الأطلسين الكبير والمتوسط، وجنوب المنطقة الشرقية ومن …  أجواء حارة وزخات رعدية اليوم السبت     .', 'size': 3}, {'id': '359', 'title': 'توقعات أحوال الطقس لليوم السبت', 'source': 'soltana.ma', 'link': 'https://soltana.ma/1357481.html', 'summary': 'توقعات أحوال الطقس لليوم السبت. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم السبت، استمرار الطقس الحار إلى محليا جد حار بكل من السواحل والسهول الشمالية والوسطى ومناطق الأطلس الصغير، وأقصى الجنوب الشرقي للبلاد، وداخل الأقاليم الجنوبية. ويرتقب أيضا، تشكل خلايا رعدية ستعطي قطرات مطرية متفرقة أو زخات فوق كل من مناطق الأطلسين الكبير والمتوسط، وجنوب المنطقة الشرقية ومن المحتمل منطقة', 'size': 4}], 'main_title': 'توقعات أحوال الطقس لليوم السبت'}, {'community_id': '6', 'articles': [{'id': '263', 'title': 'قيوح: التعاون مع إفريقيا أولوية ملكية', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d9%82%d9%8a%d9%88%d8%ad-%d8%a7%d9%84%d8%aa%d8%b9%d8%a7%d9%88%d9%86-%d9%85%d8%b9-%d8%a5%d9%81%d8%b1%d9%8a%d9%82%d9%8a%d8%a7-%d8%a3%d9%88%d9%84%d9%88%d9%8a%d8%a9-%d9%85%d9%84%d9%83%d9%8a%d8%a9-1583578.html', 'summary': 'قيوح: التعاون مع إفريقيا أولوية ملكية. أكد عبد الصمد قيوح، وزير النقل واللوجستيك، اليوم السبت بإسطنبول، أن المغرب، تحت القيادة المتبصرة للملك محمد السادس، جعل من التعاون الإفريقي محورا رئيسيا في سياسته الخارجية ونموذجه التنموي. وأوضح قيوح، في مداخلة له خلال جلسة رفيعة المستوى نُظّمت تحت عنوان “إطلاق إمكانات إفريقيا في مجال الربط”، في إطار منتدى الربط العالمي للنقل، أن المملكة  قيوح: التعاون مع إفريقيا أولوية ملكية     - هسبريس جريدة إلكترونية مغربية .', 'size': 2}, {'id': '318', 'title': 'منتدى إسطنبول.. المغرب يستعرض رؤيته لتكامل القارة الإفريقية', 'source': 'kifache.com', 'link': 'https://kifache.com/%d9%85%d9%86%d8%aa%d8%af%d9%89-%d8%a5%d8%b3%d8%b7%d9%86%d8%a8%d9%88%d9%84-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d9%8a%d8%b3%d8%aa%d8%b9%d8%b1%d8%b6-%d8%b1%d8%a4%d9%8a%d8%aa%d9%87-%d9%84%d8%aa%d9%83/', 'summary': 'منتدى إسطنبول.. المغرب يستعرض رؤيته لتكامل القارة الإفريقية. أكد عبد الصمد قيوح، وزير النقل واللوجستيك، اليوم السبت (28 يونيو) من إسطنبول، أن المغرب، بقيادة جلالة الملك محمد السادس، جعل من التعاون الإفريقي حجر الزاوية في سياسته الخارجية ونموذجه التنموي. وأوضح قيوح، خلال جلسة رفيعة المستوى نظمت تحت عنوان «إطلاق إمكانات إفريقيا في مجال الربط»، ضمن منتدى الربط العالمي للنقل، أن المملكة تؤمن بضرورة', 'size': 2}, {'id': '396', 'title': 'قيوح: المغرب بقيادة جلالة الملك جعل من التعاون الإفريقي محورا رئيسيا في سياسته الخارجية', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/223654/', 'summary': 'قيوح: المغرب بقيادة جلالة الملك جعل من التعاون الإفريقي محورا رئيسيا في سياسته الخارجية. وكالات أكد وزير النقل واللوجستيك، عبد الصمد قيوح، اليوم السبت بإسطنبول، أن المغرب، تحت القيادة المتبصرة لصاحب الجلالة الملك محمد السادس، جعل من التعاون الإفريقي محورا رئيسيا في سياسته الخارجية ونموذجه التنموي. وأوضح قيوح، في مداخلة له خلال جلسة رفيعة المستوى نُظمت تحت عنوان “إطلاق إمكانات إفريقيا في مجال الربط”، في إطار منتدى الربط', 'size': 3}], 'main_title': 'قيوح: المغرب بقيادة جلالة الملك جعل من التعاون الإفريقي محورا رئيسيا في سياسته الخارجية'}, {'community_id': '7', 'articles': [{'id': '272', 'title': 'مطار البيضاء يضبط مهرب كوكايين', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d9%85%d8%b7%d8%a7%d8%b1-%d8%a7%d9%84%d8%a8%d9%8a%d8%b6%d8%a7%d8%a1-%d9%8a%d8%b6%d8%a8%d8%b7-%d9%85%d9%87%d8%b1%d8%a8-%d9%83%d9%88%d9%83%d8%a7%d9%8a%d9%8a%d9%86-1583620.html', 'summary': 'مطار البيضاء يضبط مهرب كوكايين. تمكنت عناصر الأمن الوطني بمطار محمد الخامس الدولي بمدينة الدار البيضاء، أمس الجمعة، من توقيف مواطن ينحدر من إحدى دول إفريقيا جنوب الصحراء، يبلغ من العمر 24 سنة، وذلك للاشتباه في تورطه في قضية تتعلق بالتهريب الدولي لمخدر الكوكايين. وقد جرى توقيف المشتبه فيه مباشرة بعد وصوله على متن رحلة جوية قادمة من أحد المطارات  مطار البيضاء يضبط مهرب كوكايين     - هسبريس جريدة إلكترونية مغربية .', 'size': 4}, {'id': '312', 'title': 'الأمن الوطني ينجح في ضبط شحنة مهمة من الكوكايين الخالص قبل دخولها التراب الوطني', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/society/408382.html', 'summary': 'الأمن الوطني ينجح في ضبط شحنة مهمة من الكوكايين الخالص قبل دخولها التراب الوطني. تمكنت عناصر الأمن الوطني بمطار محمد الخامس الدولي بمدينة الدار البيضاء، يوم أمس الجمعة 27 يونيو الجاري، من توقيف مواطن ينحدر من إحدى دول إفريقيا', 'size': 2}, {'id': '319', 'title': 'عثر بحوزته على أزيد من 5 كلغ من الكوكايين.. توقيف إفريقي قادم من أمريكا الجنوبية في مطار محمد الخامس', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%b9%d8%ab%d8%b1-%d8%a8%d8%ad%d9%88%d8%b2%d8%aa%d9%87-%d8%b9%d9%84%d9%89-%d8%a3%d8%b2%d9%8a%d8%af-%d9%85%d9%86-5-%d9%83%d9%84%d8%ba-%d9%85%d9%86-%d8%a7%d9%84%d9%83%d9%88%d9%83%d8%a7%d9%8a%d9%8a/', 'summary': 'عثر بحوزته على أزيد من 5 كلغ من الكوكايين.. توقيف إفريقي قادم من أمريكا الجنوبية في مطار محمد الخامس. تمكنت عناصر الأمن الوطني بمطار محمد الخامس الدولي بمدينة الدار البيضاء، يوم أمس الجمعة (27 يونيو)، من توقيف مواطن ينحدر من إحدى دول إفريقيا جنوب الصحراء، يبلغ من العمر 24 سنة، وذلك للاشتباه في تورطه في قضية تتعلق بالتهريب الدولي لمخدر الكوكايين. وقد جرى توقيف المشتبه فيه مباشرة بعد وصوله على متن رحلة جوية قادمة', 'size': 5}, {'id': '353', 'title': '5.6 كيلو من الكوكايين بحوزة مسافر وصل مطار محمد الخامس قادما من أمريكا الجنوبية', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/5-6-%d9%83%d9%8a%d9%84%d9%88-%d9%85%d9%86-%d8%a7%d9%84%d9%83%d9%88%d9%83%d8%a7%d9%8a%d9%8a%d9%86-%d8%a8%d8%ad%d9%88%d8%b2%d8%a9-%d9%85%d8%b3%d8%a7%d9%81%d8%b1-%d9%88%d8%b5%d9%84-%d9%85%d8%b7%d8%a7/', 'summary': '5.6 كيلو من الكوكايين بحوزة مسافر وصل مطار محمد الخامس قادما من أمريكا الجنوبية. تمكنت عناصر الأمن الوطني بمطار محمد الخامس الدولي بمدينة الدار البيضاء، أمس الجمعة، من توقيف مواطن ينحدر من إحدى دول إفريقيا جنوب الصحراء، يبلغ من العمر 24 سنة، وذلك للاشتباه في تورطه في قضية تتعلق بالتهريب الدولي لمخدر الكوكايين. وقد جرى توقيف المشتبه فيه، وفق مصدر أمني، مباشرة بعد وصوله على متن رحلة جوية قادمة  5.6 كيلو من الكوكايين بحوزة مسافر وصل مطار محمد الخامس قادما من أمريكا الجنوبية     .', 'size': 4}, {'id': '403', 'title': 'مطار محمد الخامس.. توقيف إفريقي قادم من أمريكا الجنوبية بحوزته كوكايين', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d9%85%d8%b7%d8%a7%d8%b1-%d9%85%d8%ad%d9%85%d8%af-%d8%a7%d9%84%d8%ae%d8%a7%d9%85%d8%b3-%d8%aa%d9%88%d9%82%d9%8a%d9%81-%d8%a5%d9%81%d8%b1%d9%8a%d9%82%d9%8a-%d9%82%d8%a7%d8%af%d9%85-%d9%85%d9%86/', 'summary': 'مطار محمد الخامس.. توقيف إفريقي قادم من أمريكا الجنوبية بحوزته كوكايين. تمكنت عناصر الأمن الوطني بمطار محمد الخامس الدولي بمدينة الدار البيضاء، أمس الجمعة، من توقيف مواطن ينحدر من إحدى دول إفريقيا جنوب الصحراء، يبلغ من العمر 24 سنة، وذلك للاشتباه في تورطه في قضية تتعلق بالتهريب الدولي لمخدر الكوكايين. وقد جرى توقيف المشتبه فيه مباشرة بعد وصوله على متن رحلة جوية قادمة من …  مطار محمد الخامس.. توقيف إفريقي قادم من أمريكا الجنوبية بحوزته كوكايين     .', 'size': 4}], 'main_title': 'عثر بحوزته على أزيد من 5 كلغ من الكوكايين.. توقيف إفريقي قادم من أمريكا الجنوبية في مطار محمد الخامس'}, {'community_id': '8', 'articles': [{'id': '300', 'title': 'سور ثانوية ينهار على خمسيني وقطيعه بتيموليلت ويخلف مأساة صادمة', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/society/408369.html', 'summary': 'سور ثانوية ينهار على خمسيني وقطيعه بتيموليلت ويخلف مأساة صادمة. لقي رجل خمسيني مصرعه، صباح السبت 28 يونيو الجاري، إثر انهيار جزء من سور ثانوية عمر بن عبد العزيز التأهيلية بجماعة تيموليلت، التابعة لإقليم أزيلال،', 'size': 2}, {'id': '402', 'title': 'مقتل راعٍ وأغنامه في انهيار سور متهالك لمؤسسة تعليمية في أزيلال', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d9%85%d9%82%d8%aa%d9%84-%d8%b1%d8%a7%d8%b9%d9%8d-%d9%88%d8%a3%d8%ba%d9%86%d8%a7%d9%85%d9%87-%d9%81%d9%8a-%d8%a7%d9%86%d9%87%d9%8a%d8%a7%d8%b1-%d8%b3%d9%88%d8%b1-%d9%85%d8%aa%d9%87%d8%a7%d9%84%d9%83/', 'summary': 'مقتل راعٍ وأغنامه في انهيار سور متهالك لمؤسسة تعليمية في أزيلال. المساء اليوم – أزيلال: لقي راعي غنم مصرعه، صباح اليوم السبت، جراء انهيار جزء من سور ثانوية عمر بن عبد العزيز التأهيلية بجماعة تيموليلت بإقليم أزيلال. كما لقي نفس المصير قطيع من الغنم كان الهالك،', 'size': 2}], 'main_title': 'سور ثانوية ينهار على خمسيني وقطيعه بتيموليلت ويخلف مأساة صادمة'}, {'community_id': '5', 'articles': [{'id': '399', 'title': 'أديس أبابا.. انطلاق الأطوار الإقصائية للدورة السادسة لمسابقة مؤسسة محمد السادس للعلماء الأفارقة', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/223643/', 'summary': 'أديس أبابا.. انطلاق الأطوار الإقصائية للدورة السادسة لمسابقة مؤسسة محمد السادس للعلماء الأفارقة. و م ع أعطيت، اليوم السبت بأديس أبابا، الانطلاقة الرسمية للأطوار الإقصائية للدورة السادسة لمسابقة مؤسسة محمد السادس للعلماء الأفارقة في حفظ وتلاوة وتجويد القرآن الكريم، بمبادرة من فرع المؤسسة في إثيوبيا. ويشارك في هذه الإقصائيات نحو ستين متسابقا من مختلف أنحاء البلاد، موزعين على أصناف المسابقة الثلاثة، ويتعلق الأمر بالحفظ الكامل مع الترتيل', 'size': 2}, {'id': '404', 'title': 'أديس أبابا.. انطلاق التصفيات الإقصائية للدورة 6 من مسابقة مؤسسة محمد السادس للعلماء الأفارقة في القرآن الكريم', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a3%d8%af%d9%8a%d8%b3-%d8%a3%d8%a8%d8%a7%d8%a8%d8%a7-%d8%a7%d9%86%d8%b7%d9%84%d8%a7%d9%82-%d8%a7%d9%84%d8%aa%d8%b5%d9%81%d9%8a%d8%a7%d8%aa-%d8%a7%d9%84%d8%a5%d9%82%d8%b5%d8%a7%d8%a6%d9%8a%d8%a9/', 'summary': 'أديس أبابا.. انطلاق التصفيات الإقصائية للدورة 6 من مسابقة مؤسسة محمد السادس للعلماء الأفارقة في القرآن الكريم. انطلقت اليوم السبت بالعاصمة الإثيوبية أديس أبابا، بشكل رسمي، التصفيات الإقصائية للدورة السادسة من مسابقة مؤسسة محمد السادس للعلماء الأفارقة في حفظ وتلاوة وتجويد القرآن الكريم، وذلك بمبادرة من فرع المؤسسة في إثيوبيا. وتعرف هذه الإقصائيات مشاركة نحو ستين متسابقا من مختلف أنحاء البلاد، موزعين على أصناف المسابقة الثلاثة، ويتعلق الأمر بالحفظ الكامل …  أديس أبابا.. انطلاق التصفيات الإقصائية للدورة 6 من مسابقة مؤسسة محمد السادس للعلماء الأفارقة في القرآن الكريم     .', 'size': 2}], 'main_title': 'أديس أبابا.. انطلاق الأطوار الإقصائية للدورة السادسة لمسابقة مؤسسة محمد السادس للعلماء الأفارقة'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    