<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 26/08/2025 - 18h29</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '3', 'articles': [{'id': '37', 'title': 'الطقس غدا الثلاثاء.. رياح قوية وأمطار محلية متوقعة على السواحل المغربية', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-651906.html', 'summary': 'الطقس غدا الثلاثاء.. رياح قوية وأمطار محلية متوقعة على السواحل المغربية. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليوم غد الثلاثاء، أن يظل الطقس حارا نسبيا بالجنوب الشرقي للبلاد، مع تمركز سحب ركامية فوق الأطلسين الكبير والمتوسط، والهضاب العليا الشرقية. وسيلاحظ تشكل سحب منخفضة وكثيفة مصحوبة بأمطار خفيفة ومحلية على السواحل الصحراوية الممتدة ما بين تزنيت وبوجدور، وكذا على سواحل البحر الأبيض المتوسط. كما يرتقب تسجيل هبات رياح قوية نوعا ما بكل من السواحل الوسطى، والمنطقة الشرقية، ومرتفعات الأطلس، والجنوب الشرقي وجنوب البلاد، مع تطاير الغبار محليا. وستتراوح درجات الحرارة الدنيا ما بين 23 و28 درجة بالجنوب الشرقي للبلاد، وستكون ما بين 17 و23 درجة في ما تبقى من ربوع المملكة. أما درجات الحرارة خلال النهار، فستكون في ارتفاع بكل من المنطقة الشرقية، والجنوب الشرقي للبلاد والسهول الداخلية، بينما ستشهد بعض الانخفاض الطفيف بباقي الأرجاء. وسيكون البحر هادئا إلى قليل الهيجان بالواجهة المتوسطية، وقليل الهيجان إلى هائج بالبوغاز، وقليل الهيجان إلى هائج ليصبح قوي الهيجان في الصباح الباكر، على السواحل الأطلسية.', 'size': 4}, {'id': '162', 'title': 'طقس الثلاثاء…أجواء حارة بعدد من المناطق', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/321692/', 'summary': 'طقس الثلاثاء…أجواء حارة بعدد من المناطق. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الثلاثاء، أن يظل الطقس حارا نسبيا بالجنوب الشرقي للبلاد، مع تمركز سحب ركامية فوق الأطلسين الكبير والمتوسط، والهضاب العليا الشرقية. وسيلاحظ تشكل سحب منخفضة وكثيفة مصحوبة بأمطار خفيفة ومحلية على السواحل الصحراوية الممتدة ما بين تزنيت وبوجدور، وكذا على سواحل البحر الأبيض المتوسط. كما يرتقب تسجيل هبات رياح', 'size': 4}, {'id': '199', 'title': 'أحوال الطقس.. حرارة بالجنوب الشرقي وأمطار خفيفة على السواحل', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a3%d8%ad%d9%88%d8%a7%d9%84-%d8%a7%d9%84%d8%b7%d9%82%d8%b3-%d8%ad%d8%b1%d8%a7%d8%b1%d8%a9-%d8%a8%d8%a7%d9%84%d8%ac%d9%86%d9%88%d8%a8-%d8%a7%d9%84%d8%b4%d8%b1%d9%82%d9%8a-%d9%88%d8%a3%d9%85%d8%b7/', 'summary': 'أحوال الطقس.. حرارة بالجنوب الشرقي وأمطار خفيفة على السواحل. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الثلاثاء، أن يظل الطقس حارا نسبيا بالجنوب الشرقي للبلاد، مع تمركز سحب ركامية فوق الأطلسين الكبير والمتوسط، والهضاب العليا الشرقية. وسيلاحظ تشكل سحب منخفضة وكثيفة مصحوبة بأمطار خفيفة ومحلية على السواحل الصحراوية الممتدة ما بين تزنيت وبوجدور، وكذا على سواحل البحر الأبيض المتوسط. كما يرتقب تسجيل هبات رياح  أحوال الطقس.. حرارة بالجنوب الشرقي وأمطار خفيفة على السواحل     .', 'size': 4}, {'id': '203', 'title': 'طقس اليوم: أجواء حارة نسبيا بهذه المناطق', 'source': 'soltana.ma', 'link': 'https://soltana.ma/1357681.html', 'summary': 'طقس اليوم: أجواء حارة نسبيا بهذه المناطق. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الثلاثاء، أن يظل الطقس حارا نسبيا بالجنوب الشرقي للبلاد، مع تمركز سحب ركامية فوق الأطلسين الكبير والمتوسط، والهضاب العليا الشرقية. وسيلاحظ تشكل سحب منخفضة وكثيفة مصحوبة بأمطار خفيفة ومحلية على السواحل الصحراوية الممتدة ما بين تزنيت وبوجدور، وكذا على سواحل البحر الأبيض المتوسط. كما يرتقب تسجيل هبات رياح', 'size': 4}], 'main_title': 'الطقس غدا الثلاثاء.. رياح قوية وأمطار محلية متوقعة على السواحل المغربية'}, {'community_id': '1', 'articles': [{'id': '67', 'title': 'صاحب السمو الملكي ولي العهد الأمير مولاي الحسن يستقبل الأطفال المقدسيين المشاركين في الدورة الـ 16 للمخيم الصيفي لوكالة بيت مال القدس الشريف', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/205350', 'summary': 'صاحب السمو الملكي ولي العهد الأمير مولاي الحسن يستقبل الأطفال المقدسيين المشاركين في الدورة الـ 16 للمخيم الصيفي لوكالة بيت مال القدس الشريف. الأحداث/ و.م.ع بأمر من صاحب الجلالة الملك محمد السادس، نصره الله، استقبل صاحب السمو الملكي ولي العهد الأمير مولاي الحسن، اليوم الاثنين بالقصر الملكي بتطوان، الأطفال المقدسيين المشاركين في الدورة الـ 16 للمخيم الصيفي الذي تنظمه وكالة بيت مال القدس الشريف. وتعكس هذه المبادرة المنظمة تحت الرعاية السامية لصاحب الجلالة الملك محمد السادس، رئيس لجنة', 'size': 2}, {'id': '246', 'title': 'استقبال مولاي الحسن للأطفال المقدسيين يجسد اهتمام جلالة الملك بالمدينة المقدسة وسكانها', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/226340/', 'summary': 'استقبال مولاي الحسن للأطفال المقدسيين يجسد اهتمام جلالة الملك بالمدينة المقدسة وسكانها. أكد المدير المكلف بتسيير وكالة بيت مال القدس الشريف، محمد سالم الشرقاوي، أن استقبال صاحب السمو الملكي ولي العهد الأمير مولاي الحسن، اليوم الاثنين بالقصر الملكي بتطوان، للأطفال المقدسيين المشاركين في الدورة الـ 16 للمخيم الصيفي لوكالة بيت مال القدس الشريف، يجسد العناية السامية التي يوليها صاحب الجلالة الملك محمد السادس للمدينة المقدسة، واهتمام جلالته', 'size': 2}], 'main_title': 'صاحب السمو الملكي ولي العهد الأمير مولاي الحسن يستقبل الأطفال المقدسيين المشاركين في الدورة الـ 16 للمخيم الصيفي لوكالة بيت مال القدس الشريف'}, {'community_id': '2', 'articles': [{'id': '161', 'title': 'حجي بطلة مسلسل درامي جديد', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/321689/', 'summary': 'حجي بطلة مسلسل درامي جديد. من المرتقب أن تشارك الفنانة أحلام حجي، في تصوير مسلسل جديد في المغرب، بعد سلسلة من النجاحات التي حققتها في الأعمال الدرامية خلال الفترة الماضية، إضافة إلى مشاركتها في تصوير فيلم سينمائي في العاصمة البريطانية لندن. وبين التحضيرات الفنية المكثفة، اختارت أحلام قضاء إجازة عائلية قصيرة، قبل الانطلاق في تجربة التصوير الجديدة، حيث شاركت جمهورها', 'size': 2}, {'id': '222', 'title': 'أحلام حجي تستعد لتصوير عمل درامي جديد', 'source': 'machahid24.com', 'link': 'https://machahid24.com/panorama/473692.html', 'summary': 'أحلام حجي تستعد لتصوير عمل درامي جديد. تستعد الفنانة المغربية أحلام حجي لخوض تجربة درامية جديدة في المغرب، بعد سلسلة من النجاحات التي حققتها في الفترة الأخيرة سواء في الدراما المغربية والعراقية أو من خلال مشاركتها في أولى تجاربها السينمائية التي صورت بالعاصمة البريطانية لندن. وكشفت حجي أنها تقضي، حاليا، إجازة عائلية قصيرة قبل انطلاق تصوير المسلسل الجديد، مشيرة إلى أنها تحرص …', 'size': 2}], 'main_title': 'حجي بطلة مسلسل درامي جديد'}, {'community_id': '8', 'articles': [{'id': '167', 'title': 'ذكرى ميلاد الأميرة للا مريم مناسبة لإبراز جهودها تجاه المرأة والطفل', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-586540.html', 'summary': 'ذكرى ميلاد الأميرة للا مريم مناسبة لإبراز جهودها تجاه المرأة والطفل. تحتفل الأسرة الملكية ومعها الشعب المغربي، اليوم الثلاثاء، بذكرى ميلاد الأميرة للا مريم، والتي تشكل مناسبة سنوية لإبراز الانخراط الموصول لسموها في مسلسل النهوض بوضعية المرأة وحماية حقوق الطفل. وهكذا، فإن هذا الحدث السعيد، الذي يتم الاحتفال به في 26 غشت من كل سنة، يشكل مناسبة يستحضر من خلالها المغاربة الجهود الدؤوبة التي', 'size': 4}, {'id': '245', 'title': 'ذكرى ميلاد الأميرة للا مريم.. مناسبة لإبراز جهود سموها من أجل النهوض بوضعية المرأة والطفل', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/226345/', 'summary': 'ذكرى ميلاد الأميرة للا مريم.. مناسبة لإبراز جهود سموها من أجل النهوض بوضعية المرأة والطفل. الرباط – تحتفل الأسرة الملكية ومعها الشعب المغربي، اليوم الثلاثاء، بذكرى ميلاد صاحبة السمو الملكي الأميرة للا مريم، والتي تشكل مناسبة سنوية لإبراز الانخراط الموصول لسموها في مسلسل النهوض بوضعية المرأة وحماية حقوق الطفل. وهكذا، فإن هذا الحدث السعيد، الذي يتم الاحتفال به في 26 غشت من كل سنة، يشكل مناسبة يستحضر من خلالها المغاربة', 'size': 4}, {'id': '368', 'title': 'في ذكرى ميلادها.. الأميرة للا مريم أيقونة العطاء والتضامن في خدمة المجتمع', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1095239.html', 'summary': 'في ذكرى ميلادها.. الأميرة للا مريم أيقونة العطاء والتضامن في خدمة المجتمع. تحتفل الأسرة الملكية ومعها الشعب المغربي، اليوم الثلاثاء، بذكرى ميلاد الأميرة للا مريم، والتي تشكل مناسبة سنوية لإبراز الانخراط الموصول لسموها في مسلسل النهوض بوضعية المرأة وحماية حقوق الطفل. وهكذا، فإن هذا الحدث السعيد، الذي يتم الاحتفال به في 26 غشت من كل سنة، يشكل مناسبة يستحضر من خلالها المغاربة الجهود الدؤوبة التي تبذلها الأميرة ظهرت المقالة في ذكرى ميلادها.. الأميرة للا مريم أيقونة العطاء والتضامن في خدمة المجتمع  .', 'size': 4}, {'id': '422', 'title': 'ذكرى ميلاد صاحبة السمو الملكي الأميرة للا مريم.. مناسبة لإبراز جهود سموها من أجل النهوض بوضعية المرأة والطفل', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%b0%d9%83%d8%b1%d9%89-%d9%85%d9%8a%d9%84%d8%a7%d8%af-%d8%b5%d8%a7%d8%ad%d8%a8%d8%a9-%d8%a7%d9%84%d8%b3%d9%85%d9%88-%d8%a7%d9%84%d9%85%d9%84%d9%83%d9%8a-%d8%a7%d9%84%d8%a3%d9%85%d9%8a%d8%b1%d8%a9/', 'summary': 'ذكرى ميلاد صاحبة السمو الملكي الأميرة للا مريم.. مناسبة لإبراز جهود سموها من أجل النهوض بوضعية المرأة والطفل. تحتفل الأسرة الملكية ومعها الشعب المغربي، اليوم الثلاثاء 26 غشت الجاري، بذكرى ميلاد صاحبة السمو الملكي الأميرة للا مريم، والتي تشكل مناسبة سنوية لإبراز الانخراط الموصول لسموها في مسلسل النهوض بوضعية المرأة وحماية حقوق الطفل. وهكذا، فإن هذا الحدث السعيد، الذي يتم الاحتفال به في 26 غشت من كل سنة، يشكل مناسبة يستحضر …  ذكرى ميلاد صاحبة السمو الملكي الأميرة للا مريم.. مناسبة لإبراز جهود سموها من أجل النهوض بوضعية المرأة والطفل     .', 'size': 4}], 'main_title': 'ذكرى ميلاد الأميرة للا مريم مناسبة لإبراز جهودها تجاه المرأة والطفل'}, {'community_id': '5', 'articles': [{'id': '180', 'title': 'برادة يلتقي جمعيات أولياء أمور التلاميذ استعدادا للدخول المدرسي الجديد', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1095214.html', 'summary': 'برادة يلتقي جمعيات أولياء أمور التلاميذ استعدادا للدخول المدرسي الجديد. استقبل محمد سعد برادة، وزير التربية الوطنية والتعليم الأولي والرياضة ظهرت المقالة برادة يلتقي جمعيات أولياء أمور التلاميذ استعدادا للدخول المدرسي الجديد  .', 'size': 2}, {'id': '210', 'title': 'بعد جدل محاضر الدخول المدرسي.. برادة يستدعي جمعيات الآباء', 'source': 'rue20.com', 'link': 'https://rue20.com/931365.html', 'summary': 'بعد جدل محاضر الدخول المدرسي.. برادة يستدعي جمعيات الآباء.  | متابعة استقبل محمد سعد برادة، وزير التربية الوطنية والتعليم الأولي والرياضة، يوم أمس الإثنين، ممثلي الهيئات الوطنية لجمعيات أمهات وآباء وأولياء التلميذات والتلاميذ، في لقاء وصف بالتواصلي تناول مستجدات الدخول المدرسي 2025/2026 وحصيلة الموسم الدراسي المنصرم. وأشار الوزير وفق بلاغ للوزارة إلى الدور الحيوي لهذه الجمعيات في تعزيز التواصل بين الأسر والمؤسسات الخبر بعد جدل محاضر الدخول المدرسي.. برادة يستدعي جمعيات الآباء  .', 'size': 2}], 'main_title': 'برادة يلتقي جمعيات أولياء أمور التلاميذ استعدادا للدخول المدرسي الجديد'}, {'community_id': '0', 'articles': [{'id': '224', 'title': 'خطوة تاريخية.. جامعة الأخوين تصبح أول عضو دولي في “تحالف LearningWell”', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/473675.html', 'summary': 'خطوة تاريخية.. جامعة الأخوين تصبح أول عضو دولي في “تحالف LearningWell”. تم قبول جامعة الأخوين بإفران في تحالف LearningWell، وهو شبكة من الجامعات الأمريكية المكرسة لتطوير النموذج المتمركز حول الطالب، لتصبح بذلك أول عضو دولي في هذه المنظمة.', 'size': 2}, {'id': '234', 'title': 'جامعة الأخوين تصبح أول عضو دولي في “تحالف LearningWell”', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d8%ac%d8%a7%d9%85%d8%b9%d8%a9-%d8%a7%d9%84%d8%a3%d8%ae%d9%88%d9%8a%d9%86-%d8%aa%d8%b5%d8%a8%d8%ad-%d8%a3%d9%88%d9%84-%d8%b9%d8%b6%d9%88-%d8%af%d9%88%d9%84%d9%8a-%d9%81%d9%8a-%d8%aa%d8%ad%d8%a7/', 'summary': 'جامعة الأخوين تصبح أول عضو دولي في “تحالف LearningWell”. تم قبول جامعة الأخوين بإفران في تحالف LearningWell، وهو شبكة من الجامعات الأمريكية المكرسة لتطوير النموذج المتمركز حول الطالب، لتصبح بذلك أول عضو دولي  جامعة الأخوين تصبح أول عضو دولي في “تحالف LearningWell”     .', 'size': 2}], 'main_title': 'خطوة تاريخية.. جامعة الأخوين تصبح أول عضو دولي في “تحالف LearningWell”'}, {'community_id': '7', 'articles': [{'id': '311', 'title': 'فاس.. التحقيق في وفاة شخص كان رهن المراقبة الطبية بالمستشفى الجامعي', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-651995.html', 'summary': 'فاس.. التحقيق في وفاة شخص كان رهن المراقبة الطبية بالمستشفى الجامعي. هبة بريس علم لدى ولاية أمن فاس أن شخصا كان موضوعا رهن المراقبة الطبية بمؤسسة استشفائية، لضرورة وحاجيات البحث في قضية جنحية، قد توفي صباح اليوم الثلاثاء 26 غشت الجاري بالمستشفى الجامعي بمدينة فاس. وحسب المعلومات الأولية للبحث، فقد تم توقيف المعني بالأمر بتاريخ 16 غشت الجاري على خلفية الاشتباه في تورطه في قضية جنحية، حيث صرح بأنه يعاني من مرض مزمن وهو ما استدعى نقله والاحتفاظ به بالمستشفى لتلقي العلاجات الضرورية، حيث وافته المنية صباح يومه الثلاثاء. وقد تم فتح بحث قضائي في النازلة تحت إشراف النيابة العامة المختصة، لتحديد جميع ظروف وملابسات هذه القضية، بينما تم الاحتفاظ بجثة الهالك بالمستشفى لضرورة الخبرة الطبية المحددة لسبب الوفاة.', 'size': 3}, {'id': '356', 'title': 'فاس…وفاة شخص كان موضوعا رهن المراقبة الطبية بمؤسسة استشفائية', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/321742/', 'summary': 'فاس…وفاة شخص كان موضوعا رهن المراقبة الطبية بمؤسسة استشفائية. علم لدى ولاية أمن فاس أن شخصا كان موضوعا رهن المراقبة الطبية بمؤسسة استشفائية، لضرورة وحاجيات البحث في قضية جنحية، قد توفي صباح اليوم الثلاثاء 26 غشت الجاري بالمستشفى الجامعي بمدينة فاس. وحسب المعلومات الأولية للبحث، فقد تم توقيف المعني بالأمر بتاريخ 16 غشت الجاري على خلفية الاشتباه في تورطه في قضية جنحية، حيث', 'size': 3}, {'id': '414', 'title': 'ولاية أمن فاس: بحث قضائي في وفاة موقوف كان رهن المراقبة الطبية بمؤسسة استشفائية', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/226348/', 'summary': 'ولاية أمن فاس: بحث قضائي في وفاة موقوف كان رهن المراقبة الطبية بمؤسسة استشفائية. علم لدى ولاية أمن فاس أن شخصا كان موضوعا رهن المراقبة الطبية بمؤسسة استشفائية، لضرورة وحاجيات البحث في قضية جنحية، قد توفي صباح اليوم الثلاثاء 26 غشت الجاري بالمستشفى الجامعي بمدينة فاس. وحسب المعلومات الأولية للبحث، فقد تم توقيف المعني بالأمر بتاريخ 16 غشت الجاري على خلفية الاشتباه في تورطه في قضية جنحية، حيث صرح', 'size': 3}], 'main_title': 'فاس.. التحقيق في وفاة شخص كان رهن المراقبة الطبية بالمستشفى الجامعي'}, {'community_id': '9', 'articles': [{'id': '320', 'title': 'برقية تعزية ومواساة من جلالة الملك إلى أفراد أسرة المرحوم الإعلامي محمد حسن الوالي', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/205374', 'summary': 'برقية تعزية ومواساة من جلالة الملك إلى أفراد أسرة المرحوم الإعلامي محمد حسن الوالي.  بعث صاحب الجلالة الملك محمد السادس برقية تعزية ومواساة إلى أفراد أسرة المرحوم الإعلامي محمد حسن الوالي. وجاء في برقية جلالة الملك “تلقينا ببالغ التأثر نعي المشمول يعفو الله وغفرانه، الإعلامي القدير المرحوم محمد حسن الوالي، تغمده سبحانه بواسع رحمته وأسكنه فسيح جنانه”. وقال جلالة الملك“ وبهذه المناسبة المحزنة ، نعرب لكم ولكافة', 'size': 5}, {'id': '340', 'title': 'نوه بـ”خلقه الحميد وكفاءته الرفيعة”.. جلالة الملك يعزي أسرة المرحوم الإعلامي محمد الوالي', 'source': 'kifache.com', 'link': 'https://kifache.com/%d9%86%d9%88%d9%87-%d8%a8%d9%80%d8%ae%d9%84%d9%82%d9%87-%d8%a7%d9%84%d8%ad%d9%85%d9%8a%d8%af-%d9%88%d9%83%d9%81%d8%a7%d8%a1%d8%aa%d9%87-%d8%a7%d9%84%d8%b1%d9%81%d9%8a%d8%b9%d8%a9-%d8%ac%d9%84/', 'summary': 'نوه بـ”خلقه الحميد وكفاءته الرفيعة”.. جلالة الملك يعزي أسرة المرحوم الإعلامي محمد الوالي. بعث صاحب الجلالة الملك محمد السادس برقية تعزية ومواساة إلى أفراد أسرة المرحوم الإعلامي محمد حسن الوالي. وجاء في برقية جلالة الملك “تلقينا ببالغ التأثر نعي المشمول يعفو الله وغفرانه، الإعلامي القدير المرحوم محمد حسن الوالي، تغمده سبحانه بواسع رحمته وأسكنه فسيح جنانه”. وقال جلالة الملك “وبهذه المناسبة المحزنة، نعرب لكم ولكافة أهلكم وذويكم، ومن', 'size': 5}, {'id': '361', 'title': 'الملك معزيا في وفاة الوالي:  فقدان “علي حسن” خسارة لكفاءة إعلامية بارزة ورائدة', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1095336.html', 'summary': 'الملك معزيا في وفاة الوالي: فقدان “علي حسن” خسارة لكفاءة إعلامية بارزة ورائدة. بعث الملك محمد السادس برقية تعزية ومواساة إلى أفراد أسرة المرحوم الإعلامي محمد حسن الوالي. وجاء في برقية الملك “تلقينا ببالغ التأثر نعي المشمول يعفو الله وغفرانه، الإعلامي القدير المرحوم محمد حسن الوالي، تغمده سبحانه بواسع رحمته وأسكنه فسيح جنانه”. وقال الملك “وبهذه المناسبة المحزنة، نعرب لكم ولكافة أهلكم وذويكم، ومن خلالكم لأسرة الراحل الإعلامية ظهرت المقالة الملك معزيا في وفاة الوالي: فقدان “علي حسن” خسارة لكفاءة إعلامية بارزة ورائدة  .', 'size': 5}, {'id': '413', 'title': 'برقية تعزية مؤثرة من جلالة الملك إلى أسرة الإعلامي الراحل “علي حسن”', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/226350/', 'summary': 'برقية تعزية مؤثرة من جلالة الملك إلى أسرة الإعلامي الراحل “علي حسن”. بعث صاحب الجلالة الملك محمد السادس برقية تعزية ومواساة إلى أفراد أسرة المرحوم الإعلامي محمد حسن الوالي. وجاء في برقية جلالة الملك “تلقينا ببالغ التأثر نعي المشمول يعفو الله وغفرانه، الإعلامي القدير المرحوم محمد حسن الوالي، تغمده سبحانه بواسع رحمته وأسكنه فسيح جنانه”. وقال جلالة الملك “وبهذه المناسبة المحزنة، نعرب لكم ولكافة أهلكم وذويكم، ومن', 'size': 5}, {'id': '418', 'title': 'برقية تعزية ومواساة من الملك محمد السادس إلى أفراد أسرة المرحوم الإعلامي محمد حسن الوالي', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a8%d8%b1%d9%82%d9%8a%d8%a9-%d8%aa%d8%b9%d8%b2%d9%8a%d8%a9-%d9%88%d9%85%d9%88%d8%a7%d8%b3%d8%a7%d8%a9-%d9%85%d9%86-%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%85%d8%ad%d9%85%d8%af-%d8%a7%d9%84%d8%b3-41/', 'summary': 'برقية تعزية ومواساة من الملك محمد السادس إلى أفراد أسرة المرحوم الإعلامي محمد حسن الوالي. بعث الملك محمد السادس برقية تعزية ومواساة إلى أفراد أسرة المرحوم الإعلامي محمد حسن الوالي. وجاء في برقية الملك محمد السادس “تلقينا ببالغ التأثر نعي المشمول يعفو الله وغفرانه، الإعلامي القدير المرحوم محمد حسن الوالي، تغمده سبحانه بواسع رحمته وأسكنه فسيح جنانه”. وقال الملك محمد السادس “وبهذه المناسبة المحزنة، نعرب لكم ولكافة أهلكم …  برقية تعزية ومواساة من الملك محمد السادس إلى أفراد أسرة المرحوم الإعلامي محمد حسن الوالي     .', 'size': 5}], 'main_title': 'برقية تعزية ومواساة من جلالة الملك إلى أفراد أسرة المرحوم الإعلامي محمد حسن الوالي'}, {'community_id': '4', 'articles': [{'id': '322', 'title': 'انطلاق عملية انتقاء وإدماج مجندي التجريدة الـ40 للخدمة العسكرية ابتداء من فاتح شتنبر المقبل', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/205360', 'summary': 'انطلاق عملية انتقاء وإدماج مجندي التجريدة الـ40 للخدمة العسكرية ابتداء من فاتح شتنبر المقبل.  تنفيذا للتعليمات السامية لصاحب الجلالة الملك ، القائد الأعلى ورئيس أركان الحرب العامة للقوات المسلحة الملكية نصره الله ، ستشرع مراكز تكوين المجندين في عملية انتقاء و إدماج مجندي التجريدة الأربعين (40) للخدمة العسكرية،وذلك ابتداء من فاتح شتنبر المقبل، حسب بلاغ للقيادة العامة للقوات المسلحة الملكية. وأوضح المصدر ذاته، أنه لهذه الغاية، اتخذت', 'size': 2}, {'id': '330', 'title': 'بــلاغ للقيـادة العـامة للقوات المسلحة الملكية', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/411687.html', 'summary': 'بــلاغ للقيـادة العـامة للقوات المسلحة الملكية. تنفيذا للتعليمات السامية لصاحب الجلالة الملك، القائد الأعلى ورئيس أركان الحرب العامة للقوات المسلحة الملكية نصره الله، ستشرع مراكز تكوين المجندين في عملية انتقاء وإدماج', 'size': 2}], 'main_title': 'انطلاق عملية انتقاء وإدماج مجندي التجريدة الـ40 للخدمة العسكرية ابتداء من فاتح شتنبر المقبل'}, {'community_id': '6', 'articles': [{'id': '342', 'title': 'في افتتاح المجمع الرياضي الأمير مولاي عبد الله. إقبال جماهيري كبير على تذاكر مباراة المغرب والنيجر', 'source': 'kifache.com', 'link': 'https://kifache.com/%d9%81%d9%8a-%d8%a7%d9%81%d8%aa%d8%aa%d8%a7%d8%ad-%d8%a7%d9%84%d9%85%d8%ac%d9%85%d8%b9-%d8%a7%d9%84%d8%b1%d9%8a%d8%a7%d8%b6%d9%8a-%d8%a7%d9%84%d8%a3%d9%85%d9%8a%d8%b1-%d9%85%d9%88%d9%84%d8%a7%d9%8a/', 'summary': 'في افتتاح المجمع الرياضي الأمير مولاي عبد الله. إقبال جماهيري كبير على تذاكر مباراة المغرب والنيجر. تشهد المواجهة الودية التي ستجمع بين المنتخب الوطني المغربي الأول ونظيره منتخب النيجر، يوم الجمعة 5 شتنبر 2025 على أرضية المجمع الرياضي الأمير مولاي عبد الله بالرباط، إقبالاً جماهيرياً واسعاً، وفق ما كشفت عنه اللجنة المنظمة للقاء. وحسب الحصيلة المعلن عنها إلى غاية منتصف نهار اليوم، فقد بلغ عدد التذاكر المقتناة 47 ألفاً و555', 'size': 3}, {'id': '369', 'title': 'بعد 4 ساعات على طرحها للبيع.. نفاذ 47 ألف تذكرة لمباراة المغرب والنيجر', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1095283.html', 'summary': 'بعد 4 ساعات على طرحها للبيع.. نفاذ 47 ألف تذكرة لمباراة المغرب والنيجر. كشفت اللجنة المنظمة عن تفاصيل بيع التذاكر المطروحة لمباراة المنتخب الوطني أمام النيجر، والتي ستجرى على أرضية المجمع الرياضي الأمير مولاي عبد الله بالرباط، لحساب التصفيات الإفريقية المؤهلة لنهائيات كأس العالم 2026. وتوصلت جريدة “العمق” بتفاصيل التذاكر التي تم اقتناءها من قبل الجماهير الراغبة في متابعة لقاء الأسود المقبل، حيث تم بيع 3210 تذاكر من ظهرت المقالة بعد 4 ساعات على طرحها للبيع.. نفاذ 47 ألف تذكرة لمباراة المغرب والنيجر  .', 'size': 2}, {'id': '399', 'title': 'إقبال جماهيري كبير على تذاكر مباراة المغرب والنيجر', 'source': 'machahid24.com', 'link': 'https://machahid24.com/sport/473760.html', 'summary': 'إقبال جماهيري كبير على تذاكر مباراة المغرب والنيجر. تشهد عملية اقتناء تذاكر مباراة المنتخب المغربي لكرة القدم أمام نظيره من النيجر، لحساب التصفيات المؤهلة لنهائيات كأس العالم 2026، التي انطلقت اليوم الثلاثاء، إقبالا كبيرا من طرف الجماهير المغربية. وذكر بلاغ للجنة المنظمة لهذه المباراة، التي سيحتضنها المجمع الرياضي الأمير مولاي عبد الله بالرباط يوم 5 شتنبر المقبل، نشره موقع الجامعة الملكية المغربية لكرة …', 'size': 2}], 'main_title': 'في افتتاح المجمع الرياضي الأمير مولاي عبد الله. إقبال جماهيري كبير على تذاكر مباراة المغرب والنيجر'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    