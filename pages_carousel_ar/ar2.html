<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 28/06/2025 - 12h23</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '37', 'title': 'دفن الإعلامية والفنانة كوثر بودراجة في صمت تام', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-635149.html', 'summary': 'دفن الإعلامية والفنانة كوثر بودراجة في صمت تام. جرت بعد ظهر اليوم الجمعة مراسم دفن الإعلامية والفنانة المغربية كوثر بودراجة في أجواء طبعها الصمت، بعدما وافتها المنية إثر صراع طويل مع المرض. واختارت عائلة الراحلة إقامة الجنازة في هدوء، بعيدًا عن الأضواء، حيث لم يُعلَن عن خبر وفاتها إلا بعد انتهاء مراسم الدفن، وهو ما حال دون حضور عدد من أصدقائها وزملائها في الوسطين الفني والإعلامي. وكانت كوثر بودراجة قد عانت من مرض عضال لم ينفع معه العلاج، قبل أن تسلم الروح لبارئها اليوم الجمعة، بعد مسيرة مهنية حافلة بالنجاحات، بصمت من خلالها على حضور مميز في مجالي الإعلام والتمثيل، قبل أن ترحل في صمت.', 'size': 3}, {'id': '109', 'title': 'الموت يُغيّب الإعلامية والفنانة المغربية كوثر بودراجة بعد صراع مؤلم مع السرطان', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/culture/408330.html', 'summary': 'الموت يُغيّب الإعلامية والفنانة المغربية كوثر بودراجة بعد صراع مؤلم مع السرطان. في خبر أليم، توفيت صباح اليوم الجمعة، الإعلامية والممثلة المغربية كوثر بودراجة، بعد صراع مرير مع مرض السرطان الذي أنهك جسدها في الشهور الأخيرة، تاركة', 'size': 3}, {'id': '196', 'title': 'وفاة الإعلامية والممثلة كوثر بودراجة', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/467778.html', 'summary': 'وفاة الإعلامية والممثلة كوثر بودراجة. توفيت الإعلامية والممثلة المغربية كوثر بودراجة، اليوم الجمعة، عن عمر ناهز الأربعين عاما، بعد صراع طويل مع السرطان ألزمها الفراش خلال الأشهر الأخيرة. ووري جثمانها الثرى في سرية تامة، بعيدا عن الأضواء وعدسات الكاميرا، وذلك نزولا عند وصيتها في الحياة، ورغبة العائلة التي اختارت توديع ابنتها في صمت. وارتبط اسم الراحلة بعدد من البرامج الناجحة …', 'size': 4}, {'id': '247', 'title': 'وفاة كوثر بودراجة بعد صراع مع المرض', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d9%88%d9%81%d8%a7%d8%a9-%d9%83%d9%88%d8%ab%d8%b1-%d8%a8%d9%88%d8%af%d8%b1%d8%a7%d8%ac%d8%a9-%d8%a8%d8%b9%d8%af-%d8%b5%d8%b1%d8%a7%d8%b9-%d9%85%d8%b9-%d8%a7%d9%84%d9%85%d8%b1%d8%b6/', 'summary': 'وفاة كوثر بودراجة بعد صراع مع المرض. فجعت الساحة الفنية والإعلامية المغربية، اليوم الجمعة، بخبر وفاة الإعلامية والممثلة كوثر بودراجة، بعد صراع طويل مع مرض السرطان. وقد شكل هذا النبأ صدمة كبيرة لمحبيها وزملائها، خاصة بعد انتشار شائعة سابقة بوفاتها تبين لاحقا أنها لا أساس لها من الصحة. وتميزت الراحلة بحضورها الفريد وموهبتها المتعددة التي مكنتها من حجز مكانة بارزة …  وفاة كوثر بودراجة بعد صراع مع المرض     .', 'size': 2}], 'main_title': 'وفاة الإعلامية والممثلة كوثر بودراجة'}, {'community_id': '1', 'articles': [{'id': '63', 'title': 'توقيف شخصين بابن جرير بسبب تعريضهما لعناصر الشرطة للإهانة وإحداث الفوضى وتعييب منشأة مخصصة للمنفعة العامة', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/202670', 'summary': 'توقيف شخصين بابن جرير بسبب تعريضهما لعناصر الشرطة للإهانة وإحداث الفوضى وتعييب منشأة مخصصة للمنفعة العامة.  أفادت النيابة العامة لدى المحكمة الابتدائية بابن جرير، بأنه على إثر ما يتم تداوله ببعض مواقع التواصل الاجتماعي من أخبار زائفة عن اعتقال تحكمي مزعوم لشخصين بابن جرير، فإن الأمر يتعلق في حقيقته بتوقيف قانوني لشخصين كانا في حالة سكر علني بين،وقاما بتعريض عناصر الشرطة للإهانة وإحداث الفوضى وتعييب منشآت مخصصة للمنفعة العامة.', 'size': 5}, {'id': '130', 'title': 'عرضا عناصر الشرطة للإهانة وإحداث الفوضى وتعييب منشأة مخصصة للمنفعة العامة.. تفاصيل توقيف شخصين في ابن جرير', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%b9%d8%b1%d8%b6%d8%a7-%d8%b9%d9%86%d8%a7%d8%b5%d8%b1-%d8%a7%d9%84%d8%b4%d8%b1%d8%b7%d8%a9-%d9%84%d9%84%d8%a5%d9%87%d8%a7%d9%86%d8%a9-%d9%88%d8%a5%d8%ad%d8%af%d8%a7%d8%ab-%d8%a7%d9%84%d9%81%d9%88/', 'summary': 'عرضا عناصر الشرطة للإهانة وإحداث الفوضى وتعييب منشأة مخصصة للمنفعة العامة.. تفاصيل توقيف شخصين في ابن جرير. أفادت النيابة العامة لدى المحكمة الابتدائية بابن جرير، بأنه على إثر ما يتم تداوله ببعض مواقع التواصل الاجتماعي من أخبار زائفة عن اعتقال تحكمي مزعوم لشخصين بابن جرير، فإن الأمر يتعلق في حقيقته بتوقيف قانوني لشخصين كانا في حالة سكر علني بين، وقاما بتعريض عناصر الشرطة للإهانة وإحداث الفوضى وتعييب منشآت مخصصة للمنفعة العامة. وأوضح', 'size': 5}, {'id': '132', 'title': 'إهانة الشرطة وتخريب مقرهم يجر شخصين للاعتقال بابن جرير', 'source': 'assabah.ma', 'link': 'https://assabah.ma/855983.html', 'summary': 'إهانة الشرطة وتخريب مقرهم يجر شخصين للاعتقال بابن جرير. أفادت النيابة العامة لدى المحكمة الابتدائية بابن جرير، بأنه على إثر ما يتم تداوله ببعض مواقع التواصل الاجتماعي من أخبار زائفة عن اعتقال تحكمي مزعوم لشخصين بابن جرير، فإن الأمر يتعلق في حقيقته بتوقيف قانوني لشخصين كانا في حالة سكر علني بين، وقاما بتعريض عناصر الشرطة للإهانةأكمل القراءة » المقالة إهانة الشرطة وتخريب مقرهم يجر شخصين للاعتقال بابن جرير  .', 'size': 5}, {'id': '143', 'title': 'توقيف شخصين بابن جرير بسبب تعريضهما لعناصر الشرطة للإهانة وإحداث الفوضى', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/316793/', 'summary': 'توقيف شخصين بابن جرير بسبب تعريضهما لعناصر الشرطة للإهانة وإحداث الفوضى. أفادت النيابة العامة لدى المحكمة الابتدائية بابن جرير، بأنه على إثر ما يتم تداوله ببعض مواقع التواصل الاجتماعي من أخبار زائفة عن اعتقال تحكمي مزعوم لشخصين بابن جرير، فإن الأمر يتعلق في حقيقته بتوقيف قانوني لشخصين كانا في حالة سكر علني بين، وقاما بتعريض عناصر الشرطة للإهانة وإحداث الفوضى وتعييب منشآت مخصصة للمنفعة العامة. وأوضح', 'size': 5}, {'id': '244', 'title': 'النيابة العامة بابن جرير توضح بخصوص توقيف شخصين في قضية سكر علني وإهانة عناصر شرطة', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d9%86%d9%8a%d8%a7%d8%a8%d8%a9-%d8%a7%d9%84%d8%b9%d8%a7%d9%85%d8%a9-%d8%a8%d8%a7%d8%a8%d9%86-%d8%ac%d8%b1%d9%8a%d8%b1-%d8%aa%d9%88%d8%b6%d8%ad-%d8%a8%d8%ae%d8%b5%d9%88%d8%b5-%d8%aa%d9%88/', 'summary': 'النيابة العامة بابن جرير توضح بخصوص توقيف شخصين في قضية سكر علني وإهانة عناصر شرطة. أفادت النيابة العامة لدى المحكمة الابتدائية بابن جرير، بأنه على إثر ما يتم تداوله ببعض مواقع التواصل الاجتماعي من أخبار زائفة عن اعتقال تحكمي مزعوم لشخصين بابن جرير، فإن الأمر يتعلق في حقيقته بتوقيف قانوني لشخصين كانا في حالة سكر علني بين، وقاما بتعريض عناصر الشرطة للإهانة وإحداث الفوضى وتعييب منشآت مخصصة للمنفعة …  النيابة العامة بابن جرير توضح بخصوص توقيف شخصين في قضية سكر علني وإهانة عناصر شرطة     .', 'size': 5}], 'main_title': 'توقيف شخصين بابن جرير بسبب تعريضهما لعناصر الشرطة للإهانة وإحداث الفوضى وتعييب منشأة مخصصة للمنفعة العامة'}, {'community_id': '2', 'articles': [{'id': '66', 'title': 'الوكالة الوطنية للمياه والغابات تكشف عن النشرة الانذارية الجديدة الوطنية بشأن مخاطر اندلاع الحرائق الشديدة', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/202658', 'summary': 'الوكالة الوطنية للمياه والغابات تكشف عن النشرة الانذارية الجديدة الوطنية بشأن مخاطر اندلاع الحرائق الشديدة.  من أجل استباق ظاهرة حرائق الغابات على الصعيد الوطني، تصدر الوكالة الوطنية للمياه والغابات بناء ًا على معطيات علمية، خرائط تنبؤ تحدد بدقة المناطق الحساسة والمعرضة لخطر اندلاع الحرائق الغابوية، ابتداء ًا من يوم 27/06/2025 إلى يوم 04/07/2025 وبعد تحليل البيانات المتعلقة خصوصا ب: • نوعية الغطاء الغابوي وقابليته للاشتعال والاحتراق؛ • التوقعات المناخية والظروف الطبوغرافية', 'size': 3}, {'id': '82', 'title': 'المياه والغابات تحذر من ارتفاع خطر اندلاع حرائق بعدة مناطق', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/408304.html', 'summary': 'المياه والغابات تحذر من ارتفاع خطر اندلاع حرائق بعدة مناطق. شرعت الوكالة الوطنية للمياه والغابات، اليوم الجمعة، في تفعيل آلية استباقية تروم تحديد المناطق الحساسة والمعرّضة لخطر اندلاع الحرائق الغابوية، وذلك عبر نشر خرائط تنبؤية', 'size': 3}, {'id': '235', 'title': 'الخطر الأكبر شمالا: المياه والغابات تصدر خرائط يومية حول الحرائق', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%a7%d9%84%d8%ae%d8%b7%d8%b1-%d8%a7%d9%84%d8%a3%d9%83%d8%a8%d8%b1-%d8%b4%d9%85%d8%a7%d9%84%d8%a7-%d8%a7%d9%84%d9%85%d9%8a%d8%a7%d9%87-%d9%88%d8%a7%d9%84%d8%ba%d8%a7%d8%a8%d8%a7%d8%aa-%d8%aa%d8%b5/', 'summary': 'الخطر الأكبر شمالا: المياه والغابات تصدر خرائط يومية حول الحرائق. المساء اليوم: أعلنت الوكالة الوطنية للمياه والغابات أنها ستشرع، ابتداء من اليوم الجمعة وإلى غاية الرابع يوليوز المقبل، بناءا على معطيات علمية، في نشر خرائط تنبؤ تحدد بدقة المناطق الحساسة والمعرضة لخطر اندلاع الحرائق الغابوية،', 'size': 3}], 'main_title': 'الوكالة الوطنية للمياه والغابات تكشف عن النشرة الانذارية الجديدة الوطنية بشأن مخاطر اندلاع الحرائق الشديدة'}, {'community_id': '3', 'articles': [{'id': '97', 'title': 'توقيف أجنبي بمطار محمد الخامس بالدار البيضاء بطلب من الإمارات', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/society/408318.html', 'summary': 'توقيف أجنبي بمطار محمد الخامس بالدار البيضاء بطلب من الإمارات. تمكنت عناصر الأمن الوطني بمطار محمد الخامس الدولي بمدينة الدار البيضاء، يوم أمس الخميس 26 يونيو الجاري، من توقيف مواطن أجنبي يحمل جنسية دولة عربية', 'size': 2}, {'id': '151', 'title': 'خيانة الأمانة تقود إلى توقيف مواطن عربي مبحوث عنه دوليا بالدار البيضاء', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/316758/', 'summary': 'خيانة الأمانة تقود إلى توقيف مواطن عربي مبحوث عنه دوليا بالدار البيضاء. تمكنت عناصر الأمن الوطني بمطار محمد الخامس الدولي بمدينة الدار البيضاء، يوم أمس الخميس 26 يونيو الجاري، من توقيف مواطن أجنبي يحمل جنسية دولة عربية يبلغ من العمر 42 سنة، كان يشكل موضوع أمر دولي بإلقاء القبض صادر في حقه من طرف السلطات القضائية بدولة الإمارات العربية المتحدة.\u200e وقد جرى توقيف المعني بالأمر مباشرة بعد', 'size': 2}], 'main_title': 'توقيف أجنبي بمطار محمد الخامس بالدار البيضاء بطلب من الإمارات'}, {'community_id': '4', 'articles': [{'id': '100', 'title': 'الاتحاد الأوروبي يجدد عدم اعترافه بـ"الجمهورية الصحراوية" المزعومة', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/408321.html', 'summary': 'الاتحاد الأوروبي يجدد عدم اعترافه بـ"الجمهورية الصحراوية" المزعومة. جدد المتحدث باسم الاتحاد الأوروبي للشؤون الخارجية، اليوم الجمعة، التأكيد على أن "لا الاتحاد الأوروبي ولا أي من دوله الأعضاء يعترفون بـ+الجمهورية الصحراوية+" المزعومة. جاء هذا', 'size': 2}, {'id': '215', 'title': 'الاتحاد الأوروبي ولا أي من دوله الأعضاء يعترف بـ”الجمهورية الصحراوية” المزعومة', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d8%a7%d9%84%d8%a7%d8%aa%d8%ad%d8%a7%d8%af-%d8%a7%d9%84%d8%a3%d9%88%d8%b1%d9%88%d8%a8%d9%8a-%d9%88%d9%84%d8%a7-%d8%a3%d9%8a-%d9%85%d9%86-%d8%af%d9%88%d9%84%d9%87-%d8%a7%d9%84%d8%a3%d8%b9%d8%b6%d8%a7/', 'summary': 'الاتحاد الأوروبي ولا أي من دوله الأعضاء يعترف بـ”الجمهورية الصحراوية” المزعومة.  – و م ع جدد المتحدث باسم الاتحاد الأوروبي للشؤون الخارجية، اليوم الجمعة، التأكيد على أن “لا الاتحاد الأوروبي ولا أي من دوله الأعضاء يعترفون بـ”الجمهورية الصحراوية” المزعومة....  الاتحاد الأوروبي ولا أي من دوله الأعضاء يعترف بـ”الجمهورية الصحراوية” المزعومة     .', 'size': 2}], 'main_title': 'الاتحاد الأوروبي يجدد عدم اعترافه بـ"الجمهورية الصحراوية" المزعومة'}, {'community_id': '5', 'articles': [{'id': '129', 'title': 'المغرب – تركيا.. توقيع مذكرتي تفاهم حول السلامة الطرقية والممرات البحرية', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d8%aa%d8%b1%d9%83%d9%8a%d8%a7-%d8%aa%d9%88%d9%82%d9%8a%d8%b9-%d9%85%d8%b0%d9%83%d8%b1%d8%aa%d9%8a-%d8%aa%d9%81%d8%a7%d9%87%d9%85-%d8%ad%d9%88%d9%84-%d8%a7/', 'summary': 'المغرب – تركيا.. توقيع مذكرتي تفاهم حول السلامة الطرقية والممرات البحرية. وقعت المملكة المغربية وجمهورية تركيا، اليوم الجمعة (27 يونيو) بإسطنبول، على مذكرتي تفاهم حول السلامة الطرقية والممرات البحرية. وقد وقع على المذكرتين كل من وزير النقل واللوجستيك، عبد الصمد قيوح، ووزير النقل والبنية التحتية التركي، عبد القادر أورال أوغلو، بحضور سفير صاحب الجلالة لدى الجمهورية التركية، محمد علي الأزرق، وذلك على هامش فعاليات منتدى الربط', 'size': 2}, {'id': '194', 'title': 'المغرب وتركيا يوقعان على مذكرتي تفاهم حول السلامة الطرقية والممرات البحرية', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/467780.html', 'summary': 'المغرب وتركيا يوقعان على مذكرتي تفاهم حول السلامة الطرقية والممرات البحرية. متابعة وقعت المملكة المغربية وجمهورية تركيا، اليوم الجمعة بإسطنبول، على مذكرتي تفاهم حول السلامة الطرقية والممرات البحرية. وقد وقع على المذكرتين كل من وزير النقل واللوجستيك، عبد الصمد قيوح، ووزير النقل والبنية التحتية التركي، عبد القادر أورال أوغلو، بحضور سفير الملك لدى الجمهورية التركية، محمد علي الأزرق، وذلك على هامش فعاليات منتدى الربط العالمي للنقل. …', 'size': 2}], 'main_title': 'المغرب – تركيا.. توقيع مذكرتي تفاهم حول السلامة الطرقية والممرات البحرية'}, {'community_id': '6', 'articles': [{'id': '147', 'title': 'طنجة.. تفكيك عصابة احتجزت ضحية وسلبته أموالا بدعوى بيع عملات رقمية', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/316762/', 'summary': 'طنجة.. تفكيك عصابة احتجزت ضحية وسلبته أموالا بدعوى بيع عملات رقمية. تمكنت عناصر المصلحة الولائية للشرطة القضائية بمدينة طنجة، في الساعات الأولى من صباح اليوم الجمعة 27 يونيو الجاري، من توقيف أربعة أشخاص يشتبه في ارتباطهم بشبكة إجرامية تنشط في النصب والاحتيال والسرقة تحت التهديد باستعمال السلاح الأبيض وحيازة وترويج مخدر الكوكايين. وكان المشتبه فيهم قد أقدموا على استدراج أحد الضحايا عن طريق محادثات على شبكات', 'size': 2}, {'id': '236', 'title': 'أمن طنجة يطيح بشبكة تنشط في ترويج الكوكايين والعملات الرقمية', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%a3%d9%85%d9%86-%d8%b7%d9%86%d8%ac%d8%a9-%d9%8a%d8%b7%d9%8a%d8%ad-%d8%a8%d8%b4%d8%a8%d9%83%d8%a9-%d8%aa%d9%86%d8%b4%d8%b7-%d9%81%d9%8a-%d8%aa%d8%b1%d9%88%d9%8a%d8%ac-%d8%a7%d9%84%d9%83%d9%88%d9%83/', 'summary': 'أمن طنجة يطيح بشبكة تنشط في ترويج الكوكايين والعملات الرقمية. المساء اليوم – طنجة: تمكنت عناصر المصلحة الولائية للشرطة القضائية بمدينة طنجة، في الساعات الأولى من صباح اليوم الجمعة 27 يونيو الجاري، من توقيف أربعة أشخاص يشتبه في ارتباطهم بشبكة إجرامية تنشط في النصب والاحتيال', 'size': 2}], 'main_title': 'طنجة.. تفكيك عصابة احتجزت ضحية وسلبته أموالا بدعوى بيع عملات رقمية'}, {'community_id': '7', 'articles': [{'id': '149', 'title': 'الاتحاد الأوروبي يجدد رفضه الاعتراف بـ”الجمهورية الصحراوية” المزعومة', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/316783/', 'summary': 'الاتحاد الأوروبي يجدد رفضه الاعتراف بـ”الجمهورية الصحراوية” المزعومة. جدد المتحدث باسم الاتحاد الأوروبي للشؤون الخارجية، اليوم الجمعة، التأكيد على أن “لا الاتحاد الأوروبي ولا أي من دوله الأعضاء يعترفون بالجمهورية الصحراوية” المزعومة. جاء هذا التصريح في وقت كانت فيه بعض الأبواق الانفصالية تسهب، بشكل مبالغ فيه، في الحديث عن اجتماع وزاري بين الاتحاد الأوروبي والاتحاد الإفريقي، الذي ينعقد اليوم الجمعة في العاصمة الإيطالية', 'size': 4}, {'id': '179', 'title': 'الاتحاد الأوروبي يوضح موقفه بعد مشاركة "الجمهورية الصحراوية" في اجتماع مشترك', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a7%d9%84%d8%a7%d8%aa%d8%ad%d8%a7%d8%af-%d8%a7%d9%84%d8%a3%d9%88%d8%b1%d9%88%d8%a8%d9%8a-%d9%84%d8%a7-%d9%86%d8%b9%d8%aa%d8%b1%d9%81-%d8%a8%d9%80%d8%a7%d9%84%d8%ac%d9%85%d9%87%d9%88%d8%b1%d9%8a/', 'summary': 'الاتحاد الأوروبي يوضح موقفه بعد مشاركة "الجمهورية الصحراوية" في اجتماع مشترك. أكد المتحدث باسم الاتحاد الأوروبي للشؤون الخارجية، اليوم الجمعة، أن الاتحاد الأوروبي ودوله الأعضاء لا يعترفون بـ"الجمهورية الصحراوية"، وذلك في تصريح تزامن مع انعقاد الاجتماع الوزاري المشترك بين الاتحاد الأوروبي والاتحاد الإفريقي في العاصمة الإيطالية روما. وأشار المتحدث إلى أن الاجتماعات الوزارية بين الاتحادين تنظم وتترأس بشكل مشترك، موضحا أن كل طرف مسؤول عن توجيه  الاتحاد الأوروبي يوضح موقفه بعد مشاركة "الجمهورية الصحراوية" في اجتماع مشترك     .', 'size': 3}, {'id': '198', 'title': 'الاتحاد الأوروبي: لا الاتحاد ولا أي من دوله الأعضاء يعترف بـ”الجمهورية الصحراوية” المزعومة', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/467771.html', 'summary': 'الاتحاد الأوروبي: لا الاتحاد ولا أي من دوله الأعضاء يعترف بـ”الجمهورية الصحراوية” المزعومة. و.م.ع جدد المتحدث باسم الاتحاد الأوروبي للشؤون الخارجية، اليوم الجمعة، التأكيد على أن “لا الاتحاد الأوروبي ولا أي من دوله الأعضاء يعترفون بـ+الجمهورية الصحراوية+” المزعومة. جاء هذا التصريح في وقت كانت فيه بعض الأبواق الانفصالية تسهب، بشكل مبالغ فيه، في الحديث عن اجتماع وزاري بين الاتحاد الأوروبي والاتحاد الإفريقي، الذي ينعقد اليوم الجمعة في العاصمة …', 'size': 3}, {'id': '228', 'title': 'المتحدث باسم الاتحاد الأوروبي: لا الاتحاد ولا أي من دوله الأعضاء يعترف بـ”الجمهورية الصحراوية” المزعومة', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/223580/', 'summary': 'المتحدث باسم الاتحاد الأوروبي: لا الاتحاد ولا أي من دوله الأعضاء يعترف بـ”الجمهورية الصحراوية” المزعومة. وكالات جدد المتحدث باسم الاتحاد الأوروبي للشؤون الخارجية، اليوم الجمعة، التأكيد على أن “لا الاتحاد الأوروبي ولا أي من دوله الأعضاء يعترفون بـ+الجمهورية الصحراوية+” المزعومة. جاء هذا التصريح في وقت كانت فيه بعض الأبواق الانفصالية تسهب، بشكل مبالغ فيه، في الحديث عن اجتماع وزاري بين الاتحاد الأوروبي والاتحاد الإفريقي، الذي ينعقد اليوم الجمعة في', 'size': 4}], 'main_title': 'الاتحاد الأوروبي يجدد رفضه الاعتراف بـ”الجمهورية الصحراوية” المزعومة'}, {'community_id': '8', 'articles': [{'id': '154', 'title': 'تحذير دولي: تراجع التطعيم يعرض ملايين الأطفال لأمراض قاتلة', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1081209.html', 'summary': 'تحذير دولي: تراجع التطعيم يعرض ملايين الأطفال لأمراض قاتلة. تشهد عملية تلقيح الأطفال ضد الأمراض التي قد تكون مميتة تراجعا في العالم، بحسب دراسة حديثة نشرت في مجلة “ذي لانست”. وعزت الدراسة، التي تستعرض تلقيح الأطفال بين عامي 1980 و2023 في 204 دولة وإقليما، هذا التراجع لاستمرار التفاوتات الاقتصادية، والاضطرابات المرتبطة بمرحلة كوفيد، وانتشار معلومات مضللة بشأن اللقاحات، ما يعرض حياة ملايين الأشخاص للخطر. ظهرت المقالة تحذير دولي: تراجع التطعيم يعرض ملايين الأطفال لأمراض قاتلة  .', 'size': 2}, {'id': '377', 'title': 'تراجع تلقيح الأطفال عالميا يهدد حياة الملايين ويُنبئ بعودة أمراض منسية', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%aa%d8%b1%d8%a7%d8%ac%d8%b9-%d8%aa%d9%84%d9%82%d9%8a%d8%ad-%d8%a7%d9%84%d8%a3%d8%b7%d9%81%d8%a7%d9%84-%d8%b9%d8%a7%d9%84%d9%85%d9%8a%d8%a7-%d9%8a%d9%87%d8%af%d8%af-%d8%ad%d9%8a%d8%a7%d8%a9-%d8%a7/', 'summary': 'تراجع تلقيح الأطفال عالميا يهدد حياة الملايين ويُنبئ بعودة أمراض منسية. كشفت دراسة حديثة نُشرت في مجلة “ذي لانست” عن تراجع مقلق في وتيرة تلقيح الأطفال عبر العالم، محذّرة من أن هذا الانخفاض يعرض حياة ملايين الأشخاص للخطر، ويهدد بموجات جديدة من تفشي أمراض يمكن الوقاية منها. وشملت الدراسة، التي غطت الفترة ما بين 1980 و2023، بيانات من 204 دول وأقاليم، وأرجعت هذا التراجع …  تراجع تلقيح الأطفال عالميا يهدد حياة الملايين ويُنبئ بعودة أمراض منسية     .', 'size': 2}], 'main_title': 'تحذير دولي: تراجع التطعيم يعرض ملايين الأطفال لأمراض قاتلة'}, {'community_id': '9', 'articles': [{'id': '225', 'title': 'شان 2024.. المنتخب الوطني يواجه نظيره الأنغولي في غشت المقبل', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/223594/', 'summary': 'شان 2024.. المنتخب الوطني يواجه نظيره الأنغولي في غشت المقبل. كواليس اليوم يستهل المنتخب المغربي لكرة القدم مشواره في بطولة إفريقيا للاعبين المحليين “شان” 2024، المنظمة من 2 إلى 30 غشت 2025 بكل من كينيا وأوغندا وتنزانيا، بمواجهة نظيره الأنغولي، يوم 3 غشت المقبل، على أرضية ملعب نيايو بنيروبي. وسيخوض المنتخب المغربي، الذي وضعته القرعة ضمن المجموعة الأولى، ثاني لقاءاته ضد منتخب كينيا يوم', 'size': 2}, {'id': '353', 'title': '“شان 2024”.. المنتخب المغربي يستهل المنافسات بمواجهة أنغولا', 'source': 'machahid24.com', 'link': 'https://machahid24.com/sport/467791.html', 'summary': '“شان 2024”.. المنتخب المغربي يستهل المنافسات بمواجهة أنغولا. يستهل المنتخب المغربي لكرة القدم مشواره في بطولة إفريقيا للاعبين المحليين “شان” 2024، بمواجهة نظيره الأنغولي، يوم 3 غشت المقبل، على أرضية ملعب نيايو بنيروبي. وسيخوض المنتخب المغربي، الذي وضعته القرعة ضمن المجموعة الأولى، ثاني لقاءاته ضد منتخب كينيا يوم 10 غشت على أرضية ملعب كاساراني بالعاصمة نيروبي، وفقا للبرنامج الذي كشفت عنه الكونفدرالية الإفريقية …', 'size': 2}], 'main_title': 'شان 2024.. المنتخب الوطني يواجه نظيره الأنغولي في غشت المقبل'}, {'community_id': '10', 'articles': [{'id': '226', 'title': 'اسطنبول.. قيوح يتباحث مع مع وزير النقل والبنية التحتية التركي', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/223590/', 'summary': 'اسطنبول.. قيوح يتباحث مع مع وزير النقل والبنية التحتية التركي. وكالات أجرى وزير النقل واللوجستيك، عبد الصمد قيوح، اليوم الجمعة بإسطنبول، مباحثات مع وزير النقل والبنية التحتية التركي، عبد القادر أورال أوغلو، تمحورت حول سبل تعزيز التعاون الثنائي في مجال النقل والتنقل، وذلك على هامش فعاليات منتدى الربط العالمي للنقل. ونوه الوزيران، خلال هذا اللقاء، الذي حضره سفير صاحب الجلالة لدى الجمهورية التركية، محمد', 'size': 2}, {'id': '250', 'title': 'إسطنبول.. قيوح يتباحث مع نظيره التركي حول سبل تعزيز التعاون الثنائي في مجال النقل', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a5%d8%b3%d8%b7%d9%86%d8%a8%d9%88%d9%84-%d9%82%d9%8a%d9%88%d8%ad-%d9%8a%d8%aa%d8%a8%d8%a7%d8%ad%d8%ab-%d9%85%d8%b9-%d9%86%d8%b8%d9%8a%d8%b1%d9%87-%d8%a7%d9%84%d8%aa%d8%b1%d9%83%d9%8a-%d8%ad%d9%88/', 'summary': 'إسطنبول.. قيوح يتباحث مع نظيره التركي حول سبل تعزيز التعاون الثنائي في مجال النقل. أجرى وزير النقل واللوجستيك، عبد الصمد قيوح، اليوم الجمعة بإسطنبول، مباحثات مع وزير النقل والبنية التحتية التركي، عبد القادر أورال أوغلو، تمحورت حول سبل تعزيز التعاون الثنائي في مجال النقل والتنقل، وذلك على هامش فعاليات منتدى الربط العالمي للنقل. ونوه الوزيران، خلال هذا اللقاء، الذي حضره سفير المغرب لدى الجمهورية التركية، محمد علي …  إسطنبول.. قيوح يتباحث مع نظيره التركي حول سبل تعزيز التعاون الثنائي في مجال النقل     .', 'size': 2}], 'main_title': 'اسطنبول.. قيوح يتباحث مع مع وزير النقل والبنية التحتية التركي'}, {'community_id': '11', 'articles': [{'id': '231', 'title': 'رئيسة مجلس النواب الإسباني: التعاون المغربي-الإسباني نموذج لشراكة “ذات منفعة متبادلة”', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/223568/', 'summary': 'رئيسة مجلس النواب الإسباني: التعاون المغربي-الإسباني نموذج لشراكة “ذات منفعة متبادلة”. و م ع أكدت رئيسة مجلس النواب الإسباني، فرانشينا أرمينغول، أن التعاون بين المغرب وإسبانيا يشكل نموذجا للشراكة “ذات المنفعة المتبادلة”. وقالت أرمينغول، في تصريح لوكالة المغرب العربي للأنباء، على هامش قمة رؤساء البرلمانات والجلسة العامة الثامنة عشرة للجمعية البرلمانية للاتحاد من أجل المتوسط، المنعقدتين في مالقة، إن “المغرب وإسبانيا طورا تعاونا نموذجيا في', 'size': 2}, {'id': '237', 'title': 'رئيسة البرلمان الإسباني: التعاون بين المغرب وإسبانيا نموذج للشراكة “ذات المنفعة المتبادلة”', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%b1%d8%a6%d9%8a%d8%b3%d8%a9-%d8%a7%d9%84%d8%a8%d8%b1%d9%84%d9%85%d8%a7%d9%86-%d8%a7%d9%84%d8%a5%d8%b3%d8%a8%d8%a7%d9%86%d9%8a-%d8%a7%d9%84%d8%aa%d8%b9%d8%a7%d9%88%d9%86-%d8%a8%d9%8a%d9%86-%d8%a7/', 'summary': 'رئيسة البرلمان الإسباني: التعاون بين المغرب وإسبانيا نموذج للشراكة “ذات المنفعة المتبادلة”. المساء اليوم: قالت رئيسة مجلس النواب الإسباني، فرانشينا أرمينغول، إن التعاون بين المغرب وإسبانيا يشكل نموذجا للشراكة “ذات المنفعة المتبادلة”. وأضافت أرمينغول، في تصريح على هامش قمة رؤساء البرلمانات والجلسة العامة الثامنة عشرة للجمعية البرلمانية', 'size': 2}], 'main_title': 'رئيسة مجلس النواب الإسباني: التعاون المغربي-الإسباني نموذج لشراكة “ذات منفعة متبادلة”'}, {'community_id': '12', 'articles': [{'id': '293', 'title': 'الرباط.. توقيف متطرفة موالية لتنظيم “داعش” الإرهابي للاشتباه في تورطها في الإعداد والتحضير لتنفيذ مخطط إرهابي بالغ الخطورة', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/202680', 'summary': 'الرباط.. توقيف متطرفة موالية لتنظيم “داعش” الإرهابي للاشتباه في تورطها في الإعداد والتحضير لتنفيذ مخطط إرهابي بالغ الخطورة.  تمكن المكتب المركزي للأبحاث القضائية على ضوء معلومات استخباراتية دقيقة وفرتها المديرية العامة لمراقبة التراب الوطني، أمس الجمعة، من توقيف متطرفة موالية لتنظيم “داعش” الإرهابي، تبلغ من العمر 21 سنة وتتابع دراستها في أحد المعاهد التقنية العليا، وذلك للاشتباه في تورطها في الإعداد والتحضير لتنفيذ مخطط إرهابي بالغ الخطورة يستهدف المساس الخطير بالنظام العام.', 'size': 3}, {'id': '347', 'title': 'التعاون الإستخبارات المغربي الفرنسي يطيح بطالبة إرهابية كانت تخطط لإستهداف منشأة دينية بالرباط', 'source': 'rue20.com', 'link': 'https://rue20.com/916409.html', 'summary': 'التعاون الإستخبارات المغربي الفرنسي يطيح بطالبة إرهابية كانت تخطط لإستهداف منشأة دينية بالرباط. . الرباط تمكن المكتب المركزي للأبحاث القضائية على ضوء معلومات استخباراتية دقيقة وفرتها المديرية العامة لمراقبة التراب الوطني، أمس الجمعة، من توقيف متطرفة موالية لتنظيم “داعش” الإرهابي، تبلغ من العمر 21 سنة وتتابع دراستها في أحد المعاهد التقنية العليا، وذلك للاشتباه في تورطها في الإعداد والتحضير لتنفيذ مخطط إرهابي بالغ الخطورة يستهدف المساس الخطير الخبر التعاون الإستخبارات المغربي الفرنسي يطيح بطالبة إرهابية كانت تخطط لإستهداف منشأة دينية بالرباط  .', 'size': 2}, {'id': '368', 'title': 'عاجل.. توقيف طالبة متطرفة موالية لـ”داعش” خططت لتنفيذ هجوم إرهابي بالغ الخطورة', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/223615/', 'summary': 'عاجل.. توقيف طالبة متطرفة موالية لـ”داعش” خططت لتنفيذ هجوم إرهابي بالغ الخطورة. تمكن المكتب المركزي للأبحاث القضائية على ضوء معلومات استخباراتية دقيقة وفرتها المديرية العامة لمراقبة التراب الوطني، أمس الجمعة، من توقيف متطرفة موالية لتنظيم “داعش” الإرهابي، تبلغ من العمر 21 سنة وتتابع دراستها في أحد المعاهد التقنية العليا، وذلك للاشتباه في تورطها في الإعداد والتحضير لتنفيذ مخطط إرهابي بالغ الخطورة يستهدف المساس الخطير بالنظام العام.', 'size': 3}, {'id': '376', 'title': 'ضربة استباقية جديدة.. الأمن المغربي يُجهض مخططًا انتحاريًا تقوده شابة متطرفة', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%b6%d8%b1%d8%a8%d8%a9-%d8%a7%d8%b3%d8%aa%d8%a8%d8%a7%d9%82%d9%8a%d8%a9-%d8%ac%d8%af%d9%8a%d8%af%d8%a9-%d8%a7%d9%84%d8%a3%d9%85%d9%86-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8%d9%8a-%d9%8a%d9%8f%d8%ac/', 'summary': 'ضربة استباقية جديدة.. الأمن المغربي يُجهض مخططًا انتحاريًا تقوده شابة متطرفة. تمكن المكتب المركزي للأبحاث القضائية على ضوء معلومات استخباراتية دقيقة وفرتها المديرية العامة لمراقبة التراب الوطني، أمس الجمعة، من توقيف متطرفة موالية لتنظيم “داعش” الإرهابي، تبلغ من العمر 21 سنة وتتابع دراستها في أحد المعاهد التقنية العليا، وذلك للاشتباه في تورطها في الإعداد والتحضير لتنفيذ مخطط إرهابي بالغ الخطورة يستهدف المساس الخطير بالنظام …  ضربة استباقية جديدة.. الأمن المغربي يُجهض مخططًا انتحاريًا تقوده شابة متطرفة     .', 'size': 2}], 'main_title': 'الرباط.. توقيف متطرفة موالية لتنظيم “داعش” الإرهابي للاشتباه في تورطها في الإعداد والتحضير لتنفيذ مخطط إرهابي بالغ الخطورة'}, {'community_id': '13', 'articles': [{'id': '367', 'title': 'طقس السبت.. استمرار حرارة الجو مع قطرات مطرية في بعض المناطق', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/223617/', 'summary': 'طقس السبت.. استمرار حرارة الجو مع قطرات مطرية في بعض المناطق. كواليس اليوم تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليوم السبت، استمرار الطقس الحار إلى محليا جد حار بكل من السواحل والسهول الشمالية والوسطى ومناطق الأطلس الصغير، وأقصى الجنوب الشرقي للبلاد، وداخل الأقاليم الجنوبية. ويرتقب أيضا، تشكل خلايا رعدية ستعطي قطرات مطرية متفرقة أو زخات فوق كل من مناطق الأطلسين الكبير والمتوسط، وجنوب المنطقة الشرقية', 'size': 2}, {'id': '379', 'title': 'أجواء حارة وزخات رعدية اليوم السبت', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a3%d8%ac%d9%88%d8%a7%d8%a1-%d8%ad%d8%a7%d8%b1%d8%a9-%d9%88%d8%b2%d8%ae%d8%a7%d8%aa-%d8%b1%d8%b9%d8%af%d9%8a%d8%a9-%d8%a7%d9%84%d9%8a%d9%88%d9%85-%d8%a7%d9%84%d8%b3%d8%a8%d8%aa/', 'summary': 'أجواء حارة وزخات رعدية اليوم السبت. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليومه السبت، استمرار الطقس الحار إلى محليا جد حار بكل من السواحل والسهول الشمالية والوسطى ومناطق الأطلس الصغير، وأقصى الجنوب الشرقي للبلاد، وداخل الأقاليم الجنوبية. ويرتقب أيضا، تشكل خلايا رعدية ستعطي قطرات مطرية متفرقة أو زخات فوق كل من مناطق الأطلسين الكبير والمتوسط، وجنوب المنطقة الشرقية ومن …  أجواء حارة وزخات رعدية اليوم السبت     .', 'size': 2}], 'main_title': 'طقس السبت.. استمرار حرارة الجو مع قطرات مطرية في بعض المناطق'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    