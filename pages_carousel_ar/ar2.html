<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 08/08/2025 - 12h26</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '62', 'title': 'الوزارة المكلفة بالمغاربة المقيمين بالخارج تحتفي بالجالية وتضع مشروع الرقمنة ضمن أولوياتها', 'source': 'www.alakhbar.press.ma', 'link': 'https://www.alakhbar.press.ma/%d8%a7%d9%84%d9%88%d8%b2%d8%a7%d8%b1%d8%a9-%d8%a7%d9%84%d9%85%d9%83%d9%84%d9%81%d8%a9-%d8%a8%d8%a7%d9%84%d9%85%d8%ba%d8%a7%d8%b1%d8%a8%d8%a9-%d8%a7%d9%84%d9%85%d9%82%d9%8a%d9%85%d9%8a%d9%86-%d8%a8-270792.html', 'summary': 'الوزارة المكلفة بالمغاربة المقيمين بالخارج تحتفي بالجالية وتضع مشروع الرقمنة ضمن أولوياتها. في إطار العناية السامية التي يوليها الملك محمد السادس لأفراد الجالية المغربية المقيمة بالخارج، تحتفل الوزارة المكلفة بالمغاربة المقيمين بالخارج باليوم الوطني للمغاربة المقيمين بالخارج، وذلك يوم 10 غشت 2025، تحت شعار : “مشروع الرقمنة : رافعة لتعزيز خدمات القرب لفائدة المغاربة المقيمين بالخارج”. وكما جرت العادة في السنوات الماضية، وحرصًا على تمكين أفراد الجالية …  الوزارة المكلفة بالمغاربة المقيمين بالخارج تحتفي بالجالية وتضع مشروع الرقمنة ضمن أولوياتها     .', 'size': 3}, {'id': '156', 'title': 'يوم الجالية 2025.. المغرب يخلد المناسبة تحت شعار الرقمنة لخدمة مغاربة العالم', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1091431.html', 'summary': 'يوم الجالية 2025.. المغرب يخلد المناسبة تحت شعار الرقمنة لخدمة مغاربة العالم. أعلن قطاع المغاربة المقيمين بالخارج عن تخليد اليوم الوطني للمغاربة المقيمين بالخارج يوم 10 غشت 2025، وذلك تحت شعار “ورش الرقمنة: تعزيز لخدمات القرب الموجهة لمغاربة العالم”، تجسيدا للعناية التي يوليها الملك محمد السادس لأفراد الجالية بالخارج. وذكر بلاغ للقطاع أنه سينظم بتنسيق مع وزارة الداخلية، احتفالات على مستوى عمالات وأقاليم المملكة، بهدف تمكين أبناء ظهرت المقالة يوم الجالية 2025.. المغرب يخلد المناسبة تحت شعار الرقمنة لخدمة مغاربة العالم  .', 'size': 3}, {'id': '232', 'title': 'وزارة الخارجية تحتفل باليوم الوطني للمغاربة المقيمين بالخارج', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d9%88%d8%b2%d8%a7%d8%b1%d8%a9-%d8%a7%d9%84%d8%ae%d8%a7%d8%b1%d8%ac%d9%8a%d8%a9-%d8%aa%d8%ad%d8%aa%d9%81%d9%84-%d8%a8%d8%a7%d9%84%d9%8a%d9%88%d9%85-%d8%a7%d9%84%d9%88%d8%b7%d9%86%d9%8a-%d9%84%d9%84/', 'summary': 'وزارة الخارجية تحتفل باليوم الوطني للمغاربة المقيمين بالخارج. تحتفل وزارة الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج، باليوم الوطني للمغاربة المقيمين بالخارج، في العاشر من غشت الجاري، تحت شعار: “مشروع الرقمنة: رافعة لتعزيز خدمات القرب للمغاربة المقيمين بالخارج”، وذلك في إطار الرعاية السامية التي يوليها الملك محمد السادس، لأبناء الجالية بالخارج. وأوضحت الوزارة في بلاغ لها، أنه كما جرت العادة في …  وزارة الخارجية تحتفل باليوم الوطني للمغاربة المقيمين بالخارج     .', 'size': 3}], 'main_title': 'الوزارة المكلفة بالمغاربة المقيمين بالخارج تحتفي بالجالية وتضع مشروع الرقمنة ضمن أولوياتها'}, {'community_id': '2', 'articles': [{'id': '88', 'title': 'نشرة إنذارية جديدة.. موجة حر وزخات رعدية قوية مصحوبة بالبرد وبهبات رياح بدءا من الخميس', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/410660.html', 'summary': 'نشرة إنذارية جديدة.. موجة حر وزخات رعدية قوية مصحوبة بالبرد وبهبات رياح بدءا من الخميس. أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب تسجيل موجة حر من اليوم الخميس إلى يوم الأحد المقبل، وزخات رعدية قوية مع تساقط محلي للبر د', 'size': 2}, {'id': '218', 'title': 'حر ورعد قوي مصحوبا بالبرَد والرياح من الخميس إلى الأحد', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/225715/', 'summary': 'حر ورعد قوي مصحوبا بالبرَد والرياح من الخميس إلى الأحد. أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب تسجيل موجة حر من اليوم الخميس إلى يوم الأحد المقبل، وزخات رعدية قوية مع تساقط محلي للبرَد وهبات رياح اليوم الخميس، بعدد من مناطق المملكة. وأوضحت المديرية، في نشرة إنذارية من مستوى يقظة برتقالي، أنه من المرتقب تسجيل درجات حرارة تتراوح ما بين 44 و47 درجة من الخميس', 'size': 3}, {'id': '405', 'title': 'توقعات أحوال الطقس في العديد من مناطق المملكة اليوم الجمعة', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%aa%d9%88%d9%82%d8%b9%d8%a7%d8%aa-%d8%a3%d8%ad%d9%88%d8%a7%d9%84-%d8%a7%d9%84%d8%b7%d9%82%d8%b3-%d9%81%d9%8a-%d8%a7%d9%84%d8%b9%d8%af%d9%8a%d8%af-%d9%85%d9%86-%d9%85%d9%86%d8%a7%d8%b7%d9%82-98/', 'summary': 'توقعات أحوال الطقس في العديد من مناطق المملكة اليوم الجمعة. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليومه الجمعة، أن يظل الطقس حارا بالسهول الداخلية والجنوب الشرقي وكذا داخل الأقاليم الجنوبية. ويرتقب ظهور خلايا رعدية مصحوبة بقطرات متفرقة أو زخات محلية بالأطلس وسفوحه الشرقية وبالمنطقة الشرقية. كما ستتشكل سحب منخفضة مصحوبة بكتل ضبابية، خلال الصباح والليل، فوق المناطق الساحلية الشمالية والوسطى. وستهب الرياح قوية …  توقعات أحوال الطقس في العديد من مناطق المملكة اليوم الجمعة     .', 'size': 2}], 'main_title': 'حر ورعد قوي مصحوبا بالبرَد والرياح من الخميس إلى الأحد'}, {'community_id': '1', 'articles': [{'id': '96', 'title': 'رسميا..أشرف حكيمي ينافس على الكرة الذهبية بعد موسم تاريخي مع باريس سان جيرمان(القائمة)', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/sport/proplayers/410671.html', 'summary': 'رسميا..أشرف حكيمي ينافس على الكرة الذهبية بعد موسم تاريخي مع باريس سان جيرمان(القائمة). أعلنت مجلة "فرانس فوتبول" المنظمة لجائزة الكرة الذهبية، اليوم الخميس، عن اللائحة النهائية التي تضم 30 لاعبا يتنافسون على لقب أفضل لاعب في العالم لسنة', 'size': 2}, {'id': '194', 'title': 'أشرف حكيمي يكتب اسمه ضمن المرشحين للكرة الذهبية لعام 2025', 'source': 'machahid24.com', 'link': 'https://machahid24.com/sport/471942.html', 'summary': 'أشرف حكيمي يكتب اسمه ضمن المرشحين للكرة الذهبية لعام 2025. أعلنت مجلة فرانس فوتبول، اليوم الخميس، عن القائمة النهائية للمرشحين لجائزة الكرة الذهبية لعام 2025، والتي تضم 30 لاعبا من أبرز نجوم كرة القدم العالمية، يتنافسون على لقب أفضل لاعب في العالم. ومن بين المفاجآت السارة للجمهور المغربي، جاء الدولي المغربي أشرف حكيمي، نجم باريس سان جيرمان، ضمن القائمة النهائية، بعد موسم استثنائي توج خلاله …', 'size': 2}], 'main_title': 'رسميا..أشرف حكيمي ينافس على الكرة الذهبية بعد موسم تاريخي مع باريس سان جيرمان(القائمة)'}, {'community_id': '4', 'articles': [{'id': '118', 'title': 'حتى وقت لاحق.. الشابي يؤجل الحسم في مستقبل أبريغو مع الرجاء', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%ad%d8%aa%d9%89-%d9%88%d9%82%d8%aa-%d9%84%d8%a7%d8%ad%d9%82-%d8%a7%d9%84%d8%b4%d8%a7%d8%a8%d9%8a-%d9%8a%d8%a4%d8%ac%d9%84-%d8%a7%d9%84%d8%ad%d8%b3%d9%85-%d9%81%d9%8a-%d9%85%d8%b3%d8%aa%d9%82/', 'summary': 'حتى وقت لاحق.. الشابي يؤجل الحسم في مستقبل أبريغو مع الرجاء. قرر المدرب التونسي لسعد الشابي تأجيل قراره النهائي بشأن استمرار اللاعب البوليفي فيكتور أبريغو مع نادي الرجاء الرياضي، إلى نهاية الأسبوع الجاري، وذلك في انتظار استكمال تقييمه الفني خلال الحصص التدريبية الحالية. ويرغب الشابي في الوقوف على الجاهزية البدنية والفنية لأبريغو، إلى جانب مدى قدرته على التأقلم مع خططه التكتيكية للموسم المقبل، قبل اتخاذ قرار', 'size': 2}, {'id': '132', 'title': 'صراع الأجانب يربك حسابات الرجاء.. والشابي يمهل أبريغو فرصة أخيرة', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/320474/', 'summary': 'صراع الأجانب يربك حسابات الرجاء.. والشابي يمهل أبريغو فرصة أخيرة. يواصل الطاقم التقني لنادي الرجاء الرياضي تحضيراته المكثفة تحسبًا لانطلاق الموسم الكروي الجديد، وسط حالة من الترقب بشأن مستقبل عدد من اللاعبين داخل الفريق، وفي مقدمتهم اللاعب البوليفي فيكتور أبريغو، الذي عاد مؤخرًا إلى القلعة الخضراء بعد تجربة إعارة قصيرة في الدوري البوليفي. وفي هذا السياق، قرر المدرب التونسي لسعد الشابي، تأجيل الحسم النهائي في', 'size': 2}], 'main_title': 'حتى وقت لاحق.. الشابي يؤجل الحسم في مستقبل أبريغو مع الرجاء'}, {'community_id': '5', 'articles': [{'id': '133', 'title': 'ثلثا زوار المغرب في يوليوز من الجالية.. وأرقام السياحة تواصل الارتفاع', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/320478/', 'summary': 'ثلثا زوار المغرب في يوليوز من الجالية.. وأرقام السياحة تواصل الارتفاع. أفادت وزارة السياحة والصناعة التقليدية والاقتصاد الاجتماعي والتضامني بأن المغرب استقبل 11,6 مليون سائح بنهاية يوليوز 2025، بزيادة قدرها 16 في المائة مقارنة بالفترة ذاتها من سنة 2024. وأبرز بلاغ للوزارة أن هذه النتائج تؤكد الحفاظ على زخم قوي، مضيفة أن 52 في المائة من الوافدين هم مغاربة مقيمون بالخارج. وذكر المصدر ذاته أن الدينامية', 'size': 3}, {'id': '155', 'title': 'المغرب يستقبل 2.7 مليون سائح خلال يوليوز.. وثلثا الزوار من مغاربة العالم', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1091448.html', 'summary': 'المغرب يستقبل 2.7 مليون سائح خلال يوليوز.. وثلثا الزوار من مغاربة العالم. سجل القطاع السياحي في المغرب أداء إيجابيا خلال شهر يوليوز 2025، حيث بلغ عدد السياح الوافدين 2.7 مليون سائح، ما يمثل ارتفاعا بنسبة 6% مقارنة بنفس الشهر من السنة الماضية، بحسب ما أفادت به وزارة السياحة. وتوزعت هذه الزيادة بين السياح الأجانب والمغاربة المقيمين بالخارج، مما يؤكد استمرار جاذبية المغرب كوجهة سياحية مفضلة لدى الفئتين، ظهرت المقالة المغرب يستقبل 2.7 مليون سائح خلال يوليوز.. وثلثا الزوار من مغاربة العالم  .', 'size': 3}, {'id': '165', 'title': '11.6 مليون سائح في 7 أشهر... ونصفهم مغاربة العالم!', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/11-6-%d9%85%d9%84%d9%8a%d9%88%d9%86-%d8%b3%d8%a7%d8%a6%d8%ad-%d9%81%d9%8a-7-%d8%a3%d8%b4%d9%87%d8%b1-%d9%88%d9%86%d8%b5%d9%81%d9%87%d9%85-%d9%85%d8%ba%d8%a7%d8%b1%d8%a8%d8%a9-%d8%a7%d9%84%d8%b9/', 'summary': '11.6 مليون سائح في 7 أشهر... ونصفهم مغاربة العالم!. أعلنت وزارة السياحة والصناعة التقليدية والاقتصاد الاجتماعي والتضامني أن المغرب استقبل 11,6 مليون سائح بنهاية يوليوز، بزيادة قدرها 16 في المائة مقارنة بالفترة ذاتها من سنة 2024. وأبرز بلاغ للوزارة أن هذه النتائج تؤكد الحفاظ على زخم قوي، مضيفة أن 52 في المائة من الوافدين هم مغاربة مقيمون بالخارج. وذكر المصدر ذاته أن الدينامية الإيجابية  11.6 مليون سائح في 7 أشهر... ونصفهم مغاربة العالم!     .', 'size': 3}], 'main_title': 'ثلثا زوار المغرب في يوليوز من الجالية.. وأرقام السياحة تواصل الارتفاع'}, {'community_id': '6', 'articles': [{'id': '141', 'title': 'هلال يبرز دور المبادرة الملكية الأطلسية في تنمية دول الساحل', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/320448/', 'summary': 'هلال يبرز دور المبادرة الملكية الأطلسية في تنمية دول الساحل. أكد السفير الممثل الدائم للمملكة لدى الأمم المتحدة، ورئيس الدورة الـ22 للجنة رفيعة المستوى التابعة للجمعية العامة الأممية بشأن التعاون جنوب-جنوب، عمر هلال، اليوم الأربعاء بأوازا بتركمنستان، أن المملكة المغربية تواصل تقديم الدعم الملموس للبلدان الإفريقية غير الساحلية، تحت القيادة السامية لصاحب الجلالة الملك محمد السادس نصره الله. وأبرز هلال، خلال الاجتماع الوزاري حول التعاون', 'size': 3}, {'id': '219', 'title': 'عمر هلال يبرز دور المبادرة الملكية الأطلسية في تنمية دول الساحل', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/225713/', 'summary': 'عمر هلال يبرز دور المبادرة الملكية الأطلسية في تنمية دول الساحل. أكد السفير الممثل الدائم للمملكة لدى الأمم المتحدة، ورئيس الدورة الـ22 للجنة رفيعة المستوى التابعة للجمعية العامة الأممية بشأن التعاون جنوب-جنوب، عمر هلال، الأربعاء بأوازا بتركمنستان، أن المملكة المغربية تواصل تقديم الدعم الملموس للبلدان الإفريقية غير الساحلية، تحت القيادة السامية لصاحب الجلالة الملك محمد السادس نصره الله. وأبرز السيد هلال، خلال الاجتماع الوزاري حول التعاون', 'size': 3}, {'id': '234', 'title': 'تركمنستان.. هلال يبرز دور المبادرة الملكية الأطلسية في تنمية دول الساحل', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%aa%d8%b1%d9%83%d9%85%d9%86%d8%b3%d8%aa%d8%a7%d9%86-%d9%87%d9%84%d8%a7%d9%84-%d9%8a%d8%a8%d8%b1%d8%b2-%d8%af%d9%88%d8%b1-%d8%a7%d9%84%d9%85%d8%a8%d8%a7%d8%af%d8%b1%d8%a9-%d8%a7%d9%84%d9%85%d9%84/', 'summary': 'تركمنستان.. هلال يبرز دور المبادرة الملكية الأطلسية في تنمية دول الساحل. شدد السفير الممثل الدائم للمملكة لدى الأمم المتحدة، ورئيس الدورة الـ22 للجنة رفيعة المستوى التابعة للجمعية العامة الأممية بشأن التعاون جنوب-جنوب، عمر هلال، يوم أمس الأربعاء بأوازا بتركمنستان، على أن المملكة المغربية تواصل تقديم الدعم الملموس للبلدان الإفريقية غير الساحلية، تحت القيادة السامية للملك محمد السادس. وأضاف هلال، خلال الاجتماع الوزاري حول التعاون …  تركمنستان.. هلال يبرز دور المبادرة الملكية الأطلسية في تنمية دول الساحل     .', 'size': 3}], 'main_title': 'هلال يبرز دور المبادرة الملكية الأطلسية في تنمية دول الساحل'}, {'community_id': '8', 'articles': [{'id': '150', 'title': 'تعديلات جديدة تمنح مرونة أكبر للموظفين المنخرطين في نظام التقاعد التكميلي', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1091401.html', 'summary': 'تعديلات جديدة تمنح مرونة أكبر للموظفين المنخرطين في نظام التقاعد التكميلي. صادقت وزيرة الاقتصاد والمالية، نادية فتاح، على تغييرات جديدة في نظام التقاعد التكميلي والاختياري المعروف بـ”التكميلي”، والذي يديره الصندوق المغربي للتقاعد، وذلك بموجب قرار صدر بتاريخ 10 يونيو 2025، بهدف إتاحة مرونة أكبر للمنخرطين في الاستفادة من حقوقهم وتحديد شروط وإجراءات جديدة لتسيير النظام. ويمنح القرار الجديد المنشور في الجريدة الرسمية عدد 7426، للمنخرطين الحق ظهرت المقالة تعديلات جديدة تمنح مرونة أكبر للموظفين المنخرطين في نظام التقاعد التكميلي  .', 'size': 2}, {'id': '295', 'title': 'نظام التقاعد التكميلي يعود بحلة جديدة.. وزارة المالية تصادق على تغييرات مهمة لفائدة المنخرطين', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/economy/410696.html', 'summary': 'نظام التقاعد التكميلي يعود بحلة جديدة.. وزارة المالية تصادق على تغييرات مهمة لفائدة المنخرطين. صادقت وزيرة الاقتصاد والمالية، نادية فتاح، على القرار رقم 1524.25 الصادر بتاريخ 10 يونيو 2025، والذي يُقر رسمياً التعديلات الجديدة التي طرأت على نظام التقاعد', 'size': 2}], 'main_title': 'تعديلات جديدة تمنح مرونة أكبر للموظفين المنخرطين في نظام التقاعد التكميلي'}, {'community_id': '9', 'articles': [{'id': '186', 'title': 'البيضاء.. توزيع معدات خاصة بمشاريع مدرة للدخل لفائدة سجناء سابقين', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/471964.html', 'summary': 'البيضاء.. توزيع معدات خاصة بمشاريع مدرة للدخل لفائدة سجناء سابقين. متابعة نظمت مؤسسة محمد السادس لإعادة إدماج السجناء، اليوم الخميس بمركز المصاحبة وإعادة الإدماج بالدار البيضاء، حفل توزيع تجهيزات ومعدات خاصة بمشاريع مدرة للدخل لفائدة نزيلات ونزلاء سابقين بالمؤسسات السجنية التابعة لللنفوذ الترابي للدار البيضاء. وتندرج هذه المبادرة، التي استفاد منها 27 مستفيدة ومستفيدا، في إطار اتفاقية شراكة بين مؤسسة محمد السادس لإعادة إدماج السجناء …', 'size': 3}, {'id': '231', 'title': 'توزيع معدات خاصة بمشاريع مدرة للدخل لفائدة نزلاء مؤسسات سجنية سابقين بالدار البيضاء', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%aa%d9%88%d8%b2%d9%8a%d8%b9-%d9%85%d8%b9%d8%af%d8%a7%d8%aa-%d8%ae%d8%a7%d8%b5%d8%a9-%d8%a8%d9%85%d8%b4%d8%a7%d8%b1%d9%8a%d8%b9-%d9%85%d8%af%d8%b1%d8%a9-%d9%84%d9%84%d8%af%d8%ae%d9%84-%d9%84%d9%81/', 'summary': 'توزيع معدات خاصة بمشاريع مدرة للدخل لفائدة نزلاء مؤسسات سجنية سابقين بالدار البيضاء. نظمت مؤسسة محمد السادس لإعادة إدماج السجناء، اليوم الخميس بمركز المصاحبة وإعادة الإدماج بالدار البيضاء، حفل توزيع تجهيزات ومعدات خاصة بمشاريع مدرة للدخل لفائدة نزيلات ونزلاء سابقين بالمؤسسات السجنية التابعة لللنفوذ الترابي للدار البيضاء. وتندرج هذه المبادرة، التي استفاد منها 27 مستفيدة ومستفيدا، في إطار اتفاقية شراكة بين مؤسسة محمد السادس لإعادة إدماج …  توزيع معدات خاصة بمشاريع مدرة للدخل لفائدة نزلاء مؤسسات سجنية سابقين بالدار البيضاء     .', 'size': 3}, {'id': '360', 'title': 'الدار البيضاء.. توزيع معدات خاصة بمشاريع مدرة للدخل لفائدة سجناء سابقين', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a7%d9%84%d8%af%d8%a7%d8%b1-%d8%a7%d9%84%d8%a8%d9%8a%d8%b6%d8%a7%d8%a1-%d8%aa%d9%88%d8%b2%d9%8a%d8%b9-%d9%85%d8%b9%d8%af%d8%a7%d8%aa-%d8%ae%d8%a7%d8%b5%d8%a9-%d8%a8%d9%85%d8%b4%d8%a7%d8%b1%d9%8a/', 'summary': 'الدار البيضاء.. توزيع معدات خاصة بمشاريع مدرة للدخل لفائدة سجناء سابقين. نظمت مؤسسة محمد السادس لإعادة إدماج السجناء، أمس الخميس بمركز المصاحبة وإعادة الإدماج بالدار البيضاء، حفل توزيع تجهيزات ومعدات خاصة بمشاريع مدرة للدخل لفائدة نزيلات ونزلاء سابقين بالمؤسسات السجنية التابعة للنفوذ الترابي للدار البيضاء. وتندرج هذه المبادرة، التي استفاد منها 27 مستفيدة ومستفيدا، في إطار اتفاقية شراكة بين مؤسسة محمد السادس لإعادة إدماج السجناء والمبادرة  الدار البيضاء.. توزيع معدات خاصة بمشاريع مدرة للدخل لفائدة سجناء سابقين     .', 'size': 3}], 'main_title': 'البيضاء.. توزيع معدات خاصة بمشاريع مدرة للدخل لفائدة سجناء سابقين'}, {'community_id': '3', 'articles': [{'id': '235', 'title': 'عطلة في إسبانيا من أجل مؤبد في تندوف', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%b9%d8%b7%d9%84%d8%a9-%d9%81%d9%8a-%d8%a5%d8%b3%d8%a8%d8%a7%d9%86%d9%8a%d8%a7-%d9%85%d9%86-%d8%a3%d8%ac%d9%84-%d9%85%d8%a4%d8%a8%d8%af-%d9%81%d9%8a-%d8%aa%d9%86%d8%af%d9%88%d9%81/', 'summary': 'عطلة في إسبانيا من أجل مؤبد في تندوف. تستقبل إسبانيا خلال فصل الصيف الحالي، أكثر من 3000 طفل من مخيمات تندوف، في إطار ما يطلق عليه “عطلة في سلام”، حيث تستضيف عائلات إسبانية هؤلاء الأطفال، صحبة مرافقين لهم من ميليشيات البوليزاريو، وتمنح لهم كل التسهيلات في الحصول على التأشيرة، كما تتطوع المجالس المنتخبة والحكومة الإسبانية، لتمويل هذه العملية، التي تتم بشكل …  عطلة في إسبانيا من أجل مؤبد في تندوف     .', 'size': 2}, {'id': '258', 'title': 'الرأي | عطلة في إسبانيا من أجل مؤبد في تندوف', 'source': 'www.alousboue.ma', 'link': 'https://www.alousboue.ma/123103/', 'summary': 'الرأي | عطلة في إسبانيا من أجل مؤبد في تندوف. تستقبل إسبانيا خلال فصل الصيف الحالي، أكثر من 3000 طفل من مخيمات تندوف، في إطار ما يطلق عليه “عطلة في سلام”، حيث تستضيف عائلات إسبانية هؤلاء الأطفال، صحبة مرافقين لهم من ميليشيات البوليزاريو، وتمنح لهم كل التسهيلات في الحصول على الـتأشيرة، كما تتطوع المجالس المنتخبة والحكومة الإسبانية، لتمويل هذه العملية، التي تتم بشكل …  الرأي | عطلة في إسبانيا من أجل مؤبد في تندوف     .', 'size': 2}], 'main_title': 'عطلة في إسبانيا من أجل مؤبد في تندوف'}, {'community_id': '7', 'articles': [{'id': '287', 'title': 'وفاة الفنان المصري سيد صادق', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-647706.html', 'summary': 'وفاة الفنان المصري سيد صادق. هبة بريس - وكالات غيب الموت اليوم الجمعة الفنان المصري سيد صادق عن عمر ناهز 80 عامًا، في وفاة مفاجئة دون معاناة من أي مرض، بحسب ما أعلن نجله السيناريست لؤي سيد صادق عبر حسابه على "فيس بوك". وكتب لؤي نجل الفنان عبر حسابه على فيسبوك: "إنّا لله وإنّا إليهِ رَاجعُون.. توفي إلى رحمة الله الراجل العظيم والدي (سيد صادق)". كما أفاد نجل الفنان أن صلاة الجنازة ستقام اليوم عقب صلاة الجمعة بمسجد الشرطة بالشيخ زايد، والدفن بمقابر الأسرة بطريق الفيوم.', 'size': 2}, {'id': '402', 'title': 'وفاة الفنان المصري سيد صادق عن عمر ناهز 80 عاما', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d9%88%d9%81%d8%a7%d8%a9-%d8%a7%d9%84%d9%81%d9%86%d8%a7%d9%86-%d8%a7%d9%84%d9%85%d8%b5%d8%b1%d9%8a-%d8%b3%d9%8a%d8%af-%d8%b5%d8%a7%d8%af%d9%82-%d8%b9%d9%86-%d8%b9%d9%85%d8%b1-%d9%86%d8%a7%d9%87%d8%b2/', 'summary': 'وفاة الفنان المصري سيد صادق عن عمر ناهز 80 عاما. رحل صباح اليوم الجمعة الفنان المصري سيد صادق عن عمر يناهز 80 عامًا. وأعلن نجله لؤي عبر حسابه على “فيسبوك” الخبر قائلاً: “إنّا لله وإنّا إليه راجعون.. توفي إلى رحمة الله الراجل العظيم والدي (سيد صادق)”. وأوضح أن صلاة الجنازة ستقام عقب صلاة الجمعة في مسجد الشرطة بالشيخ زايد، على أن يوارى جثمانه …  وفاة الفنان المصري سيد صادق عن عمر ناهز 80 عاما     .', 'size': 2}], 'main_title': 'وفاة الفنان المصري سيد صادق'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    