<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 19/08/2025 - 06h14</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '66', 'title': 'منظمة “Shanghai ” تصنف جامعة الحسن الثاني بالدارالبيضاء ضمن أفضل ألف جامعة عبر العالم للسنة الثانية على التوالي', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/205143', 'summary': 'منظمة “Shanghai ” تصنف جامعة الحسن الثاني بالدارالبيضاء ضمن أفضل ألف جامعة عبر العالم للسنة الثانية على التوالي.  كرست جامعة الحسن الثاني بالدار البيضاء إشعاعها الدولي بتصنيفها، للسنة الثانية على التوالي، ضمن أفضل ألف جامعة عبر العالم لسنة 2025 من قبل المنظمة الدولية Cultancy Ranking Shanghai، المتخصصة في تقييم أداء الجامعات من خلال معايير موضوعية تركز بشكل أساسي على الأداء البحثي. و ذكرت الجامعة ، في بلاغ ، “ أن نسخة', 'size': 2}, {'id': '360', 'title': 'منظمة تصنف جامعة الحسن الثاني ضمن أفضل ألف جامعة عبر العالم', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/473051.html', 'summary': 'منظمة تصنف جامعة الحسن الثاني ضمن أفضل ألف جامعة عبر العالم. كرست جامعة الحسن الثاني بالدار البيضاء إشعاعها الدولي بتصنيفها، للسنة الثانية على التوالي، ضمن أفضل ألف جامعة عبر العالم لسنة 2025 من قبل المنظمة الدولية Cultancy Ranking Shanghai، المتخصصة في تقييم أداء الجامعات من خلال معايير موضوعية تركز بشكل أساسي على الأداء البحثي. وذكرت الجامعة، في بلاغ، “أن نسخة 2025 من التصنيف العالمي للجامعات، المعروف …', 'size': 2}], 'main_title': 'منظمة “Shanghai ” تصنف جامعة الحسن الثاني بالدارالبيضاء ضمن أفضل ألف جامعة عبر العالم للسنة الثانية على التوالي'}, {'community_id': '1', 'articles': [{'id': '93', 'title': 'إقليم الجديدة في صدمة.. ذئاب بشرية تغتصب طفلا قاصرا بشكل جماعي في موسم مولاي عبد الله أمغار', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/society/411234.html', 'summary': 'إقليم الجديدة في صدمة.. ذئاب بشرية تغتصب طفلا قاصرا بشكل جماعي في موسم مولاي عبد الله أمغار. شهد إقليم الجديدة جريمة مروعة عقب اختتام موسم مولاي عبد الله أمغار، بعدما تعرض طفل يبلغ من العمر 13 سنة لاغتصاب جماعي نفذه أكثر من', 'size': 2}, {'id': '152', 'title': 'اغتصاب جماعي لطفل يثير صدمة ومطالب بتحقيق عاجل', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/321276/', 'summary': 'اغتصاب جماعي لطفل يثير صدمة ومطالب بتحقيق عاجل. عاشت ساكنة إقليم الجديدة صدمة قوية عقب اختتام فعاليات موسم مولاي عبد الله أمغار، بعد انتشار خبر تعرض طفل يبلغ من العمر 13 سنة لاغتصاب جماعي وصف بـ”المروع”. وحسب إفادات عائلية، فإن الطفل، الذي فقد والده ولا تعيله سوى والدته من ذوي الاحتياجات الخاصة، صرح بتعرضه لاعتداء نفذته مجموعة تضم أكثر من عشرة أشخاص.', 'size': 2}, {'id': '169', 'title': 'جريمة تهز موسم مولاي عبد الله أمغار .. 14 شخصا يتناوبون على اغتصاب طفل يتيم (صورة)', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1093496.html', 'summary': 'جريمة تهز موسم مولاي عبد الله أمغار .. 14 شخصا يتناوبون على اغتصاب طفل يتيم (صورة). اهتزت مدينة الجديدة أول أمس السبت 16 غشت 2025 على ظهرت المقالة جريمة تهز موسم مولاي عبد الله أمغار .. 14 شخصا يتناوبون على اغتصاب طفل يتيم (صورة)  .', 'size': 3}], 'main_title': 'جريمة تهز موسم مولاي عبد الله أمغار .. 14 شخصا يتناوبون على اغتصاب طفل يتيم (صورة)'}, {'community_id': '2', 'articles': [{'id': '95', 'title': 'أهي قصة حب جديدة.. كوثر بامو تثير الجدل بظهورها الراقص مع الرابور “Stormy”', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/culture/411236.html', 'summary': 'أهي قصة حب جديدة.. كوثر بامو تثير الجدل بظهورها الراقص مع الرابور “Stormy”. أشعلت الممثلة والمؤثرة المغربية كوثر بامو مواقع التواصل الاجتماعي، بعد نشرها مقطع فيديو ظهرت فيه برفقة الرابور المعروف “Stormy”، وهما يرقصان بحماس على إيقاع أغنية', 'size': 2}, {'id': '350', 'title': 'الجدل يرافق ظهور كوثر بامو ورابور مشهور', 'source': 'soltana.ma', 'link': 'https://soltana.ma/1357660.html', 'summary': 'الجدل يرافق ظهور كوثر بامو ورابور مشهور. أحدث ظهور صانعة المحتوى المغربية كوثر بامو برفقة الرابور المعروف “Stormy” في فيديو راقص على أنغام أغنية “ME JALO” ضجة واسعة على مواقع التواصل الاجتماعي. وأظهر المقطع تناغما واضحا بين الثنائي، ما دفع متابعيهما للتساؤل عن طبيعة العلاقة بينهما، إذ انقسم الجمهور بين من يرى أنه تعاون فني، ومن يعتقد بوجود علاقة شخصية تجمعهما، وهو', 'size': 2}], 'main_title': 'أهي قصة حب جديدة.. كوثر بامو تثير الجدل بظهورها الراقص مع الرابور “Stormy”'}, {'community_id': '3', 'articles': [{'id': '154', 'title': '20 في المائة من الأراضي الرطبة في العالم قد تختفي بحلول 2025', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/321267/', 'summary': '20 في المائة من الأراضي الرطبة في العالم قد تختفي بحلول 2025. ذكر علماء من جامعة “تومسك” الروسية أنه بحلول سنة 2050 قد تختفي نحو 20 في المائة من الأراضي الرطبة في العالم، وهي من بين أكثر النظم البيئية قيمة، رغم كونها أكثر هشاشة على كوكب الأرض، مشيرين إلى أنهم بدأوا بدراستها لإيجاد سبل للحفاظ عليها واستعادتها. وأظهر أحدث تقرير صادر عن اتفاقية الأراضي الرطبة أن العالم', 'size': 2}, {'id': '245', 'title': 'تقرير: خطر اختفاء 20% من الأراضي الرطبة بحلول 2050', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%aa%d9%82%d8%b1%d9%8a%d8%b1-%d8%ae%d8%b7%d8%b1-%d8%a7%d8%ae%d8%aa%d9%81%d8%a7%d8%a1-20-%d9%85%d9%86-%d8%a7%d9%84%d8%a3%d8%b1%d8%a7%d8%b6%d9%8a-%d8%a7%d9%84%d8%b1%d8%b7%d8%a8%d8%a9-%d8%a8%d8%ad/', 'summary': 'تقرير: خطر اختفاء 20% من الأراضي الرطبة بحلول 2050. حذّر علماء من جامعة “تومسك” الروسية من أن نحو خمس الأراضي الرطبة في العالم قد يختفي مع حلول سنة 2050، رغم أهميتها البيئية والاقتصادية البالغة، باعتبارها من أكثر النظم الطبيعية هشاشة على الكوكب. ووفق أحدث تقرير لاتفاقية الأراضي الرطبة، فقد العالم منذ عام 1970 حوالي 22% من هذه المساحات، أي ما يعادل 411 …  تقرير: خطر اختفاء 20% من الأراضي الرطبة بحلول 2050     .', 'size': 2}], 'main_title': '20 في المائة من الأراضي الرطبة في العالم قد تختفي بحلول 2025'}, {'community_id': '4', 'articles': [{'id': '173', 'title': '“الشركي” يضرب المغرب وموجة حر قياسية تصل إلى 47 درجة', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1093534.html', 'summary': '“الشركي” يضرب المغرب وموجة حر قياسية تصل إلى 47 درجة. أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب تسجيل موجة حر مع “الشركي” وزخات رعدية مصحوبة بتساقط للبرد وبهبات رياح من اليوم الاثنين إلى بعد غد الأربعاء، بعدد من مناطق المملكة. وأوضحت المديرية، في نشرة إنذارية من مستوى يقظة برتقالي، أنه من المرتقب تسجيل زخات رعدية مصحوبة بتساقط البرد وبهبات رياح اليوم الاثنين من الثالثة بعد ظهرت المقالة “الشركي” يضرب المغرب وموجة حر قياسية تصل إلى 47 درجة  .', 'size': 2}, {'id': '199', 'title': 'نشرة إنذارية.. موجة حر مع “الشركي” وزخات رعدية مصحوبة بالبرد مرتقبة بعدد من مناطق المملكة', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/473043.html', 'summary': 'نشرة إنذارية.. موجة حر مع “الشركي” وزخات رعدية مصحوبة بالبرد مرتقبة بعدد من مناطق المملكة. أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب تسجيل موجة حر مع “الشركي” وزخات رعدية مصحوبة بتساقط للبرد وبهبات رياح من اليوم الاثنين إلى بعد غد الأربعاء، بعدد من مناطق المملكة. وأوضحت المديرية، في نشرة إنذارية من مستوى يقظة برتقالي، أنه من المرتقب تسجيل زخات رعدية مصحوبة بتساقط البرد وبهبات رياح اليوم الاثنين من الثالثة بعد …', 'size': 3}, {'id': '212', 'title': 'موجة حر مع “الشركي” وزخات رعدية مصحوبة بالبرد وبهبات رياح مرتقبة من الاثنين إلى الأربعاء', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d9%85%d9%88%d8%ac%d8%a9-%d8%ad%d8%b1-%d9%85%d8%b9-%d8%a7%d9%84%d8%b4%d8%b1%d9%83%d9%8a-%d9%88%d8%b2%d8%ae%d8%a7%d8%aa-%d8%b1%d8%b9%d8%af%d9%8a%d8%a9-%d9%85%d8%b5%d8%ad%d9%88%d8%a8%d8%a9-%d8%a8/', 'summary': 'موجة حر مع “الشركي” وزخات رعدية مصحوبة بالبرد وبهبات رياح مرتقبة من الاثنين إلى الأربعاء. أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب تسجيل موجة حر مع “الشركي” وزخات رعدية مصحوبة بتساقط للبرد وبهبات رياح من اليوم الاثنين إلى بعد غد  موجة حر مع “الشركي” وزخات رعدية مصحوبة بالبرد وبهبات رياح مرتقبة من الاثنين إلى الأربعاء     .', 'size': 2}, {'id': '235', 'title': 'تمديد قابل للتجديد: الحر والشركي إلى غاية الأربعاء', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%aa%d9%85%d8%af%d9%8a%d8%af-%d9%82%d8%a7%d8%a8%d9%84-%d9%84%d9%84%d8%aa%d8%ac%d8%af%d9%8a%d8%af-%d8%a7%d9%84%d8%ad%d8%b1-%d9%88%d8%a7%d9%84%d8%b4%d8%b1%d9%83%d9%8a-%d8%a5%d9%84%d9%89-%d8%ba%d8%a7/', 'summary': 'تمديد قابل للتجديد: الحر والشركي إلى غاية الأربعاء. المساء اليوم: أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب تسجيل موجة حر مع “الشركي” وزخات رعدية مصحوبة بتساقط للبرد وبهبات رياح من اليوم الاثنين إلى بعد غد الأربعاء، بعدد من مناطق المملكة. وأوضحت المديرية، في', 'size': 3}, {'id': '248', 'title': 'نشرة إنذارية: موجة حر مع الشركي وزخات رعدية مصحوبة بالبرد وبهبات رياح مرتقبة بعدد من مناطق المملكة', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d9%86%d8%b4%d8%b1%d8%a9-%d8%a5%d9%86%d8%b0%d8%a7%d8%b1%d9%8a%d8%a9-%d9%85%d9%88%d8%ac%d8%a9-%d8%ad%d8%b1-%d9%85%d8%b9-%d8%a7%d9%84%d8%b4%d8%b1%d9%83%d9%8a-%d9%88%d8%b2%d8%ae%d8%a7%d8%aa-%d8%b1%d8%b9/', 'summary': 'نشرة إنذارية: موجة حر مع الشركي وزخات رعدية مصحوبة بالبرد وبهبات رياح مرتقبة بعدد من مناطق المملكة. أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب تسجيل موجة حر مع “الشركي” وزخات رعدية مصحوبة بتساقط للبرد وبهبات رياح من اليوم الاثنين إلى بعد غد الأربعاء، بعدد من مناطق المملكة. وأوضحت المديرية، في نشرة إنذارية من مستوى يقظة برتقالي، أنه من المرتقب تسجيل زخات رعدية مصحوبة بتساقط البرد وبهبات رياح اليوم الاثنين من …  نشرة إنذارية: موجة حر مع الشركي وزخات رعدية مصحوبة بالبرد وبهبات رياح مرتقبة بعدد من مناطق المملكة     .', 'size': 5}], 'main_title': 'نشرة إنذارية: موجة حر مع الشركي وزخات رعدية مصحوبة بالبرد وبهبات رياح مرتقبة بعدد من مناطق المملكة'}, {'community_id': '6', 'articles': [{'id': '277', 'title': 'احتياجات السيولة تبلغ 113مليار درهم', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d8%a7%d8%ad%d8%aa%d9%8a%d8%a7%d8%ac%d8%a7%d8%aa-%d8%a7%d9%84%d8%b3%d9%8a%d9%88%d9%84%d8%a9-%d8%aa%d8%a8%d9%84%d8%ba-113%d9%85%d9%84%d9%8a%d8%a7%d8%b1-%d8%af%d8%b1%d9%87%d9%85-1610966.html', 'summary': 'احتياجات السيولة تبلغ 113مليار درهم. أفاد بنك المغرب بأن احتياجات البنوك من السيولة بلغت 113 مليار درهم في المتوسط الأسبوعي خلال شهر يوليوز، مقابل 114 مليار درهم في الشهر السابق. وأكد بنك المغرب، في نشرته الشهرية الأخيرة حول الظرفية الاقتصادية والنقدية والمالية، أن الحجم الإجمالي لتدخلاته بلغ 128,8 مليار درهم، من بينها 50,7 مليار درهم على شكل تسبيقات لمدة 7  احتياجات السيولة تبلغ 113مليار درهم     - هسبريس جريدة إلكترونية مغربية .', 'size': 2}, {'id': '348', 'title': 'احتياجات البنوك من السيولة تصل 113 مليار درهم في يوليوز', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a7%d8%ad%d8%aa%d9%8a%d8%a7%d8%ac%d8%a7%d8%aa-%d8%a7%d9%84%d8%a8%d9%86%d9%88%d9%83-%d9%85%d9%86-%d8%a7%d9%84%d8%b3%d9%8a%d9%88%d9%84%d8%a9-%d8%aa%d8%b5%d9%84-113-%d9%85%d9%84%d9%8a%d8%a7%d8%b1/', 'summary': 'احتياجات البنوك من السيولة تصل 113 مليار درهم في يوليوز. كشف بنك المغرب أن احتياجات البنوك من السيولة بلغت 113 مليار درهم في المتوسط الأسبوعي خلال شهر يوليوز، مقارنة بـ 114 مليار درهم في الشهر السابق. وأكد البنك في نشرته الشهرية حول الظرفية الاقتصادية والنقدية والمالية، أن الحجم الإجمالي لتدخلاته بلغ 128,8 مليار درهم، منها 50,7 مليار درهم على شكل تسبيقات لمدة 7 أيام، و44  احتياجات البنوك من السيولة تصل 113 مليار درهم في يوليوز     .', 'size': 2}], 'main_title': 'احتياجات السيولة تبلغ 113مليار درهم'}, {'community_id': '7', 'articles': [{'id': '281', 'title': 'الملك محمد السادس يوجه مساعدات إنسانية إضافية عاجلة لسكان غزة', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-650472.html', 'summary': 'الملك محمد السادس يوجه مساعدات إنسانية إضافية عاجلة لسكان غزة. أصدر الملك محمد السادس ، رئيس لجنة القدس، تعليماته السامية اليوم الإثنين 18 غشت، بإرسال مساعدات إنسانية إضافية لفائدة سكان قطاع غزة، تجسيدًا للدعم الدائم والتضامن المستمر مع الشعب الفلسطيني الشقيق. وأوضح بلاغ لوزارة الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج أن هذه المساعدات تشمل حوالي 100 طن من المواد الغذائية والأدوية، موجهة بشكل خاص للفئات الهشة، لا سيما الأطفال والرضع. وأشار البلاغ إلى حرص الملك على أن تصل هذه المساعدات الإنسانية جواً عبر الطائرات، لتصل بسرعة وبشكل مباشر إلى المستفيدين من أبناء الشعب الفلسطيني، كما جرت العادة في المساعدات السابقة. وأكد المصدر أن هذه المبادرة الملكية تعكس انشغال جلالة الملك بالوضع الإنساني الحرج في غزة، وانخراطه الثابت في التخفيف من معاناة السكان، وتقديم الدعم العاجل لهم في ظل الظروف الإنسانية الصعبة التي يعيشونها.', 'size': 4}, {'id': '314', 'title': 'وزارة الشؤون الخارجية: جلالة الملك يصدر تعليماته السامية بإرسال مساعدات إنسانية إضافية لفائدة ساكنة غزة', 'source': 'kifache.com', 'link': 'https://kifache.com/%d9%88%d8%b2%d8%a7%d8%b1%d8%a9-%d8%a7%d9%84%d8%b4%d8%a4%d9%88%d9%86-%d8%a7%d9%84%d8%ae%d8%a7%d8%b1%d8%ac%d9%8a%d8%a9-%d8%ac%d9%84%d8%a7%d9%84%d8%a9-%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%8a%d8%b5%d8%af/', 'summary': 'وزارة الشؤون الخارجية: جلالة الملك يصدر تعليماته السامية بإرسال مساعدات إنسانية إضافية لفائدة ساكنة غزة. أفاد بلاغ لوزارة الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج، اليوم الاثنين (18 غشت)، بأنه تجسيدا للدعم الدائم والتضامن الملموس لصاحب الجلالة الملك محمد السادس، رئيس لجنة القدس، مع الشعب الفلسطيني الشقيق، أصدر جلالته، تعليماته السامية بإرسال مساعدات إنسانية إضافية لفائدة ساكنة غزة. وأوضح البلاغ أن هذه المساعدات تشمل حوالي 100 طن من المواد الغذائية', 'size': 5}, {'id': '342', 'title': '100 طن إضافي من المساعدات المغربية إلى غزة إثر تعليمات ملكية', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/100-%d8%b7%d9%86-%d8%a5%d8%b6%d8%a7%d9%81%d9%8a-%d9%85%d9%86-%d8%a7%d9%84%d9%85%d8%b3%d8%a7%d8%b9%d8%af%d8%a7%d8%aa-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8%d9%8a%d8%a9-%d8%a5%d9%84%d9%89-%d8%ba%d8%b2/', 'summary': '100 طن إضافي من المساعدات المغربية إلى غزة إثر تعليمات ملكية. أفاد بلاغ لوزارة الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج، اليوم الاثنين، بأنه تجسيدا للدعم الدائم والتضامن الملموس للملك محمد السادس، رئيس لجنة القدس، مع الشعب الفلسطيني الشقيق، أصدر تعليماته بإرسال مساعدات إنسانية إضافية لفائدة ساكنة غزة. وأوضح البلاغ أن هذه المساعدات تشمل حوالي 100 طن من المواد الغذائية والأدوية الموجهة بصفة خاصة للفئات الهشة،  100 طن إضافي من المساعدات المغربية إلى غزة إثر تعليمات ملكية     .', 'size': 5}, {'id': '351', 'title': 'جلالة الملك يأمر بإرسال طائرات مساعدات إضافية للفلسطينيين تصل إليهم مباشرة', 'source': 'rue20.com', 'link': 'https://rue20.com/929537.html', 'summary': 'جلالة الملك يأمر بإرسال طائرات مساعدات إضافية للفلسطينيين تصل إليهم مباشرة. . الرباط أفاد بلاغ لوزارة الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج، اليوم الاثنين، بأنه تجسيدا للدعم الدائم والتضامن الملموس لصاحب الجلالة الملك محمد السادس، نصره الله، رئيس لجنة القدس، مع الشعب الفلسطيني الشقيق، أصدر جلالته، حفظه الله، تعليماته السامية بإرسال مساعدات إنسانية إضافية لفائدة ساكنة غزة. وأوضح البلاغ أن هذه المساعدات تشمل حوالي الخبر جلالة الملك يأمر بإرسال طائرات مساعدات إضافية للفلسطينيين تصل إليهم مباشرة  .', 'size': 4}, {'id': '383', 'title': 'صاحب الجلالة، رئيس لجنة القدس، يأمر بإرسال مساعدات إضافية لساكنة غزة', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/226063/', 'summary': 'صاحب الجلالة، رئيس لجنة القدس، يأمر بإرسال مساعدات إضافية لساكنة غزة. أفاد بلاغ لوزارة الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج، اليوم الاثنين، بأنه تجسيدا للدعم الدائم والتضامن الملموس لصاحب الجلالة الملك محمد السادس، نصره الله، رئيس لجنة القدس، مع الشعب الفلسطيني الشقيق، أصدر جلالته، حفظه الله، تعليماته السامية بإرسال مساعدات إنسانية إضافية لفائدة ساكنة غزة. وأوضح البلاغ أن هذه المساعدات تشمل حوالي 100 طن من', 'size': 5}], 'main_title': 'وزارة الشؤون الخارجية: جلالة الملك يصدر تعليماته السامية بإرسال مساعدات إنسانية إضافية لفائدة ساكنة غزة'}, {'community_id': '5', 'articles': [{'id': '302', 'title': 'الشرطة الإسبانية توقف عنصرين موالين لـ"داعش" بالتعاون مع المديرية العامة لمراقبة التراب الوطني', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/society/411272.html', 'summary': 'الشرطة الإسبانية توقف عنصرين موالين لـ"داعش" بالتعاون مع المديرية العامة لمراقبة التراب الوطني. أعلنت الشرطة الوطنية الإسبانية، اليوم الاثنين، عن توقيف شخصين يشتبه في انتمائهما للتنظيم الإرهابي "داعش"، خلال عملية نفذت بإقليم كتالونيا، وذلك بالتعاون مع المديرية العامة', 'size': 2}, {'id': '334', 'title': 'معلومات استخباراتية مغربية تقود إسبانيا لاعتقال مواليين لـ”داعش” في كتالونيا', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1093597.html', 'summary': 'معلومات استخباراتية مغربية تقود إسبانيا لاعتقال مواليين لـ”داعش” في كتالونيا. أعلنت الشرطة الوطنية الإسبانية، اليوم الاثنين ظهرت المقالة معلومات استخباراتية مغربية تقود إسبانيا لاعتقال مواليين لـ”داعش” في كتالونيا  .', 'size': 2}, {'id': '373', 'title': 'إسبانيا توقف عنصرين موالين لـ”داعش” بالتعاون مع المديرية العامة لمراقبة التراب الوطني', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d8%a5%d8%b3%d8%a8%d8%a7%d9%86%d9%8a%d8%a7-%d8%aa%d9%88%d9%82%d9%81-%d8%b9%d9%86%d8%b5%d8%b1%d9%8a%d9%86-%d9%85%d9%88%d8%a7%d9%84%d9%8a%d9%86-%d9%84%d9%80%d8%af%d8%a7%d8%b9%d8%b4/', 'summary': 'إسبانيا توقف عنصرين موالين لـ”داعش” بالتعاون مع المديرية العامة لمراقبة التراب الوطني. أعلنت الشرطة الوطنية الإسبانية، اليوم الاثنين، عن توقيف شخصين يشتبه في انتمائهما للتنظيم الإرهابي “داعش”، خلال عملية نفذت بإقليم كتالونيا،  إسبانيا توقف عنصرين موالين لـ”داعش” بالتعاون مع المديرية العامة لمراقبة التراب الوطني     .', 'size': 3}], 'main_title': 'إسبانيا توقف عنصرين موالين لـ”داعش” بالتعاون مع المديرية العامة لمراقبة التراب الوطني'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    