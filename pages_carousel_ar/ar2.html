<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 29/09/2025 - 18h26</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '5', 'title': 'الركراكي يلتقي بالصحافيين في سلا', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d8%a7%d9%84%d8%b1%d9%83%d8%b1%d8%a7%d9%83%d9%8a-%d9%8a%d9%84%d8%aa%d9%82%d9%8a-%d8%a8%d8%a7%d9%84%d8%b5%d8%ad%d8%a7%d9%81%d9%8a%d9%8a%d9%86-%d9%81%d9%8a-%d8%b3%d9%84%d8%a7-1631822.html', 'summary': 'الركراكي يلتقي بالصحافيين في سلا. يعقد مدرب المنتخب الوطني الأول، وليد الركراكي، يوم الخميس المقبل بمدينة سلا، ندوة صحفية يكشف خلالها عن قائمة “أسود الأطلس” للمباراتين المرتقبتين أمام البحرين والكونغو. وأوضحت الجامعة الملكية المغربية لكرة القدم في بلاغ لها أن الندوة ستقام بقاعة الندوات التابعة لمركب محمد السادس لكرة القدم بالمعمورة ضواحي سلا، ابتداءً من الساعة الحادية عشرة صباحًا. وسيقابل  الركراكي يلتقي بالصحافيين في سلا     - هسبريس جريدة إلكترونية مغربية .', 'size': 3}, {'id': '164', 'title': 'الركراكي يكشف اختياراته لمباراتي البحرين والكونغو في هذا التاريخ', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d9%85%d8%a8%d8%a7%d8%b1%d8%a7%d8%aa%d9%8a-%d8%a7%d9%84%d8%a8%d8%ad%d8%b1%d9%8a%d9%86-%d9%88-%d8%a7%d9%84%d9%83%d9%88%d9%86%d8%ba%d9%88-%d8%a7%d9%84%d8%b1%d9%83%d8%b1%d8%a7%d9%83%d9%8a-%d9%8a%d8%b9/', 'summary': 'الركراكي يكشف اختياراته لمباراتي البحرين والكونغو في هذا التاريخ. يعقد مدرب المنتخب الوطني الأول، وليد الركراكي، يوم الخميس المقبل بسلا، ندوة صحفية يعلن خلالها عن قائمة أسود الأطلس لمباراتي البحرين و الكونغو. وأفاد بلاغ للجامعة الملكية المغربية لكرة القدم بأن هذه الندوة ستحتضنها قاعة الندوات التابعة لمركب محمد السادس لكرة القدم بالمعمورة في سلا، ابتداء من الساعة الحادية عشرة صباحا. وسيواجه المنتخب الوطني المغربي  الركراكي يكشف اختياراته لمباراتي البحرين والكونغو في هذا التاريخ     .', 'size': 3}, {'id': '230', 'title': 'وليد الركراكي يعقد ندوة صحفية للإعلان عن قائمة أسود الأطلس لمباراتي البحرين والكونغو', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d9%88%d9%84%d9%8a%d8%af-%d8%a7%d9%84%d8%b1%d9%83%d8%b1%d8%a7%d9%83%d9%8a-%d9%8a%d8%b9%d9%82%d8%af-%d9%86%d8%af%d9%88%d8%a9-%d8%b5%d8%ad%d9%81%d9%8a%d8%a9-%d9%84%d9%84%d8%a5%d8%b9%d9%84%d8%a7%d9%86/', 'summary': 'وليد الركراكي يعقد ندوة صحفية للإعلان عن قائمة أسود الأطلس لمباراتي البحرين والكونغو. يعقد مدرب المنتخب الوطني الأول، وليد الركراكي، يوم الخميس 02 أكتوبر 2025 المقبل بسلا ،ندوة صحفية يكشف خلالها عن قائمة أسود الأطلس لمباراتي البحرين ولكونغو. وأوضح بلاغ للجامعة الملكية المغربية لكرة القدم بأن هذه الندوة ستحتضنها قاعة الندوات التابعة لمركب محمد السادس لكرة القدم بالمعمورة في سلا، ابتداء من الساعة الحادية عشرة صباحا. …  وليد الركراكي يعقد ندوة صحفية للإعلان عن قائمة أسود الأطلس لمباراتي البحرين والكونغو     .', 'size': 3}], 'main_title': 'الركراكي يلتقي بالصحافيين في سلا'}, {'community_id': '1', 'articles': [{'id': '48', 'title': 'الخارجية الأمريكية: المغرب قطب إقليمي استراتيجي للاستثمار والأعمال', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-661530.html', 'summary': 'الخارجية الأمريكية: المغرب قطب إقليمي استراتيجي للاستثمار والأعمال. في تقريرها لسنة 2025 حول مناخ الاستثمار بالمغرب، الصادر هذا الأسبوع، سلطت وزارة الخارجية الأمريكية الضوء على المؤهلات الرئيسية وفرص الاستثمار التي تجعل من المملكة “قطبا إقليميا استراتيجيا للأعمال والصناعة”. وفي هذا التقرير، الذي يتناول العديد من المحاور، أبرزها الاستثمار، والسياسات الصناعية، والقطاع المالي، والمنظومة القانونية، استعرضت الخارجية الأمريكية مختلف الفرص التي تزخر بها المملكة، خاصة في', 'size': 2}, {'id': '218', 'title': 'الخارجية الأمريكية تبرز مؤهلات المغرب كـ”قطب استراتيجي” للأعمال والصناعة', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/227686/', 'summary': 'الخارجية الأمريكية تبرز مؤهلات المغرب كـ”قطب استراتيجي” للأعمال والصناعة. في تقريرها لسنة 2025 حول مناخ الاستثمار بالمغرب، الصادر هذا الأسبوع، سلطت وزارة الخارجية الأمريكية الضوء على المؤهلات الرئيسية وفرص الاستثمار التي تجعل من المملكة “قطبا إقليميا استراتيجيا للأعمال والصناعة”. وفي هذا التقرير، الذي يتناول العديد من المحاور، أبرزها الاستثمار، والسياسات الصناعية، والقطاع المالي، والمنظومة القانونية، استعرضت الخارجية الأمريكية مختلف الفرص التي تزخر بها المملكة،', 'size': 2}], 'main_title': 'الخارجية الأمريكية: المغرب قطب إقليمي استراتيجي للاستثمار والأعمال'}, {'community_id': '3', 'articles': [{'id': '49', 'title': 'المغاربة يخلدون غدا الإثنين ذكرى ميلاد الأميرة للا أسماء', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-661528.html', 'summary': 'المغاربة يخلدون غدا الإثنين ذكرى ميلاد الأميرة للا أسماء. هبة بريس تحتفل الأسرة الملكية ومعها الشعب المغربي، يوم غد الإثنين، بذكرى ميلاد صاحبة السمو الملكي الأميرة للا أسماء، وهي مناسبة لتسليط الضوء على الانخراط الدائم لسموها في مختلف المبادرات ذات الطابع الاجتماعي، والتزامها الراسخ بتحسين ظروف عيش الأطفال ذوي الاحتياجات الخاصة، لاسيما الأطفال الصم والبكم. ودأبت صاحبة السمو الملكي الأميرة للا أسماء، على الدوام،', 'size': 2}, {'id': '80', 'title': 'الشعب المغربي يحتفل غدا بذكرى ميلاد صاحبة السمو الملكي الأميرة للا أسماء', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/413548.html', 'summary': 'الشعب المغربي يحتفل غدا بذكرى ميلاد صاحبة السمو الملكي الأميرة للا أسماء. تحتفل الأسرة الملكية ومعها الشعب المغربي، يوم غد الإثنين، بذكرى ميلاد صاحبة السمو الملكي الأميرة للا أسماء، وهي مناسبة لتسليط الضوء على الانخراط الدائم لسموها', 'size': 3}, {'id': '219', 'title': 'الشعب المغربي يحتفل غدا الاثنين بذكرى ميلاد الأميرة للا أسماء', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/227684/', 'summary': 'الشعب المغربي يحتفل غدا الاثنين بذكرى ميلاد الأميرة للا أسماء. تحتفل الأسرة الملكية ومعها الشعب المغربي، يوم غد الإثنين، بذكرى ميلاد صاحبة السمو الملكي الأميرة للا أسماء، وهي مناسبة لتسليط الضوء على الانخراط الدائم لسموها في مختلف المبادرات ذات الطابع الاجتماعي، والتزامها الراسخ بتحسين ظروف عيش الأطفال ذوي الاحتياجات الخاصة، لاسيما الأطفال الصم والبكم. ودأبت صاحبة السمو الملكي الأميرة للا أسماء، على الدوام، على الانخراط', 'size': 4}, {'id': '350', 'title': 'الشعب المغربي يحتفل بذكرى ميلاد الأميرة للا أسماء', 'source': 'assabah.ma', 'link': 'https://assabah.ma/873767.html', 'summary': 'الشعب المغربي يحتفل بذكرى ميلاد الأميرة للا أسماء. تحتفل الأسرة الملكية ومعها الشعب المغربي، اليوم الإثنين، بذكرى ميلاد صاحبة السمو الملكي الأميرة للا أسماء، وهي مناسبة لتسليط الضوء على الانخراط الدائم لسموها في مختلف المبادرات ذات الطابع الاجتماعي، والتزامها الراسخ بتحسين ظروف عيش الأطفال ذوي الاحتياجات الخاصة، لاسيما الأطفال الصم والبكم. ودأبت صاحبة السمو الملكيأكمل القراءة » المقالة الشعب المغربي يحتفل بذكرى ميلاد الأميرة للا أسماء  .', 'size': 3}], 'main_title': 'الشعب المغربي يحتفل غدا الاثنين بذكرى ميلاد الأميرة للا أسماء'}, {'community_id': '4', 'articles': [{'id': '114', 'title': 'نشرة إنذارية: زخات رعدية محليا قوية مصحوبة بتساقط للبرد مرتقبة اليوم الاثنين بعدد من مناطق المملكة', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/413587.html', 'summary': 'نشرة إنذارية: زخات رعدية محليا قوية مصحوبة بتساقط للبرد مرتقبة اليوم الاثنين بعدد من مناطق المملكة. أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب تسجيل زخات رعدية محليا قوية (من 15 إلى 25 ملم) مصحوبة بتساقط للبرد، اليوم الاثنين، بعدد من مناطق', 'size': 2}, {'id': '185', 'title': 'اليوم الاثنين.. زخات رعدية محليا قوية مصحوبة بتساقط للبرد', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/477085.html', 'summary': 'اليوم الاثنين.. زخات رعدية محليا قوية مصحوبة بتساقط للبرد. أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب تسجيل زخات رعدية محليا قوية (من 15 إلى 25 ملم) مصحوبة بتساقط للبرد، اليوم الاثنين، بعدد من مناطق المملكة.', 'size': 2}], 'main_title': 'نشرة إنذارية: زخات رعدية محليا قوية مصحوبة بتساقط للبرد مرتقبة اليوم الاثنين بعدد من مناطق المملكة'}, {'community_id': '5', 'articles': [{'id': '142', 'title': 'أكثر من 4 آلاف متقاعد بالتعليم يتسلمون معاشاتهم في الموعد', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1103779.html', 'summary': 'أكثر من 4 آلاف متقاعد بالتعليم يتسلمون معاشاتهم في الموعد. أعلن الصندوق المغربي للتقاعد، اليوم الاثنين، أن عملية صرف معاشات المتقاعدين الجدد التابعين لقطاع التربية والتعليم برسم سنة 2025 قد تمت بنجاح. وأوضح بلاغ للصندوق، أنه تم صرف أكثر من 4.000 معاش لفائدة المنخرطين الذين أحيلوا على التقاعد في 31 غشت 2025، لبلوغهم حد السن أو بناء على طلب منهم، أي بمعدل إنجاز ناهز 99 ظهرت المقالة أكثر من 4 آلاف متقاعد بالتعليم يتسلمون معاشاتهم في الموعد  .', 'size': 2}, {'id': '305', 'title': 'صرف أزيد من 4000 معاش متقاعد جديد تابعين لقطاع التعليم', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-661644.html', 'summary': 'صرف أزيد من 4000 معاش متقاعد جديد تابعين لقطاع التعليم. هبة بريس أعلن الصندوق المغربي للتقاعد، اليوم الاثنين، أن عملية صرف معاشات المتقاعدين الجدد التابعين لقطاع التربية والتعليم برسم سنة 2025 قد تمت بنجاح. وأوضح بلاغ للصندوق، أنه تم صرف أكثر من 4.000 معاش لفائدة المنخرطين الذين أحيلوا على التقاعد في 31 غشت 2025، لبلوغهم حد السن أو بناء على طلب منهم، أي بمعدل إنجاز', 'size': 2}], 'main_title': 'أكثر من 4 آلاف متقاعد بالتعليم يتسلمون معاشاتهم في الموعد'}, {'community_id': '2', 'articles': [{'id': '169', 'title': 'نشرة إنذارية.. زخات رعدية قوية مرتقبة يومي الأربعاء والخميس بإقليمي أوسرد ووادي الذهب', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d9%86%d8%b4%d8%b1%d8%a9-%d8%a5%d9%86%d8%b0%d8%a7%d8%b1%d9%8a%d8%a9-%d8%b2%d8%ae%d8%a7%d8%aa-%d8%b1%d8%b9%d8%af%d9%8a%d8%a9-%d9%82%d9%88%d9%8a%d8%a9-%d9%85%d8%b1%d8%aa%d9%82%d8%a8%d8%a9-%d9%8a%d9%88/', 'summary': 'نشرة إنذارية.. زخات رعدية قوية مرتقبة يومي الأربعاء والخميس بإقليمي أوسرد ووادي الذهب. أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب تسجيل زخات رعدية قوية (بين 50 و80 ملم)، يومي الأربعاء والخميس المقبلين، بإقليمي أوسرد ووادي الذهب. وأوضحت المديرية، في نشرة قبلية، أنه من المرتقب تسجيل هذه الزخات الرعدية ابتداء من منتصف نهار يوم الأربعاء وإلى غاية السادسة من مساء الخميس.  نشرة إنذارية.. زخات رعدية قوية مرتقبة يومي الأربعاء والخميس بإقليمي أوسرد ووادي الذهب     .', 'size': 3}, {'id': '200', 'title': 'زخات رعدية قوية مرتقبة يومي الأربعاء والخميس بإقليمي أوسرد ووادي الذهب', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d8%b2%d8%ae%d8%a7%d8%aa-%d8%b1%d8%b9%d8%af%d9%8a%d8%a9-%d9%82%d9%88%d9%8a%d8%a9-%d9%85%d8%b1%d8%aa%d9%82%d8%a8%d8%a9-%d9%8a%d9%88%d9%85%d9%8a-%d8%a7%d9%84%d8%a3%d8%b1%d8%a8%d8%b9%d8%a7%d8%a1-%d9%88/', 'summary': 'زخات رعدية قوية مرتقبة يومي الأربعاء والخميس بإقليمي أوسرد ووادي الذهب. أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب تسجيل زخات رعدية قوية (بين 50 و80 ملم)، يومي الأربعاء والخميس المقبلين، بإقليمي أوسرد ووادي الذهب.  زخات رعدية قوية مرتقبة يومي الأربعاء والخميس بإقليمي أوسرد ووادي الذهب     .', 'size': 3}, {'id': '237', 'title': 'زخات رعدية قوية مرتقبة بعدد من مناطق المملكة', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%b2%d8%ae%d8%a7%d8%aa-%d8%b1%d8%b9%d8%af%d9%8a%d8%a9-%d9%82%d9%88%d9%8a%d8%a9-%d9%85%d8%b1%d8%aa%d9%82%d8%a8%d8%a9-%d8%a8%d8%b9%d8%af%d8%af-%d9%85%d9%86-%d9%85%d9%86%d8%a7%d8%b7%d9%82-%d8%a7%d9%84/', 'summary': 'زخات رعدية قوية مرتقبة بعدد من مناطق المملكة. كشفت المديرية العامة للأرصاد الجوية بأنه يرتقب تسجيل زخات رعدية قوية (بين 50 و80 ملم)، يومي الأربعاء والخميس المقبلين، بإقليمي أوسرد ووادي الذهب. وأضافت المديرية، في نشرة قبلية، أنه من المرتقب تسجيل هذه الزخات الرعدية ابتداء من منتصف نهار يوم الأربعاء وإلى غاية السادسة من مساء الخميس.  زخات رعدية قوية مرتقبة بعدد من مناطق المملكة     .', 'size': 3}], 'main_title': 'نشرة إنذارية.. زخات رعدية قوية مرتقبة يومي الأربعاء والخميس بإقليمي أوسرد ووادي الذهب'}, {'community_id': '8', 'articles': [{'id': '170', 'title': 'انخفاض الرقم الاستدلالي للأثمان عند الإنتاج للصناعات التحويلية بـ 0,1 في المائة', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a7%d9%86%d8%ae%d9%81%d8%a7%d8%b6-%d8%a7%d9%84%d8%b1%d9%82%d9%85-%d8%a7%d9%84%d8%a7%d8%b3%d8%aa%d8%af%d9%84%d8%a7%d9%84%d9%8a-%d9%84%d9%84%d8%a3%d8%ab%d9%85%d8%a7%d9%86-%d8%b9%d9%86%d8%af-%d8%a7/', 'summary': 'انخفاض الرقم الاستدلالي للأثمان عند الإنتاج للصناعات التحويلية بـ 0,1 في المائة. أفادت المندوبية السامية للتخطيط بأن الرقم الاستدلالي للأثمان عند الإنتاج لقطاع "الصناعات التحويلية باستثناء تكرير البترول" سجل انخفاضا قدره 0,1 في المائة خلال شهر غشت 2025 مقارنة مع شهر يوليوز 2025. وأوضحت المندوبية، في مذكرتها الإخبارية الأخيرة حول الرقم الاستدلالي للأثمان عند الإنتاج الصناعي والطاقي والمعدني لشهر غشت 2025، أن هذا الانخفاض نتج بالخصوص عن  انخفاض الرقم الاستدلالي للأثمان عند الإنتاج للصناعات التحويلية بـ 0,1 في المائة     .', 'size': 2}, {'id': '233', 'title': 'مندوبية التخطيط: انخفاض الرقم الاستدلالي للأثمان عند الإنتاج بـ0,1%', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d9%85%d9%86%d8%af%d9%88%d8%a8%d9%8a%d8%a9-%d8%a7%d9%84%d8%aa%d8%ae%d8%b7%d9%8a%d8%b7-%d8%a7%d9%86%d8%ae%d9%81%d8%a7%d8%b6-%d8%a7%d9%84%d8%b1%d9%82%d9%85-%d8%a7%d9%84%d8%a7%d8%b3%d8%aa%d8%af%d9%84-4/', 'summary': 'مندوبية التخطيط: انخفاض الرقم الاستدلالي للأثمان عند الإنتاج بـ0,1%. كشفت المندوبية السامية للتخطيط بأن الرقم الاستدلالي للأثمان عند الإنتاج لقطاع “الصناعات التحويلية باستثناء تكرير البترول” عرف انخفاضا قدره 0,1 في المائة خلال شهر غشت 2025 مقارنة مع شهر يوليوز 2025. وأضافت المندوبية، في مذكرتها الإخبارية الأخيرة حول الرقم الاستدلالي للأثمان عند الإنتاج الصناعي والطاقي والمعدني لشهر غشت 2025، أن هذا الانخفاض نتج …  مندوبية التخطيط: انخفاض الرقم الاستدلالي للأثمان عند الإنتاج بـ0,1%     .', 'size': 2}], 'main_title': 'انخفاض الرقم الاستدلالي للأثمان عند الإنتاج للصناعات التحويلية بـ 0,1 في المائة'}, {'community_id': '9', 'articles': [{'id': '183', 'title': 'الخميس المقبل.. الركراكي يعلن عن قائمة أسود الأطلس لمباراتي البحرين والكونغو', 'source': 'machahid24.com', 'link': 'https://machahid24.com/sport/477089.html', 'summary': 'الخميس المقبل.. الركراكي يعلن عن قائمة أسود الأطلس لمباراتي البحرين والكونغو. بعقد مدرب المنتخب الوطني الأول، وليد الركراكي، يوم الخميس المقبل بسلا ،ندوة صحافية يعلن خلالها عن قائمة أسود الأطلس لمباراتي البحرين و الكونغو.', 'size': 2}, {'id': '315', 'title': 'الركراكي يعقد ندوة صحفية الخميس المقبل', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/sport/lionatlas/413592.html', 'summary': 'الركراكي يعقد ندوة صحفية الخميس المقبل. يعقد مدرب المنتخب الوطني الأول، وليد الركراكي، يوم الخميس المقبل بسلا ،ندوة صحفية يعلن خلالها عن قائمة أسود الأطلس لمباراتي البحرين و الكونغو. وأفاد بلاغ للجامعة', 'size': 2}], 'main_title': 'الخميس المقبل.. الركراكي يعلن عن قائمة أسود الأطلس لمباراتي البحرين والكونغو'}, {'community_id': '6', 'articles': [{'id': '259', 'title': 'للنقاش | من المسؤول عن تدهور الخدمات الاستشفائية ؟', 'source': 'www.alousboue.ma', 'link': 'https://www.alousboue.ma/124518/', 'summary': 'للنقاش | من المسؤول عن تدهور الخدمات الاستشفائية ؟. يعرف قطاع الصحة بالمغرب جدلا واسعا بسبب النقص الحاصل في الاستشفاء وتبعا للاحتجاجات المتكررة من طرف المواطنين على غياب ونقص الخدمات الصحية في مختلف مناطق البلاد، لا فرق بين العالم القروي والمجال الحضري، ذلك أن فئات مجتمعية بعينها لا تتمتع بالحق في الصحة بفعل الكلفة المادية من جهة، ومن جهة أخرى، نتيجة الاختلالات التدبيرية التي …  للنقاش | من المسؤول عن تدهور الخدمات الاستشفائية ؟     .', 'size': 3}, {'id': '322', 'title': 'غرامات بالملايين وحظر 10 سنوات… التعليم العالي الخاص بالمغرب يواجه صرامة قانونية غير مسبوقة', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/education/413599.html', 'summary': 'غرامات بالملايين وحظر 10 سنوات… التعليم العالي الخاص بالمغرب يواجه صرامة قانونية غير مسبوقة. تتجه الحكومة إلى تعزيز مراقبة مؤسسات التعليم العالي والبحث العلمي الخاصة من خلال مشروع القانون رقم 59.24، الذي يحدد إطاراً قانونياً صارماً للقطاع الخاص. وينص المشروع', 'size': 2}, {'id': '364', 'title': 'جيل Z والنموذج المغربي', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1103854.html', 'summary': 'جيل Z والنموذج المغربي. الجيل المغربي الجديد يلاحظ من خلال الاحتجاجات الشبابية بالمغرب التي خرجت يومي 27و28شتنبر 2025 وقادها جيل ماسمي ب Zتترواح أعمارهم بين 15 سنة و25 سنة أنها احتجاجات جديدة في سياق اجتماعي وسياسي واقتصادي دقيق، تتميز أولا بطبيعتها الغير مؤطر من أي جهة وتحمل مطالب ليست بجديدة يمكن اجمالها في مطالب اجتماعية محضة تتعلق بغياب الحكامة ظهرت المقالة جيل Z والنموذج المغربي  .', 'size': 2}], 'main_title': 'للنقاش | من المسؤول عن تدهور الخدمات الاستشفائية ؟'}, {'community_id': '10', 'articles': [{'id': '316', 'title': 'الصندوق المغربي للتقاعد يعلن صرف معاشات المتقاعدين الجدد في قطاع التربية والتعليم', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/economy/413593.html', 'summary': 'الصندوق المغربي للتقاعد يعلن صرف معاشات المتقاعدين الجدد في قطاع التربية والتعليم. أعلن الصندوق المغربي للتقاعد، الإثنين، أن عملية صرف معاشات المتقاعدين الجدد التابعين لقطاع التربية والتعليم برسم سنة 2025 قد تمت بنجاح. وكشف بلاغ للصندوق المغربي، أنه', 'size': 2}, {'id': '435', 'title': 'الصندوق المغربي للتقاعد يعلن صرف معاشات المتقاعدين الجدد التابعين لقطاع التربية والتعليم', 'source': 'www.alalam.ma', 'link': 'https://www.alalam.ma/الصندوق-المغربي-للتقاعد-يعلن-صرف-معاشات-المتقاعدين-الجدد_a29765.html', 'summary': 'الصندوق المغربي للتقاعد يعلن صرف معاشات المتقاعدين الجدد التابعين لقطاع التربية والتعليم. *العلم الإلكترونية* أعلن الصندوق المغربي للتقاعد، يومه الإثنين 29 سبتمبر، أن عملية صرف معاشا...', 'size': 2}], 'main_title': 'الصندوق المغربي للتقاعد يعلن صرف معاشات المتقاعدين الجدد في قطاع التربية والتعليم'}, {'community_id': '7', 'articles': [{'id': '396', 'title': 'إقبال جماهيري كبير على تذاكر مباراة المنتخب الوطني ضد البحرين', 'source': 'rue20.com', 'link': 'https://rue20.com/940642.html', 'summary': 'إقبال جماهيري كبير على تذاكر مباراة المنتخب الوطني ضد البحرين.  | الرباط أعلنت اللجنة المنظمة للمباراة التي ستجمع المنتخب الوطني بمنتخب البحرين، التي ستجرى يوم الخميس 9 أكتوبر 2025 على أرضية ملعب الأمير مولاي عبد الله بمدينة الرباط ابتداءً من الساعة الثامنة مساءً، أنه قد تم بيع ما مجموعه 30 ألف تذكرة إلى حدود الساعة الثانية عشرة ظهرا من يومه الاثنين 29 شتنبر الخبر إقبال جماهيري كبير على تذاكر مباراة المنتخب الوطني ضد البحرين  .', 'size': 2}, {'id': '431', 'title': 'إقبال جماهيري كبير على تذاكر مباراة المنتخب الوطني أمام البحرين', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a5%d9%82%d8%a8%d8%a7%d9%84-%d8%ac%d9%85%d8%a7%d9%87%d9%8a%d8%b1%d9%8a-%d9%83%d8%a8%d9%8a%d8%b1-%d8%b9%d9%84%d9%89-%d8%aa%d8%b0%d8%a7%d9%83%d8%b1-%d9%85%d8%a8%d8%a7%d8%b1%d8%a7%d8%a9-%d8%a7%d9%84/', 'summary': 'إقبال جماهيري كبير على تذاكر مباراة المنتخب الوطني أمام البحرين. أعلنت اللجنة المنظمة للمباراة التي ستجمع المنتخب الوطني بمنتخب البحرين، التي ستجرى الخميس 9 أكتوبر 2025 على أرضية ملعب الأمير مولاي عبد الله بمدينة الرباط ابتداء من الساعة الثامنة مساء، أنه قد تم بيع ما مجموعه 30 ألف تذكرة إلى حدود الساعة الثانية عشرة ظهرا من يومه الاثنين 29 شتنبر 2025. واغتنمت اللجنة المنظمة …  إقبال جماهيري كبير على تذاكر مباراة المنتخب الوطني أمام البحرين     .', 'size': 2}], 'main_title': 'إقبال جماهيري كبير على تذاكر مباراة المنتخب الوطني ضد البحرين'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    