<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 03/09/2025 - 12h25</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '4', 'articles': [{'id': '16', 'title': 'توقعات أحوال الطقس ليوم غد الأربعاء', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/205647', 'summary': 'توقعات أحوال الطقس ليوم غد الأربعاء.  تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليوم غد الأربعاء، أن يظل الطقس حارا نسبيا بكل من السهول المتواجدة غرب الأطلس، والجنوب-الشرقي، وجنوب المنطقة الشرقية، وكذا بأقصى جنوب البلاد. ويرتقب تشكل سحب منخفضة كثيفة بعض الشيء ومصحوبة بكتل من الضباب على السواحل الوسطى وأيضا بالشمال-الغربي للأقاليم الصحراوية للمملكة. عدا ذلك،سيظل الطقس مستقرا مع سماء', 'size': 3}, {'id': '336', 'title': 'طقس اليوم: استمرار الجو الحار بهذه المناطق', 'source': 'soltana.ma', 'link': 'https://soltana.ma/1357754.html', 'summary': 'طقس اليوم: استمرار الجو الحار بهذه المناطق. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الأربعاء، أن يظل الطقس حارا نسبيا بالجنوب الشرقي للبلاد، والمنطقة الشرقية والسهول غرب الأطلس وداخل الأقاليم الجنوبية. ويرتقب، كذلك، تشكل سحب منخفضة كثيفة بالسواحل الوسطى مع كتل ضبابية محلية خلال الصباح والليل. كما سيكون الطقس هادئا مع سماء صافية الى قليلة السحب.وستتراوح درجات الحرارة الدنيا، ما بين 20', 'size': 2}, {'id': '373', 'title': 'توقعات أحوال الطقس اليوم الأربعاء', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%aa%d9%88%d9%82%d8%b9%d8%a7%d8%aa-%d8%a3%d8%ad%d9%88%d8%a7%d9%84-%d8%a7%d9%84%d8%b7%d9%82%d8%b3-%d8%a7%d9%84%d9%8a%d9%88%d9%85-%d8%a7%d9%84%d8%a3%d8%b1%d8%a8%d8%b9%d8%a7%d8%a1-35/', 'summary': 'توقعات أحوال الطقس اليوم الأربعاء. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليومه الأربعاء 03 شتنبر 2025، أن يظل الطقس حارا نسبيا بكل من السهول المتواجدة غرب الأطلس، والجنوب-الشرقي، وجنوب المنطقة الشرقية، وكذا بأقصى جنوب البلاد. ويرتقب تشكل سحب منخفضة كثيفة بعض الشيء ومصحوبة بكتل من الضباب على السواحل الوسطى وأيضا بالشمال-الغربي للأقاليم الصحراوية للمملكة. عدا ذلك، سيظل الطقس …  توقعات أحوال الطقس اليوم الأربعاء     .', 'size': 2}], 'main_title': 'توقعات أحوال الطقس ليوم غد الأربعاء'}, {'community_id': '1', 'articles': [{'id': '19', 'title': 'عبد السلام وادو يتعرض لحادثة سير بجنوب إفريقيا', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/205634', 'summary': 'عبد السلام وادو يتعرض لحادثة سير بجنوب إفريقيا.  أعلن نادي أورلاندو بيراتس الجنوب إفريقي، اليوم الثلاثاء، عن تعرض مدربه المغربي عبد السلام وادو، الدولي السابق للمنتخب الوطني المغربي، لحادث سير خطير أثناء وجوده رفقة فريقه بجنوب إفريقيا. ووفقًا للنادي، فإن الحادث وقع بعد اصطدام حافلة الفريق بسيارة أخرى على الطريق، ما استدعى توقف الطاقم الفني واللاعبين للنزول من الحافلة قصد مساعدة المصابين', 'size': 2}, {'id': '96', 'title': 'نجم الأسود السابق يتعرض لحادثة سير خطيرة بجنوب إفريقيا', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/322314/', 'summary': 'نجم الأسود السابق يتعرض لحادثة سير خطيرة بجنوب إفريقيا. أعلن نادي أورلاندو بيراتس الجنوب إفريقي، عن تعرض مدربه المغربي عبد السلام وادو رفقة خمسة من أعضاء طاقمه التقني لحادثة سير خطيرة، وقعت مؤخرا على مشارف مدينة بورت إليزابيت، وذلك أثناء عودة الفريق من رحلته الكروية عقب مواجهة تشيبا يونايتد برسم الدوري المحلي. وأوضح النادي، في بلاغ رسمي، أن الحادث وقع في ظروف مفاجئة بعدما', 'size': 2}], 'main_title': 'عبد السلام وادو يتعرض لحادثة سير بجنوب إفريقيا'}, {'community_id': '7', 'articles': [{'id': '93', 'title': 'وفد برلماني فرنسي يشيد بدور المغرب كشريك استراتيجي موثوق إقليميا ودوليا', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/322336/', 'summary': 'وفد برلماني فرنسي يشيد بدور المغرب كشريك استراتيجي موثوق إقليميا ودوليا. أجرى نائب رئيس مجلس المستشارين، أحمد اخشيشن، اليوم الثلاثاء بالرباط، مباحثات مع رئيسة لجنة الشؤون الاقتصادية بمجلس الشيوخ الفرنسي، دومينيك إستروسي ساسون، التي تقوم بزيارة عمل للمملكة على رأس وفد برلماني رفيع المستوى يضم عددا من أعضاء اللجنة. وذكر بلاغ لمجلس المستشارين أن هذا اللقاء، الذي يأتي في إطار زيارة العمل التي تروم تعزيز التعاون', 'size': 2}, {'id': '141', 'title': 'مباحثات تجمع نائب رئيس مجلس المستشارين مع رئيسة لجنة الشؤون الاقتصادية بمجلس الشيوخ الفرنسي', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/474356.html', 'summary': 'مباحثات تجمع نائب رئيس مجلس المستشارين مع رئيسة لجنة الشؤون الاقتصادية بمجلس الشيوخ الفرنسي. أجرى نائب رئيس مجلس المستشارين، أحمد اخشيشن، اليوم الثلاثاء بالرباط، مباحثات مع رئيسة لجنة الشؤون الاقتصادية بمجلس الشيوخ الفرنسي، دومينيك إستروسي ساسون، التي تقوم بزيارة عمل للمملكة على رأس وفد برلماني رفيع المستوى يضم عددا من أعضاء اللجنة. وذكر بلاغ لمجلس المستشارين أن هذا اللقاء، الذي يأتي في إطار زيارة العمل التي تروم تعزيز التعاون …', 'size': 2}], 'main_title': 'وفد برلماني فرنسي يشيد بدور المغرب كشريك استراتيجي موثوق إقليميا ودوليا'}, {'community_id': '8', 'articles': [{'id': '97', 'title': 'إشادة فرنسية بالدينامية اللافتة للمغرب في مجال الطاقات المتجددة', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/322321/', 'summary': 'إشادة فرنسية بالدينامية اللافتة للمغرب في مجال الطاقات المتجددة. أشادت رئيسة لجنة الشؤون الاقتصادية بمجلس الشيوخ الفرنسي، دومينيك استروسي ساسون، اليوم الثلاثاء بالرباط، بالدينامية اللافتة التي تطبع قطاع الطاقات المتجددة بالمغرب، مؤكدة أن المملكة تشكل نموذجاً ملهِماً بفضل مبادراتها ومشاريعها المستقبلية. وأكدت في تصريح صحفي عقب اجتماعها مع وزير الصناعة والتجارة، رياض مزور، أن “المغرب يظهر دينامية بارزة في مجال الطاقات المتجددة، وهو موضوع', 'size': 2}, {'id': '148', 'title': 'رئيسة لجنة بمجلس الشيوخ الفرنسي تشيد بالدينامية اللافتة للمغرب في مجال الطاقات المتجددة', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/474340.html', 'summary': 'رئيسة لجنة بمجلس الشيوخ الفرنسي تشيد بالدينامية اللافتة للمغرب في مجال الطاقات المتجددة. أشادت رئيسة لجنة الشؤون الاقتصادية بمجلس الشيوخ الفرنسي، دومينيك استروسي ساسون، اليوم الثلاثاء بالرباط، بالدينامية اللافتة التي تطبع قطاع الطاقات المتجددة بالمغرب، مؤكدة أن المملكة تشكل نموذجا ملهما بفضل مبادراتها ومشاريعها المستقبلية.', 'size': 2}], 'main_title': 'إشادة فرنسية بالدينامية اللافتة للمغرب في مجال الطاقات المتجددة'}, {'community_id': '5', 'articles': [{'id': '106', 'title': 'الإعلان عن اكتشاف تاريخي لعروق ذهب عالية الجودة بكلميم', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1096855.html', 'summary': 'الإعلان عن اكتشاف تاريخي لعروق ذهب عالية الجودة بكلميم. أعلنت شركة OLAH Palace Trading عن اكتشاف شبكة واسعة من عروق الذهب عالية الجودة في إقليم كلميم جنوب المغرب. ووصفت هذه الاكتشافات بأنها من أبرز التطورات في قطاع التعدين المغربي خلال السنوات الأخيرة. وأوضح فريق الخبراء الجيولوجيين العامل في المشروع أن الشبكة المكتشفة تضم 34 عرقا من الكوارتز الحامل للذهب، تمتد باتجاه شمال غربي – ظهرت المقالة الإعلان عن اكتشاف تاريخي لعروق ذهب عالية الجودة بكلميم  .', 'size': 2}, {'id': '129', 'title': 'إكتشاف غير مسبوق لشبكة عروق ذهبية عالية الجودة تحت الأرض بجهة كلميم وادنون', 'source': 'rue20.com', 'link': 'https://rue20.com/933247.html', 'summary': 'إكتشاف غير مسبوق لشبكة عروق ذهبية عالية الجودة تحت الأرض بجهة كلميم وادنون. زنقة20| علي التومي أعلنت شركة OLAH Palace Trading عن اكتشاف 34 عرقًا من الكوارتز الحامل للذهب في إقليم كلميم جنوب المغرب، وذلك ضمن شبكة واسعة تمتد باتجاه الشمال الغربي الجنوب الشرقي. وتشير التحاليل المخبرية إلى أن تراكيز الذهب في هذه العروق تتراوح بين 6 و300 غرام لكل طن، مع استمرار العروق على عمق يزيد عن الخبر إكتشاف غير مسبوق لشبكة عروق ذهبية عالية الجودة تحت الأرض بجهة كلميم وادنون  .', 'size': 2}], 'main_title': 'الإعلان عن اكتشاف تاريخي لعروق ذهب عالية الجودة بكلميم'}, {'community_id': '3', 'articles': [{'id': '168', 'title': 'الدار البيضاء: معلومات الديستي تطيح بمروج كوكايين وحبوب مهلوسة وشيرا', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/226614/', 'summary': 'الدار البيضاء: معلومات الديستي تطيح بمروج كوكايين وحبوب مهلوسة وشيرا. تمكنت عناصر المصلحة الولائية للشرطة القضائية بمدينة الدار البيضاء، مساء اليوم الثلاثاء 2 شتنبر الجاري، من توقيف شخص يشتبه في ارتباطه بشبكة إجرامية تنشط في ترويج الكوكايين والأقراص الطبية المخدرة. وقد تم تنفيذ هذه العملية الأمنية على ضوء معلومات دقيقة في مجال الاستخبار الجنائي، وفرتها مصالح المديرية العامة لمراقبة التراب الوطني في سياق الجهود المبذولة', 'size': 3}, {'id': '316', 'title': 'توقيف شخص يشتبه في ارتباطه بشبكة إجرامية تنشط في ترويج الكوكايين بالبيضاء', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/322354/', 'summary': 'توقيف شخص يشتبه في ارتباطه بشبكة إجرامية تنشط في ترويج الكوكايين بالبيضاء. تمكنت عناصر المصلحة الولائية للشرطة القضائية بمدينة الدار البيضاء، مساء أمس الثلاثاء، من توقيف شخص يشتبه في ارتباطه بشبكة إجرامية تنشط في ترويج الكوكايين والأقراص الطبية المخدرة. وقد تم تنفيذ هذه العملية الأمنية على ضوء معلومات دقيقة في مجال الاستخبار الجنائي، وفرتها مصالح المديرية العامة لمراقبة التراب الوطني في سياق الجهود المبذولة لمكافحة شبكات', 'size': 3}, {'id': '370', 'title': 'توقيف شخص بالبيضاء بشبهة ترويج الكوكايين والأقراص الطبية المخدرة', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%aa%d9%88%d9%82%d9%8a%d9%81-%d8%b4%d8%ae%d8%b5-%d8%a8%d8%a7%d9%84%d8%a8%d9%8a%d8%b6%d8%a7%d8%a1-%d8%a8%d8%b4%d8%a8%d9%87%d8%a9-%d8%aa%d8%b1%d9%88%d9%8a%d8%ac-%d8%a7%d9%84%d9%83%d9%88%d9%83%d8%a7/', 'summary': 'توقيف شخص بالبيضاء بشبهة ترويج الكوكايين والأقراص الطبية المخدرة. تمكنت عناصر المصلحة الولائية للشرطة القضائية بمدينة الدار البيضاء، مساء أمس الثلاثاء 2 شتنبر 2025، من توقيف شخص يشتبه ارتباطه بشبكة إجرامية تنشط في ترويج الكوكايين والأقراص الطبية المخدرة. وكشفت مصادر أمنية، أنه تم تنفيذ هذه العملية الأمنية على ضوء معلومات دقيقة في مجال الاستخبار الجنائي، وفرتها مصالح المديرية العامة لمراقبة التراب الوطني …  توقيف شخص بالبيضاء بشبهة ترويج الكوكايين والأقراص الطبية المخدرة     .', 'size': 3}], 'main_title': 'الدار البيضاء: معلومات الديستي تطيح بمروج كوكايين وحبوب مهلوسة وشيرا'}, {'community_id': '0', 'articles': [{'id': '194', 'title': 'القطار فائق السرعة القنيطرة – مراكش يدخل مرحلة الأشغال بجهة الدار البيضاء', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d9%82%d8%b7%d8%a7%d8%b1-%d9%81%d8%a7%d8%a6%d9%82-%d8%a7%d9%84%d8%b3%d8%b1%d8%b9%d8%a9-%d8%a7%d9%84%d9%82%d9%86%d9%8a%d8%b7%d8%b1%d8%a9-%d9%85%d8%b1%d8%a7%d9%83%d8%b4-%d9%8a/', 'summary': 'القطار فائق السرعة القنيطرة – مراكش يدخل مرحلة الأشغال بجهة الدار البيضاء. باشر المكتب الوطني للسكك الحديدية الأشغال الكبرى للبنية التحتية بجهة الدار البيضاء، في إطار مشروع القطار فائق السرعة القنيطرة – مراكش، بهدف توفير بنية تحتية ملائمة للاحتياجات الحالية والمستقبلية، خاصة على المحور الرابط بين المحمدية والنواصر. وأفاد المكتب الوطني للسكك الحديدية في بلاغ، أن هذه الأشغال تهدف إلى إضافة مسارات جديدة ليرتفع عدد …  القطار فائق السرعة القنيطرة – مراكش يدخل مرحلة الأشغال بجهة الدار البيضاء     .', 'size': 2}, {'id': '210', 'title': 'مشروع القطار فائق السرعة القنيطرة – مراكش يواصل تقدمه بخطى ثابتة نحو الربط بين الشمال والجنوب', 'source': 'www.alousboue.ma', 'link': 'https://www.alousboue.ma/123457/', 'summary': 'مشروع القطار فائق السرعة القنيطرة – مراكش يواصل تقدمه بخطى ثابتة نحو الربط بين الشمال والجنوب. يشكل مشروع القطار فائق السرعة القنيطرة – مراكش أحد أبرز الأوراش الاستراتيجية التي تعكس إرادة المغرب في ترسيخ موقعه كقطب جهوي للتنقل المستدام والحديث. فبعد إطلاقه الرسمي من طرف جلالة الملك محمد السادس يوم 24 أبريل 2025، دخل المشروع مرحلة مفصلية عنوانها الأشغال الكبرى على مستوى البنية التحتية السككية، خاصة بجهة الدار البيضاء، …  مشروع القطار فائق السرعة القنيطرة – مراكش يواصل تقدمه بخطى ثابتة نحو الربط بين الشمال والجنوب     .', 'size': 2}], 'main_title': 'القطار فائق السرعة القنيطرة – مراكش يدخل مرحلة الأشغال بجهة الدار البيضاء'}, {'community_id': '6', 'articles': [{'id': '230', 'title': 'شيرين عبد الوهاب تُنهي خلافها مع محاميها ياسر قنطوش (صورة)', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-654012.html', 'summary': 'شيرين عبد الوهاب تُنهي خلافها مع محاميها ياسر قنطوش (صورة). هبة بريس - ع.صياد قدمت الفنانة شيرين عبد الوهاب اعتذارها لمستشارها القانوني ياسر قنطوش بعد أيام من الخلاف الذي دار بينهما وكاد يصل إلى ساحات القضاء، مؤكدة أن الأمر لا يتعدى كونه سوء تفاهم بسيط يمكن أن يحدث بين الأشقاء. ونشرت شيرين عبر حسابها الرسمي على إنستغرام بياناً قالت فيه: "أنا عاوزة أوضح لجمهوري الحبيب إن اللي حصل بيني وبين المستشار ياسر قنطوش مجرد سوء تفاهم عابر بيحصل عادي بين الأخوات.. الأستاذ ياسر أخ وصديق ومن أكتر الناس اللي خايفة على مصلحتي، وحريص على استعادة حقوقي بأمانة وضمير". وأضافت في منشورها أنها لن تلغي التوكيلات القانونية الممنوحة له، مشددة على أن اختلاف وجهات النظر قد يؤدي أحياناً إلى خلافات بسيطة، لكنها أكدت أن هذه الخلافات تم تجاوزها وأن الأستاذ ياسر سيظل محاميها الوحيد. وكانت شيرين قد أعلنت سابقاً إنهاء تعاونها مع قنطوش، قبل أن تتراجع وتؤكد استمرار العلاقة المهنية والثقة المتبادلة بينهما.', 'size': 2}, {'id': '337', 'title': 'شيرين عبد الوهاب تضع حدا لخلافها مع محاميها', 'source': 'soltana.ma', 'link': 'https://soltana.ma/1357745.html', 'summary': 'شيرين عبد الوهاب تضع حدا لخلافها مع محاميها. أثارت الفنانة المصرية شيرين عبد الوهاب الجدل مجددا، خلال الساعات الماضية، بعد تداول أنباء عن خلاف وقع بينها وبين محاميها المستشار ياسر قنطوش. وفي بيان رسمي عبر حسابها على موقع “إنستغرام”، أكدت شيرين على أن ما حدث بينها وبين قنطوش لا يعدو كونه “سوء تفاهم عابر”، قد يحدث بشكل طبيعي بين الأصدقاء والأشقاء، مشددة على', 'size': 3}, {'id': '348', 'title': 'شيرين تنهي الخلاف مع محاميها وتصرح: “الأستاذ ياسر كان وهيفضل المحامي بتاعي..”', 'source': 'machahid24.com', 'link': 'https://machahid24.com/panorama/474405.html', 'summary': 'شيرين تنهي الخلاف مع محاميها وتصرح: “الأستاذ ياسر كان وهيفضل المحامي بتاعي..”. خرجت الفنانة المصرية شيرين عبد الوهاب عن صمتها لتوضيح ما تم تداوله، مؤخرا، بشأن خلافها مع محاميها المستشار ياسر قنطوش، وذلك عبر بيان نشرته على حسابها الرسمي بموقع تبادل الصور والفيديوهات “إنستغرام”. وأكدت شيرين في بيانها أن ما حدث بينهما لا يتعدى كونه “سوء تفاهم عابر” يمكن أن يحدث بين الإخوة، مشددة على أن ياسر …', 'size': 2}], 'main_title': 'شيرين عبد الوهاب تضع حدا لخلافها مع محاميها'}, {'community_id': '2', 'articles': [{'id': '299', 'title': 'حمزة إيغامان: أجواء المنتخب رائعة وأشكر الجماهير على دعمها', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%ad%d9%85%d8%b2%d8%a9-%d8%a5%d9%8a%d8%ba%d8%a7%d9%85%d8%a7%d9%86-%d8%a3%d8%ac%d9%88%d8%a7%d8%a1-%d8%a7%d9%84%d9%85%d9%86%d8%aa%d8%ae%d8%a8-%d8%b1%d8%a7%d8%a6%d8%b9%d8%a9-%d9%88%d8%a3%d8%b4%d9%83/', 'summary': 'حمزة إيغامان: أجواء المنتخب رائعة وأشكر الجماهير على دعمها. عبّر الدولي المغربي حمزة إيغامان عن ارتياحه الكبير بعد انتقاله إلى نادي ليل الفرنسي، مؤكدا أن الدوري الفرنسي يشكل بيئة مثالية لتطوير قدرات اللاعبين الشباب من الناحية البدنية والفنية. وقال إيغامان في تصريح للموقع الرسمي للجامعة الملكية المغربية لكرة القدم: “الحمد لله، انتقالي إلى ليل تم بشكل جيد. الدوري الفرنسي يساعد اللاعبين الشباب على', 'size': 2}, {'id': '342', 'title': 'إيغمان: أجواء المنتخب رائعة وعازمون على التأهل.. العيناوي: فخور بلقاء الجماهير المغربية', 'source': 'rue20.com', 'link': 'https://rue20.com/933221.html', 'summary': 'إيغمان: أجواء المنتخب رائعة وعازمون على التأهل.. العيناوي: فخور بلقاء الجماهير المغربية.  ا متابعة أكد الدولي المغربي حمزة إيغامان أن أجواء المنتخب الوطني تسودها روح عالية وانسجام كبير بين اللاعبين، معبرا عن امتنانه لكل من سانده بعد انتقاله الرسمي إلى صفوف نادي ليل الفرنسي. وقال إيغامان في تصريح للموقع الرسمي للجامعة الملكية المغربية لكرة القدم: “الحمد لله، انتقالي إلى ليل اكتمل بخير والدوري الفرنسي يمنح الخبر إيغمان: أجواء المنتخب رائعة وعازمون على التأهل.. العيناوي: فخور بلقاء الجماهير المغربية  .', 'size': 2}], 'main_title': 'حمزة إيغامان: أجواء المنتخب رائعة وأشكر الجماهير على دعمها'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    