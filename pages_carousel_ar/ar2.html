<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 24/09/2025 - 12h25</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '5', 'articles': [{'id': '32', 'title': 'الجواهري: البنك الرقمي البريطاني “ريڤولت” مهتم بدخول السوق المغربية', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-660006.html', 'summary': 'الجواهري: البنك الرقمي البريطاني “ريڤولت” مهتم بدخول السوق المغربية. هبة بريس – الرباط أكد والي بنك المغرب، عبد اللطيف الجواهري، اليوم الثلاثاء بالرباط، أن البنك الرقمي البريطاني “ريڤولت” أبدى اهتمامه بالسوق المغربية. وأشار الجواهري، خلال ندوة صحفية عقب انعقاد الاجتماع الفصلي الثالث لمجلس بنك المغرب برسم سنة 2025، إلى أن مؤسسة “ريڤولت”، التي تنشط في عدة بلدان عبر العالم، كانت قد عقدت اجتماعا في', 'size': 2}, {'id': '181', 'title': 'والي بنك المغرب يعلن قرب الترخيص لبنك “ريفوليت” الرقمي بالسوق المغربي', 'source': 'rue20.com', 'link': 'https://rue20.com/939182.html', 'summary': 'والي بنك المغرب يعلن قرب الترخيص لبنك “ريفوليت” الرقمي بالسوق المغربي. . الرباط أكد والي بنك المغرب، عبد اللطيف الجواهري، اليوم الثلاثاء بالرباط، أن البنك الرقمي البريطاني “ريڤولت” أبدى اهتمامه بالسوق المغربية. وأشار السيد الجواهري، خلال ندوة صحفية عقب انعقاد الاجتماع الفصلي الثالث لمجلس بنك المغرب برسم سنة 2025، إلى أن مؤسسة “ريڤولت”، التي تنشط في عدة بلدان عبر العالم، كانت قد عقدت اجتماعا في الخبر والي بنك المغرب يعلن قرب الترخيص لبنك “ريفوليت” الرقمي بالسوق المغربي  .', 'size': 2}, {'id': '409', 'title': 'الجواهري: البنك الرقمي يبدي اهتمامه بالسوق المغربية', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%a7%d9%84%d8%ac%d9%88%d8%a7%d9%87%d8%b1%d9%8a-%d8%a7%d9%84%d8%a8%d9%86%d9%83-%d8%a7%d9%84%d8%b1%d9%82%d9%85%d9%8a-%d9%8a%d8%a8%d8%af%d9%8a-%d8%a7%d9%87%d8%aa%d9%85%d8%a7%d9%85%d9%87-%d8%a8%d8%a7/', 'summary': 'الجواهري: البنك الرقمي يبدي اهتمامه بالسوق المغربية. المساء اليوم – الرباط: قال والي بنك المغرب، عبد اللطيف الجواهري، إن البنك الرقمي البريطاني “ريڤولت” أبدى اهتمامه بالسوق المغربية. وأشار الجواهري، خلال ندوة صحفية، أمس الثلاثاء بالرباط، عقب انعقاد الاجتماع الفصلي الثالث لمجلس بنك', 'size': 3}], 'main_title': 'الجواهري: البنك الرقمي يبدي اهتمامه بالسوق المغربية'}, {'community_id': '1', 'articles': [{'id': '35', 'title': 'جو ويلسون: “البوليساريو” منظمة إرهابية تزعزع السلم والأمن العالميين', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-659996.html', 'summary': 'جو ويلسون: “البوليساريو” منظمة إرهابية تزعزع السلم والأمن العالميين. هبة بريس أكد عضو الكونغرس الأمريكي، جو ويلسون، اليوم الثلاثاء، أن جماعة “البوليساريو” الانفصالية “منظمة إرهابية” تزعزع السلم والأمن العالميين، مذكرا بأنه سبق له أن تقدم بمشروع قانون من الحزبين على مستوى الكونغرس الأمريكي يروم تصنيف هذه الجماعة المسلحة منظمة إرهابية أجنبية. وفي تصريح للصحافة بنيويورك، قال ويلسون إن “البوليساريو هي، بالفعل، منظمة إرهابية وقمت', 'size': 4}, {'id': '117', 'title': 'عضو الكونغرس الأمريكي جو ويلسون: البوليساريو “منظمة إرهابية” تزعزع السلم والأمن العالميين', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%b9%d8%b6%d9%88-%d8%a7%d9%84%d9%83%d9%88%d9%86%d8%ba%d8%b1%d8%b3-%d8%a7%d9%84%d8%a3%d9%85%d8%b1%d9%8a%d9%83%d9%8a-%d8%ac%d9%88-%d9%88%d9%8a%d9%84%d8%b3%d9%88%d9%86-%d8%a7%d9%84%d8%a8%d9%88%d9%84/', 'summary': 'عضو الكونغرس الأمريكي جو ويلسون: البوليساريو “منظمة إرهابية” تزعزع السلم والأمن العالميين. أكد عضو الكونغرس الأمريكي، جو ويلسون، اليوم الثلاثاء (23 شتنبر)، أن جماعة “البوليساريو” الانفصالية “منظمة إرهابية” تزعزع السلم والأمن العالميين، مذكرا بأنه سبق له أن تقدم بمشروع قانون من الحزبين على مستوى الكونغرس الأمريكي يروم تصنيف هذه الجماعة المسلحة منظمة إرهابية أجنبية. وفي تصريح للصحافة بنيويورك، قال ويلسون إن “البوليساريو هي، بالفعل، منظمة إرهابية وقمت', 'size': 4}, {'id': '184', 'title': 'عضو كونغرس أمريكي يجدد التأكيد على قرب تصنيف البوليساريو منظمة إرهابية', 'source': 'rue20.com', 'link': 'https://rue20.com/939185.html', 'summary': 'عضو كونغرس أمريكي يجدد التأكيد على قرب تصنيف البوليساريو منظمة إرهابية. . الرباط أكد عضو الكونغرس الأمريكي، جو ويلسون، اليوم الثلاثاء، أن جماعة “البوليساريو” الانفصالية “منظمة إرهابية” تزعزع السلم والأمن العالميين، مذكرا بأنه سبق له أن تقدم بمشروع قانون من الحزبين على مستوى الكونغرس الأمريكي يروم تصنيف هذه الجماعة المسلحة منظمة إرهابية أجنبية. وفي تصريح للصحافة بنيويورك، قال السيد ويلسون إن “البوليساريو هي، بالفعل، الخبر عضو كونغرس أمريكي يجدد التأكيد على قرب تصنيف البوليساريو منظمة إرهابية  .', 'size': 4}, {'id': '190', 'title': 'عضو بالكونغرس الأمريكي: “البوليساريو”، “منظمة إرهابية” تزعزع السلم والأمن العالميين', 'source': 'machahid24.com', 'link': 'https://machahid24.com/international/476542.html', 'summary': 'عضو بالكونغرس الأمريكي: “البوليساريو”، “منظمة إرهابية” تزعزع السلم والأمن العالميين. أكد عضو الكونغرس الأمريكي، جو ويلسون، اليوم الثلاثاء، أن جماعة “البوليساريو” الانفصالية “منظمة إرهابية” تزعزع السلم والأمن العالميين، مذكرا بأنه سبق له أن تقدم بمشروع قانون من الحزبين على مستوى الكونغرس الأمريكي يروم تصنيف هذه الجماعة المسلحة منظمة إرهابية أجنبية.', 'size': 4}], 'main_title': 'جو ويلسون: “البوليساريو” منظمة إرهابية تزعزع السلم والأمن العالميين'}, {'community_id': '2', 'articles': [{'id': '48', 'title': 'نيويورك.. بوريطة وألباريس يبحثان سبل تعزيز التعاون بين المغرب وإسبانيا', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-659957.html', 'summary': 'نيويورك.. بوريطة وألباريس يبحثان سبل تعزيز التعاون بين المغرب وإسبانيا. هبة بريس أجرى وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج، ناصر بوريطة، اليوم الثلاثاء بنيويورك، مباحثات مع وزير الخارجية والاتحاد الأوروبي والتعاون الإسباني، خوسي مانويل ألباريس. وقال ألباريس، في تصريح للصحافة، إن هذا اللقاء، المنعقد على هامش الدورة الثمانين للجمعية العامة للأمم المتحدة، شكل مناسبة لإبراز “الصداقة التي تربط بين إسبانيا والمغرب” وبحث السبل', 'size': 3}, {'id': '147', 'title': 'تفاصيل اجتماع بوريطة وألباريس في نيويورك', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-590638.html', 'summary': 'تفاصيل اجتماع بوريطة وألباريس في نيويورك. أجرى وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج، ناصر بوريطة، اليوم الثلاثاء بنيويورك، مباحثات مع وزير الخارجية والاتحاد الأوروبي والتعاون الإسباني، خوسي مانويل ألباريس. وقال ألباريس، في تصريح للصحافة، إن هذا اللقاء، المنعقد على هامش الدورة الثمانين للجمعية العامة للأمم المتحدة، شكل مناسبة لإبراز “الصداقة التي تربط بين إسبانيا والمغرب” وبحث', 'size': 3}, {'id': '182', 'title': 'وزير خارجية إسبانيا يصدم الكبرانات من نيويورك : مصلحة المغرب من مصلحة إسبانيا والعكس صحيح', 'source': 'rue20.com', 'link': 'https://rue20.com/939189.html', 'summary': 'وزير خارجية إسبانيا يصدم الكبرانات من نيويورك : مصلحة المغرب من مصلحة إسبانيا والعكس صحيح. . الرباط أجرى وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج، ناصر بوريطة، اليوم الثلاثاء بنيويورك، مباحثات مع وزير الخارجية والاتحاد الأوروبي والتعاون الإسباني، خوسي مانويل ألباريس. وقال السيد ألباريس، في تصريح للصحافة، إن هذا اللقاء، المنعقد على هامش الدورة الثمانين للجمعية العامة للأمم المتحدة، شكل مناسبة لإبراز “الصداقة التي تربط بين إسبانيا والمغرب” الخبر وزير خارجية إسبانيا يصدم الكبرانات من نيويورك : مصلحة المغرب من مصلحة إسبانيا والعكس صحيح  .', 'size': 3}], 'main_title': 'نيويورك.. بوريطة وألباريس يبحثان سبل تعزيز التعاون بين المغرب وإسبانيا'}, {'community_id': '3', 'articles': [{'id': '72', 'title': 'ابنة الفنانة نجاة اعتابو ترد على اتهامات البحث عن البوز وتنشر صورة عقد الزواج(صورة)', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/culture/413226.html', 'summary': 'ابنة الفنانة نجاة اعتابو ترد على اتهامات البحث عن البوز وتنشر صورة عقد الزواج(صورة). خرجت سامية ديكوك، ابنة الفنانة المغربية نجاة اعتابو، عن صمتها للرد على اتهامات البحث عن البوز بعد الجدل الذي أثير حول زواجها مؤخراً. جاء توضيحها عبر', 'size': 2}, {'id': '339', 'title': 'نجاة اعتابو تلجأ للقضاء لحماية سمعتها وخصوصية ابنتها', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/324189/', 'summary': 'نجاة اعتابو تلجأ للقضاء لحماية سمعتها وخصوصية ابنتها. تعتزم الفنانة الشعبية نجاة اعتابو، اتخاذ إجراءات قانونية ضد كل من تورط في نشر أخبار زائفة أو التشهير باسمها أو باسم ابنتها سامية ديكوك، وذلك على خلفية الضجة الأخيرة التي رافقت زواج نجلتها. وأوكلت نجاة اعتابو محاميا امتابعة كل من تورط في الإساءة إليها أو إلى ابنتها، سواء من خلال شر أو تداول أخبار زائفة', 'size': 2}], 'main_title': 'ابنة الفنانة نجاة اعتابو ترد على اتهامات البحث عن البوز وتنشر صورة عقد الزواج(صورة)'}, {'community_id': '8', 'articles': [{'id': '74', 'title': 'مقاييس الأمطار المسجلة في 24 ساعة الماضية', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/413228.html', 'summary': 'مقاييس الأمطار المسجلة في 24 ساعة الماضية. في ما يلي مقاييس التساقطات المطرية المسجلة بالمملكة خلال الـ 24 ساعة الماضية، حسب المديرية العامة للأرصاد الجوية : - فكيك : 12 ملم - بوعرفة :', 'size': 2}, {'id': '341', 'title': 'مقاييس الأمطار المسجلة بالمملكة خلال الـ 24 ساعة الماضية', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-590707.html', 'summary': 'مقاييس الأمطار المسجلة بالمملكة خلال الـ 24 ساعة الماضية. في ما يلي مقاييس التساقطات المطرية المسجلة بالمملكة خلال الـ 24 ساعة الماضية، حسب المديرية العامة للأرصاد الجوية: – بوعرفة وميدلت : 05 ملم.', 'size': 2}], 'main_title': 'مقاييس الأمطار المسجلة في 24 ساعة الماضية'}, {'community_id': '6', 'articles': [{'id': '137', 'title': 'المغرب ورهان الانتقال من الاستيراد إلى الاكتفاء الذاتي في الصناعة الدفاعية', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/324213/', 'summary': 'المغرب ورهان الانتقال من الاستيراد إلى الاكتفاء الذاتي في الصناعة الدفاعية. تنفيذا للتعليمات الملكية السامية لصاحب الجلالة الملك محمد السادس، القائد الأعلى ورئيس أركان الحرب العامة للقوات المسلحة الملكية، أعلنت إدارة الدفاع الوطني ووزارة الدفاع الهندية، وكذا شركة “تاتا أدفنسد سيستمز ليميتد” TATA Advanced Sytem Limited عن تدشين مصنع “تاتا أدفنسد سيستمز المغرب” (TASM)، اليوم الثلاثاء ببرشيد. وأوضح بلاغ لإدارة الدفاع الوطني أن هذا المصنع، الذي', 'size': 3}, {'id': '225', 'title': 'تدشين مصنع لصناعة المركبات المدرعة القتالية WhAP 8×8 ببرشيد', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/227427/', 'summary': 'تدشين مصنع لصناعة المركبات المدرعة القتالية WhAP 8×8 ببرشيد. تنفيذا للتعليمات الملكية السامية لصاحب الجلالة الملك محمد السادس، القائد الأعلى ورئيس أركان الحرب العامة للقوات المسلحة الملكية، أعلنت إدارة الدفاع الوطني ووزارة الدفاع الهندية، وكذا شركة “تاتا أدفنسد سيستمز ليميتد” TATA Advanced Sytem Limited عن تدشين مصنع “تاتا أدفنسد سيستمز المغرب” (TASM)، اليوم الثلاثاء ببرشيد. وأوضح بلاغ لإدارة الدفاع الوطني أن هذا المصنع، الذي', 'size': 3}, {'id': '231', 'title': 'تعاون هندي مغربي: برشيد تحتضن أول مصنع للمدرعات القتالية', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%aa%d8%b9%d8%a7%d9%88%d9%86-%d9%87%d9%86%d8%af%d9%8a-%d9%85%d8%ba%d8%b1%d8%a8%d9%8a-%d8%a8%d8%b1%d8%b4%d9%8a%d8%af-%d8%aa%d8%ad%d8%aa%d8%b6%d9%86-%d8%a3%d9%88%d9%84-%d9%85%d8%b5%d9%86%d8%b9-%d9%84/', 'summary': 'تعاون هندي مغربي: برشيد تحتضن أول مصنع للمدرعات القتالية. المساء اليوم: أعلنت إدارة الدفاع الوطني ووزارة الدفاع الهندية، وكذا شركة “تاتا أدفنسد سيستمز ليميتد” TATA Advanced Sytem Limited عن تدشين مصنع “تاتا أدفنسد سيستمز المغرب” (TASM)، اليوم الثلاثاء ببرشيد. وأوضح بيان لإدارة الدفاع الوطني', 'size': 3}], 'main_title': 'المغرب ورهان الانتقال من الاستيراد إلى الاكتفاء الذاتي في الصناعة الدفاعية'}, {'community_id': '7', 'articles': [{'id': '139', 'title': 'حموشي يمنح ترقية استثنائية لشرطي توفي أثناء أداء واجبه بالقنيطرة', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/324196/', 'summary': 'حموشي يمنح ترقية استثنائية لشرطي توفي أثناء أداء واجبه بالقنيطرة. قرر المدير العام للأمن الوطني ولمراقبة التراب الوطني عبد اللطيف حموشي منح ترقية استثنائية لموظف شرطة برتبة حارس أمن، كان يعمل بالفرقة المتنقلة لشرطة النجدة بولاية أمن القنيطرة، وتوفي متأثرا بجروح أصيب بها على إثر حادثة سير وقعت خلال مزاولته لمهامه النظامية المتمثلة في حماية أمن المواطنين وضمان سلامة ممتلكاتهم. وقد كلف المدير العام للأمن', 'size': 2}, {'id': '224', 'title': 'السيد حموشي يأمر بترقية استثنائية لشرطي توفي أثناء أداء واجبه', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/227430/', 'summary': 'السيد حموشي يأمر بترقية استثنائية لشرطي توفي أثناء أداء واجبه. قرر المدير العام للأمن الوطني ولمراقبة التراب الوطني عبد اللطيف حموشي منح ترقية استثنائية لموظف شرطة برتبة حارس أمن، كان يعمل بالفرقة المتنقلة لشرطة النجدة بولاية أمن القنيطرة، وتوفي متأثرا بجروح أصيب بها على إثر حادثة سير وقعت خلال مزاولته لمهامه النظامية المتمثلة في حماية أمن المواطنين وضمان سلامة ممتلكاتهم. وقد كلف المدير العام للأمن', 'size': 2}], 'main_title': 'حموشي يمنح ترقية استثنائية لشرطي توفي أثناء أداء واجبه بالقنيطرة'}, {'community_id': '10', 'articles': [{'id': '161', 'title': 'نقابة المخارق تطالب صندوق النقد الدولي بإنهاء “الإملاءات الفوقية” واعتماد مقاربة اجتماعية', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1102392.html', 'summary': 'نقابة المخارق تطالب صندوق النقد الدولي بإنهاء “الإملاءات الفوقية” واعتماد مقاربة اجتماعية. طالب الاتحاد المغربي للشغل وفدا هاما عن صندوق النقد الدولي بضرورة سن مقاربة اجتماعية تقطع مع ما وصفها بـ”الإملاءات الفوقية” التي لا تراعي الواقع الاقتصادي والاجتماعي بالمغرب، والتي غالبا ما تخلف عواقب وخيمة على أوضاع الطبقة العاملة والفئات الشعبية. واستقبل الأمين العام للاتحاد الميلودي المخارق وأعضاء الأمانة الوطنية، يوم الثلاثاء 23 شتنبر 2025 بمقر الاتحاد ظهرت المقالة نقابة المخارق تطالب صندوق النقد الدولي بإنهاء “الإملاءات الفوقية” واعتماد مقاربة اجتماعية  .', 'size': 2}, {'id': '173', 'title': 'موخاريق يرفض "إملاءات" صندوق النقد الدولي ويدعو إلى مقاربة اجتماعية "تراعي الواقع المغربي"', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d9%85%d9%88%d8%ae%d8%a7%d8%b1%d9%8a%d9%82-%d9%8a%d8%b1%d9%81%d8%b6-%d8%a5%d9%85%d9%84%d8%a7%d8%a1%d8%a7%d8%aa-%d8%b5%d9%86%d8%af%d9%88%d9%82-%d8%a7%d9%84%d9%86%d9%82%d8%af-%d8%a7%d9%84%d8%af/', 'summary': 'موخاريق يرفض "إملاءات" صندوق النقد الدولي ويدعو إلى مقاربة اجتماعية "تراعي الواقع المغربي". أكد الاتحاد المغربي للشغل، خلال لقائه بوفد رفيع المستوى من صندوق النقد الدولي (FMI)، رفضه القاطع لما اعتبره إملاءات فوقية وتوصيات بعيدة عن الواقع الاقتصادي والاجتماعي بالمغرب، محذرا من تداعياتها السلبية على الطبقة العاملة والفئات الشعبية. وشدد الأمين العام للاتحاد، الميلودي المخارق، على أن توصيات الصندوق غالبا ما تركز على تجميد الأجور، تقليص النفقات  موخاريق يرفض "إملاءات" صندوق النقد الدولي ويدعو إلى مقاربة اجتماعية "تراعي الواقع المغربي"     .', 'size': 2}], 'main_title': 'نقابة المخارق تطالب صندوق النقد الدولي بإنهاء “الإملاءات الفوقية” واعتماد مقاربة اجتماعية'}, {'community_id': '4', 'articles': [{'id': '194', 'title': 'وزير هندي: مصنع المركبات المدرعة ببرشيد يفتح فصلا جديدا في الشراكة الاستراتيجية بين الهند والمغرب', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/476533.html', 'summary': 'وزير هندي: مصنع المركبات المدرعة ببرشيد يفتح فصلا جديدا في الشراكة الاستراتيجية بين الهند والمغرب. و.م.ع أكد وزير الدفاع بجمهورية الهند راجناث سينغ، أن مصنع “تاتا أدفنسد سيستمز المغرب” (TASM)، الذي تم تدشينه، اليوم الثلاثاء ببرشيد، يفتح فصلا جديدا في الشراكة الاستراتيجية بين الهند والمغرب. وأعرب سينغ، خلال حفل التدشين الذي حضره، على الخصوص، الوزير المنتدب لدى رئيس الحكومة المكلف بإدارة الدفاع الوطني عبد اللطيف لوديي، ووزير الصناعة والتجارة رياض …', 'size': 2}, {'id': '406', 'title': 'وزير الدفاع الهندي يشيد بالشراكة بين الهند والمغرب في المجال العسكري', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d9%88%d8%b2%d9%8a%d8%b1-%d8%a7%d9%84%d8%af%d9%81%d8%a7%d8%b9-%d8%a7%d9%84%d9%87%d9%86%d8%af%d9%8a-%d9%8a%d8%b4%d9%8a%d8%af-%d8%a8%d8%a7%d9%84%d8%b4%d8%b1%d8%a7%d9%83%d8%a9-%d8%a8%d9%8a%d9%86-%d8%a7/', 'summary': 'وزير الدفاع الهندي يشيد بالشراكة بين الهند والمغرب في المجال العسكري. المساء اليوم- الرباط: قال وزير الدفاع الهندي، راجناث سينغ، إن مصنع “تاتا أدفنسد سيستمز المغرب” (TASM)، الذي تم تدشينه، أمس الثلاثاء ببرشيد، يفتح فصلا جديدا في الشراكة الاستراتيجية بين الهند والمغرب. وأضاف سينغ، خلال حفل', 'size': 2}], 'main_title': 'وزير هندي: مصنع المركبات المدرعة ببرشيد يفتح فصلا جديدا في الشراكة الاستراتيجية بين الهند والمغرب'}, {'community_id': '0', 'articles': [{'id': '285', 'title': 'أخنوش يدعو من الأمم المتحدة لجعل الذكاء الاصطناعي رافعة للتقدم المشترك', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-660165.html', 'summary': 'أخنوش يدعو من الأمم المتحدة لجعل الذكاء الاصطناعي رافعة للتقدم المشترك. هبة بريس أكد رئيس الحكومة، عزيز أخنوش، الثلاثاء، أن الذكاء الاصطناعي فرض نفسه في غضون بضع سنوات، كثورة تكنولوجية تعيد صياغة اقتصاداتنا وأنماط حياتنا، معبرا عن إدراك بلادنا للفرص الهائلة التي يوفرها، ووعيها التام بحجم التحديات التي يطرحها. واعتبر في كلمة المملكة أمام الدورة الثمانين للجمعية العامة للأمم المتحدة المنعقدة حاليا بنيويورك، أن الذكاء الاصطناعي', 'size': 2}, {'id': '364', 'title': 'بالأمم المتحدة.. المغرب يدعو  لطي النزاع المفتعل حول الصحراء المغربية', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a8%d8%a7%d9%84%d8%a3%d9%85%d9%85-%d8%a7%d9%84%d9%85%d8%aa%d8%ad%d8%af%d8%a9-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d9%8a%d8%af%d8%b9%d9%88-%d9%84%d8%b7%d9%8a-%d8%a7%d9%84%d9%86%d8%b2%d8%a7%d8%b9/', 'summary': 'بالأمم المتحدة.. المغرب يدعو لطي النزاع المفتعل حول الصحراء المغربية. أكد رئيس الحكومة، عزيز أخنوش، الثلاثاء بنيويورك، أن مخطط الحكم الذاتي في إطار السيادة المغربية يعد الحل الوحيد الواقعي والدائم للنزاع الإقليمي حول الصحراء المغربية. وفي مداخلة باسم المغرب، خلال الدورة الـ80 للجمعية العامة للأمم المتحدة، أبرز أخنوش الدعم الدولي المتزايد لفائدة مخطط الحكم الذاتي وسيادة المغرب على صحرائه، بفضل الدينامية التي أطلقها الملك  بالأمم المتحدة.. المغرب يدعو لطي النزاع المفتعل حول الصحراء المغربية     .', 'size': 4}, {'id': '404', 'title': 'الأمم المتحدة.. مخطط الحكم الذاتي في إطار السيادة المغربية، الحل الوحيد الواقعي والدائم لقضية الصحراء', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/227453/', 'summary': 'الأمم المتحدة.. مخطط الحكم الذاتي في إطار السيادة المغربية، الحل الوحيد الواقعي والدائم لقضية الصحراء. أكد رئيس الحكومة، عزيز أخنوش، الثلاثاء بنيويورك، أن مخطط الحكم الذاتي في إطار السيادة المغربية يعد الحل الوحيد الواقعي والدائم للنزاع الإقليمي حول الصحراء المغربية. وفي مداخلة باسم المغرب، خلال الدورة الـ80 للجمعية العامة للأمم المتحدة، أبرز السيد أخنوش الدعم الدولي المتزايد لفائدة مخطط الحكم الذاتي وسيادة المغرب على صحرائه، بفضل الدينامية التي أطلقها صاحب', 'size': 5}, {'id': '408', 'title': 'أخنوش من الأمم المتحدة: حان الوقت لطي النزاع المفتعل  في الصحراء', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%a3%d8%ae%d9%86%d9%88%d8%b4-%d9%85%d9%86-%d8%a7%d9%84%d8%a3%d9%85%d9%85-%d8%a7%d9%84%d9%85%d8%aa%d8%ad%d8%af%d8%a9-%d8%ad%d8%a7%d9%86-%d8%a7%d9%84%d9%88%d9%82%d8%aa-%d9%84%d8%b7%d9%8a-%d8%a7%d9%84/', 'summary': 'أخنوش من الأمم المتحدة: حان الوقت لطي النزاع المفتعل في الصحراء. المساء اليوم: قال رئيس الحكومة، عزيز أخنوش، الثلاثاء بنيويورك، إن مخطط الحكم الذاتي في إطار السيادة المغربية يعد الحل الوحيد الواقعي والدائم للنزاع الإقليمي حول الصحراء. وفي مداخلة باسم المغرب، خلال الدورة الـ80 للجمعية العامة', 'size': 4}, {'id': '410', 'title': 'الأمم المتحدة.. المغرب يجدد التأكيد على أن الحكم الذاتي هو الحل الوحيد والواقعي والدائم لقضية الصحراء', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d8%a3%d9%85%d9%85-%d8%a7%d9%84%d9%85%d8%aa%d8%ad%d8%af%d8%a9-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d9%8a%d8%ac%d8%af%d8%af-%d8%a7%d9%84%d8%aa%d8%a3%d9%83%d9%8a%d8%af-%d8%b9%d9%84%d9%89/', 'summary': 'الأمم المتحدة.. المغرب يجدد التأكيد على أن الحكم الذاتي هو الحل الوحيد والواقعي والدائم لقضية الصحراء. قال رئيس الحكومة، عزيز أخنوش، يوم الثلاثاء 23 شتنبر 2025 بنيويورك، إن مخطط الحكم الذاتي في إطار السيادة المغربية يعد الحل الوحيد الواقعي والدائم للنزاع الإقليمي المفتعل حول الصحراء المغربية. وفي هذا الصدد، أشار أخنوش في مداخلة باسم المغرب، خلال الدورة الـ80 للجمعية العامة للأمم المتحدة، إلى الدعم الدولي المتزايد لفائدة مخطط الحكم …  الأمم المتحدة.. المغرب يجدد التأكيد على أن الحكم الذاتي هو الحل الوحيد والواقعي والدائم لقضية الصحراء     .', 'size': 4}], 'main_title': 'الأمم المتحدة.. مخطط الحكم الذاتي في إطار السيادة المغربية، الحل الوحيد الواقعي والدائم لقضية الصحراء'}, {'community_id': '9', 'articles': [{'id': '297', 'title': 'أخنوش من نيويورك: حل الدولتين هو السبيل الأوحد لإرساء سلام دائم وشامل في الشرق الأوسط', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-660116.html', 'summary': 'أخنوش من نيويورك: حل الدولتين هو السبيل الأوحد لإرساء سلام دائم وشامل في الشرق الأوسط. هبة بريس شدد رئيس الحكومة عزيز أخنوش، على أن المغرب واستنادا إلى التوجه الذي سنه جلالة الملك، يظل مؤمنا بأن “حل الدولتين هو السبيل الأوحد لإرساء سلام دائم وشامل في الشرق الأوسط. وهو الحل الذي لا يقبل التأجيل أو التهميش، بل ينبغي أن يصبح التزاما أخلاقيا ومطلبا سياسيا فوريا”. وأوضح رئيس الحكومة في كلمة باسم', 'size': 2}, {'id': '347', 'title': 'أخنوش من نيويورك: حل الدولتين خيار لا يقبل التأجيل أو التهميش', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-590683.html', 'summary': 'أخنوش من نيويورك: حل الدولتين خيار لا يقبل التأجيل أو التهميش. أكد رئيس الحكومة، عزيز أخنوش، أن المغرب، انسجاما مع الرؤية التي يرعاها جلالة الملك محمد السادس، يعتبر أن حل الدولتين هو السبيل الوحيد لتحقيق سلام عادل وشامل في الشرق الأوسط، مشددا على أن هذا الحل “لا يقبل التأجيل أو التهميش، بل ينبغي أن يتحول إلى التزام أخلاقي ومطلب سياسي عاجل”. وخلال كلمته', 'size': 2}], 'main_title': 'أخنوش من نيويورك: حل الدولتين هو السبيل الأوحد لإرساء سلام دائم وشامل في الشرق الأوسط'}, {'community_id': '14', 'articles': [{'id': '311', 'title': 'هام .. توقيف حركة السير بعدد من المحاور الرئيسية بالدار البيضاء الأحد القادم', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/413277.html', 'summary': 'هام .. توقيف حركة السير بعدد من المحاور الرئيسية بالدار البيضاء الأحد القادم. في إطار تنظيم سباق «10KM Internatial by WeCaablanca»، والمقرر إجراؤه يوم الأحد 28 شتنبر الجاري، سيتم توقيف حركة السير بعدد من المحاور الرئيسية بالمدينة من', 'size': 2}, {'id': '380', 'title': 'البيضاء.. توقيف حركة السير بعدد من المحاور الرئيسية نهاية الأسبوع', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/476626.html', 'summary': 'البيضاء.. توقيف حركة السير بعدد من المحاور الرئيسية نهاية الأسبوع. في إطار تنظيم سباق "10KM Internatial by WeCaablanca"، والمقرر إجراؤه يوم الأحد 28 شتنبر الجاري، سيتم توقيف حركة السير بعدد من المحاور الرئيسية بالمدينة من أجل ضمان انسيابية السباق والحفاظ على سلامة المشاركين.', 'size': 2}], 'main_title': 'هام .. توقيف حركة السير بعدد من المحاور الرئيسية بالدار البيضاء الأحد القادم'}, {'community_id': '11', 'articles': [{'id': '343', 'title': '“عماد غماد” مديرا عاما جديدا لمجموعة كوسومار خلفا لـ”حسن منير”', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-590699.html', 'summary': '“عماد غماد” مديرا عاما جديدا لمجموعة كوسومار خلفا لـ”حسن منير”. قرر مجلس إدارة مجموعة كوسومار، خلال اجتماعه يوم أمس برئاسة هشام بلعمرا، تعيين عماد غماد مديرا عاما جديدا للمجموعة، خلفا لحسن منير الذي أنهى مهامه بعد بلوغه سن التقاعد وإثر أسباب صحية. حيث أعرب المجلس في بلاغ صادر عنه، عن تقديره الكبير لما قدمه حسن منير من خدمات طوال أربعة عقود، سواء على مستوى قيادة', 'size': 2}, {'id': '358', 'title': 'تعيين عماد غماد مديرا جديدا لمجموعة “كوسومار” خلفا لحسن منير', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1102412.html', 'summary': 'تعيين عماد غماد مديرا جديدا لمجموعة “كوسومار” خلفا لحسن منير. أعلنت مجموعة كوسومار عن تعيين عماد غماد في منصب المدير العام الجديد، خلفا لحسن منير الذي قرر إنهاء مهامه لأسباب صحية. جاء هذا القرار خلال اجتماع مجلس الإدارة الذي عقد أمس الثلاثاء 23 شتنبر 2025، برئاسة هشام بلمراح. وخلال الاجتماع، وجه مجلس الإدارة الشكر والتقدير لحسن منير على جهوده وتفانيه على مدار أربعة عقود من ظهرت المقالة تعيين عماد غماد مديرا جديدا لمجموعة “كوسومار” خلفا لحسن منير  .', 'size': 2}], 'main_title': '“عماد غماد” مديرا عاما جديدا لمجموعة كوسومار خلفا لـ”حسن منير”'}, {'community_id': '12', 'articles': [{'id': '360', 'title': 'أخنوش من الأمم المتحدة: إفريقيا أولوية في دبلوماسية المغرب وفضاء للانتماء والتضامن والشراكة', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1102407.html', 'summary': 'أخنوش من الأمم المتحدة: إفريقيا أولوية في دبلوماسية المغرب وفضاء للانتماء والتضامن والشراكة. أكد رئيس الحكومة، عزيز أخنوش، من مقر الأمم المتحدة، أن المغرب، وفق رؤية الملك محمد السادس، لم يجعل من القارة الإفريقية مجرد أولوية دبلوماسية، بل اعتبرها أيضا فضاء طبيعيا للانتماء والتضامن والشراكة. وفي كلمة ألقاها خلال أشغال الدورة الثمانين للجمعية العامة للأمم المتحدة المنعقدة حاليا في نيويورك، شدد أخنوش على أن الملك ما فتئ يؤكد ظهرت المقالة أخنوش من الأمم المتحدة: إفريقيا أولوية في دبلوماسية المغرب وفضاء للانتماء والتضامن والشراكة  .', 'size': 2}, {'id': '377', 'title': 'كلمة رئيس الحكومة في الأمم المتحدة تبرز الرؤية الملكية لإفريقيا موحدة ومزدهرة', 'source': 'rue20.com', 'link': 'https://rue20.com/939271.html', 'summary': 'كلمة رئيس الحكومة في الأمم المتحدة تبرز الرؤية الملكية لإفريقيا موحدة ومزدهرة.  ا الرباط شدد رئيس الحكومة عزيز أخنوش، يوم الثلاثاء في نيويورك، أنه واستنادا إلى رؤية جلالة الملك محمد السادس، “لم تتخذ المملكة المغربية إفريقيا كأولوية لدبلوماسيتها فحسب، بل جعلتها أيضا فضاء طبيعيا للانتماء والتضامن والشراكة”. وأكد رئيس الحكومة في كلمة باسم المغرب، أمام أشغال الدورة 80 للجمعية العامة لمنظمة الأمم المتحدة، أن جلالة الخبر كلمة رئيس الحكومة في الأمم المتحدة تبرز الرؤية الملكية لإفريقيا موحدة ومزدهرة  .', 'size': 2}], 'main_title': 'أخنوش من الأمم المتحدة: إفريقيا أولوية في دبلوماسية المغرب وفضاء للانتماء والتضامن والشراكة'}, {'community_id': '13', 'articles': [{'id': '365', 'title': 'رئيس الحكومة: المغرب يدعو إلى تنفيذ خريطة الطريق لإعمار غزة', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%b1%d8%a6%d9%8a%d8%b3-%d8%a7%d9%84%d8%ad%d9%83%d9%88%d9%85%d8%a9-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d9%8a%d8%af%d8%b9%d9%88-%d8%a5%d9%84%d9%89-%d8%aa%d9%86%d9%81%d9%8a%d8%b0-%d8%ae%d8%b1%d9%8a/', 'summary': 'رئيس الحكومة: المغرب يدعو إلى تنفيذ خريطة الطريق لإعمار غزة. جدد رئيس الحكومة، عزيز أخنوش، أمس الثلاثاء بنيويورك، تأكيد دعم المغرب لحل الدولتين في الشرق الأوسط، الذي يظل "السبيل الأوحد" لإرساء سلام دائم وشامل في المنطقة. وفي كلمة باسم المغرب، خلال الدورة الثمانين للجمعية العامة للأمم المتحدة، أبرز أخنوش أن "المغرب، بقيادة الملك محمد السادس، رئيس لجنة القدس، يظل مؤمنا بأن حل الدولتين هو السبيل  رئيس الحكومة: المغرب يدعو إلى تنفيذ خريطة الطريق لإعمار غزة     .', 'size': 2}, {'id': '413', 'title': 'المغرب يجدد تأكيد دعمه لحل الدولتين', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d9%8a%d8%ac%d8%af%d8%af-%d8%aa%d8%a3%d9%83%d9%8a%d8%af-%d8%af%d8%b9%d9%85%d9%87-%d9%84%d8%ad%d9%84-%d8%a7%d9%84%d8%af%d9%88%d9%84%d8%aa%d9%8a%d9%86/', 'summary': 'المغرب يجدد تأكيد دعمه لحل الدولتين. جدد رئيس الحكومة، عزيز أخنوش، أمس الثلاثاء 23 شتنبر 2025، بنيويورك، تأكيد دعم المغرب لحل الدولتين في الشرق الأوسط، الذي يظل “السبيل الأوحد” لإرساء سلام دائم وشامل في المنطقة. وفي كلمة باسم المغرب، خلال الدورة الثمانين للجمعية العامة للأمم المتحدة، أبرز أخنوش أن “المغرب، بقيادة الملك محمد السادس، رئيس لجنة القدس، يظل مؤمنا …  المغرب يجدد تأكيد دعمه لحل الدولتين     .', 'size': 2}], 'main_title': 'رئيس الحكومة: المغرب يدعو إلى تنفيذ خريطة الطريق لإعمار غزة'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    