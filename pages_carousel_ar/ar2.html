<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 20/09/2025 - 06h14</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '4', 'title': 'إنفانتينو يزور مقر الفيفا في الرباط', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d8%a5%d9%86%d9%81%d8%a7%d9%86%d8%aa%d9%8a%d9%86%d9%88-%d9%8a%d8%b2%d9%88%d8%b1-%d9%85%d9%82%d8%b1-%d8%a7%d9%84%d9%81%d9%8a%d9%81%d8%a7-%d9%81%d9%8a-%d8%a7%d9%84%d8%b1%d8%a8%d8%a7%d8%b7-1626702.html', 'summary': 'إنفانتينو يزور مقر الفيفا في الرباط. قام رئيس الاتحاد الدولي لكرة القدم (فيفا)، جياني إنفانتينو، اليوم الجمعة، بزيارة عمل إلى مقر “الفيفا إفريقيا” بالرباط. وذكر بلاغ للجامعة الملكية المغربية لكرة القدم أن إنفانتينو قام بهذه المناسبة بزيارة إلى ورشة مسار تكوين “الفيفا” للمدربات بمركب محمد السادس لكرة القدم. وإثر ذلك، يضيف المصدر ذاته، عقد رئيس الاتحاد الدولي لكرة القدم اجتماعات حول  إنفانتينو يزور مقر الفيفا في الرباط     - هسبريس جريدة إلكترونية مغربية .', 'size': 2}, {'id': '187', 'title': 'مقر الفيفا الجهوي بالرباط يتحول إلى قبلة لتكوين المدربات وتطوير كرة القدم الإفريقية', 'source': 'rue20.com', 'link': 'https://rue20.com/937933.html', 'summary': 'مقر الفيفا الجهوي بالرباط يتحول إلى قبلة لتكوين المدربات وتطوير كرة القدم الإفريقية. . الرباط قام رئيس الاتحاد الدولي لكرة القدم (الفيفا)، جياني إنفانتينو، اليوم الجمعة بزيارة عمل لمقر الفيفا إفريقيا بالرباط. وذكر بلاغ للجامعة الملكية المغربية لكرة القدم، أن السيد إنفانتينو قام بهذه المناسبة بزيارة لورشة مسار تكوين الفيفا للمدربات بمركب محمد السادس لكرة القدم. وإثر ذلك، يضيف المصدر ذاته، عقد إنفانتينو اجتماعات حول سبل تطوير الخبر مقر الفيفا الجهوي بالرباط يتحول إلى قبلة لتكوين المدربات وتطوير كرة القدم الإفريقية  .', 'size': 2}], 'main_title': 'إنفانتينو يزور مقر الفيفا في الرباط'}, {'community_id': '2', 'articles': [{'id': '68', 'title': 'المغرب – الصين: توقيع مذكرة تفاهم يتم بموجبها إرساء آلية للحوار الاستراتيجي بين وزارتي الخارجية بالبلدين', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/206423', 'summary': 'المغرب – الصين: توقيع مذكرة تفاهم يتم بموجبها إرساء آلية للحوار الاستراتيجي بين وزارتي الخارجية بالبلدين.  وقع وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج، ناصر بوريطة، ونظيره الصيني، وانغ يي، اليوم الجمعة ببكين، مذكرة تفاهم يتم بموجبها إرساء آلية للحوار الاستراتيجي بين وزارتي الخارجية بالبلدين. وترتكز هذه الآلية، التي ستغني الترسانة القانونية المُنظّمة للعلاقات بين البلدين، على مضمون الإعلان المشترك للشراكة الاستراتيجية، الموقع في 11 ماي 2016 ببكين،', 'size': 4}, {'id': '93', 'title': 'بوريطة يحل ببكين ويوقع اتفاقية هامة مع وزير الخارجية الصيني', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/politic/412998.html', 'summary': 'بوريطة يحل ببكين ويوقع اتفاقية هامة مع وزير الخارجية الصيني. وقع وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج، ناصر بوريطة، ونظيره الصيني، وانغ يي، اليوم الجمعة ببكين، مذكرة تفاهم يتم بموجبها إرساء آلية للحوار', 'size': 3}, {'id': '200', 'title': 'المغرب والصين يرسيان حوارا استراتيجيا بين وزارتي خارجيتهما', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/476089.html', 'summary': 'المغرب والصين يرسيان حوارا استراتيجيا بين وزارتي خارجيتهما. وقع وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج، ناصر بوريطة، ونظيره الصيني، وانغ يي، اليوم الجمعة ببكين، مذكرة تفاهم يتم بموجبها إرساء آلية للحوار الاستراتيجي بين وزارتي الخارجية بالبلدين.', 'size': 4}, {'id': '246', 'title': 'توقيع مذكرة تفاهم يتم بموجبها إرساء آلية للحوار الاستراتيجي بين المغرب والصين', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%aa%d9%88%d9%82%d9%8a%d8%b9-%d9%85%d8%b0%d9%83%d8%b1%d8%a9-%d8%aa%d9%81%d8%a7%d9%87%d9%85-%d9%8a%d8%aa%d9%85-%d8%a8%d9%85%d9%88%d8%ac%d8%a8%d9%87%d8%a7-%d8%a5%d8%b1%d8%b3%d8%a7%d8%a1-%d8%a2%d9%84/', 'summary': 'توقيع مذكرة تفاهم يتم بموجبها إرساء آلية للحوار الاستراتيجي بين المغرب والصين. وقع وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج، ناصر بوريطة، ونظيره الصيني، وانغ يي، اليوم الجمعة 19 شتنبر 2025، ببكين، مذكرة تفاهم يتم بموجبها إرساء آلية للحوار الاستراتيجي بين وزارتي الخارجية بالبلدين. وترتكز هذه الآلية، التي ستغني الترسانة القانونية المُنظّمة للعلاقات بين البلدين، على مضمون الإعلان المشترك للشراكة الاستراتيجية، الموقع في 11 …  توقيع مذكرة تفاهم يتم بموجبها إرساء آلية للحوار الاستراتيجي بين المغرب والصين     .', 'size': 4}, {'id': '379', 'title': 'بوريطة يجري مباحثات ببكين لتعزيز الشراكة الاستراتيجية بين المغرب والصين', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a8%d9%88%d8%b1%d9%8a%d8%b7%d8%a9-%d9%8a%d8%ac%d8%b1%d9%8a-%d9%85%d8%a8%d8%a7%d8%ad%d8%ab%d8%a7%d8%aa-%d8%a8%d8%a8%d9%83%d9%8a%d9%86-%d9%84%d8%aa%d8%b9%d8%b2%d9%8a%d8%b2-%d8%a7%d9%84%d8%b4%d8%b1/', 'summary': 'بوريطة يجري مباحثات ببكين لتعزيز الشراكة الاستراتيجية بين المغرب والصين. أجرى وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج، ناصر بوريطة، اليوم الجمعة، مباحثات مع نظيره الصيني وانغ يي، في إطار زيارة عمل رسمية إلى بكين، شكلت محطة جديدة في مسار توطيد العلاقات الاستراتيجية بين المغرب وجمهورية الصين الشعبية. وتندرج هذه الزيارة في سياق الدينامية المتواصلة التي تعرفها العلاقات الثنائية منذ إرساء الشراكة الاستراتيجية  بوريطة يجري مباحثات ببكين لتعزيز الشراكة الاستراتيجية بين المغرب والصين     .', 'size': 4}], 'main_title': 'المغرب – الصين: توقيع مذكرة تفاهم يتم بموجبها إرساء آلية للحوار الاستراتيجي بين وزارتي الخارجية بالبلدين'}, {'community_id': '3', 'articles': [{'id': '121', 'title': 'فيينا.. المغرب يترأس الاجتماع العام ال11 للشبكة الدولية للأمن والسلامة النوويين', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/413027.html', 'summary': 'فيينا.. المغرب يترأس الاجتماع العام ال11 للشبكة الدولية للأمن والسلامة النوويين. عقدت الشبكة الدولية للأمن والسلامة النوويين اجتماعها العام الحادي عشر بفيينا، برئاسة مدير الوكالة المغربية للأمن والسلامة في المجالين النووي والإشعاعي سعيد ملين.وأبرز ملين، الذي', 'size': 2}, {'id': '404', 'title': 'فيينا.. المغرب يترأس الاجتماع العام الـ11 للشبكة الدولية للأمن والسلامة النوويين', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d9%81%d9%8a%d9%8a%d9%86%d8%a7-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d9%8a%d8%aa%d8%b1%d8%a3%d8%b3-%d8%a7%d9%84%d8%a7%d8%ac%d8%aa%d9%85%d8%a7%d8%b9-%d8%a7%d9%84%d8%b9%d8%a7%d9%85-%d8%a7%d9%84%d9%801/', 'summary': 'فيينا.. المغرب يترأس الاجتماع العام الـ11 للشبكة الدولية للأمن والسلامة النوويين. عقدت الشبكة الدولية للأمن والسلامة النوويين اجتماعها العام الحادي عشر بفيينا، برئاسة مدير الوكالة المغربية للأمن والسلامة في المجالين النووي والإشعاعي  فيينا.. المغرب يترأس الاجتماع العام الـ11 للشبكة الدولية للأمن والسلامة النوويين     .', 'size': 2}], 'main_title': 'فيينا.. المغرب يترأس الاجتماع العام ال11 للشبكة الدولية للأمن والسلامة النوويين'}, {'community_id': '1', 'articles': [{'id': '134', 'title': 'توماس رايلي: المشاريع التي دشنها جلالة الملك “تعزز تموقع المغرب كجسر بين أوروبا وإفريقيا”', 'source': 'assabah.ma', 'link': 'https://assabah.ma/871965.html', 'summary': 'توماس رايلي: المشاريع التي دشنها جلالة الملك “تعزز تموقع المغرب كجسر بين أوروبا وإفريقيا”. أكد السفير السابق للمملكة المتحدة بالمغرب، توماس رايلي، أن المشاريع التي أشرف صاحب الجلالة الملك محمد السادس، على تدشينها، اليوم الخميس، في إطار إعادة هيكلة وتطوير المركب المينائي للدار البيضاء، “تعزز تموقع المغرب كجسر يربط بين أوروبا وإفريقيا”. وقال رايلي، في تصريح لوكالة المغرب العربي للأنباء، إنأكمل القراءة » المقالة توماس رايلي: المشاريع التي دشنها جلالة الملك “تعزز تموقع المغرب كجسر بين أوروبا وإفريقيا”  .', 'size': 2}, {'id': '233', 'title': 'المشاريع التي دشنها جلالة الملك “تعزز تموقع المغرب كجسر بين أوروبا وإفريقيا”', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/227255/', 'summary': 'المشاريع التي دشنها جلالة الملك “تعزز تموقع المغرب كجسر بين أوروبا وإفريقيا”. لندن – أكد السفير السابق للمملكة المتحدة بالمغرب، توماس رايلي، أن المشاريع التي أشرف صاحب الجلالة الملك محمد السادس، على تدشينها، اليوم الخميس، في إطار إعادة هيكلة وتطوير المركب المينائي للدار البيضاء، “تعزز تموقع المغرب كجسر يربط بين أوروبا وإفريقيا”. وقال السيد رايلي، في تصريح لوكالة المغرب العربي للأنباء، إن “الأمر يتعلق بمشاريع مبهرة”، مبرزا', 'size': 2}], 'main_title': 'توماس رايلي: المشاريع التي دشنها جلالة الملك “تعزز تموقع المغرب كجسر بين أوروبا وإفريقيا”'}, {'community_id': '10', 'articles': [{'id': '163', 'title': 'المغرب رئيسا لـ”أفرا” النووية.. وإجماع إفريقي على احتضان اجتماع 2026', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1101093.html', 'summary': 'المغرب رئيسا لـ”أفرا” النووية.. وإجماع إفريقي على احتضان اجتماع 2026. اعمتدت الدول الإفريقية الأعضاء في الاتفاق التعاوني الإقليمي الإفريقي للبحث والتنمية والتدريب في مجال العلم والتكنولوجيا النوويين (أفرا)، أمس الخميس، بالإجماع، قرارا يؤيد ترشح المغرب لتنظيم الاجتماع الـ37 لمجموعة العمل التقنية للاتفاق خلال سنة 2026. وتم اتخاذ هذا القرار في إطار مشاركة الوفد المغربي في أشغال المؤتمر العام الـ69 للوكالة الدولية للطاقة الذرية، الذي ينعقد ظهرت المقالة المغرب رئيسا لـ”أفرا” النووية.. وإجماع إفريقي على احتضان اجتماع 2026  .', 'size': 2}, {'id': '194', 'title': 'فيينا.. تأييد ترشيح المغرب لرئاسة الـ”أفرا”', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/476125.html', 'summary': 'فيينا.. تأييد ترشيح المغرب لرئاسة الـ”أفرا”. متابعة اعمتدت الدول الإفريقية الأعضاء في الاتفاق التعاوني الإقليمي الإفريقي للبحث والتنمية والتدريب في مجال العلم والتكنولوجيا النوويين (أفرا)، أمس الخميس، بالإجماع، قرارا يؤيد ترشح المغرب لتنظيم الاجتماع الـ37 لمجموعة العمل التقنية للاتفاق خلال سنة 2026. وتم اتخاذ هذا القرار في إطار مشاركة الوفد المغربي في أشغال المؤتمر العام الـ69 للوكالة الدولية للطاقة الذرية، الذي …', 'size': 2}], 'main_title': 'المغرب رئيسا لـ”أفرا” النووية.. وإجماع إفريقي على احتضان اجتماع 2026'}, {'community_id': '6', 'articles': [{'id': '175', 'title': 'نشرة إنذارية.. زخات رعدية قوية مصحوبة بهبات رياح مرتقبة اليوم الجمعة', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d9%86%d8%b4%d8%b1%d8%a9-%d8%a5%d9%86%d8%b0%d8%a7%d8%b1%d9%8a%d8%a9-%d8%b2%d8%ae%d8%a7%d8%aa-%d8%b1%d8%b9%d8%af%d9%8a%d8%a9-%d9%82%d9%88%d9%8a%d8%a9-%d9%85%d8%b5%d8%ad%d9%88%d8%a8%d8%a9-%d8%a8%d9%87-2/', 'summary': 'نشرة إنذارية.. زخات رعدية قوية مصحوبة بهبات رياح مرتقبة اليوم الجمعة. يرتقب تسجيل زخات رعدية قوية (من 20 إلى 30 ملم) مصحوبة بهبات رياح، اليوم الجمعة، بعدد من مناطق المملكة، وفق ما أفادت به المديرية العامة للأرصاد الجوية. وأوضحت نشرة إنذارية للمديرية من مستوى يقظة "برتقالي"، أنه من المرتقب تسجيل هذه الزخات الرعدية بكل من عمالات وأقاليم صفرو، وإفران، وبولمان، وميدلت، من الساعة 16:30 بعد الزوال  نشرة إنذارية.. زخات رعدية قوية مصحوبة بهبات رياح مرتقبة اليوم الجمعة     .', 'size': 2}, {'id': '188', 'title': 'زخات رعدية قوية مصحوبة بهبات رياح مرتقبة الجمعة', 'source': 'rue20.com', 'link': 'https://rue20.com/937930.html', 'summary': 'زخات رعدية قوية مصحوبة بهبات رياح مرتقبة الجمعة. . الرباط يرتقب تسجيل زخات رعدية قوية (من 20 إلى 30 ملم) مصحوبة بهبات رياح، اليوم الجمعة، بعدد من مناطق المملكة، وفق ما أفادت به المديرية العامة للأرصاد الجوية. وأوضحت نشرة إنذارية للمديرية من مستوى يقظة “برتقالي”، أنه من المرتقب تسجيل هذه الزخات الرعدية بكل من عمالات وأقاليم صفرو، وإفران، وبولمان، وميدلت، من الساعة الخبر زخات رعدية قوية مصحوبة بهبات رياح مرتقبة الجمعة  .', 'size': 2}], 'main_title': 'نشرة إنذارية.. زخات رعدية قوية مصحوبة بهبات رياح مرتقبة اليوم الجمعة'}, {'community_id': '8', 'articles': [{'id': '183', 'title': 'بسبب دورها في فيلم..نسرين الراضي تلجأ إلى القضاء', 'source': 'soltana.ma', 'link': 'https://soltana.ma/1357861.html', 'summary': 'بسبب دورها في فيلم..نسرين الراضي تلجأ إلى القضاء. قررت الممثلة المغربية نسرين الراضي سلك المساطر القانونية بعد تعرضها للإساءة والسب العلني عبر وسائل التواصل الاجتماعي، مؤكدة على أنها لن تقف “مكتوفة الأيدي” أمام ما وصفته بـ”الهجوم غير الأخلاقي” الذي طال سمعتها ومس حياتها الشخصية والمهنية. وأوضحت الراضي في تدوينة على حسابها بموقع “إنستغرام”، أن النقد الفني يظل مقبولاً في حدود حرية الرأي، وتابعت', 'size': 2}, {'id': '375', 'title': 'نسرين الراضي تهدد باللجوء إلى القضاء', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1101154.html', 'summary': 'نسرين الراضي تهدد باللجوء إلى القضاء. أعلنت الممثلة المغربية، نسرين الراضي، عن نيتها اللجوء إلى القضاء، بعد تعرضها لسيل من التعليقات التي وصفتها بالمسيئة لكرامتها، وذلك عبر تدوينات نشرتها على حسابها الرسمي بموقع تبادل الصور والفيديوهات “إنستغرام”. وعبرت نسرين الراضي، عن استيائها من الانتقادات التي توجه لها بسبب “جرأة” بعض أدوارها، مشددة على أنها لن تتساهل مع كل من تجاوز حدود ظهرت المقالة نسرين الراضي تهدد باللجوء إلى القضاء  .', 'size': 2}], 'main_title': 'بسبب دورها في فيلم..نسرين الراضي تلجأ إلى القضاء'}, {'community_id': '11', 'articles': [{'id': '195', 'title': 'الصين تشيد بالقيادة المتبصرة للملك وبالمبادرات الملكية الرامية للازدهار الشامل لإفريقيا', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/476120.html', 'summary': 'الصين تشيد بالقيادة المتبصرة للملك وبالمبادرات الملكية الرامية للازدهار الشامل لإفريقيا. أشاد وزير الشؤون الخارجية الصيني، وانغ يي، بالاستقرار الذي ينعم به المغرب، بفضل قيادة الملك محمد السادس، وبأوراش التنمية التي تم اطلاقها تحت قيادته.', 'size': 4}, {'id': '357', 'title': 'الصين تشيد بالقيادة المتبصرة لجلالة الملك محمد السادس', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/323860/', 'summary': 'الصين تشيد بالقيادة المتبصرة لجلالة الملك محمد السادس. أشاد وزير الشؤون الخارجية الصيني، وانغ يي، بالاستقرار الذي ينعم به المغرب، بفضل قيادة صاحب الجلالة الملك محمد السادس، وبأوراش التنمية التي تم اطلاقها تحت قيادة جلالته. وأعرب وزير الخارجية الصيني أيضا عن تقدير بلاده للمبادرات الملكية الرامية لازدهار القارة الافريقية، وذلك بمناسبة المحادثات التي أجراها اليوم الجمعة ببكين، مع وزير الشؤون الخارجية والتعاون الافريقي', 'size': 4}, {'id': '408', 'title': 'الصين تشيد بالقيادة المتبصرة للملك محمد السادس وبمبادراته الرامية للازدهار الشامل لإفريقيا', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d8%a7%d9%84%d8%b5%d9%8a%d9%86-%d8%aa%d8%b4%d9%8a%d8%af-%d8%a8%d8%a7%d9%84%d9%82%d9%8a%d8%a7%d8%af%d8%a9-%d8%a7%d9%84%d9%85%d8%aa%d8%a8%d8%b5%d8%b1%d8%a9-%d9%84%d9%84%d9%85%d9%84%d9%83-%d9%85%d8%ad/', 'summary': 'الصين تشيد بالقيادة المتبصرة للملك محمد السادس وبمبادراته الرامية للازدهار الشامل لإفريقيا. أشاد وزير الشؤون الخارجية الصيني، وانغ يي، بالاستقرار الذي ينعم به المغرب، بفضل قيادة صاحب الجلالة الملك محمد السادس، وبأوراش التنمية التي تم إطلاقها  الصين تشيد بالقيادة المتبصرة للملك محمد السادس وبمبادراته الرامية للازدهار الشامل لإفريقيا     .', 'size': 5}, {'id': '415', 'title': 'الصين تشيد بالقيادة المتبصرة لجلالة الملك محمد السادس ومبادراته الرامية للازدهار الشامل لإفريقيا', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/227295/', 'summary': 'الصين تشيد بالقيادة المتبصرة لجلالة الملك محمد السادس ومبادراته الرامية للازدهار الشامل لإفريقيا. أشاد وزير الشؤون الخارجية الصيني، وانغ يي، بالاستقرار الذي ينعم به المغرب، بفضل قيادة صاحب الجلالة الملك محمد السادس، وبأوراش التنمية التي تم اطلاقها تحت قيادة جلالته. وأعرب وزير الخارجية الصيني أيضا عن تقدير بلاده للمبادرات الملكية الرامية لازدهار القارة الافريقية، وذلك بمناسبة المحادثات التي أجراها اليوم الجمعة ببكين، مع وزير الشؤون الخارجية والتعاون الافريقي', 'size': 5}, {'id': '421', 'title': 'الصين تنوه بالقيادة المتبصرة للملك محمد السادس وبالمبادرات الملكية الرامية للازدهار الشامل لإفريقيا', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d8%b5%d9%8a%d9%86-%d8%aa%d9%86%d9%88%d9%87-%d8%a8%d8%a7%d9%84%d9%82%d9%8a%d8%a7%d8%af%d8%a9-%d8%a7%d9%84%d9%85%d8%aa%d8%a8%d8%b5%d8%b1%d8%a9-%d9%84%d9%84%d9%85%d9%84%d9%83-%d9%85%d8%ad/', 'summary': 'الصين تنوه بالقيادة المتبصرة للملك محمد السادس وبالمبادرات الملكية الرامية للازدهار الشامل لإفريقيا. نوه وزير الشؤون الخارجية الصيني، وانغ يي، بالاستقرار الذي ينعم به المغرب، بفضل قيادة الملك محمد السادس، وبأوراش التنمية التي تم إطلاقها تحت قيادة الملك محمد السادس. وفي هذا الصدد، أعرب وزير الخارجية الصيني أيضا عن تقدير بلاده للمبادرات الملكية الرامية لازدهار القارة الافريقية، وذلك بمناسبة المحادثات التي أجراها اليوم الجمعة 19 شتنبر …  الصين تنوه بالقيادة المتبصرة للملك محمد السادس وبالمبادرات الملكية الرامية للازدهار الشامل لإفريقيا     .', 'size': 5}], 'main_title': 'الصين تشيد بالقيادة المتبصرة للملك محمد السادس وبمبادراته الرامية للازدهار الشامل لإفريقيا'}, {'community_id': '7', 'articles': [{'id': '302', 'title': 'الدار البيضاء.. تدخل أمني سريع لتوضيح واقعة سائح وسائق سيارة أجرة', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-658770.html', 'summary': 'الدار البيضاء.. تدخل أمني سريع لتوضيح واقعة سائح وسائق سيارة أجرة. تفاعلت ولاية أمن الدار البيضاء بسرعة مع شريط فيديو متداول على مواقع التواصل الاجتماعي يظهر فيه سائح أجنبي يدّعي تعرضه لمعاملة سيئة وغير مهنية من طرف سائق سيارة أجرة بالمدينة. وبعد التحقيق، تبين أن السائح لم يقدم أي شكاية رسمية حول الواقعة، لكن مصالح الشرطة بمنطقة أمن عين السبع الحي المحمدي تمكنت من تحديد سيارة', 'size': 2}, {'id': '355', 'title': 'أمن الدار البيضاء يفتح تحقيقا في فيديو لسائح أجنبي وسائق طاكسي', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/323875/', 'summary': 'أمن الدار البيضاء يفتح تحقيقا في فيديو لسائح أجنبي وسائق طاكسي. تفاعلت ولاية أمن الدار البيضاء، بسرعة وجدية كبيرة، مع شريط فيديو منشور على صفحات مواقع التواصل الاجتماعي، يظهر فيه سائح أجنبي يزعم بأنه تعرض لمعاملة سيئة وغير مهنية من طرف سائق سيارة أجرة بمدينة الدار البيضاء. وقد فتحت مصالح الأمن الوطني بالدار البيضاء بحثا قضائيا على ضوء هذا الشريط، حيث تبين أن السائح الأجنبي الذي', 'size': 3}, {'id': '420', 'title': 'أمن الدار البيضاء يحقق في شريط فيديو يتهم سائق طاكسي بسوء معاملة سائح أجنبي', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a3%d9%85%d9%86-%d8%a7%d9%84%d8%af%d8%a7%d8%b1-%d8%a7%d9%84%d8%a8%d9%8a%d8%b6%d8%a7%d8%a1-%d9%8a%d8%ad%d9%82%d9%82-%d9%81%d9%8a-%d8%b4%d8%b1%d9%8a%d8%b7-%d9%81%d9%8a%d8%af%d9%8a%d9%88-%d9%8a%d8%aa/', 'summary': 'أمن الدار البيضاء يحقق في شريط فيديو يتهم سائق طاكسي بسوء معاملة سائح أجنبي. تفاعلت ولاية أمن الدار البيضاء، بسرعة وجدية كبيرة، مع شريط فيديو منشور على صفحات مواقع التواصل الاجتماعي، يظهر فيه سائح أجنبي يزعم بأنه تعرض لمعاملة سيئة وغير مهنية من طرف سائق سيارة أجرة بمدينة الدار البيضاء. وحسب مصدر أمني، فتحت مصالح الأمن الوطني بالدار البيضاء بحثا قضائيا على ضوء هذا الشريط، حيث تبين …  أمن الدار البيضاء يحقق في شريط فيديو يتهم سائق طاكسي بسوء معاملة سائح أجنبي     .', 'size': 2}], 'main_title': 'أمن الدار البيضاء يفتح تحقيقا في فيديو لسائح أجنبي وسائق طاكسي'}, {'community_id': '4', 'articles': [{'id': '313', 'title': 'برادة يعلن تسجيل أزيد من 8 ملايين تلميذ برسم الموسم الدراسي 2025-2026', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-658719.html', 'summary': 'برادة يعلن تسجيل أزيد من 8 ملايين تلميذ برسم الموسم الدراسي 2025-2026. قال وزير التربية الوطنية والتعليم الأولي والرياضة، محمد سعد برادة، اليوم الجمعة بالرباط، إن مجموع التلاميذ المسجلين برسم الموسم الدراسي 2025-2026 بلغ 8.271.256 تلميذة وتلميذا. وأفاد بلاغ لوزارة التربية الوطنية والتعليم الأولي والرياضة، بأن السيد برادة أوضح، خلال ندوة صحفية عقدها لتقديم معطيات حول الدخول المدرسي الحالي 2025-2026، أنه في ما يتعلق بالطلب على التمدرس', 'size': 2}, {'id': '359', 'title': 'تعليم أولي يتوسع ومؤسسات ريادة تتضاعف.. هذه أبرز معطيات الدخول المدرسي 2025-2026', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/323857/', 'summary': 'تعليم أولي يتوسع ومؤسسات ريادة تتضاعف.. هذه أبرز معطيات الدخول المدرسي 2025-2026. قال وزير التربية الوطنية والتعليم الأولي والرياضة، محمد سعد برادة، اليوم الجمعة بالرباط، إن مجموع التلاميذ المسجلين برسم الموسم الدراسي 2025-2026 بلغ 8.271.256 تلميذة وتلميذا. وأفاد بلاغ لوزارة التربية الوطنية والتعليم الأولي والرياضة، بأن السيد برادة أوضح، خلال ندوة صحفية عقدها لتقديم معطيات حول الدخول المدرسي الحالي 2025-2026، أنه في ما يتعلق بالطلب على التمدرس', 'size': 2}], 'main_title': 'برادة يعلن تسجيل أزيد من 8 ملايين تلميذ برسم الموسم الدراسي 2025-2026'}, {'community_id': '5', 'articles': [{'id': '338', 'title': 'الخميسات.. توقيف مروج مخدرات وحجز 1320 قرصا مهلوسا بحوزته', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a7%d9%84%d8%ae%d9%85%d9%8a%d8%b3%d8%a7%d8%aa-%d8%aa%d9%88%d9%82%d9%8a%d9%81-%d9%85%d8%b1%d9%88%d8%ac-%d9%85%d8%ae%d8%af%d8%b1%d8%a7%d8%aa-%d9%88%d8%ad%d8%ac%d8%b2-1320-%d9%82%d8%b1%d8%b5%d8%a7/', 'summary': 'الخميسات.. توقيف مروج مخدرات وحجز 1320 قرصا مهلوسا بحوزته. أوقفت عناصر الشرطة بالمنطقة الإقليمية للأمن بمدينة الخميسات بتنسيق مع مصالح المديرية العامة لمراقبة التراب الوطني، زوال اليوم الجمعة (19 شتنبر)، شخص يشتبه في تورطه في قضية تتعلق بترويج المخدرات والمؤثرات العقلية. وجرى توقيف المشتبه فيه بإحدى المناطق القروية بضواحي مدينة الخميسات، مباشرة بعد وصوله على متن سيارة من إحدى مدن شمال المملكة، حيث أسفرت', 'size': 3}, {'id': '351', 'title': 'كمين محكم ينهي رحلة مروج أقراص مخدرة من الشمال إلى الخميسات', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/323872/', 'summary': 'كمين محكم ينهي رحلة مروج أقراص مخدرة من الشمال إلى الخميسات. تمكنت عناصر الشرطة بالمنطقة الإقليمية للأمن بمدينة الخميسات بتنسيق مع مصالح المديرية العامة لمراقبة التراب الوطني، زوال اليوم الجمعة 19 شتنبر الجاري، من توقيف شخص يشتبه في تورطه في قضية تتعلق بترويج المخدرات والمؤثرات العقلية. وقد جرى توقيف المشتبه فيه بإحدى المناطق القروية بضواحي مدينة الخميسات، مباشرة بعد وصوله على متن سيارة من إحدى مدن', 'size': 3}, {'id': '380', 'title': 'توقيف مروج أقراص مهلوسة في الخميسات', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/286980-2/', 'summary': 'توقيف مروج أقراص مهلوسة في الخميسات. تمكنت عناصر الشرطة بالمنطقة الإقليمية للأمن بمدينة الخميسات بتنسيق مع مصالح المديرية العامة لمراقبة التراب الوطني، زوال اليوم الجمعة، من توقيف شخص يشتبه في تورطه في قضية تتعلق بترويج المخدرات والمؤثرات العقلية. وقد جرى توقيف المشتبه فيه بإحدى المناطق القروية بضواحي مدينة الخميسات، مباشرة بعد وصوله على متن سيارة من إحدى مدن شمال المملكة،  توقيف مروج أقراص مهلوسة في الخميسات     .', 'size': 3}], 'main_title': 'الخميسات.. توقيف مروج مخدرات وحجز 1320 قرصا مهلوسا بحوزته'}, {'community_id': '9', 'articles': [{'id': '416', 'title': 'الرئيس العام لمجموعة الموانئ البريطانية: المغرب يجني ثمار استراتيجيته الطموحة', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/227293/', 'summary': 'الرئيس العام لمجموعة الموانئ البريطانية: المغرب يجني ثمار استراتيجيته الطموحة. قال الرئيس المدير العام لمجموعة الموانئ الرئيسية في المملكة المتحدة، غيراينت إيفانز، إن المغرب يجني ثمار استراتيجيته “الطموحة” الرامية إلى جعل الموانئ في صلب تنميته الاقتصادية. وأبرز السيد إيفانز، في تصريح لوكالة المغرب العربي للأنباء، الأهمية الكبرى للمشاريع التي أشرف صاحب الجلالة الملك محمد السادس على تدشينها، أمس الخميس، في إطار إعادة هيكلة وتطوير المركب', 'size': 2}, {'id': '417', 'title': 'مسؤول بريطاني: المغرب يجني ثمار استراتيجيته المينائية الطموحة', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d9%85%d8%b3%d8%a4%d9%88%d9%84-%d8%a8%d8%b1%d9%8a%d8%b7%d8%a7%d9%86%d9%8a-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d9%8a%d8%ac%d9%86%d9%8a-%d8%ab%d9%85%d8%a7%d8%b1-%d8%a7%d8%b3%d8%aa%d8%b1%d8%a7%d8%aa/', 'summary': 'مسؤول بريطاني: المغرب يجني ثمار استراتيجيته المينائية الطموحة. قال الرئيس المدير العام لمجموعة الموانئ الرئيسية في المملكة المتحدة، غيراينت إيفانز، إن المغرب يجني ثمار استراتيجيته “الطموحة” الرامية إلى جعل الموانئ في صلب تنميته الاقتصادية. وأوضح إيفانز، في تصريح لوكالة المغرب العربي للأنباء، الأهمية الكبرى للمشاريع التي أشرف الملك محمد السادس على تدشينها، أمس الخميس 18 شتنبر 2025، في إطار إعادة هيكلة …  مسؤول بريطاني: المغرب يجني ثمار استراتيجيته المينائية الطموحة     .', 'size': 2}], 'main_title': 'الرئيس العام لمجموعة الموانئ البريطانية: المغرب يجني ثمار استراتيجيته الطموحة'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    