<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 17/08/2025 - 18h27</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '10', 'articles': [{'id': '2', 'title': 'حراس الأمن الخاص يرفضون شرط "شهادة الباكالوريا" لمزاولة المهنة', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d8%ad%d8%b1%d8%a7%d8%b3-%d8%a7%d9%84%d8%a3%d9%85%d9%86-%d8%a7%d9%84%d8%ae%d8%a7%d8%b5-%d9%8a%d8%b1%d9%81%d8%b6%d9%88%d9%86-%d8%b4%d8%b1%d8%b7-%d8%b4%d9%87%d8%a7%d8%af%d8%a9-%d8%a7%d9%84%d8%a8%d8%a7-1609343.html', 'summary': 'حراس الأمن الخاص يرفضون شرط "شهادة الباكالوريا" لمزاولة المهنة. يرفض حراس الأمن الخاص شرط “شهادة الباكالوريا” الذي تقول مناقصة دولية متعلقة بخدمات الحراسة بالمؤسسات الصحية التابعة للمديرية الجهوية لوزارة الصحة والحماية الاجتماعية بجهة مراكش-آسفي، إنه “ضروري” لتوظيفهم. وانتقد بلاغ للنقابة الوطنية لأعوان الحراسة الخاصة والنظافة والطبخ مضمون هذه المناقصة، قائلا: “ما ورد في دفتر التحملات يمثل انحرافاً خطيراً عن مبادئ العدالة الاجتماعية وحقوق الشغيلة،  حراس الأمن الخاص يرفضون شرط "شهادة الباكالوريا" لمزاولة المهنة     - هسبريس جريدة إلكترونية مغربية .', 'size': 2}, {'id': '387', 'title': 'جدل حول شرط “الباكالوريا” في مناقصة دولية لخدمات الحراسة بالمستشفيات', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%ac%d8%af%d9%84-%d8%ad%d9%88%d9%84-%d8%b4%d8%b1%d8%b7-%d8%a7%d9%84%d8%a8%d8%a7%d9%83%d8%a7%d9%84%d9%88%d8%b1%d9%8a%d8%a7-%d9%81%d9%8a-%d9%85%d9%86%d8%a7%d9%82%d8%b5%d8%a9-%d8%af%d9%88%d9%84/', 'summary': 'جدل حول شرط “الباكالوريا” في مناقصة دولية لخدمات الحراسة بالمستشفيات. أثار شرط إدراج “شهادة الباكالوريا” ضمن دفتر تحملات خاص بخدمات الحراسة بالمؤسسات الصحية التابعة للمديرية الجهوية لوزارة الصحة والحماية الاجتماعية بجهة مراكش-آسفي، جدلاً واسعاً في أوساط حراس الأمن الخاص. فقد اعتبرت النقابة الوطنية لأعوان الحراسة الخاصة والنظافة والطبخ أن هذا الشرط “إقصائي وغير عادل”، مؤكدة في بلاغ لها أن “اعتماد مؤهل دراسي كشهادة …  جدل حول شرط “الباكالوريا” في مناقصة دولية لخدمات الحراسة بالمستشفيات     .', 'size': 2}], 'main_title': 'حراس الأمن الخاص يرفضون شرط "شهادة الباكالوريا" لمزاولة المهنة'}, {'community_id': '9', 'articles': [{'id': '10', 'title': 'مصرع شرطي في حادثة ببني ملال', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d9%85%d8%b5%d8%b1%d8%b9-%d8%b4%d8%b1%d8%b7%d9%8a-%d9%81%d9%8a-%d8%ad%d8%a7%d8%af%d8%ab%d8%a9-%d8%a8%d8%a8%d9%86%d9%8a-%d9%85%d9%84%d8%a7%d9%84-1610276.html', 'summary': 'مصرع شرطي في حادثة ببني ملال. لقي شرطي ثلاثيني مصرعه في ساعة متأخرة من ليلة السبت، متأثرا بجروح بليغة أصيب بها إثر اصطدام قوي بدراجة نارية كبيرة وسط مدينة بني ملال. وأفادت مصادر محلية بأن الضحية تعرض لنزيف داخلي حاد عجل بوفاته، رغم محاولات الطاقم الطبي إنقاذ حياته بعد نقله على وجه السرعة إلى المستشفى. وأضافت المصادر ذاتها أن عناصر الشرطة  مصرع شرطي في حادثة ببني ملال     - هسبريس جريدة إلكترونية مغربية .', 'size': 2}, {'id': '170', 'title': 'دراجة نارية تتسبب في مصرع شرطي ببني ملال', 'source': 'rue20.com', 'link': 'https://rue20.com/929103.html', 'summary': 'دراجة نارية تتسبب في مصرع شرطي ببني ملال.  / متابعة شهدت مدينة بني ملال أمس السبت، حادثاً مأساوياً أسفر عن وفاة شرطي شاب يبلغ من العمر 32 عاماً، بعد تعرضه لإصابات بليغة في اصطدام قوي مع دراجة نارية كبيرة وسط المدينة. وأوضحت مصادر رسمية أن الشرطي تعرض لنزيف داخلي حاد أدى إلى وفاته، رغم الجهود الطبية المكثفة التي بذلت لإنقاذ حياته. الخبر دراجة نارية تتسبب في مصرع شرطي ببني ملال  .', 'size': 2}], 'main_title': 'مصرع شرطي في حادثة ببني ملال'}, {'community_id': '0', 'articles': [{'id': '71', 'title': '"المياه والغايات" تكشف خرائط المناطق الأكثر عرضة للحرائق بالمملكة', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/411131.html', 'summary': '"المياه والغايات" تكشف خرائط المناطق الأكثر عرضة للحرائق بالمملكة. أعلنت الوكالة الوطنية للمياه والغابات أنها ستصدر، من 17 إلى 20 غشت الجاري، بناء على معطيات علمية، خرائط تنبؤ تحدد بدقة المناطق الحساسة والمعرضة لخطر', 'size': 3}, {'id': '220', 'title': 'سؤال محير: لماذا غابات الشمال وحدها لها نصيب وافر من الحرائق..!؟', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%a7%d9%84%d9%88%d9%83%d8%a7%d9%84%d8%a9-%d8%a7%d9%84%d9%88%d8%b7%d9%86%d9%8a%d8%a9-%d9%84%d9%84%d9%85%d9%8a%d8%a7%d9%87-%d9%88%d8%a7%d9%84%d8%ba%d8%a7%d8%a8%d8%a7%d8%aa-%d8%aa%d9%83%d8%aa%d9%81/', 'summary': 'سؤال محير: لماذا غابات الشمال وحدها لها نصيب وافر من الحرائق..!؟. المساء اليوم: أعلنت الوكالة الوطنية للمياه والغابات أنها ستصدر، من 17 إلى 20 غشت الجاري، بناء على معطيات علمية، خرائط تنبؤ تحدد بدقة المناطق الحساسة والمعرضة لخطر اندلاع الحرائق الغابوية، وذلك من أجل استباق ظاهرة', 'size': 3}, {'id': '316', 'title': 'حرائق غابوية محتملة.. دعوة للحيطة والحذر', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/321231/', 'summary': 'حرائق غابوية محتملة.. دعوة للحيطة والحذر. حذرت الوكالة الوطنية للمياه والغابات من خطورة متصاعدة لاندلاع الحرائق الغابوية خلال الفترة ما بين 17 و20 غشت الجاري. وأعلنت الوكالة عن إصدار خرائط تنبؤية دقيقة لتحديد المناطق الأكثر عرضة للخطر، تحسبا لمواجهة هذه الظاهرة التي باتت تتكرر كل صيف. وأوضحت الوكالة، في بلاغ، أن هذه الخرائط أعدت بناء على معطيات علمية دقيقة تشمل طبيعة', 'size': 3}], 'main_title': '"المياه والغايات" تكشف خرائط المناطق الأكثر عرضة للحرائق بالمملكة'}, {'community_id': '3', 'articles': [{'id': '101', 'title': 'حسن بركة يتحدى التيارات ويصبح أول مغربي يسبح حول جزيرة مانهاتن الأمريكية', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/sport/others/411162.html', 'summary': 'حسن بركة يتحدى التيارات ويصبح أول مغربي يسبح حول جزيرة مانهاتن الأمريكية. تمكن الرياضي حسن بركة، الجمعة، من السباحة حول محيط جزيرة مانهاتن في نيويورك، قاطعا مسافة 48.5 كيلومتر، ليصبح بذلك أول مغربي يحقق هذا الإنجاز. وخاض بركة', 'size': 3}, {'id': '123', 'title': 'حسن بركة.. أول مغربي يسبح حول جزيرة مانهاتن', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%ad%d8%b3%d9%86-%d8%a8%d8%b1%d9%83%d8%a9-%d8%a3%d9%88%d9%84-%d9%85%d8%ba%d8%b1%d8%a8%d9%8a-%d9%8a%d8%b3%d8%a8%d8%ad-%d8%ad%d9%88%d9%84-%d8%ac%d8%b2%d9%8a%d8%b1%d8%a9-%d9%85%d8%a7%d9%86%d9%87/', 'summary': 'حسن بركة.. أول مغربي يسبح حول جزيرة مانهاتن. تمكن السباح المغربي حسن بركة، الجمعة، من تحقيق إنجاز رياضي جديد بعد أن أنهى سباحة محيط جزيرة مانهاتن في نيويورك لمسافة 48.5 كيلومتر، ليصبح أول مغربي يحقق هذا التحدي العالمي. وانطلق بركة صباح الجمعة (بالتوقيت المحلي) من جنوب مانهاتن، سباحةً عكس اتجاه عقارب الساعة، قبل أن يكمل مساره في زمن قدره تسع ساعات و53 دقيقة.', 'size': 3}, {'id': '324', 'title': 'رياضي مغربي يصنع المجد بأمريكا', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-585250.html', 'summary': 'رياضي مغربي يصنع المجد بأمريكا. تمكن الرياضي حسن بركة، الجمعة، من السباحة حول محيط جزيرة مانهاتن في نيويورك، قاطعا مسافة 48.5 كيلومتر، ليصبح بذلك أول مغربي يحقق هذا الإنجاز. وخاض بركة هذا التحدي مع نهاية صباح أمس الجمعة (بالتوقيت المحلي) جنوب جزيرة مانهاتن، قبل أن يسبح عكس اتجاه عقارب الساعة حول محيط الجزيرة، ليكمل مساره في ظرف زمني قدره', 'size': 3}], 'main_title': 'حسن بركة يتحدى التيارات ويصبح أول مغربي يسبح حول جزيرة مانهاتن الأمريكية'}, {'community_id': '2', 'articles': [{'id': '121', 'title': 'الميركاتو الصيفي. بايرن ميونخ يوضح كواليس انتقال آدم أزنو إلى إيفرتون', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a7%d9%84%d9%85%d9%8a%d8%b1%d9%83%d8%a7%d8%aa%d9%88-%d8%a7%d9%84%d8%b5%d9%8a%d9%81%d9%8a-%d8%a8%d8%a7%d9%8a%d8%b1%d9%86-%d9%85%d9%8a%d9%88%d9%86%d8%ae-%d9%8a%d9%88%d8%b6%d8%ad-%d9%83%d9%88%d8%a7/', 'summary': 'الميركاتو الصيفي. بايرن ميونخ يوضح كواليس انتقال آدم أزنو إلى إيفرتون. كشف كريستوف فرويند، المدير الرياضي لنادي بايرن ميونخ الألماني، أن انتقال الدولي المغربي آدم أزنو إلى إيفرتون الإنجليزي خلال الميركاتو الصيفي الحالي جاء بعد “عملية طويلة ومعقدة”. وأوضح فرويند أن النادي البافاري كان قد وضع خطة واضحة لمستقبل أزنو عقب انتهاء فترة إعارته التي دامت ستة أشهر مع ريال بلد الوليد الإسباني، غير أن رغبة', 'size': 2}, {'id': '309', 'title': 'بايرن ميونخ يوضح أسباب رحيل آدم أزنو', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/sport/proplayers/411210.html', 'summary': 'بايرن ميونخ يوضح أسباب رحيل آدم أزنو. كشف كريستوف فرويند، المدير الرياضي لنادي بايرن ميونخ، أن انتقال اللاعب الدولي المغربي آدم أزنو إلى إيفرتون الإنجليزي في فترة الانتقالات الصيفية كان نتيجة لعملية', 'size': 2}], 'main_title': 'الميركاتو الصيفي. بايرن ميونخ يوضح كواليس انتقال آدم أزنو إلى إيفرتون'}, {'community_id': '7', 'articles': [{'id': '128', 'title': 'صيادلة المغرب يستعجلون إصلاح “تسعير الأدوية”', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/321218/', 'summary': 'صيادلة المغرب يستعجلون إصلاح “تسعير الأدوية”. طالبت كونفدرالية نقابات صيادلة المغرب، الأحد، بإصلاح عاجل وعادل لمرسوم تسعير الأدوية. وحذر المصدر من أن استمرار الوضع الحالي يهدد اختفاء الأدوية منخفضة الثمن من السوق الوطني ويجعل العديد من الأدوية الباهظة بعيدة عن متناول المواطن. وأكدت الكونفدرالية في بيانها أن إصلاح نظام التسعير لم يعد ترفا بل ضرورة لحماية استمرارية الصيدليات وضمان الحق', 'size': 2}, {'id': '137', 'title': 'الصيادلة يخوضون حراكا لإنقاذ المهنة وحماية المغاربة من غلاء أسعار الأدوية', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1093308.html', 'summary': 'الصيادلة يخوضون حراكا لإنقاذ المهنة وحماية المغاربة من غلاء أسعار الأدوية. أعلن الصيادلة المغاربة عن تنظيم وقفة احتجاجية وارتداء الشارة السوداء للتعبير عن رفضهم للوضع الحالي لتسعير الأدوية في المغرب، مؤكدين أن الأوضاع الاقتصادية للمهنة لم تعد تحتمل، وأن استمرار الوضع الحالي يهدد مستقبل الصيدليات ويؤثر على قدرة المواطنين على ولوج العلاج. وأشارت كونفدرالية نقابات صيادة المغرب ضمن نداء تشرح فيه أسباب التصعيد ضد وزارة الصحة ظهرت المقالة الصيادلة يخوضون حراكا لإنقاذ المهنة وحماية المغاربة من غلاء أسعار الأدوية  .', 'size': 2}], 'main_title': 'صيادلة المغرب يستعجلون إصلاح “تسعير الأدوية”'}, {'community_id': '1', 'articles': [{'id': '160', 'title': 'توقعات أحوال الطقس.. نزول قطرات مطریة رعدیة', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%aa%d9%88%d9%82%d8%b9%d8%a7%d8%aa-%d8%a3%d8%ad%d9%88%d8%a7%d9%84-%d8%a7%d9%84%d8%b7%d9%82%d8%b3-%d9%86%d8%b2%d9%88%d9%84-%d9%82%d8%b7%d8%b1%d8%a7%d8%aa-%d9%85%d8%b7%d8%b1%db%8c%d8%a9-%d8%b1%d8%b9/', 'summary': 'توقعات أحوال الطقس.. نزول قطرات مطریة رعدیة. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الأحد، أن یظل الطقس حارا إلى جد حار محلیا بكل من السھول الداخلیة الشمالیة والوسطى، ووادي ملویة، والجنوب الشرقي للبلاد، وداخل الأقالیم الصحراویة، بینما سیكون حارا بالمنطقة الشرقیة. كما يرتقب، خلال اللیل والصباح، تشكل سحب منخفضة مرفوقة بكتل من الضباب فوق غرب الواجھة المتوسطیة وسواحل المحیط الأطلسي، مع  توقعات أحوال الطقس.. نزول قطرات مطریة رعدیة     .', 'size': 3}, {'id': '215', 'title': 'طقس اليوم الأحد: استمرار موجة الحرارة.. وأمطار متفرقة بالمرتفعات', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%b7%d9%82%d8%b3-%d8%a7%d9%84%d9%8a%d9%88%d9%85-%d8%a7%d9%84%d8%a3%d8%ad%d8%af-%d8%a7%d8%b3%d8%aa%d9%85%d8%b1%d8%a7%d8%b1-%d9%85%d9%88%d8%ac%d8%a9-%d8%a7%d9%84%d8%ad%d8%b1%d8%a7%d8%b1%d8%a9/', 'summary': 'طقس اليوم الأحد: استمرار موجة الحرارة.. وأمطار متفرقة بالمرتفعات. المساء اليوم: تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الأحد، أن یظل الطقس حارا إلى جد حار محلیا بكل من السھول الداخلیة الشمالیة والوسطى، ووادي ملویة، والجنوب الشرقي للبلاد، وداخل الأقالیم الصحراویة، بینما سیكون حارا', 'size': 3}, {'id': '227', 'title': 'توقعات أحوال الطقس اليوم الأحد', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%aa%d9%88%d9%82%d8%b9%d8%a7%d8%aa-%d8%a3%d8%ad%d9%88%d8%a7%d9%84-%d8%a7%d9%84%d8%b7%d9%82%d8%b3-%d8%a7%d9%84%d9%8a%d9%88%d9%85-%d8%a7%d9%84%d8%a3%d8%ad%d8%af-44/', 'summary': 'توقعات أحوال الطقس اليوم الأحد. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليومه الأحد، أن یظل الطقس حارا إلى جد حار محلیا بكل من السھول الداخلیة الشمالیة والوسطى، ووادي ملویة، والجنوب الشرقي للبلاد، وداخل الأقالیم الصحراویة، بینما سیكون حارا بالمنطقة الشرقیة. كما يرتقب، خلال اللیل والصباح، تشكل سحب منخفضة مرفوقة بكتل من الضباب فوق غرب الواجھة المتوسطیة وسواحل المحیط …  توقعات أحوال الطقس اليوم الأحد     .', 'size': 3}], 'main_title': 'توقعات أحوال الطقس.. نزول قطرات مطریة رعدیة'}, {'community_id': '8', 'articles': [{'id': '266', 'title': 'الملك محمد السادس يبعث برقية تهنئة لرئيس الغابون بمناسبة العيد الوطني لبلاده', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-650158.html', 'summary': 'الملك محمد السادس يبعث برقية تهنئة لرئيس الغابون بمناسبة العيد الوطني لبلاده. هبة بريس بعث الملك محمد السادس برقية تهنئة إلى رئيس جمهورية الغابون، رئيس الدولة، رئيس الحكومة، بريس كلوتير أوليغي نغيما، وذلك بمناسبة العيد الوطني لبلاده. وأعرب الملك، في هذه البرقية، عن أحر تهانئه وأصدق متمنياته لبريس كلوتير أوليغي نغيما، وللشعب الغابوني بمزيد الرخاء والرفاه. ومما جاء في برقية الملك، “كما هي مناسبة لأؤكد لكم العناية الخاصة التي توليها المملكة المغربية لتعزيز أواصر الصداقة الأخوية التي تربطها بجمهورية الغابون، مجددا لفخامتكم، في هذا الصدد، حرصي الوطيد على العمل سويا معكم، من أجل مواصلة ترسيخ علاقات التعاون الوثيق بين بلدينا الشقيقين”.', 'size': 3}, {'id': '378', 'title': 'جلالة الملك يهنئ رئيس الغابون في العيد الوطني لبلاده', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/226013/', 'summary': 'جلالة الملك يهنئ رئيس الغابون في العيد الوطني لبلاده. بعث صاحب الجلالة الملك محمد السادس برقية تهنئة إلى رئيس جمهورية الغابون، رئيس الدولة، رئيس الحكومة، فخامة السيد بريس كلوتير أوليغي نغيما، وذلك بمناسبة العيد الوطني لبلاده. وأعرب جلالة الملك، في هذه البرقية، عن أحر تهانئه وأصدق متمنياته للسيد بريس كلوتير أوليغي نغيما، وللشعب الغابوني بمزيد الرخاء والرفاه. ومما جاء في برقية جلالة الملك، “كما', 'size': 3}, {'id': '385', 'title': 'الملك محمد السادس يهنئ رئيس جمهورية الغابون بمناسبة العيد الوطني لبلاده', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%85%d8%ad%d9%85%d8%af-%d8%a7%d9%84%d8%b3%d8%a7%d8%af%d8%b3-%d9%8a%d9%87%d9%86%d8%a6-%d8%b1%d8%a6%d9%8a%d8%b3-%d8%ac%d9%85%d9%87%d9%88%d8%b1%d9%8a%d8%a9-%d8%a7-26/', 'summary': 'الملك محمد السادس يهنئ رئيس جمهورية الغابون بمناسبة العيد الوطني لبلاده. بعث الملك محمد السادس برقية تهنئة إلى رئيس جمهورية الغابون، رئيس الدولة، رئيس الحكومة، بريس كلوتير أوليغي نغيما، وذلك بمناسبة العيد الوطني لبلاده. وأعرب الملك محمد السادس، في هذه البرقية، عن أحر تهانئه وأصدق متمنياته لبريس كلوتير أوليغي نغيما، وللشعب الغابوني بمزيد الرخاء والرفاه. ومما جاء في برقية الملك محمد السادس، “كما هي …  الملك محمد السادس يهنئ رئيس جمهورية الغابون بمناسبة العيد الوطني لبلاده     .', 'size': 3}], 'main_title': 'الملك محمد السادس يبعث برقية تهنئة لرئيس الغابون بمناسبة العيد الوطني لبلاده'}, {'community_id': '6', 'articles': [{'id': '313', 'title': 'بعد التفوق على الكونغو الديمقراطية. المحليون يحجزون بطاقة العبور لربع نهائي “الشان”', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a8%d8%b9%d8%af-%d8%a7%d9%84%d8%aa%d9%81%d9%88%d9%82-%d8%b9%d9%84%d9%89-%d8%a7%d9%84%d9%83%d9%88%d9%86%d8%ba%d9%88-%d8%a7%d9%84%d8%af%d9%8a%d9%85%d9%82%d8%b1%d8%a7%d8%b7%d9%8a%d8%a9-%d8%a7%d9%84/', 'summary': 'بعد التفوق على الكونغو الديمقراطية. المحليون يحجزون بطاقة العبور لربع نهائي “الشان”. حجز المنتخب المغربي للمحليين مقعده في ربع نهائي كأس إفريقيا للاعبين المحليين، عقب فوزه المستحق على منتخب الكونغو الديمقراطية بثلاثة أهداف مقابل هدف، في المباراة التي جرت اليوم الأحد لحساب الجولة الأخيرة من دور المجموعات. بداية اللقاء عرفت حضورا قويا للعناصر الوطنية، حيث ضغطت على دفاع الخصم منذ الدقائق الأولى، قبل أن يترجم أسامة المليوي', 'size': 2}, {'id': '364', 'title': 'المنتخب الوطني للمحليين يهزم الكونغو الديمقراطية ويتأهل لربع نهائي “الشان”', 'source': 'machahid24.com', 'link': 'https://machahid24.com/sport/472908.html', 'summary': 'المنتخب الوطني للمحليين يهزم الكونغو الديمقراطية ويتأهل لربع نهائي “الشان”. تأهل المنتخب الوطني للمحليين، إلى دور ربع نهائي أمم إفريقيا “الشان”، عقب انتصاره اليوم الأحد، على نظيره الكونغو الديمقراطية، بثلاثة أهداف مقابل واحد. وأحرز المنتخب الوطني في الشوط الأول مبكرا، في د 8 عبر أسامة المليوي إثر تمريرة من الظهير الأيسر يوسف بلعامري. وتمكن منتخب الكونغو الديمقراطية، من تعديل النتيجة، عند الدقيقة الـ43، عبر اللاعب، …', 'size': 2}], 'main_title': 'بعد التفوق على الكونغو الديمقراطية. المحليون يحجزون بطاقة العبور لربع نهائي “الشان”'}, {'community_id': '5', 'articles': [{'id': '314', 'title': 'تطوان.. أطفال القدس يتلمسون خطى تلاميذ مغاربة تلقوا تعليمهم بمدينة نابلس الفلسطينية خلال القرن الماضي', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%aa%d8%b7%d9%88%d8%a7%d9%86-%d8%a3%d8%b7%d9%81%d8%a7%d9%84-%d8%a7%d9%84%d9%82%d8%af%d8%b3-%d9%8a%d8%aa%d9%84%d9%85%d8%b3%d9%88%d9%86-%d8%ae%d8%b7%d9%89-%d8%aa%d9%84%d8%a7%d9%85%d9%8a%d8%b0-%d9%85/', 'summary': 'تطوان.. أطفال القدس يتلمسون خطى تلاميذ مغاربة تلقوا تعليمهم بمدينة نابلس الفلسطينية خلال القرن الماضي. قام أطفال القدس المشاركون في الدورة السادسة عشرة للمخيم الصيفي، دورة “حارة المغاربة” اليوم السبت بزيارة إلى مدينة تطوان تمكنوا من خلالها من الاطلاع على تجربة البعثة التعليمية الأولى التي قادت تلاميذ مغاربة إلى مدرسة النجاح في نابلس الفلسطينية عام 1928. وبهذه المناسبة قدمت للأطفال المقدسيين صور من هذه البعثة، من خلال شاشة تفاعلية نصبت', 'size': 2}, {'id': '363', 'title': 'دورة حارة المغاربة.. أطفال القدس يتعرفون بتطوان على  محطات من تاريخ المغرب', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/472911.html', 'summary': 'دورة حارة المغاربة.. أطفال القدس يتعرفون بتطوان على محطات من تاريخ المغرب. قام أطفال القدس المشاركون في الدورة السادسة عشرة للمخيم الصيفي، دورة “حارة المغاربة” بزيارة إلى مدينة تطوان تمكنوا من خلالها من الاطلاع على تجربة البعثة التعليمية الأولى التي قادت تلاميذ مغاربة إلى مدرسة النجاح في نابلس الفلسطينية عام 1928. وبهذه المناسبة قدمت للأطفال المقدسيين صور من هذه البعثة، من خلال شاشة تفاعلية نصبت في مدرسة …', 'size': 2}], 'main_title': 'تطوان.. أطفال القدس يتلمسون خطى تلاميذ مغاربة تلقوا تعليمهم بمدينة نابلس الفلسطينية خلال القرن الماضي'}, {'community_id': '4', 'articles': [{'id': '342', 'title': 'الداخلية تستنفر الولاة والعمال لإعداد “جيل جديد من البرامج المجالية” ومنع استغلالها سياسيا', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1093330.html', 'summary': 'الداخلية تستنفر الولاة والعمال لإعداد “جيل جديد من البرامج المجالية” ومنع استغلالها سياسيا. استنفر وزير الداخلية، عبد الوافي لفتيت، الولاة والعمال بمختلف ربوع المملكة، من أجل تنزيل التوجيهات الملكية الواردة في خطاب العرش، والتي دعا فيها الملك إلى إعداد جيل جديد من برامج التنمية المجالية المندمجة القائمة على تعزيز الخصوصيات المحلية، وترسيخ الجهوية المتقدمة، ومبادئ التكامل والتضامن بين الكيانات الترابية، بهدف ضمان وصول كل مواطنة ومواطن إلى ثمار ظهرت المقالة الداخلية تستنفر الولاة والعمال لإعداد “جيل جديد من البرامج المجالية” ومنع استغلالها سياسيا  .', 'size': 2}, {'id': '343', 'title': 'لفتيت يحذر من توظيف برامج التنمية الترابية المندمجة لأغراض سياسية ضيقة', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d9%84%d9%81%d8%aa%d9%8a%d8%aa-%d9%8a%d8%ad%d8%b0%d8%b1-%d9%85%d9%86-%d8%aa%d9%88%d8%b8%d9%8a%d9%81-%d8%a8%d8%b1%d8%a7%d9%85%d8%ac-%d8%a7%d9%84%d8%aa%d9%86%d9%85%d9%8a%d8%a9-%d8%a7%d9%84%d8%aa%d8%b1/', 'summary': 'لفتيت يحذر من توظيف برامج التنمية الترابية المندمجة لأغراض سياسية ضيقة. حذر عبد الوافي لفتيت، وزير الداخلية، من أي استغلال محتمل خلال إعداد جيل جديد من برامج التنمية الترابية المندمجة لأغراض سياسية أو انتخابية ضيقة، وذلك تعبئة وانخراط لمجموع الفاعلين الترابيين المعنيين في إطار المقاربة التشاركية والمندمجة. ووجه لفتيت دورية إلى الولاة وعمال العمالات وعمالات المقاطعات، دعاهم فيها إلى الشروع في إعداد جيل جديد من برامج  لفتيت يحذر من توظيف برامج التنمية الترابية المندمجة لأغراض سياسية ضيقة     .', 'size': 2}], 'main_title': 'الداخلية تستنفر الولاة والعمال لإعداد “جيل جديد من البرامج المجالية” ومنع استغلالها سياسيا'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    