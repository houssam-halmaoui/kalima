<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 21/08/2025 - 12h25</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '5', 'articles': [{'id': '35', 'title': 'مسؤول بريطاني: مبادرة الملك محمد السادس لإغاثة غزة نبيلة وملهمة', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-650873.html', 'summary': 'مسؤول بريطاني: مبادرة الملك محمد السادس لإغاثة غزة نبيلة وملهمة. هبة بريس اعتبر النائب البريطاني وكاتب الدولة السابق بوزارة الشؤون الخارجية أندرو موريسون، اليوم الأربعاء، أن إرسال مساعدات إنسانية إضافية لفائدة سكان غزة، بتعليمات من الملك محمد السادس ، “مبادرة ملكية نبيلة وكريمة ترسم معالم الطريق الواجب اتباعه” للتخفيف من معاناة سكان القطاع. وأكد موريسون، في تصريح نقلته وكالة المغرب العربي للأنباء، أن “جلالة الملك قائد ملهم، وتبقى مبادراته مصدر أمل في المنطقة”، مشددا على أن إرسال هذه المساعدات الإضافية لسكان غزة يأتي في ظرفية صعبة، ويعكس “فرادة العمل الملكي ومصداقية التزام جلالته”. وأضاف المسؤول البريطاني السابق أن العمل الإنساني النبيل الذي يقوده الملك من أجل تسريع إيصال المساعدات الإنسانية إلى المدنيين في غزة “سيشجع دولا أخرى على أن تحذو حذو جلالته”. وتجسيدا للدعم الدائم والتضامن الملموس من الملك محمد السادس، رئيس لجنة القدس، مع الشعب الفلسطيني الشقيق، أصدر تعليماته بإرسال مساعدات إنسانية إضافية لفائدة ساكنة غزة. وأوضح بلاغ لوزارة الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج أن هذه المساعدات الإنسانية سيتم إيصالها كسابقاتها عبر الطائرات، وتسليمها بشكل عاجل ومباشر للمستفيدين منها من الأشقاء الفلسطينيين.', 'size': 2}, {'id': '213', 'title': 'نائب بريطاني: المساعدات الإنسانية الموجهة إلى سكان غزة “مبادرة ملكية نبيلة ترسم معالم الطريق الواجب اتباعه”', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d9%86%d8%a7%d8%a6%d8%a8-%d8%a8%d8%b1%d9%8a%d8%b7%d8%a7%d9%86%d9%8a-%d8%a7%d9%84%d9%85%d8%b3%d8%a7%d8%b9%d8%af%d8%a7%d8%aa-%d8%a7%d9%84%d8%a5%d9%86%d8%b3%d8%a7%d9%86%d9%8a%d8%a9-%d8%a7%d9%84%d9%85/', 'summary': 'نائب بريطاني: المساعدات الإنسانية الموجهة إلى سكان غزة “مبادرة ملكية نبيلة ترسم معالم الطريق الواجب اتباعه”. قال النائب البريطاني وكاتب الدولة السابق بوزارة الشؤون الخارجية، أندرو موريسون، اليوم الأربعاء، إن إرسال مساعدات إنسانية إضافية لفائدة سكان غزة، بتعليمات سامية من الملك محمد السادس، “مبادرة ملكية نبيلة وكريمة ترسم معالم الطريق الواجب اتباعه” للتخفيف من معاناة سكان القطاع. وأضاف موريسون، في تصريح لوكالة المغرب العربي للأنباء، أن “جلالة الملك قائد …  نائب بريطاني: المساعدات الإنسانية الموجهة إلى سكان غزة “مبادرة ملكية نبيلة ترسم معالم الطريق الواجب اتباعه”     .', 'size': 2}], 'main_title': 'مسؤول بريطاني: مبادرة الملك محمد السادس لإغاثة غزة نبيلة وملهمة'}, {'community_id': '1', 'articles': [{'id': '61', 'title': 'عيد الشباب.. جلالة الملك يصدر عفوه السامي على 591 شخصا', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/205227', 'summary': 'عيد الشباب.. جلالة الملك يصدر عفوه السامي على 591 شخصا. الأحداث من الرباط بمناسبة عيد الشباب السعيد لهذه السنة، أصدر صاحب الجلالة الملك محمد السادس، نصره الله، أمره السامي بالعفو على 591 شخصا، منهم المعتقلون ومنهم الموجودون في حالة سراح، المحكوم عليهم من طرف مختلف محاكم المملكة. وفي ما يلي نص بلاغ وزارة العدل بهذا الخصوص: “بمناسبة عيد الشباب السعيد لهذه السنة 1447 هجرية 2025', 'size': 5}, {'id': '159', 'title': 'جلالة الملك يصدر عفواً على 591 سجيناً بمناسبة ذكرى عيد الشباب', 'source': 'rue20.com', 'link': 'https://rue20.com/930055.html', 'summary': 'جلالة الملك يصدر عفواً على 591 سجيناً بمناسبة ذكرى عيد الشباب. . الرباط بمناسبة عيد الشباب السعيد لهذه السنة، أصدر صاحب الجلالة الملك محمد السادس، نصره الله، أمره السامي بالعفو على 591 شخصا، منهم المعتقلون ومنهم الموجودون في حالة سراح، المحكوم عليهم من طرف مختلف محاكم المملكة. وفي ما يلي نص بلاغ وزارة العدل بهذا الخصوص: “بمناسبة عيد الشباب السعيد لهذه السنة 1447 هجرية 2025 الخبر جلالة الملك يصدر عفواً على 591 سجيناً بمناسبة ذكرى عيد الشباب  .', 'size': 5}, {'id': '170', 'title': 'عيد الشباب.. عفوه ملكي على 591 شخصا', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/473244.html', 'summary': 'عيد الشباب.. عفوه ملكي على 591 شخصا. بمناسبة عيد الشباب لهذه السنة، أصدر الملك محمد السادس، أمره السامي بالعفو على 591 شخصا، منهم المعتقلون ومنهم الموجودون في حالة سراح، المحكوم عليهم من طرف مختلف محاكم المملكة. وفي ما يلي نص بلاغ وزارة العدل بهذا الخصوص: “بمناسبة عيد الشباب السعيد لهذه السنة 1447 هجرية 2025 ميلادية، تفضل جلالة الملك أدام الله عزه ونصره، …', 'size': 5}, {'id': '212', 'title': 'عيد الشباب.. الملك محمد السادس يصدر عفوه السامي على 591 شخصا', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%b9%d9%8a%d8%af-%d8%a7%d9%84%d8%b4%d8%a8%d8%a7%d8%a8-%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%85%d8%ad%d9%85%d8%af-%d8%a7%d9%84%d8%b3%d8%a7%d8%af%d8%b3-%d9%8a%d8%b5%d8%af%d8%b1-%d8%b9%d9%81%d9%88%d9%87/', 'summary': 'عيد الشباب.. الملك محمد السادس يصدر عفوه السامي على 591 شخصا. أصدر الملك محمد السادس، بمناسبة عيد الشباب السعيد لهذه السنة، أمره السامي بالعفو على 591 شخصا، منهم المعتقلون ومنهم الموجودون في حالة سراح، المحكوم عليهم من طرف مختلف محاكم المملكة. وفي ما يلي نص بلاغ وزارة العدل بهذا الخصوص:“بمناسبة عيد الشباب السعيد لهذه السنة 1447 هجرية 2025 ميلادية، تفضل جلالة الملك أدام الله …  عيد الشباب.. الملك محمد السادس يصدر عفوه السامي على 591 شخصا     .', 'size': 5}, {'id': '292', 'title': 'عيد الشباب.. عفو سامي على 591 شخصا', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/321436/', 'summary': 'عيد الشباب.. عفو سامي على 591 شخصا. بمناسبة عيد الشباب السعيد لهذه السنة، أصدر الملك محمد السادس، أمره السامي بالعفو على 591 شخصا، منهم المعتقلون ومنهم الموجودون في حالة سراح، المحكوم عليهم من طرف مختلف محاكم المملكة. وفي ما يلي نص بلاغ وزارة العدل بهذا الخصوص: “بمناسبة عيد الشباب السعيد لهذه السنة 1447 هجرية 2025 ميلادية، تفضل جلالة الملك أدام الله عزه', 'size': 5}], 'main_title': 'عيد الشباب.. جلالة الملك يصدر عفوه السامي على 591 شخصا'}, {'community_id': '2', 'articles': [{'id': '62', 'title': 'عيد الشباب.. الاحتفاء بالالتزام الملكي الراسخ تجاه الشباب، المحرك الحقيقي لمغرب صاعد', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/205218', 'summary': 'عيد الشباب.. الاحتفاء بالالتزام الملكي الراسخ تجاه الشباب، المحرك الحقيقي لمغرب صاعد.  تشكل ذكرى عيد الشباب، التي يحتفل بها الشعب المغربي، يوم غد الخميس، مناسبة لتسليط الضوء على الالتزام الراسخ لصاحب الجلالة الملك محمد السادس، نصره الله، من أجل تعزيز دور الشباب في الدينامية المجتمعية، ودعم مشاركتهم السياسية والاقتصادية الفاعلة، خدمة لمغرب صاعد، حديث ومزدهر. وفي الواقع،تمثل هذه الذكرى مناسبة متجددة للاحتفاء بهؤلاء الشباب، الذين', 'size': 3}, {'id': '119', 'title': 'عيد الشباب .. الاحتفاء بالالتزام الملكي الراسخ تجاه الشباب المحرك الحقيقي لمغرب صاعد', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/321412/', 'summary': 'عيد الشباب .. الاحتفاء بالالتزام الملكي الراسخ تجاه الشباب المحرك الحقيقي لمغرب صاعد. تشكل ذكرى عيد الشباب، التي يحتفل بها الشعب المغربي، يوم غد الخميس، مناسبة لتسليط الضوء على الالتزام الراسخ لصاحب الجلالة الملك محمد السادس، نصره الله، من أجل تعزيز دور الشباب في الدينامية المجتمعية، ودعم مشاركتهم السياسية والاقتصادية الفاعلة، خدمة لمغرب صاعد، حديث ومزدهر. وفي الواقع، تمثل هذه الذكرى مناسبة متجددة للاحتفاء بهؤلاء الشباب، الذين يشكلون', 'size': 3}, {'id': '209', 'title': 'ذكرى عيد الشباب.. تأكيد الالتزام الملكي القوي بتمكين الشباب ودعم مسيرة المغرب الصاعد', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%b0%d9%83%d8%b1%d9%89-%d8%b9%d9%8a%d8%af-%d8%a7%d9%84%d8%b4%d8%a8%d8%a7%d8%a8-%d8%aa%d8%a3%d9%83%d9%8a%d8%af-%d8%a7%d9%84%d8%a7%d9%84%d8%aa%d8%b2%d8%a7%d9%85-%d8%a7%d9%84%d9%85%d9%84%d9%83%d9%8a/', 'summary': 'ذكرى عيد الشباب.. تأكيد الالتزام الملكي القوي بتمكين الشباب ودعم مسيرة المغرب الصاعد. يحتفل الشعب المغربي يوم غدٍ الخميس 21 غشت الجاري، بذكرى عيد الشباب، وهي مناسبة سنوية لتسليط الضوء على الالتزام الثابت للملك محمد السادس، تجاه الشباب، باعتبارهم المحرك الحقيقي لمغرب صاعد وحديث، كما يأتي هذا الاحتفال لتقدير جهود هذه الشريحة الحيوية، وتقييم البرامج والمبادرات الموجهة لها، والتفكير في تعزيز مشاركتها الفاعلة في التنمية السياسية …  ذكرى عيد الشباب.. تأكيد الالتزام الملكي القوي بتمكين الشباب ودعم مسيرة المغرب الصاعد     .', 'size': 3}], 'main_title': 'عيد الشباب.. الاحتفاء بالالتزام الملكي الراسخ تجاه الشباب، المحرك الحقيقي لمغرب صاعد'}, {'community_id': '10', 'articles': [{'id': '86', 'title': 'قاصر يتورط في محاولة سطو باستعمال طرد متفجر وهمي بالقنيطرة', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/society/411361.html', 'summary': 'قاصر يتورط في محاولة سطو باستعمال طرد متفجر وهمي بالقنيطرة. تمكنت عناصر الفرقة المتنقلة لشرطة النجدة بولاية أمن القنيطرة، منتصف نهار اليوم الأربعاء 20 غشت الجاري، من توقيف جانح قاصر يبلغ من العمر 17 سنة،', 'size': 3}, {'id': '117', 'title': 'طرد متفجر يستنفر أمن وجدة', 'source': 'assabah.ma', 'link': 'https://assabah.ma/866417.html', 'summary': 'طرد متفجر يستنفر أمن وجدة. تمكنت عناصر الفرقة المتنقلة لشرطة النجدة بولاية أمن القنيطرة منتصف نهار اليوم الأربعاء 20 غشت الجاري، من توقيف جانح قاصر يبلغ من العمر 17 سنة، وذلك للاشتباه في تورطه في محاولة السرقة من محل تجاري تحت التهديد باستخدام طرد متفجر وهمي. وحسب المعلومات الأولية للبحث، فقدأكمل القراءة » المقالة طرد متفجر يستنفر أمن وجدة  .', 'size': 2}, {'id': '125', 'title': 'توقيف قاصر متورط في محاولة سرقة محل بالقنيطرة تحت التهديد باستخدام طرد متفجر وهمي', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/321403/', 'summary': 'توقيف قاصر متورط في محاولة سرقة محل بالقنيطرة تحت التهديد باستخدام طرد متفجر وهمي. تمكنت عناصر الفرقة المتنقلة لشرطة النجدة بولاية أمن القنيطرة منتصف نهار اليوم الأربعاء 20 غشت الجاري، من توقيف جانح قاصر يبلغ من العمر 17 سنة، وذلك للاشتباه في تورطه في محاولة السرقة من محل تجاري تحت التهديد باستخدام طرد متفجر وهمي. وحسب المعلومات الأولية للبحث، فقد حاول المشتبه فيه اقتراف سرقة من أحد المحلات التجارية', 'size': 4}, {'id': '175', 'title': 'باستخدام طرد متفجر وهمي.. توقيف قاصر لتورطه في محاولة السرقة من محل تجاري بالقنيطرة', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/473235.html', 'summary': 'باستخدام طرد متفجر وهمي.. توقيف قاصر لتورطه في محاولة السرقة من محل تجاري بالقنيطرة. تمكنت عناصر الفرقة المتنقلة لشرطة النجدة بولاية أمن القنيطرة، منتصف نهار اليوم الأربعاء، من توقيف جانح قاصر يبلغ من العمر 17 سنة، وذلك للاشتباه في تورطه في محاولة السرقة من محل تجاري تحت التهديد باستخدام طرد متفجر وهمي. وذكر مصدر أمني أنه حسب المعلومات الأولية للبحث، فقد حاول المشتبه فيه اقتراف سرقة من أحد المحلات التجارية بواسطة …', 'size': 3}], 'main_title': 'توقيف قاصر متورط في محاولة سرقة محل بالقنيطرة تحت التهديد باستخدام طرد متفجر وهمي'}, {'community_id': '7', 'articles': [{'id': '89', 'title': 'أكادير.. توقيف شخص هاجم جاره وزوجته بالسلاح الأبيض', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/society/411364.html', 'summary': 'أكادير.. توقيف شخص هاجم جاره وزوجته بالسلاح الأبيض. تمكنت عناصر الشرطة بولاية أمن أكادير بتنسيق مع مصالح المديرية العامة لمراقبة التراب الوطني، في ساعة متأخرة من مساء أمس الثلاثاء 19 غشت الجاري، من', 'size': 3}, {'id': '160', 'title': 'أمن أكادير يوقف أربعيني تهجم على جاره بالسلاح الأبيض', 'source': 'rue20.com', 'link': 'https://rue20.com/930037.html', 'summary': 'أمن أكادير يوقف أربعيني تهجم على جاره بالسلاح الأبيض. زنقة20| اكادير تمكنت عناصر الشرطة بولاية أمن أكادير بتنسيق مع مصالح المديرية العامة لمراقبة التراب الوطني، في ساعة متأخرة من مساء أمس الثلاثاء 19 غشت الجاري، من توقيف شخص يبلغ من العمر 41 سنة، من ذوي السوابق القضائية العديدة، وذلك للاشتباه في تورطه في قضية تتعلق بالضرب والجرح باستعمال السلاح الأبيض. وكان المشتبه فيه قد الخبر أمن أكادير يوقف أربعيني تهجم على جاره بالسلاح الأبيض  .', 'size': 2}, {'id': '293', 'title': 'توقيف شخصين بأكادير بحرزتهما أزيد من 7900 قرصا مخدرا', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/321433/', 'summary': 'توقيف شخصين بأكادير بحرزتهما أزيد من 7900 قرصا مخدرا. تمكنت عناصر الشرطة بولاية أمن أكادير بناءً على معلومات دقيقة وفرتها مصالح المديرية العامة لمراقبة التراب الوطني، زوال يوم الأربعاء 20 غشت الجاري، من إيقاف شخصين يبلغان من العمر 48 و64 سنة، وذلك للاشتباه في تورطهما في قضية تتعلق بترويج المخدرات والمؤثرات العقلية. وقد جرى إيقاف المشتبه فيه الأول بمدينة إنزكان، مباشرة بعد وصوله على', 'size': 2}], 'main_title': 'أكادير.. توقيف شخص هاجم جاره وزوجته بالسلاح الأبيض'}, {'community_id': '3', 'articles': [{'id': '105', 'title': 'الملك محمد السادس يصدر عفوه على 591 شخصا بمناسبة عيد الشباب', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/411381.html', 'summary': 'الملك محمد السادس يصدر عفوه على 591 شخصا بمناسبة عيد الشباب. بمناسبة عيد الشباب السعيد لهذه السنة، أصدر صاحب الجلالة الملك محمد السادس، نصره الله، أمره السامي بالعفو على 591 شخصا، منهم المعتقلون ومنهم الموجودون في', 'size': 2}, {'id': '185', 'title': 'عيد الشباب.. الملك يصدر عفوه السامي على 591 شخصا', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d8%b9%d9%8a%d8%af-%d8%a7%d9%84%d8%b4%d8%a8%d8%a7%d8%a8-%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%8a%d8%b5%d8%af%d8%b1-%d8%b9%d9%81%d9%88%d9%87-%d8%a7%d9%84%d8%b3%d8%a7%d9%85%d9%8a-%d8%b9%d9%84%d9%89-591/', 'summary': 'عيد الشباب.. الملك يصدر عفوه السامي على 591 شخصا. بمناسبة عيد الشباب السعيد لهذه السنة، أصدر صاحب الجلالة الملك محمد السادس، نصره الله، أمره السامي بالعفو على 591 شخصا، منهم المعتقلون ومنهم  عيد الشباب.. الملك يصدر عفوه السامي على 591 شخصا     .', 'size': 2}], 'main_title': 'الملك محمد السادس يصدر عفوه على 591 شخصا بمناسبة عيد الشباب'}, {'community_id': '4', 'articles': [{'id': '110', 'title': 'خبير سياسي إسباني: المساعدات الإنسانية الإضافية إلى غزة مبادرة ملكية جديدة تجسد الدعم المتواصل لجلالة الملك للشعب الفلسطيني', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%ae%d8%a8%d9%8a%d8%b1-%d8%b3%d9%8a%d8%a7%d8%b3%d9%8a-%d8%a5%d8%b3%d8%a8%d8%a7%d9%86%d9%8a-%d8%a7%d9%84%d9%85%d8%b3%d8%a7%d8%b9%d8%af%d8%a7%d8%aa-%d8%a7%d9%84%d8%a5%d9%86%d8%b3%d8%a7%d9%86%d9%8a/', 'summary': 'خبير سياسي إسباني: المساعدات الإنسانية الإضافية إلى غزة مبادرة ملكية جديدة تجسد الدعم المتواصل لجلالة الملك للشعب الفلسطيني. أكد الخبير السياسي الإسباني، بيدرو إغناسيو ألتاميرانو، أن إرسال مساعدات إنسانية إضافية لفائدة سكان غزة، بتعليمات سامية من صاحب الجلالة الملك محمد السادس، يمثل “مبادرة ملكية جديدة” تجسد من جديد الدعم المتواصل الذي ما فتئ جلالته يقدمه للشعب الفلسطيني وقضيته العادلة. وأوضح السيد ألتاميرانو، في تصريح لوكالة المغرب العربي للأنباء، أن “المغرب نجح مرة أخرى', 'size': 2}, {'id': '199', 'title': 'خبير سياسي إسباني: المساعدات الإضافية إلى غزة تجسد الدعم المتواصل لجلالة الملك للشعب الفلسطيني', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/226195/', 'summary': 'خبير سياسي إسباني: المساعدات الإضافية إلى غزة تجسد الدعم المتواصل لجلالة الملك للشعب الفلسطيني. مدريد – أكد الخبير السياسي الإسباني، بيدرو إغناسيو ألتاميرانو، أن إرسال مساعدات إنسانية إضافية لفائدة سكان غزة، بتعليمات سامية من صاحب الجلالة الملك محمد السادس، يمثل “مبادرة ملكية جديدة” تجسد من جديد الدعم المتواصل الذي ما فتئ جلالته يقدمه للشعب الفلسطيني وقضيته العادلة. وأوضح السيد ألتاميرانو، في تصريح لوكالة المغرب العربي للأنباء، أن “المغرب نجح', 'size': 2}], 'main_title': 'خبير سياسي إسباني: المساعدات الإنسانية الإضافية إلى غزة مبادرة ملكية جديدة تجسد الدعم المتواصل لجلالة الملك للشعب الفلسطيني'}, {'community_id': '6', 'articles': [{'id': '114', 'title': 'الهجرة غير الشرعية والاتجار بالبشر يطيحان بشخص بفاس', 'source': 'assabah.ma', 'link': 'https://assabah.ma/866426.html', 'summary': 'الهجرة غير الشرعية والاتجار بالبشر يطيحان بشخص بفاس. تمكنت عناصر الفرقة الجهوية للشرطة القضائية بفاس بناء على معلومات وفرتها مصالح المديرية العامة لمراقبة التراب الوطني يوم أمس الثلاثاء 19 غشت الجاري، من توقيف شخص يشتبه في تورطه في تزوير المحررات واستعمالها في إعداد ملفات تأشيرات “شينغن” وتنظيم الهجرة غير الشرعية والاتجار بالبشر. وحسب المعلوماتأكمل القراءة » المقالة الهجرة غير الشرعية والاتجار بالبشر يطيحان بشخص بفاس  .', 'size': 2}, {'id': '217', 'title': 'توقيف شخص بفاس بشبهة تزوير المحررات واستعمالها في إعداد ملفات تأشيرات “شينغن”', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%aa%d9%88%d9%82%d9%8a%d9%81-%d8%b4%d8%ae%d8%b5-%d8%a8%d9%81%d8%a7%d8%b3-%d8%a8%d8%b4%d8%a8%d9%87%d8%a9-%d8%aa%d8%b2%d9%88%d9%8a%d8%b1-%d8%a7%d9%84%d9%85%d8%ad%d8%b1%d8%b1%d8%a7%d8%aa-%d9%88%d8%a7/', 'summary': 'توقيف شخص بفاس بشبهة تزوير المحررات واستعمالها في إعداد ملفات تأشيرات “شينغن”. تمكنت عناصر الفرقة الجهوية للشرطة القضائية بفاس بناءً على معلومات وفرتها مصالح المديرية العامة لمراقبة التراب الوطني، يوم أمس الثلاثاء 19 غشت الجاري، من توقيف شخص يشتبه في تورطه في تزوير المحررات واستعمالها في إعداد ملفات تأشيرات “شينغن” وتنظيم الهجرة غير الشرعية والاتجار بالبشر. وكشفت مصادر أمنية، أنه حسب المعلومات الأولية للبحث، فإن …  توقيف شخص بفاس بشبهة تزوير المحررات واستعمالها في إعداد ملفات تأشيرات “شينغن”     .', 'size': 2}], 'main_title': 'الهجرة غير الشرعية والاتجار بالبشر يطيحان بشخص بفاس'}, {'community_id': '11', 'articles': [{'id': '127', 'title': 'اليابان تجدد التأكيد أمام أشغال قمة “تيكاد-9”  على عدم اعترافها بالكيان الانفصالي', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/321391/', 'summary': 'اليابان تجدد التأكيد أمام أشغال قمة “تيكاد-9” على عدم اعترافها بالكيان الانفصالي. في رسالة قوية وواضحة إلى إفريقيا والأمم المتحدة، جددت اليابان، اليوم الأربعاء 20 غشت، وللمرة الثالثة في ظرف يومين، موقفها الثابت بعدم اعترافها بالكيان الانفصالي، وذلك خلال افتتاح قمة المؤتمر الدولي لطوكيو حول التنمية بإفريقيا (تيكاد-9). وفي افتتاح هذه القمة، وتمهيدا لبدء أشغالها، أدلى وزير الشؤون الخارجية الياباني تاكيشي إيوايا بتصريح رسمي باسم حكومته، ليؤكد', 'size': 2}, {'id': '205', 'title': 'في قمة “تيكاد” (TICAD) طوكيو تصفع عصابة السوء', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/226181/', 'summary': 'في قمة “تيكاد” (TICAD) طوكيو تصفع عصابة السوء. سليم الهواري في رسالة قوية وواضحة إلى إفريقيا والأمم المتحدة، جددت اليابان، اليوم الأربعاء، وللمرة الثالثة في ظرف يومين موقفها الثابت بعدم اعترافها بشرذمة البوليساريو، وذلك خلال افتتاح قمة المؤتمر الدولي لطوكيو حول التنمية بإفريقيا “تيكاد-9”.، ويأتي هذا التأكيد الياباني للمرة الثالثة غداة تصريح مماثل أدلى به إيوايا أمس الثلاثاء خلال الاجتماع الوزاري الافتتاحي، والذي', 'size': 2}], 'main_title': 'اليابان تجدد التأكيد أمام أشغال قمة “تيكاد-9”  على عدم اعترافها بالكيان الانفصالي'}, {'community_id': '8', 'articles': [{'id': '164', 'title': 'السفيرة الأمريكية بالجزائر تدعو “نظام الجنرالات” إلى تحقيق تقدم لحل قضية الصحراء', 'source': 'rue20.com', 'link': 'https://rue20.com/930024.html', 'summary': 'السفيرة الأمريكية بالجزائر تدعو “نظام الجنرالات” إلى تحقيق تقدم لحل قضية الصحراء.  | الرباط في مؤتمر صحفي عقدته اليوم الأربعاء بمقر السفارة الأمريكية في الجزائر العاصمة، أكدت السفيرة الأمريكية لدى الجزائر، إليزابيث مور أوبين، موقف بلادها الداعم لإيجاد حل سلمي ودائم لقضية الصحراء المغربية، مشددة على أهمية الحوار بين مختلف الأطراف المعنية. وقالت أوبين إن “النزاع في الصحراء الغربية مستمر منذ أكثر من خمسين عامًا”، الخبر السفيرة الأمريكية بالجزائر تدعو “نظام الجنرالات” إلى تحقيق تقدم لحل قضية الصحراء  .', 'size': 2}, {'id': '302', 'title': 'إدارة ترامب توجه خطابا للجزائر بشأن الصحراء', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-585881.html', 'summary': 'إدارة ترامب توجه خطابا للجزائر بشأن الصحراء. ط.غ أكدت السفيرة الأمريكية بالجزائر إليزابيث مور أوبين على التزام بلادها بدعم حل سلمي ودائم لقضية الصحراء المغربية، معتبرة أن الحوار بين الأطراف المعنية هو السبيل الأمثل للخروج من هذا النزاع المستمر منذ عقود. وأضافت أوبين ندوة صحفية عقدتها الأربعاء بمقر السفارة الأمريكية في الجزائر العاصمة، أن هذا النزاع', 'size': 2}], 'main_title': 'السفيرة الأمريكية بالجزائر تدعو “نظام الجنرالات” إلى تحقيق تقدم لحل قضية الصحراء'}, {'community_id': '9', 'articles': [{'id': '268', 'title': 'بعد ساعات من رسالته المؤثرة.. وفاة القاضي "الرحيم" فرانك كابريو', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/last/411392.html', 'summary': 'بعد ساعات من رسالته المؤثرة.. وفاة القاضي "الرحيم" فرانك كابريو. غيب الموت القاضي الأميركي فرانك كابريو، المعروف بلقب "القاضي الرحيم"، عن عمر ناهز 88 عاماً بعد صراع طويل مع سرطان البنكرياس، وفق ما أعلنت عائلته', 'size': 2}, {'id': '304', 'title': 'وفاة “القاضي الرحيم” فرانك كابريو', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-585875.html', 'summary': 'وفاة “القاضي الرحيم” فرانك كابريو. توفي القاضي الأمريكي فرانك كابريو المعروف بلقب (القاضي الرحيم) مساء الأربعاء عن عمر ناهز 88 عاما بعد معاناة طويلة مع مرض سرطان البنكرياس. وقال بيان نشر عبر حساب يحمل اسمه إن القاضي كابريو فارق الحياة بسلام بعد صمود طويل أمام المرض تاركا إرثا إنسانيا في مجال العدالة. وكان القاضي الراحل', 'size': 3}, {'id': '325', 'title': 'وفاة “القاضي الرحيم” فرانك كابريو بعد صراع مع المرض', 'source': 'rue20.com', 'link': 'https://rue20.com/930109.html', 'summary': 'وفاة “القاضي الرحيم” فرانك كابريو بعد صراع مع المرض.  / وكالات توفي أمس الأربعاء، القاضي الأمريكي الشهير فرانك كابريو، الشهير بـ”القاضي الرحيم”، عن عمر ناهز 88 عاماً، بعد صراع طويل مع سرطان البنكرياس. وأصدرت عائلة كابريو بياناً عبر صفحته الرسمية على “فيسبوك”، لتأكيد نبأ وفاته، الذي جاء بعد ساعات من نشره مقطع فيديو يطلب فيه الدعاء بعد تدهور حالته الصحية. وقال بيان الخبر وفاة “القاضي الرحيم” فرانك كابريو بعد صراع مع المرض  .', 'size': 2}], 'main_title': 'وفاة “القاضي الرحيم” فرانك كابريو'}, {'community_id': '0', 'articles': [{'id': '283', 'title': 'بعد أشهر من الإصلاحات.. مركب الأمير مولاي عبد الله يفتح أبوابه بمباراة المغرب والنيجر', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a8%d8%b9%d8%af-%d8%a3%d8%b4%d9%87%d8%b1-%d9%85%d9%86-%d8%a7%d9%84%d8%a5%d8%b5%d9%84%d8%a7%d8%ad%d8%a7%d8%aa-%d9%85%d8%b1%d9%83%d8%a8-%d8%a7%d9%84%d8%a3%d9%85%d9%8a%d8%b1-%d9%85%d9%88%d9%84%d8%a7/', 'summary': 'بعد أشهر من الإصلاحات.. مركب الأمير مولاي عبد الله يفتح أبوابه بمباراة المغرب والنيجر. بعد أشهر من إغلاقه بسبب الإصلاحات، يعود مركب الأمير مولاي عبد الله لفتح أبوابه من جديد في وجه الجماهير المغربية، حيث أعلنت الجامعة الملكية المغربية لكرة القدم عن احتضانه لمباراة المنتخب الوطني ضد نظيره النيجيري، برسم تصفيات إفريقيا المؤهلة لنهائيات كأس العالم 2026. وسيكون المجمع الرياضي الأمير مولاي عبد الله بمدينة الرباط، يوم الجمعة 5', 'size': 3}, {'id': '311', 'title': 'رسميا.. المنتخب الوطني يواجه النيجر بالمجمع الرياضي الأمير مولاي عبد الله', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1094081.html', 'summary': 'رسميا.. المنتخب الوطني يواجه النيجر بالمجمع الرياضي الأمير مولاي عبد الله. أعلنت الجامعة الملكية المغربية لكرة القدم، صباح يومه الخميس، أن المنتخب الوطني المغربي سيخوض مباراته المقبلة أمام منتخب النيجر، يوم الجمعة 5 شتنبر 2025، بالمجمع الرياضي الأمير مولاي عبد الله بمدينة الرباط، ابتداء من الساعة الثامنة مساءً. وأكدت الجامعة أن هذه المواجهة التي تدخل في إطار التصفيات الأفريقية المؤهلة إلى نهائيات كأس العالم 2026، ستقام ظهرت المقالة رسميا.. المنتخب الوطني يواجه النيجر بالمجمع الرياضي الأمير مولاي عبد الله  .', 'size': 3}, {'id': '326', 'title': 'رسمياً.. ملعب مولاي عبد الله يستقبل مباراة المغرب و النيجر', 'source': 'rue20.com', 'link': 'https://rue20.com/930099.html', 'summary': 'رسمياً.. ملعب مولاي عبد الله يستقبل مباراة المغرب و النيجر.  / الرباط أعلنت الجامعة الملكية المغربية لكرة القدم رسمياً أن المجمع الرياضي الأمير مولاي عبد الله بمدينة الرباط، سيحتضن مباراة المنتخب الوطني المغربي أمام منتخب النيجر، يوم الجمعة 5 شتنبر 2025، انطلاقًا من الساعة الثامنة مساءً، ضمن تصفيات أفريقيا المؤهلة لنهائيات كأس العالم 2026 و أعلنت اللجنة المنظمة للمباراة، عن فتح باب الاعتمادات الخبر رسمياً.. ملعب مولاي عبد الله يستقبل مباراة المغرب و النيجر  .', 'size': 3}], 'main_title': 'بعد أشهر من الإصلاحات.. مركب الأمير مولاي عبد الله يفتح أبوابه بمباراة المغرب والنيجر'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    