<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 12/09/2025 - 06h17</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '59', 'title': 'سلا.. السلاح الوظيفي للأمن ينهي حياة أربعيني هدد المواطنين بسكين', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-656183.html', 'summary': 'سلا.. السلاح الوظيفي للأمن ينهي حياة أربعيني هدد المواطنين بسكين. هبة بريس اضطر عناصر الفرقة القضائية التابعة لمنطقة أمن العيايدة ب سلا، مساء الأربعاء 10 شتنبر الجاري، إلى استعمال أسلحتهم الوظيفية خلال تدخل أمني لإيقاف رجل يبلغ من العمر 40 سنة، من ذوي السوابق القضائية المتعددة، كان في حالة غير طبيعية وأبدى مقاومة عنيفة، معرّضًا عناصر الشرطة لاعتداء خطير بواسطة سلاح أبيض. وحسب معطيات البحث، فإن المشتبه فيه كان يحدث الفوضى بالشارع العام ويهدد سلامة المواطنين وممتلكاتهم بسكين من الحجم الكبير. وعند تدخل الدورية الأمنية لمواجهته، قاوم بشكل عنيف وتسبب في إصابة أحد عناصر الشرطة بجرح على مستوى ذراعه. الأمر دفع مفتشين للشرطة إلى استعمال أسلحتهما الوظيفية، حيث أُطلقت عيارات تحذيرية، ثم أخرى أصابت المشتبه فيه. وقد جرى نقله على وجه السرعة إلى المستشفى بواسطة سيارة إسعاف، غير أنه فارق الحياة متأثراً بإصابته. في المقابل، تلقى موظف الشرطة المصاب الإسعافات الضرورية. هذا، وتواصل الشرطة القضائية أبحاثها تحت إشراف النيابة العامة المختصة، قصد الكشف عن جميع ملابسات وظروف هذه الواقعة.', 'size': 2}, {'id': '141', 'title': 'عيارات نارية لتوقيف أربعيني هاجم الأمن بسلا', 'source': 'assabah.ma', 'link': 'https://assabah.ma/870358.html', 'summary': 'عيارات نارية لتوقيف أربعيني هاجم الأمن بسلا. اضطر عناصر فرقة الشرطة القضائية بمنطقة أمن العيايدة بمدينة سلا لاستعمال أسلحتهم الوظيفية، مساء اليوم الأربعاء 10 شتنبر الجاري، خلال تدخل أمني لإيقاف شخص يبلغ من العمر 40 سنة، من ذوي السوابق القضائية العديدة، والذي كان في حالة غير طبيعية واندفاع قوي وعرض عناصر الشرطة لاعتداء جديأكمل القراءة » المقالة عيارات نارية لتوقيف أربعيني هاجم الأمن بسلا  .', 'size': 2}, {'id': '245', 'title': 'بعد اعتدائه على شرطي بساطور.. مصرع مجرم خطير برصاص الشرطة في مدينة سلا', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/226880/', 'summary': 'بعد اعتدائه على شرطي بساطور.. مصرع مجرم خطير برصاص الشرطة في مدينة سلا. اضطر عناصر فرقة الشرطة القضائية بمنطقة أمن العيايدة بمدينة سلا لاستعمال أسلحتهم الوظيفية، مساء اليوم الأربعاء 10 شتنبر الجاري، وذلك خلال تدخل أمني لإيقاف شخص يبلغ من العمر 40 سنة، من ذوي السوابق القضائية العديدة، والذي كان في حالة غير طبيعية واندفاع قوي وعرض عناصر الشرطة لاعتداء جدي وخطير باستعمال السلاح الأبيض. وتشير المعطيات الخاصة', 'size': 3}], 'main_title': 'بعد اعتدائه على شرطي بساطور.. مصرع مجرم خطير برصاص الشرطة في مدينة سلا'}, {'community_id': '12', 'articles': [{'id': '63', 'title': 'التحقيق في ملف النصب باسم مسؤولين', 'source': 'www.alakhbar.press.ma', 'link': 'https://www.alakhbar.press.ma/%d8%a7%d9%84%d8%aa%d8%ad%d9%82%d9%8a%d9%82-%d9%81%d9%8a-%d9%85%d9%84%d9%81-%d8%a7%d9%84%d9%86%d8%b5%d8%a8-%d8%a8%d8%a7%d8%b3%d9%85-%d9%85%d8%b3%d8%a4%d9%88%d9%84%d9%8a%d9%86-272803.html', 'summary': 'التحقيق في ملف النصب باسم مسؤولين. النعمان اليعلاوي تواصل النيابة العامة بالمحكمة الابتدائية بسلا أبحاثها في ملف النصب والاحتيال الذي هزّ منطقة أولاد العياشي بالجماعة الترابية السهول، والذي يتابع فيه متهم رئيسي بتكوين شبكة استهدفت مستثمرين وذوي حقوق، بعد أن أوهمهم بقدرته على التدخل في ملفات عقارية عالقة داخل عمالة سلا. وبحسب معطيات حصلت عليها «الأخبار»، فإن الضابطة القضائية وضعت …  التحقيق في ملف النصب باسم مسؤولين     .', 'size': 2}, {'id': '234', 'title': 'سلا.. التحقيق في ملف نصب واحتيال باسم مسؤولين', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d8%b3%d9%84%d8%a7-%d8%a7%d9%84%d8%aa%d8%ad%d9%82%d9%8a%d9%82-%d9%81%d9%8a-%d9%85%d9%84%d9%81-%d9%86%d8%b5%d8%a8-%d9%88%d8%a7%d8%ad%d8%aa%d9%8a%d8%a7%d9%84-%d8%a8%d8%a7%d8%b3%d9%85-%d9%85%d8%b3/', 'summary': 'سلا.. التحقيق في ملف نصب واحتيال باسم مسؤولين.  – متابعات تواصل النيابة العامة بالمحكمة الابتدائية بسلا أبحاثها في ملف النصب والاحتيال الذي هز منطقة أولاد العياشي بالجماعة الترابية السهول، والذي يتابع فيه متهم رئيسي بتكوين شبكة...  سلا.. التحقيق في ملف نصب واحتيال باسم مسؤولين     .', 'size': 2}], 'main_title': 'التحقيق في ملف النصب باسم مسؤولين'}, {'community_id': '2', 'articles': [{'id': '94', 'title': 'تقرير رسمي يفضح كل المستور.. إسرائيل تضخ في خزينة الجزائر أزيد من 32 مليار دولار في سنة واحدة', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/politic/412544.html', 'summary': 'تقرير رسمي يفضح كل المستور.. إسرائيل تضخ في خزينة الجزائر أزيد من 32 مليار دولار في سنة واحدة. في مشهد فضح من جديد ازدواجية مواقف نظام الجزائري، كشفت بيانات حديثة للأمم المتحدة الصادرة عن قاعدة "COMTRADE" الخاصة بالتجارة الدولية، أن الجزائر صدّرت إلى', 'size': 2}, {'id': '260', 'title': 'أرقام أممية تفضح نفاق نظام العسكر.. صادرات جزائرية إلى إسرائيل تتجاوز 32 مليون دولار في 2024', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a3%d8%b1%d9%82%d8%a7%d9%85-%d8%a3%d9%85%d9%85%d9%8a%d8%a9-%d8%aa%d9%81%d8%b6%d8%ad-%d9%86%d9%81%d8%a7%d9%82-%d9%86%d8%b8%d8%a7%d9%85-%d8%a7%d9%84%d8%b9%d8%b3%d9%83%d8%b1-%d8%b5%d8%a7%d8%af%d8%b1/', 'summary': 'أرقام أممية تفضح نفاق نظام العسكر.. صادرات جزائرية إلى إسرائيل تتجاوز 32 مليون دولار في 2024. أظهرت معطيات تجارية حديثة صادرة عن قاعدة “COMTRADE” التابعة للأمم المتحدة أن قيمة الواردات الإسرائيلية من الجزائر بلغت خلال سنة 2024 ما يزيد عن 32 مليون دولار أمريكي، حيث جرى نشر هذه الأرقام في شتنبر 2025 ضمن التحديث الدوري للبيانات الأممية، وهو ما أعاد فتح النقاش حول قنوات العبور التجارية والآليات التي تسمح …  أرقام أممية تفضح نفاق نظام العسكر.. صادرات جزائرية إلى إسرائيل تتجاوز 32 مليون دولار في 2024     .', 'size': 2}], 'main_title': 'تقرير رسمي يفضح كل المستور.. إسرائيل تضخ في خزينة الجزائر أزيد من 32 مليار دولار في سنة واحدة'}, {'community_id': '11', 'articles': [{'id': '126', 'title': 'في موقف حازم.. المغرب يرفض التصريحات الإسرائيلية حول احتلال غزة وترحيل الفلسطينيين ويصفها ب"الخطيرة والمرفوضة"', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/world/412579.html', 'summary': 'في موقف حازم.. المغرب يرفض التصريحات الإسرائيلية حول احتلال غزة وترحيل الفلسطينيين ويصفها ب"الخطيرة والمرفوضة". أكد وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج، ناصر بوريطة، اليوم الخميس بالرباط، أن المغرب يعتبر التصريحات بشأن احتلال قطاع غزة وترحيل الفلسطينيين منه', 'size': 2}, {'id': '221', 'title': 'بوريطة: التصريحات بشأن احتلال قطاع غزة وترحيل الفلسطينيين منه خطيرة ومرفوضة', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d8%a8%d9%88%d8%b1%d9%8a%d8%b7%d8%a9-%d8%a7%d9%84%d8%aa%d8%b5%d8%b1%d9%8a%d8%ad%d8%a7%d8%aa-%d8%a8%d8%b4%d8%a3%d9%86-%d8%a7%d8%ad%d8%aa%d9%84%d8%a7%d9%84-%d9%82%d8%b7%d8%a7%d8%b9-%d8%ba%d8%b2%d8%a9/', 'summary': 'بوريطة: التصريحات بشأن احتلال قطاع غزة وترحيل الفلسطينيين منه خطيرة ومرفوضة. أكد وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج، ناصر بوريطة، اليوم الخميس بالرباط، أن المغرب يعتبر التصريحات بشأن احتلال قطاع غزة  بوريطة: التصريحات بشأن احتلال قطاع غزة وترحيل الفلسطينيين منه خطيرة ومرفوضة     .', 'size': 2}], 'main_title': 'في موقف حازم.. المغرب يرفض التصريحات الإسرائيلية حول احتلال غزة وترحيل الفلسطينيين ويصفها ب"الخطيرة والمرفوضة"'}, {'community_id': '10', 'articles': [{'id': '134', 'title': 'تعديل قوانين الانتخابات.. الاستقلال يطالب بمنح دعم مالي للأحزاب التي ترشح أشخاصا في وضعية إعاقة', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%aa%d8%b9%d8%af%d9%8a%d9%84-%d9%82%d9%88%d8%a7%d9%86%d9%8a%d9%86-%d8%a7%d9%84%d8%a7%d9%86%d8%aa%d8%ae%d8%a7%d8%a8%d8%a7%d8%aa-%d8%a7%d9%84%d8%a7%d8%b3%d8%aa%d9%82%d9%84%d8%a7%d9%84-%d9%8a%d8%b7/', 'summary': 'تعديل قوانين الانتخابات.. الاستقلال يطالب بمنح دعم مالي للأحزاب التي ترشح أشخاصا في وضعية إعاقة. اقترح حزب الاستقلال دعم المشاركة السياسية للأشخاص في وضعية إعاقة في الانتخابات التشريعية المقبلة، ليس فقط كناخبين، ولكن دعم ترشيحهم في الانتخابات. جاء ذلك في مذكرة الحزب المتعلقة بالمنظومة العامة المؤطرة للانتخابات التشريعية، التي قدمها إلى وزارة الداخلية نهاية شهر غشت الماضي. وتضمنت مذكرة الحزب تقديم دعم مالي إضافي للأحزاب التي ترشح الأشخاص في وضعية', 'size': 2}, {'id': '218', 'title': 'حزب الاستقلال يقدم مذكرة للفتيت لتفعيل المشاركة السياسية للأشخاص في وضعية إعاقة', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/475093.html', 'summary': 'حزب الاستقلال يقدم مذكرة للفتيت لتفعيل المشاركة السياسية للأشخاص في وضعية إعاقة. قدم حزب الاستقلال مذكرته المتعلقة بالمنظومة العامة المؤطرة للانتخابات التشريعية إلى وزارة الداخلية، وقد تميزت باقتراح دعم مشاركة الأشخاص في وضعية إعاقة في الانتخابات التشريعية المقبلة، ليس فقط كناخبين، ولك كذلك دعم ترشيحهم في الانتخابات. وأوضح حزب الاستقلال في مذكرته لوزارة الداخلية حيث اقترح في هذا الصدد، إحداث فرع جديد في القانون التنظيمي المتعلق بمجلس …', 'size': 2}], 'main_title': 'تعديل قوانين الانتخابات.. الاستقلال يطالب بمنح دعم مالي للأحزاب التي ترشح أشخاصا في وضعية إعاقة'}, {'community_id': '1', 'articles': [{'id': '135', 'title': 'بالصور.. افتتاح المحطة السككية الجديدة لمدينة تازة', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a8%d8%a7%d9%84%d8%b5%d9%88%d8%b1-%d8%a7%d9%81%d8%aa%d8%aa%d8%a7%d8%ad-%d8%a7%d9%84%d9%85%d8%ad%d8%b7%d8%a9-%d8%a7%d9%84%d8%b3%d9%83%d9%83%d9%8a%d8%a9-%d8%a7%d9%84%d8%ac%d8%af%d9%8a%d8%af%d8%a9/', 'summary': 'بالصور.. افتتاح المحطة السككية الجديدة لمدينة تازة. أشرف عبد الصمد قيوح، وزير النقل واللوجستيك، إلى جانب السيد محمد ربيع الخليع، المدير العام للمكتب الوطني للسكك الحديدية، اليوم الخميس (11 شتنبر)، على تدشين المحطة السككية الجديدة لمدينة تازة، في إطار مشروع هيكلي يندرج ضمن استراتيجية المكتب الرامية إلى تحديث المحطات وإعادة تأهيل الفضاءات السككية. وأفاد بلاغ للوزارة، أنه وبفضل موقعها المتميز بالقرب من', 'size': 3}, {'id': '261', 'title': 'الوزير قيوح ولخليع يُشرفان على افتتاح المحطة السككية الجديدة لمدينة تازة', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d9%88%d8%b2%d9%8a%d8%b1-%d9%82%d9%8a%d9%88%d8%ad-%d9%88%d9%84%d8%ae%d9%84%d9%8a%d8%b9-%d9%8a%d9%8f%d8%b4%d8%b1%d9%81%d8%a7%d9%86-%d8%b9%d9%84%d9%89-%d8%a7%d9%81%d8%aa%d8%aa%d8%a7%d8%ad/', 'summary': 'الوزير قيوح ولخليع يُشرفان على افتتاح المحطة السككية الجديدة لمدينة تازة. أشرف عبد الصمد قيوح، وزير النقل واللوجستيك، إلى جانب محمد ربيع الخليع، المدير العام للمكتب الوطني للسكك الحديدية، يومه الخميس 11 شتنبر 2025، على تدشين المحطة السككية الجديدة لمدينة تازة، في إطار مشروع هيكلي يندرج ضمن استراتيجية المكتب الرامية إلى تحديث المحطات وإعادة تأهيل الفضاءات السككية. وحسب بلاغ للمكتب الوطني للسكك الحديدية، فإنه …  الوزير قيوح ولخليع يُشرفان على افتتاح المحطة السككية الجديدة لمدينة تازة     .', 'size': 3}, {'id': '433', 'title': 'افتتاح المحطة السككية الجديدة لمدينة تازة باستثمار إجمالي يناهز 50 مليون درهم', 'source': 'rue20.com', 'link': 'https://rue20.com/935614.html', 'summary': 'افتتاح المحطة السككية الجديدة لمدينة تازة باستثمار إجمالي يناهز 50 مليون درهم. . الرباط أشرف وزير النقل واللوجستيك، عبد الصمد قيوح، والمدير العام للمكتب الوطني للسكك الحديدية، محمد ربيع الخليع، اليوم الخميس، على تدشين المحطة السككية الجديدة لمدينة تازة التي كلف إنجازها غلافا ماليا إجماليا قدره 50 مليون درهم. وتندرج المحطة الجديدة، التي افتتحت بحضور عامل إقليم تازة مصطفى المعزة، في إطار مشروع هيكلي يندرج الخبر افتتاح المحطة السككية الجديدة لمدينة تازة باستثمار إجمالي يناهز 50 مليون درهم  .', 'size': 3}], 'main_title': 'بالصور.. افتتاح المحطة السككية الجديدة لمدينة تازة'}, {'community_id': '9', 'articles': [{'id': '187', 'title': 'الحكومة تسحب “مندوبية حقوق الإنسان” من وهبي وتلحقها بأخنوش', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1098882.html', 'summary': 'الحكومة تسحب “مندوبية حقوق الإنسان” من وهبي وتلحقها بأخنوش. صادق مجلس الحكومة، خلال اجتماعه الأسبوعي اليوم الخميس 11 شتنبر 2025، على المرسوم المتعلق بإعادة تنظيم وهيكلة المندوبية الوزارية المكلفة بحقوق الإنسان، وإلحاقها برئاسة الحكومة، بعدما كانت في السابق تابعة لوزارة العدل. وأوضح مصطفى بايتاس، الوزير المنتدب المكلف بالعلاقات مع البرلمان والناطق الرسمي باسم الحكومة، أن المرسوم يهدف إلى تعزيز مكانة المندوبية كآلية وزارية مرجعية ظهرت المقالة الحكومة تسحب “مندوبية حقوق الإنسان” من وهبي وتلحقها بأخنوش  .', 'size': 2}, {'id': '208', 'title': 'الحكومة تسحب ملف حقوق الإنسان من وزارة العدل.. إعادة تموقع وتوسيع المهام', 'source': 'rue20.com', 'link': 'https://rue20.com/935496.html', 'summary': 'الحكومة تسحب ملف حقوق الإنسان من وزارة العدل.. إعادة تموقع وتوسيع المهام.  ا الرباط صادق مجلس الحكومة، خلال اجتماعه الأسبوعي يوم الخميس 11 شتنبر 2025، على المرسوم المتعلق بإعادة تنظيم وهيكلة المندوبية الوزارية المكلفة بحقوق الإنسان وإلحاقها برئاسة الحكومة، بعدما كانت تابعة سابقًا لوزارة العدل. وأوضح مصطفى بايتاس، الوزير المنتدب المكلف بالعلاقات مع البرلمان والناطق الرسمي باسم الحكومة، أن الهدف من هذا المرسوم هو تعزيز الخبر الحكومة تسحب ملف حقوق الإنسان من وزارة العدل.. إعادة تموقع وتوسيع المهام  .', 'size': 2}], 'main_title': 'الحكومة تسحب “مندوبية حقوق الإنسان” من وهبي وتلحقها بأخنوش'}, {'community_id': '8', 'articles': [{'id': '205', 'title': 'المفوضة الأوروبية للمتوسط: المغرب فاعل رئيسي وشريك متميز', 'source': 'rue20.com', 'link': 'https://rue20.com/935520.html', 'summary': 'المفوضة الأوروبية للمتوسط: المغرب فاعل رئيسي وشريك متميز.  ا الرباط أكدت المفوضة الأوروبية المكلفة بمنطقة البحر الأبيض المتوسط، دوبرافكا شويسا، يوم الخميس بالرباط، أن المغرب يُعد شريكًا متميزًا للاتحاد الأوروبي. وأوضحت اشويسا، في تصريح لها عقب محادثات مع وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج، ناصر بوريطة، أجريت قبيل انطلاق “الخلية التأملية رفيعة المستوى حول مستقبل العلاقات الأورو-متوسطية”، أن المملكة الخبر المفوضة الأوروبية للمتوسط: المغرب فاعل رئيسي وشريك متميز  .', 'size': 2}, {'id': '397', 'title': 'الاتحاد الأوروبي يشيد بالمغرب: شريك استراتيجي ونموذج يحتذى به في المتوسط', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/323113/', 'summary': 'الاتحاد الأوروبي يشيد بالمغرب: شريك استراتيجي ونموذج يحتذى به في المتوسط. أكدت المفوضة الأوروبية المكلفة بشؤون البحر الأبيض المتوسط دوبرافكا شويكا، اليوم الخميس بالرباط، أن المغرب يعد شريكا متميزا للاتحاد الأوروبي. وأبرزت شويكا، عقب مباحثات مع وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج، ناصر بوريطة، قبيل “خلوة رفيعة المستوى حول مستقبل العلاقات الأورو-متوسطية”، أن المملكة تشكل “نموذجا” يحتذى به في المنطقة. وشكلت هذه المحادثات مناسبة', 'size': 3}, {'id': '443', 'title': 'المفوضة الأوروبية المكلفة بشؤون المتوسط: المغرب يعد شريكا متميزا للاتحاد الأوروبي', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/475112.html', 'summary': 'المفوضة الأوروبية المكلفة بشؤون المتوسط: المغرب يعد شريكا متميزا للاتحاد الأوروبي. و.م.ع أكدت المفوضة الأوروبية المكلفة بشؤون البحر الأبيض المتوسط دوبرافكا شويكا، اليوم الخميس بالرباط، أن المغرب يعد شريكا متميزا للاتحاد الأوروبي. وأبرزت شويكا، عقب مباحثات مع وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج، ناصر بوريطة، قبيل “خلوة رفيعة المستوى حول مستقبل العلاقات الأورو-متوسطية”، أن المملكة تشكل “نموذجا” يحتذى به في المنطقة. وشكلت هذه المحادثات …', 'size': 2}], 'main_title': 'الاتحاد الأوروبي يشيد بالمغرب: شريك استراتيجي ونموذج يحتذى به في المتوسط'}, {'community_id': '6', 'articles': [{'id': '241', 'title': 'هل نجح أخنوش في إقناع المغاربة بحصيلة 4 سنوات من حكومته؟', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/226891/', 'summary': 'هل نجح أخنوش في إقناع المغاربة بحصيلة 4 سنوات من حكومته؟. قضى رئيس الحكومة المغربية عزيز أخنوش ساعة ونصف كاملة في خرجة إعلامية على القناتين الأولى والثانية، من دون أن يتمكن من إقناع المغاربة بجدوى ما يعتبرها إصلاحات أنجزتها حكومته خلال أربع سنوات. الخطاب الطويل، الذي جاء متأخراً وفي ظرفية سياسية حساسة، لم يقدم للمغاربة أي معطى ملموس يمكن أن يبدد حالة الاستياء المتصاعدة من', 'size': 2}, {'id': '404', 'title': 'أما بعد.. خرجة أخنوش الإعلامية بين الضرورة التواصلية والتسخينات الانتخابية', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1099037.html', 'summary': 'أما بعد.. خرجة أخنوش الإعلامية بين الضرورة التواصلية والتسخينات الانتخابية. في خرجة إعلامية لافتة، اختار رئيس الحكومة عزيز أخنوش أن يخاطب الرأي العام المغربي عبر القناتين العموميتين، في حوار تميز بطابعه السياسي المباشر، وتوقيته المحسوب بدقة. ظهور أثار موجة من التفاعل، تراوحت بين من اعتبره ضرورة تواصلية تندرج ضمن مهام رجل دولة مسؤول، وبين من رآه خطوة استباقية ذات خلفية انتخابية مبطنة، في سياق سياسي ظهرت المقالة أما بعد.. خرجة أخنوش الإعلامية بين الضرورة التواصلية والتسخينات الانتخابية  .', 'size': 2}], 'main_title': 'هل نجح أخنوش في إقناع المغاربة بحصيلة 4 سنوات من حكومته؟'}, {'community_id': '3', 'articles': [{'id': '253', 'title': 'مهنيو وخبراء النقل واللوجستيك يجتمعون في الدار البيضاء', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d9%85%d9%87%d9%86%d9%8a%d9%88-%d9%88%d8%ae%d8%a8%d8%b1%d8%a7%d8%a1-%d8%a7%d9%84%d9%86%d9%82%d9%84-%d9%88%d8%a7%d9%84%d9%84%d9%88%d8%ac%d8%b3%d8%aa%d9%8a%d9%83-%d9%8a%d8%ac%d8%aa%d9%85%d8%b9%d9%88/', 'summary': 'مهنيو وخبراء النقل واللوجستيك يجتمعون في الدار البيضاء. المساء اليوم – الدار البيضاء: تستضيف مدينة الدار البيضاء، في الفترة من 16 إلى 18 أكتوبر المقبل، النسخة الثانية من المنتدى والمعرض الدولي للنقل والتنقل واللوجستيك (2025 LOGITERRE)، المنظمة تحت شعار “تعزيز الربط القاري من', 'size': 2}, {'id': '396', 'title': 'الدار البيضاء بين رهانات التنمية وصراعات المجلس.. الأنظار تتجه إلى دورة أكتوبر', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/323107/', 'summary': 'الدار البيضاء بين رهانات التنمية وصراعات المجلس.. الأنظار تتجه إلى دورة أكتوبر. تترقب العاصمة الاقتصادية بشغف وحذر انعقاد دورة أكتوبر المقبلة لمجلس جماعة الدار البيضاء، والتي ستخصص للمصادقة على مشروع الميزانية. الدورة المنتظرة لا تكتسي أهمية مالية فقط، بل تحمل أيضًا أبعادًا سياسية وتنموية بالغة الحساسية، في ظل ظرفية دقيقة تطبعها التجاذبات بين مكونات التحالف المسير، والضغوط المتزايدة من قبل المنتخبين والساكنة على حد سواء. وتجد العمدة', 'size': 2}], 'main_title': 'مهنيو وخبراء النقل واللوجستيك يجتمعون في الدار البيضاء'}, {'community_id': '4', 'articles': [{'id': '305', 'title': '"تحقيقات عقارية" تطيح بعامل إنزكان', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d8%aa%d8%ad%d9%82%d9%8a%d9%82%d8%a7%d8%aa-%d8%b9%d9%82%d8%a7%d8%b1%d9%8a%d8%a9-%d8%aa%d8%b7%d9%8a%d8%ad-%d8%a8%d8%b9%d8%a7%d9%85%d9%84-%d8%a5%d9%86%d8%b2%d9%83%d8%a7%d9%86-1622715.html', 'summary': '"تحقيقات عقارية" تطيح بعامل إنزكان. قررت وزارة الداخلية، يوم الخميس، توقيف عامل عمالة إنزكان آيت ملول، إسماعيل أبو الحقوق، عن مزاولة مهامه، وإلحاقه بالوزارة دون مهمة، وذلك على خلفية نتائج تحقيقات باشرتها لجنة ثلاثية حلت قبل أيام قليلة بمقر العمالة. ووفقًا للمعطيات الأولية المتوفرة، فقد سلطت اللجنة الضوء على ملفات عقارية واستثمارات مثيرة للجدل محليًا، شابتها شبهات تضارب المصالح واستغلال  "تحقيقات عقارية" تطيح بعامل إنزكان     - هسبريس جريدة إلكترونية مغربية .', 'size': 2}, {'id': '399', 'title': 'الداخلية تعفي عامل إنزكان آيت ملول ومصدر يرجح ارتباط القرار بملف عقاري مشبوه', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1099046.html', 'summary': 'الداخلية تعفي عامل إنزكان آيت ملول ومصدر يرجح ارتباط القرار بملف عقاري مشبوه. أفاد مصدر مطلع أن وزارة الداخلية قررت إعفاء عامل عمالة إنزكان آيت ملول، إسماعيل أبو الحقوق، من مهامه وإلحاقه بالإدارة المركزية. وفي الوقت الذي لم يصدر فيه أي بلاغ رسمي من الجهات المعنية يوضح خلفيات هذا الإعفاء، رجّح المصدر ذاته أن يكون القرار مرتبطا بملف عقاري مثير للجدل، يتعلق بتفويت عقار عمومي كان مخصصا لبناء ظهرت المقالة الداخلية تعفي عامل إنزكان آيت ملول ومصدر يرجح ارتباط القرار بملف عقاري مشبوه  .', 'size': 2}, {'id': '431', 'title': 'تضارب المصالح واستغلال النفوذ يعصف بعامل إنزكان', 'source': 'rue20.com', 'link': 'https://rue20.com/935628.html', 'summary': 'تضارب المصالح واستغلال النفوذ يعصف بعامل إنزكان.  . الرباط أوقفت وزارة الداخلية، إسماعيل أبو الحقوق من مهامه كعامل عمالة إنزكان آيت ملول، في قرار مفاجئ أثار اهتمام الرأي العام المحلي. ويأتي هذا القرار بعد أيام من تواجد لجنة وزارية في مقر العمالة للتحقيق في ملفات حساسة. وكشف التحقيق عن شبهة تضارب المصالح واستغلال النفوذ في صفقة عقارية مثيرة للجدل، كانت الخبر تضارب المصالح واستغلال النفوذ يعصف بعامل إنزكان  .', 'size': 3}], 'main_title': 'تضارب المصالح واستغلال النفوذ يعصف بعامل إنزكان'}, {'community_id': '5', 'articles': [{'id': '400', 'title': 'في أسوأ موسم هجرة.. سواحل سبتة تتحول إلى مقبرة أطفال ولاعبين حالمين بـ”الفردوس الأوروبي”', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1098818.html', 'summary': 'في أسوأ موسم هجرة.. سواحل سبتة تتحول إلى مقبرة أطفال ولاعبين حالمين بـ”الفردوس الأوروبي”. تسجيل أزيد من 30 حالة وفاة منذ بداية 2025 وعائلات تبحث عن ذويها ظهرت المقالة في أسوأ موسم هجرة.. سواحل سبتة تتحول إلى مقبرة أطفال ولاعبين حالمين بـ”الفردوس الأوروبي”  .', 'size': 2}, {'id': '425', 'title': 'دفعة جديدة من الشبان المفقودين بعد محاولة الهجرة سباحة نحو سبتة المحتلة', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%af%d9%81%d8%b9%d8%a9-%d8%ac%d8%af%d9%8a%d8%af%d8%a9-%d9%85%d9%86-%d8%a7%d9%84%d8%b4%d8%a8%d8%a7%d9%86-%d8%a7%d9%84%d9%85%d9%81%d9%82%d9%88%d8%af%d9%8a%d9%86-%d8%a8%d8%b9%d8%af-%d9%85%d8%ad%d8%a7/', 'summary': 'دفعة جديدة من الشبان المفقودين بعد محاولة الهجرة سباحة نحو سبتة المحتلة. تواصل مآسي الهجرة غير النظامية على الحدود المغربية–الإسبانية حصد ضحايا جدد، حيث أطلقت عدة عائلات مغربية نداءات استغاثة للبحث عن أبنائها الذين اختفوا منذ أيام، بعدما غامروا بعبور البحر سباحة في اتجاه مدينة سبتة. وتأتي هذه النداءات وسط أجواء من القلق بعد العثور مؤخراً على جثث عدد من الشبان الذين حاولوا العبور بالطريقة نفسها، ما  دفعة جديدة من الشبان المفقودين بعد محاولة الهجرة سباحة نحو سبتة المحتلة     .', 'size': 2}], 'main_title': 'في أسوأ موسم هجرة.. سواحل سبتة تتحول إلى مقبرة أطفال ولاعبين حالمين بـ”الفردوس الأوروبي”'}, {'community_id': '13', 'articles': [{'id': '402', 'title': 'وثيقة رسمية تكشف مبايعة منير القادري لأخيه معاذ شيخا للزاوية البودشيشية', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1099041.html', 'summary': 'وثيقة رسمية تكشف مبايعة منير القادري لأخيه معاذ شيخا للزاوية البودشيشية. كشفت وثيقة تتوفر جريدة “العمق” على نسخة منها، مبايعة منير القادري لأخيه معاذ في مهمته شيخا للطريقة القادرية اليوتشيشية، وهنأنه على توليه هذه المهمة التي وصفها بـ”المهمة الإحسانية المباركة”. وبحسب الوثيقة الموقعة بتاريخ 27 غشت 2025، أي بعد 19 يوما من وفاة الشيخ حمزة بودشيش، فإن منير أقر بتولي أخيه معاذ خلافة والده حمزة، وهنأه ظهرت المقالة وثيقة رسمية تكشف مبايعة منير القادري لأخيه معاذ شيخا للزاوية البودشيشية  .', 'size': 2}, {'id': '423', 'title': 'وثيقة رسمية.. منير يلتزم بالتعاون مع شقيقه معاذ شيخ الزاوية البودشيشية', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d9%88%d8%ab%d9%8a%d9%82%d8%a9-%d8%b1%d8%b3%d9%85%d9%8a%d8%a9-%d9%85%d9%86%d9%8a%d8%b1-%d9%8a%d9%84%d8%aa%d8%b2%d9%85-%d8%a8%d8%a7%d9%84%d8%aa%d8%b9%d8%a7%d9%88%d9%86-%d9%85%d8%b9-%d8%b4%d9%82%d9%8a/', 'summary': 'وثيقة رسمية.. منير يلتزم بالتعاون مع شقيقه معاذ شيخ الزاوية البودشيشية. أفادت مصادر مطلعة أن منير القادري بودشيش وقّع بتاريخ 27 غشت المنصرم وثيقة يقرّ فيها بمشيخة شقيقه معاذ القادري بودشيش، غير أن الإعلان الرسمي عن هذه الخطوة ظل مؤجلاً إلى غاية اليوم، ما أثار تساؤلات حول أسباب هذا التأخر. الوثيقة الموقعة باسم منير القادري، والمتداولة داخل الزاوية، أكدت دعمه لمشيخة شقيقه معاذ، مشددة على أن  وثيقة رسمية.. منير يلتزم بالتعاون مع شقيقه معاذ شيخ الزاوية البودشيشية     .', 'size': 3}, {'id': '456', 'title': 'وثيقة “تحسم الجدل” بشأن مشيخة البودشيشية', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d8%a7%d9%84%d8%b2%d8%a7%d9%88%d9%8a%d8%a9-%d8%a7%d9%84%d8%a8%d9%88%d8%af%d8%b4%d9%8a%d8%b4%d9%8a%d8%a9-%d9%85%d9%86%d9%8a%d8%b1-%d9%8a%d8%aa%d9%86%d8%a7%d8%b2%d9%84-%d9%84%d9%85%d8%b9%d8%a7%d8%b0/', 'summary': 'وثيقة “تحسم الجدل” بشأن مشيخة البودشيشية.  – متابعات كشفت وثيقة موقعة باسم منير القادري بودشيش، بتاريخ 27 غشت الماضي، عن تنازله الرسمي عن مشيخة الطريقة القادرية البودشيشية لصالح أخيه معاذ القادري بودشيش، في خطوة...  وثيقة “تحسم الجدل” بشأن مشيخة البودشيشية     .', 'size': 2}], 'main_title': 'وثيقة رسمية.. منير يلتزم بالتعاون مع شقيقه معاذ شيخ الزاوية البودشيشية'}, {'community_id': '7', 'articles': [{'id': '418', 'title': 'بنعبد الله يهاجم أخنوش بعد مروره الإعلامي: "خطاب أجوف وتناقض صارخ مع الواقع"', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a8%d9%86%d8%b9%d8%a8%d8%af-%d8%a7%d9%84%d9%84%d9%87-%d9%8a%d9%87%d8%a7%d8%ac%d9%85-%d8%b1%d8%a6%d9%8a%d8%b3-%d8%a7%d9%84%d8%ad%d9%83%d9%88%d9%85%d8%a9-%d8%a8%d8%b9%d8%af-%d9%85%d8%b1%d9%88%d8%b1/', 'summary': 'بنعبد الله يهاجم أخنوش بعد مروره الإعلامي: "خطاب أجوف وتناقض صارخ مع الواقع". وجّه نبيل بنعبد الله، الأمين العام لحزب التقدم والاشتراكية، انتقادات لاذعة لرئيس الحكومة عزيز أخنوش، عقب المقابلة التلفزيونية التي بُثّت مساء أمس على القنوات العمومية، معتبرا أنها لم تحمل أي جديد وجاءت "مخيبة للآمال". خطاب "أجوف" في تدوينة نشرها على صفحاته بمواقع التواصل الاجتماعي، وصف بنعبد الله مرور رئيس الحكومة الإعلامي بـ"الأجوف"، قائلا إنه  بنعبد الله يهاجم أخنوش بعد مروره الإعلامي: "خطاب أجوف وتناقض صارخ مع الواقع"     .', 'size': 2}, {'id': '444', 'title': 'نبيل بنعبد الله يهاجم اللقاء الإعلامي لرئيس الحكومة أخنوش', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d9%86%d8%a8%d9%8a%d9%84-%d8%a8%d9%86%d8%b9%d8%a8%d8%af-%d8%a7%d9%84%d9%84%d9%87-%d9%8a%d9%87%d8%a7%d8%ac%d9%85-%d8%a7%d9%84%d9%84%d9%82%d8%a7%d8%a1-%d8%a7%d9%84%d8%a5%d8%b9%d9%84%d8%a7%d9%85%d9%8a/', 'summary': 'نبيل بنعبد الله يهاجم اللقاء الإعلامي لرئيس الحكومة أخنوش. هاجم الأمين العام لحزب التقدم والاشتراكية نبيل بنعبد الله اللقاء الإعلامي لرئيس الحكومة عزيز أخنوش الذي تم عرضه على القناتين الأولى والثانية ليلة الأربعاء،  نبيل بنعبد الله يهاجم اللقاء الإعلامي لرئيس الحكومة أخنوش     .', 'size': 2}], 'main_title': 'بنعبد الله يهاجم أخنوش بعد مروره الإعلامي: "خطاب أجوف وتناقض صارخ مع الواقع"'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    