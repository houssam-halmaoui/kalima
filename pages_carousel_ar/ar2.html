<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 16/09/2025 - 12h25</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '68', 'title': 'القمة العربية الإسلامية الطارئة بالدوحة تؤكد دعمها لدور لجنة القدس برئاسة صاحب الجلالة الملك محمد السادس', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/206249', 'summary': 'القمة العربية الإسلامية الطارئة بالدوحة تؤكد دعمها لدور لجنة القدس برئاسة صاحب الجلالة الملك محمد السادس.  أعربت القمة العربية الإسلامية الطارئة، المنعقدة اليوم الاثنين بالدوحة، عن دعمها لدور لجنة القدس برئاسة صاحب الجلالة الملك محمد السادس، نصره الله. وأكد ملوك ورؤساء الدول الإسلامية والعربية، في قرار صادر عن القمة، دعمهم للجنة القدس برئاسة صاحب الجلالة الملك محمد السادس، وذراعها التنفيذي وكالة بيت مال القدس الشريف، مشددين على ضرورة العمل', 'size': 5}, {'id': '108', 'title': 'قمة الدوحة تؤكد دعمها لدور لجنة القدس برئاسة الملك محمد السادس', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/politic/412809.html', 'summary': 'قمة الدوحة تؤكد دعمها لدور لجنة القدس برئاسة الملك محمد السادس. أعربت القمة العربية الإسلامية الطارئة، المنعقدة اليوم الاثنين بالدوحة، عن دعمها لدور لجنة القدس برئاسة صاحب الجلالة الملك محمد السادس، نصره الله.وأكد ملوك ورؤساء الدول', 'size': 3}, {'id': '142', 'title': 'القمة العربية الإسلامية بالدوحة تجدد دعمها للجنة القدس برئاسة الملك محمد السادس', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/323461/', 'summary': 'القمة العربية الإسلامية بالدوحة تجدد دعمها للجنة القدس برئاسة الملك محمد السادس. أعربت القمة العربية الإسلامية الطارئة، المنعقدة اليوم الاثنين بالدوحة، عن دعمها لدور لجنة القدس برئاسة صاحب الجلالة الملك محمد السادس، نصره الله. وأكد ملوك ورؤساء الدول الإسلامية والعربية، في قرار صادر عن القمة، دعمهم للجنة القدس برئاسة صاحب الجلالة الملك محمد السادس، وذراعها التنفيذي وكالة بيت مال القدس الشريف، مشددين على ضرورة العمل على تثبيت', 'size': 5}, {'id': '193', 'title': 'القمة العربية الإسلامية الطارئة تؤكد دعمها لدور لجنة القدس برئاسة الملك محمد السادس', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/475496.html', 'summary': 'القمة العربية الإسلامية الطارئة تؤكد دعمها لدور لجنة القدس برئاسة الملك محمد السادس. و.م.ع أعربت القمة العربية الإسلامية الطارئة، المنعقدة اليوم الاثنين بالدوحة، عن دعمها لدور لجنة القدس برئاسة الملك محمد السادس. وأكد ملوك ورؤساء الدول الإسلامية والعربية، في قرار صادر عن القمة، دعمهم للجنة القدس برئاسة الملك محمد السادس، وذراعها التنفيذي وكالة بيت مال القدس الشريف، مشددين على ضرورة العمل على تثبيت المقدسيين على أرضهم. ومثل الملك …', 'size': 4}, {'id': '242', 'title': 'القمة العربية الإسلامية الطارئة بالدوحة تؤكد دعمها لدور لجنة القدس برئاسة الملك محمد السادس', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d9%82%d9%85%d8%a9-%d8%a7%d9%84%d8%b9%d8%b1%d8%a8%d9%8a%d8%a9-%d8%a7%d9%84%d8%a5%d8%b3%d9%84%d8%a7%d9%85%d9%8a%d8%a9-%d8%a7%d9%84%d8%b7%d8%a7%d8%b1%d8%a6%d8%a9-%d8%a8%d8%a7%d9%84%d8%af/', 'summary': 'القمة العربية الإسلامية الطارئة بالدوحة تؤكد دعمها لدور لجنة القدس برئاسة الملك محمد السادس. أعربت القمة العربية الإسلامية الطارئة، المنعقدة اليوم الإثنين 15 شتنبر بالدوحة، عن دعمها لدور لجنة القدس برئاسة الملك محمد السادس. وأكد ملوك ورؤساء الدول الإسلامية والعربية، في قرار صادر عن القمة، دعمهم للجنة القدس برئاسة الملك محمد السادس، وذراعها التنفيذي وكالة بيت مال القدس الشريف، مشددين على ضرورة العمل على تثبيت المقدسيين على …  القمة العربية الإسلامية الطارئة بالدوحة تؤكد دعمها لدور لجنة القدس برئاسة الملك محمد السادس     .', 'size': 4}], 'main_title': 'القمة العربية الإسلامية الطارئة بالدوحة تؤكد دعمها لدور لجنة القدس برئاسة صاحب الجلالة الملك محمد السادس'}, {'community_id': '3', 'articles': [{'id': '76', 'title': 'الأمير مولاي رشيد يحل بالدوحة لتمثيل جلالة الملك في القمة العربية الإسلامية الطارئة', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/politic/412773.html', 'summary': 'الأمير مولاي رشيد يحل بالدوحة لتمثيل جلالة الملك في القمة العربية الإسلامية الطارئة. حل صاحب السمو الملكي الأمير مولاي رشيد، اليوم الاثنين بالدوحة، لتمثيل صاحب الجلالة الملك محمد السادس، نصره الله، في أشغال القمة العربية - الإسلامية الطارئة،', 'size': 2}, {'id': '265', 'title': 'مولاي رشيد يمثل جلالة الملك في القمة العربية الإسلامية الطارئة بالدوحة', 'source': 'www.alalam.ma', 'link': 'https://www.alalam.ma/مولاي-رشيد-يمثل-جلالة-الملك-في-القمة-العربية-الإسلامية-الطارئة_a29514.html', 'summary': 'مولاي رشيد يمثل جلالة الملك في القمة العربية الإسلامية الطارئة بالدوحة.  حل صاحب السمو الملكي الأمير مولاي رشيد، اليوم الاثنين بالدوحة، لتمثيل صاحب الجلالة الملك محمد السادس، نصره الله، في أشغا...', 'size': 2}], 'main_title': 'الأمير مولاي رشيد يحل بالدوحة لتمثيل جلالة الملك في القمة العربية الإسلامية الطارئة'}, {'community_id': '11', 'articles': [{'id': '80', 'title': 'الاتحاد العربي لكرة القدم يجدد الثقة في رئيس الجامعة المغربية فوزي لقجع', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/sport/worldfoot/412778.html', 'summary': 'الاتحاد العربي لكرة القدم يجدد الثقة في رئيس الجامعة المغربية فوزي لقجع. أعيد انتخاب "فوزي لقجع"، رئيس الجامعة الملكية المغربية لكرة القدم، عضواً بالتزكية في المجلس التنفيذي للاتحاد العربي لكرة القدم، خلال الجمعية العمومية الـ28 التي انعقدت', 'size': 2}, {'id': '396', 'title': 'إعادة انتخاب لقجع عضوا بالمجلس التنفيذي للاتحاد العربي لكرة القدم', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%a5%d8%b9%d8%a7%d8%af%d8%a9-%d8%a7%d9%86%d8%aa%d8%ae%d8%a7%d8%a8-%d9%81%d9%88%d8%b2%d9%8a-%d9%84%d9%82%d8%ac%d8%b9/', 'summary': 'إعادة انتخاب لقجع عضوا بالمجلس التنفيذي للاتحاد العربي لكرة القدم. المساء اليوم: أعيد انتخاب فوزي لقجع، رئيس الجامعة الملكية المغربية لكرة القدم، عضوا بالتزكية في المجلس التنفيذي للاتحاد العربي لكرة القدم. جاء ذلك خلال أشغال الجمعية العمومية الـ28 للاتحاد العربي لكرة القدم، التي انعقدت أمس', 'size': 2}], 'main_title': 'الاتحاد العربي لكرة القدم يجدد الثقة في رئيس الجامعة المغربية فوزي لقجع'}, {'community_id': '1', 'articles': [{'id': '84', 'title': 'أكادير.. انتحار ضابط شرطة ممتاز بسلاحه الوظيفي داخل منزله', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/society/412783.html', 'summary': 'أكادير.. انتحار ضابط شرطة ممتاز بسلاحه الوظيفي داخل منزله. فتحت ولاية أمن أكادير بحثا قضائيًا تحت إشراف النيابة العامة المختصة، صباح اليوم الاثنين 15 شتنبر الجاري، وذلك للكشف عن جميع ظروف وملابسات ودوافع إقدام', 'size': 2}, {'id': '227', 'title': 'أكادير: فتح بحث قضائي في انتحار ضابط شرطة ممتاز بسلاحه الوظيفي', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/227060/', 'summary': 'أكادير: فتح بحث قضائي في انتحار ضابط شرطة ممتاز بسلاحه الوظيفي. فتحت ولاية أمن أكادير بحثا قضائيًا تحت إشراف النيابة العامة المختصة، صباح اليوم الاثنين 15 شتنبر الجاري، وذلك للكشف عن جميع ظروف وملابسات ودوافع إقدام موظف شرطة برتبة ضابط شرطة ممتاز، على وضع حد لحياته بواسطة سلاحه الوظيفي. وحسب المعاينات المكانية والخبرات الباليستية المنجزة، فقد تم العثور على جثة الشرطي الهالك داخل منزله بالحي المحمدي', 'size': 2}], 'main_title': 'أكادير.. انتحار ضابط شرطة ممتاز بسلاحه الوظيفي داخل منزله'}, {'community_id': '7', 'articles': [{'id': '96', 'title': 'أكرد خارج قائمة مارسيليا لموقعة ريال مدريد', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/sport/proplayers/412797.html', 'summary': 'أكرد خارج قائمة مارسيليا لموقعة ريال مدريد. كشفت الصحافة الفرنسية عن غياب الدولي المغربي نايف أكرد، مدافع أولمبيك مارسيليا، عن القمة المنتظرة أمام ريال مدريد في دوري أبطال أوروبا، بعد تعرضه لإصابة', 'size': 2}, {'id': '139', 'title': 'ارتجاج في المخ يبعد نجم الأسود عن قمة أوروبية', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/323458/', 'summary': 'ارتجاج في المخ يبعد نجم الأسود عن قمة أوروبية. تلقى أولمبيك مارسيليا الفرنسي ضربة موجعة قبل مواجهته المرتقبة أمام ريال مدريد في افتتاح دور المجموعات من دوري أبطال أوروبا، بعدما تأكد غياب المدافع الدولي المغربي نايف أكرد عن اللقاء بداعي إصابة على مستوى الرأس تستوجب الخضوع لبروتوكول طبي صارم. ويغيب المدافع المغربي عن رحلة الفريق إلى العاصمة الإسبانية، حيث سيبقى في مارسيليا تحت مراقبة', 'size': 2}], 'main_title': 'أكرد خارج قائمة مارسيليا لموقعة ريال مدريد'}, {'community_id': '2', 'articles': [{'id': '107', 'title': 'تفاصيل أجندة مجلس الحكومة الخميس المقبل', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/412808.html', 'summary': 'تفاصيل أجندة مجلس الحكومة الخميس المقبل. ينعقد الخميس المقبل مجلس للحكومة برئاسة عزيز أخنوش، رئيس الحكومة. وذكر بلاغ لرئاسة الحكومة أن المجلس سيتدارس في بدايته مشروع قانون يقضي بتغيير وتتميم القانون المتعلق', 'size': 2}, {'id': '237', 'title': 'انعقاد مجلس للحكومة يوم الخميس المقبل', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%86%d8%b9%d9%82%d8%a7%d8%af-%d9%85%d8%ac%d9%84%d8%b3-%d9%84%d9%84%d8%ad%d9%83%d9%88%d9%85%d8%a9-%d9%8a%d9%88%d9%85-%d8%a7%d9%84%d8%ae%d9%85%d9%8a%d8%b3-%d8%a7%d9%84%d9%85%d9%82%d8%a8%d9%84-9/', 'summary': 'انعقاد مجلس للحكومة يوم الخميس المقبل. ينعقد الخميس المقبل مجلس للحكومة برئاسة عزيز أخنوش، رئيس الحكومة، حيث سيتدارس المجلس في بدايته مشروع قانون يقضي بتغيير وتتميم القانون المتعلق بمؤسسات الائتمان والهيآت المعتبرة في حكمها والقانون المتعلق بالقانون الأساسي لبنك المغرب. وذكر بلاغ لرئاسة الحكومة، أن المجلس سيواصل أشغاله بدراسة مشروعي مرسومين يتعلق الأول منهما بتغيير وتتميم المرسوم الصادر في …  انعقاد مجلس للحكومة يوم الخميس المقبل     .', 'size': 2}], 'main_title': 'تفاصيل أجندة مجلس الحكومة الخميس المقبل'}, {'community_id': '9', 'articles': [{'id': '144', 'title': 'عضو كونغرس أمريكي: المغرب حليف تاريخي وركيزة للاستقرار في شمال إفريقيا', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/323454/', 'summary': 'عضو كونغرس أمريكي: المغرب حليف تاريخي وركيزة للاستقرار في شمال إفريقيا. أكد عضو الكونغرس الأمريكي، مايك لولر، أن المغرب يعد “حليفا تاريخيا” و”شريكا موثوقا” للولايات المتحدة في شمال إفريقيا والشرق الأوسط، داعيا إلى توطيد التحالف الاستثنائي القائم بين الرباط وواشنطن منذ سنة 1777. وفي مقال رأي حمل توقيع السيد لولر ونشرته جريدة (دايلي نيوز) الأمريكية تحت عنوان “التحالفات في الخارج تضمن أمننا الداخلي”، أكد عضو الكونغرس', 'size': 3}, {'id': '197', 'title': 'عضو بالكونغرس الأمريكي: المغرب حليف تاريخي وشريك موثوق للولايات المتحدة في منطقة الشرق الأوسط وشمال إفريقيا', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/475481.html', 'summary': 'عضو بالكونغرس الأمريكي: المغرب حليف تاريخي وشريك موثوق للولايات المتحدة في منطقة الشرق الأوسط وشمال إفريقيا. أكد عضو الكونغرس الأمريكي، مايك لولر، أن المغرب يعد حليفا تاريخيا وشريكا موثوقا للولايات المتحدة في شمال إفريقيا والشرق الأوسط، داعيا إلى توطيد التحالف الاستثنائي القائم بين الرباط وواشنطن منذ سنة 1777.', 'size': 2}, {'id': '224', 'title': 'عضو بالكونغرس الأمريكي: المغرب حليف تاريخي وشريك موثوق للولايات المتحدة في الشرق الأوسط وشمال إفريقيا', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/227067/', 'summary': 'عضو بالكونغرس الأمريكي: المغرب حليف تاريخي وشريك موثوق للولايات المتحدة في الشرق الأوسط وشمال إفريقيا. واشنطن – أكد عضو الكونغرس الأمريكي، مايك لولر، أن المغرب يعد “حليفا تاريخيا” و”شريكا موثوقا” للولايات المتحدة في شمال إفريقيا والشرق الأوسط، داعيا إلى توطيد التحالف الاستثنائي القائم بين الرباط وواشنطن منذ سنة 1777. وفي مقال رأي حمل توقيع السيد لولر ونشرته جريدة (دايلي نيوز) الأمريكية تحت عنوان “التحالفات في الخارج تضمن أمننا الداخلي”، أكد', 'size': 4}, {'id': '244', 'title': 'عضو من الكونغرس الأمريكي: المغرب يعد “حليفا تاريخيا” و”شريكا موثوقا” للولايات المتحدة', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%b9%d8%b6%d9%88-%d9%85%d9%86-%d8%a7%d9%84%d9%83%d9%88%d9%86%d8%ba%d8%b1%d8%b3-%d8%a7%d9%84%d8%a3%d9%85%d8%b1%d9%8a%d9%83%d9%8a-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d9%8a%d8%b9%d8%af/', 'summary': 'عضو من الكونغرس الأمريكي: المغرب يعد “حليفا تاريخيا” و”شريكا موثوقا” للولايات المتحدة. أكد عضو الكونغرس الأمريكي، مايك لولر، أن المغرب يعد “حليفا تاريخيا” و”شريكا موثوقا” للولايات المتحدة في شمال إفريقيا والشرق الأوسط، داعيا إلى توطيد التحالف الاستثنائي القائم بين الرباط وواشنطن منذ سنة 1777. وفي مقال رأي حمل توقيع لولر ونشرته جريدة (دايلي نيوز) الأمريكية تحت عنوان “التحالفات في الخارج تضمن أمننا الداخلي”، أكد عضو …  عضو من الكونغرس الأمريكي: المغرب يعد “حليفا تاريخيا” و”شريكا موثوقا” للولايات المتحدة     .', 'size': 3}], 'main_title': 'عضو بالكونغرس الأمريكي: المغرب حليف تاريخي وشريك موثوق للولايات المتحدة في الشرق الأوسط وشمال إفريقيا'}, {'community_id': '10', 'articles': [{'id': '145', 'title': 'بنعبدالله يعلن ترشح مايسة سلامة بألوان التقدم والاشتراكية في انتخابات 2026', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1100094.html', 'summary': 'بنعبدالله يعلن ترشح مايسة سلامة بألوان التقدم والاشتراكية في انتخابات 2026. أعلن الأمين العام لحزب التقدم والاشتراكية، محمد نبيل بنعبد الله، عن ترحيبه برغبة مايسة سلامة الناجي في خوض الانتخابات التشريعية المقبلة تحت لواء الحزب. وأوضح بنعبد الله ضمن تدوينة على حسابه بموقع “فيسبوك”، أن هذه الخطوة تعكس المكانة التي بات يحظى بها الحزب كقوة جاذبة تحظى بالاحترام والتقدير، مشيراً إلى أن الناجي تتمتع بتأثير واسع ظهرت المقالة بنعبدالله يعلن ترشح مايسة سلامة بألوان التقدم والاشتراكية في انتخابات 2026  .', 'size': 3}, {'id': '165', 'title': 'بنعبد الله يرحب بانضمام الناشطة مايسة إلى حزبه تمهيدا لترشحها في انتخابات 2026', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a8%d9%86%d8%b9%d8%a8%d8%af-%d8%a7%d9%84%d9%84%d9%87-%d9%8a%d8%b1%d8%ad%d8%a8-%d8%a8%d8%a7%d9%86%d8%b6%d9%85%d8%a7%d9%85-%d8%a7%d9%84%d9%86%d8%a7%d8%b4%d8%b7%d8%a9-%d9%85%d8%a7%d9%8a%d8%b3%d8%a9/', 'summary': 'بنعبد الله يرحب بانضمام الناشطة مايسة إلى حزبه تمهيدا لترشحها في انتخابات 2026. أعلن الأمين العام لحزب التقدم والاشتراكية، محمد نبيل بنعبد الله، ترحيب حزبه بانضمام الإعلامية والناشطة مايسة سلامة الناجي إلى صفوفه، مؤكدا رغبتها في الترشح للانتخابات التشريعية المقبلة تحت لواء الحزب. وأكد بنعبد الله، في إعلان نشر على صفحات الحزب، أن هذه الخطوة "تعزز ما يشكله اليوم حزب التقدم والاشتراكية من قوة جاذبة وما يحظى به  بنعبد الله يرحب بانضمام الناشطة مايسة إلى حزبه تمهيدا لترشحها في انتخابات 2026     .', 'size': 2}, {'id': '384', 'title': 'مايسة سلامة الناجي تختار الحزب الذي ستترشح باسمه خلال انتخابات 2026', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d9%87%d8%b0%d8%a7-%d9%87%d9%88-%d8%a7%d9%84%d8%ad%d8%b2%d8%a8-%d8%a7%d9%84%d8%b0%d9%8a-%d8%b3%d8%aa%d8%aa%d8%b1%d8%b4%d8%ad-%d8%a8%d9%87-%d8%a7%d9%84%d9%86%d8%a7%d8%b4%d8%b7%d8%a9-%d9%85%d8%a7%d9%8a/', 'summary': 'مايسة سلامة الناجي تختار الحزب الذي ستترشح باسمه خلال انتخابات 2026. -متابعات رحب نبيل بنعبد الله، الأمين العام لحزب التقدم والاشتراكية، برغبة “السيدة مايسة سلامة الناجي في الترشح للانتخابات التشريعية المقبلة مع الحزب”. وتابع بنعبد الله في منشور له على...  مايسة سلامة الناجي تختار الحزب الذي ستترشح باسمه خلال انتخابات 2026     .', 'size': 2}], 'main_title': 'بنعبدالله يعلن ترشح مايسة سلامة بألوان التقدم والاشتراكية في انتخابات 2026'}, {'community_id': '4', 'articles': [{'id': '186', 'title': 'وزير الصحة يتدخل للتكفل بـ”رضيعة أكادير” ونقلها إلى المستشفى الجامعي', 'source': 'rue20.com', 'link': 'https://rue20.com/936627.html', 'summary': 'وزير الصحة يتدخل للتكفل بـ”رضيعة أكادير” ونقلها إلى المستشفى الجامعي.  | متابعة علم موقع Rue20 ، أن وزير الصحة أمين التهراوي، تدخل للتكفل بطفلة رضيعة لا يتجاوز عمرها ثلاثة أشهر ، ظهرت خلال الاحتجاجات العارمة التي خاضها سكان مدينة أكادير أمس الأحد تعبيرا عن استيائهم من تردي الوضع الصحي في المستشفى الجهوي. ووفق مصادرنا، فإن الوزير التهراوي ربط الإتصال بعائلة الرضيعة قصد نقلها الخبر وزير الصحة يتدخل للتكفل بـ”رضيعة أكادير” ونقلها إلى المستشفى الجامعي  .', 'size': 2}, {'id': '342', 'title': 'وزير الصحة يتفقد مستشفى أكادير بعد احتجاجات منددة بتدهور خدماته (فيديو)', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1100121.html', 'summary': 'وزير الصحة يتفقد مستشفى أكادير بعد احتجاجات منددة بتدهور خدماته (فيديو). قام وزير الصحة والحماية الاجتماعية، أمين التهراوي، صباح اليوم الثلاثاء 16 شتنبر الجاري، بزيارة تفقدية للمستشفى الجهوي الحسن الثاني بأكادير، وذلك عقب الوقفة الاحتجاجية التي نظمها مئات المواطنين يوم الأحد الماضي للتنديد بتردي الخدمات الصحية بالمؤسسة. وكانت فعاليات مدنية وحقوقية قد نبهت إلى “اختلالات” خطيرة بالمستشفى، مؤكدة من خلال شهادات مواطنين على تراجع جودة الخدمات ظهرت المقالة وزير الصحة يتفقد مستشفى أكادير بعد احتجاجات منددة بتدهور خدماته (فيديو)  .', 'size': 3}, {'id': '380', 'title': 'وزير الصحة يحل بمستشى أكادير بعد احتجاجات الساكنة (صورة)', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d9%88%d8%b2%d9%8a%d8%b1-%d8%a7%d9%84%d8%b5%d8%ad%d8%a9-%d9%8a%d8%ad%d9%84-%d8%a8%d9%85%d8%b3%d8%aa%d8%b4%d9%89-%d8%a3%d9%83%d8%a7%d8%af%d9%8a%d8%b1-%d8%a8%d8%b9%d8%af-%d8%a7%d8%ad%d8%aa%d8%ac%d8%a7/', 'summary': 'وزير الصحة يحل بمستشى أكادير بعد احتجاجات الساكنة (صورة). وزير الصحة يحل بمستشى أكادير بعد احتجاجات الساكنة (صورة) -متابعات حل وزير الصحة، أمين التهراوي، صباح اليوم الثلاثاء بالمستشفى الجهوي الحسن الثاني بأكادير بعد الوقفة الاحتجاجية التي نظمها المئات...  وزير الصحة يحل بمستشى أكادير بعد احتجاجات الساكنة (صورة)     .', 'size': 2}], 'main_title': 'وزير الصحة يتفقد مستشفى أكادير بعد احتجاجات منددة بتدهور خدماته (فيديو)'}, {'community_id': '5', 'articles': [{'id': '290', 'title': 'نشرة إنذارية: زخات رعدية قوية مصحوبة بهبات رياح بهذه المناطق', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-657697.html', 'summary': 'نشرة إنذارية: زخات رعدية قوية مصحوبة بهبات رياح بهذه المناطق. هبة بريس أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب، تسجيل زخات رعدية محليا قوية مصحوبة بهبات رياح، اليوم الثلاثاء بعدد من مناطق المملكة. وأوضحت المديرية، في نشرة إنذارية من مستوى يقظة “برتقالي”، أنه من المرتقب تسجيل زخات رعدية محليا قوية (من 20 إلى 30 ملم) مصحوبة بهبات رياح، بعمالات وأقاليم ورزازات، تنغير، زاكورة، وأوسرد، اليوم الثلاثاء من الساعة الثانية بعد الزوال إلى الحادية عشرة ليلا.', 'size': 3}, {'id': '357', 'title': 'نشرة إنذارية. أمطار رعدية ورياح قوية بهذه المدن اليوم الثلاثاء', 'source': 'rue20.com', 'link': 'https://rue20.com/936816.html', 'summary': 'نشرة إنذارية. أمطار رعدية ورياح قوية بهذه المدن اليوم الثلاثاء. . الرباط أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب، تسجيل زخات رعدية محليا قوية مصحوبة بهبات رياح، اليوم الثلاثاء بعدد من مناطق المملكة. وأوضحت المديرية، في نشرة إنذارية من مستوى يقظة “برتقالي”، أنه من المرتقب تسجيل زخات رعدية محليا قوية (من 20 إلى 30 ملم) مصحوبة بهبات رياح، بعمالات وأقاليم ورزازات، تنغير، زاكورة، وأوسرد، الخبر نشرة إنذارية. أمطار رعدية ورياح قوية بهذه المدن اليوم الثلاثاء  .', 'size': 3}, {'id': '398', 'title': 'نشرة انذارية: زخات رعدية ورياح قوية في عدد من أقاليم المملكة', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d9%86%d8%b4%d8%b1%d8%a9-%d8%a7%d9%86%d8%b0%d8%a7%d8%b1%d9%8a%d8%a9-%d8%b2%d8%ae%d8%a7%d8%aa-%d8%b1%d8%b9%d8%af%d9%8a%d8%a9-%d9%88%d8%b1%d9%8a%d8%a7%d8%ad-%d9%82%d9%88%d9%8a%d8%a9-%d9%81%d9%8a-%d8%b9/', 'summary': 'نشرة انذارية: زخات رعدية ورياح قوية في عدد من أقاليم المملكة. أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب، تسجيل زخات رعدية محليا قوية مصحوبة بهبات رياح، اليوم الثلاثاء بعدد من مناطق المملكة. وأوضحت المديرية، في نشرة إنذارية من مستوى يقظة “برتقالي”، أنه من المرتقب تسجيل زخات رعدية محليا قوية (من 20 إلى 30 ملم) مصحوبة بهبات رياح، بعمالات وأقاليم ورزازات، تنغير، زاكورة، وأوسرد، اليوم …  نشرة انذارية: زخات رعدية ورياح قوية في عدد من أقاليم المملكة     .', 'size': 3}], 'main_title': 'نشرة إنذارية: زخات رعدية قوية مصحوبة بهبات رياح بهذه المناطق'}, {'community_id': '6', 'articles': [{'id': '315', 'title': 'نشرة إنذارية: زخات رعدية ورياح مرتقبة اليوم الثلاثاء بعدد من مناطق المملكة', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/412831.html', 'summary': 'نشرة إنذارية: زخات رعدية ورياح مرتقبة اليوم الثلاثاء بعدد من مناطق المملكة. أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب، تسجيل زخات رعدية محليا قوية مصحوبة بهبات رياح، اليوم الثلاثاء بعدد من مناطق المملكة. وأوضحت المديرية، في نشرة إنذارية', 'size': 2}, {'id': '367', 'title': 'اليوم الثلاثاء.. زخات رعدية محليا قوية مصحوبة بهبات رياح', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/475603.html', 'summary': 'اليوم الثلاثاء.. زخات رعدية محليا قوية مصحوبة بهبات رياح. أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب، تسجيل زخات رعدية محليا قوية مصحوبة بهبات رياح، اليوم الثلاثاء بعدد من مناطق المملكة.', 'size': 2}], 'main_title': 'نشرة إنذارية: زخات رعدية ورياح مرتقبة اليوم الثلاثاء بعدد من مناطق المملكة'}, {'community_id': '8', 'articles': [{'id': '375', 'title': 'رئيس إفريقيا الوسطى يعرب عن امتنانه للملك', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/475516.html', 'summary': 'رئيس إفريقيا الوسطى يعرب عن امتنانه للملك. أعرب رئيس جمهورية إفريقيا الوسطى، فوستين-أرشانج تواديرا، أمس الاثنين بالدار البيضاء، عن “امتنانه العميق” للملك محمد السادس على العناية الأخوية التي أحاط بها نجاح المائدة المستديرة للاستثمار المخصصة', 'size': 2}, {'id': '386', 'title': 'الرئيس تواديرا: شكرا جلالة الملك باسمي وباسم شعب افريقيا الوسطى', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/227103/', 'summary': 'الرئيس تواديرا: شكرا جلالة الملك باسمي وباسم شعب افريقيا الوسطى. أعرب رئيس جمهورية إفريقيا الوسطى، فوستين-أرشانج تواديرا، أمس الاثنين بالدار البيضاء، عن “امتنانه العميق” لصاحب الجلالة الملك محمد السادس، نصره الله، على العناية الأخوية التي أحاط بها نجاح المائدة المستديرة للاستثمار المخصصة لتمويل المخطط الوطني للتنمية (2024-2028) لبلاده. وقال رئيس إفريقيا الوسطى، في كلمة له خلال الجلسة الختامية لهذا الحدث،الذي نظم على مدي يومين ومكن', 'size': 2}], 'main_title': 'رئيس إفريقيا الوسطى يعرب عن امتنانه للملك'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    