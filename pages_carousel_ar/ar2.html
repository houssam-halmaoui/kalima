<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 23/08/2025 - 06h21</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '7', 'articles': [{'id': '49', 'title': 'الهلال الأحمر الفلسطيني يشيد بحرص الملك على إرسال المزيد من المساعدات الإنسانية', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-651154.html', 'summary': 'الهلال الأحمر الفلسطيني يشيد بحرص الملك على إرسال المزيد من المساعدات الإنسانية. هبة بريس أشادت جمعية الهلال الأحمر الفلسطيني بجهود صاحب الجلالة الملك محمد السادس، رئيس لجنة القدس، في دعم القضية الفلسطينية، وحرص جلالته على إرسال المزيد من المساعدات الإنسانية للمدنيين في قطاع غزة. وأبرزت نبال فرسخ المتحدثة باسم الهلال الأحمر الفلسطيني، في تصريح لوكالة المغرب العربي للأنباء أن المساعدات الإنسانية الإضافية، التي أصدر جلالة الملك تعليماته السامية لإرسالها إلى قطاع غزة، تشمل موادا يحتاج إليها سكان القطاع بشكل أساسي وعاجل. وأكدت أن من شأن هذه المساعدات التخفيف من المعاناة داخل القطاع، "خصوصا وأن هناك أكثر من أربعين ألف طفل رضيع في قطاع غزة حياتهم أصبحت في خطر نتيجة عدم توفر حليب الأطفال". وأضافت أنه، ونظرا لانعدام توفر الخضر والفواكه واللحوم في غزة، فإن وجود مواد غذائية ضمن هذه المساعدات ستوفر على الأقل موادا ظلت ساكنة غزة محرومة منها منذ شهور. واعتبرت المتحدثة باسم الهلال الأحمر الفلسطيني أن المغرب اختار الوسيلة الأكثر نجاعة لوصول المساعدات الإنسانية الإضافية إلى قطاع غزة، مؤكدة أن هذه الوسيلة تتيح وصول المساعدات مباشرة إلى المستفيدين وبالسرعة المطلوبة، كما تضمن توزيعها وايصالها مباشرة الى الفئات الأكثر تضررا.', 'size': 2}, {'id': '218', 'title': 'الهلال الأحمر يشيد بحرص جلالة الملك على إرسال المزيد من المساعدات للمدنيين في غزة', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/226235/', 'summary': 'الهلال الأحمر يشيد بحرص جلالة الملك على إرسال المزيد من المساعدات للمدنيين في غزة. رام الله – أشادت جمعية الهلال الأحمر الفلسطيني بجهود صاحب الجلالة الملك محمد السادس، رئيس لجنة القدس، في دعم القضية الفلسطينية، وحرص جلالته على إرسال المزيد من المساعدات الإنسانية للمدنيين في قطاع غزة. وأبرزت نبال فرسخ المتحدثة باسم الهلال الأحمر الفلسطيني، في تصريح لوكالة المغرب العربي للأنباء أن المساعدات الإنسانية الإضافية، التي أصدر جلالة الملك', 'size': 2}, {'id': '228', 'title': 'الهلال الأحمر الفلسطيني يثمن مبادرة الملك محمد السادس في تعزيز المساعدات الإنسانية لمدنيي غزة', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d9%87%d9%84%d8%a7%d9%84-%d8%a7%d9%84%d8%a3%d8%ad%d9%85%d8%b1-%d8%a7%d9%84%d9%81%d9%84%d8%b3%d8%b7%d9%8a%d9%86%d9%8a-%d9%8a%d8%ab%d9%85%d9%86-%d9%85%d8%a8%d8%a7%d8%af%d8%b1%d8%a9-%d8%a7/', 'summary': 'الهلال الأحمر الفلسطيني يثمن مبادرة الملك محمد السادس في تعزيز المساعدات الإنسانية لمدنيي غزة. نوهت جمعية الهلال الأحمر الفلسطيني بجهود الملك محمد السادس، رئيس لجنة القدس، في دعم القضية الفلسطينية، وحرص جلالته على إرسال المزيد من المساعدات الإنسانية للمدنيين في قطاع غزة. وأوضحت نبال فرسخ المتحدثة باسم الهلال الأحمر الفلسطيني، في تصريح لوكالة المغرب العربي للأنباء، أن المساعدات الإنسانية الإضافية، التي أصدر الملك محمد السادس تعليماته السامية …  الهلال الأحمر الفلسطيني يثمن مبادرة الملك محمد السادس في تعزيز المساعدات الإنسانية لمدنيي غزة     .', 'size': 3}], 'main_title': 'الهلال الأحمر الفلسطيني يثمن مبادرة الملك محمد السادس في تعزيز المساعدات الإنسانية لمدنيي غزة'}, {'community_id': '1', 'articles': [{'id': '80', 'title': 'توقيف شخص يعاني من اضطرابات عقلية بعد اعتدائه المميت على شرطي بإيموزار', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/society/411437.html', 'summary': 'توقيف شخص يعاني من اضطرابات عقلية بعد اعتدائه المميت على شرطي بإيموزار. أوقفت عناصر الأمن الوطني بمفوضية الشرطة بمدينة إيموزار، مساء اليوم الخميس 21 غشت الجاري، شخصا يبلغ من العمر 63 سنة، تبدو عليه علامات الخلل العقلي', 'size': 2}, {'id': '391', 'title': 'اعتقال ستيني متورط في قتل شرطي بإيموزار', 'source': 'www.alalam.ma', 'link': 'https://www.alalam.ma/اعتقال-ستيني-متورط-في-قتل-شرطي-بإيموزار_a29221.html', 'summary': 'اعتقال ستيني متورط في قتل شرطي بإيموزار. *العلم الإلكترونية* أوقفت عناصر الأمن الوطني بمفوضية الشرطة بمدينة إيموزار، مساء يوم', 'size': 2}], 'main_title': 'توقيف شخص يعاني من اضطرابات عقلية بعد اعتدائه المميت على شرطي بإيموزار'}, {'community_id': '2', 'articles': [{'id': '96', 'title': 'اختتام دورة تكوينية بأكادير لفائدة عسكريات من 14 دولة', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/divers/411453.html', 'summary': 'اختتام دورة تكوينية بأكادير لفائدة عسكريات من 14 دولة. اختتمت اليوم الجمعة، بمقر قيادة القوات المسلحة الملكية للمنطقة الجنوبية بأكادير، دورة تكوينية موجهة للنساء في عمليات الأمم المتحدة لحفظ السلام. وقد تميز حفل اختتام هذه', 'size': 2}, {'id': '190', 'title': 'عمليات الأمم المتحدة لحفظ السلام.. اختتام دورة تكوينية بأكادير لفائدة عسكريات من 14 دولة', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/473399.html', 'summary': 'عمليات الأمم المتحدة لحفظ السلام.. اختتام دورة تكوينية بأكادير لفائدة عسكريات من 14 دولة. اختتمت اليوم الجمعة، بمقر قيادة القوات المسلحة الملكية للمنطقة الجنوبية بأكادير، دورة تكوينية موجهة للنساء في عمليات الأمم المتحدة لحفظ السلام.', 'size': 2}], 'main_title': 'اختتام دورة تكوينية بأكادير لفائدة عسكريات من 14 دولة'}, {'community_id': '4', 'articles': [{'id': '123', 'title': 'بعد دخول مرسوم “العقوبات البديلة” حيز التنفيذ.. رئاسة النيابة العامة تُصدر دليلاً استرشاديا', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a8%d8%b9%d8%af-%d8%af%d8%ae%d9%88%d9%84-%d9%85%d8%b1%d8%b3%d9%88%d9%85-%d8%a7%d9%84%d8%b9%d9%82%d9%88%d8%a8%d8%a7%d8%aa-%d8%a7%d9%84%d8%a8%d8%af%d9%8a%d9%84%d8%a9-%d8%ad%d9%8a%d8%b2-%d8%a7/', 'summary': 'بعد دخول مرسوم “العقوبات البديلة” حيز التنفيذ.. رئاسة النيابة العامة تُصدر دليلاً استرشاديا. ابتداءً من اليوم الجمعة (22 غشت 2025)، دخلَ المرسوم التطبيقي للقانون رقم 43.22 المتعلق بالعقوبات البديلة حيز التنفيذ. وأصدرت رئاسة النيابة العامة، بالمناسبة، دليلا استرشاديا موجها لقضاة النيابة العامة حول تنفيذ هذه العقوبات، في إطار تفعيل القانون ومواكبة الورش الإصلاحي الكبير للمنظومة الجنائية. وأوضح هشام البلاوي، الوكيل العام للملك لدى محكمة النقض ورئيس النيابة العامة،', 'size': 4}, {'id': '168', 'title': 'رئاسة النيابة العامة تصدر دليلا استرشاديا لتنفيذ العقوبات البديلة', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/282350-2/', 'summary': 'رئاسة النيابة العامة تصدر دليلا استرشاديا لتنفيذ العقوبات البديلة. أعلنت رئاسة النيابة العامة، اليوم الجمعة، عن إصدار دليل استرشادي موجه لقضاة النيابة العامة حول تنفيذ العقوبات البديلة، وذلك بالتزامن مع دخول القانون رقم 43.22 المتعلق بالعقوبات البديلة حيز التنفيذ إلى جانب مرسومه التطبيقي. دليل عملي لمواكبة إصلاح المنظومة الجنائية أوضح هشام البلاوي الوكيل العام للملك لدى محكمة النقض ورئيس النيابة العامة أن  رئاسة النيابة العامة تصدر دليلا استرشاديا لتنفيذ العقوبات البديلة     .', 'size': 4}, {'id': '215', 'title': 'رئاسة النيابة العامة تصدر دليلا استرشاديا لقضاة النيابة العامة حول تنفيذ العقوبات البديلة', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/226245/', 'summary': 'رئاسة النيابة العامة تصدر دليلا استرشاديا لقضاة النيابة العامة حول تنفيذ العقوبات البديلة. أصدرت رئاسة النيابة العامة دليلا استرشاديا لقضاة النيابة العامة حول تنفيذ العقوبات البديلة، وذلك في إطار مواكبة تفعيل القانون رقم 43.22 المتعلق بالعقوبات البديلة والمرسوم التطبيقي له، الذي دخل حيز التنفيذ ابتداء من اليوم الجمعة 22 غشت 2025. وأوضح السيد هشام البلاوي، الوكيل العام للملك لدى محكمة النقض ورئيس النيابة العامة، في تقديمه للدليل', 'size': 4}, {'id': '384', 'title': 'رئاسة النيابة العامة تصدر دليلاً استرشادياً جديداً لقضاة النيابة حول تنفيذ العقوبات البديلة', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%b1%d8%a6%d8%a7%d8%b3%d8%a9-%d8%a7%d9%84%d9%86%d9%8a%d8%a7%d8%a8%d8%a9-%d8%a7%d9%84%d8%b9%d8%a7%d9%85%d8%a9-%d8%aa%d8%b5%d8%af%d8%b1-%d8%af%d9%84%d9%8a%d9%84%d8%a7%d9%8b-%d8%a7%d8%b3%d8%aa%d8%b1/', 'summary': 'رئاسة النيابة العامة تصدر دليلاً استرشادياً جديداً لقضاة النيابة حول تنفيذ العقوبات البديلة. أصدرت رئاسة النيابة العامة دليلا استرشاديا موجها لقضاة النيابة بشأن كيفية تنفيذ العقوبات البديلة، في إطار مواكبتها لتفعيل القانون رقم 43.22 المتعلق بالعقوبات البديلة، وكذا مرسومه التطبيقي، اللذين دخلا حيز التنفيذ ابتداء من اليوم الجمعة 22 غشت 2025. وفي هذا السياق، أبرز هشام البلاوي، الوكيل العام للملك لدى محكمة النقض ورئيس النيابة العامة، …  رئاسة النيابة العامة تصدر دليلاً استرشادياً جديداً لقضاة النيابة حول تنفيذ العقوبات البديلة     .', 'size': 4}], 'main_title': 'بعد دخول مرسوم “العقوبات البديلة” حيز التنفيذ.. رئاسة النيابة العامة تُصدر دليلاً استرشاديا'}, {'community_id': '9', 'articles': [{'id': '128', 'title': 'المجلس الوطني لحقوق الإنسان يعبر عن ارتياحه لدخول قانون العقوبات البديلة حيز التنفيذ', 'source': 'assabah.ma', 'link': 'https://assabah.ma/866854.html', 'summary': 'المجلس الوطني لحقوق الإنسان يعبر عن ارتياحه لدخول قانون العقوبات البديلة حيز التنفيذ. عبرت آمنة بوعياش، رئيسة المجلس الوطني لحقوق الإنسان، عن ارتياحها لدخول القانون رقم 43.22 المتعلق بالعقوبات البديلة حيز التنفيذ، اليوم الجمعة، معتبرة أن هذا الورش يشكل خطوة حقوقية بارزة في مسار بناء دولة الحق والقانون. وأكدت بوعياش أن تعزيز صون كرامة الإنسان، والنهوض بفلسفة إعادة التأهيل بدلأكمل القراءة » المقالة المجلس الوطني لحقوق الإنسان يعبر عن ارتياحه لدخول قانون العقوبات البديلة حيز التنفيذ  .', 'size': 4}, {'id': '169', 'title': 'المجلس الوطني لحقوق الإنسان يرحب بدخول قانون العقوبات البديلة حيز التنفيذ', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a7%d9%84%d9%85%d8%ac%d9%84%d8%b3-%d8%a7%d9%84%d9%88%d8%b7%d9%86%d9%8a-%d9%84%d8%ad%d9%82%d9%88%d9%82-%d8%a7%d9%84%d8%a5%d9%86%d8%b3%d8%a7%d9%86-%d9%8a%d8%b1%d8%ad%d8%a8-%d8%a8%d8%af%d8%ae%d9%88/', 'summary': 'المجلس الوطني لحقوق الإنسان يرحب بدخول قانون العقوبات البديلة حيز التنفيذ. أعرب المجلس الوطني لحقوق الإنسان عن ارتياحه لدخول القانون رقم 43.22 المتعلق بالعقوبات البديلة حيز التنفيذ، الجمعة، معتبرا أن هذه الخطوة تمثل ورشاً حقوقياً بارزاً في مسار تعزيز دولة الحق والقانون. خطوة نحو "عقوبات صديقة للحرية" أكدت آمنة بوعياش، رئيسة المجلس، أن القانون الجديد يعزز صون كرامة الإنسان ويكرس فلسفة إعادة التأهيل بدلاً  المجلس الوطني لحقوق الإنسان يرحب بدخول قانون العقوبات البديلة حيز التنفيذ     .', 'size': 4}, {'id': '302', 'title': 'ورش تعزيزِ الكرامة.. ارتياح حقوقي لدخول العقوبات البديلة حيز التنفيذ', 'source': 'kifache.com', 'link': 'https://kifache.com/%d9%88%d8%b1%d8%b4-%d8%aa%d8%b9%d8%b2%d9%8a%d8%b2%d9%90-%d8%a7%d9%84%d9%83%d8%b1%d8%a7%d9%85%d8%a9-%d8%a7%d8%b1%d8%aa%d9%8a%d8%a7%d8%ad-%d8%ad%d9%82%d9%88%d9%82%d9%8a-%d9%84%d8%af%d8%ae%d9%88%d9%84/', 'summary': 'ورش تعزيزِ الكرامة.. ارتياح حقوقي لدخول العقوبات البديلة حيز التنفيذ. عبر المجلس الوطني لحقوق الإنسان عن ارتياحه لدخول القانون رقم 43.22 المتعلق بالعقوبات البديلة حيز التنفيذ اليوم الجمعة، مؤكدا أن نجاح هذا الورش رهين بمدى نجاعة تطبيقه وتوفير الإمكانيات اللازمة. صون كرامة الإنسان وأوضحت رئيسة المجلس، آمنة بوعياش، أن تبني العقوبات البديلة يمثل خطوة نوعية نحو تعزيز صون كرامة الإنسان، وترسيخ فلسفة إعادة التأهيل بدل', 'size': 4}, {'id': '323', 'title': 'بوعياش: العقوبات البديلة ثورة حقوقية تعزز كرامة الإنسان وتخفف اكتظاظ السجون', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-586115.html', 'summary': 'بوعياش: العقوبات البديلة ثورة حقوقية تعزز كرامة الإنسان وتخفف اكتظاظ السجون. عبر المجلس الوطني لحقوق الإنسان عن ارتياحه لدخول القانون رقم 43.22 المتعلق بالعقوبات البديلة حيز التنفيذ، يومه الجمعة، معتبرا أن هذه الخطوة تمثل “ورشا حقوقيا هاما في قلب نموذج دولة الحق والقانون”. وأكدت آمنة بوعياش، رئيسة المجلس الوطني لحقوق الإنسان، أن تعزيز صون كرامة الإنسان، والنهوض بفلسفة إعادة التأهيل بدل العقاب بالحرمان من', 'size': 4}], 'main_title': 'المجلس الوطني لحقوق الإنسان يعبر عن ارتياحه لدخول قانون العقوبات البديلة حيز التنفيذ'}, {'community_id': '0', 'articles': [{'id': '129', 'title': 'إحباط تهريب أزيد من طن حشيش بسيدي إفني', 'source': 'assabah.ma', 'link': 'https://assabah.ma/866669.html', 'summary': 'إحباط تهريب أزيد من طن حشيش بسيدي إفني. أحبطت مصالح الأمن الوطني بسيدي إفني، فجر اليوم الجمعة، محاولة للتهريب الدولي للمخدرات وتنظيم الهجرة غير الشرعية عبر السواحل البحرية، انتهت بحجز كمية ضخمة من مخدر الشيرا “حشيش” بلغت طنا و922 كيلوغراما. وحسب ما أفاد به مصدر أمني، مكنت التدخلات الشرطية المنجزة من ضبط زورق مطاطي مزودأكمل القراءة » المقالة إحباط تهريب أزيد من طن حشيش بسيدي إفني  .', 'size': 2}, {'id': '176', 'title': 'الأمن بسيدي إفني يجهض شبكة تجمع بين تهريب المخدرات وتنظيم الهجرة', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a7%d9%84%d8%a3%d9%85%d9%86-%d8%a8%d8%b3%d9%8a%d8%af%d9%8a-%d8%a5%d9%81%d9%86%d9%8a-%d9%8a%d8%ac%d9%87%d8%b6-%d8%b4%d8%a8%d9%83%d8%a9-%d8%aa%d8%ac%d9%85%d8%b9-%d8%a8%d9%8a%d9%86-%d8%aa%d9%87%d8%b1/', 'summary': 'الأمن بسيدي إفني يجهض شبكة تجمع بين تهريب المخدرات وتنظيم الهجرة. تمكنت عناصر الأمن الوطني بمدينة سيدي إفني، في الساعات الأولى من فجر اليوم الجمعة، من إجهاض محاولة للتهريب الدولي للمخدرات وتنظيم الهجرة عبر المسالك البحرية، وحجز ما يناهز طنا و922 كيلوغراما من مخدر الشيرا. وذكر مصدر أمني أن التدخلات الشرطية المنجزة تمكنت من ضبط زورق مطاطي مزود بمحركين، على مستوى شاطئ يبعد بحوالي خمسة كيلومترات  الأمن بسيدي إفني يجهض شبكة تجمع بين تهريب المخدرات وتنظيم الهجرة     .', 'size': 2}], 'main_title': 'إحباط تهريب أزيد من طن حشيش بسيدي إفني'}, {'community_id': '6', 'articles': [{'id': '139', 'title': 'الأمم المتحدة تعلن رسميا المجاعة في غزة.. نصف مليون إنسان يواجهون “جوعا كارثيا”', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/321532/', 'summary': 'الأمم المتحدة تعلن رسميا المجاعة في غزة.. نصف مليون إنسان يواجهون “جوعا كارثيا”. في سابقة مأساوية تعد الأولى من نوعها في الشرق الأوسط، أعلنت الأمم المتحدة، اليوم الجمعة، دخول قطاع غزة رسميا في مرحلة المجاعة، مؤكدة أن نحو 500 ألف شخص يواجهون جوعا كارثيا نتيجة الحصار المستمر منذ أشهر. وجاء الإعلان عبر التصنيف المرحلي المتكامل للأمن الغذائي (IPC)، وهو مرصد عالمي مقره روما، حيث أوضح أن محافظة', 'size': 2}, {'id': '173', 'title': 'الأمم المتحدة تعلن رسميا دخول غزة مرحلة المجاعة', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a7%d9%84%d8%a3%d9%85%d9%85-%d8%a7%d9%84%d9%85%d8%aa%d8%ad%d8%af%d8%a9-%d8%aa%d8%b9%d9%84%d9%86-%d8%b1%d8%b3%d9%85%d9%8a%d8%a7-%d8%af%d8%ae%d9%88%d9%84-%d8%ba%d8%b2%d8%a9-%d9%85%d8%b1%d8%ad%d9%84/', 'summary': 'الأمم المتحدة تعلن رسميا دخول غزة مرحلة المجاعة. أعلنت الأمم المتحدة، اليوم الجمعة، رسميا المجاعة في غزة، وهو أول إعلان من نوعه في الشرق الأوسط، وأكد خبراؤها أن 500 ألف شخص يواجهون جوعا كارثيا. وبعد أشهر من التحذيرات بشأن الوضع الإنساني واستفحال الجوع في القطاع الفلسطيني، أكد التصنيف المرحلي للأمن الغذائي، ومقره في روما، أن محافظة غزة (مدينة غزة وحدها) التي تغطي نحو  الأمم المتحدة تعلن رسميا دخول غزة مرحلة المجاعة     .', 'size': 2}], 'main_title': 'الأمم المتحدة تعلن رسميا المجاعة في غزة.. نصف مليون إنسان يواجهون “جوعا كارثيا”'}, {'community_id': '8', 'articles': [{'id': '147', 'title': 'رؤساء الدول الإفريقية واليابان يشيدون بالمبادرات الإفريقية التي أطلقها الملك', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/321510/', 'summary': 'رؤساء الدول الإفريقية واليابان يشيدون بالمبادرات الإفريقية التي أطلقها الملك. أشاد رؤساء الدول والحكومات الإفريقية واليابان، اليوم الجمعة في يوكوهاما، بالمبادرات العديدة التي أطلقها صاحب الجلالة الملك محمد السادس، مبرزين الدور الريادي لجلالته في تعزيز المبادرات القارية الكبرى المرتبطة بالمناخ والهجرة والتنمية المستدامة بإفريقيا. وأعرب رؤساء الدول والحكومات، في البيان الختامي الذي توج أشغال القمة التاسعة لمؤتمر طوكيو حول تنمية إفريقيا (تيكاد-9)، بالخصوص عن تقديرهم', 'size': 2}, {'id': '229', 'title': 'تيكاد-9: رؤساء دول إفريقيا واليابان يشيدون بريادة الملك محمد السادس في قضايا المناخ والتنمية المستدامة', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%aa%d9%8a%d9%83%d8%a7%d8%af-9-%d8%b1%d8%a4%d8%b3%d8%a7%d8%a1-%d8%af%d9%88%d9%84-%d8%a5%d9%81%d8%b1%d9%8a%d9%82%d9%8a%d8%a7-%d9%88%d8%a7%d9%84%d9%8a%d8%a7%d8%a8%d8%a7%d9%86-%d9%8a%d8%b4%d9%8a%d8%af/', 'summary': 'تيكاد-9: رؤساء دول إفريقيا واليابان يشيدون بريادة الملك محمد السادس في قضايا المناخ والتنمية المستدامة. أشاد رؤساء الدول والحكومات الإفريقية واليابان، اليوم الجمعة 22 غشت الجاري، في يوكوهاما، بالمبادرات العديدة التي أطلقها الملك محمد السادس، مبرزين الدور الريادي الذي يلعبه في تعزيز المبادرات القارية الكبرى المرتبطة بالمناخ والهجرة والتنمية المستدامة بإفريقيا. وأعرب رؤساء الدول والحكومات، في البيان الختامي الذي توج أشغال القمة التاسعة لمؤتمر طوكيو حول تنمية إفريقيا (تيكاد-9)، …  تيكاد-9: رؤساء دول إفريقيا واليابان يشيدون بريادة الملك محمد السادس في قضايا المناخ والتنمية المستدامة     .', 'size': 2}], 'main_title': 'رؤساء الدول الإفريقية واليابان يشيدون بالمبادرات الإفريقية التي أطلقها الملك'}, {'community_id': '5', 'articles': [{'id': '180', 'title': 'أكادير تحتضن الحفل الختامي لمخيمات أبناء أسرة الأمن الوطني', 'source': 'rue20.com', 'link': 'https://rue20.com/930569.html', 'summary': 'أكادير تحتضن الحفل الختامي لمخيمات أبناء أسرة الأمن الوطني.  | أكادير احتضنت المنطقة الشاطئية إيموران شمال مدينة أكادير، مساء الخميس، الحفل الختامي للنسخة السنوية من المخيمات الصيفية للأمن الوطني المنظمة من طرف مؤسسة محمد السادس للأعمال الاجتماعية لموظفي الأمن الوطني، لفائدة أبناء وبنات وأيتام أسرة الشرطة. وتميز الحفل بعروض فنية وتربوية متنوعة أبدع فيها المشاركون الصغار في مجالات المسرح و الموسيقى والغناء الخبر أكادير تحتضن الحفل الختامي لمخيمات أبناء أسرة الأمن الوطني  .', 'size': 2}, {'id': '226', 'title': 'اختتام النسخة السنوية من المخيمات الصيفية للأمن الوطني بأكادير', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d8%ae%d8%aa%d8%aa%d8%a7%d9%85-%d8%a7%d9%84%d9%86%d8%b3%d8%ae%d8%a9-%d8%a7%d9%84%d8%b3%d9%86%d9%88%d9%8a%d8%a9-%d9%85%d9%86-%d8%a7%d9%84%d9%85%d8%ae%d9%8a%d9%85%d8%a7%d8%aa-%d8%a7%d9%84%d8%b5/', 'summary': 'اختتام النسخة السنوية من المخيمات الصيفية للأمن الوطني بأكادير. احتضنت المنطقة الشاطئية إيموران شمال مدينة أكادير، مساء أمس الخميس، الحفل الختامي للنسخة السنوية من المخيمات الصيفية للأمن الوطني، التي تنظمها مؤسسة محمد السادس للأعمال الاجتماعية لموظفي الأمن الوطني لفائدة أبناء وبنات وأيتام أسرة الشرطة. وتميز هذا الحفل الذي حضره مسؤولون بالمصالح المركزية للأمن الوطني ورؤساء المصالح بولاية أمن أكادير، إلى جانب بعض …  اختتام النسخة السنوية من المخيمات الصيفية للأمن الوطني بأكادير     .', 'size': 2}], 'main_title': 'أكادير تحتضن الحفل الختامي لمخيمات أبناء أسرة الأمن الوطني'}, {'community_id': '3', 'articles': [{'id': '192', 'title': 'مسؤول رفيع: المساعدات الإنسانية لغزة بادرة نبيلة تعكس حنكة المغرب ومصداقيته', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/473402.html', 'summary': 'مسؤول رفيع: المساعدات الإنسانية لغزة بادرة نبيلة تعكس حنكة المغرب ومصداقيته. أكد وزير الشؤون الخارجية الأسبق لجمهورية الرأس الأخضر، لويس فيليب تافاريس، أن المساعدات الإنسانية الإضافية التي تم إرسالها بتعليمات سامية من الملك محمد السادس، لفائدة سكان غزة، تعد بادرة نبيلة تعكس حنكة المغرب ومصداقيته.', 'size': 2}, {'id': '382', 'title': 'وزير الخارجية الأسبق للرأس الأخضر: المساعدات الإنسانية لغزة بادرة نبيلة تعكس حنكة المغرب', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d9%88%d8%b2%d9%8a%d8%b1-%d8%a7%d9%84%d8%ae%d8%a7%d8%b1%d8%ac%d9%8a%d8%a9-%d8%a7%d9%84%d8%a3%d8%b3%d8%a8%d9%82-%d9%84%d9%84%d8%b1%d8%a3%d8%b3-%d8%a7%d9%84%d8%a3%d8%ae%d8%b6%d8%b1-%d8%a7%d9%84%d9%85/', 'summary': 'وزير الخارجية الأسبق للرأس الأخضر: المساعدات الإنسانية لغزة بادرة نبيلة تعكس حنكة المغرب. قال وزير الشؤون الخارجية الأسبق لجمهورية الرأس الأخضر، لويس فيليب تافاريس، إن المساعدات الإنسانية الإضافية التي تم إرسالها بتعليمات سامية من الملك محمد السادس، لفائدة سكان غزة، تعد بادرة “نبيلة” تعكس “حنكة المغرب ومصداقيته”. وأوضح تافاريس، في تصريح لوكالة المغرب العربي للأنباء، أن المغرب، تحت قيادة الملك محمد السادس، يجسد القيم الكونية للتضامن والإنسانية، …  وزير الخارجية الأسبق للرأس الأخضر: المساعدات الإنسانية لغزة بادرة نبيلة تعكس حنكة المغرب     .', 'size': 2}], 'main_title': 'مسؤول رفيع: المساعدات الإنسانية لغزة بادرة نبيلة تعكس حنكة المغرب ومصداقيته'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    