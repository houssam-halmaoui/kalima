<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 20/06/2025 - 12h25</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '62', 'title': 'اتصالات المغرب تغير نظام حكامتها وتجدد الثقة في بنشعبون', 'source': 'www.alakhbar.press.ma', 'link': 'https://www.alakhbar.press.ma/%d8%a7%d8%aa%d8%b5%d8%a7%d9%84%d8%a7%d8%aa-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d8%aa%d8%ba%d9%8a%d8%b1-%d9%86%d8%b8%d8%a7%d9%85-%d8%ad%d9%83%d8%a7%d9%85%d8%aa%d9%87%d8%a7-%d9%88%d8%aa%d8%ac%d8%af-267391.html', 'summary': 'اتصالات المغرب تغير نظام حكامتها وتجدد الثقة في بنشعبون. اجتمع مجلس إدارة اتصالات المغرب في 19 يونيو 2025، وتناول التغيير الذي تم إقراره في نظام حكامة المجموعة من قبل الجمعية العامة غير العادية التي انعقدت في 18 يونيو 2025، حيث تم الانتقال من نظام ثنائي مكون من مجلس رقابة ومجلس إدارة جماعية إلى نظام موحد بمجلس إدارة واحد، وفقًا للمقتضيات القانونية المعمول بها. وضمن هذا …  اتصالات المغرب تغير نظام حكامتها وتجدد الثقة في بنشعبون     .', 'size': 2}, {'id': '399', 'title': 'اتصالات المغرب: إقرار مجلس حكامة واحد.. وتثبيت بنشعبون مديرا', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%a7%d8%aa%d8%b5%d8%a7%d9%84%d8%a7%d8%aa-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d8%a5%d9%82%d8%b1%d8%a7%d8%b1-%d9%85%d8%ac%d9%84%d8%b3-%d8%ad%d9%83%d8%a7%d9%85%d8%a9-%d9%88%d8%a7%d8%ad%d8%af/', 'summary': 'اتصالات المغرب: إقرار مجلس حكامة واحد.. وتثبيت بنشعبون مديرا. المساء اليوم: أعلن مجلس إدارة اتصالات المغرب، المنعقد أمس الخميس، التحول الذي شهده نظام حكامة المجموعة، والذي أقرته الجمعية العامة غير العادية التي انعقدت في 18 يونيو الجاري، من خلال الانتقال من نظام حكامة ثنائي', 'size': 2}], 'main_title': 'اتصالات المغرب تغير نظام حكامتها وتجدد الثقة في بنشعبون'}, {'community_id': '3', 'articles': [{'id': '67', 'title': 'جهود متواصلة لإخماد حريق غابوي بجماعة عين لحصن بإقليم تطوان', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/202262', 'summary': 'جهود متواصلة لإخماد حريق غابوي بجماعة عين لحصن بإقليم تطوان.  تواصل فرق الإطفاء جهودها المكثفة لإخماد حريق غابوي اندلع، زوال اليوم الخميس، بالغطاء الغابوي بمنطقة ودراس بجماعة عين لحصن بإقليم تطوان. وتعمل فرق الإطفاء في ظل ظروف مناخية صعبة تتمثل في هبوب رياح “الشرقي” وارتفاع درجة الحرارة، ما ساهم في إذكاء حدة النيران، التي أتت لحد الساعة على حوالي 15 هكتارا مكونة بشكل', 'size': 4}, {'id': '127', 'title': 'جهود متواصلة لإخماد حريق غابوي التهم الهكتارات ضواحي تطوان', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/407876.html', 'summary': 'جهود متواصلة لإخماد حريق غابوي التهم الهكتارات ضواحي تطوان. تواصل فرق الإطفاء جهودها المكثفة لإخماد حريق غابوي اندلع، زوال اليوم الخميس، بالغطاء الغابوي بمنطقة ودراس بجماعة عين لحصن بإقليم تطوان. وتعمل فرق الإطفاء في ظل', 'size': 4}, {'id': '137', 'title': 'بالصور من تطوان.. جهود متواصلة لإخماد حريق غابوي بجماعة عين لحصن', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a8%d8%a7%d9%84%d8%b5%d9%88%d8%b1-%d9%85%d9%86-%d8%aa%d8%b7%d9%88%d8%a7%d9%86-%d8%ac%d9%87%d9%88%d8%af-%d9%85%d8%aa%d9%88%d8%a7%d8%b5%d9%84%d8%a9-%d9%84%d8%a5%d8%ae%d9%85%d8%a7%d8%af-%d8%ad%d8%b1/', 'summary': 'بالصور من تطوان.. جهود متواصلة لإخماد حريق غابوي بجماعة عين لحصن. تواصل فرق الإطفاء جهودها المكثفة لإخماد حريق غابوي اندلع، زوال اليوم الخميس (19 يونيو)، بالغطاء الغابوي بمنطقة ودراس بجماعة عين لحصن بإقليم تطوان. وتعمل فرق الإطفاء في ظل ظروف مناخية صعبة تتمثل في هبوب رياح “الشرقي” وارتفاع درجة الحرارة، ما ساهم في إذكاء حدة النيران، التي أتت لحد الساعة على حوالي 15 هكتارا مكونة بشكل', 'size': 4}, {'id': '400', 'title': 'حريق عين لحصن أتى على عشرات الهكتارات.. وإمكانيات كبيرة لتطويقه', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%ad%d8%b1%d9%8a%d9%82-%d8%b9%d9%8a%d9%86-%d9%84%d8%ad%d8%b5%d9%86-%d8%a3%d8%aa%d9%89-%d8%b9%d9%84%d9%89-%d8%b9%d8%b4%d8%b1%d8%a7%d8%aa-%d8%a7%d9%84%d9%87%d9%83%d8%aa%d8%a7%d8%b1%d8%a7%d8%aa/', 'summary': 'حريق عين لحصن أتى على عشرات الهكتارات.. وإمكانيات كبيرة لتطويقه. المساء اليوم – تطوان: أنهت فرق الإطفاء إخماد حريق غابوي اندلع، زوال أمس الخميس، بالغطاء الغابوي بمنطقة ودراس بجماعة عين لحصن بإقليم تطوان. وعملت فرق الإطفاء في ظل ظروف مناخية صعبة تتمثل في هبوب رياح', 'size': 4}], 'main_title': 'جهود متواصلة لإخماد حريق غابوي بجماعة عين لحصن بإقليم تطوان'}, {'community_id': '7', 'articles': [{'id': '152', 'title': 'المغرب يدعو إلى وضع حقوق الإنسان في صلب جهود مكافحة الفساد', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/315998/', 'summary': 'المغرب يدعو إلى وضع حقوق الإنسان في صلب جهود مكافحة الفساد. دعا السفير الممثل الدائم للمغرب لدى مكتب الأمم المتحدة بجنيف، السيد عمر زنيبر، اليوم الخميس بجنيف، إلى وضع حقوق الإنسان في قلب جهود مكافحة الفساد. وقال زنيبر خلال افتتاح لقاء حول موضوع “حقوق الإنسان ومكافحة ممارسة الفساد”، تم تنظيمه على هامش الدورة الـ 59 لمجلس حقوق الإنسان بجنيف، ” إن مقاربة مرتكزة على حقوق الإنسان', 'size': 2}, {'id': '232', 'title': 'جنيف.. المغرب يدعو إلى وضع حقوق الإنسان في صلب جهود مكافحة الفساد', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/223200/', 'summary': 'جنيف.. المغرب يدعو إلى وضع حقوق الإنسان في صلب جهود مكافحة الفساد. و م ع دعا السفير الممثل الدائم للمغرب لدى مكتب الأمم المتحدة بجنيف، عمر زنيبر، اليوم الخميس بجنيف، إلى وضع حقوق الإنسان في قلب جهود مكافحة الفساد. وقال زنيبر خلال افتتاح لقاء حول موضوع “حقوق الإنسان ومكافحة ممارسة الفساد”، تم تنظيمه على هامش الدورة الـ 59 لمجلس حقوق الإنسان بجنيف، ” إن مقاربة مرتكزة', 'size': 2}], 'main_title': 'المغرب يدعو إلى وضع حقوق الإنسان في صلب جهود مكافحة الفساد'}, {'community_id': '5', 'articles': [{'id': '162', 'title': 'البنك الدولي يضخ 600 مليون دولار لتعزيز التنمية البشرية والحماية الاجتماعية في المغرب', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1079095.html', 'summary': 'البنك الدولي يضخ 600 مليون دولار لتعزيز التنمية البشرية والحماية الاجتماعية في المغرب. وافق مجلس إدارة البنك الدولي، اليوم الخميس، على حزمة تمويلية بقيمة 600 مليون دولار أمريكي، تمثل المرحلة الثالثة من برنامج “تعزيز رأس المال البشري من أجل مغرب مرن”، الذي يهدف إلى تعزيز قدرة المغرب على مواجهة المخاطر الصحية، وتحسين رأس المال البشري في مراحل الطفولة، وتقليص الفقر بين كبار السن، وتعزيز إدارة مخاطر التغير المناخي، ظهرت المقالة البنك الدولي يضخ 600 مليون دولار لتعزيز التنمية البشرية والحماية الاجتماعية في المغرب  .', 'size': 2}, {'id': '379', 'title': 'البنك الدولي يقرض المغرب 250 مليون دولار لتعزيز فعالية نظام الحماية الاجتماعية', 'source': 'rue20.com', 'link': 'https://rue20.com/914367.html', 'summary': 'البنك الدولي يقرض المغرب 250 مليون دولار لتعزيز فعالية نظام الحماية الاجتماعية.  الرباط وافق البنك الدولي على حزمة تمويلية بقيمة 250 مليون دولار لدعم إصلاح منظومة الحماية الاجتماعية في المغرب، في إطار مشروع دعم تعزيز شبكات الأمان الاجتماعي من أجل التنمية البشرية. وأوضحت المؤسسة المالية الدولية، في بلاغ أمس الخميس، أن “هذه المبادرة تهدف إلى المساهمة في تعزيز فعالية نظام الحماية الاجتماعية في المغرب من خلال الخبر البنك الدولي يقرض المغرب 250 مليون دولار لتعزيز فعالية نظام الحماية الاجتماعية  .', 'size': 2}], 'main_title': 'البنك الدولي يضخ 600 مليون دولار لتعزيز التنمية البشرية والحماية الاجتماعية في المغرب'}, {'community_id': '6', 'articles': [{'id': '201', 'title': 'لتجنب تصنيفها منظمة إرهابية.. الجزائر تأمر بسحب الأسلحة الإيرانية من “البوليساريو”', 'source': 'machahid24.com', 'link': 'https://machahid24.com/international/467018.html', 'summary': 'لتجنب تصنيفها منظمة إرهابية.. الجزائر تأمر بسحب الأسلحة الإيرانية من “البوليساريو”. في خطوة تروم فصل جبهة “البوليساريو” عن المحور الإيراني، أصدر رئيس أركان الجيش الجزائري الجنرال سعيد شنقريحة، قبل أيام، أوامره للجبهة الانفصالية بسحب فوري للأسلحة والطائرات بدون طيار التي زودتها بها القيادة العليا الإيرانية، وتسليمها للمخابرات الجزائرية. وبحسب منصة “ahel-intelligence” تأتي هذه الخطوة، التي وصفتها المصادر بأنها تهدف إلى منع فرض عقوبات على الجبهة الانفصالية …', 'size': 2}, {'id': '257', 'title': 'الجزائر تسحب أسلحة إيرانية من البوليساريو.. مناورة لتجنب تصنيفها منظمة إرهابية وسط تصاعد التوترات الإقليمية', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d8%ac%d8%b2%d8%a7%d8%a6%d8%b1-%d8%aa%d8%b3%d8%ad%d8%a8-%d8%a3%d8%b3%d9%84%d8%ad%d8%a9-%d8%a5%d9%8a%d8%b1%d8%a7%d9%86%d9%8a%d8%a9-%d9%85%d9%86-%d8%a7%d9%84%d8%a8%d9%88%d9%84%d9%8a%d8%b3/', 'summary': 'الجزائر تسحب أسلحة إيرانية من البوليساريو.. مناورة لتجنب تصنيفها منظمة إرهابية وسط تصاعد التوترات الإقليمية. في ظل التصعيد المتواصل بين إيران وإسرائيل، كشفت تقارير إعلامية متطابقة، نقلا عن مصادر جزائرية مقربة من هيئة الأركان العامة للجيش، عن تحركات عسكرية وسياسية لافتة في الجزائر. ووفقا لمنصة “ahel-intelligence” فقد أصدر الجنرال سعيد شنقريحة، أوامر لجبهة البوليساريو بسحب فوري للأسلحة والطائرات بدون طيار التي زودتها بها القيادة العليا الإيرانية، وتسليمها للمخابرات …  الجزائر تسحب أسلحة إيرانية من البوليساريو.. مناورة لتجنب تصنيفها منظمة إرهابية وسط تصاعد التوترات الإقليمية     .', 'size': 2}], 'main_title': 'لتجنب تصنيفها منظمة إرهابية.. الجزائر تأمر بسحب الأسلحة الإيرانية من “البوليساريو”'}, {'community_id': '8', 'articles': [{'id': '278', 'title': 'الأثمان ترتفع بنسبة 0,4% في ماي', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d8%a7%d9%84%d8%a3%d8%ab%d9%85%d8%a7%d9%86-%d8%aa%d8%b1%d8%aa%d9%81%d8%b9-%d8%a8%d9%86%d8%b3%d8%a8%d8%a9-04-%d9%81%d9%8a-%d9%85%d8%a7%d9%8a-1579090.html', 'summary': 'الأثمان ترتفع بنسبة 0,4% في ماي. أفادت المندوبية السامية للتخطيط بأن الرقم الاستدلالي للأثمان عند الاستهلاك سجل، خلال شهر ماي الماضي، ارتفاعا بنسبة 0,4 في المائة مقارنة بالشهر ذاته من السنة الماضية. وأوضحت المندوبية، في مذكرة إخبارية حول الرقم الاستدلالي للأثمان عند الاستهلاك لشهر ماي 2025، أن هذا الارتفاع نتج عن تزايد أثمان المواد الغذائية بـ0,5% وأثمان المواد غير الغذائية بـ0,3%.  الأثمان ترتفع بنسبة 0,4% في ماي     - هسبريس جريدة إلكترونية مغربية .', 'size': 2}, {'id': '403', 'title': 'مندوبية: الرقم الاستدلالي للأثمان ينخفض بـ 0,4 في المائة خلال ماي 2025', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d9%85%d9%86%d8%af%d9%88%d8%a8%d9%8a%d8%a9-%d8%a7%d9%84%d8%b1%d9%82%d9%85-%d8%a7%d9%84%d8%a7%d8%b3%d8%aa%d8%af%d9%84%d8%a7%d9%84%d9%8a-%d9%84%d9%84%d8%a3%d8%ab%d9%85%d8%a7%d9%86-%d9%8a%d9%86%d8%ae/', 'summary': 'مندوبية: الرقم الاستدلالي للأثمان ينخفض بـ 0,4 في المائة خلال ماي 2025. أكدت المندوبية السامية للتخطيط، أن الرقم الاستدلالي للأثمان عند الاستهلاك، خلال شهر ماي 2025، سجل انخفاضا ب0,4 في المائة، بالمقارنة مع الشهر السابق. وأوضحت المندوبية في مذكرة إخبارية، أنه قد نتج هذا الانخفاض عن تراجع الرقم الاستدلالي للمواد الغذائية ب 0,8 في المائة، والرقم الاستدلالي للمواد غير الغذائية ب 0,1 في المائة. وأضافت …  مندوبية: الرقم الاستدلالي للأثمان ينخفض بـ 0,4 في المائة خلال ماي 2025     .', 'size': 2}], 'main_title': 'الأثمان ترتفع بنسبة 0,4% في ماي'}, {'community_id': '1', 'articles': [{'id': '298', 'title': 'الصحراء المغربية.. البنين تشيد بمبادرة الحكم الذاتي', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-633256.html', 'summary': 'الصحراء المغربية.. البنين تشيد بمبادرة الحكم الذاتي. هبة بريس أمام لجنة الـ24 التابعة للأمم المتحدة، بمبادرة الحكم الذاتي التي قدمها المغرب من أجل وضع حد للنزاع الإقليمي حول الصحراء. وفي مداخلة خلال الدورة العادية للجنة الـ24 المنعقدة بنيويورك (9-20 يونيو)، أبرز الممثل الدائم للبنين لدى الأمم المتحدة، السفير مارك هيرمان أرابا، أن بلاده "تشيد بالمبادرة المغربية للحكم الذاتي، التي يصفها مجلس الأمن بالجادة وذات المصداقية، كما أننا نعرب عن ارتياحنا للدعم المتزايد الذي ما فتئت تحظى به". وأشار إلى أن جهود المغرب الرامية إلى تحفيز التنمية المستدامة السوسيو-اقتصادية والبيئية في الأقاليم الجنوبية، وكذا فتح العديد من الدول لقنصليات عامة في العيون والداخلة سيساهم، دون شك، في تعزيز الفرص الاقتصادية والاجتماعية بما يعود بالنفع على الساكنة. ودعا سفير البنين إلى استئناف مسلسل اجتماعات الموائد المستديرة بالصيغة ذاتها ومع المشاركين أنفسهم، وهم المغرب والجزائر وموريتانيا و"البوليساريو". وعبر، من جانب آخر، عن دعم بلاده لجهود الأمين العام للأمين العام للأمم المتحدة الرامية إلى التوصل إلى حل سياسي مستدام ومقبول لدى الأطراف، للنزاع الإقليمي حول الصحراء المغربية.', 'size': 2}, {'id': '405', 'title': 'البنين تشيد بالمبادرة المغربية للحكم الذاتي في الصحراء المغربية', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d8%a8%d9%86%d9%8a%d9%86-%d8%aa%d8%b4%d9%8a%d8%af-%d8%a8%d8%a7%d9%84%d9%85%d8%a8%d8%a7%d8%af%d8%b1%d8%a9-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8%d9%8a%d8%a9-%d9%84%d9%84%d8%ad%d9%83%d9%85/', 'summary': 'البنين تشيد بالمبادرة المغربية للحكم الذاتي في الصحراء المغربية. أشادت البنين، أمام لجنة الـ24 التابعة للأمم المتحدة، بمبادرة الحكم الذاتي التي قدمها المغرب من أجل وضع حد للنزاع الإقليمي حول الصحراء المغربية.وفي مداخلة خلال الدورة العادية للجنة الـ24 المنعقدة بنيويورك (9-20 يونيو)، أبرز الممثل الدائم للبنين لدى الأمم المتحدة، السفير مارك هيرمان أرابا، أن بلاده “تشيد بالمبادرة المغربية للحكم الذاتي، التي يصفها …  البنين تشيد بالمبادرة المغربية للحكم الذاتي في الصحراء المغربية     .', 'size': 2}], 'main_title': 'الصحراء المغربية.. البنين تشيد بمبادرة الحكم الذاتي'}, {'community_id': '2', 'articles': [{'id': '351', 'title': 'نشرة إنذارية: أمطار رعدية وبرد.. وموجة حر تضرب عدة مناطق بالمملكة', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1079248.html', 'summary': 'نشرة إنذارية: أمطار رعدية وبرد.. وموجة حر تضرب عدة مناطق بالمملكة. أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب تسجيل زخات رعدية مصحوبة بتساقط للبرد وبهبات رياح اليوم الجمعة، وطقس حار من الجمعة إلى الثلاثاء بعدد من مناطق المملكة. وأوضحت المديرية، في نشرة إنذارية من مستوى يقظة “برتقالي”، أن هذه الزخات الرعدية (من 15 إلى 25 ملم) ستهم عمالات وأقاليم أزيلال والرحامنة ومراكش وقلعة السراغنة وشيشاوة والحوز، ظهرت المقالة نشرة إنذارية: أمطار رعدية وبرد.. وموجة حر تضرب عدة مناطق بالمملكة  .', 'size': 3}, {'id': '366', 'title': 'نشرة إنذارية.. طقس حار من الجمعة إلى الثلاثاء وزخات رعدية متوقعة اليوم', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d9%86%d8%b4%d8%b1%d8%a9-%d8%a5%d9%86%d8%b0%d8%a7%d8%b1%d9%8a%d8%a9-%d8%b7%d9%82%d8%b3-%d8%ad%d8%a7%d8%b1-%d9%85%d9%86-%d8%a7%d9%84%d8%ac%d9%85%d8%b9%d8%a9-%d8%a5%d9%84%d9%89-%d8%a7%d9%84%d8%ab/', 'summary': 'نشرة إنذارية.. طقس حار من الجمعة إلى الثلاثاء وزخات رعدية متوقعة اليوم. أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب تسجيل زخات رعدية مصحوبة بتساقط للبرد وبهبات رياح اليوم الجمعة، وطقس حار من الجمعة إلى الثلاثاء بعدد من مناطق المملكة. وأوضحت المديرية، في نشرة إنذارية من مستوى يقظة "برتقالي"، أن هذه الزخات الرعدية (من 15 إلى 25 ملم) ستهم عمالات وأقاليم أزيلال والرحامنة ومراكش وقلعة السراغنة وشيشاوة والحوز،  نشرة إنذارية.. طقس حار من الجمعة إلى الثلاثاء وزخات رعدية متوقعة اليوم     .', 'size': 3}, {'id': '381', 'title': 'طقس حار من الجمعة إلى الثلاثاء ودرجة الحرارة تبلغ 44 درجة بهذه المناطق', 'source': 'rue20.com', 'link': 'https://rue20.com/914365.html', 'summary': 'طقس حار من الجمعة إلى الثلاثاء ودرجة الحرارة تبلغ 44 درجة بهذه المناطق.  ا الرباط أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب تسجيل زخات رعدية مصحوبة بتساقط للبرد وبهبات رياح اليوم الجمعة، وطقس حار من الجمعة إلى الثلاثاء بعدد من مناطق المملكة. وأوضحت المديرية، في نشرة إنذارية من مستوى يقظة “برتقالي”، أن هذه الزخات الرعدية (من 15 إلى 25 ملم) ستهم عمالات وأقاليم أزيلال والرحامنة ومراكش الخبر طقس حار من الجمعة إلى الثلاثاء ودرجة الحرارة تبلغ 44 درجة بهذه المناطق  .', 'size': 3}], 'main_title': 'نشرة إنذارية: أمطار رعدية وبرد.. وموجة حر تضرب عدة مناطق بالمملكة'}, {'community_id': '4', 'articles': [{'id': '353', 'title': 'ولد الرشيد: المغرب وفي لاختياراته الإفريقية ويسير بثبات نحو تكامل قاري فعلي', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1079236.html', 'summary': 'ولد الرشيد: المغرب وفي لاختياراته الإفريقية ويسير بثبات نحو تكامل قاري فعلي. أكد رئيس مجلس المستشارين محمد ولد الرشيد، اليوم الجمعة 20 يونيو 2025 بمدينة العيون، أن المملكة المغربية ظلت منذ أكثر من 6 عقود وفية لاختياراتها الإفريقية وحريصا على أن يسير مع، وبجانب، أشقائه الأفارقة. وقال ولد الرشيد، خلال المنتدى البرلماني للتعاون الاقتصادي المغرب – المجموعة الاقتصادية والنقدية لدول وسط إفريقيا” (سيماك)، الذي تحتضنه مدينة العيون، ظهرت المقالة ولد الرشيد: المغرب وفي لاختياراته الإفريقية ويسير بثبات نحو تكامل قاري فعلي  .', 'size': 2}, {'id': '376', 'title': 'ولد الرشيد: المغرب و “سيماك” يمضيان نحو شراكة إفريقية إستراتيجية', 'source': 'rue20.com', 'link': 'https://rue20.com/914374.html', 'summary': 'ولد الرشيد: المغرب و “سيماك” يمضيان نحو شراكة إفريقية إستراتيجية. زنقة20| علي التومي أكد محمد ولد الرشيد رئيس مجلس المستشارين، أن المغرب والمجموعة الاقتصادية والنقدية لدول وسط إفريقيا (سيماك) يسيران بخطى ثابتة نحو بناء شراكة إفريقية متكاملة، تقوم على أسس التضامن والتنمية المشتركة، مشددا على أن إفريقيا لم تعد تحتمل مزيداً من الانتظار أمام التحديات المتزايدة. وخلال كلمته في إفتتاح المنتدى البرلماني للتعاون الاقتصادي بين الخبر ولد الرشيد: المغرب و “سيماك” يمضيان نحو شراكة إفريقية إستراتيجية  .', 'size': 2}], 'main_title': 'ولد الرشيد: المغرب وفي لاختياراته الإفريقية ويسير بثبات نحو تكامل قاري فعلي'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    