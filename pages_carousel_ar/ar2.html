<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 12/07/2025 - 12h25</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '5', 'articles': [{'id': '115', 'title': 'حذرت من تداعياته على المسلسلات الانتخابية.. أخرباش تدعو إلى احتواء التضليل الإعلامي', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%ad%d8%b0%d8%b1%d8%aa-%d9%85%d9%86-%d8%aa%d8%af%d8%a7%d8%b9%d9%8a%d8%a7%d8%aa%d9%87-%d8%b9%d9%84%d9%89-%d8%a7%d9%84%d9%85%d8%b3%d9%84%d8%b3%d9%84%d8%a7%d8%aa-%d8%a7%d9%84%d8%a7%d9%86%d8%aa%d8%ae/', 'summary': 'حذرت من تداعياته على المسلسلات الانتخابية.. أخرباش تدعو إلى احتواء التضليل الإعلامي. أكدت رئيسة الهيئة العليا للاتصال السمعي البصري، لطيفة أخرباش، اليوم الجمعة (11 يوليوز) بكوتونو، أن التضليل الإعلامي، الذي يتم تضخيمه بواسطة الذكاء الاصطناعي، يشكل أحد المخاطر الرقمية الرئيسية التي يتعين تدبيرها واحتواؤها من أجل حماية سلامة المسلسلات الانتخابية. وأوضحت أخرباش، خلال الجلسة الافتتاحية للمؤتمر الدولي حول موضوع “التقنين الإعلامي للانتخابات في زمن الرقمي والذكاء الاصطناعي”', 'size': 2}, {'id': '187', 'title': 'أخرباش تدعو إلى احتواء التضليل الإعلامي لحماية سلامة المسلسلات الانتخابية', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/469250.html', 'summary': 'أخرباش تدعو إلى احتواء التضليل الإعلامي لحماية سلامة المسلسلات الانتخابية. و.م.ع أكدت رئيسة الهيئة العليا للاتصال السمعي البصري، لطيفة أخرباش، اليوم الجمعة بكوتونو، أن التضليل الإعلامي، الذي يتم تضخيمه بواسطة الذكاء الاصطناعي، يشكل أحد المخاطر الرقمية الرئيسية التي يتعين تدبيرها واحتواؤها من أجل حماية سلامة المسلسلات الانتخابية. وأوضحت أخرباش، خلال الجلسة الافتتاحية للمؤتمر الدولي حول موضوع “التقنين الإعلامي للانتخابات في زمن الرقمي والذكاء الاصطناعي” المنعقد …', 'size': 2}], 'main_title': 'حذرت من تداعياته على المسلسلات الانتخابية.. أخرباش تدعو إلى احتواء التضليل الإعلامي'}, {'community_id': '1', 'articles': [{'id': '135', 'title': 'أمن البيضاء يوقف أبا وابنه بحوزتهما 6 آلاف قرص مخدر', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/318045/', 'summary': 'أمن البيضاء يوقف أبا وابنه بحوزتهما 6 آلاف قرص مخدر. تمكنت عناصر المصلحة الولائية للشرطة القضائية بالدار البيضاء بتنسيق مع مصالح المديرية العامة لمراقبة التراب الوطني، مساء اليوم الجمعة 11 يوليوز الجاري، من حجز 6000 قرص مخدر وتوقيف شخص وابنه القاصر البالغ من العمر 15 سنة، وذلك للاشتباه في تورطهما في قضية تتعلق بحيازة وترويج المخدرات والمؤثرات العقلية. وقد جرى توقيف المشتبه فيهما على مستوى', 'size': 3}, {'id': '155', 'title': 'حجز 6000 قرص مخدر وتوقيف شخصين بتهمة ترويج المخدرات بالدار البيضاء', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1084852.html', 'summary': 'حجز 6000 قرص مخدر وتوقيف شخصين بتهمة ترويج المخدرات بالدار البيضاء. تمكنت عناصر المصلحة الولائية للشرطة القضائية بالدار البيضاء بتنسيق مع مصالح المديرية العامة لمراقبة التراب الوطني، مساء اليوم الجمعة 11 يوليوز الجاري، من حجز 6000 قرص مخدر وتوقيف شخص وابنه القاصر البالغ من العمر 15 سنة، وذلك للاشتباه في تورطهما في قضية تتعلق بحيازة وترويج المخدرات والمؤثرات العقلية. وقد جرى توقيف المشتبه فيهما على مستوى ظهرت المقالة حجز 6000 قرص مخدر وتوقيف شخصين بتهمة ترويج المخدرات بالدار البيضاء  .', 'size': 3}, {'id': '304', 'title': 'الدار البيضاء.. تفاصيل حجز 6000 قرص مخدر وتوقيف شخص وابنه القاصر', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a7%d9%84%d8%af%d8%a7%d8%b1-%d8%a7%d9%84%d8%a8%d9%8a%d8%b6%d8%a7%d8%a1-%d8%aa%d9%81%d8%a7%d8%b5%d9%8a%d9%84-%d8%ad%d8%ac%d8%b2-6000-%d9%82%d8%b1%d8%b5-%d9%85%d8%ae%d8%af%d8%b1-%d9%88%d8%aa%d9%88/', 'summary': 'الدار البيضاء.. تفاصيل حجز 6000 قرص مخدر وتوقيف شخص وابنه القاصر. تمكنت عناصر المصلحة الولائية للشرطة القضائية بالدار البيضاء بتنسيق مع مصالح المديرية العامة لمراقبة التراب الوطني، مساء اليوم الجمعة (11 يوليوز)، من حجز 6000 قرص مخدر وتوقيف شخص وابنه القاصر البالغ من العمر 15 سنة، وذلك للاشتباه في تورطهما في قضية تتعلق بحيازة وترويج المخدرات والمؤثرات العقلية. وجرى توقيف المشتبه فيهما على مستوى محطة السكة', 'size': 3}], 'main_title': 'أمن البيضاء يوقف أبا وابنه بحوزتهما 6 آلاف قرص مخدر'}, {'community_id': '7', 'articles': [{'id': '139', 'title': '“مرحبا 2025”.. ارتفاع عدد المسافرين بنسبة 5.6% خلال الشهر الأول من العملية', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/318032/', 'summary': '“مرحبا 2025”.. ارتفاع عدد المسافرين بنسبة 5.6% خلال الشهر الأول من العملية. أشاد وزير الداخلية الإسباني، فرناندو غراندي مارلاسكا، اليوم الخميس، بالسير الجيد لعملية “مرحبا 2025″، وبـ”التنسيق المثالي” القائم مع المغرب من أجل ضمان نجاح هذه العملية. وقال الوزير الإسباني، خلال زيارة إلى مدينة طريفة الساحلية (جنوب البلاد) لتفقد سير العملية: “ما كان لهذا النجاح أن يتحقق لولا التعاون الوثيق والتنسيق المثالي مع جارنا وشريكنا، المغرب، الذي', 'size': 3}, {'id': '201', 'title': 'وزير الداخلية الإسباني يشيد بالتعاون مع المغرب في عملية “مرحبا 2025”', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d9%88%d8%b2%d9%8a%d8%b1-%d8%a7%d9%84%d8%af%d8%a7%d8%ae%d9%84%d9%8a%d8%a9-%d8%a7%d9%84%d8%a5%d8%b3%d8%a8%d8%a7%d9%86%d9%8a-%d9%8a%d8%b4%d9%8a%d8%af-%d8%a8%d8%a7%d9%84%d8%aa%d8%b9%d8%a7%d9%88%d9%86/', 'summary': 'وزير الداخلية الإسباني يشيد بالتعاون مع المغرب في عملية “مرحبا 2025”. المساء اليوم: أشاد وزير الداخلية الإسباني، فرناندو غراندي مارلاسكا، بما وصفه “السير الجيد لعملية “مرحبا 2025″، وبـ”التنسيق المثالي” القائم مع المغرب من أجل ضمان نجاح هذه العملية. وقال الوزير الإسباني، خلال زيارة إلى مدينة طريفة', 'size': 2}, {'id': '217', 'title': 'وزير الداخلية الإسباني يشيد بالسير الجيد لعملية “مرحبا 2025″ وبالتنسيق المثالي مع المغرب', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d9%88%d8%b2%d9%8a%d8%b1-%d8%a7%d9%84%d8%af%d8%a7%d8%ae%d9%84%d9%8a%d8%a9-%d8%a7%d9%84%d8%a5%d8%b3%d8%a8%d8%a7%d9%86%d9%8a-%d9%8a%d8%b4%d9%8a%d8%af-%d8%a8%d8%a7%d9%84%d8%b3%d9%8a%d8%b1-%d8%a7%d9%84/', 'summary': 'وزير الداخلية الإسباني يشيد بالسير الجيد لعملية “مرحبا 2025″ وبالتنسيق المثالي مع المغرب. أشاد وزير الداخلية الإسباني، فرناندو غراندي مارلاسكا، أمس الخميس، بالسير الجيد لعملية “مرحبا 2025″، وبـ”التنسيق المثالي” القائم مع المغرب من أجل ضمان نجاح هذه العملية. وقال الوزير الإسباني، خلال زيارة إلى مدينة طريفة الساحلية (جنوب البلاد) لتفقد سير العملية: “ما كان لهذا النجاح أن يتحقق لولا التعاون الوثيق والتنسيق المثالي مع جارنا وشريكنا، …  وزير الداخلية الإسباني يشيد بالسير الجيد لعملية “مرحبا 2025″ وبالتنسيق المثالي مع المغرب     .', 'size': 2}], 'main_title': '“مرحبا 2025”.. ارتفاع عدد المسافرين بنسبة 5.6% خلال الشهر الأول من العملية'}, {'community_id': '0', 'articles': [{'id': '177', 'title': 'بعد طول إنتظار…ANRT تعلن الترخيص للشركات الراغبة في إطلاق خدمات 5G عالي الجودة', 'source': 'rue20.com', 'link': 'https://rue20.com/919516.html', 'summary': 'بعد طول إنتظار…ANRT تعلن الترخيص للشركات الراغبة في إطلاق خدمات 5G عالي الجودة. زنق20ا الرباط أعلنت الوكالة الوطنية لتقنين المواصلات، اليوم الجمعة، عن المنافسة لمنح تراخيص إحداث واستغلال شبكات للمواصلات تستعمل تكنولوجيا متنقلة من الجيل الخامس، وذلك عملا بالقوانين الجاري بها العمل، وفي إطار تفعيل استراتيجية المغرب الرقمي 2030 والتوجهات العامة للقطاع. وأوضحت الوكالة الوطنية لتقنين المواصلات، في بلاغ، أن هذه العملية تهدف إلى تمكين المملكة المغربية من الخبر بعد طول إنتظار…ANRT تعلن الترخيص للشركات الراغبة في إطلاق خدمات 5G عالي الجودة  .', 'size': 2}, {'id': '189', 'title': 'المغرب يطلق طلب عروض لمنح رخص إنشاء واستغلال شبكات الجيل الخامس', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/469245.html', 'summary': 'المغرب يطلق طلب عروض لمنح رخص إنشاء واستغلال شبكات الجيل الخامس. أعلنت الوكالة الوطنية لتقنين المواصلات، اليوم الجمعة، عن المنافسة لمنح تراخيص إحداث واستغلال شبكات للمواصلات تستعمل تكنولوجيا متنقلة من الجيل الخامس، وذلك عملا بالقوانين الجاري بها العمل، وفي إطار تفعيل استراتيجية المغرب الرقمي 2030 والتوجهات العامة للقطاع. وأوضحت الوكالة الوطنية لتقنين المواصلات، في بلاغ لها، أن هذه العملية تهدف إلى تمكين المملكة المغربية من أحدث …', 'size': 2}, {'id': '210', 'title': 'المغرب يفتح باب المنافسة لمنح تراخيص الجيل الخامس “5G”', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d9%8a%d9%81%d8%aa%d8%ad-%d8%a8%d8%a7%d8%a8-%d8%a7%d9%84%d9%85%d9%86%d8%a7%d9%81%d8%b3%d8%a9-%d9%84%d9%85%d9%86%d8%ad-%d8%aa%d8%b1%d8%a7%d8%ae%d9%8a%d8%b5-%d8%a7/', 'summary': 'المغرب يفتح باب المنافسة لمنح تراخيص الجيل الخامس “5G”. أعلنت الوكالة الوطنية لتقنين المواصلات، اليوم الجمعة، عن المنافسة لمنح تراخيص إحداث واستغلال شبكات للمواصلات تستعمل تكنولوجيا متنقلة من الجيل الخامس، وذلك عملا بالقوانين الجاري بها العمل، وفي إطار تفعيل استراتيجية المغرب الرقمي 2030 والتوجهات العامة للقطاع. وأفادت الوكالة الوطنية لتقنين المواصلات، في بلاغ، أن هذه العملية تهدف إلى تمكين المملكة المغربية من …  المغرب يفتح باب المنافسة لمنح تراخيص الجيل الخامس “5G”     .', 'size': 3}], 'main_title': 'المغرب يفتح باب المنافسة لمنح تراخيص الجيل الخامس “5G”'}, {'community_id': '3', 'articles': [{'id': '302', 'title': 'اعتداء شنيع ونهاية مأساوية.. القصة الكاملة لاعتصام “درامي” في ولاد يوسف ضواحي بني ملال', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a7%d8%b9%d8%aa%d8%af%d8%a7%d8%a1-%d8%b4%d9%86%d9%8a%d8%b9-%d9%88%d9%86%d9%87%d8%a7%d9%8a%d8%a9-%d9%85%d8%a3%d8%b3%d8%a7%d9%88%d9%8a%d8%a9-%d8%a7%d9%84%d9%82%d8%b5%d8%a9-%d8%a7%d9%84%d9%83%d8%a7/', 'summary': 'اعتداء شنيع ونهاية مأساوية.. القصة الكاملة لاعتصام “درامي” في ولاد يوسف ضواحي بني ملال. عاشت جماعة أولاد يوسف التابعة لإقليم بني ملال، يوم أمس الجمعة (11 يوليوز)، على وقع صدمة كبيرة، بعد تطورات مأساوية شهدها اعتصام ثلاثيني فوق خزان مائي يعرف محليا بـ”شاطو الماء”، والذي دام أزيد من أسبوعين، احتجاجا على ما وصفه بـ”الظروف الغامضة” التي رافقت وفاة والده. ورغم المحاولات المتكررة التي قامت بها السلطات المحلية والجهات الرسمية', 'size': 2}, {'id': '321', 'title': 'نهاية مأساوية لاعتصام خزان المياه بـ”أولاد يوسف”.. تدخل أمني ينتهي بسقوط المعتصم معلقا بحبله', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1084900.html', 'summary': 'نهاية مأساوية لاعتصام خزان المياه بـ”أولاد يوسف”.. تدخل أمني ينتهي بسقوط المعتصم معلقا بحبله. شهدت منطقة “أولاد يوسف” بإقليم بني ملال، نهاية مأساوية لاعتصام استمر لأكثر من أسبوعين على قمة خزان مائي، حيث تحولت محاولة إنهاء الوضع من قبل فرقة متخصصة من الدرك الملكي إلى كارثة. وبلغت الأزمة ذروتها حين أفضى التدخل الأمني إلى سقوط المعتصم، لكن المأساة اتخذت بعداً أكثر رعباً حين تبين أنه كان يلف حبلا حول ظهرت المقالة نهاية مأساوية لاعتصام خزان المياه بـ”أولاد يوسف”.. تدخل أمني ينتهي بسقوط المعتصم معلقا بحبله  .', 'size': 2}], 'main_title': 'اعتداء شنيع ونهاية مأساوية.. القصة الكاملة لاعتصام “درامي” في ولاد يوسف ضواحي بني ملال'}, {'community_id': '2', 'articles': [{'id': '318', 'title': 'ماكرون يستقبل الطالبي العلمي ورؤساء البرلمانات الفرنكوفونية بقصر الإليزيه', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1084912.html', 'summary': 'ماكرون يستقبل الطالبي العلمي ورؤساء البرلمانات الفرنكوفونية بقصر الإليزيه. استقبل الرئيس الفرنسي إيمانويل ماكرون، مساء يوم الجمعة 11 يوليوز 2025 بقصر الإليزيه، رئيس مجلس النواب، راشيد الطالبي العلمي، إلى جانب رؤساء البرلمانات المشاركين في أشغال الدورة 50 للجمعية البرلمانية للفرنكوفونية، التي تحتضنه العاصمة الفرنسية باريس في الفترة من 9 إلى 13 من الشهر الجاري. ويترأس الطالبي العلمي الوفد البرلماني المغربي المشارك في أشغال الجمعية ظهرت المقالة ماكرون يستقبل الطالبي العلمي ورؤساء البرلمانات الفرنكوفونية بقصر الإليزيه  .', 'size': 2}, {'id': '333', 'title': 'ماكرون يستقبل رئيس مجلس النواب الطالبي العلمي', 'source': 'rue20.com', 'link': 'https://rue20.com/919618.html', 'summary': 'ماكرون يستقبل رئيس مجلس النواب الطالبي العلمي.  الرباط استقبل الرئيس الفرنسي إيمانويل ماكرون، مساء يوم الجمعة 11 يوليوز 2025 بقصر الإليزيه، رئيس مجلس النواب، راشيد الطالبي العلمي، إلى جانب رؤساء البرلمانات المشاركين في أشغال الدورة 50 للجمعية البرلمانية للفرنكوفونية، التي تحتضنه العاصمة الفرنسية باريس في الفترة من 9 إلى 13 من الشهر الجاري. ويترأس السيد الطالبي العلمي الوفد البرلماني المغربي المشارك الخبر ماكرون يستقبل رئيس مجلس النواب الطالبي العلمي  .', 'size': 2}], 'main_title': 'ماكرون يستقبل الطالبي العلمي ورؤساء البرلمانات الفرنكوفونية بقصر الإليزيه'}, {'community_id': '6', 'articles': [{'id': '329', 'title': 'الرباط تحتضن اجتماعات حاسمة لمشروع أنبوب الغاز الإفريقي', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a7%d9%84%d8%b1%d8%a8%d8%a7%d8%b7-%d8%aa%d8%ad%d8%aa%d8%b6%d9%86-%d8%a7%d8%ac%d8%aa%d9%85%d8%a7%d8%b9%d8%a7%d8%aa-%d8%ad%d8%a7%d8%b3%d9%85%d8%a9-%d9%84%d9%85%d8%b4%d8%b1%d9%88%d8%b9-%d8%a3%d9%86/', 'summary': 'الرباط تحتضن اجتماعات حاسمة لمشروع أنبوب الغاز الإفريقي. انعقدت يومي 10 و11 يوليوز الجاري بالرباط، اجتماعات رفيعة المستوى للجنة التقنية ولجنة التسيير الخاصة بمشروع أنبوب الغاز الإفريقي الأطلسي، بحضور المدراء العامين (وفرقهم التقنية والإدارية) للشركات الوطنية للبترول بالدول التي يعبرها الأنبوب، إلى جانب مفوض البنية التحتية والطاقة والرقمنة ومدير الطاقة والمعادن بالمجموعة الاقتصادية لدول غرب إفريقيا (سيدياو). وأوضح بلاغ للمكتب الوطني للهيدروكاربورات والمعادن،  الرباط تحتضن اجتماعات حاسمة لمشروع أنبوب الغاز الإفريقي     .', 'size': 2}, {'id': '344', 'title': 'اجتماعات بالرباط للجنة التقنية ولجنة تسيير مشروع أنبوب الغاز الإفريقي الأطلسي', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/224566/', 'summary': 'اجتماعات بالرباط للجنة التقنية ولجنة تسيير مشروع أنبوب الغاز الإفريقي الأطلسي. و م ع انعقدت يومي 10 و11 يوليوز الجاري بالرباط، اجتماعات رفيعة المستوى للجنة التقنية ولجنة التسيير الخاصة بمشروع أنبوب الغاز الإفريقي الأطلسي، بحضور المدراء العامين (وفرقهم التقنية والإدارية) للشركات الوطنية للبترول بالدول التي يعبرها الأنبوب، إلى جانب مفوض البنية التحتية والطاقة والرقمنة ومدير الطاقة والمعادن بالمجموعة الاقتصادية لدول غرب إفريقيا (سيدياو). وأوضح بلاغ', 'size': 2}], 'main_title': 'الرباط تحتضن اجتماعات حاسمة لمشروع أنبوب الغاز الإفريقي'}, {'community_id': '4', 'articles': [{'id': '331', 'title': 'حالة الطقس:  حار مع سحب على الساحل الأطلسي', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%ad%d8%a7%d9%84%d8%a9-%d8%a7%d9%84%d8%b7%d9%82%d8%b3-%d8%ad%d8%a7%d8%b1-%d9%85%d8%b9-%d8%b3%d8%ad%d8%a8-%d8%b9%d9%84%d9%89-%d8%a7%d9%84%d8%b3%d8%a7%d8%ad%d9%84-%d8%a7%d9%84%d8%a3%d8%b7%d9%84/', 'summary': 'حالة الطقس: حار مع سحب على الساحل الأطلسي. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليوم السبت، أن يبقى الطقس حارا نسبيا بداخل الأقاليم الجنوبية والجنوب الشرقي للبلاد. ويحتمل نزول قطرات مطرية بمنطقة طنجة، واللوكوس والشمال الغربي، مع تشكل سحب منخفضة في بداية الصباح والليل قرب السواحل المحيطية مع كتل من الضباب. كما يتوقع أن تكون السماء أحيانا غائمة بالجنوب الشرقي، مع احتمال تسجيل  حالة الطقس: حار مع سحب على الساحل الأطلسي     .', 'size': 3}, {'id': '345', 'title': 'طقس السبت.. حار نسبيا في عدة مناطق بالمملكة', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/224563/', 'summary': 'طقس السبت.. حار نسبيا في عدة مناطق بالمملكة. كواليس اليوم تتوقع المديرية العامة للأرصاد الجوية أن يبقى الطقس، اليوم السبت، حارا نسبيا بداخل الأقاليم الجنوبية والجنوب الشرقي للبلاد. ويحتمل نزول قطرات مطرية بمنطقة طنجة واللوكوس والشمال الغربي، مع تشكل سحب منخفضة في بداية الصباح والليل قرب السواحل المحيطية مع كتل من الضباب. كما يرتقب أن تكون السماء أحيانا غائمة بالجنوب الشرقي، مع', 'size': 2}, {'id': '350', 'title': 'توقعات أحوال الطقس اليوم السبت', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%aa%d9%88%d9%82%d8%b9%d8%a7%d8%aa-%d8%a3%d8%ad%d9%88%d8%a7%d9%84-%d8%a7%d9%84%d8%b7%d9%82%d8%b3-%d8%a7%d9%84%d9%8a%d9%88%d9%85-%d8%a7%d9%84%d8%b3%d8%a8%d8%aa-26/', 'summary': 'توقعات أحوال الطقس اليوم السبت. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليومه السبت، أن يبقى الطقس حارا نسبيا بداخل الأقاليم الجنوبية والجنوب الشرقي للبلاد. ويحتمل نزول قطرات مطرية بمنطقة طنجة، واللوكوس والشمال الغربي، مع تشكل سحب منخفضة في بداية الصباح والليل قرب السواحل المحيطية مع كتل من الضباب. كما يتوقع أن تكون السماء أحيانا غائمة بالجنوب الشرقي، مع …  توقعات أحوال الطقس اليوم السبت     .', 'size': 2}], 'main_title': 'حالة الطقس:  حار مع سحب على الساحل الأطلسي'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    