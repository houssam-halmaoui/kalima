<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 04/08/2025 - 12h28</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '92', 'title': 'بعد 45 سنة، إسبانيا تفرج عن الوثائق السرية وتفتح ملف المسيرة الخضراء', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/politic/410426.html', 'summary': 'بعد 45 سنة، إسبانيا تفرج عن الوثائق السرية وتفتح ملف المسيرة الخضراء. تتجه الحكومة الإسبانية للمصادقة على قانون جديد يرفع السرية عن آلاف الوثائق الرسمية التي تعود لما قبل سنة 1982، بما في ذلك تلك المتعلقة بالانسحاب', 'size': 2}, {'id': '247', 'title': 'شهادات جامعية مزورة تهز المشهد السياسي في إسبانيا', 'source': 'www.alalam.ma', 'link': 'https://www.alalam.ma/شهادات-جامعية-مزورة-تهز-المشهد-السياسي-في-إسبانيا_a28983.html', 'summary': 'شهادات جامعية مزورة تهز المشهد السياسي في إسبانيا. الفضيحة تدفع نوابا من اليسار واليمين إلى الاستقالة ودعوات متزايدة للشفافية والمحاسبة العلم...', 'size': 2}], 'main_title': 'بعد 45 سنة، إسبانيا تفرج عن الوثائق السرية وتفتح ملف المسيرة الخضراء'}, {'community_id': '1', 'articles': [{'id': '116', 'title': 'المضحك المبكي.. الجزائر تسن قانونا يسمح بسجن كل من لم يصرح بوجود شخص مغربي في بيته', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/world/410450.html', 'summary': 'المضحك المبكي.. الجزائر تسن قانونا يسمح بسجن كل من لم يصرح بوجود شخص مغربي في بيته. صادقت السلطات الجزائرية على قانون جديد للتعبئة العامة دخل حيز التنفيذ بعد نشره في الجريدة الرسمية بتاريخ 27 يوليو 2025، في خطوة تعكس التصعيد الممنهج', 'size': 2}, {'id': '315', 'title': 'عيش نهار تسمع خبار.. نظام الكابرانات يفرض التبليغ عن تواجد أجانب من دول يعاديها في أراضيه', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%b9%d9%8a%d8%b4-%d9%86%d9%87%d8%a7%d8%b1-%d8%aa%d8%b3%d9%85%d8%b9-%d8%ae%d8%a8%d8%a7%d8%b1-%d9%86%d8%b8%d8%a7%d9%85-%d8%a7%d9%84%d9%83%d8%a7%d8%a8%d8%b1%d8%a7%d9%86%d8%a7%d8%aa-%d9%8a%d9%81%d8%b1/', 'summary': 'عيش نهار تسمع خبار.. نظام الكابرانات يفرض التبليغ عن تواجد أجانب من دول يعاديها في أراضيه. في خطوة تعكس الممنهج الذي يدأب الكابرانات في الجزائر على ممارساته إزاء كل ما هو مغربي، صادقت السلطات الجزائرية على قانون جديد يعاقب الجزائريين في حال امتنعوا عن التبليغ عن أجانب من دول يعاديها نظام العسكر. ويتعلق القانون بالتعبئة العامة دخل حيز التنفيذ بعد نشره في الجريدة الرسمية بتاريخ 27 يوليو 2025، يجرم المواطنين في', 'size': 2}], 'main_title': 'المضحك المبكي.. الجزائر تسن قانونا يسمح بسجن كل من لم يصرح بوجود شخص مغربي في بيته'}, {'community_id': '4', 'articles': [{'id': '119', 'title': 'تصريح السكتيوي وحريمات بعد الفوز الهام للمنتخب المحلي على أنغولا', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/sport/lionatlas/410453.html', 'summary': 'تصريح السكتيوي وحريمات بعد الفوز الهام للمنتخب المحلي على أنغولا. أكد الناخب الوطني، طارق السكتيوي، اليوم الأحد بنيروبي، أن الفوز على أنغولا بهدفين دون رد، برسم الجولة الأولى من المجموعة الأولى لكأس أمم إفريقيا للاعبين', 'size': 3}, {'id': '182', 'title': 'السكتيوي : الفوز على أنغولا ثمرة النضج التكتيكي للاعبين', 'source': 'rue20.com', 'link': 'https://rue20.com/926264.html', 'summary': 'السكتيوي : الفوز على أنغولا ثمرة النضج التكتيكي للاعبين. . الرباط أكد الناخب الوطني، طارق السكتيوي، اليوم الأحد بنيروبي، أن الفوز على أنغولا بهدفين دون رد، برسم الجولة الأولى من المجموعة الأولى لكأس أمم إفريقيا للاعبين المحليين 2024، هو ثمرة النضج التكتيكي النموذجي للاعبي المنتخب الوطني. وفي ندوة صحافية أعقبت المباراة التي احتضنها ملعب نيايو الوطني، قال السكتيوي “كنا نعلم أن المباراة ستكون الخبر السكتيوي : الفوز على أنغولا ثمرة النضج التكتيكي للاعبين  .', 'size': 4}, {'id': '219', 'title': 'طارق السكتيوي: الفوز على أنغولا بهدفين ثمرة النضج التكتيكي النموذجي للاعبي المنتخب الوطني', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/225616/', 'summary': 'طارق السكتيوي: الفوز على أنغولا بهدفين ثمرة النضج التكتيكي النموذجي للاعبي المنتخب الوطني. محمد بنمسعود (ومع): أكد الناخب الوطني، طارق السكتيوي، اليوم الأحد بنيروبي، أن الفوز على أنغولا بهدفين دون رد، برسم الجولة الأولى من المجموعة الأولى لكأس أمم إفريقيا للاعبين المحليين 2024، هو ثمرة النضج التكتيكي النموذجي للاعبي المنتخب الوطني. وفي ندوة صحافية أعقبت المباراة التي احتضنها ملعب نيايو الوطني، قال السكتيوي “كنا نعلم أن المباراة ستكون', 'size': 3}, {'id': '374', 'title': 'طارق السكتيوي: الفوز على أنغولا ثمرة النضج التكتيكي للاعبين', 'source': 'machahid24.com', 'link': 'https://machahid24.com/sport/471500.html', 'summary': 'طارق السكتيوي: الفوز على أنغولا ثمرة النضج التكتيكي للاعبين. أكد الناخب الوطني طارق السكتيوي، أمس الأحد، بنيروبي، أن الفوز على أنغولا بهدفين دون رد، برسم الجولة الأولى من المجموعة الأولى لكأس أمم إفريقيا للاعبين المحليين 2024، هو ثمرة النضج التكتيكي النموذجي للاعبي المنتخب الوطني. وفي ندوة صحافية أعقبت المباراة التي احتضنها ملعب نيايو الوطني، قال السكتيوي: “كنا نعلم أن المباراة ستكون صعبة وعالية الإيقاع، …', 'size': 2}], 'main_title': 'السكتيوي : الفوز على أنغولا ثمرة النضج التكتيكي للاعبين'}, {'community_id': '3', 'articles': [{'id': '152', 'title': 'مراجعة التمويل ورفع تمثيلية النساء والشباب.. الداخلية تكشف خارطة التحضير لانتخابات 2026', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1090363.html', 'summary': 'مراجعة التمويل ورفع تمثيلية النساء والشباب.. الداخلية تكشف خارطة التحضير لانتخابات 2026. رسم وزير الداخلية عبد الوافي لفتيت، خلال اجتماعه مع قادة الأحزاب السياسية، ظهرت المقالة مراجعة التمويل ورفع تمثيلية النساء والشباب.. الداخلية تكشف خارطة التحضير لانتخابات 2026  .', 'size': 2}, {'id': '174', 'title': 'في لقائها بلفتيت.. الأحزاب "الصغرى" تشكو ضعف التمويل والحضور في الإعلام العمومي', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d9%81%d9%8a-%d9%84%d9%82%d8%a7%d8%a6%d9%87%d8%a7-%d8%a8%d9%84%d9%81%d8%aa%d9%8a%d8%aa-%d8%a7%d9%84%d8%a3%d8%ad%d8%b2%d8%a7%d8%a8-%d8%a7%d9%84%d8%b5%d8%ba%d8%b1%d9%89-%d8%aa%d8%b4%d9%83%d9%88-%d8%b6/', 'summary': 'في لقائها بلفتيت.. الأحزاب "الصغرى" تشكو ضعف التمويل والحضور في الإعلام العمومي. في سياق المشاورات الجارية حول الإعداد للاستحقاقات الانتخابية المقبلة، عبر عدد من ممثلي الأحزاب السياسية غير الممثلة في البرلمان، خلال لقاء تشاوري مع وزير الداخلية، عبد الوافي لفتيت، عن انشغالاتهم بشأن ما وصفوه بـ"ضعف التمويل والحضور الإعلامي"، مطالبين بمراجعة منظومة الدعم العمومي الموجه للأحزاب وتعزيز حضورهم في المشهد الإعلامي، وفق ما كشفه مصدر مطلع. وشكل  في لقائها بلفتيت.. الأحزاب "الصغرى" تشكو ضعف التمويل والحضور في الإعلام العمومي     .', 'size': 2}], 'main_title': 'مراجعة التمويل ورفع تمثيلية النساء والشباب.. الداخلية تكشف خارطة التحضير لانتخابات 2026'}, {'community_id': '6', 'articles': [{'id': '162', 'title': 'محامية حكيمي تتهم المشتكية بمحاولة ابتزازه وقاضي التحقيق يكشف تضارب تصريحاتها', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1090333.html', 'summary': 'محامية حكيمي تتهم المشتكية بمحاولة ابتزازه وقاضي التحقيق يكشف تضارب تصريحاتها. قدّمت صحيفة “ليكيب” سردا للتفاصيل التي أحاطت بقضية أشرف حكيمي، لاعب باريس سان جيرمان، التي وصلت إلى ردهات المحاكم، ويُتَّهم فيها الدولي المغربي بـ”الاعتداء الجنسي” على شابة فرنسية ذات 24 سنة، عام 2023، بالعاصمة الفرنسية باريس. ورصدت الجريدة الفرنسية الشّهادات التي قدّمتها أطراف القضية إلى المحققين، ومن بينها ما أدلى به حكيمي بقوله: “آميلي تكذب، ظهرت المقالة محامية حكيمي تتهم المشتكية بمحاولة ابتزازه وقاضي التحقيق يكشف تضارب تصريحاتها  .', 'size': 2}, {'id': '387', 'title': 'تطورات مفاجئة وسريعة في قضية اتهام أشرف حكيمي بالاغتصاب', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/225620/', 'summary': 'تطورات مفاجئة وسريعة في قضية اتهام أشرف حكيمي بالاغتصاب. شهدت الأزمة التي يواجهها اللاعب الدولي المغربي أشرف حكيمي مدافع فريق باريس سان جيرمان الفرنسي لكرة القدم، والمتعلقة باتهامه في قضية اغتصاب، تطورات مفاجئة وسريعة. وتعود وقائع القضية إلى ليلة السبت 25 فبراير 2023 عشية مباراة “الكلاسيكو” بين مارسيليا وباريس سان جيرمان والتي غاب عنها اللاعب المغربي. وفي تطور مثير متعلق بالقضية، كشفت صحيفة “ليكيب”', 'size': 2}], 'main_title': 'محامية حكيمي تتهم المشتكية بمحاولة ابتزازه وقاضي التحقيق يكشف تضارب تصريحاتها'}, {'community_id': '7', 'articles': [{'id': '176', 'title': 'نشرة إنذارية.. موجة حر وزخات رعدية مصحوبة بالبرد ورياح من الأحد إلى الجمعة', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d9%86%d8%b4%d8%b1%d8%a9-%d8%a5%d9%86%d8%b0%d8%a7%d8%b1%d9%8a%d8%a9-%d9%85%d9%88%d8%ac%d8%a9-%d8%ad%d8%b1-%d9%88%d8%b2%d8%ae%d8%a7%d8%aa-%d8%b1%d8%b9%d8%af%d9%8a%d8%a9-%d9%85%d8%b5%d8%ad%d9%88%d8%a8-2/', 'summary': 'نشرة إنذارية.. موجة حر وزخات رعدية مصحوبة بالبرد ورياح من الأحد إلى الجمعة. أفادت المديرية العامة للأرصاد الجوية أنه يرتقب تسجيل موجة حر من الأحد إلى الجمعة، وكذا زخات رعدية مصحوبة بتساقط البرد وبهبات رياح اليوم الأحد بعدد من مناطق المملكة. وأوضحت المديرية في نشرة إنذارية من مستوى يقظة برتقالي، أنه يرتقب تسجيل درجات حرارة تتراوح ما بين 40 و44 درجة من اليوم الأحد إلى يوم غد الاثنين  نشرة إنذارية.. موجة حر وزخات رعدية مصحوبة بالبرد ورياح من الأحد إلى الجمعة     .', 'size': 4}, {'id': '179', 'title': 'نشرة إنذارية.. موجة حر وزخات رعدية ورياح من الأحد إلى الجمعة بهذه المدن', 'source': 'rue20.com', 'link': 'https://rue20.com/926277.html', 'summary': 'نشرة إنذارية.. موجة حر وزخات رعدية ورياح من الأحد إلى الجمعة بهذه المدن. . الرباط أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب تسجيل موجة حر من الأحد إلى الجمعة، وكذا زخات رعدية مصحوبة بتساقط البرد وبهبات رياح اليوم الأحد بعدد من مناطق المملكة. وأوضحت المديرية في نشرة إنذارية من مستوى يقظة برتقالي، أنه يرتقب تسجيل درجات حرارة تتراوح ما بين 40 و44 درجة من اليوم الأحد إلى الخبر نشرة إنذارية.. موجة حر وزخات رعدية ورياح من الأحد إلى الجمعة بهذه المدن  .', 'size': 3}, {'id': '194', 'title': 'موجة حر وزخات رعدية من الأحد إلى الجمعة بعدة مناطق', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/471468.html', 'summary': 'موجة حر وزخات رعدية من الأحد إلى الجمعة بعدة مناطق. أفادت المديرية العامة للأرصاد الجوية، بأنه يرتقب تسجيل موجة حر من الأحد إلى الجمعة، وكذا زخات رعدية مصحوبة بتساقط البرد وبهبات رياح اليوم الأحد بعدد من مناطق المملكة.', 'size': 2}, {'id': '232', 'title': 'موجة حر وزخات رعدية حتى الجمعة بعدد من المناطق', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d9%85%d9%88%d8%ac%d8%a9-%d8%ad%d8%b1-%d9%88%d8%b2%d8%ae%d8%a7%d8%aa-%d8%b1%d8%b9%d8%af%d9%8a%d8%a9-%d8%ad%d8%aa%d9%89-%d8%a7%d9%84%d8%ac%d9%85%d8%b9%d8%a9-%d8%a8%d8%b9%d8%af%d8%af-%d9%85%d9%86-%d8%a7/', 'summary': 'موجة حر وزخات رعدية حتى الجمعة بعدد من المناطق. المساء اليوم: أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب تسجيل موجة حر من الأحد إلى الجمعة، وكذا زخات رعدية مصحوبة بتساقط البرد وبهبات رياح اليوم الأحد بعدد من مناطق المملكة. وأوضحت المديرية في نشرة إنذارية', 'size': 4}, {'id': '333', 'title': 'نشرة إنذارية تحذر من موجة حر وزخات رعدية بعدد من مناطق المملكة', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1090478.html', 'summary': 'نشرة إنذارية تحذر من موجة حر وزخات رعدية بعدد من مناطق المملكة. أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب تسجيل موجة حر من اليوم الاثنين إلى يوم الجمعة المقبل، وزخات رعدية مصحوبة بتساقط البر د وبهبات رياح اليوم الإثنين، بعدد من مناطق المملكة. وأوضحت المديرية، في نشرة إنذارية من مستوى يقظة برتقالي، أنه من المرتقب تسجيل درجات حرارة تتراوح ما بين 40 و44 درجة اليوم الاثنين بعمالات ظهرت المقالة نشرة إنذارية تحذر من موجة حر وزخات رعدية بعدد من مناطق المملكة  .', 'size': 4}], 'main_title': 'نشرة إنذارية.. موجة حر وزخات رعدية مصحوبة بالبرد ورياح من الأحد إلى الجمعة'}, {'community_id': '2', 'articles': [{'id': '285', 'title': 'رغم الطقس الحار.. زخات مطرية وعواصف رعدية منتظرة اليوم بهذه المناطق المغربية', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/410463.html', 'summary': 'رغم الطقس الحار.. زخات مطرية وعواصف رعدية منتظرة اليوم بهذه المناطق المغربية. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الاثنين، أن يظل الطقس حارا بكل من جنوب الريف والمناطق المتواجدة غرب الأطلس الكبير وواد ملوية والجنوب الشرقي،', 'size': 5}, {'id': '330', 'title': 'توقعات طقس اليوم الاثنين بالبلاد', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/320163/', 'summary': 'توقعات طقس اليوم الاثنين بالبلاد. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الاثنين، أن يظل الطقس حارا بكل من جنوب الريف والمناطق المتواجدة غرب الأطلس الكبير وواد ملوية والجنوب الشرقي، وداخل الأقاليم الصحراوية للمملكة. ويرتقب نزول قطرات مطرية أو زخات رعدية مصحوبة بهبات الرياح تحت العواصف الرعدية، مع احتمال تساقط البرد محليا فوق مرتفعات الأطلس والهضاب العليا الشرقية والجنوب الشرقي', 'size': 5}, {'id': '354', 'title': 'طقس حار مع زخات رعدية متوقع اليوم الاثنين', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%b7%d9%82%d8%b3-%d8%ad%d8%a7%d8%b1-%d9%85%d8%b9-%d8%b2%d8%ae%d8%a7%d8%aa-%d8%b1%d8%b9%d8%af%d9%8a%d8%a9-%d9%85%d8%aa%d9%88%d9%82%d8%b9-%d8%a7%d9%84%d9%8a%d9%88%d9%85-%d8%a7%d9%84%d8%a7%d8%ab-2/', 'summary': 'طقس حار مع زخات رعدية متوقع اليوم الاثنين. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الاثنين، أن يظل الطقس حارا بكل من جنوب الريف والمناطق المتواجدة غرب الأطلس الكبير وواد ملوية والجنوب الشرقي، وداخل الأقاليم الصحراوية للمملكة. ويرتقب نزول قطرات مطرية أو زخات رعدية مصحوبة بهبات الرياح تحت العواصف الرعدية، مع احتمال تساقط البرد محليا فوق مرتفعات الأطلس والهضاب العليا الشرقية والجنوب الشرقي  طقس حار مع زخات رعدية متوقع اليوم الاثنين     .', 'size': 5}, {'id': '355', 'title': 'طقس اليوم: استمرار الأجواء الحارة بهذه المناطق', 'source': 'soltana.ma', 'link': 'https://soltana.ma/1357580.html', 'summary': 'طقس اليوم: استمرار الأجواء الحارة بهذه المناطق. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الاثنين، أن يظل الطقس حارا بكل من جنوب الريف والمناطق المتواجدة غرب الأطلس الكبير وواد ملوية والجنوب الشرقي، وداخل الأقاليم الصحراوية للمملكة. ويرتقب نزول قطرات مطرية أو زخات رعدية مصحوبة بهبات الرياح تحت العواصف الرعدية، مع احتمال تساقط البرد محليا فوق مرتفعات الأطلس والهضاب العليا الشرقية والجنوب الشرقي', 'size': 5}, {'id': '397', 'title': 'توقعات أحوال الطقس لليوم الإثنين', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%aa%d9%88%d9%82%d8%b9%d8%a7%d8%aa-%d8%a3%d8%ad%d9%88%d8%a7%d9%84-%d8%a7%d9%84%d8%b7%d9%82%d8%b3-%d9%84%d9%84%d9%8a%d9%88%d9%85-%d8%a7%d9%84%d8%a5%d8%ab%d9%86%d9%8a%d9%86-8/', 'summary': 'توقعات أحوال الطقس لليوم الإثنين. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الاثنين، أن يظل الطقس حارا بكل من جنوب الريف والمناطق المتواجدة غرب الأطلس الكبير وواد ملوية والجنوب الشرقي، وداخل الأقاليم الصحراوية للمملكة. ويرتقب نزول قطرات مطرية أو زخات رعدية مصحوبة بهبات الرياح تحت العواصف الرعدية، مع احتمال تساقط البرد محليا فوق مرتفعات الأطلس والهضاب العليا الشرقية …  توقعات أحوال الطقس لليوم الإثنين     .', 'size': 5}], 'main_title': 'رغم الطقس الحار.. زخات مطرية وعواصف رعدية منتظرة اليوم بهذه المناطق المغربية'}, {'community_id': '8', 'articles': [{'id': '332', 'title': 'سوق الشغل في 2025.. تراجع عدد العاطلين وارتفاع مقلق في مؤشرات الهشاشة المهنية', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1090473.html', 'summary': 'سوق الشغل في 2025.. تراجع عدد العاطلين وارتفاع مقلق في مؤشرات الهشاشة المهنية. أفادت المندوبية السامية للتخطيط، في مذكرتها الإخبارية الأخيرة حول وضعية سوق الشغل، بأن معدل البطالة بلغ 12,8 في المائة خلال الفصل الثاني من سنة 2025. وأوضحت المندوبية أن ” معدل البطالة انخفض بـ0,3 نقطة، ما بين الفصل الثاني من 2024 ونفس الفصل من 2025، منتقلا من 13,1% إلى 12,8%. وقد انتقل هذا المعدل من 16,7% ظهرت المقالة سوق الشغل في 2025.. تراجع عدد العاطلين وارتفاع مقلق في مؤشرات الهشاشة المهنية  .', 'size': 3}, {'id': '367', 'title': 'مندوبية التخطيط تكشف تراجع معدلات البطالة وانتعاش سوق الشغل', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/471581.html', 'summary': 'مندوبية التخطيط تكشف تراجع معدلات البطالة وانتعاش سوق الشغل. أفادت المندوبية السامية للتخطيط، في مذكرتها الإخبارية الأخيرة حول وضعية سوق الشغل، بأن معدل البطالة بلغ 12,8 في المائة خلال الفصل الثاني من سنة 2025. وأوضحت المندوبية أن “معدل البطالة انخفض بـ0,3 نقطة، ما بين الفصل الثاني من 2024 ونفس الفصل من 2025، منتقلا من 13,1 بالمائة إلى 12,8 بالمائة ، وقد انتقل هذا المعدل …', 'size': 3}, {'id': '392', 'title': 'المندوبية السامية للتخطيط ترصد تراجع معدلات النشاط والشغل خلال الفصل الثاني من سنة 2025', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d9%85%d9%86%d8%af%d9%88%d8%a8%d9%8a%d8%a9-%d8%a7%d9%84%d8%b3%d8%a7%d9%85%d9%8a%d8%a9-%d9%84%d9%84%d8%aa%d8%ae%d8%b7%d9%8a%d8%b7-%d8%aa%d8%b1%d8%b5%d8%af-%d8%aa%d8%b1%d8%a7%d8%ac%d8%b9/', 'summary': 'المندوبية السامية للتخطيط ترصد تراجع معدلات النشاط والشغل خلال الفصل الثاني من سنة 2025. كشفت المندوبية السامية للتخطيط في مذكرة إخبارية حديثة عن تسجيل تراجع ملحوظ في معدلات النشاط والشغل بالمغرب خلال الفصل الثاني من سنة 2025، مقارنة بالفترة نفسها من السنة الماضية، ما يعكس دينامية مركبة في سوق العمل الوطني، بين تراجع مساهمة الوسط القروي وارتفاع الشغل بالوسط الحضري. وانخفض معدل النشاط بـ0,8 نقطة، لينتقل من …  المندوبية السامية للتخطيط ترصد تراجع معدلات النشاط والشغل خلال الفصل الثاني من سنة 2025     .', 'size': 3}], 'main_title': 'سوق الشغل في 2025.. تراجع عدد العاطلين وارتفاع مقلق في مؤشرات الهشاشة المهنية'}, {'community_id': '5', 'articles': [{'id': '375', 'title': 'غزة..  أزمة تعطيش شديدة وسط ارتفاع أعداد ضحايا التجويع', 'source': 'machahid24.com', 'link': 'https://machahid24.com/international/471492.html', 'summary': 'غزة.. أزمة تعطيش شديدة وسط ارتفاع أعداد ضحايا التجويع. في اليوم الـ668 من حرب الإبادة على غزة، حذرت الأمم المتحدة اليوم الاثنين من أن الأغلبية الساحقة من أهالي قطاع غزة غير قادرين على الوصول إلى مياه الشرب وخدمات الصرف الصحي،', 'size': 2}, {'id': '389', 'title': 'عالم بلا إنسانية: التجويع والتعطيش سلاح لإفناء سكان غزة', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%b9%d8%a7%d9%84%d9%85-%d8%a8%d9%84%d8%a7-%d8%a5%d9%86%d8%b3%d8%a7%d9%86%d9%8a%d8%a9-%d8%a7%d9%84%d8%aa%d8%ac%d9%88%d9%8a%d8%b9-%d9%88%d8%a7%d9%84%d8%aa%d8%b9%d8%b7%d9%8a%d8%b4-%d8%b3%d9%84%d8%a7/', 'summary': 'عالم بلا إنسانية: التجويع والتعطيش سلاح لإفناء سكان غزة. المساء اليوم – وكالات: حذرت الأمم المتحدة، اليوم الاثنين، من أن الأغلبية الساحقة من أهالي قطاع غزة غير قادرين على الوصول إلى مياه الشرب وخدمات الصرف الصحي، في حين يشتد التجويع جراء حصار الاحتلال مع', 'size': 2}], 'main_title': 'غزة..  أزمة تعطيش شديدة وسط ارتفاع أعداد ضحايا التجويع'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    