<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 22/09/2025 - 12h25</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '67', 'title': 'الدوري الملكي المغربي للقفز على الحواجز (مرحلة تطوان) : الفارس عبد السلام بناني سميرس يفوز بجائزة صاحب السمو الملكي ولي العهد الأمير مولاي الحسن،المحتسبة ضمن الجائزة الكبرى لكأس العالم', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/206546', 'summary': 'الدوري الملكي المغربي للقفز على الحواجز (مرحلة تطوان) : الفارس عبد السلام بناني سميرس يفوز بجائزة صاحب السمو الملكي ولي العهد الأمير مولاي الحسن،المحتسبة ضمن الجائزة الكبرى لكأس العالم.  فاز الفارس،عبد السلام بناني سميرس، اليوم الأحد بحلبة “ إيبيكا” بتطوان، بجائزة صاحب السمو الملكي ولي العهد الأمير مولاي الحسن، المحتسبة ضمن الجائزة الكبرى لكأس العالم 4 نجوم، في إطار منافسات المرحلة الأولى من الدورة الرابعة عشرة للدوري الملكي المغربي الدولي للقفز على الحواجز. وجاء تتويج الفارس عبد السلام بناني سميرس، حامل لقب', 'size': 2}, {'id': '223', 'title': 'الفارس عبد السلام بناني سميرس يفوز بجائزة ولي العهد الأمير مولاي الحسن', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/227348/', 'summary': 'الفارس عبد السلام بناني سميرس يفوز بجائزة ولي العهد الأمير مولاي الحسن. فاز الفارس، عبد السلام بناني سميرس، اليوم الأحد بحلبة “إيبيكا” بتطوان، بجائزة صاحب السمو الملكي ولي العهد الأمير مولاي الحسن، المحتسبة ضمن الجائزة الكبرى لكأس العالم 4 نجوم، في إطار منافسات المرحلة الأولى من الدورة الرابعة عشرة للدوري الملكي المغربي الدولي للقفز على الحواجز. وجاء تتويج الفارس عبد السلام بناني سميرس، حامل لقب بطولة المغرب،', 'size': 2}], 'main_title': 'الدوري الملكي المغربي للقفز على الحواجز (مرحلة تطوان) : الفارس عبد السلام بناني سميرس يفوز بجائزة صاحب السمو الملكي ولي العهد الأمير مولاي الحسن،المحتسبة ضمن الجائزة الكبرى لكأس العالم'}, {'community_id': '6', 'articles': [{'id': '68', 'title': 'بتعليمات سامية من جلالة الملك، أخنوش يترأس الوفد المغربي المشارك في الدورة الـ80 للجمعية العامة للأمم المتحدة', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/206541', 'summary': 'بتعليمات سامية من جلالة الملك، أخنوش يترأس الوفد المغربي المشارك في الدورة الـ80 للجمعية العامة للأمم المتحدة.  بتعليمات سامية من صاحب الجلالة الملك محمد السادس، يترأس السيد عزيز أخنوش، رئيس الحكومة، الوفد المغربي المشارك في أشغال الدورة الثمانين للجمعية العامة للأمم المتحدة، التي تنعقد بنيويورك. ويرافق السيد أخنوش خلال هذه الدورة، وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج، السيد ناصر بوريطة. وستتميز الدورة الثمانون للجمعية العامة للأمم المتحدة، التي تنعقد', 'size': 5}, {'id': '124', 'title': 'بتعليمات ملكية.. أخنوش يترأس الوفد المغربي المشارك في أشغال الجمعية العامة للأمم المتحدة', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a8%d8%aa%d8%b9%d9%84%d9%8a%d9%85%d8%a7%d8%aa-%d9%85%d9%84%d9%83%d9%8a%d8%a9-%d8%a3%d8%ae%d9%86%d9%88%d8%b4-%d9%8a%d8%aa%d8%b1%d8%a3%d8%b3-%d8%a7%d9%84%d9%88%d9%81%d8%af-%d8%a7%d9%84%d9%85%d8%ba/', 'summary': 'بتعليمات ملكية.. أخنوش يترأس الوفد المغربي المشارك في أشغال الجمعية العامة للأمم المتحدة. بتعليمات سامية من صاحب الجلالة الملك محمد السادس، يترأس السيد عزيز أخنوش، رئيس الحكومة، الوفد المغربي المشارك في أشغال الدورة الثمانين للجمعية العامة للأمم المتحدة، التي تنعقد بنيويورك. ويرافق السيد أخنوش خلال هذه الدورة، وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج، السيد ناصر بوريطة. وستتميز الدورة الثمانون للجمعية العامة للأمم المتحدة، التي تنعقد حول', 'size': 5}, {'id': '141', 'title': 'بتعليمات ملكية.. أخنوش يترأس الوفد المغربي في الدورة الـ80 للجمعية العامة للأمم المتحدة', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/324015/', 'summary': 'بتعليمات ملكية.. أخنوش يترأس الوفد المغربي في الدورة الـ80 للجمعية العامة للأمم المتحدة. بتعليمات سامية من صاحب الجلالة الملك محمد السادس، يترأس السيد عزيز أخنوش، رئيس الحكومة، الوفد المغربي المشارك في أشغال الدورة الثمانين للجمعية العامة للأمم المتحدة، التي تنعقد بنيويورك. ويرافق أخنوش خلال هذه الدورة، وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج، السيد ناصر بوريطة. وستتميز الدورة الثمانون للجمعية العامة للأمم المتحدة، التي تنعقد حول موضوع', 'size': 5}, {'id': '163', 'title': 'أخنوش يترأس الوفد المغربي المشارك في الدورة الـ80 للجمعية العامة للأمم المتحدة', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1101522.html', 'summary': 'أخنوش يترأس الوفد المغربي المشارك في الدورة الـ80 للجمعية العامة للأمم المتحدة. يترأس رئيس الحكومة، عزيز أخنوش، الوفد المغربي المشارك في أشغال الدورة الثمانين للجمعية العامة للأمم المتحدة، التي تنعقد بنيويورك، وذلك بتعليمات من الملك محمد السادس. ويرافق أخنوش خلال هذه الدورة، التي تنعقد يوم الثلاثاء 23 شتنبر، وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج، ناصر بوريطة. وستتميز الدورة الثمانون للجمعية العامة للأمم المتحدة، التي تنعقد ظهرت المقالة أخنوش يترأس الوفد المغربي المشارك في الدورة الـ80 للجمعية العامة للأمم المتحدة  .', 'size': 5}, {'id': '175', 'title': 'بتعليمات ملكية.. رئيس الحكومة يترأس الوفد المغربي في الدورة الثمانين للجمعية العامة للأمم المتحدة', 'source': 'rue20.com', 'link': 'https://rue20.com/938420.html', 'summary': 'بتعليمات ملكية.. رئيس الحكومة يترأس الوفد المغربي في الدورة الثمانين للجمعية العامة للأمم المتحدة.  . الرباط بتعليمات سامية من الملك محمد السادس، يترأس عزيز أخنوش، رئيس الحكومة، الوفد المغربي المشارك في أشغال الدورة الثمانين للجمعية العامة للأمم المتحدة، التي تنعقد بنيويورك. ويرافق أخنوش خلال هذه الدورة، وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج، ناصر بوريطة. وستتميز الدورة الثمانون للجمعية العامة للأمم المتحدة، التي تنعقد حول موضوع الخبر بتعليمات ملكية.. رئيس الحكومة يترأس الوفد المغربي في الدورة الثمانين للجمعية العامة للأمم المتحدة  .', 'size': 5}], 'main_title': 'بتعليمات سامية من جلالة الملك، أخنوش يترأس الوفد المغربي المشارك في الدورة الـ80 للجمعية العامة للأمم المتحدة'}, {'community_id': '2', 'articles': [{'id': '70', 'title': 'جلالة الملك يهنئ رئیسة جمهورية مالطا بمناسبة عيد استقلال بلادها', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/206526', 'summary': 'جلالة الملك يهنئ رئیسة جمهورية مالطا بمناسبة عيد استقلال بلادها. الأحداث من الرباط بعث صاحب الجلالة الملك محمد السادس برقية تهنئة إلى السيدة ميريام سبيتيري ديبونو، رئیسة جمهورية مالطا، وذلك بمناسبة عيد استقلال بلادها. وأعرب جلالة الملك، في هذه البرقية، عن أحر التهاني للرئيسة ميريام سبيتيري ديبونو، مقرونة بأصدق المتمنيات للشعب المالطي الصديق باطراد الرخاء والازدهار. ومما جاء في برقية جلالة الملك:” وأغتنمها فرصة سانحة', 'size': 2}, {'id': '237', 'title': 'الملك محمد السادس يبعث برقية تهنئة إلى رئیسة جمهورية مالطا بمناسبة عيد استقلال بلادها', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%85%d8%ad%d9%85%d8%af-%d8%a7%d9%84%d8%b3%d8%a7%d8%af%d8%b3-%d9%8a%d8%a8%d8%b9%d8%ab-%d8%a8%d8%b1%d9%82%d9%8a%d8%a9-%d8%aa%d9%87%d9%86%d8%a6%d8%a9-%d8%a5%d9%84%d9%89-6/', 'summary': 'الملك محمد السادس يبعث برقية تهنئة إلى رئیسة جمهورية مالطا بمناسبة عيد استقلال بلادها. بعث الملك محمد السادس، برقية تهنئة إلى ميريام سبيتيري ديبونو، رئیسة جمهورية مالطا، وذلك بمناسبة عيد استقلال بلادها. وأعرب الملك محمد السادس، في هذه البرقية، عن أحر التهاني للرئيسة ميريام سبيتيري ديبونو، مقرونة بأصدق المتمنيات للشعب المالطي الصديق باطراد الرخاء والازدهار. ومما جاء في برقية الملك محمد السادس:” وأغتنمها فرصة سانحة لأعرب لفخامتكن …  الملك محمد السادس يبعث برقية تهنئة إلى رئیسة جمهورية مالطا بمناسبة عيد استقلال بلادها     .', 'size': 2}], 'main_title': 'جلالة الملك يهنئ رئیسة جمهورية مالطا بمناسبة عيد استقلال بلادها'}, {'community_id': '5', 'articles': [{'id': '114', 'title': 'بعد إضعاف موقفه في سباق الكرة الذهبية..الإعلام الفرنسي يوجه سؤالا خبيثا لمدرب باريس سان جيرمان بخصوص حكيمي', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/sport/proplayers/413153.html', 'summary': 'بعد إضعاف موقفه في سباق الكرة الذهبية..الإعلام الفرنسي يوجه سؤالا خبيثا لمدرب باريس سان جيرمان بخصوص حكيمي. يواصل الإعلام الفرنسي إثارة الفتن حول قضية أشرف حكيمي مع فتاة تزعم تعرضها لاعتداء جنسي، في محاولة واضحة لربط الوضع القانوني بالمسار الرياضي للاعب، فقد', 'size': 2}, {'id': '136', 'title': 'هل سيغيب حكيمي عن حفل الكرة الذهبية؟', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/324022/', 'summary': 'هل سيغيب حكيمي عن حفل الكرة الذهبية؟. يترقب عشاق كرة القدم العالمية والمغربية على وجه الخصوص حفل الكرة الذهبية الذي يقام في باريس وسط اهتمام كبير بمسار الدولي المغربي أشرف حكيمي، غير أن مدافع باريس سان جيرمان قد يغيب عن هذا الموعد التاريخي بسبب تضارب في المواعيد فرضته الظروف المناخية في فرنسا. فبعدما كان مقرراً أن يلتقي فريقه باريس سان جيرمان بغريمه', 'size': 2}], 'main_title': 'بعد إضعاف موقفه في سباق الكرة الذهبية..الإعلام الفرنسي يوجه سؤالا خبيثا لمدرب باريس سان جيرمان بخصوص حكيمي'}, {'community_id': '7', 'articles': [{'id': '155', 'title': 'الرشيدية.. إدانة شقيق برلماني سابق بـ10 أشهر حبسا نافذا بعد حجز 15 طنا من الدقيق الفاسد', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1101537.html', 'summary': 'الرشيدية.. إدانة شقيق برلماني سابق بـ10 أشهر حبسا نافذا بعد حجز 15 طنا من الدقيق الفاسد. أصدرت المحكمة الابتدائية بالرشيدية، الخميس 18 شتنبر 2025، حكما يقضي بإدانة شقيق نائب برلماني سابق بعشرة أشهر حبسا نافذا وغرامة مالية قدرها 10 آلاف درهم، وذلك على خلفية قضية تتعلق بالتلاعب بالدقيق المدعم الفاسد. وأوضح مصدر مطلع أن المحكمة تابعت المتهم بتهم مرتبطة بتخزين وترويج مواد غذائية غير صالحة للاستهلاك، عقب العملية الأمنية التي باشرتها ظهرت المقالة الرشيدية.. إدانة شقيق برلماني سابق بـ10 أشهر حبسا نافذا بعد حجز 15 طنا من الدقيق الفاسد  .', 'size': 2}, {'id': '291', 'title': 'محكمة الرشيدية: من وراء القضبان إلى العقوبات البديلة.. الحكم في ملف الدقيق المدعم الفاسد', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/206572', 'summary': 'محكمة الرشيدية: من وراء القضبان إلى العقوبات البديلة.. الحكم في ملف الدقيق المدعم الفاسد.  أصدرت المحكمة الابتدائية بالرشيدية، يوم الخميس 18 شتنبر 2025، حكمًا في ملف المسمى (ع. إ)، الذي كان متابعًا بتهمة بيع الدقيق المدعم الفاسد. في المرحلة الأولى، قضت المحكمة في حقه بـ 10 أشهر حبسًا نافذًا، مع غرامة مالية قدرها 10,000 درهم، غير أنها قررت استبدال العقوبة السجنية بنظام العقوبات البديلة، وذلك عبر إلزام المعني', 'size': 2}], 'main_title': 'الرشيدية.. إدانة شقيق برلماني سابق بـ10 أشهر حبسا نافذا بعد حجز 15 طنا من الدقيق الفاسد'}, {'community_id': '1', 'articles': [{'id': '239', 'title': 'الأمن يتفاعل مع شريط على مواقع التواصل ويوقف مهدد سلامة المواطنين بتارودانت', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d8%a3%d9%85%d9%86-%d9%8a%d8%aa%d9%81%d8%a7%d8%b9%d9%84-%d9%85%d8%b9-%d8%b4%d8%b1%d9%8a%d8%b7-%d8%b9%d9%84%d9%89-%d9%85%d9%88%d8%a7%d9%82%d8%b9-%d8%a7%d9%84%d8%aa%d9%88%d8%a7%d8%b5%d9%84/', 'summary': 'الأمن يتفاعل مع شريط على مواقع التواصل ويوقف مهدد سلامة المواطنين بتارودانت. تفاعلت ولاية أمن أكادير، بجدية كبيرة، مع شريط فيديو منشور على صفحات مواقع التواصل الاجتماعي، يظهر فيه شخص يحوز أسلحة بيضاء في ظروف تشكل خطرا على الأشخاص والممتلكات بمدينة تارودانت. وحسب مصدر أمني، أسفرت الأبحاث والتحريات المنجزة على ضوء هذا الشريط، بتنسيق مع مصالح المديرية العامة لمراقبة التراب الوطني، عن تحديد هوية المشتبه …  الأمن يتفاعل مع شريط على مواقع التواصل ويوقف مهدد سلامة المواطنين بتارودانت     .', 'size': 2}, {'id': '386', 'title': 'بتنسيق مع الديستي: أمن أكادير يطيح بمجرم خطير', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/227384/', 'summary': 'بتنسيق مع الديستي: أمن أكادير يطيح بمجرم خطير. تفاعلت ولاية أمن أكادير بجدية مع شريط فيديو منشور على مواقع التواصل الاجتماعي، يظهر فيه شخص يحمل أسلحة بيضاء في ظروف تشكل خطرا على الأشخاص والممتلكات بمدينة تارودانت. وقد أسفرت التحريات المنجزة، بتنسيق مع مصالح المديرية العامة لمراقبة التراب الوطني، عن تحديد هوية المشتبه فيه، قبل أن يتم توقيفه بالمنطقة القروية “مشرع العين” بضواحي تارودانت.', 'size': 2}], 'main_title': 'الأمن يتفاعل مع شريط على مواقع التواصل ويوقف مهدد سلامة المواطنين بتارودانت'}, {'community_id': '3', 'articles': [{'id': '265', 'title': 'استمرار الاضطرابات بمطارات أوروبية', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d8%a7%d8%b3%d8%aa%d9%85%d8%b1%d8%a7%d8%b1-%d8%a7%d9%84%d8%a7%d8%b6%d8%b7%d8%b1%d8%a7%d8%a8%d8%a7%d8%aa-%d8%a8%d9%85%d8%b7%d8%a7%d8%b1%d8%a7%d8%aa-%d8%a3%d9%88%d8%b1%d9%88%d8%a8%d9%8a%d8%a9-1628014.html', 'summary': 'استمرار الاضطرابات بمطارات أوروبية. تواصلت، اليوم الإثنين، الاضطرابات التي تشهدها عدة مطارات أوروبية عقب هجوم إلكتروني وقع يوم الجمعة الماضي، ومازالت مطارات أوروبية كبرى، من بينها دبلن وبروكسل ولندن هيثرو، تواجه اضطرابات مستمرة بعد أيام من الهجوم. وكان مطار العاصمة الألمانية من بين أكثر المطارات المتضررة، حيث دعا المسافرون إلى إتمام إجراءات تسجيل الوصول عبر الإنترنت واستخدام الأكشاك الذاتية  استمرار الاضطرابات بمطارات أوروبية     - هسبريس جريدة إلكترونية مغربية .', 'size': 2}, {'id': '327', 'title': 'استمرار الاضطرابات في مطارات أوروبية بسبب هجوم إلكتروني', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-590364.html', 'summary': 'استمرار الاضطرابات في مطارات أوروبية بسبب هجوم إلكتروني. تواصلت، الاثنين، الاضطرابات التي تشهدها عدة مطارات أوروبية عقب هجوم إلكتروني وقع يوم الجمعة الماضي، ولا تزال مطارات أوروبية كبرى، من بينها دبلن وبروكسل ولندن هيثرو، تواجه اضطرابات مستمرة بعد أيام من الهجوم. وكان مطار العاصمة الألمانية من بين أكثر المطارات المتضررة، حيث دعا المسافرين إلى إتمام إجراءات تسجيل الوصول عبر الإنترنت', 'size': 2}], 'main_title': 'استمرار الاضطرابات بمطارات أوروبية'}, {'community_id': '4', 'articles': [{'id': '281', 'title': 'مؤشر تطور السوق .. المغرب يسجل تقدما بـ 7 درجات', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-659409.html', 'summary': 'مؤشر تطور السوق .. المغرب يسجل تقدما بـ 7 درجات. هبة بريس سجل المغرب تقدماً ملموساً في مؤشر تطور السوق، أحد المحاور الأساسية ضمن التقرير السنوي للابتكار الصادر عن المنظمة العالمية للملكية الفكرية (الويبو)، بشراكة مع جامعة كورنيل والمعهد الأوروبي لإدارة الأعمال (إنسياد). ووفقاً للتقرير، ارتقى المغرب سبع مراتب ليحل في المرتبة 81 من أصل 139 دولة شملها التصنيف، محققاً معدل 14.2 نقطة في مؤشر', 'size': 2}, {'id': '336', 'title': 'المغرب يتقدم 7 درجات في مؤشر تطور السوق', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-590340.html', 'summary': 'المغرب يتقدم 7 درجات في مؤشر تطور السوق. سجل المغرب تقدما بـ 7 درجات في مؤشر تطور السوق ليحتل المرتبة 81 من أصل 139 دولة شملها تقرير صادر عن “المنظمة العالمية للملكية الفكرية الويبو”، بتعاون مع جامعة “كورنيل” و”المعهد الأوروبي لإدارة الأعمال الإنسياد”. وكشف التقرير أن المغرب حصل على معدل 14.2 نقطة في هذا المؤشر الذي يعتبر من بين المحاور السبعة', 'size': 2}], 'main_title': 'مؤشر تطور السوق .. المغرب يسجل تقدما بـ 7 درجات'}, {'community_id': '8', 'articles': [{'id': '292', 'title': 'المغرب يخسر نهائي دوري بوينوس آيريس أمام الأرجنتين في كرة القدم داخل القاعة', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/206569', 'summary': 'المغرب يخسر نهائي دوري بوينوس آيريس أمام الأرجنتين في كرة القدم داخل القاعة.  انهزم المنتخب المغربي لكرة القدم داخل القاعة أمام نظيره الأرجنتيني بهدفين دون رد، في المباراة التي جمعتمها ليلة الأحد-الاثنين، برسم نهائي دوري بوينوس إيريس الدولي الثلاثي ( فيفا) المنظم في القاعة الرياضية التابعة لاتحاد الارجنتيني لكرة القدم. وبهذه النتيجة أعلن المنتخب الأرجنتيني فائزا بهذا الدوري الثلاثي بعد تحقيقه لانتصاريين متتالين على نظيريه للشيلي (4-2)', 'size': 2}, {'id': '334', 'title': 'المغرب ينهزم أمام الأرجنتين في نهائي دوري دولي للفوتسال', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-590342.html', 'summary': 'المغرب ينهزم أمام الأرجنتين في نهائي دوري دولي للفوتسال. انهزم المنتخب المغربي لكرة القدم داخل القاعة أمام نظيره الأرجنتيني بهدفين دون رد، في المباراة التي جمعتمها ليلة الأحد-الاثنين، برسم نهائي دوري بوينوس إيريس الدولي الثلاثي (فيفا) المنظم في القاعة الرياضية التابعة لاتحاد الارجنتيني لكرة القدم. وبهذه النتيجة أعلن المنتخب الأرجنتيني فائزا بهذا الدوري الثلاثي بعد تحقيقه لانتصاريين متتالين على نظيريه للشيلي (4-2)', 'size': 2}], 'main_title': 'المغرب يخسر نهائي دوري بوينوس آيريس أمام الأرجنتين في كرة القدم داخل القاعة'}, {'community_id': '9', 'articles': [{'id': '304', 'title': 'حرمان سجين من العلاج.. إدارة السجن المحلي بركان 2 توضح', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%ad%d8%b1%d9%85%d8%a7%d9%86-%d8%b3%d8%ac%d9%8a%d9%86-%d9%85%d9%86-%d8%a7%d9%84%d8%b9%d9%84%d8%a7%d8%ac-%d8%a5%d8%af%d8%a7%d8%b1%d8%a9-%d8%a7%d9%84%d8%b3%d8%ac%d9%86-%d8%a7%d9%84%d9%85%d8%ad%d9%84/', 'summary': 'حرمان سجين من العلاج.. إدارة السجن المحلي بركان 2 توضح. أصدرت إدارة السجن المحلي بركان 2 بيانا توضيحيا، ردا على تدوينة نشرها أحد السجناء السابقين، تتعلق بالسجين (ر.ح) الذي قيل إنه دخل في إضراب عن الطعام بسبب امتناع الإدارة عن تمكينه من قياسات نظاراته الطبية. وأكدت إدارة المؤسسة في بيان لها أن المعني بالأمر لم يتقدم بأي إشعار بالدخول في إضراب عن الطعام، مشيرة إلى', 'size': 2}, {'id': '385', 'title': 'إدارة السجن المحلي بركان 2 تكذب مضمون تدوينة لسجين سابق', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/227386/', 'summary': 'إدارة السجن المحلي بركان 2 تكذب مضمون تدوينة لسجين سابق. ردا على تدوينة لأحد السجناء السابقين حول السجين (ر.ح)، المعتقل بالسجن المحلي بركان 2، بخصوص “دخوله في إضراب عن الطعام بسبب امتناع الإدارة عن تسليمه قياسات النظارات الطبية الخاصة به”، تتقدم إدارة هذه المؤسسة إلى الرأي العام بالتوضيحات التالية: – إن السجين المذكور لم يتقدم بأي إشعار إلى إدارة المؤسسة بالدخول في إضراب عن الطعام،', 'size': 2}], 'main_title': 'حرمان سجين من العلاج.. إدارة السجن المحلي بركان 2 توضح'}, {'community_id': '10', 'articles': [{'id': '306', 'title': 'الرئيس المدير العالم لـ”لارام”: الخطوط الملكية المغربية تخلق جسورا لتنقل مواهب السينما الإفريقية', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a7%d9%84%d8%b1%d8%a6%d9%8a%d8%b3-%d8%a7%d9%84%d9%85%d8%af%d9%8a%d8%b1-%d8%a7%d9%84%d8%b9%d8%a7%d9%84%d9%85-%d9%84%d9%80%d9%84%d8%a7%d8%b1%d8%a7%d9%85-%d8%a7%d9%84%d8%ae%d8%b7%d9%88%d8%b7/', 'summary': 'الرئيس المدير العالم لـ”لارام”: الخطوط الملكية المغربية تخلق جسورا لتنقل مواهب السينما الإفريقية. أكد الرئيس المدير العام لشركة الخطوط الملكية المغربية، عبد الحميد عدو، مساء أمس الأحد بياوندي، أن الشركة تبني جسورا تمكن من تنقل المواهب والأعمال الفنية من أجل إحياء السينما الإفريقية وتعزيز حضورها داخل وخارج القارة. وأوضح عدو في كلمة ألقاها بالنيابة عنه الممثل الإقليمي للشركة بالكاميرون، نور الدين بلعياشي، خلال حفل عشاء لشركة الخطوط الملكية', 'size': 2}, {'id': '348', 'title': 'عبد الحميد عدو: “لارام” تواكب إشعاع السينما الإفريقية وتربطها بالعالم', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1101619.html', 'summary': 'عبد الحميد عدو: “لارام” تواكب إشعاع السينما الإفريقية وتربطها بالعالم. أكد الرئيس المدير العام لشركة الخطوط الملكية المغربية، عبد الحميد عدو، مساء أمس الأحد بياوندي، أن الشركة تبني جسورا تمكن من تنقل المواهب والأعمال الفنية من أجل إحياء السينما الإفريقية وتعزيز حضورها داخل وخارج القارة. وأوضح عدو في كلمة ألقاها بالنيابة عنه الممثل الإقليمي للشركة بالكاميرون، نور الدين بلعياشي، خلال حفل عشاء لشركة الخطوط الملكية ظهرت المقالة عبد الحميد عدو: “لارام” تواكب إشعاع السينما الإفريقية وتربطها بالعالم  .', 'size': 2}], 'main_title': 'الرئيس المدير العالم لـ”لارام”: الخطوط الملكية المغربية تخلق جسورا لتنقل مواهب السينما الإفريقية'}, {'community_id': '11', 'articles': [{'id': '355', 'title': 'طقس الاثنين.. حرارة متوقعة مع زخات رعدية في المرتفعات', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%b7%d9%82%d8%b3-%d8%a7%d9%84%d8%a7%d8%ab%d9%86%d9%8a%d9%86-%d8%ad%d8%b1%d8%a7%d8%b1%d8%a9-%d9%85%d8%aa%d9%88%d9%82%d8%b9%d8%a9-%d9%85%d8%b9-%d8%b2%d8%ae%d8%a7%d8%aa-%d8%b1%d8%b9%d8%af%d9%8a%d8%a9/', 'summary': 'طقس الاثنين.. حرارة متوقعة مع زخات رعدية في المرتفعات. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الاثنين، أن يظل الطقس حارا نسبيا بأقصى جنوب البلاد. كما يرتقب تشكل سحب منخفضة مصحوبة بضباب محلي و ذلك بالقرب من السواحل الوسطى و الشمال-الغربي والأقاليم الجنوبية. وسيلاحظ تمركز سحب أخرى غير مستقرة و محملة بزخات رعدية فوق كل من مرتفعات الأطلسين الكبير و المتوسط، والجنوب-الشرقي للبلاد و  طقس الاثنين.. حرارة متوقعة مع زخات رعدية في المرتفعات     .', 'size': 2}, {'id': '397', 'title': 'توقعات أحوال الطقس في العديد من مناطق المملكة اليوم الاثنين', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%aa%d9%88%d9%82%d8%b9%d8%a7%d8%aa-%d8%a3%d8%ad%d9%88%d8%a7%d9%84-%d8%a7%d9%84%d8%b7%d9%82%d8%b3-%d9%81%d9%8a-%d8%a7%d9%84%d8%b9%d8%af%d9%8a%d8%af-%d9%85%d9%86-%d9%85%d9%86%d8%a7%d8%b7%d9%82-108/', 'summary': 'توقعات أحوال الطقس في العديد من مناطق المملكة اليوم الاثنين. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليومه الإثنين 22 شتنبر 2025، أن يظل الطقس حارا نسبيا بأقصى جنوب البلاد. كما يرتقب تشكل سحب منخفضة مصحوبة بضباب محلي، وذلك بالقرب من السواحل الوسطى والشمال-الغربي والأقاليم الجنوبية. وسيلاحظ تمركز سحب أخرى غير مستقرة و محملة بزخات رعدية فوق كل من مرتفعات الأطلسين الكبير والمتوسط، والجنوب-الشرقي …  توقعات أحوال الطقس في العديد من مناطق المملكة اليوم الاثنين     .', 'size': 2}], 'main_title': 'طقس الاثنين.. حرارة متوقعة مع زخات رعدية في المرتفعات'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    