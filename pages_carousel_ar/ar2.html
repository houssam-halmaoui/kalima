<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 15/10/2025 - 12h23</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '16', 'title': 'ليبيريا تجدد دعمها لمبادرة الحكم الذاتي', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-666168.html', 'summary': 'ليبيريا تجدد دعمها لمبادرة الحكم الذاتي. هبة بريس جددت ليبيريا، اليوم الثلاثاء في نيويورك، تأكيد دعمها لمبادرة الحكم الذاتي التي قدمها المغرب سنة 2007، بهدف التوصل إلى حل نهائي للنزاع الإقليمي حول الصحراء المغربية. وخلال مداخلته أمام اللجنة الرابعة للجمعية العامة للأمم المتحدة، أكد ممثل ليبيريا أن المبادرة المغربية، “التي تتماشى مع توجهات مجلس الأمن”، تحظى بدعم دولي واسع. كما عبر', 'size': 2}, {'id': '313', 'title': 'الصحراء المغربية.. ليبيريا تجدد دعمها لمخطط الحكم الذاتي', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a7%d9%84%d8%b5%d8%ad%d8%b1%d8%a7%d8%a1-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8%d9%8a%d8%a9-%d9%84%d9%8a%d8%a8%d9%8a%d8%b1%d9%8a%d8%a7-%d8%aa%d8%ac%d8%af%d8%af-%d8%af%d8%b9%d9%85%d9%87%d8%a7-%d9%84-2/', 'summary': 'الصحراء المغربية.. ليبيريا تجدد دعمها لمخطط الحكم الذاتي. جددت ليبيريا، أمس الثلاثاء (14 أكتوبر) في نيويورك، تأكيد دعمها لمبادرة الحكم الذاتي التي قدمها المغرب سنة 2007، بهدف التوصل إلى حل نهائي للنزاع الإقليمي حول الصحراء المغربية. وخلال مداخلته أمام اللجنة الرابعة للجمعية العامة للأمم المتحدة، أكد ممثل ليبيريا أن المبادرة المغربية، “التي تتماشى مع توجهات مجلس الأمن”، تحظى بدعم دولي واسع. كما عبر', 'size': 2}], 'main_title': 'ليبيريا تجدد دعمها لمبادرة الحكم الذاتي'}, {'community_id': '7', 'articles': [{'id': '36', 'title': 'سانت لوسيا تجدد دعمها لمبادرة الحكم الذاتي في الصحراء المغربية', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-666073.html', 'summary': 'سانت لوسيا تجدد دعمها لمبادرة الحكم الذاتي في الصحراء المغربية. هبة بريس جددت سانت لوسيا، اليوم الثلاثاء بنيويورك، تأكيد دعمها للمبادرة المغربية للحكم الذاتي، التي قدمتها المملكة من أجل الطي النهائي للنزاع الإقليمي حول الصحراء المغربية. وأكد ممثل سانت لوسيا، كارلتون روني هنري، أمام أعضاء اللجنة الرابعة للجمعية العامة للأمم المتحدة، أن وفد بلاده “يدعم المبادرة المغربية للحكم الذاتي” من أجل التوصل إلى حل سياسي', 'size': 4}, {'id': '119', 'title': 'الصحراء المغربية.. سانت لوسيا تجدد تأكيد دعمها لمبادرة الحكم الذاتي', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a7%d9%84%d8%b5%d8%ad%d8%b1%d8%a7%d8%a1-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8%d9%8a%d8%a9-%d8%b3%d8%a7%d9%86%d8%aa-%d9%84%d9%88%d8%b3%d9%8a%d8%a7-%d8%aa%d8%ac%d8%af%d8%af-%d8%aa%d8%a3%d9%83%d9%8a-2/', 'summary': 'الصحراء المغربية.. سانت لوسيا تجدد تأكيد دعمها لمبادرة الحكم الذاتي. جددت سانت لوسيا، اليوم الثلاثاء بنيويورك، تأكيد دعمها للمبادرة المغربية للحكم الذاتي، التي قدمتها المملكة من أجل الطي النهائي للنزاع الإقليمي حول الصحراء المغربية. وأكد ممثل سانت لوسيا، كارلتون روني هنري، أمام أعضاء اللجنة الرابعة للجمعية العامة للأمم المتحدة، أن وفد بلاده “يدعم المبادرة المغربية للحكم الذاتي” من أجل التوصل إلى حل سياسي عادل ودائم', 'size': 4}, {'id': '184', 'title': 'سانت لوسيا تجدد تأكيد دعمها للمبادرة المغربية للحكم الذاتي', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/478620.html', 'summary': 'سانت لوسيا تجدد تأكيد دعمها للمبادرة المغربية للحكم الذاتي. و.م.ع جددت سانت لوسيا، اليوم الثلاثاء بنيويورك، تأكيد دعمها للمبادرة المغربية للحكم الذاتي، التي قدمتها المملكة من أجل الطي النهائي للنزاع الإقليمي حول الصحراء المغربية. وأكد ممثل سانت لوسيا، كارلتون روني هنري، أمام أعضاء اللجنة الرابعة للجمعية العامة للأمم المتحدة، أن وفد بلاده “يدعم المبادرة المغربية للحكم الذاتي” من أجل التوصل إلى حل سياسي عادل …', 'size': 4}, {'id': '235', 'title': 'نيويورك.. سانت لوسيا تجدد تأكيد دعمها للمبادرة المغربية للحكم الذاتي', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d9%86%d9%8a%d9%88%d9%8a%d9%88%d8%b1%d9%83-%d8%b3%d8%a7%d9%86%d8%aa-%d9%84%d9%88%d8%b3%d9%8a%d8%a7-%d8%aa%d8%ac%d8%af%d8%af-%d8%aa%d8%a3%d9%83%d9%8a%d8%af-%d8%af%d8%b9%d9%85%d9%87%d8%a7-%d9%84%d9%84/', 'summary': 'نيويورك.. سانت لوسيا تجدد تأكيد دعمها للمبادرة المغربية للحكم الذاتي. جددت سانت لوسيا، اليوم الثلاثاء 14 أكتوبر 2025 بنيويورك، تأكيد دعمها للمبادرة المغربية للحكم الذاتي، التي قدمتها المملكة من أجل الطي النهائي للنزاع الإقليمي حول الصحراء المغربية. وفي هذا الصدد، شدد ممثل سانت لوسيا، كارلتون روني هنري، أمام أعضاء اللجنة الرابعة للجمعية العامة للأمم المتحدة، على أن وفد بلاده “يدعم المبادرة المغربية للحكم …  نيويورك.. سانت لوسيا تجدد تأكيد دعمها للمبادرة المغربية للحكم الذاتي     .', 'size': 4}], 'main_title': 'سانت لوسيا تجدد دعمها لمبادرة الحكم الذاتي في الصحراء المغربية'}, {'community_id': '2', 'articles': [{'id': '52', 'title': 'السيد البلاوي يستقبل رئيس هيئة النزاهة بجمهورية العراق', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/207360', 'summary': 'السيد البلاوي يستقبل رئيس هيئة النزاهة بجمهورية العراق.  في إطار تعزيز علاقات التعاون القضائي بين المملكة المغربية وجمهورية العراق، استقبل الوكيل العام للملك لدى محكمة النقض رئيس النيابة العامة، السيد هشام البلاوي، زوال اليوم الثلاثاء 14 أكتوبر 2025 السيد محمد علي اللامي رئيس هيئة النزاهة الاتحادية لجمهورية العراق والوفد المرافق له، في زيارة عمل رسمية إلى المغرب. وتهدف هذه الزيارة إلى تبادل', 'size': 2}, {'id': '216', 'title': 'هشام البلاوي يستقبل رئيس هيئة النزاهة بجمهورية العراق', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/228476/', 'summary': 'هشام البلاوي يستقبل رئيس هيئة النزاهة بجمهورية العراق. في إطار تعزيز علاقات التعاون القضائي بين المملكة المغربية وجمهورية العراق، استقبل الوكيل العام للملك لدى محكمة النقض رئيس النيابة العامة، هشام البلاوي، زوال اليوم الثلاثاء 14 أكتوبر 2025 محمد علي اللامي رئيس هيئة النزاهة الاتحادية لجمهورية العراق والوفد المرافق له، في زيارة عمل رسمية إلى المغرب. وتهدف هذه الزيارة إلى تبادل التجارب والخبرات', 'size': 2}], 'main_title': 'السيد البلاوي يستقبل رئيس هيئة النزاهة بجمهورية العراق'}, {'community_id': '3', 'articles': [{'id': '53', 'title': 'رئيس الحكومة عزيز اخنوش يستقبل وفدا من كبار المسؤولين والفاعلين الاقتصاديين بمقاطعة آنهوي الصينية', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/207355', 'summary': 'رئيس الحكومة عزيز اخنوش يستقبل وفدا من كبار المسؤولين والفاعلين الاقتصاديين بمقاطعة آنهوي الصينية.  استقبل رئيس الحكومة السيد عزيز أخنوش، يوم الإثنين 13 أكتوبر 2025 بالرباط، وفدا من كبار المسؤولين والفاعلين الاقتصاديين بمقاطعة آنهوي الصينية، بقيادة أمين الحزب الشيوعي الصيني بهذه المقاطعة، السيد ليانغ يانشون، حيث تم بحث سبل تطوير الشراكة الاقتصادية المتميزة بين المغرب والصين، تنفيذا لتوجيهات قائدي البلدين، صاحب الجلالة الملك محمد السادس، نصره الله، وفخامة', 'size': 2}, {'id': '179', 'title': 'أخنوش يستقبل وفداً صينياً رفيعاً لتسريع الإستثمارات في الطاقات المتجددة وصناعة السيارات', 'source': 'rue20.com', 'link': 'https://rue20.com/945060.html', 'summary': 'أخنوش يستقبل وفداً صينياً رفيعاً لتسريع الإستثمارات في الطاقات المتجددة وصناعة السيارات.  ا الرباط استقبل رئيس الحكومة عزيز أخنوش، يوم الإثنين 13 أكتوبر 2025 بالرباط، وفدا من كبار المسؤولين والفاعلين الاقتصاديين بمقاطعة آنهوي الصينية، بقيادة أمين الحزب الشيوعي الصيني بهذه المقاطعة، ليانغ يانشون، حيث تم بحث سبل تطوير الشراكة الاقتصادية المتميزة بين المغرب والصين، تنفيذا لتوجيهات قائدي البلدين، صاحب الجلالة الملك محمد السادس، وفخامة رئيس الخبر أخنوش يستقبل وفداً صينياً رفيعاً لتسريع الإستثمارات في الطاقات المتجددة وصناعة السيارات  .', 'size': 2}], 'main_title': 'رئيس الحكومة عزيز اخنوش يستقبل وفدا من كبار المسؤولين والفاعلين الاقتصاديين بمقاطعة آنهوي الصينية'}, {'community_id': '4', 'articles': [{'id': '115', 'title': 'الأمم المتحدة.. جمهورية إفريقيا الوسطى تجدد تأكيد دعمها للمبادرة المغربية للحكم الذاتي', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a7%d9%84%d8%a3%d9%85%d9%85-%d8%a7%d9%84%d9%85%d8%aa%d8%ad%d8%af%d8%a9-%d8%ac%d9%85%d9%87%d9%88%d8%b1%d9%8a%d8%a9-%d8%a5%d9%81%d8%b1%d9%8a%d9%82%d9%8a%d8%a7-%d8%a7%d9%84%d9%88%d8%b3%d8%b7%d9%89/', 'summary': 'الأمم المتحدة.. جمهورية إفريقيا الوسطى تجدد تأكيد دعمها للمبادرة المغربية للحكم الذاتي. جددت جمهورية إفريقيا الوسطى، اليوم الثلاثاء بنيويورك، تأكيد دعمها للمبادرة المغربية للحكم الذاتي، باعتبارها “الأساس الأكثر جدية ومصداقية وواقعية” من أجل التوصل إلى تسوية نهائية للنزاع الإقليمي حول الصحراء المغربية. وفي كلمة ألقاها أمام اللجنة الرابعة للجمعية العامة للأمم المتحدة، أكد السفير الممثل الدائم لجمهورية إفريقيا الوسطى، ماريوس نزيسيوي، أن هذه المبادرة، القائمة على مبادئ', 'size': 3}, {'id': '180', 'title': 'جمهورية إفريقيا الوسطى تجدد تأكيد دعمها للمبادرة المغربية للحكم الذاتي', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/478632.html', 'summary': 'جمهورية إفريقيا الوسطى تجدد تأكيد دعمها للمبادرة المغربية للحكم الذاتي. و.م.ع جددت جمهورية إفريقيا الوسطى، اليوم الثلاثاء بنيويورك، تأكيد دعمها للمبادرة المغربية للحكم الذاتي، باعتبارها “الأساس الأكثر جدية ومصداقية وواقعية” من أجل التوصل إلى تسوية نهائية للنزاع الإقليمي حول الصحراء المغربية. وفي كلمة ألقاها أمام اللجنة الرابعة للجمعية العامة للأمم المتحدة، أكد السفير الممثل الدائم لجمهورية إفريقيا الوسطى، ماريوس نزيسيوي، أن هذه المبادرة، القائمة على …', 'size': 3}, {'id': '404', 'title': 'جمهورية إفريقيا الوسطى تجدد تأكيد دعمها للمبادرة المغربية للحكم الذاتي في الصحراء المغربية', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%ac%d9%85%d9%87%d9%88%d8%b1%d9%8a%d8%a9-%d8%a5%d9%81%d8%b1%d9%8a%d9%82%d9%8a%d8%a7-%d8%a7%d9%84%d9%88%d8%b3%d8%b7%d9%89-%d8%aa%d8%ac%d8%af%d8%af-%d8%aa%d8%a3%d9%83%d9%8a%d8%af-%d8%af%d8%b9%d9%85/', 'summary': 'جمهورية إفريقيا الوسطى تجدد تأكيد دعمها للمبادرة المغربية للحكم الذاتي في الصحراء المغربية. جددت جمهورية إفريقيا الوسطى، أمس الثلاثاء 14 أكتوبر 3035، بنيويورك، تأكيد دعمها للمبادرة المغربية للحكم الذاتي، باعتبارها “الأساس الأكثر جدية ومصداقية وواقعية” من أجل التوصل إلى تسوية نهائية للنزاع الإقليمي حول الصحراء المغربية. وفي كلمة ألقاها أمام اللجنة الرابعة للجمعية العامة للأمم المتحدة، أكد السفير الممثل الدائم لجمهورية إفريقيا الوسطى، ماريوس نزيسيوي، أن …  جمهورية إفريقيا الوسطى تجدد تأكيد دعمها للمبادرة المغربية للحكم الذاتي في الصحراء المغربية     .', 'size': 3}], 'main_title': 'الأمم المتحدة.. جمهورية إفريقيا الوسطى تجدد تأكيد دعمها للمبادرة المغربية للحكم الذاتي'}, {'community_id': '6', 'articles': [{'id': '133', 'title': 'أسود الأطلس يهزمون الكونغو ويعتلون صدارة التاريخ بـ16 فوزا متتاليا', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/326247/', 'summary': 'أسود الأطلس يهزمون الكونغو ويعتلون صدارة التاريخ بـ16 فوزا متتاليا. في أمسية كروية مفعمة بالحماس والروح الوطنية، ووسط أجواء جماهيرية غامرة زينت مدرجات المجمع الرياضي الأمير مولاي عبد الله بالعاصمة الرباط، واصل المنتخب الوطني المغربي الأول لكرة القدم كتابة فصول جديدة من تألقه القاري والعالمي، بعد أن حقق فوزًا ثمينًا على نظيره الكونغولي بهدف دون رد، في ختام التصفيات الإفريقية المؤهلة إلى نهائيات كأس العالم', 'size': 2}, {'id': '174', 'title': 'أسود الأطلس يختمون تصفيات المونديال بهزم الكونغو ويدخلون التاريخ بـ16 فوزاً متتالياً', 'source': 'rue20.com', 'link': 'https://rue20.com/945121.html', 'summary': 'أسود الأطلس يختمون تصفيات المونديال بهزم الكونغو ويدخلون التاريخ بـ16 فوزاً متتالياً. . الرباط حقق المنتخب الوطني المغربي لكرة القدم إنجازا تاريخيا جديدا، عندما سجل رقما قياسيا عالميا بـ16 انتصارا متتاليا، عقب فوزه على منتخب الكونغو ( 1-0) في المباراة التي جمعتهما، مساء اليوم الأربعاء، على أرضية ملعب الأمير مولاي عبد الله بالرباط، برسم الجولة العاشرة و الأخيرة من التصفيات الافريقية المؤهلة لكأس العالم 2026، الخبر أسود الأطلس يختمون تصفيات المونديال بهزم الكونغو ويدخلون التاريخ بـ16 فوزاً متتالياً  .', 'size': 3}, {'id': '210', 'title': 'المغرب يفوز على الكونغو ويحقق رقما قياسيا عالميا ب16 فوزا في مختلف المباريات', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/228492/', 'summary': 'المغرب يفوز على الكونغو ويحقق رقما قياسيا عالميا ب16 فوزا في مختلف المباريات. الرباط – توج المنتخب المغربي مشواره في التصفيات الافريقية المؤهلة لمونديال 2026 بالعلامة الكاملة ،حيث تفوق على نظيره الكونغولي (1-0) في المباراة التي جمعتهما، مساء اليوم الثلاثاء، على أرضية ملعب الأمير مولاي عبد الله بالرباط، برسم الجولة العاشرة والأخيرة من هذه التصفيات ،محققا بالتالي رقما قياسيا عالميا في سلسلة الانتصارات المتتالية ب16 فوزا في مختلف', 'size': 2}], 'main_title': 'أسود الأطلس يختمون تصفيات المونديال بهزم الكونغو ويدخلون التاريخ بـ16 فوزاً متتالياً'}, {'community_id': '8', 'articles': [{'id': '136', 'title': 'المنصوري تعترف بفشل برنامج السكن القروي القديم وتراهن على دعم مباشر للأسر', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/326232/', 'summary': 'المنصوري تعترف بفشل برنامج السكن القروي القديم وتراهن على دعم مباشر للأسر. شهدت الجلسة الأسبوعية للأسئلة الشفهية بمجلس المستشارين، اليوم الثلاثاء، نقاشاً حاداً بين الفريق الحركي ووزيرة إعداد التراب الوطني والتعمير والإسكان وسياسة المدينة، فاطمة الزهراء المنصوري، حول واقع السكن في العالم القروي وما يشوبه من اختلالات بنيوية وتنموية، حيث وجه الفريق الحركي انتقادات لاذعة لما اعتبره تأخراً واضحاً في معالجة مشاكل السكن بالمناطق القروية وضعفاً في', 'size': 3}, {'id': '185', 'title': 'المنصوري تكشف عدد الشباب المغاربة الذين استفادوا من برنامج “دعم السكن”', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/478618.html', 'summary': 'المنصوري تكشف عدد الشباب المغاربة الذين استفادوا من برنامج “دعم السكن”. كشفت فاطمة الزهراء المنصوري، وزيرة إعداد التراب الوطني والتعمير والإسكان وسياسة المدينة، اليوم الثلاثاء بمجلس المستشارين، عن عدد الشباب المغاربة الذين استفادوا من برنامج دعم السكن. المنصوري، والتي كانت تتحدث خلال جلسة الأسئلة الشفوية، أن عدد الشباب الذين تقل أعمارهم عن 40 سنة بلغ 36 ألفا و576 مستفيدا. وزادت موضحة، أن نسبة النساء الشابات ضمن …', 'size': 2}, {'id': '361', 'title': 'المنصوري: الحكومة صادقت على 405 وثيقة تعمير و269 تصميما للتهيئة', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a7%d9%84%d9%85%d9%86%d8%b5%d9%88%d8%b1%d9%8a-%d8%a7%d9%84%d8%ad%d9%83%d9%88%d9%85%d8%a9-%d8%b5%d8%a7%d8%af%d9%82%d8%aa-%d8%b9%d9%84%d9%89-405-%d9%88%d8%ab%d9%8a%d9%82%d8%a9-%d8%aa%d8%b9%d9%85/', 'summary': 'المنصوري: الحكومة صادقت على 405 وثيقة تعمير و269 تصميما للتهيئة. أفادت وزيرة إعداد التراب الوطني والتعمير والإسكان وسياسة المدينة، فاطمة الزهراء المنصوري، أمس الثلاثاء بمجلس المستشارين، أنه تمت المصادقة على 405 وثائق للتعمير و269 تصميما للتهيئة خلال الولاية الحكومية الحالية. وأوضحت المنصوري، في معرض جوابها عن سؤال شفوي حول "التأخر الحاصل في إعداد وثائق التعمير"، تقدم به الفريق الاشتراكي، أن هذه الحصيلة تشمل 49 تصميما  المنصوري: الحكومة صادقت على 405 وثيقة تعمير و269 تصميما للتهيئة     .', 'size': 2}], 'main_title': 'المنصوري تعترف بفشل برنامج السكن القروي القديم وتراهن على دعم مباشر للأسر'}, {'community_id': '1', 'articles': [{'id': '141', 'title': 'استئنافية أكادير تصدر أحكاما “ثقيلة” في حق مثيري الشغب بآيت عميرة', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1108286.html', 'summary': 'استئنافية أكادير تصدر أحكاما “ثقيلة” في حق مثيري الشغب بآيت عميرة. أفاد مصدر مطلع أن محكمة الاستئناف بأكادير أصدرت، اليوم الثلاثاء، أحكاما قضائية وصفت بالصارمة، تراوحت مدتها بين 3 و15 سنة سجنا نافذا، في حق 17 شخصا توبعوا على خلفية أحداث شغب وأعمال تخريب شهدتها منطقة آيت عميرة بإقليم اشتوكة آيت باها خلال احتجاجات جيل زد مطلع أكتوبر الجاري. وأوضح المصدر ذاته أن متهمين اثنين نالا ظهرت المقالة استئنافية أكادير تصدر أحكاما “ثقيلة” في حق مثيري الشغب بآيت عميرة  .', 'size': 4}, {'id': '359', 'title': 'استئنافية أكادير توزع 162 سنة على 17 متهما في أحداث الشغب بآيت عميرة', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a7%d8%b3%d8%aa%d8%a6%d9%86%d8%a7%d9%81%d9%8a%d8%a9-%d8%a3%d9%83%d8%a7%d8%af%d9%8a%d8%b1-%d8%aa%d9%88%d8%b2%d8%b9-162-%d8%b3%d9%86%d8%a9-%d8%b9%d9%84%d9%89-17-%d9%85%d8%aa%d9%87%d9%85%d8%a7-%d9%81/', 'summary': 'استئنافية أكادير توزع 162 سنة على 17 متهما في أحداث الشغب بآيت عميرة. أصدرت محكمة الاستئناف بمدينة أكادير، مساء أمس الثلاثاء 14 أكتوبر الجاري، أحكامًا صارمة بلغ مجموعها 162 سنة سجنا نافذا في حق 17 شخصًا، على خلفية تورطهم في أعمال شغب وتخريب شهدتها منطقة آيت عميرة، التابعة ترابيا لإقليم اشتوكة آيت باها. وتنوعت التهم الموجهة إلى المدانين بين إضرام النار عمدًا في ممتلكات عامة، وخصوصًا مركبات تابعة  استئنافية أكادير توزع 162 سنة على 17 متهما في أحداث الشغب بآيت عميرة     .', 'size': 3}, {'id': '395', 'title': '162 سنة سجناً لـ17 متهماً في أحداث شغب آيت عميرة!', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/228504/', 'summary': '162 سنة سجناً لـ17 متهماً في أحداث شغب آيت عميرة!. الرباط – كواليس أصدرت محكمة الاستئناف بأكادير، مساء الثلاثاء 14 أكتوبر، أحكاماً ثقيلة بلغ مجموعها 162 سنة سجناً نافذاً في حق 17 متهماً تورطوا في أعمال شغب وتخريب شهدتها منطقة آيت عميرة بإقليم اشتوكة آيت باها، في واحدة من أكثر القضايا التي أثارت الجدل محلياً. المتهمون واجهوا تهماً ثقيلة من بينها إضرام النار عمداً في', 'size': 2}, {'id': '405', 'title': 'أكادير.. أحكام ثقيلة في حق متورطين بأحداث شغب خلال احتجاجات جيل Z بآيت عميرة', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a3%d9%83%d8%a7%d8%af%d9%8a%d8%b1-%d8%a3%d8%ad%d9%83%d8%a7%d9%85-%d8%ab%d9%82%d9%8a%d9%84%d8%a9-%d9%81%d9%8a-%d8%ad%d9%82-%d9%85%d8%aa%d9%88%d8%b1%d8%b7%d9%8a%d9%86-%d8%a8%d8%a3%d8%ad%d8%af%d8%a7/', 'summary': 'أكادير.. أحكام ثقيلة في حق متورطين بأحداث شغب خلال احتجاجات جيل Z بآيت عميرة. أصدرت غرفة الجنايات الابتدائية بمحكمة الاستئناف بمدينة أكادير، مساء أمس الثلاثاء 14 أكتوبر الجاري، أحكاماً قضائية وصفت بالصارمة، بلغت في مجموعها 162 سنة سجناً نافذاً في حق 17 متهماً، على خلفية تورطهم في أعمال شغب وتخريب شهدتها منطقة آيت عميرة التابعة لإقليم اشتوكة آيت باها خلال احتجاجات ما عُرف لدى الرأي العام بجيل …  أكادير.. أحكام ثقيلة في حق متورطين بأحداث شغب خلال احتجاجات جيل Z بآيت عميرة     .', 'size': 3}], 'main_title': 'استئنافية أكادير تصدر أحكاما “ثقيلة” في حق مثيري الشغب بآيت عميرة'}, {'community_id': '9', 'articles': [{'id': '149', 'title': 'المنتخب الوطني يهزم الكونغو ويبلغ الفوز الـ16 تواليا محطما الرقم القياسي العالمي', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1108275.html', 'summary': 'المنتخب الوطني يهزم الكونغو ويبلغ الفوز الـ16 تواليا محطما الرقم القياسي العالمي. حقق المنتخب الوطني المغربي انتصارا ثمينا على ضيفه الكونغو بهدف نظيف، خلال اللقاء الذي جرى مساء يومه الثلاثاء على أرضية ملعب الأمير مولاي عبد الله بالرباط، وذلك لحساب الجولة الأخيرة من التصفيات الإفريقية المؤهلة إلى نهائيات كأس العالم 2026. ونجح المنتخب الوطني في الوصول إلى مناطق الخصم منذ بداية المباراة، حيث كان المهاجم إسماعيل صيباري ظهرت المقالة المنتخب الوطني يهزم الكونغو ويبلغ الفوز الـ16 تواليا محطما الرقم القياسي العالمي  .', 'size': 3}, {'id': '173', 'title': 'بحضور 50 ألف شخص…أسود الأطلس يطوفون الملعب لتحية الجماهير المغربية في ختام تصفيات المونديال', 'source': 'rue20.com', 'link': 'https://rue20.com/945140.html', 'summary': 'بحضور 50 ألف شخص…أسود الأطلس يطوفون الملعب لتحية الجماهير المغربية في ختام تصفيات المونديال. . الرباط توج المنتخب المغربي مشواره في التصفيات الافريقية المؤهلة لمونديال 2026 بالعلامة الكاملة ،حيث تفوق على نظيره الكونغولي (1-0) في المباراة التي جمعتهما، بحضور 50292 شخصاً، مساء اليوم الثلاثاء، على أرضية ملعب الأمير مولاي عبد الله بالرباط، برسم الجولة العاشرة والأخيرة من هذه التصفيات ،محققا بالتالي رقما قياسيا عالميا في سلسلة الانتصارات المتتالية الخبر بحضور 50 ألف شخص…أسود الأطلس يطوفون الملعب لتحية الجماهير المغربية في ختام تصفيات المونديال  .', 'size': 2}, {'id': '237', 'title': 'المنتخب المغربي يُنهي الشوط الأول بالتعادل السلبي أمام الكونغو', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d9%85%d9%86%d8%aa%d8%ae%d8%a8-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8%d9%8a-%d9%8a%d9%8f%d9%86%d9%87%d9%8a-%d8%a7%d9%84%d8%b4%d9%88%d8%b7-%d8%a7%d9%84%d8%a3%d9%88%d9%84-%d8%a8%d8%a7%d9%84/', 'summary': 'المنتخب المغربي يُنهي الشوط الأول بالتعادل السلبي أمام الكونغو. انتهى الشوط الأول من المباراة التي تجمع مساء اليوم المنتخب الوطني المغربي بنظيره الكونغولي على أرضية المجمع الرياضي مولاي عبد الله بالرباط، بالتعادل السلبي (0-0)، وذلك ضمن تصفيات كأس العالم 2026. ورغم السيطرة النسبية للعناصر الوطنية على مجريات اللقاء وخلق بعض الفرص السانحة للتسجيل، فإن اللمسة الأخيرة غابت عن خط الهجوم. ومن المنتظر …  المنتخب المغربي يُنهي الشوط الأول بالتعادل السلبي أمام الكونغو     .', 'size': 2}], 'main_title': 'المنتخب الوطني يهزم الكونغو ويبلغ الفوز الـ16 تواليا محطما الرقم القياسي العالمي'}, {'community_id': '10', 'articles': [{'id': '152', 'title': 'الخمليشي: الإنتاج كان حلمي المؤجل.. وبكيت حين رأيت نفسي على الشاشة', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1108023.html', 'summary': 'الخمليشي: الإنتاج كان حلمي المؤجل.. وبكيت حين رأيت نفسي على الشاشة. تخوض الممثلة المغربية أسماء الخمليشي مغامرة جديدة في مسارها الفني الطويل من موقع مختلف تماما هذه المرة، إذ قررت أن تدخل غمار سباق شباك التذاكر المغربية كمنتجة لفيلمها السينمائي الجديد “مصير امرأة”، لتكتب بذلك فصلا جديدا في مسيرتها التي امتدت لسنوات كممثلة على الشاشة الصغيرة والكبيرة. ويعد “مصير امرأة” الذي ينتمي إلى الدراما الاجتماعية أول ظهرت المقالة الخمليشي: الإنتاج كان حلمي المؤجل.. وبكيت حين رأيت نفسي على الشاشة  .', 'size': 2}, {'id': '396', 'title': 'أسماء الخمليشي تدخل معركة الدفاع عن النساء عبر فيلمها الجديد “مصير امرأة”', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/228501/', 'summary': 'أسماء الخمليشي تدخل معركة الدفاع عن النساء عبر فيلمها الجديد “مصير امرأة”. تبدو الممثلة المغربية أسماء الخمليشي عازمة على خوض تجربة مختلفة هذه المرة، ليس من باب التمثيل فحسب، بل من موقع الإنتاج أيضًا، من خلال فيلمها الجديد “مصير امرأة”، الذي قالت إنه يسلّط الضوء على معاناة النساء في المجتمع المغربي. العمل، الذي وصفته الخمليشي بأنه أول تجربة إنتاجية لها، يهدف إلى ملامسة واقع المرأة المغربية', 'size': 2}], 'main_title': 'الخمليشي: الإنتاج كان حلمي المؤجل.. وبكيت حين رأيت نفسي على الشاشة'}, {'community_id': '5', 'articles': [{'id': '159', 'title': 'الدار البيضاء.. محاكمة عون سلطة متهم بالمشاركة في احتجاجات “جيل زد”', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1108241.html', 'summary': 'الدار البيضاء.. محاكمة عون سلطة متهم بالمشاركة في احتجاجات “جيل زد”. عقدت المحكمة الزجرية الابتدائية بعين السبع في الدار البيضاء، اليوم الثلاثاء، جلسة محاكمة أثارت اهتماما واسعا، بخصوص عون سلطة جرى اعتقاله على خلفية الاحتجاجات التي نظمها شباب حركة “جيل زد”، والتي عمت عددا من المدن المغربية خلال الأسابيع الأخيرة. وعقدت الجلسة بقاعة رقم 8 بالمحكمة، حيث مثل المتهم أمام هيئة الحكم بتهم تتعلق بـ“التجمهر غير ظهرت المقالة الدار البيضاء.. محاكمة عون سلطة متهم بالمشاركة في احتجاجات “جيل زد”  .', 'size': 2}, {'id': '204', 'title': 'محاكمة “عون سلطة” شارك في احتجاجات جيل زد', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d9%85%d8%ad%d8%a7%d9%83%d9%85%d8%a9-%d8%b9%d9%88%d9%86-%d8%b3%d9%84%d8%b7%d8%a9-%d8%ac%d9%8a%d9%84-%d8%b2%d8%af-%d8%a7%d9%84%d8%af%d8%a7%d8%b1-%d8%a7%d9%84%d8%a8%d9%8a%d8%b6%d8%a7%d8%a1/', 'summary': 'محاكمة “عون سلطة” شارك في احتجاجات جيل زد.  – متابعات عرفت المحكمة الزجرية الابتدائية بعين السبع في الدار البيضاء، اليوم الثلاثاء، جلسة مثيرة لمحاكمة عون سلطة تم توقيفه خلال الاحتجاجات التي شهدتها المدينة مع انطلاق ما...  محاكمة “عون سلطة” شارك في احتجاجات جيل زد     .', 'size': 2}], 'main_title': 'الدار البيضاء.. محاكمة عون سلطة متهم بالمشاركة في احتجاجات “جيل زد”'}, {'community_id': '12', 'articles': [{'id': '164', 'title': '"بابي مفتوح لكن المهمة شاقة"... برادة يعرّي أعطاب المنظومة التعليمية', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a8%d8%a7%d8%a8%d9%8a-%d9%85%d9%81%d8%aa%d9%88%d8%ad-%d9%84%d9%83%d9%86-%d8%a7%d9%84%d9%85%d9%87%d9%85%d8%a9-%d8%b4%d8%a7%d9%82%d8%a9-%d8%a8%d8%b1%d8%a7%d8%af%d8%a9-%d9%8a%d8%b9%d8%b1%d9%91/', 'summary': '"بابي مفتوح لكن المهمة شاقة"... برادة يعرّي أعطاب المنظومة التعليمية. كشف محمد سعد برادة، وزير التربية الوطنية والتعليم الأولي والرياضة، عن مجموعة من الاختلالات التي يعرفها قطاع التعليم، من أبرزها التفاوت الحاصل بين المؤسسات التعليمية في منح النقط، حيث قال "أحيانا تجد أستاذا يمنح نقطة مرتفعة فيتبعه المفتش، أو العكس، كما أن هناك خلافات قد تحدث أحيانا بين بعض المفتشين ومديري المؤسسات، إذ قد لا  "بابي مفتوح لكن المهمة شاقة"... برادة يعرّي أعطاب المنظومة التعليمية     .', 'size': 2}, {'id': '348', 'title': '“نفخ” نقاط التلاميذ .. برادة يكشف عن فروقات “مقلقة” تصل لـ 20% بين تقييم الأستاذ والمفتش', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1108318.html', 'summary': '“نفخ” نقاط التلاميذ .. برادة يكشف عن فروقات “مقلقة” تصل لـ 20% بين تقييم الأستاذ والمفتش. كشف محمد سعد برادة، وزير التربية الوطنية والتعليم الأولي والرياضة، عن وجود اختلالات في تقييم التلاميذ من طرف بعض الأساتذة، مؤكدا أن الوزارة باشرت تقييما دقيقا عبر مؤسسة مستقلة لتحديد مدى صحة النتائج ومدى تطابقها مع تقييمات المفتشين. وأوضح الوزير خلال رده أمس الثلاثاء على مداخلات النواب بلجنة التعليم والثقافة والاتصال بمجلس النواب، أن الوزارة ظهرت المقالة “نفخ” نقاط التلاميذ .. برادة يكشف عن فروقات “مقلقة” تصل لـ 20% بين تقييم الأستاذ والمفتش  .', 'size': 2}], 'main_title': '"بابي مفتوح لكن المهمة شاقة"... برادة يعرّي أعطاب المنظومة التعليمية'}, {'community_id': '11', 'articles': [{'id': '255', 'title': 'تقرير\u202d \u202cدولي\u202d: \u202cالمغرب\u202d \u202cيحقق\u202d \u202cتقدماً\u202d \u202cبـ17\u202d \u202cنقطة\u202d \u202cمئوية\u202d \u202cفي\u202d \u202cخدمات\u202d \u202cالمياه\u202d \u202cالمدارة\u202d \u202cبشكل\u202d \u202cآمن', 'source': 'www.alalam.ma', 'link': 'https://www.alalam.ma/تقرير\u202d-\u202cدولي\u202d-\u202cالمغرب\u202d-\u202cيحقق\u202d-\u202cتقدماً\u202d-\u202cبـ17\u202d-\u202cنقطة\u202d_a29984.html', 'summary': 'تقرير\u202d \u202cدولي\u202d: \u202cالمغرب\u202d \u202cيحقق\u202d \u202cتقدماً\u202d \u202cبـ17\u202d \u202cنقطة\u202d \u202cمئوية\u202d \u202cفي\u202d \u202cخدمات\u202d \u202cالمياه\u202d \u202cالمدارة\u202d \u202cبشكل\u202d \u202cآمن. ارتفاع\u202d \u202cنسبة\u202d \u202cالمستفيدين\u202d \u202cعلى\u202d \u202cالمستوى\u202d \u202cالوطني\u202d \u202cمن\u202d \u202c73\u202d \u202cفي\u202d \u202cالمائة\u202d \u202cسنة\u202d \u202c2015\u202d \u202cإلى\u202d \u202c92\u202d \u202cفي\u202d \u202cالمائة\u202d \u202cسنة\u202d \u202c2024', 'size': 2}, {'id': '355', 'title': 'وزارة السياحة: استقبال 15 مليون سائح حتى نهاية شتنبر 2025', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d9%88%d8%b2%d8%a7%d8%b1%d8%a9-%d8%a7%d9%84%d8%b3%d9%8a%d8%a7%d8%ad%d8%a9-%d8%a7%d8%b3%d8%aa%d9%82%d8%a8%d8%a7%d9%84-15-%d9%85%d9%84%d9%8a%d9%88%d9%86-%d8%b3%d8%a7%d8%a6%d8%ad-%d8%ad%d8%aa%d9%89/', 'summary': 'وزارة السياحة: استقبال 15 مليون سائح حتى نهاية شتنبر 2025. أفادت وزارة السياحة والصناعة التقليدية والاقتصاد الاجتماعي والتضامني بأن المغرب استقبل 15 مليون سائح حتى نهاية شتنبر 2025، بزيادة قدرها 14 بالمائة مقارنة بالفترة نفسها من السنة الماضية. وذكر بلاغ للوزارة أن شهر شتنبر الماضي سجل 1,4 مليون سائح، بارتفاع نسبته 9 بالمائة. وأوضح المصدر ذاته أن هذا الرقم القياسي الجديد يؤكد استمرار الدينامية الإيجابية  وزارة السياحة: استقبال 15 مليون سائح حتى نهاية شتنبر 2025     .', 'size': 2}, {'id': '374', 'title': 'قطاع السياحة يواصل ديناميته الإيجابية.. استقبال 15 مليون سائح حتى نهاية شتنبر', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/478670.html', 'summary': 'قطاع السياحة يواصل ديناميته الإيجابية.. استقبال 15 مليون سائح حتى نهاية شتنبر. أفادت وزارة السياحة والصناعة التقليدية والاقتصاد الاجتماعي والتضامني، بأن المغرب استقبل 15 مليون سائح حتى نهاية شتنبر 2025، بزيادة قدرها 14 بالمائة مقارنة بالفترة نفسها من السنة الماضية.', 'size': 3}], 'main_title': 'قطاع السياحة يواصل ديناميته الإيجابية.. استقبال 15 مليون سائح حتى نهاية شتنبر'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    