<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 09/09/2025 - 12h25</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '46', 'title': 'توقيف ضابط شرطة بمكناس للاشتباه في تورطه في قضية ابتزاز', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-655453.html', 'summary': 'توقيف ضابط شرطة بمكناس للاشتباه في تورطه في قضية ابتزاز. باشرت المصلحة الولائية للشرطة القضائية بمدينة مكناس ، زوال الاثنين 8 شتنبر الجاري، بحثًا قضائيًا تحت إشراف النيابة العامة المختصة، وذلك للكشف عن الأفعال المنسوبة إلى ضابط شرطة ممتاز يشتبه في تورطه في قضية ابتزاز وطلب رشوة. وحسب المعطيات الأولية، جرى توقيف الشرطي المشتبه فيه في حالة تلبس أثناء محاولته ابتزاز أحد أطراف قضية زجرية، بناءً على شكاية وضعتها الضحية لدى السلطات الأمنية. وقد تقرر، بأمر من النيابة العامة، الاحتفاظ بالمعني بالأمر تحت تدبير الحراسة النظرية لتعميق البحث معه وكشف جميع ملابسات وخلفيات هذه القضية. وفي السياق ذاته، أصدرت المديرية العامة للأمن الوطني قرارًا يقضي بالتوقيف المؤقت عن العمل في حق الضابط، في انتظار ما ستسفر عنه المسطرة القضائية الجارية، قبل ترتيب الجزاءات الإدارية المقررة في النظام الأساسي لموظفي الأمن الوطني. (الصورة تعبيرية)', 'size': 4}, {'id': '104', 'title': 'اعتقال ضابط شرطة ممتاز بمكناس بعد تورطه في جريمة خطيرة', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/society/412392.html', 'summary': 'اعتقال ضابط شرطة ممتاز بمكناس بعد تورطه في جريمة خطيرة. فتحت المصلحة الولائية للشرطة القضائية بمدينة مكناس بحثا قضائيًا تحت إشراف النيابة العامة المختصة، زوال يومه الاثنين 8 شتنبر الجاري، وذلك لتحديد الأفعال الإجرامية المنسوبة', 'size': 4}, {'id': '146', 'title': 'مكناس.. توقيف ضابط شرطة ممتاز متلبس بالابتزاز والرشوة', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/322830/', 'summary': 'مكناس.. توقيف ضابط شرطة ممتاز متلبس بالابتزاز والرشوة. فتحت المصلحة الولائية للشرطة القضائية بمدينة مكناس بحثا قضائيًا تحت إشراف النيابة العامة المختصة، زوال يومه الاثنين 8 شتنبر الجاري، وذلك لتحديد الأفعال الإجرامية المنسوبة لضابط شرطة ممتاز يعمل بنفس المدينة، والذي يشتبه في تورطه في قضية تتعلق بالابتزاز وطلب مبلغ مالي على سبيل الرشوة. وحسب المعلومات الأولية للبحث، فقد تم توقيف الموظف المشتبه به', 'size': 5}, {'id': '182', 'title': 'ضابط شرطة بمكناس في قبضة العدالة بتهمة الإبتزاز والرشوة', 'source': 'rue20.com', 'link': 'https://rue20.com/934614.html', 'summary': 'ضابط شرطة بمكناس في قبضة العدالة بتهمة الإبتزاز والرشوة.  | الرباط فتحت المصلحة الولائية للشرطة القضائية بمدينة مكناس بحثا قضائيًا تحت إشراف النيابة العامة المختصة، زوال يومه الاثنين 8 شتنبر الجاري، وذلك لتحديد الأفعال الإجرامية المنسوبة لضابط شرطة ممتاز يعمل بنفس المدينة، والذي يشتبه في تورطه في قضية تتعلق بالابتزاز وطلب مبلغ مالي على سبيل الرشوة. وحسب المعلومات الأولية للبحث، فقد تم الخبر ضابط شرطة بمكناس في قبضة العدالة بتهمة الإبتزاز والرشوة  .', 'size': 4}, {'id': '223', 'title': 'مكناس: توقيف شرطة ممتاز في قضية ابتزاز وطلب مبلغ مالي على سبيل الرشوة', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/226815/', 'summary': 'مكناس: توقيف شرطة ممتاز في قضية ابتزاز وطلب مبلغ مالي على سبيل الرشوة. فتحت المصلحة الولائية للشرطة القضائية بمدينة مكناس بحثا قضائيًا تحت إشراف النيابة العامة المختصة، زوال يومه الاثنين 8 شتنبر الجاري، وذلك لتحديد الأفعال الإجرامية المنسوبة لضابط شرطة ممتاز يعمل بنفس المدينة، والذي يشتبه في تورطه في قضية تتعلق بالابتزاز وطلب مبلغ مالي على سبيل الرشوة. وحسب المعلومات الأولية للبحث، فقد تم توقيف الموظف المشتبه به', 'size': 2}], 'main_title': 'مكناس.. توقيف ضابط شرطة ممتاز متلبس بالابتزاز والرشوة'}, {'community_id': '1', 'articles': [{'id': '68', 'title': 'توقعات أحوال الطقس غدا الثلاثاء', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/205925', 'summary': 'توقعات أحوال الطقس غدا الثلاثاء.  تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليوم غد الثلاثاء، أن تتشكل كتل من الضباب بالشمال الغربي للأقاليم الصحراوية خلال الصباح والليل. ويرتقب تسجيل زخات رعدية ستهم كلا من المنطقة الشرقية، والأطلس المتوسط، والسايس، وشرق الواجهة المتوسطية، والريف وجنوب الأقاليم الصحراوية. كما يتوقع نزول قطرات متفرقة ورعد داخل الغرب، والأطلس الكبير والجنوب الشرقي، مع', 'size': 3}, {'id': '353', 'title': 'توقعات أحوال الطقس.. يرتقب تسجيل زخات رعدية في عدة مناطق', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%aa%d9%88%d9%82%d8%b9%d8%a7%d8%aa-%d8%a3%d8%ad%d9%88%d8%a7%d9%84-%d8%a7%d9%84%d8%b7%d9%82%d8%b3-%d9%8a%d8%b1%d8%aa%d9%82%d8%a8-%d8%aa%d8%b3%d8%ac%d9%8a%d9%84-%d8%b2%d8%ae%d8%a7%d8%aa-%d8%b1%d8%b9/', 'summary': 'توقعات أحوال الطقس.. يرتقب تسجيل زخات رعدية في عدة مناطق. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الثلاثاء، أن تتشكل كتل من الضباب بالشمال الغربي للأقاليم الصحراوية خلال الصباح والليل. ويرتقب تسجيل زخات رعدية ستهم كلا من المنطقة الشرقية، والأطلس المتوسط، والسايس، وشرق الواجهة المتوسطية، والريف وجنوب الأقاليم الصحراوية. كما يتوقع نزول قطرات متفرقة ورعد داخل الغرب، والأطلس الكبير والجنوب الشرقي، مع هبوب رياح رملية  توقعات أحوال الطقس.. يرتقب تسجيل زخات رعدية في عدة مناطق     .', 'size': 3}, {'id': '397', 'title': 'طقس الثلاثاء: زخات رعدية وهبوط نسبي في درجات الحرارة', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%b7%d9%82%d8%b3-%d8%a7%d9%84%d8%ab%d9%84%d8%a7%d8%ab%d8%a7%d8%a1-%d8%b2%d8%ae%d8%a7%d8%aa-%d8%b1%d8%b9%d8%af%d9%8a%d8%a9-%d9%88%d9%87%d8%a8%d9%88%d8%b7-%d9%86%d8%b3%d8%a8%d9%8a-%d9%81%d9%8a-%d8%af/', 'summary': 'طقس الثلاثاء: زخات رعدية وهبوط نسبي في درجات الحرارة. المساء اليوم: تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الثلاثاء، أن تتشكل كتل من الضباب بالشمال الغربي للأقاليم الصحراوية خلال الصباح والليل. ويرتقب تسجيل زخات رعدية ستهم كلا من المنطقة الشرقية، والأطلس المتوسط، والسايس، وشرق', 'size': 3}], 'main_title': 'توقعات أحوال الطقس غدا الثلاثاء'}, {'community_id': '5', 'articles': [{'id': '78', 'title': 'نشرة إنذارية: زخات رعدية مصحوبة بهبات رياح مرتقبة اليوم الاثنين بعدد من مناطق المملكة', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/412364.html', 'summary': 'نشرة إنذارية: زخات رعدية مصحوبة بهبات رياح مرتقبة اليوم الاثنين بعدد من مناطق المملكة. أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب، تسجيل زخات رعدية مصحوبة بهبات رياح، اليوم الاثنين بعدد من مناطق المملكة.وأوضحت المديرية، في نشرة إنذارية من مستوى', 'size': 2}, {'id': '286', 'title': 'أمطار رعدية في عدة أقاليم بالمغرب', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d8%a3%d9%85%d8%b7%d8%a7%d8%b1-%d8%b1%d8%b9%d8%af%d9%8a%d8%a9-%d9%81%d9%8a-%d8%b9%d8%af%d8%a9-%d8%a3%d9%82%d8%a7%d9%84%d9%8a%d9%85-%d8%a8%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-1621155.html', 'summary': 'أمطار رعدية في عدة أقاليم بالمغرب. أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب، تسجيل زخات رعدية محليا قوية مصحوبة بتساقط البرد وبهبات رياح، اليوم الثلاثاء، بعدد من مناطق المملكة. وأوضحت المديرية، في نشرة إنذارية من مستوى يقظة “برتقالي”، أنه من المرتقب تسجيل زخات رعدية محليا قوية (من 25 إلى 35 ملم)، مصحوبة بتساقط البرد وبهبات رياح، اليوم الثلاثاء، بعمالات وأقاليم فاس،  أمطار رعدية في عدة أقاليم بالمغرب     - هسبريس جريدة إلكترونية مغربية .', 'size': 2}, {'id': '342', 'title': 'الأرصاد الجوية تحذر من أمطار قوية مصحوبة بالبرد بعدة مناطق بالمغرب', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1098257.html', 'summary': 'الأرصاد الجوية تحذر من أمطار قوية مصحوبة بالبرد بعدة مناطق بالمغرب. أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب، تسجيل زخات رعدية محليا قوية مصحوبة بتساقط البرد وبهبات رياح، اليوم الثلاثاء، بعدد من مناطق المملكة. وأوضحت المديرية، في نشرة إنذارية من مستوى يقظة “برتقالي”، أنه من المرتقب تسجيل زخات رعدية محليا قوية (من 25 إلى 35 ملم)، مصحوبة بتساقط البرد وبهبات رياح، اليوم الثلاثاء، بعمالات وأقاليم فاس، ظهرت المقالة الأرصاد الجوية تحذر من أمطار قوية مصحوبة بالبرد بعدة مناطق بالمغرب  .', 'size': 3}, {'id': '401', 'title': 'نشرة إنذارية: زخات رعدية محليا قوية مصحوبة بتساقط للبرد وبهبات رياح اليوم الثلاثاء بعدد من مناطق المملكة', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d9%86%d8%b4%d8%b1%d8%a9-%d8%a5%d9%86%d8%b0%d8%a7%d8%b1%d9%8a%d8%a9-%d8%b2%d8%ae%d8%a7%d8%aa-%d8%b1%d8%b9%d8%af%d9%8a%d8%a9-%d9%85%d8%ad%d9%84%d9%8a%d8%a7-%d9%82%d9%88%d9%8a%d8%a9-%d9%85%d8%b5%d8%ad-3/', 'summary': 'نشرة إنذارية: زخات رعدية محليا قوية مصحوبة بتساقط للبرد وبهبات رياح اليوم الثلاثاء بعدد من مناطق المملكة. أفادت المديرية العامة للأرصاد الجوية، بأنه يرتقب، تسجيل زخات رعدية محليا قوية مصحوبة بتساقط البرد وبهبات رياح، اليوم الثلاثاء، بعدد من مناطق المملكة. وأوضحت المديرية، في نشرة إنذارية من مستوى يقظة “برتقالي”، أنه من المرتقب تسجيل زخات رعدية محليا قوية (من 25 إلى 35 ملم)، مصحوبة بتساقط البرد وبهبات رياح، اليوم الثلاثاء، بعمالات …  نشرة إنذارية: زخات رعدية محليا قوية مصحوبة بتساقط للبرد وبهبات رياح اليوم الثلاثاء بعدد من مناطق المملكة     .', 'size': 3}], 'main_title': 'الأرصاد الجوية تحذر من أمطار قوية مصحوبة بالبرد بعدة مناطق بالمغرب'}, {'community_id': '3', 'articles': [{'id': '111', 'title': 'بادو الزاكي يتعرض لوعكة صحية ويغيب عن مباراة النيجر ضد تنزانيا', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/sport/worldfoot/412399.html', 'summary': 'بادو الزاكي يتعرض لوعكة صحية ويغيب عن مباراة النيجر ضد تنزانيا. أعلن اتحاد النيجر لكرة القدم، اليوم الإثنين، تعرض الإطار الوطني بادو الزاكي، مدرب المنتخب الأول، لوعكة صحية مفاجئة بمطار محمد الخامس بالدار البيضاء، قبل توجهه', 'size': 2}, {'id': '145', 'title': 'بادو الزاكي يتعرض لوعكة صحية مفاجئة', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/322845/', 'summary': 'بادو الزاكي يتعرض لوعكة صحية مفاجئة. أثار تعرض المدرب المغربي بادو الزاكي، للإصابة بوعكة صحية مفاجئة في مطار محمد الخامس بالدار البيضاء، الكثير من الاهتمام داخل الأوساط الرياضية، بالنظر إلى المكانة التي يحظى بها الإطار الوطني، سواء على الساحة المغربية أو الإفريقية. الوعكة التي باغتته أثناء استعداده للسفر مع منتخب النيجر إلى زنجبار لمواجهة تنزانيا في التصفيات المؤهلة إلى كأس العالم', 'size': 2}], 'main_title': 'بادو الزاكي يتعرض لوعكة صحية ويغيب عن مباراة النيجر ضد تنزانيا'}, {'community_id': '4', 'articles': [{'id': '116', 'title': 'بعد جدل غرامات لوحات الترقيم الدولية.. وزارة النقل تقطع الشك باليقين ببلاغ توضيحي', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/412407.html', 'summary': 'بعد جدل غرامات لوحات الترقيم الدولية.. وزارة النقل تقطع الشك باليقين ببلاغ توضيحي. أكدت وزارة النقل واللوجستيك أن محاضر المخالفات التي تم تحريرها بشأن صفائح تسجيل المركبات الخاصة بالسير الدولي (خارج المغرب) تتعلق بعدم مطابقة هذه الصفائح للخصائص', 'size': 2}, {'id': '124', 'title': 'تحرير محاضر مخالفات بشأن صفائح تسجيل مركبات السير الدولي.. وزارة النقل توضح', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%aa%d8%ad%d8%b1%d9%8a%d8%b1-%d9%85%d8%ad%d8%a7%d8%b6%d8%b1-%d9%85%d8%ae%d8%a7%d9%84%d9%81%d8%a7%d8%aa-%d8%a8%d8%b4%d8%a3%d9%86-%d8%b5%d9%81%d8%a7%d8%a6%d8%ad-%d8%aa%d8%b3%d8%ac%d9%8a%d9%84-%d9%85/', 'summary': 'تحرير محاضر مخالفات بشأن صفائح تسجيل مركبات السير الدولي.. وزارة النقل توضح. أكدت وزارة النقل واللوجستيك أن محاضر المخالفات التي تم تحريرها بشأن صفائح تسجيل المركبات الخاصة بالسير الدولي (خارج المغرب) تتعلق بعدم مطابقة هذه الصفائح للخصائص المشار إليها في مدونة السير. وأوضحت الوزارة، في بلاغ اليوم الاثنين (8 شتنبر)، أنه “إثر ما تم تداوله في الآونة الأخيرة من أخبار على بعض المواقع الإخبارية ووسائل التواصل الاجتماعي', 'size': 3}, {'id': '138', 'title': 'وزارة النقل تكشف تفاصيل مخالفات صفائح المركبات الدولية', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/322853/', 'summary': 'وزارة النقل تكشف تفاصيل مخالفات صفائح المركبات الدولية. أكدت وزارة النقل واللوجستيك أن محاضر المخالفات التي تم تحريرها بشأن صفائح تسجيل المركبات الخاصة بالسير الدولي (خارج المغرب) تتعلق بعدم مطابقة هذه الصفائح للخصائص المشار إليها في مدونة السير. وأوضحت الوزارة، في بلاغ اليوم الاثنين، أنه “إثر ما تم تداوله في الآونة الأخيرة من أخبار على بعض المواقع الإخبارية ووسائل التواصل الاجتماعي بخصوص تحرير', 'size': 4}, {'id': '242', 'title': 'وزارة النقل توضح حقيقة محاضر مخالفات صفائح تسجيل المركبات الخاصة بالسير الدولي', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d9%88%d8%b2%d8%a7%d8%b1%d8%a9-%d8%a7%d9%84%d9%86%d9%82%d9%84-%d8%aa%d9%88%d8%b6%d8%ad-%d8%ad%d9%82%d9%8a%d9%82%d8%a9-%d9%85%d8%ad%d8%a7%d8%b6%d8%b1-%d9%85%d8%ae%d8%a7%d9%84%d9%81%d8%a7%d8%aa-%d8%b5/', 'summary': 'وزارة النقل توضح حقيقة محاضر مخالفات صفائح تسجيل المركبات الخاصة بالسير الدولي. ردت وزارة النقل واللوجيستيك، يومه الاثنين 08 شتنبر 2025، على ما تم تداوله، في الآونة الأخيرة من أخبار على بعض المواقع الإخبارية ووسائل التواصل الاجتماعي، بخصوص تحرير محاضر مخالفات تخص صفائح تسجيل المركبات الخاصة بالسير الدولي (خارج المغرب). وأوضحت وزارة النقل واللوجيستيك، في بلاغ لها، أن المحاضر التي تم تحريرها تتعلق بمخالفات عدم مطابقة صفائح تسجيل المركبات للخصائص المشار إليها …  وزارة النقل توضح حقيقة محاضر مخالفات صفائح تسجيل المركبات الخاصة بالسير الدولي     .', 'size': 3}], 'main_title': 'وزارة النقل تكشف تفاصيل مخالفات صفائح المركبات الدولية'}, {'community_id': '6', 'articles': [{'id': '374', 'title': 'القمة الإفريقية الثانية حول المناخ .. تسليط الضوء على البعد القاري للرؤية المغربية بشأن التحديات المناخية', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/474845.html', 'summary': 'القمة الإفريقية الثانية حول المناخ .. تسليط الضوء على البعد القاري للرؤية المغربية بشأن التحديات المناخية. تم أمس الاثنين في أديس أبابا، تسليط الضوء على البعد القاري للرؤية المغربية بشأن التحديات المناخية، وذلك خلال أشغال قمة المناخ الإفريقية الثانية.', 'size': 2}, {'id': '413', 'title': 'القمة الإفريقية الثانية حول المناخ تسلط الضوء على البعد القاري للرؤية المغربية بشأن التحديات المناخية', 'source': 'www.alalam.ma', 'link': 'https://www.alalam.ma/القمة-الإفريقية-الثانية-حول-المناخ-تسلط-الضوء-على-البعد-القاري_a29408.html', 'summary': 'القمة الإفريقية الثانية حول المناخ تسلط الضوء على البعد القاري للرؤية المغربية بشأن التحديات المناخية.  تم أمس الاثنين في أديس أبابا، تسليط الضوء على البعد القاري للرؤية المغربية بشأن التحديات المناخية، وذلك خلال أشغال قم...', 'size': 2}], 'main_title': 'القمة الإفريقية الثانية حول المناخ .. تسليط الضوء على البعد القاري للرؤية المغربية بشأن التحديات المناخية'}, {'community_id': '2', 'articles': [{'id': '386', 'title': 'اتصال هاتفي بين بوريطة ونظيره السنغالي', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/226841/', 'summary': 'اتصال هاتفي بين بوريطة ونظيره السنغالي. الرباط – أجرى وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج، ناصر بوريطة، اليوم الاثنين، اتصالا هاتفيا مع وزير جمهورية السنغال للاندماج الإفريقي والشؤون الخارجية والسنغاليين بالخارج، شيخ نيانغ، الذي تم تعيينه حديثا في هذا المنصب. وقدم السيد بوريطة لنظيره السنغالي، خلال هذا الاتصال، خالص تهانيه وأطيب متمنياته بالنجاح في مهامه السامية. وكانت هذه المكالمة', 'size': 2}, {'id': '402', 'title': 'بوريطة يهنئ وزير الخارجية السنغالي الجديد ويؤكد على متانة العلاقات التاريخية بين الرباط ودكار', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a8%d9%88%d8%b1%d9%8a%d8%b7%d8%a9-%d9%8a%d9%87%d9%86%d8%a6-%d9%88%d8%b2%d9%8a%d8%b1-%d8%a7%d9%84%d8%ae%d8%a7%d8%b1%d8%ac%d9%8a%d8%a9-%d8%a7%d9%84%d8%b3%d9%86%d8%ba%d8%a7%d9%84%d9%8a-%d8%a7%d9%84/', 'summary': 'بوريطة يهنئ وزير الخارجية السنغالي الجديد ويؤكد على متانة العلاقات التاريخية بين الرباط ودكار. أجرى وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج، ناصر بوريطة، مساء أمس الاثنين 08 شتنبر 2025، اتصالا هاتفيا مع وزير جمهورية السنغال للاندماج الإفريقي والشؤون الخارجية والسنغاليين بالخارج، شيخ نيانغ، الذي تم تعيينه حديثا في هذا المنصب. وقدم بوريطة لنظيره السنغالي، خلال هذا الاتصال، خالص تهانيه وأطيب متمنياته بالنجاح في مهامه السامية، …  بوريطة يهنئ وزير الخارجية السنغالي الجديد ويؤكد على متانة العلاقات التاريخية بين الرباط ودكار     .', 'size': 2}], 'main_title': 'اتصال هاتفي بين بوريطة ونظيره السنغالي'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    