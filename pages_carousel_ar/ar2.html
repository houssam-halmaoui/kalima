<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 21/09/2025 - 18h26</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '11', 'articles': [{'id': '16', 'title': 'أمينة بنخضرة: أنبوب الغاز الإفريقي الأطلسي يعزز اندماج إفريقيا ويخدم استراتيجية المغرب', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-659114.html', 'summary': 'أمينة بنخضرة: أنبوب الغاز الإفريقي الأطلسي يعزز اندماج إفريقيا ويخدم استراتيجية المغرب. أكدت المديرة العامة للمكتب الوطني للهيدروكربورات والمعادن، أمينة بنخضرة، أمس السبت، أن خط أنبوب الغاز الإفريقي الأطلسي يجسد الرؤية الاستراتيجية لصاحب الجلالة الملك محمد السادس، والإرادة المشتركة للمغرب ونيجيريا للعمل من أجل إفريقيا أكثر اندماجا، على أساس مشاريع تنموية رابح-رابح. وأبرزت السيدة بنخضرة، التي كانت تتحدث خلال الدورة العاشرة للقاءات الجيوسياسية في تروفيل (شمال فرنسا)،', 'size': 3}, {'id': '128', 'title': 'بنخضرة: خط أنبوب الغاز الإفريقي الأطلسي يجسد الرؤية الملكية الاستراتيجية من أجل إفريقيا أكثر اندماجا', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a8%d9%86%d8%ae%d8%b6%d8%b1%d8%a9-%d8%ae%d8%b7-%d8%a3%d9%86%d8%a8%d9%88%d8%a8-%d8%a7%d9%84%d8%ba%d8%a7%d8%b2-%d8%a7%d9%84%d8%a5%d9%81%d8%b1%d9%8a%d9%82%d9%8a-%d8%a7%d9%84%d8%a3%d8%b7%d9%84%d8%b3/', 'summary': 'بنخضرة: خط أنبوب الغاز الإفريقي الأطلسي يجسد الرؤية الملكية الاستراتيجية من أجل إفريقيا أكثر اندماجا. أكدت المديرة العامة للمكتب الوطني للهيدروكربورات والمعادن، أمينة بنخضرة، يوم أمس السبت (20 شتنبر)، أن خط أنبوب الغاز الإفريقي الأطلسي يجسد الرؤية الاستراتيجية لصاحب الجلالة الملك محمد السادس، والإرادة المشتركة للمغرب ونيجيريا للعمل من أجل إفريقيا أكثر اندماجا، على أساس مشاريع تنموية رابح-رابح. وأبرزت بنخضرة، التي كانت تتحدث خلال الدورة العاشرة للقاءات الجيوسياسية في تروفيل', 'size': 3}, {'id': '130', 'title': 'أمينة بنخضرة: خط أنبوب الغاز الإفريقي الأطلسي يجسد الرؤية الملكية الاستراتيجية من أجل إفريقيا أكثر اندماجا', 'source': 'assabah.ma', 'link': 'https://assabah.ma/872208.html', 'summary': 'أمينة بنخضرة: خط أنبوب الغاز الإفريقي الأطلسي يجسد الرؤية الملكية الاستراتيجية من أجل إفريقيا أكثر اندماجا. أكدت المديرة العامة للمكتب الوطني للهيدروكربورات والمعادن، أمينة بنخضرة، اليوم السبت، أن خط أنبوب الغاز الإفريقي الأطلسي يجسد الرؤية الاستراتيجية لصاحب الجلالة الملك محمد السادس، والإرادة المشتركة للمغرب ونيجيريا للعمل من أجل إفريقيا أكثر اندماجا، على أساس مشاريع تنموية رابح-رابح. وأبرزت بنخضرة، التي كانت تتحدث خلال الدورةأكمل القراءة » المقالة أمينة بنخضرة: خط أنبوب الغاز الإفريقي الأطلسي يجسد الرؤية الملكية الاستراتيجية من أجل إفريقيا أكثر اندماجا  .', 'size': 3}], 'main_title': 'أمينة بنخضرة: أنبوب الغاز الإفريقي الأطلسي يعزز اندماج إفريقيا ويخدم استراتيجية المغرب'}, {'community_id': '2', 'articles': [{'id': '18', 'title': 'نشرة إنذارية.. مستوى يقظة برتقالي: زخات رعدية ورياح قوية بعدد من مناطق المملكة', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-659107.html', 'summary': 'نشرة إنذارية.. مستوى يقظة برتقالي: زخات رعدية ورياح قوية بعدد من مناطق المملكة. يرتقب تسجيل زخات رعدية (من 20 إلى 30 ملم) مصحوبة بهبات رياح، اليوم الأحد، بعدد من مناطق المملكة، وفق ما أفادت به المديرية العامة للأرصاد الجوية. وأوضحت نشرة إنذارية للمديرية من مستوى يقظة “برتقالي”، أنه من المرتقب تسجيل هذه الزخات الرعدية بكل من عمالات وأقاليم جرادة وفكيك وبولمان وميدلت وورزازات وأزيلال، من الساعة الثانية زوالا', 'size': 4}, {'id': '134', 'title': 'نشرة إنذارية .. زخات رعدية مصحوبة بهبات رياح مرتقبة بعدد من مناطق المملكة', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/323960/', 'summary': 'نشرة إنذارية .. زخات رعدية مصحوبة بهبات رياح مرتقبة بعدد من مناطق المملكة. يرتقب تسجيل زخات رعدية (من 20 إلى 30 ملم) مصحوبة بهبات رياح، اليوم الأحد، بعدد من مناطق المملكة، وفق ما أفادت به المديرية العامة للأرصاد الجوية. وأوضحت نشرة إنذارية للمديرية من مستوى يقظة “برتقالي”، أنه من المرتقب تسجيل هذه الزخات الرعدية بكل من عمالات وأقاليم جرادة وفكيك وبولمان وميدلت وورزازات وأزيلال، من الساعة الثانية زوالا', 'size': 4}, {'id': '164', 'title': 'نشرة إنذارية: زخات رعدية مصحوبة بهبات رياح مرتقبة اليوم الأحد', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d9%86%d8%b4%d8%b1%d8%a9-%d8%a5%d9%86%d8%b0%d8%a7%d8%b1%d9%8a%d8%a9-%d8%b2%d8%ae%d8%a7%d8%aa-%d8%b1%d8%b9%d8%af%d9%8a%d8%a9-%d9%85%d8%b5%d8%ad%d9%88%d8%a8%d8%a9-%d8%a8%d9%87%d8%a8%d8%a7%d8%aa-%d8%b1-3/', 'summary': 'نشرة إنذارية: زخات رعدية مصحوبة بهبات رياح مرتقبة اليوم الأحد. يرتقب تسجيل زخات رعدية (من 20 إلى 30 ملم) مصحوبة بهبات رياح، اليوم الأحد، بعدد من مناطق المملكة، وفق ما أفادت به المديرية العامة للأرصاد الجوية. وأوضحت نشرة إنذارية للمديرية من مستوى يقظة "برتقالي"، أنه من المرتقب تسجيل هذه الزخات الرعدية بكل من عمالات وأقاليم جرادة وفكيك وبولمان وميدلت وورزازات وأزيلال، من الساعة الثانية زوالا  نشرة إنذارية: زخات رعدية مصحوبة بهبات رياح مرتقبة اليوم الأحد     .', 'size': 4}, {'id': '344', 'title': 'نشرة إنذارية: أمطار مصحوبة برياح الأحد بهذه المناطق', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1101486.html', 'summary': 'نشرة إنذارية: أمطار مصحوبة برياح الأحد بهذه المناطق. يرتقب تسجيل زخات رعدية (من 20 إلى 30 ملم) مصحوبة بهبات رياح، اليوم الأحد، بعدد من مناطق المملكة، وفق ما أفادت به المديرية العامة للأرصاد الجوية. وأوضحت نشرة إنذارية للمديرية من مستوى يقظة “برتقالي”، أنه من المرتقب تسجيل هذه الزخات الرعدية بكل من عمالات وأقاليم جرادة وفكيك وبولمان وميدلت وورزازات وأزيلال، من الساعة الثانية زوالا ظهرت المقالة نشرة إنذارية: أمطار مصحوبة برياح الأحد بهذه المناطق  .', 'size': 4}], 'main_title': 'نشرة إنذارية.. مستوى يقظة برتقالي: زخات رعدية ورياح قوية بعدد من مناطق المملكة'}, {'community_id': '10', 'articles': [{'id': '19', 'title': 'الكونفدرالية تحذر من تفاقم أزمة الدواء وتطالب بتدخل رئيس الحكومة', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-659103.html', 'summary': 'الكونفدرالية تحذر من تفاقم أزمة الدواء وتطالب بتدخل رئيس الحكومة. أعلنت كونفدرالية نقابات صيادلة المغرب عن استعدادها لخوض خطوات احتجاجية جديدة أكثر تصعيدًا، من بينها تنظيم وقفة وطنية كبرى سيُكشف عن تاريخها قريبًا بعد استكمال التنسيق مع مختلف الهيئات النقابية والجمعوية الصيدلانية عبر ربوع المملكة. وأفاد بلاغ للكونفدرالية أن هذا التوجه التصعيدي جاء عقب انعقاد مجلسها الوطني يوم 19 شتنبر 2025، في ظل تصاعد حالة', 'size': 4}, {'id': '157', 'title': 'بسبب “تجاهل” وزارة الصحة لمطالبهم.. صيادلة المغرب يهددون بوقفة احتجاجية وطنية كبرى', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1101400.html', 'summary': 'بسبب “تجاهل” وزارة الصحة لمطالبهم.. صيادلة المغرب يهددون بوقفة احتجاجية وطنية كبرى. أعلنت كونفدرالية نقابات صيادلة المغرب عن دخولها ما وصفته بـ “مرحلة جديدة من التصعيد ضد وزارة الصحة والحماية الاجتماعية”، مهددة بتنظيم أشكال احتجاجية غير مسبوقة، بما في ذلك وقفة وطنية كبرى، وذلك ردا على ما وصفته بـ”التجاهل المستمر” للملف المطلبي للقطاع. وفي بلاغ شديد اللهجة، صدر عقب انعقاد مجلسها الوطني، أكدت الكونفدرالية أن حالة “الاحتقان” ظهرت المقالة بسبب “تجاهل” وزارة الصحة لمطالبهم.. صيادلة المغرب يهددون بوقفة احتجاجية وطنية كبرى  .', 'size': 4}, {'id': '162', 'title': 'بعد تجاهلها من طرف الحكومة.. كونفدرالية نقابات الصيادلة تقرر تصعيد احتجاجاتها', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a8%d8%b9%d8%af-%d8%aa%d8%ac%d8%a7%d9%87%d9%84%d9%87%d8%a7-%d9%85%d9%86-%d8%b7%d8%b1%d9%81-%d8%a7%d9%84%d8%ad%d9%83%d9%88%d9%85%d8%a9-%d9%83%d9%88%d9%86%d9%81%d8%af%d8%b1%d8%a7%d9%84%d9%8a%d8%a9/', 'summary': 'بعد تجاهلها من طرف الحكومة.. كونفدرالية نقابات الصيادلة تقرر تصعيد احتجاجاتها. قالت كونفدرالية نقابات صيادلة المغرب إنها تستعد لتبني أشكال احتجاجية جديدة أكثر قوة وتأثيرًا، مع الإعداد لتنظيم وقفة احتجاجية وطنية كبرى في القريب العاجل، سيُعلن عن تاريخها قريبا فور استكمال التنسيق مع مختلف الفعاليات النقابية والجمعوية الصيدلانية عبر ربوع المملكة. وجاء قرار التصعيد من طرف الكونفدرالية عقب انعقاد مجلسها الوطني في ظل ما وصفته بتنامي  بعد تجاهلها من طرف الحكومة.. كونفدرالية نقابات الصيادلة تقرر تصعيد احتجاجاتها     .', 'size': 4}, {'id': '326', 'title': 'الصيادلة يصعدون ضد وزارة الصحة ويستعدون لوقفة وطنية كبرى', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/323973/', 'summary': 'الصيادلة يصعدون ضد وزارة الصحة ويستعدون لوقفة وطنية كبرى. دخلت كونفدرالية نقابات صيادلة المغرب على خط مواجهة جديدة مع وزارة الصحة والحماية الاجتماعية، معلنة ما وصفته بـ”مرحلة تصعيد غير مسبوقة” ضد ما تعتبره تجاهلا مستمرا لمطالب الصيادلة. وأكدت الكونفدرالية أن حالة الاحتقان المهني بلغت مستويات خطيرة، خصوصا بعد الوقفة الاحتجاجية الحاشدة التي نظمها الصيادلة يوم 9 شتنبر أمام مقر الوزارة، والتي لم تحظ،', 'size': 4}], 'main_title': 'الكونفدرالية تحذر من تفاقم أزمة الدواء وتطالب بتدخل رئيس الحكومة'}, {'community_id': '7', 'articles': [{'id': '25', 'title': 'الطقس اليوم الأحد.. انخفاض درجات الحرارة وأمطار رعدية مرتقبة بعدة مناطق', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-659085.html', 'summary': 'الطقس اليوم الأحد.. انخفاض درجات الحرارة وأمطار رعدية مرتقبة بعدة مناطق. تتوقع المديرية العامة للأرصاد الجوية، اليوم الأحد، أن يشهد الطقس انخفاضا في درجات الحرارة خلال النهار مع دائما استمرار الطقس الحار شيئا ما بكل من الأقاليم الصحراوية والجنوب الشرقي للبلاد. كما يرتقب تمركز سحب رعدية مصحوبة بقطرات مطرية أو زخات فوق كل من مرتفعات الأطلس والريف، والجنوب الشرقي وشرق المملكة. وخلال الصباح، يحتمل أيضا نزول', 'size': 2}, {'id': '166', 'title': 'أحوال الطقس.. تسجيل انخفاض في درجات الحرارة اليوم الأحد', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a3%d8%ad%d9%88%d8%a7%d9%84-%d8%a7%d9%84%d8%b7%d9%82%d8%b3-%d8%aa%d8%b3%d8%ac%d9%8a%d9%84-%d8%a7%d9%86%d8%ae%d9%81%d8%a7%d8%b6-%d9%81%d9%8a-%d8%af%d8%b1%d8%ac%d8%a7%d8%aa-%d8%a7%d9%84%d8%ad%d8%b1/', 'summary': 'أحوال الطقس.. تسجيل انخفاض في درجات الحرارة اليوم الأحد. تتوقع المديرية العامة للأرصاد الجوية، اليوم الأحد، أن يشهد الطقس انخفاضا في درجات الحرارة خلال النهار مع استمرار الطقس الحار شيئا ما بكل من الأقاليم الصحراوية والجنوب الشرقي للبلاد. كما يرتقب تمركز سحب رعدية مصحوبة بقطرات مطرية أو زخات فوق كل من مرتفعات الأطلس والريف، والجنوب الشرقي وشرق المملكة. وخلال الصباح، يحتمل أيضا نزول بعض  أحوال الطقس.. تسجيل انخفاض في درجات الحرارة اليوم الأحد     .', 'size': 3}, {'id': '229', 'title': 'توقعات أحوال الطقس اليوم الأحد بالمملكة', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%aa%d9%88%d9%82%d8%b9%d8%a7%d8%aa-%d8%a3%d8%ad%d9%88%d8%a7%d9%84-%d8%a7%d9%84%d8%b7%d9%82%d8%b3-%d8%a7%d9%84%d9%8a%d9%88%d9%85-%d8%a7%d9%84%d8%a3%d8%ad%d8%af-%d8%a8%d8%a7%d9%84%d9%85%d9%85%d9%84/', 'summary': 'توقعات أحوال الطقس اليوم الأحد بالمملكة. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الأحد، أن يشهد الطقس انخفاضا في درجات الحرارة خلال النهار مع دائما استمرار الطقس الحار شيئا ما بكل من الأقاليم الصحراوية والجنوب الشرقي للبلاد. كما يرتقب تمركز سحب رعدية مصحوبة بقطرات مطرية أو زخات فوق كل من مرتفعات الأطلس والريف، والجنوب الشرقي وشرق المملكة. وخلال الصباح، …  توقعات أحوال الطقس اليوم الأحد بالمملكة     .', 'size': 2}], 'main_title': 'أحوال الطقس.. تسجيل انخفاض في درجات الحرارة اليوم الأحد'}, {'community_id': '4', 'articles': [{'id': '29', 'title': 'المحكمة التجارية بالدار البيضاء تقضي بتفكيك سفينة مهجورة قرب ميناء المحمدية', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-659069.html', 'summary': 'المحكمة التجارية بالدار البيضاء تقضي بتفكيك سفينة مهجورة قرب ميناء المحمدية. هبة بريس – الدار البيضاء قضت المحكمة التجارية بالدار البيضاء بتفكيك سفينة الشحن “LINDEN”، التي ترفع علم سانت كيتس ونيفيس، بعدما تُركت في حالة إهمال قبالة ميناء المحمدية منذ يناير الماضي. وجاء هذا الحكم استنادًا إلى تقرير المسح البحري، الذي أكد أن السفينة، التي يتجاوز عمرها 40 عامًا، لم تعد صالحة للإبحار أو لأي نشاط', 'size': 2}, {'id': '74', 'title': 'المحكمة التجارية بالدار البيضاء تأمر بتفكيك سفينة “LINDEN” المهجورة قبالة المحمدية', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/society/413066.html', 'summary': 'المحكمة التجارية بالدار البيضاء تأمر بتفكيك سفينة “LINDEN” المهجورة قبالة المحمدية. أصدرت المحكمة التجارية بالدار البيضاء، مؤخرًا، حكمًا يقضي بتفكيك سفينة الشحن “LINDEN” التي ترفع علم سانت كيتس ونيفيس، بعدما ظلت عالقة في وضعية مهجورة قبالة', 'size': 2}], 'main_title': 'المحكمة التجارية بالدار البيضاء تقضي بتفكيك سفينة مهجورة قرب ميناء المحمدية'}, {'community_id': '5', 'articles': [{'id': '43', 'title': 'أخنوش: الصحة والتعليم في صلب أولويات الحكومة', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-659027.html', 'summary': 'أخنوش: الصحة والتعليم في صلب أولويات الحكومة. هبة بريس أكد رئيس حزب التجمع الوطني للأحرار، عزيز أخنوش، اليوم السبت بمراكش، أن الحكومة أولت أهمية “قصوى” لقطاعي الصحة والتعليم، وجعلتهما في صلب الأولويات، باعتبارهما الدعامة الأساسية لأي مشروع تنموي. وقال أخنوش، في كلمة له خلال الجولة الوطنية التواصلية “مسار الإنجازات”، في محطتها الخامسة بجهة مراكش آسفي، بحضور قيادات الحزب وعدد من المنتخبين المحليين', 'size': 4}, {'id': '82', 'title': 'أخنوش من مراكش: الحكومة أولت أهمية "قصوى" لقطاعي الصحة والتعليم', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/413075.html', 'summary': 'أخنوش من مراكش: الحكومة أولت أهمية "قصوى" لقطاعي الصحة والتعليم. أكد رئيس حزب التجمع الوطني للأحرار، عزيز أخنوش، اليوم السبت بمراكش، أن الحكومة أولت أهمية "قصوى" لقطاعي الصحة والتعليم، وجعلتهما في صلب الأولويات، باعتبارهما الدعامة', 'size': 4}, {'id': '138', 'title': 'أخنوش يستعرض أوراش الحكومة وبرامجها الاجتماعية', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/323944/', 'summary': 'أخنوش يستعرض أوراش الحكومة وبرامجها الاجتماعية. أكد رئيس حزب التجمع الوطني للأحرار، عزيز أخنوش، اليوم السبت بمراكش، أن الحكومة أولت أهمية “قصوى” لقطاعي الصحة والتعليم، وجعلتهما في صلب الأولويات، باعتبارهما الدعامة الأساسية لأي مشروع تنموي. وقال أخنوش، في كلمة له خلال الجولة الوطنية التواصلية “مسار الإنجازات”، في محطتها الخامسة بجهة مراكش آسفي، بحضور قيادات الحزب وعدد من المنتخبين المحليين والجهويين، إن', 'size': 4}, {'id': '319', 'title': 'أخنوش: الحكومة حققت إنجازات مهمة في قطاع التعليم منها مدارس الريادة', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a3%d8%ae%d9%86%d9%88%d8%b4-%d8%a7%d9%84%d8%ad%d9%83%d9%88%d9%85%d8%a9-%d8%ad%d9%82%d9%82%d8%aa-%d8%a5%d9%86%d8%ac%d8%a7%d8%b2%d8%a7%d8%aa-%d9%85%d9%87%d9%85%d8%a9-%d9%81%d9%8a-%d9%82%d8%b7%d8%a7/', 'summary': 'أخنوش: الحكومة حققت إنجازات مهمة في قطاع التعليم منها مدارس الريادة. أكد رئيس حزب التجمع الوطني للأحرار، عزيز أخنوش، أمس السبت (20 شتنبر) بمراكش، أن إنجازات مهمة تحققت اليوم في قطاع التعليم، منها أن 50 في المائة من المدارس الابتدائية تحولت إلى “مدارس رائدة”، ومع بداية الدخول المدرسي لسنة 2027 ستكون جميع المدارس الابتدائية مدارس ريادة. وقال أخنوش، في كلمته خلال المحطة الخامسة من الجولة التواصلية', 'size': 4}], 'main_title': 'أخنوش: الصحة والتعليم في صلب أولويات الحكومة'}, {'community_id': '3', 'articles': [{'id': '96', 'title': '"مسار الإنجازات".. الطالبي: التجمع يترفع عن الخطاب الشعبوي ولا يشخصن النقاش والحكومة أوفت بالتزاماتها', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/politic/413089.html', 'summary': '"مسار الإنجازات".. الطالبي: التجمع يترفع عن الخطاب الشعبوي ولا يشخصن النقاش والحكومة أوفت بالتزاماتها. بعث راشيد الطالبي العلمي، عضو المكتب السياسي لحزب التجمع الوطني للأحرار، في كلمته اليوم السبت بمراكش، خلال الجولة الخامسة من "مسار الإنجازات"، مجموعة من الرسائل', 'size': 2}, {'id': '141', 'title': 'الطالبي العلمي: الدخول السياسي المقبل حافل بالهجمات.. لكنها “مجرد فقاعات”', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1101457.html', 'summary': 'الطالبي العلمي: الدخول السياسي المقبل حافل بالهجمات.. لكنها “مجرد فقاعات”. أكد راشيد الطالبي العلمي، عضو المكتب السياسي لحزب التجمع الوطني للأحرار، أن الدخول السياسي المقبل سيكون حافلا بالتحديات والهجمات، لكنه اعتبرها مجرد “فقاعات لا تؤثر في صلابة الحكومة ولا في إرادة الحزب”، مشيرا إلى أن الأولوية ستظل دائما موجهة إلى تحسين التعليم والصحة ومحاربة الفقر والهشاشة، تحقيقا لتطلعات المواطنين. وأوضح الطالبي العلمي، أمس السبت، في ظهرت المقالة الطالبي العلمي: الدخول السياسي المقبل حافل بالهجمات.. لكنها “مجرد فقاعات”  .', 'size': 2}], 'main_title': '"مسار الإنجازات".. الطالبي: التجمع يترفع عن الخطاب الشعبوي ولا يشخصن النقاش والحكومة أوفت بالتزاماتها'}, {'community_id': '12', 'articles': [{'id': '125', 'title': 'أخنوش: نتفهم الذين يريدون استثمار وجود هذه الحكومة لحل جميع المشاكل', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a3%d8%ae%d9%86%d9%88%d8%b4-%d9%86%d8%aa%d9%81%d9%87%d9%85-%d8%a7%d9%84%d8%b0%d9%8a%d9%86-%d9%8a%d8%b1%d9%8a%d8%af%d9%88%d9%86-%d8%a7%d8%b3%d8%aa%d8%ab%d9%85%d8%a7%d8%b1-%d9%88%d8%ac%d9%88%d8%af/', 'summary': 'أخنوش: نتفهم الذين يريدون استثمار وجود هذه الحكومة لحل جميع المشاكل. قال رئيس الحكومة، عزيز أخنوش، يوم أمس السبت (20 شتنبر) بمراكش، إنه يتفهم بعض الأشخاص الذين يريدون استثمار وجود هذه الحكومة للضغط، من أجل حل جميع المشاكل بشكل آني ومستعجل، مؤكدا أن الحكومة ستحاول حل هذه المشاكل على قدر المستطاع. وفي كلمته خلال الجولة الوطنية التواصلية “مسار الإنجازات”، التي حطت محطتها الخامسة الرحال بجهة مراكش', 'size': 2}, {'id': '354', 'title': 'أخنوش : الحكومة إتخذت إجراءات شملت جميع الفئات من أسر هشة وموظفين ومقاولات ودعم السكن', 'source': 'rue20.com', 'link': 'https://rue20.com/938374.html', 'summary': 'أخنوش : الحكومة إتخذت إجراءات شملت جميع الفئات من أسر هشة وموظفين ومقاولات ودعم السكن. . مراكش بالأرقام والمعطيات، دافع رئيس الحكومة، عزيز أخنوش، عن حصيلة حكومته، مؤكدا استمرارها في تنزيل الأوراش الاجتماعية الكبرى التي يقودها جلالة الملك ببلادنا حتى آخر يوم من الولاية الحكومية. واستعرض أخنوش، في كلمته خلال الجولة التواصلية الجهوية لحزبه “مسار الإنجازات”، التي وصلت أمس السبت إلى محطتها الخامسة بجهة مراكش آسفي، مجموعة من البرامج الخبر أخنوش : الحكومة إتخذت إجراءات شملت جميع الفئات من أسر هشة وموظفين ومقاولات ودعم السكن  .', 'size': 2}], 'main_title': 'أخنوش: نتفهم الذين يريدون استثمار وجود هذه الحكومة لحل جميع المشاكل'}, {'community_id': '9', 'articles': [{'id': '131', 'title': 'الجيراري: التحقت بحزب الأحرار بعد تهميش الفنانين خلال جائحة كورونا', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/323968/', 'summary': 'الجيراري: التحقت بحزب الأحرار بعد تهميش الفنانين خلال جائحة كورونا. أبدى الفنان المسرحي بنعيسى الجيراري، ارتياحه للانضمام إلى صفوف حزب التجمع الوطني للأحرار، مؤكدا أن هذه الخطوة جاءت بتشجيع مباشر من رئيس الحزب عزيز أخنوش، الذي كان له دور بارز في دعمه، خاصة في سياق تأسيس الفيدرالية الوطنية للفنان، التي تندرج ضمن هياكل الحزب وتعنى بقضايا الفنانين وقطاع الثقافة. وقال الجيراري، خلال مشاركته في الجولة', 'size': 2}, {'id': '322', 'title': 'بنعيسى الجيراري: سعيد بالانتماء للأحرار لأنه حزب المستقبل وفيدرالية الفنانين فكرة أخنوش', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a8%d9%86%d8%b9%d9%8a%d8%b3%d9%89-%d8%a7%d9%84%d8%ac%d9%8a%d8%b1%d8%a7%d8%b1%d9%8a-%d8%b3%d8%b9%d9%8a%d8%af-%d8%a8%d8%a7%d9%84%d8%a7%d9%86%d8%aa%d9%85%d8%a7%d8%a1-%d9%84%d9%84%d8%a3%d8%ad%d8%b1/', 'summary': 'بنعيسى الجيراري: سعيد بالانتماء للأحرار لأنه حزب المستقبل وفيدرالية الفنانين فكرة أخنوش. عبّر الفنان المسرحي والكوميدي بنعيسى الجيراري عن سعادته بالانضمام إلى حزب التجمع الوطني للأحرار، مؤكدا أن اختياره لم يكن وليد اللحظة بل نتيجة قناعة راسخة بأن العمل السياسي قادر على صناعة التغيير. وأوضح الجيراري أن قرار التحاقه بالحزب أثار استغراب وانتقادات البعض، قبل أن يضيف: “إيماني بأن السياسة يمكن أن تفتح آفاقا جديدة هو ما', 'size': 2}], 'main_title': 'الجيراري: التحقت بحزب الأحرار بعد تهميش الفنانين خلال جائحة كورونا'}, {'community_id': '6', 'articles': [{'id': '170', 'title': 'البام يحل أمانته الإقليمية بوجدة وسط جدل داخلي وصراع قبيل مؤتمر الشبيبة', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a7%d9%84%d8%a8%d8%a7%d9%85-%d9%8a%d8%ad%d9%84-%d8%a3%d9%85%d8%a7%d9%86%d8%aa%d9%87-%d8%a7%d9%84%d8%a5%d9%82%d9%84%d9%8a%d9%85%d9%8a%d8%a9-%d8%a8%d9%88%d8%ac%d8%af%d8%a9-%d9%88%d8%b3%d8%b7-%d8%ac/', 'summary': 'البام يحل أمانته الإقليمية بوجدة وسط جدل داخلي وصراع قبيل مؤتمر الشبيبة. يعيش حزب الأصالة والمعاصرة بمدينة وجدة أنجاد على وقع أزمة تنظيمية حادة، عقب إعلان الأمانة الجهوية للحزب بجهة الشرق عن حل الأمانة الإقليمية وتعيين لجنة مؤقتة لتدبير المرحلة المقبلة، في انتظار عقد مؤتمر لانتخاب قيادة جديدة. الخطوة التي جرى إبلاغها رسميا إلى والي جهة الشرق، أثارت تباينات في القراءات السياسية والتنظيمية. ففي الوقت الذي وصف  البام يحل أمانته الإقليمية بوجدة وسط جدل داخلي وصراع قبيل مؤتمر الشبيبة     .', 'size': 2}, {'id': '301', 'title': 'أزمة البام بوجدة تتصاعد: إقصاء الشباب وحل الأمانة الإقليمية يفتح صراعات داخلية', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/politic/413121.html', 'summary': 'أزمة البام بوجدة تتصاعد: إقصاء الشباب وحل الأمانة الإقليمية يفتح صراعات داخلية. قررت الأمانة الجهوية لحزب الأصالة والمعاصرة بجهة الشرق حل الأمانة الإقليمية بوجدة، وذلك على خلفية التوترات والصراعات الخفية التي تعصف بقيادات الحزب بعمالة وجدة أنجاد. ويرى', 'size': 2}], 'main_title': 'البام يحل أمانته الإقليمية بوجدة وسط جدل داخلي وصراع قبيل مؤتمر الشبيبة'}, {'community_id': '0', 'articles': [{'id': '256', 'title': '\u202aأسلحة بيضاء توقف شخصا بتارودانت\u202c', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d8%a3%d8%b3%d9%84%d8%ad%d8%a9-%d8%a8%d9%8a%d8%b6%d8%a7%d8%a1-%d8%aa%d9%88%d9%82%d9%81-%d8%b4%d8%ae%d8%b5%d8%a7-%d8%a8%d8%aa%d8%a7%d8%b1%d9%88%d8%af%d8%a7%d9%86%d8%aa-1627771.html', 'summary': '\u202aأسلحة بيضاء توقف شخصا بتارودانت\u202c. تفاعلت ولاية أمن أكادير، بجدية كبيرة، مع شريط منشور على صفحات مواقع التواصل الاجتماعي، يظهر فيه شخص يحوز أسلحة بيضاء في ظروف تشكل خطرا على الأشخاص والممتلكات بمدينة تارودانت. وأوردت ولاية أمن أكادير، ضمن بلاغ لها، أن الأبحاث والتحريات المنجزة على ضوء هذا الشريط، بتنسيق مع مصالح المديرية العامة لمراقبة التراب الوطني، أسفرت عن تحديد  \u202aأسلحة بيضاء توقف شخصا بتارودانت\u202c     - هسبريس جريدة إلكترونية مغربية .', 'size': 2}, {'id': '388', 'title': 'الأمن يتفاعل مع شريط على مواقع التواصل ويوقف مهدد سلامة المواطنين بتارودانت', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d8%a3%d9%85%d9%86-%d9%8a%d8%aa%d9%81%d8%a7%d8%b9%d9%84-%d9%85%d8%b9-%d8%b4%d8%b1%d9%8a%d8%b7-%d8%b9%d9%84%d9%89-%d9%85%d9%88%d8%a7%d9%82%d8%b9-%d8%a7%d9%84%d8%aa%d9%88%d8%a7%d8%b5%d9%84/', 'summary': 'الأمن يتفاعل مع شريط على مواقع التواصل ويوقف مهدد سلامة المواطنين بتارودانت. تفاعلت ولاية أمن أكادير، بجدية كبيرة، مع شريط فيديو منشور على صفحات مواقع التواصل الاجتماعي، يظهر فيه شخص يحوز أسلحة بيضاء في ظروف تشكل خطرا على الأشخاص والممتلكات بمدينة تارودانت. وحسب مصدر أمني، أسفرت الأبحاث والتحريات المنجزة على ضوء هذا الشريط، بتنسيق مع مصالح المديرية العامة لمراقبة التراب الوطني، عن تحديد هوية المشتبه …  الأمن يتفاعل مع شريط على مواقع التواصل ويوقف مهدد سلامة المواطنين بتارودانت     .', 'size': 2}], 'main_title': '\u202aأسلحة بيضاء توقف شخصا بتارودانت\u202c'}, {'community_id': '1', 'articles': [{'id': '287', 'title': 'الفارس الإيطالي إيمانويل غوديانو يتوج بجائزة “الداخلة” في تطوان', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-659207.html', 'summary': 'الفارس الإيطالي إيمانويل غوديانو يتوج بجائزة “الداخلة” في تطوان. فاز الفارس الإيطالي إيمانويل غوديانو، أمس السبت بحلبة “إيبيكا” التابعة للحرس الملكي بتطوان، بجائزة “الداخلة”، ضمن محطة تطوان للدوري الملكي المغربي للقفز على الحواجز، المنظم تحت الرعاية السامية لصاحب الجلالة الملك محمد السادس. وتألق إيمانويل غوديانو ممتطيا الفرس “كراك بالو” حيث قطع المضمار في توقيت 36 ثانية و 34 جزءا من المائة، متقدما بفارق ضئيل', 'size': 3}, {'id': '368', 'title': 'الدوري الملكي المغربي للقفز على الحواجز.. هؤلاء أبرز المتوجين', 'source': 'machahid24.com', 'link': 'https://machahid24.com/sport/476240.html', 'summary': 'الدوري الملكي المغربي للقفز على الحواجز.. هؤلاء أبرز المتوجين. فاز الفارس الإيطالي إيمانويل غوديانو، أمس السبت بحلبة "إيبيكا" التابعة للحرس الملكي بتطوان، بجائزة "الداخلة"، ضمن محطة تطوان للدوري الملكي المغربي للقفز على الحواجز، المنظم تحت الرعاية السامية للملك محمد السادس.', 'size': 2}, {'id': '393', 'title': 'الفارس الإيطالي إيمانويل غوديانو يتوج بجائزة الداخلة في الدوري الملكي المغربي للقفز على الحواجز', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d9%81%d8%a7%d8%b1%d8%b3-%d8%a7%d9%84%d8%a5%d9%8a%d8%b7%d8%a7%d9%84%d9%8a-%d8%a5%d9%8a%d9%85%d8%a7%d9%86%d9%88%d9%8a%d9%84-%d8%ba%d9%88%d8%af%d9%8a%d8%a7%d9%86%d9%88-%d9%8a%d8%aa%d9%88/', 'summary': 'الفارس الإيطالي إيمانويل غوديانو يتوج بجائزة الداخلة في الدوري الملكي المغربي للقفز على الحواجز. توج الفارس الإيطالي إيمانويل غوديانو، أمس السبت 20 شتنبر 2025، بحلبة “إيبيكا” التابعة للحرس الملكي بتطوان، بجائزة “الداخلة”، ضمن محطة تطوان للدوري الملكي المغربي للقفز على الحواجز، المنظم تحت الرعاية السامية للملك محمد السادس. وتميز إيمانويل غوديانو ممتطيا الفرس “كراك بالو” حيث قطع المضمار في توقيت 36 ثانية و 34 جزءا من المائة، …  الفارس الإيطالي إيمانويل غوديانو يتوج بجائزة الداخلة في الدوري الملكي المغربي للقفز على الحواجز     .', 'size': 2}], 'main_title': 'الفارس الإيطالي إيمانويل غوديانو يتوج بجائزة “الداخلة” في تطوان'}, {'community_id': '8', 'articles': [{'id': '299', 'title': 'الاتحاد العام لمقاولات المغرب في زيارة مرتقبة إلى المكسيك لاستكشاف فرص الاستثمار والشراكة', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/206518', 'summary': 'الاتحاد العام لمقاولات المغرب في زيارة مرتقبة إلى المكسيك لاستكشاف فرص الاستثمار والشراكة.  يقوم وفد من الاتحاد العام لمقاولات المغرب، بقيادة رئيسه شكيب العلج ، بزيارة اقتصادية رفيعة المستوى إلى المكسيك خلال الفترة الممتدة بين 22 و25 شتنبر الجاري. وذكر بلاغ للاتحاد أن هذه الزيارة، المنظمة بتنسيق مع سفارة المملكة المغربية في المكسيك، تهدف إلى تعزيز العلاقات الاقتصادية والتجارية بين البلدين، واستكشاف فرص جديدة للاستثمار والشراكة', 'size': 2}, {'id': '367', 'title': 'وفد من الاتحاد العام لمقاولات المغرب يزور المكسيك لاستكشاف فرص الاستثمار والشراكة', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/476250.html', 'summary': 'وفد من الاتحاد العام لمقاولات المغرب يزور المكسيك لاستكشاف فرص الاستثمار والشراكة. يقوم وفد من الاتحاد العام لمقاولات المغرب، بقيادة رئيسه شكيب العلج، بزيارة اقتصادية رفيعة المستوى إلى المكسيك خلال الفترة الممتدة بين 22 و25 شتنبر الجاري.', 'size': 2}], 'main_title': 'الاتحاد العام لمقاولات المغرب في زيارة مرتقبة إلى المكسيك لاستكشاف فرص الاستثمار والشراكة'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    