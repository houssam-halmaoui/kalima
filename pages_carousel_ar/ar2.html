<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 14/07/2025 - 12h25</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '6', 'articles': [{'id': '27', 'title': 'الطقس غدا الإثنين.. أجواء حارة وضباب بالسواحل ورياح قوية بالأطلس', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-640238.html', 'summary': 'الطقس غدا الإثنين.. أجواء حارة وضباب بالسواحل ورياح قوية بالأطلس. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليوم غد الاثنين، أن ترتفع درجات الحرارة مع طقس حار نسبيا إلى حار بكل من السهول الداخلية والوسطى، والسايس، والجنوب الشرقي للبلاد، وكذا داخل الأقاليم الصحراوية للمملكة. كما يرتقب تشكل سحب منخفضة كثيفة نسبيا، خلال الصباح والليل، فوق سواحل المحيط الأطلسي، حيث ستكون مرفوقة بضباب محلي، فيما ستكون الأجواء قليلة السحب إلى أحيانا غائمة بكل من شرق وجنوب شرق المملكة. ويتوقع أيضا تسجيل هبات رياح قوية شيئا ما فوق كل من مرتفعات الأطلسين الكبير والمتوسط والجنوب الشرقي والمناطق الجنوبية، مرفوقة بتطاير الغبار محليا. وستتراوح درجات الحرارة الدنيا ما بين 21 و27 درجة مئوية بكل من الجنوب الشرقي للبلاد وجنوب المنطقة الشرقية والواجهة المتوسطية، وما بين 15 و21 درجة بباقي الأرجاء. أما البحر فسيكون هادئا بالواجهة المتوسطية، وهادئا إلى قليل الهيجان بالبوغاز، وقليل الهيجان إلى هائج على طول الساحل الأطلسي.', 'size': 3}, {'id': '148', 'title': 'طقس حار وهبات رياح قوية مع بداية الأسبوع', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-580045.html', 'summary': 'طقس حار وهبات رياح قوية مع بداية الأسبوع. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليوم غد الاثنين، أن ترتفع درجات الحرارة مع طقس حار نسبيا إلى حار بكل من السهول الداخلية والوسطى، والسايس، والجنوب الشرقي للبلاد، وكذا داخل الأقاليم الصحراوية للمملكة. كما يرتقب تشكل سحب منخفضة كثيفة نسبيا، خلال الصباح والليل، فوق سواحل المحيط الأطلسي، حيث ستكون مرفوقة بضباب محلي،', 'size': 5}, {'id': '343', 'title': 'طقس الاثنين…أجواء حارة بعدد من المناطق', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/318219/', 'summary': 'طقس الاثنين…أجواء حارة بعدد من المناطق. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الاثنين، أن ترتفع درجات الحرارة مع طقس حار نسبيا إلى حار بكل من السهول الداخلية والوسطى، والسايس، والجنوب الشرقي للبلاد، وكذا داخل الأقاليم الصحراوية للمملكة. كما يرتقب تشكل سحب منخفضة كثيفة نسبيا، خلال الصباح والليل، فوق سواحل المحيط الأطلسي، حيث ستكون مرفوقة بضباب محلي، فيما ستكون الأجواء', 'size': 4}, {'id': '376', 'title': 'طقس حار بمختلف مناطق المملكة اليوم الاثنين', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%b7%d9%82%d8%b3-%d8%ad%d8%a7%d8%b1-%d8%a8%d9%85%d8%ae%d8%aa%d9%84%d9%81-%d9%85%d9%86%d8%a7%d8%b7%d9%82-%d8%a7%d9%84%d9%85%d9%85%d9%84%d9%83%d8%a9-%d8%a7%d9%84%d9%8a%d9%88%d9%85-%d8%a7%d9%84%d8%a7/', 'summary': 'طقس حار بمختلف مناطق المملكة اليوم الاثنين. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الاثنين، أن ترتفع درجات الحرارة مع طقس حار نسبيا إلى حار بكل من السهول الداخلية والوسطى، والسايس، والجنوب الشرقي للبلاد، وكذا داخل الأقاليم الصحراوية للمملكة. كما يرتقب تشكل سحب منخفضة كثيفة نسبيا، خلال الصباح والليل، فوق سواحل المحيط الأطلسي، حيث ستكون مرفوقة بضباب محلي، فيما ستكون الأجواء قليلة  طقس حار بمختلف مناطق المملكة اليوم الاثنين     .', 'size': 5}, {'id': '403', 'title': 'طقس الاثنين.. حار نسبيا في عدة مناطق بالمملكة', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/224612/', 'summary': 'طقس الاثنين.. حار نسبيا في عدة مناطق بالمملكة. كواليس اليوم تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الاثنين، أن ترتفع درجات الحرارة مع طقس حار نسبيا إلى حار بكل من السهول الداخلية والوسطى، والسايس، والجنوب الشرقي للبلاد، وكذا داخل الأقاليم الصحراوية للمملكة. كما يرتقب تشكل سحب منخفضة كثيفة نسبيا، خلال الصباح والليل، فوق سواحل المحيط الأطلسي، حيث ستكون مرفوقة بضباب محلي، فيما', 'size': 4}], 'main_title': 'طقس حار وهبات رياح قوية مع بداية الأسبوع'}, {'community_id': '3', 'articles': [{'id': '51', 'title': 'الملك يهنئ رئيس مونتينيغرو بمناسبة العيد الوطني لبلاده', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-640156.html', 'summary': 'الملك يهنئ رئيس مونتينيغرو بمناسبة العيد الوطني لبلاده. هبة بريس بعث الملك محمد السادس برقية تهنئة إلى جاكوف ميلاتوفيتش، رئيس جمهورية مونتينيغرو؛ وذلك بمناسبة احتفال بلاده بعيدها الوطني. وأعرب الملك، في هذه البرقية، عن أحر التهاني وأصدق المتمنيات للرئيس جاكوف ميلاتوفيتش بدوام الصحة والسعادة، ولبلده الصديق بمزيد التقدم والرخاء. ومما جاء في البرقية الملكية: “أغتنم هذه المناسبة السعيدة، لأعرب لكم عن تثميني لمستوى علاقات الصداقة والتعاون التي تجمع بلدينا، والتي يحدونا حرص مشترك على المضي قدما في تعزيزها والارتقاء بتعاوننا الثنائي ليشمل مختلف المجالات، خدمة للمصالح المشتركة لشعبيْنا الصديقيْن”.', 'size': 2}, {'id': '306', 'title': 'الملك محمد السادس يبعث برقية تهنئة لرئيس مونتينيغرو بمناسبة عيد بلاده الوطني', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/203408', 'summary': 'الملك محمد السادس يبعث برقية تهنئة لرئيس مونتينيغرو بمناسبة عيد بلاده الوطني.  بعث الملك محمد السادس برقية تهنئة إلى رئيس جمهورية مونتينيغرو، ميلاتوفيتش، وذلك بمناسبة احتفال بلاده بعيدها الوطني، معربا من خلالها عن أصدق التهاني وأطيب المتمنيات للرئيس ولشعب مونتينيغرو بمزيد من التقدم والازدهار. وأكد الملك في البرقية على متانة علاقات الصداقة والتقدير المتبادل التي تجمع بين المملكة المغربية وجمهورية مونتينيغرو، معربا عن تطلعه إلى مواصلة', 'size': 2}, {'id': '324', 'title': 'برقية تهنئة من جلالة الملك إلى رئيس مونتينيغرو', 'source': 'assabah.ma', 'link': 'https://assabah.ma/859189.html', 'summary': 'برقية تهنئة من جلالة الملك إلى رئيس مونتينيغرو. بعث صاحب الجلالة الملك محمد السادس برقية تهنئة إلى رئيس مونتينيغرو، جاكوف ميلاتوفيتش، وذلك بمناسبة احتفال بلاده بعيدها الوطني. وأعرب جلالة الملك، في هذه البرقية، عن أحر التهاني وأصدق المتمنيات للرئيس جاكوف ميلاتوفيتش بدوام الصحة والسعادة، ولبلده الصديق بمزيد التقدم والرخاء. ومما جاء في برقية جلالة الملكأكمل القراءة » المقالة برقية تهنئة من جلالة الملك إلى رئيس مونتينيغرو  .', 'size': 4}], 'main_title': 'برقية تهنئة من جلالة الملك إلى رئيس مونتينيغرو'}, {'community_id': '1', 'articles': [{'id': '69', 'title': 'موجة حر من الثلاثاء إلى الجمعة بعدد من مناطق المملكة', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/203379', 'summary': 'موجة حر من الثلاثاء إلى الجمعة بعدد من مناطق المملكة.  أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب تسجيل موجة حر بدرجات حرارة تتراوح ما بين 40 و47 درجة، ابتداء من بعد غد الثلاثاء إلى غاية يوم الجمعة، بعدد من مناطق المملكة. وأوضحت المديرية، في نشرة إنذارية من مستوى يقظة برتقالي، أنه يرتقب تسجيل موجة حر،من الثلاثاء إلى الجمعة،بدرجات حرارة تتراوح مابين 44 و47', 'size': 2}, {'id': '183', 'title': 'نشرة إنذارية. موجة حر من الثلاثاء إلى الجمعة بعدد من مناطق المملكة', 'source': 'rue20.com', 'link': 'https://rue20.com/919751.html', 'summary': 'نشرة إنذارية. موجة حر من الثلاثاء إلى الجمعة بعدد من مناطق المملكة. . الرباط أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب تسجيل موجة حر بدرجات حرارة تتراوح ما بين 40 و47 درجة، ابتداء من بعد غد الثلاثاء إلى غاية يوم الجمعة، بعدد من مناطق المملكة. وأوضحت المديرية، في نشرة إنذارية من مستوى يقظة برتقالي، أنه يرتقب تسجيل موجة حر، من الثلاثاء إلى الجمعة، بدرجات حرارة تتراوح الخبر نشرة إنذارية. موجة حر من الثلاثاء إلى الجمعة بعدد من مناطق المملكة  .', 'size': 3}, {'id': '228', 'title': 'نشرة إنذارية.. موجة حر تجتاح العديد من المناطق بالمملكة', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/224588/', 'summary': 'نشرة إنذارية.. موجة حر تجتاح العديد من المناطق بالمملكة. كواليس اليوم أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب تسجيل موجة حر بدرجات حرارة تتراوح ما بين 40 و47 درجة، ابتداء من بعد غد الثلاثاء إلى غاية يوم الجمعة، بعدد من مناطق المملكة. وأوضحت المديرية، في نشرة إنذارية من مستوى يقظة برتقالي، أنه يرتقب تسجيل موجة حر، من الثلاثاء إلى الجمعة، بدرجات حرارة تتراوح', 'size': 4}, {'id': '234', 'title': 'عودة الحر من الثلاثاء إلى الجمعة', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%b9%d9%88%d8%af%d8%a9-%d8%a7%d9%84%d8%ad%d8%b1-%d9%85%d9%86-%d8%a7%d9%84%d8%ab%d9%84%d8%a7%d8%ab%d8%a7%d8%a1-%d8%a5%d9%84%d9%89-%d8%a7%d9%84%d8%ac%d9%85%d8%b9%d8%a9/', 'summary': 'عودة الحر من الثلاثاء إلى الجمعة. المساء اليوم: أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب تسجيل موجة حر بدرجات حرارة تتراوح ما بين 40 و47 درجة، ابتداء من بعد غد الثلاثاء إلى غاية يوم الجمعة، بعدد من مناطق المملكة. وأوضحت المديرية، في', 'size': 3}], 'main_title': 'نشرة إنذارية.. موجة حر تجتاح العديد من المناطق بالمملكة'}, {'community_id': '0', 'articles': [{'id': '80', 'title': 'نهائي مونديال الأندية.. التوقيت والقنوات الناقلة لموقعة باريس سان جيرمان وتشلسي', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/sport/worldfoot/409223.html', 'summary': 'نهائي مونديال الأندية.. التوقيت والقنوات الناقلة لموقعة باريس سان جيرمان وتشلسي. تتجه أنظار عشاق كرة القدم مساء اليوم الأحد إلى ملعب "ميتلايف" بالولايات المتحدة الأمريكية، حيث تُختتم منافسات كأس العالم للأندية 2025 في نسختها الجديدة، التي', 'size': 2}, {'id': '198', 'title': 'نهائي مونديال الأندية يحمل مفاجآت عديدة وسط تدابير أمنية مشددة', 'source': 'machahid24.com', 'link': 'https://machahid24.com/sport/469364.html', 'summary': 'نهائي مونديال الأندية يحمل مفاجآت عديدة وسط تدابير أمنية مشددة. تتجه أنظار جماهير كرة القدم اليوم الأحد، صوب ملعب "ميتلايف" بالولايات المتحدة الأمريكية الذي سيحتضن نهائي كأس العالم للأندية 2025.', 'size': 2}], 'main_title': 'نهائي مونديال الأندية.. التوقيت والقنوات الناقلة لموقعة باريس سان جيرمان وتشلسي'}, {'community_id': '4', 'articles': [{'id': '108', 'title': 'من أكادير.. "التجمع" يطلق دينامية شبابية جديدة لتعزيز التواصل مع الشباب وتقريبهم من السياسة', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/politic/409251.html', 'summary': 'من أكادير.. "التجمع" يطلق دينامية شبابية جديدة لتعزيز التواصل مع الشباب وتقريبهم من السياسة. التأم 120 شابة وشابا من مدينة أكادير، على مدى يومين، في لقاء تواصلي وتكويني نظمته الشبيبة التجمعية بشراكة مع مؤسسة كونراد أديناور، خصص للنقاش المفتوح', 'size': 2}, {'id': '363', 'title': 'شباب الأحرار أكادير يناقشون إنجازات الحكومة وآفاق المشاركة السياسية', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1085262.html', 'summary': 'شباب الأحرار أكادير يناقشون إنجازات الحكومة وآفاق المشاركة السياسية. نظّمت الشبيبة التجمعية، بشراكة مع مؤسسة كونراد أديناور، لقاء تواصلياً وتكوينياً احتضنته مدينة أكادير على مدى يومين، بمشاركة أزيد من 120 شابة وشاباً، بهدف مناقشة حصيلة العمل الحكومي الذي يقوده حزب التجمع الوطني للأحرار، وبحث سبل تعزيز انخراط الشباب في الحياة السياسية. وشكّل هذا اللقاء مناسبة للنقاش المفتوح حول قضايا التدبير المحلي بمدينة أكادير، والوقوف ظهرت المقالة شباب الأحرار أكادير يناقشون إنجازات الحكومة وآفاق المشاركة السياسية  .', 'size': 2}], 'main_title': 'من أكادير.. "التجمع" يطلق دينامية شبابية جديدة لتعزيز التواصل مع الشباب وتقريبهم من السياسة'}, {'community_id': '7', 'articles': [{'id': '138', 'title': 'المغرب يشارك بنخبة شبابه في الأولمبياد الدولية للرياضيات بأستراليا', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/318187/', 'summary': 'المغرب يشارك بنخبة شبابه في الأولمبياد الدولية للرياضيات بأستراليا. شدّ الفريق الوطني المغربي للرياضيات الرحال، يوم أمس السبت، نحو مدينة باث الأسترالية، لتمثيل المملكة في الدورة الجديدة من الأولمبياد الدولية للرياضيات، التي تُعد من أبرز المسابقات العلمية المرموقة الموجهة لتلاميذ التعليم الثانوي عبر العالم، وتشكل منصة سنوية لتنافس ألمع العقول الشابة في مجالات التفكير المنطقي والتحليل الرياضي. ويُعد هذا الحدث فرصة ثمينة لتأكيد المكانة', 'size': 2}, {'id': '170', 'title': 'المغرب يرسل نخبة شبابه لتمثيل المملكة في الأولمبياد الدولية للرياضيات بأستراليا', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1085171.html', 'summary': 'المغرب يرسل نخبة شبابه لتمثيل المملكة في الأولمبياد الدولية للرياضيات بأستراليا. غادر الفريق الوطني المغربي للرياضيات، أمس السبت 12 يوليوز 2025، أرض الوطن متوجها إلى مدينة باث في أستراليا، لتمثيل المملكة في منافسات الأولمبياد الدولية للرياضيات، إحدى أبرز التظاهرات العلمية على مستوى العالم، والتي تجمع نخبة العقول الشابة من مختلف الدول. وتأتي هذه المشاركة تتويجا لمسار إعداد دقيق ومكثف أشرفت عليه وزارة التربية الوطنية والتعليم الأولي ظهرت المقالة المغرب يرسل نخبة شبابه لتمثيل المملكة في الأولمبياد الدولية للرياضيات بأستراليا  .', 'size': 2}], 'main_title': 'المغرب يشارك بنخبة شبابه في الأولمبياد الدولية للرياضيات بأستراليا'}, {'community_id': '10', 'articles': [{'id': '179', 'title': 'اعتصام الخزان المائي.. مجلس حقوق الإنسان يستنكر تطوراته الخطيرة', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a7%d8%b9%d8%aa%d8%b5%d8%a7%d9%85-%d8%a7%d9%84%d8%ae%d8%b2%d8%a7%d9%86-%d8%a7%d9%84%d9%85%d8%a7%d8%a6%d9%8a-%d9%85%d8%ac%d9%84%d8%b3-%d8%ad%d9%82%d9%88%d9%82-%d8%a7%d9%84%d8%a5%d9%86%d8%b3%d8%a7/', 'summary': 'اعتصام الخزان المائي.. مجلس حقوق الإنسان يستنكر تطوراته الخطيرة. أعرب المجلس الوطني لحقوق الإنسان عن استيائه من التطورات الخطيرة الأخيرة التي شهدها اعتصام "ب. ز" على سطح خزان مائي شاهق، وتمنى أن تستقر حالة عنصر الوقاية المدنية "ش. ي" الذي تعرض للاعتداء فوق سطح الخزان، وحالة عنصر الدرك الملكي "ب. ع" و "ب. ز" ويتجاوزوا مرحلة الخطر. ونبه المجلس، من خلال البيان الذي توصل  اعتصام الخزان المائي.. مجلس حقوق الإنسان يستنكر تطوراته الخطيرة     .', 'size': 2}, {'id': '192', 'title': 'بوعياش : البث المباشر للحظات إعتصام “الشاطو” مرفوض والمجلس إستجاب لبعض مطالب المعتصِم', 'source': 'rue20.com', 'link': 'https://rue20.com/919695.html', 'summary': 'بوعياش : البث المباشر للحظات إعتصام “الشاطو” مرفوض والمجلس إستجاب لبعض مطالب المعتصِم. . الرباط عبر المجلس الوطني لحقوق الإنسان عن أسفه للتطورات الخطيرة الأخيرة التي شهدها اعتصام السيد ب. ز. على سطح خزان مائي شاهق ويتمنى أن تستقر حالة عنصر الوقاية المدنية ش. ي. الذي تعرض للاعتداء فوق سطح الخزان، وحالة عنصر الدرك الملكي ب. ع. والسيد ب. ز. ويتجاوزوا مرحلة الخطر. وذكر المجلس أنه بتوجيهات الخبر بوعياش : البث المباشر للحظات إعتصام “الشاطو” مرفوض والمجلس إستجاب لبعض مطالب المعتصِم  .', 'size': 2}], 'main_title': 'اعتصام الخزان المائي.. مجلس حقوق الإنسان يستنكر تطوراته الخطيرة'}, {'community_id': '2', 'articles': [{'id': '194', 'title': 'وفاة الرئيس النيجيري السابق محمد بخاري عن عمر يناهز 82 عاما', 'source': 'machahid24.com', 'link': 'https://machahid24.com/international/469377.html', 'summary': 'وفاة الرئيس النيجيري السابق محمد بخاري عن عمر يناهز 82 عاما. توفي، اليوم الأحد بلندن، الرئيس النيجيري السابق، محمد بخاري، عن عمر يناهز 82 عاما، حسبما أفاد المتحدث باسمه، غاربا شيهو. وأكد شيهو، الذي كان يشغل منصب المتحدث باسم بخاري خلال فترة رئاسته (2015-2023)، عبر وسائل التواصل الاجتماعي، أن “عائلة الرئيس السابق محمد بخاري أعلنت وفاته عشية اليوم بإحدى المصحات في لندن”. وكان بخاري …', 'size': 2}, {'id': '245', 'title': 'وفاة الرئيس النيجيري السابق محمد بخاري', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d9%88%d9%81%d8%a7%d8%a9-%d8%a7%d9%84%d8%b1%d8%a6%d9%8a%d8%b3-%d8%a7%d9%84%d9%86%d9%8a%d8%ac%d9%8a%d8%b1%d9%8a-%d8%a7%d9%84%d8%b3%d8%a7%d8%a8%d9%82-%d9%85%d8%ad%d9%85%d8%af-%d8%a8%d8%ae%d8%a7%d8%b1/', 'summary': 'وفاة الرئيس النيجيري السابق محمد بخاري. توفي، اليوم الأحد، بالعاصمة البريطانية بلندن، الرئيس النيجيري السابق، محمد بخاري، عن عمر يناهز 82 عاما. وأكد المتحدث باسم الرئيس النيجيري السابق، محمد بخاري، غاربا شيهو، عبر وسائل التواصل الاجتماعي، أن “عائلة الرئيس السابق محمد بخاري أعلنت وفاته عشية اليوم بإحدى المصحات في لندن”. وكان بخاري رئيسا لنيجيريا على امتداد ولايتين رئاسيتين في …  وفاة الرئيس النيجيري السابق محمد بخاري     .', 'size': 2}], 'main_title': 'وفاة الرئيس النيجيري السابق محمد بخاري عن عمر يناهز 82 عاما'}, {'community_id': '5', 'articles': [{'id': '323', 'title': 'زادوهم فالراحة..”فيفا” يصدر قرارات جديدة للحفاظ على صحة اللاعبين', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%b2%d8%a7%d8%af%d9%88%d9%87%d9%85-%d9%81%d8%a7%d9%84%d8%b1%d8%a7%d8%ad%d8%a9-%d9%81%d9%8a%d9%81%d8%a7-%d9%8a%d8%b5%d8%af%d8%b1-%d9%82%d8%b1%d8%a7%d8%b1%d8%a7%d8%aa-%d8%ac%d8%af%d9%8a%d8%af/', 'summary': 'زادوهم فالراحة..”فيفا” يصدر قرارات جديدة للحفاظ على صحة اللاعبين. أعلن الاتحاد الدولي لكرة القدم “فيفا” عن قرارات جديدة في ما يتعلق بصحة اللاعبين واللاعبات والراحات والعطلات التي يحصلون عليها، وكذا سبل وقايتهم من المخاطر المهنية. جاء ذلك بعد اجتماع عقده الاتحاد مع عدد من ممثلي اتحادات اللاعبين من جميع أنحاء العالم في نيويورك، على هامش منافسات بطولة كأس العالم للأندية التي تستضيفها الولايات المتحدة', 'size': 2}, {'id': '341', 'title': 'قرارات جديدة بشأن صحة وفترات راحة اللاعبين واللاعبات”', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/318224/', 'summary': 'قرارات جديدة بشأن صحة وفترات راحة اللاعبين واللاعبات”. أعلن الاتحاد الدولي لكرة القدم “فيفا” عن قرارات جديدة في ما يتعلق بصحة اللاعبين واللاعبات والراحات والعطلات التي يحصلون عليها، وكذا سبل وقايتهم من المخاطر المهنية. جاء ذلك بعد اجتماع عقده الاتحاد مع عدد من ممثلي اتحادات اللاعبين من جميع أنحاء العالم في نيويورك، على هامش منافسات بطولة كأس العالم للأندية التي تستضيفها الولايات المتحدة', 'size': 2}], 'main_title': 'زادوهم فالراحة..”فيفا” يصدر قرارات جديدة للحفاظ على صحة اللاعبين'}, {'community_id': '9', 'articles': [{'id': '325', 'title': 'برقية تهنئة من جلالة الملك إلى الرئيس الفرنسي', 'source': 'assabah.ma', 'link': 'https://assabah.ma/859187.html', 'summary': 'برقية تهنئة من جلالة الملك إلى الرئيس الفرنسي. بعث صاحب الجلالة الملك محمد السادس برقية تهنئة إلى رئيس الجمهورية الفرنسية، إيمانويل ماكرون، وذلك بمناسبة احتفال بلاده بعيدها الوطني. وأعرب جلالة الملك، في هذه البرقية، عن أحر تهانئ جلالته، مقرونة بأصدق متمنياته بالسعادة والازدهار لفرنسا والفرنسيين. ومما جاء في برقية جلالة الملك “بعدما عبر بلدانا عنأكمل القراءة » المقالة برقية تهنئة من جلالة الملك إلى الرئيس الفرنسي  .', 'size': 6}, {'id': '350', 'title': 'الملك محمد السادس يراسل الرئيس الفرنسي ماكرون', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-580108.html', 'summary': 'الملك محمد السادس يراسل الرئيس الفرنسي ماكرون. بعث الملك محمد السادس برقية تهنئة إلى رئيس الجمهورية الفرنسية، إيمانويل ماكرون، وذلك بمناسبة احتفال بلاده بعيدها الوطني. وأعرب الملك، في هذه البرقية التي نقلت وكالة الأنباء المغربية تفاصيلها، عن أحر تهانئه مقرونة بأصدق متمنياته بالسعادة والازدهار لفرنسا والفرنسيين. ومما جاء في البرقية الملكية: “بعدما عبر بلدانا عن رغبتهما في بناء مستقبل مشترك', 'size': 5}, {'id': '357', 'title': 'الملك يهنئ ماكرون ويؤكد التزام المغرب بشراكة استراتيجية مع فرنسا', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1085261.html', 'summary': 'الملك يهنئ ماكرون ويؤكد التزام المغرب بشراكة استراتيجية مع فرنسا. أكد الملك محمد السادس، في برقية بعثها إلى الرئيس الفرنسي إيمانويل ماكرون، بمناسبة احتفال بلاده بعيدها الوطني، حرص المغرب على مواصلة تنزيل شراكته الاستراتيجية مع فرنسا “بنفس روح الثقة والتقدير المتبادل التي طبعت بناءها”. وبعث الملك برقية تهنئة إلى رئيس الجمهورية الفرنسية، بمناسبة احتفال بلاده بعيدها الوطني، أعرب له فيها عن أحر التهاني مقرونة بأصدق ظهرت المقالة الملك يهنئ ماكرون ويؤكد التزام المغرب بشراكة استراتيجية مع فرنسا  .', 'size': 4}, {'id': '386', 'title': 'الملك في برقية إلى ماكرون: إعادة تحديد المسار يرسي أسس علاقات استراتيجية بين المغرب وفرنسا', 'source': 'rue20.com', 'link': 'https://rue20.com/919806.html', 'summary': 'الملك في برقية إلى ماكرون: إعادة تحديد المسار يرسي أسس علاقات استراتيجية بين المغرب وفرنسا.  | الرباط بعث صاحب الجلالة الملك محمد السادس برقية تهنئة إلى رئيس الجمهورية الفرنسية، إيمانويل ماكرون، وذلك بمناسبة احتفال بلاده بعيدها الوطني. وأعرب جلالة الملك، في هذه البرقية، عن أحر تهانئ جلالته، مقرونة بأصدق متمنياته بالسعادة والازدهار لفرنسا والفرنسيين. ومما جاء في برقية جلالة الملك “بعدما عبر بلدانا عن رغبتهما في بناء مستقبل الخبر الملك في برقية إلى ماكرون: إعادة تحديد المسار يرسي أسس علاقات استراتيجية بين المغرب وفرنسا  .', 'size': 3}, {'id': '407', 'title': 'الملك محمد السادس يهنئ إيمانويل ماكرون بمناسبة احتفال بلاده بعيدها الوطني', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%85%d8%ad%d9%85%d8%af-%d8%a7%d9%84%d8%b3%d8%a7%d8%af%d8%b3-%d9%8a%d9%87%d9%86%d8%a6-%d8%a5%d9%8a%d9%85%d8%a7%d9%86%d9%88%d9%8a%d9%84-%d9%85%d8%a7%d9%83%d8%b1%d9%88/', 'summary': 'الملك محمد السادس يهنئ إيمانويل ماكرون بمناسبة احتفال بلاده بعيدها الوطني. بعث الملك محمد السادس برقية تهنئة إلى رئيس الجمهورية الفرنسية، إيمانويل ماكرون، وذلك بمناسبة احتفال بلاده بعيدها الوطني. وأعرب الملك محمد السادس، في هذه البرقية، عن أحر تهانئ جلالته، مقرونة بأصدق متمنياته بالسعادة والازدهار لفرنسا والفرنسيين. ومما جاء في برقية الملك محمد السادس “بعدما عبر بلدانا عن رغبتهما في بناء مستقبل مشترك على …  الملك محمد السادس يهنئ إيمانويل ماكرون بمناسبة احتفال بلاده بعيدها الوطني     .', 'size': 4}], 'main_title': 'برقية تهنئة من جلالة الملك إلى الرئيس الفرنسي'}, {'community_id': '8', 'articles': [{'id': '370', 'title': 'اعتبرتها تحريضا على التمييز.. تنسيقية نسائية تستنكر تصريحات بنكيران', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a7%d8%b9%d8%aa%d8%a8%d8%b1%d8%aa%d9%87%d8%a7-%d8%aa%d8%ad%d8%b1%d9%8a%d8%b6%d8%a7-%d8%b9%d9%84%d9%89-%d8%a7%d9%84%d8%aa%d9%85%d9%8a%d9%8a%d8%b2-%d8%aa%d9%86%d8%b3%d9%8a%d9%82%d9%8a%d8%a9-%d9%86/', 'summary': 'اعتبرتها تحريضا على التمييز.. تنسيقية نسائية تستنكر تصريحات بنكيران. طالبت التنسيقية النسائية من أجل التغيير الشامل والعميق لمدونة الأسرة الدولة بتحمل مسؤوليتها وعدم التسامح مع كل من يستعلي على حقوق النساء ومكتسباتهن، ويروج خطابا نكوصيا بغرض تحقيق أهداف سياسية، وذلك عقب تصريحات رئيس الحكومة السابق، عبد الاله بنكيران، التي وصفتها "بالعنيفة وتشكل تمييزا في حق الفتيات والنساء المغربيات". وشددت التنسيقية، من خلال البيان الذي  اعتبرتها تحريضا على التمييز.. تنسيقية نسائية تستنكر تصريحات بنكيران     .', 'size': 2}, {'id': '382', 'title': 'جمعيات نسائية تندد بتصريحات بنكيران وتعتبرها إساءة للنساء المغربيات', 'source': 'rue20.com', 'link': 'https://rue20.com/919799.html', 'summary': 'جمعيات نسائية تندد بتصريحات بنكيران وتعتبرها إساءة للنساء المغربيات.  ا الرباط أعربت التنسيقية النسائية من أجل التغيير الشامل والعميق لمدونة الأسرة عن استنكارها الشديد لتصريحات الأمين العام لحزب العدالة والتنمية، عبد الإله بنكيران، التي اعتبر فيها أن “الزواج هو خلاص الفتيات”، معتبرة أن هذا التصريح يشكل “إساءة بالغة” للنساء المغربيات، ويضرب في العمق الحقوق الأساسية التي يكفلها الدستور والتشريعات الوطنية والاتفاقيات الدولية. الخبر جمعيات نسائية تندد بتصريحات بنكيران وتعتبرها إساءة للنساء المغربيات  .', 'size': 2}, {'id': '408', 'title': 'تنسيقية نسائية تدين تصريحات بنكيران وترفض الهجوم على حقوق النساء ومقومات الدولة الحديثة', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%aa%d9%86%d8%b3%d9%8a%d9%82%d9%8a%d8%a9-%d9%86%d8%b3%d8%a7%d8%a6%d9%8a%d8%a9-%d8%aa%d8%af%d9%8a%d9%86-%d8%aa%d8%b5%d8%b1%d9%8a%d8%ad%d8%a7%d8%aa-%d8%a8%d9%86%d9%83%d9%8a%d8%b1%d8%a7%d9%86-%d9%88/', 'summary': 'تنسيقية نسائية تدين تصريحات بنكيران وترفض الهجوم على حقوق النساء ومقومات الدولة الحديثة. أصدرت “التنسيقية النسائية من أجل التغيير الشامل والعميق لمدونة الأسرة” بلاغا شديد اللهجة تدين فيه تصريحات عبد الإله بنكيران، الرئيس الأسبق للحكومة والأمين العام لحزب العدالة والتنمية، والتي اعتبرت أنها “تضرب حقوقا أساسية للفتيات والنساء، ألا وهي الحق في التعليم والحق في العمل، معتبرا أن الزواج هو خلاصتهن”. ووصفت التنسيقية تصريحات بنكيران بأنها …  تنسيقية نسائية تدين تصريحات بنكيران وترفض الهجوم على حقوق النساء ومقومات الدولة الحديثة     .', 'size': 3}], 'main_title': 'تنسيقية نسائية تدين تصريحات بنكيران وترفض الهجوم على حقوق النساء ومقومات الدولة الحديثة'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    