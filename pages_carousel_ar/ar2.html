<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 15/06/2025 - 06h22</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '3', 'title': 'الملك يبارك عيد ميلاد العاهل تشارلز', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%8a%d8%a8%d8%a7%d8%b1%d9%83-%d8%b9%d9%8a%d8%af-%d9%85%d9%8a%d9%84%d8%a7%d8%af-%d8%a7%d9%84%d8%b9%d8%a7%d9%87%d9%84-%d8%aa%d8%b4%d8%a7%d8%b1%d9%84%d8%b2-1576014.html', 'summary': 'الملك يبارك عيد ميلاد العاهل تشارلز. بعث الملك محمد السادس برقية تهنئة إلى الملك تشارلز الثالث، عاهل المملكة المتحدة، بمناسبة عيد ميلاده. ومما جاء في هذه البرقية: “يسرني والمملكة المتحدة تحتفي بذكرى عيد ميلاد جلالتكم، أن أبعث إليكم بتهانئي الحارة، مقرونة بمتمنياتي الخالصة، لكم ولصاحبة الجلالة الملكة كاميلا وسائر أفراد أسرتكم الملكية، بموفور الصحة والسعادة، ولشعبكم الصديق بمزيد الرخاء والازدهار”. وأضاف  الملك يبارك عيد ميلاد العاهل تشارلز     - هسبريس جريدة إلكترونية مغربية .', 'size': 2}, {'id': '262', 'title': 'برقية تهنئة من الملك محمد السادس إلى عاهل المملكة المتحدة بمناسبة عيد ميلاده', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a8%d8%b1%d9%82%d9%8a%d8%a9-%d8%aa%d9%87%d9%86%d8%a6%d8%a9-%d9%85%d9%86-%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%85%d8%ad%d9%85%d8%af-%d8%a7%d9%84%d8%b3%d8%a7%d8%af%d8%b3-%d8%a5%d9%84%d9%89-%d8%b9-4/', 'summary': 'برقية تهنئة من الملك محمد السادس إلى عاهل المملكة المتحدة بمناسبة عيد ميلاده. بعث الملك محمد السادس برقية تهنئة إلى الملك تشارلز الثالث، عاهل المملكة المتحدة، بمناسبة عيد ميلاده. ومما جاء في هذه البرقية “يسرني والمملكة المتحدة تحتفي بذكرى عيد ميلاد جلالتكم، أن أبعث إليكم بتهانئي الحارة، مقرونة بمتمنياتي الخالصة، لكم ولصاحبة الجلالة الملكة كاميلا وسائر أفراد أسرتكم الملكية، بموفور الصحة والسعادة، ولشعبكم الصديق بمزيد الرخاء …  برقية تهنئة من الملك محمد السادس إلى عاهل المملكة المتحدة بمناسبة عيد ميلاده     .', 'size': 2}], 'main_title': 'الملك يبارك عيد ميلاد العاهل تشارلز'}, {'community_id': '4', 'articles': [{'id': '66', 'title': 'نشرة إنذارية: موجة حر تتراوح ما بين 38 و45 درجة بعدد من مناطق المغرب', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/202056', 'summary': 'نشرة إنذارية: موجة حر تتراوح ما بين 38 و45 درجة بعدد من مناطق المغرب. الأحداث من الرباط تتوقع المديرية العامة للأرصاد الجوية تسجيل موجة حر بدرجات حرارة تتراوح ما بين 38 و45 درجة، ابتداء من بعد غد الاثنين إلى غاية يوم الأربعاء، بعدد من أقاليم المملكة. وأوضحت المديرية، في نشرة إنذارية من مستوى يقظة برتقالي، أنه يرتقب تسجيل موجة حر، بدرجات حرارة تتراوح مابين 42 و 45 درجة،بعمالات وأقاليم', 'size': 5}, {'id': '138', 'title': 'غتوصل 45 درجة.. موجة حر في عدد من المناطق ابتداء من الاثنين المقبل', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%ba%d8%aa%d9%88%d8%b5%d9%84-45-%d8%af%d8%b1%d8%ac%d8%a9-%d9%85%d9%88%d8%ac%d8%a9-%d8%ad%d8%b1-%d9%81%d9%8a-%d8%b9%d8%af%d8%af-%d9%85%d9%86-%d8%a7%d9%84%d9%85%d9%86%d8%a7%d8%b7%d9%82-%d8%a7%d8%a8/', 'summary': 'غتوصل 45 درجة.. موجة حر في عدد من المناطق ابتداء من الاثنين المقبل. تتوقع المديرية العامة للأرصاد الجوية تسجيل موجة حر بدرجات حرارة تتراوح ما بين 38 و45 درجة، ابتداء من بعد غد الاثنين (16 يونيو) إلى غاية يوم الأربعاء (18 يونيو)، بعدد من أقاليم المملكة. وأوضحت المديرية، في نشرة إنذارية من مستوى يقظة برتقالي، أنه يرتقب تسجيل موجة حر، بدرجات حرارة تتراوح ما بين 42 و45 درجة،', 'size': 4}, {'id': '159', 'title': 'موجة حر من الاثنين إلى الأربعاء بعدد من مناطق المملكة', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/315498/', 'summary': 'موجة حر من الاثنين إلى الأربعاء بعدد من مناطق المملكة. تتوقع المديرية العامة للأرصاد الجوية تسجيل موجة حر بدرجات حرارة تتراوح ما بين 38 و45 درجة، ابتداء من بعد غد الاثنين إلى غاية يوم الأربعاء، بعدد من أقاليم المملكة. وأوضحت المديرية، في نشرة إنذارية من مستوى يقظة برتقالي، أنه يرتقب تسجيل موجة حر، بدرجات حرارة تتراوح ما بين 42 و45 درجة، بعمالات وأقاليم تاونات، وأوسرد،', 'size': 5}, {'id': '197', 'title': 'نشرة إنذارية: موجة حر من الاثنين إلى الأربعاء', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d9%86%d8%b4%d8%b1%d8%a9-%d8%a5%d9%86%d8%b0%d8%a7%d8%b1%d9%8a%d8%a9-%d9%85%d9%88%d8%ac%d8%a9-%d8%ad%d8%b1-%d9%85%d9%86-%d8%a7%d9%84%d8%a7%d8%ab%d9%86%d9%8a%d9%86-%d8%a5%d9%84%d9%89-%d8%a7%d9%84%d8%a3/', 'summary': 'نشرة إنذارية: موجة حر من الاثنين إلى الأربعاء. تتوقع المديرية العامة للأرصاد الجوية تسجيل موجة حر بدرجات حرارة تتراوح ما بين 38 و45 درجة، ابتداء من بعد غد الاثنين إلى غاية يوم الأربعاء، بعدد من أقاليم المملكة. وأوضحت المديرية، في نشرة إنذارية من مستوى يقظة برتقالي، أنه يرتقب تسجيل موجة حر، بدرجات حرارة تتراوح ما بين 42 و45 درجة، بعمالات وأقاليم تاونات، وأوسرد،  نشرة إنذارية: موجة حر من الاثنين إلى الأربعاء     .', 'size': 4}, {'id': '203', 'title': 'الأرصاد تحذر من موجة حر تصل إلى 45 درجة', 'source': 'rue20.com', 'link': 'https://rue20.com/912789.html', 'summary': 'الأرصاد تحذر من موجة حر تصل إلى 45 درجة.  الرباط تتوقع المديرية العامة للأرصاد الجوية تسجيل موجة حر بدرجات حرارة تتراوح ما بين 38 و45 درجة، ابتداء من الاثنين إلى غاية يوم الأربعاء، بعدد من أقاليم المملكة. وأوضحت المديرية، في نشرة إنذارية من مستوى يقظة برتقالي، أنه يرتقب تسجيل موجة حر، بدرجات حرارة تتراوح ما بين 42 و45 درجة، بعمالات وأقاليم تاونات، وأوسرد، الخبر الأرصاد تحذر من موجة حر تصل إلى 45 درجة  .', 'size': 5}], 'main_title': 'نشرة إنذارية: موجة حر تتراوح ما بين 38 و45 درجة بعدد من مناطق المغرب'}, {'community_id': '2', 'articles': [{'id': '69', 'title': 'في اليوم الوطني للتبرع بالدم.. دعوة إلى تعزيز ثقافة العطاء من أجل إنقاذ الأرواح', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/202046', 'summary': 'في اليوم الوطني للتبرع بالدم.. دعوة إلى تعزيز ثقافة العطاء من أجل إنقاذ الأرواح.  تخليدًا لليوم الوطني للتبرع بالدم، الذي يُصادف 14 يونيو من كل سنة، جدّدت الوكالة المغربية للدم ومشتقاته نداءها لكافة المواطنات والمواطنين من أجل الانخراط الطوعي والمنتظم في حملات التبرع بالدم، باعتباره عملاً إنسانيًا نبيلاً يُجسد قيم التضامن والتكافل التي يتميز بها المجتمع المغربي. وفي بلاغ رسمي بالمناسبة، عبّرت الوكالة عن عميق شكرها وامتنانها للمتبرعين', 'size': 2}, {'id': '186', 'title': 'إطلاق حملات للتبرع بالدم في مختلف جهات المملكة', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1077901.html', 'summary': 'إطلاق حملات للتبرع بالدم في مختلف جهات المملكة. أعلنت الوكالة المغربية للدم ومشتقاته، اليوم السبت 14 يونيو 2025، عن إطلاق برنامج من حملات وطنية للتبرع بالدم في مختلف جهات المملكة، بشراكة مع فعاليات المجتمع المدني، ودعت إلى الانخراط الطوعي والمنتظم في هذا العمل النبيل. وعبرت الوكالة، في بلاغ لها بمناسبة اليوم الوطني للتبرع بالدم الذي يصادف 14 يونيو من كل سنة، عن شكرها ظهرت المقالة إطلاق حملات للتبرع بالدم في مختلف جهات المملكة  .', 'size': 2}], 'main_title': 'في اليوم الوطني للتبرع بالدم.. دعوة إلى تعزيز ثقافة العطاء من أجل إنقاذ الأرواح'}, {'community_id': '10', 'articles': [{'id': '131', 'title': 'أمينة روشدو تتصدر نتائج الباكالوريا في جهة سوس ماسة وتشارك سر نجاحها', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/videos/407567.html', 'summary': 'أمينة روشدو تتصدر نتائج الباكالوريا في جهة سوس ماسة وتشارك سر نجاحها. أمينة روشدو تتصدر نتائج الباكالوريا في جهة سوس ماسة وتشارك سر نجاحها', 'size': 2}, {'id': '184', 'title': 'أمينة روشدو تحقق أعلى معدل في الباكالوريا بجهة سوس ماسة', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1077908.html', 'summary': 'أمينة روشدو تحقق أعلى معدل في الباكالوريا بجهة سوس ماسة. ظهرت المقالة أمينة روشدو تحقق أعلى معدل في الباكالوريا بجهة سوس ماسة  .', 'size': 2}], 'main_title': 'أمينة روشدو تتصدر نتائج الباكالوريا في جهة سوس ماسة وتشارك سر نجاحها'}, {'community_id': '1', 'articles': [{'id': '140', 'title': 'ضبط أكثر من 5 آلاف قرص مخدر.. تنسيق أمني يوقف المشتبه فيه في سلا', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%b6%d8%a8%d8%b7-%d8%a3%d9%83%d8%ab%d8%b1-%d9%85%d9%86-5-%d8%a2%d9%84%d8%a7%d9%81-%d9%82%d8%b1%d8%b5-%d9%85%d8%ae%d8%af%d8%b1-%d8%aa%d9%86%d8%b3%d9%8a%d9%82-%d8%a3%d9%85%d9%86%d9%8a-%d9%8a%d9%88/', 'summary': 'ضبط أكثر من 5 آلاف قرص مخدر.. تنسيق أمني يوقف المشتبه فيه في سلا. تمكنت عناصر الشرطة القضائية بمنطقة أمن سلا الجديدة بتنسيق مع مصالح المديرية العامة لمراقبة التراب الوطني، زوال اليوم السبت (14 يونيو) 2025، من توقيف شخص يبلغ من العمر 34 سنة، وذلك للاشتباه في تورطه في قضية تتعلق بحيازة وترويج المخدرات والمؤثرات العقلية. وجرى توقيف المشتبه فيه بضواحي مدينة سلا، مباشرة بعد وصوله على متن سيارة', 'size': 2}, {'id': '247', 'title': 'سلا الجديدة.. توقيف شخص متحوزا ل5460 قرص مخدر', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/222786/', 'summary': 'سلا الجديدة.. توقيف شخص متحوزا ل5460 قرص مخدر. كمال عسو أوقفت عناصر الشرطة القضائية بمنطقة أمن سلا الجديدة بتنسيق مع مصالح المديرية العامة لمراقبة التراب الوطني، زوال اليوم السبت، شخصا يبلغ من العمر 34 سنة، يشتبه تورطه في قضية تتعلق بحيازة وترويج المخدرات والمؤثرات العقلية. وحسب مصدر أمني، فإن توقيف المشتبه فيه جرى بضواحي مدينة سلا، مباشرة بعد وصوله على متن سيارة', 'size': 2}], 'main_title': 'ضبط أكثر من 5 آلاف قرص مخدر.. تنسيق أمني يوقف المشتبه فيه في سلا'}, {'community_id': '8', 'articles': [{'id': '152', 'title': 'جلالة الملك يعزي رئيسة جمهورية الهند في ضحايا تحطم طائرة ركاب', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/315540/', 'summary': 'جلالة الملك يعزي رئيسة جمهورية الهند في ضحايا تحطم طائرة ركاب. بعث صاحب الجلالة الملك محمد السادس، برقية تعزية ومواساة إلى رئيسة جمهورية الهند فخامة السيدة دروبادي مورمو، على إثر حادث تحطم طائرة ركاب هندية بأحمد آباد. ومما جاء في هذه البرقية “لقد تلقيت ببالغ التأثر نبأ الحادث المفجع لتحطم طائرة الركاب التابعة للخطوط الجوية الهندية، بأحمد آباد، مخلفا العديد من الضحايا”. وقال جلالة الملك و”بهذه', 'size': 5}, {'id': '194', 'title': 'الملك يعزي الرئيسة الهندية في ضحايا تحطم طائرة الركاب', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%8a%d8%b9%d8%b2%d9%8a-%d8%a7%d9%84%d8%b1%d8%a6%d9%8a%d8%b3%d8%a9-%d8%a7%d9%84%d9%87%d9%86%d8%af%d9%8a%d8%a9-%d9%81%d9%8a-%d8%b6%d8%ad%d8%a7%d9%8a%d8%a7-%d8%aa%d8%ad/', 'summary': 'الملك يعزي الرئيسة الهندية في ضحايا تحطم طائرة الركاب. بعث صاحب الملك محمد السادس برقية تعزية ومواساة إلى رئيسة جمهورية الهند، دروبادي مورمو، على إثر حادث تحطم طائرة ركاب هندية بأحمد آباد. ومما جاء في هذه البرقية: "لقد تلقيت ببالغ التأثر نبأ الحادث المفجع لتحطم طائرة الركاب التابعة للخطوط الجوية الهندية، بأحمد آباد، مخلفا العديد من الضحايا". وقال عاهل البلاد: "وبهذه المناسبة الأليمة، أعرب  الملك يعزي الرئيسة الهندية في ضحايا تحطم طائرة الركاب     .', 'size': 5}, {'id': '245', 'title': 'الملك يعزي رئيسة جمهورية الهند على إثر تحطم طائرة ركاب هندية', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/222792/', 'summary': 'الملك يعزي رئيسة جمهورية الهند على إثر تحطم طائرة ركاب هندية. و م ع بعث صاحب الجلالة الملك محمد السادس، برقية تعزية ومواساة إلى رئيسة جمهورية الهند فخامة السيدة دروبادي مورمو، على إثر حادث تحطم طائرة ركاب هندية بأحمد آباد. ومما جاء في هذه البرقية “لقد تلقيت ببالغ التأثر نبأ الحادث المفجع لتحطم طائرة الركاب التابعة للخطوط الجوية الهندية، بأحمد آباد، مخلفا العديد من الضحايا”.', 'size': 5}, {'id': '258', 'title': 'برقية تعزية ملكية إلى رئيسة جمهورية الهند على إثر تحطم طائرة ركاب هندية', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a8%d8%b1%d9%82%d9%8a%d8%a9-%d8%aa%d8%b9%d8%b2%d9%8a%d8%a9-%d9%85%d9%84%d9%83%d9%8a%d8%a9-%d8%a5%d9%84%d9%89-%d8%b1%d8%a6%d9%8a%d8%b3%d8%a9-%d8%ac%d9%85%d9%87%d9%88%d8%b1%d9%8a%d8%a9-%d8%a7%d9%84/', 'summary': 'برقية تعزية ملكية إلى رئيسة جمهورية الهند على إثر تحطم طائرة ركاب هندية. بعث الملك محمد السادس، برقية تعزية ومواساة إلى رئيسة جمهورية الهند دروبادي مورمو، على إثر حادث تحطم طائرة ركاب هندية بأحمد آباد. ومما جاء في هذه البرقية “لقد تلقيت ببالغ التأثر نبأ الحادث المفجع لتحطم طائرة الركاب التابعة للخطوط الجوية الهندية، بأحمد آباد، مخلفا العديد من الضحايا”. وأضاف الملك محمد السادس و”بهذه المناسبة …  برقية تعزية ملكية إلى رئيسة جمهورية الهند على إثر تحطم طائرة ركاب هندية     .', 'size': 5}, {'id': '389', 'title': 'الملك يعزي رئيسة الهند في ضحايا تحطم طائرة الركاب', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1077986.html', 'summary': 'الملك يعزي رئيسة الهند في ضحايا تحطم طائرة الركاب. بعث الملك محمد السادس، برقية تعزية ومواساة إلى رئيسة جمهورية الهند دروبادي مورمو، على إثر حادث تحطم طائرة ركاب هندية بأحمد آباد. ومما جاء في هذه البرقية “لقد تلقيت ببالغ التأثر نبأ الحادث المفجع لتحطم طائرة الركاب التابعة للخطوط الجوية الهندية، بأحمد آباد، مخلفا العديد من الضحايا”. وقال الملك و”بهذه المناسبة الأليمة، أعرب لكن ومن ظهرت المقالة الملك يعزي رئيسة الهند في ضحايا تحطم طائرة الركاب  .', 'size': 5}], 'main_title': 'جلالة الملك يعزي رئيسة جمهورية الهند في ضحايا تحطم طائرة ركاب'}, {'community_id': '3', 'articles': [{'id': '161', 'title': 'الوكالة المغربية للدم ومشتقاته تطلق حملات وطنية للتبرع بالدم بمختلف جهات المملكة', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/315495/', 'summary': 'الوكالة المغربية للدم ومشتقاته تطلق حملات وطنية للتبرع بالدم بمختلف جهات المملكة. أعلنت الوكالة المغربية للدم ومشتقاته عن إطلاق برنامج من حملات وطنية للتبرع بالدم في مختلف جهات المملكة، بمناسبة اليوم الوطني للتبرع بالدم الذي يُخلد في 14 يونيو من كل سنة. وأوضح بلاغ للوكالة أن هذا البرنامج، الذي سيتم إطلاقه بشراكة مع فعاليات المجتمع المدني، يهدف إلى توسيع قاعدة المتبرعين وتقريب خدمات التبرع من المواطنات والمواطنين', 'size': 2}, {'id': '248', 'title': 'الوكالة المغربية للدم ومشتقاته تطلق حملات وطنية للتبرع بالدم', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/222783/', 'summary': 'الوكالة المغربية للدم ومشتقاته تطلق حملات وطنية للتبرع بالدم. وكالات أعلنت الوكالة المغربية للدم ومشتقاته عن إطلاق برنامج من حملات وطنية للتبرع بالدم في مختلف جهات المملكة، بمناسبة اليوم الوطني للتبرع بالدم الذي يخلد في 14 يونيو من كل سنة. وأوضح بلاغ للوكالة أن هذا البرنامج، الذي سيتم إطلاقه بشراكة مع فعاليات المجتمع المدني، يهدف إلى توسيع قاعدة المتبرعين وتقريب خدمات التبرع من', 'size': 2}], 'main_title': 'الوكالة المغربية للدم ومشتقاته تطلق حملات وطنية للتبرع بالدم بمختلف جهات المملكة'}, {'community_id': '9', 'articles': [{'id': '175', 'title': 'الدار البيضاء.. وضع حد لمروج مخدرات داخل سوق الجملة بحي مولاي رشيد', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1077934.html', 'summary': 'الدار البيضاء.. وضع حد لمروج مخدرات داخل سوق الجملة بحي مولاي رشيد. تمكنت عناصر الأمن التابعة لمنطقة مولاي رشيد بمدينة الدار البيضاء، صباح اليوم السبت، من توقيف شخص يبلغ من العمر أكثر من 70 سنة، يشتبه في تورطه في ترويج المخدرات، وذلك خلال عملية أمنية نوعية جرت داخل سوق الجملة للخضر والفواكه، أحد أكثر المرافق الحيوية اكتظاظا في العاصمة الاقتصادية وبحسب مصادر محلية، فإن المشتبه فيه، الذي ظهرت المقالة الدار البيضاء.. وضع حد لمروج مخدرات داخل سوق الجملة بحي مولاي رشيد  .', 'size': 2}, {'id': '358', 'title': '"كريساج" عنيف لامرأة في قلب الدار البيضاء يُسقط أحد الجناة في قبضة الأمن وعمليات البحث متواصلة لاعتقال شريكه', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/society/407587.html', 'summary': '"كريساج" عنيف لامرأة في قلب الدار البيضاء يُسقط أحد الجناة في قبضة الأمن وعمليات البحث متواصلة لاعتقال شريكه. تمكنت عناصر المصلحة الولائية للشرطة القضائية بمدينة الدار البيضاء، مساء اليوم السبت 14 يونيو الجاري، من توقيف شخص يشتبه في تورطه في قضية تتعلق بالسرقة', 'size': 2}], 'main_title': 'الدار البيضاء.. وضع حد لمروج مخدرات داخل سوق الجملة بحي مولاي رشيد'}, {'community_id': '6', 'articles': [{'id': '311', 'title': 'الدار البيضاء.. توقيف مشتبه فيه ظهر في فيديو سرقة بالعنف', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-632041.html', 'summary': 'الدار البيضاء.. توقيف مشتبه فيه ظهر في فيديو سرقة بالعنف. أوقفت عناصر الشرطة القضائية بالدار البيضا ء، مساء السبت 14 يونيو الجاري، شخصًا يشتبه في تورطه في قضية تتعلق بالسرقة تحت التهديد وباستعمال ناقلة ذات محرك. وكان المشتبه فيه، رفقة شريك له، قد نفّذا عملية سرقة بالعنف استهدفت سيدة في الشارع العام بمدينة الدار البيضاء، وهي الواقعة التي وثقها شريط فيديو جرى تداوله على نطاق واسع عبر منصات التواصل الاجتماعي، مما أثار موجة استنكار واسعة لدى الرأي العام المحلي. وقد باشرت المصالح الأمنية أبحاثًا وتحريات ميدانية دقيقة، مكّنت من تحديد هوية المشتبه فيهما، قبل أن تنجح، مساء السبت، في توقيف أحدهما، بينما تتواصل الجهود لتوقيف الشريك الثاني، الذي تم تحديد هويته الكاملة. وقد تم إخضاع الموقوف لبحث قضائي تحت إشراف النيابة العامة المختصة، وذلك للكشف عن جميع الظروف والملابسات المرتبطة بهذه القضية، ولتحديد الأدوار والمسؤوليات الجنائية لكلا المشتبه فيهما. وتندرج هذه العملية الأمنية في إطار الجهود المتواصلة التي تبذلها المصالح الأمنية لمحاربة الجريمة وتعزيز الإحساس بالأمن لدى المواطنين.', 'size': 2}, {'id': '383', 'title': 'توقيف مشتبه به في عملية سرقة بالعنف بالدار البيضاء', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1077983.html', 'summary': 'توقيف مشتبه به في عملية سرقة بالعنف بالدار البيضاء. تمكنت عناصر المصلحة الولائية للشرطة القضائية بالدار البيضاء مساء اليوم السبت 14 يونيو 2025، من توقيف شخص يشتبه في تورطه في قضية تتعلق بـالسرقة باستعمال العنف وباستخدام دراجة نارية. وكان المشتبه به، رفقة شخص آخر، قد قاما بالاعتداء على سيدة وسرقة ممتلكاتها في الشارع العام بالدار البيضاء، ويهي الأفعال الإجرامية التي كانت قد انتشرت عبر ظهرت المقالة توقيف مشتبه به في عملية سرقة بالعنف بالدار البيضاء  .', 'size': 2}], 'main_title': 'الدار البيضاء.. توقيف مشتبه فيه ظهر في فيديو سرقة بالعنف'}, {'community_id': '5', 'articles': [{'id': '342', 'title': 'صاحبة السمو الملكي الأميرة للا أسماء تترأس حفل نهاية السنة الدراسية 2024-2025 لمؤسسة للا أسماء', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/202066', 'summary': 'صاحبة السمو الملكي الأميرة للا أسماء تترأس حفل نهاية السنة الدراسية 2024-2025 لمؤسسة للا أسماء.  ترأست صاحبة السمو الملكي الأميرة للا أسماء، رئيسة مؤسسة للا أسماء، اليوم السبت بمقر المؤسسة بالرباط، حفل نهاية السنة الدراسية 2024-2025 لهذه المؤسسة، التي رسخت مكانتها اليوم كمرجع وطني وقاري في مواكبة الأطفال الصم وضعاف السمع. وتجسد هذه المبادرة الإرادة الراسخة لصاحب الجلالة الملك محمد السادس في ضمان تكافؤ الفرص بين جميع الأطفال', 'size': 3}, {'id': '366', 'title': 'الرباط.. الأميرة للا أسماء تترأس حفل نهاية السنة الدراسية 2024-2025 لمؤسسة للا أسماء', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a7%d9%84%d8%b1%d8%a8%d8%a7%d8%b7-%d8%a7%d9%84%d8%a3%d9%85%d9%8a%d8%b1%d8%a9-%d9%84%d9%84%d8%a7-%d8%a3%d8%b3%d9%85%d8%a7%d8%a1-%d8%aa%d8%aa%d8%b1%d8%a3%d8%b3-%d8%ad%d9%81%d9%84-%d9%86%d9%87%d8%a7/', 'summary': 'الرباط.. الأميرة للا أسماء تترأس حفل نهاية السنة الدراسية 2024-2025 لمؤسسة للا أسماء. ترأست صاحبة السمو الملكي الأميرة للا أسماء، رئيسة مؤسسة للا أسماء، اليوم السبت (14 يونيو)، بمقر المؤسسة بالرباط، حفل نهاية السنة الدراسية 2024-2025 لهذه المؤسسة، التي رسخت مكانتها اليوم كمرجع وطني وقاري في مواكبة الأطفال الصم وضعاف السمع. وتجسد هذه المبادرة الإرادة الراسخة لصاحب الجلالة الملك محمد السادس في ضمان تكافؤ الفرص بين جميع الأطفال', 'size': 3}, {'id': '438', 'title': 'الأميرة للا أسماء تترأس حفل نهاية السنة الدراسية 2024-2025 لمؤسسة للا أسماء', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/222821/', 'summary': 'الأميرة للا أسماء تترأس حفل نهاية السنة الدراسية 2024-2025 لمؤسسة للا أسماء. و م ع ترأست صاحبة السمو الملكي الأميرة للا أسماء، رئيسة مؤسسة للا أسماء، اليوم السبت بمقر المؤسسة بالرباط، حفل نهاية السنة الدراسية 2024-2025 لهذه المؤسسة، التي رسخت مكانتها اليوم كمرجع وطني وقاري في مواكبة الأطفال الصم وضعاف السمع. وتجسد هذه المبادرة الإرادة الراسخة لصاحب الجلالة الملك محمد السادس في ضمان تكافؤ الفرص بين', 'size': 3}], 'main_title': 'صاحبة السمو الملكي الأميرة للا أسماء تترأس حفل نهاية السنة الدراسية 2024-2025 لمؤسسة للا أسماء'}, {'community_id': '7', 'articles': [{'id': '388', 'title': '19.48 أعلى معدل جهوي في بكالوريا سوس ماسة.. ريم وأمينة يتألقن', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1077950.html', 'summary': '19.48 أعلى معدل جهوي في بكالوريا سوس ماسة.. ريم وأمينة يتألقن. أحرزت التلميذتان ريم جامع وأمينة روشدو أعلى معدل جهوي في امتحانات البكالوريا (الدورة العادية، ماي 2025) على صعيد الأكاديمية الجهوية للتربية والتكوين بجهة سوس ماسة، بعدما حصلتا معا على معدل 19.48، وهو أعلى معدل تم تسجيله بالجهة. ريم جامع، التي تتابع دراستها في شعبة العلوم التجريبية – خيار فرنسية، بمؤسسة الحنان الخصوصية بأكادير، حققت هذا ظهرت المقالة 19.48 أعلى معدل جهوي في بكالوريا سوس ماسة.. ريم وأمينة يتألقن  .', 'size': 2}, {'id': '402', 'title': 'أمينة روشدو تحصل على أعلى معدل باكلوريا بجهة سوس', 'source': 'rue20.com', 'link': 'https://rue20.com/912829.html', 'summary': 'أمينة روشدو تحصل على أعلى معدل باكلوريا بجهة سوس.  . الرباط بعد سنوات من الجد والاجتهاد والمثابرة، استطاعت التلميذة أمينة روشدو، أن تتوج على قمة الناجحين في امتحانات البكالوريا 2025 على مستوى جهة سوس ماسة. وتمكنت روشدو التي تتابع دراستها بشعبة علوم فيزيائية-خيار فرنسية، من الحصول على معدل 19.48 مناصفة مع التلميذة ريم جامع عن المديرية الإقليمية لأكادير إداوتنان. وفي حديث لوكالة الخبر أمينة روشدو تحصل على أعلى معدل باكلوريا بجهة سوس  .', 'size': 2}], 'main_title': '19.48 أعلى معدل جهوي في بكالوريا سوس ماسة.. ريم وأمينة يتألقن'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    