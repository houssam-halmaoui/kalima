<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 18/10/2025 - 12h23</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '18', 'title': 'فتح بحث قضائي بعد إطلاق شرطي النار على سيدة ومحاولة انتحاره', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-667041.html', 'summary': 'فتح بحث قضائي بعد إطلاق شرطي النار على سيدة ومحاولة انتحاره. فتحت المصلحة الولائية للشرطة القضائية بولاية أمن الدار البيضاء بحثا قضائيا تحت إشراف النيابة العامة المختصة، مساء اليوم الجمعة 17 أكتوبر الجاري، وذلك لتحديد ظروف وملابسات وخلفيات إقدام موظف شرطة على محاولة الانتحار، بعد تورطه في ارتكاب جريمة قتل عمد باستخدام السلاح الوظيفي. وحسب المعلومات المتوفرة إلى غاية هذه المرحلة من البحث، فقد أقدم مقدم', 'size': 5}, {'id': '72', 'title': 'الدار البيضاء.. محاولة انتحار شرطي بعد تورطه في جريمة قتل', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a7%d9%84%d8%af%d8%a7%d8%b1-%d8%a7%d9%84%d8%a8%d9%8a%d8%b6%d8%a7%d8%a1-%d9%85%d8%ad%d8%a7%d9%88%d9%84%d8%a9-%d8%a7%d9%86%d8%aa%d8%ad%d8%a7%d8%b1-%d8%b4%d8%b1%d8%b7%d9%8a-%d8%a8%d8%b9%d8%af-%d8%aa/', 'summary': 'الدار البيضاء.. محاولة انتحار شرطي بعد تورطه في جريمة قتل. فتحت المصلحة الولائية للشرطة القضائية بولاية أمن الدار البيضاء، مساء اليوم الجمعة (17 أكتوبر) 2025، بحثًا قضائيًا تحت إشراف النيابة العامة، لتحديد ظروف وخلفيات إقدام موظف شرطة على محاولة الانتحار، بعد تورطه في ارتكاب جريمة قتل عمد باستخدام سلاحه الوظيفي. ووفق المعطيات الأولية، فإن مقدم شرطة يعمل بفرقة الدراجيين أقدم على قتل سيدة من معارفه', 'size': 5}, {'id': '85', 'title': 'محاولة انتحار شرطي بعد ارتكابه جريمة قتل بالدار البيضاء', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/326554/', 'summary': 'محاولة انتحار شرطي بعد ارتكابه جريمة قتل بالدار البيضاء. فتحت المصلحة الولائية للشرطة القضائية بولاية أمن الدار البيضاء بحثا قضائيا تحت إشراف النيابة العامة المختصة، مساء اليوم الجمعة 17 أكتوبر الجاري، وذلك لتحديد ظروف وملابسات وخلفيات إقدام موظف شرطة على محاولة الانتحار، بعد تورطه في ارتكاب جريمة قتل عمد باستخدام السلاح الوظيفي. ووفقا لبلاغ صادر عن المديرية العامة للأمن الوطني، فقد أقدم مقدم الشرطة', 'size': 5}, {'id': '115', 'title': 'جريمة صادمة في الدار البيضاء: شرطي يقتل سيدة بسلاحه الوظيفي ويحاول الانتحار بعد إطلاق النار على عناصر الأمن', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%ac%d8%b1%d9%8a%d9%85%d8%a9-%d8%b5%d8%a7%d8%af%d9%85%d8%a9-%d9%81%d9%8a-%d8%a7%d9%84%d8%af%d8%a7%d8%b1-%d8%a7%d9%84%d8%a8%d9%8a%d8%b6%d8%a7%d8%a1-%d8%b4%d8%b1%d8%b7%d9%8a-%d9%8a%d9%82%d8%aa%d9%84/', 'summary': 'جريمة صادمة في الدار البيضاء: شرطي يقتل سيدة بسلاحه الوظيفي ويحاول الانتحار بعد إطلاق النار على عناصر الأمن. فتحت المصلحة الولائية للشرطة القضائية بولاية أمن الدار البيضاء بحثا قضائيا تحت إشراف النيابة العامة المختصة، مساء اليوم الجمعة، وذلك لتحديد ظروف وملابسات وخلفيات إقدام موظف شرطة على محاولة الانتحار، بعد تورطه في ارتكاب جريمة قتل عمد باستخدام السلاح الوظيفي. وحسب المعلومات المتوفرة إلى غاية هذه المرحلة من البحث، فقد أقدم مقدم الشرطة يعمل  جريمة صادمة في الدار البيضاء: شرطي يقتل سيدة بسلاحه الوظيفي ويحاول الانتحار بعد إطلاق النار على عناصر الأمن     .', 'size': 5}, {'id': '165', 'title': 'بلاغ عاجل من مديرية الأمن الوطني: شرطي من فرقة الصقور يقتل سيدة من معارفه بمسدسه ويحاول الانتحار', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/228632/', 'summary': 'بلاغ عاجل من مديرية الأمن الوطني: شرطي من فرقة الصقور يقتل سيدة من معارفه بمسدسه ويحاول الانتحار. فتحت المصلحة الولائية للشرطة القضائية بولاية أمن الدار البيضاء بحثا قضائيا تحت إشراف النيابة العامة المختصة، مساء اليوم الجمعة 17 أكتوبر الجاري، وذلك لتحديد ظروف وملابسات وخلفيات إقدام موظف شرطة على محاولة الانتحار، بعد تورطه في ارتكاب جريمة قتل عمد باستخدام السلاح الوظيفي. وحسب المعلومات المتوفرة إلى غاية هذه المرحلة من البحث، فقد أقدم مقدم', 'size': 5}], 'main_title': 'فتح بحث قضائي بعد إطلاق شرطي النار على سيدة ومحاولة انتحاره'}, {'community_id': '1', 'articles': [{'id': '29', 'title': 'الطقس غدا السبت.. حرارة مرتفعة وهبات رياح قوية ببعض المناطق', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-667006.html', 'summary': 'الطقس غدا السبت.. حرارة مرتفعة وهبات رياح قوية ببعض المناطق. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليوم غد السبت، أن تتميز الحالة الجوية عامة بطقس حار نسبيا بأقصى جنوب الأقاليم الصحراوية للمملكة. وسيلاحظ، خلال الليل والصباح، تشكل سحب منخفضة فوق سهول المحيط الأطلسي وسواحل البحر الأبيض المتوسط، حيث ستكون مصحوبة بكتل ضبابية أو بأمطار خفيفة ومحلية. كما يرتقب تسجيل هبات رياح قوية نوعا ما بمنطقة', 'size': 3}, {'id': '346', 'title': 'توقعات أحوال الطقس.. تشكل سحب منخفضة فوق السهول', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%aa%d9%88%d9%82%d8%b9%d8%a7%d8%aa-%d8%a3%d8%ad%d9%88%d8%a7%d9%84-%d8%a7%d9%84%d8%b7%d9%82%d8%b3-%d8%aa%d8%b4%d9%83%d9%84-%d8%b3%d8%ad%d8%a8-%d9%85%d9%86%d8%ae%d9%81%d8%b6%d8%a9-%d9%81%d9%88%d9%82/', 'summary': 'توقعات أحوال الطقس.. تشكل سحب منخفضة فوق السهول. تتوقع المديرية العامة للأرصاد الجوية، اليوم االسبت، أن تتميز الحالة الجوية عامة بطقس حار نسبيا بأقصى جنوب الأقاليم الصحراوية للمملكة. وسيلاحظ، خلال الليل والصباح، تشكل سحب منخفضة فوق سهول المحيط الأطلسي وسواحل البحر الأبيض المتوسط، حيث ستكون مصحوبة بكتل ضبابية أو بأمطار خفيفة ومحلية. كما يرتقب تسجيل هبات رياح قوية نوعا ما بمنطقة طنجة. وستتراوح  توقعات أحوال الطقس.. تشكل سحب منخفضة فوق السهول     .', 'size': 3}, {'id': '363', 'title': 'توقعات أحوال الطقس لليوم السبت', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%aa%d9%88%d9%82%d8%b9%d8%a7%d8%aa-%d8%a3%d8%ad%d9%88%d8%a7%d9%84-%d8%a7%d9%84%d8%b7%d9%82%d8%b3-%d9%84%d9%84%d9%8a%d9%88%d9%85-%d8%a7%d9%84%d8%b3%d8%a8%d8%aa-4/', 'summary': 'توقعات أحوال الطقس لليوم السبت. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم السبت، أن تتميز الحالة الجوية عامة بطقس حار نسبيا بأقصى جنوب الأقاليم الصحراوية للمملكة. وسيلاحظ، خلال الليل والصباح، تشكل سحب منخفضة فوق سهول المحيط الأطلسي وسواحل البحر الأبيض المتوسط، حيث ستكون مصحوبة بكتل ضبابية أو بأمطار خفيفة ومحلية. كما يرتقب تسجيل هبات رياح قوية نوعا ما …  توقعات أحوال الطقس لليوم السبت     .', 'size': 3}], 'main_title': 'الطقس غدا السبت.. حرارة مرتفعة وهبات رياح قوية ببعض المناطق'}, {'community_id': '9', 'articles': [{'id': '38', 'title': 'جنازة والدة لطيفة رأفت في أجواء حزينة وبحضور محدود للعائلة فقط(صور)', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-666969.html', 'summary': 'جنازة والدة لطيفة رأفت في أجواء حزينة وبحضور محدود للعائلة فقط(صور). في أجواء يسودها الحزن والأسى، شُيّعت صباح اليوم الجمعة جنازة والدة الفنانة المغربية لطيفة رأفت إلى مثواها الأخير، وسط حضور محدود اقتصر على أفراد العائلة والمقربين فقط، في غياب تام لنجوم الساحة الفنية المغربية. وجرت مراسم الجنازة في هدوء تام طبعته مشاعر الألم والفقد، حيث بدت الفنانة لطيفة رأفت متأثرة للغاية بوفاة والدتها التي كانت', 'size': 2}, {'id': '124', 'title': 'وفاة والدة  لطيفة رأفت بعد صراع مع المرض', 'source': 'soltana.ma', 'link': 'https://soltana.ma/1357935.html', 'summary': 'وفاة والدة لطيفة رأفت بعد صراع مع المرض. بكل الحزن والأسى، أعلنت الفنانة المغربية لطيفة رأفت، صباح اليوم الجمعة، عن وفاة والدتها، بعد معاناة مع المرض. ونشرت لطيفة رأفت وبعض من معارفها عبر حساباتها في مواقع التواصل الاجتماعي، نعيًا موجزًا، أفادت فيه بأن والدتها فارقت الحياة، فجر هذا اليوم، داعية المتابعين إلى الدعاء لها ولعائلتها في هذا المصاب الجلل. وكانت الراحلة تعاني من', 'size': 2}], 'main_title': 'جنازة والدة لطيفة رأفت في أجواء حزينة وبحضور محدود للعائلة فقط(صور)'}, {'community_id': '3', 'articles': [{'id': '39', 'title': 'مالاوي تجدد تأكيد دعمها “الثابت” للوحدة الترابية للمملكة', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-666967.html', 'summary': 'مالاوي تجدد تأكيد دعمها “الثابت” للوحدة الترابية للمملكة. جددت جمهورية مالاوي التأكيد، اليوم الجمعة، على موقفها “الثابت” الداعم للوحدة الترابية وسيادة المغرب على كامل أراضيه، بما في ذلك منطقة الصحراء. وعبر عن هذا الموقف، وزير الشؤون الخارجية المالاوي الجديد، جورج تاباتولا شابوندا (عضو بالبرلمان)، خلال مباحثات هاتفية مع وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج، ناصر بوريطة. كما أشاد شابوندا بـ”التوافق الدولي', 'size': 2}, {'id': '191', 'title': 'مالاوي تجدد موقفها الثابت الداعم للوحدة الترابية ولسيادة المغرب على كامل أراضيه', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d9%85%d8%a7%d9%84%d8%a7%d9%88%d9%8a-%d8%aa%d8%ac%d8%af%d8%af-%d9%85%d9%88%d9%82%d9%81%d9%87%d8%a7-%d8%a7%d9%84%d8%ab%d8%a7%d8%a8%d8%aa-%d8%a7%d9%84%d8%af%d8%a7%d8%b9%d9%85-%d9%84%d9%84%d9%88%d8%ad/', 'summary': 'مالاوي تجدد موقفها الثابت الداعم للوحدة الترابية ولسيادة المغرب على كامل أراضيه. أجرى الوزير ناصر بوريطة، يومه الجمعة 17 أكتوبر 2025، اتصالا هاتفيا مع وزير الشؤون الخارجية الجديد بجمهورية مالاوي، جورج تاباتولا شابوندا. وحسب بلاغ وزارة الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج، فقد جدد خلال المحادثات جورج تاباتولا شابوندا، التأكيد على موقف جمهورية مالاوي الثابت الداعم للوحدة الترابية ولسيادة المغرب على كامل أراضيه، بما في …  مالاوي تجدد موقفها الثابت الداعم للوحدة الترابية ولسيادة المغرب على كامل أراضيه     .', 'size': 2}], 'main_title': 'مالاوي تجدد تأكيد دعمها “الثابت” للوحدة الترابية للمملكة'}, {'community_id': '6', 'articles': [{'id': '101', 'title': 'الاتحاد الاشتراكي: تأخر الحكومة في تنفيذ الرؤية الملكية يضعف سيادة المغرب الطاقية والمائية', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1108913.html', 'summary': 'الاتحاد الاشتراكي: تأخر الحكومة في تنفيذ الرؤية الملكية يضعف سيادة المغرب الطاقية والمائية. انتقد حزب الاتحاد الاشتراكي للقوات الشعبية ما اعتبره “تلكؤ” في في تنفيذ التوجيهات الملكية في ما بتدبير الماء وتوفير هذه المادة الحيوية لكافة المغاربة، في وقت يعاني منه المغرب من جفاف استمر لسنوات وأثر سلبا على اقتصاد البلاد. ووصف الحزب الاشتراكي، في التقرير الأدبي لمؤتمره الوطني الـ17 المنعقد أيام 17 و18 و19 أكتوبر بمدينة بوزنيقة، ظهرت المقالة الاتحاد الاشتراكي: تأخر الحكومة في تنفيذ الرؤية الملكية يضعف سيادة المغرب الطاقية والمائية  .', 'size': 2}, {'id': '118', 'title': 'لشكر يقول في مؤتمر حزبه إن مسؤولين حكوميين "يختبئون وراء الملك" لقمع المعارضة', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d9%84%d8%b4%d9%83%d8%b1-%d9%8a%d9%82%d9%88%d9%84-%d9%81%d9%8a-%d9%85%d8%a4%d8%aa%d9%85%d8%b1-%d8%ad%d8%b2%d8%a8%d9%87-%d8%a5%d9%86-%d9%85%d8%b3%d8%a4%d9%88%d9%84%d9%8a%d9%86-%d8%ad%d9%83%d9%88%d9%85/', 'summary': 'لشكر يقول في مؤتمر حزبه إن مسؤولين حكوميين "يختبئون وراء الملك" لقمع المعارضة. وصف الكاتب الأول لحزب الاتحاد الاشتراكي للقوات الشعبية، اللحظة الراهنة في المغرب بأنها “منعطف تاريخي” تتزاحم فيه أزمات داخلية وتحولات جيوسياسية، محذّرا من تآكل الثقة واتساع الفوارق وتعثر وسائط الوساطة الحزبية والاجتماعية. وكال لشكر انتقادات حادة في كلمته الافتتاحية لمؤتمر حزبه، الجمعة في بوزنيقة، إلى تمركز القرار والثروة وما يواكبه من ريع وزبونية، ويرى لشكر  لشكر يقول في مؤتمر حزبه إن مسؤولين حكوميين "يختبئون وراء الملك" لقمع المعارضة     .', 'size': 2}], 'main_title': 'الاتحاد الاشتراكي: تأخر الحكومة في تنفيذ الرؤية الملكية يضعف سيادة المغرب الطاقية والمائية'}, {'community_id': '8', 'articles': [{'id': '131', 'title': 'رسمياً…الحارس المتألق يانيس بنشاوش يغيب عن نهائي المونديال أمام الأرجنتين', 'source': 'rue20.com', 'link': 'https://rue20.com/946080.html', 'summary': 'رسمياً…الحارس المتألق يانيس بنشاوش يغيب عن نهائي المونديال أمام الأرجنتين. . الرباط استدعى السيد الوطني محمد وهبي، مدرب المنتخب الوطني لأقل من 20 سنة، اللاعب إلياس موعتيق، حارس مرمى فريق حسنية أكادير، للالتحاق بصفوف المنتخب الوطني لأقل من 20 سنة، المتواجد حاليًا بدولة الشيلي للمشاركة في نهائيات كأس العالم التي تختتم فعالياتها يوم الأحد 20 أكتوبر 2025. وتأتي دعوة موعتيق لتعويض زميله يانيس بنشاوش، الخبر رسمياً…الحارس المتألق يانيس بنشاوش يغيب عن نهائي المونديال أمام الأرجنتين  .', 'size': 3}, {'id': '137', 'title': 'موعتيق يعوض بنشاوش في نهائي “المونديال”', 'source': 'machahid24.com', 'link': 'https://machahid24.com/sport/479032.html', 'summary': 'موعتيق يعوض بنشاوش في نهائي “المونديال”. استدعى محمد وهبي، مدرب المنتخب الوطني لأقل من 20 سنة، اللاعب إلياس موعتيق، حارس مرمى فريق حسنية أكادير، للالتحاق بصفوف المنتخب الوطني لأقل من 20 سنة، المتواجد حاليًا بدولة الشيلي للمشاركة في نهائيات كأس العالم التي تختتم فعالياتها يوم الأحد 20 أكتوبر 2025. وتأتي دعوة موعتيق لتعويض زميله يانيس بنشاوش، الذي تعرض لإصابة خلال المباراة …', 'size': 3}, {'id': '345', 'title': 'موعتيق ينضم إلى صفوف المنتخب الوطني لأقل من 20 سنة في مونديال الشيلي', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d9%85%d9%88%d8%b9%d8%aa%d9%8a%d9%82-%d9%8a%d9%86%d8%b6%d9%85-%d8%a5%d9%84%d9%89-%d8%b5%d9%81%d9%88%d9%81-%d8%a7%d9%84%d9%85%d9%86%d8%aa%d8%ae%d8%a8-%d8%a7%d9%84%d9%88%d8%b7%d9%86%d9%8a-%d9%84%d8%a3/', 'summary': 'موعتيق ينضم إلى صفوف المنتخب الوطني لأقل من 20 سنة في مونديال الشيلي. استدعى محمد وهبي، مدرب المنتخب الوطني لأقل من 20 سنة، اللاعب إلياس موعتيق، حارس مرمى فريق حسنية أكادير، للالتحاق بصفوف المنتخب الوطني لأقل من 20 سنة، المتواجد حاليا بدولة الشيلي للمشاركة في نهائيات كأس العالم التي تختتم فعالياتها يوم الأحد 19 أكتوبر 2025. وتأتي دعوة موعتيق لتعويض زميله يانيس بنشاوش، الذي تعرض لإصابة خلال المباراة  موعتيق ينضم إلى صفوف المنتخب الوطني لأقل من 20 سنة في مونديال الشيلي     .', 'size': 3}], 'main_title': 'رسمياً…الحارس المتألق يانيس بنشاوش يغيب عن نهائي المونديال أمام الأرجنتين'}, {'community_id': '2', 'articles': [{'id': '174', 'title': '112 سنة سجناً للمُخربين في أحداث سيدي بيبي وآيت عميرة وتارودانت!', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/228607/', 'summary': '112 سنة سجناً للمُخربين في أحداث سيدي بيبي وآيت عميرة وتارودانت!. أصدرت محكمة الاستئناف بأكادير، مساء الخميس 16 أكتوبر، أحكاماً جديدة صارمة في حق تسعة متهمين على خلفية الأحداث العنيفة التي رافقت احتجاجات ما يُعرف بـ“جيل زد” بكل من سيدي بيبي وآيت عميرة بإقليم اشتوكة آيت باها، ومدينة تارودانت، حيث بلغ مجموع العقوبات 112 سنة سجناً نافذاً. وتوبع المتهمون بتهم ثقيلة من بينها إضرام النار عمداً', 'size': 2}, {'id': '273', 'title': 'أحكام جديدة بالسجن تصل إلى 15 سنة في حق متورطين في احتجاجات "جيل زد"', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/society/414687.html', 'summary': 'أحكام جديدة بالسجن تصل إلى 15 سنة في حق متورطين في احتجاجات "جيل زد". أصدرت محكمة الاستئناف بأكادير، أمس الخميس، أحكامًا جديدة بحق تسعة متهمين على خلفية احتجاجات جيل زد في سيدي بيبي وآيت عميرة بإقليم اشتوكة آيت باها،', 'size': 2}], 'main_title': '112 سنة سجناً للمُخربين في أحداث سيدي بيبي وآيت عميرة وتارودانت!'}, {'community_id': '4', 'articles': [{'id': '179', 'title': 'سرقة واحتجاز واغتـ./ـصاب ومخـ./ـدرات: أمن بني ملال يفكك شبكة من 7 أفراد', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%b3%d8%b1%d9%82%d8%a9-%d9%88%d8%a7%d8%ad%d8%aa%d8%ac%d8%a7%d8%b2-%d9%88%d8%a7%d8%ba%d8%aa%d8%b5%d8%a7%d8%a8-%d9%88%d9%85%d8%ae%d8%af%d8%b1%d8%a7%d8%aa-%d8%a3%d9%85%d9%86-%d8%a8%d9%86%d9%8a-%d9%85/', 'summary': 'سرقة واحتجاز واغتـ./ـصاب ومخـ./ـدرات: أمن بني ملال يفكك شبكة من 7 أفراد. المساء اليوم – بني ملال: تمكنت عناصر المصلحة الولائية للشرطة القضائية بمدينة بني ملال بتنسيق مع مصالح المديرية العامة لمراقبة التراب الوطني، الجمعة 17 أكتوبر الجاري، من توقيف سبعة أشخاص من بينهم قاصر يبلغ', 'size': 2}, {'id': '281', 'title': 'استدراج طالبتين واحتجازهما يقود إلى إيقاف 7 أشخاص في بني ملال', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/society/414699.html', 'summary': 'استدراج طالبتين واحتجازهما يقود إلى إيقاف 7 أشخاص في بني ملال. تمكنت عناصر المصلحة الولائية للشرطة القضائية بمدينة بني ملال، بتنسيق مع مصالح المديرية العامة لمراقبة التراب الوطني، صباح يوم الجمعة 17 أكتوبر الجاري، من إيقاف', 'size': 2}], 'main_title': 'سرقة واحتجاز واغتـ./ـصاب ومخـ./ـدرات: أمن بني ملال يفكك شبكة من 7 أفراد'}, {'community_id': '5', 'articles': [{'id': '232', 'title': 'لشكر يواصل قيادة الاتحاد الاشتراكي', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d9%84%d8%b4%d9%83%d8%b1-%d9%8a%d9%88%d8%a7%d8%b5%d9%84-%d9%82%d9%8a%d8%a7%d8%af%d8%a9-%d8%a7%d9%84%d8%a7%d8%aa%d8%ad%d8%a7%d8%af-%d8%a7%d9%84%d8%a7%d8%b4%d8%aa%d8%b1%d8%a7%d9%83%d9%8a-1641752.html', 'summary': 'لشكر يواصل قيادة الاتحاد الاشتراكي. انتخب إدريس لشكر كاتبا أول لحزب الاتحاد الاشتراكي للقوات الشعبية، لولاية رابعة، في الساعات الأولى من صباح اليوم السبت. وجرت إعادة انتخاب لشكر كزعيم للاتحاديين لولاية رابعة بأغلبية مطلقة من المؤتمرات والمؤتمرين الحاضرين للمؤتمر الوطني الثاني عشر الذي ينعقد منذ أمس الجمعة بمدينة بوزنيقة، مقابل تصويت 26 مؤتمرا ضد مقترح التمديد لولاية رابعة. كما شهدت  لشكر يواصل قيادة الاتحاد الاشتراكي     - هسبريس جريدة إلكترونية مغربية .', 'size': 2}, {'id': '309', 'title': 'لولاية رابعة.. لشكر يواصل قيادة الاتحاد الاشتراكي', 'source': 'kifache.com', 'link': 'https://kifache.com/%d9%84%d9%88%d9%84%d8%a7%d9%8a%d8%a9-%d8%b1%d8%a7%d8%a8%d8%b9%d8%a9-%d9%84%d8%b4%d9%83%d8%b1-%d9%8a%d9%88%d8%a7%d8%b5%d9%84-%d9%82%d9%8a%d8%a7%d8%af%d8%a9-%d8%a7%d9%84%d8%a7%d8%aa%d8%ad%d8%a7%d8%af/', 'summary': 'لولاية رابعة.. لشكر يواصل قيادة الاتحاد الاشتراكي. صادق المؤتمر الوطني الثاني عشر لحزب الاتحاد الاشتراكي للقوات الشعبية، المنعقد بمدينة بوزنيقة، على الملتمس المرفوع من المجلس الوطني، والقاضي بتمديد مهمة الكاتب الأول إدريس لشكر لولاية رابعة. وجاء هذا القرار، حسب منشور للحزب على الفايس بوك، بعد اعتماد المؤتمر للتوصية القاضية بتعديل المادة 217 من القانون الأساسي والمادة 212 من النظام الداخلي، وهو التعديل', 'size': 2}], 'main_title': 'لشكر يواصل قيادة الاتحاد الاشتراكي'}, {'community_id': '7', 'articles': [{'id': '335', 'title': 'الاتحاد الاشتراكي يمنح لشكر ولاية رابعة ويقر تعديلا يطيل عمر المكاتب التنظيمية', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1109163.html', 'summary': 'الاتحاد الاشتراكي يمنح لشكر ولاية رابعة ويقر تعديلا يطيل عمر المكاتب التنظيمية. جدد المؤتمر الوطني الثاني عشر لحزب الاتحاد الاشتراكي للقوات الشعبية، في وقت متأخر من ليلة الجمعة إلى السبت، الثقة في إدريس لشكر كاتبا أول للحزب لولاية رابعة. وحاز لشكر على تأييد واسع من المؤتمرين، حيث صوت لصالحه 1611 عضوا وعضوة، مقابل معارضة 26 فقط، ما يعكس تفويضا واضحا لاستمراره في قيادة الحزب خلال المرحلة المقبلة. ظهرت المقالة الاتحاد الاشتراكي يمنح لشكر ولاية رابعة ويقر تعديلا يطيل عمر المكاتب التنظيمية  .', 'size': 2}, {'id': '351', 'title': 'ادريس لشكر على رأس الاتحاد الاشتراكي لولاية رابعة', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d8%a7%d8%af%d8%b1%d9%8a%d8%b3-%d9%84%d8%b4%d9%83%d8%b1-%d8%b9%d9%84%d9%89-%d8%b1%d8%a3%d8%b3-%d8%a7%d9%84%d8%a7%d8%aa%d8%ad%d8%a7%d8%af-%d8%a7%d9%84%d8%a7%d8%b4%d8%aa%d8%b1%d8%a7%d9%83%d9%8a-%d9%84/', 'summary': 'ادريس لشكر على رأس الاتحاد الاشتراكي لولاية رابعة. -متابعات انتخب أعضاء المؤتمر الوطني الثاني عشر لحزب الاتحاد الاشتراكي للقوات الشعبية، فجر اليوم السبت، إدريس لشكر كاتبا أول للحزب، لولاية رابعة. وحظي لشكر بأغلبية مطلقة من المؤتمرين الحاضرين...  ادريس لشكر على رأس الاتحاد الاشتراكي لولاية رابعة     .', 'size': 2}], 'main_title': 'الاتحاد الاشتراكي يمنح لشكر ولاية رابعة ويقر تعديلا يطيل عمر المكاتب التنظيمية'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    