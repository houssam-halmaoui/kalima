<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 28/09/2025 - 12h22</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '6', 'articles': [{'id': '4', 'title': 'بيرديغو: الملك ضامن الحرية الدينية', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d8%a8%d9%8a%d8%b1%d8%af%d9%8a%d8%ba%d9%88-%d8%a7%d9%84%d9%85%d9%84%d9%83-%d8%b6%d8%a7%d9%85%d9%86-%d8%a7%d9%84%d8%ad%d8%b1%d9%8a%d8%a9-%d8%a7%d9%84%d8%af%d9%8a%d9%86%d9%8a%d8%a9-1631084.html', 'summary': 'بيرديغو: الملك ضامن الحرية الدينية. قال سيرج بيرديغو، السفير المتجول للملك، الخميس بنيويورك، إن إمارة المؤمنين، التي يتولى أمانتها الملك محمد السادس، تتميز بكونها مكونا أساسيا ضمن “الاستثناء المغربي”، مؤكدا أن الملك، من خلال اضطلاعه بهذه المهمة، هو الضامن لحرية ممارسة الشعائر بالنسبة لأتباع الديانات السماوية الثلاث في المملكة. وأوضح بيرديغو، خلال حفل تكريم نظمته على شرفه اللجنة اليهودية الأمريكية  بيرديغو: الملك ضامن الحرية الدينية     - هسبريس جريدة إلكترونية مغربية .', 'size': 2}, {'id': '357', 'title': 'سيرج بيرديغو: أمير المؤمنين الملك محمد السادس هو الضامن لحرية ممارسة الديانات السماوية الثلاث في المملكة', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%b3%d9%8a%d8%b1%d8%ac-%d8%a8%d9%8a%d8%b1%d8%af%d9%8a%d8%ba%d9%88-%d8%a3%d9%85%d9%8a%d8%b1-%d8%a7%d9%84%d9%85%d8%a4%d9%85%d9%86%d9%8a%d9%86-%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%85%d8%ad%d9%85%d8%af/', 'summary': 'سيرج بيرديغو: أمير المؤمنين الملك محمد السادس هو الضامن لحرية ممارسة الديانات السماوية الثلاث في المملكة. قال سيرج بيرديغو، السفير المتجول للملك محمد السادس، يوم الخميس 25 شتنبر 2025 بنيويورك، إن إمارة المؤمنين، التي يتولى أمانتها الملك محمد السادس، تتميز بكونها مكونا أساسيا ضمن “الاستثناء المغربي”، مؤكدا أن الملك محمد السادس، ومن خلال اضطلاعه بهذه المهمة، هو الضامن لحرية ممارسة الشعائر بالنسبة لأتباع الديانات السماوية الثلاث في المملكة. وأوضح …  سيرج بيرديغو: أمير المؤمنين الملك محمد السادس هو الضامن لحرية ممارسة الديانات السماوية الثلاث في المملكة     .', 'size': 2}], 'main_title': 'بيرديغو: الملك ضامن الحرية الدينية'}, {'community_id': '3', 'articles': [{'id': '28', 'title': 'الجيش الملكي يفوز على ريال دي بانجو ويتأهل إلى الدور الموالي في دوري الأبطال', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-661303.html', 'summary': 'الجيش الملكي يفوز على ريال دي بانجو ويتأهل إلى الدور الموالي في دوري الأبطال. هبة بريس – رياضة تأهل الجيش الملكي إلى الدور التمهيدي الثاني من دوري أبطال إفريقيا بعد فوزه على ريال دي بانجول الغامبي بنتيجة 2-1، في المباراة التي احتضنها الملعب الأولمبي بالرباط مساء اليوم السبت، ضمن إياب الدور التمهيدي الأول، علماً بأن مباراة الذهاب انتهت لصالح “العساكر” بهدفين دون رد. وقد بدأ الجيش الملكي المباراة بهجوم', 'size': 2}, {'id': '323', 'title': 'الجيش الملكي يقصي ريال دي بانجول ويواصل مشواره الإفريقي', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-591306.html', 'summary': 'الجيش الملكي يقصي ريال دي بانجول ويواصل مشواره الإفريقي. حجز الجيش الملكي المغربي بطاقة العبور إلى الدور التمهيدي الثاني من دوري أبطال إفريقيا، بعد فوزه على ريال دي بانجول الغامبي بهدفين مقابل هدف، في إياب الدور التمهيدي الأول الذي أقيم اليوم على أرضية الملعب الأولمبي بالرباط، علماً أن مباراة الذهاب كانت قد انتهت لصالح “العساكر” بهدفين دون رد. وبادر الفريق العسكري', 'size': 2}], 'main_title': 'الجيش الملكي يفوز على ريال دي بانجو ويتأهل إلى الدور الموالي في دوري الأبطال'}, {'community_id': '0', 'articles': [{'id': '30', 'title': 'تزنيت.. تفكيك عصابة إجرامية  تستخدم إعلانات وهمية لاستدراج وسلب الضحايا', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-661300.html', 'summary': 'تزنيت.. تفكيك عصابة إجرامية تستخدم إعلانات وهمية لاستدراج وسلب الضحايا. هبة بريس – تزنيت تمكنت فرقة الشرطة القضائية التابعة لمنطقة أمن تزنيت من تفكيك عصابة إجرامية متخصصة في استدراج الأشخاص وسلبهم ممتلكاتهم بعد تعريضهم للاعتداء. وأوضحت المعطيات المتوفرة أن العصابة تتكون من خمسة أفراد تتراوح أعمارهم بين 17 و20 سنة، وكانت تعتمد على إعلانات وهمية على الإنترنت لعرض دراجات عالية الجودة للبيع بأسعار مغرية، قبل', 'size': 2}, {'id': '196', 'title': 'إعلانات “مغرية” توقع ضحايا بيد عصابة خطيرة', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d8%b9%d8%b5%d8%a7%d8%a8%d8%a9-%d8%aa%d8%b2%d9%86%d9%8a%d8%aa-%d8%a5%d8%b9%d9%84%d8%a7%d9%86%d8%a7%d8%aa-%d9%88%d9%87%d9%85%d9%8a%d8%a9/', 'summary': 'إعلانات “مغرية” توقع ضحايا بيد عصابة خطيرة.  – متابعات تمكنت فرقة الشرطة القضائية بمنطقة أمن تزنيت من تفكيك عصابة إجرامية متخصصة في استدراج الأشخاص وسلب ممتلكاتهم بعد تعريضهم للاعتداء الجسدي. طريقة الإيقاع بالضحايا وفق المعطيات...  إعلانات “مغرية” توقع ضحايا بيد عصابة خطيرة     .', 'size': 2}], 'main_title': 'تزنيت.. تفكيك عصابة إجرامية  تستخدم إعلانات وهمية لاستدراج وسلب الضحايا'}, {'community_id': '4', 'articles': [{'id': '54', 'title': 'بأمر من الأميرة لالة مريم.. التكفل بالشابة إيمان ضحية الاعتداء من طرف طليقها بتازة', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-661226.html', 'summary': 'بأمر من الأميرة لالة مريم.. التكفل بالشابة إيمان ضحية الاعتداء من طرف طليقها بتازة. هبة بريس بأمر من صاحبة السمو الملكي الأميرة الجليلة لالة مريم، رئيسة الاتحاد الوطني لنساء المغرب، بادر الاتحاد إلى التكفل الشامل بالشابة إيمان، ضحية الاعتداء اللاإنساني والتشويه الشنيع الذي تعرضت له بمدينة تازة. وقد بدأت الشابة إيمان بالفعل بروتوكول علاج طبي متخصص بإحدى مصحات جراحة التجميل بمدينة الرباط، بهدف إصلاح الأضرار الجسيمة التي لحقت بوجهها', 'size': 5}, {'id': '61', 'title': 'صاحبة السمو الملكي الأميرة لالة مريم تأمر بالتكفل بالسيدة إيمان ضحـ.ية الاعتـ.داء اللاإنساني بمدينة تازة', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/206766', 'summary': 'صاحبة السمو الملكي الأميرة لالة مريم تأمر بالتكفل بالسيدة إيمان ضحـ.ية الاعتـ.داء اللاإنساني بمدينة تازة. الأحداث من الرباط أعلن الاتحاد الوطني لنساء المغرب عن توليه مسؤولية التكفل بالسيدة إيمان، ضحـ..ية الاعتـ..داء اللاإنساني بمدينة تازة،بأمر من صاحبة السمو الملكي الأميرة الجليلة لالة مريم، رئيسة الاتحاد. وأوضح الاتحاد الوطني لنساء المغرب في بلاغ له؛ أن السيدة إيمان شرعت في بروتوكول علاج تدريجي متخصص بإحدى مصحات جراحة التجميل بالرباط،بهدف إصلاح الأضرار العميقة التي', 'size': 4}, {'id': '94', 'title': 'الأميرة لالة مريم تتدخل شخصيا وتأمر بالتكفل الكامل بحالة الشابة إيمان التي مزق طليقها وجهها', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/society/413487.html', 'summary': 'الأميرة لالة مريم تتدخل شخصيا وتأمر بالتكفل الكامل بحالة الشابة إيمان التي مزق طليقها وجهها. بتعليمات مباشرة من الأميرة لالة مريم، شرع الاتحاد الوطني لنساء المغرب في تقديم دعم شامل للشابة إيمان، ضحية الاعتداء الوحشي الذي هز مدينة تازة وأثار', 'size': 4}, {'id': '140', 'title': 'الأميرة للا مريم تأمر بالتكفل بعلاج ضحية الاعتداء الوحشي بتازة', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/324588/', 'summary': 'الأميرة للا مريم تأمر بالتكفل بعلاج ضحية الاعتداء الوحشي بتازة. أعلن الاتحاد الوطني لنساء المغرب، أنه وبأمر من الأميرة لالة مريم، رئيسة الاتحاد، تم التكفل بـ”إيمان” ضحية الاعتداء اللاإنساني والتشويه الشنيع بمدينة تازة. وأكد الاتحاد الوطني في بلاغه أن الضحية شرعت في الخضوع لبروتوكول علاجي تدريجي بإحدى مصحات جراحة التجميل بالعاصمة الرباط، بهدف إصلاح الأضرار العميقة التي لحقت بوجهها جراء الاعتداء. وأضاف البلاغ أن “إيمان”', 'size': 5}, {'id': '154', 'title': 'الأميرة لالة مريم تتدخل للتكفل برعاية إيمان ضحية الاعتداء الوحشي بتازة', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1103413.html', 'summary': 'الأميرة لالة مريم تتدخل للتكفل برعاية إيمان ضحية الاعتداء الوحشي بتازة. أعلن الاتحاد الوطني لنساء المغرب، بأمر من الأميرة الجليلة لالة مريم رئيسة الاتحاد، عن التكفل بالسيدة إيمان ضحية الاعتداء اللاإنساني والتشويه الشنيع بمدينة تازة. وأوضح بلاغ للاتحاد أن المعنية بالأمر قد شرعت في بروتوكول علاج تدريجي متخصص بإحدى مصحات جراحة التجميل بالرباط، وذلك من أجل إصلاح الأضرار العميقة التي خلفها الاعتداء على وجهها. وأضاف المصدر ظهرت المقالة الأميرة لالة مريم تتدخل للتكفل برعاية إيمان ضحية الاعتداء الوحشي بتازة  .', 'size': 5}], 'main_title': 'بأمر من الأميرة لالة مريم.. التكفل بالشابة إيمان ضحية الاعتداء من طرف طليقها بتازة'}, {'community_id': '5', 'articles': [{'id': '93', 'title': 'عاصفة تقترب من السواحل المغربية.. أمطار غزيرة ورياح قوية بدءا من الإثنين', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/413486.html', 'summary': 'عاصفة تقترب من السواحل المغربية.. أمطار غزيرة ورياح قوية بدءا من الإثنين. تستعد السواحل الشمالية للمملكة مطلع الأسبوع لاستقبال منخفض جوي قادم من المحيط الأطلسي، بعدما فقد صفاته الاستوائية التي رافقته في مساره. ورغم تراجع قوته، إلا أن', 'size': 2}, {'id': '318', 'title': 'منخفض جوي يقترب من السواحل المغربية محملا بأمطار غزيرة ورياح قوية', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-591294.html', 'summary': 'منخفض جوي يقترب من السواحل المغربية محملا بأمطار غزيرة ورياح قوية. تترقب السواحل الشمالية للمملكة مطلع الأسبوع الجاري قدوم منخفض جوي قادم من المحيط الأطلسي، بعدما فقد خصائصه الاستوائية في مساره، غير أن خبراء الأرصاد الجوية حذروا من أنه قد يجلب تساقطات مطرية غزيرة أحياناً ورياحاً قوية ستهم عددا من المناطق الساحلية، مع امتداد تأثيراته إلى كل من إسبانيا والبرتغال. وبحسب المصادر ذاتها،', 'size': 2}], 'main_title': 'عاصفة تقترب من السواحل المغربية.. أمطار غزيرة ورياح قوية بدءا من الإثنين'}, {'community_id': '1', 'articles': [{'id': '259', 'title': 'دراسة: المعتمدون على أدوات الذكاء الاصطناعي أكثر استعدادا للكذب والخداع', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d8%af%d8%b1%d8%a7%d8%b3%d8%a9-%d8%a7%d9%84%d9%85%d8%b9%d8%aa%d9%85%d8%af%d9%88%d9%86-%d8%b9%d9%84%d9%89-%d8%a3%d8%af%d9%88%d8%a7%d8%aa-%d8%a7%d9%84%d8%b0%d9%83%d8%a7%d8%a1-%d8%a7%d9%84%d8%a7%d8%b5-1631340.html', 'summary': 'دراسة: المعتمدون على أدوات الذكاء الاصطناعي أكثر استعدادا للكذب والخداع. حذرت دراسة جديدة من أن الأشخاص الذين يعتمدون بكثافة على الذكاء الاصطناعي في أداء واجباتهم الوظيفية أو الدراسية يكونون أكثر استعدادا لخداع الآخرين والكذب عليهم. وبحسب الدراسة التي أجراها معهد ماكس بلانك للتنمية البشرية في برلين، فإن بعض المستخدمين ينسون استخدام “الكوابح الأخلاقية” عند تفويض مهامهم لأدوات الذكاء الاصطناعي لكي تؤديها بدلا منهم. وقال الباحثون  دراسة: المعتمدون على أدوات الذكاء الاصطناعي أكثر استعدادا للكذب والخداع     - هسبريس جريدة إلكترونية مغربية .', 'size': 3}, {'id': '307', 'title': 'دراسة: المعتمدون على أدوات الذكاء الاصطناعي أكثر استعدادا للكذب', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/324622/', 'summary': 'دراسة: المعتمدون على أدوات الذكاء الاصطناعي أكثر استعدادا للكذب. حذرت دراسة جديدة من أن الأشخاص الذين يعتمدون بكثافة على الذكاء الاصطناعي في أداء واجباتهم الوظيفية أو الدراسية يكونون أكثر استعدادا لخداع الآخرين والكذب عليهم. وبحسب الدراسة التي أجراها “معهد ماكس بلانك للتنمية البشرية” في برلين فإن بعض المستخدمين ينسون استخدام “الكوابح الأخلاقية” عند تفويض مهامهم لأدوات الذكاء الاصطناعي لكي تؤديها بدلا منهم. وقال الباحثون في', 'size': 2}, {'id': '356', 'title': 'دراسة: الاعتماد المفرط على الذكاء الاصطناعي يزيد من ميل الأشخاص للغش والكذب', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%af%d8%b1%d8%a7%d8%b3%d8%a9-%d8%a7%d9%84%d8%a7%d8%b9%d8%aa%d9%85%d8%a7%d8%af-%d8%a7%d9%84%d9%85%d9%81%d8%b1%d8%b7-%d8%b9%d9%84%d9%89-%d8%a7%d9%84%d8%b0%d9%83%d8%a7%d8%a1-%d8%a7%d9%84%d8%a7%d8%b5/', 'summary': 'دراسة: الاعتماد المفرط على الذكاء الاصطناعي يزيد من ميل الأشخاص للغش والكذب. أفادت دراسة جديدة أن الأشخاص الذين يعتمدون بكثافة على الذكاء الاصطناعي في أداء واجباتهم الوظيفية أو الدراسية يكونون أكثر استعدادا لخداع الآخرين والكذب عليهم. ووفقا لما أورده موقع “سكاي نيوز عربية” اليوم الأحد 28 شتنبر 2025، فإن الدراسة التي أجراها “معهد ماكس بلانك للتنمية البشرية” في برلين فإن بعض المستخدمين ينسون استخدام “الكوابح …  دراسة: الاعتماد المفرط على الذكاء الاصطناعي يزيد من ميل الأشخاص للغش والكذب     .', 'size': 2}], 'main_title': 'دراسة: المعتمدون على أدوات الذكاء الاصطناعي أكثر استعدادا للكذب والخداع'}, {'community_id': '2', 'articles': [{'id': '302', 'title': 'أول من قدم نشرات باللغة الإسبانية في التلفزة المغربية.. رحيل سعيد الجديدي', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a3%d9%88%d9%84-%d9%85%d9%86-%d9%82%d8%af%d9%85-%d9%86%d8%b4%d8%b1%d8%a7%d8%aa-%d8%a8%d8%a7%d9%84%d9%84%d8%ba%d8%a9-%d8%a7%d9%84%d8%a5%d8%b3%d8%a8%d8%a7%d9%86%d9%8a%d8%a9-%d9%81%d9%8a-%d8%a7%d9%84/', 'summary': 'أول من قدم نشرات باللغة الإسبانية في التلفزة المغربية.. رحيل سعيد الجديدي. توفي، مساء أمس السبت (27 شتنبر)، الإعلامي والأديب سعيد الجديدي أحد مؤسسي الصحافة الناطقة باللغة الإسبانية خلال مرحلة ما بعد الاستقلال، وذلك حسب ما علم لدى أسرته. وتلقى الراحل تعليمه الثانوي بتطوان، قبل أن يتابع دراسته الجامعية بكل من إنجلترا وإسبانيا، ليلتحق بعد ذلك بالقسم الإسباني بالتلفزة المغربية، حيث سيتولى منصب رئيس تحرير ثم رئيس', 'size': 3}, {'id': '312', 'title': 'وفاة الإعلامي والأديب سعيد الجديدي', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/324610/', 'summary': 'وفاة الإعلامي والأديب سعيد الجديدي. توفي، مساء أمس السبت، الإعلامي والأديب سعيد الجديدي أحد مؤسسي الصحافة الناطقة باللغة الإسبانية خلال مرحلة ما بعد الاستقلال، وذلك حسب ما علم لدى أسرته. وتلقى الراحل تعليمه الثانوي بتطوان، قبل أن يتابع دراسته الجامعية بكل من إنجلترا وإسبانيا، ليلتحق بعد ذلك بالقسم الإسباني بالتلفزة المغربية، حيث سيتولى منصب رئيس تحرير ثم رئيس قسم. ويعتبر', 'size': 3}, {'id': '316', 'title': 'الإعلامي والأديب سعيد الجديدي في ذمة الله', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-591326.html', 'summary': 'الإعلامي والأديب سعيد الجديدي في ذمة الله. توفي، مساء أمس السبت، الإعلامي والأديب سعيد الجديدي أحد مؤسسي الصحافة الناطقة باللغة الإسبانية خلال مرحلة ما بعد الاستقلال، وذلك حسب ما علم لدى أسرته. وتلقى الراحل تعليمه الثانوي بتطوان، قبل أن يتابع دراسته الجامعية بكل من إنجلترا وإسبانيا، ليلتحق بعد ذلك بالقسم الإسباني بالتلفزة المغربية، حيث سيتولى منصب رئيس تحرير ثم رئيس', 'size': 3}], 'main_title': 'أول من قدم نشرات باللغة الإسبانية في التلفزة المغربية.. رحيل سعيد الجديدي'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    