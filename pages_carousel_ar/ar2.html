<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 22/09/2025 - 06h17</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '1', 'articles': [{'id': '3', 'title': '\u202aأسلحة بيضاء توقف شخصا بتارودانت\u202c', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d8%a3%d8%b3%d9%84%d8%ad%d8%a9-%d8%a8%d9%8a%d8%b6%d8%a7%d8%a1-%d8%aa%d9%88%d9%82%d9%81-%d8%b4%d8%ae%d8%b5%d8%a7-%d8%a8%d8%aa%d8%a7%d8%b1%d9%88%d8%af%d8%a7%d9%86%d8%aa-1627771.html', 'summary': '\u202aأسلحة بيضاء توقف شخصا بتارودانت\u202c. تفاعلت ولاية أمن أكادير، بجدية كبيرة، مع شريط منشور على صفحات مواقع التواصل الاجتماعي، يظهر فيه شخص يحوز أسلحة بيضاء في ظروف تشكل خطرا على الأشخاص والممتلكات بمدينة تارودانت. وأوردت ولاية أمن أكادير، ضمن بلاغ لها، أن الأبحاث والتحريات المنجزة على ضوء هذا الشريط، بتنسيق مع مصالح المديرية العامة لمراقبة التراب الوطني، أسفرت عن تحديد  \u202aأسلحة بيضاء توقف شخصا بتارودانت\u202c     - هسبريس جريدة إلكترونية مغربية .', 'size': 2}, {'id': '217', 'title': 'الأمن يتفاعل مع شريط على مواقع التواصل ويوقف مهدد سلامة المواطنين بتارودانت', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d8%a3%d9%85%d9%86-%d9%8a%d8%aa%d9%81%d8%a7%d8%b9%d9%84-%d9%85%d8%b9-%d8%b4%d8%b1%d9%8a%d8%b7-%d8%b9%d9%84%d9%89-%d9%85%d9%88%d8%a7%d9%82%d8%b9-%d8%a7%d9%84%d8%aa%d9%88%d8%a7%d8%b5%d9%84/', 'summary': 'الأمن يتفاعل مع شريط على مواقع التواصل ويوقف مهدد سلامة المواطنين بتارودانت. تفاعلت ولاية أمن أكادير، بجدية كبيرة، مع شريط فيديو منشور على صفحات مواقع التواصل الاجتماعي، يظهر فيه شخص يحوز أسلحة بيضاء في ظروف تشكل خطرا على الأشخاص والممتلكات بمدينة تارودانت. وحسب مصدر أمني، أسفرت الأبحاث والتحريات المنجزة على ضوء هذا الشريط، بتنسيق مع مصالح المديرية العامة لمراقبة التراب الوطني، عن تحديد هوية المشتبه …  الأمن يتفاعل مع شريط على مواقع التواصل ويوقف مهدد سلامة المواطنين بتارودانت     .', 'size': 2}], 'main_title': '\u202aأسلحة بيضاء توقف شخصا بتارودانت\u202c'}, {'community_id': '4', 'articles': [{'id': '4', 'title': 'نتنياهو: لن تكون هناك دولة فلسطينية', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d9%86%d8%aa%d9%86%d9%8a%d8%a7%d9%87%d9%88-%d9%84%d9%86-%d8%aa%d9%83%d9%88%d9%86-%d9%87%d9%86%d8%a7%d9%83-%d8%af%d9%88%d9%84%d8%a9-%d9%81%d9%84%d8%b3%d8%b7%d9%8a%d9%86%d9%8a%d8%a9-1627772.html', 'summary': 'نتنياهو: لن تكون هناك دولة فلسطينية. قال رئيس الوزراء الإسرائيلي بنيامين نتنياهو الأحد إنه لن تكون هناك دولة فلسطينية، وذلك في رسالة موجهة إلى قادة بريطانيا وأستراليا وكندا بعد اعترافهم بدولة فلسطين. في تسجيل فيديو نشره مكتبه، قال نتنياهو “لدي رسالة واضحة للقادة الذين يعترفون بدولة فلسطينية بعد المجزرة المروعة التي وقعت في السابع من أكتوبر: أنتم تمنحون مكافأة كبيرة للإرهاب”،  نتنياهو: لن تكون هناك دولة فلسطينية     - هسبريس جريدة إلكترونية مغربية .', 'size': 2}, {'id': '287', 'title': 'نتنياهو يهاجم الدول التي اعترفت بدولة فلسطين', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-659290.html', 'summary': 'نتنياهو يهاجم الدول التي اعترفت بدولة فلسطين. أكد رئيس الوزراء الإسرائيلي بنيامين نتنياهو، الأحد، رفضه القاطع لإقامة دولة فلسطينية، موجّهًا رسالة شديدة اللهجة إلى قادة بريطانيا وأستراليا وكندا، وذلك عقب إعلانهم الاعتراف بدولة فلسطين. وفي مقطع فيديو نشره مكتبه، قال نتنياهو: “لدي رسالة واضحة للقادة الذين اعترفوا بدولة فلسطينية بعد المجزرة المروعة في السابع من أكتوبر: أنتم تمنحون الإرهاب مكافأة كبيرة”. وأضاف:', 'size': 2}], 'main_title': 'نتنياهو: لن تكون هناك دولة فلسطينية'}, {'community_id': '2', 'articles': [{'id': '34', 'title': 'الفارس الإيطالي إيمانويل غوديانو يتوج بجائزة “الداخلة” في تطوان', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-659207.html', 'summary': 'الفارس الإيطالي إيمانويل غوديانو يتوج بجائزة “الداخلة” في تطوان. فاز الفارس الإيطالي إيمانويل غوديانو، أمس السبت بحلبة “إيبيكا” التابعة للحرس الملكي بتطوان، بجائزة “الداخلة”، ضمن محطة تطوان للدوري الملكي المغربي للقفز على الحواجز، المنظم تحت الرعاية السامية لصاحب الجلالة الملك محمد السادس. وتألق إيمانويل غوديانو ممتطيا الفرس “كراك بالو” حيث قطع المضمار في توقيت 36 ثانية و 34 جزءا من المائة، متقدما بفارق ضئيل', 'size': 3}, {'id': '182', 'title': 'الدوري الملكي المغربي للقفز على الحواجز.. هؤلاء أبرز المتوجين', 'source': 'machahid24.com', 'link': 'https://machahid24.com/sport/476240.html', 'summary': 'الدوري الملكي المغربي للقفز على الحواجز.. هؤلاء أبرز المتوجين. فاز الفارس الإيطالي إيمانويل غوديانو، أمس السبت بحلبة "إيبيكا" التابعة للحرس الملكي بتطوان، بجائزة "الداخلة"، ضمن محطة تطوان للدوري الملكي المغربي للقفز على الحواجز، المنظم تحت الرعاية السامية للملك محمد السادس.', 'size': 2}, {'id': '222', 'title': 'الفارس الإيطالي إيمانويل غوديانو يتوج بجائزة الداخلة في الدوري الملكي المغربي للقفز على الحواجز', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d9%81%d8%a7%d8%b1%d8%b3-%d8%a7%d9%84%d8%a5%d9%8a%d8%b7%d8%a7%d9%84%d9%8a-%d8%a5%d9%8a%d9%85%d8%a7%d9%86%d9%88%d9%8a%d9%84-%d8%ba%d9%88%d8%af%d9%8a%d8%a7%d9%86%d9%88-%d9%8a%d8%aa%d9%88/', 'summary': 'الفارس الإيطالي إيمانويل غوديانو يتوج بجائزة الداخلة في الدوري الملكي المغربي للقفز على الحواجز. توج الفارس الإيطالي إيمانويل غوديانو، أمس السبت 20 شتنبر 2025، بحلبة “إيبيكا” التابعة للحرس الملكي بتطوان، بجائزة “الداخلة”، ضمن محطة تطوان للدوري الملكي المغربي للقفز على الحواجز، المنظم تحت الرعاية السامية للملك محمد السادس. وتميز إيمانويل غوديانو ممتطيا الفرس “كراك بالو” حيث قطع المضمار في توقيت 36 ثانية و 34 جزءا من المائة، …  الفارس الإيطالي إيمانويل غوديانو يتوج بجائزة الداخلة في الدوري الملكي المغربي للقفز على الحواجز     .', 'size': 2}], 'main_title': 'الفارس الإيطالي إيمانويل غوديانو يتوج بجائزة “الداخلة” في تطوان'}, {'community_id': '3', 'articles': [{'id': '43', 'title': 'أمينة بنخضرة: أنبوب الغاز الإفريقي الأطلسي يعزز اندماج إفريقيا ويخدم استراتيجية المغرب', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-659114.html', 'summary': 'أمينة بنخضرة: أنبوب الغاز الإفريقي الأطلسي يعزز اندماج إفريقيا ويخدم استراتيجية المغرب. أكدت المديرة العامة للمكتب الوطني للهيدروكربورات والمعادن، أمينة بنخضرة، أمس السبت، أن خط أنبوب الغاز الإفريقي الأطلسي يجسد الرؤية الاستراتيجية لصاحب الجلالة الملك محمد السادس، والإرادة المشتركة للمغرب ونيجيريا للعمل من أجل إفريقيا أكثر اندماجا، على أساس مشاريع تنموية رابح-رابح. وأبرزت السيدة بنخضرة، التي كانت تتحدث خلال الدورة العاشرة للقاءات الجيوسياسية في تروفيل (شمال فرنسا)،', 'size': 3}, {'id': '128', 'title': 'أمينة بنخضرة: خط أنبوب الغاز الإفريقي الأطلسي يجسد الرؤية الملكية الاستراتيجية من أجل إفريقيا أكثر اندماجا', 'source': 'assabah.ma', 'link': 'https://assabah.ma/872208.html', 'summary': 'أمينة بنخضرة: خط أنبوب الغاز الإفريقي الأطلسي يجسد الرؤية الملكية الاستراتيجية من أجل إفريقيا أكثر اندماجا. أكدت المديرة العامة للمكتب الوطني للهيدروكربورات والمعادن، أمينة بنخضرة، اليوم السبت، أن خط أنبوب الغاز الإفريقي الأطلسي يجسد الرؤية الاستراتيجية لصاحب الجلالة الملك محمد السادس، والإرادة المشتركة للمغرب ونيجيريا للعمل من أجل إفريقيا أكثر اندماجا، على أساس مشاريع تنموية رابح-رابح. وأبرزت بنخضرة، التي كانت تتحدث خلال الدورةأكمل القراءة » المقالة أمينة بنخضرة: خط أنبوب الغاز الإفريقي الأطلسي يجسد الرؤية الملكية الاستراتيجية من أجل إفريقيا أكثر اندماجا  .', 'size': 2}, {'id': '364', 'title': 'بنخضرة: خط أنبوب الغاز الإفريقي الأطلسي يجسد الرؤية الملكية الاستراتيجية من أجل إفريقيا مندمجة', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/476265.html', 'summary': 'بنخضرة: خط أنبوب الغاز الإفريقي الأطلسي يجسد الرؤية الملكية الاستراتيجية من أجل إفريقيا مندمجة. أكدت المديرة العامة للمكتب الوطني للهيدروكربورات والمعادن، أمينة بنخضرة، أن مشروع أنبوب الغاز الإفريقي الأطلسي يجسد رؤية استراتيجية واضحة لصاحب الجلالة الملك محمد السادس، ويترجم الإرادة المشتركة بين المغرب ونيجيريا لبناء إفريقيا أكثر اندماجاً قائمة على مشاريع تنموية ذات منفعة متبادلة. وخلال مشاركتها في الدورة العاشرة للقاءات الجيوسياسية بمدينة تروفيل شمال فرنسا، حيث كان المغرب …', 'size': 2}], 'main_title': 'أمينة بنخضرة: أنبوب الغاز الإفريقي الأطلسي يعزز اندماج إفريقيا ويخدم استراتيجية المغرب'}, {'community_id': '0', 'articles': [{'id': '45', 'title': 'نشرة إنذارية.. مستوى يقظة برتقالي: زخات رعدية ورياح قوية بعدد من مناطق المملكة', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-659107.html', 'summary': 'نشرة إنذارية.. مستوى يقظة برتقالي: زخات رعدية ورياح قوية بعدد من مناطق المملكة. يرتقب تسجيل زخات رعدية (من 20 إلى 30 ملم) مصحوبة بهبات رياح، اليوم الأحد، بعدد من مناطق المملكة، وفق ما أفادت به المديرية العامة للأرصاد الجوية. وأوضحت نشرة إنذارية للمديرية من مستوى يقظة “برتقالي”، أنه من المرتقب تسجيل هذه الزخات الرعدية بكل من عمالات وأقاليم جرادة وفكيك وبولمان وميدلت وورزازات وأزيلال، من الساعة الثانية زوالا', 'size': 3}, {'id': '138', 'title': 'نشرة إنذارية .. زخات رعدية مصحوبة بهبات رياح مرتقبة بعدد من مناطق المملكة', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/323960/', 'summary': 'نشرة إنذارية .. زخات رعدية مصحوبة بهبات رياح مرتقبة بعدد من مناطق المملكة. يرتقب تسجيل زخات رعدية (من 20 إلى 30 ملم) مصحوبة بهبات رياح، اليوم الأحد، بعدد من مناطق المملكة، وفق ما أفادت به المديرية العامة للأرصاد الجوية. وأوضحت نشرة إنذارية للمديرية من مستوى يقظة “برتقالي”، أنه من المرتقب تسجيل هذه الزخات الرعدية بكل من عمالات وأقاليم جرادة وفكيك وبولمان وميدلت وورزازات وأزيلال، من الساعة الثانية زوالا', 'size': 3}, {'id': '157', 'title': 'نشرة إنذارية: أمطار مصحوبة برياح الأحد بهذه المناطق', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1101486.html', 'summary': 'نشرة إنذارية: أمطار مصحوبة برياح الأحد بهذه المناطق. يرتقب تسجيل زخات رعدية (من 20 إلى 30 ملم) مصحوبة بهبات رياح، اليوم الأحد، بعدد من مناطق المملكة، وفق ما أفادت به المديرية العامة للأرصاد الجوية. وأوضحت نشرة إنذارية للمديرية من مستوى يقظة “برتقالي”، أنه من المرتقب تسجيل هذه الزخات الرعدية بكل من عمالات وأقاليم جرادة وفكيك وبولمان وميدلت وورزازات وأزيلال، من الساعة الثانية زوالا ظهرت المقالة نشرة إنذارية: أمطار مصحوبة برياح الأحد بهذه المناطق  .', 'size': 3}], 'main_title': 'نشرة إنذارية.. مستوى يقظة برتقالي: زخات رعدية ورياح قوية بعدد من مناطق المملكة'}, {'community_id': '11', 'articles': [{'id': '46', 'title': 'الكونفدرالية تحذر من تفاقم أزمة الدواء وتطالب بتدخل رئيس الحكومة', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-659103.html', 'summary': 'الكونفدرالية تحذر من تفاقم أزمة الدواء وتطالب بتدخل رئيس الحكومة. أعلنت كونفدرالية نقابات صيادلة المغرب عن استعدادها لخوض خطوات احتجاجية جديدة أكثر تصعيدًا، من بينها تنظيم وقفة وطنية كبرى سيُكشف عن تاريخها قريبًا بعد استكمال التنسيق مع مختلف الهيئات النقابية والجمعوية الصيدلانية عبر ربوع المملكة. وأفاد بلاغ للكونفدرالية أن هذا التوجه التصعيدي جاء عقب انعقاد مجلسها الوطني يوم 19 شتنبر 2025، في ظل تصاعد حالة', 'size': 2}, {'id': '132', 'title': 'الصيادلة يصعدون ضد وزارة الصحة ويستعدون لوقفة وطنية كبرى', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/323973/', 'summary': 'الصيادلة يصعدون ضد وزارة الصحة ويستعدون لوقفة وطنية كبرى. دخلت كونفدرالية نقابات صيادلة المغرب على خط مواجهة جديدة مع وزارة الصحة والحماية الاجتماعية، معلنة ما وصفته بـ”مرحلة تصعيد غير مسبوقة” ضد ما تعتبره تجاهلا مستمرا لمطالب الصيادلة. وأكدت الكونفدرالية أن حالة الاحتقان المهني بلغت مستويات خطيرة، خصوصا بعد الوقفة الاحتجاجية الحاشدة التي نظمها الصيادلة يوم 9 شتنبر أمام مقر الوزارة، والتي لم تحظ،', 'size': 2}], 'main_title': 'الكونفدرالية تحذر من تفاقم أزمة الدواء وتطالب بتدخل رئيس الحكومة'}, {'community_id': '12', 'articles': [{'id': '64', 'title': 'جلالة الملك يهنئ رئیسة جمهورية مالطا بمناسبة عيد استقلال بلادها', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/206526', 'summary': 'جلالة الملك يهنئ رئیسة جمهورية مالطا بمناسبة عيد استقلال بلادها. الأحداث من الرباط بعث صاحب الجلالة الملك محمد السادس برقية تهنئة إلى السيدة ميريام سبيتيري ديبونو، رئیسة جمهورية مالطا، وذلك بمناسبة عيد استقلال بلادها. وأعرب جلالة الملك، في هذه البرقية، عن أحر التهاني للرئيسة ميريام سبيتيري ديبونو، مقرونة بأصدق المتمنيات للشعب المالطي الصديق باطراد الرخاء والازدهار. ومما جاء في برقية جلالة الملك:” وأغتنمها فرصة سانحة', 'size': 2}, {'id': '396', 'title': 'الملك محمد السادس يبعث برقية تهنئة إلى رئیسة جمهورية مالطا بمناسبة عيد استقلال بلادها', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%85%d8%ad%d9%85%d8%af-%d8%a7%d9%84%d8%b3%d8%a7%d8%af%d8%b3-%d9%8a%d8%a8%d8%b9%d8%ab-%d8%a8%d8%b1%d9%82%d9%8a%d8%a9-%d8%aa%d9%87%d9%86%d8%a6%d8%a9-%d8%a5%d9%84%d9%89-6/', 'summary': 'الملك محمد السادس يبعث برقية تهنئة إلى رئیسة جمهورية مالطا بمناسبة عيد استقلال بلادها. بعث الملك محمد السادس، برقية تهنئة إلى ميريام سبيتيري ديبونو، رئیسة جمهورية مالطا، وذلك بمناسبة عيد استقلال بلادها. وأعرب الملك محمد السادس، في هذه البرقية، عن أحر التهاني للرئيسة ميريام سبيتيري ديبونو، مقرونة بأصدق المتمنيات للشعب المالطي الصديق باطراد الرخاء والازدهار. ومما جاء في برقية الملك محمد السادس:” وأغتنمها فرصة سانحة لأعرب لفخامتكن …  الملك محمد السادس يبعث برقية تهنئة إلى رئیسة جمهورية مالطا بمناسبة عيد استقلال بلادها     .', 'size': 2}], 'main_title': 'جلالة الملك يهنئ رئیسة جمهورية مالطا بمناسبة عيد استقلال بلادها'}, {'community_id': '7', 'articles': [{'id': '65', 'title': 'الاتحاد العام لمقاولات المغرب في زيارة مرتقبة إلى المكسيك لاستكشاف فرص الاستثمار والشراكة', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/206518', 'summary': 'الاتحاد العام لمقاولات المغرب في زيارة مرتقبة إلى المكسيك لاستكشاف فرص الاستثمار والشراكة.  يقوم وفد من الاتحاد العام لمقاولات المغرب، بقيادة رئيسه شكيب العلج ، بزيارة اقتصادية رفيعة المستوى إلى المكسيك خلال الفترة الممتدة بين 22 و25 شتنبر الجاري. وذكر بلاغ للاتحاد أن هذه الزيارة، المنظمة بتنسيق مع سفارة المملكة المغربية في المكسيك، تهدف إلى تعزيز العلاقات الاقتصادية والتجارية بين البلدين، واستكشاف فرص جديدة للاستثمار والشراكة', 'size': 2}, {'id': '181', 'title': 'وفد من الاتحاد العام لمقاولات المغرب يزور المكسيك لاستكشاف فرص الاستثمار والشراكة', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/476250.html', 'summary': 'وفد من الاتحاد العام لمقاولات المغرب يزور المكسيك لاستكشاف فرص الاستثمار والشراكة. يقوم وفد من الاتحاد العام لمقاولات المغرب، بقيادة رئيسه شكيب العلج، بزيارة اقتصادية رفيعة المستوى إلى المكسيك خلال الفترة الممتدة بين 22 و25 شتنبر الجاري.', 'size': 2}], 'main_title': 'الاتحاد العام لمقاولات المغرب في زيارة مرتقبة إلى المكسيك لاستكشاف فرص الاستثمار والشراكة'}, {'community_id': '8', 'articles': [{'id': '76', 'title': '"مسار الإنجازات".. الطالبي: التجمع يترفع عن الخطاب الشعبوي ولا يشخصن النقاش والحكومة أوفت بالتزاماتها', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/politic/413089.html', 'summary': '"مسار الإنجازات".. الطالبي: التجمع يترفع عن الخطاب الشعبوي ولا يشخصن النقاش والحكومة أوفت بالتزاماتها. بعث راشيد الطالبي العلمي، عضو المكتب السياسي لحزب التجمع الوطني للأحرار، في كلمته اليوم السبت بمراكش، خلال الجولة الخامسة من "مسار الإنجازات"، مجموعة من الرسائل', 'size': 2}, {'id': '154', 'title': 'الطالبي العلمي: الدخول السياسي المقبل حافل بالهجمات.. لكنها “مجرد فقاعات”', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1101457.html', 'summary': 'الطالبي العلمي: الدخول السياسي المقبل حافل بالهجمات.. لكنها “مجرد فقاعات”. أكد راشيد الطالبي العلمي، عضو المكتب السياسي لحزب التجمع الوطني للأحرار، أن الدخول السياسي المقبل سيكون حافلا بالتحديات والهجمات، لكنه اعتبرها مجرد “فقاعات لا تؤثر في صلابة الحكومة ولا في إرادة الحزب”، مشيرا إلى أن الأولوية ستظل دائما موجهة إلى تحسين التعليم والصحة ومحاربة الفقر والهشاشة، تحقيقا لتطلعات المواطنين. وأوضح الطالبي العلمي، أمس السبت، في ظهرت المقالة الطالبي العلمي: الدخول السياسي المقبل حافل بالهجمات.. لكنها “مجرد فقاعات”  .', 'size': 2}], 'main_title': '"مسار الإنجازات".. الطالبي: التجمع يترفع عن الخطاب الشعبوي ولا يشخصن النقاش والحكومة أوفت بالتزاماتها'}, {'community_id': '9', 'articles': [{'id': '127', 'title': 'بنعيسى الجيراري: سعيد بالانتماء للأحرار لأنه حزب المستقبل وفيدرالية الفنانين فكرة أخنوش', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a8%d9%86%d8%b9%d9%8a%d8%b3%d9%89-%d8%a7%d9%84%d8%ac%d9%8a%d8%b1%d8%a7%d8%b1%d9%8a-%d8%b3%d8%b9%d9%8a%d8%af-%d8%a8%d8%a7%d9%84%d8%a7%d9%86%d8%aa%d9%85%d8%a7%d8%a1-%d9%84%d9%84%d8%a3%d8%ad%d8%b1/', 'summary': 'بنعيسى الجيراري: سعيد بالانتماء للأحرار لأنه حزب المستقبل وفيدرالية الفنانين فكرة أخنوش. عبّر الفنان المسرحي والكوميدي بنعيسى الجيراري عن سعادته بالانضمام إلى حزب التجمع الوطني للأحرار، مؤكدا أن اختياره لم يكن وليد اللحظة بل نتيجة قناعة راسخة بأن العمل السياسي قادر على صناعة التغيير. وأوضح الجيراري أن قرار التحاقه بالحزب أثار استغراب وانتقادات البعض، قبل أن يضيف: “إيماني بأن السياسة يمكن أن تفتح آفاقا جديدة هو ما', 'size': 2}, {'id': '135', 'title': 'الجيراري: التحقت بحزب الأحرار بعد تهميش الفنانين خلال جائحة كورونا', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/323968/', 'summary': 'الجيراري: التحقت بحزب الأحرار بعد تهميش الفنانين خلال جائحة كورونا. أبدى الفنان المسرحي بنعيسى الجيراري، ارتياحه للانضمام إلى صفوف حزب التجمع الوطني للأحرار، مؤكدا أن هذه الخطوة جاءت بتشجيع مباشر من رئيس الحزب عزيز أخنوش، الذي كان له دور بارز في دعمه، خاصة في سياق تأسيس الفيدرالية الوطنية للفنان، التي تندرج ضمن هياكل الحزب وتعنى بقضايا الفنانين وقطاع الثقافة. وقال الجيراري، خلال مشاركته في الجولة', 'size': 2}], 'main_title': 'بنعيسى الجيراري: سعيد بالانتماء للأحرار لأنه حزب المستقبل وفيدرالية الفنانين فكرة أخنوش'}, {'community_id': '5', 'articles': [{'id': '293', 'title': 'الدوري الملكي المغربي للقفز على الحواجز (مرحلة تطوان) : الفارس عبد السلام بناني سميرس يفوز بجائزة صاحب السمو الملكي ولي العهد الأمير مولاي الحسن،المحتسبة ضمن الجائزة الكبرى لكأس العالم', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/206546', 'summary': 'الدوري الملكي المغربي للقفز على الحواجز (مرحلة تطوان) : الفارس عبد السلام بناني سميرس يفوز بجائزة صاحب السمو الملكي ولي العهد الأمير مولاي الحسن،المحتسبة ضمن الجائزة الكبرى لكأس العالم.  فاز الفارس،عبد السلام بناني سميرس، اليوم الأحد بحلبة “ إيبيكا” بتطوان، بجائزة صاحب السمو الملكي ولي العهد الأمير مولاي الحسن، المحتسبة ضمن الجائزة الكبرى لكأس العالم 4 نجوم، في إطار منافسات المرحلة الأولى من الدورة الرابعة عشرة للدوري الملكي المغربي الدولي للقفز على الحواجز. وجاء تتويج الفارس عبد السلام بناني سميرس، حامل لقب', 'size': 2}, {'id': '386', 'title': 'الفارس عبد السلام بناني سميرس يفوز بجائزة ولي العهد الأمير مولاي الحسن', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/227348/', 'summary': 'الفارس عبد السلام بناني سميرس يفوز بجائزة ولي العهد الأمير مولاي الحسن. فاز الفارس، عبد السلام بناني سميرس، اليوم الأحد بحلبة “إيبيكا” بتطوان، بجائزة صاحب السمو الملكي ولي العهد الأمير مولاي الحسن، المحتسبة ضمن الجائزة الكبرى لكأس العالم 4 نجوم، في إطار منافسات المرحلة الأولى من الدورة الرابعة عشرة للدوري الملكي المغربي الدولي للقفز على الحواجز. وجاء تتويج الفارس عبد السلام بناني سميرس، حامل لقب بطولة المغرب،', 'size': 2}], 'main_title': 'الدوري الملكي المغربي للقفز على الحواجز (مرحلة تطوان) : الفارس عبد السلام بناني سميرس يفوز بجائزة صاحب السمو الملكي ولي العهد الأمير مولاي الحسن،المحتسبة ضمن الجائزة الكبرى لكأس العالم'}, {'community_id': '6', 'articles': [{'id': '294', 'title': 'بتعليمات سامية من جلالة الملك، أخنوش يترأس الوفد المغربي المشارك في الدورة الـ80 للجمعية العامة للأمم المتحدة', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/206541', 'summary': 'بتعليمات سامية من جلالة الملك، أخنوش يترأس الوفد المغربي المشارك في الدورة الـ80 للجمعية العامة للأمم المتحدة.  بتعليمات سامية من صاحب الجلالة الملك محمد السادس، يترأس السيد عزيز أخنوش، رئيس الحكومة، الوفد المغربي المشارك في أشغال الدورة الثمانين للجمعية العامة للأمم المتحدة، التي تنعقد بنيويورك. ويرافق السيد أخنوش خلال هذه الدورة، وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج، السيد ناصر بوريطة. وستتميز الدورة الثمانون للجمعية العامة للأمم المتحدة، التي تنعقد', 'size': 5}, {'id': '314', 'title': 'بتعليمات ملكية.. أخنوش يترأس الوفد المغربي المشارك في أشغال الجمعية العامة للأمم المتحدة', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a8%d8%aa%d8%b9%d9%84%d9%8a%d9%85%d8%a7%d8%aa-%d9%85%d9%84%d9%83%d9%8a%d8%a9-%d8%a3%d8%ae%d9%86%d9%88%d8%b4-%d9%8a%d8%aa%d8%b1%d8%a3%d8%b3-%d8%a7%d9%84%d9%88%d9%81%d8%af-%d8%a7%d9%84%d9%85%d8%ba/', 'summary': 'بتعليمات ملكية.. أخنوش يترأس الوفد المغربي المشارك في أشغال الجمعية العامة للأمم المتحدة. بتعليمات سامية من صاحب الجلالة الملك محمد السادس، يترأس السيد عزيز أخنوش، رئيس الحكومة، الوفد المغربي المشارك في أشغال الدورة الثمانين للجمعية العامة للأمم المتحدة، التي تنعقد بنيويورك. ويرافق السيد أخنوش خلال هذه الدورة، وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج، السيد ناصر بوريطة. وستتميز الدورة الثمانون للجمعية العامة للأمم المتحدة، التي تنعقد حول', 'size': 5}, {'id': '331', 'title': 'بتعليمات ملكية.. أخنوش يترأس الوفد المغربي في الدورة الـ80 للجمعية العامة للأمم المتحدة', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/324015/', 'summary': 'بتعليمات ملكية.. أخنوش يترأس الوفد المغربي في الدورة الـ80 للجمعية العامة للأمم المتحدة. بتعليمات سامية من صاحب الجلالة الملك محمد السادس، يترأس السيد عزيز أخنوش، رئيس الحكومة، الوفد المغربي المشارك في أشغال الدورة الثمانين للجمعية العامة للأمم المتحدة، التي تنعقد بنيويورك. ويرافق أخنوش خلال هذه الدورة، وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج، السيد ناصر بوريطة. وستتميز الدورة الثمانون للجمعية العامة للأمم المتحدة، التي تنعقد حول موضوع', 'size': 5}, {'id': '353', 'title': 'أخنوش يترأس الوفد المغربي المشارك في الدورة الـ80 للجمعية العامة للأمم المتحدة', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1101522.html', 'summary': 'أخنوش يترأس الوفد المغربي المشارك في الدورة الـ80 للجمعية العامة للأمم المتحدة. يترأس رئيس الحكومة، عزيز أخنوش، الوفد المغربي المشارك في أشغال الدورة الثمانين للجمعية العامة للأمم المتحدة، التي تنعقد بنيويورك، وذلك بتعليمات من الملك محمد السادس. ويرافق أخنوش خلال هذه الدورة، التي تنعقد يوم الثلاثاء 23 شتنبر، وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج، ناصر بوريطة. وستتميز الدورة الثمانون للجمعية العامة للأمم المتحدة، التي تنعقد ظهرت المقالة أخنوش يترأس الوفد المغربي المشارك في الدورة الـ80 للجمعية العامة للأمم المتحدة  .', 'size': 5}, {'id': '357', 'title': 'بتعليمات ملكية.. رئيس الحكومة يترأس الوفد المغربي في الدورة الثمانين للجمعية العامة للأمم المتحدة', 'source': 'rue20.com', 'link': 'https://rue20.com/938420.html', 'summary': 'بتعليمات ملكية.. رئيس الحكومة يترأس الوفد المغربي في الدورة الثمانين للجمعية العامة للأمم المتحدة.  . الرباط بتعليمات سامية من الملك محمد السادس، يترأس عزيز أخنوش، رئيس الحكومة، الوفد المغربي المشارك في أشغال الدورة الثمانين للجمعية العامة للأمم المتحدة، التي تنعقد بنيويورك. ويرافق أخنوش خلال هذه الدورة، وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج، ناصر بوريطة. وستتميز الدورة الثمانون للجمعية العامة للأمم المتحدة، التي تنعقد حول موضوع الخبر بتعليمات ملكية.. رئيس الحكومة يترأس الوفد المغربي في الدورة الثمانين للجمعية العامة للأمم المتحدة  .', 'size': 5}], 'main_title': 'بتعليمات سامية من جلالة الملك، أخنوش يترأس الوفد المغربي المشارك في الدورة الـ80 للجمعية العامة للأمم المتحدة'}, {'community_id': '10', 'articles': [{'id': '305', 'title': 'بعد إضعاف موقفه في سباق الكرة الذهبية..الإعلام الفرنسي يوجه سؤالا خبيثا لمدرب باريس سان جيرمان بخصوص حكيمي', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/sport/proplayers/413153.html', 'summary': 'بعد إضعاف موقفه في سباق الكرة الذهبية..الإعلام الفرنسي يوجه سؤالا خبيثا لمدرب باريس سان جيرمان بخصوص حكيمي. يواصل الإعلام الفرنسي إثارة الفتن حول قضية أشرف حكيمي مع فتاة تزعم تعرضها لاعتداء جنسي، في محاولة واضحة لربط الوضع القانوني بالمسار الرياضي للاعب، فقد', 'size': 2}, {'id': '326', 'title': 'هل سيغيب حكيمي عن حفل الكرة الذهبية؟', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/324022/', 'summary': 'هل سيغيب حكيمي عن حفل الكرة الذهبية؟. يترقب عشاق كرة القدم العالمية والمغربية على وجه الخصوص حفل الكرة الذهبية الذي يقام في باريس وسط اهتمام كبير بمسار الدولي المغربي أشرف حكيمي، غير أن مدافع باريس سان جيرمان قد يغيب عن هذا الموعد التاريخي بسبب تضارب في المواعيد فرضته الظروف المناخية في فرنسا. فبعدما كان مقرراً أن يلتقي فريقه باريس سان جيرمان بغريمه', 'size': 2}], 'main_title': 'بعد إضعاف موقفه في سباق الكرة الذهبية..الإعلام الفرنسي يوجه سؤالا خبيثا لمدرب باريس سان جيرمان بخصوص حكيمي'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    