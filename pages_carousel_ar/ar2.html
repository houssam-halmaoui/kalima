<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 10/08/2025 - 18h26</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '6', 'articles': [{'id': '22', 'title': 'حكيمي: احتضان المغرب لـ”الكان” حلم وهدفي تحقيق اللقب مع المنتخب المغربي', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-648243.html', 'summary': 'حكيمي: احتضان المغرب لـ”الكان” حلم وهدفي تحقيق اللقب مع المنتخب المغربي. هبة بريس - رياضة أكد الدولي المغربي أشرف حكيمي أن طموحه الأكبر هو التتويج رفقة “أسود الأطلس” بكأس أمم إفريقيا، التي ستستضيفها المملكة المغربية في دجنبر المقبل. وفي حديثه لقناة “كنال بلوس”، قال حكيمي: “المغرب ناداني منذ كنت في أكاديمية ريال مدريد، فهو بلد والديّ. أحرص على تلبية جميع الدعوات للمنتخب وأن أكون جاهزًا في كل حين عندما يحتاجني الفريق الوطني”. وأضاف: “حاليًا، أُصنَّف كثالث أو رابع أكثر لاعب مشاركة في المباريات الدولية. دخولي تاريخ اللاعبين الأكثر تمثيلًا للمنتخب شرف كبير، لكن أمامنا المزيد من المواجهات، وعلينا أن نبقى في كامل الاستعداد”. وعن استضافة المغرب لـ“الكان”، أوضح: “إنها لحظة حلم. سيكون أمرًا رائعًا الفوز باللقب على أرض الوطن، وهدفي أن أحقق إنجازات كبيرة مع المنتخب”. وختم قائلاً: “التتويج بالبطولة هو هدفي الرئيسي، وهي مسؤولية وضغط يجب التعامل معهما بذكاء، مع الالتزام بتحمل المسؤولية كاملة”.', 'size': 2}, {'id': '118', 'title': 'أشرف حكيمي: هدفي الفوز بكأس أمم إفريقيا مع المغرب على أرضنا', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a3%d8%b4%d8%b1%d9%81-%d8%ad%d9%83%d9%8a%d9%85%d9%8a-%d9%87%d8%af%d9%81%d9%8a-%d8%a7%d9%84%d9%81%d9%88%d8%b2-%d8%a8%d9%83%d8%a3%d8%b3-%d8%a3%d9%85%d9%85-%d8%a5%d9%81%d8%b1%d9%8a%d9%82%d9%8a%d8%a7/', 'summary': 'أشرف حكيمي: هدفي الفوز بكأس أمم إفريقيا مع المغرب على أرضنا. أكد الدولي المغربي أشرف حكيمي أن طموحه الأكبر هو التتويج رفقة “أسود الأطلس” بكأس أمم إفريقيا التي ستستضيفها المملكة المغربية في شهر دجنبر المقبل. وقال حكيمي في تصريح لقناة “كنال بلوس”: “المغرب ناداني منذ أن كنت في أكاديمية ريال مدريد، فهو بلد والديّ. أحرص دائمًا على تلبية دعوة المنتخب وأن أكون جاهزًا كلما احتاجني”. وأضاف:', 'size': 2}], 'main_title': 'حكيمي: احتضان المغرب لـ”الكان” حلم وهدفي تحقيق اللقب مع المنتخب المغربي'}, {'community_id': '1', 'articles': [{'id': '67', 'title': 'برقية تعزية ومواساة من جلالة الملك إلى أفراد أسرة المرحوم فضيلة الشيخ جمال الدين القادري بودشيش', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/204833', 'summary': 'برقية تعزية ومواساة من جلالة الملك إلى أفراد أسرة المرحوم فضيلة الشيخ جمال الدين القادري بودشيش.  بعث صاحب الجلالة الملك محمد السادس برقية تعزية ومواساة إلى أفراد أسرة المرحوم فضيلة الشيخ جمال الدين القادري بودشيش. وجاء في برقية جلالة الملك، “فقد تلقينا ببالغ التأثر وعميق الأسى، نعي المشمول بعفو الله ورضاه، المرحوم الشيخ جمال الدين القادري بودشيش، شيخ الطريقة القادرية البودشيشية، تقبله الله في عداد الصالحين من عباده، المنعم', 'size': 5}, {'id': '151', 'title': 'الملك معزيا أسرة بودشيش: كرس حياته لخدمة ديننا الإسلامي', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1091890.html', 'summary': 'الملك معزيا أسرة بودشيش: كرس حياته لخدمة ديننا الإسلامي. بعث الملك محمد السادس برقية تعزية ومواساة إلى أفراد أسرة الشيخ جمال الدين القادري بودشيش. وجاء في برقية الملك، “فقد تلقينا ببالغ التأثر وعميق الأسى، نعي المشمول بعفو الله ورضاه، المرحوم الشيخ جمال الدين القادري بودشيش، شيخ الطريقة القادرية البودشيشية، تقبله الله في عداد الصالحين من عباده، المنعم عليهم بالمغفرة والرضوان”. وقال الملك “وعلى إثر ظهرت المقالة الملك معزيا أسرة بودشيش: كرس حياته لخدمة ديننا الإسلامي  .', 'size': 5}, {'id': '178', 'title': 'برقية تعزية ومواساة من الملك إلى أفراد أسرة المرحوم بودشيش', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/472139.html', 'summary': 'برقية تعزية ومواساة من الملك إلى أفراد أسرة المرحوم بودشيش. و.م.ع بعث الملك محمد السادس برقية تعزية ومواساة إلى أفراد أسرة المرحوم الشيخ جمال الدين القادري بودشيش. وجاء في برقية الملك، “فقد تلقينا ببالغ التأثر وعميق الأسى، نعي المشمول بعفو الله ورضاه، المرحوم الشيخ جمال الدين القادري بودشيش، شيخ الطريقة القادرية البودشيشية، تقبله الله في عداد الصالحين من عباده، المنعم عليهم بالمغفرة والرضوان”. وقال الملك …', 'size': 5}, {'id': '208', 'title': 'برقية تعزية ومواساة من جلالة الملك إلى أسرة الشيخ جمال الدين القادري بودشيش', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/225773/', 'summary': 'برقية تعزية ومواساة من جلالة الملك إلى أسرة الشيخ جمال الدين القادري بودشيش. بعث صاحب الجلالة الملك محمد السادس برقية تعزية ومواساة إلى أفراد أسرة المرحوم فضيلة الشيخ جمال الدين القادري بودشيش. وجاء في برقية جلالة الملك، “فقد تلقينا ببالغ التأثر وعميق الأسى، نعي المشمول بعفو الله ورضاه، المرحوم الشيخ جمال الدين القادري بودشيش، شيخ الطريقة القادرية البودشيشية، تقبله الله في عداد الصالحين من عباده، المنعم عليهم بالمغفرة', 'size': 5}, {'id': '213', 'title': 'الملك محمد السادس يعزي في وفاة شيخ الطريقة القادرية اليودشيشية', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%85%d8%ad%d9%85%d8%af-%d8%a7%d9%84%d8%b3%d8%a7%d8%af%d8%b3-%d9%8a%d8%b9%d8%b2%d9%8a-%d9%81%d9%8a-%d9%88%d9%81%d8%a7%d8%a9-%d8%b4%d9%8a%d8%ae-%d8%a7%d9%84%d8%b7%d8%b1/', 'summary': 'الملك محمد السادس يعزي في وفاة شيخ الطريقة القادرية اليودشيشية. المساء اليوم – آل باط: بعث الملك محمد السادس برقية تعزية ومواساة إلى أفراد أسرة المرحوم الشيخ جمال الدين القادري بودشيش. وجاء في البرقية الملكية “فقد تلقينا ببالغ التأثر وعميق الأسى، نعي المشمول بعفو الله', 'size': 5}], 'main_title': 'برقية تعزية ومواساة من جلالة الملك إلى أفراد أسرة المرحوم فضيلة الشيخ جمال الدين القادري بودشيش'}, {'community_id': '2', 'articles': [{'id': '74', 'title': 'دوري أبطال إفريقيا .. نهضة بركان والجيش الملكي يتعرفان على خصميهما في الدور التمهيدي', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/sport/footmarocain/410786.html', 'summary': 'دوري أبطال إفريقيا .. نهضة بركان والجيش الملكي يتعرفان على خصميهما في الدور التمهيدي. يواجه فريق نهضة بركان نظيره أسكو دي كارا الطوغولي، فيما يلاقي الجيش الملكي ريال دي بانجول الغامبي، في الدور التمهيدي الأول لدوري أبطال إفريقيا لكرة', 'size': 2}, {'id': '169', 'title': 'نهضة بركان يدشن أول مشاركة في دوري أبطال أفريقيا بمواجهة منافس طوغولي', 'source': 'rue20.com', 'link': 'https://rue20.com/927446.html', 'summary': 'نهضة بركان يدشن أول مشاركة في دوري أبطال أفريقيا بمواجهة منافس طوغولي. . الرباط يواجه فريق نهضة بركان نظيره أسكو دي كارا الطوغولي، فيما يلاقي الجيش الملكي ريال دي بانجول الغامبي، في الدور التمهيدي الأول لدوري أبطال إفريقيا لكرة القدم 2025-2026، الذي جرت قرعته اليوم السبت بدار السلام في تنزانيا. وكان نهضة بركان، حامل لقب كأس الكونفدرالية الإفريقية، تأهل إلى هذه المسابقة بفوزه بلقب البطولة الوطنية الخبر نهضة بركان يدشن أول مشاركة في دوري أبطال أفريقيا بمواجهة منافس طوغولي  .', 'size': 2}], 'main_title': 'دوري أبطال إفريقيا .. نهضة بركان والجيش الملكي يتعرفان على خصميهما في الدور التمهيدي'}, {'community_id': '3', 'articles': [{'id': '114', 'title': 'المجتمع المغربي في خطر.. تراجع ملحوظ في نسب الزواج وعدد حالات الطلاق في ارتفاع مخيف', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/social/410829.html', 'summary': 'المجتمع المغربي في خطر.. تراجع ملحوظ في نسب الزواج وعدد حالات الطلاق في ارتفاع مخيف. يشهد المغرب في السنوات الأخيرة تحولات عميقة في بنية الأسرة، خاصة فيما يتعلق بمؤسسة الزواج التي فقدت كثيرًا من شعبيتها مقارنة بالعقود الماضية. فالأرقام الرسمية لوزارة', 'size': 2}, {'id': '150', 'title': 'تحقيق: أدوية باهظة وصناديق تنهار.. من يربح من مرض المغاربة؟', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1091704.html', 'summary': 'تحقيق: أدوية باهظة وصناديق تنهار.. من يربح من مرض المغاربة؟. هل تصدق.. أن هامش أرباح بعض الأدوية في المغرب يفوق 300% مقارنة بدول أخرى؟ قد تبدو هذه النسبة صادمة، لكنها تستند إلى معطيات موثقة وأرقام رسمية تُظهر أن سوق الدواء في المغرب لا يخضع فقط لقوانين العرض والطلب، بل تحكمه أيضا اعتبارات اقتصادية وتجارية تضع أرباح المختبرات فوق صحة المواطن. في صيدليات المغرب، لا يُقاس ظهرت المقالة تحقيق: أدوية باهظة وصناديق تنهار.. من يربح من مرض المغاربة؟  .', 'size': 2}], 'main_title': 'المجتمع المغربي في خطر.. تراجع ملحوظ في نسب الزواج وعدد حالات الطلاق في ارتفاع مخيف'}, {'community_id': '4', 'articles': [{'id': '116', 'title': 'تشمل أمرابط ولويز. مفاوضات بين فنربخشة ويوفنتوس لصفقة تبادلية', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%aa%d8%b4%d9%85%d9%84-%d8%a3%d9%85%d8%b1%d8%a7%d8%a8%d8%b7-%d9%88%d9%84%d9%88%d9%8a%d8%b2-%d9%85%d9%81%d8%a7%d9%88%d8%b6%d8%a7%d8%aa-%d8%a8%d9%8a%d9%86-%d9%81%d9%86%d8%b1%d8%a8%d8%ae%d8%b4%d8%a9/', 'summary': 'تشمل أمرابط ولويز. مفاوضات بين فنربخشة ويوفنتوس لصفقة تبادلية. بدأ نادي فنربخشة التركي محادثات مع يوفنتوس الإيطالي لإبرام صفقة تبادلية، ينتقل بموجبها الدولي المغربي سفيان أمرابط إلى الفريق الإيطالي، مقابل حصول النادي التركي على البرازيلي دوغلاس لويز، مع إضافة 10 ملايين يورو لصالح “البيانكونيري”. ووفق صحيفة “صباح” التركية، فإن المدرب الكرواتي إيغور تودور، المدير الفني ليوفنتوس، يضع أمرابط ضمن أولوياته في الميركاتو، وهو ما', 'size': 2}, {'id': '296', 'title': 'أمرابط على طاولة مفاوضات تبادلية بين فنربخشة ويوفنتوس', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/320671/', 'summary': 'أمرابط على طاولة مفاوضات تبادلية بين فنربخشة ويوفنتوس. دخل نادي فنربخشة التركي في مفاوضات متقدمة مع نادي يوفنتوس الإيطالي من أجل إبرام صفقة تبادلية كبرى، تتيح انتقال الدولي المغربي سفيان أمرابط إلى صفوف “السيدة العجوز”، مقابل انتقال البرازيلي دوغلاس لويز إلى فنربخشة، مع دفع مبلغ إضافي قدره 10 ملايين يورو لصالح الفريق الإيطالي. ووفق تقارير صحفية دولية، فإن مدرب يوفنتوس، الكرواتي إيغور', 'size': 2}], 'main_title': 'تشمل أمرابط ولويز. مفاوضات بين فنربخشة ويوفنتوس لصفقة تبادلية'}, {'community_id': '5', 'articles': [{'id': '117', 'title': 'حذروا من “إفلاس جماعي”..صيادلة فاس ينددون بمشروع تعديل تسعيرة الأدوية', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%ad%d8%b0%d8%b1%d9%88%d8%a7-%d9%85%d9%86-%d8%a5%d9%81%d9%84%d8%a7%d8%b3-%d8%ac%d9%85%d8%a7%d8%b9%d9%8a-%d8%b5%d9%8a%d8%a7%d8%af%d9%84%d8%a9-%d9%81%d8%a7%d8%b3-%d9%8a%d9%86%d8%af%d8%af%d9%88/', 'summary': 'حذروا من “إفلاس جماعي”..صيادلة فاس ينددون بمشروع تعديل تسعيرة الأدوية. نددت الغرفة النقابية لصيادلة فاس بتعديل تسعيرة الأدوية معتبرة أن مشروع القانون الخاص بهذا التعديل في صيغته الحالية قد يؤدي إلى تراجع معاملات الصيدليات بنسبة تتراوح بين 25 و30% في وقت تعرف فيه المهنة ارتفاعًا مستمرًا في كلفة التسيير والالتزامات الضريبية. وفي مراسلة وجهتها إلى رئيس الحكومة، أبرزت الغرفة النقابية أن “الحكومة تواصل مساعيها لتفعيل', 'size': 2}, {'id': '130', 'title': 'صيادلة فاس يحذرون من “زلزال” مهني', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/320651/', 'summary': 'صيادلة فاس يحذرون من “زلزال” مهني. دقت الغرفة النقابية لصيادلة فاس ناقوس الخطر إزاء الصيغة الحالية لمشروع المرسوم الحكومي المتعلق بمراجعة تسعيرة الأدوية. واعتبرت الغرفة أن النص يهدد استقرار القطاع ويعرضه لتراجع في المعاملات يتراوح، وفق تقديراتها، بين 25 و30%، في ظل ارتفاع متواصل لكلفة التسيير والالتزامات الضريبية. وأكدت الغرفة، في بيان، أن الصيدليات تمثل مكونا أساسيا في البنية الصحية', 'size': 2}], 'main_title': 'حذروا من “إفلاس جماعي”..صيادلة فاس ينددون بمشروع تعديل تسعيرة الأدوية'}, {'community_id': '8', 'articles': [{'id': '132', 'title': 'حكيمي: لم أحلم يوما بدخول سباق الكرة الذهبية', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/320641/', 'summary': 'حكيمي: لم أحلم يوما بدخول سباق الكرة الذهبية. أشعل النجم المغربي أشرف حكيمي، ظهير أيمن نادي باريس سان جيرمان الفرنسي، النقاش حول هوية المتوَّج المقبل بالكرة الذهبية، بعدما عبّر عن قناعته بأحقيته في الظفر بالجائزة الأرفع في عالم كرة القدم، عقب موسم وصفه المتابعون بالتاريخي على المستويين الفردي والجماعي. وقال حكيمي في حوار له لقناة “كنال بلوس” الفرنسية، إن إدراج اسمه ضمن دائرة', 'size': 2}, {'id': '361', 'title': 'حكيمي: هدفي تحقيق إنجازات كبيرة مع المنتخب', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%ad%d9%83%d9%8a%d9%85%d9%8a-%d9%87%d8%af%d9%81%d9%8a-%d8%aa%d8%ad%d9%82%d9%8a%d9%82-%d8%a5%d9%86%d8%ac%d8%a7%d8%b2%d8%a7%d8%aa-%d9%83%d8%a8%d9%8a%d8%b1%d8%a9-%d9%85%d8%b9-%d8%a7%d9%84%d9%85%d9%86/', 'summary': 'حكيمي: هدفي تحقيق إنجازات كبيرة مع المنتخب. المساء اليوم: أعرب النجم الدولي لنادي باريس سان جيرمان، أشرف حكيمي، عن فخره باللعب ضمن صفوف المنتخب الوطني المغربي في مختلف الاستحقاقات. وقال حكيمي، في حديث للقناة الفرنسية “كنال بلوس”، أمس السبت “استدعاني المغرب عندما', 'size': 2}], 'main_title': 'حكيمي: لم أحلم يوما بدخول سباق الكرة الذهبية'}, {'community_id': '11', 'articles': [{'id': '158', 'title': 'حالة الطقس: حرارة متواصلة مع رياح قوية', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%ad%d8%a7%d9%84%d8%a9-%d8%a7%d9%84%d8%b7%d9%82%d8%b3-%d8%ad%d8%b1%d8%a7%d8%b1%d8%a9-%d9%85%d8%aa%d9%88%d8%a7%d8%b5%d9%84%d8%a9-%d9%85%d8%b9-%d8%b1%d9%8a%d8%a7%d8%ad-%d9%82%d9%88%d9%8a%d8%a9/', 'summary': 'حالة الطقس: حرارة متواصلة مع رياح قوية. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليوم الأحد، أن يظل الطقس حارا إلى جد حار نسبيا بسهول تادلة، والرحامنة، والشياظمة، وعبدة، وداخل الشاوية، والسايس، ووالماس، والجنوب الشرقي والأقاليم الصحراوية للمملكة. ويرتقب تشكل سحب منخفضة نسبيا كثيفة مصحوبة بكتل ضبابية أو بأمطار جد خفيفة محليا، فوق المناطق الساحلية الشمالية والوسطى.وستكون السماء غائمة جزئيا بمرتفعات الأطلسين الكبير  حالة الطقس: حرارة متواصلة مع رياح قوية     .', 'size': 2}, {'id': '182', 'title': 'طقس الأحد.. أجواء حارة وأمطار خفيفة', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/472124.html', 'summary': 'طقس الأحد.. أجواء حارة وأمطار خفيفة. متابعة تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليوم غد الأحد، أن يظل الطقس حارا إلى جد حار نسبيا بسهول تادلة، والرحامنة، والشياظمة، وعبدة، وداخل الشاوية، والسايس، ووالماس، والجنوب الشرقي والأقاليم الصحراوية للمملكة. ويرتقب تشكل سحب منخفضة نسبيا كثيفة مصحوبة بكتل ضبابية أو بأمطار جد خفيفة محليا، فوق المناطق الساحلية الشمالية والوسطى. وستكون السماء غائمة جزئيا …', 'size': 2}, {'id': '223', 'title': 'توقعات أحوال الطقس اليوم الأحد', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%aa%d9%88%d9%82%d8%b9%d8%a7%d8%aa-%d8%a3%d8%ad%d9%88%d8%a7%d9%84-%d8%a7%d9%84%d8%b7%d9%82%d8%b3-%d8%a7%d9%84%d9%8a%d9%88%d9%85-%d8%a7%d9%84%d8%a3%d8%ad%d8%af-43/', 'summary': 'توقعات أحوال الطقس اليوم الأحد. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليومه الأحد، أن يظل الطقس حارا إلى جد حار نسبيا بسهول تادلة، والرحامنة، والشياظمة، وعبدة، وداخل الشاوية، والسايس، ووالماس، والجنوب الشرقي والأقاليم الصحراوية للمملكة. ويرتقب تشكل سحب منخفضة نسبيا كثيفة مصحوبة بكتل ضبابية أو بأمطار جد خفيفة محليا، فوق المناطق الساحلية الشمالية والوسطى. وستكون السماء غائمة جزئيا …  توقعات أحوال الطقس اليوم الأحد     .', 'size': 3}], 'main_title': 'توقعات أحوال الطقس اليوم الأحد'}, {'community_id': '0', 'articles': [{'id': '190', 'title': 'ضمنهم امرأتين.. الإيقاع بعصابة كوكايين مسلحة ضواحي وزان', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d8%b6%d9%85%d9%86%d9%87%d9%85-%d8%a7%d9%85%d8%b1%d8%a3%d8%aa%d9%8a%d9%86-%d8%a7%d9%84%d8%a5%d9%8a%d9%82%d8%a7%d8%b9-%d8%a8%d8%b9%d8%b5%d8%a7%d8%a8%d8%a9-%d9%83%d9%88%d9%83%d8%a7%d9%8a%d9%8a%d9%86/', 'summary': 'ضمنهم امرأتين.. الإيقاع بعصابة كوكايين مسلحة ضواحي وزان. ضمنهم امرأتين.. الإيقاع بعصابة كوكايين مسلحة ضواحي وزان  – متابعات أوقفت عناصر الشرطة القضائية بولاية أمن تطوان، بتنسيق مع مصالح المديرية العامة لمراقبة التراب الوطني، في الساعات الأولى...  ضمنهم امرأتين.. الإيقاع بعصابة كوكايين مسلحة ضواحي وزان     .', 'size': 2}, {'id': '316', 'title': 'واجهوا الأمن بالرصاص.. تفكيك شبكة لترويج الكوكايين ضواحي وزان', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1091984.html', 'summary': 'واجهوا الأمن بالرصاص.. تفكيك شبكة لترويج الكوكايين ضواحي وزان. تمكنت عناصر الشرطة القضائية بولاية أمن تطوان، بتنسيق مع المديرية العامة لمراقبة التراب الوطني، وبدعم من مصالح الدرك الملكي، أمس السبت 9 غشت، من تفكيك شبكة إجرامية تنشط في ترويج مخدر الكوكايين، وذلك خلال عملية أمنية ضواحي مدينة وزان أسفرت عن توقيف ستة أشخاص بينهم سيدتان. وأوضح مصدر أمني أن العملية جرت على مرحلتين، حيث ظهرت المقالة واجهوا الأمن بالرصاص.. تفكيك شبكة لترويج الكوكايين ضواحي وزان  .', 'size': 2}], 'main_title': 'ضمنهم امرأتين.. الإيقاع بعصابة كوكايين مسلحة ضواحي وزان'}, {'community_id': '7', 'articles': [{'id': '236', 'title': 'الأمن الوطني يعين مسؤولين بالبيضاء', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d8%a7%d9%84%d8%a3%d9%85%d9%86-%d8%a7%d9%84%d9%88%d8%b7%d9%86%d9%8a-%d9%8a%d8%b9%d9%8a%d9%86-%d9%85%d8%b3%d8%a4%d9%88%d9%84%d9%8a%d9%86-%d8%a8%d8%a7%d9%84%d8%a8%d9%8a%d8%b6%d8%a7%d8%a1-1607041.html', 'summary': 'الأمن الوطني يعين مسؤولين بالبيضاء. قامت المديرية العامة للأمن الوطني، اليوم الأحد، بسلسلة تعيينات جديدة شملت مناصب قيادة الهيئات الحضرية بمجموعة من مناطق الأمن التابعة لولاية أمن الدار البيضاء، وذلك في إطار حركية داخلية تروم إضفاء ديناميكية جديدة على عمل شرطة الزي الرسمي. وهذه التعيينات، التي أشر عليها المدير العام للأمن الوطني عبد اللطيف حموشي، همّت مناصب رؤساء الهيئات الحضرية  الأمن الوطني يعين مسؤولين بالبيضاء     - هسبريس جريدة إلكترونية مغربية .', 'size': 3}, {'id': '290', 'title': 'تهمُّ ولاية أمن الدار البيضاء.. حموشي يؤشر على تعيينات تُعزز فعالية شرطة الزي الرسمي', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%aa%d9%87%d9%85%d9%91%d9%8f-%d9%88%d9%84%d8%a7%d9%8a%d8%a9-%d8%a3%d9%85%d9%86-%d8%a7%d9%84%d8%af%d8%a7%d8%b1-%d8%a7%d9%84%d8%a8%d9%8a%d8%b6%d8%a7%d8%a1-%d8%ad%d9%85%d9%88%d8%b4%d9%8a-%d9%8a%d8%a4/', 'summary': 'تهمُّ ولاية أمن الدار البيضاء.. حموشي يؤشر على تعيينات تُعزز فعالية شرطة الزي الرسمي. أعلنت المديرية العامة للأمن الوطني، اليوم الأحد (10 غشت)، عن قائمة جديدة تضمنت عدة تعيينات في مناصب قيادة الهيئات الحضرية بمجموعة من مناطق الأمن التابعة لولاية أمن الدار البيضاء. وشملت هذه التعيينات الجديدة التي أشر عليها المدير العام للأمن الوطني عبد اللطيف حموشي، إجراء حركية داخلية بين الأطر الأمنية التي تنتمي إلى شرطة الزي الرسمي،', 'size': 4}, {'id': '320', 'title': 'تغييرات واسعة تمس رؤساء الشرطة الحضرية في الدار البيضاء', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%aa%d8%ba%d9%8a%d9%8a%d8%b1%d8%a7%d8%aa-%d9%88%d8%a7%d8%b3%d8%b9%d8%a9-%d8%a8%d9%8a%d9%86-%d8%b6%d8%a8%d8%a7%d8%b7-%d8%a7%d9%84%d8%b4%d8%b1%d8%b7%d8%a9-%d8%a7%d9%84%d8%ad%d8%b6%d8%b1%d9%8a%d8%a9/', 'summary': 'تغييرات واسعة تمس رؤساء الشرطة الحضرية في الدار البيضاء. أعلنت المديرية العامة للأمن الوطني، الأحد، عن قائمة جديدة تضمنت عدة تعيينات في مناصب قيادة الهيئات الحضرية بمجموعة من مناطق الأمن التابعة لولاية أمن الدار البيضاء. وقد شملت هذه التعيينات الجديدة التي أشر عليها المدير العام للأمن الوطني عبد اللطيف حموشي، إجراء حركية داخلية بين الأطر الأمنية التي تنتمي إلى شرطة الزي الرسمي، شملت رؤساء  تغييرات واسعة تمس رؤساء الشرطة الحضرية في الدار البيضاء     .', 'size': 3}, {'id': '356', 'title': 'السيد حموشي يُسند مناصب مهمة لمسؤولين جدد بمدينة الدار البيضاء', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/225786/', 'summary': 'السيد حموشي يُسند مناصب مهمة لمسؤولين جدد بمدينة الدار البيضاء. أعلنت المديرية العامة للأمن الوطني، اليوم الأحد 10 غشت الجاري، عن قائمة جديدة تضمنت عدة تعيينات في مناصب قيادة الهيئات الحضرية بمجموعة من مناطق الأمن التابعة لولاية أمن الدار البيضاء. وقد شملت هذه التعيينات الجديدة التي أشر عليها المدير العام للأمن الوطني عبد اللطيف حموشي، إجراء حركية داخلية بين الأطر الأمنية التي تنتمي إلى شرطة', 'size': 4}], 'main_title': 'تهمُّ ولاية أمن الدار البيضاء.. حموشي يؤشر على تعيينات تُعزز فعالية شرطة الزي الرسمي'}, {'community_id': '10', 'articles': [{'id': '250', 'title': 'توقيف شاب هولندي بمدينة طنجة بموجب أمر دولي صادر عن بلجيكا', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-648379.html', 'summary': 'توقيف شاب هولندي بمدينة طنجة بموجب أمر دولي صادر عن بلجيكا. هبة بريس - طنجة تمكنت مصالح الشرطة ب ولاية أمن طنجة ، اليوم الأحد 10 غشت، من توقيف مواطن هولندي يبلغ من العمر 23 عامًا، صادر في حقه أمر دولي بالإيقاف من السلطات القضائية البلجيكية. جاء التوقيف في أحد أحياء طنجة، حيث أكدت عملية التنقيط عبر قاعدة بيانات المنظمة الدولية للشرطة الجنائية "أنتربول" أن المشتبه فيه مبحوث عنه دوليًا للاشتباه في تورطه ضمن عصابة إجرامية متخصصة في سرقة تحت التهديد باستعمال العنف، بالإضافة إلى اختطاف طفل رضيع. وتم وضع المشتبه فيه تحت تدبير الحراسة النظرية رهن مسطرة التسليم، مع إشعار السلطات البلجيكية المختصة تمهيدًا لإرسال ملف التسليم. ويأتي هذا التوقيف في إطار التعاون الدولي الأمني المستمر وجهود المصالح الأمنية المغربية لملاحقة الأشخاص المطلوبين دوليًا في قضايا الجريمة العابرة للحدود.', 'size': 2}, {'id': '322', 'title': 'توقيف هولندي في طنجة مطلوب على خلفية سرقات في بلجيكا', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%aa%d9%88%d9%82%d9%8a%d9%81-%d9%87%d9%88%d9%84%d9%86%d8%af%d9%8a-%d9%81%d9%8a-%d8%b7%d9%86%d8%ac%d8%a9-%d9%85%d8%b7%d9%84%d9%88%d8%a8-%d8%b9%d9%84%d9%89-%d8%ae%d9%84%d9%81%d9%8a%d8%a9-%d8%b3%d8%b1/', 'summary': 'توقيف هولندي في طنجة مطلوب على خلفية سرقات في بلجيكا. تمكنت عناصر الشرطة بولاية أمن طنجة، الأحد، من توقيف مواطن هولندي يبلغ من العمر 23 سنة، يشكل موضوع أمر دولي بإلقاء القبض صادر عن السلطات القضائية البلجيكية. وبحسب مصدر أمني، فقد جرى توقيف المشتبه فيه بأحد أحياء مدينة طنجة، حيث أظهرت عملية تنقيطه بقاعدة بيانات المنظمة الدولية للشرطة الجنائية "أنتربول" أنه مبحوث عنه على الصعيد  توقيف هولندي في طنجة مطلوب على خلفية سرقات في بلجيكا     .', 'size': 2}, {'id': '355', 'title': 'توقيف مواطن هولندي عضو في عصابة إجرامية متورطة في سرقات بالعنف واختطاف رضيع', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/225788/', 'summary': 'توقيف مواطن هولندي عضو في عصابة إجرامية متورطة في سرقات بالعنف واختطاف رضيع. تمكنت عناصر الشرطة بولاية أمن طنجة، اليوم الأحد 10 غشت الجاري، من توقيف مواطن هولندي يبلغ من العمر 23 سنة، يشكل موضوع أمر دولي بإلقاء القبض صادر عن السلطات القضائية البلجيكية. وقد جرى توقيف المشتبه فيه بأحد أحياء مدينة طنجة، حيث أظهرت عملية تنقيطه بقاعدة بيانات المنظمة الدولية للشرطة الجنائية “أنتربول” أنه مبحوث عنه على', 'size': 3}], 'main_title': 'توقيف مواطن هولندي عضو في عصابة إجرامية متورطة في سرقات بالعنف واختطاف رضيع'}, {'community_id': '12', 'articles': [{'id': '309', 'title': 'الرميد يستنكر تصريحات ابتسام لشكر ويطالب بمتابعتها بتهمة “الإساءة للدين الإسلامي”', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1092012.html', 'summary': 'الرميد يستنكر تصريحات ابتسام لشكر ويطالب بمتابعتها بتهمة “الإساءة للدين الإسلامي”. دعا وزير العدل الأسبق مصطفى الرميد إلى مساءلة ابتسام لشكر، إذا صحت التصريحات المنسوبة إليها، معتبرا أنها تشكل “عملا مدبرا وإساءة متعمدة للذات الإلهية”. جاء ذلك في تدوينة نشرها على صفحته الرسمية، مشددا على ضرورة تطبيق القانون لحماية المقدسات الدينية. وأكد الرميد أن ما نسب إلى لشكر، في حال ثبوته، لا يندرج ضمن حرية الفكر ظهرت المقالة الرميد يستنكر تصريحات ابتسام لشكر ويطالب بمتابعتها بتهمة “الإساءة للدين الإسلامي”  .', 'size': 2}, {'id': '323', 'title': 'الرميد يطالب بالتحقيق مع ابتسام لشكر بسبب «إساءة متعمدة» للذات الإلهية', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a7%d9%84%d8%b1%d9%85%d9%8a%d8%af-%d9%8a%d8%b7%d8%a7%d9%84%d8%a8-%d8%a8%d8%a7%d9%84%d8%aa%d8%ad%d9%82%d9%8a%d9%82-%d9%85%d8%b9-%d8%a7%d8%a8%d8%aa%d8%b3%d8%a7%d9%85-%d9%84%d8%b4%d9%83%d8%b1-%d8%a8/', 'summary': 'الرميد يطالب بالتحقيق مع ابتسام لشكر بسبب «إساءة متعمدة» للذات الإلهية. أثارت تدوينات جديدة للناشطة المغربية ابتسام لشكر، المؤسسة المشاركة لحركة "مالي" المدافعة عن الحريات الفردية، جدلا واسعا على مواقع التواصل الاجتماعي وفي الأوساط السياسية والحقوقية، بعد نشرها مضامين اعتُبرت "مسيئة للذات الإلهية" و"مستفزة لمشاعر المسلمين"، وهو ما دفع الوزير الأسبق في العدل مصطفى الرميد إلى المطالبة بفتح تحقيق قضائي في الموضوع، بناءً على مقتضيات القانون  الرميد يطالب بالتحقيق مع ابتسام لشكر بسبب «إساءة متعمدة» للذات الإلهية     .', 'size': 2}], 'main_title': 'الرميد يستنكر تصريحات ابتسام لشكر ويطالب بمتابعتها بتهمة “الإساءة للدين الإسلامي”'}, {'community_id': '9', 'articles': [{'id': '314', 'title': 'حكيمي: اتهامي زورا أمر فظيع.. وأستحق الكرة الذهبية أكثر من أي مهاجم', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1091943.html', 'summary': 'حكيمي: اتهامي زورا أمر فظيع.. وأستحق الكرة الذهبية أكثر من أي مهاجم. قال أشرف حكيمي، لاعب باريس سان جيرمان، إنه واثق من براءته إزاء الاتهامات الموجهة إليه بـ”الاعتداء الجنسي”، مُعتبرا أن الحقيقة ستظهر في المستقبل، دون أن تنال هذه القضية منه، رغم الزخم الإعلامي الذي اكتسبته. وأوضح الدولي المغربي، في حوار مع قناة “كانال بلس” الفرنسية، بالقول: “إنني هادئ، اتهامي زورا أمر فظيع، وغير عادل، لا أتمنى ظهرت المقالة حكيمي: اتهامي زورا أمر فظيع.. وأستحق الكرة الذهبية أكثر من أي مهاجم  .', 'size': 2}, {'id': '334', 'title': 'حكيمي: أستحق الكرة الذهبية والحقيقة ستظهر في اتهامي بالإغتصاب (فيديو)', 'source': 'rue20.com', 'link': 'https://rue20.com/927502.html', 'summary': 'حكيمي: أستحق الكرة الذهبية والحقيقة ستظهر في اتهامي بالإغتصاب (فيديو).  / متابعة أكد الدولي المغربي ونجم نادي باريس سان جيرمان الفرنسي، أشرف حكيمي، أن الاتهام الذي وجه إليه بمحاولة اغتصاب إحدى الفتيات ليس صحيحا، مشيرا إلى ثقته في براءته، كما عبر عن استحقاقه للكرة الذهبية في ظل مشواره الناجح خلال الموسم الماضي. وفي حوار مع قناة “كانال بلس”، قال حكيمي: “أنا هادئ، هذا الخبر حكيمي: أستحق الكرة الذهبية والحقيقة ستظهر في اتهامي بالإغتصاب (فيديو)  .', 'size': 2}], 'main_title': 'حكيمي: اتهامي زورا أمر فظيع.. وأستحق الكرة الذهبية أكثر من أي مهاجم'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    