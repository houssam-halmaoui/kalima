<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 21/07/2025 - 06h30</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '3', 'articles': [{'id': '1', 'title': 'حملات الإغاثة المغربية تستمر بغزة', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d8%ad%d9%85%d9%84%d8%a7%d8%aa-%d8%a7%d9%84%d8%a5%d8%ba%d8%a7%d8%ab%d8%a9-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8%d9%8a%d8%a9-%d8%aa%d8%b3%d8%aa%d9%85%d8%b1-%d8%a8%d8%ba%d8%b2%d8%a9-1596373.html', 'summary': 'حملات الإغاثة المغربية تستمر بغزة. نفذت وكالة بيت مال القدس الشريف، أمس السبت بمخيم البريج شرق غزة، المرحلة الثالثة من حملة الإغاثة الإنسانية المغربية الموجهة للعائلات النازحة الأكثر احتياجا في القطاع، بتمويل من الجمعية المغربية لدعم الإعمار في فلسطين. ووصلت الفرق الميدانية إلى المخيم، رغم الظروف الأمنية الصعبة، لتوصيل المساعدات، يدا بيد، إلى 500 عائلة مستفيدة؛ لتجنيب أفرادها مخاطر التنقل  حملات الإغاثة المغربية تستمر بغزة     - هسبريس جريدة إلكترونية مغربية .', 'size': 2}, {'id': '113', 'title': 'المغرب يواصل إغاثة ساكنة غزة', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/409647.html', 'summary': 'المغرب يواصل إغاثة ساكنة غزة. نفذت وكالة بيت مال القدس الشريف أمس السبت بمخيم البريج شرق غزة المرحلة الثالثة من حملة الإغاثة الإنسانية المغربية الموجهة للعائلات النازحة الأكثر احتياجا في', 'size': 3}, {'id': '157', 'title': 'غزة.. تنفيذ المرحلة الثالثة من حملات الإغاثة المغربية', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%ba%d8%b2%d8%a9-%d8%aa%d9%86%d9%81%d9%8a%d8%b0-%d8%a7%d9%84%d9%85%d8%b1%d8%ad%d9%84%d8%a9-%d8%a7%d9%84%d8%ab%d8%a7%d9%84%d8%ab%d8%a9-%d9%85%d9%86-%d8%ad%d9%85%d9%84%d8%a7%d8%aa-%d8%a7%d9%84%d8%a5/', 'summary': 'غزة.. تنفيذ المرحلة الثالثة من حملات الإغاثة المغربية. نفذت وكالة بيت مال القدس الشريف، أمس السبت، بمخيم البريج شرق غزة المرحلة الثالثة من حملة الإغاثة الإنسانية المغربية الموجهة للعائلات النازحة الأكثر احتياجا في القطاع، بتمويل من الجمعية المغربية لدعم الإعمار في فلسطين. ووصلت الفرق الميدانية إلى المخيم، رغم الظروف الأمنية الصعبة، لتوصيل المساعدات، يدا بيد، إلى 500 عائلة مستفيدة، لتجنيب أفرادها مخاطر التنقل  غزة.. تنفيذ المرحلة الثالثة من حملات الإغاثة المغربية     .', 'size': 4}, {'id': '384', 'title': 'تنفيذ المرحلة الثالثة من حملات الإغاثة المغربية بقطاع غزة', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d8%aa%d9%86%d9%81%d9%8a%d8%b0-%d8%a7%d9%84%d9%85%d8%b1%d8%ad%d9%84%d8%a9-%d8%a7%d9%84%d8%ab%d8%a7%d9%84%d8%ab%d8%a9-%d9%85%d9%86-%d8%ad%d9%85%d9%84%d8%a7%d8%aa-%d8%a7%d9%84%d8%a5%d8%ba%d8%a7%d8%ab/', 'summary': 'تنفيذ المرحلة الثالثة من حملات الإغاثة المغربية بقطاع غزة. نفذت وكالة بيت مال القدس الشريف أمس السبت بمخيم البريج شرق غزة المرحلة الثالثة من حملة الإغاثة الإنسانية المغربية الموجهة للعائلات النازحة الأكثر احتياجا  تنفيذ المرحلة الثالثة من حملات الإغاثة المغربية بقطاع غزة     .', 'size': 3}], 'main_title': 'غزة.. تنفيذ المرحلة الثالثة من حملات الإغاثة المغربية'}, {'community_id': '10', 'articles': [{'id': '85', 'title': 'زلزالان شديدان قبالة أقصى الشرق الروسي وتحذير من تسونامي', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/world/409615.html', 'summary': 'زلزالان شديدان قبالة أقصى الشرق الروسي وتحذير من تسونامي. وقع زلزالان بقوة 6,7 و7,4 درجات، اليوم الأحد، قبالة سواحل كامتشاتكا في أقصى الشرق الروسي، ما أدى إلى إصدار إنذار بوقوع تسونامي، بحسب هيئة المسح', 'size': 2}, {'id': '155', 'title': 'زلزالان عنيفان يهزان “كامتشاتكا” الروسية وإنذار تسونامي يرتفع', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1086727.html', 'summary': 'زلزالان عنيفان يهزان “كامتشاتكا” الروسية وإنذار تسونامي يرتفع. وقع زلزالان بقوة 6,7 و7,4 درجات، اليوم الأحد، ظهرت المقالة زلزالان عنيفان يهزان “كامتشاتكا” الروسية وإنذار تسونامي يرتفع  .', 'size': 3}, {'id': '180', 'title': 'زلزالان قويان يضربان ساحل كامتشاتكا في روسيا وتحذيرات من وقوع تسونامي', 'source': 'machahid24.com', 'link': 'https://machahid24.com/international/470052.html', 'summary': 'زلزالان قويان يضربان ساحل كامتشاتكا في روسيا وتحذيرات من وقوع تسونامي. ضرب زلزالان قويان اليوم الأحد، ساحل جزيرة كامتشاتكا الروسية.', 'size': 2}], 'main_title': 'زلزالان عنيفان يهزان “كامتشاتكا” الروسية وإنذار تسونامي يرتفع'}, {'community_id': '9', 'articles': [{'id': '106', 'title': '"بونو" يتجول في شوارع الدار البيضاء ببساطة ويكسر بروتوكولات النجومية', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/sport/proplayers/409639.html', 'summary': '"بونو" يتجول في شوارع الدار البيضاء ببساطة ويكسر بروتوكولات النجومية. ظهر الدولي المغربي ياسين بونو، حارس مرمى نادي الهلال السعودي، وهو يتجول في أحد شوارع مدينة الدار البيضاء في مشهد يبتعد تمامًا عن الأضواء والبروتوكولات', 'size': 2}, {'id': '393', 'title': 'مشهد عفوي يُشعل مواقع التواصل.. ياسين بونو يتجول ليلاً في البيضاء بدراجة كهربائية (فيديو)', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d9%85%d8%b4%d9%87%d8%af-%d8%b9%d9%81%d9%88%d9%8a-%d9%8a%d9%8f%d8%b4%d8%b9%d9%84-%d9%85%d9%88%d8%a7%d9%82%d8%b9-%d8%a7%d9%84%d8%aa%d9%88%d8%a7%d8%b5%d9%84-%d9%8a%d8%a7%d8%b3%d9%8a%d9%86-%d8%a8%d9%88/', 'summary': 'مشهد عفوي يُشعل مواقع التواصل.. ياسين بونو يتجول ليلاً في البيضاء بدراجة كهربائية (فيديو). تفاعل واسع شهدته منصات التواصل الاجتماعي مع مقطع فيديو يظهر حارس مرمى المنتخب المغربي ونادي الهلال السعودي، ياسين بونو، وهو يتجول ليلاً على دراجة كهربائية في أحد شوارع مدينة الدار البيضاء. ووثق أحد المارة لحظة مرور بونو، الذي بدا مرتاحاً ودون مرافقة أمنية، في مشهد لقي إشادة كبيرة من النشطاء الذين اعتبروا سلوكه …  مشهد عفوي يُشعل مواقع التواصل.. ياسين بونو يتجول ليلاً في البيضاء بدراجة كهربائية (فيديو)     .', 'size': 2}], 'main_title': '"بونو" يتجول في شوارع الدار البيضاء ببساطة ويكسر بروتوكولات النجومية'}, {'community_id': '4', 'articles': [{'id': '117', 'title': 'يُفضّل العروض الخليجية.. حكيم زياش يرفض اللعب في البرازيل', 'source': 'kifache.com', 'link': 'https://kifache.com/%d9%8a%d9%8f%d9%81%d8%b6%d9%91%d9%84-%d8%a7%d9%84%d8%b9%d8%b1%d9%88%d8%b6-%d8%a7%d9%84%d8%ae%d9%84%d9%8a%d8%ac%d9%8a%d8%a9-%d8%ad%d9%83%d9%8a%d9%85-%d8%b2%d9%8a%d8%a7%d8%b4-%d9%8a%d8%b1%d9%81%d8%b6/', 'summary': 'يُفضّل العروض الخليجية.. حكيم زياش يرفض اللعب في البرازيل. أثار النجم المغربي حكيم زياش موجة من التفاعل في الأوساط الكروية البرازيلية، بعد تداول أنباء عن اهتمام نادي بوتافوغو بالتعاقد معه خلال فترة الانتقالات الصيفية الحالية، خاصة بعد نهاية عقده مع نادي الدحيل القطري، ما جعله متاحًا في صفقة انتقال حر. وبحسب تقارير محلية، دخل نادي بوتافوغو في اتصالات أولية مع ممثلي زياش لاستكشاف إمكانية', 'size': 2}, {'id': '321', 'title': 'زياش يشعل اهتمام البرازيل', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/318844/', 'summary': 'زياش يشعل اهتمام البرازيل. أصبح اسم الدولي المغربي حكيم زياش في صدارة اهتمام وسائل الإعلام والجماهير البرازيلية خلال الأيام الأخيرة، بعد أن كشفت تقارير عن دخول نادي بوتافوغو في مفاوضات أولية لمحاولة التعاقد معه خلال فترة الانتقالات الصيفية الجارية. وارتبط اسم النجم المغربي بالفريق البرازيلي بعد نهاية عقده مع نادي الدحيل القطري، ما يجعله صفقة انتقال حر متاحة للتفاوض', 'size': 2}], 'main_title': 'يُفضّل العروض الخليجية.. حكيم زياش يرفض اللعب في البرازيل'}, {'community_id': '6', 'articles': [{'id': '118', 'title': 'رواندا.. علماء أفارقة يدعون  إلى الاستلهام من خطب ورسائل جلالة الملك لترسيخ قيم السلم والتعايش المشترك', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%b1%d9%88%d8%a7%d9%86%d8%af%d8%a7-%d8%b9%d9%84%d9%85%d8%a7%d8%a1-%d8%a3%d9%81%d8%a7%d8%b1%d9%82%d8%a9-%d9%8a%d8%af%d8%b9%d9%88%d9%86-%d8%a5%d9%84%d9%89-%d8%a7%d9%84%d8%a7%d8%b3%d8%aa%d9%84%d9%87/', 'summary': 'رواندا.. علماء أفارقة يدعون إلى الاستلهام من خطب ورسائل جلالة الملك لترسيخ قيم السلم والتعايش المشترك. أوصى المشاركون في ندوة علمية دولية نظمتها مؤسسة محمد السادس للعلماء الأفارقة بتعاون مع المجلس الأعلى للشؤون الإسلامية برواندا، أمس السبت (19 يوليوز) بكيغالي، بالاستلهام من خطب ورسائل صاحب الجلالة الملك محمد السادس، أمير المؤمنين، لترسيخ قيم السلم والتعايش المشترك بإفريقيا. ودعوا، في البيان الختامي لهذه الندوة، إلى “اتخاذ توجيهات أمير المؤمنين صاحب الجلالة الملك', 'size': 2}, {'id': '125', 'title': 'الدعوة بكيغالي إلى الاستلهام من خطب ورسائل جلالة الملك لترسيخ قيم السلم والتعايش المشترك بإفريقيا', 'source': 'assabah.ma', 'link': 'https://assabah.ma/860475.html', 'summary': 'الدعوة بكيغالي إلى الاستلهام من خطب ورسائل جلالة الملك لترسيخ قيم السلم والتعايش المشترك بإفريقيا. أوصى المشاركون في ندوة علمية دولية نظمتها مؤسسة محمد السادس للعلماء الأفارقة بتعاون مع المجلس الأعلى للشؤون الإسلامية برواندا، اليوم السبت بكيغالي، بالاستلهام من خطب ورسائل صاحب الجلالة الملك محمد السادس، أمير المؤمنين، لترسيخ قيم السلم والتعايش المشترك بإفريقيا. ودعوا، في البيان الختامي لهذه الندوة، إلى “اتخاذأكمل القراءة » المقالة الدعوة بكيغالي إلى الاستلهام من خطب ورسائل جلالة الملك لترسيخ قيم السلم والتعايش المشترك بإفريقيا  .', 'size': 2}], 'main_title': 'رواندا.. علماء أفارقة يدعون  إلى الاستلهام من خطب ورسائل جلالة الملك لترسيخ قيم السلم والتعايش المشترك'}, {'community_id': '5', 'articles': [{'id': '126', 'title': 'خبير سياسي فرنسي: بفضل الملك أصبح المغرب بلدا لا غنى عنه على الساحة الدولية', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/318814/', 'summary': 'خبير سياسي فرنسي: بفضل الملك أصبح المغرب بلدا لا غنى عنه على الساحة الدولية. قال الخبير السياسي الفرنسي برايس سوكول، اليوم الأحد، خلال مناظرة بثتها قناة “سي نيوز” الإخبارية، إن “المغرب بفضل الملك محمد السادس أصبح بلدا متقدما على الصعيد الداخلي وفاعلا لا غنى عنه في مجال الدبلوماسية على الساحة الدولية”. وأكد الخبير السياسي الفرنسي أن المغرب، باعتباره مُحاورا مميزا لجميع البلدان، “أصبح في غضون سنوات قليلة قوة إقليمية', 'size': 2}, {'id': '340', 'title': 'خبير فرنسي: المغرب أصبح قوة إقليمية لا غنى عنها بفضل الملك محمد السادس', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-581207.html', 'summary': 'خبير فرنسي: المغرب أصبح قوة إقليمية لا غنى عنها بفضل الملك محمد السادس. قال الخبير السياسي الفرنسي برايس سوكول، اليوم الأحد، خلال مناظرة بثتها قناة “سي نيوز” الإخبارية، إن “المغرب بفضل صاحب الجلالة الملك محمد السادس أصبح بلدا متقدما على الصعيد الداخلي وفاعلا لا غنى عنه في مجال الدبلوماسية على الساحة الدولية”. وأكد الخبير السياسي الفرنسي أن المغرب، باعتباره محاورا مميزا لجميع البلدان، “أصبح في', 'size': 2}], 'main_title': 'خبير سياسي فرنسي: بفضل الملك أصبح المغرب بلدا لا غنى عنه على الساحة الدولية'}, {'community_id': '8', 'articles': [{'id': '131', 'title': 'معركة أنوال..معلمة وضاءة في مسلسل الكفاح الوطني ضد الاحتلال الأجنبي', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/318788/', 'summary': 'معركة أنوال..معلمة وضاءة في مسلسل الكفاح الوطني ضد الاحتلال الأجنبي. يخلد الشعب المغربي، ومعه أسرة المقاومة وجيش التحرير، غدا الإثنين (21 يوليوز)، الذكرى ال104 لمعركة أنوال المجيدة، التي حقق فيها المقاومون والمجاهدون المغاربة الأفذاذ بقيادة البطل محمد بن عبد الكريم الخطابي انتصارا كبيرا على قوات الاحتلال الأجنبي. وذكرت المندوبية السامية لقدماء المقاومين وأعضاء جيش التحرير، أنه منذ مطلع القرن العشرين، وتحديدا منذ 1907 وإلى 1912،', 'size': 4}, {'id': '136', 'title': 'المغرب يخلد الذكرى 104 لمعركة أنوال .. انتصار خالد يسطر ملاحم المقاومة وبطولات الخطابي', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1086740.html', 'summary': 'المغرب يخلد الذكرى 104 لمعركة أنوال .. انتصار خالد يسطر ملاحم المقاومة وبطولات الخطابي. يخلد الشعب المغربي، ومعه أسرة المقاومة وجيش التحرير، غدا الإثنين (21 يوليوز)، الذكرى ال104 لمعركة أنوال المجيدة، التي حقق فيها المقاومون والمجاهدون المغاربة الأفذاذ بقيادة البطل محمد بن عبد الكريم الخطابي انتصارا كبيرا على قوات الاحتلال الأجنبي. وذكرت المندوبية السامية لقدماء المقاومين وأعضاء جيش التحرير، أنه منذ مطلع القرن العشرين، وتحديدا منذ 1907 وإلى 1912، ظهرت المقالة المغرب يخلد الذكرى 104 لمعركة أنوال .. انتصار خالد يسطر ملاحم المقاومة وبطولات الخطابي  .', 'size': 4}, {'id': '177', 'title': 'المملكة تخلد الذكرى الـ104 لمعركة أنوال.. معلمة وضاءة في مسلسل الكفاح الوطني', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/470060.html', 'summary': 'المملكة تخلد الذكرى الـ104 لمعركة أنوال.. معلمة وضاءة في مسلسل الكفاح الوطني. يخلد الشعب المغربي، ومعه أسرة المقاومة وجيش التحرير، غدا الإثنين (21 يوليوز)، الذكرى الـ104 لمعركة أنوال المجيدة، التي حقق فيها المقاومون والمجاهدون المغاربة الأفذاذ بقيادة البطل محمد بن عبد الكريم الخطابي، انتصارا كبيرا على قوات الاحتلال الأجنبي.', 'size': 4}, {'id': '389', 'title': 'معركة أنوال، ماذا تعرفون عنها؟', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/224968/', 'summary': 'معركة أنوال، ماذا تعرفون عنها؟. يخلد الشعب المغربي، ومعه أسرة المقاومة وجيش التحرير، غدا الإثنين (21 يوليوز)، الذكرى ال104 لمعركة أنوال المجيدة، التي حقق فيها المقاومون والمجاهدون المغاربة الأفذاذ بقيادة البطل محمد بن عبد الكريم الخطابي انتصارا كبيرا على قوات الاحتلال الأجنبي. وذكرت المندوبية السامية لقدماء المقاومين وأعضاء جيش التحرير، أنه منذ مطلع القرن العشرين، وتحديدا منذ 1907 وإلى 1912،', 'size': 4}], 'main_title': 'معركة أنوال..معلمة وضاءة في مسلسل الكفاح الوطني ضد الاحتلال الأجنبي'}, {'community_id': '7', 'articles': [{'id': '179', 'title': 'طقس حار نسبيا مع تشكل ضباب يهم عدة مناطق غدا الاثنين', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/470055.html', 'summary': 'طقس حار نسبيا مع تشكل ضباب يهم عدة مناطق غدا الاثنين. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليوم غد الاثنين، أن يكون الطقس حارا نسبيا بجنوب الأقاليم الجنوبية، بالجنوب الشرقي، وبالمنطقة الشرقية وبسهول تادلة.', 'size': 3}, {'id': '337', 'title': 'توقعات أحوال الطقس ليوم غد الاثنين بالمغرب', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-581215.html', 'summary': 'توقعات أحوال الطقس ليوم غد الاثنين بالمغرب. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليوم غد الاثنين، أن يكون الطقس حارا نسبيا بجنوب الأقاليم الجنوبية، بالجنوب-الشرقي، وبالمنطقة الشرقية وبسهول تادلة. ويرتقب تشكل سحب منخفضة وكتل ضبابية فوق كل من السهول الشمالية، والسواحل الوسطى، وغرب الأقاليم الجنوبية، كما سيلاحظ تمركز ضباب محلي شمال-غرب الأقاليم الجنوبية. وستهم سحب غير مستقرة', 'size': 3}, {'id': '385', 'title': 'هذه توقعات أحوال الطقس بالنسبة ليوم غد الاثنين', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d9%87%d8%b0%d9%87-%d8%aa%d9%88%d9%82%d8%b9%d8%a7%d8%aa-%d8%a3%d8%ad%d9%88%d8%a7%d9%84-%d8%a7%d9%84%d8%b7%d9%82%d8%b3-%d8%a8%d8%a7%d9%84%d9%86%d8%b3%d8%a8%d8%a9-%d9%84%d9%8a%d9%88%d9%85-%d8%ba%d8%af/', 'summary': 'هذه توقعات أحوال الطقس بالنسبة ليوم غد الاثنين. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليوم غد الاثنين، أن يكون الطقس حارا نسبيا بجنوب الأقاليم الجنوبية، بالجنوب-الشرقي، وبالمنطقة الشرقية وبسهول تادلة.  هذه توقعات أحوال الطقس بالنسبة ليوم غد الاثنين     .', 'size': 3}], 'main_title': 'طقس حار نسبيا مع تشكل ضباب يهم عدة مناطق غدا الاثنين'}, {'community_id': '0', 'articles': [{'id': '201', 'title': 'تفعيل منصة ثلاثية مخصصة لأجندات التنمية التي تركز على إفريقيا', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d8%aa%d9%81%d8%b9%d9%8a%d9%84-%d9%85%d9%86%d8%b5%d8%a9-%d8%ab%d9%84%d8%a7%d8%ab%d9%8a%d8%a9-%d9%85%d8%ae%d8%b5%d8%b5%d8%a9-%d9%84%d8%a3%d8%ac%d9%86%d8%af%d8%a7%d8%aa-%d8%a7%d9%84%d8%aa%d9%86%d9%85/', 'summary': 'تفعيل منصة ثلاثية مخصصة لأجندات التنمية التي تركز على إفريقيا. وقعت جامعة محمد السادس متعددة التخصصات التقنية، واليونسكو، ومؤسسة المكتب الشريف للفوسفاط، أمس الجمعة بباريس، اتفاقا يفتح فصلا جديدا من تعاونها  تفعيل منصة ثلاثية مخصصة لأجندات التنمية التي تركز على إفريقيا     .', 'size': 3}, {'id': '349', 'title': 'بـ6 آلاف دولار.. اتفاق ثلاثي لتفعيل منصة تنموية شاملة تعزز مستقبل إفريقيا', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1086873.html', 'summary': 'بـ6 آلاف دولار.. اتفاق ثلاثي لتفعيل منصة تنموية شاملة تعزز مستقبل إفريقيا. أبرمت جامعة محمد السادس متعددة التخصصات التقنية، واليونسكو، ومؤسسة المكتب الشريف للفوسفاط، أول أمس الجمعة، اتفاقية تعاون ثلاثية بقيمة 6 ملايين دولار أمريكي، تهدف إلى إطلاق منصة تنموية مشتركة تستهدف الدفع بأجندات التنمية المستدامة في إفريقيا خلال الفترة 2025-2027. ويأتي هذا الاتفاق في إطار تعزيز التكامل بين التعليم، والعلوم، والتكنولوجيا، والتراث الثقافي، باعتبارها محركات أساسية ظهرت المقالة بـ6 آلاف دولار.. اتفاق ثلاثي لتفعيل منصة تنموية شاملة تعزز مستقبل إفريقيا  .', 'size': 3}, {'id': '391', 'title': 'اتفاقية بين جامعة محمد السادس متعددة التخصصات واليونسكو ومكتب الفوسفاط لتفعيل التنمية في إفريقيا', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%a7%d8%aa%d9%81%d8%a7%d9%82%d9%8a%d8%a9-%d8%a8%d9%8a%d9%86-%d8%ac%d8%a7%d9%85%d8%b9%d8%a9-%d9%85%d8%ad%d9%85%d8%af-%d8%a7%d9%84%d8%b3%d8%a7%d8%af%d8%b3-%d9%85%d8%aa%d8%b9%d8%af%d8%af%d8%a9-%d8%a7/', 'summary': 'اتفاقية بين جامعة محمد السادس متعددة التخصصات واليونسكو ومكتب الفوسفاط لتفعيل التنمية في إفريقيا. المساء اليوم: وقعت جامعة محمد السادس متعددة التخصصات التقنية، واليونسكو، ومؤسسة المكتب الشريف للفوسفاط، اتفاقا يفتح فصلا جديدا من تعاونها للفترة 2025-2027، من خلال تفعيل منصة ثلاثية مخصصة لأجندات التنمية التي تركز على إفريقيا، وذلك', 'size': 3}], 'main_title': 'تفعيل منصة ثلاثية مخصصة لأجندات التنمية التي تركز على إفريقيا'}, {'community_id': '2', 'articles': [{'id': '308', 'title': 'رسميًا.. نايل العيناوي يعزز صفوف روما حتى 2030', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%b1%d8%b3%d9%85%d9%8a%d9%8b%d8%a7-%d9%86%d8%a7%d9%8a%d9%84-%d8%a7%d9%84%d8%b9%d9%8a%d9%86%d8%a7%d9%88%d9%8a-%d9%8a%d8%b9%d8%b2%d8%b2-%d8%b5%d9%81%d9%88%d9%81-%d8%b1%d9%88%d9%85%d8%a7-%d8%ad%d8%aa/', 'summary': 'رسميًا.. نايل العيناوي يعزز صفوف روما حتى 2030. حسم نادي روما الإيطالي صفقة التعاقد مع الدولي المغربي نايل العيناوي، قادمًا من نادي لانس الفرنسي، بعقد يمتد لخمسة مواسم، حتى صيف عام 2030، دون الكشف عن القيمة المالية للانتقال. وظهر العيناوي في فيديو رسمي نشره نادي العاصمة، عبّر فيه عن سعادته البالغة بالانضمام إلى “الجيالوروسي”، مؤكدًا تطلعه للظهور لأول مرة أمام جماهير الفريق في', 'size': 2}, {'id': '334', 'title': 'نائل العيناوي ينضم إلى روما الإيطالي', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-581225.html', 'summary': 'نائل العيناوي ينضم إلى روما الإيطالي. أعلن نادي روما الإيطالي، اليوم الأحد، تعاقده رسميا مع الدولي المغربي نائل العيناوي، قادما من نادي لانس الفرنسي، بموجب عقد يمتد لخمس سنوات، في خطوة تعزز طموحات “الجيالوروسي” للموسم الجديد. ونشر النادي الإيطالي فيديو تقديميا عبر حساباته الرسمية، رحّب فيه بلاعبه الجديد بكلمات: “مرحبا بك في روما يا نائل”، في أجواء حماسية', 'size': 2}], 'main_title': 'رسميًا.. نايل العيناوي يعزز صفوف روما حتى 2030'}, {'community_id': '1', 'articles': [{'id': '322', 'title': 'الخارجية الأرجنتينية: المغرب يتموقع كـ”سوق استراتيجية” بالنسبة للأرجنتين', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/318850/', 'summary': 'الخارجية الأرجنتينية: المغرب يتموقع كـ”سوق استراتيجية” بالنسبة للأرجنتين. أعلنت وزارة الشؤون الخارجية والتجارة الدولية الأرجنتينية، التي برمجت بعثة تجارية متعددة القطاعات إلى المملكة يومي 7 و8 أكتوبر المقبل، أن المغرب يتموقع كـ”سوق استراتيجية” لتدويل المنتجات الأرجنتينية. وأبرزت الوزارة، في دعوة للشركات الأرجنتينية الراغبة في المشاركة في هذه البعثة، نشرت على موقعها الإلكتروني، أن المغرب يتمتع باقتصاد مطرد النمو، ومنفتح على التجارة الدولية، كما', 'size': 3}, {'id': '369', 'title': 'وزارة الخارجية الأرجنتينية: المغرب يتموقع كـ”سوق استراتيجية” بالنسبة للأرجنتين', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/470074.html', 'summary': 'وزارة الخارجية الأرجنتينية: المغرب يتموقع كـ”سوق استراتيجية” بالنسبة للأرجنتين. أعلنت وزارة الشؤون الخارجية والتجارة الدولية الأرجنتينية، التي برمجت بعثة تجارية متعددة القطاعات إلى المملكة يومي 7 و8 أكتوبر المقبل، أن المغرب يتموقع كـ”سوق استراتيجية” لتدويل المنتجات الأرجنتينية. وأبرزت الوزارة، في دعوة للشركات الأرجنتينية الراغبة في المشاركة في هذه البعثة، نشرت على موقعها الإلكتروني، أن المغرب يتمتع باقتصاد مطرد النمو، ومنفتح على التجارة الدولية، كما …', 'size': 3}, {'id': '376', 'title': 'المغرب يتموقع كـ”سوق استراتيجية” بالنسبة للأرجنتين', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d9%8a%d8%aa%d9%85%d9%88%d9%82%d8%b9-%d9%83%d9%80%d8%b3%d9%88%d9%82-%d8%a7%d8%b3%d8%aa%d8%b1%d8%a7%d8%aa%d9%8a%d8%ac%d9%8a%d8%a9-%d8%a8%d8%a7%d9%84%d9%86%d8%b3/', 'summary': 'المغرب يتموقع كـ”سوق استراتيجية” بالنسبة للأرجنتين. أعلنت وزارة الشؤون الخارجية والتجارة الدولية الأرجنتينية، التي برمجت بعثة تجارية متعددة القطاعات إلى المملكة يومي 7 و8 أكتوبر المقبل، أن المغرب يتموقع كـ”سوق  المغرب يتموقع كـ”سوق استراتيجية” بالنسبة للأرجنتين     .', 'size': 3}], 'main_title': 'الخارجية الأرجنتينية: المغرب يتموقع كـ”سوق استراتيجية” بالنسبة للأرجنتين'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    