<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 15/06/2025 - 18h27</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '35', 'title': 'الدار البيضاء.. توقيف مشتبه فيه ظهر في فيديو سرقة بالعنف', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-632041.html', 'summary': 'الدار البيضاء.. توقيف مشتبه فيه ظهر في فيديو سرقة بالعنف. أوقفت عناصر الشرطة القضائية بالدار البيضا ء، مساء السبت 14 يونيو الجاري، شخصًا يشتبه في تورطه في قضية تتعلق بالسرقة تحت التهديد وباستعمال ناقلة ذات محرك. وكان المشتبه فيه، رفقة شريك له، قد نفّذا عملية سرقة بالعنف استهدفت سيدة في الشارع العام بمدينة الدار البيضاء، وهي الواقعة التي وثقها شريط فيديو جرى تداوله على نطاق واسع عبر منصات التواصل الاجتماعي، مما أثار موجة استنكار واسعة لدى الرأي العام المحلي. وقد باشرت المصالح الأمنية أبحاثًا وتحريات ميدانية دقيقة، مكّنت من تحديد هوية المشتبه فيهما، قبل أن تنجح، مساء السبت، في توقيف أحدهما، بينما تتواصل الجهود لتوقيف الشريك الثاني، الذي تم تحديد هويته الكاملة. وقد تم إخضاع الموقوف لبحث قضائي تحت إشراف النيابة العامة المختصة، وذلك للكشف عن جميع الظروف والملابسات المرتبطة بهذه القضية، ولتحديد الأدوار والمسؤوليات الجنائية لكلا المشتبه فيهما. وتندرج هذه العملية الأمنية في إطار الجهود المتواصلة التي تبذلها المصالح الأمنية لمحاربة الجريمة وتعزيز الإحساس بالأمن لدى المواطنين.', 'size': 2}, {'id': '151', 'title': 'توقيف مشتبه به في عملية سرقة بالعنف بالدار البيضاء', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1077983.html', 'summary': 'توقيف مشتبه به في عملية سرقة بالعنف بالدار البيضاء. تمكنت عناصر المصلحة الولائية للشرطة القضائية بالدار البيضاء مساء اليوم السبت 14 يونيو 2025، من توقيف شخص يشتبه في تورطه في قضية تتعلق بـالسرقة باستعمال العنف وباستخدام دراجة نارية. وكان المشتبه به، رفقة شخص آخر، قد قاما بالاعتداء على سيدة وسرقة ممتلكاتها في الشارع العام بالدار البيضاء، ويهي الأفعال الإجرامية التي كانت قد انتشرت عبر ظهرت المقالة توقيف مشتبه به في عملية سرقة بالعنف بالدار البيضاء  .', 'size': 2}], 'main_title': 'الدار البيضاء.. توقيف مشتبه فيه ظهر في فيديو سرقة بالعنف'}, {'community_id': '1', 'articles': [{'id': '69', 'title': 'صاحبة السمو الملكي الأميرة للا أسماء تترأس حفل نهاية السنة الدراسية 2024-2025 لمؤسسة للا أسماء', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/202066', 'summary': 'صاحبة السمو الملكي الأميرة للا أسماء تترأس حفل نهاية السنة الدراسية 2024-2025 لمؤسسة للا أسماء.  ترأست صاحبة السمو الملكي الأميرة للا أسماء، رئيسة مؤسسة للا أسماء، اليوم السبت بمقر المؤسسة بالرباط، حفل نهاية السنة الدراسية 2024-2025 لهذه المؤسسة، التي رسخت مكانتها اليوم كمرجع وطني وقاري في مواكبة الأطفال الصم وضعاف السمع. وتجسد هذه المبادرة الإرادة الراسخة لصاحب الجلالة الملك محمد السادس في ضمان تكافؤ الفرص بين جميع الأطفال', 'size': 3}, {'id': '186', 'title': 'الأميرة للا أسماء تترأس حفل نهاية السنة الدراسية لمؤسستها للصم وضعاف السمع', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/466500.html', 'summary': 'الأميرة للا أسماء تترأس حفل نهاية السنة الدراسية لمؤسستها للصم وضعاف السمع. ترأست الأميرة للا أسماء، رئيسة مؤسسة للا أسماء، اليوم السبت بمقر المؤسسة بالرباط، حفل نهاية السنة الدراسية 2024-2025 لهذه المؤسسة، التي رسخت مكانتها اليوم كمرجع وطني وقاري في مواكبة الأطفال الصم وضعاف السمع.', 'size': 3}, {'id': '222', 'title': 'الأميرة للا أسماء تترأس حفل نهاية السنة الدراسية 2024-2025 لمؤسسة للا أسماء', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/222821/', 'summary': 'الأميرة للا أسماء تترأس حفل نهاية السنة الدراسية 2024-2025 لمؤسسة للا أسماء. و م ع ترأست صاحبة السمو الملكي الأميرة للا أسماء، رئيسة مؤسسة للا أسماء، اليوم السبت بمقر المؤسسة بالرباط، حفل نهاية السنة الدراسية 2024-2025 لهذه المؤسسة، التي رسخت مكانتها اليوم كمرجع وطني وقاري في مواكبة الأطفال الصم وضعاف السمع. وتجسد هذه المبادرة الإرادة الراسخة لصاحب الجلالة الملك محمد السادس في ضمان تكافؤ الفرص بين', 'size': 3}], 'main_title': 'صاحبة السمو الملكي الأميرة للا أسماء تترأس حفل نهاية السنة الدراسية 2024-2025 لمؤسسة للا أسماء'}, {'community_id': '5', 'articles': [{'id': '106', 'title': '"كريساج" عنيف لامرأة في قلب الدار البيضاء يُسقط أحد الجناة في قبضة الأمن وعمليات البحث متواصلة لاعتقال شريكه', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/society/407587.html', 'summary': '"كريساج" عنيف لامرأة في قلب الدار البيضاء يُسقط أحد الجناة في قبضة الأمن وعمليات البحث متواصلة لاعتقال شريكه. تمكنت عناصر المصلحة الولائية للشرطة القضائية بمدينة الدار البيضاء، مساء اليوم السبت 14 يونيو الجاري، من توقيف شخص يشتبه في تورطه في قضية تتعلق بالسرقة', 'size': 5}, {'id': '140', 'title': 'توقيف شخص يشتبه في تورطه في سرقة عنيفة بالبيضاء', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/315554/', 'summary': 'توقيف شخص يشتبه في تورطه في سرقة عنيفة بالبيضاء. تمكنت عناصر المصلحة الولائية للشرطة القضائية بمدينة الدار البيضاء، مساء أمس السبت، من توقيف شخص يشتبه في تورطه في قضية تتعلق بالسرقة باستعمال العنف وباستخدام ناقلة ذات محرك. وكان المشتبه فيه قد أقدم، رفقة شخص آخر، على تعريض سيدة للسرقة باستعمال العنف بالشارع العام بمدينة الدار البيضاء، وهي الأفعال الإجرامية التي شكلت موضوع شريط', 'size': 3}, {'id': '160', 'title': 'الدار البيضاء.. وضع حد لمروج مخدرات داخل سوق الجملة بحي مولاي رشيد', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1077934.html', 'summary': 'الدار البيضاء.. وضع حد لمروج مخدرات داخل سوق الجملة بحي مولاي رشيد. تمكنت عناصر الأمن التابعة لمنطقة مولاي رشيد بمدينة الدار البيضاء، صباح اليوم السبت، من توقيف شخص يبلغ من العمر أكثر من 70 سنة، يشتبه في تورطه في ترويج المخدرات، وذلك خلال عملية أمنية نوعية جرت داخل سوق الجملة للخضر والفواكه، أحد أكثر المرافق الحيوية اكتظاظا في العاصمة الاقتصادية وبحسب مصادر محلية، فإن المشتبه فيه، الذي ظهرت المقالة الدار البيضاء.. وضع حد لمروج مخدرات داخل سوق الجملة بحي مولاي رشيد  .', 'size': 2}, {'id': '213', 'title': 'الدار البيضاء.. توقيف شخص عرض سيدة للسرقة والعنف', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/222848/', 'summary': 'الدار البيضاء.. توقيف شخص عرض سيدة للسرقة والعنف. كمال عسو أوقفت عناصر المصلحة الولائية للشرطة القضائية بمدينة الدار البيضاء، مساء اليوم السبت شخصا يشتبه تورطه في قضية تتعلق بالسرقة باستعمال العنف وباستخدام ناقلة ذات محرك. وحسب مصدر أمني، فإن المشتبه فيه كان قد أقدم، رفقة شخص آخر، على تعريض سيدة للسرقة باستعمال العنف بالشارع العام بمدينة الدار البيضاء، وهي الأفعال الإجرامية التي', 'size': 2}, {'id': '238', 'title': 'الدار البيضاء.. توقيف مشتبه في تورطه في سرقة بالعنف في الشارع', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d8%af%d8%a7%d8%b1-%d8%a7%d9%84%d8%a8%d9%8a%d8%b6%d8%a7%d8%a1-%d8%aa%d9%88%d9%82%d9%8a%d9%81-%d9%85%d8%b4%d8%aa%d8%a8%d9%87-%d9%81%d9%8a-%d8%aa%d9%88%d8%b1%d8%b7%d9%87-%d9%81%d9%8a/', 'summary': 'الدار البيضاء.. توقيف مشتبه في تورطه في سرقة بالعنف في الشارع. أفاد مصدر أمني أن عناصر المصلحة الولائية للشرطة القضائية بمدينة الدار البيضاء، تمكنت مساء اليوم السبت 14 يونيو الجاري، من توقيف شخص يشتبه في تورطه في قضية تتعلق بالسرقة باستعمال العنف وباستخدام ناقلة ذات محرك. وحسب ذات المصدر فقد كان المشتبه فيه قد أقدم، رفقة شخص آخر، على تعريض سيدة للسرقة باستعمال العنف …  الدار البيضاء.. توقيف مشتبه في تورطه في سرقة بالعنف في الشارع     .', 'size': 3}], 'main_title': '"كريساج" عنيف لامرأة في قلب الدار البيضاء يُسقط أحد الجناة في قبضة الأمن وعمليات البحث متواصلة لاعتقال شريكه'}, {'community_id': '3', 'articles': [{'id': '112', 'title': 'طقس حار وزخات رعدية مرتقبة بعدة مناطق اليوم الأحد', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/407593.html', 'summary': 'طقس حار وزخات رعدية مرتقبة بعدة مناطق اليوم الأحد. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الأحد، أن تتميز الحالة الجوية عامة بطقس حار نسبيا إلى حار بكل من السهول الممتدة غرب الأطلس، والمنطقة', 'size': 4}, {'id': '168', 'title': 'طقس حار متوقع اليوم الأحد', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%b7%d9%82%d8%b3-%d8%ad%d8%a7%d8%b1-%d9%85%d8%aa%d9%88%d9%82%d8%b9-%d8%a7%d9%84%d9%8a%d9%88%d9%85-%d8%a7%d9%84%d8%a3%d8%ad%d8%af/', 'summary': 'طقس حار متوقع اليوم الأحد. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الأحد، أن تتميز الحالة الجوية عامة بطقس حار نسبيا إلى حار بكل من السهول الممتدة غرب الأطلس، والمنطقة الشرقية وكذا جنوب شرق البلاد. ويرتقب تشكل كتل ضبابية محلية فوق السواحل الشمالية والوسطى وغرب الواجهة المتوسطية، فضلا عن ظهور تمركز سحب منخفظة كثيفة مصحوبة بقطرات مطرية جد خفيفة محليا  طقس حار متوقع اليوم الأحد     .', 'size': 4}, {'id': '237', 'title': 'توقعات أحوال الطقس اليوم الأحد', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%aa%d9%88%d9%82%d8%b9%d8%a7%d8%aa-%d8%a3%d8%ad%d9%88%d8%a7%d9%84-%d8%a7%d9%84%d8%b7%d9%82%d8%b3-%d8%a7%d9%84%d9%8a%d9%88%d9%85-%d8%a7%d9%84%d8%a3%d8%ad%d8%af-37/', 'summary': 'توقعات أحوال الطقس اليوم الأحد. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليومه الأحد، أن تتميز الحالة الجوية عامة بطقس حار نسبيا إلى حار بكل من السهول الممتدة غرب الأطلس، والمنطقة الشرقية وكذا جنوب شرق البلاد. ويرتقب تشكل كتل ضبابية محلية فوق السواحل الشمالية والوسطى وغرب الواجهة المتوسطية، فضلا عن ظهور تمركز سحب منخفظة كثيفة مصحوبة بقطرات مطرية جد …  توقعات أحوال الطقس اليوم الأحد     .', 'size': 4}, {'id': '394', 'title': 'طقس الأحد.. حار نسبيا مع نزول قطرات مطرية في بعض المناطق', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/222851/', 'summary': 'طقس الأحد.. حار نسبيا مع نزول قطرات مطرية في بعض المناطق. كواليس اليوم تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الأحد، أن تتميز الحالة الجوية عامة بطقس حار نسبيا إلى حار بكل من السهول الممتدة غرب الأطلس، والمنطقة الشرقية وكذا جنوب شرق البلاد. ويرتقب تشكل كتل ضبابية محلية فوق السواحل الشمالية والوسطى وغرب الواجهة المتوسطية، فضلا عن ظهور تمركز سحب منخفظة كثيفة مصحوبة بقطرات مطرية', 'size': 4}], 'main_title': 'طقس حار وزخات رعدية مرتقبة بعدة مناطق اليوم الأحد'}, {'community_id': '4', 'articles': [{'id': '136', 'title': 'جهة درعة تافيلالت..نسبة النجاح في امتحانات الباكالوريا بلغت 68.65 في المائة', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/315566/', 'summary': 'جهة درعة تافيلالت..نسبة النجاح في امتحانات الباكالوريا بلغت 68.65 في المائة. أعلنت الأكاديمية الجهوية للتربية والتكوين لجهة درعة تافيلالت، أمس السبت، أن مجموع المترشحين الذين اجتازوا بنجاح الدورة العادية لامتحانات البكالوريا لسنة 2025 على صعيد الجهة بلغ 13 ألف و776 تلميذا وتلميذة، بنسبة نجاح بلغت 68,65 بالمائة. وأفاد بلاغ للأكاديمية بأن نسبة النجاح في صفوف الإناث المتمدرسات بلغ 74,26 بالمائة (8178 تلميذة)، بينما بلغت نسبة النجاح', 'size': 2}, {'id': '378', 'title': 'بكالوريا 2025.. نسبة النجاح بجهة درعة تافيلالت بلغت 68.65 بالمائة', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/466503.html', 'summary': 'بكالوريا 2025.. نسبة النجاح بجهة درعة تافيلالت بلغت 68.65 بالمائة. أعلنت الأكاديمية الجهوية للتربية والتكوين لجهة درعة تافيلالت، أمس السبت، أن مجموع المترشحين الذين اجتازوا بنجاح الدورة العادية لامتحانات البكالوريا لسنة 2025 على صعيد الجهة بلغ 13 ألف و776 تلميذا وتلميذة، بنسبة نجاح بلغت 68,65 بالمائة.', 'size': 2}], 'main_title': 'جهة درعة تافيلالت..نسبة النجاح في امتحانات الباكالوريا بلغت 68.65 في المائة'}, {'community_id': '6', 'articles': [{'id': '304', 'title': 'الرباط : الوكالة الوطنية للمياه والغابات تحدد بدقة المناطق الحساسة والمعرضة لخطر اندلاع الحرائق', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/202094', 'summary': 'الرباط : الوكالة الوطنية للمياه والغابات تحدد بدقة المناطق الحساسة والمعرضة لخطر اندلاع الحرائق. الاحداث نت✍️مراسلة .م.ع.الإدريسي مع دخول فصل الصيف؛ ومن أجل استباق ظاهرة حرائق الغابات على الصعيد الوطني، وفي بيان لها توصلت به الجريدة أصدرت الوكالة الوطنية للمياه والغابات، وبشكل يومي، بناءاً على معطيات علمية، خرائط تنبؤ تحدد بدقة المناطق الحساسة والمعرضة لخطر اندلاع الحرائق الغابوية، ابتداءا من يوم الاثنين 16 يونيو 2025 إلى يوم الجمعة 20', 'size': 2}, {'id': '319', 'title': 'تحذير من خطر اندلاع حرائق غابوية في مناطق مغربية عديدة', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/407622.html', 'summary': 'تحذير من خطر اندلاع حرائق غابوية في مناطق مغربية عديدة. أعلنت الوكالة الوطنية للمياه والغابات أنها ستشرع وبشكل يومي، ابتداء من يوم غد الإثنين وإلى غاية يوم الجمعة المقبل، بناء على معطيات علمية، في نشر', 'size': 2}, {'id': '329', 'title': 'وكالة المياه والغابات تحذر من حرائق غابوية مرتقبة بعدد من الأقاليم', 'source': 'assabah.ma', 'link': 'https://assabah.ma/853563.html', 'summary': 'وكالة المياه والغابات تحذر من حرائق غابوية مرتقبة بعدد من الأقاليم. في إطار جهودها الاستباقية للحد من مخاطر حرائق الغابات، أصدرت الوكالة الوطنية للمياه والغابات، اليوم الأحد، خرائط تنبؤ علمية دقيقة، تحدد المناطق المهددة باشتعال النيران، وذلك خلال الفترة الممتدة من يوم الاثنين 16 يونيو إلى الجمعة 20 يونيو 2025. وأوضحت الوكالة، في بلاغ لها، أن هذه الخرائطأكمل القراءة » المقالة وكالة المياه والغابات تحذر من حرائق غابوية مرتقبة بعدد من الأقاليم  .', 'size': 3}, {'id': '375', 'title': 'الوكالة الوطنية للمياه والغابات تحذر من خطر اندلاع حرائق غابوية', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/466514.html', 'summary': 'الوكالة الوطنية للمياه والغابات تحذر من خطر اندلاع حرائق غابوية. أعلنت الوكالة الوطنية للمياه والغابات أنها ستشرع وبشكل يومي، ابتداء من يوم غد الإثنين وإلى غاية يوم الجمعة المقبل، بناء على معطيات علمية، في نشر خرائط تنبؤ تحدد بدقة المناطق الحساسة والمعرضة لخطر اندلاع الحرائق الغابوية.', 'size': 3}, {'id': '390', 'title': 'وكالة المياه والغابات تحذر من خطر اندلاع حرائق غابوية بعدد من مناطق المملكة', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/222864/', 'summary': 'وكالة المياه والغابات تحذر من خطر اندلاع حرائق غابوية بعدد من مناطق المملكة. و م ع أعلنت الوكالة الوطنية للمياه والغابات أنها ستشرع وبشكل يومي، ابتداء من يوم غد الإثنين وإلى غاية يوم الجمعة المقبل، بناء على معطيات علمية، في نشر خرائط تنبؤ تحدد بدقة المناطق الحساسة والمعرضة لخطر اندلاع الحرائق الغابوية. وأوضحت الوكالة في بلاغ صحفي أنه بعد تحليل البيانات المتعلقة خصوصا بنوعية الغطاء الغابوي وقابليته', 'size': 3}], 'main_title': 'وكالة المياه والغابات تحذر من حرائق غابوية مرتقبة بعدد من الأقاليم'}, {'community_id': '8', 'articles': [{'id': '324', 'title': 'في 8 مدن.. حموشي يؤشر على تعيينات جديدة في مناصب المسؤولية بمصالح الأمن الوطني', 'source': 'kifache.com', 'link': 'https://kifache.com/%d9%81%d9%8a-8-%d9%85%d8%af%d9%86-%d8%ad%d9%85%d9%88%d8%b4%d9%8a-%d9%8a%d8%a4%d8%b4%d8%b1-%d8%b9%d9%84%d9%89-%d8%aa%d8%b9%d9%8a%d9%8a%d9%86%d8%a7%d8%aa-%d8%ac%d8%af%d9%8a%d8%af%d8%a9-%d9%81%d9%8a/', 'summary': 'في 8 مدن.. حموشي يؤشر على تعيينات جديدة في مناصب المسؤولية بمصالح الأمن الوطني. أعلنت المديرية العامة للأمن الوطني، اليوم الأحد (15 يونيو)، عن قائمة جديدة تتضمن عددا من التعيينات في مناصب المسؤولية بالمصالح اللاممركزة للأمن الوطني بكل من مدن فاس ووزان وخنيفرة والقصر الكبير وتطوان وسيدي قاسم وأكادير والناظور. وأفاد مصدر أمني بأن هذه التعينات تأتي في إطار مواصلة لمسار تنزيل استراتيجية فتح الباب أمام الكفاءات الشابة لتحمل', 'size': 5}, {'id': '335', 'title': 'تعيينات جديدة في مناصب المسؤولية بمصالح الأمن الوطني', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/315595/', 'summary': 'تعيينات جديدة في مناصب المسؤولية بمصالح الأمن الوطني. مواصلة لمسار تنزيل استراتيجية فتح الباب أمام الكفاءات الشابة لتحمل مسؤولية التسيير الأمني وتكريس التداول على مناصب المسؤولية، قامت المديرية العامة للأمن الوطني اليوم الأحد 15 يونيو الجاري، بالإعلان عن قائمة جديدة تتضمن عددا من التعيينات في مناصب المسؤولية بالمصالح اللاممركزة للأمن الوطني بكل من مدن فاس ووزان وخنيفرة والقصر الكبير وتطوان وسيدي قاسم', 'size': 5}, {'id': '357', 'title': 'الأمن الوطني.. تعيينات جديدة في مناصب المسؤولية', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a7%d9%84%d8%a3%d9%85%d9%86-%d8%a7%d9%84%d9%88%d8%b7%d9%86%d9%8a-%d8%aa%d8%b9%d9%8a%d9%8a%d9%86%d8%a7%d8%aa-%d8%ac%d8%af%d9%8a%d8%af%d8%a9-%d9%81%d9%8a-%d9%85%d9%86%d8%a7%d8%b5%d8%a8-%d8%a7%d9%84-2/', 'summary': 'الأمن الوطني.. تعيينات جديدة في مناصب المسؤولية. أعلنت المديرية العامة للأمن الوطني، اليوم الأحد 15 يونيو الجاري، عن قائمة جديدة تتضمن عددا من التعيينات في مناصب المسؤولية بالمصالح اللاممركزة للأمن الوطني بكل من مدن فاس ووزان وخنيفرة والقصر الكبير وتطوان وسيدي قاسم وأكادير والناظور، في إطار مواصلة مسار تنزيل استراتيجية فتح الباب أمام الكفاءات الشابة لتحمل مسؤولية التسيير الأمني وتكريس التداول على  الأمن الوطني.. تعيينات جديدة في مناصب المسؤولية     .', 'size': 5}, {'id': '366', 'title': 'حموشي يؤشر على تعيينات جديدة في مناصب المسؤولية بمصالح الأمن الوطني', 'source': 'rue20.com', 'link': 'https://rue20.com/912969.html', 'summary': 'حموشي يؤشر على تعيينات جديدة في مناصب المسؤولية بمصالح الأمن الوطني.  . الرباط مواصلة لمسار تنزيل استراتيجية فتح الباب أمام الكفاءات الشابة لتحمل مسؤولية التسيير الأمني وتكريس التداول على مناصب المسؤولية، قامت المديرية العامة للأمن الوطني، اليوم الأحد 15 يونيو الجاري، بالإعلان عن قائمة جديدة تتضمن عددا من التعيينات في مناصب المسؤولية بالمصالح اللاممركزة للأمن الوطني بكل من مدن فاس ووزان وخنيفرة والقصر الكبير الخبر حموشي يؤشر على تعيينات جديدة في مناصب المسؤولية بمصالح الأمن الوطني  .', 'size': 5}, {'id': '391', 'title': 'حموشي يعين مسؤولين أمنيين جدد في عدة مدن', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/222861/', 'summary': 'حموشي يعين مسؤولين أمنيين جدد في عدة مدن. أحمد التدلاوي مواصلة لمسار تنزيل استراتيجية فتح الباب أمام الكفاءات الشابة لتحمل مسؤولية التسيير الأمني وتكريس التداول على مناصب المسؤولية، قامت المديرية العامة للأمن الوطني اليوم الأحد 15 يونيو الجاري، بالإعلان عن قائمة جديدة تتضمن عددا من التعيينات في مناصب المسؤولية بالمصالح اللاممركزة للأمن الوطني بكل من مدن فاس ووزان وخنيفرة والقصر الكبير وتطوان', 'size': 5}], 'main_title': 'في 8 مدن.. حموشي يؤشر على تعيينات جديدة في مناصب المسؤولية بمصالح الأمن الوطني'}, {'community_id': '9', 'articles': [{'id': '325', 'title': 'بفضل إبداع الصناع التقليديين.. المغرب يتألق في معرض أستراليا للتصميم', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a8%d9%81%d8%b6%d9%84-%d8%a5%d8%a8%d8%af%d8%a7%d8%b9-%d8%a7%d9%84%d8%b5%d9%86%d8%a7%d8%b9-%d8%a7%d9%84%d8%aa%d9%82%d9%84%d9%8a%d8%af%d9%8a%d9%8a%d9%86-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d9%8a/', 'summary': 'بفضل إبداع الصناع التقليديين.. المغرب يتألق في معرض أستراليا للتصميم. المغرب في دورة 2025 من معرض أستراليا للتصميم، وذلك عبر تميز صناعته التقليدية ودينامية ابداعه المعاصر خلال هذا الحدث المرجعي في مجال التصميم الداخلي والهندسة المعمارية بمنطقة آسيا والمحيط الهادئ. ومثل المغرب في هذه التظاهرة التي أقيمت من الخميس إلى السبت في ملبورن بجنوب أستراليا، وفد ضم ممثلين عن دار الصانع والمصمم العالمي الشهير هشام', 'size': 2}, {'id': '374', 'title': 'المغرب يتألق في معرض أستراليا للتصميم 2025', 'source': 'machahid24.com', 'link': 'https://machahid24.com/panorama/466517.html', 'summary': 'المغرب يتألق في معرض أستراليا للتصميم 2025. تألق المغرب في دورة 2025 من معرض أستراليا للتصميم، وذلك عبر تميز صناعته التقليدية ودينامية إبداعه المعاصر خلال هذا الحدث المرجعي في مجال التصميم الداخلي والهندسة المعمارية بمنطقة آسيا والمحيط الهادئ.', 'size': 2}], 'main_title': 'بفضل إبداع الصناع التقليديين.. المغرب يتألق في معرض أستراليا للتصميم'}, {'community_id': '2', 'articles': [{'id': '361', 'title': 'نشرة إنذارية.. زخات رعدية قوية ومصحوبة بالبرد وهبات رياح مرتقبة اليوم', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d9%86%d8%b4%d8%b1%d8%a9-%d8%a5%d9%86%d8%b0%d8%a7%d8%b1%d9%8a%d8%a9-%d8%b2%d8%ae%d8%a7%d8%aa-%d8%b1%d8%b9%d8%af%d9%8a%d8%a9-%d9%82%d9%88%d9%8a%d8%a9-%d9%88%d9%85%d8%b5%d8%ad%d9%88%d8%a8%d8%a9-%d8%a8/', 'summary': 'نشرة إنذارية.. زخات رعدية قوية ومصحوبة بالبرد وهبات رياح مرتقبة اليوم. أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب تسجيل زخات رعدية محليا قوية (من 15 إلى 25 ملم) ومصحوبة بتساقط للبرد وبهبات رياح، اليوم الأحد، بعدد من مناطق المملكة. وأوضحت المديرية، في نشرة إنذارية من مستوى يقظة "برتقالي"، أن هذه الزخات الرعدية ستهم عمالات وأقاليم تازة، وخريبكة والدريوش، وجرادة، وتاوريرت، والخميسات ، والحسيمة وكرسيف، من الساعة  نشرة إنذارية.. زخات رعدية قوية ومصحوبة بالبرد وهبات رياح مرتقبة اليوم     .', 'size': 3}, {'id': '392', 'title': 'نشرة إنذارية.. زخات رعدية قوية مصحوبة ب”تبروري” في عدة مناطق', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/222858/', 'summary': 'نشرة إنذارية.. زخات رعدية قوية مصحوبة ب”تبروري” في عدة مناطق. كواليس اليوم أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب تسجيل زخات رعدية محليا قوية (من 15 إلى 25 ملم) ومصحوبة بتساقط للبرد وبهبات رياح، اليوم الأحد، بعدد من مناطق المملكة. وأوضحت المديرية، في نشرة إنذارية من مستوى يقظة “برتقالي”، أن هذه الزخات الرعدية ستهم عمالات وأقاليم تازة، وخريبكة والدريوش، وجرادة، وتاوريرت، والخميسات ، والحسيمة', 'size': 3}, {'id': '400', 'title': 'الأرصاد الجوية تحذر.. زخات رعدية قوية وبرد ورياح اليوم الأحد بالمملكة', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d8%a3%d8%b1%d8%b5%d8%a7%d8%af-%d8%a7%d9%84%d8%ac%d9%88%d9%8a%d8%a9-%d8%aa%d8%ad%d8%b0%d8%b1-%d8%b2%d8%ae%d8%a7%d8%aa-%d8%b1%d8%b9%d8%af%d9%8a%d8%a9-%d9%82%d9%88%d9%8a%d8%a9-%d9%88%d8%a8/', 'summary': 'الأرصاد الجوية تحذر.. زخات رعدية قوية وبرد ورياح اليوم الأحد بالمملكة. أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب تسجيل زخات رعدية محليا قوية (من 15 إلى 25 ملم) ومصحوبة بتساقط للبرد وبهبات رياح، اليوم الأحد، بعدد من مناطق المملكة. وأوضحت المديرية، في نشرة إنذارية من مستوى يقظة “برتقالي”، أن هذه الزخات الرعدية ستهم عمالات وأقاليم تازة، وخريبكة والدريوش، وجرادة، وتاوريرت، والخميسات ، والحسيمة وكرسيف، …  الأرصاد الجوية تحذر.. زخات رعدية قوية وبرد ورياح اليوم الأحد بالمملكة     .', 'size': 3}], 'main_title': 'نشرة إنذارية.. زخات رعدية قوية ومصحوبة بالبرد وهبات رياح مرتقبة اليوم'}, {'community_id': '7', 'articles': [{'id': '376', 'title': 'زخات رعدية قوية وهبات رياح تهم اليوم الأحد عدة مناطق', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/466512.html', 'summary': 'زخات رعدية قوية وهبات رياح تهم اليوم الأحد عدة مناطق. أفادت المديرية العامة للأرصاد الجوية، بأنه يرتقب تسجيل زخات رعدية محليا قوية (من 15 إلى 25 ملم) ومصحوبة بتساقط للبرد وبهبات رياح، اليوم الأحد، بعدد من مناطق المملكة.', 'size': 2}, {'id': '396', 'title': 'زخات رعدية وبرَد ورياح بعدد من مناطق المملكة ليلة الأحد', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%b2%d8%ae%d8%a7%d8%aa-%d8%b1%d8%b9%d8%af%d9%8a%d8%a9-%d9%88%d8%a8%d8%b1%d9%8e%d8%af-%d9%88%d8%b1%d9%8a%d8%a7%d8%ad-%d8%a8%d8%b9%d8%af%d8%af-%d9%85%d9%86-%d9%85%d9%86%d8%a7%d8%b7%d9%82-%d8%a7%d9%84/', 'summary': 'زخات رعدية وبرَد ورياح بعدد من مناطق المملكة ليلة الأحد. المساء اليوم: أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب تسجيل زخات رعدية محليا قوية (من 15 إلى 25 ملم) ومصحوبة بتساقط للبرد وبهبات رياح، اليوم الأحد، بعدد من مناطق المملكة. وأوضحت المديرية، في نشرة إنذارية', 'size': 2}], 'main_title': 'زخات رعدية قوية وهبات رياح تهم اليوم الأحد عدة مناطق'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    