<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 19/09/2025 - 12h27</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '1', 'articles': [{'id': '62', 'title': 'الملك يدشن ويزور عددا من المشاريع الكبرى المندرجة في إطار إعادة هيكلة وتطوير المركب المينائي للدار البيضاء', 'source': 'www.alakhbar.press.ma', 'link': 'https://www.alakhbar.press.ma/%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%8a%d8%af%d8%b4%d9%86-%d9%88%d9%8a%d8%b2%d9%88%d8%b1-%d8%b9%d8%af%d8%af%d8%a7-%d9%85%d9%86-%d8%a7%d9%84%d9%85%d8%b4%d8%a7%d8%b1%d9%8a%d8%b9-%d8%a7%d9%84%d9%83%d8%a8-273305.html', 'summary': 'الملك يدشن ويزور عددا من المشاريع الكبرى المندرجة في إطار إعادة هيكلة وتطوير المركب المينائي للدار البيضاء. أشرف الملك محمد السادس، اليوم الخميس بالدار البيضاء، على تدشين وزيارة عدد من المشاريع الكبرى المندرجة في إطار إعادة هيكلة وتطوير المركب المينائي للدار البيضاء، والرامية إلى تعزيز الإشعاع الاقتصادي والسياحي للعاصمة الاقتصادية للمملكة. وتهدف هذه المشاريع إلى ترسيخ مكانة الدار البيضاء كقطب اقتصادي ومالي رائد على المستوى القاري، منفتح بالكامل على محيطه الدولي. …  الملك يدشن ويزور عددا من المشاريع الكبرى المندرجة في إطار إعادة هيكلة وتطوير المركب المينائي للدار البيضاء     .', 'size': 5}, {'id': '69', 'title': 'الملك محمد السادس يدشن مشاريع كبرى لتطوير المركب المينائي للدار البيضاء', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/206402', 'summary': 'الملك محمد السادس يدشن مشاريع كبرى لتطوير المركب المينائي للدار البيضاء.  أشرف صاحب الجلالة الملك محمد السادس، نصره الله، اليوم الخميس بالدار البيضاء، على تدشين وزيارة عدد من المشاريع الكبرى المندرجة في إطار إعادة هيكلة وتطوير المركب المينائي للدار البيضاء، والرامية إلى تعزيز الإشعاع الاقتصادي والسياحي للعاصمة الاقتصادية للمملكة. وتهدف هذه المشاريع إلى ترسيخ مكانة الدار البيضاء كقطب اقتصادي ومالي رائد على المستوى القاري، منفتح', 'size': 5}, {'id': '160', 'title': 'بـ5 مليارات درهم.. الملك يدشن مشاريع كبرى لتعزيز الإشعاع الاقتصادي والسياحي للدار البيضاء', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1100874.html', 'summary': 'بـ5 مليارات درهم.. الملك يدشن مشاريع كبرى لتعزيز الإشعاع الاقتصادي والسياحي للدار البيضاء. أشرف الملك محمد السادس، اليوم الخميس بالدار البيضاء، على تدشين وزيارة عدد من المشاريع الكبرى المندرجة في إطار إعادة هيكلة وتطوير المركب المينائي للدار البيضاء، والرامية إلى تعزيز الإشعاع الاقتصادي والسياحي للعاصمة الاقتصادية للمملكة. وهدفت هذه المشاريع إلى ترسيخ مكانة الدار البيضاء كقطب اقتصادي ومالي رائد على المستوى القاري، منفتح بالكامل على محيطه الدولي. وشملت ظهرت المقالة بـ5 مليارات درهم.. الملك يدشن مشاريع كبرى لتعزيز الإشعاع الاقتصادي والسياحي للدار البيضاء  .', 'size': 5}, {'id': '224', 'title': 'جلالة الملك يدشن ويزور عددا من المشاريع الكبرى المندرجة في إطار إعادة هيكلة وتطوير المركب المينائي للدار البيضاء', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/227249/', 'summary': 'جلالة الملك يدشن ويزور عددا من المشاريع الكبرى المندرجة في إطار إعادة هيكلة وتطوير المركب المينائي للدار البيضاء. الدار البيضاء – أشرف صاحب الجلالة الملك محمد السادس، نصره الله، اليوم الخميس بالدار البيضاء، على تدشين وزيارة عدد من المشاريع الكبرى المندرجة في إطار إعادة هيكلة وتطوير المركب المينائي للدار البيضاء، والرامية إلى تعزيز الإشعاع الاقتصادي والسياحي للعاصمة الاقتصادية للمملكة. وتهدف هذه المشاريع إلى ترسيخ مكانة الدار البيضاء كقطب اقتصادي ومالي رائد على', 'size': 5}, {'id': '239', 'title': 'الملك محمد السادس يدشن ويزور عددا من المشاريع الكبرى المندرجة في إطار إعادة هيكلة وتطوير المركب المينائي للدار البيضاء (صور)', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%85%d8%ad%d9%85%d8%af-%d8%a7%d9%84%d8%b3%d8%a7%d8%af%d8%b3-%d9%8a%d8%af%d8%b4%d9%86-%d9%88%d9%8a%d8%b2%d9%88%d8%b1-%d8%b9%d8%af%d8%af%d8%a7-%d9%85%d9%86-%d8%a7%d9%84/', 'summary': 'الملك محمد السادس يدشن ويزور عددا من المشاريع الكبرى المندرجة في إطار إعادة هيكلة وتطوير المركب المينائي للدار البيضاء (صور). أشرف الملك محمد السادس، اليوم الخميس بالدار البيضاء، على تدشين وزيارة عدد من المشاريع الكبرى المندرجة في إطار إعادة هيكلة وتطوير المركب المينائي للدار البيضاء، والرامية إلى تعزيز الإشعاع الاقتصادي والسياحي للعاصمة الاقتصادية للمملكة. وتهدف هذه المشاريع إلى ترسيخ مكانة الدار البيضاء كقطب اقتصادي ومالي رائد على المستوى القاري، منفتح بالكامل على محيطه …  الملك محمد السادس يدشن ويزور عددا من المشاريع الكبرى المندرجة في إطار إعادة هيكلة وتطوير المركب المينائي للدار البيضاء (صور)     .', 'size': 5}], 'main_title': 'الملك يدشن ويزور عددا من المشاريع الكبرى المندرجة في إطار إعادة هيكلة وتطوير المركب المينائي للدار البيضاء'}, {'community_id': '2', 'articles': [{'id': '95', 'title': 'العداءة المغربية آسية رزيقي تتأهل إلى نصف نهائي 800 م في بطولة العالم', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/sport/others/412963.html', 'summary': 'العداءة المغربية آسية رزيقي تتأهل إلى نصف نهائي 800 م في بطولة العالم. تأهلت العداءة المغربية آسية رزيقي، اليوم الخميس ،إلى نصف نهائي سباق 800 م ،المدرج ضمن فعاليات بطولة العالم لألعاب القوى التي تحتضنها حاليا العاصمة اليابانية', 'size': 2}, {'id': '250', 'title': 'رزقي تتأهل لنصف نهائي بطولة العالم', 'source': 'www.alalam.ma', 'link': 'https://www.alalam.ma/notes/رزقي-تتأهل-لنصف-نهائي-بطولة-العالم_b91180346.html', 'summary': 'رزقي تتأهل لنصف نهائي بطولة العالم. تأهلت المغربية آسية رزيقي، صباح اليوم الخميس، إلى نصف نهائي سباق 800 متر ضمن بطولة العالم لألعاب القوى المقامة حاليا في طوكيو.', 'size': 2}], 'main_title': 'العداءة المغربية آسية رزيقي تتأهل إلى نصف نهائي 800 م في بطولة العالم'}, {'community_id': '12', 'articles': [{'id': '114', 'title': 'زلزال بقوة 7.8 درجات يهز شرق روسيا وتحذيرات من تسونامي', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/world/412983.html', 'summary': 'زلزال بقوة 7.8 درجات يهز شرق روسيا وتحذيرات من تسونامي. هزّ زلزال قوي بلغت شدته 7.8 درجات على مقياس ريختر، صباح الخميس، شبه جزيرة كامتشاتكا في أقصى شرق روسيا، وفق ما أعلنت هيئة المسح الجيولوجي', 'size': 2}, {'id': '196', 'title': 'زلزال بقوة 7.8 درجات يضرب شبه جزيرة كامتشاتكا شرقي روسيا', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d8%b2%d9%84%d8%b2%d8%a7%d9%84-%d8%a8%d9%82%d9%88%d8%a9-7-8-%d8%af%d8%b1%d8%ac%d8%a7%d8%aa-%d9%8a%d8%b6%d8%b1%d8%a8-%d8%b4%d8%a8%d9%87-%d8%ac%d8%b2%d9%8a%d8%b1%d8%a9-%d9%83%d8%a7%d9%85%d8%aa%d8%b4/', 'summary': 'زلزال بقوة 7.8 درجات يضرب شبه جزيرة كامتشاتكا شرقي روسيا. ضرب زلزال بقوة 7.8 درجات على مقياس ريختر، الخميس، شبه جزيرة كامتشاتكا شرقي روسيا. وأفادت هيئة المسح الجيولوجي الأمريكية بأن مركز الزلزال  زلزال بقوة 7.8 درجات يضرب شبه جزيرة كامتشاتكا شرقي روسيا     .', 'size': 2}], 'main_title': 'زلزال بقوة 7.8 درجات يهز شرق روسيا وتحذيرات من تسونامي'}, {'community_id': '4', 'articles': [{'id': '118', 'title': 'خبير فرنسي: بفضل الرؤية الاستراتيجية لجلالة الملك المغرب أضحى فاعلا عالميا بارزا في الاقتصاد البحري', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%ae%d8%a8%d9%8a%d8%b1-%d9%81%d8%b1%d9%86%d8%b3%d9%8a-%d8%a8%d9%81%d8%b6%d9%84-%d8%a7%d9%84%d8%b1%d8%a4%d9%8a%d8%a9-%d8%a7%d9%84%d8%a7%d8%b3%d8%aa%d8%b1%d8%a7%d8%aa%d9%8a%d8%ac%d9%8a%d8%a9-%d9%84/', 'summary': 'خبير فرنسي: بفضل الرؤية الاستراتيجية لجلالة الملك المغرب أضحى فاعلا عالميا بارزا في الاقتصاد البحري. أكد الخبير الجيوسياسي الفرنسي، أيمريك شوبراد، أن المغرب، بفضل الرؤية الاستراتيجية لصاحب الجلالة الملك محمد السادس، أضحى اليوم “فاعلا عالميا بارزا في الاقتصاد البحري”. وقال شوبراد، في معرض تعليقه لوكالة المغرب العربي للأنباء على المشاريع التي أشرف جلالة الملك على تدشينها، اليوم الخميس، في إطار إعادة هيكلة وتطوير المركب المينائي للدار البيضاء، إن “المغرب أضحى', 'size': 2}, {'id': '379', 'title': 'خبير فرنسي: الرؤية الاستراتيجية لجلالة الملك جعلت المغرب فاعلا عالميا بارزا في الاقتصاد البحري', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/227286/', 'summary': 'خبير فرنسي: الرؤية الاستراتيجية لجلالة الملك جعلت المغرب فاعلا عالميا بارزا في الاقتصاد البحري. باريس – أكد الخبير الجيوسياسي الفرنسي، أيمريك شوبراد، أن المغرب، بفضل الرؤية الاستراتيجية لصاحب الجلالة الملك محمد السادس، أضحى اليوم “فاعلا عالميا بارزا في الاقتصاد البحري”. وقال السيد شوبراد، في معرض تعليقه لوكالة المغرب العربي للأنباء على المشاريع التي أشرف جلالة الملك على تدشينها، اليوم الخميس، في إطار إعادة هيكلة وتطوير المركب المينائي للدار البيضاء،', 'size': 2}], 'main_title': 'خبير فرنسي: بفضل الرؤية الاستراتيجية لجلالة الملك المغرب أضحى فاعلا عالميا بارزا في الاقتصاد البحري'}, {'community_id': '5', 'articles': [{'id': '119', 'title': 'في رسالة مفتوحة.. أوزين ينتقد ارتباك الحكومة', 'source': 'kifache.com', 'link': 'https://kifache.com/%d9%81%d9%8a-%d8%b1%d8%b3%d8%a7%d9%84%d8%a9-%d9%85%d9%81%d8%aa%d9%88%d8%ad%d8%a9-%d8%a3%d9%88%d8%b2%d9%8a%d9%86-%d9%8a%d9%86%d8%aa%d9%82%d8%af-%d8%a7%d8%b1%d8%aa%d8%a8%d8%a7%d9%83-%d8%a7%d9%84%d8%ad/', 'summary': 'في رسالة مفتوحة.. أوزين ينتقد ارتباك الحكومة. في رسالة مفتوحة، انتقد محمد أوزين، الأمين العام لحزب الحركة الشعبية، أسلوب تدبير الحكومة للشأن العام، معتبرا أن ارتباكها في اتخاذ القرارات عمق من معاناة المواطنين، خاصة في ظل تزايد الغلاء وتراجع القدرة الشرائية، مما يستدعي، حسب قوله، مراجعة جذرية لأولويات العمل الحكومي. وأكد أوزين أنه تردد كثيرا قبل كتابة هذه الرسالة، لكن المسؤولية السياسية', 'size': 2}, {'id': '352', 'title': 'أوزين: المغاربة لا يريدون طائرات للإسعاف بل مستشفيات في مناطقهم', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1100916.html', 'summary': 'أوزين: المغاربة لا يريدون طائرات للإسعاف بل مستشفيات في مناطقهم. وجه الأمين العام لحزب الحركة الشعبية، محمد أوزين، رسالة مفتوحة إلى التحالف الحكومي، عبّر فيها عن تقييم نقدي لاذع لأداء الحكومة، متهما إياها بتبني سياسات ارتجالية أثرت بشكل مباشر على القدرة الشرائية للمواطنين ومستوى عيشهم. وأوضح أوزين أن قراره بمخاطبة الحكومة بهذه الرسالة جاء رغم تردده السابق، مؤكدا أن الوضع الراهن يستدعي من جميع الأطراف، ظهرت المقالة أوزين: المغاربة لا يريدون طائرات للإسعاف بل مستشفيات في مناطقهم  .', 'size': 2}], 'main_title': 'في رسالة مفتوحة.. أوزين ينتقد ارتباك الحكومة'}, {'community_id': '6', 'articles': [{'id': '134', 'title': 'الورش الجديد لإصلاح السفن بالدار البيضاء .. نحو تعزيز مكانة ميناء المدينة في السوق العالمية', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/323784/', 'summary': 'الورش الجديد لإصلاح السفن بالدار البيضاء .. نحو تعزيز مكانة ميناء المدينة في السوق العالمية. يعد الورش الجديد لإصلاح السفن بالدار البيضاء، الذي دشنه صاحب الجلالة الملك محمد السادس، اليوم الخميس، مشروعا مهيكلا يروم تعزيز مكانة ميناء العاصمة الاقتصادية في السوق العالمية للصناعات البحرية، إن على مستوى بناء السفن أو إصلاحها. كما يروم هذا المشروع الوازن إعادة هيكلة وتطوير قطاع صناعة وإصلاح السفن في المغرب، وجذب المزيد من الاستثمارات في', 'size': 2}, {'id': '221', 'title': 'الورش الجديد لإصلاح السفن يعزز مكانة ميناء العاصمة الاقتصادية في السوق العالمية للصناعات البحرية', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/227258/', 'summary': 'الورش الجديد لإصلاح السفن يعزز مكانة ميناء العاصمة الاقتصادية في السوق العالمية للصناعات البحرية. يعد الورش الجديد لإصلاح السفن بالدار البيضاء، الذي دشنه صاحب الجلالة الملك محمد السادس، اليوم الخميس، مشروعا مهيكلا يروم تعزيز مكانة ميناء العاصمة الاقتصادية في السوق العالمية للصناعات البحرية، إن على مستوى بناء السفن أو إصلاحها. كما يروم هذا المشروع الوازن إعادة هيكلة وتطوير قطاع صناعة وإصلاح السفن في المغرب، وجذب المزيد من الاستثمارات في', 'size': 2}], 'main_title': 'الورش الجديد لإصلاح السفن بالدار البيضاء .. نحو تعزيز مكانة ميناء المدينة في السوق العالمية'}, {'community_id': '11', 'articles': [{'id': '138', 'title': 'المغرب والبرتغال يتبادلان وجهات النظر حول عدد من المواضيع المتعلقة بمونديال 2030', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/323770/', 'summary': 'المغرب والبرتغال يتبادلان وجهات النظر حول عدد من المواضيع المتعلقة بمونديال 2030. استقبل رئيس الجامعة الملكية المغربية لكرة القدم، فوزي لقجع، اليوم الخميس، رئيس الاتحاد البرتغالي لكرة القدم ،بيدرو بروينسا، وتبادل معه وجهات النظر حول عدد من المواضيع المتعلقة بمونديال 2030. وأفاد بلاغ للجامعة الملكية المغربية لكرة القدم بأنه خلال هذا اللقاء الذي جمع الشريكين في تنظيم كأس العالم 2030، بالإضافة إلى إسبانيا، “تبادل الطرفان وجهات النظر', 'size': 5}, {'id': '188', 'title': 'المغرب والبرتغال يتبادلان وجهات النظر حول المواضيع المتعلقة بمونديال 2030', 'source': 'machahid24.com', 'link': 'https://machahid24.com/sport/476028.html', 'summary': 'المغرب والبرتغال يتبادلان وجهات النظر حول المواضيع المتعلقة بمونديال 2030. استقبل رئيس الجامعة الملكية المغربية لكرة القدم، فوزي لقجع، الخميس، رئيس الاتحاد البرتغالي لكرة القدم، بيدرو بروينسا، وتبادل معه وجهات النظر حول عدد من المواضيع المتعلقة بمونديال 2030. وأفاد بلاغ للجامعة الملكية المغربية لكرة القدم بأنه خلال هذا اللقاء الذي جمع الشريكين في تنظيم كأس العالم 2030، بالإضافة إلى إسبانيا، “تبادل الطرفان وجهات النظر حول …', 'size': 4}, {'id': '217', 'title': 'كرة القدم.. المغرب والبرتغال يتبادلان وجهات النظر حول عدد من المواضيع المتعلقة بمونديال 2030 (بلاغ)', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/227272/', 'summary': 'كرة القدم.. المغرب والبرتغال يتبادلان وجهات النظر حول عدد من المواضيع المتعلقة بمونديال 2030 (بلاغ). الرباط – استقبل رئيس الجامعة الملكية المغربية لكرة القدم، فوزي لقجع، اليوم الخميس، رئيس الاتحاد البرتغالي لكرة القدم ،بيدرو بروينسا، وتبادل معه وجهات النظر حول عدد من المواضيع المتعلقة بمونديال 2030. وأفاد بلاغ للجامعة الملكية المغربية لكرة القدم بأنه خلال هذا اللقاء الذي جمع الشريكين في تنظيم كأس العالم 2030، بالإضافة إلى إسبانيا، “تبادل الطرفان', 'size': 3}, {'id': '238', 'title': 'فوزي لقجع يستقبل رئيس الاتحاد البرتغالي لمناقشة ترتيبات مونديال 2030', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d9%81%d9%88%d8%b2%d9%8a-%d9%84%d9%82%d8%ac%d8%b9-%d9%8a%d8%b3%d8%aa%d9%82%d8%a8%d9%84-%d8%b1%d8%a6%d9%8a%d8%b3-%d8%a7%d9%84%d8%a7%d8%aa%d8%ad%d8%a7%d8%af-%d8%a7%d9%84%d8%a8%d8%b1%d8%aa%d8%ba%d8%a7/', 'summary': 'فوزي لقجع يستقبل رئيس الاتحاد البرتغالي لمناقشة ترتيبات مونديال 2030. استقبل رئيس الجامعة الملكية المغربية لكرة القدم، فوزي لقجع، اليوم الخميس 18 شتنبر 2025، رئيس الاتحاد البرتغالي لكرة القدم، بيدرو بروينسا، وتبادل معه وجهات النظر حول عدد من المواضيع المتعلقة بمونديال 2030. وأكد بلاغ للجامعة الملكية المغربية لكرة القدم، بأنه خلال هذا اللقاء الذي جمع الشريكين في تنظيم كأس العالم 2030، بالإضافة إلى …  فوزي لقجع يستقبل رئيس الاتحاد البرتغالي لمناقشة ترتيبات مونديال 2030     .', 'size': 3}, {'id': '359', 'title': 'كأس العالم 2030.. لقجع يستقبل رئيس الاتحاد البرتغالي', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d9%83%d8%a3%d8%b3-%d8%a7%d9%84%d8%b9%d8%a7%d9%84%d9%85-2030-%d9%84%d9%82%d8%ac%d8%b9-%d9%8a%d8%b3%d8%aa%d9%82%d8%a8%d9%84-%d8%b1%d8%a6%d9%8a%d8%b3-%d8%a7%d9%84%d8%a7%d8%aa%d8%ad%d8%a7%d8%af-%d8%a7/', 'summary': 'كأس العالم 2030.. لقجع يستقبل رئيس الاتحاد البرتغالي. استقبل فوزي لقجع، رئيس الجامعة الملكية المغربية لكرة القدم، أمس الخميس، بيدرو بروينسا، رئيس الاتحاد البرتغالي للعبة، وذلك في إطار الشراكة الثلاثية بين المغرب والبرتغال وإسبانيا لتنظيم نهائيات كأس العالم 2030. وفي بلاغ صادر عن الجهاز الكروي خلال الساعات الأخيرة، أوضحت الجامعة أن المسؤول البرتغالي عبر عن شكره لحفاوة الاستقبال الذي خصص له وللوفد المرافق  كأس العالم 2030.. لقجع يستقبل رئيس الاتحاد البرتغالي     .', 'size': 2}], 'main_title': 'المغرب والبرتغال يتبادلان وجهات النظر حول عدد من المواضيع المتعلقة بمونديال 2030'}, {'community_id': '13', 'articles': [{'id': '151', 'title': 'الدريوش: ميناء الصيد الجديد بالدار البيضاء رافعة استراتيجية لدعم القطاع وتثمين المنتوجات البحرية', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1100901.html', 'summary': 'الدريوش: ميناء الصيد الجديد بالدار البيضاء رافعة استراتيجية لدعم القطاع وتثمين المنتوجات البحرية. أكد مسؤولون بارزون في قطاعي الصيد البحري والموانئ أن المشاريع الكبرى التي دشنها الملك محمد السادس بالمركب المينائي للدار البيضاء، اليوم الخميس، تمثل تحولا استراتيجيا يهدف إلى تعزيز مكانة المغرب كقوة بحرية إقليمية، وتطوير منظومات صناعية متكاملة قادرة على المنافسة عالميا. وفي هذا الإطار، وصفت كاتبة الدولة المكلفة بالصيد البحري، زكية الدريوش، ميناء الصيد البحري ظهرت المقالة الدريوش: ميناء الصيد الجديد بالدار البيضاء رافعة استراتيجية لدعم القطاع وتثمين المنتوجات البحرية  .', 'size': 2}, {'id': '200', 'title': 'الدريوش: ميناء الصيد البحري الجديد بالدار البيضاء رافعة استراتيجية جديدة للنهوض بالقطاع', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d8%a7%d9%84%d8%af%d8%b1%d9%8a%d9%88%d8%b4-%d9%85%d9%8a%d9%86%d8%a7%d8%a1-%d8%a7%d9%84%d8%b5%d9%8a%d8%af-%d8%a7%d9%84%d8%a8%d8%ad%d8%b1%d9%8a-%d8%a7%d9%84%d8%ac%d8%af%d9%8a%d8%af-%d8%a8%d8%a7%d9%84/', 'summary': 'الدريوش: ميناء الصيد البحري الجديد بالدار البيضاء رافعة استراتيجية جديدة للنهوض بالقطاع. أكدت كاتبة الدولة المكلفة بالصيد البحري، زكية الدريوش، أن ميناء الصيد البحري الجديد الذي دشنه صاحب الجلالة الملك محمد السادس، اليوم الخميس بالدار البيضاء،  الدريوش: ميناء الصيد البحري الجديد بالدار البيضاء رافعة استراتيجية جديدة للنهوض بالقطاع     .', 'size': 2}], 'main_title': 'الدريوش: ميناء الصيد الجديد بالدار البيضاء رافعة استراتيجية لدعم القطاع وتثمين المنتوجات البحرية'}, {'community_id': '0', 'articles': [{'id': '174', 'title': 'طقس اليوم: أجواء حارة مع أمطار رعدية بهذه المناطق', 'source': 'soltana.ma', 'link': 'https://soltana.ma/1357858.html', 'summary': 'طقس اليوم: أجواء حارة مع أمطار رعدية بهذه المناطق. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليومه الخميس، أن تتميز الحالة الجوية عامة بطقس حار نسبيا بكل من السهول المتواجدة غرب الأطلس، ومنطقة سوس، والجنوب الشرقي والأقاليم الصحراوية. كما يرتقب تشكل سحب منخفضة مصحوبة بأمطار جد خفيفة محليا فوق السواحل الشمالية والوسطى وشرق الواجهة المتوسطية خلال الصباح والليل، فضلا عن انتشار سحب غير مستقرة مصحوبة', 'size': 3}, {'id': '341', 'title': 'طقس الجمعة.. أمطار رعدية ورياح بهذه المناطق المغربية', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-589883.html', 'summary': 'طقس الجمعة.. أمطار رعدية ورياح بهذه المناطق المغربية. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليوم الجمعة، أن تتميز الحالة الجوية عامة بطقس حار نسبيا إلى حار بكل من السهول المتواجدة غرب الأطلس، والسايس، ومنطقة سوس، والجنوب الشرقي وبالأقاليم الصحراوية. كما يرتقب تشكل سحب منخفضة وكتل ضبابية مصحوبة بأمطار جد خفيفة محليا فوق السواحل الشمالية والوسطى والواجهة المتوسطية خلال الصباح والليل،', 'size': 3}, {'id': '361', 'title': 'طقس حار مع أمطار خفيفة متوقعة اليوم الجمعة', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%b7%d9%82%d8%b3-%d8%ad%d8%a7%d8%b1-%d9%85%d8%b9-%d8%a3%d9%85%d8%b7%d8%a7%d8%b1-%d8%ae%d9%81%d9%8a%d9%81%d8%a9-%d9%85%d8%aa%d9%88%d9%82%d8%b9%d8%a9-%d8%a7%d9%84%d9%8a%d9%88%d9%85-%d8%a7%d9%84%d8%ac/', 'summary': 'طقس حار مع أمطار خفيفة متوقعة اليوم الجمعة. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الجمعة، أن تتميز الحالة الجوية عامة بطقس حار نسبيا إلى حار بكل من السهول المتواجدة غرب الأطلس، والسايس، ومنطقة سوس، والجنوب الشرقي وبالأقاليم الصحراوية. كما يرتقب تشكل سحب منخفضة وكتل ضبابية مصحوبة بأمطار جد خفيفة محليا فوق السواحل الشمالية والوسطى والواجهة المتوسطية خلال الصباح والليل، فضلا عن انتشار  طقس حار مع أمطار خفيفة متوقعة اليوم الجمعة     .', 'size': 3}], 'main_title': 'طقس اليوم: أجواء حارة مع أمطار رعدية بهذه المناطق'}, {'community_id': '3', 'articles': [{'id': '228', 'title': 'وسيط المملكة: الإدارية تستلزم يقظة المُشرّع والالتزام بالدستور', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d9%88%d8%b3%d9%8a%d8%b7-%d8%a7%d9%84%d9%85%d9%85%d9%84%d9%83%d8%a9-%d8%a7%d9%84%d8%a5%d8%af%d8%a7%d8%b1%d9%8a%d8%a9-%d8%aa%d8%b3%d8%aa%d9%84%d8%b2%d9%85-%d9%8a%d9%82%d8%b8%d8%a9-%d8%a7%d9%84%d9%85/', 'summary': 'وسيط المملكة: الإدارية تستلزم يقظة المُشرّع والالتزام بالدستور. المساء اليوم – الرباط: قال وسيط المملكة، حسن طارق، إن المساواة الإدارية تستلزم يقظة المشرع مع استحضاره لأفق المساواة والتزام الإدارة بالسقف الدستوري. وأضاف طارق، أمس الأربعاء بالرباط خلال افتتاح ورشة تفاعلية مع مكونات المجتمع', 'size': 2}, {'id': '323', 'title': 'إدارات في قفص التمييز', 'source': 'assabah.ma', 'link': 'https://assabah.ma/871877.html', 'summary': 'إدارات في قفص التمييز. حذر حسن طارق، وسيط المملكة، أول أمس (الأربعاء) بالرباط، من عدم تشبع الإدارة بمرجعية قيمية حديثة، والتهاون في حماية الحقوق وتجاهل المعايير لتجنب السقوط في التمييز. وشدد طارق، خلال افتتاح ورشة تفاعلية مع مكونات المجتمع المدني حول “الإدارة المغربية ورهان المساواة بين الجنسين”، على أن المساواة الإداريةأكمل القراءة » المقالة إدارات في قفص التمييز  .', 'size': 2}], 'main_title': 'وسيط المملكة: الإدارية تستلزم يقظة المُشرّع والالتزام بالدستور'}, {'community_id': '8', 'articles': [{'id': '234', 'title': 'السفير البريطاني السابق: مشاريع الملك بالمركب المينائي للدار البيضاء تعزز تموقع المغرب كجسر بين أوروبا وإفريقيا', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d8%b3%d9%81%d9%8a%d8%b1-%d8%a7%d9%84%d8%a8%d8%b1%d9%8a%d8%b7%d8%a7%d9%86%d9%8a-%d8%a7%d9%84%d8%b3%d8%a7%d8%a8%d9%82-%d9%85%d8%b4%d8%a7%d8%b1%d9%8a%d8%b9-%d8%a7%d9%84%d9%85%d9%84%d9%83/', 'summary': 'السفير البريطاني السابق: مشاريع الملك بالمركب المينائي للدار البيضاء تعزز تموقع المغرب كجسر بين أوروبا وإفريقيا. قال السفير السابق للمملكة المتحدة بالمغرب، توماس رايلي، إن المشاريع التي أشرف الملك محمد السادس، على تدشينها، اليوم الخميس 18 شتنبر 2025، في إطار إعادة هيكلة وتطوير المركب المينائي للدار البيضاء، “تعزز تموقع المغرب كجسر يربط بين أوروبا وإفريقيا”. وأكد رايلي، في تصريح لوكالة المغرب العربي للأنباء، أن “الأمر يتعلق بمشاريع مبهرة”، مبرزا …  السفير البريطاني السابق: مشاريع الملك بالمركب المينائي للدار البيضاء تعزز تموقع المغرب كجسر بين أوروبا وإفريقيا     .', 'size': 2}, {'id': '315', 'title': 'توماس رايلي: المشاريع التي دشنها جلالة الملك “تعزز تموقع المغرب كجسر بين أوروبا وإفريقيا”', 'source': 'assabah.ma', 'link': 'https://assabah.ma/871965.html', 'summary': 'توماس رايلي: المشاريع التي دشنها جلالة الملك “تعزز تموقع المغرب كجسر بين أوروبا وإفريقيا”. أكد السفير السابق للمملكة المتحدة بالمغرب، توماس رايلي، أن المشاريع التي أشرف صاحب الجلالة الملك محمد السادس، على تدشينها، اليوم الخميس، في إطار إعادة هيكلة وتطوير المركب المينائي للدار البيضاء، “تعزز تموقع المغرب كجسر يربط بين أوروبا وإفريقيا”. وقال رايلي، في تصريح لوكالة المغرب العربي للأنباء، إنأكمل القراءة » المقالة توماس رايلي: المشاريع التي دشنها جلالة الملك “تعزز تموقع المغرب كجسر بين أوروبا وإفريقيا”  .', 'size': 2}], 'main_title': 'السفير البريطاني السابق: مشاريع الملك بالمركب المينائي للدار البيضاء تعزز تموقع المغرب كجسر بين أوروبا وإفريقيا'}, {'community_id': '7', 'articles': [{'id': '243', 'title': 'برقية تهنئة من الملك محمد السادس إلى رئيس جمهورية الشيلي بمناسبة العيد الوطني لبلاده', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a8%d8%b1%d9%82%d9%8a%d8%a9-%d8%aa%d9%87%d9%86%d8%a6%d8%a9-%d9%85%d9%86-%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%85%d8%ad%d9%85%d8%af-%d8%a7%d9%84%d8%b3%d8%a7%d8%af%d8%b3-%d8%a5%d9%84%d9%89-%d8%b1-18/', 'summary': 'برقية تهنئة من الملك محمد السادس إلى رئيس جمهورية الشيلي بمناسبة العيد الوطني لبلاده. بعث الملك محمد السادس برقية تهنئة إلى رئيس جمهورية الشيلي، غابرييل بوريك فونت، وذلك بمناسبة احتفال بلاده بعيدها الوطني. وأعرب الملك محمد السادس، في هذه البرقية، عن تهانئه الحارة، مشفوعة بمتمنيات جلالته الخالصة لبوريك فونت شخصيا بموفور الصحة والسعادة، وللشعب الشيلي بمزيد الازدهار والرخاء. ومما جاء في برقية الملك محمد السادس “ولا يفوتني …  برقية تهنئة من الملك محمد السادس إلى رئيس جمهورية الشيلي بمناسبة العيد الوطني لبلاده     .', 'size': 2}, {'id': '314', 'title': 'برقية تهنئة من جلالة الملك إلى رئيس جمهورية الشيلي بمناسبة العيد الوطني لبلاده', 'source': 'assabah.ma', 'link': 'https://assabah.ma/871973.html', 'summary': 'برقية تهنئة من جلالة الملك إلى رئيس جمهورية الشيلي بمناسبة العيد الوطني لبلاده. بعث صاحب الجلالة الملك محمد السادس برقية تهنئة إلى رئيس جمهورية الشيلي، غابرييل بوريك فونت، وذلك بمناسبة احتفال بلاده بعيدها الوطني. وأعرب جلالة الملك، في هذه البرقية، عن تهانئه الحارة، مشفوعة بمتمنيات جلالته الخالصة للسيد بوريك فونت شخصيا بموفور الصحة والسعادة، وللشعب الشيلي بمزيد الازدهار والرخاء. ومماأكمل القراءة » المقالة برقية تهنئة من جلالة الملك إلى رئيس جمهورية الشيلي بمناسبة العيد الوطني لبلاده  .', 'size': 2}], 'main_title': 'برقية تهنئة من الملك محمد السادس إلى رئيس جمهورية الشيلي بمناسبة العيد الوطني لبلاده'}, {'community_id': '9', 'articles': [{'id': '334', 'title': 'زلزال بقوة 7,8 درجات يضرب روسيا وتحذيرات من تسونامي', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-589938.html', 'summary': 'زلزال بقوة 7,8 درجات يضرب روسيا وتحذيرات من تسونامي. أعلن المعهد الأميركي للمسح الجيولوجي أن زلزالا بلغت قوته 7,8 درجات ضرب، الجمعة، قبالة سواحل شبه جزيرة كامشاتكا في أقصى الشرق الروسي، ما استدعى إصدار تحذيرات من احتمال حدوث موجات مد بحري (تسونامي) قبل أن يتم رفعها لاحقا. وحدد مركز الزلزال على بعد نحو 128 كيلومترا شرق مدينة بيتروبافلوسك-كامشاتسكي، وعلى عمق عشرة', 'size': 2}, {'id': '351', 'title': 'تحذيرات من تسونامي بالمحيط الهادئ بعد زلزال بقوة 7,8 درجات قبالة أقصى الشرق الروسي', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1100946.html', 'summary': 'تحذيرات من تسونامي بالمحيط الهادئ بعد زلزال بقوة 7,8 درجات قبالة أقصى الشرق الروسي. أعلن المعهد الأميركي للمسح الجيولوجي أن زلزالا بلغت قوته 7,8 درجات ضرب، اليوم الجمعة، قبالة سواحل شبه جزيرة كامشاتكا في أقصى الشرق الروسي، ما استدعى إصدار تحذيرات من احتمال حدوث موجات مد بحري (تسونامي) قبل أن يتم رفعها لاحقا. وحدد مركز الزلزال على بعد نحو 128 كيلومترا شرق مدينة بيتروبافلوسك-كامشاتسكي، وعلى عمق عشرة كيلومترات فقط، ظهرت المقالة تحذيرات من تسونامي بالمحيط الهادئ بعد زلزال بقوة 7,8 درجات قبالة أقصى الشرق الروسي  .', 'size': 2}], 'main_title': 'زلزال بقوة 7,8 درجات يضرب روسيا وتحذيرات من تسونامي'}, {'community_id': '10', 'articles': [{'id': '346', 'title': 'وزير التعليم يعترف بتعثر صرف منحة المناطق النائية للأساتذة', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1100984.html', 'summary': 'وزير التعليم يعترف بتعثر صرف منحة المناطق النائية للأساتذة. اعترف وزير التربية الوطنية والتعليم الأولي والرياضة، محمد سعد برادة، اليوم الجمعة بالرباط، بوجود تعثر في صرف المنحة المخصصة للأساتذة العاملين في المناطق النائية. وأوضح الوزير، خلال ندوة صحفية خُصصت لتقديم مستجدات الدخول المدرسي 2025-2026، أن الإشكال الرئيسي يتعلق بصعوبة تحديد المناطق المصنفة كـ”صعبة” أو “نائية”، والخصائص التي تميزها عن غيرها. وأشار برادة إلى أن ظهرت المقالة وزير التعليم يعترف بتعثر صرف منحة المناطق النائية للأساتذة  .', 'size': 2}, {'id': '354', 'title': 'باستثناء حالات محدودة.. برادة: جميع الأساتذة الجدد التحقوا بمؤسساتهم', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a8%d8%a7%d8%b3%d8%aa%d8%ab%d9%86%d8%a7%d8%a1-%d8%ad%d8%a7%d9%84%d8%a7%d8%aa-%d9%85%d8%ad%d8%af%d9%88%d8%af%d8%a9-%d8%a8%d8%b1%d8%a7%d8%af%d8%a9-%d8%ac%d9%85%d9%8a%d8%b9-%d8%a7%d9%84%d8%a3%d8%b3/', 'summary': 'باستثناء حالات محدودة.. برادة: جميع الأساتذة الجدد التحقوا بمؤسساتهم. أكد محمد سعد برادة، وزير التربية الوطنية والتعليم الأولي والرياضة، أن جميع الأساتذة الجدد التحقوا بمؤسساتهم التعليمية بعد 6 شتنبر، وهو موعد انتهاء الحركة الإقليمية التي نظمت لأول مرة بتشاور مع النقابات. وأوضح الوزير، خلال ندوة صحافية عقدت اليوم الجمعة بالرباط، أنه في حال عدم التحاق بعض الأساتذة فإن عددهم يظل محدودا، مؤكدا أن العمل  باستثناء حالات محدودة.. برادة: جميع الأساتذة الجدد التحقوا بمؤسساتهم     .', 'size': 2}], 'main_title': 'وزير التعليم يعترف بتعثر صرف منحة المناطق النائية للأساتذة'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    