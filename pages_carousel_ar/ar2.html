<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 06/10/2025 - 12h25</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '18', 'title': 'استئنافية مراكش تؤيد إدانة رئيس جماعة “آيت حمو”', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-663478.html', 'summary': 'استئنافية مراكش تؤيد إدانة رئيس جماعة “آيت حمو”. مراكش-محمد الهروالي أيدت محكمة الاستئناف بمراكش الحكم الابتدائي الصادر في حقّ ميلود جبران، رئيس جماعة آيت حمو بإقليم الرحامنة، والقاضي بشهر واحد موقوف التنفيذ وغرامة 2000 درهم، على خلفية تصويته في غرفتين مهنيتين مختلفتين خلال الاستحقاقات الأخيرة. وتوبع المعني بالأمر، المنتمي لحزب التجمع الوطني للأحرار، في حالة سراح، بجنحة “الحصول على قيد في أكثر من', 'size': 2}, {'id': '353', 'title': 'محكمة الإستئناف بمراكش تؤيد إدانة رئيس جماعة بسبب خرق انتخابي', 'source': 'rue20.com', 'link': 'https://rue20.com/942398.html', 'summary': 'محكمة الإستئناف بمراكش تؤيد إدانة رئيس جماعة بسبب خرق انتخابي.  ا مراكش | محمد المفرك أيدت محكمة الاستئناف بمراكش الحكم الابتدائي الصادر في حق ميلود جبران، رئيس مجلس جماعة آيت حمّو بإقليم الرحامنة، والقاضي بشهر حبس موقوف التنفيذ وغرامة مالية قدرها 2000 درهم، على خلفية تصويته في غرفتين مهنيتين مختلفتين خلال الانتخابات المهنية الأخيرة. وتعود تفاصيل القضية إلى شكاية تقدم بها خمسة مستشارين الخبر محكمة الإستئناف بمراكش تؤيد إدانة رئيس جماعة بسبب خرق انتخابي  .', 'size': 2}], 'main_title': 'استئنافية مراكش تؤيد إدانة رئيس جماعة “آيت حمو”'}, {'community_id': '1', 'articles': [{'id': '54', 'title': 'ولي العهد الأمير مولاي الحسن يترأس بالجديدة حفل تسليم الجائزة الكبرى لصاحب الجلالة الملك محمد السادس للقفز على الحواجز', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/207049', 'summary': 'ولي العهد الأمير مولاي الحسن يترأس بالجديدة حفل تسليم الجائزة الكبرى لصاحب الجلالة الملك محمد السادس للقفز على الحواجز.  ترأس صاحب السمو الملكي ولي العهد الأمير مولاي الحسن، عشية اليوم الأحد بمركز المعارض محمد السادس بالجديدة، حفل تسليم الجائزة الكبرى لصاحب الجلالة الملك محمد السادس للقفز على الحواجز، برسم المرحلة النهائية من النسخة الرابعة عشرة للدوري الملكي المغربي الدولي للقفز على الحواجز(فئة أربع نجوم)، المنظمة في إطار الدورة السادسة عشرة لمعرض الفرس. ولدى', 'size': 5}, {'id': '90', 'title': 'الأمير مولاي الحسن يترأس بالجديدة حفل تسليم الجائزة الكبرى للملك محمد السادس في القفز على الحواجز', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/413987.html', 'summary': 'الأمير مولاي الحسن يترأس بالجديدة حفل تسليم الجائزة الكبرى للملك محمد السادس في القفز على الحواجز. ترأس صاحب السمو الملكي ولي العهد الأمير مولاي الحسن، عشية اليوم الأحد بمركز المعارض محمد السادس بالجديدة، حفل تسليم الجائزة الكبرى لصاحب الجلالة الملك محمد', 'size': 5}, {'id': '134', 'title': 'الأمير مولاي الحسن يترأس حفل تسليم الجائزة الكبرى للملك محمد السادس للقفز على الحواجز', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-592506.html', 'summary': 'الأمير مولاي الحسن يترأس حفل تسليم الجائزة الكبرى للملك محمد السادس للقفز على الحواجز. ترأس ولي العهد الأمير مولاي الحسن، عشية اليوم الأحد بمركز المعارض محمد السادس بالجديدة، حفل تسليم الجائزة الكبرى للملك محمد السادس للقفز على الحواجز، برسم المرحلة النهائية من النسخة الرابعة عشرة للدوري الملكي المغربي الدولي للقفز على الحواجز(فئة أربع نجوم)، المنظمة في إطار الدورة السادسة عشرة لمعرض الفرس. ولدى وصول ولي العهد الأمير', 'size': 5}, {'id': '178', 'title': 'الأمير مولاي الحسن يترأس بالجديدة حفل تسليم الجائزة الكبرى للقفز على الحواجز', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/477620.html', 'summary': 'الأمير مولاي الحسن يترأس بالجديدة حفل تسليم الجائزة الكبرى للقفز على الحواجز. ترأس ولي العهد الأمير مولاي الحسن، عشية اليوم الأحد بمركز المعارض محمد السادس بالجديدة، حفل تسليم الجائزة الكبرى الملك محمد السادس للقفز على الحواجز، برسم المرحلة النهائية من النسخة الرابعة عشرة للدوري الملكي المغربي الدولي للقفز على الحواجز(فئة أربع نجوم)، المنظمة في إطار الدورة السادسة عشرة لمعرض الفرس. إثر ذلك، تقدم للسلام على صاحب السمو …', 'size': 5}, {'id': '207', 'title': 'ولي العهد مولاي الحسن يسلم الجائزة الكبرى لصاحب الجلالة الملك محمد السادس للقفز على الحواجز', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/228061/', 'summary': 'ولي العهد مولاي الحسن يسلم الجائزة الكبرى لصاحب الجلالة الملك محمد السادس للقفز على الحواجز. ترأس صاحب السمو الملكي ولي العهد الأمير مولاي الحسن، عشية اليوم الأحد بمركز المعارض محمد السادس بالجديدة، حفل تسليم الجائزة الكبرى لصاحب الجلالة الملك محمد السادس للقفز على الحواجز، برسم المرحلة النهائية من النسخة الرابعة عشرة للدوري الملكي المغربي الدولي للقفز على الحواجز(فئة أربع نجوم)، المنظمة في إطار الدورة السادسة عشرة لمعرض الفرس. ولدى وصول', 'size': 5}], 'main_title': 'ولي العهد الأمير مولاي الحسن يترأس بالجديدة حفل تسليم الجائزة الكبرى لصاحب الجلالة الملك محمد السادس للقفز على الحواجز'}, {'community_id': '2', 'articles': [{'id': '75', 'title': 'استعداداً لكأس العرب بقطر.. المنتخب المغربي الرديف يواجه مصر والكويت ودياً', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/sport/lionatlas/413972.html', 'summary': 'استعداداً لكأس العرب بقطر.. المنتخب المغربي الرديف يواجه مصر والكويت ودياً. يخوض المنتخب الوطني الرديف مباراتين وديتين أمام نظيريه المصري والكويتي تواليا ،يومي 9 و 14 أكتوبر الجاري، وذلك في إطار استعداداته لكأس العرب للمنتخبات، المقرر', 'size': 2}, {'id': '180', 'title': 'كأس العرب.. مباراتان وديتان للمنتخب الوطني الرديف أمام نظيريه المصري والكويتي', 'source': 'machahid24.com', 'link': 'https://machahid24.com/sport/477608.html', 'summary': 'كأس العرب.. مباراتان وديتان للمنتخب الوطني الرديف أمام نظيريه المصري والكويتي. يخوض المنتخب الوطني الرديف مباراتين وديتين أمام نظيريه المصري والكويتي تواليا يومي 9 و 14 أكتوبر الجاري، وذلك في إطار استعداداته لكأس العرب للمنتخبات، المقرر تنظيمها في قطر ما بين 1 و18 دجنبر المقبل.', 'size': 2}, {'id': '382', 'title': 'استعدادا لكأس العرب: المنتخب الرديف يواجه مصر والكويت', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%a7%d8%b3%d8%aa%d8%b9%d8%af%d8%a7%d8%af%d8%a7-%d9%84%d9%83%d8%a3%d8%b3-%d8%a7%d9%84%d8%b9%d8%b1%d8%a8-%d8%a7%d9%84%d9%85%d9%86%d8%aa%d8%ae%d8%a8-%d8%a7%d9%84%d8%b1%d8%af%d9%8a%d9%81-%d9%8a%d9%88/', 'summary': 'استعدادا لكأس العرب: المنتخب الرديف يواجه مصر والكويت. المساء اليوم: يخوض المنتخب الوطني الرديف مباراتين وديتين أمام نظيريه المصري والكويتي تواليا ،يومي 9 و 14 أكتوبر الجاري، وذلك في إطار استعداداته لكأس العرب للمنتخبات، المقرر تنظيمها في قطر ما بين 1 و18 دجنبر', 'size': 3}], 'main_title': 'استعدادا لكأس العرب: المنتخب الرديف يواجه مصر والكويت'}, {'community_id': '3', 'articles': [{'id': '88', 'title': 'الخنوس يسجل مجددا لشتوتغارت ويصعد به إلى المركز الرابع', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/sport/proplayers/413985.html', 'summary': 'الخنوس يسجل مجددا لشتوتغارت ويصعد به إلى المركز الرابع. سجل المغربي الدولي بلال الخنوس هدفا فرديا رائعا منح فريقه شتوتغارت الفوز على هايدنهايم 1-0 الأحد في المرحلة السادسة من بطولة المانيا لكرة القدم. وصعد شتوتغارت', 'size': 2}, {'id': '102', 'title': 'بهدف فردي.. الدولي المغربي بلال الخنوس يهدي شتوتغارت فوزًا ثمينًا', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a8%d9%87%d8%af%d9%81-%d9%81%d8%b1%d8%af%d9%8a-%d8%a7%d9%84%d8%af%d9%88%d9%84%d9%8a-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8%d9%8a-%d8%a8%d9%84%d8%a7%d9%84-%d8%a7%d9%84%d8%ae%d9%86%d9%88%d8%b3-%d9%8a/', 'summary': 'بهدف فردي.. الدولي المغربي بلال الخنوس يهدي شتوتغارت فوزًا ثمينًا. سجل الدولي المغربي بلال الخنوس هدفا فرديا رائعا، منح فريقه شتوتغارت الفوز على هايدنهايم 1-0 اليوم الأحد (05 أكتوبر) في المرحلة السادسة من بطولة المانيا لكرة القدم. وصعد شتوتغارت إلى المركز الرابع مستغلا سقوط اينتراخت فرانكفورت على أرضه أمام بايرن ميونيخ المتصدر 0-3 السبت، برصيد 12 نقطة. وعانى شتوتغارت الذي مني بخسارة مفاجئة امام بازل', 'size': 2}], 'main_title': 'الخنوس يسجل مجددا لشتوتغارت ويصعد به إلى المركز الرابع'}, {'community_id': '8', 'articles': [{'id': '100', 'title': 'من بين 9 نساء..  الفرنسية المغربية نعيمة موتشو تنضم لحكومة لوكورنو', 'source': 'kifache.com', 'link': 'https://kifache.com/%d9%85%d9%86-%d8%a8%d9%8a%d9%86-9-%d9%86%d8%b3%d8%a7%d8%a1-%d8%a7%d9%84%d9%81%d8%b1%d9%86%d8%b3%d9%8a%d8%a9-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8%d9%8a%d8%a9-%d9%86%d8%b9%d9%8a%d9%85%d8%a9-%d9%85/', 'summary': 'من بين 9 نساء.. الفرنسية المغربية نعيمة موتشو تنضم لحكومة لوكورنو. جرى، اليوم الأحد (05 أكتوبر)، تعيين النائبة الفرنسية-المغربية نعيمة موتشو، التي شغلت سابقا منصب نائبة رئيس الجمعية الوطنية الفرنسية، وزيرة للتحول والوظيفة العمومية والذكاء الاصطناعي والرقمنة في الحكومة الجديدة التي يقودها سباستيان لوكورنو. وولدت موتشو بإقليم فال دواز شمال باريس لوالدين ينحدران من مدينة ورزازات، وكانت أيضا عضوا في مجموعة الصداقة الفرنسية-المغربية داخل الجمعية الوطنية.', 'size': 2}, {'id': '129', 'title': 'الفرنسية-المغربية نعيمة موتشو تنضم لحكومة لوكورنو', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-592519.html', 'summary': 'الفرنسية-المغربية نعيمة موتشو تنضم لحكومة لوكورنو. جرى، الأحد، تعيين النائبة الفرنسية-المغربية نعيمة موتشو، التي شغلت سابقا منصب نائبة رئيس الجمعية الوطنية الفرنسية، وزيرة للتحول والوظيفة العمومية والذكاء الاصطناعي والرقمنة في الحكومة الجديدة التي يقودها سباستيان لوكورنو. وولدت موتشو بإقليم فال دواز شمال باريس لوالدين ينحدران من مدينة ورزازات، وكانت أيضا عضوا في مجموعة الصداقة الفرنسية-المغربية داخل الجمعية الوطنية.', 'size': 2}], 'main_title': 'من بين 9 نساء..  الفرنسية المغربية نعيمة موتشو تنضم لحكومة لوكورنو'}, {'community_id': '4', 'articles': [{'id': '128', 'title': 'الجيش الملكي يدك شباك أولمبيك آسفي ويرتقي للمركز الثالث', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-592522.html', 'summary': 'الجيش الملكي يدك شباك أولمبيك آسفي ويرتقي للمركز الثالث. تمكن نادي الجيش الملكي من تحقيق فوز كبير على مُضيفه نادي أولمبيك آسفي بنتيجة 0-3، في المباراة التي جمعت بينهما مساء الأحد، لحساب الجولة الرابعة من البطولة الاحترافية “إنوي”. وتلقى أولمبيك آسفي، ضربة موجعة في وقت مُبكر، بعد طرد لاعبه ياسين كورداني، إثر حصوله على البطاقة الحمراء في المباراة التي أقيمت بملعب “المسيرة” بآسفي.', 'size': 2}, {'id': '138', 'title': 'الجيش الملكي يهزم أولمبيك آسفي بثلاثية نظيفة ويستعيد نغمة الانتصارات', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1105601.html', 'summary': 'الجيش الملكي يهزم أولمبيك آسفي بثلاثية نظيفة ويستعيد نغمة الانتصارات. انتصر الجيش الملكي على مضيفه أولمبيك آسفي، بثلاثة أهداف نظيفة، في المباراة التي دارت بينهما، مساء اليوم الأحد، على أرضية ملعب “المسيرة”، برسم الجولة الرابعة من البطولة الاحترافية – القسم الأول. وعاد الفريق العسكري إلى سكة الانتصارات في الدوري المحلي، بعدما اكتفى في الجولة السابقة بالتعادل أمام اتحاد طنجة بهدف لمثله، في حين مُني المسفيويون ظهرت المقالة الجيش الملكي يهزم أولمبيك آسفي بثلاثية نظيفة ويستعيد نغمة الانتصارات  .', 'size': 2}], 'main_title': 'الجيش الملكي يدك شباك أولمبيك آسفي ويرتقي للمركز الثالث'}, {'community_id': '5', 'articles': [{'id': '132', 'title': 'الرئاسة الفرنسية تعلن تشكيلة الحكومة الجديدة (فيديو)', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-592512.html', 'summary': 'الرئاسة الفرنسية تعلن تشكيلة الحكومة الجديدة (فيديو). أعلنت الرئاسة الفرنسية، مساء الأحد، عن تشكيلة الحكومة الجديدة برئاسة ساباستيان لوكورنو، والتي تضم 18 وزيرا. وتتميز هذه القائمة، بالإبقاء على عدة وزراء من التشكيلة السابقة، وعودة وزير المالية السابق برونو لو مير لتولي وزارة الجيوش، في حين أُسندت وزارة الاقتصاد والمالية إلى وزير الصناعة السابق، رولان ليسكيور. وهكذا، تم الاحتفاظ بـ12', 'size': 2}, {'id': '176', 'title': 'فرنسا.. الكشف عن تشكيلة الحكومة الجديدة', 'source': 'machahid24.com', 'link': 'https://machahid24.com/international/477630.html', 'summary': 'فرنسا.. الكشف عن تشكيلة الحكومة الجديدة. أعلنت الرئاسة الفرنسية، مساء الأحد، عن تشكيلة الحكومة الجديدة برئاسة ساباستيان لوكورنو، والتي تضم 18 وزيرا. وتتميز هذه القائمة، بالإبقاء على عدة وزراء من التشكيلة السابقة، وعودة وزير المالية السابق برونو لو مير لتولي وزارة الجيوش، في حين أُسندت وزارة الاقتصاد والمالية إلى وزير الصناعة السابق، رولان ليسكيور. وهكذا، تم الاحتفاظ بـ12 عضوا من الفريق …', 'size': 2}], 'main_title': 'الرئاسة الفرنسية تعلن تشكيلة الحكومة الجديدة (فيديو)'}, {'community_id': '6', 'articles': [{'id': '157', 'title': 'المغرب والأردن يوقعان اتفاقيتين في مجال التعاون القضائي والقانوني', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d9%88%d8%a7%d9%84%d8%a3%d8%b1%d8%af%d9%86-%d9%8a%d9%88%d9%82%d8%b9%d8%a7%d9%86-%d8%a7%d8%aa%d9%81%d8%a7%d9%82%d9%8a%d8%aa%d9%8a%d9%86-%d9%81%d9%8a-%d9%85%d8%ac/', 'summary': 'المغرب والأردن يوقعان اتفاقيتين في مجال التعاون القضائي والقانوني. وقع المغرب والأردن، اليوم الأحد بعمان، على اتفاقيتين، تهمان تعزيز التعاون الثنائي في المجالين القضائي والقانوني. وتتعلق الاتفاقيتان، اللتان وقعهما كل من وزير العدل عبد اللطيف وهبي ونظيره الأردني بسام التلهوني، بالمساعدة القانونية والقضائية المتبادلة في المسائل الجزائية/الجنائية، وبنقل المحكوم عليهم بعقوبات سالبة للحرية. وتسعى الاتفاقيتان، اللتان حضر حفل توقيعهما على الخصوص سفير المملكة بالأردن  المغرب والأردن يوقعان اتفاقيتين في مجال التعاون القضائي والقانوني     .', 'size': 2}, {'id': '179', 'title': 'المغرب والأردن يوقعان على اتفاقيتين في مجال التعاون القضائي والقانوني', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/477616.html', 'summary': 'المغرب والأردن يوقعان على اتفاقيتين في مجال التعاون القضائي والقانوني. وقع المغرب والأردن، اليوم الأحد بعمان، على اتفاقيتين، تهمان تعزيز التعاون الثنائي في المجالين القضائي والقانوني. وتتعلق الاتفاقيتان، اللتان وقعهما كل من وزير العدل عبد اللطيف وهبي ونظيره الأردني بسام التلهوني، بالمساعدة القانونية والقضائية المتبادلة في المسائل الجزائية/الجنائية، وبنقل المحكوم عليهم بعقوبات سالبة للحرية. وتسعى الاتفاقيتان، اللتان حضر حفل توقيعهما على الخصوص سفير المملكة بالأردن …', 'size': 2}], 'main_title': 'المغرب والأردن يوقعان اتفاقيتين في مجال التعاون القضائي والقانوني'}, {'community_id': '7', 'articles': [{'id': '184', 'title': 'إجهاض محاولة للتهريب الدولي للمخدرات بمعبر الكركارات', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/477593.html', 'summary': 'إجهاض محاولة للتهريب الدولي للمخدرات بمعبر الكركارات. أسفرت عملية أمنية مشتركة بين عناصر الأمن الوطني والجمارك بمعبر الكركارات الحدودي، جنوب مدينة الداخلة، مساء أمس السبت، عن إجهاض محاولة للتهريب الدولي للمخدرات وحجز 53 كيلوغراما و630 غراما من مخدر الكوكايين.', 'size': 3}, {'id': '208', 'title': 'معبر الكركارات.. إجهاض محاولة للتهريب الدولي للمخدرات وحجز 53 كلغ و630 غراما من الكوكايين', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/228059/', 'summary': 'معبر الكركارات.. إجهاض محاولة للتهريب الدولي للمخدرات وحجز 53 كلغ و630 غراما من الكوكايين. أسفرت عملية أمنية مشتركة بين عناصر الأمن الوطني والجمارك بمعبر الكركارات الحدودي، جنوب مدينة الداخلة، مساء اليوم السبت، عن إجهاض محاولة للتهريب الدولي للمخدرات وحجز 53 كيلوغراما و 630 غراما من مخدر الكوكايين. وذكر مصدر أمني أن عملية المراقبة الحدودية وإجراءات التفتيش، التي شاركت فيها الكلاب المدربة للشرطة، مكنت من ضبط شحنات المخدرات مخبأة بعناية', 'size': 3}, {'id': '215', 'title': 'قادمة من دولة إفريقية.. إجهاض محاولة تهريب شحنة من الكوكايين', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d9%82%d8%a7%d8%af%d9%85%d8%a9-%d9%85%d9%86-%d8%af%d9%88%d9%84%d8%a9-%d8%a5%d9%81%d8%b1%d9%8a%d9%82%d9%8a%d8%a9-%d8%a5%d8%ac%d9%87%d8%a7%d8%b6-%d9%85%d8%ad%d8%a7%d9%88%d9%84%d8%a9-%d8%aa%d9%87%d8%b1-2/', 'summary': 'قادمة من دولة إفريقية.. إجهاض محاولة تهريب شحنة من الكوكايين. المساء أسفرت عملية أمنية مشتركة بين عناصر الأمن الوطني والجمارك بمعبر الكركارات الحدودي، جنوب مدينة الداخلة، أمس السبت (4 أكتوبر)، عن إجهاض محاولة للتهريب الدولي للمخدرات وحجز 53 كيلوغراما و 630 غراما من مخدر', 'size': 3}], 'main_title': 'إجهاض محاولة للتهريب الدولي للمخدرات بمعبر الكركارات'}, {'community_id': '9', 'articles': [{'id': '345', 'title': 'أزمة سياسية في فرنسا.. رئيس الوزراء يقدم استقالته', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a3%d8%b2%d9%85%d8%a9-%d8%b3%d9%8a%d8%a7%d8%b3%d9%8a%d8%a9-%d9%81%d9%8a-%d9%81%d8%b1%d9%86%d8%b3%d8%a7-%d8%b1%d8%a6%d9%8a%d8%b3-%d8%a7%d9%84%d9%88%d8%b2%d8%b1%d8%a7%d8%a1-%d9%8a%d9%82%d8%af%d9%85/', 'summary': 'أزمة سياسية في فرنسا.. رئيس الوزراء يقدم استقالته. قدم رئيس الوزراء الفرنسي سيبستيان لوكورنو استقالته الاثنين إلى الرئيس إيمانويل ماكرون على ما أعلن قصر الإليزيه في بيان، ما يعمق الأزمة السياسية المستفحلة في البلاد. وعين لوكورنو في التاسع من شتنبر وتعرض لانتقادات المعارضين واليمين بعدما كشف مساء الأحد تشكيلة حكومته وهي الثالثة في البلاد في غضون سنة.  أزمة سياسية في فرنسا.. رئيس الوزراء يقدم استقالته     .', 'size': 2}, {'id': '357', 'title': 'رئيس وزراء فرنسا يقدم استقالته بعد شهر فقط من تعيينه', 'source': 'rue20.com', 'link': 'https://rue20.com/942381.html', 'summary': 'رئيس وزراء فرنسا يقدم استقالته بعد شهر فقط من تعيينه.  | وكالات قدّم رئيس الوزراء الفرنسي سيباستيان لوكورنو استقالته إلى الرئيس إيمانويل ماكرون، اليوم الاثنين، وفق ما أعلن قصر الإليزيه في بيان، وهو ما يعمق الأزمة السياسية المستفحلة في البلاد. وعين لوكورنو في التاسع من سبتمبر، وتعرض لانتقادات المعارضين واليمين بعدما كشف مساء الأحد عن تشكيلة حكومته، وهي الثالثة في البلاد في غضون الخبر رئيس وزراء فرنسا يقدم استقالته بعد شهر فقط من تعيينه  .', 'size': 2}], 'main_title': 'أزمة سياسية في فرنسا.. رئيس الوزراء يقدم استقالته'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    