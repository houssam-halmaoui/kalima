<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 15/08/2025 - 12h26</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '2', 'articles': [{'id': '1', 'title': 'يوفنتوس الإيطالي يهتم بإبراهيم دياز', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d9%8a%d9%88%d9%81%d9%86%d8%aa%d9%88%d8%b3-%d8%a7%d9%84%d8%a5%d9%8a%d8%b7%d8%a7%d9%84%d9%8a-%d9%8a%d9%87%d8%aa%d9%85-%d8%a8%d8%a5%d8%a8%d8%b1%d8%a7%d9%87%d9%8a%d9%85-%d8%af%d9%8a%d8%a7%d8%b2-1609112.html', 'summary': 'يوفنتوس الإيطالي يهتم بإبراهيم دياز. يخطط نادي يوفنتوس الإيطالي لاستغلال وضعية الدولي المغربي إبراهيم دياز مع ريال مدريد، ومحاولة التعاقد معه خلال فترة الانتقالات الصيفية الجارية، في ظل تقلّص فرصه في ضمان مكان أساسي بتشكيلة المدرب الإسباني تشابي ألونسو، بسبب المنافسة القوية على مركزه، ووصول الأرجنتيني الواعد فرانكو ماستانتونو. ووفقًا لصحيفة “pazio” الإيطالية، برز اسم دياز كخيار جدي على طاولة  يوفنتوس الإيطالي يهتم بإبراهيم دياز     - هسبريس جريدة إلكترونية مغربية .', 'size': 2}, {'id': '310', 'title': 'تمهيدًا للتحرك في الميركاتو. يوفنتوس يراقب وضعية إبراهيم دياز', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%aa%d9%85%d9%87%d9%8a%d8%af%d9%8b%d8%a7-%d9%84%d9%84%d8%aa%d8%ad%d8%b1%d9%83-%d9%81%d9%8a-%d8%a7%d9%84%d9%85%d9%8a%d8%b1%d9%83%d8%a7%d8%aa%d9%88-%d9%8a%d9%88%d9%81%d9%86%d8%aa%d9%88%d8%b3-%d9%8a/', 'summary': 'تمهيدًا للتحرك في الميركاتو. يوفنتوس يراقب وضعية إبراهيم دياز. يواصل نادي يوفنتوس الإيطالي متابعة ملف الدولي المغربي إبراهيم دياز، لاعب ريال مدريد، الذي يجد صعوبة في ضمان مكان أساسي مع الفريق هذا الموسم، خاصة بعد تعاقد النادي الملكي مع الموهبة الأرجنتينية فرانكو ماستانتونو، واشتداد المنافسة على مركزه. وبحسب صحيفة “Spazio” الإيطالية، فإن دياز يُعد خيارًا جادًا أمام إدارة “السيدة العجوز” لتعويض الرحيل المرتقب للأرجنتيني', 'size': 2}], 'main_title': 'يوفنتوس الإيطالي يهتم بإبراهيم دياز'}, {'community_id': '1', 'articles': [{'id': '11', 'title': 'تطويق حريق في دردارة بشفشاون', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d8%aa%d8%b7%d9%88%d9%8a%d9%82-%d8%ad%d8%b1%d9%8a%d9%82-%d9%81%d9%8a-%d8%af%d8%b1%d8%af%d8%a7%d8%b1%d8%a9-%d8%a8%d8%b4%d9%81%d8%b4%d8%a7%d9%88%d9%86-1609132.html', 'summary': 'تطويق حريق في دردارة بشفشاون. نجحت فرق التدخل، الخميس، في احتواء الحريق الذي اندلع الثلاثاء الماضي على مستوى الغطاء الغابوي بجماعة دردارة بإقليم شفشاون، وذلك وفق المدير الإقليمي للوكالة الوطنية للمياه والغابات، يوسف زروقي. وأضاف زروقي، في تصريح لوكالة المغرب العربي للأنباء، أن عمليات الإطفاء ستتواصل خلال الأيام المقبلة من أجل الإخماد الكلي للحريق. وذكر المسؤول أنه، منذ الدقائق الأولى  تطويق حريق في دردارة بشفشاون     - هسبريس جريدة إلكترونية مغربية .', 'size': 2}, {'id': '350', 'title': 'حريق شفشاون.. مسؤول يكشف أن عمليات الإطفاء مازالت مستمرة', 'source': 'rue20.com', 'link': 'https://rue20.com/928760.html', 'summary': 'حريق شفشاون.. مسؤول يكشف أن عمليات الإطفاء مازالت مستمرة.  | الرباط نجحت فرق التدخل، اليوم الخميس، في احتواء الحريق الذي اندلع الثلاثاء الماضي على مستوى الغطاء الغابوي بجماعة دردارة بإقليم شفشاون، وذلك وفق المدير الإقليمي للوكالة الوطنية للمياه والغابات، يوسف زروقي. وأضاف زروقي، في تصريح لوكالة المغرب العربي للأنباء، أن عمليات الإطفاء ستتواصل خلال الأيام المقبلة من أجل الإخماد الكلي للحريق. وذكر الخبر حريق شفشاون.. مسؤول يكشف أن عمليات الإطفاء مازالت مستمرة  .', 'size': 2}], 'main_title': 'تطويق حريق في دردارة بشفشاون'}, {'community_id': '7', 'articles': [{'id': '67', 'title': 'السكتيوي يكشف أسباب فوز “الأسود” على المنتخب الزامبي', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/205032', 'summary': 'السكتيوي يكشف أسباب فوز “الأسود” على المنتخب الزامبي.  علّق الناخب الوطني طارق السكتيوي، على أداء “أسود الأطلس” في المباراة أمام المنتخب الزامبي والتي جرت أطوراها اليوم عن الجولة الرابعة للمجموعة الأولى ضمن كأس أمم إفريقيا للاعبين المحليين (شان 2024). وأبرز السكتيوي، في ندوة صحفية أعقبت المباراة، أن “اللاعبين كانوا أقوى ذهنيا وأداروا المباراة بشكل جيد، ما جعلهم يحققون هذا الفوز المستحق”، مضيفا', 'size': 2}, {'id': '124', 'title': 'السكتيوي: العامل الذهني وراء فوز الأسود على زامبيا', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a7%d9%84%d8%b3%d9%83%d8%aa%d9%8a%d9%88%d9%8a-%d8%a7%d9%84%d8%b9%d8%a7%d9%85%d9%84-%d8%a7%d9%84%d8%b0%d9%87%d9%86%d9%8a-%d9%88%d8%b1%d8%a7%d8%a1-%d9%81%d9%88%d8%b2-%d8%a7%d9%84%d8%a3%d8%b3%d9%88/', 'summary': 'السكتيوي: العامل الذهني وراء فوز الأسود على زامبيا. في أعقاب الانتصار المستحق الذي حققه المنتخب الوطني للمحليين على نظيره الزامبي بثلاثة أهداف مقابل هدف، ضمن الجولة الرابعة من منافسات المجموعة الأولى في كأس أمم إفريقيا للاعبين المحليين (شان 2024) المقامة بنيروبي، شدد الناخب الوطني طارق السكتيوي على أن العامل الذهني كان كلمة السر في هذا التألق. وأوضح السكتيوي، خلال الندوة الصحفية التي تلت', 'size': 2}, {'id': '151', 'title': 'ماذا قال السكتيوي بعد الفوز الثمين للمنتخب المغربي؟', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-585044.html', 'summary': 'ماذا قال السكتيوي بعد الفوز الثمين للمنتخب المغربي؟. أكد الناخب الوطني طارق السكتيوي، اليوم الخميس بنيروبي، أن العامل الذهني لدى لاعبي المنتخب كان حاسما في تحقيق الفوز على المنتخب الزامبي (3-1)، في المباراة التي جرت أطوراها اليوم عن الجولة الرابعة للمجموعة الأولى ضمن كأس أمم إفريقيا للاعبين المحليين (شان 2024). وأبرز السكتيوي، في ندوة صحفية أعقبت المباراة، أن “اللاعبين كانوا أقوى ذهنيا', 'size': 3}], 'main_title': 'ماذا قال السكتيوي بعد الفوز الثمين للمنتخب المغربي؟'}, {'community_id': '3', 'articles': [{'id': '74', 'title': 'صيادلة المغرب يعلنون التعبئة الشاملة لمواجهة مرسوم تخفيض أسعار الأدوية ويصفونه ب"الكارثي"', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/economy/411025.html', 'summary': 'صيادلة المغرب يعلنون التعبئة الشاملة لمواجهة مرسوم تخفيض أسعار الأدوية ويصفونه ب"الكارثي". دخلت الكونفدرالية الوطنية لنقابات صيادلة المغرب، في حالة استنفار قصوى، داعية إلى عقد مجلس وطني استثنائي اليوم الخميس، سيخصص بالكامل لمواجهة مشروع مرسوم حكومي جديد', 'size': 2}, {'id': '221', 'title': 'مشروع حكومي جديد لتسعير الأدوية يستنفر الصيادلة', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d9%85%d8%b4%d8%b1%d9%88%d8%b9-%d8%ad%d9%83%d9%88%d9%85%d9%8a-%d8%ac%d8%af%d9%8a%d8%af-%d9%84%d8%aa%d8%b3%d8%b9%d9%8a%d8%b1-%d8%a7%d9%84%d8%a3%d8%af%d9%88%d9%8a%d8%a9-%d9%8a%d8%b3%d8%aa%d9%86%d9%81/', 'summary': 'مشروع حكومي جديد لتسعير الأدوية يستنفر الصيادلة. -متابعات دخلت الكونفدرالية الوطنية لنقابات صيادلة المغرب في حالة تعبئة قصوى، بعد إعلان الحكومة عن مشروع مرسوم جديد يهدف إلى مراجعة أسعار الأدوية. وقررت الهيئة عقد مجلس وطني استثنائي،...  مشروع حكومي جديد لتسعير الأدوية يستنفر الصيادلة     .', 'size': 2}], 'main_title': 'صيادلة المغرب يعلنون التعبئة الشاملة لمواجهة مرسوم تخفيض أسعار الأدوية ويصفونه ب"الكارثي"'}, {'community_id': '9', 'articles': [{'id': '89', 'title': 'تسمم كحولي في الكويت يودي بحياة 13 شخصاً ويصيب العشرات بعاهات خطيرة', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/last/411040.html', 'summary': 'تسمم كحولي في الكويت يودي بحياة 13 شخصاً ويصيب العشرات بعاهات خطيرة. أعلنت وزارة الصحة الكويتية وفاة 13 شخصاً منذ السبت الماضي نتيجة تسمم كحولي ناتج عن تناول مشروبات ملوثة بمادة الميثانول، فيما يتلقى العشرات رعاية طبية', 'size': 2}, {'id': '374', 'title': 'الكويت.. ارتفاع حالات التسمم والوفيات الناتجة عن مشروبات كحولية فاسدة', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d9%83%d9%88%d9%8a%d8%aa-%d8%a7%d8%b1%d8%aa%d9%81%d8%a7%d8%b9-%d8%ad%d8%a7%d9%84%d8%a7%d8%aa-%d8%a7%d9%84%d8%aa%d8%b3%d9%85%d9%85-%d9%88%d8%a7%d9%84%d9%88%d9%81%d9%8a%d8%a7%d8%aa-%d8%a7/', 'summary': 'الكويت.. ارتفاع حالات التسمم والوفيات الناتجة عن مشروبات كحولية فاسدة. ارتفعت حالات التسمم الناتج عن مشروبات كحولية ملوثة بالميثانول في الكويت، إلى 160 حالة، حيث تم تسجيل معظم هذه الحالات لدى بعض الأجانب. وفي بيان جديد لها، أشارت وزارة الصحة الكويتية، إلى أنه تم تسجيل 23 حالة وفاة، لافتة إلى أن جميع الإصابات من جنسيات أسيوية. وأوضحت “الصحة الكويتية” أن معظم الحالات في …  الكويت.. ارتفاع حالات التسمم والوفيات الناتجة عن مشروبات كحولية فاسدة     .', 'size': 2}], 'main_title': 'تسمم كحولي في الكويت يودي بحياة 13 شخصاً ويصيب العشرات بعاهات خطيرة'}, {'community_id': '6', 'articles': [{'id': '122', 'title': 'بعد ثلاثة أيام من اندلاعه.. احتواء حريق دردارة في إقليم شفشاون', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%b4%d9%81%d8%b4%d8%a7%d9%88%d9%86-%d8%aa%d8%b7%d9%88%d9%8a%d9%82-%d8%a7%d9%84%d8%ad%d8%b1%d9%8a%d9%82-%d8%a7%d9%84%d8%b0%d9%8a-%d8%b4%d8%a8-%d8%a8%d8%ba%d8%a7%d8%a8%d8%a9-%d8%af%d8%b1%d8%af/', 'summary': 'بعد ثلاثة أيام من اندلاعه.. احتواء حريق دردارة في إقليم شفشاون. تمكنت فرق التدخل، اليوم الخميس (14 غشت)، في احتواء الحريق الذي اندلع الثلاثاء الماضي بالغطاء الغابوي لجماعة دردارة بإقليم شفشاون، وفق ما أفاد به المدير الإقليمي للوكالة الوطنية للمياه والغابات، يوسف زروقي. وأوضح زروقي أن عمليات الإطفاء ستتواصل خلال الأيام المقبلة لضمان الإخماد الكلي للحريق، مبرزًا أن السلطات الإقليمية والمحلية، إلى جانب القوات المسلحة الملكية', 'size': 2}, {'id': '354', 'title': 'مسؤول.. تطويق حريق غابة دردارة بشفشاون', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/472748.html', 'summary': 'مسؤول.. تطويق حريق غابة دردارة بشفشاون. نجحت فرق التدخل، أمس الخميس، في احتواء الحريق الذي اندلع الثلاثاء الماضي على مستوى الغطاء الغابوي بجماعة دردارة بإقليم شفشاون، وذلك وفق المدير الإقليمي للوكالة الوطنية للمياه والغابات، يوسف زروقي.', 'size': 2}], 'main_title': 'بعد ثلاثة أيام من اندلاعه.. احتواء حريق دردارة في إقليم شفشاون'}, {'community_id': '8', 'articles': [{'id': '201', 'title': 'خبير إسباني: المغرب يضطلع بدور محوري واستراتيجي في مكافحة تهريب المخدرات على الطريق الأطلسية', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/472672.html', 'summary': 'خبير إسباني: المغرب يضطلع بدور محوري واستراتيجي في مكافحة تهريب المخدرات على الطريق الأطلسية. و.م.ع أكد الخبير الإسباني، رافاييل إسبارزا ماتشين، أن المملكة المغربية تضطلع بدور “محوري” و”استراتيجي” في مكافحة تهريب المخدرات على “الطريق الأطلسية”، مشيدا بالتعاون “الخاص والنموذجي” القائم بين أجهزة الأمن المغربية ونظيرتها الإسبانية في هذا المجال. وأوضح إسبارزا ماتشين، في تصريح لوكالة المغرب العربي للأنباء، أن اعتراض سفينة هذا الأسبوع غرب جزر الكناري، كانت تنقل حوالي …', 'size': 3}, {'id': '244', 'title': 'خبير إسباني: المغرب يضطلع بدور محوري واستراتيجي في مكافحة تهريب المخدرات', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%ae%d8%a8%d9%8a%d8%b1-%d8%a5%d8%b3%d8%a8%d8%a7%d9%86%d9%8a-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d9%8a%d8%b6%d8%b7%d9%84%d8%b9-%d8%a8%d8%af%d9%88%d8%b1-%d9%85%d8%ad%d9%88%d8%b1%d9%8a-%d9%88%d8%a7/', 'summary': 'خبير إسباني: المغرب يضطلع بدور محوري واستراتيجي في مكافحة تهريب المخدرات. أكد الخبير الإسباني، رافاييل إسبارزا ماتشين، أن المملكة المغربية تضطلع بدور “محوري” و”استراتيجي” في مكافحة تهريب المخدرات على “الطريق الأطلسية”. وأشاد الخبير في تصريح لوكالة المغرب العربي للأنباء، بالتعاون “الخاص والنموذجي” القائم بين أجهزة الأمن المغربية ونظيرتها الإسبانية في هذا المجال. وأوضح إسبارزا ماتشين، أن اعتراض سفينة هذا الأسبوع غرب جزر الكناري، كانت …  خبير إسباني: المغرب يضطلع بدور محوري واستراتيجي في مكافحة تهريب المخدرات     .', 'size': 3}, {'id': '368', 'title': 'بعد حجز 3 أطنان كوكايين: خبير اسباني يشيد بدور المغرب في مكافحة تهريب المخدرات على الطريق الأطلسية', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/225955/', 'summary': 'بعد حجز 3 أطنان كوكايين: خبير اسباني يشيد بدور المغرب في مكافحة تهريب المخدرات على الطريق الأطلسية. مدريد – أكد الخبير الإسباني، رافاييل إسبارزا ماتشين، أن المملكة المغربية تضطلع بدور “محوري” و”استراتيجي” في مكافحة تهريب المخدرات على “الطريق الأطلسية”، مشيدا بالتعاون “الخاص والنموذجي” القائم بين أجهزة الأمن المغربية ونظيرتها الإسبانية في هذا المجال. وأوضح السيد إسبارزا ماتشين، في تصريح لوكالة المغرب العربي للأنباء، أن اعتراض سفينة هذا الأسبوع غرب جزر الكناري، كانت', 'size': 3}], 'main_title': 'خبير إسباني: المغرب يضطلع بدور محوري واستراتيجي في مكافحة تهريب المخدرات على الطريق الأطلسية'}, {'community_id': '10', 'articles': [{'id': '235', 'title': 'الأولى بإفريقيا: أول عملية زراعة كلْية مع عدم توافق فصائل الدم', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%a7%d9%84%d8%a3%d9%88%d9%84%d9%89-%d8%a8%d8%a5%d9%81%d8%b1%d9%8a%d9%82%d9%8a%d8%a7-%d8%a3%d9%88%d9%84-%d8%b9%d9%85%d9%84%d9%8a%d8%a9-%d8%b2%d8%b1%d8%a7%d8%b9%d8%a9-%d9%83%d9%84%d9%92%d9%8a%d8%a9/', 'summary': 'الأولى بإفريقيا: أول عملية زراعة كلْية مع عدم توافق فصائل الدم. المساء اليوم – الدار البيضاء: أعلنت مؤسسة محمد السادس للعلوم والصحة، يوم الثلاثاء بالدار البيضاء، عن إجراء بنجاح، أول عملية زراعة كلية مع عدم توافق فصائل الدم ABO على مستوى القارة الإفريقية. وتمت عملية زراعة', 'size': 2}, {'id': '369', 'title': 'مؤسسة محمد السادس للعلوم والصحة تجري أول عملية زراعة كلية مع عدم توافق فصائل الدم ABO', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/225953/', 'summary': 'مؤسسة محمد السادس للعلوم والصحة تجري أول عملية زراعة كلية مع عدم توافق فصائل الدم ABO. أعلنت مؤسسة محمد السادس للعلوم والصحة، اليوم الثلاثاء بالدار البيضاء، عن إجراء بنجاح، أول عملية زراعة كلية مع عدم توافق فصائل الدم ABO على مستوى القارة الإفريقية. ويعد هذا التدخل الجراحي الهام ، الذي مكن من زراعة كلية بين متبرع ومتلق غير متطابقين في فصيلة الدم ، تقدما طبيا كبيرا، وثمرة تنسيق وثيق بين مصالح', 'size': 2}], 'main_title': 'الأولى بإفريقيا: أول عملية زراعة كلْية مع عدم توافق فصائل الدم'}, {'community_id': '4', 'articles': [{'id': '258', 'title': '50 قتيلا جراء أمطار غزيرة بباكستان', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/50-%d9%82%d8%aa%d9%8a%d9%84%d8%a7-%d8%ac%d8%b1%d8%a7%d8%a1-%d8%a3%d9%85%d8%b7%d8%a7%d8%b1-%d8%ba%d8%b2%d9%8a%d8%b1%d8%a9-%d8%a8%d8%a8%d8%a7%d9%83%d8%b3%d8%aa%d8%a7%d9%86-1609252.html', 'summary': '50 قتيلا جراء أمطار غزيرة بباكستان. قتل 50 شخصا على الأقل خلال 24 ساعة جراء الأمطار الغزيرة في شمال باكستان، حسبما أعلنت هيئات إدارة الكوارث اليوم الجمعة. وسُجلت غالبية الوفيات في ولاية خيبر بختونخوا الجبلية حيث قضى 43 شخصا، بحسب هيئة إدارة الكوارث في الولاية. وقُتل سبعة أشخاص في الشطر الذي تديره باكستان من كشمير، وفق هيئة إدارة الكوارث في الإقليم.  50 قتيلا جراء أمطار غزيرة بباكستان     - هسبريس جريدة إلكترونية مغربية .', 'size': 2}, {'id': '340', 'title': 'مصرع 50 شخصا جراء أمطار غزيرة في شمال باكستان', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d9%85%d8%b5%d8%b1%d8%b9-50-%d8%b4%d8%ae%d8%b5%d8%a7-%d8%ac%d8%b1%d8%a7%d8%a1-%d8%a3%d9%85%d8%b7%d8%a7%d8%b1-%d8%ba%d8%b2%d9%8a%d8%b1%d8%a9-%d9%81%d9%8a-%d8%b4%d9%85%d8%a7%d9%84-%d8%a8%d8%a7%d9%83/', 'summary': 'مصرع 50 شخصا جراء أمطار غزيرة في شمال باكستان. أعلنت هيئات إدارة الكوارث في باكستان، اليوم الجمعة، أن 50 شخصا على الأقل لقوا مصرعهم خلال الساعات الأربع والعشرين الماضية، جراء أمطار غزيرة ضربت شمال البلاد. وأوضحت السلطات أن غالبية الضحايا سجلت في ولاية خيبر بختونخوا الجبلية، حيث توفي 43 شخصا، فيما قتل سبعة آخرون في الشطر الذي تديره باكستان من إقليم كشمير.  مصرع 50 شخصا جراء أمطار غزيرة في شمال باكستان     .', 'size': 2}], 'main_title': '50 قتيلا جراء أمطار غزيرة بباكستان'}, {'community_id': '0', 'articles': [{'id': '275', 'title': 'حادث خطير بالمحمدية.. سقوط سيارة من فوق قنطرة “صابليط” بسبب السرعة المفرطة', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-649585.html', 'summary': 'حادث خطير بالمحمدية.. سقوط سيارة من فوق قنطرة “صابليط” بسبب السرعة المفرطة. هبة بريس شهدت مدينة المحمدية في الساعات الأولى من صباح اليوم الجمعة حادث سير مروع، بعد سقوط سيارة خفيفة من نوع "ديكابوطابل" من فوق قنطرة صابليط، ما أدى إلى انقلابها واستقرارها في مجرى الواد أسفل الجسر. وبحسب المعطيات الأولية، فإن السرعة المفرطة كانت السبب الرئيسي وراء الحادث، حيث فقد السائق السيطرة على السيارة، التي كانت على متنها ثلاثة أشخاص، مما أدى إلى انزلاقها وسقوطها بشكل خطير. وقد تدخلت عناصر الوقاية المدنية والسلطات المحلية على وجه السرعة، حيث تم نقل المصابين إلى المستشفى لتلقي العلاجات الضرورية، كما فتح تحقيق للكشف عن ظروف الحادث', 'size': 2}, {'id': '343', 'title': 'ثلاثة مصابين في سقوط سيارة ديكابوطابل من فوق قنطرة بالمحمدية', 'source': 'rue20.com', 'link': 'https://rue20.com/928773.html', 'summary': 'ثلاثة مصابين في سقوط سيارة ديكابوطابل من فوق قنطرة بالمحمدية.  | متابعة شهدت مدينة المحمدية، في الساعات الأولى من صباح اليوم الجمعة، حادثة سير خطيرة بعدما هوت سيارة من نوع “ديكابوطابل” من أعلى قنطرة صابليط، لتسقط في الوادي أسفلها. الحادث أسفر عن إصابة ثلاثة أشخاص كانوا على متن السيارة، وُصفت حالتهم بالخطيرة، حيث جرى نقلهم على وجه السرعة إلى المستشفى لتلقي العلاجات الضرورية. الخبر ثلاثة مصابين في سقوط سيارة ديكابوطابل من فوق قنطرة بالمحمدية  .', 'size': 2}], 'main_title': 'حادث خطير بالمحمدية.. سقوط سيارة من فوق قنطرة “صابليط” بسبب السرعة المفرطة'}, {'community_id': '5', 'articles': [{'id': '341', 'title': 'توقعات الطقس.. سحب مصحوبة بكتل ضبابية بعدد من المناطق', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%aa%d9%88%d9%82%d8%b9%d8%a7%d8%aa-%d8%a3%d8%ad%d9%88%d8%a7%d9%84-%d8%a7%d9%84%d8%b7%d9%82%d8%b3-%d8%aa%d8%b4%d9%83%d9%84-%d8%b3%d8%ad%d8%a8-%d9%85%d8%b1%d9%81%d9%88%d9%82%d8%a9-%d8%a8%d9%83%d8%aa/', 'summary': 'توقعات الطقس.. سحب مصحوبة بكتل ضبابية بعدد من المناطق. تتوقع المديرية العامة للأرصاد الجوية، اليوم الجمعة، أن یظل الطقس حارا شیئا ما إلى حار محلیا بكل من السھول الداخلیة، والجنوب-الشرقي للبلاد وداخل الأقالیم الصحراویة. ويرتقب، خلال الصباح واللیل، تشكل سحب منخفضة مرفوقة بكتل من الضباب أو ببعض الأمطار الجد خفیفة وذلك بالقرب من سواحل المحیط الأطلسي وسواحل البحر الأبیض المتوسط، مع نزول زخات مطریة  توقعات الطقس.. سحب مصحوبة بكتل ضبابية بعدد من المناطق     .', 'size': 2}, {'id': '378', 'title': 'توقعات أحوال الطقس في العديد من مناطق المملكة اليوم الجمعة', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%aa%d9%88%d9%82%d8%b9%d8%a7%d8%aa-%d8%a3%d8%ad%d9%88%d8%a7%d9%84-%d8%a7%d9%84%d8%b7%d9%82%d8%b3-%d9%81%d9%8a-%d8%a7%d9%84%d8%b9%d8%af%d9%8a%d8%af-%d9%85%d9%86-%d9%85%d9%86%d8%a7%d8%b7%d9%82-99/', 'summary': 'توقعات أحوال الطقس في العديد من مناطق المملكة اليوم الجمعة. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليومه الجمعة، أن یظل الطقس حارا شیئا ما إلى حار محلیا بكل من السھول الداخلیة، والجنوب-الشرقي للبلاد وداخل الأقالیم الصحراویة. كما يرتقب، خلال الصباح واللیل، تشكل سحب منخفضة مرفوقة بكتل من الضباب أو ببعض الأمطار الجد خفیفة وذلك بالقرب من سواحل المحیط الأطلسي وسواحل البحر الأبیض المتوسط، …  توقعات أحوال الطقس في العديد من مناطق المملكة اليوم الجمعة     .', 'size': 2}], 'main_title': 'توقعات الطقس.. سحب مصحوبة بكتل ضبابية بعدد من المناطق'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    