<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 09/08/2025 - 06h22</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '123', 'title': 'مذكرة من رئيس الحكومة تحدد أربع أولويات كبرى لمالية 2026', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/economy/410738.html', 'summary': 'مذكرة من رئيس الحكومة تحدد أربع أولويات كبرى لمالية 2026. أصدر رئيس الحكومة، عزيز أخنوش، مذكرة توجيهية تتعلق بمشروع قانون المالية لسنة 2026، إلى الوزراء والوزراء المنتدبين والمندوبين الساميين والمندوب العام، شدد فيها على أن', 'size': 2}, {'id': '387', 'title': 'مشروع مالية 2026.. أخنوش يحدد أربع أولويات كبرى ويدعو إلى ضبط النفقات', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/472055.html', 'summary': 'مشروع مالية 2026.. أخنوش يحدد أربع أولويات كبرى ويدعو إلى ضبط النفقات. حددت المذكرة التوجيهية التي عممها عزيز أخنوش، رئيس الحكومة، اليوم الجمعة، على الوزراء والقطاعات الحكومية المختلفة، بشأن إعداد مشروع قانون المالية لسنة 2026، أربع أولويات كبرى سترسم معالم مرحلة جديدة. ويتعلق الأمر بتعزيز إقلاع المملكة، والتوازن بين التنمية الاقتصادية والعدالة الاجتماعية والمجالية، وتوطيد أسس الدولة الاجتماعية وتسريع الإصلاحات الهيكيلية الكبرى، وكذا الحفاظ على توازن المالية …', 'size': 2}], 'main_title': 'مذكرة من رئيس الحكومة تحدد أربع أولويات كبرى لمالية 2026'}, {'community_id': '1', 'articles': [{'id': '165', 'title': 'العثور على جثة العامل الثاني في حادث انهيار بئر معدني بإميضر', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1091601.html', 'summary': 'العثور على جثة العامل الثاني في حادث انهيار بئر معدني بإميضر. إثر انهيار بئر معدني بمنجم للفضة بجماعة إميضر، نواحي إقليم تنغير. ظهرت المقالة العثور على جثة العامل الثاني في حادث انهيار بئر معدني بإميضر  .', 'size': 3}, {'id': '189', 'title': 'وفاة عامل إثر انهيار في منجم الفضة بإميضر', 'source': 'rue20.com', 'link': 'https://rue20.com/927389.html', 'summary': 'وفاة عامل إثر انهيار في منجم الفضة بإميضر.  | متابعة شهد منجم الفضة الواقع بجماعة إميضر، التابعة لإقليم تنغير، بعد زوال اليوم الجمعة 8 غشت، حادث انهيار داخل أحد الأنفاق، أسفر عن مصرع عامل تحت الأنقاض. وبحسب مصادر محلية، فقد تمكنت فرق الإنقاذ من انتشال أحد العاملين وهو على قيد الحياة، حيث تم نقله على وجه السرعة إلى المستشفى في حالة الخبر وفاة عامل إثر انهيار في منجم الفضة بإميضر  .', 'size': 3}, {'id': '209', 'title': 'وفاة عامل إثر انهيار منجمي بإميضر ضواحي تنغير', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d9%88%d9%81%d8%a7%d8%a9-%d8%b9%d8%a7%d9%85%d9%84-%d8%a5%d8%ab%d8%b1-%d8%a7%d9%86%d9%87%d9%8a%d8%a7%d8%b1-%d9%85%d9%86%d8%ac%d9%85%d9%8a-%d8%a8%d8%a5%d9%85%d9%8a%d8%b6%d8%b1-%d8%b6%d9%88%d8%a7%d8%ad/', 'summary': 'وفاة عامل إثر انهيار منجمي بإميضر ضواحي تنغير. -متابعات شهد منجم الفضة الواقع بجماعة إميضر، التابعة لإقليم تنغير، بعد زوال اليوم الجمعة 8 غشت، حادث انهيار داخل أحد الأنفاق، أسفر عن مصرع عامل تحت الأنقاض. وبحسب مصادر...  وفاة عامل إثر انهيار منجمي بإميضر ضواحي تنغير     .', 'size': 3}], 'main_title': 'العثور على جثة العامل الثاني في حادث انهيار بئر معدني بإميضر'}, {'community_id': '2', 'articles': [{'id': '174', 'title': 'موجة حر مع الشركي تستمر إلى الثلاثاء المقبل', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d9%85%d9%88%d8%ac%d8%a9-%d8%ad%d8%b1-%d9%85%d8%b9-%d8%a7%d9%84%d8%b4%d8%b1%d9%83%d9%8a-%d8%aa%d8%b3%d8%aa%d9%85%d8%b1-%d8%a5%d9%84%d9%89-%d8%a7%d9%84%d8%ab%d9%84%d8%a7%d8%ab%d8%a7%d8%a1-%d8%a7%d9%84/', 'summary': 'موجة حر مع الشركي تستمر إلى الثلاثاء المقبل. أفادت المديرية العامة للأرصاد الجوية أنه يرتقب تسجيل موجة حر مع الشركي من اليوم الجمعة إلى غاية يوم الثلاثاء المقبل، وزخات رعدية مع تساقط البرد وهبات رياح اليوم الجمعة، بعدد من مناطق المملكة. وأوضحت المديرية، في نشرة إنذارية من مستوى يقظة برتقالي، أنه من المرتقب تسجيل درجات حرارة تتراوح ما بين 39 و43 درجة اليوم  موجة حر مع الشركي تستمر إلى الثلاثاء المقبل     .', 'size': 4}, {'id': '194', 'title': 'موجة حرّ شديدة تضرب مناطق المملكة من الجمعة إلى الثلاثاء المقبل', 'source': 'rue20.com', 'link': 'https://rue20.com/927364.html', 'summary': 'موجة حرّ شديدة تضرب مناطق المملكة من الجمعة إلى الثلاثاء المقبل.  | الرباط أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب تسجيل موجة حر مع الشركي من اليوم الجمعة إلى غاية يوم الثلاثاء المقبل، وزخات رعدية مع تساقط البرَد وهبات رياح اليوم الجمعة، بعدد من مناطق المملكة. وأوضحت المديرية، في نشرة إنذارية من مستوى يقظة برتقالي، أنه من المرتقب تسجيل درجات حرارة تتراوح ما بين الخبر موجة حرّ شديدة تضرب مناطق المملكة من الجمعة إلى الثلاثاء المقبل  .', 'size': 3}, {'id': '201', 'title': 'نشرة إنذارية.. موجة حر مع الشركي وزخات رعدية مرتقبة بعدد من مناطق المملكةش', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/472040.html', 'summary': 'نشرة إنذارية.. موجة حر مع الشركي وزخات رعدية مرتقبة بعدد من مناطق المملكةش. أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب تسجيل موجة حر مع الشركي من اليوم الجمعة إلى غاية يوم الثلاثاء المقبل، وزخات رعدية مع تساقط البرَد وهبات رياح اليوم الجمعة، بعدد من مناطق المملكة. وأوضحت المديرية، في نشرة إنذارية من مستوى يقظة برتقالي، أنه من المرتقب تسجيل درجات حرارة تتراوح ما بين 39 و43 درجة اليوم …', 'size': 3}, {'id': '243', 'title': 'نشرة إندارية: موجة حر مع الشركي وزخات رعدية مرتقبة من الجمعة إلى الثلاثاء بعدد من مناطق المملكة', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d9%86%d8%b4%d8%b1%d8%a9-%d8%a5%d9%86%d8%af%d8%a7%d8%b1%d9%8a%d8%a9-%d9%85%d9%88%d8%ac%d8%a9-%d8%ad%d8%b1-%d9%85%d8%b9-%d8%a7%d9%84%d8%b4%d8%b1%d9%83%d9%8a-%d9%88%d8%b2%d8%ae%d8%a7%d8%aa-%d8%b1%d8%b9/', 'summary': 'نشرة إندارية: موجة حر مع الشركي وزخات رعدية مرتقبة من الجمعة إلى الثلاثاء بعدد من مناطق المملكة. أفادت المديرية العامة للأرصاد الجوية، بأنه يرتقب تسجيل موجة حر مع الشركي من اليوم الجمعة إلى غاية يوم الثلاثاء المقبل، وزخات رعدية مع تساقط البرَد وهبات رياح اليوم الجمعة، بعدد من مناطق المملكة. وأوضحت المديرية، في نشرة إنذارية من مستوى يقظة برتقالي، أنه من المرتقب تسجيل درجات حرارة تتراوح ما بين 39 و43 …  نشرة إندارية: موجة حر مع الشركي وزخات رعدية مرتقبة من الجمعة إلى الثلاثاء بعدد من مناطق المملكة     .', 'size': 4}], 'main_title': 'موجة حر مع الشركي تستمر إلى الثلاثاء المقبل'}, {'community_id': '3', 'articles': [{'id': '203', 'title': 'الاحتفال باليوم الوطني للمغاربة المقيمين بالخارج تحت شعار “ورش الرقمنة: تعزيز لخدمات القرب الموجهة لمغاربة العالم”', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/472031.html', 'summary': 'الاحتفال باليوم الوطني للمغاربة المقيمين بالخارج تحت شعار “ورش الرقمنة: تعزيز لخدمات القرب الموجهة لمغاربة العالم”. يخلد قطاع المغاربة المقيمين بالخارج، بعد غد الأحد (10 غشت)، اليوم الوطني للمغاربة المقيمين بالخارج تحت شعار ” ورش الرقمنة: تعزيز لخدمات القرب الموجهة لمغاربة العالم”، وذلك تجسيدا للعناية الخاصة التي يوليها الملك محمد السادس لأفراد الجالية المغربية بالخارج.', 'size': 2}, {'id': '240', 'title': 'المغرب يحتفي بأبنائه في المهجر ببرامج صيفية تعزز الانتماء للوطن وتواكب ورش الرقمنة (صور)', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d9%8a%d8%ad%d8%aa%d9%81%d9%8a-%d8%a8%d8%a3%d8%a8%d9%86%d8%a7%d8%a6%d9%87-%d9%81%d9%8a-%d8%a7%d9%84%d9%85%d9%87%d8%ac%d8%b1-%d8%a8%d8%a8%d8%b1%d8%a7%d9%85%d8%ac/', 'summary': 'المغرب يحتفي بأبنائه في المهجر ببرامج صيفية تعزز الانتماء للوطن وتواكب ورش الرقمنة (صور). يحظى المواطنون المغاربة المقيمون بالخارج، والذين يزيد عددهم عن خمسة ملايين شخص موزعين على أكثر من مائة بلد، بعناية خاصة من طرف الملك محمد السادس، من خلال تعليماته السامية الرامية إلى النهوض بأوضاعهم وشؤونهم. وفي هذا الإطار، يعمل قطاع المغاربة المقيمين بالخارج على تعبئة استثنائية خلال الفترة الصيفية لمواكبة هذه الفئة، عبر برامج …  المغرب يحتفي بأبنائه في المهجر ببرامج صيفية تعزز الانتماء للوطن وتواكب ورش الرقمنة (صور)     .', 'size': 2}], 'main_title': 'الاحتفال باليوم الوطني للمغاربة المقيمين بالخارج تحت شعار “ورش الرقمنة: تعزيز لخدمات القرب الموجهة لمغاربة العالم”'}, {'community_id': '4', 'articles': [{'id': '231', 'title': 'وفاة شيخ الزاوية القادرية البودشيشية جمال الدين القادري بودشيش', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d9%88%d9%81%d8%a7%d8%a9-%d8%b4%d9%8a%d8%ae-%d8%a7%d9%84%d8%b2%d8%a7%d9%88%d9%8a%d8%a9-%d8%a7%d9%84%d9%82%d8%a7%d8%af%d8%b1%d9%8a%d8%a9-%d8%a7%d9%84%d8%a8%d9%88%d8%af%d8%b4%d9%8a%d8%b4%d9%8a%d8%a9/', 'summary': 'وفاة شيخ الزاوية القادرية البودشيشية جمال الدين القادري بودشيش. المساء اليوم: توفي، اليوم الجمعة، شيخ الزاوية القادرية البودشيشية بمداغ، جمال الدين القادري بودشيش، وذلك في ظرف أليم أحزن أسرته، ومريدي الزاوية وأتباع الطريقة الصوفية بالمغرب وخارجه. ومن المرتقب أن يتولى نجله منير القادري بودشيش', 'size': 2}, {'id': '314', 'title': 'وفاة الشيخ جمال الدين القادري\xa0 شيخ الزاوية القادرية البودشيشية', 'source': 'www.alakhbar.press.ma', 'link': 'https://www.alakhbar.press.ma/%d9%88%d9%81%d8%a7%d8%a9-%d8%a7%d9%84%d8%b4%d9%8a%d8%ae-%d8%ac%d9%85%d8%a7%d9%84-%d8%a7%d9%84%d8%af%d9%8a%d9%86-%d8%a7%d9%84%d9%82%d8%a7%d8%af%d8%b1%d9%8a-%d8%b4%d9%8a%d8%ae-%d8%a7%d9%84%d8%b2-270867.html', 'summary': 'وفاة الشيخ جمال الدين القادري شيخ الزاوية القادرية البودشيشية. النعمان اليعلاوي توفي، ظهر اليوم الجمعة، الشيخ مولاي جمال الدين القادري بودشيش، شيخ الزاوية القادرية البودشيشية، عن عمر ناهز 83 سنة، بعد مسيرة تجاوزت ستة عقود في خدمة التصوف السني والتربية الروحية. لمعرفة المزيد حول الزاوية البودشيشية يرجى الضغط على الرابط http://youtu.be/o8E38x91Vgw?i=JRHw4xXfCnUw6o- وتولى الراحل مشيخة الزاوية سنة 2017 خلفًا لوالده الشيخ حمزة …  وفاة الشيخ جمال الدين القادري شيخ الزاوية القادرية البودشيشية     .', 'size': 2}, {'id': '355', 'title': 'وفاة شيخ الزاوية القادرية البودشيشية', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/320540/', 'summary': 'وفاة شيخ الزاوية القادرية البودشيشية. توفي زوال اليوم الجمعة 8 غشت 2025، جمال الدين القادري بودشيش، شيخ الزاوية القادرية البودشيشية، عن عمر يناهز 83 سنة، بعد مسار روحي وعلمي حافل في خدمة التصوف السني والتربية الروحية. ويُعد الراحل أحد أعلام التصوف المغربي المعاصر، وهو نجل الشيخ الراحل حمزة القادري بودشيش، وقد تولى مشيخة الزاوية خلفًا لوالده سنة 2017، بناءً على', 'size': 3}, {'id': '422', 'title': 'وفاة الشيخ مولاي جمال الدين القادري بودشيش', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d9%88%d9%81%d8%a7%d8%a9-%d8%a7%d9%84%d8%b4%d9%8a%d8%ae-%d9%85%d9%88%d9%84%d8%a7%d9%8a-%d8%ac%d9%85%d8%a7%d9%84-%d8%a7%d9%84%d8%af%d9%8a%d9%86-%d8%a7%d9%84%d9%82%d8%a7%d8%af%d8%b1%d9%8a-%d8%a8%d9%88/', 'summary': 'وفاة الشيخ مولاي جمال الدين القادري بودشيش. انتقل إلى رحمة الله، اليوم الجمعة، الشيخ مولاي جمال الدين القادري بودشيش، شيخ الزاوية القادرية البودشيشية، عن عمر يناهز 83 عاما. ويُعد الفقيد من أبرز أعلام التصوف المعاصر بالمغرب، حيث خلف والده الشيخ حمزة القادري بودشيش في مشيخة الزاوية عام 2017، وواصل مسيرته في خدمة التصوف السني والتربية الروحية. ويذكر أن الشيخ جمال …  وفاة الشيخ مولاي جمال الدين القادري بودشيش     .', 'size': 3}], 'main_title': 'وفاة شيخ الزاوية القادرية البودشيشية'}, {'community_id': '5', 'articles': [{'id': '287', 'title': 'ولاية أمن مراكش تحقق في تجاوزات ضابط', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-647969.html', 'summary': 'ولاية أمن مراكش تحقق في تجاوزات ضابط. فتحت ولاية أمن مراكش ، يوم الجمعة 8 غشت 2024، تحقيقاً رسمياً لتحديد التجاوزات المهنية والإخلالات الوظيفية المنسوبة لضابط أمن يعمل بفرقة السير الطرقي بمدينة مراكش. وجاء هذا الإجراء بعد تداول تسجيل مصور على مواقع التواصل الاجتماعي يظهر محاولة الضابط استخلاص مبلغ مالي من سائق سيارة مخالف، بما لا يتوافق مع ما هو منصوص عليه في محضر المخالفة الجزافية، مما يثير شبهة محاولة طلب رشوة. وتعمل مصالح الأمن الوطني حالياً على إخضاع الضابط المعني لإجراءات البحث الإداري، بغرض الكشف عن ملابسات القضية، وترتيب المسؤوليات التأديبية والقضائية اللازمة في حالة ثبوت التجاوزات. وفي خطوة موازية، أصدرت المديرية العامة للأمن الوطني قراراً يقضي بتوقيف الموظف مؤقتاً عن العمل، انسجاماً مع النظام الأساسي لموظفي الأمن الوطني، وذلك حتى انتهاء البحث وإتمام الإجراءات القانونية.', 'size': 4}, {'id': '332', 'title': 'ولاية أمن مراكش تفتح بحثا إداريا وقضائيا في تجاوزات منسوبة لضابط أمن بفرقة السير الطرقي', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/society/410753.html', 'summary': 'ولاية أمن مراكش تفتح بحثا إداريا وقضائيا في تجاوزات منسوبة لضابط أمن بفرقة السير الطرقي. فتحت ولاية أمن مراكش بحثا ، يوم الجمعة 08 غشت الجاري، وذلك لتحديد التجاوزات المهنية والإخلالات الوظيفية المنسوبة لموظف شرطة برتبة ضابط أمن يعمل بفرقة', 'size': 4}, {'id': '374', 'title': 'التحقيق مع شرطي في مراكش بشبهة تلقيه رشوة', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a7%d9%84%d8%aa%d8%ad%d9%82%d9%8a%d9%82-%d9%85%d8%b9-%d8%b4%d8%b1%d8%b7%d9%8a-%d9%81%d9%8a-%d9%85%d8%b1%d8%a7%d9%83%d8%b4-%d8%a8%d8%b4%d8%a8%d9%87%d8%a9-%d8%aa%d9%84%d9%82%d9%8a%d9%87-%d8%b1%d8%b4/', 'summary': 'التحقيق مع شرطي في مراكش بشبهة تلقيه رشوة. فتحت ولاية أمن مراكش بحثا، الجمعة، وذلك لتحديد التجاوزات المهنية والإخلالات الوظيفية المنسوبة لموظف شرطة برتبة ضابط أمن يعمل بفرقة السير الطرقي بنفس المدينة. وكانت مصالح الأمن الوطني قد تعاطت بجدية كبيرة مع تسجيل متداول على مواقع التواصل الاجتماعي، يوثق لقيام موظف الشرطة بمحاولة استخلاص مبلغ مالي من سائق سيارة مخالف، لا يطابق ذلك  التحقيق مع شرطي في مراكش بشبهة تلقيه رشوة     .', 'size': 4}, {'id': '406', 'title': 'عاجل.. إحالة ضابط الأمن في شبهة طلب رشوة على التحقيق', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/225765/', 'summary': 'عاجل.. إحالة ضابط الأمن في شبهة طلب رشوة على التحقيق. فتحت ولاية أمن مراكش بحثا ، يوم الجمعة 08 غشت الجاري، وذلك لتحديد التجاوزات المهنية والإخلالات الوظيفية المنسوبة لموظف شرطة برتبة ضابط أمن يعمل بفرقة السير الطرقي بنفس المدينة. وكانت مصالح الأمن الوطني قد تعاطت بجدية كبيرة مع تسجيل متداول على مواقع التواصل الاجتماعي، يوثق لقيام موظف الشرطة بمحاولة استخلاص مبلغ مالي من سائق سيارة', 'size': 4}], 'main_title': 'ولاية أمن مراكش تحقق في تجاوزات ضابط'}, {'community_id': '7', 'articles': [{'id': '323', 'title': 'العصبة الاحترافية تؤجل انطلاق البطولة الوطنية لكرة القدم', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/sport/footmarocain/410744.html', 'summary': 'العصبة الاحترافية تؤجل انطلاق البطولة الوطنية لكرة القدم. أعلنت العصبة الوطنية لكرة القدم الاحترافية عن تأجيل موعد انطلاق منافسات البطولة الوطنية في قسميها الأول والثاني للموسم الرياضي 2025-2026، وذلك إلى يوم 12 شتنبر', 'size': 4}, {'id': '335', 'title': 'كرة القدم.. العصبة الاحترافية تُمدد “الميراكاتو” وتؤجل انطلاق البطولة', 'source': 'kifache.com', 'link': 'https://kifache.com/%d9%83%d8%b1%d8%a9-%d8%a7%d9%84%d9%82%d8%af%d9%85-%d8%a7%d9%84%d8%b9%d8%b5%d8%a8%d8%a9-%d8%a7%d9%84%d8%a7%d8%ad%d8%aa%d8%b1%d8%a7%d9%81%d9%8a%d8%a9-%d8%aa%d9%8f%d9%85%d8%af%d8%af-%d8%a7%d9%84/', 'summary': 'كرة القدم.. العصبة الاحترافية تُمدد “الميراكاتو” وتؤجل انطلاق البطولة. عقد المكتب المديري للعصبة الوطنية لكرة القدم الاحترافية، اليوم الجمعة، اجتماعًا هامًا خُصّص لمناقشة عدد من النقاط المرتبطة بالتحضير لانطلاق الموسم الكروي الجديد، من أبرزها فترة الانتقالات الصيفية وموعد انطلاق البطولة الاحترافية بقسميها الأول والثاني. وفي بلاغ رسمي، أعلنت العصبة عن تمديد فترة الانتقالات الصيفية إلى غاية 25 غشت 2025، بدلًا من الموعد السابق الذي', 'size': 2}, {'id': '379', 'title': 'العصبة الوطنية تؤجل انطلاق البطولة الاحترافية', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a7%d9%84%d8%b9%d8%b5%d8%a8%d8%a9-%d8%a7%d9%84%d9%88%d8%b7%d9%86%d9%8a%d8%a9-%d8%aa%d8%a4%d8%ac%d9%84-%d8%a7%d9%86%d8%b7%d9%84%d8%a7%d9%82-%d8%a7%d9%84%d8%a8%d8%b7%d9%88%d9%84%d8%a9-%d8%a7%d9%84/', 'summary': 'العصبة الوطنية تؤجل انطلاق البطولة الاحترافية. أعلنت العصبة الوطنية لكرة القدم الاحترافية، في بلاغ صادر عقب اجتماع عقد الجمعة، بين رئيس العصبة ورؤساء الأندية المحترفة، عن حزمة من القرارات التي تهدف إلى ضمان انطلاقة متوازنة ومنافسة نزيهة خلال الموسم الكروي الجديد. وجاء في البلاغ أن العصبة قررت تأجيل انطلاق البطولة الاحترافية بقسميها الأول والثاني إلى غاية يوم الجمعة 12 شتنبر  العصبة الوطنية تؤجل انطلاق البطولة الاحترافية     .', 'size': 4}, {'id': '385', 'title': 'العصبة الوطنية تعلن عن تأجيل موعد انطلاق البطولة الاحترافية', 'source': 'machahid24.com', 'link': 'https://machahid24.com/sport/472057.html', 'summary': 'العصبة الوطنية تعلن عن تأجيل موعد انطلاق البطولة الاحترافية. أعلنت العصبة الوطنية لكرة القدم الاحترافية في بلاغ صادر اليوم الجمعة عن تأجيل انطلاق البطولة الاحترافية بقسميها الأول والثاني إلى غاية الجمعة 12 شتنبر 2025، بالإضافة إلى تمديد فترة الانتقالات الصيفية إلى غاية الـ25 غشت 2025، وفقا للضوابط المعمول بها في لوائح الانتقالات المعتمدة. وجاء في بلاغ العصبة، أنه تبعا للاجتماع المنعقد يومه الجمعة 8 …', 'size': 3}, {'id': '425', 'title': 'تأجيل انطلاق البطولة الوطنية وتمديد فترة الانتقالات الصيفية', 'source': 'www.alalam.ma', 'link': 'https://www.alalam.ma/تأجيل-انطلاق-البطولة-الوطنية-وتمديد-فترة-الانتقالات-الصيفية_a29094.html', 'summary': 'تأجيل انطلاق البطولة الوطنية وتمديد فترة الانتقالات الصيفية.  قررت العصبة الوطنية لكرة القدم الاحترافية، تأجيل انطلاق البطولة الاحترافية بقسميها الأول والثاني إلى غاية 12 شتنبر 2025...', 'size': 2}], 'main_title': 'العصبة الاحترافية تؤجل انطلاق البطولة الوطنية لكرة القدم'}, {'community_id': '6', 'articles': [{'id': '393', 'title': 'بالفيديو.. اندلاع حريق في مسجد قرطبة بإسبانيا', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d8%a8%d8%a7%d9%84%d9%81%d9%8a%d8%af%d9%8a%d9%88-%d8%a7%d9%86%d8%af%d9%84%d8%a7%d8%b9-%d8%ad%d8%b1%d9%8a%d9%82-%d9%81%d9%8a-%d9%85%d8%b3%d8%ac%d8%af-%d9%82%d8%b1%d8%b7%d8%a8%d8%a9-%d8%a8%d8%a5%d8%b3/', 'summary': 'بالفيديو.. اندلاع حريق في مسجد قرطبة بإسبانيا. اندلع مساء اليوم الجمعة حريق في مسجد قرطبة بإسبانيا، وفق ما ذكرته صحف إسبانية. ونشر العديد من السكان مقاطع فيديو تظهر ألسنة اللهب  بالفيديو.. اندلاع حريق في مسجد قرطبة بإسبانيا     .', 'size': 2}, {'id': '416', 'title': 'التغلب على حريق اندلع بالمسجد الكبير بقرطبة', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%a7%d9%84%d8%aa%d8%ba%d9%84%d8%a8-%d8%b9%d9%84%d9%89-%d8%ad%d8%b1%d9%8a%d9%82-%d8%a7%d9%86%d8%af%d9%84%d8%b9-%d8%a8%d8%a7%d9%84%d9%85%d8%b3%d8%ac%d8%af-%d8%a7%d9%84%d9%83%d8%a8%d9%8a%d8%b1-%d8%a8/', 'summary': 'التغلب على حريق اندلع بالمسجد الكبير بقرطبة. المساء اليوم: اندلع مساء اليوم الجمعة حريق في مسجد قرطبة بإسبانيا، والذي تم التغلب عليه من طرف مصالح الإطفاء. ونشر العديد من السكان مقاطع فيديو تظهر ألسنة اللهب وهي تتصاعد من هذا الموقع المُدرج ضمن', 'size': 2}], 'main_title': 'بالفيديو.. اندلاع حريق في مسجد قرطبة بإسبانيا'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    