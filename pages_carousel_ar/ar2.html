<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 14/09/2025 - 06h15</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '6', 'articles': [{'id': '11', 'title': 'حفل تأبيني يكرم الراحل أحمد فراس', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d8%ad%d9%81%d9%84-%d8%aa%d8%a3%d8%a8%d9%8a%d9%86%d9%8a-%d9%8a%d9%83%d8%b1%d9%85-%d8%a7%d9%84%d8%b1%d8%a7%d8%ad%d9%84-%d8%a3%d8%ad%d9%85%d8%af-%d9%81%d8%b1%d8%a7%d8%b3-1623376.html', 'summary': 'حفل تأبيني يكرم الراحل أحمد فراس. أقامت مؤسسة محمد السادس للأبطال الرياضيين، مساء أمس الجمعة بالمحمدية، حفلا تأبينيا مؤثرا تكريما لروح اللاعب الدولي المغربي السابق أحمد فراس الذي يعد أحد رموز كرة القدم الوطنية. وجمع هذا الحفل، المنظم بشراكة مع جمعية الرياضة والصداقة، بحضور عامل عمالة المحمدية عادل المالكي، بمناسبة مرور أربعين يوما على وفاة الراحل، نخبة من اللاعبين الدوليين السابقين،  حفل تأبيني يكرم الراحل أحمد فراس     - هسبريس جريدة إلكترونية مغربية .', 'size': 2}, {'id': '242', 'title': 'المحمدية تحتضن حفلا تأبينيا لروح أسطورة الكرة المغربية أحمد فرس', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d9%85%d8%ad%d9%85%d8%af%d9%8a%d8%a9-%d8%aa%d8%ad%d8%aa%d8%b6%d9%86-%d8%ad%d9%81%d9%84%d8%a7-%d8%aa%d8%a3%d8%a8%d9%8a%d9%86%d9%8a%d8%a7-%d9%84%d8%b1%d9%88%d8%ad-%d8%a3%d8%b3%d8%b7%d9%88/', 'summary': 'المحمدية تحتضن حفلا تأبينيا لروح أسطورة الكرة المغربية أحمد فرس. أقامت مؤسسة محمد السادس للأبطال الرياضيين، مساء أمس الجمعة 12 شتنبر 2025 بالمحمدية، حفلا تأبينيا مؤثرا تكريما لروح اللاعب الدولي المغربي السابق أحمد فرس الذي يعد أحد رموز كرة القدم الوطنية. وجمع هذا الحفل، المنظم بشراكة مع جمعية الرياضة والصداقة، بحضور عامل عمالة المحمدية عادل المالكي، بمناسبة مرور أربعين يوما على وفاة الراحل، …  المحمدية تحتضن حفلا تأبينيا لروح أسطورة الكرة المغربية أحمد فرس     .', 'size': 2}], 'main_title': 'حفل تأبيني يكرم الراحل أحمد فراس'}, {'community_id': '1', 'articles': [{'id': '68', 'title': 'مباحثات مكثفة لرئيس مجلس النواب والوفد النيابي المرافق له مع مسؤولين فنلنديين', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/206124', 'summary': 'مباحثات مكثفة لرئيس مجلس النواب والوفد النيابي المرافق له مع مسؤولين فنلنديين.  أجرى رئيس مجلس النواب السيد راشيد الطالبي العلمي والوفد النيابي المرافق له، يوم الجمعة 12 شتنبر 2025 بالعاصمة الفنلندية هلسنكي، سلسلة مباحثات مع مسؤولين برلمانيين وحكوميين بجمهورية فنلندا، كما تخللت اللقاءات زيارات ميدانية للاطلاع على التجربة الفنلندية في عدة قطاعات. وشملت لقاءات العمل التي حضرها عن الجانب المغربي كل من السيد النائب محمد شوكي،', 'size': 2}, {'id': '196', 'title': 'مباحثات ومشاورات مكثفة لرئيس مجلس النواب مع مسؤولين فنلنديين في هلسنكي', 'source': 'rue20.com', 'link': 'https://rue20.com/936031.html', 'summary': 'مباحثات ومشاورات مكثفة لرئيس مجلس النواب مع مسؤولين فنلنديين في هلسنكي.  ا الرباط أجرى رئيس مجلس النواب راشيد الطالبي العلمي والوفد النيابي المرافق له، أمس الجمعة بالعاصمة الفنلندية هلسنكي، سلسلة مباحثات مع مسؤولين برلمانيين وحكوميين بجمهورية فنلندا، كما تخللت اللقاءات زيارات ميدانية للاطلاع على التجربة الفنلندية في عدة قطاعات. وشملت لقاءات العمل التي حضرها عن الجانب المغربي كل من النائب محمد شوكي، رئيس فريق الخبر مباحثات ومشاورات مكثفة لرئيس مجلس النواب مع مسؤولين فنلنديين في هلسنكي  .', 'size': 2}], 'main_title': 'مباحثات مكثفة لرئيس مجلس النواب والوفد النيابي المرافق له مع مسؤولين فنلنديين'}, {'community_id': '0', 'articles': [{'id': '98', 'title': 'زلزال قوي يضرب سواحل روسيا وتحذيرات من وقوع تسونامي', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/world/412664.html', 'summary': 'زلزال قوي يضرب سواحل روسيا وتحذيرات من وقوع تسونامي. ضرب زلزال قوي بلغت شدته 7,4 درجات على مقياس ريختر، اليوم السبت، سواحل الشرق الأقصى الروسي، وسط توقعات بأن تتسبب هذه الهزة الأرضية في موجات', 'size': 2}, {'id': '223', 'title': 'زلزال قوي يضرب سواحل روسيا وتخوفات من تسونامي', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d8%b2%d9%84%d8%b2%d8%a7%d9%84-%d9%82%d9%88%d9%8a-%d9%8a%d8%b6%d8%b1%d8%a8-%d8%b3%d9%88%d8%a7%d8%ad%d9%84-%d8%b1%d9%88%d8%b3%d9%8a%d8%a7-%d9%88%d8%aa%d8%ae%d9%88%d9%81%d8%a7%d8%aa-%d9%85%d9%86-%d8%aa/', 'summary': 'زلزال قوي يضرب سواحل روسيا وتخوفات من تسونامي.  – متابعة زلزال قوي يضرب سواحل روسيا وتخوفات من تسونامي ضرب زلزال قوي بلغت شدته 7,4 درجات على مقياس ريختر، اليوم السبت، سواحل الشرق الأقصى الروسي، وسط توقعات...  زلزال قوي يضرب سواحل روسيا وتخوفات من تسونامي     .', 'size': 2}], 'main_title': 'زلزال قوي يضرب سواحل روسيا وتحذيرات من وقوع تسونامي'}, {'community_id': '3', 'articles': [{'id': '108', 'title': 'بطولة العالم لألعاب القوى..سفيان البقالي وصلاح الدين بنيزيد يتأهلان إلى نهائي 3000 متر موانع', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/sport/others/412675.html', 'summary': 'بطولة العالم لألعاب القوى..سفيان البقالي وصلاح الدين بنيزيد يتأهلان إلى نهائي 3000 متر موانع. تأهل البطل الأولمبي والعالمي المغربي سفيان البقالي ومواطنه صلاح الدين بنيزيد، اليوم السبت، لنهائي سباق 3000 متر موانع، المدرج ضمن منافسات الدورة الـ 20 لبطولة', 'size': 2}, {'id': '396', 'title': 'بطولة العالم: البقالي وبنيزيد يتأهلان لنصف النهائي', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%a8%d8%b7%d9%88%d9%84%d8%a9-%d8%a7%d9%84%d8%b9%d8%a7%d9%84%d9%85-%d8%a7%d9%84%d8%a8%d9%82%d8%a7%d9%84%d9%8a-%d9%88%d8%a8%d9%86%d9%8a%d8%b2%d9%8a%d8%af-%d9%8a%d8%aa%d8%a3%d9%87%d9%84%d8%a7%d9%86/', 'summary': 'بطولة العالم: البقالي وبنيزيد يتأهلان لنصف النهائي. المساء اليوم: تأهل البطل الأولمبي والعالمي المغربي سفيان البقالي ومواطنه صلاح الدين بنيزيد، اليوم السبت، لنهائي سباق 3000 متر موانع، المدرج ضمن منافسات الدورة الـ 20 لبطولة العالم لألعاب القوى التي تحضتنها طوكيو إلى غاية', 'size': 2}], 'main_title': 'بطولة العالم لألعاب القوى..سفيان البقالي وصلاح الدين بنيزيد يتأهلان إلى نهائي 3000 متر موانع'}, {'community_id': '4', 'articles': [{'id': '125', 'title': 'فاس.. نزاع بين ثلاثة أفراد يتحول إلى عنف بالسكاكين', 'source': 'kifache.com', 'link': 'https://kifache.com/%d9%81%d8%a7%d8%b3-%d9%86%d8%b2%d8%a7%d8%b9-%d8%a8%d9%8a%d9%86-%d8%ab%d9%84%d8%a7%d8%ab%d8%a9-%d8%a3%d9%81%d8%b1%d8%a7%d8%af-%d9%8a%d8%aa%d8%ad%d9%88%d9%84-%d8%a5%d9%84%d9%89-%d8%b9%d9%86%d9%81/', 'summary': 'فاس.. نزاع بين ثلاثة أفراد يتحول إلى عنف بالسكاكين. تفاعلت ولاية أمن فاس، بجدية كبيرة، مع شريط فيديو منشور على مواقع التواصل الاجتماعي يوم أمس الجمعة (12 شتنبر)، يظهر شخصين يحوزان أسلحة بيضاء في ظروف تشكل خطراً على سلامة الأشخاص والممتلكات. وأوضحت الأبحاث والتحريات أن الأمر يتعلق بقضية زجرية سبق أن عالجتها مصالح الشرطة بتاريخ 31 غشت الماضي، حيث أسفرت التدخلات آنذاك عن تحديد', 'size': 2}, {'id': '347', 'title': 'فيديو السلاح الأبيض يثير الجدل.. أمن فاس يوقف قاصرا ويطارد متورطا آخر', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/323258/', 'summary': 'فيديو السلاح الأبيض يثير الجدل.. أمن فاس يوقف قاصرا ويطارد متورطا آخر. تفاعلت ولاية أمن فاس، بجدية كبيرة، مع شريط فيديو منشور على صفحات مواقع التواصل الاجتماعي يوم أمس الجمعة 12 شتنبر الجاري، يظهر حيازة شخصين للسلاح الأبيض في ظروف تشكل خطرا على الأشخاص والممتلكات. وقد أوضحت الأبحاث والتحريات المنجزة على ضوء هذا الشريط، أن الأمر يتعلق بقضية زجرية عالجتها مصالح الشرطة بولاية أمن فاس بتاريخ 31', 'size': 2}], 'main_title': 'فاس.. نزاع بين ثلاثة أفراد يتحول إلى عنف بالسكاكين'}, {'community_id': '5', 'articles': [{'id': '153', 'title': 'موسم صيفي ناجح وأرقام مهمة للمكتب الوطني للسكك الحديدية', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-589091.html', 'summary': 'موسم صيفي ناجح وأرقام مهمة للمكتب الوطني للسكك الحديدية. بعد موسم صيفي اتسم بحركية مكثفة بين مختلف الوجهات، رافق المكتب الوطني للسكك الحديدية رحلات أزيد من 14 مليون مسافر اختاروا القطار، مؤكدين مكانته كوسيلة نقل مفضلة. وتمكن المكتب الوطني للسكك الحديدية من تحقيق هذا الإنجاز المتميز بفضل تعزيز العرض عبر برمجة قطارات إضافية والرفع من الطاقة الاستيعابية على المحاور الأكثر إقبالا وتسخير', 'size': 2}, {'id': '402', 'title': 'المكتب الوطني للسكك الحديدية يختتم موسمه الصيفي لعام 2025', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d9%85%d9%83%d8%aa%d8%a8-%d8%a7%d9%84%d9%88%d8%b7%d9%86%d9%8a-%d9%84%d9%84%d8%b3%d9%83%d9%83-%d8%a7%d9%84%d8%ad%d8%af%d9%8a%d8%af%d9%8a%d8%a9-%d9%8a%d8%ae%d8%aa%d8%aa%d9%85-%d9%85%d9%88/', 'summary': 'المكتب الوطني للسكك الحديدية يختتم موسمه الصيفي لعام 2025. أعلن المكتب الوطني للسكك الحديدية (ONCF) عن نجاح باهر لموسمه الصيفي لعام 2025، حيث تجاوز عدد المسافرين الذين اختاروا القطار 14 مليون مسافر. ويعود هذا الإنجاز المتميز إلى الجهود الكبيرة التي قام بها المكتب، بما في ذلك تعزيز العرض بقطارات إضافية، والرفع من الطاقة الاستيعابية على المحاور الأكثر إقبالاً، فضلاً عن التعبئة المستمرة لفرقه العاملة …  المكتب الوطني للسكك الحديدية يختتم موسمه الصيفي لعام 2025     .', 'size': 2}], 'main_title': 'موسم صيفي ناجح وأرقام مهمة للمكتب الوطني للسكك الحديدية'}, {'community_id': '9', 'articles': [{'id': '168', 'title': 'رابطة الكتبيين تستنكر خرق دفتر التحملات وتطالب بتدخل عاجل لحماية المهنيين', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1099421.html', 'summary': 'رابطة الكتبيين تستنكر خرق دفتر التحملات وتطالب بتدخل عاجل لحماية المهنيين. استنكرت رابطة الكتبيين بالمغرب ما جرى تداوله من طرف إحدى شركات التوزيع المكلفة ببعض كتب مدرسة الريادة، بخصوص الهامش المخصص للربح لفائدة الموزعين والكتبيين، والذي تم تحديده بشكل واضح وصريح في دفتر التحملات. وأكدت الرابطة، في بلاغ توصلت به جريدة “العمق المغربي”، أن هذه الممارسات تشكل خرقا لجوهر مقتضيات دفتر التحملات، وتتسبب في أضرار مباشرة ظهرت المقالة رابطة الكتبيين تستنكر خرق دفتر التحملات وتطالب بتدخل عاجل لحماية المهنيين  .', 'size': 3}, {'id': '335', 'title': 'توزيع “كتب مدرسة الريادة”.. رابطة الكتبيين تحذر من التلاعب بهامش الربح', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%aa%d9%88%d8%b2%d9%8a%d8%b9-%d9%83%d8%aa%d8%a8-%d9%85%d8%af%d8%b1%d8%b3%d8%a9-%d8%a7%d9%84%d8%b1%d9%8a%d8%a7%d8%af%d8%a9-%d8%b1%d8%a7%d8%a8%d8%b7%d8%a9-%d8%a7%d9%84%d9%83%d8%aa%d8%a8%d9%8a/', 'summary': 'توزيع “كتب مدرسة الريادة”.. رابطة الكتبيين تحذر من التلاعب بهامش الربح. عبرت رابطة الكتبيين بالمغرب عن استنكارها لما جرى تداوله من طرف إحدى شركات التوزيع المكلفة ببعض كتب مدرسة الريادة بخصوص الهامش المخصص للربح لفائدة الموزعين والكتبيين، والمحدد بشكل صريح في دفتر التحملات. وقالت الرابطة، في بلاغ لها، إن هذه الممارسات تمس جوهر مقتضيات دفتر التحملات وتلحق أضرارا مباشرة بالمهنيين وبسير عملية توزيع كتب مدرسة الريادة', 'size': 2}, {'id': '339', 'title': 'رابطة الكتبيين تحذر من خروقات في توزيع كتب مدارس الريادة', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/323261/', 'summary': 'رابطة الكتبيين تحذر من خروقات في توزيع كتب مدارس الريادة. استنكرت رابطة الكتبيين بالمغرب ما جرى تداوله من طرف إحدى شركات التوزيع المكلفة ببعض كتب مدرسة الريادة بخصوص الهامش المخصص للربح لفائدة الموزعين والكتبيين، والمحدد بشكل صريح في دفتر التحملات. وأكدت الرابطة في بلاغها، أن هذه الممارسات تمس جوهر مقتضيات دفتر التحملات وتلحق أضرارا مباشرة بالمهنيين وبسير عملية توزيع كتب مدرسة الريادة على الصعيد الوطني.', 'size': 4}, {'id': '388', 'title': 'رابطة الكتبيين بالمغرب: تجاوزات وخروقات في توزيع كتب مدارس الريادة تلحق أضرارا مباشرة بالمهنيين', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/227000/', 'summary': 'رابطة الكتبيين بالمغرب: تجاوزات وخروقات في توزيع كتب مدارس الريادة تلحق أضرارا مباشرة بالمهنيين. استنكرت رابطة الكتبيين بالمغرب بشدة ما تداولته إحدى شركات التوزيع المكلفة ببعض كتب مدرسة الريادة بخصوص الهامش المخصص للربح لفائدة الموزعين والكتبيين، والمحدد بشكل صريح في دفتر التحملات. واعتبرت الرابطة في بلاغ استنكاري، تتوفر جريدة “كواليس اليوم” على نسخة منه، صادر اليوم السبت، أن هذه الممارسات تمس جوهر مقتضيات دفتر التحملات وتلحق أضرارا مباشرة بالمهنيين', 'size': 3}], 'main_title': 'رابطة الكتبيين تحذر من خروقات في توزيع كتب مدارس الريادة'}, {'community_id': '10', 'articles': [{'id': '172', 'title': 'سفيان البقالي يتجاوز التصفيات ويؤمن عبوره إلى نهائي بطولة طوكيو', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1099398.html', 'summary': 'سفيان البقالي يتجاوز التصفيات ويؤمن عبوره إلى نهائي بطولة طوكيو. تأهل العداء المغربي والبطل الأولمبي سفيان البقالي، إلى نهائي سباق 3000 متر موانع في بطولة العالم لألعاب القوى المقامة بطوكيو، بعد تصدره تصفيات المجموعات الثلاث. وسجل البقالي زمن 8:26.99، ليضمن تأهله بسهولة، فيما تأهل إلى الدور النهائي أيضًا العداء المغربي صلاح الدين بن يزيد، الذي حقق ثاني أفضل توقيت إجمالي بتسجيله 8:27.21 دقيقة، بعد تصدره ظهرت المقالة سفيان البقالي يتجاوز التصفيات ويؤمن عبوره إلى نهائي بطولة طوكيو  .', 'size': 3}, {'id': '243', 'title': 'سفيان البقالي يتأهل إلى نهائي 3 آلاف متر موانع في بطولة العالم بطوكيو', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%b3%d9%81%d9%8a%d8%a7%d9%86-%d8%a7%d9%84%d8%a8%d9%82%d8%a7%d9%84%d9%8a-%d9%8a%d8%aa%d8%a3%d9%87%d9%84-%d8%a5%d9%84%d9%89-%d9%86%d9%87%d8%a7%d8%a6%d9%8a-3-%d8%a2%d9%84%d8%a7%d9%81-%d9%85%d8%aa%d8%b1/', 'summary': 'سفيان البقالي يتأهل إلى نهائي 3 آلاف متر موانع في بطولة العالم بطوكيو. تأهل البطل الأولمبي والعالمي المغربي، سفيان البقالي اليوم السبت 13 شتنبر 2025، إلى نهائي سباق 3 آلاف متر موانع دون عناء، بصدارته تصفيات المجموعات الثلاث في بطولة العالم لألعاب القوى في طوكيو. ورافق البقالي الذي سجل 8:26.99 دقائق إلى النهائي مواطنه صلاح الدين بن يزيد صاحب أسرع توقيت في المجموعة الثانية والثاني على الإطلاق …  سفيان البقالي يتأهل إلى نهائي 3 آلاف متر موانع في بطولة العالم بطوكيو     .', 'size': 2}, {'id': '390', 'title': 'بعد تأهله إلى النهائي.. البقالي:” سعيد بتأهلي لنهائي سباق 3000 متر وأتمنى دعوات المغاربة والعرب”', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/226994/', 'summary': 'بعد تأهله إلى النهائي.. البقالي:” سعيد بتأهلي لنهائي سباق 3000 متر وأتمنى دعوات المغاربة والعرب”. عبر العداء المغربي سفيان البقالي، عن سعادته بعد تأهله إلى نهائي سباق 3000 متر موانع، في منافسات بطولة العالم لألعاب القوى “طوكيو 2025”. وقال البقالي في تصريح اعلامي بعد السباق: “الحمد لله، تمكنت من الوصول لهدفي المنشود، وأجريت السباق بأقل مجهود للحفاظ على طراوتي البدنية استعدادا للنهائي “. وتابع: صديقي المغربي صلاح الدين بن يزيد', 'size': 2}], 'main_title': 'سفيان البقالي يتجاوز التصفيات ويؤمن عبوره إلى نهائي بطولة طوكيو'}, {'community_id': '2', 'articles': [{'id': '179', 'title': 'ارتفاع عدد حالات الإصابة بالكوليرا عالميا', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a7%d8%b1%d8%aa%d9%81%d8%a7%d8%b9-%d8%b9%d8%af%d8%af-%d8%ad%d8%a7%d9%84%d8%a7%d8%aa-%d8%a7%d9%84%d8%a5%d8%b5%d8%a7%d8%a8%d8%a9-%d8%a8%d8%a7%d9%84%d9%83%d9%88%d9%84%d9%8a%d8%b1%d8%a7-%d8%b9%d8%a7/', 'summary': 'ارتفاع عدد حالات الإصابة بالكوليرا عالميا. ارتفع عدد حالات الإصابة بالكوليرا المبلغ عنها حول العالم في عام 2024، وفق ما كشفه تقرير لمنظمة الصحة العالمية. وأظهر التقرير زيادة حالات الكوليرا المبلغ عنها بنسبة 5 في المائة، بينما ارتفعت حالات الوفاة بنسبة 50 في المائة مقارنة بعام 2023، حيث توفي أكثر من 6 آلاف شخص بسبب هذا المرض القابل للوقاية والعلاج. وأشار  ارتفاع عدد حالات الإصابة بالكوليرا عالميا     .', 'size': 2}, {'id': '240', 'title': 'منظمة الصحة العالمية: ارتفاع وفيات الكوليرا بنسبة 50% عام 2024', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d9%85%d9%86%d8%b8%d9%85%d8%a9-%d8%a7%d9%84%d8%b5%d8%ad%d8%a9-%d8%a7%d9%84%d8%b9%d8%a7%d9%84%d9%85%d9%8a%d8%a9-%d8%a7%d8%b1%d8%aa%d9%81%d8%a7%d8%b9-%d9%88%d9%81%d9%8a%d8%a7%d8%aa-%d8%a7%d9%84%d9%83/', 'summary': 'منظمة الصحة العالمية: ارتفاع وفيات الكوليرا بنسبة 50% عام 2024. كشف تقرير لمنظمة الصحة العالمية، عن ارتفاع عدد حالات الإصابة بالكوليرا المُبلغ عنها حول العالم في عام 2024. وأظهر تقرير المنظمة، ارتفاع حالات الكوليرا المُبلّغ عنها بنسبة 5 في المائة، وارتفاع حالات الوفاة بنسبة 50 في المائة في عام 2024 مقارنةً بعام 2023، حيث تُوفي أكثر من 6 آلاف شخص بسبب المرض الذي …  منظمة الصحة العالمية: ارتفاع وفيات الكوليرا بنسبة 50% عام 2024     .', 'size': 2}], 'main_title': 'ارتفاع عدد حالات الإصابة بالكوليرا عالميا'}, {'community_id': '7', 'articles': [{'id': '188', 'title': 'إحباط عملية تهريب طن و300 كيلوغرام من مخدر الشيرا قرب أكلو بتزنيت', 'source': 'rue20.com', 'link': 'https://rue20.com/936098.html', 'summary': 'إحباط عملية تهريب طن و300 كيلوغرام من مخدر الشيرا قرب أكلو بتزنيت. زنقة20| تزنيت تمكنت المصالح الأمنية المختصة، صباح اليوم السبت 13 شتنبر الجاري، من إحباط عملية تهريب كبرى للمخدرات على مستوى منطقة أكلو قرب بولفضايل بإقليم تزنيت، بناءً على معلومات دقيقة وفرتها المديرية العامة لمراقبة التراب الوطني (DST). وأسفرت العملية التي نفذت بدورية مشتركة ضمت جهاز القوات المساعدة والدرك الملكي والقوات المسلحة الملكية وبتنسيق مع السلطات الخبر إحباط عملية تهريب طن و300 كيلوغرام من مخدر الشيرا قرب أكلو بتزنيت  .', 'size': 2}, {'id': '307', 'title': 'إحباط تهريب طن و300 كيلوغرام من المخدرات بتزنيت', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-657031.html', 'summary': 'إحباط تهريب طن و300 كيلوغرام من المخدرات بتزنيت. أحبطت المصالح الأمنية المختصة، صباح اليوم السبت 13 شتنبر 2025، محاولة تهريب كبرى للمخدرات بمنطقة أكلو قرب بولفضايل بإقليم تزنيت، بناءً على معلومات دقيقة قدمتها المديرية العامة لمراقبة التراب الوطني (DST). وأفادت المصادر الرسمية أن العملية ، التي نُفذت بواسطة دورية مشتركة ضمت جهاز القوات المساعدة والدرك الملكي والقوات المسلحة الملكية، وبالتنسيق مع السلطات المحلية، أسفرت عن حجز ما يقارب طنًا و300 كيلوغرام من مخدر الشيرا، كانت مهيأة للتهريب عبر البحر نحو جزر الكناري. وتندرج هذه العملية ضمن الجهود المستمرة للمصالح الأمنية لمحاربة تهريب المخدرات وحماية الأمن العام، مؤكدة فاعلية التنسيق بين مختلف الأجهزة الأمنية والسلطات المحلية لضمان التصدي لجميع أشكال التهريب والجريمة المنظمة. (الصورة تعبيرية)', 'size': 2}], 'main_title': 'إحباط عملية تهريب طن و300 كيلوغرام من مخدر الشيرا قرب أكلو بتزنيت'}, {'community_id': '8', 'articles': [{'id': '201', 'title': 'مجلس حقوق الإنسان: منظمات غير حكومية تحذر من استمرار العبودية في مخيمات تندوف', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/475250.html', 'summary': 'مجلس حقوق الإنسان: منظمات غير حكومية تحذر من استمرار العبودية في مخيمات تندوف. و.م.ع أثارت منظمات غير حكومية، أمس الجمعة خلال الدورة الـ60 لمجلس حقوق الإنسان بجنيف، انتباه المجتمع الدولي إلى استمرار ممارسات العبودية في مخيمات تندوف. ونددت الخبيرة القانونية لوسيا فيريرا بيريا، خلال الحوار التفاعلي مع المقرر الخاص المعني بأشكال الرق المعاصرة، بواقع العبودية الوراثية وبالتمييز العنصري المستمر بهذه المخيمات التي تديرها جماعة “البوليساريو” المسلحة. وفي كلمة …', 'size': 2}, {'id': '343', 'title': 'منظمات غير حكومية تحذر من استمرار العبودية في مخيمات تندوف', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/323264/', 'summary': 'منظمات غير حكومية تحذر من استمرار العبودية في مخيمات تندوف. أثارت منظمات غير حكومية، أمس الجمعة خلال الدورة الـ60 لمجلس حقوق الإنسان بجنيف، انتباه المجتمع الدولي إلى استمرار ممارسات العبودية في مخيمات تندوف. ونددت الخبيرة القانونية لوسيا فيريرا بيريا، خلال الحوار التفاعلي مع المقرر الخاص المعني بأشكال الرق المعاصرة، بواقع العبودية الوراثية وبالتمييز العنصري المستمر بهذه المخيمات التي تديرها جماعة “البوليساريو” المسلحة. وفي كلمة باسم', 'size': 2}], 'main_title': 'مجلس حقوق الإنسان: منظمات غير حكومية تحذر من استمرار العبودية في مخيمات تندوف'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    