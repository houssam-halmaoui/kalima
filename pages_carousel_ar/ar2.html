<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 03/08/2025 - 18h28</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '0', 'title': 'الشيبي وبنتايك الأفضل بدوري مصر', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d8%a7%d9%84%d8%b4%d9%8a%d8%a8%d9%8a-%d9%88%d8%a8%d9%86%d8%aa%d8%a7%d9%8a%d9%83-%d8%a7%d9%84%d8%a3%d9%81%d8%b6%d9%84-%d8%a8%d8%a7%d9%84%d8%af%d9%88%d8%b1%d9%8a-%d8%a7%d9%84%d9%85%d8%b5%d8%b1%d9%8a-1603454.html', 'summary': 'الشيبي وبنتايك الأفضل بدوري مصر. شهد حفل جوائز “دير جيست” السنوي، مساء أمس السبت، تتويجًا لافتًا للاعبَين المغربيَين محمد الشيبي ومحمود بنتايك، ضمن فعاليات تكريم نجوم الدوري المصري الممتاز لموسم 2024-2025. وتُوج محمد الشيبي، الظهير الأيمن لنادي بيراميدز، بجائزة أفضل ظهير أيمن، بعدما قدّم موسمًا استثنائيًا رفقة فريقه، حيث تألق دفاعًا وهجومًا وأسهم في صناعة العديد من الأهداف، إلى جانب  الشيبي وبنتايك الأفضل بدوري مصر     - هسبريس جريدة إلكترونية مغربية .', 'size': 2}, {'id': '322', 'title': 'الشيبي وبنتايك الأفضل في الدوري المصري في موسم 2024-2025', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/320121/', 'summary': 'الشيبي وبنتايك الأفضل في الدوري المصري في موسم 2024-2025. خطف اللاعبان المغربيان محمد الشيبي ومحمود بنتايك الأضواء في حفل توزيع جوائز “دير جيست” السنوي الذي أقيم السبت، بعد تتويجهما بجوائز الأفضل في الدوري المصري الممتاز لموسم 2024-2025. وحصل محمد الشيبي، الظهير الأيمن لنادي بيراميدز، على جائزة أفضل ظهير أيمن في البطولة، بعد موسم استثنائي قدّم خلاله أداءً متوازنا بين الدفاع والهجوم، وأسهم في صناعة', 'size': 2}], 'main_title': 'الشيبي وبنتايك الأفضل بدوري مصر'}, {'community_id': '1', 'articles': [{'id': '5', 'title': 'الفوضى تعيق المساعدات في غزة', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d8%a7%d9%84%d9%81%d9%88%d8%b6%d9%89-%d8%aa%d8%b9%d9%8a%d9%82-%d8%a7%d9%84%d9%85%d8%b3%d8%a7%d8%b9%d8%af%d8%a7%d8%aa-%d9%81%d9%8a-%d8%ba%d8%b2%d8%a9-1603410.html', 'summary': 'الفوضى تعيق المساعدات في غزة. بعد 22 شهرًا من الحرب، تتصارع حشود جائعة على القليل من الغذاء الذي يدخل غزة، مخاطرةً بحياتها تحت النيران، أو يتم نهبه من قبل عصابات إجرامية، أو الاستيلاء عليه بطرق أخرى وسط الفوضى، دون أن يصل إلى من هم في أمسّ الحاجة إليه. وعقب وقف جزئي للقصف أعلنته إسرائيل الأحد تحت ضغط دولي بسبب خطر  الفوضى تعيق المساعدات في غزة     - هسبريس جريدة إلكترونية مغربية .', 'size': 2}, {'id': '139', 'title': 'غزة تصارع للوصول إلى المساعدات', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/320101/', 'summary': 'غزة تصارع للوصول إلى المساعدات. بعد 22 شهرًا من الحرب، تتصارع حشود جائعة على القليل من الغذاء الذي يدخل غزة، مخاطرةً بحياتها تحت النيران، أو يتم نهبه من قبل عصابات إجرامية، أو الاستيلاء عليه بطرق أخرى وسط الفوضى، دون أن يصل إلى من هم في أمسّ الحاجة إليه. وعقب وقف جزئي للقصف أعلنته إسرائيل الأحد تحت ضغط دولي بسبب خطر', 'size': 2}], 'main_title': 'الفوضى تعيق المساعدات في غزة'}, {'community_id': '2', 'articles': [{'id': '9', 'title': 'مورينيو يتمسك بالنصيري في فنربخشة', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d9%85%d9%88%d8%b1%d9%8a%d9%86%d9%8a%d9%88-%d9%8a%d8%aa%d9%85%d8%b3%d9%83-%d8%a8%d8%a7%d9%84%d9%86%d8%b5%d9%8a%d8%b1%d9%8a-%d9%81%d9%8a-%d9%81%d9%86%d8%b1%d8%a8%d8%ae%d8%b4%d8%a9-1603387.html', 'summary': 'مورينيو يتمسك بالنصيري في فنربخشة. كشفت تقارير إعلامية تركية أن المدرب البرتغالي جوزيه مورينيو، المدير الفني لفريق فنربخشة، حسم موقفه بشأن مستقبل المهاجم المغربي يوسف النصيري، حيث عبّر عن رغبته الصريحة في الاحتفاظ بخدماته، مغلقًا بذلك الباب أمام أي احتمال لرحيله خلال فترة الانتقالات الصيفية الجارية. وبحسب ما أفادت به صحيفة “Tekvim” التركية، فإن مورينيو أبلغ إدارة النادي برغبته في  مورينيو يتمسك بالنصيري في فنربخشة     - هسبريس جريدة إلكترونية مغربية .', 'size': 2}, {'id': '124', 'title': 'الميركاتو الصيفي. فنربخشة يحسم موقفه من النصيري ويضع أمرابط في سوق الانتقالات', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a7%d9%84%d9%85%d9%8a%d8%b1%d9%83%d8%a7%d8%aa%d9%88-%d8%a7%d9%84%d8%b5%d9%8a%d9%81%d9%8a-%d9%81%d9%86%d8%b1%d8%a8%d8%ae%d8%b4%d8%a9-%d9%8a%d8%ad%d8%b3%d9%85-%d9%85%d9%88%d9%82%d9%81%d9%87-%d9%85/', 'summary': 'الميركاتو الصيفي. فنربخشة يحسم موقفه من النصيري ويضع أمرابط في سوق الانتقالات. أكدت تقارير إعلامية تركية أن البرتغالي جوزيه مورينيو، مدرب فنربخشة، حسم قراره بشأن مستقبل المهاجم المغربي يوسف النصيري، مشدّدًا على رغبته في الاحتفاظ به ضمن صفوف الفريق خلال الموسم المقبل. وحسب ما أوردته صحيفة “Tekvim”، فإن مورينيو أبلغ إدارة النادي بعدم التفريط في النصيري، معتبرًا إياه أحد الركائز الأساسية التي يعوّل عليها في خط الهجوم،', 'size': 2}], 'main_title': 'مورينيو يتمسك بالنصيري في فنربخشة'}, {'community_id': '3', 'articles': [{'id': '69', 'title': 'وزير الداخلية يعقد  اجتماعا مع قادة الأحزاب السياسية في شأن التحضير للانتخابات التشريعية المقبلة', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/204580', 'summary': 'وزير الداخلية يعقد اجتماعا مع قادة الأحزاب السياسية في شأن التحضير للانتخابات التشريعية المقبلة.  عقد وزير الداخلية، يومه السبت 2 غشت الجاري، اجتماعين متواليين مع قادة كافة الأحزاب السياسية خصصا لموضوع تحضير الانتخابات التشريعية المتعلقة بانتخاب أعضاء مجلس النواب لسنة 2026. ويندرج هذان الاجتماعان في إطار التنفيذ الفوري للتوجيهات السامية لصاحب الجلالة الملك محمد السادس نصره الله وأيده، الواردة في خطاب العرش ليوم 29 يوليوز المنصرم، بمناسبة تخليد', 'size': 2}, {'id': '178', 'title': 'لفتيت يدعو زعماء الأحزاب السياسية لتقديم مقترحاتهم حول الإطار المنظم لإنتخابات 2026', 'source': 'rue20.com', 'link': 'https://rue20.com/926160.html', 'summary': 'لفتيت يدعو زعماء الأحزاب السياسية لتقديم مقترحاتهم حول الإطار المنظم لإنتخابات 2026. . الرباط عقد وزير الداخلية، اليوم السبت بالرباط، اجتماعين متواليين مع قادة كافة الأحزاب السياسية، خصصا لموضوع تحضير الانتخابات التشريعية المتعلقة بانتخاب أعضاء مجلس النواب لسنة 2026. وذكر بلاغ لوزير الداخلية أن هذين الاجتماعين يندرجان في إطار التنفيذ الفوري للتوجيهات السامية لصاحب الجلالة الملك محمد السادس، نصره الله وأيده، الواردة في خطاب العرش ليوم الخبر لفتيت يدعو زعماء الأحزاب السياسية لتقديم مقترحاتهم حول الإطار المنظم لإنتخابات 2026  .', 'size': 2}], 'main_title': 'وزير الداخلية يعقد  اجتماعا مع قادة الأحزاب السياسية في شأن التحضير للانتخابات التشريعية المقبلة'}, {'community_id': '6', 'articles': [{'id': '83', 'title': 'ترامب يوجّه رسالة إلى الملك محمد السادس ويجدّد الاعتراف الأمريكي بمغربية الصحراء', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/politic/410384.html', 'summary': 'ترامب يوجّه رسالة إلى الملك محمد السادس ويجدّد الاعتراف الأمريكي بمغربية الصحراء. جدد رئيس الولايات المتحدة الأمريكية، دونالد ج. ترامب، في برقية إلى صاحب الجلالة الملك محمد السادس بمناسبة عيد العرش، التأكيد على اعتراف الولايات المتحدة الأمريكية', 'size': 3}, {'id': '125', 'title': 'رسالة ترامب لجلالة الملك.. التزام أمريكي بدعم الوحدة الترابية المغربية', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%b1%d8%b3%d8%a7%d9%84%d8%a9-%d8%aa%d8%b1%d8%a7%d9%85%d8%a8-%d9%84%d8%ac%d9%84%d8%a7%d9%84%d8%a9-%d8%a7%d9%84%d9%85%d9%84%d9%83-%d8%a7%d9%84%d8%aa%d8%b2%d8%a7%d9%85-%d8%a3%d9%85%d8%b1%d9%8a%d9%83/', 'summary': 'رسالة ترامب لجلالة الملك.. التزام أمريكي بدعم الوحدة الترابية المغربية. جددت الولايات المتحدة الأمريكية، على لسان رئيسها دونالد ترامب، التأكيد على موقفها الداعم للوحدة الترابية للمملكة المغربية، من خلال إعادة تأكيد الاعتراف بسيادة المغرب على أقاليمه الجنوبية. وفي برقية رسالة إلى جلالة الملك محمد السادس بمناسبة عيد العرش، شدد الرئيس الأمريكي على أن “مقترح الحكم الذاتي المغربي يمثل “الأساس الوحيد” لحل عادل ودائم لهذا النزاع،', 'size': 2}, {'id': '134', 'title': 'في برقية إلى الملك … ترامب يجدد التأكيد على اعتراف الولايات المتحدة بالسيادة المغربية على الصحراء', 'source': 'assabah.ma', 'link': 'https://assabah.ma/863269.html', 'summary': 'في برقية إلى الملك … ترامب يجدد التأكيد على اعتراف الولايات المتحدة بالسيادة المغربية على الصحراء. جدد رئيس الولايات المتحدة الأمريكية، دونالد ترامب، في برقية إلى صاحب الجلالة الملك محمد السادس بمناسبة عيد العرش، التأكيد على اعتراف الولايات المتحدة الأمريكية بالسيادة المغربية على الصحراء، ودعمها للمقترح المغربي للحكم الذاتي “باعتباره الأساس الوحيد من أجل تسوية عادلة ودائمة لهذا النزاع”. وأكد ترامب، فيأكمل القراءة » المقالة في برقية إلى الملك … ترامب يجدد التأكيد على اعتراف الولايات المتحدة بالسيادة المغربية على الصحراء  .', 'size': 2}, {'id': '183', 'title': 'ترامب يجدد التأكيد لجلالة الملك الدعم الكامل للولايات المتحدة لسيادة المغرب على صحرائه', 'source': 'rue20.com', 'link': 'https://rue20.com/926131.html', 'summary': 'ترامب يجدد التأكيد لجلالة الملك الدعم الكامل للولايات المتحدة لسيادة المغرب على صحرائه. . الرباط جدد رئيس الولايات المتحدة الأمريكية، دونالد ج. ترامب، في برقية إلى صاحب الجلالة الملك محمد السادس بمناسبة عيد العرش، التأكيد على اعتراف الولايات المتحدة الأمريكية بالسيادة المغربية على الصحراء، ودعمها للمقترح المغربي للحكم الذاتي “باعتباره الأساس الوحيد من أجل تسوية عادلة ودائمة لهذا النزاع”. وأكد السيد ترامب، في برقيته إلى جلالة الملك، الخبر ترامب يجدد التأكيد لجلالة الملك الدعم الكامل للولايات المتحدة لسيادة المغرب على صحرائه  .', 'size': 3}], 'main_title': 'ترامب يوجّه رسالة إلى الملك محمد السادس ويجدّد الاعتراف الأمريكي بمغربية الصحراء'}, {'community_id': '5', 'articles': [{'id': '121', 'title': 'بعد 45 سنة، إسبانيا تفرج عن الوثائق السرية وتفتح ملف المسيرة الخضراء', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/politic/410426.html', 'summary': 'بعد 45 سنة، إسبانيا تفرج عن الوثائق السرية وتفتح ملف المسيرة الخضراء. تتجه الحكومة الإسبانية للمصادقة على قانون جديد يرفع السرية عن آلاف الوثائق الرسمية التي تعود لما قبل سنة 1982، بما في ذلك تلك المتعلقة بالانسحاب', 'size': 2}, {'id': '375', 'title': 'شهادات جامعية مزورة تهز المشهد السياسي في إسبانيا', 'source': 'www.alalam.ma', 'link': 'https://www.alalam.ma/شهادات-جامعية-مزورة-تهز-المشهد-السياسي-في-إسبانيا_a28983.html', 'summary': 'شهادات جامعية مزورة تهز المشهد السياسي في إسبانيا. الفضيحة تدفع نوابا من اليسار واليمين إلى الاستقالة ودعوات متزايدة للشفافية والمحاسبة العلم...', 'size': 2}], 'main_title': 'بعد 45 سنة، إسبانيا تفرج عن الوثائق السرية وتفتح ملف المسيرة الخضراء'}, {'community_id': '7', 'articles': [{'id': '138', 'title': 'أحلام تعود للمغرب ولقاء فني مرتقب في “موروكو مول”', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/320104/', 'summary': 'أحلام تعود للمغرب ولقاء فني مرتقب في “موروكو مول”. تستعد الفنانة الإماراتية أحلام الشامسي للغناء في المغرب، بعد غياب طويل دام أكثر من سبع سنوات، حيث ستقوم بجولة فنية ستقودها للعديد من الدول العربية، منها تونس والمغرب. وستلتقي أحلام مع جمهورها المغربي يوم السبت 23 غشت الجاري، في مركب موروكو مول لالدار البيضاء، حيث ستقام السهرة بقيادة المايسترو العربي وليد فايد، الذي لطالما رافق', 'size': 2}, {'id': '345', 'title': 'الفنانة أحلام تستعد لإحياء حفل فني كبير في المغرب', 'source': 'soltana.ma', 'link': 'https://soltana.ma/1357573.html', 'summary': 'الفنانة أحلام تستعد لإحياء حفل فني كبير في المغرب. تستعد النجمة الإماراتية أحلام الشامسي لإحياء حفل فني استثنائي بمدينة الدار البيضاء، وذلك مساء يوم السبت 23 غشت الجاري، في فضاء “موروكو مول”، أحد أكبر المراكز التجارية والترفيهية، في سهرة ينتظرها جمهورها المغربي بشغف كبير. ويُرتقب أن يشكل هذا الحفل محطة فنية مميزة ضمن جولة أحلام الجديدة، التي تحيي من خلالها سلسلة من العروض في', 'size': 2}], 'main_title': 'أحلام تعود للمغرب ولقاء فني مرتقب في “موروكو مول”'}, {'community_id': '8', 'articles': [{'id': '168', 'title': 'نشرة إنذارية.. موجة حر وزخات رعدية مصحوبة بالبرد ورياح من الأحد إلى الجمعة', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d9%86%d8%b4%d8%b1%d8%a9-%d8%a5%d9%86%d8%b0%d8%a7%d8%b1%d9%8a%d8%a9-%d9%85%d9%88%d8%ac%d8%a9-%d8%ad%d8%b1-%d9%88%d8%b2%d8%ae%d8%a7%d8%aa-%d8%b1%d8%b9%d8%af%d9%8a%d8%a9-%d9%85%d8%b5%d8%ad%d9%88%d8%a8-2/', 'summary': 'نشرة إنذارية.. موجة حر وزخات رعدية مصحوبة بالبرد ورياح من الأحد إلى الجمعة. أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب تسجيل موجة حر من الأحد إلى الجمعة، وكذا زخات رعدية مصحوبة بتساقط البرد وبهبات رياح اليوم الأحد بعدد من مناطق المملكة. وأوضحت المديرية في نشرة إنذارية من مستوى يقظة برتقالي، أنه يرتقب تسجيل درجات حرارة تتراوح ما بين 40 و44 درجة من اليوم الأحد إلى يوم غد الاثنين  نشرة إنذارية.. موجة حر وزخات رعدية مصحوبة بالبرد ورياح من الأحد إلى الجمعة     .', 'size': 4}, {'id': '310', 'title': 'طقس مُتقلّب.. موجة حرّ وزخات رعدية في عدة مناطق', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%b7%d9%82%d8%b3-%d9%85%d9%8f%d8%aa%d9%82%d9%84%d9%91%d8%a8-%d9%85%d9%88%d8%ac%d8%a9-%d8%ad%d8%b1%d9%91-%d9%88%d8%b2%d8%ae%d8%a7%d8%aa-%d8%b1%d8%b9%d8%af%d9%8a%d8%a9-%d9%81%d9%8a-%d8%b9%d8%af/', 'summary': 'طقس مُتقلّب.. موجة حرّ وزخات رعدية في عدة مناطق. أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب تسجيل موجة حر من الأحد إلى الجمعة، وكذا زخات رعدية مصحوبة بتساقط البرد وبهبات رياح اليوم الأحد بعدد من مناطق المملكة. وأوضحت المديرية في نشرة إنذارية من مستوى يقظة برتقالي، أنه يرتقب تسجيل درجات حرارة تتراوح ما بين 40 و44 درجة من اليوم الأحد إلى يوم غد الاثنين', 'size': 4}, {'id': '327', 'title': 'نشرة إنذارية .. موجة حر وزخات رعدية مصحوبة بتساقط البرد بعدد من المناطق', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/320107/', 'summary': 'نشرة إنذارية .. موجة حر وزخات رعدية مصحوبة بتساقط البرد بعدد من المناطق. أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب تسجيل موجة حر من الأحد إلى الجمعة، وكذا زخات رعدية مصحوبة بتساقط البرد وبهبات رياح اليوم الأحد بعدد من مناطق المملكة. وأوضحت المديرية في نشرة إنذارية من مستوى يقظة برتقالي، أنه يرتقب تسجيل درجات حرارة تتراوح ما بين 40 و44 درجة من اليوم الأحد إلى يوم غد الاثنين', 'size': 3}, {'id': '372', 'title': 'موجة حر وزخات رعدية حتى الجمعة بعدد من المناطق', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d9%85%d9%88%d8%ac%d8%a9-%d8%ad%d8%b1-%d9%88%d8%b2%d8%ae%d8%a7%d8%aa-%d8%b1%d8%b9%d8%af%d9%8a%d8%a9-%d8%ad%d8%aa%d9%89-%d8%a7%d9%84%d8%ac%d9%85%d8%b9%d8%a9-%d8%a8%d8%b9%d8%af%d8%af-%d9%85%d9%86-%d8%a7/', 'summary': 'موجة حر وزخات رعدية حتى الجمعة بعدد من المناطق. المساء اليوم: أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب تسجيل موجة حر من الأحد إلى الجمعة، وكذا زخات رعدية مصحوبة بتساقط البرد وبهبات رياح اليوم الأحد بعدد من مناطق المملكة. وأوضحت المديرية في نشرة إنذارية', 'size': 3}], 'main_title': 'نشرة إنذارية.. موجة حر وزخات رعدية مصحوبة بالبرد ورياح من الأحد إلى الجمعة'}, {'community_id': '9', 'articles': [{'id': '171', 'title': 'ارتفاع الرواج الإجمالي للموانئ المغربية بـ 11,6 في المائة', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a7%d8%b1%d8%aa%d9%81%d8%a7%d8%b9-%d8%a7%d9%84%d8%b1%d9%88%d8%a7%d8%ac-%d8%a7%d9%84%d8%a5%d8%ac%d9%85%d8%a7%d9%84%d9%8a-%d9%84%d9%84%d9%85%d9%88%d8%a7%d9%86%d8%a6-%d8%a7%d9%84%d9%85%d8%ba%d8%b1/', 'summary': 'ارتفاع الرواج الإجمالي للموانئ المغربية بـ 11,6 في المائة. بلغ الرواج الإجمالي على صعيد الموانئ المغربية برسم الفصل الأول من سنة 2025، ما مجموعه 130 مليون طن مقابل 116,4 مليون طن في نفس الفترة من السنة الماضية أي بارتفاع بلغ 11,6 في المائة. وأوضح بلاغ لوزارة التجهيز والماء حول "أنشطة الموانئ بالمغرب برسم الفصل الأول من سنة 2025"، أن الرواج الوطني (دون احتساب المسافنة)  ارتفاع الرواج الإجمالي للموانئ المغربية بـ 11,6 في المائة     .', 'size': 2}, {'id': '326', 'title': 'ارتفاع الرواج على صعيد الموانئ المغربية', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/320109/', 'summary': 'ارتفاع الرواج على صعيد الموانئ المغربية. سجل الرواج الإجمالي على صعيد الموانئ المغربية ارتفاعا بـ11,6 في المائة، برسم الفصل الأول من سنة 2025، حيث بلغ ما مجموعه 130 مليون طن مقابل 116,4 مليون طن في الفترة نفسها من السنة الماضية. وحسب بلاغ لوزارة التجهيز والماء حول «أنشطة الموانئ بالمغرب برسم الفصل الأول من سنة 2025»، سجل الرواج الوطني (دون احتساب المسافنة)', 'size': 2}], 'main_title': 'ارتفاع الرواج الإجمالي للموانئ المغربية بـ 11,6 في المائة'}, {'community_id': '10', 'articles': [{'id': '173', 'title': 'الدارالبيضاء.. توقيع "اتفاقية الاستثمار" لتفعيل شركة نادي الرجاء الرياضي', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a7%d9%84%d8%af%d8%a7%d8%b1%d8%a7%d9%84%d8%a8%d9%8a%d8%b6%d8%a7%d8%a1-%d8%aa%d9%88%d9%82%d9%8a%d8%b9-%d8%a7%d8%aa%d9%81%d8%a7%d9%82%d9%8a%d8%a9-%d8%a7%d9%84%d8%a7%d8%b3%d8%aa%d8%ab%d9%85%d8%a7/', 'summary': 'الدارالبيضاء.. توقيع "اتفاقية الاستثمار" لتفعيل شركة نادي الرجاء الرياضي. تم، أمس السبت بالدار البيضاء، التوقيع على اتفاقية الاستثمار بين نادي الرجاء الرياضي وجمعية "موانئ من أجل التأثير" (Port4Impact)، المكلفة بتنفيذ سياسة المسؤولية الاجتماعية لشركة مرسى المغرب، وذلك بهدف تفعيل وتعزيز شركة الرجاء الرياضي "ش.م". وتجسد هذه الاتفاقية، التي وقعها كل من رئيس نادي الرجاء الرياضي جواد الزيات، ورئيس جمعية "Port4Impact"، إدريس أكوجيم، الانطلاقة الفعلية  الدارالبيضاء.. توقيع "اتفاقية الاستثمار" لتفعيل شركة نادي الرجاء الرياضي     .', 'size': 3}, {'id': '182', 'title': 'فوزي لقجع : تحول الرجاء إلى شركة لحظة فارقة ترسم الطريق نحو الإحتراف المستدام للكرة المغربية', 'source': 'rue20.com', 'link': 'https://rue20.com/926139.html', 'summary': 'فوزي لقجع : تحول الرجاء إلى شركة لحظة فارقة ترسم الطريق نحو الإحتراف المستدام للكرة المغربية. . الدارالبيضاء تم ، اليوم السبت بالدار البيضاء، التوقيع على إتفاقية الإستثمار بين نادي الرجاء الرياضي وجمعية “موانئ من أجل التأثير” (Port4Impact)، المكلفة بتنفيذ سياسة المسؤولية الاجتماعية لشركة مرسى المغرب ، وذلك بهدف تفعيل وتعزيز شركة الرجاء الرياضي “ش.م” . وتجسد هذه الاتفاقية، التي وقعها كل من رئيس نادي الرجاء الرياضي جواد الزيات، ورئيس الخبر فوزي لقجع : تحول الرجاء إلى شركة لحظة فارقة ترسم الطريق نحو الإحتراف المستدام للكرة المغربية  .', 'size': 2}, {'id': '194', 'title': 'توقيع “اتفاقية الإستثمار” لتفعيل شركة نادي الرجاء', 'source': 'machahid24.com', 'link': 'https://machahid24.com/sport/471453.html', 'summary': 'توقيع “اتفاقية الإستثمار” لتفعيل شركة نادي الرجاء. و.م.ع تم، اليوم السبت بالدار البيضاء، التوقيع على إتفاقية الإستثمار بين نادي الرجاء الرياضي وجمعية “موانئ من أجل التأثير” (Port4Impact)، المكلفة بتنفيذ سياسة المسؤولية الاجتماعية لشركة مرسى المغرب، وذلك بهدف تفعيل وتعزيز شركة الرجاء الرياضي “ش.م”. وتجسد هذه الاتفاقية، التي وقعها كل من رئيس نادي الرجاء الرياضي جواد الزيات، ورئيس جمعية “Port4Impact”، إدريس أكوجيم، الانطلاقة …', 'size': 3}, {'id': '371', 'title': 'التوقيع على اتفاقية الاستثمار بين نادي الرجاء وجمعية (Ports4Impact)', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%a7%d9%84%d8%aa%d9%88%d9%82%d9%8a%d8%b9-%d8%b9%d9%84%d9%89-%d8%a7%d8%aa%d9%81%d8%a7%d9%82%d9%8a%d8%a9-%d8%a7%d9%84%d8%a7%d8%b3%d8%aa%d8%ab%d9%85%d8%a7%d8%b1-%d8%a8%d9%8a%d9%86-%d9%86%d8%a7%d8%af/', 'summary': 'التوقيع على اتفاقية الاستثمار بين نادي الرجاء وجمعية (Port4Impact). المساء اليوم: تم بالدار البيضاء، التوقيع على إتفاقية الإستثمار بين نادي الرجاء الرياضي وجمعية “موانئ من أجل التأثير” (Port4Impact)، المكلفة بتنفيذ سياسة المسؤولية الاجتماعية لشركة مرسى المغرب، وذلك بهدف تفعيل وتعزيز شركة الرجاء الرياضي “ش.م”.', 'size': 2}], 'main_title': 'الدارالبيضاء.. توقيع "اتفاقية الاستثمار" لتفعيل شركة نادي الرجاء الرياضي'}, {'community_id': '4', 'articles': [{'id': '263', 'title': 'تعثر صفقة انتقال أوناحي إلى جيرونا', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d8%aa%d8%b9%d8%ab%d8%b1-%d8%b5%d9%81%d9%82%d8%a9-%d8%a7%d9%86%d8%aa%d9%82%d8%a7%d9%84-%d8%a3%d9%88%d9%86%d8%a7%d8%ad%d9%8a-%d8%a5%d9%84%d9%89-%d8%ac%d9%8a%d8%b1%d9%88%d9%86%d8%a7-1603535.html', 'summary': 'تعثر صفقة انتقال أوناحي إلى جيرونا. لا يزال مستقبل الدولي المغربي عز الدين أوناحي غامضًا، وسط استبعاده من مشروع نادي أولمبيك مارسيليا للموسم الجديد، ورغبته في خوض تجربة احترافية جديدة، خصوصًا في الدوري الإسباني. وبحسب ما أورده موقع Fichaje الإسباني المتخصص في أخبار انتقالات اللاعبين، فقد دخل نادي جيرونا في مفاوضات مع مارسيليا لعقد صفقة تبادلية تقضي بانتقال أوناحي إلى “الليغا”،  تعثر صفقة انتقال أوناحي إلى جيرونا     - هسبريس جريدة إلكترونية مغربية .', 'size': 2}, {'id': '312', 'title': 'بعد تعثّر انتقاله إلى جيرونا. أوناحي ينتظر فرصة جديدة', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a8%d8%b9%d8%af-%d8%aa%d8%b9%d8%ab%d9%91%d8%b1-%d8%a7%d9%86%d8%aa%d9%82%d8%a7%d9%84%d9%87-%d8%a5%d9%84%d9%89-%d8%ac%d9%8a%d8%b1%d9%88%d9%86%d8%a7-%d8%a3%d9%88%d9%86%d8%a7%d8%ad%d9%8a-%d9%8a%d9%86/', 'summary': 'بعد تعثّر انتقاله إلى جيرونا. أوناحي ينتظر فرصة جديدة. يُواصل الدولي المغربي عز الدين أوناحي البحث عن مخرج من وضعه المعقد داخل نادي أولمبيك مارسيليا، بعدما أصبح خارج حسابات المدرب للموسم الجديد، في وقت يطمح فيه اللاعب إلى خوض تجربة جديدة، ويفضّل الانتقال إلى الدوري الإسباني. وكشف موقع “Fichaje” أن نادي جيرونا أبدى اهتمامه بضم أوناحي، ودخل في مفاوضات مع مارسيليا بغرض التوصل إلى', 'size': 2}], 'main_title': 'تعثر صفقة انتقال أوناحي إلى جيرونا'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    