<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 30/09/2025 - 06h15</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '7', 'articles': [{'id': '34', 'title': 'صرف أزيد من 4000 معاش متقاعد جديد تابعين لقطاع التعليم', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-661644.html', 'summary': 'صرف أزيد من 4000 معاش متقاعد جديد تابعين لقطاع التعليم. هبة بريس أعلن الصندوق المغربي للتقاعد، اليوم الاثنين، أن عملية صرف معاشات المتقاعدين الجدد التابعين لقطاع التربية والتعليم برسم سنة 2025 قد تمت بنجاح. وأوضح بلاغ للصندوق، أنه تم صرف أكثر من 4.000 معاش لفائدة المنخرطين الذين أحيلوا على التقاعد في 31 غشت 2025، لبلوغهم حد السن أو بناء على طلب منهم، أي بمعدل إنجاز', 'size': 2}, {'id': '176', 'title': 'أكثر من 4 آلاف متقاعد بالتعليم يتسلمون معاشاتهم في الموعد', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1103779.html', 'summary': 'أكثر من 4 آلاف متقاعد بالتعليم يتسلمون معاشاتهم في الموعد. أعلن الصندوق المغربي للتقاعد، اليوم الاثنين، أن عملية صرف معاشات المتقاعدين الجدد التابعين لقطاع التربية والتعليم برسم سنة 2025 قد تمت بنجاح. وأوضح بلاغ للصندوق، أنه تم صرف أكثر من 4.000 معاش لفائدة المنخرطين الذين أحيلوا على التقاعد في 31 غشت 2025، لبلوغهم حد السن أو بناء على طلب منهم، أي بمعدل إنجاز ناهز 99 ظهرت المقالة أكثر من 4 آلاف متقاعد بالتعليم يتسلمون معاشاتهم في الموعد  .', 'size': 2}], 'main_title': 'صرف أزيد من 4000 معاش متقاعد جديد تابعين لقطاع التعليم'}, {'community_id': '10', 'articles': [{'id': '81', 'title': 'نشرة إنذارية عاجلة.. زخات رعدية قوية مرتقبة بهذه المناطق المغربية', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/413566.html', 'summary': 'نشرة إنذارية عاجلة.. زخات رعدية قوية مرتقبة بهذه المناطق المغربية. أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب تسجيل زخات رعدية قوية (بين 50 و80 ملم)، يومي الأربعاء والخميس المقبلين، بإقليمي أوسرد ووادي الذهب. وأوضحت المديرية، في', 'size': 2}, {'id': '240', 'title': 'أمطار غزيرة مرتقبة بجنوب المغرب', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%a3%d9%85%d8%b7%d8%a7%d8%b1-%d8%ba%d8%b2%d9%8a%d8%b1%d8%a9-%d9%85%d8%b1%d8%aa%d9%82%d8%a8%d8%a9-%d8%a8%d8%ac%d9%86%d9%88%d8%a8-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8/', 'summary': 'أمطار غزيرة مرتقبة بجنوب المغرب. المساء اليوم: أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب تسجيل زخات رعدية قوية (بين 50 و80 ملم)، يومي الأربعاء والخميس المقبلين، بإقليمي أوسرد ووادي الذهب. وأوضحت المديرية، في نشرة قبلية، أنه من المرتقب تسجيل هذه', 'size': 2}], 'main_title': 'نشرة إنذارية عاجلة.. زخات رعدية قوية مرتقبة بهذه المناطق المغربية'}, {'community_id': '0', 'articles': [{'id': '105', 'title': 'الصندوق المغربي للتقاعد يعلن صرف معاشات المتقاعدين الجدد في قطاع التربية والتعليم', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/economy/413593.html', 'summary': 'الصندوق المغربي للتقاعد يعلن صرف معاشات المتقاعدين الجدد في قطاع التربية والتعليم. أعلن الصندوق المغربي للتقاعد، الإثنين، أن عملية صرف معاشات المتقاعدين الجدد التابعين لقطاع التربية والتعليم برسم سنة 2025 قد تمت بنجاح. وكشف بلاغ للصندوق المغربي، أنه', 'size': 2}, {'id': '252', 'title': 'الصندوق المغربي للتقاعد يعلن صرف معاشات المتقاعدين الجدد التابعين لقطاع التربية والتعليم', 'source': 'www.alalam.ma', 'link': 'https://www.alalam.ma/الصندوق-المغربي-للتقاعد-يعلن-صرف-معاشات-المتقاعدين-الجدد_a29765.html', 'summary': 'الصندوق المغربي للتقاعد يعلن صرف معاشات المتقاعدين الجدد التابعين لقطاع التربية والتعليم. *العلم الإلكترونية* أعلن الصندوق المغربي للتقاعد، يومه الإثنين 29 سبتمبر، أن عملية صرف معاشا...', 'size': 2}], 'main_title': 'الصندوق المغربي للتقاعد يعلن صرف معاشات المتقاعدين الجدد في قطاع التربية والتعليم'}, {'community_id': '1', 'articles': [{'id': '111', 'title': 'غرامات بالملايين وحظر 10 سنوات… التعليم العالي الخاص بالمغرب يواجه صرامة قانونية غير مسبوقة', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/education/413599.html', 'summary': 'غرامات بالملايين وحظر 10 سنوات… التعليم العالي الخاص بالمغرب يواجه صرامة قانونية غير مسبوقة. تتجه الحكومة إلى تعزيز مراقبة مؤسسات التعليم العالي والبحث العلمي الخاصة من خلال مشروع القانون رقم 59.24، الذي يحدد إطاراً قانونياً صارماً للقطاع الخاص. وينص المشروع', 'size': 2}, {'id': '163', 'title': 'جيل Z والنموذج المغربي', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1103854.html', 'summary': 'جيل Z والنموذج المغربي. الجيل المغربي الجديد يلاحظ من خلال الاحتجاجات الشبابية بالمغرب التي خرجت يومي 27و28شتنبر 2025 وقادها جيل ماسمي ب Zتترواح أعمارهم بين 15 سنة و25 سنة أنها احتجاجات جديدة في سياق اجتماعي وسياسي واقتصادي دقيق، تتميز أولا بطبيعتها الغير مؤطر من أي جهة وتحمل مطالب ليست بجديدة يمكن اجمالها في مطالب اجتماعية محضة تتعلق بغياب الحكامة ظهرت المقالة جيل Z والنموذج المغربي  .', 'size': 2}, {'id': '278', 'title': 'للنقاش | من المسؤول عن تدهور الخدمات الاستشفائية ؟', 'source': 'www.alousboue.ma', 'link': 'https://www.alousboue.ma/124518/', 'summary': 'للنقاش | من المسؤول عن تدهور الخدمات الاستشفائية ؟. يعرف قطاع الصحة بالمغرب جدلا واسعا بسبب النقص الحاصل في الاستشفاء وتبعا للاحتجاجات المتكررة من طرف المواطنين على غياب ونقص الخدمات الصحية في مختلف مناطق البلاد، لا فرق بين العالم القروي والمجال الحضري، ذلك أن فئات مجتمعية بعينها لا تتمتع بالحق في الصحة بفعل الكلفة المادية من جهة، ومن جهة أخرى، نتيجة الاختلالات التدبيرية التي …  للنقاش | من المسؤول عن تدهور الخدمات الاستشفائية ؟     .', 'size': 3}], 'main_title': 'للنقاش | من المسؤول عن تدهور الخدمات الاستشفائية ؟'}, {'community_id': '4', 'articles': [{'id': '139', 'title': 'الشعب المغربي يحتفل بذكرى ميلاد الأميرة للا أسماء', 'source': 'assabah.ma', 'link': 'https://assabah.ma/873767.html', 'summary': 'الشعب المغربي يحتفل بذكرى ميلاد الأميرة للا أسماء. تحتفل الأسرة الملكية ومعها الشعب المغربي، اليوم الإثنين، بذكرى ميلاد صاحبة السمو الملكي الأميرة للا أسماء، وهي مناسبة لتسليط الضوء على الانخراط الدائم لسموها في مختلف المبادرات ذات الطابع الاجتماعي، والتزامها الراسخ بتحسين ظروف عيش الأطفال ذوي الاحتياجات الخاصة، لاسيما الأطفال الصم والبكم. ودأبت صاحبة السمو الملكيأكمل القراءة » المقالة الشعب المغربي يحتفل بذكرى ميلاد الأميرة للا أسماء  .', 'size': 2}, {'id': '235', 'title': 'الشعب المغربي يحتفل غدا الاثنين بذكرى ميلاد الأميرة للا أسماء', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/227684/', 'summary': 'الشعب المغربي يحتفل غدا الاثنين بذكرى ميلاد الأميرة للا أسماء. تحتفل الأسرة الملكية ومعها الشعب المغربي، يوم غد الإثنين، بذكرى ميلاد صاحبة السمو الملكي الأميرة للا أسماء، وهي مناسبة لتسليط الضوء على الانخراط الدائم لسموها في مختلف المبادرات ذات الطابع الاجتماعي، والتزامها الراسخ بتحسين ظروف عيش الأطفال ذوي الاحتياجات الخاصة، لاسيما الأطفال الصم والبكم. ودأبت صاحبة السمو الملكي الأميرة للا أسماء، على الدوام، على الانخراط', 'size': 2}], 'main_title': 'الشعب المغربي يحتفل بذكرى ميلاد الأميرة للا أسماء'}, {'community_id': '6', 'articles': [{'id': '166', 'title': 'من الشارع إلى المؤسسات: حين ينسحب الشباب من صناعة القرار', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1103836.html', 'summary': 'من الشارع إلى المؤسسات: حين ينسحب الشباب من صناعة القرار. ولأننا نؤمن أن النضال الحقيقي لا يُختزل في الهتافات، ولا يكتمل إلا عبر المؤسسات، ندرك اليوم أن أي تغيير جاد لن يتحقق إلا بالجمع بين شرعية الشارع وفاعلية المؤسسات. إنّ المظاهرات الشبابية التي يشهدها المغرب تعبّر عن وعي متقدم، وعن عطش متراكم إلى الكرامة والعدالة الاجتماعية والحرية، غير أنّ المسطرة التي يسلكها جزء من هذا ظهرت المقالة من الشارع إلى المؤسسات: حين ينسحب الشباب من صناعة القرار  .', 'size': 2}, {'id': '430', 'title': 'معظم النار من مستصغر الشرر… عن احتجاجات المغرب وأسئلتها الصعبة', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d9%85%d8%b9%d8%b8%d9%85-%d8%a7%d9%84%d9%86%d8%a7%d8%b1-%d9%85%d9%86-%d9%85%d8%b3%d8%aa%d8%b5%d8%ba%d8%b1-%d8%a7%d9%84%d8%b4%d8%b1%d8%b1-%d8%b9%d9%86-%d8%a7%d8%ad%d8%aa%d8%ac%d8%a7%d8%ac/', 'summary': 'معظم النار من مستصغر الشرر… عن احتجاجات المغرب وأسئلتها الصعبة. في شوارع المغرب خرج شبابٌ بلا قيادة حزبية، ولا نقابية، ولا مظلة تقليدية. خرجوا بتلقائيةٍ صادقة، قد تبدو للبعض فورةً عابرة. لكن التاريخ يعلّمنا أن معظم النار  معظم النار من مستصغر الشرر… عن احتجاجات المغرب وأسئلتها الصعبة     .', 'size': 2}], 'main_title': 'من الشارع إلى المؤسسات: حين ينسحب الشباب من صناعة القرار'}, {'community_id': '8', 'articles': [{'id': '196', 'title': 'إقبال جماهيري كبير على تذاكر مباراة المنتخب الوطني ضد البحرين', 'source': 'rue20.com', 'link': 'https://rue20.com/940642.html', 'summary': 'إقبال جماهيري كبير على تذاكر مباراة المنتخب الوطني ضد البحرين.  | الرباط أعلنت اللجنة المنظمة للمباراة التي ستجمع المنتخب الوطني بمنتخب البحرين، التي ستجرى يوم الخميس 9 أكتوبر 2025 على أرضية ملعب الأمير مولاي عبد الله بمدينة الرباط ابتداءً من الساعة الثامنة مساءً، أنه قد تم بيع ما مجموعه 30 ألف تذكرة إلى حدود الساعة الثانية عشرة ظهرا من يومه الاثنين 29 شتنبر الخبر إقبال جماهيري كبير على تذاكر مباراة المنتخب الوطني ضد البحرين  .', 'size': 2}, {'id': '248', 'title': 'إقبال جماهيري كبير على تذاكر مباراة المنتخب الوطني أمام البحرين', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a5%d9%82%d8%a8%d8%a7%d9%84-%d8%ac%d9%85%d8%a7%d9%87%d9%8a%d8%b1%d9%8a-%d9%83%d8%a8%d9%8a%d8%b1-%d8%b9%d9%84%d9%89-%d8%aa%d8%b0%d8%a7%d9%83%d8%b1-%d9%85%d8%a8%d8%a7%d8%b1%d8%a7%d8%a9-%d8%a7%d9%84/', 'summary': 'إقبال جماهيري كبير على تذاكر مباراة المنتخب الوطني أمام البحرين. أعلنت اللجنة المنظمة للمباراة التي ستجمع المنتخب الوطني بمنتخب البحرين، التي ستجرى الخميس 9 أكتوبر 2025 على أرضية ملعب الأمير مولاي عبد الله بمدينة الرباط ابتداء من الساعة الثامنة مساء، أنه قد تم بيع ما مجموعه 30 ألف تذكرة إلى حدود الساعة الثانية عشرة ظهرا من يومه الاثنين 29 شتنبر 2025. واغتنمت اللجنة المنظمة …  إقبال جماهيري كبير على تذاكر مباراة المنتخب الوطني أمام البحرين     .', 'size': 2}], 'main_title': 'إقبال جماهيري كبير على تذاكر مباراة المنتخب الوطني ضد البحرين'}, {'community_id': '2', 'articles': [{'id': '308', 'title': 'ولي العهد الأمير مولاي الحسن يترأس افتتاح الدورة الـ 16 لمعرض الفرس للجديدة', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-661765.html', 'summary': 'ولي العهد الأمير مولاي الحسن يترأس افتتاح الدورة الـ 16 لمعرض الفرس للجديدة. ترأس صاحب السمو الملكي ولي العهد الأمير مولاي الحسن، اليوم الاثنين، بمركز المعارض محمد السادس، حفل افتتاح الدورة السادسة عشرة لمعرض الفرس للجديدة، الذي تتواصل فعالياته إلى غاية 5 أكتوبر تحت شعار “العناية بالخيل، رابطة وصل بين ممارسات الفروسية”. ولدى وصوله إلى مركز المعارض، وجد صاحب السمو الملكي ولي العهد الأمير مولاي الحسن في استقباله', 'size': 4}, {'id': '319', 'title': 'صاحب السمو الملكي ولي العهد الأمير مولاي الحسن يترأس افتتاح الدورة الـ 16 لمعرض الفرس للجديدة', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/206831', 'summary': 'صاحب السمو الملكي ولي العهد الأمير مولاي الحسن يترأس افتتاح الدورة الـ 16 لمعرض الفرس للجديدة. الأحداث/ و.م.ع ترأس صاحب السمو الملكي ولي العهد الأمير مولاي الحسن، اليوم الاثنين، بمركز المعارض محمد السادس، حفل افتتاح الدورة السادسة عشرة لمعرض الفرس للجديدة، الذي تتواصل فعالياته إلى غاية 5 أكتوبر تحت شعار “العناية بالخيل، رابطة وصل بين ممارسات الفروسية”. ولدى وصوله إلى مركز المعارض،وجد صاحب السمو الملكي ولي العهد الأمير مولاي الحسن في', 'size': 4}, {'id': '330', 'title': 'ولي العهد الأمير مولاي الحسن يترأس افتتاح الدورة الـ 16 لمعرض الفرس للجديدة الأنشطة الأميرية', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/413630.html', 'summary': 'ولي العهد الأمير مولاي الحسن يترأس افتتاح الدورة الـ 16 لمعرض الفرس للجديدة الأنشطة الأميرية. ترأس صاحب السمو الملكي ولي العهد الأمير مولاي الحسن، اليوم الاثنين، بمركز المعارض محمد السادس، حفل افتتاح الدورة السادسة عشرة لمعرض الفرس للجديدة، الذي تتواصل', 'size': 4}, {'id': '442', 'title': 'ولي العهد الأمير مولاي الحسن يترأس افتتاح معرض الفرس بالجديدة', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/227745/', 'summary': 'ولي العهد الأمير مولاي الحسن يترأس افتتاح معرض الفرس بالجديدة. الجديدة – ترأس صاحب السمو الملكي ولي العهد الأمير مولاي الحسن، اليوم الاثنين، بمركز المعارض محمد السادس، حفل افتتاح الدورة السادسة عشرة لمعرض الفرس للجديدة، الذي تتواصل فعالياته إلى غاية 5 أكتوبر تحت شعار “العناية بالخيل، رابطة وصل بين ممارسات الفروسية”. ولدى وصوله إلى مركز المعارض، وجد صاحب السمو الملكي ولي العهد الأمير مولاي الحسن', 'size': 4}], 'main_title': 'ولي العهد الأمير مولاي الحسن يترأس افتتاح الدورة الـ 16 لمعرض الفرس للجديدة'}, {'community_id': '3', 'articles': [{'id': '312', 'title': 'الطقس غدا الثلاثاء.. زخات رعدية ورياح قوية في جنوب المملكة', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-661755.html', 'summary': 'الطقس غدا الثلاثاء.. زخات رعدية ورياح قوية في جنوب المملكة. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليوم غد الثلاثاء، نزول زخات رعدية ابتداء من الزوال فوق أقصى جنوب المملكة. وستكون الأجواء غائمة جزئيا ومصحوبة بقطرات مطرية متفرقة بكل من الساحل المتوسطي، والشمال الغربي للأقاليم الصحراوية، فضلا عن تشكل كتل ضبابية فوق السواحل الوسطى. كما سيلاحظ تسجيل هبات رياح قوية نوعا ما بكل من جنوب المنطقة', 'size': 2}, {'id': '369', 'title': 'طقس الثلاثاء.. زخات رعدية ورياح قوية بهذه المناطق المغربية', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-591611.html', 'summary': 'طقس الثلاثاء.. زخات رعدية ورياح قوية بهذه المناطق المغربية. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليوم الثلاثاء، نزول زخات رعدية ابتداء من الزوال فوق أقصى جنوب المملكة. وستكون الأجواء غائمة جزئيا ومصحوبة بقطرات مطرية متفرقة بكل من الساحل المتوسطي، والشمال الغربي للأقاليم الصحراوية، فضلا عن تشكل كتل ضبابية فوق السواحل الوسطى. كما سيلاحظ تسجيل هبات رياح قوية نوعا ما', 'size': 2}], 'main_title': 'الطقس غدا الثلاثاء.. زخات رعدية ورياح قوية في جنوب المملكة'}, {'community_id': '9', 'articles': [{'id': '313', 'title': 'ايقاف شخص استغل محتوى احتجاجات خارجية للتحريض محليًا', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-661753.html', 'summary': 'ايقاف شخص استغل محتوى احتجاجات خارجية للتحريض محليًا. أعلن وكيل الملك لدى المحكمة الإبتدائية الزجرية بالدار البيضاء للرأي العام أنه على خلفية الوقفات الاحتجاجية غير المصرح بها التي عرفتها بعض مدن المملكة السبت الماضي، تم إيقاف شخص من طرف عناصر الشرطة القضائية حيث أبانت الأبحاث أن المعني بالأمر يتوفر على مجموعة من الحسابات بمواقع التواصل الاجتماعي، وأنه كان يقوم بنشر صور وفيديوهات للاحتجاجات ببعض', 'size': 5}, {'id': '343', 'title': 'للتحريض على الاحتجاج.. إيقاف شخص في كازا يقوم بنشر صور وفيديوهات “مفبركة”', 'source': 'kifache.com', 'link': 'https://kifache.com/__trashed-29/', 'summary': 'للتحريض على الاحتجاج.. إيقاف شخص في كازا يقوم بنشر صور وفيديوهات “مفبركة”. أعلن وكيل الملك لدى المحكمة الإبتدائية الزجرية بالدار البيضاء للرأي العام أنه على خلفية الوقفات الاحتجاجية غير المصرح بها التي عرفتها بعض مدن المملكة السبت الماضي، تم إيقاف شخص من طرف عناصر الشرطة القضائية حيث أبانت الأبحاث أن المعني بالأمر يتوفر على مجموعة من الحسابات بمواقع التواصل الاجتماعي، وأنه كان يقوم بنشر صور وفيديوهات للاحتجاجات', 'size': 4}, {'id': '359', 'title': 'إيقاف شخص لنشره صورا وفيديوهات أجنبية ودمجها مع احتجاجات بالمغرب', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/324767/', 'summary': 'إيقاف شخص لنشره صورا وفيديوهات أجنبية ودمجها مع احتجاجات بالمغرب. أعلن وكيل الملك لدى المحكمة الإبتدائية الزجرية بالدار البيضاء للرأي العام أنه على خلفية الوقفات الاحتجاجية غير المصرح بها التي عرفتها بعض مدن المملكة السبت الماضي، تم إيقاف شخص من طرف عناصر الشرطة القضائية حيث أبانت الأبحاث أن المعني بالأمر يتوفر على مجموعة من الحسابات بمواقع التواصل الاجتماعي، وأنه كان يقوم بنشر صور وفيديوهات للاحتجاجات', 'size': 4}, {'id': '415', 'title': 'إيقاف شخص يقوم بنشر صور وفيديوهات للاحتجاجات بالدول الأجنبية ودمجها مع مظاهر للإحتجاج داخل المغرب', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/477134.html', 'summary': 'إيقاف شخص يقوم بنشر صور وفيديوهات للاحتجاجات بالدول الأجنبية ودمجها مع مظاهر للإحتجاج داخل المغرب. أعلن وكيل الملك لدى المحكمة الإبتدائية الزجرية بالدار البيضاء للرأي العام أنه على خلفية الوقفات الاحتجاجية غير المصرح بها التي عرفتها بعض مدن المملكة السبت الماضي، تم إيقاف شخص من طرف عناصر الشرطة القضائية حيث أبانت الأبحاث أن المعني بالأمر يتوفر على مجموعة من الحسابات بمواقع التواصل الاجتماعي، وأنه كان يقوم بنشر صور وفيديوهات للاحتجاجات …', 'size': 3}, {'id': '455', 'title': 'إيقاف شخص يقوم بنشر صور وفيديوهات للاحتجاجات ببعض الدول الأجنبية ودمجها مع مظاهر للإحتجاج داخل التراب الوطني', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a5%d9%8a%d9%82%d8%a7%d9%81-%d8%b4%d8%ae%d8%b5-%d9%8a%d9%82%d9%88%d9%85-%d8%a8%d9%86%d8%b4%d8%b1-%d8%b5%d9%88%d8%b1-%d9%88%d9%81%d9%8a%d8%af%d9%8a%d9%88%d9%87%d8%a7%d8%aa-%d9%84%d9%84%d8%a7%d8%ad/', 'summary': 'إيقاف شخص يقوم بنشر صور وفيديوهات للاحتجاجات ببعض الدول الأجنبية ودمجها مع مظاهر للإحتجاج داخل التراب الوطني. أعلن وكيل الملك لدى المحكمة الإبتدائية الزجرية بالدار البيضاء، للرأي العام أنه على خلفية الوقفات الاحتجاجية غير المصرح بها التي عرفتها بعض مدن المملكة السبت الماضي، تم إيقاف شخص من طرف عناصر الشرطة القضائية حيث أبانت الأبحاث أن المعني بالأمر يتوفر على مجموعة من الحسابات بمواقع التواصل الاجتماعي، وأنه كان يقوم بنشر صور وفيديوهات …  إيقاف شخص يقوم بنشر صور وفيديوهات للاحتجاجات ببعض الدول الأجنبية ودمجها مع مظاهر للإحتجاج داخل التراب الوطني     .', 'size': 5}], 'main_title': 'ايقاف شخص استغل محتوى احتجاجات خارجية للتحريض محليًا'}, {'community_id': '5', 'articles': [{'id': '329', 'title': 'المغرب يجدد دعوته إلى الوقف الفوري للهجمات الاسرائيلية على غزة واستئناف المفاوضات', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/world/413629.html', 'summary': 'المغرب يجدد دعوته إلى الوقف الفوري للهجمات الاسرائيلية على غزة واستئناف المفاوضات. جددت المملكة المغربية، اليوم الاثنين بجنيف، دعوتها، أمام مجلس حقوق الانسان، دعوتها إلى الوقف الفوري للهجمات الاسرائيلية على غزة واستئناف المفاوضات من أجل ارساء سلام', 'size': 2}, {'id': '408', 'title': 'المغرب يجدد دعوته إلى الوقف الفوري للهجمات الاسرائيلية واستئناف المفاوضات', 'source': 'rue20.com', 'link': 'https://rue20.com/940769.html', 'summary': 'المغرب يجدد دعوته إلى الوقف الفوري للهجمات الاسرائيلية واستئناف المفاوضات. . الرباط جددت المملكة المغربية، اليوم الاثنين بجنيف، دعوتها، أمام مجلس حقوق الانسان، دعوتها إلى الوقف الفوري للهجمات الاسرائيلية على غزة واستئناف المفاوضات من أجل ارساء سلام دائم بالشرق الأوسط. وخلال تدخله باسم المملكة في إطار النقاش العام حول النقطة 7 من جدول الأعمال، المخصصة لوضعية حقوق الانسان في فلسطين وباقي الأراضي العربية المحتلة، الخبر المغرب يجدد دعوته إلى الوقف الفوري للهجمات الاسرائيلية واستئناف المفاوضات  .', 'size': 2}], 'main_title': 'المغرب يجدد دعوته إلى الوقف الفوري للهجمات الاسرائيلية على غزة واستئناف المفاوضات'}, {'community_id': '11', 'articles': [{'id': '361', 'title': 'خبير أمني: القوات العمومية تدخلت بمقاربة متوازنة تراعي النظام العام وسلامة المتجمهرين', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/324760/', 'summary': 'خبير أمني: القوات العمومية تدخلت بمقاربة متوازنة تراعي النظام العام وسلامة المتجمهرين. أكد خبير أمني، اليوم الاثنين، أن تدخل القوات العمومية لمنع تجمهرات دعت إليها جهات مجهولة، نهاية الأسبوع، تم وفق مقاربة متوازنة تحرص على صون مرتكزات النظام العام وضمان سلامة عناصر هذه القوات والمتجمهرين. وأوضح هذا الخبير، في تصريح لوكالة المغرب العربي للأنباء، أنه بناء على قرار من السلطات المحلية يقضي بمنع التجمهرات التي دعت إلى', 'size': 2}, {'id': '457', 'title': 'خبير أمني: تدخل القوات العمومية لمنع تجمهرات دعت إليها جهات مجهولة تم وفق مقاربة متوازنة تحفظ النظام العام وسلامة المتجمهرين', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%ae%d8%a8%d9%8a%d8%b1-%d8%a3%d9%85%d9%86%d9%8a-%d8%aa%d8%af%d8%ae%d9%84-%d8%a7%d9%84%d9%82%d9%88%d8%a7%d8%aa-%d8%a7%d9%84%d8%b9%d9%85%d9%88%d9%85%d9%8a%d8%a9-%d9%84%d9%85%d9%86%d8%b9-%d8%aa%d8%ac/', 'summary': 'خبير أمني: تدخل القوات العمومية لمنع تجمهرات دعت إليها جهات مجهولة تم وفق مقاربة متوازنة تحفظ النظام العام وسلامة المتجمهرين. أكد خبير أمني، اليوم الاثنين 29 شتنبر 2025، أن تدخل القوات العمومية لمنع تجمهرات دعت إليها جهات مجهولة، نهاية الأسبوع، تم وفق مقاربة متوازنة تحرص على صون مرتكزات النظام العام وضمان سلامة عناصر هذه القوات والمتجمهرين. وأوضح هذا الخبير، في تصريح لوكالة المغرب العربي للأنباء، أنه بناء على قرار من السلطات المحلية يقضي …  خبير أمني: تدخل القوات العمومية لمنع تجمهرات دعت إليها جهات مجهولة تم وفق مقاربة متوازنة تحفظ النظام العام وسلامة المتجمهرين     .', 'size': 2}], 'main_title': 'خبير أمني: القوات العمومية تدخلت بمقاربة متوازنة تراعي النظام العام وسلامة المتجمهرين'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    