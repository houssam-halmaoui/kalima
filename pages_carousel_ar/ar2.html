<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 02/08/2025 - 18h28</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '62', 'title': 'حكيمي مُهدد بالسجن لمدة قد تصل 15 سنة بتهمة الاغتصاب', 'source': 'www.alakhbar.press.ma', 'link': 'https://www.alakhbar.press.ma/%d8%ad%d9%83%d9%8a%d9%85%d9%8a-%d9%85%d9%8f%d9%87%d8%af%d8%af-%d8%a8%d8%a7%d9%84%d8%b3%d8%ac%d9%86-%d9%84%d9%85%d8%af%d8%a9-%d9%82%d8%af-%d8%aa%d8%b5%d9%84-15-%d8%b3%d9%86%d8%a9-%d8%a8%d8%aa%d9%87-270374.html', 'summary': 'حكيمي مُهدد بالسجن لمدة قد تصل 15 سنة بتهمة الاغتصاب. كشفت صحيفة “لوباريزيان” الفرنسية، اليوم الجمعة، أن النيابة العامة في نانتير طالبت، رسميا، بإحالة الدولي المغربي أشرف حكيمي، لاعب باريس سان جيرمان، إلى المحكمة الجنائية في مقاطعة “أو- دو سين” لمتابعته بتهمة الاغتصاب، وذلك على خلفية القضية التي تعود إلى فبراير 2023، والتي تتهمه فيها شابة فرنسية بالاعتداء الجنسي عليها داخل منزله. وأوضح المصدر ذاته …  حكيمي مُهدد بالسجن لمدة قد تصل 15 سنة بتهمة الاغتصاب     .', 'size': 2}, {'id': '89', 'title': 'بعقوبة سجن تصل لـ15 عاماً .. النيابة العامة الفرنسية تفتح مجددا قضية محاكمة حكيمي بتهمة الاغتصاب', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/sport/proplayers/410343.html', 'summary': 'بعقوبة سجن تصل لـ15 عاماً .. النيابة العامة الفرنسية تفتح مجددا قضية محاكمة حكيمي بتهمة الاغتصاب. طالبت النيابة العامة بمدينة نانتير الفرنسية، رسميًا، بإحالة الدولي المغربي أشرف حكيمي، لاعب نادي باريس سان جيرمان، على المحكمة الجنائية بمقاطعة “هوت دو سين”، لمتابعته', 'size': 2}], 'main_title': 'حكيمي مُهدد بالسجن لمدة قد تصل 15 سنة بتهمة الاغتصاب'}, {'community_id': '1', 'articles': [{'id': '66', 'title': 'تطوان : لقاء يجمع عددا من الوزارء والولاة والعمال لتداول السبل الكفیلة بإطلاق جیل جدید من برامج التنمیة الترابیة', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/204547', 'summary': 'تطوان : لقاء يجمع عددا من الوزارء والولاة والعمال لتداول السبل الكفیلة بإطلاق جیل جدید من برامج التنمیة الترابیة.  تجسیدا للتعلیمات الملكیة السامیة الواردة في خطاب عید العرش المجید لیوم 29 یولیوز 2025، والتي دعا من خلالھا صاحب الجلالة الملك محمد السادس، نصره الله وأیده، الحكومة إلى إطلاق جیل جدید من برامج التنمیة الترابیة و الانتقال من المقاربات التقلیدیة للتنمیة الاجتماعیة، إلى مقاربة للتنمیة المجالیة المندمجة، تم، اليوم الجمعة بتطوان، على ھامش', 'size': 2}, {'id': '91', 'title': 'بعد خطاب عيد العرش..لقاء بتطوان يجمع عددا من الوزارء والولاة والعمال لتداول السبل الكفیلة بإطلاق جیل جدید من برامج التنمیة الترابیة', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/410345.html', 'summary': 'بعد خطاب عيد العرش..لقاء بتطوان يجمع عددا من الوزارء والولاة والعمال لتداول السبل الكفیلة بإطلاق جیل جدید من برامج التنمیة الترابیة. تجسیدا للتعلیمات الملكیة السامیة الواردة في خطاب عید العرش المجید لیوم 29 یولیوز 2025، والتي دعا من خلالھا صاحب الجلالة الملك محمد السادس، نصره الله', 'size': 2}], 'main_title': 'تطوان : لقاء يجمع عددا من الوزارء والولاة والعمال لتداول السبل الكفیلة بإطلاق جیل جدید من برامج التنمیة الترابیة'}, {'community_id': '10', 'articles': [{'id': '67', 'title': 'عيد العرش المجيد ..وزير الداخلية يعقد لقاء عمل مع السادة الولاة والعمال المسؤولين بالإدارة الترابية والمصالح المركزية للوزارة', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/204538', 'summary': 'عيد العرش المجيد ..وزير الداخلية يعقد لقاء عمل مع السادة الولاة والعمال المسؤولين بالإدارة الترابية والمصالح المركزية للوزارة.  في خضم احتفالات الشعب المغربي بالذكرى السادسة والعشرين لتربع صاحب الجلالة الملك محمد السادس نصره الله وأيده على عرش أسلافه الميامين، عقد وزير الداخلية اليوم الجمعة بتطوان، لقاء عمل مع السادة الولاة والعمال المسؤولين بالإدارة الترابية والمصالح المركزية لوزارة الداخلية. وذكر بلاغ لوزارة الداخلية أن هذا اللقاء، الذي حضره كل من الفريق أول', 'size': 4}, {'id': '90', 'title': 'وزير الداخلية يعقد لقاء عمل مع الولاة والعمال المسؤولين بالإدارة الترابية والمصالح المركزية للوزارة', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/politic/410344.html', 'summary': 'وزير الداخلية يعقد لقاء عمل مع الولاة والعمال المسؤولين بالإدارة الترابية والمصالح المركزية للوزارة. في خضم احتفالات الشعب المغربي بالذكرى السادسة والعشرين لتربع صاحب الجلالة الملك محمد السادس نصره الله وأيده على عرش أسلافه الميامين، عقد وزير الداخلية اليوم', 'size': 2}, {'id': '181', 'title': 'وزير الداخلية يتعهد بإطلاق دينامية ترابية جديدة و تمكين الجهات من ممارسة جميع اختصاصاتها الذاتية', 'source': 'rue20.com', 'link': 'https://rue20.com/925974.html', 'summary': 'وزير الداخلية يتعهد بإطلاق دينامية ترابية جديدة و تمكين الجهات من ممارسة جميع اختصاصاتها الذاتية.  . الرباط في خضم احتفالات الشعب المغربي بالذكرى السادسة والعشرين لتربع صاحب الجلالة الملك محمد السادس نصره الله وأيده على عرش أسلافه الميامين، عقد وزير الداخلية اليوم الجمعة بتطوان، لقاء عمل مع السادة الولاة والعمال المسؤولين بالإدارة الترابية والمصالح المركزية لوزارة الداخلية. وذكر بلاغ لوزارة الداخلية أن هذا اللقاء، الذي حضره كل من الخبر وزير الداخلية يتعهد بإطلاق دينامية ترابية جديدة و تمكين الجهات من ممارسة جميع اختصاصاتها الذاتية  .', 'size': 2}, {'id': '220', 'title': 'عبد الوافي لفتيت يعقد لقاء عمل مع كبار المسؤولين بتطوان', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/225511/', 'summary': 'عبد الوافي لفتيت يعقد لقاء عمل مع كبار المسؤولين بتطوان. في خضم احتفالات الشعب المغربي بالذكرى السادسة والعشرين لتربع صاحب الجلالة الملك محمد السادس نصره الله وأيده عرش أسلافه الميامين، عقد السيد وزير الداخلية يوم الجمعة 1 غشت 2025 بتطوان، لقاء عمل مع السادة الولاة والعمال المسؤولين بالإدارة الترابية والمصالح المركزية لوزارة الداخلية، وبحضور كل من السيد الفريق أول، قائد الدرك الملكي، السيد المدير العام', 'size': 2}], 'main_title': 'عيد العرش المجيد ..وزير الداخلية يعقد لقاء عمل مع السادة الولاة والعمال المسؤولين بالإدارة الترابية والمصالح المركزية للوزارة'}, {'community_id': '9', 'articles': [{'id': '82', 'title': 'إسبانيا..طرق جديدة لسرقة السياح الأجانب على الطرق السريعة!', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/society/410335.html', 'summary': 'إسبانيا..طرق جديدة لسرقة السياح الأجانب على الطرق السريعة!. حذرت السفارة الفرنسية في إسبانيا السياح الفرنسيين من الحيل التي يستخدمها اللصوص على الطرق الإسبانية، وذلك بعد تزايد الشكاوى من عمليات سرقة تستهدف المسافرين، خاصة', 'size': 2}, {'id': '179', 'title': 'هاكر مغربي يروع بنوك وشركات في إسبانيا', 'source': 'rue20.com', 'link': 'https://rue20.com/925981.html', 'summary': 'هاكر مغربي يروع بنوك وشركات في إسبانيا.  . متابعة تمكّنت السلطات الإسبانية من إلقاء القبض على هاكر مغربي كان ينفذ هجمات إلكترونية تستهدف مؤسسات مالية وشركات، حيث يقوم بسرقة بيانات حساسة مثل الحسابات وكلمات المرور، ويعرضها للبيع عبر الشبكة. و لم يكتفِ بسرقة البيانات، بل استغلّها أيضًا في تنفيذ عمليات احتيال مباشرة من خلال التواصل مع الضحايا وخداعهم باستخدام المعلومات الخبر هاكر مغربي يروع بنوك وشركات في إسبانيا  .', 'size': 2}], 'main_title': 'إسبانيا..طرق جديدة لسرقة السياح الأجانب على الطرق السريعة!'}, {'community_id': '7', 'articles': [{'id': '162', 'title': 'احتياطيات النقد الأجنبي ترتفع والدرهم يتحسن مقابل الأورو', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a7%d8%ad%d8%aa%d9%8a%d8%a7%d8%b7%d9%8a%d8%a7%d8%aa-%d8%a7%d9%84%d9%86%d9%82%d8%af-%d8%a7%d9%84%d8%a3%d8%ac%d9%86%d8%a8%d9%8a-%d8%aa%d8%b1%d8%aa%d9%81%d8%b9-%d9%88%d8%a7%d9%84%d8%af%d8%b1%d9%87/', 'summary': 'احتياطيات النقد الأجنبي ترتفع والدرهم يتحسن مقابل الأورو. أفاد بنك المغرب بأن سعر الدرهم ارتفع بنسبة 0,6 في المائة مقابل الأورو، وتراجع بنسبة 1 في المائة مقابل الدولار الأمريكي خلال الفترة من 24 إلى 29 يوليوز 2025. وأوضح البنك في نشرته الأسبوعية، أنه لم يتم خلال هذه الفترة إجراء أي عملية مناقصة في سوق الصرف. وأبرز المصدر ذاته أن الأصول الاحتياطية الرسمية بلغت  احتياطيات النقد الأجنبي ترتفع والدرهم يتحسن مقابل الأورو     .', 'size': 2}, {'id': '173', 'title': 'إرتفاع قيمة صرف الدرهم المغربي مقابل اليورو', 'source': 'rue20.com', 'link': 'https://rue20.com/926022.html', 'summary': 'إرتفاع قيمة صرف الدرهم المغربي مقابل اليورو. . الرباط افاد بنك المغرب با ن سعر الدرهم ارتفع بنسبة 0,6 في الماي ة مقابل الأورو، وتراجع بـ 1 في المائة مقابل الدولار الا مريكي خلال الفترة من 24 إلى 29 يوليوز 2025. واوضح البنك في نشرته الا سبوعية، ا نه لم يتم خلال هذه الفترة ا جراء ا ي عملية مناقصة في الخبر إرتفاع قيمة صرف الدرهم المغربي مقابل اليورو  .', 'size': 2}], 'main_title': 'احتياطيات النقد الأجنبي ترتفع والدرهم يتحسن مقابل الأورو'}, {'community_id': '8', 'articles': [{'id': '184', 'title': 'صحيفة صينية: المغرب بقيادة الملك نفذ إصلاحات منهجية موجهة نحو المستقبل', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/471406.html', 'summary': 'صحيفة صينية: المغرب بقيادة الملك نفذ إصلاحات منهجية موجهة نحو المستقبل. ذكرت صحيفة غلوبال تايمز الصينية أن المغرب، بقيادة الملك محمد السادس، نفذ “إصلاحات منهجية وموجهة نحو المستقبل” حققت نتائج ملحوظة في عدة مجالات رئيسية على مدى السنوات الست والعشرين الماضية. وفي مقال مرفق بصورتين لجلالة الملك، سلّطت النسخة الانجليزية من صحيفة غلوبال تايمز الضوء على التقدم الذي حققه المغرب في مجال البنية التحتية، مشيرة على …', 'size': 3}, {'id': '397', 'title': 'المغرب بقيادة جلالة الملك محمد السادس.. نفذ “إصلاحات منهجية وموجهة نحو المستقبل”', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/225536/', 'summary': 'المغرب بقيادة جلالة الملك محمد السادس.. نفذ “إصلاحات منهجية وموجهة نحو المستقبل”. ذكرت صحيفة غلوبال تايمز الصينية أن المغرب، بقيادة جلالة الملك محمد السادس، نفذ “إصلاحات منهجية وموجهة نحو المستقبل” حققت نتائج ملحوظة في عدة مجالات رئيسية على مدى السنوات الست والعشرين الماضية. وفي مقال مرفق بصورتين لجلالة الملك، سلطت النسخة الانجليزية من صحيفة غلوبال تايمز الضوء على التقدم الذي حققه المغرب في مجال البنية التحتية، مشيرة', 'size': 3}, {'id': '404', 'title': 'صحيفة صينية: المغرب نفّذ إصلاحات منهجية موجهة نحو المستقبل بقيادة الملك محمد السادس', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%b5%d8%ad%d9%8a%d9%81%d8%a9-%d8%b5%d9%8a%d9%86%d9%8a%d8%a9-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d9%86%d9%81%d9%91%d8%b0-%d8%a5%d8%b5%d9%84%d8%a7%d8%ad%d8%a7%d8%aa-%d9%85%d9%86%d9%87%d8%ac%d9%8a/', 'summary': 'صحيفة صينية: المغرب نفّذ إصلاحات منهجية موجهة نحو المستقبل بقيادة الملك محمد السادس. نشرت صحيفة غلوبال تايمز الصينية، في نسختها الإنجليزية، مقالا مطولا بمناسبة احتفالات المغرب بعيد العرش، أبرزت فيه المسار التنموي الذي عرفته المملكة خلال 26 سنة من حكم الملك محمد السادس، ووصفت الإصلاحات التي شهدها المغرب بأنها “منهجية وموجهة نحو المستقبل”، محققة إنجازات ملموسة في عدة قطاعات استراتيجية. وذكرت الصحيفة أن المغرب شهد تطورا …  صحيفة صينية: المغرب نفّذ إصلاحات منهجية موجهة نحو المستقبل بقيادة الملك محمد السادس     .', 'size': 3}], 'main_title': 'صحيفة صينية: المغرب بقيادة الملك نفذ إصلاحات منهجية موجهة نحو المستقبل'}, {'community_id': '2', 'articles': [{'id': '189', 'title': 'أعضاء بمجلس الشيوخ الأمريكي: المغرب حليف عريق و”شريك أساسي” في إفريقيا وخارجها', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/471388.html', 'summary': 'أعضاء بمجلس الشيوخ الأمريكي: المغرب حليف عريق و”شريك أساسي” في إفريقيا وخارجها. متابعة سلط أعضاء بمجلس الشيوخ الأمريكي الضوء، بواشنطن، على العلاقات الاستراتيجية ومتعددة الأبعاد التي تجمع بين الولايات المتحدة والمغرب، الحليف العريق و”الشريك الأساسي” في إفريقيا وخارجها. وفي مداخلات أمام لجنة الشؤون الخارجية بالغرفة العليا للكونغرس الأمريكي، خلال جلسة تأكيد تعيين السفير الأمريكي الجديد بالمغرب، ديوك بوكان الثالث، شدد أعضاء بمجلس الشيوخ على أهمية توطيد العلاقات …', 'size': 2}, {'id': '230', 'title': 'أعضاء بمجلس الشيوخ الأمريكي: المغرب الحليف العريق والشريك “الأساسي” للولايات المتحدة', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a3%d8%b9%d8%b6%d8%a7%d8%a1-%d8%a8%d9%85%d8%ac%d9%84%d8%b3-%d8%a7%d9%84%d8%b4%d9%8a%d9%88%d8%ae-%d8%a7%d9%84%d8%a3%d9%85%d8%b1%d9%8a%d9%83%d9%8a-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d8%a7%d9%84/', 'summary': 'أعضاء بمجلس الشيوخ الأمريكي: المغرب الحليف العريق والشريك “الأساسي” للولايات المتحدة. أبرز أعضاء بمجلس الشيوخ الأمريكي، بواشنطن، العلاقات الاستراتيجية ومتعددة الأبعاد التي تجمع بين الولايات المتحدة والمغرب، الحليف العريق و”الشريك الأساسي” فيإفريقيا وخارجها. وخلال مداخلات أمام لجنة الشؤون الخارجية بالغرفة العليا للكونغرس الأمريكي، خلال جلسة تأكيد تعيين السفير الأمريكي الجديد بالمغرب، ديوك بوكان الثالث، أكد أعضاء بمجلس الشيوخ على أهمية توطيد العلاقات مع المملكة، …  أعضاء بمجلس الشيوخ الأمريكي: المغرب الحليف العريق والشريك “الأساسي” للولايات المتحدة     .', 'size': 2}], 'main_title': 'أعضاء بمجلس الشيوخ الأمريكي: المغرب حليف عريق و”شريك أساسي” في إفريقيا وخارجها'}, {'community_id': '3', 'articles': [{'id': '236', 'title': 'توقعات أحوال الطقس اليوم السبت', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%aa%d9%88%d9%82%d8%b9%d8%a7%d8%aa-%d8%a3%d8%ad%d9%88%d8%a7%d9%84-%d8%a7%d9%84%d8%b7%d9%82%d8%b3-%d8%a7%d9%84%d9%8a%d9%88%d9%85-%d8%a7%d9%84%d8%b3%d8%a8%d8%aa-27/', 'summary': 'توقعات أحوال الطقس اليوم السبت. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليومهالسبت، أن تتميز الحالة الجوية عامة بطقس حار نسبيا إلى حار بكل من السهول الداخلية والجنوب الشرقي للبلاد وبشرق الأقاليم الصحراوية للمملكة. كما يرتقب تمركز سحب غير مستقرة شيئا ما ومرفوقة بقطرات مطرية ورعد فوق كل من مرتفعات الأطلسين الكبير والمتوسط والهضاب العليا للمنطقة الشرقية وكذا الجنوب …  توقعات أحوال الطقس اليوم السبت     .', 'size': 2}, {'id': '355', 'title': 'طقس اليوم: أجواء حارة بعدد من مناطق المملكة', 'source': 'soltana.ma', 'link': 'https://soltana.ma/1357571.html', 'summary': 'طقس اليوم: أجواء حارة بعدد من مناطق المملكة. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم السبت، أن تتميز الحالة الجوية عامة بطقس حار نسبيا إلى حار بكل من السهول الداخلية والجنوب الشرقي للبلاد وبشرق الأقاليم الصحراوية للمملكة. كما يرتقب تمركز سحب غير مستقرة شيئا ما ومرفوقة بقطرات مطرية ورعد فوق كل من مرتفعات الأطلسين الكبير والمتوسط والهضاب العليا للمنطقة الشرقية وكذا الجنوب الشرقي', 'size': 2}], 'main_title': 'توقعات أحوال الطقس اليوم السبت'}, {'community_id': '4', 'articles': [{'id': '239', 'title': 'تطوان.. التأكيد على الانخراط الجماعي في تنفيذ التعليمات الملكية لإطلاق جيل جديد من برامج التنمية الترابية', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%aa%d8%b7%d9%88%d8%a7%d9%86-%d8%a7%d9%84%d8%aa%d8%a3%d9%83%d9%8a%d8%af-%d8%b9%d9%84%d9%89-%d8%a7%d9%84%d8%a7%d9%86%d8%ae%d8%b1%d8%a7%d8%b7-%d8%a7%d9%84%d8%ac%d9%85%d8%a7%d8%b9%d9%8a-%d9%81%d9%8a/', 'summary': 'تطوان.. التأكيد على الانخراط الجماعي في تنفيذ التعليمات الملكية لإطلاق جيل جديد من برامج التنمية الترابية. أعلنت وزارة الداخلية، اليوم الثلاثاء، أنه في إطار تفعيل التوجيهات الملكية السامية التي وردت في خطاب عيد العرش المجيد ليوم 29 يوليوز 2025، انعقد يوم فاتح غشت الجاري بمدينة تطوان، لقاء رفيع المستوى على هامش الاجتماع السنوي مع الولاة والعمال، خصص لتدارس سبل تنزيل الورش الملكي الطموح المتعلق بإطلاق جيل جديد من برامج …  تطوان.. التأكيد على الانخراط الجماعي في تنفيذ التعليمات الملكية لإطلاق جيل جديد من برامج التنمية الترابية     .', 'size': 2}, {'id': '312', 'title': 'تطوان.. وزير الداخلية يعقد لقاءً مع عدد من الوزراء والولاة', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%aa%d8%b7%d9%88%d8%a7%d9%86-%d9%88%d8%b2%d9%8a%d8%b1-%d8%a7%d9%84%d8%af%d8%a7%d8%ae%d9%84%d9%8a%d8%a9-%d9%8a%d8%b9%d9%82%d8%af-%d9%84%d9%82%d8%a7%d8%a1%d9%8b-%d9%85%d8%b9-%d8%b9%d8%af%d8%af/', 'summary': 'تطوان.. وزير الداخلية يعقد لقاءً مع عدد من الوزراء والولاة. احتضنت مدينة تطوان، أمس الجمعة (01 غشت) اجتماعاً ضمّ وزير الداخلية وعدداً من أعضاء الحكومة والولاة والعمال المعنِيين بتدبير الشأن الترابي، تفعيلا للتعليمات الملكية في خطاب العرش. وشارك في هذا اللقاء، الذي نُظّم على هامش الاجتماع السنوي لوزارة الداخلية، كل من وزير التجهيز والماء، ووزير التربية الوطنية والتعليم الأولي والرياضة، ووزير الصحة والحماية الاجتماعية، ووزيرة', 'size': 2}], 'main_title': 'تطوان.. التأكيد على الانخراط الجماعي في تنفيذ التعليمات الملكية لإطلاق جيل جديد من برامج التنمية الترابية'}, {'community_id': '5', 'articles': [{'id': '310', 'title': 'ترامب يوجّه رسالة للملك محمد السادس ويجدّد الاعتراف الأمريكي بمغربية الصحراء', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/politic/410384.html', 'summary': 'ترامب يوجّه رسالة للملك محمد السادس ويجدّد الاعتراف الأمريكي بمغربية الصحراء. جدد رئيس الولايات المتحدة الأمريكية، دونالد ج. ترامب، في برقية إلى صاحب الجلالة الملك محمد السادس بمناسبة عيد العرش، التأكيد على اعتراف الولايات المتحدة الأمريكية', 'size': 5}, {'id': '313', 'title': 'عيد العرش.. ترامب يجدد التأكيد على اعتراف الولايات المتحدة بالسيادة المغربية على الصحراء', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%b9%d9%8a%d8%af-%d8%a7%d9%84%d8%b9%d8%b1%d8%b4-%d8%aa%d8%b1%d8%a7%d9%85%d8%a8-%d9%8a%d8%ac%d8%af%d8%af-%d8%a7%d9%84%d8%aa%d8%a3%d9%83%d9%8a%d8%af-%d8%b9%d9%84%d9%89-%d8%a7%d8%b9%d8%aa%d8%b1%d8%a7/', 'summary': 'عيد العرش.. ترامب يجدد التأكيد على اعتراف الولايات المتحدة بالسيادة المغربية على الصحراء. جدد رئيس الولايات المتحدة الأمريكية، دونالد ج. ترامب، في برقية إلى صاحب الجلالة الملك محمد السادس بمناسبة عيد العرش، التأكيد على اعتراف الولايات المتحدة الأمريكية بالسيادة المغربية على الصحراء، ودعمها للمقترح المغربي للحكم الذاتي “باعتباره الأساس الوحيد من أجل تسوية عادلة ودائمة لهذا النزاع”. وأكد ترامب، في برقيته إلى جلالة الملك، “كما أود أن أجدد', 'size': 5}, {'id': '322', 'title': 'ترامب يجدد اعتراف أمريكا بسيادة المغرب على الصحراء', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/320046/', 'summary': 'ترامب يجدد اعتراف أمريكا بسيادة المغرب على الصحراء. جدد رئيس الولايات المتحدة الأمريكية، دونالد ج. ترامب، في برقية إلى صاحب الجلالة الملك محمد السادس بمناسبة عيد العرش، التأكيد على اعتراف الولايات المتحدة الأمريكية بالسيادة المغربية على الصحراء، ودعمها للمقترح المغربي للحكم الذاتي “باعتباره الأساس الوحيد من أجل تسوية عادلة ودائمة لهذا النزاع”. وأكد ترامب، في برقيته إلى جلالة الملك، “كما أود أن أجدد', 'size': 5}, {'id': '332', 'title': 'في تهنئة عيد العرش.. ترامب يجدد اعتراف أمريكا بمغربية الصحراء ودعمها لمقترح الحكم الذاتي', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1090199.html', 'summary': 'في تهنئة عيد العرش.. ترامب يجدد اعتراف أمريكا بمغربية الصحراء ودعمها لمقترح الحكم الذاتي. جدد رئيس الولايات المتحدة الأمريكية، دونالد ج. ترامب، في برقية إلى الملك محمد السادس بمناسبة عيد العرش، التأكيد على اعتراف الولايات المتحدة الأمريكية بالسيادة المغربية على الصحراء، ودعمها للمقترح المغربي للحكم الذاتي “باعتباره الأساس الوحيد من أجل تسوية عادلة ودائمة لهذا النزاع”. وأكد ترامب، في برقيته إلى الملك، “كما أود أن أجدد التأكيد على أن ظهرت المقالة في تهنئة عيد العرش.. ترامب يجدد اعتراف أمريكا بمغربية الصحراء ودعمها لمقترح الحكم الذاتي  .', 'size': 5}, {'id': '357', 'title': 'ترامب يجدد التأكيد لجلالة الملك الدعم الكامل للولايات المتحدة لسيادة المغرب على صحرائه', 'source': 'rue20.com', 'link': 'https://rue20.com/926131.html', 'summary': 'ترامب يجدد التأكيد لجلالة الملك الدعم الكامل للولايات المتحدة لسيادة المغرب على صحرائه. . الرباط جدد رئيس الولايات المتحدة الأمريكية، دونالد ج. ترامب، في برقية إلى صاحب الجلالة الملك محمد السادس بمناسبة عيد العرش، التأكيد على اعتراف الولايات المتحدة الأمريكية بالسيادة المغربية على الصحراء، ودعمها للمقترح المغربي للحكم الذاتي “باعتباره الأساس الوحيد من أجل تسوية عادلة ودائمة لهذا النزاع”. وأكد السيد ترامب، في برقيته إلى جلالة الملك، الخبر ترامب يجدد التأكيد لجلالة الملك الدعم الكامل للولايات المتحدة لسيادة المغرب على صحرائه  .', 'size': 5}], 'main_title': 'ترامب يوجّه رسالة للملك محمد السادس ويجدّد الاعتراف الأمريكي بمغربية الصحراء'}, {'community_id': '6', 'articles': [{'id': '316', 'title': 'وزيرة فلسطينية: مساعدات جلالة الملك محمد السادس ستلبي حاجيات غزة الإنسانية والطبية', 'source': 'kifache.com', 'link': 'https://kifache.com/%d9%88%d8%b2%d9%8a%d8%b1%d8%a9-%d9%81%d9%84%d8%b3%d8%b7%d9%8a%d9%86%d9%8a%d8%a9-%d9%85%d8%b3%d8%a7%d8%b9%d8%af%d8%a7%d8%aa-%d8%ac%d9%84%d8%a7%d9%84%d8%a9-%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%85%d8%ad/', 'summary': 'وزيرة فلسطينية: مساعدات جلالة الملك محمد السادس ستلبي حاجيات غزة الإنسانية والطبية. أكدت وزيرة التنمية الاجتماعية الفلسطينية، سماح حمد، أن المساعدة الإنسانية والطبية العاجلة التي أعطى صاحب الجلالة الملك محمد السادس تعليماته السامية من أجل إرسالها إلى الشعب الفلسطيني وخاصة ساكنة غزة ستساعد على تلبية احتياجات ساكنة القطاع من الأغذية والأدوية. وقالت سماح في تصريح لوكالة المغرب العربي للأنباء، “نشكر جلالة الملك على كل مبادراته الإنسانية ونقدر', 'size': 2}, {'id': '353', 'title': 'وزيرة فلسطينية تشكر الملك محمد السادس على دعم صمود غزة في ظل الأزمة الإنسانية', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d9%88%d8%b2%d9%8a%d8%b1%d8%a9-%d9%81%d9%84%d8%b3%d8%b7%d9%8a%d9%86%d9%8a%d8%a9-%d8%aa%d8%b4%d9%83%d8%b1-%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%85%d8%ad%d9%85%d8%af-%d8%a7%d9%84%d8%b3%d8%a7%d8%af%d8%b3/', 'summary': 'وزيرة فلسطينية تشكر الملك محمد السادس على دعم صمود غزة في ظل الأزمة الإنسانية. أكدت وزيرة التنمية الاجتماعية الفلسطينية، سماح حمد، أن المساعدة الإنسانية والطبية العاجلة التي أعطى الملك محمد السادس تعليماته من أجل إرسالها إلى الشعب الفلسطيني وخاصة ساكنة غزة ستساعد على تلبية احتياجات ساكنة القطاع من الأغذية والأدوية. وقالت سماح في تصريح لوكالة المغرب العربي للأنباء، "نشكر الملك محمد السادس على كل مبادراته الإنسانية ونقدر مساعيه القيمة  وزيرة فلسطينية تشكر الملك محمد السادس على دعم صمود غزة في ظل الأزمة الإنسانية     .', 'size': 2}], 'main_title': 'وزيرة فلسطينية: مساعدات جلالة الملك محمد السادس ستلبي حاجيات غزة الإنسانية والطبية'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    