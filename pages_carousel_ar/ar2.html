<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 12/09/2025 - 18h26</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '6', 'articles': [{'id': '4', 'title': 'إقبال قياسي على تذاكر مونديال 2026', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d8%a5%d9%82%d8%a8%d8%a7%d9%84-%d9%82%d9%8a%d8%a7%d8%b3%d9%8a-%d8%b9%d9%84%d9%89-%d8%aa%d8%b0%d8%a7%d9%83%d8%b1-%d9%85%d9%88%d9%86%d8%af%d9%8a%d8%a7%d9%84-2026-1622744.html', 'summary': 'إقبال قياسي على تذاكر مونديال 2026. أعلن الاتحاد الدولي لكرة القدم (فيفا)، في وقت متأخر من مساء أمس الخميس، أن أكثر من 1.5 مليون مشجع سجلوا طلباتهم خلال الـ24 ساعة الأولى من أجل الحصول على تذاكر نهائيات كأس العالم 2026. وجاءت الطلبات من 210 دول، وكان العدد الأكبر من الولايات المتحدة والمكسيك وكندا، التي تشترك في استضافة النسخة المقبلة من المونديال  إقبال قياسي على تذاكر مونديال 2026     - هسبريس جريدة إلكترونية مغربية .', 'size': 2}, {'id': '177', 'title': 'أكثر من 1.5 مليون مشجع يتسابقون على تذاكر مونديال 2026', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a3%d9%83%d8%ab%d8%b1-%d9%85%d9%86-1-5-%d9%85%d9%84%d9%8a%d9%88%d9%86-%d9%85%d8%b4%d8%ac%d8%b9-%d9%8a%d8%aa%d8%b3%d8%a7%d8%a8%d9%82%d9%88%d9%86-%d8%b9%d9%84%d9%89-%d8%aa%d8%b0%d8%a7%d9%83%d8%b1/', 'summary': 'أكثر من 1.5 مليون مشجع يتسابقون على تذاكر مونديال 2026. قال الاتحاد الدولي لكرة القدم"فيفا" إن عدد المشجعين الذين تقدموا بطلبات المشاركة في قرعة البيع المسبق لتذاكر كأس العالم 2026 تجاوز 1.5 مليون طلب خلال 24 ساعة فقط. وأوضح"فيفا" في بلاغ له خلال الساعات الأخيرة، أن الجماهير تقدمت بطلبات الحصول على تذاكر من مختلف أنحاء العالم وتمثل 210 دول. هذا وتصدر مواطنو الولايات المتحدة والمكسيك  أكثر من 1.5 مليون مشجع يتسابقون على تذاكر مونديال 2026     .', 'size': 2}], 'main_title': 'إقبال قياسي على تذاكر مونديال 2026'}, {'community_id': '5', 'articles': [{'id': '67', 'title': 'السيد الحموشي يتباحث بالرباط مع المديرة العامة للأمن الداخلي الفرنسي.', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/206091', 'summary': 'السيد الحموشي يتباحث بالرباط مع المديرة العامة للأمن الداخلي الفرنسي..  استقبل المدير العام للأمن الوطني ولمراقبة التراب الوطني عبد اللطيف حموشي, أمس الخميس بالرباط، المديرة العامة للأمن الداخلي الفرنسي السيدة سيلين بيرتون، التي كانت مرفوقة بوفد أمني رفيع المستوى. وذكر بلاغ للمديرية العامة لمراقبة التراب الوطني أن المباجثات بين السيد حموشي ونظيرته الفرنسية انصبت حول سبل تطوير آليات التعاون الثنائي في المجال الأمني، فضلا', 'size': 5}, {'id': '128', 'title': 'تباحثا حول سبل تطوير التعاون الثنائي وتعزيز الشراكة.. حموشي يستقبل المديرة العامة للأمن الداخلي الفرنسي', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%aa%d8%a8%d8%a7%d8%ad%d8%ab%d8%a7-%d8%ad%d9%88%d9%84-%d8%b3%d8%a8%d9%84-%d8%aa%d8%b7%d9%88%d9%8a%d8%b1-%d8%a7%d9%84%d8%aa%d8%b9%d8%a7%d9%88%d9%86-%d8%a7%d9%84%d8%ab%d9%86%d8%a7%d8%a6%d9%8a-%d9%88/', 'summary': 'تباحثا حول سبل تطوير التعاون الثنائي وتعزيز الشراكة.. حموشي يستقبل المديرة العامة للأمن الداخلي الفرنسي. استقبل المدير العام للأمن الوطني ولمراقبة التراب الوطني عبد اللطيف حموشي، أمس الخميس (11 شتنبر) بالرباط، المديرة العامة للأمن الداخلي الفرنسي، سيلين بيرتون، التي كانت مرفوقة بوفد أمني رفيع المستوى. وذكر بلاغ للمديرية العامة لمراقبة التراب الوطني أن المباجثات بين حموشي ونظيرته الفرنسية انصبت حول سبل تطوير آليات التعاون الثنائي في المجال الأمني، فضلا عن', 'size': 5}, {'id': '157', 'title': 'مباحثات مغربية فرنسية لمكافحة الإرهاب والتجسس وتأمين المونديال', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1099082.html', 'summary': 'مباحثات مغربية فرنسية لمكافحة الإرهاب والتجسس وتأمين المونديال. استقبل المدير العام للأمن الوطني ولمراقبة التراب الوطني عبد اللطيف حموشي، أمس الخميس بالرباط، المديرة العامة للأمن الداخلي الفرنسي السيدة سيلين بيرتون، التي كانت مرفوقة بوفد أمني رفيع المستوى. وذكر بلاغ للمديرية العامة لمراقبة التراب الوطني أن المباجثات بين الحموشي ونظيرته الفرنسية انصبت حول سبل تطوير آليات التعاون الثنائي في المجال الأمني، فضلا عن تعزيز ظهرت المقالة مباحثات مغربية فرنسية لمكافحة الإرهاب والتجسس وتأمين المونديال  .', 'size': 5}, {'id': '192', 'title': 'حموشي يبحث مع نظيرته الفرنسية تعزيز التعاون الأمني ومواجهة التحديات المشتركة', 'source': 'rue20.com', 'link': 'https://rue20.com/935654.html', 'summary': 'حموشي يبحث مع نظيرته الفرنسية تعزيز التعاون الأمني ومواجهة التحديات المشتركة.  . الرباط استقبل المدير العام للأمن الوطني ولمراقبة التراب الوطني عبد اللطيف حموشي, أمس الخميس بالرباط، المديرة العامة للأمن الداخلي الفرنسي سيلين بيرتون، التي كانت مرفوقة بوفد أمني رفيع المستوى. وذكر بلاغ للمديرية العامة لمراقبة التراب الوطني أن المباجثات بين حموشي ونظيرته الفرنسية انصبت حول سبل تطوير آليات التعاون الثنائي في المجال الأمني، الخبر حموشي يبحث مع نظيرته الفرنسية تعزيز التعاون الأمني ومواجهة التحديات المشتركة  .', 'size': 5}, {'id': '196', 'title': 'بالرباط.. مباحثات هامة تجمع حموشي بالمديرة العامة للأمن الداخلي الفرنسي', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/475154.html', 'summary': 'بالرباط.. مباحثات هامة تجمع حموشي بالمديرة العامة للأمن الداخلي الفرنسي. استقبل المدير العام للأمن الوطني ولمراقبة التراب الوطني عبد اللطيف حموشي, أمس الخميس بالرباط، المديرة العامة للأمن الداخلي الفرنسي سيلين بيرتون، التي كانت مرفوقة بوفد أمني رفيع المستوى.', 'size': 5}], 'main_title': 'السيد الحموشي يتباحث بالرباط مع المديرة العامة للأمن الداخلي الفرنسي.'}, {'community_id': '2', 'articles': [{'id': '147', 'title': 'مدريد تستضيف نهائي دوري أبطال أوروبا 2027', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/323145/', 'summary': 'مدريد تستضيف نهائي دوري أبطال أوروبا 2027. أعلن الاتحاد الأوروبي لكرة القدم، أمس الخميس، أن نهائي مسابقة دوري أبطال أوروبا في كرة القدم لسنة 2027 سيقام على ملعب “ميتروبوليتانو” في مدريد. وستكون هي المرة الثانية التي يحتضن فيها ملعب نادي أتلتيكو مدريد نهائي هذه المسابقة القارية المرموقة بعد نسخة 2019، وتغلب حينها ليفربول الإنجليزي على مواطنه توتنهام. وخاضت التنافس كل من العاصمة', 'size': 2}, {'id': '234', 'title': '“الويفا” تختار ملعبا إسبانيا لاحتضان نهائي عصبة الأبطال 2027', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%a7%d9%84%d9%88%d9%8a%d9%81%d8%a7-%d8%aa%d8%ae%d8%aa%d8%a7%d8%b1-%d9%85%d9%84%d8%b9%d8%a8%d8%a7-%d8%a5%d8%b3%d8%a8%d8%a7%d9%86%d9%8a%d8%a7-%d9%84%d8%a7%d8%ad%d8%aa%d8%b6%d8%a7%d9%86-%d9%86/', 'summary': '“الويفا” تختار ملعبا إسبانيا لاحتضان نهائي عصبة الأبطال 2027. المساء اليوم: سيقام نهائي مسابقة دوري أبطال أوروبا في كرة القدم لعام 2027 على ملعب “ميتروبوليتانو” في مدريد، وفقا لما أعلنه الاتحاد الأوربي للعبة، أمس الخميس. وستكون المرة الثانية التي يحتضن فيها ملعب أتلتيكو مدريد', 'size': 2}], 'main_title': 'مدريد تستضيف نهائي دوري أبطال أوروبا 2027'}, {'community_id': '7', 'articles': [{'id': '150', 'title': 'طقس اليوم الجمعة…أجواء حارة بعدد من المدن', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/323141/', 'summary': 'طقس اليوم الجمعة…أجواء حارة بعدد من المدن. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الجمعة، أن يظل الطقس حارا نسبيا بكل من الجنوب الشرقي والسهول الواقعة غرب الأطلس، ومنطقة السايس، وداخل منطقة سوس، وأقصى جنوب المملكة. وخلال الليل، سيلاحظ تشكل سحب منخفضة بالقرب من السواحل حيث ستكون مرفوقة بكتل ضبابية أو قطرات مطرية جد خفيفة محليا. كما يرتقب تسجيل زخات رعدية مصحوبة', 'size': 2}, {'id': '179', 'title': 'توقعات أحوال الطقس.. تشكل سحب منخفضة بالقرب من السواحل', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%aa%d9%88%d9%82%d8%b9%d8%a7%d8%aa-%d8%a3%d8%ad%d9%88%d8%a7%d9%84-%d8%a7%d9%84%d8%b7%d9%82%d8%b3-%d8%aa%d8%b4%d9%83%d9%84-%d8%b3%d8%ad%d8%a8-%d9%85%d9%86%d8%ae%d9%81%d8%b6%d8%a9-%d8%a8%d8%a7%d9%84/', 'summary': 'توقعات أحوال الطقس.. تشكل سحب منخفضة بالقرب من السواحل. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الجمعة، أن يظل الطقس حارا نسبيا بكل من الجنوب الشرقي والسهول الواقعة غرب الأطلس، ومنطقة السايس، وداخل منطقة سوس، وأقصى جنوب المملكة. وخلال الليل، سيلاحظ تشكل سحب منخفضة بالقرب من السواحل حيث ستكون مرفوقة بكتل ضبابية أو قطرات مطرية جد خفيفة محليا. كما يرتقب تسجيل زخات رعدية مصحوبة  توقعات أحوال الطقس.. تشكل سحب منخفضة بالقرب من السواحل     .', 'size': 3}, {'id': '246', 'title': 'توقعات أحوال الطقس في العديد من مناطق المملكة اليوم الجمعة', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%aa%d9%88%d9%82%d8%b9%d8%a7%d8%aa-%d8%a3%d8%ad%d9%88%d8%a7%d9%84-%d8%a7%d9%84%d8%b7%d9%82%d8%b3-%d9%81%d9%8a-%d8%a7%d9%84%d8%b9%d8%af%d9%8a%d8%af-%d9%85%d9%86-%d9%85%d9%86%d8%a7%d8%b7%d9%82-105/', 'summary': 'توقعات أحوال الطقس في العديد من مناطق المملكة اليوم الجمعة. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليومه الجمعة 12شتنبر 2025، أن يظل الطقس حارا نسبيا بكل من الجنوب الشرقي والسهول الواقعة غرب الأطلس، ومنطقة السايس، وداخل منطقة سوس، وأقصى جنوب المملكة. وخلال الليل، سيلاحظ تشكل سحب منخفضة بالقرب من السواحل حيث ستكون مرفوقة بكتل ضبابية أو قطرات مطرية جد خفيفة محليا. كما يرتقب …  توقعات أحوال الطقس في العديد من مناطق المملكة اليوم الجمعة     .', 'size': 2}], 'main_title': 'توقعات أحوال الطقس.. تشكل سحب منخفضة بالقرب من السواحل'}, {'community_id': '0', 'articles': [{'id': '180', 'title': 'بنعبد الله يهاجم أخنوش بعد مروره الإعلامي: "خطاب أجوف وتناقض صارخ مع الواقع"', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a8%d9%86%d8%b9%d8%a8%d8%af-%d8%a7%d9%84%d9%84%d9%87-%d9%8a%d9%87%d8%a7%d8%ac%d9%85-%d8%b1%d8%a6%d9%8a%d8%b3-%d8%a7%d9%84%d8%ad%d9%83%d9%88%d9%85%d8%a9-%d8%a8%d8%b9%d8%af-%d9%85%d8%b1%d9%88%d8%b1/', 'summary': 'بنعبد الله يهاجم أخنوش بعد مروره الإعلامي: "خطاب أجوف وتناقض صارخ مع الواقع". وجّه نبيل بنعبد الله، الأمين العام لحزب التقدم والاشتراكية، انتقادات لاذعة لرئيس الحكومة عزيز أخنوش، عقب المقابلة التلفزيونية التي بُثّت مساء أمس على القنوات العمومية، معتبرا أنها لم تحمل أي جديد وجاءت "مخيبة للآمال". خطاب "أجوف" في تدوينة نشرها على صفحاته بمواقع التواصل الاجتماعي، وصف بنعبد الله مرور رئيس الحكومة الإعلامي بـ"الأجوف"، قائلا إنه  بنعبد الله يهاجم أخنوش بعد مروره الإعلامي: "خطاب أجوف وتناقض صارخ مع الواقع"     .', 'size': 2}, {'id': '205', 'title': 'نبيل بنعبد الله يهاجم اللقاء الإعلامي لرئيس الحكومة أخنوش', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d9%86%d8%a8%d9%8a%d9%84-%d8%a8%d9%86%d8%b9%d8%a8%d8%af-%d8%a7%d9%84%d9%84%d9%87-%d9%8a%d9%87%d8%a7%d8%ac%d9%85-%d8%a7%d9%84%d9%84%d9%82%d8%a7%d8%a1-%d8%a7%d9%84%d8%a5%d8%b9%d9%84%d8%a7%d9%85%d9%8a/', 'summary': 'نبيل بنعبد الله يهاجم اللقاء الإعلامي لرئيس الحكومة أخنوش. هاجم الأمين العام لحزب التقدم والاشتراكية نبيل بنعبد الله اللقاء الإعلامي لرئيس الحكومة عزيز أخنوش الذي تم عرضه على القناتين الأولى والثانية ليلة الأربعاء،  نبيل بنعبد الله يهاجم اللقاء الإعلامي لرئيس الحكومة أخنوش     .', 'size': 2}], 'main_title': 'بنعبد الله يهاجم أخنوش بعد مروره الإعلامي: "خطاب أجوف وتناقض صارخ مع الواقع"'}, {'community_id': '1', 'articles': [{'id': '189', 'title': 'سجن عكاشة ينفي تعرض بعيوي المعتقل في قضية إسكوبار لأزمة صحية', 'source': 'rue20.com', 'link': 'https://rue20.com/935674.html', 'summary': 'سجن عكاشة ينفي تعرض بعيوي المعتقل في قضية إسكوبار لأزمة صحية.  ا الرباط أصدرت إدارة السجن المحلي عين السبع 1 بيانًا توضيحيًا نفت فيه صحة الأخبار المتداولة حول نقل سجين احتياطي (عبد النبي بعوي المعتقل في قضية إسكوبار الصحراء) إلى المستشفى بسبب أزمة صحية حادة. وأوضح البيان أن إخراج السجين تم وفق موعد طبي مسبق وفي إطار المتابعة الروتينية لحالته الصحية، مشددًا على أن الخبر سجن عكاشة ينفي تعرض بعيوي المعتقل في قضية إسكوبار لأزمة صحية  .', 'size': 2}, {'id': '225', 'title': 'إدارة سجن عكاشة: إخراج السجين بعيوي إلى المستشفى لا علاقة له بالتعرض لأية وعكة صحية', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/226921/', 'summary': 'إدارة سجن عكاشة: إخراج السجين بعيوي إلى المستشفى لا علاقة له بالتعرض لأية وعكة صحية. ردا على الأخبار المتداولة التي تدعي نقل السجين (عبد النبي بعيوي)، المعتقل احتياطيا بالسجن المحلي عين السبع 1، إلى المستشفى “بعد تعرضه لأزمة صحية حادة”، تتقدم إدارة هذه المؤسسة إلى الرأي العام بالتوضيحات التالية: – إن إخراج السجين المذكور إلى المستشفى تم بناء على موعد مسبق وفي إطار تتبع حالته الصحية، ولا علاقة لذلك بتعرضه', 'size': 3}, {'id': '324', 'title': 'إدارة سجن عين السبع تكذب مزاعم نقل السجين عبد النبي بعيوي إثر أزمة صحية', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/society/412612.html', 'summary': 'إدارة سجن عين السبع تكذب مزاعم نقل السجين عبد النبي بعيوي إثر أزمة صحية. ردا على الأخبار المتداولة التي تدعي نقل السجين (ع.ب)، المعتقل احتياطيا بالسجن المحلي عين السبع 1، إلى المستشفى "بعد تعرضه لأزمة صحية حادة"، خرجت إدارة', 'size': 2}], 'main_title': 'إدارة سجن عكاشة: إخراج السجين بعيوي إلى المستشفى لا علاقة له بالتعرض لأية وعكة صحية'}, {'community_id': '3', 'articles': [{'id': '355', 'title': '“الكاف” يعلن موعد انطلاق بيع تذاكر كأس أمم إفريقيا “المغرب 2025”', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1099256.html', 'summary': '“الكاف” يعلن موعد انطلاق بيع تذاكر كأس أمم إفريقيا “المغرب 2025”. أعلن الاتحاد الإفريقي لكرة القدم عن انطلاق عملية التسجيل لاقتناء تذاكر كأس أمم إفريقيا المقرر انطلاقها نهاية العام الجاري بالمملكة. وأوضح الاتحاد الإفريقي أن المرحلة الأولى من طرح التذاكر ستنطلق يوم 25 شتنبر 2025، بينما ستبدأ المرحلة الثانية يوم 21 أكتوبر 2025، على أن تُطرح المرحلة الثالثة يوم 21 نونبر 2025، ما يمنح الجمهور فترة ظهرت المقالة “الكاف” يعلن موعد انطلاق بيع تذاكر كأس أمم إفريقيا “المغرب 2025”  .', 'size': 2}, {'id': '376', 'title': '"الكاف" تعلن الموعد الرسمي لانطلاق عملية بيع تذاكر "كان" المغرب', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a7%d9%84%d9%83%d8%a7%d9%81-%d8%aa%d8%b9%d9%84%d9%86-%d8%a7%d9%84%d9%85%d9%88%d8%b9%d8%af-%d8%a7%d9%84%d8%b1%d8%b3%d9%85%d9%8a-%d9%84%d8%a7%d9%86%d8%b7%d9%84%d8%a7%d9%82-%d8%b9%d9%85%d9%84/', 'summary': '"الكاف" تعلن الموعد الرسمي لانطلاق عملية بيع تذاكر "كان" المغرب. أعلنت الكونفدرالية الإفريقية لكرة القدم، اليوم الجمعة، عن الموعد الرسمي لانطلاق عملية بيع تذاكر نهائيات كأس أمم إفريقيا "المغرب 2025". وحسب بلاغ رسمي للجهاز الكروي، فإن عملية بيع التذاكر ستنطلق عبر مراحل أولاها ستكون يوم 25 شتنبر الجاري. المرحلة الأولى كما أوضح المصدر ذاته، ستكون يومي 25 و26 شتنبر، حصريا للجماهير التي تتوفر على بطاقة  "الكاف" تعلن الموعد الرسمي لانطلاق عملية بيع تذاكر "كان" المغرب     .', 'size': 2}], 'main_title': '“الكاف” يعلن موعد انطلاق بيع تذاكر كأس أمم إفريقيا “المغرب 2025”'}, {'community_id': '4', 'articles': [{'id': '365', 'title': 'المغرب يوقع مذكرة تفاهم مع Mistral AI لتعزيز التحول الرقمي والذكاء الاصطناعي (فيديو)', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1099198.html', 'summary': 'المغرب يوقع مذكرة تفاهم مع Mitral AI لتعزيز التحول الرقمي والذكاء الاصطناعي (فيديو). وقعت أمل الفلاح السغروشني، الوزيرة المنتدبة المكلفة بالانتقال الرقمي وإصلاح الإدارة، اليوم الجمعة 12 شتنبر 2025 بالرباط، مذكرة تفاهم استراتيجية مع شركة Mitral AI، الرائدة الأوروبية في مجال الذكاء الاصطناعي. \ufeff ووفقا لبلاغ صحفي للوزارة المنتدبة المكلفة بالانتقال الرقمي وإصلاح الإدراة، فإن هذه الشراكة تأتي لتجسيد الرؤية الملكية الطموحة للمغرب في تبني الذكاء الاصطناعي كقاطرة ظهرت المقالة المغرب يوقع مذكرة تفاهم مع Mitral AI لتعزيز التحول الرقمي والذكاء الاصطناعي (فيديو)  .', 'size': 2}, {'id': '422', 'title': 'الوزيرة السغروشني: مشروع التعاون مع الشركة العالمية “Mistral AI” يجسد توصيات المناظرة الوطنية الأولى للذكاء الاصطناعي', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d9%88%d8%b2%d9%8a%d8%b1%d8%a9-%d8%a7%d9%84%d8%b3%d8%ba%d8%b1%d9%88%d8%b4%d9%86%d9%8a-%d9%85%d8%b4%d8%b1%d9%88%d8%b9-%d8%a7%d9%84%d8%aa%d8%b9%d8%a7%d9%88%d9%86-%d9%85%d8%b9-%d8%a7%d9%84/', 'summary': 'الوزيرة السغروشني: مشروع التعاون مع الشركة العالمية “Mitral AI” يجسد توصيات المناظرة الوطنية الأولى للذكاء الاصطناعي. أكدت الوزيرة المنتدبة المكلفة بالانتقال الرقمي وإصلاح الإدارة، أمل الفلاح السغروشني، اليوم الجمعة 12 شتنبر 2025 بالرباط، على هامش لقاء رفيع المستوى حول آفاق وتحديات الذكاء الاصطناعي، أن المغرب يواصل تعزيز قدراته الرقمية من خلال شراكات استراتيجية مع شركات عالمية متخصصة في الذكاء الاصطناعي. وفي هذا السياق، أوضحت الوزيرة في تصريح لموقع “” …  الوزيرة السغروشني: مشروع التعاون مع الشركة العالمية “Mitral AI” يجسد توصيات المناظرة الوطنية الأولى للذكاء الاصطناعي     .', 'size': 2}], 'main_title': 'المغرب يوقع مذكرة تفاهم مع Mistral AI لتعزيز التحول الرقمي والذكاء الاصطناعي (فيديو)'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    