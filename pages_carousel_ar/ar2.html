<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 09/08/2025 - 18h27</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '6', 'articles': [{'id': '0', 'title': 'فتى يطلق النار وسط نيويورك', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d9%81%d8%aa%d9%89-%d9%8a%d8%b7%d9%84%d9%82-%d8%a7%d9%84%d9%86%d8%a7%d8%b1-%d9%88%d8%b3%d8%b7-%d9%86%d9%8a%d9%88%d9%8a%d9%88%d8%b1%d9%83-1606437.html', 'summary': 'فتى يطلق النار وسط نيويورك. أطلق فتى النار وأصاب ثلاثة أشخاص قرب ساحة تايمز سكوير في نيويورك، وفق ما أعلنت شرطة المدينة السبت. وأوضحت أن الحادثة وقعت حوالى الساعة 01,20 (05,20 بتوقيت غرينتش)، مشيرة إلى أن حالة المصابين الذين تتراوح أعمارهم بين 19 و65 عاما، مستقرة.  فتى يطلق النار وسط نيويورك     - هسبريس جريدة إلكترونية مغربية .', 'size': 2}, {'id': '412', 'title': 'إطلاق نار قرب تايمز سكوير يصيب ثلاثة أشخاص', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a5%d8%b7%d9%84%d8%a7%d9%82-%d9%86%d8%a7%d8%b1-%d9%82%d8%b1%d8%a8-%d8%aa%d8%a7%d9%8a%d9%85%d8%b2-%d8%b3%d9%83%d9%88%d9%8a%d8%b1-%d9%8a%d8%b5%d9%8a%d8%a8-%d8%ab%d9%84%d8%a7%d8%ab%d8%a9-%d8%a3%d8%b4/', 'summary': 'إطلاق نار قرب تايمز سكوير يصيب ثلاثة أشخاص. أفادت شرطة نيويورك، يومه السبت 9 غشت الجاري، بإصابة ثلاثة أشخاص بجروح إثر حادث إطلاق نار وقع بالقرب من ساحة تايمز سكوير، في وقت مبكر من صباح اليوم، نفذه فتى تم توقيفه لاحقاً. وذكرت الشرطة، أن أعمار المصابين تتراوح بين 19 و65 عاماً، وأن حالتهم الصحية مستقرة. وأضاف المتحدث باسم الشرطة أن الواقعة …  إطلاق نار قرب تايمز سكوير يصيب ثلاثة أشخاص     .', 'size': 2}], 'main_title': 'فتى يطلق النار وسط نيويورك'}, {'community_id': '4', 'articles': [{'id': '24', 'title': 'ولاية أمن مراكش تحقق في تجاوزات ضابط', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-647969.html', 'summary': 'ولاية أمن مراكش تحقق في تجاوزات ضابط. فتحت ولاية أمن مراكش ، يوم الجمعة 8 غشت 2024، تحقيقاً رسمياً لتحديد التجاوزات المهنية والإخلالات الوظيفية المنسوبة لضابط أمن يعمل بفرقة السير الطرقي بمدينة مراكش. وجاء هذا الإجراء بعد تداول تسجيل مصور على مواقع التواصل الاجتماعي يظهر محاولة الضابط استخلاص مبلغ مالي من سائق سيارة مخالف، بما لا يتوافق مع ما هو منصوص عليه في محضر المخالفة الجزافية، مما يثير شبهة محاولة طلب رشوة. وتعمل مصالح الأمن الوطني حالياً على إخضاع الضابط المعني لإجراءات البحث الإداري، بغرض الكشف عن ملابسات القضية، وترتيب المسؤوليات التأديبية والقضائية اللازمة في حالة ثبوت التجاوزات. وفي خطوة موازية، أصدرت المديرية العامة للأمن الوطني قراراً يقضي بتوقيف الموظف مؤقتاً عن العمل، انسجاماً مع النظام الأساسي لموظفي الأمن الوطني، وذلك حتى انتهاء البحث وإتمام الإجراءات القانونية.', 'size': 5}, {'id': '102', 'title': 'ولاية أمن مراكش تفتح بحثا إداريا وقضائيا في تجاوزات منسوبة لضابط أمن بفرقة السير الطرقي', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/society/410753.html', 'summary': 'ولاية أمن مراكش تفتح بحثا إداريا وقضائيا في تجاوزات منسوبة لضابط أمن بفرقة السير الطرقي. فتحت ولاية أمن مراكش بحثا ، يوم الجمعة 08 غشت الجاري، وذلك لتحديد التجاوزات المهنية والإخلالات الوظيفية المنسوبة لموظف شرطة برتبة ضابط أمن يعمل بفرقة', 'size': 5}, {'id': '133', 'title': 'مراكش.. توقيف ضابط أمن عن العمل بسبب شبهة رشوة', 'source': 'kifache.com', 'link': 'https://kifache.com/%d9%85%d8%b1%d8%a7%d9%83%d8%b4-%d8%aa%d9%88%d9%82%d9%8a%d9%81-%d8%b6%d8%a7%d8%a8%d8%b7-%d8%a3%d9%85%d9%86-%d8%b9%d9%86-%d8%a7%d9%84%d8%b9%d9%85%d9%84-%d8%a8%d8%b3%d8%a8%d8%a8-%d8%b4%d8%a8%d9%87/', 'summary': 'مراكش.. توقيف ضابط أمن عن العمل بسبب شبهة رشوة. فتحت ولاية أمن مراكش بحثا، أمس الجمعة (8 غشت)، لتحديد التجاوزات المهنية والإخلالات الوظيفية المنسوبة لموظف شرطة برتبة ضابط أمن يعمل بفرقة السير الطرقي بنفس المدينة. وكانت مصالح الأمن الوطني تعاطت بجدية كبيرة مع تسجيل متداول على مواقع التواصل الاجتماعي، يوثق لقيام موظف الشرطة بمحاولة استخلاص مبلغ مالي من سائق سيارة مخالف، لا يطابق المنصوص', 'size': 5}, {'id': '179', 'title': 'التحقيق مع شرطي في مراكش بشبهة تلقيه رشوة', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a7%d9%84%d8%aa%d8%ad%d9%82%d9%8a%d9%82-%d9%85%d8%b9-%d8%b4%d8%b1%d8%b7%d9%8a-%d9%81%d9%8a-%d9%85%d8%b1%d8%a7%d9%83%d8%b4-%d8%a8%d8%b4%d8%a8%d9%87%d8%a9-%d8%aa%d9%84%d9%82%d9%8a%d9%87-%d8%b1%d8%b4/', 'summary': 'التحقيق مع شرطي في مراكش بشبهة تلقيه رشوة. فتحت ولاية أمن مراكش بحثا، الجمعة، وذلك لتحديد التجاوزات المهنية والإخلالات الوظيفية المنسوبة لموظف شرطة برتبة ضابط أمن يعمل بفرقة السير الطرقي بنفس المدينة. وكانت مصالح الأمن الوطني قد تعاطت بجدية كبيرة مع تسجيل متداول على مواقع التواصل الاجتماعي، يوثق لقيام موظف الشرطة بمحاولة استخلاص مبلغ مالي من سائق سيارة مخالف، لا يطابق ذلك  التحقيق مع شرطي في مراكش بشبهة تلقيه رشوة     .', 'size': 5}, {'id': '227', 'title': 'عاجل.. إحالة ضابط الأمن في شبهة طلب رشوة على التحقيق', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/225765/', 'summary': 'عاجل.. إحالة ضابط الأمن في شبهة طلب رشوة على التحقيق. فتحت ولاية أمن مراكش بحثا ، يوم الجمعة 08 غشت الجاري، وذلك لتحديد التجاوزات المهنية والإخلالات الوظيفية المنسوبة لموظف شرطة برتبة ضابط أمن يعمل بفرقة السير الطرقي بنفس المدينة. وكانت مصالح الأمن الوطني قد تعاطت بجدية كبيرة مع تسجيل متداول على مواقع التواصل الاجتماعي، يوثق لقيام موظف الشرطة بمحاولة استخلاص مبلغ مالي من سائق سيارة', 'size': 6}], 'main_title': 'عاجل.. إحالة ضابط الأمن في شبهة طلب رشوة على التحقيق'}, {'community_id': '8', 'articles': [{'id': '93', 'title': 'العصبة الاحترافية تؤجل انطلاق البطولة الوطنية لكرة القدم', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/sport/footmarocain/410744.html', 'summary': 'العصبة الاحترافية تؤجل انطلاق البطولة الوطنية لكرة القدم. أعلنت العصبة الوطنية لكرة القدم الاحترافية عن تأجيل موعد انطلاق منافسات البطولة الوطنية في قسميها الأول والثاني للموسم الرياضي 2025-2026، وذلك إلى يوم 12 شتنبر', 'size': 4}, {'id': '184', 'title': 'العصبة الوطنية تؤجل انطلاق البطولة الاحترافية', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a7%d9%84%d8%b9%d8%b5%d8%a8%d8%a9-%d8%a7%d9%84%d9%88%d8%b7%d9%86%d9%8a%d8%a9-%d8%aa%d8%a4%d8%ac%d9%84-%d8%a7%d9%86%d8%b7%d9%84%d8%a7%d9%82-%d8%a7%d9%84%d8%a8%d8%b7%d9%88%d9%84%d8%a9-%d8%a7%d9%84/', 'summary': 'العصبة الوطنية تؤجل انطلاق البطولة الاحترافية. أعلنت العصبة الوطنية لكرة القدم الاحترافية، في بلاغ صادر عقب اجتماع عقد الجمعة، بين رئيس العصبة ورؤساء الأندية المحترفة، عن حزمة من القرارات التي تهدف إلى ضمان انطلاقة متوازنة ومنافسة نزيهة خلال الموسم الكروي الجديد. وجاء في البلاغ أن العصبة قررت تأجيل انطلاق البطولة الاحترافية بقسميها الأول والثاني إلى غاية يوم الجمعة 12 شتنبر  العصبة الوطنية تؤجل انطلاق البطولة الاحترافية     .', 'size': 3}, {'id': '205', 'title': 'العصبة الوطنية تعلن عن تأجيل موعد انطلاق البطولة الاحترافية', 'source': 'machahid24.com', 'link': 'https://machahid24.com/sport/472057.html', 'summary': 'العصبة الوطنية تعلن عن تأجيل موعد انطلاق البطولة الاحترافية. أعلنت العصبة الوطنية لكرة القدم الاحترافية في بلاغ صادر اليوم الجمعة عن تأجيل انطلاق البطولة الاحترافية بقسميها الأول والثاني إلى غاية الجمعة 12 شتنبر 2025، بالإضافة إلى تمديد فترة الانتقالات الصيفية إلى غاية الـ25 غشت 2025، وفقا للضوابط المعمول بها في لوائح الانتقالات المعتمدة. وجاء في بلاغ العصبة، أنه تبعا للاجتماع المنعقد يومه الجمعة 8 …', 'size': 3}, {'id': '253', 'title': 'تأجيل انطلاق البطولة الوطنية وتمديد فترة الانتقالات الصيفية', 'source': 'www.alalam.ma', 'link': 'https://www.alalam.ma/تأجيل-انطلاق-البطولة-الوطنية-وتمديد-فترة-الانتقالات-الصيفية_a29094.html', 'summary': 'تأجيل انطلاق البطولة الوطنية وتمديد فترة الانتقالات الصيفية.  قررت العصبة الوطنية لكرة القدم الاحترافية، تأجيل انطلاق البطولة الاحترافية بقسميها الأول والثاني إلى غاية 12 شتنبر 2025...', 'size': 2}], 'main_title': 'العصبة الاحترافية تؤجل انطلاق البطولة الوطنية لكرة القدم'}, {'community_id': '5', 'articles': [{'id': '174', 'title': 'من 72 إلى 65.8%.. حكومة أخنوش تعد بتحول مالي وتنموي في 2026', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1091669.html', 'summary': 'من 72 إلى 65.8%.. حكومة أخنوش تعد بتحول مالي وتنموي في 2026. بعدما تجاوزت 72 في المئة سنة 2020.. حكومة أخنوش تراهن على خفض نسبة المديونية في سنة 2026 إلى 65.8% كشف منشور رئيس الحكومة بخصوص مشروع قانون مالية 2026، عن مجموعة من أهداف الحكومة التي يترأسها عزيز أخنوش بخصوص التوازنات الماكرواقتصادية. وعلى رأس أهداف الحكومة في السنة المقبلة، تقليص نسبة المديونية في سنة 2026 إلى 65.8%، ظهرت المقالة من 72 إلى 65.8%.. حكومة أخنوش تعد بتحول مالي وتنموي في 2026  .', 'size': 2}, {'id': '320', 'title': 'أخنوش يدعو الوزارات لـ”التقشف” في نفقات الحفلات والدراسات واقتناء السيارات', 'source': 'www.alakhbar.press.ma', 'link': 'https://www.alakhbar.press.ma/%d8%a3%d8%ae%d9%86%d9%88%d8%b4-%d9%8a%d8%af%d8%b9%d9%88-%d8%a7%d9%84%d9%88%d8%b2%d8%a7%d8%b1%d8%a7%d8%aa-%d9%84%d9%80%d8%a7%d9%84%d8%aa%d9%82%d8%b4%d9%81-%d9%81%d9%8a-%d9%86%d9%81-270875.html', 'summary': 'أخنوش يدعو الوزارات لـ”التقشف” في نفقات الحفلات والدراسات واقتناء السيارات. جاء مشروع قانون مالية سنة 2026، الذي كشف رئيس الحكومة عزيز أخنوش، اليوم الجمعة، في منشور له، متناغما مع التوجيهات الملكية السامية الواردة في خطاب العرش الأخير، خاصة ما يتعلق بدعوة جلالته لإعداد جيل جديد من برامج التنمية الترابية. هذا وأكد أخنوش في المنشور الصادر اليوم الجمعة، أن ميزانية 2026 ستشكل محطة أساسية لإحداث نقلة …  أخنوش يدعو الوزارات لـ”التقشف” في نفقات الحفلات والدراسات واقتناء السيارات     .', 'size': 2}], 'main_title': 'من 72 إلى 65.8%.. حكومة أخنوش تعد بتحول مالي وتنموي في 2026'}, {'community_id': '7', 'articles': [{'id': '180', 'title': '71 بالمائة من المقاولات الصناعية تعتبر مناخ الأعمال "عاديا" خلال الفصل الثاني من 2025', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/71-%d8%a8%d8%a7%d9%84%d9%85%d8%a7%d8%a6%d8%a9-%d9%85%d9%86-%d8%a7%d9%84%d9%85%d9%82%d8%a7%d9%88%d9%84%d8%a7%d8%aa-%d8%a7%d9%84%d8%b5%d9%86%d8%a7%d8%b9%d9%8a%d8%a9-%d8%aa%d8%b9%d8%aa%d8%a8%d8%b1-%d9%85/', 'summary': '71 بالمائة من المقاولات الصناعية تعتبر مناخ الأعمال "عاديا" خلال الفصل الثاني من 2025. أفاد بنك المغرب بأن 71 بالمائة من الصناعيين اعتبروا مناخ الأعمال في القطاع الصناعي "عاديا"، مقابل 16 بالمائة وصفوه بـ"غير الملائم" خلال الفصل الثاني من سنة 2025. وأوضح بنك المغرب في نشرته الأخيرة حول نتائج البحث الفصلي للظرفية، أن هذه النسب بلغت على التوالي 89 بالمائة و11 بالمائة في "قطاع النسيج والجلد"، و75 بالمائة و10  71 بالمائة من المقاولات الصناعية تعتبر مناخ الأعمال "عاديا" خلال الفصل الثاني من 2025     .', 'size': 2}, {'id': '242', 'title': 'بنك المغرب: 71 بالمائة من المقاولات تعتبر مناخ الأعمال عاديا', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a8%d9%86%d9%83-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-71-%d8%a8%d8%a7%d9%84%d9%85%d8%a7%d8%a6%d8%a9-%d9%85%d9%86-%d8%a7%d9%84%d9%85%d9%82%d8%a7%d9%88%d9%84%d8%a7%d8%aa-%d8%aa%d8%b9%d8%aa%d8%a8/', 'summary': 'بنك المغرب: 71 بالمائة من المقاولات تعتبر مناخ الأعمال عاديا. كشف بنك المغرب بأن 71 بالمائة من الصناعيين اعتبروا مناخ الأعمال في القطاع الصناعي “عاديا”، مقابل 16 بالمائة وصفوه بـ”غير الملائم” خلال الفصل الثاني من سنة 2025. وأضاف بنك المغرب في نشرته الأخيرة حول نتائج البحث الفصلي للظرفية، أن هذه النسب بلغت على التوالي 89 بالمائة و11 بالمائة في “قطاع النسيج والجلد”، و75 …  بنك المغرب: 71 بالمائة من المقاولات تعتبر مناخ الأعمال عاديا     .', 'size': 2}], 'main_title': '71 بالمائة من المقاولات الصناعية تعتبر مناخ الأعمال "عاديا" خلال الفصل الثاني من 2025'}, {'community_id': '9', 'articles': [{'id': '187', 'title': 'توقيف ضابط شرطة بمراكش ظهر في شريط فيديو يحاول إستخلاص مخالفة بطريقة غير قانونية', 'source': 'rue20.com', 'link': 'https://rue20.com/927418.html', 'summary': 'توقيف ضابط شرطة بمراكش ظهر في شريط فيديو يحاول إستخلاص مخالفة بطريقة غير قانونية. . مراكش فتحت ولاية أمن مراكش بحثا ، يوم الجمعة 08 غشت الجاري، وذلك لتحديد التجاوزات المهنية والإخلالات الوظيفية المنسوبة لموظف شرطة برتبة ضابط أمن يعمل بفرقة السير الطرقي بنفس المدينة. وكانت مصالح الأمن الوطني قد تعاطت بجدية كبيرة مع تسجيل متداول على مواقع التواصل الاجتماعي، يوثق لقيام موظف الشرطة بمحاولة استخلاص مبلغ مالي الخبر توقيف ضابط شرطة بمراكش ظهر في شريط فيديو يحاول إستخلاص مخالفة بطريقة غير قانونية  .', 'size': 4}, {'id': '243', 'title': 'فتح بحث قضائي مع ضابط شرطة بمراكش بعد تداول فيديو يوثق شبهة رشوة', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d9%81%d8%aa%d8%ad-%d8%a8%d8%ad%d8%ab-%d9%82%d8%b6%d8%a7%d8%a6%d9%8a-%d9%85%d8%b9-%d8%b6%d8%a7%d8%a8%d8%b7-%d8%b4%d8%b1%d8%b7%d8%a9-%d8%a8%d9%85%d8%b1%d8%a7%d9%83%d8%b4-%d8%a8%d8%b9%d8%af-%d8%aa%d8%af/', 'summary': 'فتح بحث قضائي مع ضابط شرطة بمراكش بعد تداول فيديو يوثق شبهة رشوة. فتحت ولاية أمن مراكش بحثا، يوم أمس الجمعة، وذلك لتحديد التجاوزات المهنية والإخلالات الوظيفية المنسوبة لموظف شرطة برتبة ضابط أمن يعمل بفرقة السير الطرقي بنفس المدينة. وكشفت مصادر أمنية، أن مصالح الأمن الوطني، كانت قد تعاطت بجدية كبيرة مع تسجيل متداول على مواقع التواصل الاجتماعي، يوثق لقيام موظف الشرطة بمحاولة استخلاص مبلغ مالي …  فتح بحث قضائي مع ضابط شرطة بمراكش بعد تداول فيديو يوثق شبهة رشوة     .', 'size': 2}, {'id': '342', 'title': 'رشوة تجر ضابطا أمنيا بمراكش للتحقيق', 'source': 'assabah.ma', 'link': 'https://assabah.ma/864774.html', 'summary': 'رشوة تجر ضابطا أمنيا بمراكش للتحقيق. فتحت ولاية أمن مراكش بحثا ، يوم الجمعة 08 غشت الجاري وذلك لتحديد التجاوزات المهنية والإخلالات الوظيفية المنسوبة لموظف شرطة برتبة ضابط أمن يعمل بفرقة السير الطرقي بنفس المدينة. وكانت مصالح الأمن الوطني قد تعاطت بجدية كبيرة مع تسجيل متداول على مواقع التواصل الاجتماعي، يوثقأكمل القراءة » المقالة رشوة تجر ضابطا أمنيا بمراكش للتحقيق  .', 'size': 2}], 'main_title': 'توقيف ضابط شرطة بمراكش ظهر في شريط فيديو يحاول إستخلاص مخالفة بطريقة غير قانونية'}, {'community_id': '10', 'articles': [{'id': '191', 'title': 'أخنوش يؤكد استقرار أسعار البوتان والكهرباء في 2026 والشروع في إصلاح التقاعد ابتداءً من شتنبر', 'source': 'rue20.com', 'link': 'https://rue20.com/927392.html', 'summary': 'أخنوش يؤكد استقرار أسعار البوتان والكهرباء في 2026 والشروع في إصلاح التقاعد ابتداءً من شتنبر.  | الرباط أكد عزيز أخنوش، رئيس الحكومة، في رسالة تأطيرية لمشروع قانون المالية 2026 ، إلى الوزراء، أن سنة 2026 تعتبر منعطفا أساسيا في منظور تدخل الدولة في المجال الاجتماعي، وذلك بالانتقال إلى الأثر الاجتماعي الموجه والفعال في تنزيل السياسات والبرامج الاجتماعية، مشددا على ان بلادنا تشهد انتقالا تدريجيا نحو مقاربة فعالة للاستهداف الخبر أخنوش يؤكد استقرار أسعار البوتان والكهرباء في 2026 والشروع في إصلاح التقاعد ابتداءً من شتنبر  .', 'size': 2}, {'id': '394', 'title': 'الحكومة تؤكد استقرار أسعار البوتان والكهرباء في 2026', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d8%a7%d9%84%d8%ad%d9%83%d9%88%d9%85%d8%a9-%d8%aa%d8%a4%d9%83%d8%af-%d8%a7%d8%b3%d8%aa%d9%82%d8%b1%d8%a7%d8%b1-%d8%a3%d8%b3%d8%b9%d8%a7%d8%b1-%d8%a7%d9%84%d8%a8%d9%88%d8%aa%d8%a7%d9%86-%d9%88%d8%a7/', 'summary': 'الحكومة تؤكد استقرار أسعار البوتان والكهرباء في 2026. - متابعات أكد عزيز أخنوش، رئيس الحكومة، في رسالة تأطيرية لمشروع قانون المالية 2026 ، إلى الوزراء، أن سنة 2026 تعتبر منعطفا أساسيا في منظور تدخل الدولة في المجال...  الحكومة تؤكد استقرار أسعار البوتان والكهرباء في 2026     .', 'size': 2}], 'main_title': 'أخنوش يؤكد استقرار أسعار البوتان والكهرباء في 2026 والشروع في إصلاح التقاعد ابتداءً من شتنبر'}, {'community_id': '3', 'articles': [{'id': '192', 'title': 'وفاة عامل إثر انهيار في منجم الفضة بإميضر', 'source': 'rue20.com', 'link': 'https://rue20.com/927389.html', 'summary': 'وفاة عامل إثر انهيار في منجم الفضة بإميضر.  | متابعة شهد منجم الفضة الواقع بجماعة إميضر، التابعة لإقليم تنغير، بعد زوال اليوم الجمعة 8 غشت، حادث انهيار داخل أحد الأنفاق، أسفر عن مصرع عامل تحت الأنقاض. وبحسب مصادر محلية، فقد تمكنت فرق الإنقاذ من انتشال أحد العاملين وهو على قيد الحياة، حيث تم نقله على وجه السرعة إلى المستشفى في حالة الخبر وفاة عامل إثر انهيار في منجم الفضة بإميضر  .', 'size': 2}, {'id': '339', 'title': 'حادث مأساوي بإقليم تنغير.. وفاة عامل في منجم للفضة وإصابة آخر', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%ad%d8%a7%d8%af%d8%ab-%d9%85%d8%a3%d8%b3%d8%a7%d9%88%d9%8a-%d8%a8%d8%a5%d9%82%d9%84%d9%8a%d9%85-%d8%aa%d9%86%d8%ba%d9%8a%d8%b1-%d9%88%d9%81%d8%a7%d8%a9-%d8%b9%d8%a7%d9%85%d9%84-%d9%81%d9%8a/', 'summary': 'حادث مأساوي بإقليم تنغير.. وفاة عامل في منجم للفضة وإصابة آخر. لقي عامل منجمي مصرعه وأصيب آخر إصابات بليغة، يوم أمس الجمعة (8 غشت)، إثر انهيار بئر معدني بمنجم للفضة بجماعة إميضر في إقليم تنغير. وحسب مصادر محلية، كان العاملان يباشران مهام التنقيب داخل المنجم حين وقع الانهيار المفاجئ، مما أدى إلى إصابة أحدهما بجروح خطيرة وكسر بليغ، فيما لقي الآخر حتفه في الحادث. وتدخلت فرق', 'size': 2}], 'main_title': 'وفاة عامل إثر انهيار في منجم الفضة بإميضر'}, {'community_id': '0', 'articles': [{'id': '219', 'title': 'بالفيديو.. اندلاع حريق في مسجد قرطبة بإسبانيا', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d8%a8%d8%a7%d9%84%d9%81%d9%8a%d8%af%d9%8a%d9%88-%d8%a7%d9%86%d8%af%d9%84%d8%a7%d8%b9-%d8%ad%d8%b1%d9%8a%d9%82-%d9%81%d9%8a-%d9%85%d8%b3%d8%ac%d8%af-%d9%82%d8%b1%d8%b7%d8%a8%d8%a9-%d8%a8%d8%a5%d8%b3/', 'summary': 'بالفيديو.. اندلاع حريق في مسجد قرطبة بإسبانيا. اندلع مساء اليوم الجمعة حريق في مسجد قرطبة بإسبانيا، وفق ما ذكرته صحف إسبانية. ونشر العديد من السكان مقاطع فيديو تظهر ألسنة اللهب  بالفيديو.. اندلاع حريق في مسجد قرطبة بإسبانيا     .', 'size': 2}, {'id': '237', 'title': 'التغلب على حريق اندلع بالمسجد الكبير بقرطبة', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%a7%d9%84%d8%aa%d8%ba%d9%84%d8%a8-%d8%b9%d9%84%d9%89-%d8%ad%d8%b1%d9%8a%d9%82-%d8%a7%d9%86%d8%af%d9%84%d8%b9-%d8%a8%d8%a7%d9%84%d9%85%d8%b3%d8%ac%d8%af-%d8%a7%d9%84%d9%83%d8%a8%d9%8a%d8%b1-%d8%a8/', 'summary': 'التغلب على حريق اندلع بالمسجد الكبير بقرطبة. المساء اليوم: اندلع مساء اليوم الجمعة حريق في مسجد قرطبة بإسبانيا، والذي تم التغلب عليه من طرف مصالح الإطفاء. ونشر العديد من السكان مقاطع فيديو تظهر ألسنة اللهب وهي تتصاعد من هذا الموقع المُدرج ضمن', 'size': 2}], 'main_title': 'بالفيديو.. اندلاع حريق في مسجد قرطبة بإسبانيا'}, {'community_id': '1', 'articles': [{'id': '326', 'title': 'دوري أبطال إفريقيا .. نهضة بركان والجيش الملكي يتعرفان على خصميهما في الدور التمهيدي', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/sport/footmarocain/410786.html', 'summary': 'دوري أبطال إفريقيا .. نهضة بركان والجيش الملكي يتعرفان على خصميهما في الدور التمهيدي. يواجه فريق نهضة بركان نظيره أسكو دي كارا الطوغولي، فيما يلاقي الجيش الملكي ريال دي بانجول الغامبي، في الدور التمهيدي الأول لدوري أبطال إفريقيا لكرة', 'size': 2}, {'id': '337', 'title': 'الدور التمهيدي. الجيش الملكي ونهضة بركان يتعرفان على منافسيهما في دوري أبطال إفريقيا', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a7%d9%84%d8%af%d9%88%d8%b1-%d8%a7%d9%84%d8%aa%d9%85%d9%87%d9%8a%d8%af%d9%8a-%d8%a7%d9%84%d8%ac%d9%8a%d8%b4-%d8%a7%d9%84%d9%85%d9%84%d9%83%d9%8a-%d9%88%d9%86%d9%87%d8%b6%d8%a9-%d8%a8%d8%b1%d9%83/', 'summary': 'الدور التمهيدي. الجيش الملكي ونهضة بركان يتعرفان على منافسيهما في دوري أبطال إفريقيا. أسفرت قرعة الدور التمهيدي الأول لدوري أبطال إفريقيا عن مواجهة الجيش الملكي لفريق ريال بانجول الغامبي، بينما يلتقي نهضة بركان مع أسكو كارا التوغولي. وسيخوض الجيش الملكي مباراة الذهاب خارج الديار في غامبيا أحد أيام 19 أو 20 أو 21 شتنبر الجاري، على أن تُقام مواجهة الإياب بالمغرب في 26 أو 27 أو 28 من', 'size': 2}], 'main_title': 'دوري أبطال إفريقيا .. نهضة بركان والجيش الملكي يتعرفان على خصميهما في الدور التمهيدي'}, {'community_id': '2', 'articles': [{'id': '338', 'title': 'حيازة وترويج مخدر الكوكايين.. توقيف ستة أشخاص بتطوان', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%ad%d9%8a%d8%a7%d8%b2%d8%a9-%d9%88%d8%aa%d8%b1%d9%88%d9%8a%d8%ac-%d9%85%d8%ae%d8%af%d8%b1-%d8%a7%d9%84%d9%83%d9%88%d9%83%d8%a7%d9%8a%d9%8a%d9%86-%d8%aa%d9%88%d9%82%d9%8a%d9%81-%d8%b3%d8%aa%d8%a9/', 'summary': 'حيازة وترويج مخدر الكوكايين.. توقيف ستة أشخاص بتطوان. تمكنت عناصر الشرطة القضائية بولاية أمن تطوان بتنسيق مع مصالح المديرية العامة لمراقبة التراب الوطني، في الساعات الأولى من صباح اليوم السبت (9 غشت)، من توقيف ستة أشخاص من بينهم سيدتان، وذلك للاشتباه في تورطهم في قضية تتعلق بحيازة وترويج مخدر الكوكايين. وتم تنفيذ هذه العملية الأمنية بتنسيق مع عناصر الدرك الملكي بضواحي مدينة وزان،', 'size': 2}, {'id': '402', 'title': 'بتنسيق مع الديستي: أمن تطوان يطيح بستة أشخاص بينهم سيدتان بحيازة وترويج الكوكايين', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/225768/', 'summary': 'بتنسيق مع الديستي: أمن تطوان يطيح بستة أشخاص بينهم سيدتان بحيازة وترويج الكوكايين. تمكنت عناصر الشرطة القضائية بولاية أمن تطوان بتنسيق مع مصالح المديرية العامة لمراقبة التراب الوطني، في الساعات الأولى من صباح اليوم السبت 9 غشت الجاري، من توقيف ستة أشخاص من بينهم سيدتان، وذلك للاشتباه في تورطهم في قضية تتعلق بحيازة وترويج مخدر الكوكايين. وقد تم تنفيذ هذه العملية الأمنية بتنسيق مع عناصر الدرك الملكي بضواحي', 'size': 2}], 'main_title': 'حيازة وترويج مخدر الكوكايين.. توقيف ستة أشخاص بتطوان'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    