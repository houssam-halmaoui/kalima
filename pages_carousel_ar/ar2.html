<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 20/07/2025 - 18h27</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '3', 'articles': [{'id': '84', 'title': 'وفاة "الأمير النائم" الوليد بن خالد بن طلال بعد 20 عاماً من الغيبوبة', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/world/409597.html', 'summary': 'وفاة "الأمير النائم" الوليد بن خالد بن طلال بعد 20 عاماً من الغيبوبة. أعلن الأمير خالد بن طلال بن عبد العزيز آل سعود، عن وفاة نجله الأمير الوليد بن خالد بن طلال، الشهير بلقب "الأمير النائم"، بعد غيبوبة', 'size': 2}, {'id': '219', 'title': 'وفاة الأمير النائم بعد 20 سنة من الغيبوية', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d9%88%d9%81%d8%a7%d8%a9-%d8%a7%d9%84%d8%a3%d9%85%d9%8a%d8%b1-%d8%a7%d9%84%d9%86%d8%a7%d8%a6%d9%85-%d8%a8%d8%b9%d8%af-20-%d8%b3%d9%86%d8%a9-%d9%85%d9%86-%d8%a7%d9%84%d8%ba%d9%8a%d8%a8%d9%88%d9%8a/', 'summary': 'وفاة الأمير النائم بعد 20 سنة من الغيبوية. أُعلن اليوم السبت عن وفاة الأمير الوليد بن خالد بن طلال آل سعود، المعروف إعلاميا بلقب “الأمير النائم”، وذلك بعد صراع طويل مع الغيبوبة استمر لمدة 20 عاما. وقد جاءت وفاته إثر تعرضه لحادث مروري مروع في عام 2005. وأعلن الأمير خالد بن طلال بن عبد العزيز، والد الأمير الراحل، الخبر عبر حسابه …  وفاة الأمير النائم بعد 20 سنة من الغيبوية     .', 'size': 2}], 'main_title': 'وفاة "الأمير النائم" الوليد بن خالد بن طلال بعد 20 عاماً من الغيبوبة'}, {'community_id': '11', 'articles': [{'id': '86', 'title': 'أخنوش يحث المصالح الحكومية على الانخراط الإيجابي والفعال في تنزيل آلية العقوبات البديلة', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/409598.html', 'summary': 'أخنوش يحث المصالح الحكومية على الانخراط الإيجابي والفعال في تنزيل آلية العقوبات البديلة. حث رئيس الحكومة عزيز أخنوش، في منشور له، الوزراء والوزراء المنتدبين وكتاب الدولة والمندوبين الساميين والمندوب العام، على تحسيس كافة مصالحهم المركزية واللاممركزة والمؤسسات العمومية', 'size': 3}, {'id': '111', 'title': 'لتسريع تفعيل العقوبات البديلة.. رئيس الحكومة يستنفر الوزراء والمصالح الحكومية', 'source': 'kifache.com', 'link': 'https://kifache.com/%d9%84%d8%aa%d8%b3%d8%b1%d9%8a%d8%b9-%d8%aa%d9%81%d8%b9%d9%8a%d9%84-%d8%a7%d9%84%d8%b9%d9%82%d9%88%d8%a8%d8%a7%d8%aa-%d8%a7%d9%84%d8%a8%d8%af%d9%8a%d9%84%d8%a9-%d8%b1%d8%a6%d9%8a%d8%b3-%d8%a7%d9%84/', 'summary': 'لتسريع تفعيل العقوبات البديلة.. رئيس الحكومة يستنفر الوزراء والمصالح الحكومية. استنفر رئيس الحكومة عزيز أخنوش، في منشور له بشأن تنزيل القانون رقم 43.22 المتعلق بالعقوبات البديلة، الوزراء والوزراء المنتدبين وكتاب الدولة والمندوبين الساميين والمندوب العام، داعيا إياهم إلى تحسيس كافة مصالحهم المركزية واللاممركزة والمؤسسات العمومية الخاضعة لوصايتهم بأهمية القانون. وحث رئيس الحكومة المسؤولين المعنيين، على الانخراط الإيجابي والفعال في تنزيله. والتفاعل الإيجابي مع مقترحات ومبادرات', 'size': 4}, {'id': '115', 'title': 'أخنوش يدعو الوزراء والمسؤولين إلى التسريع بتنزيل قانون العقوبات البديلة', 'source': 'assabah.ma', 'link': 'https://assabah.ma/860377.html', 'summary': 'أخنوش يدعو الوزراء والمسؤولين إلى التسريع بتنزيل قانون العقوبات البديلة. دعا رئيس الحكومة، عزيز أخنوش، الوزراء والوزراء المنتدبين وكتاب الدولة والمندوبين الساميين والمندوب العام، في منشور أصدره بشأن تنزيل القانون رقم 43.22 المتعلق بالعقوبات البديلة، إلى تحسيس كافة مصالحهم المركزية واللاممركزة والمؤسسات العمومية الخاضعة لوصايتهم بأهمية هذا القانون، مع الانخراط الإيجابي والفعال في تنزيله. وحثهم على التفاعلأكمل القراءة » المقالة أخنوش يدعو الوزراء والمسؤولين إلى التسريع بتنزيل قانون العقوبات البديلة  .', 'size': 2}, {'id': '158', 'title': 'رئيس الحكومة يستنفر القطاعات الحكومية لتسريع تنزيل قانون العقوبات البديلة (وثيقة)', 'source': 'rue20.com', 'link': 'https://rue20.com/921806.html', 'summary': 'رئيس الحكومة يستنفر القطاعات الحكومية لتسريع تنزيل قانون العقوبات البديلة (وثيقة). زنق20ا الرباط شدد رئيس الحكومة، عزيز أخنوش، على ضرورة الإسراع في استكمال الإجراءات المتعلقة بتفعيل آلية العقوبات البديلة، داعيًا إلى تعبئة الموارد والوسائل اللازمة لتمكين المندوبية العامة لإدارة السجون وإعادة الإدماج من أداء مهامها في هذا الورش الحيوي على النحو الأمثل. وجاء ذلك ضمن منشور رسمي وجهه أخنوش إلى الوزراء، والوزراء المنتدبين، وكتاب الدولة، والمندوبين الخبر رئيس الحكومة يستنفر القطاعات الحكومية لتسريع تنزيل قانون العقوبات البديلة (وثيقة)  .', 'size': 3}], 'main_title': 'لتسريع تفعيل العقوبات البديلة.. رئيس الحكومة يستنفر الوزراء والمصالح الحكومية'}, {'community_id': '4', 'articles': [{'id': '96', 'title': 'السعدي ينتقد ركوب بنعبد الله على مطالب ساكنة "آيت بوكماز" والخطاب السياسي المتدني', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/politic/409609.html', 'summary': 'السعدي ينتقد ركوب بنعبد الله على مطالب ساكنة "آيت بوكماز" والخطاب السياسي المتدني. وجه لحسن السعدي رئيس الفيدرالية الوطنية للشبيبة التجمعية، وكاتب الدولة المكلف بالصناعة التقليدية والاقتصاد الاجتماعي والتضامني، اليوم السبت بمدينة الناظور، سهام انتقاده للأمين العام لحزب', 'size': 2}, {'id': '109', 'title': 'السعدي: محاولة بنعبد الله للركوب على قضية آيت بوكماز سلوك بئيس وخطاب ابن كيران طافح بالإساءة', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a7%d9%84%d8%b3%d8%b9%d8%af%d9%8a-%d9%85%d8%ad%d8%a7%d9%88%d9%84%d8%a9-%d8%a8%d9%86%d8%b9%d8%a8%d8%af-%d8%a7%d9%84%d9%84%d9%87-%d9%84%d9%84%d8%b1%d9%83%d9%88%d8%a8-%d8%b9%d9%84%d9%89-%d9%82%d8%b6/', 'summary': 'السعدي: محاولة بنعبد الله للركوب على قضية آيت بوكماز سلوك بئيس وخطاب ابن كيران طافح بالإساءة. انتقد لحسن السعدي، رئيس الفيدرالية الوطنية للشبيبة التجمعية، أمس السبت (19 يوليوز)، بمدينة الناظور، محاولة محمد نبيل بنعبد الله، الأمين العام لحزب التقدم والاشتراكية، للركوب على المطالب الاجتماعية لساكنة آيت بوكماز، معبرا عن أسفه لما آل إليه الخطاب السياسي لبعض مكونات اليسار من بؤس سياسي. وندد السعدي في كلمته خلال لقاء جهوي نظمته الشبيبة التجمعية', 'size': 2}], 'main_title': 'السعدي ينتقد ركوب بنعبد الله على مطالب ساكنة "آيت بوكماز" والخطاب السياسي المتدني'}, {'community_id': '9', 'articles': [{'id': '102', 'title': 'زلزالان شديدان قبالة أقصى الشرق الروسي وتحذير من تسونامي', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/world/409615.html', 'summary': 'زلزالان شديدان قبالة أقصى الشرق الروسي وتحذير من تسونامي. وقع زلزالان بقوة 6,7 و7,4 درجات، اليوم الأحد، قبالة سواحل كامتشاتكا في أقصى الشرق الروسي، ما أدى إلى إصدار إنذار بوقوع تسونامي، بحسب هيئة المسح', 'size': 2}, {'id': '130', 'title': 'زلزالان عنيفان يهزان “كامتشاتكا” الروسية وإنذار تسونامي يرتفع', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1086727.html', 'summary': 'زلزالان عنيفان يهزان “كامتشاتكا” الروسية وإنذار تسونامي يرتفع. وقع زلزالان بقوة 6,7 و7,4 درجات، اليوم الأحد، ظهرت المقالة زلزالان عنيفان يهزان “كامتشاتكا” الروسية وإنذار تسونامي يرتفع  .', 'size': 3}, {'id': '167', 'title': 'زلزالان قويان يضربان ساحل كامتشاتكا في روسيا وتحذيرات من وقوع تسونامي', 'source': 'machahid24.com', 'link': 'https://machahid24.com/international/470052.html', 'summary': 'زلزالان قويان يضربان ساحل كامتشاتكا في روسيا وتحذيرات من وقوع تسونامي. ضرب زلزالان قويان اليوم الأحد، ساحل جزيرة كامتشاتكا الروسية.', 'size': 2}], 'main_title': 'زلزالان عنيفان يهزان “كامتشاتكا” الروسية وإنذار تسونامي يرتفع'}, {'community_id': '2', 'articles': [{'id': '120', 'title': 'إفريقيا تشهد أكبر تدهور في الأراضي الرطبة عالميا', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/318782/', 'summary': 'إفريقيا تشهد أكبر تدهور في الأراضي الرطبة عالميا. أفاد تقرير حديث أن إفريقيا من المناطق التي تشهد أكبر تدهور في الأراضي الرطبة عالميا في السنوات الأخيرة، على الرغم من اعتماد ملايين الأشخاص في القارة على النظم البيئية للحصول على الغذاء والمياه، ولحمايتهم من الكوارث الطبيعية وتأثيرات تغير المناخ. وذكر تقرير توقعات الأراضي الرطبة العالمية لعام 2025، الصادر عن أمانة اتفاقية الأراضي الرطبة-اتفاقية (رامسار)،', 'size': 2}, {'id': '213', 'title': 'تقرير: إفريقيا تشهد أكبر تدهور في الأراضي الرطبة عالميا', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%aa%d9%82%d8%b1%d9%8a%d8%b1-%d8%a5%d9%81%d8%b1%d9%8a%d9%82%d9%8a%d8%a7-%d8%aa%d8%b4%d9%87%d8%af-%d8%a3%d9%83%d8%a8%d8%b1-%d8%aa%d8%af%d9%87%d9%88%d8%b1-%d9%81%d9%8a-%d8%a7%d9%84%d8%a3%d8%b1%d8%a7/', 'summary': 'تقرير: إفريقيا تشهد أكبر تدهور في الأراضي الرطبة عالميا. أفاد تقرير توقعات الأراضي الرطبة العالمية لعام 2025 الصادر عن أمانة اتفاقية رامسار أن الأراضي الرطبة في إفريقيا تشهد أكبر تدهور عالميًا في السنوات الأخيرة، حيث كانت حالتها سيئة للغاية في عام 2024 مقارنة بمناطق أخرى من العالم. ويأتي هذا التدهور على الرغم من أن ملايين الأفارقة يعتمدون بشكل مباشر على هذه النظم البيئية للحصول …  تقرير: إفريقيا تشهد أكبر تدهور في الأراضي الرطبة عالميا     .', 'size': 2}], 'main_title': 'إفريقيا تشهد أكبر تدهور في الأراضي الرطبة عالميا'}, {'community_id': '8', 'articles': [{'id': '122', 'title': '“الشابة شوشو” في مرمى الانتقادات رغم توضيحات مديرية التعليم', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/318777/', 'summary': '“الشابة شوشو” في مرمى الانتقادات رغم توضيحات مديرية التعليم. أثار ظهور المغنية الشابة شوشو في مقطع فيديو متداول على مواقع التواصل الاجتماعي، جدلا واسعا بعد الأخبار المتداولة حول غناءها في حفل التميز الإقليمي المنظم من طرف المديرية الإقليمية للتربية الوطنية بالفداء مرس السلطان. ورغم إصدار المديرية بلاغا تنفي فيه هذه الأنباء، مؤكدة أن الفقرة الغنائية لم تكن ضمن البرنامج الرسمي للحفل، إلا أن الجدل', 'size': 2}, {'id': '199', 'title': 'مديرية التعليم بالفداء مرس السلطان ترد: لا علاقة لنا بـ”الشابة شوشو” والحفل كان تربويا صرفا', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/224955/', 'summary': 'مديرية التعليم بالفداء مرس السلطان ترد: لا علاقة لنا بـ”الشابة شوشو” والحفل كان تربويا صرفا. بعد الضجة التي أثارها مقطع فيديو متداول، مديرية التعليم بالفداء مرس السلطان تنفي علاقتها بأي “طقوس غير تربوية” وتؤكد أن الحفل كان تكريمًا للتلاميذ المتفوقين بحضور رسمي وإعلامي واسع.', 'size': 2}], 'main_title': '“الشابة شوشو” في مرمى الانتقادات رغم توضيحات مديرية التعليم'}, {'community_id': '10', 'articles': [{'id': '138', 'title': 'صادرات الخيار المغربي تسجل رقما قياسيا.. والعائدات تتجاوز 26 مليون دولار', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1086685.html', 'summary': 'صادرات الخيار المغربي تسجل رقما قياسيا.. والعائدات تتجاوز 26 مليون دولار. يواصل المغرب تعزيز موقعه في الأسواق العالمية لصادرات الخيار، بعدما تجاوز خلال الأشهر العشرة الأولى من الموسم التسويقي الحالي (يوليوز 2024 – أبريل 2025) حجم صادرات السنة الماضية، محققا رقما قياسيا وطنيا جديدا. وصدر المغرب نحو 27.7 ألف طن من الخيار بقيمة بلغت 26.3 مليون دولار، وفقا لما كشفه موقع EatFruit المتخصص في أسواق الفواكه ظهرت المقالة صادرات الخيار المغربي تسجل رقما قياسيا.. والعائدات تتجاوز 26 مليون دولار  .', 'size': 2}, {'id': '355', 'title': 'تصدير الخيار.. منصة دولية تسجل تحقيق المغرب لرقم قياسي', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%aa%d8%b5%d8%af%d9%8a%d8%b1-%d8%a7%d9%84%d8%ae%d9%8a%d8%a7%d8%b1-%d9%85%d9%86%d8%b5%d8%a9-%d8%af%d9%88%d9%84%d9%8a%d8%a9-%d8%aa%d8%b3%d8%ac%d9%84-%d8%aa%d8%ad%d9%82%d9%8a%d9%82-%d8%a7%d9%84%d9%85/', 'summary': 'تصدير الخيار.. منصة دولية تسجل تحقيق المغرب لرقم قياسي. كشفت منصة "EatFruit" أن المغرب يحقق تقدمًا ثابتًا نحو تسجيل رقم قياسي جديد في صادرات الخيار، حيث يظهر نموًا مستمرًا في الشحنات. ووفقًا للمنصة المذكورة، صدر المغرب، خلال الأشهر العشرة الأولى من السنة الحالية، 27.7 ألف طن من الخيار بقيمة 26.3 مليون دولار – متجاوزا حجم العام الماضي ومحققا رقماً وطنياً جديداً. وذكر المصدر ذاته  تصدير الخيار.. منصة دولية تسجل تحقيق المغرب لرقم قياسي     .', 'size': 2}], 'main_title': 'صادرات الخيار المغربي تسجل رقما قياسيا.. والعائدات تتجاوز 26 مليون دولار'}, {'community_id': '1', 'articles': [{'id': '173', 'title': 'إدارة سجن الناظور تكشف حقيقة وفاة أحد السجناء', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/470037.html', 'summary': 'إدارة سجن الناظور تكشف حقيقة وفاة أحد السجناء. أكدت إدارة السجن المحلي بالناظور أن السجين الشاب الذي توفي أمس كان يعاني من مرض عضال واستفاد من كل الخدمات الطبية اللازمة، نافية أن يكون الأمر يتعلق بحالة وفاة غير طبيعية. وقدمت إدارة السجن المحلي بالناظور في بيان، توضيحات حول ما رددته بعض المقالات والتدوينات بخصوص “وفاة غامضة لسجين شاب بالسجن المحلي بالناظور” مبرزة أنه …', 'size': 2}, {'id': '208', 'title': 'إدارة سجن الناظور: وفاة السجين الشاب كانت نتيجة “مرض عضال”', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%a5%d8%af%d8%a7%d8%b1%d8%a9-%d8%b3%d8%ac%d9%86-%d8%a7%d9%84%d9%86%d8%a7%d8%b8%d9%88%d8%b1-%d9%88%d9%81%d8%a7%d8%a9-%d8%a7%d9%84%d8%b3%d8%ac%d9%8a%d9%86-%d8%a7%d9%84%d8%b4%d8%a7%d8%a8-%d9%83%d8%a7/', 'summary': 'إدارة سجن الناظور: وفاة السجين الشاب كانت نتيجة “مرض عضال”. المساء اليوم: قالت إدارة السجن المحلي بالناظور، في بيان لها اليوم السبت، إن السجين الشاب الذي توفي أمس، الجمعة، كان يعاني من مرض عضال واستفاد من كل الخدمات الطبية اللازمة، نافية أن يكون الأمر يتعلق', 'size': 2}], 'main_title': 'إدارة سجن الناظور تكشف حقيقة وفاة أحد السجناء'}, {'community_id': '0', 'articles': [{'id': '176', 'title': 'رئيس الفيفا: المغرب أصبح أحد المراكز العالمية لكرة القدم', 'source': 'machahid24.com', 'link': 'https://machahid24.com/sport/470031.html', 'summary': 'رئيس الفيفا: المغرب أصبح أحد المراكز العالمية لكرة القدم. متابعة أكد رئيس الاتحاد الدولي لكرة القدم (الفيفا)، جياني إنفانتينو، اليوم السبت، أن المغرب أصبح أحد المراكز العالمية لكرة القدم. وعبر إنفانتينو، لدى وصوله اليوم إلى الرباط، عن سعادته بالتواجد في المغرب، مضيفا أنه يتشرف بالقدوم إلى المغرب، “البلد الذي يعشق ويعيش على إيقاعات كرة القدم كل يوم”. وأكد رئيس الفيفا أن المنتخبات المغربية لكرة …', 'size': 2}, {'id': '198', 'title': 'جياني إنفانتينو: المغرب أصبح من المراكز العالمية لكرة القدم', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/224959/', 'summary': 'جياني إنفانتينو: المغرب أصبح من المراكز العالمية لكرة القدم. أكد رئيس الاتحاد الدولي لكرة القدم (الفيفا)، جياني إنفانتينو، اليوم السبت، أن المغرب أصبح أحد المراكز العالمية لكرة القدم. وعبر السيد إنفانتينو، لدى وصوله اليوم إلى الرباط، عن سعادته بالتواجد في المغرب، مضيفا أنه يتشرف بالقدوم إلى المغرب، “البلد الذي يعشق ويعيش على إيقاعات كرة القدم كل يوم”. وأكد رئيس الفيفا أن المنتخبات المغربية لكرة', 'size': 2}], 'main_title': 'رئيس الفيفا: المغرب أصبح أحد المراكز العالمية لكرة القدم'}, {'community_id': '5', 'articles': [{'id': '244', 'title': 'حملات الإغاثة المغربية تستمر بغزة', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d8%ad%d9%85%d9%84%d8%a7%d8%aa-%d8%a7%d9%84%d8%a5%d8%ba%d8%a7%d8%ab%d8%a9-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8%d9%8a%d8%a9-%d8%aa%d8%b3%d8%aa%d9%85%d8%b1-%d8%a8%d8%ba%d8%b2%d8%a9-1596373.html', 'summary': 'حملات الإغاثة المغربية تستمر بغزة. نفذت وكالة بيت مال القدس الشريف، أمس السبت بمخيم البريج شرق غزة، المرحلة الثالثة من حملة الإغاثة الإنسانية المغربية الموجهة للعائلات النازحة الأكثر احتياجا في القطاع، بتمويل من الجمعية المغربية لدعم الإعمار في فلسطين. ووصلت الفرق الميدانية إلى المخيم، رغم الظروف الأمنية الصعبة، لتوصيل المساعدات، يدا بيد، إلى 500 عائلة مستفيدة؛ لتجنيب أفرادها مخاطر التنقل  حملات الإغاثة المغربية تستمر بغزة     - هسبريس جريدة إلكترونية مغربية .', 'size': 2}, {'id': '315', 'title': 'المغرب يواصل إغاثة ساكنة غزة', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/409647.html', 'summary': 'المغرب يواصل إغاثة ساكنة غزة. نفذت وكالة بيت مال القدس الشريف أمس السبت بمخيم البريج شرق غزة المرحلة الثالثة من حملة الإغاثة الإنسانية المغربية الموجهة للعائلات النازحة الأكثر احتياجا في', 'size': 2}, {'id': '348', 'title': 'غزة.. تنفيذ المرحلة الثالثة من حملات الإغاثة المغربية', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%ba%d8%b2%d8%a9-%d8%aa%d9%86%d9%81%d9%8a%d8%b0-%d8%a7%d9%84%d9%85%d8%b1%d8%ad%d9%84%d8%a9-%d8%a7%d9%84%d8%ab%d8%a7%d9%84%d8%ab%d8%a9-%d9%85%d9%86-%d8%ad%d9%85%d9%84%d8%a7%d8%aa-%d8%a7%d9%84%d8%a5/', 'summary': 'غزة.. تنفيذ المرحلة الثالثة من حملات الإغاثة المغربية. نفذت وكالة بيت مال القدس الشريف، أمس السبت، بمخيم البريج شرق غزة المرحلة الثالثة من حملة الإغاثة الإنسانية المغربية الموجهة للعائلات النازحة الأكثر احتياجا في القطاع، بتمويل من الجمعية المغربية لدعم الإعمار في فلسطين. ووصلت الفرق الميدانية إلى المخيم، رغم الظروف الأمنية الصعبة، لتوصيل المساعدات، يدا بيد، إلى 500 عائلة مستفيدة، لتجنيب أفرادها مخاطر التنقل  غزة.. تنفيذ المرحلة الثالثة من حملات الإغاثة المغربية     .', 'size': 3}], 'main_title': 'غزة.. تنفيذ المرحلة الثالثة من حملات الإغاثة المغربية'}, {'community_id': '6', 'articles': [{'id': '320', 'title': 'رواندا.. علماء أفارقة يدعون  إلى الاستلهام من خطب ورسائل جلالة الملك لترسيخ قيم السلم والتعايش المشترك', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%b1%d9%88%d8%a7%d9%86%d8%af%d8%a7-%d8%b9%d9%84%d9%85%d8%a7%d8%a1-%d8%a3%d9%81%d8%a7%d8%b1%d9%82%d8%a9-%d9%8a%d8%af%d8%b9%d9%88%d9%86-%d8%a5%d9%84%d9%89-%d8%a7%d9%84%d8%a7%d8%b3%d8%aa%d9%84%d9%87/', 'summary': 'رواندا.. علماء أفارقة يدعون إلى الاستلهام من خطب ورسائل جلالة الملك لترسيخ قيم السلم والتعايش المشترك. أوصى المشاركون في ندوة علمية دولية نظمتها مؤسسة محمد السادس للعلماء الأفارقة بتعاون مع المجلس الأعلى للشؤون الإسلامية برواندا، أمس السبت (19 يوليوز) بكيغالي، بالاستلهام من خطب ورسائل صاحب الجلالة الملك محمد السادس، أمير المؤمنين، لترسيخ قيم السلم والتعايش المشترك بإفريقيا. ودعوا، في البيان الختامي لهذه الندوة، إلى “اتخاذ توجيهات أمير المؤمنين صاحب الجلالة الملك', 'size': 2}, {'id': '323', 'title': 'الدعوة بكيغالي إلى الاستلهام من خطب ورسائل جلالة الملك لترسيخ قيم السلم والتعايش المشترك بإفريقيا', 'source': 'assabah.ma', 'link': 'https://assabah.ma/860475.html', 'summary': 'الدعوة بكيغالي إلى الاستلهام من خطب ورسائل جلالة الملك لترسيخ قيم السلم والتعايش المشترك بإفريقيا. أوصى المشاركون في ندوة علمية دولية نظمتها مؤسسة محمد السادس للعلماء الأفارقة بتعاون مع المجلس الأعلى للشؤون الإسلامية برواندا، اليوم السبت بكيغالي، بالاستلهام من خطب ورسائل صاحب الجلالة الملك محمد السادس، أمير المؤمنين، لترسيخ قيم السلم والتعايش المشترك بإفريقيا. ودعوا، في البيان الختامي لهذه الندوة، إلى “اتخاذأكمل القراءة » المقالة الدعوة بكيغالي إلى الاستلهام من خطب ورسائل جلالة الملك لترسيخ قيم السلم والتعايش المشترك بإفريقيا  .', 'size': 2}], 'main_title': 'رواندا.. علماء أفارقة يدعون  إلى الاستلهام من خطب ورسائل جلالة الملك لترسيخ قيم السلم والتعايش المشترك'}, {'community_id': '7', 'articles': [{'id': '329', 'title': 'معركة أنوال..معلمة وضاءة في مسلسل الكفاح الوطني ضد الاحتلال الأجنبي', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/318788/', 'summary': 'معركة أنوال..معلمة وضاءة في مسلسل الكفاح الوطني ضد الاحتلال الأجنبي. يخلد الشعب المغربي، ومعه أسرة المقاومة وجيش التحرير، غدا الإثنين (21 يوليوز)، الذكرى ال104 لمعركة أنوال المجيدة، التي حقق فيها المقاومون والمجاهدون المغاربة الأفذاذ بقيادة البطل محمد بن عبد الكريم الخطابي انتصارا كبيرا على قوات الاحتلال الأجنبي. وذكرت المندوبية السامية لقدماء المقاومين وأعضاء جيش التحرير، أنه منذ مطلع القرن العشرين، وتحديدا منذ 1907 وإلى 1912،', 'size': 3}, {'id': '331', 'title': 'المغرب يخلد الذكرى 104 لمعركة أنوال .. انتصار خالد يسطر ملاحم المقاومة وبطولات الخطابي', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1086740.html', 'summary': 'المغرب يخلد الذكرى 104 لمعركة أنوال .. انتصار خالد يسطر ملاحم المقاومة وبطولات الخطابي. يخلد الشعب المغربي، ومعه أسرة المقاومة وجيش التحرير، غدا الإثنين (21 يوليوز)، الذكرى ال104 لمعركة أنوال المجيدة، التي حقق فيها المقاومون والمجاهدون المغاربة الأفذاذ بقيادة البطل محمد بن عبد الكريم الخطابي انتصارا كبيرا على قوات الاحتلال الأجنبي. وذكرت المندوبية السامية لقدماء المقاومين وأعضاء جيش التحرير، أنه منذ مطلع القرن العشرين، وتحديدا منذ 1907 وإلى 1912، ظهرت المقالة المغرب يخلد الذكرى 104 لمعركة أنوال .. انتصار خالد يسطر ملاحم المقاومة وبطولات الخطابي  .', 'size': 3}, {'id': '368', 'title': 'المملكة تخلد الذكرى الـ104 لمعركة أنوال.. معلمة وضاءة في مسلسل الكفاح الوطني', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/470060.html', 'summary': 'المملكة تخلد الذكرى الـ104 لمعركة أنوال.. معلمة وضاءة في مسلسل الكفاح الوطني. يخلد الشعب المغربي، ومعه أسرة المقاومة وجيش التحرير، غدا الإثنين (21 يوليوز)، الذكرى الـ104 لمعركة أنوال المجيدة، التي حقق فيها المقاومون والمجاهدون المغاربة الأفذاذ بقيادة البطل محمد بن عبد الكريم الخطابي، انتصارا كبيرا على قوات الاحتلال الأجنبي.', 'size': 3}], 'main_title': 'معركة أنوال..معلمة وضاءة في مسلسل الكفاح الوطني ضد الاحتلال الأجنبي'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    