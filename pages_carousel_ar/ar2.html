<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 14/06/2025 - 12h24</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '14', 'articles': [{'id': '31', 'title': 'عاجل.. إيران تطلق مئات الصواريخ على إسرائيل', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-631757.html', 'summary': 'عاجل.. إيران تطلق مئات الصواريخ على إسرائيل. أعلنت وكالة الأنباء الإيرانية عن بدء رد قوي من طهران بإطلاق مئات الصواريخ الباليستية من مدينة شيراز باتجاه الأراضي الإسرائيلية. وتسبب إطلاق هذه الصواريخ في سماع دوي انفجارات قوية فوق مدينة تل أبيب، حيث حاولت منظومات الدفاع الإسرائيلية اعتراض الصواريخ. وفي تطور ميداني خطير، أفادت قناة 13 الإسرائيلية باندلاع حريق قرب مقر وزارة الدفاع الإسرائيلية في تل أبيب، ما يعكس حجم التوتر وتصاعد العنف بين الجانبين. هذا التصعيد يأتي في إطار سلسلة من المواجهات المتزايدة بين إيران وإسرائيل، مما يثير مخاوف دولية من تفجر نزاع أوسع في المنطقة.', 'size': 2}, {'id': '174', 'title': 'بدء الرد الإيراني على الهجوم الإسرائيلي بإطلاق صواريخ باليستية على تل أبيب', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1077773.html', 'summary': 'بدء الرد الإيراني على الهجوم الإسرائيلي بإطلاق صواريخ باليستية على تل أبيب. أعلنت إيران إطلاق هجوم على مواقع إسرائيلية ردا على الغارات المتواصلة التي استهدفت طهران ومدنا إيرانية وأدت إلى مقتل العشرات بينهم مجموعة من قادة الصف الأول العسكريين والخبراء النوويين، وأكدت إلحاق خسائر بإسرائيل من بينها إسقاط مقاتلة. وأعلنت وكالة الأنباء الإيرانية “بدء الرد الإيراني الساحق” بإطلاق مئات الصواريخ الباليستية تجاه إسرائيل، وأكدت الجبهة الداخلية الإسرائيلية ظهرت المقالة بدء الرد الإيراني على الهجوم الإسرائيلي بإطلاق صواريخ باليستية على تل أبيب  .', 'size': 3}, {'id': '346', 'title': 'بدء الرد الإيراني.. إطلاق مئات الصواريخ الباليستية تجاه إسرائيل', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-575043.html', 'summary': 'بدء الرد الإيراني.. إطلاق مئات الصواريخ الباليستية تجاه إسرائيل. أفادت وكالة الأنباء الإيرانية ببدء الرد الإيراني الذي سمته “الساحق” بإطلاق مئات الصواريخ الباليستية تجاه إسرائيل، ردا على شن الجيش الإسرائيلي بدء ما سماه عملية “الأسد الصاعد” على إيران. وقال إعلام إسرائيلي إن حريقا اندلع قرب مقر وزارة الدفاع في تل أبيب، مشيرا إلى سقوط صواريخ على 7 مناطق وسط إسرائيل.', 'size': 3}, {'id': '372', 'title': 'إيران ترد على الهجوم الإسرائيلي بقصف تل أبيب', 'source': 'rue20.com', 'link': 'https://rue20.com/912773.html', 'summary': 'إيران ترد على الهجوم الإسرائيلي بقصف تل أبيب.  . وكالات أعلن الإسعاف الإسرائيلي -صباح اليوم السبت- مقتل 3 إسرائيليين وإصابة 172 آخرين، في أعقاب وابل من الضربات الصاروخية والطائرات المسيرة الإيرانية على مناطق متفرقة من وسط وشمال إسرائيل، ردا على الهجمات الجوية الإسرائيلية الواسعة التي طالت مواقع داخل إيران فجر الجمعة. وبحسب قناة “كان” و”القناة 12″ الإسرائيليتين، فقد أطلقت إيران نحو الخبر إيران ترد على الهجوم الإسرائيلي بقصف تل أبيب  .', 'size': 2}], 'main_title': 'بدء الرد الإيراني على الهجوم الإسرائيلي بإطلاق صواريخ باليستية على تل أبيب'}, {'community_id': '1', 'articles': [{'id': '68', 'title': 'الرباط:  اجتماع حول عملية إعادة تكوين القطيع الوطني للماشية', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/202029', 'summary': 'الرباط: اجتماع حول عملية إعادة تكوين القطيع الوطني للماشية.  تنفيذا للتوجيهات السامية لصاحب الجلالة الملك محمد السادس، نصره الله، الداعية إلى إعادة تكوين القطيع الوطني للماشية بشكل مستدام، انعقد اليوم الجمعة بوزارة الداخلية، اجتماع بحضور وزير الداخلية ووزير الفلاحة والصيد البحري والتنمية القروية والمياه و الغابات والوزير المنتدب لدى وزيرة الاقتصاد والمالية، المكلف بالميزانية وعدد من المسؤولين المركزيين للقطاعات الوزارية المعنية. كما', 'size': 2}, {'id': '100', 'title': 'بتعليمات ملكية.. اجتماع رفيع المستوى بمقر وزارة الداخلية شارك فيه 3 وزراء وجميع الولاة والعمال وهذا هو هدفه الأساسي', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/economy/407497.html', 'summary': 'بتعليمات ملكية.. اجتماع رفيع المستوى بمقر وزارة الداخلية شارك فيه 3 وزراء وجميع الولاة والعمال وهذا هو هدفه الأساسي. تنفيذا للتوجيهات السامية لصاحب الجلالة الملك محمد السادس، نصره الله، الداعية إلى إعادة تكوين القطيع الوطني للماشية بشكل مستدام، انعقد اليوم الجمعة بوزارة الداخلية، اجتماع', 'size': 2}], 'main_title': 'الرباط:  اجتماع حول عملية إعادة تكوين القطيع الوطني للماشية'}, {'community_id': '2', 'articles': [{'id': '135', 'title': 'لجنة الـ24/ الصحراء.. السنغال تجدد تأكيد دعمها الثابت للمبادرة المغربية للحكم الذاتي', 'source': 'kifache.com', 'link': 'https://kifache.com/%d9%84%d8%ac%d9%86%d8%a9-%d8%a7%d9%84%d9%8024-%d8%a7%d9%84%d8%b5%d8%ad%d8%b1%d8%a7%d8%a1-%d8%a7%d9%84%d8%b3%d9%86%d8%ba%d8%a7%d9%84-%d8%aa%d8%ac%d8%af%d8%af-%d8%aa%d8%a3%d9%83%d9%8a%d8%af-%d8%af/', 'summary': 'لجنة الـ24/ الصحراء.. السنغال تجدد تأكيد دعمها الثابت للمبادرة المغربية للحكم الذاتي. جددت السنغال، أمام لجنة الـ24 التابعة للأمم المتحدة، تأكيد دعمها الثابت للمبادرة المغربية للحكم الذاتي، التي قدمها المغرب من أجل الطي النهائي للنزاع الإقليمي بشأن الصحراء المغربية. وفي مداخلة خلال الدورة العادية للجنة، المنعقدة بنيويورك ما بين 9 و20 يونيو الجاري، أكد مساعد الممثل الدائم للسنغال لدى الأمم المتحدة، السفير ديامان ديوم، أن بلاده “ترغب', 'size': 4}, {'id': '153', 'title': 'لجنة الـ24.. السنغال تجدد تأكيد دعمها الثابت للمبادرة المغربية للحكم الذاتي', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/315429/', 'summary': 'لجنة الـ24.. السنغال تجدد تأكيد دعمها الثابت للمبادرة المغربية للحكم الذاتي. جددت السنغال، أمام لجنة الـ24 التابعة للأمم المتحدة، تأكيد دعمها الثابت للمبادرة المغربية للحكم الذاتي، التي قدمها المغرب من أجل الطي النهائي للنزاع الإقليمي بشأن الصحراء المغربية. وفي مداخلة خلال الدورة العادية للجنة، المنعقدة بنيويورك ما بين 9 و20 يونيو الجاري، أكد مساعد الممثل الدائم للسنغال لدى الأمم المتحدة، السفير ديامان ديوم، أن بلاده “ترغب', 'size': 4}, {'id': '234', 'title': 'السنغال تجدد تأكيد دعمها الثابت لمغربية الصحراء أمام لجنة الـ24 التابعة للأمم المتحدة', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d8%b3%d9%86%d8%ba%d8%a7%d9%84-%d8%aa%d8%ac%d8%af%d8%af-%d8%aa%d8%a3%d9%83%d9%8a%d8%af-%d8%af%d8%b9%d9%85%d9%87%d8%a7-%d8%a7%d9%84%d8%ab%d8%a7%d8%a8%d8%aa-%d9%84%d9%85%d8%ba%d8%b1%d8%a8/', 'summary': 'السنغال تجدد تأكيد دعمها الثابت لمغربية الصحراء أمام لجنة الـ24 التابعة للأمم المتحدة. جددت السنغال، أمام لجنة الـ24 التابعة للأمم المتحدة، تأكيد دعمها الثابت للمبادرة المغربية للحكم الذاتي، التي قدمها المغرب من أجل الطي النهائي للنزاع الإقليمي المفتعل بشأن الصحراء المغربية. وفي هذا السياق، قال مساعد الممثل الدائم للسنغال لدى الأمم المتحدة، السفير ديامان ديوم، في مداخلة خلال الدورة العادية للجنة، المنعقدة بنيويورك ما بين 9 و20 …  السنغال تجدد تأكيد دعمها الثابت لمغربية الصحراء أمام لجنة الـ24 التابعة للأمم المتحدة     .', 'size': 4}, {'id': '350', 'title': 'الأمم المتحدة.. السنغال تجدد دعمها الثابت للمبادرة المغربية للحكم الذاتي', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-575029.html', 'summary': 'الأمم المتحدة.. السنغال تجدد دعمها الثابت للمبادرة المغربية للحكم الذاتي. جددت السنغال، أمام لجنة الـ24 التابعة للأمم المتحدة، تأكيد دعمها الثابت للمبادرة المغربية للحكم الذاتي، التي قدمها المغرب من أجل الطي النهائي للنزاع الإقليمي بشأن الصحراء المغربية. وفي مداخلة خلال الدورة العادية للجنة، المنعقدة بنيويورك ما بين 9 و20 يونيو الجاري، أكد مساعد الممثل الدائم للسنغال لدى الأمم المتحدة، السفير ديامان ديوم، أن', 'size': 4}], 'main_title': 'لجنة الـ24/ الصحراء.. السنغال تجدد تأكيد دعمها الثابت للمبادرة المغربية للحكم الذاتي'}, {'community_id': '3', 'articles': [{'id': '146', 'title': 'لجنة الاستئناف تؤيد توقيف نائب عمدة البيضاء بسبب التلاعب في النتائج', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/315438/', 'summary': 'لجنة الاستئناف تؤيد توقيف نائب عمدة البيضاء بسبب التلاعب في النتائج. أصدرت اللجنة المركزية للاستئناف التابعة للجامعة الملكية المغربية لكرة القدم، اليوم الجمعة، قراراً جديداً يؤيد العقوبات الصادرة عن لجنة الأخلاقيات في حق عدد من الأطراف المتورطة في محاولة التلاعب بنتائج إحدى مباريات بطولة القسم الأول هواة، وعلى رأسهم عبد اللطيف الناصيري، نائب عمدة مدينة الدار البيضاء ورئيس نادي جمعية الشباب الرياضي، الذي تم تأكيد توقيفه', 'size': 2}, {'id': '345', 'title': 'الجامعة الملكية المغربية لكرة القدم تؤيد توقيف الناصيري', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-575040.html', 'summary': 'الجامعة الملكية المغربية لكرة القدم تؤيد توقيف الناصيري. أصدرت اللجنة المركزية للاستئناف التابعة للجامعة الملكية المغربية لكرة القدم، العديد من القرارات، أبرزها تأييد قرار لجنة الأخلاقيات بتوقيف عبد اللطيف الناصيري، رئيس نادي جمعية الشباب الرياضي، لمدة ثلاث (3) سنوات نافذة، مع تغريمه مبلغ 30.000 درهم، على خلفية محاولة التلاعب بنتيجة المباراة التي جمعت فريقه بنادي الاتحاد البيضاوي ضمن الجولة السابعة والعشرين من', 'size': 2}], 'main_title': 'لجنة الاستئناف تؤيد توقيف نائب عمدة البيضاء بسبب التلاعب في النتائج'}, {'community_id': '4', 'articles': [{'id': '154', 'title': 'استئنافية القنيطرة تنصف “مولات 88 غرزة” وتدين المعتدي بسنتين حبسا نافذا', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/315432/', 'summary': 'استئنافية القنيطرة تنصف “مولات 88 غرزة” وتدين المعتدي بسنتين حبسا نافذا. أسدلت محكمة الاستئناف بمدينة القنيطرة، اليوم الجمعة، الستار على واحدة من القضايا التي هزت الرأي العام الوطني، بعدما أصدرت حكما قضى بإدانة المتهم في قضية الاعتداء العنيف على السيدة خديجة، المعروفة بلقب “مولات 88 غرزة”، بالحبس النافذ لمدة سنتين، مع تغريمه مبلغ 200 ألف درهم كتعويض مدني لفائدة الضحية. وقد أعربت خديجة عن ارتياحها الكبير', 'size': 2}, {'id': '235', 'title': 'استئنافية القنيطرة تُشدد العقوبة على المعتدي في قضية “مولات 88 غرزة”', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d8%b3%d8%aa%d8%a6%d9%86%d8%a7%d9%81%d9%8a%d8%a9-%d8%a7%d9%84%d9%82%d9%86%d9%8a%d8%b7%d8%b1%d8%a9-%d8%aa%d9%8f%d8%b4%d8%af%d8%af-%d8%a7%d9%84%d8%b9%d9%82%d9%88%d8%a8%d8%a9-%d8%b9%d9%84%d9%89/', 'summary': 'استئنافية القنيطرة تُشدد العقوبة على المعتدي في قضية “مولات 88 غرزة”. أصدرت محكمة الاستئناف بالقنيطرة، اليوم الجمعة 13 يونيو 2025، حكما بإدانة المتهم في قضية الاعتداء الجسدي على الشابة خديجة، المعروفة إعلاميا بـ”مولات 88 غرزة”، بالسجن النافذ لمدة سنتين ونصف، مع تغريمه مبلغ 200 ألف درهم كتعويض مدني لفائدة الضحية. وكانت المحكمة الابتدائية بمشرع بلقصيري قد قضت في وقت سابق بمعاقبة المتهم بشهرين حبسا …  استئنافية القنيطرة تُشدد العقوبة على المعتدي في قضية “مولات 88 غرزة”     .', 'size': 3}, {'id': '359', 'title': '“قضية 88 غرزة”.. استئنافية القنيطرة تدين المتهم بالحبس النافذ سنتين ونصف', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1077864.html', 'summary': '“قضية 88 غرزة”.. استئنافية القنيطرة تدين المتهم بالحبس النافذ سنتين ونصف. قضت محكمة الاستئناف بمدينة القنيطرة، الجمعة 13 يونيو 2025، بإلغاء الحكم الابتدائي الصادر في حق المتهم بالاعتداء على سيدة، وهي القضية المعروفة بـ“مولات 88 غرزة”، وأدانته بسنتين ونصف حبسا نافذا، مع إلزامه بأداء تعويض مدني قدره 200 ألف درهم لفائدة الضحية. وكانت المحكمة الابتدائية بمشرع بلقصيري قد قضت، في 27 ماي الماضي، بشهرين نافذة وغرامة ظهرت المقالة “قضية 88 غرزة”.. استئنافية القنيطرة تدين المتهم بالحبس النافذ سنتين ونصف  .', 'size': 2}], 'main_title': 'استئنافية القنيطرة تُشدد العقوبة على المعتدي في قضية “مولات 88 غرزة”'}, {'community_id': '5', 'articles': [{'id': '155', 'title': 'المغرب يراهن على إعادة تكوين القطيع بضمانات الدعم والرقمنة', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/315417/', 'summary': 'المغرب يراهن على إعادة تكوين القطيع بضمانات الدعم والرقمنة. أكد وزير الفلاحة والصيد البحري والتنمية القروية والمياه والغابات، أحمد البواري، اليوم الجمعة بالرباط، أن تنزيل عملية إعادة تكوين القطيع الوطني للماشية سيتم وفق منهجية موضوعية تسمح بإيصال الدعم للمربين من خلال لجان تشرف عليها السلطات المحلية. وشدد البواري، في تصريح للصحافة عقب اجتماع بوزارة الداخلية حول إعادة تكوين القطيع الوطني للماشية، انعقد تنفيذا للتوجيهات', 'size': 2}, {'id': '220', 'title': 'البواري: تنزيل عملية إعادة تكوين القطيع الوطني للماشية سيتم وفق منهجية موضوعية', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/222750/', 'summary': 'البواري: تنزيل عملية إعادة تكوين القطيع الوطني للماشية سيتم وفق منهجية موضوعية. كمال عسو كشف أحمد البواري وزير الفلاحة والصيد البحري والتنمية القروية والمياه والغابات، أن تنزيل عملية إعادة تكوين القطيع الوطني للماشية سيتم وفق منهجية موضوعية تسمح بإيصال الدعم للمربين من خلال لجان تشرف عليها السلطات المحلية. وأكد البواري، في تصريح صحفي عقب اجتماع بوزارة الداخلية المنعقد اليوم الجمعة بالرباط حول إعادة تكوين القطيع الوطني', 'size': 2}], 'main_title': 'المغرب يراهن على إعادة تكوين القطيع بضمانات الدعم والرقمنة'}, {'community_id': '6', 'articles': [{'id': '168', 'title': 'الطالبي العلمي يتباحث مع وفد من أعضاء مكتب المنتدى البرلماني الإفريقي', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1077804.html', 'summary': 'الطالبي العلمي يتباحث مع وفد من أعضاء مكتب المنتدى البرلماني الإفريقي. أجرى رئيس مجلس النواب، راشيد الطالبي العلمي، اليوم الجمعة بمقر المجلس، مباحثات مع وفد من أعضاء مكتب المنتدى البرلماني لرؤساء لجان الخارجية والدفاع بالبرلمانات الإفريقية. وذكر بلاغ لمجلس النواب أن الطالبي العلمي ذكر خلال هذا اللقاء بأهمية إنشاء هذا المنتدى البرلماني، الذي يدشن لمرحلة جديدة من التنسيق والعمل المشترك والتشاور البناء بين المؤسسات التشريعية في ظهرت المقالة الطالبي العلمي يتباحث مع وفد من أعضاء مكتب المنتدى البرلماني الإفريقي  .', 'size': 2}, {'id': '189', 'title': 'لمواجهة التحديات التي تواجه أفريقيا.. العلمي يتباحث مع وفد من أعضاء المنتدى البرلماني الإفريقي', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/466410.html', 'summary': 'لمواجهة التحديات التي تواجه أفريقيا.. العلمي يتباحث مع وفد من أعضاء المنتدى البرلماني الإفريقي. أجرى رئيس مجلس النواب، راشيد الطالبي العلمي، اليوم الجمعة بمقر المجلس، مباحثات مع وفد من أعضاء مكتب المنتدى البرلماني لرؤساء لجان الخارجية والدفاع بالبرلمانات الإفريقية. وذكر بلاغ لمجلس النواب أن الطالبي العلمي ذكر خلال هذا اللقاء بأهمية إنشاء هذا المنتدى البرلماني، الذي يدشن لمرحلة جديدة من التنسيق والعمل المشترك والتشاور البناء بين المؤسسات التشريعية في …', 'size': 2}], 'main_title': 'الطالبي العلمي يتباحث مع وفد من أعضاء مكتب المنتدى البرلماني الإفريقي'}, {'community_id': '7', 'articles': [{'id': '182', 'title': 'وزير الميزانية: عملية إعادة تكوين القطيع الوطني تدعم المربين وتؤمن السيادة الغذائية', 'source': 'rue20.com', 'link': 'https://rue20.com/912735.html', 'summary': 'وزير الميزانية: عملية إعادة تكوين القطيع الوطني تدعم المربين وتؤمن السيادة الغذائية.  . الرباط أكد الوزير المنتدب المكلف بالميزانية، فوزي لقجع، اليوم الجمعة بالرباط، أن الإجراءات المرتبطة بعملية إعادة تكوين القطيع الوطني للماشية تروم تمكين المربين من مزاولة نشاطهم في أحسن الظروف والتخفيف من الصعوبات الناجمة عن توالي سنوات الجفاف. وأوضح لقجع، في تصريح للصحافة عقب اجتماع انعقد بوزارة الداخلية حول إعادة تكوين القطيع الوطني الخبر وزير الميزانية: عملية إعادة تكوين القطيع الوطني تدعم المربين وتؤمن السيادة الغذائية  .', 'size': 2}, {'id': '237', 'title': 'لقجع: إعادة تكوين القطيع الوطني للماشية تروم تمكين المربين من مزاولة نشاطهم في أحسن الظروف', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d9%84%d9%82%d8%ac%d8%b9-%d8%a5%d8%b9%d8%a7%d8%af%d8%a9-%d8%aa%d9%83%d9%88%d9%8a%d9%86-%d8%a7%d9%84%d9%82%d8%b7%d9%8a%d8%b9-%d8%a7%d9%84%d9%88%d8%b7%d9%86%d9%8a-%d9%84%d9%84%d9%85%d8%a7%d8%b4%d9%8a/', 'summary': 'لقجع: إعادة تكوين القطيع الوطني للماشية تروم تمكين المربين من مزاولة نشاطهم في أحسن الظروف. قال الوزير المنتدب المكلف بالميزانية، فوزي لقجع، اليوم الجمعة بالرباط، إن الإجراءات المرتبطة بعملية إعادة تكوين القطيع الوطني للماشية تروم تمكين المربين من مزاولة نشاطهم في أحسن الظروف والتخفيف من الصعوبات الناجمة عن توالي سنوات الجفاف. وأبرز لقجع، في تصريح للصحافة عقب اجتماع انعقد بوزارة الداخلية حول إعادة تكوين القطيع الوطني للماشية، أن التعليمات …  لقجع: إعادة تكوين القطيع الوطني للماشية تروم تمكين المربين من مزاولة نشاطهم في أحسن الظروف     .', 'size': 2}], 'main_title': 'وزير الميزانية: عملية إعادة تكوين القطيع الوطني تدعم المربين وتؤمن السيادة الغذائية'}, {'community_id': '8', 'articles': [{'id': '196', 'title': 'الأمم المتحدة.. وفد مغربي يبرز بنيويورك الدعم الدولي المكثف لمخطط الحكم الذاتي', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/466390.html', 'summary': 'الأمم المتحدة.. وفد مغربي يبرز بنيويورك الدعم الدولي المكثف لمخطط الحكم الذاتي. استعرضت المنتخبة عن جهة الداخلة-وادي الذهب، غلا بهية، بنيويورك، دينامية الدعم الدولي المكثف للمخطط المغربي للحكم الذاتي، الحل الوحيد والأوحد من أجل الطي النهائي للنزاع حول الصحراء. وفي كلمة خلال الاجتماع السنوي للجنة الـ24 (9-20 يونيو)، أبرزت السيدة بهية أن أزيد من 118 بلدا تعتبر أن هذه المبادرة التي قدمها المغرب في 2007 تعد الأساس …', 'size': 2}, {'id': '222', 'title': 'الأمم المتحدة.. غلا بهية تبرز الدعم الدولي المكثف للمخطط المغربي للحكم الذاتي', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/222743/', 'summary': 'الأمم المتحدة.. غلا بهية تبرز الدعم الدولي المكثف للمخطط المغربي للحكم الذاتي. و م ع استعرضت المنتخبة عن جهة الداخلة-وادي الذهب، غلا بهية، بنيويورك، دينامية الدعم الدولي المكثف للمخطط المغربي للحكم الذاتي، الحل الوحيد والأوحد من أجل الطي النهائي للنزاع حول الصحراء. وفي كلمة خلال الاجتماع السنوي للجنة الـ24 (9-20 يونيو)، أبرزت بهية أن أزيد من 118 بلدا تعتبر أن هذه المبادرة التي قدمها المغرب في', 'size': 2}], 'main_title': 'الأمم المتحدة.. وفد مغربي يبرز بنيويورك الدعم الدولي المكثف لمخطط الحكم الذاتي'}, {'community_id': '9', 'articles': [{'id': '218', 'title': 'في عملية نوعية للشرطة والديستي: ضبط 3 كلغ و460 غرام من الكوكايين وحوالي 100 مليون بحوزة صاحب سوابق', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/222756/', 'summary': 'في عملية نوعية للشرطة والديستي: ضبط 3 كلغ و460 غرام من الكوكايين وحوالي 100 مليون بحوزة صاحب سوابق. تمكنت عناصر المصلحة الولائية للشرطة القضائية بمدينة طنجة على ضوء معلومات وفرتها مصالح المديرية العامة لمراقبة التراب الوطني، مساء اليوم الجمعة 13 يونيو الجاري، من ضبط ثلاثة كيلوغرامات و 460 غراما من مخدر الكوكايين بحوزة شخص من ذوي السوابق القضائية. وقد أسفرت هذه العملية الأمنية عن ضبط المشتبه فيه متلبسا بحيازة ثلاث صفائح من مخدر', 'size': 2}, {'id': '323', 'title': 'بتنسيق مع “الديستي”.. حجز كميات كبيرة من الكوكايين بطنجة وتوقيف مروج من ذوي السوابق', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a8%d8%aa%d9%86%d8%b3%d9%8a%d9%82-%d9%85%d8%b9-%d8%a7%d9%84%d8%af%d9%8a%d8%b3%d8%aa%d9%8a-%d8%ad%d8%ac%d8%b2-%d9%83%d9%85%d9%8a%d8%a7%d8%aa-%d9%83%d8%a8%d9%8a%d8%b1%d8%a9-%d9%85/', 'summary': 'بتنسيق مع “الديستي”.. حجز كميات كبيرة من الكوكايين بطنجة وتوقيف مروج من ذوي السوابق. تمكنت عناصر المصلحة الولائية للشرطة القضائية بمدينة طنجة على ضوء معلومات وفرتها مصالح المديرية العامة لمراقبة التراب الوطني، يوم أمس الجمعة (13 يونيو)، من ضبط ثلاثة كيلوغرامات و460 غراما من مخدر الكوكايين بحوزة شخص من ذوي السوابق القضائية. وأسفرت هذه العملية الأمنية عن ضبط المشتبه فيه متلبسا بحيازة ثلاث صفائح من مخدر الكوكايين، يناهز وزنها', 'size': 2}], 'main_title': 'في عملية نوعية للشرطة والديستي: ضبط 3 كلغ و460 غرام من الكوكايين وحوالي 100 مليون بحوزة صاحب سوابق'}, {'community_id': '10', 'articles': [{'id': '223', 'title': 'السكوري: الذكاء الاصطناعي سيؤثر بشكل عميق على علاقة المجتمع بوقت العمل', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/222740/', 'summary': 'السكوري: الذكاء الاصطناعي سيؤثر بشكل عميق على علاقة المجتمع بوقت العمل. كواليس اليوم اعتبر وزير الإدماج الاقتصادي والمقاولة الصغرى والتشغيل والكفاءات، يونس السكوري، أمس الخميس بجنيف، أن الذكاء الاصطناعي سيؤثر بشكل عميق على علاقة المجتمع بوقت العمل، مما يدفع العديد من الأشخاص إلى التوجه نحو التشغيل الذاتي والعمل المقاولاتي المرن. وأوضح السكوري، في حوار تفاعلي حول موضوع “محرك التغيير: الذكاء الاصطناعي في خدمة الأثر الاجتماعي”،', 'size': 2}, {'id': '340', 'title': 'هل يعيد الذكاء الاصطناعي رسم علاقة الإنسان بوقت العمل؟', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/315420/', 'summary': 'هل يعيد الذكاء الاصطناعي رسم علاقة الإنسان بوقت العمل؟. اعتبر وزير الإدماج الاقتصادي والمقاولة الصغرى والتشغيل والكفاءات، يونس السكوري، أمس الخميس بجنيف، أن الذكاء الاصطناعي سيؤثر بشكل عميق على علاقة المجتمع بوقت العمل، مما يدفع العديد من الأشخاص إلى التوجه نحو التشغيل الذاتي والعمل المقاولاتي المرن. وأوضح السكوري، في حوار تفاعلي حول موضوع “محرك التغيير: الذكاء الاصطناعي في خدمة الأثر الاجتماعي”، الذي نظم في', 'size': 2}], 'main_title': 'السكوري: الذكاء الاصطناعي سيؤثر بشكل عميق على علاقة المجتمع بوقت العمل'}, {'community_id': '11', 'articles': [{'id': '225', 'title': 'سلا.. إعطاء انطلاقة البرنامج التأهيلي الخاص بالسجناء اليافعين', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/222733/', 'summary': 'سلا.. إعطاء انطلاقة البرنامج التأهيلي الخاص بالسجناء اليافعين. كواليس اليوم أعطى مركز مصالحة، أمس الخميس بالسجن المحلي سلا، انطلاقة البرنامج التأهيلي الخاص بالسجناء اليافعين (أقل من 20 سنة) المدانين بموجب قانون الإرهاب. وأوضح بلاغ للمركز أن هذا البرنامج يأتي تنفيذا لإستراتيجيته المتعددة الأبعاد والهادفة إلى تعزيز ثقافة التسامح ومحاربة مختلف مظاهر التطرف العنيف عند هذه الفئة من السجناء وإعادة تأهيلهم وإدماجهم في', 'size': 2}, {'id': '226', 'title': 'انطلاق البرنامج التأهيلي الخاص بالسجناء اليافعين المدانين بقانون الإرهاب', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%a7%d9%86%d8%b7%d9%84%d8%a7%d9%82-%d8%a7%d9%84%d8%a8%d8%b1%d9%86%d8%a7%d9%85%d8%ac-%d8%a7%d9%84%d8%aa%d8%a3%d9%87%d9%8a%d9%84%d9%8a-%d8%a7%d9%84%d8%ae%d8%a7%d8%b5-%d8%a8%d8%a7%d9%84%d8%b3%d8%ac/', 'summary': 'انطلاق البرنامج التأهيلي الخاص بالسجناء اليافعين المدانين بقانون الإرهاب. المساء اليوم – سلا: أعطى مركز مصالحة، بالسجن المحلي سلا، انطلاقة البرنامج التأهيلي الخاص بالسجناء اليافعين (أقل من 20 سنة) المدانين بموجب قانون الإرهاب. وأوضح بلاغ للمركز أن هذا البرنامج، الذي بدأ الخميس، يأتي تنفيذا', 'size': 2}], 'main_title': 'سلا.. إعطاء انطلاقة البرنامج التأهيلي الخاص بالسجناء اليافعين'}, {'community_id': '12', 'articles': [{'id': '300', 'title': 'في اليوم الوطني للتبرع بالدم.. دعوة إلى تعزيز ثقافة العطاء من أجل إنقاذ الأرواح', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/202046', 'summary': 'في اليوم الوطني للتبرع بالدم.. دعوة إلى تعزيز ثقافة العطاء من أجل إنقاذ الأرواح.  تخليدًا لليوم الوطني للتبرع بالدم، الذي يُصادف 14 يونيو من كل سنة، جدّدت الوكالة المغربية للدم ومشتقاته نداءها لكافة المواطنات والمواطنين من أجل الانخراط الطوعي والمنتظم في حملات التبرع بالدم، باعتباره عملاً إنسانيًا نبيلاً يُجسد قيم التضامن والتكافل التي يتميز بها المجتمع المغربي. وفي بلاغ رسمي بالمناسبة، عبّرت الوكالة عن عميق شكرها وامتنانها للمتبرعين', 'size': 2}, {'id': '377', 'title': 'إطلاق حملات وطنية للتبرع بالدم بمختلف جهات المملكة', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/466437.html', 'summary': 'إطلاق حملات وطنية للتبرع بالدم بمختلف جهات المملكة. أعلنت الوكالة المغربية للدم ومشتقاته عن إطلاق برنامج من حملات وطنية للتبرع بالدم في مختلف جهات المملكة، بمناسبة اليوم الوطني للتبرع بالدم الذي يُخلد في 14 يونيو من كل سنة. وأوضح بلاغ للوكالة أن هذا البرنامج، الذي سيتم إطلاقه بشراكة مع فعاليات المجتمع المدني، يهدف إلى توسيع قاعدة المتبرعين وتقريب خدمات التبرع من المواطنات والمواطنين …', 'size': 2}], 'main_title': 'في اليوم الوطني للتبرع بالدم.. دعوة إلى تعزيز ثقافة العطاء من أجل إنقاذ الأرواح'}, {'community_id': '13', 'articles': [{'id': '304', 'title': 'الإناث يتفوقن.. وزارة التربية الوطنية تعلن عن نسبة النجاح في البكالوريا', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/education/407533.html', 'summary': 'الإناث يتفوقن.. وزارة التربية الوطنية تعلن عن نسبة النجاح في البكالوريا. أعلنت وزارة التربية الوطنية والتعليم الأولي والرياضة أن الدورة العادية لامتحانات البكالوريا لسنة 2025 سجلت نسبة نجاح وطنية بلغت 66.8 في المائة، بانخفاض طفيف مقارنة', 'size': 2}, {'id': '365', 'title': 'نتائج البكالوريا..الإناث يتفوقن والمسالك المهنية تتصدر نسبة النجاح', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d9%86%d8%aa%d8%a7%d8%a6%d8%ac-%d8%a7%d9%84%d8%a8%d9%83%d8%a7%d9%84%d9%88%d8%b1%d9%8a%d8%a7-%d8%a7%d9%84%d8%a5%d9%86%d8%a7%d8%ab-%d9%8a%d8%aa%d9%81%d9%88%d9%82%d9%86-%d9%88%d8%a7%d9%84%d9%85%d8%b3/', 'summary': 'نتائج البكالوريا..الإناث يتفوقن والمسالك المهنية تتصدر نسبة النجاح. سجلت الدورة العادية لامتحانات البكالوريا لسنة 2025 نسبة نجاح بلغت 67.86 في المائة، مقابل 66.8 في المائة خلال دورة السنة الماضية، فيما تصدرت الإناث النتائج بنسبة نجاح وصلت إلى 71.3 في المائة، متقدمة على الذكور الذين سجلوا 61.81 في المائة. وبلغ عدد الناجحين في صفوف الممدرسين 250075 مترشحة ومترشحا من التعليمين العمومي والخصوصي، من بينهم  نتائج البكالوريا..الإناث يتفوقن والمسالك المهنية تتصدر نسبة النجاح     .', 'size': 2}], 'main_title': 'الإناث يتفوقن.. وزارة التربية الوطنية تعلن عن نسبة النجاح في البكالوريا'}, {'community_id': '0', 'articles': [{'id': '367', 'title': 'توقعات أحوال الطقس لليوم السبت', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%aa%d9%88%d9%82%d8%b9%d8%a7%d8%aa-%d8%a3%d8%ad%d9%88%d8%a7%d9%84-%d8%a7%d9%84%d8%b7%d9%82%d8%b3-%d9%84%d9%84%d9%8a%d9%88%d9%85-%d8%a7%d9%84%d8%b3%d8%a8%d8%aa-11/', 'summary': 'توقعات أحوال الطقس لليوم السبت. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم السبت، أن تتميز الحالة الجوية عامة بطقس حار نسبيا بكل من سهول تادلة، والمنطقة الشرقية، وكذا أقصى كل من جنوب وجنوب شرق البلاد. ويرتقب نزول قطرات مطرية أو زخات رعدية فوق شرق البلاد والريف، حيث ستمتد بعد ذلك نحو الواجهة المتوسطية، فيما ستكون الأجواء غائمة أحيانا بكل من  توقعات أحوال الطقس لليوم السبت     .', 'size': 3}, {'id': '393', 'title': 'طقس السبت.. حار نسبيا مع نزول قطرات مطرية في عدة مناطق', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/222769/', 'summary': 'طقس السبت.. حار نسبيا مع نزول قطرات مطرية في عدة مناطق. كواليس اليوم تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم السبت، أن تتميز الحالة الجوية عامة بطقس حار نسبيا بكل من سهول تادلة، والمنطقة الشرقية، وكذا أقصى كل من جنوب وجنوب شرق البلاد. ويرتقب نزول قطرات مطرية أو زخات رعدية فوق شرق البلاد والريف، حيث ستمتد بعد ذلك نحو الواجهة المتوسطية، فيما ستكون الأجواء غائمة', 'size': 3}, {'id': '401', 'title': 'توقعات أحوال الطقس اليوم السبت', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%aa%d9%88%d9%82%d8%b9%d8%a7%d8%aa-%d8%a3%d8%ad%d9%88%d8%a7%d9%84-%d8%a7%d9%84%d8%b7%d9%82%d8%b3-%d8%a7%d9%84%d9%8a%d9%88%d9%85-%d8%a7%d9%84%d8%b3%d8%a8%d8%aa-24/', 'summary': 'توقعات أحوال الطقس اليوم السبت. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم السبت، أن تتميز الحالة الجوية عامة بطقس حار نسبيا بكل من سهول تادلة، والمنطقة الشرقية، وكذا أقصى كل من جنوب وجنوب شرق البلاد. ويرتقب نزول قطرات مطرية أو زخات رعدية فوق شرق البلاد والريف، حيث ستمتد بعد ذلك نحو الواجهة المتوسطية، فيما ستكون الأجواء غائمة أحيانا …  توقعات أحوال الطقس اليوم السبت     .', 'size': 3}], 'main_title': 'توقعات أحوال الطقس لليوم السبت'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    