<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 20/09/2025 - 18h25</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '9', 'title': 'اضطرابات في عدة مطارات أوروبية كبرى بسبب هجوم إلكتروني', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d8%a7%d8%b6%d8%b7%d8%b1%d8%a7%d8%a8%d8%a7%d8%aa-%d9%81%d9%8a-%d8%b9%d8%af%d8%a9-%d9%85%d8%b7%d8%a7%d8%b1%d8%a7%d8%aa-%d8%a3%d9%88%d8%b1%d9%88%d8%a8%d9%8a%d8%a9-%d9%83%d8%a8%d8%b1%d9%89-%d8%a8%d8%b3-1627080.html', 'summary': 'اضطرابات في عدة مطارات أوروبية كبرى بسبب هجوم إلكتروني. تشهد عدة مطارات أوروبية كبرى من بينها مطارات بروكسل وهيثرو في لندن وبرلين، اضطرابات السبت بسبب حادث “إلكتروني” أثّر على برمجيات تزوّدتها بها شركة كولينز أيروسبايس، بحسب ما أفادت الشركة. وقالت الشركة “أُبلغنا بعطل إلكتروني في برنامجنا +ميوز+ (MUSE) في عدّة مطارات”، مضيفة أنّ التأثير “يقتصر على التسجيل الإلكتروني للمسافرين وتسليم الأمتعة”. وتسبب هجوم إلكتروني  اضطرابات في عدة مطارات أوروبية كبرى بسبب هجوم إلكتروني     - هسبريس جريدة إلكترونية مغربية .', 'size': 2}, {'id': '359', 'title': 'هجوم سيبراني يُربك مطارات كبرى في أوروبا', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d9%87%d8%ac%d9%88%d9%85-%d8%b3%d9%8a%d8%a8%d8%b1%d8%a7%d9%86%d9%8a-%d9%8a%d9%8f%d8%b1%d8%a8%d9%83-%d9%85%d8%b7%d8%a7%d8%b1%d8%a7%d8%aa-%d9%83%d8%a8%d8%b1%d9%89-%d9%81%d9%8a-%d8%a3%d9%88%d8%b1%d9%88/', 'summary': 'هجوم سيبراني يُربك مطارات كبرى في أوروبا. تشهد مطارات أوروبية كبرى، من بينها بروكسل وبرلين وهيثرو في لندن، اضطرابات السبت بسبب هجوم سيبراني على برنامج تسجيل الركاب "ميوز" (MUSE) لشركة كولينز أيروسبايس. وأوضحت الشركة أن العطل يقتصر على التسجيل الإلكتروني للمسافرين وتسليم الأمتعة. وأكد مطار بروكسل أن الهجوم وقع مساء الجمعة، ما أثر على جدول الرحلات، وأدى إلى إلغاء 10 رحلات وتأخير  هجوم سيبراني يُربك مطارات كبرى في أوروبا     .', 'size': 2}, {'id': '410', 'title': 'هجوم سيبراني يتسبب في اضطرابات بمطارات أوروبية كبرى', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d9%87%d8%ac%d9%88%d9%85-%d8%b3%d9%8a%d8%a8%d8%b1%d8%a7%d9%86%d9%8a-%d9%8a%d8%aa%d8%b3%d8%a8%d8%a8-%d9%81%d9%8a-%d8%a7%d8%b6%d8%b7%d8%b1%d8%a7%d8%a8%d8%a7%d8%aa-%d8%a8%d9%85%d8%b7%d8%a7%d8%b1%d8%a7/', 'summary': 'هجوم سيبراني يتسبب في اضطرابات بمطارات أوروبية كبرى. شهدت العديد من المطارات الأوروبية الكبرى من بينها مطارات بروكسل وهيثرو في لندن وبرلين، اضطرابات اليوم السبت 20 شتنبر 2025، بسبب مشكلة “إلكترونية” أثّرت على برمجيات تزوّدها بها شركة كولينز أيروسبايس. وقالت الشركة لوكالة فرانس بريس،”أُبلغنا بعطل إلكتروني في برنامجنا +ميوز+ (MUSE) في مطارات عدة”، مضيفة أنّ التأثير “يقتصر على التسجيل الإلكتروني للمسافرين …  هجوم سيبراني يتسبب في اضطرابات بمطارات أوروبية كبرى     .', 'size': 3}], 'main_title': 'هجوم سيبراني يتسبب في اضطرابات بمطارات أوروبية كبرى'}, {'community_id': '9', 'articles': [{'id': '21', 'title': 'حموشي يجري زيارة عمل إلى دولة تركيا', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-658821.html', 'summary': 'حموشي يجري زيارة عمل إلى دولة تركيا. هبة بريس – وكالات يجري المدير العام للأمن الوطني ولمراقبة التراب الوطني عبد اللطيف حموشي زيارة عمل إلى دولة تركيا، على رأس وفد أمني رفيع المستوى، وذلك على هامش مشاركته في المنتدى الدولي الخاص بعرض تجهيزات الأمن الداخلي والمستجدات التكنولوجية والابتكارات العلمية ذات الصلة بالعمل الأمني ¨IGEF 2025¨، الذي تحتضنه العاصمة التركية أنقرة، خلال الفترة', 'size': 5}, {'id': '205', 'title': 'عبد اللطيف حموشي في تركيا', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d8%b9%d8%a8%d8%af-%d8%a7%d9%84%d9%84%d8%b7%d9%8a%d9%81-%d8%ad%d9%85%d9%88%d8%b4%d9%8a-%d9%81%d9%8a-%d8%aa%d8%b1%d9%83%d9%8a%d8%a7-%d9%8a%d8%ac%d8%b1%d9%8a-%d8%a7%d9%84%d9%85%d8%af%d9%8a%d8%b1-%d8%a7/', 'summary': 'عبد اللطيف حموشي في تركيا.  – متابعة عبد اللطيف حموشي في تركيا يجري المدير العام للأمن الوطني ولمراقبة التراب الوطني عبد اللطيف حموشي زيارة عمل إلى دولة تركيا، على رأس وفد أمني رفيع...  عبد اللطيف حموشي في تركيا     .', 'size': 3}, {'id': '230', 'title': 'عبد اللطيف حموشي في زيارة عمل لتركيا على رأس وفد أمني', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%b9%d8%a8%d8%af-%d8%a7%d9%84%d9%84%d8%b7%d9%8a%d9%81-%d8%ad%d9%85%d9%88%d8%b4%d9%8a-%d9%81%d9%8a-%d8%b2%d9%8a%d8%a7%d8%b1%d8%a9-%d8%b9%d9%85%d9%84-%d9%84%d8%aa%d8%b1%d9%83%d9%8a%d8%a7-%d8%b9%d9%84/', 'summary': 'عبد اللطيف حموشي في زيارة عمل لتركيا على رأس وفد أمني. المساء اليوم: يجري المدير العام للأمن الوطني ولمراقبة التراب الوطني، عبد اللطيف حموشي، زيارة عمل إلى تركيا، على رأس وفد أمني رفيع المستوى، وذلك على هامش مشاركته في المنتدى الدولي الخاص بعرض تجهيزات الأمن الداخلي', 'size': 5}], 'main_title': 'حموشي يجري زيارة عمل إلى دولة تركيا'}, {'community_id': '5', 'articles': [{'id': '40', 'title': 'الطقس غدا السبت.. انخفاض نسبي لدرجات الحرارة خلال النهار مع استقرار البحر', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-658739.html', 'summary': 'الطقس غدا السبت.. انخفاض نسبي لدرجات الحرارة خلال النهار مع استقرار البحر. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليوم غد السبت، أن تتميز الحالة الجوية عامة بطقس حار نسبيا بكل من السهول تادلة، الرحامنة، وهضاب والماس والفوسفاط والسايس، وسوس، والجنوب الشرقي والأقاليم الجنوبية. كما يرتقب تشكل سحب منخفضة وكتل ضبابية محلية فوق السواحل الوسطى والواجهة المتوسطية خلال الصباح والليل، فضلا عن انتشار سحب غير مستقرة مصحوبة بقطرات', 'size': 3}, {'id': '178', 'title': 'توقعات أحوال الطقس.. سحب منخفضة وكتل ضبابية محلية', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%aa%d9%88%d9%82%d8%b9%d8%a7%d8%aa-%d8%a3%d8%ad%d9%88%d8%a7%d9%84-%d8%a7%d9%84%d8%b7%d9%82%d8%b3-%d8%b3%d8%ad%d8%a8-%d9%85%d9%86%d8%ae%d9%81%d8%b6%d8%a9-%d9%88%d9%83%d8%aa%d9%84-%d8%b6%d8%a8%d8%a7/', 'summary': 'توقعات أحوال الطقس.. سحب منخفضة وكتل ضبابية محلية. تتوقع المديرية العامة للأرصاد الجوية، اليوم السبت، أن تتميز الحالة الجوية عامة بطقس حار نسبيا بكل من السهول تادلة، الرحامنة، وهضاب والماس والفوسفاط والسايس، وسوس، والجنوب الشرقي والأقاليم الجنوبية. كما يرتقب تشكل سحب منخفضة وكتل ضبابية محلية فوق السواحل الوسطى والواجهة المتوسطية خلال الصباح والليل، فضلا عن انتشار سحب غير مستقرة مصحوبة بقطرات متفرقة أو  توقعات أحوال الطقس.. سحب منخفضة وكتل ضبابية محلية     .', 'size': 3}, {'id': '239', 'title': 'توقعات أحوال الطقس اليوم السبت', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%aa%d9%88%d9%82%d8%b9%d8%a7%d8%aa-%d8%a3%d8%ad%d9%88%d8%a7%d9%84-%d8%a7%d9%84%d8%b7%d9%82%d8%b3-%d8%a7%d9%84%d9%8a%d9%88%d9%85-%d8%a7%d9%84%d8%b3%d8%a8%d8%aa-31/', 'summary': 'توقعات أحوال الطقس اليوم السبت. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم السبت، أن تتميز الحالة الجوية عامة بطقس حار نسبيا بكل من السهول تادلة، الرحامنة، وهضاب والماس والفوسفاط والسايس، وسوس، والجنوب الشرقي والأقاليم الجنوبية. كما يرتقب تشكل سحب منخفضة وكتل ضبابية محلية فوق السواحل الوسطى والواجهة المتوسطية خلال الصباح والليل، فضلا عن انتشار سحب غير مستقرة مصحوبة …  توقعات أحوال الطقس اليوم السبت     .', 'size': 3}], 'main_title': 'الطقس غدا السبت.. انخفاض نسبي لدرجات الحرارة خلال النهار مع استقرار البحر'}, {'community_id': '1', 'articles': [{'id': '59', 'title': 'حموشي يجري زيارة عمل إلى تركيا', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/206470', 'summary': 'حموشي يجري زيارة عمل إلى تركيا.  يجري المدير العام للأمن الوطني ولمراقبة التراب الوطني عبد اللطيف حموشي زيارة عمل إلى دولة تركيا، على رأس وفد أمني رفيع المستوى، وذلك على هامش مشاركته في المنتدى الدولي الخاص بعرض تجهيزات الأمن الداخلي والمستجدات التكنولوجية والابتكارات العلمية ذات الصلة بالعمل الأمني ¨IGEF 2025¨، الذي تحتضنه العاصمة التركية أنقرة، خلال الفترة الممتدة ما بين', 'size': 7}, {'id': '127', 'title': 'المنتدى الدولي IGEF 2025.. حموشي على رأس وفد أمني في زيارة عمل إلى تركيا', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a7%d9%84%d9%85%d9%86%d8%aa%d8%af%d9%89-%d8%a7%d9%84%d8%af%d9%88%d9%84%d9%8a-igef-2025-%d8%ad%d9%85%d9%88%d8%b4%d9%8a-%d8%b9%d9%84%d9%89-%d8%b1%d8%a3%d8%b3-%d9%88%d9%81%d8%af-%d8%a3%d9%85%d9%86/', 'summary': 'المنتدى الدولي IGEF 2025.. حموشي على رأس وفد أمني في زيارة عمل إلى تركيا. يجري المدير العام للأمن الوطني ولمراقبة التراب الوطني، عبد اللطيف حموشي، زيارة عمل إلى دولة تركيا، على رأس وفد أمني رفيع المستوى، وذلك على هامش مشاركته في المنتدى الدولي الخاص بعرض تجهيزات الأمن الداخلي والمستجدات التكنولوجية والابتكارات العلمية ذات الصلة بالعمل الأمني ¨IGEF 2025¨، الذي تحتضنه العاصمة التركية أنقرة، خلال الفترة الممتدة ما بين 18', 'size': 6}, {'id': '156', 'title': 'حموشي يبحث تعزيز الشراكة الأمنية مع تركيا استعدادا للاستحقاقات الدولية الكبرى', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1101237.html', 'summary': 'حموشي يبحث تعزيز الشراكة الأمنية مع تركيا استعدادا للاستحقاقات الدولية الكبرى. يجري المدير العام للأمن الوطني ولمراقبة التراب الوطني عبد اللطيف حموشي زيارة عمل إلى دولة تركيا، على رأس وفد أمني رفيع المستوى، وذلك على هامش مشاركته في المنتدى الدولي الخاص بعرض تجهيزات الأمن الداخلي والمستجدات التكنولوجية والابتكارات العلمية ذات الصلة بالعمل الأمني ¨IGEF 2025¨، الذي تحتضنه العاصمة التركية أنقرة، خلال الفترة الممتدة ما بين 18 ظهرت المقالة حموشي يبحث تعزيز الشراكة الأمنية مع تركيا استعدادا للاستحقاقات الدولية الكبرى  .', 'size': 6}, {'id': '220', 'title': 'السيد حموشي يترأس وفدا رفيعا إلى المنتدى الدولي لتجهيزات الأمن الداخلي والمستجدات التكنولوجية والابتكارات العلمية', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/227317/', 'summary': 'السيد حموشي يترأس وفدا رفيعا إلى المنتدى الدولي لتجهيزات الأمن الداخلي والمستجدات التكنولوجية والابتكارات العلمية. يجري المدير العام للأمن الوطني ولمراقبة التراب الوطني عبد اللطيف حموشي زيارة عمل إلى دولة تركيا، على رأس وفد أمني رفيع المستوى، وذلك على هامش مشاركته في المنتدى الدولي الخاص بعرض تجهيزات الأمن الداخلي والمستجدات التكنولوجية والابتكارات العلمية ذات الصلة بالعمل الأمني ¨IGEF 2025¨، الذي تحتضنه العاصمة التركية أنقرة، خلال الفترة الممتدة ما بين 18', 'size': 5}, {'id': '370', 'title': 'حموشي يلتقي كبار المسؤولين الأمنيين في منتدى الأمن الداخلي بتركيا', 'source': 'rue20.com', 'link': 'https://rue20.com/938003.html', 'summary': 'حموشي يلتقي كبار المسؤولين الأمنيين في منتدى الأمن الداخلي بتركيا.  ا الرباط يجري المدير العام للأمن الوطني ولمراقبة التراب الوطني عبد اللطيف حموشي زيارة عمل إلى دولة تركيا، على رأس وفد أمني رفيع المستوى، وذلك على هامش مشاركته في المنتدى الدولي الخاص بعرض تجهيزات الأمن الداخلي والمستجدات التكنولوجية والابتكارات العلمية ذات الصلة بالعمل الأمني ¨IGEF 2025¨، الذي تحتضنه العاصمة التركية أنقرة، خلال الفترة الخبر حموشي يلتقي كبار المسؤولين الأمنيين في منتدى الأمن الداخلي بتركيا  .', 'size': 5}], 'main_title': 'حموشي يجري زيارة عمل إلى تركيا'}, {'community_id': '4', 'articles': [{'id': '93', 'title': 'فيينا.. المغرب يترأس الاجتماع العام ال11 للشبكة الدولية للأمن والسلامة النوويين', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/413027.html', 'summary': 'فيينا.. المغرب يترأس الاجتماع العام ال11 للشبكة الدولية للأمن والسلامة النوويين. عقدت الشبكة الدولية للأمن والسلامة النوويين اجتماعها العام الحادي عشر بفيينا، برئاسة مدير الوكالة المغربية للأمن والسلامة في المجالين النووي والإشعاعي سعيد ملين.وأبرز ملين، الذي', 'size': 2}, {'id': '218', 'title': 'فيينا.. المغرب يترأس الاجتماع العام الـ11 للشبكة الدولية للأمن والسلامة النوويين', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d9%81%d9%8a%d9%8a%d9%86%d8%a7-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d9%8a%d8%aa%d8%b1%d8%a3%d8%b3-%d8%a7%d9%84%d8%a7%d8%ac%d8%aa%d9%85%d8%a7%d8%b9-%d8%a7%d9%84%d8%b9%d8%a7%d9%85-%d8%a7%d9%84%d9%801/', 'summary': 'فيينا.. المغرب يترأس الاجتماع العام الـ11 للشبكة الدولية للأمن والسلامة النوويين. عقدت الشبكة الدولية للأمن والسلامة النوويين اجتماعها العام الحادي عشر بفيينا، برئاسة مدير الوكالة المغربية للأمن والسلامة في المجالين النووي والإشعاعي  فيينا.. المغرب يترأس الاجتماع العام الـ11 للشبكة الدولية للأمن والسلامة النوويين     .', 'size': 2}], 'main_title': 'فيينا.. المغرب يترأس الاجتماع العام ال11 للشبكة الدولية للأمن والسلامة النوويين'}, {'community_id': '8', 'articles': [{'id': '128', 'title': 'كأس العالم 2026.. أزيد من 4,5 ملايين مشجع شاركوا في المرحلة الأولى من بيع التذاكر', 'source': 'kifache.com', 'link': 'https://kifache.com/%d9%83%d8%a3%d8%b3-%d8%a7%d9%84%d8%b9%d8%a7%d9%84%d9%85-2026-%d8%a3%d8%b2%d9%8a%d8%af-%d9%85%d9%86-45-%d9%85%d9%84%d8%a7%d9%8a%d9%8a%d9%86-%d9%85%d8%b4%d8%ac%d8%b9-%d8%b4%d8%a7%d8%b1%d9%83%d9%88/', 'summary': 'كأس العالم 2026.. أزيد من 4,5 ملايين مشجع شاركوا في المرحلة الأولى من بيع التذاكر. أعلن الاتحاد الدولي لكرة القدم (فيفا)، مساء يوم الجمعة (19 شتنبر)، أن أكثر من 4,5 ملايين مشجع من 216 دولة ومنطقة شاركوا في المرحلة الأولى من بيع تذاكر كأس العالم 2026 لكرة القدم، من خلال السحب الخاص بالبيع المسبق لتذاكر “فيزا”. وتعد هذه المرحلة أول فرصة لعشاق كرة القدم لتأمين مقاعدهم في نسخة المونديال المقبلة،', 'size': 2}, {'id': '411', 'title': 'أزيد من 4,5 ملايين مشجع شاركوا في المرحلة الأولى من بيع تذاكر مونديال 2026', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a3%d8%b2%d9%8a%d8%af-%d9%85%d9%86-45-%d9%85%d9%84%d8%a7%d9%8a%d9%8a%d9%86-%d9%85%d8%b4%d8%ac%d8%b9-%d8%b4%d8%a7%d8%b1%d9%83%d9%88%d8%a7-%d9%81%d9%8a-%d8%a7%d9%84%d9%85%d8%b1%d8%ad%d9%84%d8%a9/', 'summary': 'أزيد من 4,5 ملايين مشجع شاركوا في المرحلة الأولى من بيع تذاكر مونديال 2026. أعلن الاتحاد الدولي لكرة القدم (فيفا)، مساء أمس الجمعة 19 شتنبر 2025، أن أكثر من 4,5 ملايين مشجع من 216 دولة ومنطقة شاركوا في المرحلة الأولى من بيع تذاكر كأس العالم 2026 لكرة القدم، من خلال السحب الخاص بالبيع المسبق لتذاكر “فيزا”. وتعد هذه المرحلة أول فرصة لعشاق كرة القدم لتأمين مقاعدهم في …  أزيد من 4,5 ملايين مشجع شاركوا في المرحلة الأولى من بيع تذاكر مونديال 2026     .', 'size': 2}], 'main_title': 'كأس العالم 2026.. أزيد من 4,5 ملايين مشجع شاركوا في المرحلة الأولى من بيع التذاكر'}, {'community_id': '2', 'articles': [{'id': '225', 'title': 'الصين تشيد بالقيادة المتبصرة لجلالة الملك محمد السادس ومبادراته الرامية للازدهار الشامل لإفريقيا', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/227295/', 'summary': 'الصين تشيد بالقيادة المتبصرة لجلالة الملك محمد السادس ومبادراته الرامية للازدهار الشامل لإفريقيا. أشاد وزير الشؤون الخارجية الصيني، وانغ يي، بالاستقرار الذي ينعم به المغرب، بفضل قيادة صاحب الجلالة الملك محمد السادس، وبأوراش التنمية التي تم اطلاقها تحت قيادة جلالته. وأعرب وزير الخارجية الصيني أيضا عن تقدير بلاده للمبادرات الملكية الرامية لازدهار القارة الافريقية، وذلك بمناسبة المحادثات التي أجراها اليوم الجمعة ببكين، مع وزير الشؤون الخارجية والتعاون الافريقي', 'size': 2}, {'id': '244', 'title': 'الصين تنوه بالقيادة المتبصرة للملك محمد السادس وبالمبادرات الملكية الرامية للازدهار الشامل لإفريقيا', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d8%b5%d9%8a%d9%86-%d8%aa%d9%86%d9%88%d9%87-%d8%a8%d8%a7%d9%84%d9%82%d9%8a%d8%a7%d8%af%d8%a9-%d8%a7%d9%84%d9%85%d8%aa%d8%a8%d8%b5%d8%b1%d8%a9-%d9%84%d9%84%d9%85%d9%84%d9%83-%d9%85%d8%ad/', 'summary': 'الصين تنوه بالقيادة المتبصرة للملك محمد السادس وبالمبادرات الملكية الرامية للازدهار الشامل لإفريقيا. نوه وزير الشؤون الخارجية الصيني، وانغ يي، بالاستقرار الذي ينعم به المغرب، بفضل قيادة الملك محمد السادس، وبأوراش التنمية التي تم إطلاقها تحت قيادة الملك محمد السادس. وفي هذا الصدد، أعرب وزير الخارجية الصيني أيضا عن تقدير بلاده للمبادرات الملكية الرامية لازدهار القارة الافريقية، وذلك بمناسبة المحادثات التي أجراها اليوم الجمعة 19 شتنبر …  الصين تنوه بالقيادة المتبصرة للملك محمد السادس وبالمبادرات الملكية الرامية للازدهار الشامل لإفريقيا     .', 'size': 2}], 'main_title': 'الصين تشيد بالقيادة المتبصرة لجلالة الملك محمد السادس ومبادراته الرامية للازدهار الشامل لإفريقيا'}, {'community_id': '3', 'articles': [{'id': '226', 'title': 'الرئيس العام لمجموعة الموانئ البريطانية: المغرب يجني ثمار استراتيجيته الطموحة', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/227293/', 'summary': 'الرئيس العام لمجموعة الموانئ البريطانية: المغرب يجني ثمار استراتيجيته الطموحة. قال الرئيس المدير العام لمجموعة الموانئ الرئيسية في المملكة المتحدة، غيراينت إيفانز، إن المغرب يجني ثمار استراتيجيته “الطموحة” الرامية إلى جعل الموانئ في صلب تنميته الاقتصادية. وأبرز السيد إيفانز، في تصريح لوكالة المغرب العربي للأنباء، الأهمية الكبرى للمشاريع التي أشرف صاحب الجلالة الملك محمد السادس على تدشينها، أمس الخميس، في إطار إعادة هيكلة وتطوير المركب', 'size': 2}, {'id': '240', 'title': 'مسؤول بريطاني: المغرب يجني ثمار استراتيجيته المينائية الطموحة', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d9%85%d8%b3%d8%a4%d9%88%d9%84-%d8%a8%d8%b1%d9%8a%d8%b7%d8%a7%d9%86%d9%8a-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d9%8a%d8%ac%d9%86%d9%8a-%d8%ab%d9%85%d8%a7%d8%b1-%d8%a7%d8%b3%d8%aa%d8%b1%d8%a7%d8%aa/', 'summary': 'مسؤول بريطاني: المغرب يجني ثمار استراتيجيته المينائية الطموحة. قال الرئيس المدير العام لمجموعة الموانئ الرئيسية في المملكة المتحدة، غيراينت إيفانز، إن المغرب يجني ثمار استراتيجيته “الطموحة” الرامية إلى جعل الموانئ في صلب تنميته الاقتصادية. وأوضح إيفانز، في تصريح لوكالة المغرب العربي للأنباء، الأهمية الكبرى للمشاريع التي أشرف الملك محمد السادس على تدشينها، أمس الخميس 18 شتنبر 2025، في إطار إعادة هيكلة …  مسؤول بريطاني: المغرب يجني ثمار استراتيجيته المينائية الطموحة     .', 'size': 2}], 'main_title': 'الرئيس العام لمجموعة الموانئ البريطانية: المغرب يجني ثمار استراتيجيته الطموحة'}, {'community_id': '6', 'articles': [{'id': '276', 'title': '"أحرار مراكش" يشيدون بنتائج ملموسة للحكومة في القطاعات الأساسية', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d8%a3%d8%ad%d8%b1%d8%a7%d8%b1-%d9%85%d8%b1%d8%a7%d9%83%d8%b4-%d9%8a%d8%b4%d9%8a%d8%af%d9%88%d9%86-%d8%a8%d9%86%d8%aa%d8%a7%d8%a6%d8%ac-%d9%85%d9%84%d9%85%d9%88%d8%b3%d8%a9-%d9%84%d9%84%d8%ad-1627183.html', 'summary': '"أحرار مراكش" يشيدون بنتائج ملموسة للحكومة في القطاعات الأساسية. أكد مسؤولون منتمون لحزب التجمع الوطني للأحرار دعمهم وتشبّثهم بالخطوات التي تواصل الحكومة الحالية القيام بها على مستوى القطاعات الأساسية، سواء تعلق الأمر بالصحة أو التعليم أو الماء. وقال محمد القباج، المنسق الجهوي للحزب بجهة مراكش-آسفي، إن “من بين إنجازات الحكومة الحالية أنها وطّدت الديمقراطية بالبلاد، بعد أن نالت شرعيتها عقب انتخابات 2021”. وأكد القباج،  "أحرار مراكش" يشيدون بنتائج ملموسة للحكومة في القطاعات الأساسية     - هسبريس جريدة إلكترونية مغربية .', 'size': 2}, {'id': '313', 'title': '"مسار الإنجازات".. القباج يؤكد نجاح "التجمع" في قيادة إصلاحات أفرزت نتائج يلمسها المواطنون في عدة قطاعات', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/politic/413063.html', 'summary': '"مسار الإنجازات".. القباج يؤكد نجاح "التجمع" في قيادة إصلاحات أفرزت نتائج يلمسها المواطنون في عدة قطاعات. أكد محمد القباج المنسق الجهوي للتجمع الوطني للأحرار بجهة مراكش آسفي، اليوم السبت بمدينة مراكش، أن الحزب نجح بفضل التحالف الحكومي في قيادة إصلاحات اقتصادية', 'size': 2}, {'id': '351', 'title': 'القباج: الحكومة تنجز إصلاحات واقعية والأحرار يراهن على تقليص الفوارق الاجتماعية', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1101295.html', 'summary': 'القباج: الحكومة تنجز إصلاحات واقعية والأحرار يراهن على تقليص الفوارق الاجتماعية. أكد محمد القباج، المنسق الجهوي لحزب التجمع الوطني للأحرار بجهة مراكش آسفي، اليوم السبت بمدينة مراكش، أن الحزب تمكن، بفضل التحالف الحكومي، من قيادة إصلاحات اقتصادية واجتماعية أفرزت نتائج ملموسة في عدد من القطاعات. وأوضح في كلمته خلال المحطة الخامسة من برنامج “مسار الإنجازات” بجهة مراكش آسفي، أن عمل الحكومة أسفر عن نتائج واضحة للمواطنين، ظهرت المقالة القباج: الحكومة تنجز إصلاحات واقعية والأحرار يراهن على تقليص الفوارق الاجتماعية  .', 'size': 3}], 'main_title': 'القباج: الحكومة تنجز إصلاحات واقعية والأحرار يراهن على تقليص الفوارق الاجتماعية'}, {'community_id': '7', 'articles': [{'id': '324', 'title': 'أخنوش من مراكش: الحكومة أولت أهمية "قصوى" لقطاعي الصحة والتعليم', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/413075.html', 'summary': 'أخنوش من مراكش: الحكومة أولت أهمية "قصوى" لقطاعي الصحة والتعليم. أكد رئيس حزب التجمع الوطني للأحرار، عزيز أخنوش، اليوم السبت بمراكش، أن الحكومة أولت أهمية "قصوى" لقطاعي الصحة والتعليم، وجعلتهما في صلب الأولويات، باعتبارهما الدعامة', 'size': 2}, {'id': '372', 'title': 'أخنوش: الحكومة أولت أهمية قصوى للصحة والتعليم وجعلتهما في صلب الأولويات', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/476187.html', 'summary': 'أخنوش: الحكومة أولت أهمية قصوى للصحة والتعليم وجعلتهما في صلب الأولويات. بحضور قيادات حزب التجمع الوطني للأحرار وعدد من المنتخبين المحليين والجهويين بجهة مراكش آسفي، قال رئيس الحزب، عزيز أخنوش، اليوم السبت بمراكش، إن الحكومة أولت أهمية "قصوى" لقطاعي الصحة والتعليم، وجعلتهما في صلب الأولويات باعتبارهما الدعامة الأساسية لأي مشروع تنموي يروم تحقيق العدالة الاجتماعية وتقليص الفوارق المجالية.', 'size': 2}], 'main_title': 'أخنوش من مراكش: الحكومة أولت أهمية "قصوى" لقطاعي الصحة والتعليم'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    