<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 15/09/2025 - 06h13</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '3', 'articles': [{'id': '23', 'title': 'انطلاق الاجتماع التحضيري لوزراء الخارجية بالدوحة لبحث الهجوم الإسرائيلي على قطر', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-657250.html', 'summary': 'انطلاق الاجتماع التحضيري لوزراء الخارجية بالدوحة لبحث الهجوم الإسرائيلي على قطر. هبة بريس انطلقت، اليوم الأحد بالدوحة، أشغال اجتماع وزراء الخارجية التحضيري للقمة العربية – الإسلامية الطارئة، التي تنعقد لبحث الهجوم الإسرائيلي على دولة قطر. ويمثل المغرب في أشغال الاجتماع ناصر بوريطة وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج. كما يضم الوفد المغربي، على الخصوص، محمد آيت وعلي، سفير المغرب في مصر والمندوب الدائم للمملكة لدى الجامعة العربية، ومحمد ستري، سفير المغرب في قطر. ويتضمن جدول أعمال الاجتماع التحضيري بحث الهجوم الإسرائيلي على دولة قطر ومناقشة مشروع البيان الذي سيرفع للقمة العربية – الإسلامية الطارئة التي ستنعقد يوم غد الاثنين بالدوحة.', 'size': 5}, {'id': '130', 'title': 'بمشاركة المغرب.. انطلاق أشغال الاجتماع التحضيري للقمة العربية الإسلامية الطارئة في الدوحة', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a8%d9%85%d8%b4%d8%a7%d8%b1%d9%83%d8%a9-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d8%a7%d9%86%d8%b7%d9%84%d8%a7%d9%82-%d8%a3%d8%b4%d8%ba%d8%a7%d9%84-%d8%a7%d9%84%d8%a7%d8%ac%d8%aa%d9%85%d8%a7%d8%b9/', 'summary': 'بمشاركة المغرب.. انطلاق أشغال الاجتماع التحضيري للقمة العربية الإسلامية الطارئة في الدوحة. انطلقت، اليوم الأحد (14 شتنبر) بالدوحة، أشغال اجتماع وزراء الخارجية التحضيري للقمة العربية – الإسلامية الطارئة، التي تنعقد لبحث الهجوم الإسرائيلي على دولة قطر. ويمثل المغرب في أشغال الاجتماع ناصر بوريطة وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج. كما يضم الوفد المغربي، على الخصوص، محمد آيت وعلي، سفير المغرب في مصر والمندوب الدائم للمملكة', 'size': 5}, {'id': '156', 'title': 'المغرب يشارك في الأشغال التحضيرية للقمة العربية الاسلامية بالدوحة', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1099616.html', 'summary': 'المغرب يشارك في الأشغال التحضيرية للقمة العربية الاسلامية بالدوحة. انطلقت، اليوم الأحد بالدوحة، أشغال اجتماع وزراء الخارجية التحضيري للقمة العربية – الإسلامية الطارئة، التي تنعقد لبحث الهجوم الإسرائيلي على دولة قطر. ويمثل المغرب في أشغال الاجتماع ناصر بوريطة وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج. كما يضم الوفد المغربي، على الخصوص، محمد آيت وعلي، سفير المغرب في مصر والمندوب الدائم للمملكة لدى الجامعة ظهرت المقالة المغرب يشارك في الأشغال التحضيرية للقمة العربية الاسلامية بالدوحة  .', 'size': 5}, {'id': '179', 'title': 'بحضور بوريطة.. انطلاق الإجتماع التحضيري للقمة العربية الإسلامية الطارئة بالدوحة', 'source': 'rue20.com', 'link': 'https://rue20.com/936235.html', 'summary': 'بحضور بوريطة.. انطلاق الإجتماع التحضيري للقمة العربية الإسلامية الطارئة بالدوحة.  / الرباط انطلقت، اليوم الأحد بالدوحة، أشغال اجتماع وزراء الخارجية التحضيري للقمة العربية – الإسلامية الطارئة، التي تنعقد لبحث الهجوم الإسرائيلي على دولة قطر. ويمثل المغرب في أشغال الاجتماع ناصر بوريطة وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج. كما يضم الوفد المغربي، على الخصوص، محمد آيت وعلي، سفير المغرب في مصر والمندوب الخبر بحضور بوريطة.. انطلاق الإجتماع التحضيري للقمة العربية الإسلامية الطارئة بالدوحة  .', 'size': 5}, {'id': '217', 'title': 'انطلاق أشغال الاجتماع التحضيري للقمة العربية – الإسلامية الطارئة بالدوحة بمشاركة المغرب', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/227020/', 'summary': 'انطلاق أشغال الاجتماع التحضيري للقمة العربية – الإسلامية الطارئة بالدوحة بمشاركة المغرب. الدوحة – انطلقت، اليوم الأحد بالدوحة، أشغال اجتماع وزراء الخارجية التحضيري للقمة العربية – الإسلامية الطارئة، التي تنعقد لبحث الهجوم الإسرائيلي على دولة قطر. ويمثل المغرب في أشغال الاجتماع السيد ناصر بوريطة وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج. كما يضم الوفد المغربي، على الخصوص، محمد آيت وعلي، سفير المغرب في مصر والمندوب الدائم', 'size': 5}], 'main_title': 'انطلاق الاجتماع التحضيري لوزراء الخارجية بالدوحة لبحث الهجوم الإسرائيلي على قطر'}, {'community_id': '7', 'articles': [{'id': '102', 'title': 'بطولة العالم لألعاب القوى.. إقصاء جماعي للعدائين المغاربة في سباق 1500م', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/sport/others/412733.html', 'summary': 'بطولة العالم لألعاب القوى.. إقصاء جماعي للعدائين المغاربة في سباق 1500م. أقصي العداؤون المغاربة فؤاد المسعودي، وحفيظ رزقي، وأنس الساعي، اليوم الأحد، خلال التصفيات المؤهلة لنصف نهائي سباق 1500 متر ، المدرج ضمن منافسات بطولة العالم', 'size': 3}, {'id': '134', 'title': 'بطولة العالم لألعاب القوى طوكيو 2025.. إقصاء العدائين المغاربة المسعودي ورزقي والساعي في سباق 1500م', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a8%d8%b7%d9%88%d9%84%d8%a9-%d8%a7%d9%84%d8%b9%d8%a7%d9%84%d9%85-%d9%84%d8%a3%d9%84%d8%b9%d8%a7%d8%a8-%d8%a7%d9%84%d9%82%d9%88%d9%89-%d8%b7%d9%88%d9%83%d9%8a%d9%88-2025-%d8%a5%d9%82%d8%b5%d8%a7/', 'summary': 'بطولة العالم لألعاب القوى طوكيو 2025.. إقصاء العدائين المغاربة المسعودي ورزقي والساعي في سباق 1500م. أقصي العداؤون المغاربة فؤاد المسعودي، وحفيظ رزقي، وأنس الساعي، اليوم الأحد (14 شتنبر)، خلال التصفيات المؤهلة لنصف نهائي سباق 1500 متر، المدرج ضمن منافسات بطولة العالم لألعاب القوى، المقامة في طوكيو إلى غاية 21 شتنبر الجاري. وهكذا، حل المسعودي في المركز العاشر ضمن السلسلة الأولى بتوقيت( 83 .37 : 3 )، بينما جاء رزقي في', 'size': 4}, {'id': '172', 'title': 'بطولة العالم لألعاب القوى.. إقصاء العدائين المغاربة فؤاد المسعودي وحفيظ رزقي وأنس الساعي', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a8%d8%b7%d9%88%d9%84%d8%a9-%d8%a7%d9%84%d8%b9%d8%a7%d9%84%d9%85-%d9%84%d8%a3%d9%84%d8%b9%d8%a7%d8%a8-%d8%a7%d9%84%d9%82%d9%88%d9%89-%d8%a5%d9%82%d8%b5%d8%a7%d8%a1-%d8%a7%d9%84%d8%b9%d8%af%d8%a7/', 'summary': 'بطولة العالم لألعاب القوى.. إقصاء العدائين المغاربة فؤاد المسعودي وحفيظ رزقي وأنس الساعي. أقصي العداؤون المغاربة فؤاد المسعودي، وحفيظ رزقي، وأنس الساعي، اليوم الأحد، خلال التصفيات المؤهلة لنصف نهائي سباق 1500 متر، المدرج ضمن منافسات بطولة العالم لألعاب القوى، المقامة في طوكيو إلى غاية 21 شتنبر الجاري. وهكذا، حل المسعودي في المركز العاشر ضمن السلسلة الأولى بتوقيت ( 83 .37 : 3 )، بينما جاء رزقي في المركز  بطولة العالم لألعاب القوى.. إقصاء العدائين المغاربة فؤاد المسعودي وحفيظ رزقي وأنس الساعي     .', 'size': 3}, {'id': '258', 'title': 'إقصاء ثلاثة عدائين مغاربة في سباق 1500م بطولة العالم لألعاب القوى (طوكيو 2025)..', 'source': 'www.alalam.ma', 'link': 'https://www.alalam.ma/إقصاء-ثلاثة-عدائين-مغاربة-في-سباق-1500م-بطولة-العالم-لألعاب-القوى_a29490.html', 'summary': 'إقصاء ثلاثة عدائين مغاربة في سباق 1500م بطولة العالم لألعاب القوى (طوكيو 2025)...  أقصي العداؤون المغاربة فؤاد المسعودي، وحفيظ رزقي، وأنس الساعي، اليوم الأحد، خلال التصفيات المؤهلة لنصف نهائي سباق 1500 متر...', 'size': 2}], 'main_title': 'بطولة العالم لألعاب القوى طوكيو 2025.. إقصاء العدائين المغاربة المسعودي ورزقي والساعي في سباق 1500م'}, {'community_id': '2', 'articles': [{'id': '120', 'title': 'حاملة مروحيات فرنسية ترسو بميناء الدارالبيضاء', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/412744.html', 'summary': 'حاملة مروحيات فرنسية ترسو بميناء الدارالبيضاء. رست حاملة المروحيات البرمائية الفرنسية "تونير"، أمس السبت بميناء الدار البيضاء، حيث ستغادر مجددا يوم 16 شتنبر الجاري متجهة إلى خليج غينيا.وبحسب السفارة الفرنسية بالمغرب،', 'size': 2}, {'id': '326', 'title': 'الأكبر بعد “شارل ديغول”.. حاملة مروحيات فرنسية عملاقة ترسو بميناء الدارالبيضاء', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a7%d9%84%d8%a3%d9%83%d8%a8%d8%b1-%d8%a8%d8%b9%d8%af-%d8%b4%d8%a7%d8%b1%d9%84-%d8%af%d9%8a%d8%ba%d9%88%d9%84-%d8%ad%d8%a7%d9%85%d9%84%d8%a9-%d9%85%d8%b1%d9%88%d8%ad%d9%8a%d8%a7%d8%aa-%d9%81/', 'summary': 'الأكبر بعد “شارل ديغول”.. حاملة مروحيات فرنسية عملاقة ترسو بميناء الدارالبيضاء. رست حاملة المروحيات البرمائية الفرنسية “تونير”، أمس السبت بميناء الدار البيضاء، حيث ستغادر مجددا يوم 16 شتنبر الجاري متجهة إلى خليج غينيا. وبحسب السفارة الفرنسية بالمغرب، فإن هذا التوقف يشكل “فرصة للبحريتين الفرنسية والمغربية لتعزيز علاقاتهما ، خاصة من خلال تنظيم أنشطة وندوات وزيارات مشتركة على مدار الأيام الأربعة”. وتستقبل السفينة دفعة 2025 من برنامج', 'size': 2}], 'main_title': 'حاملة مروحيات فرنسية ترسو بميناء الدارالبيضاء'}, {'community_id': '0', 'articles': [{'id': '131', 'title': 'النصب والاحتيال على الراغبين في الهجرة.. توقيف 4 أشخاص يشتبه في ارتباطهم بشبكة إجرامية في فاس', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a7%d9%84%d9%86%d8%b5%d8%a8-%d9%88%d8%a7%d9%84%d8%a7%d8%ad%d8%aa%d9%8a%d8%a7%d9%84-%d8%b9%d9%84%d9%89-%d8%a7%d9%84%d8%b1%d8%a7%d8%ba%d8%a8%d9%8a%d9%86-%d9%81%d9%8a-%d8%a7%d9%84%d9%87%d8%ac%d8%b1/', 'summary': 'النصب والاحتيال على الراغبين في الهجرة.. توقيف 4 أشخاص يشتبه في ارتباطهم بشبكة إجرامية في فاس. تمكنت عناصر الفرقة الجهوية للشرطة القضائية بفاس بتنسيق وثيق مع مصالح المديرية العامة لمراقبة التراب الوطني، أمس السبت (14 شتنبر)، من توقيف أربعة أشخاص، وهم صاحبة شركة للوساطة في التشغيل وموثق واثنان من الوسطاء، وذلك للاشتباه في ارتباطهم بشبكة إجرامية تنشط في النصب والاحتيال على الراغبين في الهجرة. وذكر مصدر أمني أن المعطيات الأولية للبحث', 'size': 4}, {'id': '173', 'title': 'فاس.. توقيف 4 أشخاص بشبهة النصب والاحتيال على راغبين في الهجرة', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d9%81%d8%a7%d8%b3-%d8%aa%d9%88%d9%82%d9%8a%d9%81-4-%d8%a3%d8%b4%d8%ae%d8%a7%d8%b5-%d8%a8%d8%b4%d8%a8%d9%87%d8%a9-%d8%a7%d9%84%d9%86%d8%b5%d8%a8-%d9%88%d8%a7%d9%84%d8%a7%d8%ad%d8%aa%d9%8a%d8%a7/', 'summary': 'فاس.. توقيف 4 أشخاص بشبهة النصب والاحتيال على راغبين في الهجرة. تمكنت عناصر الفرقة الجهوية للشرطة القضائية بفاس بتنسيق وثيق مع مصالح المديرية العامة لمراقبة التراب الوطني، أمس السبت، من توقيف أربعة أشخاص، وهم صاحبة شركة للوساطة في التشغيل وموثق واثنان من الوسطاء، وذلك للاشتباه في ارتباطهم بشبكة إجرامية تنشط في النصب والاحتيال على الراغبين في الهجرة. وذكر مصدر أمني أن المعطيات الأولية للبحث تشير إلى  فاس.. توقيف 4 أشخاص بشبهة النصب والاحتيال على راغبين في الهجرة     .', 'size': 5}, {'id': '190', 'title': 'فاس.. الأمن يوقف متورطين في النصب والاحتيال على الراغبين في الهجرة', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/475295.html', 'summary': 'فاس.. الأمن يوقف متورطين في النصب والاحتيال على الراغبين في الهجرة. تمكنت عناصر الفرقة الجهوية للشرطة القضائية بفاس بتنسيق وثيق مع مصالح المديرية العامة لمراقبة التراب الوطني، أمس السبت، من توقيف أربعة أشخاص، وهم صاحبة شركة للوساطة في التشغيل وموثق واثنان من الوسطاء، وذلك للاشتباه في ارتباطهم بشبكة إجرامية تنشط في النصب والاحتيال على الراغبين في الهجرة.', 'size': 5}, {'id': '219', 'title': 'فاس: الديستي تطيح بصاحبة شركة للوساطة في التشغيل وموثق ووسيطين في قضية نصب واحتيال على الراغبين في الهجرة', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/227015/', 'summary': 'فاس: الديستي تطيح بصاحبة شركة للوساطة في التشغيل وموثق ووسيطين في قضية نصب واحتيال على الراغبين في الهجرة. \u200eتمكنت الفرقة الجهوية للشرطة القضائية بفاس بتنسيق وثيق مع مصالح المديرية العامة لمراقبة التراب الوطني اليوم السبت 13 شتنبر الجاري، من توقيف أربعة أشخاص، وهم صاحبة شركة للوساطة في التشغيل وموثق واثنان من الوسطاء، وذلك للاشتباه في ارتباطهم بشبكة إجرامية تنشط في النصب والاحتيال على الراغبين في الهجرة. \u200eوتشير المعطيات الأولية للبحث إلى اعتماد الموقوفين', 'size': 5}, {'id': '345', 'title': 'تفكيك شبكة إجرامية بفاس متورطة في توثيق عقود عمل وهمية', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/323344/', 'summary': 'تفكيك شبكة إجرامية بفاس متورطة في توثيق عقود عمل وهمية. تمكنت الفرقة الجهوية للشرطة القضائية بفاس بتنسيق وثيق مع مصالح المديرية العامة لمراقبة التراب الوطني اليوم السبت 13 شتنبر الجاري، من توقيف أربعة أشخاص، وهم صاحبة شركة للوساطة في التشغيل وموثق واثنان من الوسطاء، وذلك للاشتباه في ارتباطهم بشبكة إجرامية تنشط في النصب والاحتيال على الراغبين في الهجرة. \u200eوتشير المعطيات الأولية للبحث إلى اعتماد الموقوفين', 'size': 4}], 'main_title': 'فاس.. توقيف 4 أشخاص بشبهة النصب والاحتيال على راغبين في الهجرة'}, {'community_id': '1', 'articles': [{'id': '193', 'title': 'مديرية الأرصاد: طقس حار وكتل ضبابية بعدة مناطق اليوم الأحد', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/475287.html', 'summary': 'مديرية الأرصاد: طقس حار وكتل ضبابية بعدة مناطق اليوم الأحد. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الأحد، أن تتميز الحالة الجوية عامة بطقس حار نسبيا بكل من سهول تادلة، والرحامنة، وسوس، والجنوب الشرقي، وداخل الأقليم الصحراوية للمملكة.', 'size': 2}, {'id': '244', 'title': 'توقعات أحوال الطقس اليوم الأحد', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%aa%d9%88%d9%82%d8%b9%d8%a7%d8%aa-%d8%a3%d8%ad%d9%88%d8%a7%d9%84-%d8%a7%d9%84%d8%b7%d9%82%d8%b3-%d8%a7%d9%84%d9%8a%d9%88%d9%85-%d8%a7%d9%84%d8%a3%d8%ad%d8%af-48/', 'summary': 'توقعات أحوال الطقس اليوم الأحد. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليومه الأحد، أن تتميز الحالة الجوية عامة بطقس حار نسبيا بكل من سهول تادلة، والرحامنة، وسوس، والجنوب الشرقي، وداخل الأقليم الصحراوية للمملكة. كما يرتقب نمو كتل ضبابية محلية بالسواحل الشمالية والوسطى وشمال غرب الأقاليم الصحراوية خلال الصباح والليل، فضلا عن نزول قطرات مطرية مع بروز رعد وذلك …  توقعات أحوال الطقس اليوم الأحد     .', 'size': 2}], 'main_title': 'مديرية الأرصاد: طقس حار وكتل ضبابية بعدة مناطق اليوم الأحد'}, {'community_id': '6', 'articles': [{'id': '310', 'title': 'رئيس جمهورية إفريقيا الوسطى يشيد بالريادة الإفريقية “المتبصرة والنموذجية” لجلالة الملك', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/206193', 'summary': 'رئيس جمهورية إفريقيا الوسطى يشيد بالريادة الإفريقية “المتبصرة والنموذجية” لجلالة الملك.  أشاد رئيس جمهورية إفريقيا الوسطى، فخامة السيد فوستان أركونج تواديرا، اليوم الأحد بالدار البيضاء، بـ”القيادة المتبصرة والريادة النموذجية” لصاحب الجلالة الملك محمد السادس، من أجل إفريقيا متضامنة ومزدهرة. وأعرب السيد تواديرا ، في كلمة له بمناسبة افتتاح المائدة المستديرة للاستثمار المخصصة لتمويل المخطط الوطني للتنمية 2024-2028 لجمهورية إفريقيا الوسطى، و المنعقدة يومي 14', 'size': 2}, {'id': '375', 'title': 'منتدى الاستثمار.. رئيس جمهورية إفريقيا الوسطى يشيد بالريادة الإفريقية للمملكة', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/475308.html', 'summary': 'منتدى الاستثمار.. رئيس جمهورية إفريقيا الوسطى يشيد بالريادة الإفريقية للمملكة. أشاد رئيس جمهورية إفريقيا الوسطى، فوستان أركونج تواديرا، اليوم الأحد بالدار البيضاء، بـ”القيادة المتبصرة والريادة النموذجية” للملك محمد السادس، من أجل إفريقيا متضامنة ومزدهرة. وأعرب تواديرا، في كلمة له بمناسبة افتتاح المائدة المستديرة للاستثمار المخصصة لتمويل المخطط الوطني للتنمية 2024-2028 لجمهورية إفريقيا الوسطى، والمنعقدة يومي 14 و15 شتنبر الجاري بالعاصمة الاقتصادية، عن “امتنانه للملك محمد …', 'size': 2}], 'main_title': 'رئيس جمهورية إفريقيا الوسطى يشيد بالريادة الإفريقية “المتبصرة والنموذجية” لجلالة الملك'}, {'community_id': '5', 'articles': [{'id': '339', 'title': 'نادية فتاح: رؤية جلالة الملك تجعل من التضامن الإفريقي خيارًا استراتيجيًا للمغرب', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/323362/', 'summary': 'نادية فتاح: رؤية جلالة الملك تجعل من التضامن الإفريقي خيارًا استراتيجيًا للمغرب. أكدت وزيرة الاقتصاد والمالية نادية فتاح، اليوم الأحد بالدار البيضاء، أن المغرب، تحت القيادة الرشيدة لصاحب الجلالة الملك محمد السادس، نصره الله، يحرص باستمرار على تعزيز التعاون جنوب-جنوب والتنمية المشتركة في إفريقيا. وقالت الوزيرة، خلال افتتاح المائدة المستديرة للاستثمار المخصصة لتمويل المخطط الوطني للتنمية 2024-2028 لجمهورية إفريقيا الوسطى، أن هذا اللقاء، المنظم على مدى يومين،', 'size': 2}, {'id': '374', 'title': 'فتاح: المغرب بقيادة الملك ملتزم بتعزيز التعاون جنوب-جنوب والتنمية المشتركة في إفريقيا', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/475311.html', 'summary': 'فتاح: المغرب بقيادة الملك ملتزم بتعزيز التعاون جنوب-جنوب والتنمية المشتركة في إفريقيا. أكدت وزيرة الاقتصاد والمالية نادية فتاح، اليوم الأحد بالدار البيضاء، أن المغرب، تحت قيادة الملك محمد السادس، نصره الله، يحرص باستمرار على تعزيز التعاون جنوب-جنوب والتنمية المشتركة في إفريقيا. وقالت الوزيرة، خلال افتتاح المائدة المستديرة للاستثمار المخصصة لتمويل المخطط الوطني للتنمية 2024-2028 لجمهورية إفريقيا الوسطى، أن هذا اللقاء، المنظم على مدى يومين، يعكس “الالتزام الدائم …', 'size': 2}], 'main_title': 'نادية فتاح: رؤية جلالة الملك تجعل من التضامن الإفريقي خيارًا استراتيجيًا للمغرب'}, {'community_id': '4', 'articles': [{'id': '362', 'title': 'لقجع: المغرب جاهز لتنظيم أفضل نسخة في تاريخ كأس أمم إفريقيا 2025', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1099689.html', 'summary': 'لقجع: المغرب جاهز لتنظيم أفضل نسخة في تاريخ كأس أمم إفريقيا 2025. أكّد رئيس الجامعة الملكية المغربية لكرة القدم، فوزي لقجع، ظهرت المقالة لقجع: المغرب جاهز لتنظيم أفضل نسخة في تاريخ كأس أمم إفريقيا 2025  .', 'size': 2}, {'id': '371', 'title': 'لقجع : بتوجيهات من جلالة الملك المغرب يرحب بأشقائه الأفارقة وسينظم أفضل نسخة في تاريخ كأس أمم أفريقيا', 'source': 'rue20.com', 'link': 'https://rue20.com/936286.html', 'summary': 'لقجع : بتوجيهات من جلالة الملك المغرب يرحب بأشقائه الأفارقة وسينظم أفضل نسخة في تاريخ كأس أمم أفريقيا. . الرباط تحدث فوزي لقجع، رئيس الجامعة الملكية المغربية لكرة القدم، عن جاهزية المغرب لاستضافة نهائيات كأس أمم إفريقيا 2025 التي يستضيفها المغرب بداية من 21 دجنبر المقبل وإلى غاية 18 من يناير الذي يليه. وأكد لقجع في تصريحات لقناة بيين سبورت أن جاهزية المغرب يعرفها الجميع، مضيفا أن المملكة تطمح لاحتضان أحسن نسخة الخبر لقجع : بتوجيهات من جلالة الملك المغرب يرحب بأشقائه الأفارقة وسينظم أفضل نسخة في تاريخ كأس أمم أفريقيا  .', 'size': 2}], 'main_title': 'لقجع: المغرب جاهز لتنظيم أفضل نسخة في تاريخ كأس أمم إفريقيا 2025'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    