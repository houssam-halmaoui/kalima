<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 23/07/2025 - 12h27</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '1', 'articles': [{'id': '84', 'title': 'صفعة جديدة للأعداء.. البرتغال تعلن عن "دعمها الكامل للمبادرة المغربية للحكم الذاتي باعتبارها الأساس البناء والأكثر جدية ومصداقية لتسوية النزاع"', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/politic/409738.html', 'summary': 'صفعة جديدة للأعداء.. البرتغال تعلن عن "دعمها الكامل للمبادرة المغربية للحكم الذاتي باعتبارها الأساس البناء والأكثر جدية ومصداقية لتسوية النزاع". في إطار الدينامية الدولية التي أ طلقت بقيادة صاحب الجلالة الملك محمد السادس، نصره الله، الداعمة لسيادة المغرب على صحرائه ولمخطط الحكم الذاتي، عبرت الجمهورية', 'size': 2}, {'id': '210', 'title': 'البرتغال تعلن دعمها الكامل للحكم الذاتي باعتباره الأساس البناء والأكثر جدية ومصداقية لتسوية النزاع', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/225070/', 'summary': 'البرتغال تعلن دعمها الكامل للحكم الذاتي باعتباره الأساس البناء والأكثر جدية ومصداقية لتسوية النزاع. لشبونة – في إطار الدينامية الدولية التي أُطلقت بقيادة صاحب الجلالة الملك محمد السادس، نصره الله، الداعمة لسيادة المغرب على صحرائه ولمخطط الحكم الذاتي، عبرت الجمهورية البرتغالية عن “دعمها الكامل لمبادرة الحكم الذاتي، باعتبارها الأساس البناء والأكثر جدية ومصداقية من أجل تسوية هذا النزاع”. تم التعبير عن هذا الموقف في الإعلان المشترك الذي اعتمده وزير', 'size': 2}], 'main_title': 'صفعة جديدة للأعداء.. البرتغال تعلن عن "دعمها الكامل للمبادرة المغربية للحكم الذاتي باعتبارها الأساس البناء والأكثر جدية ومصداقية لتسوية النزاع"'}, {'community_id': '3', 'articles': [{'id': '87', 'title': 'نهاية صادمة لقضية "مجموعة الخير" بطنجة.. السجن للمتهمين والضحايا بدون تعويض!', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/society/409743.html', 'summary': 'نهاية صادمة لقضية "مجموعة الخير" بطنجة.. السجن للمتهمين والضحايا بدون تعويض!. أسدل الستار، بشكل شبه نهائي، على واحدة من أكبر قضايا النصب المالي التي هزت مدينة طنجة خلال السنوات الأخيرة، بعدما أيدت محكمة الاستئناف الأحكام الابتدائية', 'size': 2}, {'id': '238', 'title': 'استئنافية طنجة تؤيد الأحكام في ملف "مجموعة الخير" وتُسقط مطالب الضحايا', 'source': 'www.alalam.ma', 'link': 'https://www.alalam.ma/استئنافية-طنجة-تؤيد-الأحكام-في-ملف-مجموعة-الخير-وتُسقط-مطالب_a28827.html', 'summary': 'استئنافية طنجة تؤيد الأحكام في ملف "مجموعة الخير" وتُسقط مطالب الضحايا. العلم الإلكترونية - الرباط أسدلت محكمة الاستئناف بطنجة، الستار على واحدة من أكبر قضايا النصب والاحتيال المالي التي هزت الرأي العام المغربي...', 'size': 2}], 'main_title': 'نهاية صادمة لقضية "مجموعة الخير" بطنجة.. السجن للمتهمين والضحايا بدون تعويض!'}, {'community_id': '2', 'articles': [{'id': '107', 'title': 'لفتيت: هجمات إعلامية ممنهجة تستهدف تشويه صورة المغرب عبر ملف الكلاب الضالة', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/409765.html', 'summary': 'لفتيت: هجمات إعلامية ممنهجة تستهدف تشويه صورة المغرب عبر ملف الكلاب الضالة. أكد وزير الداخلية، عبد الوافي لفتيت، اليوم الثلاثاء خلال جلسة الأسئلة الشفوية بمجلس المستشارين، أن كل العمليات المتعلقة بتدبير ظاهرة الكلاب الضالة تتم في إطار', 'size': 2}, {'id': '184', 'title': 'وزير الداخلية: المغرب يتعرض لهجمات إعلامية ممنهجة مركزة على ملف “الكلاب الضالة”', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/470305.html', 'summary': 'وزير الداخلية: المغرب يتعرض لهجمات إعلامية ممنهجة مركزة على ملف “الكلاب الضالة”. قال وزير الداخلية، عبد الوافي لفتيت، اليوم الثلاثاء بمجلس المستشارين، إن المغرب يتعرض لهجمات إعلامية ممنهجة تسعى إلى تشويه صورة المملكة، مركزة بشكل لافت على موضوع “الكلاب الضالة”. وأضاف لفتيت خلال جلسة الأسئلة الشفوية، أن هذه الحملات تقدم معطيات مغلوطة خارج سياقها الحقيقي. ولفت المتحدث إلى أنه لا يتم استحضار المعطيات الواقعية ولا حجم المجهودات …', 'size': 2}], 'main_title': 'لفتيت: هجمات إعلامية ممنهجة تستهدف تشويه صورة المغرب عبر ملف الكلاب الضالة'}, {'community_id': '7', 'articles': [{'id': '110', 'title': 'أمن أكادير يتفاعل بسرعة مع حادثة دخول سيارة أجنبية إلى شاطئ المدينة ويخضع السائق للتحقيق', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/society/409768.html', 'summary': 'أمن أكادير يتفاعل بسرعة مع حادثة دخول سيارة أجنبية إلى شاطئ المدينة ويخضع السائق للتحقيق. تفاعلت ولاية أمن أكادير، بسرعة وجدية كبيرة، مع صورة منشورة على صفحات مواقع التواصل الاجتماعي، اليوم الثلاثاء 22 يوليوز الجازي، تظهر تنقل سيارة رباعية الدفع', 'size': 5}, {'id': '119', 'title': 'اقتحم شاطئا في أكادير بسيارة رباعية الدفع.. إخضاع سائق أجنبي للبحث القضائي', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a7%d9%82%d8%aa%d8%ad%d9%85-%d8%b4%d8%a7%d8%b7%d8%a6%d8%a7-%d9%81%d9%8a-%d8%a3%d9%83%d8%a7%d8%af%d9%8a%d8%b1-%d8%a8%d8%b3%d9%8a%d8%a7%d8%b1%d8%a9-%d8%b1%d8%a8%d8%a7%d8%b9%d9%8a%d8%a9-%d8%a7%d9%84/', 'summary': 'اقتحم شاطئا في أكادير بسيارة رباعية الدفع.. إخضاع سائق أجنبي للبحث القضائي. تفاعلت ولاية أمن أكادير، بسرعة وجدية كبيرة، مع صورة منشورة على صفحات مواقع التواصل الاجتماعي، اليوم الثلاثاء (22 يوليوز)، تظهر تنقل سيارة رباعية الدفع وسط رمال الشاطئ، مرفوقة بتعليقات مفادها أن الأمر يتعلق بمركبة تحمل ترقيما أجنبيا اقتحمت شاطئ مدينة أكادير، في ظروف تعرض سلامة المصطافين للخطر. وأوضحت الأبحاث والتحريات المنجزة على ضوء هذه التدوينات،', 'size': 5}, {'id': '132', 'title': 'أمن أكادير يحقق مع سائح أجنبي اقتحم رمال الشاطئ بسيارته', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/319036/', 'summary': 'أمن أكادير يحقق مع سائح أجنبي اقتحم رمال الشاطئ بسيارته. تفاعلت ولاية أمن أكادير، بسرعة وجدية كبيرة، مع صورة منشورة على صفحات مواقع التواصل الاجتماعي، اليوم الثلاثاء 22 يوليوز الجازي، تظهر تنقل سيارة رباعية الدفع وسط رمال الشاطئ، مرفوقة بتعليقات مفادها أن الأمر يتعلق بمركبة تحمل ترقيما أجنبيا اقتحمت شاطئ مدينة أكادير في ظروف تعرض سلامة المصطافين للخطر. وقد أوضحت الأبحاث والتحريات المنجزة على ضوء', 'size': 5}, {'id': '174', 'title': 'الأمن يوقف خليجيا إقتحم شاطئ أكادير بسيارته', 'source': 'rue20.com', 'link': 'https://rue20.com/922705.html', 'summary': 'الأمن يوقف خليجيا إقتحم شاطئ أكادير بسيارته. . الرباط تفاعلت ولاية أمن أكادير، بسرعة وجدية كبيرة، مع صورة منشورة على صفحات مواقع التواصل الاجتماعي، اليوم الثلاثاء 22 يوليوز الجازي، تظهر تنقل سيارة رباعية الدفع وسط رمال الشاطئ، مرفوقة بتعليقات مفادها أن الأمر يتعلق بمركبة تحمل ترقيما أجنبيا اقتحمت شاطئ مدينة أكادير في ظروف تعرض سلامة المصطافين للخطر. وقد أوضحت الأبحاث والتحريات الخبر الأمن يوقف خليجيا إقتحم شاطئ أكادير بسيارته  .', 'size': 5}, {'id': '217', 'title': 'ولاية أمن أكادير: توقيف السائق الأجنبي الذي اقتحم رمال الشاطئ بسيارة رباعية الدفع', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/225045/', 'summary': 'ولاية أمن أكادير: توقيف السائق الأجنبي الذي اقتحم رمال الشاطئ بسيارة رباعية الدفع. تفاعلت ولاية أمن أكادير، بسرعة وجدية كبيرة، مع صورة منشورة على صفحات مواقع التواصل الاجتماعي، اليوم الثلاثاء 22 يوليوز الجازي، تظهر تنقل سيارة رباعية الدفع وسط رمال الشاطئ، مرفوقة بتعليقات مفادها أن الأمر يتعلق بمركبة تحمل ترقيما أجنبيا اقتحمت شاطئ مدينة أكادير في ظروف تعرض سلامة المصطافين للخطر. وقد أوضحت الأبحاث والتحريات المنجزة على ضوء', 'size': 5}], 'main_title': 'أمن أكادير يتفاعل بسرعة مع حادثة دخول سيارة أجنبية إلى شاطئ المدينة ويخضع السائق للتحقيق'}, {'community_id': '4', 'articles': [{'id': '111', 'title': 'المنتخب المغربي ينجح في تجاوز غانا بالركلات الترجيحية ويصعد إلى نهائي كأس أمم أفريقيا للسيدات', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/sport/lionatlas/409769.html', 'summary': 'المنتخب المغربي ينجح في تجاوز غانا بالركلات الترجيحية ويصعد إلى نهائي كأس أمم أفريقيا للسيدات. تأهل المنتخب المغربي للسيدات إلى نهائي كأس أمم أفريقيا بعد فوزه المثير على منتخب غانا بركلات الترجيح 4-2، وذلك بعد انتهاء المباراة في الوقتين الأصلي', 'size': 3}, {'id': '216', 'title': 'كأس أمم أفريقيا للسيدات ..المنتخب المغربي يعبر غانا بالضربات الترجيحية ويتأهل إلى النهائي', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/225044/', 'summary': 'كأس أمم أفريقيا للسيدات ..المنتخب المغربي يعبر غانا بالضربات الترجيحية ويتأهل إلى النهائي. عبر المنتخب المغربي النسوي إلى نهائي كأس أمم أفريقيا للسيدات المقامة حاليا في المغرب، إثر تغلبه على نظيره الغاني بالضربات الترجحية (4-2) ، في مباراة جمعتهما مساء اليوم الثلاثاء 22 يوليوز 2025، في الملعب الأولمبي بالرباط، برسم نصف نهائي المسابقة القارية. وافتتح منتخب غانا التسجيل عبر اللاعبة بونسو كييروا في الدقيقة الـ 26 من عمر', 'size': 2}, {'id': '296', 'title': 'المنتخب المغربي يتأهل إلى نهائي كأس أمم إفريقيا للسيدات بتجاوز غانا بركلات الترجيح', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/203900', 'summary': 'المنتخب المغربي يتأهل إلى نهائي كأس أمم إفريقيا للسيدات بتجاوز غانا بركلات الترجيح.  في مباراة شاقة، تأهل المنتخب المغربي للسيدات إلى نهائي كأس أمم إفريقيا بعد فوزه على منتخب غانا اثر اللجوء إلى الشوطين الإضافيين، ثم ضربات الجزاء التي منحت المنتخب المغربي التأهل لنهائي البطولة (2-4). وكانت المقابلة في وقتها الأصلي قد انتهت بالتعادل الإيجابي، بعد أن كان المنتخب الغاني سبّاقا إلى التسجيل في الدقيقة 26 قبل', 'size': 2}], 'main_title': 'المنتخب المغربي ينجح في تجاوز غانا بالركلات الترجيحية ويصعد إلى نهائي كأس أمم أفريقيا للسيدات'}, {'community_id': '5', 'articles': [{'id': '117', 'title': 'لمواجهة نيجيريا.. المنتخب المغربي النسوي يعبر إلى النهائي بعد مباراة مثيرة ضد غانا', 'source': 'kifache.com', 'link': 'https://kifache.com/%d9%84%d9%85%d9%88%d8%a7%d8%ac%d9%87%d8%a9-%d9%86%d9%8a%d8%ac%d9%8a%d8%b1%d9%8a%d8%a7-%d8%a7%d9%84%d9%85%d9%86%d8%aa%d8%ae%d8%a8-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8%d9%8a-%d8%a7%d9%84%d9%86%d8%b3/', 'summary': 'لمواجهة نيجيريا.. المنتخب المغربي النسوي يعبر إلى النهائي بعد مباراة مثيرة ضد غانا. خاض المنتخب المغربي النسوي، مساء اليوم الثلاثاء (22 يوليوز)، مباراة قوية ومثيرة ضد نظيره الغاني ضمن نصف نهائي كأس أمم إفريقيا للسيدات “WAFCON 2024″، على أرضية الملعب الأولمبي بمدينة الرباط. وانتهى الوقت الأصلي للمباراة بالتعادل الإيجابي 1-1، بعد أداء متوازن من الطرفين طبعته الحيطة التكتيكية والندية الكبيرة، حيث افتتحت غانا التسجيل في الدقيقة 26 عن', 'size': 2}, {'id': '218', 'title': 'كأس إفريقيا للسيدات .. اللبؤات يواجهن غانا وكلهن أمل في بلوغ النهائي', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/225035/', 'summary': 'كأس إفريقيا للسيدات .. اللبؤات يواجهن غانا وكلهن أمل في بلوغ النهائي. ينتظر عشاق كرة القدم للسيدات بشغف واهتمام كبيرين موعد مباريات نصف نهائي كأس أمم إفريقيا المقامة حاليا بالمغرب، في نسخة تشهد منافسة قوية بين نخبة منتخبات القارة السمراء، حيث يواجه المنتخب الوطني المغربي نظيره الغاني، أما في المباراة الثانية يصطدم منتخبا نيجيريا بجنوب إفريقيا. وستقابل “لبؤات الأطلس” المنتخب الغاني اليوم الثلاثاء 22 يوليوز 2025، انطلاقا', 'size': 2}], 'main_title': 'لمواجهة نيجيريا.. المنتخب المغربي النسوي يعبر إلى النهائي بعد مباراة مثيرة ضد غانا'}, {'community_id': '8', 'articles': [{'id': '136', 'title': 'مجلس النواب يصادق بالأغلبية على إعادة تنظيم مجلس الصحافة', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/319019/', 'summary': 'مجلس النواب يصادق بالأغلبية على إعادة تنظيم مجلس الصحافة. صادق مجلس النواب، خلال جلسة تشريعية عقدها مساء اليوم الثلاثاء، بالأغلبية، على مشروع قانون رقم 026.25 المتعلق بإعادة تنظيم المجلس الوطني للصحافة. وحظي مشروع القانون بموافقة 87 نائبا بينما عارضه 25 نائبا، دون تسجيل أي امتناع عن التصويت. وفي كلمة تقديمية لمشروع القانون، أكد وزير الشباب والثقافة والتواصل، محمد المهدي بنسعيد، أن مشروع القانون “ليس', 'size': 3}, {'id': '158', 'title': 'بنسعيد: رقم المعاملات معيار اضطراري لدعم الصحافة في غياب مقياس للمقروئية', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1087452.html', 'summary': 'بنسعيد: رقم المعاملات معيار اضطراري لدعم الصحافة في غياب مقياس للمقروئية. أكد وزير الشباب والثقافة والتواصل، محمد المهدي بنسعيد، خلال جلسة برلمانية اليوم الثلاثاء، أن دعم الدولة للصحافة يعد ممارسة متعارفا عليها دوليا، مشددا على أن المعايير المعتمدة حاليا لتوزيعه، وعلى رأسها رقم المعاملات، تمثل اجتهادا ضروريا في ظل غياب آليات دقيقة لقياس مدى مقروئية وتأثير كل منبر إعلامي. أوضح بنسعيد أن الحكومة تلجأ إلى معايير ظهرت المقالة بنسعيد: رقم المعاملات معيار اضطراري لدعم الصحافة في غياب مقياس للمقروئية  .', 'size': 2}, {'id': '182', 'title': 'بالأغلبية.. مجلس النواب يصادق على تنظيم المجلس الوطني للصحافة', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/470309.html', 'summary': 'بالأغلبية.. مجلس النواب يصادق على تنظيم المجلس الوطني للصحافة. متابعة صادق مجلس النواب، مساء اليوم الثلاثاء، بالأغلبية، على مشروع قانون رقم 026.25 المتعلق بإعادة تنظيم المجلس الوطني للصحافة. وحظي مشروع القانون بموافقة 87 نائبا بينما عارضه 25 نائبا، دون تسجيل أي امتناع عن التصويت. وفي كلمة تقديمية لمشروع القانون، أكد وزير الشباب والثقافة والتواصل، محمد المهدي بنسعيد، أن مشروع القانون “ليس مجرد نص تشريعي …', 'size': 2}], 'main_title': 'مجلس النواب يصادق بالأغلبية على إعادة تنظيم مجلس الصحافة'}, {'community_id': '0', 'articles': [{'id': '175', 'title': 'لفتيت : إستثمارات الدولة في التطهير السائل لامس 5000 مليار', 'source': 'rue20.com', 'link': 'https://rue20.com/922700.html', 'summary': 'لفتيت : إستثمارات الدولة في التطهير السائل لامس 5000 مليار. . الرباط أفاد وزير الداخلية، عبد الوافي لفتيت، اليوم الثلاثاء خلال جلسة الأسئلة الشفوية بمجلس المستشارين، أن حجم الاستثمارات في قطاع التطهير السائل بلغ إلى غاية نهاية السنة الفارطة 48,58 مليار درهم، منها 25,33 مليار درهم منجزة، و23,25 مليار درهم في طور الإنجاز أو الانطلاق. وأوضح الوزير، في معرض جوابه عن سؤالين في إطار الخبر لفتيت : إستثمارات الدولة في التطهير السائل لامس 5000 مليار  .', 'size': 2}, {'id': '383', 'title': 'لفتيت: أزيد من 1240 جماعة تستفيد من برنامج تأهيل مكاتب حفظ الصحة', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d9%84%d9%81%d8%aa%d9%8a%d8%aa-%d8%a3%d8%b2%d9%8a%d8%af-%d9%85%d9%86-1240-%d8%ac%d9%85%d8%a7%d8%b9%d8%a9-%d8%aa%d8%b3%d8%aa%d9%81%d9%8a%d8%af-%d9%85%d9%86-%d8%a8%d8%b1%d9%86%d8%a7%d9%85%d8%ac-%d8%aa/', 'summary': 'لفتيت: أزيد من 1240 جماعة تستفيد من برنامج تأهيل مكاتب حفظ الصحة. أكد وزير الداخلية، عبد الوافي لفتيت، أمس الثلاثاء خلال جلسة الأسئلة الشفوية بمجلس المستشارين، أن أزيد من 1240 جماعة، موزعة على 53 عمالة وإقليما بمختلف جهات المملكة، تستفيد من برنامج تأهيل المكاتب الجماعية لحفظ الصحة. وأوضح لفتيت، في معرض جوابه عن أسئلة في إطار وحدة الموضوع حول "تأهيل المكاتب الجماعية لحفظ الصحة"، أنه بعدما كان  لفتيت: أزيد من 1240 جماعة تستفيد من برنامج تأهيل مكاتب حفظ الصحة     .', 'size': 2}], 'main_title': 'لفتيت : إستثمارات الدولة في التطهير السائل لامس 5000 مليار'}, {'community_id': '6', 'articles': [{'id': '327', 'title': 'لتشجيع الاستثمار في لؤلؤة الجنوب.. قافلة سياحية تحط الرحال في الداخلة', 'source': 'kifache.com', 'link': 'https://kifache.com/%d9%84%d8%aa%d8%b4%d8%ac%d9%8a%d8%b9-%d8%a7%d9%84%d8%a7%d8%b3%d8%aa%d8%ab%d9%85%d8%a7%d8%b1-%d9%81%d9%8a-%d9%84%d8%a4%d9%84%d8%a4%d8%a9-%d8%a7%d9%84%d8%ac%d9%86%d9%88%d8%a8-%d9%82%d8%a7%d9%81%d9%84/', 'summary': 'لتشجيع الاستثمار في لؤلؤة الجنوب.. قافلة سياحية تحط الرحال في الداخلة. حطت أمس الثلاثاء (22 يوليوز)، القافلة الوطنية “GO SIYAHA DAYS” الرحال بمدينة الداخلة بهدف النهوض بالاستثمار السياحي ومواكبة حاملي المشاريع في هذا القطاع على المستوى الجهوي. وخلال هذا اللقاء، الذي ترأسه الكاتب العام للشؤون الجهوية بولاية جهة الداخلة – وادي الذهب، والمدير العام للوكالة الوطنية للنهوض بالمقاولة الصغرى والمتوسطة “مغرب المقاولات”، جرى تسليط الضوء على', 'size': 2}, {'id': '346', 'title': 'قافلة “GO SIYAHA DAYS” تحط الرحال بالداخلة لتشجيع الاستثمار السياحي', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/319045/', 'summary': 'قافلة “GO SIYAHA DAYS” تحط الرحال بالداخلة لتشجيع الاستثمار السياحي. حطت أمس الثلاثاء القافلة الوطنية “GO SIYAHA DAYS” الرحال بمدينة الداخلة بهدف النهوض بالاستثمار السياحي ومواكبة حاملي المشاريع في هذا القطاع على المستوى الجهوي. وخلال هذا اللقاء، الذي ترأسه الكاتب العام للشؤون الجهوية بولاية جهة الداخلة – وادي الذهب، والمدير العام للوكالة الوطنية للنهوض بالمقاولة الصغرى والمتوسطة “مغرب المقاولات”، جرى تسليط الضوء على آليات الدعم', 'size': 2}], 'main_title': 'لتشجيع الاستثمار في لؤلؤة الجنوب.. قافلة سياحية تحط الرحال في الداخلة'}, {'community_id': '9', 'articles': [{'id': '348', 'title': 'طقس الأربعاء…أجواء حارة بعدد من المناطق', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/319043/', 'summary': 'طقس الأربعاء…أجواء حارة بعدد من المناطق. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الأربعاء، أن يكون الطقس حارا نسبيا إلى محليا حارا بكل من أقصى الجنوب والجنوب الشرقي للبلاد والهضاب العليا الشرقية. ويرتقب تشكل سحب منخفضة كثيفة ومصحوبة بقطرات مطرية جد خفيفة ومحلية فوق السواحل الجنوبية الممتدة ما بين سيدي إفني والعيون، فضلا عن تمركز كتل ضبابية فوق سهول المحيط الأطلسي', 'size': 3}, {'id': '358', 'title': 'طقس الأربعاء.. أجواء حارة وقطرات مطرية بهذه المناطق', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-581527.html', 'summary': 'طقس الأربعاء.. أجواء حارة وقطرات مطرية بهذه المناطق. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليوم الأربعاء، أن يكون الطقس حارا نسبيا إلى محليا حارا بكل من أقصى الجنوب والجنوب الشرقي للبلاد والهضاب العليا الشرقية. ويرتقب تشكل سحب منخفضة كثيفة ومصحوبة بقطرات مطرية جد خفيفة ومحلية فوق السواحل الجنوبية الممتدة ما بين سيدي إفني والعيون، فضلا عن تمركز كتل ضبابية فوق', 'size': 3}, {'id': '420', 'title': 'توقعات أحوال الطقس اليوم الأربعاء', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%aa%d9%88%d9%82%d8%b9%d8%a7%d8%aa-%d8%a3%d8%ad%d9%88%d8%a7%d9%84-%d8%a7%d9%84%d8%b7%d9%82%d8%b3-%d8%a7%d9%84%d9%8a%d9%88%d9%85-%d8%a7%d9%84%d8%a3%d8%b1%d8%a8%d8%b9%d8%a7%d8%a1-29/', 'summary': 'توقعات أحوال الطقس اليوم الأربعاء. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليومه الأربعاء، أن يكون الطقس حارا نسبيا إلى محليا حارا بكل من أقصى الجنوب والجنوب الشرقي للبلاد والهضاب العليا الشرقية. ويرتقب تشكل سحب منخفضة كثيفة ومصحوبة بقطرات مطرية جد خفيفة ومحلية فوق السواحل الجنوبية الممتدة ما بين سيدي إفني والعيون، فضلا عن تمركز كتل ضبابية فوق سهول …  توقعات أحوال الطقس اليوم الأربعاء     .', 'size': 3}], 'main_title': 'طقس الأربعاء…أجواء حارة بعدد من المناطق'}, {'community_id': '10', 'articles': [{'id': '353', 'title': 'فيلدا يبرز مفاتيح فوز المنتخب المغربي على نظيره الغاني', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-581600.html', 'summary': 'فيلدا يبرز مفاتيح فوز المنتخب المغربي على نظيره الغاني. قال مدرب المنتخب الوطني المغربي لكرة القدم للسيدات، خورخي فيلدا رودريغيز، مساء أمس الثلاثاء، إن لبؤات الأطلس تمكن من العودة في مباراة نصف النهاية وحققن التأهل لنهائي كأس إفريقيا للأمم (المغرب – 2024) بفضل الانضباط التكتيكي والالتزام والشجاعة. وأضاف فيلدا، خلال المؤتمر الصحافي الذي أعقب الفوز على المنتخب الغاني، بالضربات الترجيحية (4-2)، بعد', 'size': 3}, {'id': '372', 'title': 'فيلدا: الانضباط والتكتيك وراء تأهل المغرب إلى نهائي كأس إفريقيا للسيدات', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1087526.html', 'summary': 'فيلدا: الانضباط والتكتيك وراء تأهل المغرب إلى نهائي كأس إفريقيا للسيدات. قال مدرب المنتخب الوطني المغربي لكرة القدم للسيدات، خورخي فيلدا رودريغيز، مساء أمس الثلاثاء، إن لبؤات الأطلس تمكن من العودة في مباراة نصف النهاية وحققن التأهل لنهائي كأس إفريقيا للأمم (المغرب – 2024) بفضل الانضباط التكتيكي والالتزام والشجاعة. وأضاف فيلدا، خلال المؤتمر الصحافي الذي أعقب الفوز على المنتخب الغاني، بالضربات الترجيحية (4-2)، بعد انتهاء الوقت ظهرت المقالة فيلدا: الانضباط والتكتيك وراء تأهل المغرب إلى نهائي كأس إفريقيا للسيدات  .', 'size': 3}, {'id': '385', 'title': 'فيلدا: التأهل تحقق بفضل الانضباط التكتيكي والتزام اللاعبات', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d9%81%d9%8a%d9%84%d8%af%d8%a7-%d8%a7%d9%84%d8%aa%d8%a3%d9%87%d9%84-%d8%aa%d8%ad%d9%82%d9%82-%d8%a8%d9%81%d8%b6%d9%84-%d8%a7%d9%84%d8%a7%d9%86%d8%b6%d8%a8%d8%a7%d8%b7-%d8%a7%d9%84%d8%aa%d9%83%d8%aa/', 'summary': 'فيلدا: التأهل تحقق بفضل الانضباط التكتيكي والتزام اللاعبات. قال مدرب المنتخب الوطني المغربي لكرة القدم للسيدات، خورخي فيلدا رودريغيز، مساء أمس الثلاثاء، إن لبؤات الأطلس تمكن من العودة في مباراة نصف النهائي وحققن التأهل لنهائي كأس إفريقيا للأمم (المغرب – 2024) بفضل الانضباط التكتيكي والالتزام والشجاعة. وأضاف فيلدا، خلال المؤتمر الصحافي الذي أعقب الفوز على المنتخب الغاني، بالضربات الترجيحية (4-2)، بعد انتهاء الوقت  فيلدا: التأهل تحقق بفضل الانضباط التكتيكي والتزام اللاعبات     .', 'size': 3}], 'main_title': 'فيلدا يبرز مفاتيح فوز المنتخب المغربي على نظيره الغاني'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    