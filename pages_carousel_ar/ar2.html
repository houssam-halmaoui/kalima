<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 13/06/2025 - 12h25</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '23', 'title': 'الدار البيضاء.. فيديو سرقة بالشارع يقود لتوقيف المشتبه فيه', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-631547.html', 'summary': 'الدار البيضاء.. فيديو سرقة بالشارع يقود لتوقيف المشتبه فيه. هبة بريس تفاعلت ولاية أمن الدار البيضاء ، مع شريط فيديو منشور على صفحات مواقع التواصل الاجتماعي، يظهر فيه سائق سيارة يعرض شخصا للسرقة بالشارع العام بالمدينة. وكشفت الولاية في بلاغ أمني أن الأبحاث والتحريات المنجزة على ضوء هذا الشريط، أوضحت أن الأمر يتعلق بقضية زجرية تعالجها مصالح منطقة أمن ابن مسيك بمدينة الدار البيضاء، حيث أظهرت إجراءات البحث أن الضحية لم يقدم أية شكاية أو بلاغ في شأن ارتكاب هذه الأفعال الإجرامية، قبل أن تمكن التحريات المتواصلة من تحديد هوية المشتبه فيه وتوقيفه مساء اليوم الخميس. ويضيف المصدر أنه تم إخضاع المشتبه فيه للبحث القضائي الذي تشرف عليه النيابة العامة المختصة، للكشف عن جميع ظروف وملابسات وخلفيات هذه القضية، وكذا تحديد كافة الأفعال الإجرامية المنسوبة للمعني بالأمر.', 'size': 3}, {'id': '67', 'title': 'ولاية أمن الدار البيضاء تتفاعل مع فيديو يظهر فيه سائق سيارة يعرض شخصا للسرقة بالشارع العام', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/202007', 'summary': 'ولاية أمن الدار البيضاء تتفاعل مع فيديو يظهر فيه سائق سيارة يعرض شخصا للسرقة بالشارع العام. الأحداث من الرباط تفاعلت ولاية أمن الدار البيضاء، بجدية كبيرة،مع شريط فيديو منشور على صفحات مواقع التواصل الاجتماعي، يظهر فيه سائق سيارة يعرض شخصا للسرقة بالشارع العام بالمدينة. وقد أوضحت الأبحاث والتحريات المنجزة على ضوء هذا الشريط، أن الأمر يتعلق بقضية زجرية تعالجها مصالح منطقة أمن ابن مسيك بمدينة الدار البيضاء، حيث أظهرت إجراءات البحث', 'size': 3}, {'id': '114', 'title': 'سرقة موثّقة بالفيديو.. تفاعل أمني سريع يقود إلى توقيف المشتبه فيه في كازا!', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%b3%d8%b1%d9%82%d8%a9-%d9%85%d9%88%d8%ab%d9%91%d9%82%d8%a9-%d8%a8%d8%a7%d9%84%d9%81%d9%8a%d8%af%d9%8a%d9%88-%d8%aa%d9%81%d8%a7%d8%b9%d9%84-%d8%a3%d9%85%d9%86%d9%8a-%d8%b3%d8%b1%d9%8a%d8%b9-%d9%8a/', 'summary': 'سرقة موثّقة بالفيديو.. تفاعل أمني سريع يقود إلى توقيف المشتبه فيه في كازا!. تفاعلت ولاية أمن الدار البيضاء بجدية كبيرة مع شريط فيديو منشور على مواقع التواصل الاجتماعي، يُظهر سائق سيارة وهو يُعرض شخصًا للسرقة بالشارع العام وسط المدينة. وأوضحت الأبحاث والتحريات الأولية، المنجزة على ضوء هذا الشريط، أن الأمر يتعلق بقضية زجرية تباشرها مصالح منطقة أمن ابن مسيك بالدار البيضاء، حيث تبيّن أن الضحية لم يتقدم بأي', 'size': 3}, {'id': '131', 'title': 'أمن البيضاء يوقف سائق سيارة متورط في سرقة مسن بالشارع العام', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/315353/', 'summary': 'أمن البيضاء يوقف سائق سيارة متورط في سرقة مسن بالشارع العام. تفاعلت ولاية أمن الدار البيضاء، بجدية كبيرة، مع شريط فيديو منشور على صفحات مواقع التواصل الاجتماعي، يظهر فيه سائق سيارة يعرض شخصا للسرقة بالشارع العام بالمدينة. وقد أوضحت الأبحاث والتحريات المنجزة على ضوء هذا الشريط، أن الأمر يتعلق بقضية زجرية تعالجها مصالح منطقة أمن ابن مسيك بمدينة الدار البيضاء، حيث أظهرت إجراءات البحث أن الضحية', 'size': 5}, {'id': '381', 'title': 'واقعة نالت تعاطف المغاربة.. اعتقال سارق مسن بالدارالبيضاء', 'source': 'rue20.com', 'link': 'https://rue20.com/912570.html', 'summary': 'واقعة نالت تعاطف المغاربة.. اعتقال سارق مسن بالدارالبيضاء.  | علي التومي تفاعلت ولاية أمن الدار البيضاء بسرعة وجدية مع شريط فيديو تم تداوله على مواقع التواصل الاجتماعي، يوثق لعملية سرقة نفذها سائق سيارة في الشارع العام. وقد كشفت التحريات أن الواقعة تعالجها مصالح منطقة أمن ابن مسيك، حيث تبيّن أن الضحية لم يتقدم بأي شكاية رسمية. ورغم ذلك، أسفرت الأبحاث المتواصلة الخبر واقعة نالت تعاطف المغاربة.. اعتقال سارق مسن بالدارالبيضاء  .', 'size': 3}], 'main_title': 'أمن البيضاء يوقف سائق سيارة متورط في سرقة مسن بالشارع العام'}, {'community_id': '2', 'articles': [{'id': '69', 'title': 'مندوبية الصحة بالخميسات توضح بخصوص “فيديو الحمير” داخل مركز صحي بوالماس', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/201998', 'summary': 'مندوبية الصحة بالخميسات توضح بخصوص “فيديو الحمير” داخل مركز صحي بوالماس.  تفاعلت المندوبية الإقليمية لوزارة الصحة والحماية الاجتماعية بالخميسات مع الصور ومقاطع الفيديو المتداولة على منصات التواصل الاجتماعي، والتي توثق وجود دابتين (حمارين) بالبهو الخارجي للمركز الصحي القروي بأولماس، حيث أصدرت بلاغا توضيحيا توصل “تيلكيل عربي” بنسخة منه.وأعلنت المندوبية عن تقديم شكاية رسمية لدى السلطات القضائية ضد “كل من يثبت تورطه في التشهير المتعمد', 'size': 2}, {'id': '173', 'title': 'مندوبية الصحة بالخميسات تشكو إلى القضاء "فيديو الحمير" داخل مركز صحي بوالماس', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d9%85%d9%86%d8%af%d9%88%d8%a8%d9%8a%d8%a9-%d8%a7%d9%84%d8%b5%d8%ad%d8%a9-%d8%a8%d8%a7%d9%84%d8%ae%d9%85%d9%8a%d8%b3%d8%a7%d8%aa-%d8%aa%d8%b4%d9%83%d9%88-%d8%a5%d9%84%d9%89-%d8%a7%d9%84%d9%82%d8%b6/', 'summary': 'مندوبية الصحة بالخميسات تشكو إلى القضاء "فيديو الحمير" داخل مركز صحي بوالماس. تفاعلت المندوبية الإقليمية لوزارة الصحة والحماية الاجتماعية بالخميسات مع الصور ومقاطع الفيديو المتداولة على منصات التواصل الاجتماعي، والتي توثق وجود دابتين (حمارين) بالبهو الخارجي للمركز الصحي القروي بأولماس، حيث أصدرت بلاغا توضيحيا توصل "تيلكيل عربي" بنسخة منه. وأعلنت المندوبية عن تقديم شكاية رسمية لدى السلطات القضائية ضد "كل من يثبت تورطه في التشهير المتعمد بالمؤسسة  مندوبية الصحة بالخميسات تشكو إلى القضاء "فيديو الحمير" داخل مركز صحي بوالماس     .', 'size': 2}], 'main_title': 'مندوبية الصحة بالخميسات توضح بخصوص “فيديو الحمير” داخل مركز صحي بوالماس'}, {'community_id': '3', 'articles': [{'id': '95', 'title': 'بايتاس يكشف حقيقة "الاعتراض" على المسطرة الجنائية', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/politic/407447.html', 'summary': 'بايتاس يكشف حقيقة "الاعتراض" على المسطرة الجنائية. نفى مصطفى بايتاس، الوزير المنتدب المكلف بالعلاقات مع البرلمان والناطق الرسمي باسم الحكومة، الأنباء التي تحدثت عن اعتراضه على إحالة مشروع المسطرة الجنائية إلى المحكمة', 'size': 2}, {'id': '138', 'title': 'بايتاس يرد على الجدل الدستوري: لا جهة خارج المؤسسات المخولة تملك حق الطعن في القوانين', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/315315/', 'summary': 'بايتاس يرد على الجدل الدستوري: لا جهة خارج المؤسسات المخولة تملك حق الطعن في القوانين. في معرض رده على أنباء تداولتها بعض المنابر الإعلامية، نفى مصطفى بايتاس، الوزير المنتدب لدى رئيس الحكومة المكلف بالعلاقات مع البرلمان، الناطق الرسمي باسم الحكومة، أن يكون قد اعترض على إحالة مشروع قانون المسطرة الجنائية على المحكمة الدستورية. وأكد أن ما راج بهذا الخصوص لا يستند إلى أساس قانوني ولا يتوافق مع الإطار الدستوري الذي', 'size': 3}, {'id': '177', 'title': 'بايتاس يربط التجاوب الحكومي مع 400 مقترح قانون بـ"البرنامج والميزانية"', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a8%d8%a7%d9%8a%d8%aa%d8%a7%d8%b3-%d9%8a%d8%b1%d8%a8%d8%b7-%d8%a7%d9%84%d8%aa%d8%ac%d8%a7%d9%88%d8%a8-%d8%a7%d9%84%d8%ad%d9%83%d9%88%d9%85%d9%8a-%d9%85%d8%b9-400-%d9%85%d9%82%d8%aa%d8%b1%d8%ad/', 'summary': 'بايتاس يربط التجاوب الحكومي مع 400 مقترح قانون بـ"البرنامج والميزانية". كشف مصطفى بايتاس، الوزير المنتدب المكلف بالعلاقات مع البرلمان، الناطق الرسمي باسم الحكومة، أن الحكومة توصلت بما يزيد عن 400 مقترح قانون، وتجاوبت مع مجموعة من مقترحات القوانين التي ترى داخل الحكومة أنها مهمة جدا. وأوضح بايتاس، في ندوة صحفية أعقبت انعقاد مجلس الحكومة اليوم الخميس بالرباط، أن الأساس القانوني لتعاطي الحكومة مع هذه المقترحات  بايتاس يربط التجاوب الحكومي مع 400 مقترح قانون بـ"البرنامج والميزانية"     .', 'size': 2}], 'main_title': 'بايتاس يرد على الجدل الدستوري: لا جهة خارج المؤسسات المخولة تملك حق الطعن في القوانين'}, {'community_id': '4', 'articles': [{'id': '98', 'title': 'ظهور حمارين في بهو مركز صحي يثير استنفار مندوبية الصحة بالخميسات', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/society/407450.html', 'summary': 'ظهور حمارين في بهو مركز صحي يثير استنفار مندوبية الصحة بالخميسات. في أعقاب انتشار صور ومقاطع فيديو على مواقع التواصل الاجتماعي تظهر وجود دابتين (حمارين) في البهو الخارجي للمركز الصحي القروي بأولماس، أصدرت المندوبية الإقليمية للصحة', 'size': 2}, {'id': '139', 'title': 'فيديو الحمير يورط مركزا صحيا بأولماس.. ووزارة الصحة تتحرك إداريا وقضائيا', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/315318/', 'summary': 'فيديو الحمير يورط مركزا صحيا بأولماس.. ووزارة الصحة تتحرك إداريا وقضائيا. أصدرت المندوبية الإقليمية للصحة والحماية الاجتماعية بالخميسات، اليوم الخميس 12 يونيو 2025، بلاغا توضيحيا على خلفية تداول صور ومقاطع فيديو عبر مواقع التواصل الاجتماعي، توثق وجود دابتين تتجولان في البهو الخارجي للمركز الصحي القروي بأولماس، ما أثار موجة من التفاعل والاستغراب في أوساط المتابعين. واعتبرت المندوبية، في بلاغها، أن هذا الحادث يعتبر خرقا جسيما وغير', 'size': 2}], 'main_title': 'ظهور حمارين في بهو مركز صحي يثير استنفار مندوبية الصحة بالخميسات'}, {'community_id': '5', 'articles': [{'id': '135', 'title': 'لجنة الـ24.. مجلس التعاون لدول الخليج العربية يجدد تأكيد مواقفه الثابتة الداعمة لمغربية الصحراء', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/315344/', 'summary': 'لجنة الـ24.. مجلس التعاون لدول الخليج العربية يجدد تأكيد مواقفه الثابتة الداعمة لمغربية الصحراء. جددت بلدان مجلس التعاون لدول الخليج العربية، في بيان أمام الدورة العادية للجنة الـ24 التابعة للأمم المتحدة، بنيويورك، تأكيد مواقفها الثابتة الداعمة لمغربية الصحراء وللوحدة الترابية للمملكة. وفي هذا البيان الذي تلاه ممثل دولة الكويت نيابة أيضا عن كل من دولة الإمارات العربية المتحدة، ومملكة البحرين، والمملكة العربية السعودية، وسلطنة عمان، ودولة قطر، خلال هذه', 'size': 3}, {'id': '147', 'title': 'ملف الصحراء.. التعاون الخليجي يُخيّب آمال الجزائر', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-574856.html', 'summary': 'ملف الصحراء.. التعاون الخليجي يُخيّب آمال الجزائر. جددت بلدان مجلس التعاون لدول الخليج العربية، في بيان أمام الدورة العادية للجنة الـ24 التابعة للأمم المتحدة، بنيويورك، تأكيد مواقفها الثابتة الداعمة لمغربية الصحراء وللوحدة الترابية للمملكة. وشدّدت دول المجلس سالف الذكر، في البيان الذي تلاه ممثل دولة الكويت نيابة أيضا عن كل من دولة الإمارات العربية المتحدة ومملكة البحرين والمملكة العربية السعودية', 'size': 2}, {'id': '194', 'title': 'مجلس التعاون لدول الخليج يجدد تأكيد مواقفه الثابتة الداعمة لمغربية الصحراء', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/466312.html', 'summary': 'مجلس التعاون لدول الخليج يجدد تأكيد مواقفه الثابتة الداعمة لمغربية الصحراء. جددت بلدان مجلس التعاون لدول الخليج العربية، في بيان أمام الدورة العادية للجنة الـ24 التابعة للأمم المتحدة، بنيويورك، تأكيد مواقفها الثابتة الداعمة لمغربية الصحراء وللوحدة الترابية للمملكة. وفي هذا البيان الذي تلاه ممثل دولة الكويت نيابة أيضا عن كل من دولة الإمارات العربية المتحدة، ومملكة البحرين، والمملكة العربية السعودية، وسلطنة عمان، ودولة قطر، خلال هذه …', 'size': 2}], 'main_title': 'لجنة الـ24.. مجلس التعاون لدول الخليج العربية يجدد تأكيد مواقفه الثابتة الداعمة لمغربية الصحراء'}, {'community_id': '6', 'articles': [{'id': '137', 'title': 'الدار البيضاء.. توقيف فرنسي مبحوث عنه دوليا بتهمة القتل وتهريب الحشيش', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/315324/', 'summary': 'الدار البيضاء.. توقيف فرنسي مبحوث عنه دوليا بتهمة القتل وتهريب الحشيش. تمكنت عناصر الأمن الوطني بمطار محمد الخامس الدولي بمدينة الدار البيضاء، يومه الخميس 12 يونيو الجاري، من توقيف مواطن فرنسي من أصول تونسية يبلغ من العمر 45 سنة، يشكل موضوع أمر دولي بإلقاء القبض صادر عن السلطات القضائية الفرنسية. وقد أظهرت عملية تنقيط المشتبه به في قاعدة بيانات المنظمة الدولية للشرطة الجنائية “إنتربول”، أنه مبحوث', 'size': 2}, {'id': '229', 'title': 'مطار محمد الخامس.. توقيف فرنسي موضوع نشرة حمراء من “الإنتربول”', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/222677/', 'summary': 'مطار محمد الخامس.. توقيف فرنسي موضوع نشرة حمراء من “الإنتربول”. كمال عسو أوقفت عناصر الأمن الوطني بمطار محمد الخامس الدولي بمدينة الدار البيضاء، اليوم الخميس، مواطنا فرنسيا من أصول تونسية يبلغ من العمر 45 سنة، يشكل موضوع أمر دولي بإلقاء القبض صادر عن السلطات القضائية الفرنسية. وحسب مصدر أمني، فإن عملية تنقيط المشتبه به في قاعدة بيانات المنظمة الدولية للشرطة الجنائية “إنتربول”، اظهرت أنه', 'size': 2}], 'main_title': 'الدار البيضاء.. توقيف فرنسي مبحوث عنه دوليا بتهمة القتل وتهريب الحشيش'}, {'community_id': '7', 'articles': [{'id': '167', 'title': 'وفد برلماني فرنسي يشيد بدينامية العلاقات الثنائية بين الرباط وباريس', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1077554.html', 'summary': 'وفد برلماني فرنسي يشيد بدينامية العلاقات الثنائية بين الرباط وباريس. تمت الإشادة خلال مباحثات أجراها رئيس مجلس النواب، راشيد الطالبي العلمي، اليوم الخميس 12 يونيو بمقر المجلس، مع وفد عن لجنة الشؤون الخارجية بالجمعية الوطنية الفرنسية، بدينامية العلاقات الثنائية في إطار احترام مبدأ سيادة الدول ووحدتها الترابية. وذكر بلاغ للمجلس أن المباحثات ركزت على تثمين الأوراش الكبرى المؤسسة ومبادرات الملك محمد السادس تجاه القارة الأفريقية ظهرت المقالة وفد برلماني فرنسي يشيد بدينامية العلاقات الثنائية بين الرباط وباريس  .', 'size': 2}, {'id': '226', 'title': 'الطالبي العلمي يتباحث مع وفد عن لجنة الشؤون الخارجية بالجمعية الوطنية الفرنسية', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/222688/', 'summary': 'الطالبي العلمي يتباحث مع وفد عن لجنة الشؤون الخارجية بالجمعية الوطنية الفرنسية. كواليس اليوم تمت الإشادة خلال مباحثات أجراها رئيس مجلس النواب، راشيد الطالبي العلمي، اليوم الخميس بمقر المجلس، مع وفد عن لجنة الشؤون الخارجية بالجمعية الوطنية الفرنسية، بدينامية العلاقات الثنائية في إطار احترام مبدأ سيادة الدول ووحدتها الترابية. وذكر بلاغ للمجلس أن المباحثات ركزت على تثمين الأوراش الكبرى المؤسسة ومبادرات جلالة الملك محمد السادس تجاه', 'size': 2}], 'main_title': 'وفد برلماني فرنسي يشيد بدينامية العلاقات الثنائية بين الرباط وباريس'}, {'community_id': '8', 'articles': [{'id': '172', 'title': 'الأمن بمطار محمد الخامس يوقف فرنسيا مطلوبا للإنتربول في جريمة قتل', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a7%d9%84%d8%a3%d9%85%d9%86-%d8%a8%d9%85%d8%b7%d8%a7%d8%b1-%d9%85%d8%ad%d9%85%d8%af-%d8%a7%d9%84%d8%ae%d8%a7%d9%85%d8%b3-%d9%8a%d9%88%d9%82%d9%81-%d9%81%d8%b1%d9%86%d8%b3%d9%8a%d8%a7-%d9%85%d8%b7/', 'summary': 'الأمن بمطار محمد الخامس يوقف فرنسيا مطلوبا للإنتربول في جريمة قتل. نجحت عناصر الأمن الوطني بمطار محمد الخامس الدولي بمدينة الدار البيضاء، الخميس، في توقيف مواطن فرنسي من أصول تونسية يبلغ من العمر 45 سنة، يشكل موضوع أمر دولي بإلقاء القبض صادر عن السلطات القضائية الفرنسية. وقد أظهرت عملية تنقيط المشتبه به في قاعدة بيانات المنظمة الدولية للشرطة الجنائية "إنتربول"، أنه مبحوث عنه على الصعيد الدولي  الأمن بمطار محمد الخامس يوقف فرنسيا مطلوبا للإنتربول في جريمة قتل     .', 'size': 2}, {'id': '242', 'title': 'توقيف فرنسي من أصول تونسية في مطار البيضاء مطلوب لدى السلطات القضائية الفرنسية', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%aa%d9%88%d9%82%d9%8a%d9%81-%d9%81%d8%b1%d9%86%d8%b3%d9%8a-%d9%85%d9%86-%d8%a3%d8%b5%d9%88%d9%84-%d8%aa%d9%88%d9%86%d8%b3%d9%8a%d8%a9-%d9%81%d9%8a-%d9%85%d8%b7%d8%a7%d8%b1-%d8%a7%d9%84%d8%a8%d9%8a/', 'summary': 'توقيف فرنسي من أصول تونسية في مطار البيضاء مطلوب لدى السلطات القضائية الفرنسية. تمكنت عناصر الأمن الوطني بمطار محمد الخامس الدولي بمدينة الدار البيضاء، يومه الخميس 12 يونيو الجاري، من توقيف مواطن فرنسي من أصول تونسية يبلغ من العمر 45 سنة، يشكل موضوع أمر دولي بإلقاء القبض صادر عن السلطات القضائية الفرنسية. وكشفت مصادر أمنية، أن عملية تنقيط المشتبه به في قاعدة بيانات المنظمة الدولية للشرطة …  توقيف فرنسي من أصول تونسية في مطار البيضاء مطلوب لدى السلطات القضائية الفرنسية     .', 'size': 2}], 'main_title': 'الأمن بمطار محمد الخامس يوقف فرنسيا مطلوبا للإنتربول في جريمة قتل'}, {'community_id': '9', 'articles': [{'id': '197', 'title': 'بمبادرة من وكالة بيت مال القدس.. توزيع 500 سلة غذائية على العائلات الأكثر احتياجا في غزة', 'source': 'machahid24.com', 'link': 'https://machahid24.com/international/466305.html', 'summary': 'بمبادرة من وكالة بيت مال القدس.. توزيع 500 سلة غذائية على العائلات الأكثر احتياجا في غزة. و.م.ع أنهت أمس الأربعاء فرق الإغاثة التابعة لجمعية ارتقاء للتنمية المجتمعية بغزة عملية توزيع 500 سلة غذائية على العائلات الأكثر احتياجا في عدد من مناطق القطاع، بمبادرة من وكالة بيت مال القدس الشريف، التابعة للجنة القدس، برئاسة الملك محمد السادس. وشملت هذه العملية، التي تم تنفيذها على مراحل، بتمويل من الجمعية المغربية لدعم الإعمار في …', 'size': 2}, {'id': '243', 'title': 'بعيدا على البهرجة.. المغرب يواصل إغاثة سكان غزة عبر وكالة بيت مال القدس الشريف', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a8%d8%b9%d9%8a%d8%af%d8%a7-%d8%b9%d9%84%d9%89-%d8%a7%d9%84%d8%a8%d9%87%d8%b1%d8%ac%d8%a9-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d9%8a%d9%88%d8%a7%d8%b5%d9%84-%d8%a5%d8%ba%d8%a7%d8%ab%d8%a9-%d8%b3/', 'summary': 'بعيدا على البهرجة.. المغرب يواصل إغاثة سكان غزة عبر وكالة بيت مال القدس الشريف. أنهت فرق الإغاثة التابعة لجمعية ارتقاء للتنمية المجتمعية، يوم الأربعاء، عملية توزيع 500 سلة غذائية على العائلات الأكثر هشاشة في عدد من مناطق قطاع غزة، وذلك في إطار مبادرة إنسانية أطلقتها وكالة بيت مال القدس الشريف، التابعة للجنة القدس، التي يرأسها الملك محمد السادس. وجرت عملية التوزيع على مراحل، بتمويل من الجمعية المغربية …  بعيدا على البهرجة.. المغرب يواصل إغاثة سكان غزة عبر وكالة بيت مال القدس الشريف     .', 'size': 2}], 'main_title': 'بمبادرة من وكالة بيت مال القدس.. توزيع 500 سلة غذائية على العائلات الأكثر احتياجا في غزة'}, {'community_id': '10', 'articles': [{'id': '215', 'title': 'بوريطة يتباحث بالرباط مع رئيس مجموعة الصداقة فرنسا-المغرب بمجلس الشيوخ الفرنسي', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d8%a8%d9%88%d8%b1%d9%8a%d8%b7%d8%a9-%d9%8a%d8%aa%d8%a8%d8%a7%d8%ad%d8%ab-%d8%a8%d8%a7%d9%84%d8%b1%d8%a8%d8%a7%d8%b7-%d9%85%d8%b9-%d8%b1%d8%a6%d9%8a%d8%b3-%d9%85%d8%ac%d9%85%d9%88%d8%b9%d8%a9-%d8%a7/', 'summary': 'بوريطة يتباحث بالرباط مع رئيس مجموعة الصداقة فرنسا-المغرب بمجلس الشيوخ الفرنسي.  – و م ع أجرى وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج، ناصر بوريطة، اليوم الخميس بالرباط، مباحثات مع رئيس مجموعة الصداقة فرنسا-المغرب بمجلس الشيوخ الفرنسي، كريستيان...  بوريطة يتباحث بالرباط مع رئيس مجموعة الصداقة فرنسا-المغرب بمجلس الشيوخ الفرنسي     .', 'size': 2}, {'id': '244', 'title': 'بوريطة يتباحث مع رئيس مجموعة الصداقة فرنسا -المغرب بمجلس الشيوخ الفرنسي', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a8%d9%88%d8%b1%d9%8a%d8%b7%d8%a9-%d9%8a%d8%aa%d8%a8%d8%a7%d8%ad%d8%ab-%d9%85%d8%b9-%d8%b1%d8%a6%d9%8a%d8%b3-%d9%85%d8%ac%d9%85%d9%88%d8%b9%d8%a9-%d8%a7%d9%84%d8%b5%d8%af%d8%a7%d9%82%d8%a9-%d9%81/', 'summary': 'بوريطة يتباحث مع رئيس مجموعة الصداقة فرنسا -المغرب بمجلس الشيوخ الفرنسي. أجرى وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج، ناصر بوريطة، اليوم الخميس بالرباط، مباحثات مع رئيس مجموعة الصداقة فرنسا-المغرب بمجلس الشيوخ الفرنسي، كريستيان كامبون، الذي يقوم بزيارة عمل إلى المملكة على رأس وفد هام. وأعرب كامبون، في تصريحات صحفية،عن ارتياحه للتبادلات المثمرة بين الجانبين، مبرزا أهمية الحوار الثنائي الذي يعود لسنوات طويلة، …  بوريطة يتباحث مع رئيس مجموعة الصداقة فرنسا -المغرب بمجلس الشيوخ الفرنسي     .', 'size': 2}, {'id': '410', 'title': 'الرباط.. بوريطة يتباحث مع رئيس مجموعة الصداقة فرنسا-المغرب بمجلس الشيوخ الفرنسي', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/222717/', 'summary': 'الرباط.. بوريطة يتباحث مع رئيس مجموعة الصداقة فرنسا-المغرب بمجلس الشيوخ الفرنسي. و م ع أجرى وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج، ناصر بوريطة، أمس الخميس بالرباط، مباحثات مع رئيس مجموعة الصداقة فرنسا-المغرب بمجلس الشيوخ الفرنسي، كريستيان كامبون، الذي يقوم بزيارة عمل إلى المملكة على رأس وفد هام. وفي تصريح للصحافة عقب هذه المباحثات، أعرب كامبون عن ارتياحه للتبادلات المثمرة بين الجانبين، مبرزا أهمية', 'size': 3}], 'main_title': 'الرباط.. بوريطة يتباحث مع رئيس مجموعة الصداقة فرنسا-المغرب بمجلس الشيوخ الفرنسي'}, {'community_id': '11', 'articles': [{'id': '274', 'title': 'مكتب الكهرماء يوضح بشأن ماء زاكورة', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d8%a7%d9%84%d9%83%d9%87%d8%b1%d9%85%d8%a7%d8%a1-%d9%8a%d9%88%d8%b6%d8%ad-%d8%a8%d8%b4%d8%a3%d9%86-%d9%85%d8%a7%d8%a1-%d8%b2%d8%a7%d9%83%d9%88%d8%b1%d8%a9-1575429.html', 'summary': 'مكتب الكهرماء يوضح بشأن ماء زاكورة. تفاعلا مع الاستنكار الذي عبّر عنه سكان دواوير بزاكورة بسبب انقطاع الماء، أصدرت المديرية الجهوية لدرعة تافيلالت للمكتب الوطني للكهرباء والماء الصالح للشرب-قطاع الماء بلاغا توضيحيا بخصوص وضعية التزويد بالماء الصالح للشرب في إقليم زاكورة. وأوضح البلاغ سالف الذكر أن “المكتب الوطني للكهرباء والماء الصالح للشرب يتدخل في تسيير خدمة التزويد بالماء الصالح للشرب على  مكتب الكهرماء يوضح بشأن ماء زاكورة     - هسبريس جريدة إلكترونية مغربية .', 'size': 2}, {'id': '399', 'title': '“ماء زاكورة”.. مكتب الماء يخرج ببيان', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d9%85%d8%a7%d8%a1-%d8%b2%d8%a7%d9%83%d9%88%d8%b1%d8%a9-%d9%85%d9%83%d8%aa%d8%a8-%d8%a7%d9%84%d9%85%d8%a7%d8%a1-%d9%8a%d8%ae%d8%b1%d8%ac-%d8%a8%d8%a8%d9%8a%d8%a7%d9%86/', 'summary': '“ماء زاكورة”.. مكتب الماء يخرج ببيان.  – متابعات في أعقاب استياء سكان دواوير زاكورة بسبب انقطاع المياه، أصدرت المديرية الجهوية لدرعة تافيلالت التابعة للمكتب الوطني للكهرباء والماء الصالح للشرب – قطاع الماء بياناً توضيحياً...  “ماء زاكورة”.. مكتب الماء يخرج ببيان     .', 'size': 2}], 'main_title': 'مكتب الكهرماء يوضح بشأن ماء زاكورة'}, {'community_id': '12', 'articles': [{'id': '276', 'title': 'إيران: الهجوم الإٍسرائيلي "إعلان حرب"', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d8%a5%d9%8a%d8%b1%d8%a7%d9%86-%d8%a7%d9%84%d9%87%d8%ac%d9%88%d9%85-%d8%a7%d9%84%d8%a5%d9%8d%d8%b3%d8%b1%d8%a7%d8%a6%d9%8a%d9%84%d9%8a-%d8%a5%d8%b9%d9%84%d8%a7%d9%86-%d8%ad%d8%b1%d8%a8-1575468.html', 'summary': 'إيران: الهجوم الإٍسرائيلي "إعلان حرب". عيّنَ آية الله علي خامنئي، المرشد الأعلى للجمهورية الإيرانية، قائدا جديدا لكل من هيئة الأركان وللحرس الثوري خلفا لمسؤولي الجهازين اللذين قتلا في الضربات الإسرائيلية على إيران الجمعة. وفي مرسومين منفصلين، عيّن خامنئي عبد الرحيم موسوي مكان محمد باقري قائدا للهيئة المشتركة للقوات المسلحة، ومحمد باكبور ليحل مكان حسين سلامي قائدا للحرس الثوري الإيراني. وقالت  إيران: الهجوم الإٍسرائيلي "إعلان حرب"     - هسبريس جريدة إلكترونية مغربية .', 'size': 2}, {'id': '373', 'title': 'بعد مقتل باقري وسلامي.. إيران تعين قائدين جديدين للجيش والحرس الثوري', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a8%d8%b9%d8%af-%d9%85%d9%82%d8%aa%d9%84-%d8%a8%d8%a7%d9%82%d8%b1%d9%8a-%d9%88%d8%b3%d9%84%d8%a7%d9%85%d9%8a-%d8%a5%d9%8a%d8%b1%d8%a7%d9%86-%d8%aa%d8%b9%d9%8a%d9%86-%d9%82%d8%a7%d8%a6%d8%af%d9%8a/', 'summary': 'بعد مقتل باقري وسلامي.. إيران تعين قائدين جديدين للجيش والحرس الثوري. عين المرشد الأعلى للجمهورية الإيرانية آية الله علي خامنئي قائدا جديدا لكل من هيئة الأركان وللحرس الثوري خلفا لمسوؤلي الجهازين اللذين قتلا في الضربات الإسرائيلية على إيران الجمعة. وفي مرسومين منفصلين عين خامنئي عبد الرحيم موسوي مكان محمد باقري قائدا للهيئة المشتركة للقوات المسلحة ومحمد باكبور ليحل مكان حسين سلامي قائدا للحرس الثوري الإيراني.  بعد مقتل باقري وسلامي.. إيران تعين قائدين جديدين للجيش والحرس الثوري     .', 'size': 2}, {'id': '411', 'title': 'إيران تعين قائدين جديدين للجيش والحرس الثوري بعد مقتل باقري وسلامي', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/222714/', 'summary': 'إيران تعين قائدين جديدين للجيش والحرس الثوري بعد مقتل باقري وسلامي. وكالات عين المرشد الأعلى للجمهورية الإيرانية آية الله علي خامنئي قائدا جديدا لكل من هيئة الأركان وللحرس الثوري خلفا لمسوؤلي الجهازين اللذين قتلا في الضربات الإسرائيلية على إيران الجمعة. وفي مرسومين منفصلين عين خامنئي عبد الرحيم موسوي مكان محمد باقري قائدا للهيئة المشتركة للقوات المسلحة ومحمد باكبور ليحل مكان حسين سلامي قائدا للحرس الثوري', 'size': 3}], 'main_title': 'إيران تعين قائدين جديدين للجيش والحرس الثوري بعد مقتل باقري وسلامي'}, {'community_id': '13', 'articles': [{'id': '303', 'title': 'كيف هي توقعات أحوال الطقس لليوم الجمعة؟!', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/202019', 'summary': 'كيف هي توقعات أحوال الطقس لليوم الجمعة؟!.  تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الجمعة، أن تتميز الحالة الجوية عامة، بطقس حار نسبيا بكل من جنوب المنطقة الشرقية، والجنوب الشرقي للبلاد، وجنوب وشرق الأقاليم الصحراوية. كما يرتقب تشكل سحب غير مستقرة مع نزول قطرات مطرية متفرقة وبروز رعد محلي بالمنطقة الشرقية، فضلا عن تمركز سحب منخفضة كثيفة خلال الصباح والليل شمال', 'size': 3}, {'id': '413', 'title': 'طقس الجمعة.. استمرار حرارة الجو ببعض المناطق في المملكة', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/222705/', 'summary': 'طقس الجمعة.. استمرار حرارة الجو ببعض المناطق في المملكة. كواليس اليوم تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الجمعة، أن تتميز الحالة الجوية عامة، بطقس حار نسبيا بكل من جنوب المنطقة الشرقية، والجنوب الشرقي للبلاد، وجنوب وشرق الأقاليم الصحراوية. كما يرتقب تشكل سحب غير مستقرة مع نزول قطرات مطرية متفرقة وبروز رعد محلي بالمنطقة الشرقية، فضلا عن تمركز سحب منخفضة كثيفة خلال الصباح', 'size': 2}, {'id': '426', 'title': 'توقعات أحوال الطقس في العديد من مناطق المملكة اليوم الجمعة', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%aa%d9%88%d9%82%d8%b9%d8%a7%d8%aa-%d8%a3%d8%ad%d9%88%d8%a7%d9%84-%d8%a7%d9%84%d8%b7%d9%82%d8%b3-%d9%81%d9%8a-%d8%a7%d9%84%d8%b9%d8%af%d9%8a%d8%af-%d9%85%d9%86-%d9%85%d9%86%d8%a7%d8%b7%d9%82-85/', 'summary': 'توقعات أحوال الطقس في العديد من مناطق المملكة اليوم الجمعة. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليومه الجمعة، أن تتميز الحالة الجوية عامة، بطقس حار نسبيا بكل من جنوب المنطقة الشرقية، والجنوب الشرقي للبلاد، وجنوب وشرق الأقاليم الصحراوية. كما يرتقب تشكل سحب غير مستقرة مع نزول قطرات مطرية متفرقة وبروز رعد محلي بالمنطقة الشرقية، فضلا عن تمركز سحب منخفضة كثيفة خلال الصباح والليل …  توقعات أحوال الطقس في العديد من مناطق المملكة اليوم الجمعة     .', 'size': 2}], 'main_title': 'كيف هي توقعات أحوال الطقس لليوم الجمعة؟!'}, {'community_id': '14', 'articles': [{'id': '346', 'title': 'الحموشي يرقي شرطي أصيب أثناء مهامه بالبيضاء', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/315385/', 'summary': 'الحموشي يرقي شرطي أصيب أثناء مهامه بالبيضاء. قرر المدير العام للأمن الوطني ولمراقبة التراب الوطني عبد اللطيف حموشي، يومه الجمعة 13 يونيو الجاري، منح ترقية استثنائية في الرتبة لموظف شرطة يعمل بالفرقة المتنقلة للدراجيين بمنطقة أمن الفداء مرس السلطان بالدار البيضاء، والذي كان ضحية حادثة سير عمدية بجروح بليغة أثناء مزاولته لمهامه النظامية. وتنفيذا لهذا القرار، تمت ترقية ضابط الأمن المصاب', 'size': 2}, {'id': '408', 'title': 'حموشي يمنح ترقية استثنائية لشرطي كان ضحية حادثة سير عمدية', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/222724/', 'summary': 'حموشي يمنح ترقية استثنائية لشرطي كان ضحية حادثة سير عمدية. كمال عسو أصدر المدير العام للأمن الوطني ولمراقبة التراب الوطني، عبد اللطيف حموشي، اليوم الجمعة، قرارا يقضي بمنح ترقية استثنائية في الرتبة لموظف شرطة يعمل بالفرقة المتنقلة للدراجين بمنطقة أمن الفداء مرس السلطان بالدار البيضاء، والذي كان ضحية حادثة سير عمدية بجروح بليغة أثناء مزاولته لمهامه النظامية. وتنفيذا لهذا القرار، تمت ترقية ضابط الأمن', 'size': 2}], 'main_title': 'الحموشي يرقي شرطي أصيب أثناء مهامه بالبيضاء'}, {'community_id': '1', 'articles': [{'id': '349', 'title': 'بركة: سياسة السدود رافعة استراتيجية لتعزيز المرونة المائية', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/315377/', 'summary': 'بركة: سياسة السدود رافعة استراتيجية لتعزيز المرونة المائية. أكد وزير التجهيز والماء نزار بركة، أمس الخميس بالدار البيضاء، أن سياسة السدود، التي يتم تنفيذها تحت القيادة الرشيدة للملك محمد السادس، تشكل رافعة أساسية في تعزيز المرونة المائية للمغرب. وأوضح الوزير، خلال ندوة نقاش نظمتها “ميديا 24” تحت عنوان “تحديات الماء: أين وصل المغرب في 2025 ؟”، أن هذه الرافعة الاستراتيجية تقوم على أربعة', 'size': 2}, {'id': '412', 'title': 'بركة: سياسة السدود التي يتم تنفيذها تحت قيادة جلالة الملك تعزز المرونة المائية للمغرب', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/222708/', 'summary': 'بركة: سياسة السدود التي يتم تنفيذها تحت قيادة جلالة الملك تعزز المرونة المائية للمغرب. كواليس اليوم أكد وزير التجهيز والماء نزار بركة، أن سياسة السدود، التي يتم تنفيذها تحت القيادة الرشيدة لصاحب الجلالة الملك محمد السادس، تشكل رافعة أساسية في تعزيز المرونة المائية للمغرب. وأوضح الوزير، خلال ندوة احتضنتها أمس الخميس مدينة الدار البيضاء تحت عنوان “تحديات الماء: أين وصل المغرب في 2025 ؟ ، أن هذه الرافعة', 'size': 2}], 'main_title': 'بركة: سياسة السدود رافعة استراتيجية لتعزيز المرونة المائية'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    