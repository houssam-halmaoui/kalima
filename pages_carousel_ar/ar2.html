<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 27/08/2025 - 12h26</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '68', 'title': 'برقية تعزية ومواساة من جلالة الملك إلى أفراد أسرة المرحوم الإعلامي محمد حسن الوالي', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/205374', 'summary': 'برقية تعزية ومواساة من جلالة الملك إلى أفراد أسرة المرحوم الإعلامي محمد حسن الوالي.  بعث صاحب الجلالة الملك محمد السادس برقية تعزية ومواساة إلى أفراد أسرة المرحوم الإعلامي محمد حسن الوالي. وجاء في برقية جلالة الملك “تلقينا ببالغ التأثر نعي المشمول يعفو الله وغفرانه، الإعلامي القدير المرحوم محمد حسن الوالي، تغمده سبحانه بواسع رحمته وأسكنه فسيح جنانه”. وقال جلالة الملك“ وبهذه المناسبة المحزنة ، نعرب لكم ولكافة', 'size': 5}, {'id': '191', 'title': 'جلالة الملك يعزي أفراد أسرة المرحوم الإعلامي محمد حسن الوالي', 'source': 'rue20.com', 'link': 'https://rue20.com/931531.html', 'summary': 'جلالة الملك يعزي أفراد أسرة المرحوم الإعلامي محمد حسن الوالي.  الرباط بعث صاحب الجلالة الملك محمد السادس برقية تعزية ومواساة إلى أفراد أسرة المرحوم الإعلامي محمد حسن الوالي. وجاء في برقية جلالة الملك “تلقينا ببالغ التأثر نعي المشمول يعفو الله وغفرانه، الإعلامي القدير المرحوم محمد حسن الوالي، تغمده سبحانه بواسع رحمته وأسكنه فسيح جنانه”. وقال جلالة الملك “وبهذه المناسبة المحزنة، نعرب لكم ولكافة أهلكم الخبر جلالة الملك يعزي أفراد أسرة المرحوم الإعلامي محمد حسن الوالي  .', 'size': 5}, {'id': '206', 'title': 'الملك يعزي أفراد أسرة المرحوم الإعلامي محمد حسن الوالي', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/473764.html', 'summary': 'الملك يعزي أفراد أسرة المرحوم الإعلامي محمد حسن الوالي. بعث الملك محمد السادس، برقية تعزية ومواساة إلى أفراد أسرة المرحوم الإعلامي محمد حسن الوالي. وجاء في برقية الملك “تلقينا ببالغ التأثر نعي المشمول يعفو الله وغفرانه، الإعلامي القدير المرحوم محمد حسن الوالي، تغمده سبحانه بواسع رحمته وأسكنه فسيح جنانه”. وقال الملك “وبهذه المناسبة المحزنة، نعرب لكم ولكافة أهلكم وذويكم، ومن خلالكم لأسرة الراحل الإعلامية …', 'size': 5}, {'id': '233', 'title': 'برقية تعزية مؤثرة من جلالة الملك إلى أسرة الإعلامي الراحل “علي حسن”', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/226350/', 'summary': 'برقية تعزية مؤثرة من جلالة الملك إلى أسرة الإعلامي الراحل “علي حسن”. بعث صاحب الجلالة الملك محمد السادس برقية تعزية ومواساة إلى أفراد أسرة المرحوم الإعلامي محمد حسن الوالي. وجاء في برقية جلالة الملك “تلقينا ببالغ التأثر نعي المشمول يعفو الله وغفرانه، الإعلامي القدير المرحوم محمد حسن الوالي، تغمده سبحانه بواسع رحمته وأسكنه فسيح جنانه”. وقال جلالة الملك “وبهذه المناسبة المحزنة، نعرب لكم ولكافة أهلكم وذويكم، ومن', 'size': 5}, {'id': '344', 'title': 'الملك معزيا في محمد حسن: صحفي اتصف بالخلق الحميد وبالكفاءة الرفيعة', 'source': 'soltana.ma', 'link': 'https://soltana.ma/1357696.html', 'summary': 'الملك معزيا في محمد حسن: صحفي اتصف بالخلق الحميد وبالكفاءة الرفيعة. بعث الملك محمد السادس برقية تعزية ومواساة إلى أفراد أسرة المرحوم الإعلامي محمد حسن الوالي. وجاء في برقية الملك “تلقينا ببالغ التأثر نعي المشمول يعفو الله وغفرانه، الإعلامي القدير المرحوم محمد حسن الوالي، تغمده سبحانه بواسع رحمته وأسكنه فسيح جنانه”. وقال الملك “وبهذه المناسبة المحزنة، نعرب لكم ولكافة أهلكم وذويكم، ومن خلالكم لأسرة الراحل الإعلامية', 'size': 5}], 'main_title': 'برقية تعزية ومواساة من جلالة الملك إلى أفراد أسرة المرحوم الإعلامي محمد حسن الوالي'}, {'community_id': '2', 'articles': [{'id': '70', 'title': 'انطلاق عملية انتقاء وإدماج مجندي التجريدة الـ40 للخدمة العسكرية ابتداء من فاتح شتنبر المقبل', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/205360', 'summary': 'انطلاق عملية انتقاء وإدماج مجندي التجريدة الـ40 للخدمة العسكرية ابتداء من فاتح شتنبر المقبل.  تنفيذا للتعليمات السامية لصاحب الجلالة الملك ، القائد الأعلى ورئيس أركان الحرب العامة للقوات المسلحة الملكية نصره الله ، ستشرع مراكز تكوين المجندين في عملية انتقاء و إدماج مجندي التجريدة الأربعين (40) للخدمة العسكرية،وذلك ابتداء من فاتح شتنبر المقبل، حسب بلاغ للقيادة العامة للقوات المسلحة الملكية. وأوضح المصدر ذاته، أنه لهذه الغاية، اتخذت', 'size': 2}, {'id': '100', 'title': 'بــلاغ للقيـادة العـامة للقوات المسلحة الملكية', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/411687.html', 'summary': 'بــلاغ للقيـادة العـامة للقوات المسلحة الملكية. تنفيذا للتعليمات السامية لصاحب الجلالة الملك، القائد الأعلى ورئيس أركان الحرب العامة للقوات المسلحة الملكية نصره الله، ستشرع مراكز تكوين المجندين في عملية انتقاء وإدماج', 'size': 2}], 'main_title': 'انطلاق عملية انتقاء وإدماج مجندي التجريدة الـ40 للخدمة العسكرية ابتداء من فاتح شتنبر المقبل'}, {'community_id': '1', 'articles': [{'id': '145', 'title': 'فاس…وفاة شخص كان موضوعا رهن المراقبة الطبية بمؤسسة استشفائية', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/321742/', 'summary': 'فاس…وفاة شخص كان موضوعا رهن المراقبة الطبية بمؤسسة استشفائية. علم لدى ولاية أمن فاس أن شخصا كان موضوعا رهن المراقبة الطبية بمؤسسة استشفائية، لضرورة وحاجيات البحث في قضية جنحية، قد توفي صباح اليوم الثلاثاء 26 غشت الجاري بالمستشفى الجامعي بمدينة فاس. وحسب المعلومات الأولية للبحث، فقد تم توقيف المعني بالأمر بتاريخ 16 غشت الجاري على خلفية الاشتباه في تورطه في قضية جنحية، حيث', 'size': 3}, {'id': '154', 'title': 'وفاة شخص بفاس بعد توقيفه من طرف الشرطة', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-586625.html', 'summary': 'وفاة شخص بفاس بعد توقيفه من طرف الشرطة. علم لدى ولاية أمن فاس أن شخصا كان موضوعا رهن المراقبة الطبية بمؤسسة استشفائية، لضرورة وحاجيات البحث في قضية جنحية، قد توفي اليوم الثلاثاء 26 غشت 2025 بالمستشفى الجامعي بمدينة فاس. وحسب المعلومات الأولية للبحث، فقد تم توقيف المعني بالأمر بتاريخ 16 غشت 2025 على خلفية الاشتباه في تورطه في قضية جنحية، حيث صرح', 'size': 3}, {'id': '234', 'title': 'ولاية أمن فاس: بحث قضائي في وفاة موقوف كان رهن المراقبة الطبية بمؤسسة استشفائية', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/226348/', 'summary': 'ولاية أمن فاس: بحث قضائي في وفاة موقوف كان رهن المراقبة الطبية بمؤسسة استشفائية. علم لدى ولاية أمن فاس أن شخصا كان موضوعا رهن المراقبة الطبية بمؤسسة استشفائية، لضرورة وحاجيات البحث في قضية جنحية، قد توفي صباح اليوم الثلاثاء 26 غشت الجاري بالمستشفى الجامعي بمدينة فاس. وحسب المعلومات الأولية للبحث، فقد تم توقيف المعني بالأمر بتاريخ 16 غشت الجاري على خلفية الاشتباه في تورطه في قضية جنحية، حيث صرح', 'size': 3}], 'main_title': 'فاس…وفاة شخص كان موضوعا رهن المراقبة الطبية بمؤسسة استشفائية'}, {'community_id': '7', 'articles': [{'id': '147', 'title': 'طقس الأربعاء.. أمطار ورياح قوية بهذه المناطق المغربية', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-586650.html', 'summary': 'طقس الأربعاء.. أمطار ورياح قوية بهذه المناطق المغربية. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليوم غد الأربعاء، أن يظل الطقس حارا نسبيا بالجنوب الشرقي وبأقصى جنوب البلاد. كما يرتقب تشكل سحب منخفضة كثيفة مصحوبة بأمطار جد خفيفة محليا بالسواحل الممتدة ما بين تزنيت وبوجدور، وذلك خلال الصباح والليل. ويتوقع أيضا تكون كثل ضبابية بالسهول الأطلسية، خلال الصباح والليل، مع تمركز سحب', 'size': 4}, {'id': '342', 'title': 'توقعات أحوال الطقس.. يرتقب تشكل سحب منخفضة كثيفة', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%aa%d9%88%d9%82%d8%b9%d8%a7%d8%aa-%d8%a3%d8%ad%d9%88%d8%a7%d9%84-%d8%a7%d9%84%d8%b7%d9%82%d8%b3-%d9%8a%d8%b1%d8%aa%d9%82%d8%a8-%d8%aa%d8%b4%d9%83%d9%84-%d8%b3%d8%ad%d8%a8-%d9%85%d9%86%d8%ae%d9%81/', 'summary': 'توقعات أحوال الطقس.. يرتقب تشكل سحب منخفضة كثيفة. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الأربعاء، أن يظل الطقس حارا نسبيا بالجنوب الشرقي وبأقصى جنوب البلاد. ويرتقب تشكل سحب منخفضة كثيفة مصحوبة بأمطار جد خفيفة محليا بالسواحل الممتدة ما بين تزنيت وبوجدور، وذلك خلال الصباح والليل. ويتوقع أيضا تكون كثل ضبابية بالسهول الأطلسية، خلال الصباح والليل، مع تمركز سحب ركامية فوق الأطلسين الكبير  توقعات أحوال الطقس.. يرتقب تشكل سحب منخفضة كثيفة     .', 'size': 4}, {'id': '343', 'title': 'طقس اليوم: جو حار مصحوب بضباب بهذه المناطق', 'source': 'soltana.ma', 'link': 'https://soltana.ma/1357699.html', 'summary': 'طقس اليوم: جو حار مصحوب بضباب بهذه المناطق. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليومه الأربعاء، أن يظل الطقس حارا نسبيا بالجنوب الشرقي وبأقصى جنوب البلاد. كما يرتقب تشكل سحب منخفضة كثيفة مصحوبة بأمطار جد خفيفة محليا بالسواحل الممتدة ما بين تزنيت وبوجدور، وذلك خلال الصباح والليل. ويتوقع أيضا تكون كثل ضبابية بالسهول الأطلسية، خلال الصباح والليل، مع تمركز سحب ركامية فوق الأطلسين', 'size': 4}, {'id': '382', 'title': 'توقعات أحوال الطقس اليوم الأربعاء', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%aa%d9%88%d9%82%d8%b9%d8%a7%d8%aa-%d8%a3%d8%ad%d9%88%d8%a7%d9%84-%d8%a7%d9%84%d8%b7%d9%82%d8%b3-%d8%a7%d9%84%d9%8a%d9%88%d9%85-%d8%a7%d9%84%d8%a3%d8%b1%d8%a8%d8%b9%d8%a7%d8%a1-34/', 'summary': 'توقعات أحوال الطقس اليوم الأربعاء. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليومه الأربعاء، أن يظل الطقس حارا نسبيا بالجنوب الشرقي وبأقصى جنوب البلاد. كما يرتقب تشكل سحب منخفضة كثيفة مصحوبة بأمطار جد خفيفة محليا بالسواحل الممتدة ما بين تزنيت وبوجدور، وذلك خلال الصباح والليل. ويتوقع أيضا تكون كثل ضبابية بالسهول الأطلسية، خلال الصباح والليل، مع تمركز سحب ركامية …  توقعات أحوال الطقس اليوم الأربعاء     .', 'size': 4}], 'main_title': 'طقس الأربعاء.. أمطار ورياح قوية بهذه المناطق المغربية'}, {'community_id': '5', 'articles': [{'id': '152', 'title': 'نفاذ تذاكر مباراة المغرب والنيجر ساعات بعد طرحها', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-586627.html', 'summary': 'نفاذ تذاكر مباراة المغرب والنيجر ساعات بعد طرحها. كشفت اللجنة المنظمة لمباراة المنتخب الوطني المغربي أمام نظيره منتخب النيجر، المقرر إجراؤها يوم الجمعة 5 شتنبر المقبل، على أرضية المجمع الرياضي الأمير مولاي عبد الله بمدينة الرباط، في إطار تصفيات كأس العالم 2026، عن عدد التذاكر التي اقتنتها الجماهير الرياضية لحضور المواجهة المذكورة. وأكدت اللجنة المذكورة أن عدد التذاكر التي تم', 'size': 2}, {'id': '345', 'title': 'أسود الأطلس بشبابيك مغلقة.. نفاذ جميع تذاكر مباراة المغرب والنيجر', 'source': 'rue20.com', 'link': 'https://rue20.com/931657.html', 'summary': 'أسود الأطلس بشبابيك مغلقة.. نفاذ جميع تذاكر مباراة المغرب والنيجر.  | الرباط أعلنت اللجنة المنظمة للمباراة التي ستجمع بين المنتخب الوطني المغربي ونظيره منتخب النيجر، المقررة يوم الجمعة 5 شتنبر 2025 بالمجمع الرياضي الأمير مولاي عبد الله بمدينة الرباط، عن نفاد جميع التذاكر المخصصة لهذه المواجهة، التي ستنطلق على الساعة الثامنة مساءً. وأكدت اللجنة في بلاغ رسمي أن المباراة ستُجرى بشبابيك مغلقة، نظراً الخبر أسود الأطلس بشبابيك مغلقة.. نفاذ جميع تذاكر مباراة المغرب والنيجر  .', 'size': 2}], 'main_title': 'نفاذ تذاكر مباراة المغرب والنيجر ساعات بعد طرحها'}, {'community_id': '3', 'articles': [{'id': '258', 'title': 'أوروبا تجيز دواء جديداً ضد "الإيدز"', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d8%a3%d9%88%d8%b1%d9%88%d8%a8%d8%a7-%d8%aa%d8%ac%d9%8a%d8%b2-%d8%af%d9%88%d8%a7%d8%a1-%d8%ac%d8%af%d9%8a%d8%af%d8%a7%d9%8b-%d8%b6%d8%af-%d8%a7%d9%84%d8%a5%d9%8a%d8%af%d8%b2-1614974.html', 'summary': 'أوروبا تجيز دواء جديداً ضد "الإيدز". أجازت المفوضية الأوروبية طرحَ علاج وقائي جديد لفيروس نقص المناعة البشرية (الإيدز) في دول الاتحاد الأوروبي، على ما أفاد الثلاثاء بيان لشركة “غلياد” للأدوية التي تصنعه. ولا يتطلب هذا الدواء الذي أُطلِقَت عليه في أوروبا تسمية “ييتوو” Yeytuo (في الولايات المتحدة “يزتوغو” Yeztugo) سوى حقنتين سنويتين، في حين تقوم غالبية المنتجات المنافسة له على تناول  أوروبا تجيز دواء جديداً ضد "الإيدز"     - هسبريس جريدة إلكترونية مغربية .', 'size': 2}, {'id': '339', 'title': 'المفوضية الأوروبية تجيز طرح دواء وقائي جديد للإيدز من شركة "غلياد"', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a7%d9%84%d9%85%d9%81%d9%88%d8%b6%d9%8a%d8%a9-%d8%a7%d9%84%d8%a3%d9%88%d8%b1%d9%88%d8%a8%d9%8a%d8%a9-%d8%aa%d8%ac%d9%8a%d8%b2-%d8%b7%d8%b1%d8%ad-%d8%af%d9%88%d8%a7%d8%a1-%d9%88%d9%82%d8%a7%d8%a6/', 'summary': 'المفوضية الأوروبية تجيز طرح دواء وقائي جديد للإيدز من شركة "غلياد". أجازت المفوضية الأوروبية طرح علاج وقائي جديد لفيروس نقص المناعة البشرية (الإيدز) في دول الاتحاد الأوروبي، على ما أفاد الثلاثاء بيان لشركة "غلياد" للأدوية التي تصنعه. ولا يتطلب هذا الدواء الذي أطلقت عليه في أوروبا تسمية "ييتوو" Yeytuo (في الولايات المتحدة "يزتوغو" Yeztugo) سوى حقنتين سنويتين، في حين تقوم غالبية المنتجات المنافسة له على تناول  المفوضية الأوروبية تجيز طرح دواء وقائي جديد للإيدز من شركة "غلياد"     .', 'size': 2}], 'main_title': 'أوروبا تجيز دواء جديداً ضد "الإيدز"'}, {'community_id': '4', 'articles': [{'id': '304', 'title': 'بوريطة: الرؤية الملكية تكرس البحر كرافعة أساسية للازدهار الوطني والربط القاري والدفاع عن السيادة', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a8%d9%88%d8%b1%d9%8a%d8%b7%d8%a9-%d8%a7%d9%84%d8%b1%d8%a4%d9%8a%d8%a9-%d8%a7%d9%84%d9%85%d9%84%d9%83%d9%8a%d8%a9-%d8%aa%d9%83%d8%b1%d8%b3-%d8%a7%d9%84%d8%a8%d8%ad%d8%b1-%d9%83%d8%b1%d8%a7%d9%81/', 'summary': 'بوريطة: الرؤية الملكية تكرس البحر كرافعة أساسية للازدهار الوطني والربط القاري والدفاع عن السيادة. أكد وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقیمین بالخارج، ناصر بوريطة، أمس الثلاثاء (26 غشت) بالرباط، أن الرؤية الملكية تكرس البحر كرافعة أساسية للازدهار الوطني والربط القاري والدفاع عن السيادة. وأبرز السيد بوريطة، في كلمة تليت نيابة عنه خلال افتتاح ندوة حول موضوع “الممارسات الدولية في ترسيم المجالات البحرية”، نظمت بشراكة مع معهد القانون الدولي،', 'size': 2}, {'id': '327', 'title': 'المغرب يدعو إلى اعتبار البحر فضاء للربط والتكامل وليس مجرد حدود سيادية', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1095445.html', 'summary': 'المغرب يدعو إلى اعتبار البحر فضاء للربط والتكامل وليس مجرد حدود سيادية. أكد وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقیمین بالخارج، ناصر بوريطة، أمس الثلاثاء بالرباط، أن الرؤية الملكية تكرس البحر كرافعة أساسية للازدهار الوطني والربط القاري والدفاع عن السيادة. وأبرز بوريطة، في كلمة تليت نيابة عنه خلال افتتاح ندوة حول موضوع “الممارسات الدولية في ترسيم المجالات البحرية”، نظمت بشراكة مع معهد القانون الدولي، وهي منظمة مرموقة ظهرت المقالة المغرب يدعو إلى اعتبار البحر فضاء للربط والتكامل وليس مجرد حدود سيادية  .', 'size': 2}], 'main_title': 'بوريطة: الرؤية الملكية تكرس البحر كرافعة أساسية للازدهار الوطني والربط القاري والدفاع عن السيادة'}, {'community_id': '6', 'articles': [{'id': '305', 'title': 'ما عندك فين تلف.. جامعة الكرة تطرح دليلا مفصلا لولوج ملعب مولاي عبد الله (فيديو)', 'source': 'kifache.com', 'link': 'https://kifache.com/%d9%85%d8%a7-%d8%b9%d9%86%d8%af%d9%83-%d9%81%d9%8a%d9%86-%d8%aa%d9%84%d9%81-%d8%ac%d8%a7%d9%85%d8%b9%d8%a9-%d8%a7%d9%84%d9%83%d8%b1%d8%a9-%d8%aa%d8%b7%d8%b1%d8%ad-%d8%af%d9%84%d9%8a%d9%84%d8%a7/', 'summary': 'ما عندك فين تلف.. جامعة الكرة تطرح دليلا مفصلا لولوج ملعب مولاي عبد الله (فيديو). أنجزت الجامعة الملكية المغربية لكرة القدم شريط فيديو توضيحي للولوج إلى المجمع الرياضي الأمير مولاي عبد الله بالرباط استعدادا لاستقبال المباراة المرتقبة بين المنتخب الوطني المغربي ونظيره النيجري، الأسبوع المقبل، لحساب التصفيات المؤهلة إلى نهائيات كأس العالم 2026. ويهدف الدليل الرقمي الذي نشرته الجامعة على مختلف منصاتها، إلى تسهيل ولوج الجماهير إلى المركب الذي يتم', 'size': 2}, {'id': '377', 'title': 'الجامعة الملكية لكرة القدم تُطلق دليلا تنظيميا لولوج ملعب الأمير مولاي عبد الله (فيديو)', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d8%ac%d8%a7%d9%85%d8%b9%d8%a9-%d8%a7%d9%84%d9%85%d9%84%d9%83%d9%8a%d8%a9-%d9%84%d9%83%d8%b1%d8%a9-%d8%a7%d9%84%d9%82%d8%af%d9%85-%d8%aa%d9%8f%d8%b7%d9%84%d9%82-%d8%af%d9%84%d9%8a%d9%84/', 'summary': 'الجامعة الملكية لكرة القدم تُطلق دليلا تنظيميا لولوج ملعب الأمير مولاي عبد الله (فيديو). أطلقت الجامعة الملكية المغربية لكرة القدم دليلا خاصا بتنظيم عملية ولوج الجماهير إلى مركب الأمير مولاي عبد الله بالعاصمة الرباط، وذلك قبل مباراة المنتخب الوطني المغربي الأول ضد نظيره النيجيري، حرصاً على ضمان سلاسة الدخول وتوفير ظروف مثالية لمتابعة اللقاءات. وأكدت الجامعة في فيديو توضيحي أن الولوج إلى الملعب سيكون مشروطا بتوفر كل …  الجامعة الملكية لكرة القدم تُطلق دليلا تنظيميا لولوج ملعب الأمير مولاي عبد الله (فيديو)     .', 'size': 2}], 'main_title': 'ما عندك فين تلف.. جامعة الكرة تطرح دليلا مفصلا لولوج ملعب مولاي عبد الله (فيديو)'}, {'community_id': '9', 'articles': [{'id': '329', 'title': 'موكب عرس يتحول لمأساة بأزيلال .. انحراف حافلة للنقل المزدوج يتسبب في إصابة 20 شخصا', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1095437.html', 'summary': 'موكب عرس يتحول لمأساة بأزيلال .. انحراف حافلة للنقل المزدوج يتسبب في إصابة 20 شخصا. اهتزت منطقة زاوية أحنصال، التابعة لإقليم أزيلال، على وقع حادث مأساوي ليلة الثلاثاء، حيث انحرفت حافلة للنقل المزدوج كانت ضمن موكب عرس، مما أسفر عن إصابة 20 شخصا بجروح متفاوتة الخطورة. ووفقا لشهود عيان، فقد السائق السيطرة على الحافلة، التي كانت ضمن موكب عرس بالمنطقة، مما أدى إلى انحرافها عن مسارها وانقلابها، حيث أصيب 20 ظهرت المقالة موكب عرس يتحول لمأساة بأزيلال .. انحراف حافلة للنقل المزدوج يتسبب في إصابة 20 شخصا  .', 'size': 3}, {'id': '348', 'title': 'أزيلال.. 20 مصاباً في انحراف حافلة بمنعرجات زاوية أحنصال', 'source': 'rue20.com', 'link': 'https://rue20.com/931643.html', 'summary': 'أزيلال.. 20 مصاباً في انحراف حافلة بمنعرجات زاوية أحنصال.  | متابعة شهدت جماعة زاوية أحنصال، التابعة لإقليم أزيلال، مساء الثلاثاء حادثة سير مؤلمة، إثر انحراف حافلة للنقل المزدوج عن مسارها بمنعرجات خطيرة بالمنطقة، مما أدى إلى إصابة 20 راكباً بجروح متفاوتة الخطورة. وأفاد شهود عيان أن السائق فقد السيطرة على الحافلة أثناء مرورها بمنعرجات زاوية أحنصال، الأمر الذي تسبب في انحرافها خارج الخبر أزيلال.. 20 مصاباً في انحراف حافلة بمنعرجات زاوية أحنصال  .', 'size': 3}, {'id': '376', 'title': 'أزيد من 20 مصابا جراء انقلاب حافلة للنقل المزدوج بأزيلال', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a3%d8%b2%d9%8a%d8%af-%d9%85%d9%86-20-%d9%85%d8%b5%d8%a7%d8%a8%d8%a7-%d8%ac%d8%b1%d8%a7%d8%a1-%d8%a7%d9%86%d9%82%d9%84%d8%a7%d8%a8-%d8%ad%d8%a7%d9%81%d9%84%d8%a9-%d9%84%d9%84%d9%86%d9%82%d9%84/', 'summary': 'أزيد من 20 مصابا جراء انقلاب حافلة للنقل المزدوج بأزيلال. شهدت جماعة زاوية أحنصال بإقليم أزيلال، ليلة أمس الثلاثاء، حادثة سير مروعة بعدما انحرفت حافلة للنقل المزدوج كانت تقل مدعوين لحفل زفاف، ما أسفر عن إصابة أزيد من 20 شخصاً بجروح متفاوتة الخطورة. ووفق معطيات محلية، فإن السائق فقد السيطرة على الحافلة التي انحرفت عن مسارها وخرجت عن الطريق، متسببة في حالة من …  أزيد من 20 مصابا جراء انقلاب حافلة للنقل المزدوج بأزيلال     .', 'size': 3}], 'main_title': 'موكب عرس يتحول لمأساة بأزيلال .. انحراف حافلة للنقل المزدوج يتسبب في إصابة 20 شخصا'}, {'community_id': '8', 'articles': [{'id': '340', 'title': 'حزب الاستقلال يدين مناورات الخصوم  ويعلن انخراطه في الإصلاح الانتخابي', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/__trashed-36/', 'summary': 'حزب الاستقلال يدين مناورات الخصوم ويعلن انخراطه في الإصلاح الانتخابي. أدانت اللجنة التنفيذية لحزب الاستقلال بشدة عودة خصوم المملكة وأعداء الوحدة الترابية إلى مناوراتهم المعهودة للتشويش على النجاحات التي ما فتئت تحققها بلادنا بقيادة الملك محمد السادس في مختلف الميادين، والثقة المتزايدة التي تحظى بها لدى المجتمع الدولي كشريك موثوق. وجاء في البلاغ الصادر عقب اجتماع اللجنة المنعقد أمس، أن هذه المناورات المفضوحة بدأت تنشط  حزب الاستقلال يدين مناورات الخصوم ويعلن انخراطه في الإصلاح الانتخابي     .', 'size': 2}, {'id': '352', 'title': 'حزب الإستقلال ينتهي من صياغة مذكرة إصلاح قوانين الإنتخابات', 'source': 'rue20.com', 'link': 'https://rue20.com/931574.html', 'summary': 'حزب الإستقلال ينتهي من صياغة مذكرة إصلاح قوانين الإنتخابات.  ا الرباط أكدت اللجنة التنفيذية لحزب الاستقلال انخراط الحزب الكامل في المسار الإصلاحي الذي أطلقه جلالة الملك محمد السادس في خطاب العرش، والمتعلق بإعداد المنظومة العامة المؤطرة للانتخابات التشريعية. وفي بلاغ صادر عنها، أوضحت اللجنة أنها تدارست وصادقت على مضامين المذكرة التي سيقدمها الحزب إلى وزارة الداخلية. وتتناول هذه المذكرة الإصلاحات السياسية والإطار الخبر حزب الإستقلال ينتهي من صياغة مذكرة إصلاح قوانين الإنتخابات  .', 'size': 2}], 'main_title': 'حزب الاستقلال يدين مناورات الخصوم  ويعلن انخراطه في الإصلاح الانتخابي'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    