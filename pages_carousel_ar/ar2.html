<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 07/08/2025 - 12h30</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '62', 'title': 'الرئيس الفرنسي إيمانويل ماكرون يعلق إعفاء حاملي جوازات السفر الرسمية والدبلوماسية الجزائرية من التاشيرة', 'source': 'www.alakhbar.press.ma', 'link': 'https://www.alakhbar.press.ma/%d8%a7%d9%84%d8%b1%d8%a6%d9%8a%d8%b3-%d8%a7%d9%84%d9%81%d8%b1%d9%86%d8%b3%d9%8a-%d8%a5%d9%8a%d9%85%d8%a7%d9%86%d9%88%d9%8a%d9%84-%d9%85%d8%a7%d9%83%d8%b1%d9%88%d9%86-%d9%8a%d8%b9%d9%84%d9%82-%d8%a5-270705.html', 'summary': 'الرئيس الفرنسي إيمانويل ماكرون يعلق إعفاء حاملي جوازات السفر الرسمية والدبلوماسية الجزائرية من التاشيرة. طلب الرئيس الفرنسي إيمانويل ماكرون اليوم الأربعاء من حكومته تشديد شروط منح التأشيرات للدبلوماسيين الجزائريين مع تصاعد الخلاف على ترحيل رعايا جزائريين. وفي رسالة إلى رئيس وزرائه فرانسوا بايرو اطلعت عليها رويترز، قال ماكرون إن تزايد الصعوبات التي تواجهها فرنسا في مجالي الهجرة والأمن مع الجزائر يتطلب موقفا أكثر صرامة تجاه المستعمرة الفرنسية السابقة. …  الرئيس الفرنسي إيمانويل ماكرون يعلق إعفاء حاملي جوازات السفر الرسمية والدبلوماسية الجزائرية من التاشيرة     .', 'size': 3}, {'id': '204', 'title': 'ماكرون يعلن تسليط عقوبات صارمة على النظام العسكري الجزائري ومنع كافة الدبلوماسيين الجزائريين من دخول فرنسا', 'source': 'rue20.com', 'link': 'https://rue20.com/926989.html', 'summary': 'ماكرون يعلن تسليط عقوبات صارمة على النظام العسكري الجزائري ومنع كافة الدبلوماسيين الجزائريين من دخول فرنسا. . الرباط – وكالات طلب الرئيس الفرنسي إيمانويل ماكرون اليوم الأربعاء من حكومته تشديد شروط منح التأشيرات للدبلوماسيين الجزائريين مع تصاعد الخلاف على ترحيل رعايا جزائريين. وفي رسالة إلى رئيس وزرائه فرانسوا بايرو اطلعت عليها رويترز، قال ماكرون إن تزايد الصعوبات التي تواجهها فرنسا في مجالي الهجرة والأمن مع الجزائر يتطلب موقفا أكثر صرامة الخبر ماكرون يعلن تسليط عقوبات صارمة على النظام العسكري الجزائري ومنع كافة الدبلوماسيين الجزائريين من دخول فرنسا  .', 'size': 3}, {'id': '268', 'title': 'رسمياً.. الرئيس الفرنسي يتخذ تدابير "صارمة" ضد الجزائر', 'source': 'www.alalam.ma', 'link': 'https://www.alalam.ma/رسمياً-الرئيس-الفرنسي-يتخذ-تدابير-صارمة-ضد-الجزائر_a29061.html', 'summary': 'رسمياً.. الرئيس الفرنسي يتخذ تدابير "صارمة" ضد الجزائر. فرنسا تعلق اتفاقية إعفاءات التأشيرة على جوازات السفر الدبلوماسية الجزائرية وجه الرئيس الفرنسي إيمانويل ماكرون رسالة إلى رئيس وزرائه فرانسوا بايرو حوت تدابير "صارمة" ضد الجزائر وتضمنت تعليق الإعفاءات من التأشيرة على جوازات السفر الرسمية والدبلوماسية.', 'size': 3}], 'main_title': 'الرئيس الفرنسي إيمانويل ماكرون يعلق إعفاء حاملي جوازات السفر الرسمية والدبلوماسية الجزائرية من التاشيرة'}, {'community_id': '1', 'articles': [{'id': '91', 'title': 'نشرة إنذارية.. موجة حر وأمطار رعدية قوية مصحوبة بالبرد مرتقبة من الأربعاء إلى الأحد بعدد من مناطق المملكة', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/410598.html', 'summary': 'نشرة إنذارية.. موجة حر وأمطار رعدية قوية مصحوبة بالبرد مرتقبة من الأربعاء إلى الأحد بعدد من مناطق المملكة. أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب تسجيل موجة حر من اليوم الأربعاء إلى يوم الأحد المقبل، وزخات رعدية قوية مع تساقط محلي للبر د', 'size': 4}, {'id': '158', 'title': 'نشرة إنذارية.. موجة حر زخات رعدية ورياح مرتقبة من الأربعاء إلى الأحد بهذه المناطق المغربية', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-583845.html', 'summary': 'نشرة إنذارية.. موجة حر زخات رعدية ورياح مرتقبة من الأربعاء إلى الأحد بهذه المناطق المغربية. أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب تسجيل موجة حر من اليوم الأربعاء إلى يوم الأحد المقبل، وزخات رعدية قوية مع تساقط محلي للبر د وهبات رياح اليوم الأربعاء، بعدد من مناطق المملكة. وأوضحت المديرية، في نشرة إنذارية من مستوى يقظة برتقالي، أنه من المرتقب تسجيل درجات حرارة تتراوح ما بين 44 و47', 'size': 4}, {'id': '239', 'title': 'نشرة إنذارية.. موجة حر وزخات رعدية قوية مصحوبة بالبرَد وبهبات رياح مرتقبة هذه الأيام', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d9%86%d8%b4%d8%b1%d8%a9-%d8%a5%d9%86%d8%b0%d8%a7%d8%b1%d9%8a%d8%a9-%d9%85%d9%88%d8%ac%d8%a9-%d8%ad%d8%b1-%d9%88%d8%b2%d8%ae%d8%a7%d8%aa-%d8%b1%d8%b9%d8%af%d9%8a%d8%a9-%d9%82%d9%88%d9%8a%d8%a9/', 'summary': 'نشرة إنذارية.. موجة حر وزخات رعدية قوية مصحوبة بالبرَد وبهبات رياح مرتقبة هذه الأيام. أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب تسجيل موجة حر من اليوم الأربعاء إلى يوم الأحد المقبل، وزخات رعدية قوية مع تساقط محلي للبرَد وهبات رياح  نشرة إنذارية.. موجة حر وزخات رعدية قوية مصحوبة بالبرَد وبهبات رياح مرتقبة هذه الأيام     .', 'size': 4}, {'id': '256', 'title': 'استمرار موجات الحرارة والزخات الرعدية إلى الأحد المقبل', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%a7%d8%b3%d8%aa%d9%85%d8%b1%d8%a7%d8%b1-%d9%85%d9%88%d8%ac%d8%a7%d8%aa-%d8%a7%d9%84%d8%ad%d8%b1%d8%a7%d8%b1%d8%a9-%d9%88%d8%a7%d9%84%d8%b2%d8%ae%d8%a7%d8%aa-%d8%a7%d9%84%d8%b1%d8%b9%d8%af%d9%8a/', 'summary': 'استمرار موجات الحرارة والزخات الرعدية إلى الأحد المقبل. المساء اليوم: أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب تسجيل موجة حر من اليوم الأربعاء إلى يوم الأحد المقبل، وزخات رعدية قوية مع تساقط محلي للبرَد وهبات رياح اليوم الأربعاء، بعدد من مناطق المملكة. وأوضحت', 'size': 4}], 'main_title': 'نشرة إنذارية.. موجة حر وأمطار رعدية قوية مصحوبة بالبرد مرتقبة من الأربعاء إلى الأحد بعدد من مناطق المملكة'}, {'community_id': '9', 'articles': [{'id': '113', 'title': 'الحكم الصادر في حق رجل انتحل صفة امرأة في طنجة', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/society/410621.html', 'summary': 'الحكم الصادر في حق رجل انتحل صفة امرأة في طنجة. أسدلت المحكمة الابتدائية بطنجة الستار على قضية رجل أقدم على انتحال صفة امرأة بطريقة متقنة ومحكمة، في محاولة للحصول على وثائق ثبوتية بشكل احتيالي، حيث', 'size': 2}, {'id': '183', 'title': 'مواقف السيارات تشعل الغضب بطنجة.. اشتراكات إجبارية واتهامات بـ”الاحتيال المقنن” (فيديو)', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1090888.html', 'summary': 'مواقف السيارات تشعل الغضب بطنجة.. اشتراكات إجبارية واتهامات بـ”الاحتيال المقنن” (فيديو). تشهد مدينة طنجة منذ بداية الشهر الماضي جدلا واسعا بسبب تطبيق إجراءات جديدة ظهرت المقالة مواقف السيارات تشعل الغضب بطنجة.. اشتراكات إجبارية واتهامات بـ”الاحتيال المقنن” (فيديو)  .', 'size': 2}], 'main_title': 'الحكم الصادر في حق رجل انتحل صفة امرأة في طنجة'}, {'community_id': '6', 'articles': [{'id': '119', 'title': 'تعيينات جديدة في صفوف الأمن الوطني، عنوانها دعم الكفاءة المهنية وتعزيز الثقة في الشباب والعنصر النسوي', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/410628.html', 'summary': 'تعيينات جديدة في صفوف الأمن الوطني، عنوانها دعم الكفاءة المهنية وتعزيز الثقة في الشباب والعنصر النسوي. أشر المدير العام للأمن الوطني عبد اللطيف حموشي، زوال اليوم الأربعاء 6 غشت الجاري، على قائمة جديدة تتضمن تعيين 24 مسؤولا جديدا في مناصب المسؤولية', 'size': 4}, {'id': '133', 'title': 'دعم الكفاءة وتعزيز حضور الشباب والنساء.. تعيينات جديدة بالأمن الوطني', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%af%d8%b9%d9%85-%d8%a7%d9%84%d9%83%d9%81%d8%a7%d8%a1%d8%a9-%d9%88%d8%aa%d8%b9%d8%b2%d9%8a%d8%b2-%d8%ad%d8%b6%d9%88%d8%b1-%d8%a7%d9%84%d8%b4%d8%a8%d8%a7%d8%a8-%d9%88%d8%a7%d9%84%d9%86%d8%b3%d8%a7/', 'summary': 'دعم الكفاءة وتعزيز حضور الشباب والنساء.. تعيينات جديدة بالأمن الوطني. أشر المدير العام للأمن الوطني عبد اللطيف حموشي، زوال اليوم الأربعاء (6 غشت)، على قائمة جديدة تتضمن تعيين 24 مسؤولا جديدا في مناصب المسؤولية للتدبير الإداري والعملياتي للمصالح المركزية والجهوية للأمن الوطني. وشملت التعيينات الجديدة ترقية أطر أمنية متمرسة إلى المستوى الأول للقيادة الشرطية اللاممركزة، من بينهم تعيين نائب لوالي أمن بني ملال ونائب لرئيس', 'size': 5}, {'id': '153', 'title': 'تعيينات أمنية جديدة تدعم الكفاءات وتمنح الثقة للشباب والنساء', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/320392/', 'summary': 'تعيينات أمنية جديدة تدعم الكفاءات وتمنح الثقة للشباب والنساء. أشر المدير العام للأمن الوطني عبد اللطيف حموشي، زوال اليوم الأربعاء 6 غشت الجاري، على قائمة جديدة تتضمن تعيين 24 مسؤولا جديدا في مناصب المسؤولية للتدبير الإداري والعملياتي للمصالح المركزية والجهوية للأمن الوطني. وقد شملت التعيينات الجديدة ترقية أطر أمنية متمرسة إلى المستوى الأول للقيادة الشرطية اللاممركزة، من بينهم تعيين نائب لوالي أمن بني ملال', 'size': 5}, {'id': '196', 'title': 'تعيينات جديدة شملت 24 مسؤولا بالأمن الوطني', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%aa%d8%b9%d9%8a%d9%8a%d9%86%d8%a7%d8%aa-%d8%ac%d8%af%d9%8a%d8%af%d8%a9-%d8%b4%d9%85%d9%84%d8%aa-24-%d9%85%d8%b3%d8%a4%d9%88%d9%84%d8%a7-%d8%a8%d8%a7%d9%84%d8%a3%d9%85%d9%86-%d8%a7%d9%84%d9%88%d8%b7/', 'summary': 'تعيينات جديدة شملت 24 مسؤولا بالأمن الوطني. أشر المدير العام للأمن الوطني عبد اللطيف حموشي، الأربعاء، على قائمة جديدة تتضمن تعيين 24 مسؤولا جديدا في مناصب المسؤولية للتدبير الإداري والعملياتي للمصالح المركزية والجهوية للأمن الوطني. وقد شملت التعيينات الجديدة، بحسب مصدر أمني، ترقية أطر أمنية متمرسة إلى المستوى الأول للقيادة الشرطية اللاممركزة، من بينهم تعيين نائب لوالي أمن بني ملال ونائب لرئيس  تعيينات جديدة شملت 24 مسؤولا بالأمن الوطني     .', 'size': 4}, {'id': '202', 'title': 'حموشي يسند مناصب أمنية مركزية وجهوية إلى كفاءات شابة ونسائية', 'source': 'rue20.com', 'link': 'https://rue20.com/926999.html', 'summary': 'حموشي يسند مناصب أمنية مركزية وجهوية إلى كفاءات شابة ونسائية.  . الرباط أشر المدير العام للأمن الوطني عبد اللطيف حموشي، زوال اليوم الأربعاء 6 غشت الجاري، على قائمة جديدة تتضمن تعيين 24 مسؤولا جديدا في مناصب المسؤولية للتدبير الإداري والعملياتي للمصالح المركزية والجهوية للأمن الوطني. وقد شملت التعيينات الجديدة ترقية أطر أمنية متمرسة إلى المستوى الأول للقيادة الشرطية اللاممركزة، من بينهم تعيين نائب الخبر حموشي يسند مناصب أمنية مركزية وجهوية إلى كفاءات شابة ونسائية  .', 'size': 5}], 'main_title': 'دعم الكفاءة وتعزيز حضور الشباب والنساء.. تعيينات جديدة بالأمن الوطني'}, {'community_id': '2', 'articles': [{'id': '149', 'title': 'لجنة اليقظة ترصد تراجعا في ضحايا حوادث السير خارج المدن', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/320389/', 'summary': 'لجنة اليقظة ترصد تراجعا في ضحايا حوادث السير خارج المدن. انعقد أمس الثلاثاء بالرباط، اجتماع للجنة اليقظة المنبثقة عن اللجنة الدائمة للسلامة الطرقية، خصص لدراسة مجموعة من النقط، لا سيما الحصيلة الإحصائية المؤقتة لحوادث السير وضحاياها برسم شهر يوليوز 2025، وأنشطة المراقبة الطرقية الخاصة بالفترة الصيفية، والمواكبة التواصلية والإعلامية لبرنامج العمل الاستعجالي الخاص بالفترة الصيفية. وذكر بلاغ للوكالة الوطنية للسلامة الطرقية أن هذا الاجتماع يأتي', 'size': 2}, {'id': '251', 'title': 'ارتفاع كبير في ضحايا حوادث السير.. وبدء محاسبة السيارات الدبلوماسية', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%a7%d8%b1%d8%aa%d9%81%d8%a7%d8%b9-%d9%83%d8%a8%d9%8a%d8%b1-%d9%81%d9%8a-%d8%b6%d8%ad%d8%a7%d9%8a%d8%a7-%d8%ad%d9%88%d8%a7%d8%af%d8%ab-%d8%a7%d9%84%d8%b3%d9%8a%d8%b1-%d9%88%d8%a8%d8%af%d8%a1/', 'summary': 'ارتفاع كبير في ضحايا حوادث السير.. وبدء محاسبة السيارات الدبلوماسية. المساء اليوم – الرباط: انعقد بالرباط، اجتماع للجنة اليقظة المنبثقة عن اللجنة الدائمة للسلامة الطرقية، خصص لدراسة مجموعة من النقط، لا سيما الحصيلة الإحصائية المؤقتة لحوادث السير وضحاياها برسم شهر يوليوز 2025، وأنشطة المراقبة الطرقية', 'size': 2}], 'main_title': 'لجنة اليقظة ترصد تراجعا في ضحايا حوادث السير خارج المدن'}, {'community_id': '8', 'articles': [{'id': '163', 'title': 'وزان يختار أياكس بعد تعثر “الصفقة الملكية”', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-583818.html', 'summary': 'وزان يختار أياكس بعد تعثر “الصفقة الملكية”. وقع اللاعب الدولي المغربي عبد الله وزان عقدا احترافيا مع نادي أياكس أمستردام الهولندي، يمتد إلى غاية عام 2028، وذلك خلال فترة الانتقالات الصيفية الجارية، بحسب ما أعلنه النادي الهولندي، أمس الثلاثاء. وأوضح بيان رسمي لأياكس أن وزان، الذي يشغل مركز وسط ميدان هجومي، تدرج في صفوف أكاديمية النادي منذ عام 2016 بعد', 'size': 2}, {'id': '410', 'title': 'نادي أياكس الهولندي يضم المغربي عبد الله وزان إلى غاية 2028', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d9%86%d8%a7%d8%af%d9%8a-%d8%a3%d9%8a%d8%a7%d9%83%d8%b3-%d8%a7%d9%84%d9%87%d9%88%d9%84%d9%86%d8%af%d9%8a-%d9%8a%d8%b6%d9%85-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8%d9%8a-%d8%b9%d8%a8%d8%af-%d8%a7%d9%84/', 'summary': 'نادي أياكس الهولندي يضم المغربي عبد الله وزان إلى غاية 2028. أعلن نادي أياكس أمستردام الهولندي لكرة القدم عن تجديد عقد لاعب الوسط المغربي الشاب عبد الله وزان إلى غاية سنة 2028. وأفاد النادي، في بيان له، أن وزان وقع على عقد يمتد حتى 30 يونيو 2028، منوها بالقدرات العالية التي يتمتع بها في صناعة التمريرات الحاسمة، فضلا عن إمكانياته المتميزة في المراوغة برؤية …  نادي أياكس الهولندي يضم المغربي عبد الله وزان إلى غاية 2028     .', 'size': 2}], 'main_title': 'وزان يختار أياكس بعد تعثر “الصفقة الملكية”'}, {'community_id': '7', 'articles': [{'id': '200', 'title': 'الأسود المحليين عازمون على هزم البلد المضيف كينيا ومواصلة الزحف لنيل اللقب القاري', 'source': 'rue20.com', 'link': 'https://rue20.com/927008.html', 'summary': 'الأسود المحليين عازمون على هزم البلد المضيف كينيا ومواصلة الزحف لنيل اللقب القاري. . الرباط أكد لاعب المنتخب الوطني المغربي للمحليين لكرة القدم، أنس المهراوي، اليوم الأربعاء بنيروبي، أن العناصر الوطنية عازمة على تحقيق نتيجة إيجابية خلال المباراة المقبلة ضد كينيا، المقررة الأحد المقبل، لحساب الجولة الثانية من منافسات المجموعة الأولى لكأس أمم إفريقيا للاعبين المحليين 2024. وفي تصريح لوكالة المغرب العربي للأنباء على هامش حصة الخبر الأسود المحليين عازمون على هزم البلد المضيف كينيا ومواصلة الزحف لنيل اللقب القاري  .', 'size': 2}, {'id': '407', 'title': 'أنس المهراوي: اللاعبون عازمون على تحقيق نتيجة إيجابية أمام كينيا', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/225710/', 'summary': 'أنس المهراوي: اللاعبون عازمون على تحقيق نتيجة إيجابية أمام كينيا. نيروبي – أكد لاعب المنتخب الوطني المغربي للمحليين لكرة القدم، أنس المهراوي، اليوم الأربعاء بنيروبي، أن العناصر الوطنية عازمة على تحقيق نتيجة إيجابية خلال المباراة المقبلة ضد كينيا، المقررة الأحد المقبل، لحساب الجولة الثانية من منافسات المجموعة الأولى لكأس أمم إفريقيا للاعبين المحليين 2024. وفي تصريح لوكالة المغرب العربي للأنباء على هامش حصة تدريبية للمنتخب', 'size': 2}], 'main_title': 'الأسود المحليين عازمون على هزم البلد المضيف كينيا ومواصلة الزحف لنيل اللقب القاري'}, {'community_id': '3', 'articles': [{'id': '208', 'title': 'لجنة الدعم تصرف أزيد من 25 مليون درهم لـ40 مهرجاناً سينمائياً', 'source': 'rue20.com', 'link': 'https://rue20.com/926952.html', 'summary': 'لجنة الدعم تصرف أزيد من 25 مليون درهم لـ40 مهرجاناً سينمائياً.  | الرباط قررت لجنة دعم تنظيم المهرجانات السينمائية منح مبلغ إجمالي قدره 25 مليون و 840 ألف درهم ل40 مهرجانا وتظاهرة سينمائية وطنية، برسم دورة يوليوز 2025. وأفاد بلاغ للمركز السينمائي المغربي أن اللجنة التي اجتمعت من 22 إلى 25 يوليوز المنصرم بالرباط، درست 49 ملف طلب مرشح للدعم، واستقبلت منظمي المهرجانات والتظاهرات الخبر لجنة الدعم تصرف أزيد من 25 مليون درهم لـ40 مهرجاناً سينمائياً  .', 'size': 2}, {'id': '252', 'title': 'دورة يوليوز: ثلاثة ملايير سنتيم لدعم المهرجانات السينمائية', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%af%d9%88%d8%b1%d8%a9-%d9%8a%d9%88%d9%84%d9%8a%d9%88%d8%b2-%d8%ab%d9%84%d8%a7%d8%ab%d8%a9-%d9%85%d9%84%d8%a7%d9%8a%d9%8a%d8%b1-%d8%b3%d9%86%d8%aa%d9%8a%d9%85-%d9%84%d8%af%d8%b9%d9%85-%d8%a7%d9%84/', 'summary': 'دورة يوليوز: ثلاثة ملايير سنتيم لدعم المهرجانات السينمائية. المساء اليوم – الرباط: قررت لجنة دعم تنظيم المهرجانات السينمائية منح مبلغ إجمالي قدره 25 مليون و 840 ألف درهم ل40 مهرجانا وتظاهرة سينمائية وطنية، برسم دورة يوليوز 2025. وأفاد بلاغ للمركز السينمائي المغربي أن', 'size': 2}], 'main_title': 'لجنة الدعم تصرف أزيد من 25 مليون درهم لـ40 مهرجاناً سينمائياً'}, {'community_id': '4', 'articles': [{'id': '253', 'title': 'في غزة يحفر الفلسطينيون المقابر بأصابعهم.. ولا شيء بقي غير الركام', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d9%81%d9%8a-%d8%ba%d8%b2%d8%a9-%d9%8a%d8%ad%d9%81%d8%b1-%d8%a7%d9%84%d9%81%d9%84%d8%b3%d8%b7%d9%8a%d9%86%d9%8a%d9%88%d9%86-%d8%a7%d9%84%d9%85%d9%82%d8%a7%d8%a8%d8%b1-%d8%a8%d8%a3%d8%b5%d8%a7%d8%a8/', 'summary': 'في غزة يحفر الفلسطينيون المقابر بأصابعهم.. ولا شيء بقي غير الركام. المساء اليوم – وكالات: أظهرت صور جوية حديثة دمارا واسعا عمّ مناطق متفرقة من قطاع غزة، بعد أشهر من القصف المكثف. وتُظهر المشاهد التي التُقطت من طائرات تحلق على ارتفاعات متوسطة حجم الأضرار التي لحقت بالبنية', 'size': 2}, {'id': '285', 'title': 'للنقاش | أطفال غزة.. \xa0كارثة إنسانية أمام العالم', 'source': 'www.alousboue.ma', 'link': 'https://www.alousboue.ma/123074/', 'summary': 'للنقاش | أطفال غزة.. كارثة إنسانية أمام العالم. ضحايا الجوع في قطاع غزة فاجعة مهولة ومؤلمة جدا.. وفاة أطفال ومعاناة عشرات الآلاف من سوء التغذية الحاد، في كارثة إنسانية لم يسبق لها مثيل في تاريخ البشرية. نداءات تناشد الدول العربية الإسلامية من أجل وقف العدوان، وقالت إحدى الأمهات في غزة أن ابنها عاش على الماء لمدة خمسة أيام وتوفي نتيجة الجوع الحاد، وأمهات …  للنقاش | أطفال غزة.. كارثة إنسانية أمام العالم     .', 'size': 2}], 'main_title': 'في غزة يحفر الفلسطينيون المقابر بأصابعهم.. ولا شيء بقي غير الركام'}, {'community_id': '5', 'articles': [{'id': '343', 'title': 'تركمنستان.. هلال يبرز دور المبادرة الملكية الأطلسية في تنمية دول الساحل', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%aa%d8%b1%d9%83%d9%85%d9%86%d8%b3%d8%aa%d8%a7%d9%86-%d9%87%d9%84%d8%a7%d9%84-%d9%8a%d8%a8%d8%b1%d8%b2-%d8%af%d9%88%d8%b1-%d8%a7%d9%84%d9%85%d8%a8%d8%a7%d8%af%d8%b1%d8%a9-%d8%a7%d9%84%d9%85%d9%84/', 'summary': 'تركمنستان.. هلال يبرز دور المبادرة الملكية الأطلسية في تنمية دول الساحل. أكد السفير الممثل الدائم للمملكة لدى الأمم المتحدة، ورئيس الدورة الـ22 للجنة رفيعة المستوى التابعة للجمعية العامة الأممية بشأن التعاون جنوب-جنوب، عمر هلال، أمس الأربعاء (6 غشت) بأوازا بتركمنستان، أن المملكة المغربية تواصل تقديم الدعم الملموس للبلدان الإفريقية غير الساحلية، تحت القيادة السامية لصاحب الجلالة الملك محمد السادس نصره الله. وأبرز هلال، خلال الاجتماع الوزاري', 'size': 2}, {'id': '406', 'title': 'عمر هلال يبرز دور المبادرة الملكية الأطلسية في تنمية دول الساحل', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/225713/', 'summary': 'عمر هلال يبرز دور المبادرة الملكية الأطلسية في تنمية دول الساحل. أكد السفير الممثل الدائم للمملكة لدى الأمم المتحدة، ورئيس الدورة الـ22 للجنة رفيعة المستوى التابعة للجمعية العامة الأممية بشأن التعاون جنوب-جنوب، عمر هلال، الأربعاء بأوازا بتركمنستان، أن المملكة المغربية تواصل تقديم الدعم الملموس للبلدان الإفريقية غير الساحلية، تحت القيادة السامية لصاحب الجلالة الملك محمد السادس نصره الله. وأبرز السيد هلال، خلال الاجتماع الوزاري حول التعاون', 'size': 2}], 'main_title': 'تركمنستان.. هلال يبرز دور المبادرة الملكية الأطلسية في تنمية دول الساحل'}, {'community_id': '10', 'articles': [{'id': '377', 'title': 'طقس حار مع هبات رعدية متوقع اليوم الخميس', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%b7%d9%82%d8%b3-%d8%ad%d8%a7%d8%b1-%d9%85%d8%b9-%d9%87%d8%a8%d8%a7%d8%aa-%d8%b1%d8%b9%d8%af%d9%8a%d8%a9-%d9%85%d8%aa%d9%88%d9%82%d8%b9-%d8%a7%d9%84%d9%8a%d9%88%d9%85-%d8%a7%d9%84%d8%ae%d9%85%d9%8a/', 'summary': 'طقس حار مع هبات رعدية متوقع اليوم الخميس. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الخميس، أن يظل الطقس حارا داخل كل من الأقاليم الجنوبية ومنطقة سوس، والجنوب الشرقي للبلاد، وشمال المنطقة الشرقية، والسايس، وجنوب الريف وكذا السهول الممتدة غرب الأطلس الكبير. كما يرتقب ظهور سحب غير مستقرة ورعدية مصحوبة بهبات رياح أحيانا قوية شيئا ما محليا، وذلك فوق كل من مرتفعات الأطلسين  طقس حار مع هبات رعدية متوقع اليوم الخميس     .', 'size': 2}, {'id': '414', 'title': 'توقعات “الأرصاد” لطقس اليوم الخميس', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%aa%d9%88%d9%82%d8%b9%d8%a7%d8%aa-%d8%a7%d9%84%d8%a3%d8%b1%d8%b5%d8%a7%d8%af-%d9%84%d8%b7%d9%82%d8%b3-%d8%a7%d9%84%d9%8a%d9%88%d9%85-%d8%a7%d9%84%d8%ae%d9%85%d9%8a%d8%b3/', 'summary': 'توقعات “الأرصاد” لطقس اليوم الخميس. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الخميس، أن يظل الطقس حارا داخل كل من الأقاليم الجنوبية ومنطقة سوس، والجنوب الشرقي للبلاد، وشمال المنطقة الشرقية، والسايس، وجنوب الريف وكذا السهول الممتدة غرب الأطلس الكبير.كما يرتقب ظهور سحب غير مستقرة ورعدية مصحوبة بهبات رياح أحيانا قوية شيئا ما محليا، وذلك فوق كل من مرتفعات …  توقعات “الأرصاد” لطقس اليوم الخميس     .', 'size': 2}], 'main_title': 'طقس حار مع هبات رعدية متوقع اليوم الخميس'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    