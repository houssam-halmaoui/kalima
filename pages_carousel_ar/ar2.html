<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 06/08/2025 - 18h34</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '127', 'title': 'بتنسيق مع “الديستي”.. أمن القنيطرة يحجز شحنة مهمة من الأقراص المهلوسة', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a8%d8%aa%d9%86%d8%b3%d9%8a%d9%82-%d9%85%d8%b9-%d8%a7%d9%84%d8%af%d9%8a%d8%b3%d8%aa%d9%8a-%d8%a3%d9%85%d9%86-%d8%a7%d9%84%d9%82%d9%86%d9%8a%d8%b7%d8%b1%d8%a9-%d9%8a%d8%ad%d8%ac%d8%b2-%d8%b4/', 'summary': 'بتنسيق مع “الديستي”.. أمن القنيطرة يحجز شحنة مهمة من الأقراص المهلوسة. تمكنت عناصر الشرطة بولاية أمن القنيطرة بناءً على معلومات دقيقة وفرتها مصالح المديرية العامة لمراقبة التراب الوطني، في الساعات الأولى من صباح اليوم الأربعاء (6 غشت)، من توقيف شخص يشتبه في تورطه في قضية تتعلق بحيازة وترويج المخدرات والمؤثرات العقلية. وحسب مصدر أمني، فقد “جرى توقيف المشتبه فيه بمدخل مدينة القنيطرة، مباشرة بعد وصوله على', 'size': 4}, {'id': '173', 'title': 'بناء على معلومات وفرتها "الديستي".. أمن القنيطرة يحجز 1280 قرصا مخدرا', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a8%d9%86%d8%a7%d8%a1-%d8%b9%d9%84%d9%89-%d9%85%d8%b9%d9%84%d9%88%d9%85%d8%a7%d8%aa-%d9%88%d9%81%d8%b1%d8%aa%d9%87%d8%a7-%d8%a7%d9%84%d8%af%d9%8a%d8%b3%d8%aa%d9%8a-%d8%a3%d9%85%d9%86-%d8%a7/', 'summary': 'بناء على معلومات وفرتها "الديستي".. أمن القنيطرة يحجز 1280 قرصا مخدرا. تمكنت عناصر الشرطة بولاية أمن القنيطرة، بناءً على معلومات دقيقة وفرتها مصالح المديرية العامة لمراقبة التراب الوطني، في الساعات الأولى من صباح اليوم الأربعاء 6 غشت الجاري، من توقيف شخص يشتبه في تورطه في قضية تتعلق بحيازة وترويج المخدرات والمؤثرات العقلية. وأوضح مصدر أمني أنه جرى توقيف المشتبه فيه بمدخل مدينة القنيطرة، مباشرة بعد وصوله  بناء على معلومات وفرتها "الديستي".. أمن القنيطرة يحجز 1280 قرصا مخدرا     .', 'size': 3}, {'id': '226', 'title': 'معلومات الديستي تطيح بشخص قادم من الشمال بحوزته 1280 قرص مهلوس', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/225674/', 'summary': 'معلومات الديستي تطيح بشخص قادم من الشمال بحوزته 1280 قرص مهلوس. تمكنت عناصر الشرطة بولاية أمن القنيطرة، بناء على معلومات دقيقة وفرتها مصالح المديرية العامة لمراقبة التراب الوطني، في الساعات الأولى من صباح اليوم الأربعاء، من توقيف شخص يشتبه في تورطه في قضية تتعلق بحيازة وترويج المخدرات والمؤثرات العقلية. وقد جرى توقيف المشتبه فيه بمدخل مدينة القنيطرة، مباشرة بعد وصوله على متن شاحنة قادما من احدى', 'size': 2}, {'id': '436', 'title': 'القنيطرة.. توقيف مروج مخدرات ومؤثرات عقلية في عملية أمنية مشتركة بين الشرطة و”الديستي”', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d9%82%d9%86%d9%8a%d8%b7%d8%b1%d8%a9-%d8%aa%d9%88%d9%82%d9%8a%d9%81-%d9%85%d8%b1%d9%88%d8%ac-%d9%85%d8%ae%d8%af%d8%b1%d8%a7%d8%aa-%d9%88%d9%85%d8%a4%d8%ab%d8%b1%d8%a7%d8%aa-%d8%b9%d9%82/', 'summary': 'القنيطرة.. توقيف مروج مخدرات ومؤثرات عقلية في عملية أمنية مشتركة بين الشرطة و”الديستي”. أفاد مصدر أمني أن عناصر الشرطة بولاية أمن القنيطرةـ تمكنت بناءً على معلومات دقيقة وفرتها مصالح المديرية العامة لمراقبة التراب الوطني، في الساعات الأولى من صباح اليوم الأربعاء 6 غشت الجاري، من توقيف شخص يشتبه تورطه في قضية تتعلق بحيازة وترويج المخدرات والمؤثرات العقلية. وحسب ذات المصدر فقد جرى توقيف المشتبه فيه بمدخل …  القنيطرة.. توقيف مروج مخدرات ومؤثرات عقلية في عملية أمنية مشتركة بين الشرطة و”الديستي”     .', 'size': 3}], 'main_title': 'بتنسيق مع “الديستي”.. أمن القنيطرة يحجز شحنة مهمة من الأقراص المهلوسة'}, {'community_id': '1', 'articles': [{'id': '129', 'title': 'الرباط.. توقيف مواطنين من إحدى دول إفريقيا جنوب الصحراء على خلفية التزوير', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a7%d9%84%d8%b1%d8%a8%d8%a7%d8%b7-%d8%aa%d9%88%d9%82%d9%8a%d9%81-%d9%85%d9%88%d8%a7%d8%b7%d9%86%d9%8a%d9%86-%d9%85%d9%86-%d8%a5%d8%ad%d8%af%d9%89-%d8%af%d9%88%d9%84-%d8%a5%d9%81%d8%b1%d9%8a%d9%82/', 'summary': 'الرباط.. توقيف مواطنين من إحدى دول إفريقيا جنوب الصحراء على خلفية التزوير. تمكنت عناصر الشرطة بمنطقة أمن السويسي التقدم بمدينة الرباط، في الساعات الأولى من صباح اليوم الأربعاء ( 6 غشت)، من توقيف مواطنين ينحدران من إحدى دول إفريقيا جنوب الصحراء، يبلغان من العمر 42 و46 سنة، وذلك للاشتباه في تورطهما في قضية تتعلق بالتزوير واستعماله. وحسب مصدر أمني، فقد جرى توقيف المعنيين بالأمر للاشتباه في تورطهما', 'size': 3}, {'id': '175', 'title': 'بشبهة التزوير واستعماله.. أمن السويسي يوقف مواطنين يتحدران من إفريقيا جنوب الصحراء', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a8%d8%b4%d8%a8%d9%87%d8%a9-%d8%a7%d9%84%d8%aa%d8%b2%d9%88%d9%8a%d8%b1-%d9%88%d8%a7%d8%b3%d8%aa%d8%b9%d9%85%d8%a7%d9%84%d9%87-%d8%a3%d9%85%d9%86-%d8%a7%d9%84%d8%b3%d9%88%d9%8a%d8%b3%d9%8a-%d9%8a/', 'summary': 'بشبهة التزوير واستعماله.. أمن السويسي يوقف مواطنين يتحدران من إفريقيا جنوب الصحراء. تمكنت عناصر الشرطة بمنطقة أمن السويسي التقدم بمدينة الرباط، في الساعات الأولى من صباح اليوم الأربعاء 6 غشت الجاري، من توقيف مواطنين يتحدران من إحدى دول إفريقيا جنوب الصحراء، يبلغان من العمر 42 و46 سنة، للاشتباه في تورطهما في قضية تتعلق بالتزوير واستعماله. وأوضح مصدر أمني أنه جرى توقيف المعنيين بالأمر للاشتباه في تورطهما في  بشبهة التزوير واستعماله.. أمن السويسي يوقف مواطنين يتحدران من إفريقيا جنوب الصحراء     .', 'size': 3}, {'id': '322', 'title': 'الرباط : توقيف مواطنين ينحدران من إحدى دول إفريقيا جنوب الصحراء للاشتباه في تورطهما في قضية تتعلق بالتزوير واستعماله', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/204714', 'summary': 'الرباط : توقيف مواطنين ينحدران من إحدى دول إفريقيا جنوب الصحراء للاشتباه في تورطهما في قضية تتعلق بالتزوير واستعماله. الأحداث من الرباط تمكنت عناصر الشرطة التابعة لمنطقة أمن السويسي التقدم بمدينة الرباط، في الساعات الأولى من صباح يومه الأربعاء 6 غشت الجاري، من توقيف مواطنين ينحدران من إحدى دول إفريقيا جنوب الصحراء، يبلغان من العمر 42 و46 سنة، وذلك للاشتباه بتورطهما في قضية تتعلق بالتزوير واستعماله. وأوضح مصدر أمني أنه جرى توقيف المعنيين بالأمر', 'size': 3}], 'main_title': 'الرباط.. توقيف مواطنين من إحدى دول إفريقيا جنوب الصحراء على خلفية التزوير'}, {'community_id': '2', 'articles': [{'id': '179', 'title': 'طقس حار مع زخات رعدية متوقعة اليوم الأربعاء', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%b7%d9%82%d8%b3-%d8%ad%d8%a7%d8%b1-%d9%85%d8%b9-%d8%b2%d8%ae%d8%a7%d8%aa-%d8%b1%d8%b9%d8%af%d9%8a%d8%a9-%d9%85%d8%aa%d9%88%d9%82%d8%b9%d8%a9-%d8%a7%d9%84%d9%8a%d9%88%d9%85-%d8%a7%d9%84%d8%a3-4/', 'summary': 'طقس حار مع زخات رعدية متوقعة اليوم الأربعاء. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الأربعاء، أن يظل الطقس حارا بكل من السهول الداخلية وجنوب الريف والجنوب الشرقي وداخل الأقاليم الجنوبية. ويرتقب نزول قطرات مطرية أو زخات رعدية مصحوبة بهبات رياح، مع احتمال تساقط حبات البرد، وذلك فوق هضاب الفوسفاط وولماس وسهول تادلة ومحليا فوق مرتفعات الأطلس الكبير. وسيلاحظ أيضا نزول قطرات مطرية  طقس حار مع زخات رعدية متوقعة اليوم الأربعاء     .', 'size': 3}, {'id': '182', 'title': 'طقس اليوم: استمرار الأجواء الحارة بعدة مناطق', 'source': 'soltana.ma', 'link': 'https://soltana.ma/1357590.html', 'summary': 'طقس اليوم: استمرار الأجواء الحارة بعدة مناطق. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الأربعاء، أن يظل الطقس حارا بكل من السهول الداخلية وجنوب الريف والجنوب الشرقي وداخل الأقاليم الجنوبية. ويرتقب نزول قطرات مطرية أو زخات رعدية مصحوبة بهبات رياح، مع احتمال تساقط حبات البرد، وذلك فوق هضاب الفوسفاط وولماس وسهول تادلة ومحليا فوق مرتفعات الأطلس الكبير. وسيلاحظ أيضا نزول قطرات مطرية', 'size': 3}, {'id': '248', 'title': 'توقعات أحوال الطقس اليوم الأربعاء', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%aa%d9%88%d9%82%d8%b9%d8%a7%d8%aa-%d8%a3%d8%ad%d9%88%d8%a7%d9%84-%d8%a7%d9%84%d8%b7%d9%82%d8%b3-%d8%a7%d9%84%d9%8a%d9%88%d9%85-%d8%a7%d9%84%d8%a3%d8%b1%d8%a8%d8%b9%d8%a7%d8%a1-31/', 'summary': 'توقعات أحوال الطقس اليوم الأربعاء. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليومه الأربعاء، أن يظل الطقس حارا بكل من السهول الداخلية وجنوب الريف والجنوب الشرقي وداخل الأقاليم الجنوبية. ويرتقب نزول قطرات مطرية أو زخات رعدية مصحوبة بهبات رياح، مع احتمال تساقط حبات البرد، وذلك فوق هضاب الفوسفاط وولماس وسهول تادلة ومحليا فوق مرتفعات الأطلس الكبير. وسيلاحظ أيضا نزول …  توقعات أحوال الطقس اليوم الأربعاء     .', 'size': 3}], 'main_title': 'طقس حار مع زخات رعدية متوقعة اليوم الأربعاء'}, {'community_id': '3', 'articles': [{'id': '204', 'title': 'غزة..  خلاف إسرائيلي حول احتلال القطاع والتجويع يحصد مزيدا من الأرواح', 'source': 'machahid24.com', 'link': 'https://machahid24.com/international/471746.html', 'summary': 'غزة.. خلاف إسرائيلي حول احتلال القطاع والتجويع يحصد مزيدا من الأرواح. مع دخول حرب الإبادة الإسرائيلية في غزة يومها الـ670، يستمر تفاقم أزمة التجويع تزامنا مع الغارات الإسرائيلية المكثفة والاستهداف الممنهج لطالبي المساعدات.', 'size': 2}, {'id': '424', 'title': 'في غزة يحفر الفلسطينيون المقابر بأصابعهم.. ولا شيء بقي غير الركام', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d9%81%d9%8a-%d8%ba%d8%b2%d8%a9-%d9%8a%d8%ad%d9%81%d8%b1-%d8%a7%d9%84%d9%81%d9%84%d8%b3%d8%b7%d9%8a%d9%86%d9%8a%d9%88%d9%86-%d8%a7%d9%84%d9%85%d9%82%d8%a7%d8%a8%d8%b1-%d8%a8%d8%a3%d8%b5%d8%a7%d8%a8/', 'summary': 'في غزة يحفر الفلسطينيون المقابر بأصابعهم.. ولا شيء بقي غير الركام. المساء اليوم – وكالات: أظهرت صور جوية حديثة دمارا واسعا عمّ مناطق متفرقة من قطاع غزة، بعد أشهر من القصف المكثف. وتُظهر المشاهد التي التُقطت من طائرات تحلق على ارتفاعات متوسطة حجم الأضرار التي لحقت بالبنية', 'size': 2}], 'main_title': 'غزة..  خلاف إسرائيلي حول احتلال القطاع والتجويع يحصد مزيدا من الأرواح'}, {'community_id': '4', 'articles': [{'id': '232', 'title': 'موجة حر وزخات رعدية مصحوبة بالبرَد وبهبات رياح مرتقبة من الثلاثاء إلى الجمعة', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/225655/', 'summary': 'موجة حر وزخات رعدية مصحوبة بالبرَد وبهبات رياح مرتقبة من الثلاثاء إلى الجمعة. الرباط – أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب تسجيل موجة حر من اليوم الثلاثاء إلى يوم الجمعة المقبل، وزخات رعدية مصحوبة بتساقط البرَد وبهبات رياح اليوم الثلاثاء، بعدد من مناطق المملكة. وأوضحت المديرية، في نشرة إنذارية من مستوى يقظة برتقالي، أنه من المرتقب تسجيل درجات حرارة تتراوح ما بين 40 و44 درجة اليوم الثلاثاء', 'size': 2}, {'id': '324', 'title': 'نشرة إنذارية.. موجة حر وأمطار رعدية قوية مصحوبة بالبرد مرتقبة من الأربعاء إلى الأحد بعدد من مناطق المملكة', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/410598.html', 'summary': 'نشرة إنذارية.. موجة حر وأمطار رعدية قوية مصحوبة بالبرد مرتقبة من الأربعاء إلى الأحد بعدد من مناطق المملكة. أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب تسجيل موجة حر من اليوم الأربعاء إلى يوم الأحد المقبل، وزخات رعدية قوية مع تساقط محلي للبر د', 'size': 4}, {'id': '371', 'title': 'موجة حر وزخات رعدية قوية مرتقبة بعدد من مناطق المملكة', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1091010.html', 'summary': 'موجة حر وزخات رعدية قوية مرتقبة بعدد من مناطق المملكة. أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب تسجيل موجة حر من اليوم الأربعاء إلى يوم الأحد المقبل، وزخات رعدية قوية مع تساقط محلي للبر د وهبات رياح اليوم الأربعاء، بعدد من مناطق المملكة. وأوضحت المديرية، في نشرة إنذارية من مستوى يقظة برتقالي، أنه من المرتقب تسجيل درجات حرارة تتراوح ما بين 44 و47 درجة من ظهرت المقالة موجة حر وزخات رعدية قوية مرتقبة بعدد من مناطق المملكة  .', 'size': 3}, {'id': '404', 'title': 'من الأربعاء إلى الأحد.. موجة حر وزخات رعدية قوية مصحوبة بالبرَد وبهبات رياح', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/471833.html', 'summary': 'من الأربعاء إلى الأحد.. موجة حر وزخات رعدية قوية مصحوبة بالبرَد وبهبات رياح. أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب تسجيل موجة حر من اليوم الأربعاء إلى يوم الأحد المقبل، وزخات رعدية قوية مع تساقط محلي للبرَد وهبات رياح اليوم الأربعاء، بعدد من مناطق المملكة.', 'size': 3}, {'id': '427', 'title': 'استمرار موجات الحرارة والزخات الرعدية إلى الأحد المقبل', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%a7%d8%b3%d8%aa%d9%85%d8%b1%d8%a7%d8%b1-%d9%85%d9%88%d8%ac%d8%a7%d8%aa-%d8%a7%d9%84%d8%ad%d8%b1%d8%a7%d8%b1%d8%a9-%d9%88%d8%a7%d9%84%d8%b2%d8%ae%d8%a7%d8%aa-%d8%a7%d9%84%d8%b1%d8%b9%d8%af%d9%8a/', 'summary': 'استمرار موجات الحرارة والزخات الرعدية إلى الأحد المقبل. المساء اليوم: أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب تسجيل موجة حر من اليوم الأربعاء إلى يوم الأحد المقبل، وزخات رعدية قوية مع تساقط محلي للبرَد وهبات رياح اليوم الأربعاء، بعدد من مناطق المملكة. وأوضحت', 'size': 3}], 'main_title': 'نشرة إنذارية.. موجة حر وأمطار رعدية قوية مصحوبة بالبرد مرتقبة من الأربعاء إلى الأحد بعدد من مناطق المملكة'}, {'community_id': '5', 'articles': [{'id': '250', 'title': 'عملية مرحبا: ارتفاع عدد أفراد الجالية المغربية الوافدين على المملكة حتى 4 غشت الجاري بنسبة 10.37%', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%b9%d9%85%d9%84%d9%8a%d8%a9-%d9%85%d8%b1%d8%ad%d8%a8%d8%a7-%d8%a7%d8%b1%d8%aa%d9%81%d8%a7%d8%b9-%d8%b9%d8%af%d8%af-%d8%a3%d9%81%d8%b1%d8%a7%d8%af-%d8%a7%d9%84%d8%ac%d8%a7%d9%84%d9%8a%d8%a9-%d8%a7/', 'summary': 'عملية مرحبا: ارتفاع عدد أفراد الجالية المغربية الوافدين على المملكة حتى 4 غشت الجاري بنسبة 10.37%. أفاد عمر موسى عبد الله، المسؤول عن المشاريع والمشرف على عملية “مرحبا” بمؤسسة محمد الخامس للتضامن، بأن عدد أفراد الجالية المغربية المقيمة بالخارج الذين دخلوا إلى المملكة بلغ حتى 4 غشت الجاري 2,789,197 شخصا، بزيادة قدرها 10.37% مقارنة بالفترة نفسها من العام الماضي. وفي سياق متصل، أكد موسى عبد الله، خلال مشاركته في …  عملية مرحبا: ارتفاع عدد أفراد الجالية المغربية الوافدين على المملكة حتى 4 غشت الجاري بنسبة 10.37%     .', 'size': 2}, {'id': '384', 'title': 'مرحبا 2025.. دخول حوالي 2,79 مليون من أفراد الجالية المغربية', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d9%85%d8%b1%d8%ad%d8%a8%d8%a7-2025-%d8%af%d8%ae%d9%88%d9%84-%d8%ad%d9%88%d8%a7%d9%84%d9%8a-279-%d9%85%d9%84%d9%8a%d9%88%d9%86-%d9%85%d9%86-%d8%a3%d9%81%d8%b1%d8%a7%d8%af-%d8%a7%d9%84%d8%ac%d8%a7/', 'summary': 'مرحبا 2025.. دخول حوالي 2,79 مليون من أفراد الجالية المغربية. أفاد المسؤول عن المشاريع والمشرف على عملية "مرحبا" بمؤسسة محمد الخامس للتضامن، عمر موسى عبد الله، أمس الثلاثاء، بأنه تم إلى غاية 4 غشت الجاري، تسجيل دخول 2.789.197 فردا من الجالية المغربية بالخارج، بارتفاع بلغ 10,37 في المائة مقارنة مع سنة 2024. وأكد عمر موسى عبد الله، الذي حل ضيفا على برنامج "عبور" الذي يبث  مرحبا 2025.. دخول حوالي 2,79 مليون من أفراد الجالية المغربية     .', 'size': 2}], 'main_title': 'عملية مرحبا: ارتفاع عدد أفراد الجالية المغربية الوافدين على المملكة حتى 4 غشت الجاري بنسبة 10.37%'}, {'community_id': '6', 'articles': [{'id': '309', 'title': 'بني ملال تتصدر مقاييس الأمطار خلال آخر 24 ساعة', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-647132.html', 'summary': 'بني ملال تتصدر مقاييس الأمطار خلال آخر 24 ساعة. هبة بريس في ما يلي مقاييس التساقطات المطرية المسجلة بالمملكة خلال الـ 24 ساعة الماضية، حسب المديرية العامة للأرصاد الجوية: - إقليم بني ملال (زاوية الشيخ) : 45 ملم - تيط مليل، المحمدية، الدار البيضاء : 02 ملم -تاكركوست والنواصر : 01 ملم -الرباط، إفران، بنسليمان، تارودانت، تزنيت: أقل من ملمتر.', 'size': 2}, {'id': '434', 'title': 'بني ملال تتصدر المدن في معدلات التساقطات المطرية خلال 24 ساعة الماضية', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a8%d9%86%d9%8a-%d9%85%d9%84%d8%a7%d9%84-%d8%aa%d8%aa%d8%b5%d8%af%d8%b1-%d8%a7%d9%84%d9%85%d8%af%d9%86-%d9%81%d9%8a-%d9%85%d8%b9%d8%af%d9%84%d8%a7%d8%aa-%d8%a7%d9%84%d8%aa%d8%b3%d8%a7%d9%82%d8%b7/', 'summary': 'بني ملال تتصدر المدن في معدلات التساقطات المطرية خلال 24 ساعة الماضية. شهدت عدة مناطق بالمملكة خلال الأربع والعشرين ساعة الماضية تساقطات مطرية متفاوتة الأهمية، سجلت أعلاها بإقليم بني ملال. في ما يلي مقاييس التساقطات المطرية المسجلة بالمملكة خلال الـ24 ساعة الماضية، حسب المديرية العامة للأرصاد الجوية: – إقليم بني ملال (زاوية الشيخ) : 45 ملم – تيط مليل، المحمدية، الدار البيضاء : 02 ملم …  بني ملال تتصدر المدن في معدلات التساقطات المطرية خلال 24 ساعة الماضية     .', 'size': 2}], 'main_title': 'بني ملال تتصدر مقاييس الأمطار خلال آخر 24 ساعة'}, {'community_id': '7', 'articles': [{'id': '311', 'title': 'سفيرة الأردن بالمغرب: خط جوي مباشر بين عمان والدار البيضاء منتصف أكتوبر', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-647125.html', 'summary': 'سفيرة الأردن بالمغرب: خط جوي مباشر بين عمان والدار البيضاء منتصف أكتوبر. هبة بريس قالت سفيرة المملكة الأردنية الهاشمية لدى المملكة المغربية، جمانة غنيمات، إن شركة الخطوط الجوية الملكية الأردنية ستباشر تشغيل رحلاتها الجوية المنتظمة والمباشرة بين عمّان والدار البيضاء اعتبارًا من منتصف شهر أكتوبر المقبل. وتهدف الخطوة إلى تعزيز روابط التعاون بين المملكتين الشقيقتين ودعم حركة السفر والسياحة والتبادل التجاري بين البلدين الشقيقين. وأكدت غنيمات أن تشغيل هذا الخط الجوي المباشر سيسهم في دعم فرص التعاون الاقتصادي والثقافي، وتوطيد الروابط بين الشعبين الشقيقين، معربةً عن تطلعها لأن يشكل إضافة نوعية تسهل تنقل المسافرين وتدعم تطوير العلاقات الثنائية في مختلف المجالات. واوضحت السفيرة في تصريح صحافي ان تشغيل خط طيران عمان- الدار البضاء المباشر يعد خطوة مهمة كونها تعزز حركة السفر بين المشرق والمغرب. وتستغرق الرحلة المباشرة بين الأردن والمغرب نحو ٥- ساعات فقط. واختتمت غنيمات تصريحها بالتأكيد على أن هذه الخطوة تعكس عمق العلاقات المتميزة بين الأردن والمغرب، وتترجم الحرص المشترك على تطويرها في مختلف المجالات.', 'size': 2}, {'id': '367', 'title': 'الخطوط الملكية الأردنية تطلق خطا مباشرا بين عمان والدار البيضاء', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1091031.html', 'summary': 'الخطوط الملكية الأردنية تطلق خطا مباشرا بين عمان والدار البيضاء. أعلنت سفيرة المملكة الأردنية الهاشمية لدى المملكة المغربية، جمانة غنيمات، شركة الخطوط الجوية الملكية الأردنية ستباشر تشغيل رحلاتها الجوية المنتظمة والمباشرة بين عمّان والدار البيضاء اعتبارًا من منتصف شهر أكتوبر المقبل. وتهدف الخطوة، حسب السفيرة الأردنية بالمغرب، إلى تعزيز روابط التعاون بين المملكتين الشقيقتين ودعم حركة السفر والسياحة والتبادل التجاري بين البلدين الشقيقين. وأكدت غنيمات ظهرت المقالة الخطوط الملكية الأردنية تطلق خطا مباشرا بين عمان والدار البيضاء  .', 'size': 2}], 'main_title': 'سفيرة الأردن بالمغرب: خط جوي مباشر بين عمان والدار البيضاء منتصف أكتوبر'}, {'community_id': '9', 'articles': [{'id': '369', 'title': 'وزير فلسطيني: المساعدات المغربية لغزة ذات أثر إنساني بالغ', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1091019.html', 'summary': 'وزير فلسطيني: المساعدات المغربية لغزة ذات أثر إنساني بالغ. أكد الوزير المشرف العام على الإعلام الرسمي الفلسطيني، أحمد عساف، أن المساعدة الإنسانية والطبية العاجلة، الموجهة بتعليمات من الملك محمد السادس رئيس لجنة القدس، إلى الشعب الفلسطيني في غزة، سيكون لها أثر إيجابي ملموس على حياة سكان القطاع. وأوضح في تصريح لوكالة المغرب العربي للأنباء، أن هذه المساعدة ستسهم بشكل كبير في تقديم الإغاثة العاجلة ظهرت المقالة وزير فلسطيني: المساعدات المغربية لغزة ذات أثر إنساني بالغ  .', 'size': 2}, {'id': '421', 'title': 'وزير الإعلام الفلسطيني: المساعدات التي أمر بها جلالة الملك سيكون لها أثر إيجابي ملموس على حياة ساكنة غزة', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/225680/', 'summary': 'وزير الإعلام الفلسطيني: المساعدات التي أمر بها جلالة الملك سيكون لها أثر إيجابي ملموس على حياة ساكنة غزة. رام الله – أكد الوزير المشرف العام على الإعلام الرسمي الفلسطيني، أحمد عساف، أن المساعدة الإنسانية والطبية العاجلة التي أعطى صاحب الجلالة الملك محمد السادس، رئيس لجنة القدس، تعليماته السامية لإرسالها إلى الشعب الفلسطيني وخاصة ساكنة غزة، سيكون لها أثر إيجابي ملموس على ساكنة القطاع. وقال في تصريح لوكالة المغرب العربي للأنباء، إن هذه المساعدة', 'size': 2}], 'main_title': 'وزير فلسطيني: المساعدات المغربية لغزة ذات أثر إنساني بالغ'}, {'community_id': '8', 'articles': [{'id': '390', 'title': 'لجنة الدعم تصرف أزيد من 25 مليون درهم لـ40 مهرجاناً سينمائياً', 'source': 'rue20.com', 'link': 'https://rue20.com/926952.html', 'summary': 'لجنة الدعم تصرف أزيد من 25 مليون درهم لـ40 مهرجاناً سينمائياً.  | الرباط قررت لجنة دعم تنظيم المهرجانات السينمائية منح مبلغ إجمالي قدره 25 مليون و 840 ألف درهم ل40 مهرجانا وتظاهرة سينمائية وطنية، برسم دورة يوليوز 2025. وأفاد بلاغ للمركز السينمائي المغربي أن اللجنة التي اجتمعت من 22 إلى 25 يوليوز المنصرم بالرباط، درست 49 ملف طلب مرشح للدعم، واستقبلت منظمي المهرجانات والتظاهرات الخبر لجنة الدعم تصرف أزيد من 25 مليون درهم لـ40 مهرجاناً سينمائياً  .', 'size': 2}, {'id': '423', 'title': 'دورة يوليوز: ثلاثة ملايير سنتيم لدعم المهرجانات السينمائية', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%af%d9%88%d8%b1%d8%a9-%d9%8a%d9%88%d9%84%d9%8a%d9%88%d8%b2-%d8%ab%d9%84%d8%a7%d8%ab%d8%a9-%d9%85%d9%84%d8%a7%d9%8a%d9%8a%d8%b1-%d8%b3%d9%86%d8%aa%d9%8a%d9%85-%d9%84%d8%af%d8%b9%d9%85-%d8%a7%d9%84/', 'summary': 'دورة يوليوز: ثلاثة ملايير سنتيم لدعم المهرجانات السينمائية. المساء اليوم – الرباط: قررت لجنة دعم تنظيم المهرجانات السينمائية منح مبلغ إجمالي قدره 25 مليون و 840 ألف درهم ل40 مهرجانا وتظاهرة سينمائية وطنية، برسم دورة يوليوز 2025. وأفاد بلاغ للمركز السينمائي المغربي أن', 'size': 2}], 'main_title': 'لجنة الدعم تصرف أزيد من 25 مليون درهم لـ40 مهرجاناً سينمائياً'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    