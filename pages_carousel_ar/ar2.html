<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 03/07/2025 - 06h26</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '6', 'articles': [{'id': '11', 'title': 'التوفيق يعلن بدء استخلاص مبلغ الحج', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d8%a7%d9%84%d8%aa%d9%88%d9%81%d9%8a%d9%82-%d9%8a%d8%b9%d9%84%d9%86-%d8%a8%d8%af%d8%a1-%d8%a7%d8%b3%d8%aa%d8%ae%d9%84%d8%a7%d8%b5-%d9%85%d8%a8%d9%84%d8%ba-%d8%a7%d9%84%d8%ad%d8%ac-1585896.html', 'summary': 'التوفيق يعلن بدء استخلاص مبلغ الحج. أعلن وزير الأوقاف والشؤون الإسلامية، أحمد التوفيق، اليوم الأربعاء بالرباط، أنه سيتم استخلاص المبلغ الجزافي عن مصاريف الحج، المحدد في 65 ألف درهم، في الفترة من 21 يوليوز إلى 08 غشت 2025، على أن يتم لاحقا تحديد الكلفة النهائية للحج، إما بالزيادة أو بالنقصان. وقال التوفيق، خلال اجتماع اللجنة الملكية للحج لموسم 1447هـ: “من أجل  التوفيق يعلن بدء استخلاص مبلغ الحج     - هسبريس جريدة إلكترونية مغربية .', 'size': 2}, {'id': '189', 'title': 'وزارة الأوقاف تكشف موعد استخلاص المبلغ الجزافي عن مصاريف حج 1447 هـ', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/468299.html', 'summary': 'وزارة الأوقاف تكشف موعد استخلاص المبلغ الجزافي عن مصاريف حج 1447 هـ. أعلن وزير الأوقاف والشؤون الإسلامية، أحمد التوفيق، اليوم الأربعاء بالرباط، أنه سيتم استخلاص المبلغ الجزافي عن مصاريف الحج والمحدد في 65 ألف درهم، في الفترة من 21 يوليوز إلى 08 غشت 2025، على أن يتم لاحقا تحديد الكلفة النهائية للحج، إما بالزيادة أو بالنقصان.', 'size': 3}, {'id': '207', 'title': 'وزارة الأوقاف تكشف عن موعد استخلاص مصاريف الحج', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d9%88%d8%b2%d8%a7%d8%b1%d8%a9-%d8%a7%d9%84%d8%a3%d9%88%d9%82%d8%a7%d9%81-%d8%aa%d9%83%d8%b4%d9%81-%d8%b9%d9%86-%d9%85%d9%88%d8%b9%d8%af-%d8%a7%d8%b3%d8%aa%d8%ae%d9%84%d8%a7%d8%b5-%d9%85%d8%b5%d8%a7/', 'summary': 'وزارة الأوقاف تكشف عن موعد استخلاص مصاريف الحج. -متابعات أعلن وزير الأوقاف والشؤون الإسلامية، أحمد التوفيق، اليوم الأربعاء بالرباط، أنه سيتم استخلاص المبلغ الجزافي عن مصاريف الحج والمحدد في 65 ألف درهم، في الفترة من 21 يوليوز...  وزارة الأوقاف تكشف عن موعد استخلاص مصاريف الحج     .', 'size': 2}], 'main_title': 'وزارة الأوقاف تكشف موعد استخلاص المبلغ الجزافي عن مصاريف حج 1447 هـ'}, {'community_id': '1', 'articles': [{'id': '96', 'title': 'وفاة أحد أفراد "خلية شمهروش" داخل السجن المحلي بالعرائش', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/society/408579.html', 'summary': 'وفاة أحد أفراد "خلية شمهروش" داخل السجن المحلي بالعرائش. أعلنت إدارة السجن المحلي بالعرائش عن وفاة السجين (ي.أ)، المعتقل على خلفية قانون مكافحة الإرهاب ضمن ما عرف بـ"خلية شمهروش"، مساء أمس الثلاثاء ، وذلك', 'size': 2}, {'id': '239', 'title': 'وفاة أحد معتقلي “خلية شمهروش” بالسجن المحلي بالعرائش', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d9%88%d9%81%d8%a7%d8%a9-%d8%a3%d8%ad%d8%af-%d9%85%d8%b9%d8%aa%d9%82%d9%84%d9%8a-%d8%ae%d9%84%d9%8a%d8%a9-%d8%b4%d9%85%d9%87%d8%b1%d9%88%d8%b4-%d8%a8%d8%a7%d9%84%d8%b3%d8%ac%d9%86-%d8%a7%d9%84/', 'summary': 'وفاة أحد معتقلي “خلية شمهروش” بالسجن المحلي بالعرائش. أعلنت إدارة السجن المحلي بالعرائش عن وفاة السجين (ي.أ)، المعتقل على خلفية قانون مكافحة الإرهاب ضمن ما عرف بـ”خلية شمهروش”، مساء يوم أمس الثلاثاء فاتح يوليوز، وذلك داخل غرفته الانفرادية بالمؤسسة. وأوضح بلاغ إدارة المؤسسة السجنية، أن السجين المتوفى كان يعاني من اضطرابات نفسية، حيث كان يخضع للمتابعة الطبية ويتلقى الأدوية المناسبة لحالته، …  وفاة أحد معتقلي “خلية شمهروش” بالسجن المحلي بالعرائش     .', 'size': 2}], 'main_title': 'وفاة أحد أفراد "خلية شمهروش" داخل السجن المحلي بالعرائش'}, {'community_id': '2', 'articles': [{'id': '113', 'title': 'عصابة الحسابات البنكية تسقط في قبضة أمن جرسيف', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/society/408598.html', 'summary': 'عصابة الحسابات البنكية تسقط في قبضة أمن جرسيف. تمكنت عناصر الشرطة بالمنطقة الإقليمية للأمن بمدينة جرسيف بتنسيق مع مصالح المديرية العامة لمراقبة التراب الوطني، صباح اليوم الأربعاء 2 يوليوز الجاري، من توقيف سبعة', 'size': 2}, {'id': '213', 'title': 'جرسيف.. توقيف 7 أشخاص يشتبه تورطهم في النصب وانتحال صفات', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/223942/', 'summary': 'جرسيف.. توقيف 7 أشخاص يشتبه تورطهم في النصب وانتحال صفات. كواليس اليوم تمكنت عناصر الشرطة بالمنطقة الإقليمية للأمن بمدينة جرسيف بتنسيق مع مصالح المديرية العامة لمراقبة التراب الوطني، صباح اليوم الأربعاء 2 يوليوز الجاري، من توقيف سبعة أشخاص يشتبه في تورطهم في قضية تتعلق بالنصب والاحتيال وانتحال صفات ينظمها القانون. وحسب المعطيات الأولية للبحث، فقد كان المشتبه فيهم يتصلون هاتفيا بالضحايا، وينتحلون صفات موظفين', 'size': 2}], 'main_title': 'عصابة الحسابات البنكية تسقط في قبضة أمن جرسيف'}, {'community_id': '3', 'articles': [{'id': '153', 'title': 'نشرة إنذارية تحذر من موجة حر وزخات رعدية قوية بهاته المناطق', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1082470.html', 'summary': 'نشرة إنذارية تحذر من موجة حر وزخات رعدية قوية بهاته المناطق. تتوقع المديرية العامة للأرصاد الجوية تسجيل موجة حر مع الشركي من الأربعاء إلى السبت، وكذا زخات رعدية قوية مع تساقط محلي للبرد وهبات رياح غدا الأربعاء، بعدد من مناطق المملكة. وأوضحت المديرية في نشرة إنذارية من مستوى يقظة برتقالي، أنه يرتقب تسجيل درجات حرارة تتراوح ما بين 43 و46 درجة من يوم الأربعاء إلى يوم ظهرت المقالة نشرة إنذارية تحذر من موجة حر وزخات رعدية قوية بهاته المناطق  .', 'size': 2}, {'id': '237', 'title': 'نشرة إنذارية.. موجة حر مع الشركي وزخات قوية مرتقبة بالمملكة', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d9%86%d8%b4%d8%b1%d8%a9-%d8%a5%d9%86%d8%b0%d8%a7%d8%b1%d9%8a%d8%a9-%d9%85%d9%88%d8%ac%d8%a9-%d8%ad%d8%b1-%d9%85%d8%b9-%d8%a7%d9%84%d8%b4%d8%b1%d9%83%d9%8a-%d9%88%d8%b2%d8%ae%d8%a7%d8%aa-%d9%82/', 'summary': 'نشرة إنذارية.. موجة حر مع الشركي وزخات قوية مرتقبة بالمملكة. تتوقع المديرية العامة للأرصاد الجوية تسجيل موجة حر مع الشركي من الأربعاء إلى السبت، وكذا زخات رعدية قوية مع تساقط محلي للبرد وهبات رياح غدا الأربعاء، بعدد من مناطق المملكة. وأوضحت المديرية في نشرة إنذارية من مستوى يقظة برتقالي، أنه يرتقب تسجيل درجات حرارة تتراوح ما بين 43 و46 درجة من يوم الأربعاء …  نشرة إنذارية.. موجة حر مع الشركي وزخات قوية مرتقبة بالمملكة     .', 'size': 2}], 'main_title': 'نشرة إنذارية تحذر من موجة حر وزخات رعدية قوية بهاته المناطق'}, {'community_id': '5', 'articles': [{'id': '154', 'title': 'بحث وطني: 87 % من المستفيدين راضون عن الدعم المباشر.. والولوج لا يزال معقدا', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1082404.html', 'summary': 'بحث وطني: 87 % من المستفيدين راضون عن الدعم المباشر.. والولوج لا يزال معقدا. كشف بحث ميداني أنجزه المرصد الوطني للتنمية البشرية عن تحقيق نسبة رضا مرتفعة بلغت 87,46% في صفوف المستفيدين من برنامج الدعم الاجتماعي المباشر خلال الفصل الأول من تنفيذه، مع دعوات ملحّة إلى اعتماد آليات مناسبة لتحيين معايير أهلية المستفيدين بشكل فوري، بما يضمن ملاءمة الدعم للتحولات الاجتماعية والاقتصادية التي تمس الأسر المعوزة. البحث، وهو الأول ظهرت المقالة بحث وطني: 87 % من المستفيدين راضون عن الدعم المباشر.. والولوج لا يزال معقدا  .', 'size': 2}, {'id': '181', 'title': 'دراسة: 87% من المغاربة راضون عن الدعم الإجتماعي المباشر', 'source': 'rue20.com', 'link': 'https://rue20.com/917582.html', 'summary': 'دراسة: 87% من المغاربة راضون عن الدعم الإجتماعي المباشر.  ا الرباط في إطار تتبع وتقييم برامج الورش الملكي للدولة الاجتماعية، أجرى المرصد الوطني للتنمية البشرية بحثاً ميدانياً هو الأول من نوعه، لقياس مستوى رضا المستفيدين من برنامج الدعم الاجتماعي المباشر، خلال الفصل الأول من تفعيله. البحث، الذي شمل عينة واسعة من الأسر المستفيدة، اطلع عليه موقع كشف عن مستوى رضا عام مرتفع الخبر دراسة: 87% من المغاربة راضون عن الدعم الإجتماعي المباشر  .', 'size': 3}, {'id': '199', 'title': 'توصيات بتحسين خدمات الدعم الاجتماعي وتحيين معايير الاستفادة', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d8%aa%d9%88%d8%b5%d9%8a%d8%a7%d8%aa-%d8%a8%d8%aa%d8%ad%d8%b3%d9%8a%d9%86-%d8%ae%d8%af%d9%85%d8%a7%d8%aa-%d8%a7%d9%84%d8%af%d8%b9%d9%85-%d8%a7%d9%84%d8%a7%d8%ac%d8%aa%d9%85%d8%a7%d8%b9%d9%8a-%d9%88/', 'summary': 'توصيات بتحسين خدمات الدعم الاجتماعي وتحيين معايير الاستفادة. -متابعات في إطار تتبع وتقييم برامج الورش الملكي للدولة الاجتماعية، أجرى المرصد الوطني للتنمية البشرية بحثاً ميدانياً هو الأول من نوعه، لقياس مستوى رضا المستفيدين من برنامج الدعم الاجتماعي...  توصيات بتحسين خدمات الدعم الاجتماعي وتحيين معايير الاستفادة     .', 'size': 2}], 'main_title': 'دراسة: 87% من المغاربة راضون عن الدعم الإجتماعي المباشر'}, {'community_id': '8', 'articles': [{'id': '301', 'title': 'بتعليمات ملكية سامية،مؤسسة محمد الخامس للتضامن تطلق العمل بـ13مركزا جديدا في عدد من مدن المملكة', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/202861', 'summary': 'بتعليمات ملكية سامية،مؤسسة محمد الخامس للتضامن تطلق العمل بـ13مركزا جديدا في عدد من مدن المملكة.  أعطى صاحب الجلالة الملك محمد السادس ، نصره الله ، رئيس مؤسسة محمد الخامس للتضامن،تعليماته السامية بوضع المراكز التي أنشأتها المؤسسة في مجالات الصحة والإعاقة و التكوين رهن إشارة الساكنة المعوزة المستفيدة. وأوضحت المؤسسة في بلاغ لها أن الإطلاق الفوري يهم 13 مركزا جديدا تم الانتهاء من أشغال بنائها وتجهيزها بثمان من عمالات', 'size': 5}, {'id': '313', 'title': 'بتعليمات ملكية.. مراكز تضامنية جديدة تفتح أبوابها للفئات المعوزة والشباب', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/408612.html', 'summary': 'بتعليمات ملكية.. مراكز تضامنية جديدة تفتح أبوابها للفئات المعوزة والشباب. أعطى صاحب الجلالة الملك محمد السادس، نصره الله، رئيس مؤسسة محمد الخامس للتضامن، تعليماته السامية بوضع المراكز التي أنشأتها المؤسسة في مجالات الصحة والإعاقة والتكوين', 'size': 5}, {'id': '338', 'title': 'تعليمات ملكية لتفعيل مراكز اجتماعية جديدة تخدم الفئات الهشة', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/317236/', 'summary': 'تعليمات ملكية لتفعيل مراكز اجتماعية جديدة تخدم الفئات الهشة. أعطى صاحب الجلالة الملك محمد السادس، نصره الله، رئيس مؤسسة محمد الخامس للتضامن، تعليماته السامية بوضع المراكز التي أنشأتها المؤسسة في مجالات الصحة والإعاقة والتكوين رهن إشارة الساكنة المعوزة المستفيدة. وأوضحت المؤسسة في بلاغ لها أن الإطلاق الفوري يهم 13 مركزا جديدا تم الانتهاء من أشغال بنائها وتجهيزها بثمان من عمالات وأقاليم المملكة، مضيفة أن', 'size': 5}, {'id': '374', 'title': 'جلالة الملك يأمر بوضع مراكز صحية رهن إشارة الساكنة المعوزة', 'source': 'rue20.com', 'link': 'https://rue20.com/917730.html', 'summary': 'جلالة الملك يأمر بوضع مراكز صحية رهن إشارة الساكنة المعوزة.  . الرباط أعطى صاحب الجلالة الملك محمد السادس، نصره الله، رئيس مؤسسة محمد الخامس للتضامن، تعليماته السامية بوضع المراكز التي أنشأتها المؤسسة في مجالات الصحة والإعاقة والتكوين رهن إشارة الساكنة المعوزة المستفيدة. وأوضحت المؤسسة في بلاغ لها أن الإطلاق الفوري يهم 13 مركزا جديدا تم الانتهاء من أشغال بنائها وتجهيزها بثمان من عمالات الخبر جلالة الملك يأمر بوضع مراكز صحية رهن إشارة الساكنة المعوزة  .', 'size': 5}, {'id': '412', 'title': 'بتعليمات ملكية سامية: محمد الخامس للتضامن تطلق العمل بـ13 مركزا جديدا في عدد من مدن المملكة', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/223945/', 'summary': 'بتعليمات ملكية سامية: محمد الخامس للتضامن تطلق العمل بـ13 مركزا جديدا في عدد من مدن المملكة. الرباط – أعطى صاحب الجلالة الملك محمد السادس، نصره الله، رئيس مؤسسة محمد الخامس للتضامن، تعليماته السامية بوضع المراكز التي أنشأتها المؤسسة في مجالات الصحة والإعاقة والتكوين رهن إشارة الساكنة المعوزة المستفيدة. وأوضحت المؤسسة في بلاغ لها أن الإطلاق الفوري يهم 13 مركزا جديدا تم الانتهاء من أشغال بنائها وتجهيزها بثمان من عمالات وأقاليم المملكة،', 'size': 5}], 'main_title': 'بتعليمات ملكية سامية،مؤسسة محمد الخامس للتضامن تطلق العمل بـ13مركزا جديدا في عدد من مدن المملكة'}, {'community_id': '0', 'articles': [{'id': '302', 'title': 'لفتيت يترأس حفل تخرج الفوج الستين لرجال السلطة', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/202846', 'summary': 'لفتيت يترأس حفل تخرج الفوج الستين لرجال السلطة.  ترأس السيد وزير الداخلية، يومه الأربعاء 2 يوليوز 2025 بالمعهد الملكي للإدارة الترابية بالقنيطرة، حفل تخرج الفوج الستين للسلك العادي لرجال السلطة والذي يضم 113 خريجا و خريجة،وذلك بحضور عدد من الشخصيات المدنية والعسكرية. وقد تخللت هذا الحفل مراسم توزيع الشهادات على المتفوقين، وكذا تقديم استعراض عسكري من طرف المتخرجين. وجسدت هذه المناسبة', 'size': 4}, {'id': '316', 'title': 'وزير الداخلية يترأس حفل تخرج الفوج الستين للسلك العادي لرجال السلطة', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/408615.html', 'summary': 'وزير الداخلية يترأس حفل تخرج الفوج الستين للسلك العادي لرجال السلطة. ترأس وزير الداخلية، عبد الوافي لفتيت، اليوم الأربعاء بالمعهد الملكي للإدارة الترابية بالقنيطرة، حفل تخرج الفوج الستين للسلك العادي لرجال السلطة الذي يضم 113 خريجا', 'size': 2}, {'id': '326', 'title': 'يضم 113 خريجا وخريجة.. وزير الداخلية يترأس حفل تخرج الفوج الـ60 للسلك العادي لرجال السلطة', 'source': 'kifache.com', 'link': 'https://kifache.com/%d9%8a%d8%b6%d9%85-113-%d8%ae%d8%b1%d9%8a%d8%ac%d8%a7-%d9%88%d8%ae%d8%b1%d9%8a%d8%ac%d8%a9-%d9%88%d8%b2%d9%8a%d8%b1-%d8%a7%d9%84%d8%af%d8%a7%d8%ae%d9%84%d9%8a%d8%a9-%d9%8a%d8%aa%d8%b1%d8%a3%d8%b3/', 'summary': 'يضم 113 خريجا وخريجة.. وزير الداخلية يترأس حفل تخرج الفوج الـ60 للسلك العادي لرجال السلطة. ترأس وزير الداخلية، عبد الوافي لفتيت، اليوم الأربعاء (2 يوليوز)، بالمعهد الملكي للإدارة الترابية بالقنيطرة، حفل تخرج الفوج الستين للسلك العادي لرجال السلطة، والذي يضم 113 خريجا وخريجة، وذلك بحضور عدد من الشخصيات المدنية والعسكرية. وأفاد بلاغ لوزارة الداخلية بأن هذا الحفل تخللته مراسم توزيع الشهادات على المتفوقين، وكذا تقديم استعراض عسكري من طرف المتخرجين.', 'size': 4}, {'id': '367', 'title': 'وزير الداخلية يترأس حفل تخرج الفوج الـ60 لرجال السلطة', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d9%88%d8%b2%d9%8a%d8%b1-%d8%a7%d9%84%d8%af%d8%a7%d8%ae%d9%84%d9%8a%d8%a9-%d9%8a%d8%aa%d8%b1%d8%a3%d8%b3-%d8%ad%d9%81%d9%84-%d8%aa%d8%ae%d8%b1%d8%ac-%d8%a7%d9%84%d9%81%d9%88%d8%ac-%d8%a7%d9%84%d9%8060/', 'summary': 'وزير الداخلية يترأس حفل تخرج الفوج الـ60 لرجال السلطة. ترأس وزير الداخلية، عبد الوافي لفتيت، اليوم الأربعاء بالمعهد الملكي للإدارة الترابية بالقنيطرة، حفل تخرج الفوج الستين للسلك العادي لرجال السلطة الذي يضم 113 خريجا وخريجة، وذلك بحضور عدد من الشخصيات المدنية والعسكرية. وذكر بلاغ لوزارة الداخلية أنه تخللت هذا الحفل مراسم توزيع الشهادات على المتفوقين، وكذا تقديم استعراض عسكري من طرف المتخرجين. وأضاف المصدر  وزير الداخلية يترأس حفل تخرج الفوج الـ60 لرجال السلطة     .', 'size': 5}, {'id': '372', 'title': 'لفتيت يشرف على تخرج فوج جديد من رجال السلطة على بعد سنة من الإنتخابات', 'source': 'rue20.com', 'link': 'https://rue20.com/917738.html', 'summary': 'لفتيت يشرف على تخرج فوج جديد من رجال السلطة على بعد سنة من الإنتخابات. . الرباط ترأس وزير الداخلية، عبد الوافي لفتيت، اليوم الأربعاء بالمعهد الملكي للإدارة الترابية بالقنيطرة، حفل تخرج الفوج الستين للسلك العادي لرجال السلطة الذي يضم 113 خريجا وخريجة، وذلك بحضور عدد من الشخصيات المدنية والعسكرية. وذكر بلاغ لوزارة الداخلية أنه تخللت هذا الحفل مراسم توزيع الشهادات على المتفوقين، وكذا تقديم استعراض عسكري من طرف الخبر لفتيت يشرف على تخرج فوج جديد من رجال السلطة على بعد سنة من الإنتخابات  .', 'size': 4}], 'main_title': 'وزير الداخلية يترأس حفل تخرج الفوج الـ60 لرجال السلطة'}, {'community_id': '4', 'articles': [{'id': '359', 'title': 'تقليص العضوية وتمديد فترة الانتداب.. هذه تفاصيل مشروع جديد يعيد تنظيم مجلس الصحافة', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1082610.html', 'summary': 'تقليص العضوية وتمديد فترة الانتداب.. هذه تفاصيل مشروع جديد يعيد تنظيم مجلس الصحافة. ينتظر أن تصادق الحكومة يوم غد الخميس خلال انعقاد مجلسها الأسبوعي تحت رئاسة عزيز أخنوش رئيس الحكومة، على مشروع قانون رقم 26.25 يتعلق بإعادة تنظيم المجلس الوطني للصحافة. ويهدف هذا المشروع وفق مذكرته التقديمية التي حصلت “العمق المغربي” على نسخة منها إلى تكريس المكتسبات التي حققها القانون رقم 90.13، الصادر بتنفيذه الظهير الشريف رقم 1.16.24 ظهرت المقالة تقليص العضوية وتمديد فترة الانتداب.. هذه تفاصيل مشروع جديد يعيد تنظيم مجلس الصحافة  .', 'size': 2}, {'id': '418', 'title': 'من الانتخاب إلى الانتداب.. مشروع قانون لإعادة تنظيم المجلس الوطني للصحافة يثير الجدل.. وهذه أهم مستجداته', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d9%85%d9%86-%d8%a7%d9%84%d8%a7%d9%86%d8%aa%d8%ae%d8%a7%d8%a8-%d8%a5%d9%84%d9%89-%d8%a7%d9%84%d8%a7%d9%86%d8%aa%d8%af%d8%a7%d8%a8-%d9%85%d8%b4%d8%b1%d9%88%d8%b9-%d9%82%d8%a7%d9%86%d9%88%d9%86-%d9%84/', 'summary': 'من الانتخاب إلى الانتداب.. مشروع قانون لإعادة تنظيم المجلس الوطني للصحافة يثير الجدل.. وهذه أهم مستجداته. ينعقد غدا الخميس 3 يوليوز 2025، مجلس للحكومة برئاسة رئيس الحكومة عزيز أخنوش، حيث من المرتقب أن يتدارس المجلس في بدايته مشروعي قانونين، يتعلق الأول منهما بإعادة تنظيم المجلس الوطني للصحافة، فيما يهم الثاني تعديل وتتميم القانون المتعلق بالنظام الأساسي للصحافيين المهنيين. ووفق ما تضمنته المذكرة التقديمية لمشروع قانون رقم 26.25 المتعلق بإعادة …  من الانتخاب إلى الانتداب.. مشروع قانون لإعادة تنظيم المجلس الوطني للصحافة يثير الجدل.. وهذه أهم مستجداته     .', 'size': 2}], 'main_title': 'تقليص العضوية وتمديد فترة الانتداب.. هذه تفاصيل مشروع جديد يعيد تنظيم مجلس الصحافة'}, {'community_id': '7', 'articles': [{'id': '375', 'title': 'إيقاف موثقين عن ممارسة المهنة', 'source': 'rue20.com', 'link': 'https://rue20.com/917727.html', 'summary': 'إيقاف موثقين عن ممارسة المهنة.  . الرباط أصدرت اللجنة المكلفة بالبت في الملفات التأديبية للموثقين، برئاسة مدير الشؤون المدنية والمهن القانونية والقضائية، بوزارة العدل قرارات تأديبية في 26 ملفا. و بحسب بلاغ صادر عن وزارة العدل ، تم إصدار عقوبة الإيقاف عن ممارسة المهنة لمدة ستة أشهر في حق موثق واحد. كما تمت معاقبة موثق واحد و إيقافه الخبر إيقاف موثقين عن ممارسة المهنة  .', 'size': 2}, {'id': '413', 'title': 'تمديد أجل إيداع ملفات طلبات الدعم للصحافة والنشر والطباعة والتوزيع', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%aa%d9%85%d8%af%d9%8a%d8%af-%d8%a3%d8%ac%d9%84-%d8%a5%d9%8a%d8%af%d8%a7%d8%b9-%d9%85%d9%84%d9%81%d8%a7%d8%aa-%d8%b7%d9%84%d8%a8%d8%a7%d8%aa-%d8%a7%d9%84%d8%af%d8%b9%d9%85-%d9%84%d9%84%d8%b5%d8%ad/', 'summary': 'تمديد أجل إيداع ملفات طلبات الدعم للصحافة والنشر والطباعة والتوزيع. المساء اليوم – الرباط: أعلنت وزارة الشباب والثقافة والتواصل (قطاع التواصل)، اليوم الأربعاء، عن تمديد أجل إيداع ملفات طلبات الدعم العمومي لفائدة مؤسسات الصحافة والنشر وشركات الطباعة وشركات التوزيع برسم سنة 2025 إلى غاية 30', 'size': 2}], 'main_title': 'إيقاف موثقين عن ممارسة المهنة'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    