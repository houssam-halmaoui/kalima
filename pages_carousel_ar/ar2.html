<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 09/07/2025 - 18h33</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '0', 'title': 'نتائج التشريح الطبي لجثة "طفل بومية"', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d9%86%d8%aa%d8%a7%d8%a6%d8%ac-%d8%a7%d9%84%d8%aa%d8%b4%d8%b1%d9%8a%d8%ad-%d8%a7%d9%84%d8%b7%d8%a8%d9%8a-%d9%84%d8%ac%d8%ab%d8%a9-%d8%b7%d9%81%d9%84-%d8%a8%d9%88%d9%85%d9%8a%d8%a9-1589832.html', 'summary': 'نتائج التشريح الطبي لجثة "طفل بومية". أفاد الوكيل العام للملك لدى محكمة الإستئناف بالرشيدية أنه علاقة بما يتم الترويج له في بعض وسائط التواصل الاجتماعي من كون وفاة الطفل الذي تم العثور على جثته بمنطقة بومية قد تعرض لإعتداء جنسي وبدني. وبعد الجدل الذي أثير حول الواقعة، أكد المصدر ذاته أن النيابة العامة باشرت فور العثور على الجثة إجراءات تحقيق قضائي معمق،  نتائج التشريح الطبي لجثة "طفل بومية"     - هسبريس جريدة إلكترونية مغربية .', 'size': 2}, {'id': '169', 'title': 'التحقيق مستمر في وفاة طفل بومية دون مؤشرات اعتداء', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a7%d9%84%d8%aa%d8%ad%d9%82%d9%8a%d9%82-%d9%85%d8%b3%d8%aa%d9%85%d8%b1-%d9%81%d9%8a-%d9%88%d9%81%d8%a7%d8%a9-%d8%b7%d9%81%d9%84-%d8%a8%d9%88%d9%85%d9%8a%d8%a9-%d8%af%d9%88%d9%86-%d9%85%d8%a4%d8%b4/', 'summary': 'التحقيق مستمر في وفاة طفل بومية دون مؤشرات اعتداء. أفاد الوكيل العام للملك لدى محكمة الاستئناف بالرشيدية، أنه على خلفية ما يتم تداوله عبر بعض منصات التواصل الاجتماعي بخصوص وفاة الطفل الذي عُثر على جثته بمنطقة بومية، وما يُروَّج بشأن تعرضه لاعتداء جنسي وبدني، فإن النيابة العامة سارعت إلى فتح تحقيق قضائي شامل فور العثور على الجثة. وبحسب المصدر ذاته، فقد تم تكليف الشرطة  التحقيق مستمر في وفاة طفل بومية دون مؤشرات اعتداء     .', 'size': 5}, {'id': '240', 'title': 'الوكيل العام بالرشيدية ينفي تعرض طفل بومية لاعتداء جنسي ويكشف نتائج تشريح الجثة', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d9%88%d9%83%d9%8a%d9%84-%d8%a7%d9%84%d8%b9%d8%a7%d9%85-%d8%a8%d8%a7%d9%84%d8%b1%d8%b4%d9%8a%d8%af%d9%8a%d8%a9-%d9%8a%d9%86%d9%81%d9%8a-%d8%aa%d8%b9%d8%b1%d8%b6-%d8%b7%d9%81%d9%84-%d8%a8/', 'summary': 'الوكيل العام بالرشيدية ينفي تعرض طفل بومية لاعتداء جنسي ويكشف نتائج تشريح الجثة. أفاد الوكيل العام للملك لدى محكمة الإستئناف بالرشيدية، اليوم الأربعاء، أنه علاقة بما يتم الترويج له في بعض وسائط التواصل الاجتماعي من كون وفاة الطفل الذي تم العثور على جثته بمنطقة بومية قد تعرض لإعتداء جنسي وبدني. وأكد المصدر ذاته أن النيابة العامة بمجرد العثور على جثة الطفل بادرت إلى إعطاء تعليماتها للشرطة …  الوكيل العام بالرشيدية ينفي تعرض طفل بومية لاعتداء جنسي ويكشف نتائج تشريح الجثة     .', 'size': 4}, {'id': '436', 'title': 'الوكيل العام للملك بالرشيدية: طفل بومية لم يتعرض لأي اعتداء', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/224373/', 'summary': 'الوكيل العام للملك بالرشيدية: طفل بومية لم يتعرض لأي اعتداء. أفاد الوكيل العام للملك لدى محكمة الإستئناف بالرشيدية أنه علاقة بما يتم الترويج له في بعض وسائط التواصل الاجتماعي من كون وفاة الطفل الذي تم العثور على جثته بمنطقة بومية قد تعرض لإعتداء جنسي وبدني. أكد المصدر ذاته أن النيابة العامة بمجرد العثور على جثة الطفل بادرت إلى إعطاء تعليماتها للشرطة القضائية لفتح بحث قضائي', 'size': 4}, {'id': '442', 'title': 'الوكيل العام بالرشيدية يقدم معطيات جديدة حول “الطفل القتيل”', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%a7%d9%84%d9%88%d9%83%d9%8a%d9%84-%d8%a7%d9%84%d8%b9%d8%a7%d9%85-%d8%a8%d8%a7%d9%84%d8%b1%d8%b4%d9%8a%d8%af%d9%8a%d8%a9-%d9%8a%d9%82%d8%af%d9%85-%d9%85%d8%b9%d8%b7%d9%8a%d8%a7%d8%aa-%d8%ac%d8%af/', 'summary': 'الوكيل العام بالرشيدية يقدم معطيات جديدة حول “الطفل القتيل”. المساء اليوم: نفى الوكيل العام للملك لدى محكمة الإستئناف بالرشيدية أن يكون الطفل الذي تم العثور على جثته بمنطقة بومية قد تعرض لإعتداء جنسي وبدني. وأكد المصدر ذاته أن النيابة العامة “بمجرد العثور على جثة', 'size': 4}], 'main_title': 'التحقيق مستمر في وفاة طفل بومية دون مؤشرات اعتداء'}, {'community_id': '8', 'articles': [{'id': '9', 'title': 'ضبط أقراص مهلوسة بميناء الناظور', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d8%b6%d8%a8%d8%b7-%d8%a3%d9%82%d8%b1%d8%a7%d8%b5-%d9%85%d9%87%d9%84%d9%88%d8%b3%d8%a9-%d8%a8%d9%85%d9%8a%d9%86%d8%a7%d8%a1-%d8%a7%d9%84%d9%86%d8%a7%d8%b8%d9%88%d8%b1-1589761.html', 'summary': 'ضبط أقراص مهلوسة بميناء الناظور. تمكنت عناصر الأمن الوطني والجمارك بميناء بني انصار البحري بالناظور، يوم الثلاثاء 08 يوليوز الجاري، من إحباط محاولة تهريب 4382 قرصا طبيا مخدرا إلى داخل التراب الوطني، كانت على متن سيارة نفعية لنقل البضائع تحمل لوحات ترقيم مغربية. وكانت عمليات المراقبة والتفتيش التي أخضعت لها هذه الناقلة، مباشرة بعد وصولها إلى الميناء البحري بني انصار  ضبط أقراص مهلوسة بميناء الناظور     - هسبريس جريدة إلكترونية مغربية .', 'size': 3}, {'id': '173', 'title': 'إحباط تهريب آلاف الأقراص المخدرة عبر ميناء بني نصار', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a5%d8%ad%d8%a8%d8%a7%d8%b7-%d8%aa%d9%87%d8%b1%d9%8a%d8%a8-%d8%a2%d9%84%d8%a7%d9%81-%d8%a7%d9%84%d8%a3%d9%82%d8%b1%d8%a7%d8%b5-%d8%a7%d9%84%d9%85%d8%ae%d8%af%d8%b1%d8%a9-%d8%b9%d8%a8%d8%b1-%d9%85/', 'summary': 'إحباط تهريب آلاف الأقراص المخدرة عبر ميناء بني نصار. تمكنت عناصر الأمن الوطني والجمارك بميناء بني انصار البحري بالناظور، أمس الثلاثاء، من إحباط محاولة تهريب 4382 قرصا طبيا مخدرا إلى داخل التراب الوطني، كانت على متن سيارة نفعية لنقل البضائع تحمل لوحات ترقيم مغربية. وكانت عمليات المراقبة والتفتيش التي أخضعت لها هذه الناقلة، مباشرة بعد وصولها إلى الميناء البحري بني انصار قادمة من  إحباط تهريب آلاف الأقراص المخدرة عبر ميناء بني نصار     .', 'size': 3}, {'id': '189', 'title': 'جمارك الناظور تحبط محاولة تهريب 4382 قرصا طبيا مخدرا إلى داخل التراب الوطني', 'source': 'rue20.com', 'link': 'https://rue20.com/918974.html', 'summary': 'جمارك الناظور تحبط محاولة تهريب 4382 قرصا طبيا مخدرا إلى داخل التراب الوطني.  الرباط تمكنت عناصر الأمن الوطني والجمارك بميناء بني انصار البحري بالناظور، يوم الثلاثاء 08 يوليوز الجاري، من إحباط محاولة تهريب 4382 قرصا طبيا مخدرا إلى داخل التراب الوطني، كانت على متن سيارة نفعية لنقل البضائع تحمل لوحات ترقيم مغربية. وكانت عمليات المراقبة والتفتيش التي أخضعت لها هذه الناقلة، مباشرة بعد وصولها إلى الميناء البحري الخبر جمارك الناظور تحبط محاولة تهريب 4382 قرصا طبيا مخدرا إلى داخل التراب الوطني  .', 'size': 5}, {'id': '243', 'title': 'الأمن والجمارك يحبطان تهريب أزيد من 4300 قرص مخدر بميناء بني انصار قادمة من فرنسا', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d8%a3%d9%85%d9%86-%d9%88%d8%a7%d9%84%d8%ac%d9%85%d8%a7%d8%b1%d9%83-%d9%8a%d8%ad%d8%a8%d8%b7%d8%a7%d9%86-%d8%aa%d9%87%d8%b1%d9%8a%d8%a8-%d8%a3%d8%b2%d9%8a%d8%af-%d9%85%d9%86-4300-%d9%82/', 'summary': 'الأمن والجمارك يحبطان تهريب أزيد من 4300 قرص مخدر بميناء بني انصار قادمة من فرنسا. أفاد مصدر أمي أن عناصر الأمن الوطني والجمارك بميناء بني انصار البحري بالناظور، تمكنت يوم الثلاثاء 08 يوليوز الجاري، من إحباط محاولة تهريب 4382 قرصا طبيا مخدرا إلى داخل التراب الوطني، كانت على متن سيارة نفعية لنقل البضائع تحمل لوحات ترقيم مغربية. وحسب ذات المصدر، كانت عمليات المراقبة والتفتيش التي أخضعت لها هذه …  الأمن والجمارك يحبطان تهريب أزيد من 4300 قرص مخدر بميناء بني انصار قادمة من فرنسا     .', 'size': 2}, {'id': '431', 'title': 'الناظور.. إحباط محاولة تهريب أزيد من 4 آلاف قرص مخدر', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/224383/', 'summary': 'الناظور.. إحباط محاولة تهريب أزيد من 4 آلاف قرص مخدر. كواليس اليوم تمكنت عناصر الأمن الوطني والجمارك بميناء بني انصار البحري بالناظور، أمس الثلاثاء، من إحباط محاولة تهريب 4382 قرصا طبيا مخدرا إلى داخل التراب الوطني، كانت على متن سيارة نفعية لنقل البضائع تحمل لوحات ترقيم مغربية. وكانت عمليات المراقبة والتفتيش التي أخضعت لها هذه الناقلة، مباشرة بعد وصولها إلى الميناء البحري بني انصار', 'size': 4}], 'main_title': 'جمارك الناظور تحبط محاولة تهريب 4382 قرصا طبيا مخدرا إلى داخل التراب الوطني'}, {'community_id': '5', 'articles': [{'id': '68', 'title': 'مجلس المستشارين يصادق بصفة نهائية على مشروع قانون المسطرة المدنية', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/203141', 'summary': 'مجلس المستشارين يصادق بصفة نهائية على مشروع قانون المسطرة المدنية.  صادق مجلس المستشارين، اليوم الثلاثاء 8 يوليوز 2025، في جلسة عامة، على مشروع قانون المسطرة المدنية، معلنًا بذلك عن استكمال المسار التشريعي لهذا النص القانوني الهام. وتأتي هذه المصادقة في إطار مسار إصلاحي شامل لمنظومة العدالة، تقوده وزارة العدل تحت التوجيهات السامية لصاحب الجلالة الملك محمد السادس نصره الله، ويهدف إلى تحديث الإطار القانوني', 'size': 3}, {'id': '125', 'title': 'صادق عليه مجلس المستشارين بالأغلبية.. أبرز مستجدات قانون التنظيم الإجباري عن المرض', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%b5%d8%a7%d8%af%d9%82-%d8%b9%d9%84%d9%8a%d9%87-%d9%85%d8%ac%d9%84%d8%b3-%d8%a7%d9%84%d9%85%d8%b3%d8%aa%d8%b4%d8%a7%d8%b1%d9%8a%d9%86-%d8%a8%d8%a7%d9%84%d8%a3%d8%ba%d9%84%d8%a8%d9%8a%d8%a9-%d8%a3/', 'summary': 'صادق عليه مجلس المستشارين بالأغلبية.. أبرز مستجدات قانون التنظيم الإجباري عن المرض. صادق مجلس المستشارين بالأغلبية على مشروع القانون رقم 54.23 القاضي بتغيير وتتميم القانون 65.00 المتعلق بالتأمين الإجباري الأساسي عن المرض. ويأتي القانون الذي تمت المصادقة عليه، أمس الثلاثاء (8 يوليوز) في جلسة عامة بمجلس المستشارين، في سياق تنزيل التوجيهات الملكية السامية لصاحب الجلالة الملك محمد السادس، الرامية إلى تعميم الحماية الاجتماعية، وتفعيلاً لمقتضيات القانون الإطار', 'size': 3}, {'id': '242', 'title': 'مجلس المستشارين يصادق على مشروع قانون التأمين الإجباري الأساسي عن المرض رقم 54.23', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d9%85%d8%ac%d9%84%d8%b3-%d8%a7%d9%84%d9%85%d8%b3%d8%aa%d8%b4%d8%a7%d8%b1%d9%8a%d9%86-%d9%8a%d8%b5%d8%a7%d8%af%d9%82-%d8%b9%d9%84%d9%89-%d9%85%d8%b4%d8%b1%d9%88%d8%b9-%d9%82%d8%a7%d9%86%d9%88%d9%86-11/', 'summary': 'مجلس المستشارين يصادق على مشروع قانون التأمين الإجباري الأساسي عن المرض رقم 54.23. أقرّ مجلس المستشارين، في جلسته العامة أمس الثلاثاء، مشروع القانون رقم 54.23 المتعلق بتعديل وتتميم القانون 65.00 بشأن التأمين الإجباري الأساسي عن المرض، وذلك بأغلبية أعضائه، في محطة تشريعية هامة تروم تعزيز حكامة نظام الحماية الاجتماعية بالمملكة.وجاء هذا النص، وفقا لبلاغ صحفي، في سياق تنزيل التوجيهات الملكية السامية للملك محمد السادس، الرامية إلى …  مجلس المستشارين يصادق على مشروع قانون التأمين الإجباري الأساسي عن المرض رقم 54.23     .', 'size': 3}], 'main_title': 'مجلس المستشارين يصادق بصفة نهائية على مشروع قانون المسطرة المدنية'}, {'community_id': '3', 'articles': [{'id': '70', 'title': 'الطالبي العلمي يترأس وفدا برلمانيا في اجتماعات الدورة 50 للجمعية البرلمانية للفرنكوفونية بباريس من 9 إلى 13 يوليوز الجاري', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/203133', 'summary': 'الطالبي العلمي يترأس وفدا برلمانيا في اجتماعات الدورة 50 للجمعية البرلمانية للفرنكوفونية بباريس من 9 إلى 13 يوليوز الجاري.  يترأس السيد راشيد الطالبي العلمي، رئيس مجلس النواب، وفدا برلمانيا يمثل مجلسي البرلمان المغربي، للمشاركة في أشغال الدورة 50 للجمعية البرلمانية للفرنكوفونية، التي ستقام بالعاصمة الفرنسية باريس خلال الفترة الممتدة من 9 إلى 13 يوليوز 2025. ويتضمن برنامج الدورة اجتماعات؛ مكتب الجمعية البرلمانية للفرنكوفونية؛ وشبكة النساء البرلمانيات، وشبكة الشباب البرلمانيين، وكذا اللجان الأربع أي', 'size': 5}, {'id': '190', 'title': 'العلمي يترأس وفدا برلمانيا للمشاركة في الدورة الـ50 للجمعية البرلمانية للفرنكوفونية', 'source': 'rue20.com', 'link': 'https://rue20.com/918978.html', 'summary': 'العلمي يترأس وفدا برلمانيا للمشاركة في الدورة الـ50 للجمعية البرلمانية للفرنكوفونية.  الرباط يترأس راشيد الطالبي العلمي، رئيس مجلس النواب، وفدا برلمانيا يمثل مجلسي البرلمان المغربي، للمشاركة في أشغال الدورة الـ50 للجمعية البرلمانية للفرنكوفونية، التي ستقام بالعاصمة الفرنسية باريس خلال الفترة الممتدة من 9 إلى 13 يوليوز الجاري. وذكر بلاغ لمجلس النواب أن برنامج الدورة يتضمن اجتماعات مكتب الجمعية البرلمانية للفرنكوفونية، وشبكة النساء البرلمانيات، وشبكة الشباب الخبر العلمي يترأس وفدا برلمانيا للمشاركة في الدورة الـ50 للجمعية البرلمانية للفرنكوفونية  .', 'size': 5}, {'id': '192', 'title': 'المغرب يشارك في الدورة 50 للجمعية البرلمانية للفرنكوفونية بباريس', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/468989.html', 'summary': 'المغرب يشارك في الدورة 50 للجمعية البرلمانية للفرنكوفونية بباريس. يترأس راشيد الطالبي العلمي، رئيس مجلس النواب، وفدا برلمانيا يمثل مجلسي البرلمان المغربي، للمشاركة في أشغال الدورة 50 للجمعية البرلمانية للفرنكوفونية، التي ستقام بالعاصمة الفرنسية باريس خلال الفترة الممتدة من 9 إلى 13 يوليوز 2025. ويتضمن برنامج الدورة اجتماعات؛ مكتب الجمعية البرلمانية للفرنكوفونية؛ وشبكة النساء البرلمانيات، وشبكة الشباب البرلمانيين، وكذا اللجان الأربع أي اللجنة السياسية …', 'size': 5}, {'id': '223', 'title': 'الطالبي العلمي يترأس وفدا برلمانيا في اجتماعات الدورة 50 للجمعية البرلمانية للفرنكوفونية بباريس', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/224367/', 'summary': 'الطالبي العلمي يترأس وفدا برلمانيا في اجتماعات الدورة 50 للجمعية البرلمانية للفرنكوفونية بباريس. كواليس اليوم يترأس راشيد الطالبي العلمي، رئيس مجلس النواب، وفدا برلمانيا يمثل مجلسي البرلمان المغربي، للمشاركة في أشغال الدورة 50 للجمعية البرلمانية للفرنكوفونية، التي ستقام بالعاصمة الفرنسية باريس خلال الفترة الممتدة من 9 إلى 13 يوليوز 2025. ويتضمن برنامج الدورة اجتماعات؛ مكتب الجمعية البرلمانية للفرنكوفونية؛ وشبكة النساء البرلمانيات، وشبكة الشباب البرلمانيين، وكذا اللجان الأربع أي', 'size': 5}, {'id': '237', 'title': 'الطالبي العلمي يترأس وفدا برلمانيا في أشغال الجمعية البرلمانية للفرنكوفونية', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%b1%d8%a6%d9%8a%d8%b3-%d9%85%d8%ac%d9%84%d8%b3-%d8%a7%d9%84%d9%86%d9%88%d8%a7%d8%a8-%d9%8a%d8%aa%d8%b1%d8%a3%d8%b3-%d9%88%d9%81%d8%af%d8%a7-%d8%a8%d8%b1%d9%84%d9%85%d8%a7%d9%86%d9%8a%d8%a7-%d9%81/', 'summary': 'الطالبي العلمي يترأس وفدا برلمانيا في أشغال الجمعية البرلمانية للفرنكوفونية. المساء اليوم: يترأس راشيد الطالبي العلمي، رئيس مجلس النواب، وفدا برلمانيا يمثل مجلسي البرلمان المغربي، للمشاركة في أشغال الدورة الـ50 للجمعية البرلمانية للفرنكوفونية، التي ستقام بالعاصمة الفرنسية باريس خلال الفترة الممتدة من 9 إلى 13', 'size': 5}], 'main_title': 'الطالبي العلمي يترأس وفدا برلمانيا في اجتماعات الدورة 50 للجمعية البرلمانية للفرنكوفونية بباريس من 9 إلى 13 يوليوز الجاري'}, {'community_id': '4', 'articles': [{'id': '95', 'title': 'رئيس الحكومة يترأس سلسلة اجتماعات لتتبع أجرأة خارطة طريق قطاع التشغيل', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/economy/408966.html', 'summary': 'رئيس الحكومة يترأس سلسلة اجتماعات لتتبع أجرأة خارطة طريق قطاع التشغيل. ترأس رئيس الحكومة عزيز أخنوش، يوم الثلاثاء 8 يوليوز 2025 بالرباط، سلسلة اجتماعات، خصصت لتتبع أجرأة خارطة طريق قطاع التشغيل، والوقوف على التقدم المحرز قطاعيا', 'size': 3}, {'id': '224', 'title': 'رئيس الحكومة أخنوش يترأس سلسلة اجتماعات لتتبع أجرأة خارطة طريق قطاع التشغيل', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/224358/', 'summary': 'رئيس الحكومة أخنوش يترأس سلسلة اجتماعات لتتبع أجرأة خارطة طريق قطاع التشغيل. ترأس رئيس الحكومة عزيز أخنوش، يوم الثلاثاء 8 يوليوز 2025 بالرباط، سلسلة اجتماعات، خصصت لتتبع أجرأة خارطة طريق قطاع التشغيل، والوقوف على التقدم المحرز قطاعيا في هذا الإطار، حيث قامت القطاعات المعنية بتقديم عروض حول برامج العمل الخاصة بها، مع الحرص على اعتماد نظام حكامة يضمن التقائية البرامج، وتنسيق تدخلات مختلف القطاعات، وإشراك القطاع الخاص', 'size': 3}, {'id': '234', 'title': 'رئيس الحكومة يترأس اجتماعات خاصة لتتبع خارطة طريق قطاع التشغيل', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%b1%d8%a6%d9%8a%d8%b3-%d8%a7%d9%84%d8%ad%d9%83%d9%88%d9%85%d8%a9-%d9%8a%d8%aa%d8%b1%d8%a3%d8%b3-%d8%a7%d8%ac%d8%aa%d9%85%d8%a7%d8%b9%d8%a7%d8%aa-%d8%ae%d8%a7%d8%b5%d8%a9-%d9%84%d8%aa%d8%aa%d8%a8/', 'summary': 'رئيس الحكومة يترأس اجتماعات خاصة لتتبع خارطة طريق قطاع التشغيل. المساء اليوم – الرباط: ترأس رئيس الحكومة، عزيز أخنوش، أمس الثلاثاء بالرباط، سلسلة اجتماعات خصصت لتتبع أجرأة خارطة طريق قطاع التشغيل، والوقوف على التقدم المحرز قطاعيا في هذا الإطار. وذكر بلاغ لرئاسة الحكومة أن القطاعات', 'size': 3}], 'main_title': 'رئيس الحكومة يترأس سلسلة اجتماعات لتتبع أجرأة خارطة طريق قطاع التشغيل'}, {'community_id': '1', 'articles': [{'id': '170', 'title': 'تحذير من أمطار عاصفية هذا الأربعاء', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%aa%d8%ad%d8%b0%d9%8a%d8%b1-%d9%85%d9%86-%d8%a3%d9%85%d8%b7%d8%a7%d8%b1-%d8%b9%d8%a7%d8%b5%d9%81%d9%8a%d8%a9-%d9%87%d8%b0%d8%a7-%d8%a7%d9%84%d8%a3%d8%b1%d8%a8%d8%b9%d8%a7%d8%a1/', 'summary': 'تحذير من أمطار عاصفية هذا الأربعاء. أفادت المديرية العامة للأرصاد الجوية بأنه من المرتقب، تسجيل زخات رعدية قوية (من 15 إلى 30 ملم) مصحوبة محليا بهبات رياح وتساقط البرد، اليوم الأربعاء، بعدد من مناطق المملكة. وأوضحت المديرية، في نشرة إنذارية من مستوى يقظة "برتقالي"، أن هذه الزخات الرعدية، ستهم عمالات وأقاليم تازة، وتاوريرت، وجرسيف، وجرادة، وإفران، وخنيفرة، وخريبكة، والفقيه بن صالح،  تحذير من أمطار عاصفية هذا الأربعاء     .', 'size': 5}, {'id': '241', 'title': 'نشرة إنذارية من المستوى البرتقالي: زخات رعدية قوية بعدد من مناطق المملكة', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d9%86%d8%b4%d8%b1%d8%a9-%d8%a5%d9%86%d8%b0%d8%a7%d8%b1%d9%8a%d8%a9-%d9%85%d9%86-%d8%a7%d9%84%d9%85%d8%b3%d8%aa%d9%88%d9%89-%d8%a7%d9%84%d8%a8%d8%b1%d8%aa%d9%82%d8%a7%d9%84%d9%8a-%d8%b2%d8%ae%d8%a7/', 'summary': 'نشرة إنذارية من المستوى البرتقالي: زخات رعدية قوية بعدد من مناطق المملكة. أفادت المديرية العامة للأرصاد الجوية، بأنه من المرتقب، تسجيل زخات رعدية قوية (من 15 إلى 30 ملم) مصحوبة محليا بهبات رياح وتساقط البرد، اليوم الأربعاء، بعدد من مناطق المملكة. وأوضحت المديرية، في نشرة إنذارية من مستوى يقظة “برتقالي”، أن هذه الزخات الرعدية، ستهم عمالات وأقاليم تازة، وتاوريرت، وجرسيف، وجرادة، وإفران، وخنيفرة، وخريبكة، والفقيه …  نشرة إنذارية من المستوى البرتقالي: زخات رعدية قوية بعدد من مناطق المملكة     .', 'size': 5}, {'id': '322', 'title': 'نشرة إنذارية: زخات رعدية قوية اليوم الأربعاء بهذه المناطق', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-638629.html', 'summary': 'نشرة إنذارية: زخات رعدية قوية اليوم الأربعاء بهذه المناطق. هبة بريس أفادت المديرية العامة للأرصاد الجوية بأنه من المرتقب، تسجيل زخات رعدية قوية (من 15 إلى 30 ملم) مصحوبة محليا بهبات رياح وتساقط البرد، اليوم الأربعاء، بعدد من مناطق المملكة. وأوضحت المديرية، في نشرة إنذارية من مستوى يقظة "برتقالي"، أن هذه الزخات الرعدية، ستهم عمالات وأقاليم تازة، وتاوريرت، وجرسيف، وجرادة، وإفران، وخنيفرة، وخريبكة، والفقيه بن صالح، وبني ملال، وأزيلال، اليوم الأربعاء من الثانية زوالا إلى العاشرة ليلا.', 'size': 5}, {'id': '405', 'title': 'نشرة إنذارية. زخات رعدية ورياح قوية بهذه المدن', 'source': 'rue20.com', 'link': 'https://rue20.com/919120.html', 'summary': 'نشرة إنذارية. زخات رعدية ورياح قوية بهذه المدن. . الرباط أفادت المديرية العامة للأرصاد الجوية بأنه من المرتقب، تسجيل زخات رعدية قوية (من 15 إلى 30 ملم) مصحوبة محليا بهبات رياح وتساقط البرد، اليوم الأربعاء، بعدد من مناطق المملكة. وأوضحت المديرية، في نشرة إنذارية من مستوى يقظة “برتقالي”، أن هذه الزخات الرعدية، ستهم عمالات وأقاليم تازة، وتاوريرت، وجرسيف، وجرادة، وإفران، وخنيفرة، وخريبكة، الخبر نشرة إنذارية. زخات رعدية ورياح قوية بهذه المدن  .', 'size': 5}, {'id': '430', 'title': 'نشرة إنذارية.. أمطار رعدية قوية مرتقبة في عدة مناطق', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/224386/', 'summary': 'نشرة إنذارية.. أمطار رعدية قوية مرتقبة في عدة مناطق. كواليس اليوم أفادت المديرية العامة للأرصاد الجوية بأنه من المرتقب، تسجيل زخات رعدية قوية (من 15 إلى 30 ملم) مصحوبة محليا بهبات رياح وتساقط البرد، اليوم الأربعاء، بعدد من مناطق المملكة. وأوضحت المديرية، في نشرة إنذارية من مستوى يقظة “برتقالي”، أن هذه الزخات الرعدية، ستهم عمالات وأقاليم تازة، وتاوريرت، وجرسيف، وجرادة، وإفران، وخنيفرة، وخريبكة،', 'size': 5}], 'main_title': 'تحذير من أمطار عاصفية هذا الأربعاء'}, {'community_id': '9', 'articles': [{'id': '175', 'title': 'طقس حار مع زخات رعدية متوقعة اليوم الأربعاء', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%b7%d9%82%d8%b3-%d8%ad%d8%a7%d8%b1-%d9%85%d8%b9-%d8%b2%d8%ae%d8%a7%d8%aa-%d8%b1%d8%b9%d8%af%d9%8a%d8%a9-%d9%85%d8%aa%d9%88%d9%82%d8%b9%d8%a9-%d8%a7%d9%84%d9%8a%d9%88%d9%85-%d8%a7%d9%84%d8%a3-3/', 'summary': 'طقس حار مع زخات رعدية متوقعة اليوم الأربعاء. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الأربعاء، أن يبقى الطقس حارا نسبيا إلى محلي حارا بكل من سهول تادلة، والرحامنة، وهضاب الفوسفاط، وجنوب الريف، والمنطقة الشرقية والجنوب الشرقي للبلاد، وكذا داخل الأقاليم الصحراوية. كما يرتقب نزول قطرات مطرية أو زخات رعدية مصحوبة بهبات رياح قوية نوعا ما تحت الرعد واحتمال برد محليا فوق كل  طقس حار مع زخات رعدية متوقعة اليوم الأربعاء     .', 'size': 3}, {'id': '179', 'title': 'توقعات أحوال الطقس لليوم الأربعاء', 'source': 'soltana.ma', 'link': 'https://soltana.ma/1357556.html', 'summary': 'توقعات أحوال الطقس لليوم الأربعاء. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليومه الأربعاء، أن يبقى الطقس حارا نسبيا إلى محلي حارا بكل من سهول تادلة، والرحامنة، وهضاب الفوسفاط، وجنوب الريف، والمنطقة الشرقية والجنوب الشرقي للبلاد، وكذا داخل الأقاليم الصحراوية. كما يرتقب نزول قطرات مطرية أو زخات رعدية مصحوبة بهبات رياح قوية نوعا ما تحت الرعد واحتمال برد محليا فوق كل', 'size': 3}, {'id': '247', 'title': 'توقعات أحوال الطقس اليوم الأربعاء', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%aa%d9%88%d9%82%d8%b9%d8%a7%d8%aa-%d8%a3%d8%ad%d9%88%d8%a7%d9%84-%d8%a7%d9%84%d8%b7%d9%82%d8%b3-%d8%a7%d9%84%d9%8a%d9%88%d9%85-%d8%a7%d9%84%d8%a3%d8%b1%d8%a8%d8%b9%d8%a7%d8%a1-27/', 'summary': 'توقعات أحوال الطقس اليوم الأربعاء. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليومه الأربعاء، أن يبقى الطقس حارا نسبيا إلى محلي حارا بكل من سهول تادلة، والرحامنة، وهضاب الفوسفاط، وجنوب الريف، والمنطقة الشرقية والجنوب الشرقي للبلاد، وكذا داخل الأقاليم الصحراوية. كما يرتقب نزول قطرات مطرية أو زخات رعدية مصحوبة بهبات رياح قوية نوعا ما تحت الرعد واحتمال برد محليا …  توقعات أحوال الطقس اليوم الأربعاء     .', 'size': 3}], 'main_title': 'طقس حار مع زخات رعدية متوقعة اليوم الأربعاء'}, {'community_id': '2', 'articles': [{'id': '333', 'title': 'تاونات: نزار بركة يعطي انطلاقة أشغال إنجاز الشطر الثالث من الطريق السريع فاس تاونات', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/203157', 'summary': 'تاونات: نزار بركة يعطي انطلاقة أشغال إنجاز الشطر الثالث من الطريق السريع فاس تاونات. الأحداث/ و.م.ع أعطى وزير التجهيز والماء، نزار بركة، الثلاثاء، انطلاقة أشغال إنجاز الشطر الثالث من الطريق السريع فاس تاونات، بكلفة إجمالية تصل إلى 324 مليون درهم. ويربط هذا المقطع الطرقي، الذي يقع على طول 19 كلم، بين الطريق الإقليمية رقم 5319 ومدخل جماعة عين قنصرة. وتم إعطاء انطلاقة هذه الأشغال على هامش زيارة عمل قام', 'size': 2}, {'id': '403', 'title': 'نزار بركة يعطي إنطلاقة إنجاز الشطر الثالث من الطريق السريع فاس تاونات', 'source': 'rue20.com', 'link': 'https://rue20.com/919127.html', 'summary': 'نزار بركة يعطي إنطلاقة إنجاز الشطر الثالث من الطريق السريع فاس تاونات. . الرباط أعطى وزير التجهيز والماء، نزار بركة، الثلاثاء، انطلاقة أشغال إنجاز الشطر الثالث من الطريق السريع فاس تاونات، بكلفة إجمالية تصل إلى 324 مليون درهم. ويربط هذا المقطع الطرقي، الذي يقع على طول 19 كلم، بين الطريق الإقليمية رقم 5319 ومدخل جماعة عين قنصرة. وتم إعطاء انطلاقة هذه الأشغال على هامش زيارة عمل الخبر نزار بركة يعطي إنطلاقة إنجاز الشطر الثالث من الطريق السريع فاس تاونات  .', 'size': 2}], 'main_title': 'تاونات: نزار بركة يعطي انطلاقة أشغال إنجاز الشطر الثالث من الطريق السريع فاس تاونات'}, {'community_id': '6', 'articles': [{'id': '354', 'title': 'تضمن”ادعاءات” حول تعريض سجين لسوء المعاملة.. إدارة سجن البركي ترد على فيديو منشور على يوتيوب', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%aa%d8%b6%d9%85%d9%86%d8%a7%d8%af%d8%b9%d8%a7%d8%a1%d8%a7%d8%aa-%d8%ad%d9%88%d9%84-%d8%aa%d8%b9%d8%b1%d9%8a%d8%b6-%d8%b3%d8%ac%d9%8a%d9%86-%d9%84%d8%b3%d9%88%d8%a1-%d8%a7%d9%84%d9%85%d8%b9/', 'summary': 'تضمن”ادعاءات” حول تعريض سجين لسوء المعاملة.. إدارة سجن البركي ترد على فيديو منشور على يوتيوب. ردت إدارة “السجن المركزي مول البركي” على الادعاءات الواردة في مقطع فيديو منشور بإحدى القنوات على موقع “يوتيوب”، حول “تعرض سجين لسوء المعاملة” داخل السجن المذكور، بما في ذلك التمييز في استعمال الهاتف وحرمانه من التطبيب”. وأكدت إدارة المؤسسة السجنية، في بلاغ لها، أن ما ورد في الفيديو من ادعاءات “لا أساس لها من الصحة”،', 'size': 2}, {'id': '434', 'title': 'إدارة سجن مول البركي تنفي تعرض سجين لسوء المعاملة', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/224377/', 'summary': 'إدارة سجن مول البركي تنفي تعرض سجين لسوء المعاملة. ردا على الادعاءات الواردة في مقطع فيديو منشور بإحدى القنوات على موقع “يوتوب”، حول “تعرض سجين لسوء المعاملة داخل السجن المركزي مول البركي، بما في ذلك التمييز في استعمال الهاتف وحرمانه من التطبيب”، تتقدم إدارة هذه المؤسسة إلى الرأي العام بالتوضيحات التالية: إن ما ورد في الفيديو من ادعاءات لا أساس له من الصحة، إذ', 'size': 2}], 'main_title': 'تضمن”ادعاءات” حول تعريض سجين لسوء المعاملة.. إدارة سجن البركي ترد على فيديو منشور على يوتيوب'}, {'community_id': '7', 'articles': [{'id': '388', 'title': 'تعديلات جديدة تمكن الصحافي من حقوق المؤلف وتشدد الخناق على منتحلي الصفة', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1084205.html', 'summary': 'تعديلات جديدة تمكن الصحافي من حقوق المؤلف وتشدد الخناق على منتحلي الصفة. تضمن مشروع تعديل القانون رقم 89.13 المتعلق بالنظام الأساسي للصحافيين المهنيين، مجموعة من المستجدات، من ضمنها تعزيزحماية حقوق المؤلف والحقوق المجاورة للصحافيين المهنيين، وتشديد الخناق على منتحلي صفة صحافي. وكشف وزير الشباب والثقافة والتواصل، محمد المهدي بنسعيد، اليوم الأربعاء أمام لجنة التعليم والثقافة والاتصال بمجلس النواب، أن مشروع القانون رقم 027.25 القاضي بتعديل القانون 89.13 ظهرت المقالة تعديلات جديدة تمكن الصحافي من حقوق المؤلف وتشدد الخناق على منتحلي الصفة  .', 'size': 2}, {'id': '414', 'title': 'بنسعيد: التحولات العميقة في قطاع الصحافة والإعلام تتطلب تحيين الإطار التشريعي المنظم للمهنة', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/469014.html', 'summary': 'بنسعيد: التحولات العميقة في قطاع الصحافة والإعلام تتطلب تحيين الإطار التشريعي المنظم للمهنة. أكد وزير الثقافة والشباب والتواصل، محمد المهدي بنسعيد، اليوم الأربعاء بمجلس النواب، أن التحولات العميقة التي يشهدها قطاع الصحافة والإعلام أفرزت الحاجة إلى تحيين الإطار التشريعي المنظم لمهنة الصحافة، ضمانا لملاءمته مع متطلبات الواقع الجديد، وتحصينا لمبادئ حرية الصحافة في إطار احترام القانون وأخلاقيات المهنة. وأوضح بنسعيد، خلال تقديم مشروع القانون المتعلق بالنظام الأساسي للصحفيين …', 'size': 2}, {'id': '446', 'title': 'بنسعيد: التحولات التي يشهدها قطاع الصحافة أفرزت الحاجة إلى تحيين الإطار التشريعي المنظم لمهنة الصحافة', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a8%d9%86%d8%b3%d8%b9%d9%8a%d8%af-%d8%a7%d9%84%d8%aa%d8%ad%d9%88%d9%84%d8%a7%d8%aa-%d8%a7%d9%84%d8%aa%d9%8a-%d9%8a%d8%b4%d9%87%d8%af%d9%87%d8%a7-%d9%82%d8%b7%d8%a7%d8%b9-%d8%a7%d9%84%d8%b5%d8%ad/', 'summary': 'بنسعيد: التحولات التي يشهدها قطاع الصحافة أفرزت الحاجة إلى تحيين الإطار التشريعي المنظم لمهنة الصحافة. أكد وزير الثقافة والشباب والتواصل، محمد المهدي بنسعيد، اليوم الأربعاء بمجلس النواب، أن التحولات العميقة التي يشهدها قطاع الصحافة والإعلام أفرزت الحاجة إلى تحيين الإطار التشريعي المنظم لمهنة الصحافة، ضمانا لملاءمته مع متطلبات الواقع الجديد، وتحصينا لمبادئ حرية الصحافة في إطار احترام القانون وأخلاقيات المهنة. وأوضح بنسعيد، خلال تقديم مشروع القانون المتعلق بالنظام الأساسي للصحفيين …  بنسعيد: التحولات التي يشهدها قطاع الصحافة أفرزت الحاجة إلى تحيين الإطار التشريعي المنظم لمهنة الصحافة     .', 'size': 3}], 'main_title': 'بنسعيد: التحولات التي يشهدها قطاع الصحافة أفرزت الحاجة إلى تحيين الإطار التشريعي المنظم لمهنة الصحافة'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    