<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 18/07/2025 - 18h33</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '10', 'articles': [{'id': '15', 'title': 'الCNSS يمدد آجال التصريح والأداء عبر بوابة “ضمانكم” برسم شهر يونيو', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-641586.html', 'summary': 'الCNSS يمدد آجال التصريح والأداء عبر بوابة “ضمانكم” برسم شهر يونيو. هبة بريس في إطار استراتيجيته لتعزيز أمن الولوج إلى منصاته الرقمية، أعلن الصندوق الوطني للضمان الاجتماعي عن اعتماد نظام جديد للمصادقة الثنائية (MFA) على مستوى بوابة "ضمانكم". ويتيح هذا النظام لمستعملي البوابة اختيار إحدى وسيلتين للمصادقة: الهوية الرقمية (e-ID) التي طورتها المديرية العامة للأمن الوطني، والتي تعتمد على البطاقة الوطنية للتعريف الإلكترونية (CNIE)؛ أو رمز التحقق المؤقت (OTP) المرسل عبر رسالة نصية قصيرة أو البريد الإلكتروني، لتسهيل الولوج الآمن للمستخدمين غير المتوفرين على الهوية الرقمية. وفي إطار مواكبة المرحلة الانتقالية وتفادياً لأي صعوبات قد تواجه المنخرطين، قام الصندوق بتمديد آجال التصريح والأداء عبر بوابة "ضمانكم" برسم شهر يونيو 2025 إلى غاية 17 يوليوز 2025. وقد تمكن إلى حدود هذا التاريخ 294.141 منخرطاً من استكمال إجراءاتهم بنجاح، وهو ما يمثل حوالي %79 من مجموع المنخرطين المعنيين. ولتمكين باقي المنخرطين من تسوية وضعيتهم دون فرض أي غرامات تأخير، منح الصندوق مهلة استثنائية جديدة تمتد إلى منتصف ليلة 21 يوليوز 2025.', 'size': 2}, {'id': '385', 'title': '"CNSS" يمدد آجال التصريح والأداء عبر بوابة "ضمانكم"', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/cnss-%d9%8a%d9%85%d8%af%d8%af-%d8%a2%d8%ac%d8%a7%d9%84-%d8%a7%d9%84%d8%aa%d8%b5%d8%b1%d9%8a%d8%ad-%d9%88%d8%a7%d9%84%d8%a3%d8%af%d8%a7%d8%a1-%d8%b9%d8%a8%d8%b1-%d8%a8%d9%88%d8%a7%d8%a8%d8%a9/', 'summary': '"CNSS" يمدد آجال التصريح والأداء عبر بوابة "ضمانكم". أقر الصندوق الوطني للضمان الاجتماعي تمديدا استثنائيا جديدا لأجل التصريح والأداء عبر بوابة "ضمانكم" برسم شهر يونيو 2025، وذلك إلى غاية منتصف ليلة 21 يوليوز 2025، حرصا على تمكين المنخرطين من تسوية وضعيتهم دون تحميلهم غرامات تأخير. وأكد الصندوق، في بلاغ له، أن هذا القرار يندرج ضمن تسهيل الانتقال التقني إلى نظام المصادقة الثنائي (MFA)،  "CNSS" يمدد آجال التصريح والأداء عبر بوابة "ضمانكم"     .', 'size': 3}, {'id': '409', 'title': 'ال”CNSS” يمدد آجال التصريح بالأجراء في بوابة “ضمانكم”', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/224869/', 'summary': 'ال”CNSS” يمدد آجال التصريح بالأجراء في بوابة “ضمانكم”. كواليس اليوم أعلن الصندوق الوطني للضمان الاجتماعي عن اعتماد نظام جديد للمصادقة الثنائية (MFA) على مستوى بوابة “ضمانكم”. وأوضح الصندوق في بلاغ له، أن هذا النظام يتيح لمستعملي البوابة اختيار إحدى وسيلتين للمصادقة الهوية الرقمية (e-ID) التي طورتها المديرية العامة للأمن الوطني، والتي تعتمد على البطاقة الوطنية للتعريف الإلكترونية (CNIE)؛ أو رمز التحقق المؤقت', 'size': 3}, {'id': '413', 'title': 'الـ”CNSS” يمدد آجال التصريح والأداء عبر بوابة “ضمانكم”', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d9%80cnss-%d9%8a%d9%85%d8%af%d8%af-%d8%a2%d8%ac%d8%a7%d9%84-%d8%a7%d9%84%d8%aa%d8%b5%d8%b1%d9%8a%d8%ad-%d9%88%d8%a7%d9%84%d8%a3%d8%af%d8%a7%d8%a1-%d8%b9%d8%a8%d8%b1-%d8%a8%d9%88%d8%a7/', 'summary': 'الـ”CNSS” يمدد آجال التصريح والأداء عبر بوابة “ضمانكم”. أقر الصندوق الوطني للضمان الاجتماعي تمديدا استثنائيا جديدا لأجل التصريح والأداء عبر بوابة “ضمانكم” برسم شهر يونيو 2025، وذلك إلى غاية منتصف ليلة 21 يوليوز 2025، حرصا على تمكين المنخرطين من تسوية وضعيتهم دون تحميلهم غرامات تأخير. وأكد الصندوق، في بلاغ له، أن هذا القرار يندرج ضمن تسهيل الانتقال التقني إلى نظام المصادقة …  الـ”CNSS” يمدد آجال التصريح والأداء عبر بوابة “ضمانكم”     .', 'size': 2}], 'main_title': '"CNSS" يمدد آجال التصريح والأداء عبر بوابة "ضمانكم"'}, {'community_id': '1', 'articles': [{'id': '62', 'title': 'البريد بنك وبريد كاش يطلقان “بريد بايمنت موبيل” لتسهيل رقمنة وسائل الدفع', 'source': 'www.alakhbar.press.ma', 'link': 'https://www.alakhbar.press.ma/%d8%a7%d9%84%d8%a8%d8%b1%d9%8a%d8%af-%d8%a8%d9%86%d9%83-%d9%88%d8%a8%d8%b1%d9%8a%d8%af-%d9%83%d8%a7%d8%b4-%d9%8a%d8%b7%d9%84%d9%82%d8%a7%d9%86-%d8%a8%d8%b1%d9%8a%d8%af-%d8%a8%d8%a7%d9%8a%d9%85%d9%86-269331.html', 'summary': 'البريد بنك وبريد كاش يطلقان “بريد بايمنت موبيل” لتسهيل رقمنة وسائل الدفع. أطلقت البريد بنك وبريد كاش رسميا الحل التكنولوجي الجديد “بريد بايمنت موبيل”، ليصبحا بذلك أول مجموعة بنكية تقدم هذا الابتكار في المغرب، إذ يحول الهاتف الذكي إلى جهاز دفع إلكتروني آمن دون الحاجة إلى أي معدات إضافية. ويهدف هذا الحل إلى تسهيل قبول الأداءات الإلكترونية بواسطة البطاقات البنكية لدى التجار، خاصة الصغار منهم والحرفيين، …  البريد بنك وبريد كاش يطلقان “بريد بايمنت موبيل” لتسهيل رقمنة وسائل الدفع     .', 'size': 2}, {'id': '127', 'title': 'البريد بنك وبريد كاش يطلقان “بريد بايمنت موبيل”', 'source': 'assabah.ma', 'link': 'https://assabah.ma/860219.html', 'summary': 'البريد بنك وبريد كاش يطلقان “بريد بايمنت موبيل”. أطلقت البريد بنك وبريد كاش رسميا الحل التكنولوجي الجديد “بريد بايمنت موبيل”، ليصبحا بذلك أول مجموعة بنكية تقدم هذا الابتكار في المغرب، إذ يحول الهاتف الذكي إلى جهاز دفع إلكتروني آمن دون الحاجة إلى أي معدات إضافية. ويهدف هذا الحل إلى تسهيل قبول الأداءات الإلكترونية بواسطة البطاقاتأكمل القراءة » المقالة البريد بنك وبريد كاش يطلقان “بريد بايمنت موبيل”  .', 'size': 2}], 'main_title': 'البريد بنك وبريد كاش يطلقان “بريد بايمنت موبيل” لتسهيل رقمنة وسائل الدفع'}, {'community_id': '2', 'articles': [{'id': '70', 'title': 'الرباط: قيادة حزب الأصالة والمعاصرة تستقبل الرئيس السابق لجنوب إفريقيا وزعيم حزب“أومكونتو وي سيزوي”', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/203631', 'summary': 'الرباط: قيادة حزب الأصالة والمعاصرة تستقبل الرئيس السابق لجنوب إفريقيا وزعيم حزب“أومكونتو وي سيزوي”.  إستقبلت القيادة الجماعية لحزب الأصالة والمعاصرة، اليوم الخميس بمقر الحزب بالرباط، الرئيس السابق لجنوب إفريقيا وزعيم حزب “أومكونتو وي سيزوي”، جاكوب زوما. وتباحثت السيدة فاطمة الزهراء المنصوري،منسقة القيادة الجماعية لحزب الأصالة والمعاصرة،التي تضم أيضا كل من، السيد محمد المهدي بنسعيد،والسيدة فاطمة السعدي،مع السيد زوما،بالخصوص، حول آفاق تقوية التعاون والشراكة بين الحزبين والبلدين في', 'size': 2}, {'id': '77', 'title': 'قيادة "البام" تستقبل الرئيس السابق لجنوب إفريقيا وزعيم حزب "أومكونتو وي سيزوي" جاكوب زوما', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/politic/409467.html', 'summary': 'قيادة "البام" تستقبل الرئيس السابق لجنوب إفريقيا وزعيم حزب "أومكونتو وي سيزوي" جاكوب زوما. استقبلت القيادة الجماعية لحزب الأصالة والمعاصرة، اليوم الخميس بالرباط، الرئيس السابق لجنوب إفريقيا وزعيم حزب "أومكونتو وي سيزوي"، جاكوب زوما. وتباحثت فاطمة الزهراء المنصوري، منسقة القيادة', 'size': 2}], 'main_title': 'الرباط: قيادة حزب الأصالة والمعاصرة تستقبل الرئيس السابق لجنوب إفريقيا وزعيم حزب“أومكونتو وي سيزوي”'}, {'community_id': '3', 'articles': [{'id': '79', 'title': 'إقليم زاكورة يستعد لاحتضان الدورة الرابعة للملتقى السنوي للجالية المغربية بالخارج', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/culture/409469.html', 'summary': 'إقليم زاكورة يستعد لاحتضان الدورة الرابعة للملتقى السنوي للجالية المغربية بالخارج. تستعد جماعة أيت ولال بإقليم زاكورة لاحتضان فعاليات الدورة الرابعة للملتقى السنوي للجالية المغربية المقيمة بالخارج، الذي تنظمه جمعية زاكورة للمهاجر، خلال الفترة من 25', 'size': 2}, {'id': '256', 'title': 'إقليم زاكورة يستعد لاحتضان الدورة الـ4 للملتقى السنوي للجالية المغربية بالخارج', 'source': 'www.alalam.ma', 'link': 'https://www.alalam.ma/إقليم-زاكورة-يستعد-لاحتضان-الدورة-الـ4-للملتقى-السنوي-للجالية_a28737.html', 'summary': 'إقليم زاكورة يستعد لاحتضان الدورة الـ4 للملتقى السنوي للجالية المغربية بالخارج. *العلم الإلكترونية* تستعد جماعة أيت ولال بإقليم زاكورة لاحتضان فعاليات الدورة الرابعة للملتقى السنوي للجالي...', 'size': 2}], 'main_title': 'إقليم زاكورة يستعد لاحتضان الدورة الرابعة للملتقى السنوي للجالية المغربية بالخارج'}, {'community_id': '4', 'articles': [{'id': '123', 'title': 'إنفانتينو ينعي أسطورة الكرة المغربية أحمد فرس: كان رمزا للمنتخب الوطني وإفريقيا', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a5%d9%86%d9%81%d8%a7%d9%86%d8%aa%d9%8a%d9%86%d9%88-%d9%8a%d9%86%d8%b9%d9%8a-%d8%a3%d8%b3%d8%b7%d9%88%d8%b1%d8%a9-%d8%a7%d9%84%d9%83%d8%b1%d8%a9-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8%d9%8a%d8%a9/', 'summary': 'إنفانتينو ينعي أسطورة الكرة المغربية أحمد فرس: كان رمزا للمنتخب الوطني وإفريقيا. عبّر جياني إنفانتينو، رئيس الاتحاد الدولي لكرة القدم (فيفا)، عن حزنه العميق إثر وفاة أسطورة الكرة المغربية أحمد فرس. ونشر إنفانتينو تدوينة مؤثرة على حسابه الرسمي عبر “إنستغرام”، أشاد فيها بمسيرة اللاعب وأخلاقه، وقدم تعازيه لأسرة الراحل ولعائلة كرة القدم المغربية والأفريقية. وقال إنفانتينو: “لقد بلغني ببالغ الحزن نبأ وفاة اللاعب المغربي أحمد فرس. الهداف', 'size': 2}, {'id': '244', 'title': 'رئيس الفيفا ينعي بأسى وفاة أسطورة الكرة المغربية الراحل أحمد فرس', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%b1%d8%a6%d9%8a%d8%b3-%d8%a7%d9%84%d9%81%d9%8a%d9%81%d8%a7-%d9%8a%d9%86%d8%b9%d9%8a-%d8%a8%d8%a3%d8%b3%d9%89-%d9%88%d9%81%d8%a7%d8%a9-%d8%a3%d8%b3%d8%b7%d9%88%d8%b1%d8%a9-%d8%a7%d9%84%d9%83%d8%b1/', 'summary': 'رئيس الفيفا ينعي بأسى وفاة أسطورة الكرة المغربية الراحل أحمد فرس. نعى جياني إنفانتينو، رئيس الاتحاد الدولي لكرة القدم، وفاة أحمد فرس، أسطورة الكرة المغربية، الذي وافته المنية يوم أمس الأربعاء. وقال إنفانتينو، في منشور على حسابه على “إنستغرام” يومه الخميس، “ببالغ الحزن والأسى تلقيتُ نبأ وفاة اللاعب المغربي أحمد فراس، الهداف التاريخي لمنتخب بلاده، وأفضل هداف في تاريخ منتخبه، حصل على لقب أفضل لاعب …  رئيس الفيفا ينعي بأسى وفاة أسطورة الكرة المغربية الراحل أحمد فرس     .', 'size': 2}], 'main_title': 'إنفانتينو ينعي أسطورة الكرة المغربية أحمد فرس: كان رمزا للمنتخب الوطني وإفريقيا'}, {'community_id': '5', 'articles': [{'id': '135', 'title': '254 اعتداء من مختلين', 'source': 'assabah.ma', 'link': 'https://assabah.ma/859952.html', 'summary': '254 اعتداء من مختلين. كشف عبد الوافي لفتيت، وزير الداخلية، أن مرتكب جريمة قتل بواسطة حجر بتارودانت، سبق للسلطات المحلية إحالته على مصالح الأمراض العقلية بالمركز الاستشفائي الإقليمي المختار السوسي، في ماي الماضي. وأوضح وزير الداخلية في معرض جوابه عن سؤال كتابي للنائبة البرلمانية خديجة أورهال عن فريق التقدم والاشتراكية، التيأكمل القراءة » المقالة 254 اعتداء من مختلين  .', 'size': 2}, {'id': '171', 'title': 'جرائم المختلين عقليا.. لفتيت: تسجيل 475 قضية وتوقيف 435 في 2024', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%ac%d8%b1%d8%a7%d8%a6%d9%85-%d8%a7%d9%84%d9%85%d8%ae%d8%aa%d9%84%d9%8a%d9%86-%d8%b9%d9%82%d9%84%d9%8a%d8%a7-%d9%84%d9%81%d8%aa%d9%8a%d8%aa-%d8%aa%d8%b3%d8%ac%d9%8a%d9%84-475-%d9%82%d8%b6%d9%8a/', 'summary': 'جرائم المختلين عقليا.. لفتيت: تسجيل 475 قضية وتوقيف 435 في 2024. بلغ عدد القضايا المسجلة من طرف مصالح الأمن الوطني خلال سنة 2024، والمرتبطة بأفعال إجرامية ارتكبها مختلون عقليون في الفضاء العام، 475 قضية، تم بموجبها إيقاف 435 شخصا، بحسب ما أفاد به وزير الداخلية، عبد الوافي لفتيت. وأوضح الوزير، في جوابه عن سؤال كتابي بمجلس النواب وجهته إليه النائبة خديجة أورهال، عضو فريق التقدم والاشتراكية،  جرائم المختلين عقليا.. لفتيت: تسجيل 475 قضية وتوقيف 435 في 2024     .', 'size': 2}], 'main_title': '254 اعتداء من مختلين'}, {'community_id': '6', 'articles': [{'id': '146', 'title': 'توقعات طقس اليوم الجمعة بالبلاد', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/318613/', 'summary': 'توقعات طقس اليوم الجمعة بالبلاد. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لبيوم الجمعة، أن يستمر الطقس الحار بكل من سهول تادلة، وداخل منطقة سوس، والجنوب الشرقي للبلاد و كذا بداخل الأقاليم الصحراوية للمملكة. كما يرتقب تشكل ضباب محلي فوق السواحل الشمالية، فضلا عن نزول قطرات مطرية مصحوبة برعد فوق أقصى جنوب المملكة. وسيلاحظ تسجيل هبات رياح قوية نوعا ما بكل', 'size': 2}, {'id': '219', 'title': 'طقس الجمعة.. حار مصحوب بقطرات مطرية في بعض المناطق', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/224857/', 'summary': 'طقس الجمعة.. حار مصحوب بقطرات مطرية في بعض المناطق. كواليس اليوم تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الجمعة، أن يستمر الطقس الحار بكل من سهول تادلة، وداخل منطقة سوس، والجنوب الشرقي للبلاد و كذا بداخل الأقاليم الصحراوية للمملكة. كما يرتقب تشكل ضباب محلي فوق السواحل الشمالية، فضلا عن نزول قطرات مطرية مصحوبة برعد فوق أقصى جنوب المملكة. وسيلاحظ تسجيل هبات رياح قوية', 'size': 2}], 'main_title': 'توقعات طقس اليوم الجمعة بالبلاد'}, {'community_id': '7', 'articles': [{'id': '188', 'title': 'رئيس مجلس الشيوخ الكولومبي.. المشاريع الكبرى المنجزة تحت قيادة الملك غيرت بعمق صورة المغرب إقليميا ودوليا', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/469921.html', 'summary': 'رئيس مجلس الشيوخ الكولومبي.. المشاريع الكبرى المنجزة تحت قيادة الملك غيرت بعمق صورة المغرب إقليميا ودوليا. أكد رئيس مجلس الشيوخ الكولومبي، إيفراين سيبيدا، أن المشاريع الكبرى للبنى التحتية المنجزة، تحت قيادة الملك محمد السادس، خلال العقدين الأخيريين، أحدثت تحولا عميقا في صورة المغرب، إن على الصعيد الإقليمي أو الدولي.', 'size': 4}, {'id': '218', 'title': 'المشاريع الكبرى المنجزة تحت قيادة جلالة الملك غيرت بعمق صورة المغرب إقليميا ودوليا', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/224860/', 'summary': 'المشاريع الكبرى المنجزة تحت قيادة جلالة الملك غيرت بعمق صورة المغرب إقليميا ودوليا. و م ع أكد رئيس مجلس الشيوخ الكولومبي، إيفراين سيبيدا، أن المشاريع الكبرى للبنى التحتية المنجزة، تحت قيادة صاحب الجلالة الملك محمد السادس، خلال العقدين الأخيريين، أحدثت تحولا عميقا في صورة المغرب، إن على الصعيد الإقليمي أو الدولي. وقال سيبيدا الذي قام مؤخرا بزيارة للمغرب، في تصريح لوكالة المغرب العربي للأنباء، بمناسبة الاحتفال بعيد', 'size': 4}, {'id': '348', 'title': 'رئيس مجلس الشيوخ الكولومبي: المشاريع الكبرى المنجزة تحت قيادة جلالة الملك غيرت صورة المغرب إقليميا ودوليا', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%b1%d8%a6%d9%8a%d8%b3-%d9%85%d8%ac%d9%84%d8%b3-%d8%a7%d9%84%d8%b4%d9%8a%d9%88%d8%ae-%d8%a7%d9%84%d9%83%d9%88%d9%84%d9%88%d9%85%d8%a8%d9%8a-%d8%a7%d9%84%d9%85%d8%b4%d8%a7%d8%b1%d9%8a%d8%b9-%d8%a7/', 'summary': 'رئيس مجلس الشيوخ الكولومبي: المشاريع الكبرى المنجزة تحت قيادة جلالة الملك غيرت صورة المغرب إقليميا ودوليا. أكد رئيس مجلس الشيوخ الكولومبي، إيفراين سيبيدا، أن المشاريع الكبرى للبنى التحتية المنجزة، تحت قيادة صاحب الجلالة الملك محمد السادس، خلال العقدين الأخيريين، أحدثت تحولا عميقا في صورة المغرب، إن على الصعيد الإقليمي أو الدولي. وقال السيد سيبيدا الذي قام مؤخرا بزيارة للمغرب، في تصريح لوكالة المغرب العربي للأنباء، بمناسبة الاحتفال بعيد العرش المجيد، إنه', 'size': 4}, {'id': '412', 'title': 'رئيس مجلس الشيوخ الكولومبي: المشاريع الكبرى المنجزة تحت قيادة الملك محمد السادس غيرت بعمق صورة المغرب إقليميا ودوليا', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%b1%d8%a6%d9%8a%d8%b3-%d9%85%d8%ac%d9%84%d8%b3-%d8%a7%d9%84%d8%b4%d9%8a%d9%88%d8%ae-%d8%a7%d9%84%d9%83%d9%88%d9%84%d9%88%d9%85%d8%a8%d9%8a-%d8%a7%d9%84%d9%85%d8%b4%d8%a7%d8%b1%d9%8a%d8%b9-%d8%a7/', 'summary': 'رئيس مجلس الشيوخ الكولومبي: المشاريع الكبرى المنجزة تحت قيادة الملك محمد السادس غيرت بعمق صورة المغرب إقليميا ودوليا. شدد رئيس مجلس الشيوخ الكولومبي، إيفراين سيبيدا، على أن المشاريع الكبرى للبنى التحتية المنجزة، تحت قيادة الملك محمد السادس، خلال العقدين الأخيريين، أحدثت تحولا عميقا في صورة المغرب، على الصعيد الإقليمي أو الدولي. وأضاف سيبيدا الذي قام مؤخرا بزيارة للمغرب، في تصريح لوكالة المغرب العربي للأنباء، بمناسبة الاحتفال بعيد العرش المجيد، أنه عاين …  رئيس مجلس الشيوخ الكولومبي: المشاريع الكبرى المنجزة تحت قيادة الملك محمد السادس غيرت بعمق صورة المغرب إقليميا ودوليا     .', 'size': 4}], 'main_title': 'رئيس مجلس الشيوخ الكولومبي.. المشاريع الكبرى المنجزة تحت قيادة الملك غيرت بعمق صورة المغرب إقليميا ودوليا'}, {'community_id': '8', 'articles': [{'id': '195', 'title': '6 حكام مغاربة ضمن الطاقم التحكيمي المعتمد لبطولة إفريقيا للمحليين 2024', 'source': 'machahid24.com', 'link': 'https://machahid24.com/sport/469869.html', 'summary': '6 حكام مغاربة ضمن الطاقم التحكيمي المعتمد لبطولة إفريقيا للمحليين 2024. أعلن الاتحاد الإفريقي لكرة القدم “كاف” عن قائمة الحكام المعينين لإدارة مباريات بطولة أمم إفريقيا للمحليين (شان) – 2024، والمقرر إقامتها في الفترة الممتدة ما بين 2 إلى 30 غشت المقبل في كينيا، تنزانيا وأوغندا. وضمت القائمة ست حكام مغاربة، وفق ما كشف عته الـ”كاف”، في بيان نشره على موقعه الرسمي. ويتعلق الأمر، بضيف المصدر، …', 'size': 2}, {'id': '227', 'title': 'تعيين 6 حكام مغاربة لإدارة مباريات كأس إفريقيا للمحليين', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%aa%d8%b9%d9%8a%d9%8a%d9%86-6-%d8%ad%d9%83%d8%a7%d9%85-%d9%85%d8%ba%d8%a7%d8%b1%d8%a8%d8%a9-%d9%84%d8%a5%d8%af%d8%a7%d8%b1%d8%a9-%d9%85%d8%a8%d8%a7%d8%b1%d9%8a%d8%a7%d8%aa-%d9%83%d8%a3%d8%b3-%d8%a5/', 'summary': 'تعيين 6 حكام مغاربة لإدارة مباريات كأس إفريقيا للمحليين. المساء اليوم: أعلن الاتحاد الإفريقي لكرة القدم (كاف)، عن قائمة الحكام المعينين لإدارة مباريات بطولة أمم إفريقيا للمحليين (شان) –2024، والمقرر إقامتها في الفترة الممتدة ما بين 2 إلى 30 غشت المقبل في كينيا، تنزانيا وأوغندا،', 'size': 2}], 'main_title': '6 حكام مغاربة ضمن الطاقم التحكيمي المعتمد لبطولة إفريقيا للمحليين 2024'}, {'community_id': '9', 'articles': [{'id': '236', 'title': 'لوفيغارو الفرنسية: المغرب وجهة مثالية لقضاء عطلة صيفية جيدة', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d9%84%d9%88%d9%81%d9%8a%d8%ba%d8%a7%d8%b1%d9%88-%d8%a7%d9%84%d9%81%d8%b1%d9%86%d8%b3%d9%8a%d8%a9-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d9%88%d8%ac%d9%87%d8%a9-%d9%85%d8%ab%d8%a7%d9%84%d9%8a%d8%a9/', 'summary': 'لوفيغارو الفرنسية: المغرب وجهة مثالية لقضاء عطلة صيفية جيدة. وصفت صحيفة لوفيغارو الفرنسية المغرب بأنه “وجهة مثالية لقضاء عطلة صيفية جيدة”، مؤكدة في مقال نشرته، أمس الخميس، أن المملكة توفر خيارات سياحية متنوعة تلبي تطلعات مختلف الزوار خلال شهري يوليوز وغشت. وفي ركن “الأسفار”، أبرزت الصحيفة الفرنسية أن فصل الصيف في المغرب لا يقل جاذبية عن الربيع والخريف، مشيرة إلى تنوع التجارب …  لوفيغارو الفرنسية: المغرب وجهة مثالية لقضاء عطلة صيفية جيدة     .', 'size': 2}, {'id': '407', 'title': 'لوفيغارو: المغرب وجهة مثالية لقضاء العطلة خلال يوليوز أو غشت', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/469939.html', 'summary': 'لوفيغارو: المغرب وجهة مثالية لقضاء العطلة خلال يوليوز أو غشت. أكدت صحيفة "لوفيغارو" الفرنسية، في مقال نشرته أمس الخميس، أن المغرب يمكن أن يشكل وجهة عطلة مثالية خلال يوليوز أو غشت، مبرزة تعدد أوجه الإقامة الصيفية الناجحة في المملكة.', 'size': 2}], 'main_title': 'لوفيغارو الفرنسية: المغرب وجهة مثالية لقضاء عطلة صيفية جيدة'}, {'community_id': '0', 'articles': [{'id': '406', 'title': 'انطلاق أشغال الدورة الثامنة لـ”منتدى المغرب اليوم”', 'source': 'machahid24.com', 'link': 'https://machahid24.com/panorama/469940.html', 'summary': 'انطلاق أشغال الدورة الثامنة لـ”منتدى المغرب اليوم”. انطلقت، اليوم الجمعة بالرباط، أشغال الدورة الثامنة لـ”منتدى المغرب اليوم” (Morocco Today Forum)، بمشاركة نخبة من الشخصيات الوطنية والدولية، من بينها صناع قرار وباحثون وفاعلون في مجالات الرياضة والاقتصاد والرقمنة والإعلام. وحسب بلاغ لوكالة المغرب العربي للأنباء، يأتي هذا الحدث الدولي البارز، الذي تنظمه مجموعة “لوماتان”، تحت الرعاية السامية لصاحب الجلالة الملك محمد السادس، في …', 'size': 2}, {'id': '410', 'title': 'الرباط.. انطلاق أشغال الدورة الثامنة لـمنتدى المغرب اليوم', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/224866/', 'summary': 'الرباط.. انطلاق أشغال الدورة الثامنة لـمنتدى المغرب اليوم. كواليس اليوم انطلقت، اليوم الجمعة بالرباط، أشغال الدورة الثامنة لـ”منتدى المغرب اليوم” (Morocco Today Forum)، بمشاركة نخبة من الشخصيات الوطنية والدولية، من بينها صناع قرار وباحثون وفاعلون في مجالات الرياضة والاقتصاد والرقمنة والإعلام. ويأتي هذا الحدث الدولي البارز، الذي تنظمه مجموعة “لوماتان”، تحت الرعاية السامية لصاحب الجلالة الملك محمد السادس، في سياق استثنائي، يتمثل', 'size': 3}, {'id': '411', 'title': 'الرباط تحتضن أشغال ”منتدى المغرب اليوم”\xa0(Morocco Today Forum)', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%a7%d9%84%d8%b1%d8%a8%d8%a7%d8%b7-%d8%aa%d8%ad%d8%aa%d8%b6%d9%86-%d8%a3%d8%b4%d8%ba%d8%a7%d9%84-%d9%85%d9%86%d8%aa%d8%af%d9%89-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d8%a7%d9%84%d9%8a%d9%88/', 'summary': 'الرباط تحتضن أشغال ”منتدى المغرب اليوم” (Morocco Today Forum). المساء اليوم – الرباط: انطلقت، اليوم الجمعة بالرباط، أشغال الدورة الثامنة لـ”منتدى المغرب اليوم” (Morocco Today Forum)، بمشاركة صناع قرار وباحثون وفاعلون في مجالات الرياضة والاقتصاد والرقمنة والإعلام. ويأتي هذا المنتدى في سياق استثنائي، يتمثل', 'size': 2}], 'main_title': 'الرباط.. انطلاق أشغال الدورة الثامنة لـمنتدى المغرب اليوم'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    