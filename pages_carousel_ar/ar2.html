<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 04/07/2025 - 18h28</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '4', 'title': 'الملك يهنئ ترامب بالعيد الأمريكي', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%8a%d9%87%d9%86%d8%a6-%d8%aa%d8%b1%d8%a7%d9%85%d8%a8-%d8%a8%d8%a7%d9%84%d8%b9%d9%8a%d8%af-%d8%a7%d9%84%d8%a3%d9%85%d8%b1%d9%8a%d9%83%d9%8a-1586927.html', 'summary': 'الملك يهنئ ترامب بالعيد الأمريكي. بعث الملك محمد السادس برقية تهنئة إلى رئيس الولايات المتحدة الأمريكية، دونالد ترامب، وذلك بمناسبة اليوم الوطني لبلاده. ومما جاء في هذه البرقية: “يطيب لي بمناسبة اليوم الوطني للولايات المتحدة الأمريكية أن أتقدم إليكم، باسمي الخاص وباسم الشعب المغربي، بأحر التهاني وأصدق المتمنيات، لكم شخصيا بدوام الصحة والسعادة، وللشعب الأمريكي الصديق باطراد الرخاء والازدهار، في  الملك يهنئ ترامب بالعيد الأمريكي     - هسبريس جريدة إلكترونية مغربية .', 'size': 3}, {'id': '155', 'title': 'الملك يهنئ ترامب بالعيد الوطني الأمريكي ويشيد بمتانة الشراكة بين البلدين', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1082994.html', 'summary': 'الملك يهنئ ترامب بالعيد الوطني الأمريكي ويشيد بمتانة الشراكة بين البلدين. بعث الملك محمد السادس برقية تهنئة إلى رئيس الولايات المتحدة الأمريكية، دونالد ترامب، وذلك بمناسبة اليوم الوطني لبلاده. ومما جاء في هذه البرقية “يطيب لي بمناسبة اليوم الوطني للولايات المتحدة الأمريكية، أن أتقدم إليكم باسمي الخاص وباسم الشعب المغربي، بأحر التهاني وأصدق المتمنيات لكم شخصيا بدوام الصحة والسعادة، وللشعب الأمريكي الصديق باطراد الرخاء والازدهار، في ظهرت المقالة الملك يهنئ ترامب بالعيد الوطني الأمريكي ويشيد بمتانة الشراكة بين البلدين  .', 'size': 3}, {'id': '245', 'title': 'الملك محمد السادس يهنئ الرئيس الأمريكي دونالد ترامب بمناسبة اليوم الوطني لبلاده', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%85%d8%ad%d9%85%d8%af-%d8%a7%d9%84%d8%b3%d8%a7%d8%af%d8%b3-%d9%8a%d9%87%d9%86%d8%a6-%d8%a7%d9%84%d8%b1%d8%a6%d9%8a%d8%b3-%d8%a7%d9%84%d8%a3%d9%85%d8%b1%d9%8a%d9%83-2/', 'summary': 'الملك محمد السادس يهنئ الرئيس الأمريكي دونالد ترامب بمناسبة اليوم الوطني لبلاده. بعث الملك محمد السادس برقية تهنئة إلى رئيس الولايات المتحدة الأمريكية، دونالد ترامب، وذلك بمناسبة اليوم الوطني لبلاده. ومما جاء في هذه البرقية “يطيب لي بمناسبة اليوم الوطني للولايات المتحدة الأمريكية، أن أتقدم إليكم باسمي الخاص وباسم الشعب المغربي، بأحر التهاني وأصدق المتمنيات لكم شخصيا بدوام الصحة والسعادة، وللشعب الأمريكي الصديق باطراد …  الملك محمد السادس يهنئ الرئيس الأمريكي دونالد ترامب بمناسبة اليوم الوطني لبلاده     .', 'size': 3}], 'main_title': 'الملك يهنئ ترامب بالعيد الأمريكي'}, {'community_id': '1', 'articles': [{'id': '5', 'title': 'برلماني يتابع الغلوسي أمام القضاء', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d8%a8%d8%b1%d9%84%d9%85%d8%a7%d9%86%d9%8a-%d9%8a%d8%aa%d8%a7%d8%a8%d8%b9-%d8%a7%d9%84%d8%ba%d9%84%d9%88%d8%b3%d9%8a-%d8%a3%d9%85%d8%a7%d9%85-%d8%a7%d9%84%d9%82%d8%b6%d8%a7%d8%a1-1586907.html', 'summary': 'برلماني يتابع الغلوسي أمام القضاء. أعلنت الجمعية المغربية لحماية المال العام عن تضامنها الكامل مع رئيسها، محمد الغلوسي، وذلك على خلفية متابعته بشكاية مباشرة أمام المحكمة الابتدائية بمراكش، تقدّم بها البرلماني عن حزب التجمع الوطني للأحرار يونس بنسليمان. وتؤكد الجمعية أن هذه الشكاية جاءت عقب تصريحات أدلى بها الغلوسي خلال ندوة صحافية بمراكش، أثار خلالها شبهة فساد في صفقة إنجاز  برلماني يتابع الغلوسي أمام القضاء     - هسبريس جريدة إلكترونية مغربية .', 'size': 2}, {'id': '181', 'title': 'برلماني من "الأحرار" يجر الغلوسي إلى المحكمة.. والجمعية ترد: لن نسكت', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a8%d8%b1%d9%84%d9%85%d8%a7%d9%86%d9%8a-%d9%85%d9%86-%d8%a7%d9%84%d8%a3%d8%ad%d8%b1%d8%a7%d8%b1-%d9%8a%d8%ac%d8%b1-%d8%a7%d9%84%d8%ba%d9%84%d9%88%d8%b3%d9%8a-%d8%a5%d9%84%d9%89-%d8%a7%d9%84/', 'summary': 'برلماني من "الأحرار" يجر الغلوسي إلى المحكمة.. والجمعية ترد: لن نسكت. يمثل محمد الغلوسي، رئيس الجمعية المغربية لحماية المال العام، أمام المحكمة الابتدائية بمراكش يوم الخميس 18 يوليوز، في أولى جلسات محاكمته على خلفية شكاية مباشرة تقدم بها البرلماني عن حزب التجمع الوطني للأحرار يونس بنسليمان، النائب الأول السابق لعمدة مراكش، على إثر تصريحات للغلوسي تتعلق بملف المحطة الطرقية بحي العزوزية بالمدينة الحمراء. وتعود فصول القضية  برلماني من "الأحرار" يجر الغلوسي إلى المحكمة.. والجمعية ترد: لن نسكت     .', 'size': 2}, {'id': '388', 'title': 'دعوى قضائية تشعل مواجهة بين برلماني و”حماة المال العام” بسبب ملفات فساد بمراكش', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1083025.html', 'summary': 'دعوى قضائية تشعل مواجهة بين برلماني و”حماة المال العام” بسبب ملفات فساد بمراكش. رفع البرلماني عن حزب التجمع الوطني للأحرار والنائب الأول لعمدة مراكش السابق، يونس بنسليمان، دعوى قضائية ضد رئيس الجمعية المغربية لحماية المال العام، محمد الغلوسي، أمام المحكمة الابتدائية بمراكش، إذ توصل الأخير باستدعاء جلسة المحاكمة يوم 18 يوليوز. وقال الغلوسي إن شكاية بنسليمان ضده تأتي على خلفية ما أثارته الجمعية المغربية لحماية المال العام خلال ظهرت المقالة دعوى قضائية تشعل مواجهة بين برلماني و”حماة المال العام” بسبب ملفات فساد بمراكش  .', 'size': 3}], 'main_title': 'دعوى قضائية تشعل مواجهة بين برلماني و”حماة المال العام” بسبب ملفات فساد بمراكش'}, {'community_id': '2', 'articles': [{'id': '67', 'title': 'توقعات أحوال الطقس اليوم الجمعة', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/202929', 'summary': 'توقعات أحوال الطقس اليوم الجمعة.  تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليومه الجمعة، أن تعرف الحالة الجوية، طقسا محليا حارا بالسهول الداخلية، والجنوب الشرقي للبلاد،وكذا داخل الأقاليم الجنوبية للمملكة. ومن المرتقب تمركز سحب رعدية محملة بقطرات أو زخات مطرية فوق كل من مرتفعات الأطلسين الكبير و المتوسط، و شمال الأطلس الصغير،وسفوحها الجنوبية الشرقية، فضلا عن نزول أمطار جد', 'size': 3}, {'id': '180', 'title': 'استمرار الطقس الحار مع تساقطات رعدية اليوم الجمعة', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a7%d8%b3%d8%aa%d9%85%d8%b1%d8%a7%d8%b1-%d8%a7%d9%84%d8%b7%d9%82-%d8%a7%d9%84%d8%ad%d8%a7%d8%b1-%d9%85%d8%b9-%d8%aa%d8%b3%d8%a7%d9%82%d8%b7%d8%a7%d8%aa-%d8%b1%d8%b9%d8%af%d9%8a%d8%a9-%d8%a7%d9%84/', 'summary': 'استمرار الطقس الحار مع تساقطات رعدية اليوم الجمعة. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الجمعة، أن تعرف الحالة الجوية، طقسا محليا حارا بالسهول الداخلية، والجنوب الشرقي للبلاد، وكذا داخل الأقاليم الجنوبية للمملكة. ومن المرتقب تمركز سحب رعدية محملة بقطرات أو زخات مطرية فوق كل من مرتفعات الأطلسين الكبير والمتوسط، وشمال الأطلس الصغير، وسفوحها الجنوبية الشرقية، فضلا عن نزول أمطار جد خفيفة بغرب  استمرار الطقس الحار مع تساقطات رعدية اليوم الجمعة     .', 'size': 2}, {'id': '183', 'title': 'توقعات أحوال الطقس لليوم الجمعة', 'source': 'soltana.ma', 'link': 'https://soltana.ma/1357530.html', 'summary': 'توقعات أحوال الطقس لليوم الجمعة. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليومه الجمعة، أن تعرف الحالة الجوية، طقسا محليا حارا بالسهول الداخلية، والجنوب الشرقي للبلاد، وكذا داخل الأقاليم الجنوبية للمملكة. ومن المرتقب تمركز سحب رعدية محملة بقطرات أو زخات مطرية فوق كل من مرتفعات الأطلسين الكبير والمتوسط، وشمال الأطلس الصغير، وسفوحها الجنوبية الشرقية، فضلا عن نزول أمطار جد خفيفة بغرب', 'size': 4}, {'id': '228', 'title': 'طقس الجمعة.. أجواء حارة مع زخات مطرية في بعض المناطق', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/224055/', 'summary': 'طقس الجمعة.. أجواء حارة مع زخات مطرية في بعض المناطق. كواليس اليوم تتوقع المديرية العامة للأرصاد الجوية، اليوم الجمعة، أن تعرف الحالة الجوية، طقسا محليا حارا بالسهول الداخلية، والجنوب الشرقي للبلاد، وكذا داخل الأقاليم الجنوبية للمملكة. ومن المرتقب تمركز سحب رعدية محملة بقطرات أو زخات مطرية فوق كل من مرتفعات الأطلسين الكبير والمتوسط، وشمال الأطلس الصغير، وسفوحها الجنوبية الشرقية، فضلا عن نزول أمطار جد', 'size': 3}], 'main_title': 'توقعات أحوال الطقس لليوم الجمعة'}, {'community_id': '3', 'articles': [{'id': '68', 'title': 'بايتاس.. مشروع قانون إعادة تنظيم المجلس الوطني للصحافة يهدف لتعزيز فعالية التنظيم الذاتي للمهنة.', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/202925', 'summary': 'بايتاس.. مشروع قانون إعادة تنظيم المجلس الوطني للصحافة يهدف لتعزيز فعالية التنظيم الذاتي للمهنة..  أكد الوزير المنتدب لدى رئيس الحكومة المكلف بالعلاقات مع البرلمان، والناطق الرسمي باسم الحكومة، مصطفى بايتاس، أن مشروع القانون الخاص بإعادة تنظيم المجلس الوطني للصحافة يسعى إلى تعزيز فعالية المجلس في ممارسة مهامه في التنظيم الذاتي للمهنة والارتقاء بأخلاقياتها. وأوضح بايتاس، خلال ندوة صحفية أعقبت انعقاد مجلس الحكومة يوم الخميس، أن المشروع يأتي استجابةً', 'size': 2}, {'id': '242', 'title': 'الناطق باسم الحكومة: تعديلات بنيوية على قانون المجلس الوطني للصحافة', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%a7%d9%84%d9%86%d8%a7%d8%b7%d9%82-%d8%a8%d8%a7%d8%b3%d9%85-%d8%a7%d9%84%d8%ad%d9%83%d9%88%d9%85%d8%a9-%d8%aa%d8%b9%d8%af%d9%8a%d9%84%d8%a7%d8%aa-%d8%a8%d9%86%d9%8a%d9%88%d9%8a%d8%a9-%d8%b9%d9%84/', 'summary': 'الناطق باسم الحكومة: تعديلات بنيوية على قانون المجلس الوطني للصحافة. المساء اليوم – الرباط: قال الوزير المنتدب لدى رئيس الحكومة المكلف بالعلاقات مع البرلمان، الناطق الرسمي باسم الحكومة، مصطفى بايتاس إن مشروع القانون المتعلق بإعادة تنظيم المجلس الوطني للصحافة يروم تعزيز فعالية المجلس في التنظيم', 'size': 2}], 'main_title': 'بايتاس.. مشروع قانون إعادة تنظيم المجلس الوطني للصحافة يهدف لتعزيز فعالية التنظيم الذاتي للمهنة.'}, {'community_id': '7', 'articles': [{'id': '94', 'title': 'شجار مسلح في فاس ينتهي بتدخل أمني واعتقال ستة أشخاص', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/society/408668.html', 'summary': 'شجار مسلح في فاس ينتهي بتدخل أمني واعتقال ستة أشخاص. أحالت مصالح ولاية أمن فاس على النيابة العامة المختصة، صباح اليوم الخميس 3 يوليوز الجاري، ستة أشخاص من بينهم ثلاثة قاصرين، تتراوح أعمارهم مابين 16', 'size': 2}, {'id': '130', 'title': 'من بينهم 3 قاصرين.. حيازة أسلحة بيضاء وتبادل العنف في الشارع العام يسقط 6 أشخاص بفاس', 'source': 'kifache.com', 'link': 'https://kifache.com/%d9%85%d9%86-%d8%a8%d9%8a%d9%86%d9%87%d9%85-3-%d9%82%d8%a7%d8%b5%d8%b1%d9%8a%d9%86-%d8%ad%d9%8a%d8%a7%d8%b2%d8%a9-%d8%a3%d8%b3%d9%84%d8%ad%d8%a9-%d8%a8%d9%8a%d8%b6%d8%a7%d8%a1-%d9%88%d8%aa%d8%a8/', 'summary': 'من بينهم 3 قاصرين.. حيازة أسلحة بيضاء وتبادل العنف في الشارع العام يسقط 6 أشخاص بفاس. أحالت مصالح ولاية أمن فاس على النيابة العامة المختصة، صباح اليوم الخميس (3 يوليوز)، ستة أشخاص من بينهم ثلاثة قاصرين، تتراوح أعمارهم مابين 16 و23 سنة، وذلك للاشتباه في تورطهم في قضية تتعلق بالضرب والجرح وحيازة السلاح الأبيض في ظروف تشكل خطرا على الأشخاص والممتلكات. وكانت مصالح الشرطة قد توصلت، أول أمس الثلاثاء، بإشعار حول', 'size': 3}, {'id': '231', 'title': 'الضرب والجرح وحيازة السلاح الأبيض يقود 6 أشخاص للاعتقال بفاس', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/224043/', 'summary': 'الضرب والجرح وحيازة السلاح الأبيض يقود 6 أشخاص للاعتقال بفاس. أحمد التدلاوي أحالت مصالح ولاية أمن فاس على النيابة العامة المختصة، صباح اليوم الخميس، ستة أشخاص من بينهم ثلاثة قاصرين، تتراوح أعمارهم مابين 16 و23 سنة، يشتبه تورطهم في قضية تتعلق بالضرب والجرح وحيازة السلاح الأبيض في ظروف تشكل خطرا على الأشخاص والممتلكات. وحسب مصادر أمنية، فإن مصالح الشرطة كانت قد توصلت، أول أمس', 'size': 2}, {'id': '240', 'title': 'أمن فاس يوقف 6 أشخاص ارتكبوا أفعالا خطيرة ضد المواطنين والممتلكات', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%a3%d9%85%d9%86-%d9%81%d8%a7%d8%b3-%d9%8a%d9%88%d9%82%d9%81-6-%d8%a3%d8%b4%d8%ae%d8%a7%d8%b5-%d8%a7%d8%b1%d8%aa%d9%83%d8%a8%d9%88%d8%a7-%d8%a3%d9%81%d8%b9%d8%a7%d9%84%d8%a7-%d8%ae%d8%b7%d9%8a%d8%b1/', 'summary': 'أمن فاس يوقف 6 أشخاص ارتكبوا أفعالا خطيرة ضد المواطنين والممتلكات. المساء اليوم: أحالت مصالح ولاية أمن فاس على النيابة العامة المختصة، الخميس 3 يوليوز الجاري، ستة أشخاص من بينهم ثلاثة قاصرين، تتراوح أعمارهم مابين 16 و23 سنة، وذلك للاشتباه في تورطهم في قضية تتعلق بالضرب', 'size': 3}], 'main_title': 'من بينهم 3 قاصرين.. حيازة أسلحة بيضاء وتبادل العنف في الشارع العام يسقط 6 أشخاص بفاس'}, {'community_id': '5', 'articles': [{'id': '96', 'title': 'إعفاء عميد كلية الحقوق بأكادير بعد فضيحة "ماستر قيلش"', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/education/408671.html', 'summary': 'إعفاء عميد كلية الحقوق بأكادير بعد فضيحة "ماستر قيلش". أصدر رئيس الحكومة عزيز أخنوش قرارًا يقضي بإعفاء عميد كلية الحقوق بجامعة ابن زهر بأكادير، بناءً على اقتراح من وزير التعليم العالي عز الدين الميداوي. جاء', 'size': 2}, {'id': '410', 'title': 'رئيس الحكومة يوافق على إعفاء عميد كلية الحقوق بأكادير', 'source': 'rue20.com', 'link': 'https://rue20.com/918138.html', 'summary': 'رئيس الحكومة يوافق على إعفاء عميد كلية الحقوق بأكادير.  . متابعة أصدر رئيس الحكومة عزيز أخنوش قرارا يقضي بإعفاء عميد كلية الحقوق التابعة لجامعة ابن زهر بأكادير، بناء على اقتراح من عز الدين الميداوي، وزير التعليم العالي والبحث العلمي والابتكار. و يأتي القرار وفق مصادرنا ، على خلفية فضيحة السمسرة في شهادات الماستر والدكتوراه، أو ما بات يعرف إعلاميا بفضيحة “ماستر قيلش”. الخبر رئيس الحكومة يوافق على إعفاء عميد كلية الحقوق بأكادير  .', 'size': 2}], 'main_title': 'إعفاء عميد كلية الحقوق بأكادير بعد فضيحة "ماستر قيلش"'}, {'community_id': '6', 'articles': [{'id': '108', 'title': '"Vueling" تفتتح خطا جويا جديدا يربط الصويرة ببرشلونة', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/economy/408686.html', 'summary': '"Vueling" تفتتح خطا جويا جديدا يربط الصويرة ببرشلونة. حطت طائرة تابعة لشركة الخطوط الجوية الإسبانية "Vueling"، الخميس بمطار الصويرة موكادور الدولي، إيذانا بافتتاح خط جوي جديد يربط بين برشلونة ومدينة الرياح. وبهذه المناسبة، أ', 'size': 2}, {'id': '201', 'title': 'افتتاح خط جوي جديد يربط الصويرة ببرشلونة', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/468527.html', 'summary': 'افتتاح خط جوي جديد يربط الصويرة ببرشلونة. حطت طائرة تابعة لشركة الخطوط الجوية الإسبانية "Vueling"، الخميس بمطار الصويرة موكادور الدولي، إيذانا بافتتاح خط جوي جديد يربط بين برشلونة ومدينة الرياح.', 'size': 2}], 'main_title': '"Vueling" تفتتح خطا جويا جديدا يربط الصويرة ببرشلونة'}, {'community_id': '8', 'articles': [{'id': '173', 'title': 'بشبهة السرقة باستعمال العنف.. إحالة شخصين على النيابة العامة بأكادير', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a8%d8%b4%d8%a8%d9%87%d8%a9-%d8%a7%d9%84%d8%b3%d8%b1%d9%82%d8%a9-%d8%a8%d8%a7%d8%b3%d8%aa%d8%b9%d9%85%d8%a7%d9%84-%d8%a7%d9%84%d8%b9%d9%86%d9%81-%d8%a5%d8%ad%d8%a7%d9%84%d8%a9-%d8%b4%d8%ae%d8%b5/', 'summary': 'بشبهة السرقة باستعمال العنف.. إحالة شخصين على النيابة العامة بأكادير. أحالت مصالح الشرطة بولاية أمن أكادير على النيابة العامة المختصة، صباح اليوم الجمعة 04 يوليوز الجاري، شخصين يبلغان معا من العمر 19 سنة، من ذوي السوابق القضائية، وذلك للاشتباه في تورطهما في قضية تتعلق بالسرقة باستعمال العنف. وأوضح مصدر أمني أن المشتبه فيهما كانا قد أقدما، رفقة شخص ثالث، على تعريض أحد مستعملي الطريق للعنف  بشبهة السرقة باستعمال العنف.. إحالة شخصين على النيابة العامة بأكادير     .', 'size': 3}, {'id': '292', 'title': 'سرقة موثقة تُسقط شخصين بأكادير', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d8%b3%d8%b1%d9%82%d8%a9-%d9%85%d9%88%d8%ab%d9%82%d8%a9-%d8%aa%d9%8f%d8%b3%d9%82%d8%b7-%d8%b4%d8%ae%d8%b5%d9%8a%d9%86-%d8%a8%d8%a3%d9%83%d8%a7%d8%af%d9%8a%d8%b1-1587062.html', 'summary': 'سرقة موثقة تُسقط شخصين بأكادير. أحالت مصالح الشرطة بولاية أمن أكادير على النيابة العامة المختصة، الجمعة، شخصين يبلغان معا من العمر 19 سنة، من ذوي السوابق القضائية، وذلك للاشتباه في تورطهما في قضية تتعلق بالسرقة باستعمال العنف. وعن تفاصيل الواقعة أوردت معطيات أمنية أن المشتبه فيهما كانا أقدما، رفقة شخص ثالث، على تعريض أحد مستعملي الطريق للعنف قبل سرقة دراجته  سرقة موثقة تُسقط شخصين بأكادير     - هسبريس جريدة إلكترونية مغربية .', 'size': 3}, {'id': '354', 'title': 'فيديو سرقة في الشارع العام يقود إلى اعتقال شخصين بأكادير', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/society/408724.html', 'summary': 'فيديو سرقة في الشارع العام يقود إلى اعتقال شخصين بأكادير. أحالت مصالح الشرطة بولاية أمن أكادير على النيابة العامة المختصة، صباح الجمعة 4 يوليوز، شابين يبلغان معا من العمر 19 سنة، من ذوي السوابق القضائية،', 'size': 3}], 'main_title': 'بشبهة السرقة باستعمال العنف.. إحالة شخصين على النيابة العامة بأكادير'}, {'community_id': '9', 'articles': [{'id': '188', 'title': 'الخارجية تعلن عن حركة تعيينات واسعة في صفوف القناصل العامين', 'source': 'rue20.com', 'link': 'https://rue20.com/918049.html', 'summary': 'الخارجية تعلن عن حركة تعيينات واسعة في صفوف القناصل العامين.  . الرباط أطلقت وزارة الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج، اليوم الخميس، حركة تعيينات واسعة النطاق لعدد من القناصل العامين. وتندرج هذه الحركة، التي تعد من بين الأهم خلال السنوات الأخيرة، في إطار التعليمات الملكية السامية الرامية إلى تعزيز جودة الخدمات القنصلية، وضمان تدبير عصري وفعال واستباقي للعلاقة مع مغاربة العالم. وتميزت الخبر الخارجية تعلن عن حركة تعيينات واسعة في صفوف القناصل العامين  .', 'size': 2}, {'id': '448', 'title': 'الأكبر من نوعها: تغييرات كبيرة في قنصليات المغرب بالخارج', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%a7%d9%84%d8%a3%d9%83%d8%a8%d8%b1-%d9%85%d9%86-%d9%86%d9%88%d8%b9%d9%87%d8%a7-%d8%aa%d8%ba%d9%8a%d9%8a%d8%b1%d8%a7%d8%aa-%d9%83%d8%a8%d9%8a%d8%b1%d8%a9-%d9%81%d9%8a-%d9%82%d9%86%d8%b5%d9%84%d9%8a/', 'summary': 'الأكبر من نوعها: تغييرات كبيرة في قنصليات المغرب بالخارج. المساء اليوم- الرباط: أطلقت وزارة الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج، حركة تعيينات واسعة النطاق لعدد من القناصل العامين. وتندرج هذه الحركة، التي تعد من بين الأهم خلال السنوات الأخيرة، في إطار التعليمات الملكية', 'size': 2}], 'main_title': 'الخارجية تعلن عن حركة تعيينات واسعة في صفوف القناصل العامين'}, {'community_id': '10', 'articles': [{'id': '229', 'title': 'الجواهري يدعو إلى تعزيز التعاون الدولي لمواصلة تطوير المالية الإسلامية', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/224051/', 'summary': 'الجواهري يدعو إلى تعزيز التعاون الدولي لمواصلة تطوير المالية الإسلامية. و م ع دعا والي بنك المغرب، عبد اللطيف الجواهري، اليوم الخميس بالرباط، إلى تعزيز التعاون الدولي لمواصلة تطوير المالية الإسلامية. وقال الجواهري، خلال المنتدى الـ 23 حول الاستقرار المالي الإسلامي، الذي نظمه بنك المغرب ومجلس الخدمات المالية الإسلامية تحت شعار “معالجة نقاط الهشاشة الهيكلية وبناء القدرة على الصمود في مواجهة الصدمات المستقبلية”، إن', 'size': 2}, {'id': '453', 'title': 'والي بنك المغرب يدعو إلى تعزيز التعاون الدولي لتطوير المالية الإسلامية', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d9%88%d8%a7%d9%84%d9%8a-%d8%a8%d9%86%d9%83-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d9%8a%d8%af%d8%b9%d9%88-%d8%a5%d9%84%d9%89-%d8%aa%d8%b9%d8%b2%d9%8a%d8%b2-%d8%a7%d9%84%d8%aa%d8%b9%d8%a7%d9%88%d9%86/', 'summary': 'والي بنك المغرب يدعو إلى تعزيز التعاون الدولي لتطوير المالية الإسلامية. المساء اليوم- الرباط: دعا والي بنك المغرب، عبد اللطيف الجواهري، إلى تعزيز التعاون الدولي لمواصلة تطوير المالية الإسلامية. وقال الجواهري، خلال المنتدى الـ 23 حول الاستقرار المالي الإسلامي، الذي نظمه، أمس الخميس، بنك المغرب ومجلس', 'size': 2}], 'main_title': 'الجواهري يدعو إلى تعزيز التعاون الدولي لمواصلة تطوير المالية الإسلامية'}, {'community_id': '11', 'articles': [{'id': '313', 'title': 'الصحراء المغربية.. الإكوادور: مبادرة الحكم الذاتي الأساس لتسوية النزاع', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-636892.html', 'summary': 'الصحراء المغربية.. الإكوادور: مبادرة الحكم الذاتي الأساس لتسوية النزاع. هبة بريس أكدت جمهورية الإكوادور، اليوم الجمعة بالرباط، أن مبادرة الحكم الذاتي تعد “الأساس لتسوية النزاع” الإقليمي حول الصحراء المغربية. وعبرت عن هذا الموقف وزيرة العلاقات الخارجية والتنقل البشري بجمهورية الإكوادور، غابرييلا سوميرفيلد، خلال ندوة صحفية عقب لقائها مع وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج، ناصر بوريطة. وفي هذا السياق، وعلى غرار غالبية الدول الأعضاء في الأمم المتحدة، أعربت جمهورية الإكوادور أيضا عن دعمها للجهود التي يبذلها المغرب للتوصل إلى حل سياسي وواقعي وبراغماتي ودائم ومقبول من لدن الأطراف لهذا النزاع الإقليمي، في إطار منظمة الأمم المتحدة. وتجدر الإشارة إلى أن جمهورية الإكوادور كانت قد سحبت، في 22 أكتوبر 2024، اعترافها ب”الجمهورية الصحراوية” المزعومة، ووضعت حدا لأي اتصال مع هذا الكيان الوهمي.', 'size': 2}, {'id': '417', 'title': 'الإكوادور تؤكد أهمية مبادرة الحكم الذاتي في الصحراء المغربية', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/468549.html', 'summary': 'الإكوادور تؤكد أهمية مبادرة الحكم الذاتي في الصحراء المغربية. أكدت جمهورية الإكوادور، اليوم الجمعة بالرباط، أن مبادرة الحكم الذاتي تعد “الأساس لتسوية النزاع” الإقليمي حول الصحراء المغربية. وعبرت عن هذا الموقف وزيرة العلاقات الخارجية والتنقل البشري بجمهورية الإكوادور، غابرييلا سوميرفيلد، خلال ندوة صحفية عقب لقائها مع وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج، ناصر بوريطة. وفي هذا السياق، وعلى غرار غالبية الدول الأعضاء …', 'size': 3}, {'id': '444', 'title': 'الإكوادور تعتبر مبادرة الحكم الذاتي بمثابة “الأساس لتسوية النزاع” في الصحراء المغربية', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/224081/', 'summary': 'الإكوادور تعتبر مبادرة الحكم الذاتي بمثابة “الأساس لتسوية النزاع” في الصحراء المغربية. كواليس اليوم أكدت جمهورية الإكوادور، اليوم الجمعة بالرباط، أن مبادرة الحكم الذاتي تعد “الأساس لتسوية النزاع” الإقليمي حول الصحراء المغربية. وعبرت عن هذا الموقف وزيرة العلاقات الخارجية والتنقل البشري بجمهورية الإكوادور، غابرييلا سوميرفيلد، خلال ندوة صحفية عقب لقائها مع وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج، ناصر بوريطة. وفي هذا السياق، وعلى غرار', 'size': 3}, {'id': '458', 'title': 'الإكوادور تعتبر مبادرة الحكم الذاتي بمثابة “الأساس لتسوية النزاع” الإقليمي المفتعل حول الصحراء المغربية', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d8%a5%d9%83%d9%88%d8%a7%d8%af%d9%88%d8%b1-%d8%aa%d8%b9%d8%aa%d8%a8%d8%b1-%d9%85%d8%a8%d8%a7%d8%af%d8%b1%d8%a9-%d8%a7%d9%84%d8%ad%d9%83%d9%85-%d8%a7%d9%84%d8%b0%d8%a7%d8%aa%d9%8a-%d8%a8/', 'summary': 'الإكوادور تعتبر مبادرة الحكم الذاتي بمثابة “الأساس لتسوية النزاع” الإقليمي المفتعل حول الصحراء المغربية. أكدت جمهورية الإكوادور، اليوم الجمعة بالرباط، أن مبادرة الحكم الذاتي تعد “الأساس لتسوية النزاع” الإقليمي حول الصحراء المغربية. وعبرت عن هذا الموقف وزيرة العلاقات الخارجية والتنقل البشري بجمهورية الإكوادور، غابرييلا سوميرفيلد، خلال ندوة صحفية عقب لقائها مع وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج، ناصر بوريطة. وفي هذا السياق، وعلى غرار غالبية …  الإكوادور تعتبر مبادرة الحكم الذاتي بمثابة “الأساس لتسوية النزاع” الإقليمي المفتعل حول الصحراء المغربية     .', 'size': 4}], 'main_title': 'الإكوادور تعتبر مبادرة الحكم الذاتي بمثابة “الأساس لتسوية النزاع” الإقليمي المفتعل حول الصحراء المغربية'}, {'community_id': '12', 'articles': [{'id': '343', 'title': 'ليبيريا العضو الجديد غير الدائم في مجلس الأمن تجدد دعمها لمغربية الصحراء', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/politic/408713.html', 'summary': 'ليبيريا العضو الجديد غير الدائم في مجلس الأمن تجدد دعمها لمغربية الصحراء. جددت جمهورية ليبيريا، العضو الجديد غير الدائم في مجلس الأمن التابع للأمم المتحدة ابتداء من سنة 2026، اليوم الجمعة بالرباط، تأكيد دعمها للوحدة الترابية ولسيادة', 'size': 2}, {'id': '415', 'title': 'ليبيريا تجدد دعمها لمبادرة الحكم الذاتي بالصحراء المغربية', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/468551.html', 'summary': 'ليبيريا تجدد دعمها لمبادرة الحكم الذاتي بالصحراء المغربية. جددت جمهورية ليبيريا، العضو الجديد غير الدائم في مجلس الأمن التابع للأمم المتحدة ابتداء من سنة 2026، اليوم الجمعة بالرباط، تأكيد دعمها للوحدة الترابية ولسيادة المغرب على كامل ترابه، بما في ذلك منطقة الصحراء. وجاء التعبير عن هذا الموقف على لسان وزيرة خارجية ليبيريا، سارة بيسولو نيانتي، خلال ندوة صحفية عقب لقائها مع وزير الشؤون …', 'size': 2}, {'id': '446', 'title': 'ليبيريا تواصل دعمها للوحدة الترابية ولسيادة المغرب ولمبادرة الحكم الذاتي', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/224070/', 'summary': 'ليبيريا تواصل دعمها للوحدة الترابية ولسيادة المغرب ولمبادرة الحكم الذاتي. كواليس اليوم جددت جمهورية ليبيريا، العضو الجديد غير الدائم في مجلس الأمن التابع للأمم المتحدة ابتداء من سنة 2026، اليوم الجمعة بالرباط، تأكيد دعمها للوحدة الترابية ولسيادة المغرب على كامل ترابه، بما في ذلك منطقة الصحراء. وجاء التعبير عن هذا الموقف على لسان وزيرة خارجية ليبيريا، سارة بيسولو نيانتي، خلال ندوة صحفية عقب لقائها', 'size': 3}], 'main_title': 'ليبيريا تواصل دعمها للوحدة الترابية ولسيادة المغرب ولمبادرة الحكم الذاتي'}, {'community_id': '4', 'articles': [{'id': '359', 'title': 'وسيط المملكة: الالتزام الكامل بمبادئ العدل والإنصاف يشكل العمق الأخلاقي للوساطة', 'source': 'kifache.com', 'link': 'https://kifache.com/%d9%88%d8%b3%d9%8a%d8%b7-%d8%a7%d9%84%d9%85%d9%85%d9%84%d9%83%d8%a9-%d8%a7%d9%84%d8%a7%d9%84%d8%aa%d8%b2%d8%a7%d9%85-%d8%a7%d9%84%d9%83%d8%a7%d9%85%d9%84-%d8%a8%d9%85%d8%a8%d8%a7%d8%af%d8%a6-%d8%a7/', 'summary': 'وسيط المملكة: الالتزام الكامل بمبادئ العدل والإنصاف يشكل العمق الأخلاقي للوساطة. أكد وسيط المملكة حسن طارق، اليوم الجمعة (4 يوليوز) بالرباط، أن الالتزام الكامل بمبادئ العدل والإنصاف يشكل العمق الأخلاقي للوساطة لأنها وحدها من تجعل من رسالة الوسيط مختلفة، في الطبيعة والنتائج والآليات، عن باقي الصيغ التي تقدمها دولة القانون لموضوع النزاعات العمومية. وأكد طارق، في كلمة خلال ترؤسه أشغال اللقاء الأول للمنتدى الوطني حول الوساطة', 'size': 2}, {'id': '380', 'title': 'وسيط المملكة: الدفاع عن الحقوق يبدأ من شفافية الإدارة وكرامة المرتفق', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1083088.html', 'summary': 'وسيط المملكة: الدفاع عن الحقوق يبدأ من شفافية الإدارة وكرامة المرتفق. أكد وسيط المملكة حسن طارق، اليوم الجمعة بالرباط، أن الالتزام الكامل بمبادئ العدل والإنصاف يشكل العمق الأخلاقي للوساطة لأنها وحدها من تجعل من رسالة الوسيط مختلفة، في الطبيعة والنتائج والآليات، عن باقي الصيغ التي تقدمها دولة القانون لموضوع النزاعات العمومية. وأكد طارق، في كلمة خلال ترؤسه أشغال اللقاء الأول للمنتدى الوطني حول الوساطة المؤسساتية، على ظهرت المقالة وسيط المملكة: الدفاع عن الحقوق يبدأ من شفافية الإدارة وكرامة المرتفق  .', 'size': 2}], 'main_title': 'وسيط المملكة: الالتزام الكامل بمبادئ العدل والإنصاف يشكل العمق الأخلاقي للوساطة'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    