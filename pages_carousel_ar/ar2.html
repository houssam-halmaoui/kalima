<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 13/10/2025 - 06h09</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '27', 'title': 'الاتحاد الأوروبي يبدأ تطبيق نظام رقمي جديد لمراقبة دخول وخروج المسافرين', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-665342.html', 'summary': 'الاتحاد الأوروبي يبدأ تطبيق نظام رقمي جديد لمراقبة دخول وخروج المسافرين. هبة بريس أعلنت المفوضية الأوروبية في بروكسل عن بدء الدول الأوروبية، اليوم الأحد، التطبيق التدريجي لنظام الدخول والخروج الجديد (EES) المخصص لمواطني الدول غير الأعضاء في الاتحاد الأوروبي، بهدف تعزيز أمن الحدود وجمع مزيد من بيانات المسافرين للمساعدة في مكافحة الجريمة. واعتمدت عدة دول أوروبية كبرى نهجًا مرحليًا لتفادي أي اضطراب في عمل سلطات الحدود،', 'size': 2}, {'id': '134', 'title': 'الاتحاد الأوروبي يبدأ تطبيق نظام الدخول والخروج الجديد لرصد المسافرين', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/non-classes/326023/', 'summary': 'الاتحاد الأوروبي يبدأ تطبيق نظام الدخول والخروج الجديد لرصد المسافرين. أعلنت المفوضية الأوروبية في بروكسل أن الدول الأوروبية بدأت، اليوم الأحد، التنفيذ التدريجي لنظام جديد لدخول الحدود لمواطني الدول غير الأعضاء في الاتحاد الأوروبي، والذي يهدف إلى جمع مزيد من بيانات المسافرين والمساعدة في مكافحة الجريمة. واختارت أوروبية كبرى عديدة تطبيق النظام الجديد بشكل مرحلي لتفادي إرباك سلطات الحدود. فعلى سبيل المثال، أصبح مطار “دوسلدورف”', 'size': 2}], 'main_title': 'الاتحاد الأوروبي يبدأ تطبيق نظام رقمي جديد لمراقبة دخول وخروج المسافرين'}, {'community_id': '1', 'articles': [{'id': '38', 'title': 'حماس تؤكد عدم مشاركتها في حكم غزة خلال المرحلة الانتقالية', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-665310.html', 'summary': 'حماس تؤكد عدم مشاركتها في حكم غزة خلال المرحلة الانتقالية. هبة بريس أفاد مصدر مقرب من وفد حركة حماس، اليوم الأحد، بأن الحركة لن تشارك في حكم قطاع غزة خلال المرحلة الانتقالية التي تلي الحرب مع إسرائيل، بعد أيام من دخول وقف إطلاق النار حيز التنفيذ. وأوضح المصدر لوكالة “فرانس برس” أن حماس تعتبر موضوع حكم غزة من القضايا المنتهية، لكنها ستظل جزءاً أساسياً من', 'size': 2}, {'id': '102', 'title': 'نهاية حكم "حماس" في قطاع غزة', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/world/414360.html', 'summary': 'نهاية حكم "حماس" في قطاع غزة. أفاد مصدر في حركة المقاومة الإسلامية (حماس) مقرب من الوفد المفاوض، اليوم الأحد لوكالة فرانس برس، أن الحركة لن تشارك في حكم غزة خلال المرحلة', 'size': 3}, {'id': '207', 'title': 'حماس لن تشارك في حكم غزة خلال المرحلة الانتقالية', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d8%ad%d9%85%d8%a7%d8%b3-%d9%84%d9%86-%d8%aa%d8%b4%d8%a7%d8%b1%d9%83-%d9%81%d9%8a-%d8%ad%d9%83%d9%85-%d8%ba%d8%b2%d8%a9-%d8%ae%d9%84%d8%a7%d9%84-%d8%a7%d9%84%d9%85%d8%b1%d8%ad%d9%84%d8%a9-%d8%a7%d9%84/', 'summary': 'حماس لن تشارك في حكم غزة خلال المرحلة الانتقالية. حماس تتخلى عن حكم غزة  – متابعات أفاد مصدر في حركة المقاومة الإسلامية (حماس) مقرب من الوفد المفاوض، اليوم الأحد لوكالة فرانس برس، أن الحركة لن تشارك في...  حماس لن تشارك في حكم غزة خلال المرحلة الانتقالية     .', 'size': 2}, {'id': '229', 'title': 'حماس تغادر غزة.. نهائيا أم مؤقتا؟', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/228355/', 'summary': 'حماس تغادر غزة.. نهائيا أم مؤقتا؟. أفاد مصدر في حركة المقاومة الإسلامية (حماس) مقرب من الوفد المفاوض، اليوم الأحد لوكالة فرانس برس، أن الحركة لن تشارك في حكم غزة خلال المرحلة الانتقالية التي تلي الحرب مع إسرائيل، بعد أيام على دخول اتفاق وقف إطلاق النار في القطاع حيز التنفيذ. وقال المصدر لوكالة فرانس برس، طالبا عدم كشف هويته بسبب حساسية الموضوع،', 'size': 3}], 'main_title': 'نهاية حكم "حماس" في قطاع غزة'}, {'community_id': '2', 'articles': [{'id': '40', 'title': 'وفاة الفنان مصطفى سوليت متأثرًا بحروقه بعد الاعتداء المروع في الحسيمة', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-665306.html', 'summary': 'وفاة الفنان مصطفى سوليت متأثرًا بحروقه بعد الاعتداء المروع في الحسيمة. هبة بريس – طنجة توفي الفنان المغربي مصطفى سوليت، صباح اليوم الأحد، بالمستشفى الجامعي في طنجة، متأثرًا بمضاعفات الحروق الخطيرة التي أصيب بها عقب تعرضه لاعتداء مروع بمدينة الحسيمة، حيث أقدم شخص على سكب مادة قابلة للاشتعال عليه وإضرام النار في جسده. الراحل، المعروف بموهبته في التمثيل والموسيقى رغم إعاقته الحركية، كان قد نُقل في', 'size': 2}, {'id': '140', 'title': 'سوليت يفارق الحياة بعد أيام من الاعتداء الوحشي عليه', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/326006/', 'summary': 'سوليت يفارق الحياة بعد أيام من الاعتداء الوحشي عليه. فارَق الفنان مصطفى سوليت الحياة، صباح اليوم الأحد، متأثرا بحروق خطيرة من الدرجة الثالثة، ناتجة عن اعتداء بشع تعرض له خلال الأيام الماضية بمدينة الحسيمة. وأكدت مصادر خاصة ل”الجريدة24″، أن الفنان الراحل لفظ أنفاسه الأخيرة داخل المستشفى الجامعي بمدينة طنجة، حيث كان يرقد في قسم الإنعاش في وضع صحي حرج، منذ نقله من المستشفى الإقليمي', 'size': 2}, {'id': '153', 'title': 'وفاة الفنان المغربي مصطفى سوليت متأثرا بحروقه إثر اعتداء بالحسيمة', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-593479.html', 'summary': 'وفاة الفنان المغربي مصطفى سوليت متأثرا بحروقه إثر اعتداء بالحسيمة. توفي الفنان المغربي مصطفى سوليت، صباح اليوم الأحد، بالمستشفى الجامعي بمدينة طنجة، متأثرا بإصاباته الخطيرة جراء تعرضه لحروق بليغة إثر اعتداء تعرض له في مدينة الحسيمة، عندما أقدم شخص على سكب مادة قابلة للاشتعال عليه وإضرام النار في جسده. وكان الفنان الراحل، المعروف بموهبته في التمثيل والعزف رغم إعاقته الحركية، قد نُقل', 'size': 3}], 'main_title': 'وفاة الفنان المغربي مصطفى سوليت متأثرا بحروقه إثر اعتداء بالحسيمة'}, {'community_id': '3', 'articles': [{'id': '48', 'title': 'طقس الأحد.. أمطار متفرقة مرتقبة في بعض المناطق', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-665285.html', 'summary': 'طقس الأحد.. أمطار متفرقة مرتقبة في بعض المناطق. هبة بريس تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الأحد، مرور سحب كثيفة مرفوقة بأمطار متفرقة واحتمال بروز رعد غرب الواجهة المتوسطية. وسيلاحظ تشكل سحب منخفضة كثيفة نوعا ما مصحوبة بكتل ضبابية أو ضباب محلي فوق السواحل والسهول الشمالية والوسطى وشمال غرب الأقاليم الصحراوية للمملكة، مع تسجيل هبات رياح قوية نوعا ما بمنطقة طنجة والأطلس', 'size': 2}, {'id': '251', 'title': 'توقعات أحوال الطقس اليوم الأحد', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%aa%d9%88%d9%82%d8%b9%d8%a7%d8%aa-%d8%a3%d8%ad%d9%88%d8%a7%d9%84-%d8%a7%d9%84%d8%b7%d9%82%d8%b3-%d8%a7%d9%84%d9%8a%d9%88%d9%85-%d8%a7%d9%84%d8%a3%d8%ad%d8%af-50/', 'summary': 'توقعات أحوال الطقس اليوم الأحد. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليومه الأحد، مرور سحب كثيفة مرفوقة بأمطار متفرقة واحتمال بروز رعد غرب الواجهة المتوسطية. وسيلاحظ تشكل سحب منخفضة كثيفة نوعا ما مصحوبة بكتل ضبابية أو ضباب محلي فوق السواحل والسهول الشمالية والوسطى وشمال غرب الأقاليم الصحراوية للمملكة، مع تسجيل هبات رياح قوية نوعا ما بمنطقة طنجة والأطلس …  توقعات أحوال الطقس اليوم الأحد     .', 'size': 2}], 'main_title': 'طقس الأحد.. أمطار متفرقة مرتقبة في بعض المناطق'}, {'community_id': '4', 'articles': [{'id': '53', 'title': 'إنجاز مغربي جديد.. خبابز يتوّج بطلاً للعالم في الكيك بوكسينغ', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-665273.html', 'summary': 'إنجاز مغربي جديد.. خبابز يتوّج بطلاً للعالم في الكيك بوكسينغ. هبة بريس – رياضة في ليلة مميزة بمدينة روتردام الهولندية، تمكن البطل المغربي طارق خبابز من استعادة لقب بطل العالم في الكيك بوكسينغ لفئة الوزن الخفيف الثقيل، خلال نزاله ضمن فعاليات GLORY 104 التي أُقيمت مساء السبت. وشهدت المواجهة النهائية صراعاً قوياً جمع خبابز بالمقاتل الأذربيجاني-الإيراني بهرام رجاب زاده على اللقب الشاغر، حيث خاض الطرفان', 'size': 2}, {'id': '127', 'title': 'بعد نزال ناري في روتردام.. طارق خبابز يستعيد بطولة العالم في الكيك بوكسينغ', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a8%d8%b9%d8%af-%d9%86%d8%b2%d8%a7%d9%84-%d9%86%d8%a7%d8%b1%d9%8a-%d9%81%d9%8a-%d8%b1%d9%88%d8%aa%d8%b1%d8%af%d8%a7%d9%85-%d8%b7%d8%a7%d8%b1%d9%82-%d8%ae%d8%a8%d8%a7%d8%a8%d8%b2-%d9%8a%d8%b3/', 'summary': 'بعد نزال ناري في روتردام.. طارق خبابز يستعيد بطولة العالم في الكيك بوكسينغ. أعاد البطل المغربي طارق خبابز إشعاع الكيك بوكسينغ الوطني إلى الواجهة، بعد فوزه المستحق بلقب بطل العالم للوزن الخفيف الثقيل خلال أمسية “GLORY 104” التي أقيمت مساء السبت بمدينة روتردام الهولندية. وجاء تتويج خبابز بعد أداءٍ استثنائي أمام المقاتل الأذربيجاني-الإيراني بهرام رجاب زاده، في نزالٍ ناري تنافس فيه الطرفان على اللقب العالمي الشاغر، وسط أجواء', 'size': 2}], 'main_title': 'إنجاز مغربي جديد.. خبابز يتوّج بطلاً للعالم في الكيك بوكسينغ'}, {'community_id': '5', 'articles': [{'id': '59', 'title': 'مصر.. مصرع 3 دبلوماسيين قطريين في حادث سير بشرم الشيخ', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-665254.html', 'summary': 'مصر.. مصرع 3 دبلوماسيين قطريين في حادث سير بشرم الشيخ. هبة بريس أفادت وكالة “رويترز” مساء اليوم السبت، أن ثلاثة دبلوماسيين قطريين لقوا مصرعهم في حادث سير بمدينة شرم الشيخ المصرية. ونقلت الوكالة عن مصدرين أمنيين مصريين، أن الحادث أسفر عن وفاة الدبلوماسيين الثلاثة أثناء وجودهم في المدينة السياحية، دون الكشف عن تفاصيل إضافية حول ظروف الحادث.', 'size': 2}, {'id': '77', 'title': 'مصر..وفاة 3 دبلوماسيين قطريين في حادث سير بشرم الشيخ', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/world/414335.html', 'summary': 'مصر..وفاة 3 دبلوماسيين قطريين في حادث سير بشرم الشيخ. أفادت وكالة رويترز، ليلة الأحد، بمصرع ثلاثة من الدبلوماسيين القطريين في حادث سير بمدينة شرم الشيخ المصرية. ونقلت الوكالة عن مصدرين أمنيين، أن 3 دبلوماسيين قطريين', 'size': 2}], 'main_title': 'مصر.. مصرع 3 دبلوماسيين قطريين في حادث سير بشرم الشيخ'}, {'community_id': '6', 'articles': [{'id': '101', 'title': 'حرق في الشارع العام.. الفنان الأمازيغي "مصطفى سوليت" يفارق الحياة إثر اعتداء وحشي بالحسيمة', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/society/414359.html', 'summary': 'حرق في الشارع العام.. الفنان الأمازيغي "مصطفى سوليت" يفارق الحياة إثر اعتداء وحشي بالحسيمة. أكدت مصادر مطلعة أن الفنان الأمازيغي "مصطفى سوليت"، توفي صباح اليوم الأحد 12 أكتوبر، داخل المستشفى الجامعي بطنجة، متأثراً بحروق بليغة كان قد أصيب بها', 'size': 2}, {'id': '191', 'title': 'وفاة الفنان سوليت متأثراً بحروقه بعد حادث اعتداء مروع بالحسيمة', 'source': 'rue20.com', 'link': 'https://rue20.com/944394.html', 'summary': 'وفاة الفنان سوليت متأثراً بحروقه بعد حادث اعتداء مروع بالحسيمة.  / متابعة أعلن اليوم الأحد ، عن وفاة الفــنان الأمازيغي مصطفى سوليت، داخل المستشفى الجامعي بطنجة، بعدما عانى من مضاعفات الحروق التي أصابته في حادثة اعتداء وحشية بالحسيمة. و أظهر فيديو متداول عبر الإنترنت قيام شخص بإضرام النار في جسده بعدما سكب عليه كمية من البنزين أمام أنظار المواطنين. وقد أحدثت هذه الحادثة الخبر وفاة الفنان سوليت متأثراً بحروقه بعد حادث اعتداء مروع بالحسيمة  .', 'size': 2}], 'main_title': 'حرق في الشارع العام.. الفنان الأمازيغي "مصطفى سوليت" يفارق الحياة إثر اعتداء وحشي بالحسيمة'}, {'community_id': '8', 'articles': [{'id': '130', 'title': 'جلالة الملك يهنئ العاهل الإسباني الملك فيليبي السادس وصاحبة الجلالة الملكة ليتيزيا بمناسبة العيد الوطني لبلدهما', 'source': 'assabah.ma', 'link': 'https://assabah.ma/876383.html', 'summary': 'جلالة الملك يهنئ العاهل الإسباني الملك فيليبي السادس وصاحبة الجلالة الملكة ليتيزيا بمناسبة العيد الوطني لبلدهما. بعث صاحب الجلالة الملك محمد السادس برقية تهنئة إلى صاحب الجلالة الملك فيليبي السادس، عاهل المملكة الإسبانية، وصاحبة الجلالة الملكة ليتيزيا، وذلك بمناسبة احتفال بلادهما بعيدها الوطني. وقال جلالة الملك في هذه البرقية “إنه لمن دواعي سروري أن أبعث إليكم وإلى الشعب الإسباني، باسمي الخاص وباسم الشعبأكمل القراءة » المقالة جلالة الملك يهنئ العاهل الإسباني الملك فيليبي السادس وصاحبة الجلالة الملكة ليتيزيا بمناسبة العيد الوطني لبلدهما  .', 'size': 3}, {'id': '196', 'title': 'في برقية تهنئة.. الملك يعتز بالطابع المتميز للعلاقات المغربية الإسبانية', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/478296.html', 'summary': 'في برقية تهنئة.. الملك يعتز بالطابع المتميز للعلاقات المغربية الإسبانية. بعث الملك محمد السادس، برقية تهنئة إلى الملك فيليبي السادس، عاهل المملكة الإسبانية، والملكة ليتيزيا، وذلك بمناسبة احتفال بلادهما بعيدها الوطني.', 'size': 3}, {'id': '243', 'title': 'الملك محمد السادس يهنئ العاهل الإسباني الملك فيليبي السادس والملكة ليتيزيا بمناسبة العيد الوطني لبلدهما', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%85%d8%ad%d9%85%d8%af-%d8%a7%d9%84%d8%b3%d8%a7%d8%af%d8%b3-%d9%8a%d9%87%d9%86%d8%a6-%d8%a7%d9%84%d8%b9%d8%a7%d9%87%d9%84-%d8%a7%d9%84%d8%a5%d8%b3%d8%a8%d8%a7%d9%86-6/', 'summary': 'الملك محمد السادس يهنئ العاهل الإسباني الملك فيليبي السادس والملكة ليتيزيا بمناسبة العيد الوطني لبلدهما. بعث الملك محمد السادس برقية تهنئة إلى الملك فيليبي السادس، عاهل المملكة الإسبانية، والملكة ليتيزيا، وذلك بمناسبة احتفال بلادهما بعيدها الوطني. وقال الملك محمد السادس في هذه البرقية “إنه لمن دواعي سروري أن أبعث إليكم وإلى الشعب الإسباني، باسمي الخاص وباسم الشعب المغربي، بأطيب التهاني والمتمنيات بمناسبة العيد الوطني للمملكة الإسبانية”. ومما جاء …  الملك محمد السادس يهنئ العاهل الإسباني الملك فيليبي السادس والملكة ليتيزيا بمناسبة العيد الوطني لبلدهما     .', 'size': 3}], 'main_title': 'جلالة الملك يهنئ العاهل الإسباني الملك فيليبي السادس وصاحبة الجلالة الملكة ليتيزيا بمناسبة العيد الوطني لبلدهما'}, {'community_id': '9', 'articles': [{'id': '147', 'title': 'انطلاق رالي المغرب 2025 من فاس بمشاركة 250 متسابقا من مختلف القارات', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-593488.html', 'summary': 'انطلاق رالي المغرب 2025 من فاس بمشاركة 250 متسابقا من مختلف القارات. انطلقت اليوم الأحد من مدينة فاس منافسات رالي المغرب 2025 بمشاركة نحو 250 متسابقا من مختلف قارات العالم، وذلك ضمن الجولة الخامسة والأخيرة من بطولة العالم للراليات الصحراوية، المنظمة تحت الرعاية السامية لصاحب الجلالة الملك محمد السادس. وشهد اليوم الأول تنظيم المرحلة الاستعراضية “البرولوج” على مسافة 19 كيلومترا لتحديد ترتيب الانطلاق، حيث', 'size': 2}, {'id': '176', 'title': 'فاس.. انطلاق منافسات رالي المغرب 2025', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d9%81%d8%a7%d8%b3-%d8%a7%d9%86%d8%b7%d9%84%d8%a7%d9%82-%d9%85%d9%86%d8%a7%d9%81%d8%b3%d8%a7%d8%aa-%d8%b1%d8%a7%d9%84%d9%8a-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-2025/', 'summary': 'فاس.. انطلاق منافسات رالي المغرب 2025. انطلقت، اليوم الأحد من مدينة فاس، منافسات رالي المغرب 2025 بمشاركة حوالي 250 متسابقا من قارات العالم الخمس. وتميز اليوم الأول من هذا الحدث الرياضي، المنظم تحت رعاية الملك محمد السادس، إلى غاية 17 أكتوبر الجاري، بتنظيم المرحلة الاستعراضية (البرولوج) ضمن الجولة الخامسة والأخيرة من بطولة العالم للراليات الصحراوية 2025 لفئة التميت T1+ والبالغ طولها  فاس.. انطلاق منافسات رالي المغرب 2025     .', 'size': 2}], 'main_title': 'انطلاق رالي المغرب 2025 من فاس بمشاركة 250 متسابقا من مختلف القارات'}, {'community_id': '10', 'articles': [{'id': '150', 'title': 'بعد جدل الإغلاق.. سلطات الدار البيضاء تحسم قرارها بشأن “دونور”', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-593485.html', 'summary': 'بعد جدل الإغلاق.. سلطات الدار البيضاء تحسم قرارها بشأن “دونور”. أسفر الاجتماع الذي انعقد اليوم السبت بمقر ولاية جهة الدار البيضاء سطات، برئاسة الوالي محمد امهيدية، وبحضور ممثلين عن ناديي الوداد والرجاء، عن قرار يقضي بعدم إغلاق المركب الرياضي محمد الخامس في وجه الفريقين خلال المرحلة الحالية. وبحسب معطيات توصلت بها الأيام24، فقد تم الاتفاق خلال الاجتماع على أن يستمر قطبا العاصمة', 'size': 2}, {'id': '178', 'title': 'تأجيل قرار إغلاق مركب محمد الخامس', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%aa%d8%a3%d8%ac%d9%8a%d9%84-%d9%82%d8%b1%d8%a7%d8%b1-%d8%a5%d8%ba%d9%84%d8%a7%d9%82-%d9%85%d8%b1%d9%83%d8%a8-%d9%85%d8%ad%d9%85%d8%af-%d8%a7%d9%84%d8%ae%d8%a7%d9%85%d8%b3/', 'summary': 'تأجيل قرار إغلاق مركب محمد الخامس. تقرر بعد اجتماع عقد اليوم، وترأسه والي جهة الدار البيضاء سطات محمد امهيدية، بحضور فريقي الوداد والرجاء، عدم إغلاق ملعب محمد الخامس. ووفق ما رشح من معطيات، تم التأكيد خلال الاجتماع على أن مباريات الرجاء والوداد ستلعب بالمركب الرياضي محمد الخامس قبل التوقف الذي يسبق نهائيات كأس إفريقيا للأمم. وبخصوص الإصلاحات التي يتوقع أن يعرفها  تأجيل قرار إغلاق مركب محمد الخامس     .', 'size': 2}], 'main_title': 'بعد جدل الإغلاق.. سلطات الدار البيضاء تحسم قرارها بشأن “دونور”'}, {'community_id': '11', 'articles': [{'id': '183', 'title': 'أم ترمي بنفسها في البحر رفقة طفلها في محاولة للهجرة سباحة نحو سبتة', 'source': 'rue20.com', 'link': 'https://rue20.com/944447.html', 'summary': 'أم ترمي بنفسها في البحر رفقة طفلها في محاولة للهجرة سباحة نحو سبتة.  . متابعة في مشهد مأساوي يُجسّد أقسى درجات اليأس والبحث عن فرصة لحياة أفضل، أقدمت أمّ مغربية على مغامرة خطيرة برفقة طفلها القاصر، محاوِلة العبور سباحة من شاطئ مدينة الفنيدق نحو مدينة سبتة المحتلة. وبحسب مصادر إعلامية محلية، فقد رصد عناصر الحرس المدني الإسباني السيدة وهي تُصارع الأمواج العاتية رفقة طفل لا يتجاوز الخبر أم ترمي بنفسها في البحر رفقة طفلها في محاولة للهجرة سباحة نحو سبتة  .', 'size': 2}, {'id': '300', 'title': 'واقعة صادمة بشاطئ سبتة.. أم تخاطر بحياة ابنها الصغير في محاولة للعبور سباحة نحو الضفة الأخرى', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-665426.html', 'summary': 'واقعة صادمة بشاطئ سبتة.. أم تخاطر بحياة ابنها الصغير في محاولة للعبور سباحة نحو الضفة الأخرى. شهد شاطئ مدينة سبتة المحتلة، اليوم، حادثًا مؤثرًا بعدما أقدمت سيدة رفقة ابنها البالغ من العمر 6 سنوات على محاولة العبور سباحة من سواحل الفنيدق في اتجاه سبتة المحتلة. وحسب شهود عيان، فقد شوهدت الأم وهي تمسك بطفلها الصغير فوق “كمّارة” بلاستيكية، في محاولة يائسة لتجاوز الأمواج العاتية. المشهد كان مؤلمًا وصادمًا، حيث كاد الاثنان', 'size': 2}], 'main_title': 'أم ترمي بنفسها في البحر رفقة طفلها في محاولة للهجرة سباحة نحو سبتة'}, {'community_id': '12', 'articles': [{'id': '298', 'title': 'الطقس غدا الإثنين.. ضباب محلي وأجواء غائمة على السواحل الشمالية والوسطى', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-665434.html', 'summary': 'الطقس غدا الإثنين.. ضباب محلي وأجواء غائمة على السواحل الشمالية والوسطى. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليوم غد الاثنين، تشكل كتل ضبابية محليا على السواحل الشمالية والوسطى خلال الصباح والليل. كما يرتقب أن تكون السماء غائمة بالواجهة المتوسطية وشمال غرب الأقاليم الصحراوية للمملكة، مع نزول قطرات مطرية جد خفيفة. وستتراوح درجات الحرارة الدنيا، ما بين 08 و 14 درجة بمرتفعات الأطلس، وما بين 14 و', 'size': 3}, {'id': '306', 'title': 'توقعات أحوال الطقس غدا الاثنين', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/207314', 'summary': 'توقعات أحوال الطقس غدا الاثنين.  تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليوم غد الاثنين، تشكل كتل ضبابية محليا على السواحل الشمالية والوسطى خلال الصباح والليل. كما يرتقب أن تكون السماء غائمة بالواجهة المتوسطية وشمال غرب الأقاليم الصحراوية للمملكة، مع نزول قطرات مطرية جد خفيفة. وستتراوح درجات الحرارة الدنيا، ما بين 08 و 14 درجة بمرتفعات الأطلس، ومابين 14', 'size': 3}, {'id': '358', 'title': 'طقس الإثنين.. قطرات مطرية مرتقبة بهذه المناطق', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-593550.html', 'summary': 'طقس الإثنين.. قطرات مطرية مرتقبة بهذه المناطق. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليوم الاثنين، تشكل كتل ضبابية محليا على السواحل الشمالية والوسطى خلال الصباح والليل. كما يرتقب أن تكون السماء غائمة بالواجهة المتوسطية وشمال غرب الأقاليم الصحراوية للمملكة، مع نزول قطرات مطرية جد خفيفة. وستتراوح درجات الحرارة الدنيا، ما بين 08 و 14 درجة بمرتفعات الأطلس، وما بين 14', 'size': 3}], 'main_title': 'الطقس غدا الإثنين.. ضباب محلي وأجواء غائمة على السواحل الشمالية والوسطى'}, {'community_id': '13', 'articles': [{'id': '301', 'title': 'النقابة الوطنية للصحافة المغربية تثمن توجيهات الملك حول الإعلام والمسؤولية المشتركة', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-665424.html', 'summary': 'النقابة الوطنية للصحافة المغربية تثمن توجيهات الملك حول الإعلام والمسؤولية المشتركة. تابعت النقابة الوطنية للصحافة المغربية باهتمام بالغ الخطاب الملكي السامي بمناسبة افتتاح السنة التشريعية الجديدة، والذي جاء في ظرف سياسي واجتماعي دقيق، حاملاً توجيهات واضحة بشأن دور الإعلام في تعزيز الثقة بين الدولة والمجتمع، وتحصين الاختيار الديمقراطي، وتقوية جسور التواصل بين المؤسسات والمواطن، لا سيما فيما يتعلق بحقوقه وحرياته، في إطار المسؤولية المشتركة. وأكد الخطاب', 'size': 2}, {'id': '420', 'title': 'النقابة الوطنية للصحافة المغربية: خطاب الملك بالبرلمان تضمن دعوة صريحة لتعزيز الثقة في الجسم الصحافي الوطني', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/228373/', 'summary': 'النقابة الوطنية للصحافة المغربية: خطاب الملك بالبرلمان تضمن دعوة صريحة لتعزيز الثقة في الجسم الصحافي الوطني. عبّرت النقابة الوطنية للصحافة المغربية عن إشادتها الكبيرة بالمضامين العميقة التي حملها الخطاب الملكي السامي الذي ألقاه جلالة الملك محمد السادس، يوم الجمعة، بمناسبة افتتاح السنة التشريعية الجديدة، معتبرة أن الخطاب جاء في ظرف سياسي واجتماعي دقيق، ووجّه رسائل قوية حول المسؤولية المشتركة في بناء الثقة بين الدولة والمجتمع، وتعزيز أدوار الإعلام الوطني كجسر', 'size': 2}], 'main_title': 'النقابة الوطنية للصحافة المغربية تثمن توجيهات الملك حول الإعلام والمسؤولية المشتركة'}, {'community_id': '7', 'articles': [{'id': '305', 'title': 'منتخب المغرب يفوز على أمريكا 3-1 وتأهل لنصف نهائي كأس العالم للشباب', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/207318', 'summary': 'منتخب المغرب يفوز على أمريكا 3-1 وتأهل لنصف نهائي كأس العالم للشباب.  تأهل المنتخب الوطني المغرب لأقل من 20 سنة إلى نصف نهائي كأس العالم لهذه الفئة الجارية أطوارها في الشيلي عقب تفوقه على نظيره الامريكي بثلاثة أهداف لواحد في المباراة التي جمعتهما مساء اليوم الأحد على أرضية ملعب “إل تينيينتي” بمدينة رانكاغوا، (87 كلم جنوب سانتياغو ) برسم ربع نهائي منافسات كأس العالم لأقل من', 'size': 2}, {'id': '359', 'title': 'المنتخب المغربي يهزم أمريكا ويتأهل إلى المربع الذهبي للمونديال', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-593559.html', 'summary': 'المنتخب المغربي يهزم أمريكا ويتأهل إلى المربع الذهبي للمونديال. تأهل المنتخب الوطني المغرب لأقل من 20 سنة إلى نصف نهائي كأس العالم المقام في الشيلي، وذلك عقب فوزه على نظيره الامريكي بثلاثة أهداف لواحد في المباراة التي جمعتهما مساء اليوم الأحد على أرضية ملعب “إل تينيينتي” بمدينة رانكاغوا لحساب ربع نهائي منافسات “المونديال”. وكان المنتخب المغربي سباقا للتسجيل بواسطة الظهير الايسر', 'size': 2}], 'main_title': 'منتخب المغرب يفوز على أمريكا 3-1 وتأهل لنصف نهائي كأس العالم للشباب'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    