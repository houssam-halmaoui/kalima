<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 24/09/2025 - 18h26</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '5', 'articles': [{'id': '13', 'title': 'أخنوش يدعو من الأمم المتحدة لجعل الذكاء الاصطناعي رافعة للتقدم المشترك', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-660165.html', 'summary': 'أخنوش يدعو من الأمم المتحدة لجعل الذكاء الاصطناعي رافعة للتقدم المشترك. هبة بريس أكد رئيس الحكومة، عزيز أخنوش، الثلاثاء، أن الذكاء الاصطناعي فرض نفسه في غضون بضع سنوات، كثورة تكنولوجية تعيد صياغة اقتصاداتنا وأنماط حياتنا، معبرا عن إدراك بلادنا للفرص الهائلة التي يوفرها، ووعيها التام بحجم التحديات التي يطرحها. واعتبر في كلمة المملكة أمام الدورة الثمانين للجمعية العامة للأمم المتحدة المنعقدة حاليا بنيويورك، أن الذكاء الاصطناعي', 'size': 2}, {'id': '176', 'title': 'بالأمم المتحدة.. المغرب يدعو  لطي النزاع المفتعل حول الصحراء المغربية', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a8%d8%a7%d9%84%d8%a3%d9%85%d9%85-%d8%a7%d9%84%d9%85%d8%aa%d8%ad%d8%af%d8%a9-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d9%8a%d8%af%d8%b9%d9%88-%d9%84%d8%b7%d9%8a-%d8%a7%d9%84%d9%86%d8%b2%d8%a7%d8%b9/', 'summary': 'بالأمم المتحدة.. المغرب يدعو لطي النزاع المفتعل حول الصحراء المغربية. أكد رئيس الحكومة، عزيز أخنوش، الثلاثاء بنيويورك، أن مخطط الحكم الذاتي في إطار السيادة المغربية يعد الحل الوحيد الواقعي والدائم للنزاع الإقليمي حول الصحراء المغربية. وفي مداخلة باسم المغرب، خلال الدورة الـ80 للجمعية العامة للأمم المتحدة، أبرز أخنوش الدعم الدولي المتزايد لفائدة مخطط الحكم الذاتي وسيادة المغرب على صحرائه، بفضل الدينامية التي أطلقها الملك  بالأمم المتحدة.. المغرب يدعو لطي النزاع المفتعل حول الصحراء المغربية     .', 'size': 4}, {'id': '229', 'title': 'الأمم المتحدة.. مخطط الحكم الذاتي في إطار السيادة المغربية، الحل الوحيد الواقعي والدائم لقضية الصحراء', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/227453/', 'summary': 'الأمم المتحدة.. مخطط الحكم الذاتي في إطار السيادة المغربية، الحل الوحيد الواقعي والدائم لقضية الصحراء. أكد رئيس الحكومة، عزيز أخنوش، الثلاثاء بنيويورك، أن مخطط الحكم الذاتي في إطار السيادة المغربية يعد الحل الوحيد الواقعي والدائم للنزاع الإقليمي حول الصحراء المغربية. وفي مداخلة باسم المغرب، خلال الدورة الـ80 للجمعية العامة للأمم المتحدة، أبرز السيد أخنوش الدعم الدولي المتزايد لفائدة مخطط الحكم الذاتي وسيادة المغرب على صحرائه، بفضل الدينامية التي أطلقها صاحب', 'size': 5}, {'id': '237', 'title': 'أخنوش من الأمم المتحدة: حان الوقت لطي النزاع المفتعل  في الصحراء', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%a3%d8%ae%d9%86%d9%88%d8%b4-%d9%85%d9%86-%d8%a7%d9%84%d8%a3%d9%85%d9%85-%d8%a7%d9%84%d9%85%d8%aa%d8%ad%d8%af%d8%a9-%d8%ad%d8%a7%d9%86-%d8%a7%d9%84%d9%88%d9%82%d8%aa-%d9%84%d8%b7%d9%8a-%d8%a7%d9%84/', 'summary': 'أخنوش من الأمم المتحدة: حان الوقت لطي النزاع المفتعل في الصحراء. المساء اليوم: قال رئيس الحكومة، عزيز أخنوش، الثلاثاء بنيويورك، إن مخطط الحكم الذاتي في إطار السيادة المغربية يعد الحل الوحيد الواقعي والدائم للنزاع الإقليمي حول الصحراء. وفي مداخلة باسم المغرب، خلال الدورة الـ80 للجمعية العامة', 'size': 4}, {'id': '244', 'title': 'الأمم المتحدة.. المغرب يجدد التأكيد على أن الحكم الذاتي هو الحل الوحيد والواقعي والدائم لقضية الصحراء', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d8%a3%d9%85%d9%85-%d8%a7%d9%84%d9%85%d8%aa%d8%ad%d8%af%d8%a9-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d9%8a%d8%ac%d8%af%d8%af-%d8%a7%d9%84%d8%aa%d8%a3%d9%83%d9%8a%d8%af-%d8%b9%d9%84%d9%89/', 'summary': 'الأمم المتحدة.. المغرب يجدد التأكيد على أن الحكم الذاتي هو الحل الوحيد والواقعي والدائم لقضية الصحراء. قال رئيس الحكومة، عزيز أخنوش، يوم الثلاثاء 23 شتنبر 2025 بنيويورك، إن مخطط الحكم الذاتي في إطار السيادة المغربية يعد الحل الوحيد الواقعي والدائم للنزاع الإقليمي المفتعل حول الصحراء المغربية. وفي هذا الصدد، أشار أخنوش في مداخلة باسم المغرب، خلال الدورة الـ80 للجمعية العامة للأمم المتحدة، إلى الدعم الدولي المتزايد لفائدة مخطط الحكم …  الأمم المتحدة.. المغرب يجدد التأكيد على أن الحكم الذاتي هو الحل الوحيد والواقعي والدائم لقضية الصحراء     .', 'size': 4}], 'main_title': 'الأمم المتحدة.. مخطط الحكم الذاتي في إطار السيادة المغربية، الحل الوحيد الواقعي والدائم لقضية الصحراء'}, {'community_id': '1', 'articles': [{'id': '25', 'title': 'أخنوش من نيويورك: حل الدولتين هو السبيل الأوحد لإرساء سلام دائم وشامل في الشرق الأوسط', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-660116.html', 'summary': 'أخنوش من نيويورك: حل الدولتين هو السبيل الأوحد لإرساء سلام دائم وشامل في الشرق الأوسط. هبة بريس شدد رئيس الحكومة عزيز أخنوش، على أن المغرب واستنادا إلى التوجه الذي سنه جلالة الملك، يظل مؤمنا بأن “حل الدولتين هو السبيل الأوحد لإرساء سلام دائم وشامل في الشرق الأوسط. وهو الحل الذي لا يقبل التأجيل أو التهميش، بل ينبغي أن يصبح التزاما أخلاقيا ومطلبا سياسيا فوريا”. وأوضح رئيس الحكومة في كلمة باسم', 'size': 2}, {'id': '153', 'title': 'أخنوش من نيويورك: حل الدولتين خيار لا يقبل التأجيل أو التهميش', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-590683.html', 'summary': 'أخنوش من نيويورك: حل الدولتين خيار لا يقبل التأجيل أو التهميش. أكد رئيس الحكومة، عزيز أخنوش، أن المغرب، انسجاما مع الرؤية التي يرعاها جلالة الملك محمد السادس، يعتبر أن حل الدولتين هو السبيل الوحيد لتحقيق سلام عادل وشامل في الشرق الأوسط، مشددا على أن هذا الحل “لا يقبل التأجيل أو التهميش، بل ينبغي أن يتحول إلى التزام أخلاقي ومطلب سياسي عاجل”. وخلال كلمته', 'size': 2}], 'main_title': 'أخنوش من نيويورك: حل الدولتين هو السبيل الأوحد لإرساء سلام دائم وشامل في الشرق الأوسط'}, {'community_id': '7', 'articles': [{'id': '47', 'title': 'الجواهري: البنك الرقمي البريطاني “ريڤولت” مهتم بدخول السوق المغربية', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-660006.html', 'summary': 'الجواهري: البنك الرقمي البريطاني “ريڤولت” مهتم بدخول السوق المغربية. هبة بريس – الرباط أكد والي بنك المغرب، عبد اللطيف الجواهري، اليوم الثلاثاء بالرباط، أن البنك الرقمي البريطاني “ريڤولت” أبدى اهتمامه بالسوق المغربية. وأشار الجواهري، خلال ندوة صحفية عقب انعقاد الاجتماع الفصلي الثالث لمجلس بنك المغرب برسم سنة 2025، إلى أن مؤسسة “ريڤولت”، التي تنشط في عدة بلدان عبر العالم، كانت قد عقدت اجتماعا في', 'size': 2}, {'id': '238', 'title': 'الجواهري: البنك الرقمي يبدي اهتمامه بالسوق المغربية', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%a7%d9%84%d8%ac%d9%88%d8%a7%d9%87%d8%b1%d9%8a-%d8%a7%d9%84%d8%a8%d9%86%d9%83-%d8%a7%d9%84%d8%b1%d9%82%d9%85%d9%8a-%d9%8a%d8%a8%d8%af%d9%8a-%d8%a7%d9%87%d8%aa%d9%85%d8%a7%d9%85%d9%87-%d8%a8%d8%a7/', 'summary': 'الجواهري: البنك الرقمي يبدي اهتمامه بالسوق المغربية. المساء اليوم – الرباط: قال والي بنك المغرب، عبد اللطيف الجواهري، إن البنك الرقمي البريطاني “ريڤولت” أبدى اهتمامه بالسوق المغربية. وأشار الجواهري، خلال ندوة صحفية، أمس الثلاثاء بالرباط، عقب انعقاد الاجتماع الفصلي الثالث لمجلس بنك', 'size': 2}], 'main_title': 'الجواهري: البنك الرقمي البريطاني “ريڤولت” مهتم بدخول السوق المغربية'}, {'community_id': '3', 'articles': [{'id': '50', 'title': 'جو ويلسون: “البوليساريو” منظمة إرهابية تزعزع السلم والأمن العالميين', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-659996.html', 'summary': 'جو ويلسون: “البوليساريو” منظمة إرهابية تزعزع السلم والأمن العالميين. هبة بريس أكد عضو الكونغرس الأمريكي، جو ويلسون، اليوم الثلاثاء، أن جماعة “البوليساريو” الانفصالية “منظمة إرهابية” تزعزع السلم والأمن العالميين، مذكرا بأنه سبق له أن تقدم بمشروع قانون من الحزبين على مستوى الكونغرس الأمريكي يروم تصنيف هذه الجماعة المسلحة منظمة إرهابية أجنبية. وفي تصريح للصحافة بنيويورك، قال ويلسون إن “البوليساريو هي، بالفعل، منظمة إرهابية وقمت', 'size': 2}, {'id': '232', 'title': 'عضو الكونغرس الأمريكي جو ويلسون: البوليساريو منظمة إرهابية تزعزع السلم والأمن العالميين', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/227443/', 'summary': 'عضو الكونغرس الأمريكي جو ويلسون: البوليساريو منظمة إرهابية تزعزع السلم والأمن العالميين. أكد عضو الكونغرس الأمريكي، جو ويلسون، اليوم الثلاثاء، أن جماعة “البوليساريو” الانفصالية “منظمة إرهابية” تزعزع السلم والأمن العالميين، مذكرا بأنه سبق له أن تقدم بمشروع قانون من الحزبين على مستوى الكونغرس الأمريكي يروم تصنيف هذه الجماعة المسلحة منظمة إرهابية أجنبية. وفي تصريح للصحافة بنيويورك، قال السيد ويلسون إن “البوليساريو هي، بالفعل، منظمة إرهابية وقمت بتقديم', 'size': 2}], 'main_title': 'جو ويلسون: “البوليساريو” منظمة إرهابية تزعزع السلم والأمن العالميين'}, {'community_id': '6', 'articles': [{'id': '70', 'title': 'مقاييس الأمطار المسجلة في 24 ساعة الماضية', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/413228.html', 'summary': 'مقاييس الأمطار المسجلة في 24 ساعة الماضية. في ما يلي مقاييس التساقطات المطرية المسجلة بالمملكة خلال الـ 24 ساعة الماضية، حسب المديرية العامة للأرصاد الجوية : - فكيك : 12 ملم - بوعرفة :', 'size': 2}, {'id': '147', 'title': 'مقاييس الأمطار المسجلة بالمملكة خلال الـ 24 ساعة الماضية', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-590707.html', 'summary': 'مقاييس الأمطار المسجلة بالمملكة خلال الـ 24 ساعة الماضية. في ما يلي مقاييس التساقطات المطرية المسجلة بالمملكة خلال الـ 24 ساعة الماضية، حسب المديرية العامة للأرصاد الجوية: – بوعرفة وميدلت : 05 ملم.', 'size': 2}], 'main_title': 'مقاييس الأمطار المسجلة في 24 ساعة الماضية'}, {'community_id': '4', 'articles': [{'id': '115', 'title': 'هام .. توقيف حركة السير بعدد من المحاور الرئيسية بالدار البيضاء الأحد القادم', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/413277.html', 'summary': 'هام .. توقيف حركة السير بعدد من المحاور الرئيسية بالدار البيضاء الأحد القادم. في إطار تنظيم سباق «10KM Internatial by WeCaablanca»، والمقرر إجراؤه يوم الأحد 28 شتنبر الجاري، سيتم توقيف حركة السير بعدد من المحاور الرئيسية بالمدينة من', 'size': 2}, {'id': '195', 'title': 'البيضاء.. توقيف حركة السير بعدد من المحاور الرئيسية نهاية الأسبوع', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/476626.html', 'summary': 'البيضاء.. توقيف حركة السير بعدد من المحاور الرئيسية نهاية الأسبوع. في إطار تنظيم سباق "10KM Internatial by WeCaablanca"، والمقرر إجراؤه يوم الأحد 28 شتنبر الجاري، سيتم توقيف حركة السير بعدد من المحاور الرئيسية بالمدينة من أجل ضمان انسيابية السباق والحفاظ على سلامة المشاركين.', 'size': 2}], 'main_title': 'هام .. توقيف حركة السير بعدد من المحاور الرئيسية بالدار البيضاء الأحد القادم'}, {'community_id': '9', 'articles': [{'id': '149', 'title': '“عماد غماد” مديرا عاما جديدا لمجموعة كوسومار خلفا لـ”حسن منير”', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-590699.html', 'summary': '“عماد غماد” مديرا عاما جديدا لمجموعة كوسومار خلفا لـ”حسن منير”. قرر مجلس إدارة مجموعة كوسومار، خلال اجتماعه يوم أمس برئاسة هشام بلعمرا، تعيين عماد غماد مديرا عاما جديدا للمجموعة، خلفا لحسن منير الذي أنهى مهامه بعد بلوغه سن التقاعد وإثر أسباب صحية. حيث أعرب المجلس في بلاغ صادر عنه، عن تقديره الكبير لما قدمه حسن منير من خدمات طوال أربعة عقود، سواء على مستوى قيادة', 'size': 2}, {'id': '164', 'title': 'تعيين عماد غماد مديرا جديدا لمجموعة “كوسومار” خلفا لحسن منير', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1102412.html', 'summary': 'تعيين عماد غماد مديرا جديدا لمجموعة “كوسومار” خلفا لحسن منير. أعلنت مجموعة كوسومار عن تعيين عماد غماد في منصب المدير العام الجديد، خلفا لحسن منير الذي قرر إنهاء مهامه لأسباب صحية. جاء هذا القرار خلال اجتماع مجلس الإدارة الذي عقد أمس الثلاثاء 23 شتنبر 2025، برئاسة هشام بلمراح. وخلال الاجتماع، وجه مجلس الإدارة الشكر والتقدير لحسن منير على جهوده وتفانيه على مدار أربعة عقود من ظهرت المقالة تعيين عماد غماد مديرا جديدا لمجموعة “كوسومار” خلفا لحسن منير  .', 'size': 2}], 'main_title': '“عماد غماد” مديرا عاما جديدا لمجموعة كوسومار خلفا لـ”حسن منير”'}, {'community_id': '2', 'articles': [{'id': '166', 'title': 'أخنوش من الأمم المتحدة: إفريقيا أولوية في دبلوماسية المغرب وفضاء للانتماء والتضامن والشراكة', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1102407.html', 'summary': 'أخنوش من الأمم المتحدة: إفريقيا أولوية في دبلوماسية المغرب وفضاء للانتماء والتضامن والشراكة. أكد رئيس الحكومة، عزيز أخنوش، من مقر الأمم المتحدة، أن المغرب، وفق رؤية الملك محمد السادس، لم يجعل من القارة الإفريقية مجرد أولوية دبلوماسية، بل اعتبرها أيضا فضاء طبيعيا للانتماء والتضامن والشراكة. وفي كلمة ألقاها خلال أشغال الدورة الثمانين للجمعية العامة للأمم المتحدة المنعقدة حاليا في نيويورك، شدد أخنوش على أن الملك ما فتئ يؤكد ظهرت المقالة أخنوش من الأمم المتحدة: إفريقيا أولوية في دبلوماسية المغرب وفضاء للانتماء والتضامن والشراكة  .', 'size': 2}, {'id': '192', 'title': 'كلمة رئيس الحكومة في الأمم المتحدة تبرز الرؤية الملكية لإفريقيا موحدة ومزدهرة', 'source': 'rue20.com', 'link': 'https://rue20.com/939271.html', 'summary': 'كلمة رئيس الحكومة في الأمم المتحدة تبرز الرؤية الملكية لإفريقيا موحدة ومزدهرة.  ا الرباط شدد رئيس الحكومة عزيز أخنوش، يوم الثلاثاء في نيويورك، أنه واستنادا إلى رؤية جلالة الملك محمد السادس، “لم تتخذ المملكة المغربية إفريقيا كأولوية لدبلوماسيتها فحسب، بل جعلتها أيضا فضاء طبيعيا للانتماء والتضامن والشراكة”. وأكد رئيس الحكومة في كلمة باسم المغرب، أمام أشغال الدورة 80 للجمعية العامة لمنظمة الأمم المتحدة، أن جلالة الخبر كلمة رئيس الحكومة في الأمم المتحدة تبرز الرؤية الملكية لإفريقيا موحدة ومزدهرة  .', 'size': 2}], 'main_title': 'أخنوش من الأمم المتحدة: إفريقيا أولوية في دبلوماسية المغرب وفضاء للانتماء والتضامن والشراكة'}, {'community_id': '12', 'articles': [{'id': '177', 'title': 'رئيس الحكومة: المغرب يدعو إلى تنفيذ خريطة الطريق لإعمار غزة', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%b1%d8%a6%d9%8a%d8%b3-%d8%a7%d9%84%d8%ad%d9%83%d9%88%d9%85%d8%a9-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d9%8a%d8%af%d8%b9%d9%88-%d8%a5%d9%84%d9%89-%d8%aa%d9%86%d9%81%d9%8a%d8%b0-%d8%ae%d8%b1%d9%8a/', 'summary': 'رئيس الحكومة: المغرب يدعو إلى تنفيذ خريطة الطريق لإعمار غزة. جدد رئيس الحكومة، عزيز أخنوش، أمس الثلاثاء بنيويورك، تأكيد دعم المغرب لحل الدولتين في الشرق الأوسط، الذي يظل "السبيل الأوحد" لإرساء سلام دائم وشامل في المنطقة. وفي كلمة باسم المغرب، خلال الدورة الثمانين للجمعية العامة للأمم المتحدة، أبرز أخنوش أن "المغرب، بقيادة الملك محمد السادس، رئيس لجنة القدس، يظل مؤمنا بأن حل الدولتين هو السبيل  رئيس الحكومة: المغرب يدعو إلى تنفيذ خريطة الطريق لإعمار غزة     .', 'size': 2}, {'id': '247', 'title': 'المغرب يجدد تأكيد دعمه لحل الدولتين', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d9%8a%d8%ac%d8%af%d8%af-%d8%aa%d8%a3%d9%83%d9%8a%d8%af-%d8%af%d8%b9%d9%85%d9%87-%d9%84%d8%ad%d9%84-%d8%a7%d9%84%d8%af%d9%88%d9%84%d8%aa%d9%8a%d9%86/', 'summary': 'المغرب يجدد تأكيد دعمه لحل الدولتين. جدد رئيس الحكومة، عزيز أخنوش، أمس الثلاثاء 23 شتنبر 2025، بنيويورك، تأكيد دعم المغرب لحل الدولتين في الشرق الأوسط، الذي يظل “السبيل الأوحد” لإرساء سلام دائم وشامل في المنطقة. وفي كلمة باسم المغرب، خلال الدورة الثمانين للجمعية العامة للأمم المتحدة، أبرز أخنوش أن “المغرب، بقيادة الملك محمد السادس، رئيس لجنة القدس، يظل مؤمنا …  المغرب يجدد تأكيد دعمه لحل الدولتين     .', 'size': 2}], 'main_title': 'رئيس الحكومة: المغرب يدعو إلى تنفيذ خريطة الطريق لإعمار غزة'}, {'community_id': '8', 'articles': [{'id': '289', 'title': 'مصرع خمسة أشخاص اختناقا بشيشاوة', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d9%85%d8%b5%d8%b1%d8%b9-%d8%ae%d9%85%d8%b3%d8%a9-%d8%a3%d8%b4%d8%ae%d8%a7%d8%b5-%d8%a7%d8%ae%d8%aa%d9%86%d8%a7%d9%82%d8%a7-%d8%a8%d8%b4%d9%8a%d8%b4%d8%a7%d9%88%d8%a9-1629422.html', 'summary': 'مصرع خمسة أشخاص اختناقا بشيشاوة. أفادت السلطات المحلية بإقليم شيشاوة بأن 5 أشخاص، 4 منهم من عائلة واحدة، لقوا مصرعهم اختناقا، اليوم الأربعاء، أثناء قيامهم بأشغال تنقية حفرة مخصصة للصرف الصحي بدوار النواصر جماعة سيدي بوزيد. وفور إشعارها بالحادث، انتقلت السلطات المحلية والأمنية ومصالح الوقاية المدنية إلى عين المكان، حيث تم انتشال جثث الضحايا، وإيداعها بالمستشفى الإقليمي بشيشاوة. وتم فتح  مصرع خمسة أشخاص اختناقا بشيشاوة     - هسبريس جريدة إلكترونية مغربية .', 'size': 4}, {'id': '335', 'title': 'إقليم شيشاوة.. مصرع خمسة أشخاص اختناقا أثناء قيامهم بأشغال تنقية حفرة مخصصة للصرف الصحي', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/206651', 'summary': 'إقليم شيشاوة.. مصرع خمسة أشخاص اختناقا أثناء قيامهم بأشغال تنقية حفرة مخصصة للصرف الصحي.  أفادت السلطات المحلية بإقليم شيشاوة بأن 5 أشخاص، 4 منهم من عائلة واحدة، لقوا مصرعهم اختناقا، اليوم الأربعاء، أثناء قيامهم بأشغال تنقية حفرة مخصصة للصرف الصحي بدوار النواصر جماعة سيدي بوزيد. وفور إشعارها بالحادث، انتقلت السلطات المحلية والأمنية ومصالح الوقاية المدنية إلى عين المكان، حيث تم انتشال جثـ ـث الضحايا،وإيداعها بالمستشفى الإقليمي بشيشاوة.', 'size': 5}, {'id': '371', 'title': 'بالصور من إقليم شيشاوة.. مصرع 5 أشخاص اختناقا في حفرة مخصصة للصرف الصحي', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a8%d8%a7%d9%84%d8%b5%d9%88%d8%b1-%d9%85%d9%86-%d8%a5%d9%82%d9%84%d9%8a%d9%85-%d8%b4%d9%8a%d8%b4%d8%a7%d9%88%d8%a9-%d9%85%d8%b5%d8%b1%d8%b9-5-%d8%a3%d8%b4%d8%ae%d8%a7%d8%b5-%d8%a7%d8%ae%d8%aa/', 'summary': 'بالصور من إقليم شيشاوة.. مصرع 5 أشخاص اختناقا في حفرة مخصصة للصرف الصحي. أفادت السلطات المحلية بإقليم شيشاوة بأن 5 أشخاص، 4 منهم من عائلة واحدة، لقوا مصرعهم اختناقا، اليوم الأربعاء (24 شتنبر)، أثناء قيامهم بأشغال تنقية حفرة مخصصة للصرف الصحي بدوار النواصر جماعة سيدي بوزيد. وفور إشعارها بالحادث، انتقلت السلطات المحلية والأمنية ومصالح الوقاية المدنية إلى عين المكان، حيث تم انتشال جثث الضحايا، وإيداعها بالمستشفى الإقليمي بشيشاوة.', 'size': 5}, {'id': '390', 'title': 'مأساة بشيشاوة.. مصرع أسرة من 5 أفراد داخل مطمورة بمنزلهم', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1102521.html', 'summary': 'مأساة بشيشاوة.. مصرع أسرة من 5 أفراد داخل مطمورة بمنزلهم. شهدت منطقة سيدي بوزيد بإقليم شيشاوة، صباح اليوم الأربعاء 24 شتنبر، حادثا مأساويا أودى بحياة أسرة كاملة مكوّنة من خمسة أفراد، بعدما سقطوا تباعا داخل مطمورة للصرف الصحي تقع وسط منزلهم. وبحسب المعطيات الأولية، بدأت المأساة بسقوط الأب في المطمورة، ليحاول باقي أفراد الأسرة إنقاذه واحدا تلو الآخر، غير أن الغازات السامة المتراكمة في قاع ظهرت المقالة مأساة بشيشاوة.. مصرع أسرة من 5 أفراد داخل مطمورة بمنزلهم  .', 'size': 4}, {'id': '404', 'title': 'مأساة في شيشاوة: مصرع خمسة أشخاص اختناقا داخل حفرة للصرف الصحي', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d9%85%d8%a3%d8%b3%d8%a7%d8%a9-%d9%81%d9%8a-%d8%b4%d9%8a%d8%b4%d8%a7%d9%88%d8%a9-%d9%88%d9%81%d8%a7%d8%a9-%d8%ae%d9%85%d8%b3%d8%a9-%d8%a3%d8%b4%d8%ae%d8%a7%d8%b5-%d8%a7%d8%ae%d8%aa%d9%86%d8%a7%d9%82/', 'summary': 'مأساة في شيشاوة: مصرع خمسة أشخاص اختناقا داخل حفرة للصرف الصحي. لقي خمسة أشخاص، بينهم أربعة من أسرة واحدة، مصرعهم اختناقا، اليوم الأربعاء، أثناء قيامهم بأشغال تنظيف حفرة مخصصة للصرف الصحي بدوار النواصر التابع لجماعة سيدي بوزيد، إقليم شيشاوة. وأفادت السلطات المحلية أن فرق الوقاية المدنية، مدعومة بالسلطات والأجهزة الأمنية، انتقلت إلى مكان الحادث حيث تمكنت من انتشال الجثث وإيداعها بالمستشفى الإقليمي بشيشاوة. وقد باشرت  مأساة في شيشاوة: مصرع خمسة أشخاص اختناقا داخل حفرة للصرف الصحي     .', 'size': 5}], 'main_title': 'إقليم شيشاوة.. مصرع خمسة أشخاص اختناقا أثناء قيامهم بأشغال تنقية حفرة مخصصة للصرف الصحي'}, {'community_id': '10', 'articles': [{'id': '292', 'title': 'الملك محمد السادس يعطي انطلاقة مشاريع سككية كبرى بالدار البيضاء', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-660315.html', 'summary': 'الملك محمد السادس يعطي انطلاقة مشاريع سككية كبرى بالدار البيضاء. أشرف صاحب الجلالة الملك محمد السادس، نصره الله، اليوم الأربعاء، بعمالة مقاطعة الحي الحسني بالدار البيضاء، على إعطاء انطلاقة مشاريع سككية مهيكلة ذات وقع كبير على التنقل داخل الحاضرة الكبرى للدار البيضاء، بقيمة 20 مليار درهم. وتشكل هذه المشاريع المهيكلة، التي تستجيب للرهانات المستقبلية للتنقل الحضري بهذه الحاضرة، جزءا من برنامج شامل رصد له غلاف', 'size': 3}, {'id': '370', 'title': 'الدار البيضاء.. جلالة الملك يعطي انطلاقة مشاريع سككية مهيكلة', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a7%d9%84%d8%af%d8%a7%d8%b1-%d8%a7%d9%84%d8%a8%d9%8a%d8%b6%d8%a7%d8%a1-%d8%ac%d9%84%d8%a7%d9%84%d8%a9-%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%8a%d8%b9%d8%b7%d9%8a-%d8%a7%d9%86%d8%b7%d9%84%d8%a7%d9%82/', 'summary': 'الدار البيضاء.. جلالة الملك يعطي انطلاقة مشاريع سككية مهيكلة. أشرف صاحب الجلالة الملك محمد السادس، نصره الله، اليوم الأربعاء (24 شتنبر)، بعمالة مقاطعة الحي الحسني بالدار البيضاء، على إعطاء انطلاقة مشاريع سككية مهيكلة ذات وقع كبير على التنقل داخل الحاضرة الكبرى للدار البيضاء، بقيمة 20 مليار درهم. وتشكل هذه المشاريع المهيكلة، التي تستجيب للرهانات المستقبلية للتنقل الحضري بهذه الحاضرة، جزءا من برنامج شامل رصد', 'size': 3}, {'id': '457', 'title': 'الملك محمد السادس يعطي انطلاقة مشاريع سككية مهيكلة ذات وقع كبير على التنقل داخل الحاضرة الكبرى للدار البيضاء', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%85%d8%ad%d9%85%d8%af-%d8%a7%d9%84%d8%b3%d8%a7%d8%af%d8%b3-%d9%8a%d8%b9%d8%b7%d9%8a-%d8%a7%d9%86%d8%b7%d9%84%d8%a7%d9%82%d8%a9-%d9%85%d8%b4%d8%a7%d8%b1%d9%8a%d8%b9/', 'summary': 'الملك محمد السادس يعطي انطلاقة مشاريع سككية مهيكلة ذات وقع كبير على التنقل داخل الحاضرة الكبرى للدار البيضاء. أشرف الملك محمد السادس، اليوم الأربعاء، بعمالة مقاطعة الحي الحسني بالدار البيضاء، على إعطاء انطلاقة مشاريع سككية مهيكلة ذات وقع كبير على التنقل داخل الحاضرة الكبرى للدار البيضاء، بقيمة 20 مليار درهم. وتشكل هذه المشاريع المهيكلة، التي تستجيب للرهانات المستقبلية للتنقل الحضري بهذه الحاضرة، جزءا من برنامج شامل رصد له غلاف مالي قدره …  الملك محمد السادس يعطي انطلاقة مشاريع سككية مهيكلة ذات وقع كبير على التنقل داخل الحاضرة الكبرى للدار البيضاء     .', 'size': 3}], 'main_title': 'الملك محمد السادس يعطي انطلاقة مشاريع سككية كبرى بالدار البيضاء'}, {'community_id': '0', 'articles': [{'id': '354', 'title': 'لسبب تافه.. شخصان يعنفان طفلا ويحتجزانه داخل صندوق سيارة قبل رميه في منطقة خلاء ضواحي قلعة السراغنة', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/society/413299.html', 'summary': 'لسبب تافه.. شخصان يعنفان طفلا ويحتجزانه داخل صندوق سيارة قبل رميه في منطقة خلاء ضواحي قلعة السراغنة. تمكنت عناصر الشرطة بالمنطقة الإقليمية للأمن بمدينة قلعة السراغنة، مساء أمس الثلاثاء 23 شتنبر الجاري، من توقيف شخصين يشتبه في تورطهما في قضية تتعلق بتعنيف', 'size': 3}, {'id': '372', 'title': 'قلعة السراغنة.. توقيف شخصين تورطا في تعنيف واحتجاز قاصر', 'source': 'kifache.com', 'link': 'https://kifache.com/%d9%82%d9%84%d8%b9%d8%a9-%d8%a7%d9%84%d8%b3%d8%b1%d8%a7%d8%ba%d9%86%d8%a9-%d8%aa%d9%88%d9%82%d9%8a%d9%81-%d8%b4%d8%ae%d8%b5%d9%8a%d9%86-%d8%aa%d9%88%d8%b1%d8%b7%d8%a7-%d9%81%d9%8a-%d8%aa%d8%b9%d9%86/', 'summary': 'قلعة السراغنة.. توقيف شخصين تورطا في تعنيف واحتجاز قاصر. تمكنت عناصر الشرطة بالمنطقة الإقليمية للأمن بمدينة قلعة السراغنة، مساء أمس الثلاثاء (23 شتنبر)، من توقيف شخصين يُشتبه في تورطهما في قضية تتعلق بتعنيف قاصر واحتجازه وتعريض حياته للخطر. وقد أظهرت المعطيات الأولية أن المشتبه فيهما دخلا في خلاف عرضي مع قاصر يبلغ من العمر 14 سنة، بأحد شوارع المدينة، حيث قاما بتعنيفه واحتجازه داخل', 'size': 3}, {'id': '454', 'title': 'أمن قلعة السراغنة يتفاعل فورا مع فيديو تعنيف قاصر واحتجازه داخل سيارة ويوقف المتورطين', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/227466/', 'summary': 'أمن قلعة السراغنة يتفاعل فورا مع فيديو تعنيف قاصر واحتجازه داخل سيارة ويوقف المتورطين. تمكنت عناصر الشرطة بالمنطقة الإقليمية للأمن بمدينة قلعة السراغنة، مساء أمس الثلاثاء 23 شتنبر الجاري، من توقيف شخصين يشتبه في تورطهما في قضية تتعلق بتعنيف قاصر واحتجازه وتعريض حياته للخطر. وكان المشتبه فيهما قد دخلا في خلاف عرضي مع قاصر، يبلغ من العمر 14 سنة، بالشارع العام بمدينة قلعة السراغنة، حيث عرضاه للعنف واحتجزاه بداخل', 'size': 3}], 'main_title': 'لسبب تافه.. شخصان يعنفان طفلا ويحتجزانه داخل صندوق سيارة قبل رميه في منطقة خلاء ضواحي قلعة السراغنة'}, {'community_id': '11', 'articles': [{'id': '374', 'title': 'رواندا.. كاف يعرض مجسم كأس إفريقيا ضمن جولة ترويجية لـ”كان المغرب 2025″', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%b1%d9%88%d8%a7%d9%86%d8%af%d8%a7-%d9%83%d8%a7%d9%81-%d9%8a%d8%b9%d8%b1%d8%b6-%d9%85%d8%ac%d8%b3%d9%85-%d9%83%d8%a3%d8%b3-%d8%a5%d9%81%d8%b1%d9%8a%d9%82%d9%8a%d8%a7-%d8%b6%d9%85%d9%86-%d8%ac/', 'summary': 'رواندا.. كاف يعرض مجسم كأس إفريقيا ضمن جولة ترويجية لـ”كان المغرب 2025″. في خطوة لتعزيز الروابط بين جماهير الساحرة المستديرة بإفريقيا، عرضت الكونفدرالية الإفريقية لكرة القدم (كاف)، أمس الثلاثاء بكيغالي، مجسم كأس الأمم الإفريقية 2025 أمام الجماهير الرواندية، ضمن جولة الكأس الترويجية قبل انطلاق البطولة المقرر تنظيمها بالمغرب من 21 دجنبر إلى 18 يناير. وأتاحت التظاهرة، التي جرت بمنطقة المشجعين المخصصة لبطولة العالم للدراجات المنظمة بكيغالي، للجمهور', 'size': 3}, {'id': '418', 'title': 'الكاف يعرض مجسم كأس “كان المغرب” ضمن جولة أفريقية', 'source': 'rue20.com', 'link': 'https://rue20.com/939516.html', 'summary': 'الكاف يعرض مجسم كأس “كان المغرب” ضمن جولة أفريقية.  | متابعة في خطوة لتعزيز الروابط بين جماهير الساحرة المستديرة بإفريقيا، عرضت الكونفدرالية الإفريقية لكرة القدم (كاف)، أمس الثلاثاء بكيغالي، مجسم كأس الأمم الإفريقية 2025 أمام الجماهير الرواندية، ضمن جولة الكأس الترويجية قبل انطلاق البطولة المقرر تنظيمها بالمغرب من 21 دجنبر إلى 18 يناير. وأتاحت التظاهرة، التي جرت بمنطقة المشجعين المخصصة لبطولة العالم الخبر الكاف يعرض مجسم كأس “كان المغرب” ضمن جولة أفريقية  .', 'size': 3}, {'id': '428', 'title': 'انطلاق جولة كأس إفريقيا من كيغالي تحضيرا لـ”كان المغرب 2025″', 'source': 'machahid24.com', 'link': 'https://machahid24.com/sport/476644.html', 'summary': 'انطلاق جولة كأس إفريقيا من كيغالي تحضيرا لـ”كان المغرب 2025″. عرضت الكونفدرالية الإفريقية لكرة القدم (كاف)، أمس الثلاثاء بكيغالي، مجسم كأس الأمم الإفريقية 2025 أمام الجماهير الرواندية، ضمن جولة الكأس الترويجية قبل انطلاق البطولة المقرر تنظيمها بالمغرب من 21 دجنبر إلى 18 يناير، في خطوة لتعزيز الروابط بين جماهير الساحرة المستديرة بإفريقيا. وأتاحت التظاهرة، التي جرت بمنطقة المشجعين المخصصة لبطولة العالم للدراجات المنظمة بكيغالي، للجمهور …', 'size': 3}], 'main_title': 'رواندا.. كاف يعرض مجسم كأس إفريقيا ضمن جولة ترويجية لـ”كان المغرب 2025″'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    