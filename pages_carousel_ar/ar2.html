<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 12/08/2025 - 12h26</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '1', 'articles': [{'id': '5', 'title': 'تراجع أسعار الفائدة على القروض', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d8%aa%d8%b1%d8%a7%d8%ac%d8%b9-%d8%a3%d8%b3%d8%b9%d8%a7%d8%b1-%d8%a7%d9%84%d9%81%d8%a7%d8%a6%d8%af%d8%a9-%d8%b9%d9%84%d9%89-%d8%a7%d9%84%d9%82%d8%b1%d9%88%d8%b6-1607551.html', 'summary': 'تراجع أسعار الفائدة على القروض. أفادت نتائج الاستقصاء الفصلي لبنك المغرب حول أسعار الفائدة على القروض برسم الفصل الثاني من 2025 بأن سعر الفائدة الإجمالي على القروض تراجع إلى 4,84 في المائة، مسجلا انخفاضا بـ14 نقطة أساس. وأشار بنك المغرب إلى أنه على الصعيد الاقتصادي، استقرت أسعار الفائدة عند 4,65 في المائة بالنسبة لتسهيلات الخزينة، و4,83 في المائة لقروض التجهيز،  تراجع أسعار الفائدة على القروض     - هسبريس جريدة إلكترونية مغربية .', 'size': 3}, {'id': '140', 'title': 'أسعار الفائدة تتراجع بالمغرب.. هل يدخل الاقتصاد مرحلة انتعاش جديدة؟', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/320792/', 'summary': 'أسعار الفائدة تتراجع بالمغرب.. هل يدخل الاقتصاد مرحلة انتعاش جديدة؟. أفادت نتائج الاستقصاء الفصلي لبنك المغرب حول أسعار الفائدة على القروض برسم الفصل الثاني من 2025، بأن سعر الفائدة الإجمالي على القروض تراجع إلى 4,84 في المائة، مسجلا انخفاضا بـ14 نقطة أساس. وأشار بنك المغرب إلى أنه على الصعيد الاقتصادي، استقرت أسعار الفائدة عند 4,65 في المائة بالنسبة لتسهيلات الخزينة، و4,83 في المائة لقروض التجهيز،', 'size': 3}, {'id': '165', 'title': 'بنك المغرب: تراجع أسعار الفائدة على القروض إلى 4,84% في الفصل الثاني من 2025', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a8%d9%86%d9%83-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d8%aa%d8%b1%d8%a7%d8%ac%d8%b9-%d8%a3%d8%b3%d8%b9%d8%a7%d8%b1-%d8%a7%d9%84%d9%81%d8%a7%d8%a6%d8%af%d8%a9-%d8%b9%d9%84%d9%89-%d8%a7%d9%84%d9%82/', 'summary': 'بنك المغرب: تراجع أسعار الفائدة على القروض إلى 4,84% في الفصل الثاني من 2025. أفادت نتائج الاستقصاء الفصلي لبنك المغرب حول أسعار الفائدة على القروض برسم الفصل الثاني من 2025، بأن سعر الفائدة الإجمالي على القروض تراجع إلى 4,84 في المائة، مسجلا انخفاضا بـ14 نقطة أساس. وأشار بنك المغرب إلى أنه على الصعيد الاقتصادي، استقرت أسعار الفائدة عند 4,65 في المائة بالنسبة لتسهيلات الخزينة، و4,83 في المائة لقروض التجهيز،  بنك المغرب: تراجع أسعار الفائدة على القروض إلى 4,84% في الفصل الثاني من 2025     .', 'size': 3}], 'main_title': 'تراجع أسعار الفائدة على القروض'}, {'community_id': '2', 'articles': [{'id': '144', 'title': 'إشادة فرنسية بنجاح عملية مرحبا 2025', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/320789/', 'summary': 'إشادة فرنسية بنجاح عملية مرحبا 2025. أكدت الإذاعة الفرنسية (Beur FM) أن عملية “مرحبا 2025” تشهد إقبالا “غير مسبوق”، حيث تجاوز عدد أفراد الجالية المغربية المقيمين بالخارج الذين عبروا الحدود منذ شهر يونيو 2,7 مليون شخص، ما يؤكد “وفاء الجالية” و”ازدهار السياحة”. وأوضحت الإذاعة، في مقال على موقعها الإلكتروني بعنوان “صيف قياسي للجالية المغربية والسياحة في المغرب!”، أن “الأرقام تتحدث عن', 'size': 3}, {'id': '191', 'title': 'إذاعة فرنسية: عملية “مرحبا 2025” تشهد إقبالا “غير مسبوق”', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/472324.html', 'summary': 'إذاعة فرنسية: عملية “مرحبا 2025” تشهد إقبالا “غير مسبوق”. و.م.ع أكدت الإذاعة الفرنسية (Beur FM) أن عملية “مرحبا 2025” تشهد إقبالا “غير مسبوق”، حيث تجاوز عدد أفراد الجالية المغربية المقيمين بالخارج الذين عبروا الحدود منذ شهر يونيو 2,7 مليون شخص، ما يؤكد “وفاء الجالية” و”ازدهار السياحة”. وأوضحت الإذاعة، في مقال على موقعها الإلكتروني بعنوان “صيف قياسي للجالية المغربية والسياحة في المغرب!”، أن “الأرقام تتحدث …', 'size': 3}, {'id': '231', 'title': 'إذاعة فرنسية: عملية “مرحبا 2025” بالمغرب تشهد إقبالا “غير مسبوق”', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a5%d8%b0%d8%a7%d8%b9%d8%a9-%d9%81%d8%b1%d9%86%d8%b3%d9%8a%d8%a9-%d8%b9%d9%85%d9%84%d9%8a%d8%a9-%d9%85%d8%b1%d8%ad%d8%a8%d8%a7-2025-%d8%a8%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8/', 'summary': 'إذاعة فرنسية: عملية “مرحبا 2025” بالمغرب تشهد إقبالا “غير مسبوق”. أكدت الإذاعة الفرنسية (Beur FM) أن عملية “مرحبا 2025” تشهد إقبالا “غير مسبوق”، حيث تجاوز عدد أفراد الجالية المغربية المقيمين بالخارج الذين عبروا الحدود منذ شهر يونيو 2,7 مليون شخص، ما يؤكد “وفاء الجالية” و”ازدهار السياحة”. وأوضحت الإذاعة، في مقال نشرته على موقعها الإلكتروني بعنوان “صيف قياسي للجالية المغربية والسياحة في المغرب!”، أن …  إذاعة فرنسية: عملية “مرحبا 2025” بالمغرب تشهد إقبالا “غير مسبوق”     .', 'size': 3}], 'main_title': 'إشادة فرنسية بنجاح عملية مرحبا 2025'}, {'community_id': '3', 'articles': [{'id': '209', 'title': 'بلاغ لوزارة التجهيز والماء', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d8%a8%d9%84%d8%a7%d8%ba-%d9%84%d9%88%d8%b2%d8%a7%d8%b1%d8%a9-%d8%a7%d9%84%d8%aa%d8%ac%d9%87%d9%8a%d8%b2-%d9%88%d8%a7%d9%84%d9%85%d8%a7%d8%a1-2/', 'summary': 'بلاغ لوزارة التجهيز والماء. أعلنت وزارة التجهيز والماء، اليوم الإثنين، أن حركة السير على الطريق الوطنية رقم 27 الرابطة بين سيدي قاسم ومكناس ستعرف انقطاعا مؤقتا، على مستوى  بلاغ لوزارة التجهيز والماء     .', 'size': 2}, {'id': '380', 'title': 'انقطاع حركة السير لمدة أسبوع على الطريق الوطنية بين سيدي قاسم ومكناس', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%a7%d9%86%d9%82%d8%b7%d8%a7%d8%b9-%d8%ad%d8%b1%d9%83%d8%a9-%d8%a7%d9%84%d8%b3%d9%8a%d8%b1-%d9%84%d9%85%d8%af%d8%a9-%d8%a3%d8%b3%d8%a8%d9%88%d8%b9-%d8%b9%d9%84%d9%89-%d8%a7%d9%84%d8%b7%d8%b1%d9%8a/', 'summary': 'انقطاع حركة السير لمدة أسبوع على الطريق الوطنية بين سيدي قاسم ومكناس. المساء اليوم: أعلنت وزارة التجهيز والماء، أن حركة السير على الطريق الوطنية رقم 27 الرابطة بين سيدي قاسم ومكناس ستعرف انقطاعا مؤقتا، على مستوى المقطع الرابط بين سيدي قاسم و باب تيسرا. ووفق بيان للوزارة', 'size': 2}], 'main_title': 'بلاغ لوزارة التجهيز والماء'}, {'community_id': '4', 'articles': [{'id': '223', 'title': 'توقيف عنصر داعشي خطير خطط لصنع متفجرات لأجل مشاريع إرهابية', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/225813/', 'summary': 'توقيف عنصر داعشي خطير خطط لصنع متفجرات لأجل مشاريع إرهابية. تمكن المكتب المركزي للأبحاث القضائية، على ضوء معلومات استخباراتية وفرتها مصالح المديرية العامة لمراقبة التراب الوطني، صباح أمس الأحد، من توقيف عنصر حامل للفكر المتشدد الذي يتبناه تنظيم “داعش” الإرهابي، يبلغ من العمر 18 سنة، وينشط بدوار العمارنة بإقليم سطات، وذلك في سياق العمليات الأمنية المتواصلة لتحييد مخاطر التنظيمات الإرهابية التي تحدق بأمن المملكة وسلامة المواطنين.', 'size': 2}, {'id': '229', 'title': 'توقيف عنصر حامل للفكر المتشدد بدوار العمارنة بإقليم سطات', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%aa%d9%88%d9%82%d9%8a%d9%81-%d8%b9%d9%86%d8%b5%d8%b1-%d8%ad%d8%a7%d9%85%d9%84-%d9%84%d9%84%d9%81%d9%83%d8%b1-%d8%a7%d9%84%d9%85%d8%aa%d8%b4%d8%af%d8%af-%d8%a8%d8%af%d9%88%d8%a7%d8%b1-%d8%a7%d9%84/', 'summary': 'توقيف عنصر حامل للفكر المتشدد بدوار العمارنة بإقليم سطات. المساء اليوم: تمكن المكتب المركزي للأبحاث القضائية، على ضوء معلومات استخباراتية وفرتها مصالح المديرية العامة لمراقبة التراب الوطني، صباح أمس الأحد، من توقيف عنصر حامل للفكر المتشدد الذي يتبناه تنظيم “داعش” الإرهابي، يبلغ من العمر', 'size': 2}], 'main_title': 'توقيف عنصر داعشي خطير خطط لصنع متفجرات لأجل مشاريع إرهابية'}, {'community_id': '0', 'articles': [{'id': '342', 'title': 'الزفزافي ورفاقه يضربون عن الطعام بسجن طنجة تضامنا مع ضحايا التجويع في غزة والسودان', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1092282.html', 'summary': 'الزفزافي ورفاقه يضربون عن الطعام بسجن طنجة تضامنا مع ضحايا التجويع في غزة والسودان. أعلن معتقلو حراك الريف الستة القابعون في سجن "طنجة 2"، ظهرت المقالة الزفزافي ورفاقه يضربون عن الطعام بسجن طنجة تضامنا مع ضحايا التجويع في غزة والسودان  .', 'size': 2}, {'id': '346', 'title': 'الزفزافي ورفاقه في إضراب عن الطعام والماء تضامنا مع غزة والسودان', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a7%d9%84%d8%b2%d9%81%d8%b2%d8%a7%d9%81%d9%8a-%d9%88%d8%b1%d9%81%d8%a7%d9%82%d9%87-%d9%81%d9%8a-%d8%a5%d8%b6%d8%b1%d8%a7%d8%a8-%d8%b9%d9%86-%d8%a7%d9%84%d8%b7%d8%b9%d8%a7%d9%85-%d9%88%d8%a7%d9%84/', 'summary': 'الزفزافي ورفاقه في إضراب عن الطعام والماء تضامنا مع غزة والسودان. أعلن ستة من معتقلي "احتجاجات الريف" بسجن طنجة 2 عن دخولهم في إضراب عن الطعام والماء لمدة 48 ساعة، وذلك تضامنا مع ضحايا سياسة التجويع في كل من غزة والسودان. وأوضح المعتقلون أن هذه الخطوة تأتي احتجاجا على ما وصفوه بتقاعس المنتظم الدولي في تحمل مسؤولياته تجاه ما يجري من جرائم الإبادة في المنطقتين. وجاء  الزفزافي ورفاقه في إضراب عن الطعام والماء تضامنا مع غزة والسودان     .', 'size': 2}], 'main_title': 'الزفزافي ورفاقه يضربون عن الطعام بسجن طنجة تضامنا مع ضحايا التجويع في غزة والسودان'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    