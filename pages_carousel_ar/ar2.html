<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 06/09/2025 - 18h24</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '66', 'title': 'عبد اللطيف حموشي يتفقد ملعب الأمير مولاي عبد الله قبل مواجهة المغرب والنيجر', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/205793', 'summary': 'عبد اللطيف حموشي يتفقد ملعب الأمير مولاي عبد الله قبل مواجهة المغرب والنيجر.  أجرى المدير العام للأمن الوطني ولمراقبة التراب الوطني عبد اللطيف حموشي، زوال اليوم الجمعة 5 شتنبر الجاري، زيارة تفقدية لملعب الأمير مولاي عبد الله بالرباط، للاطلاع على بروتوكول الأمن والسلامة الذي وضعته ولاية أمن الرباط لتأمين مباراة المغرب والنيجر برسم التصفيات المؤهلة لمنافسات كأس العالم 2026. وقد اطلع المدير العام للأمن الوطني ولمراقبة التراب', 'size': 3}, {'id': '88', 'title': 'حموشي يزور ملعب الأمير مولاي عبد الله لتفقد استعدادات الأمن لمباراة المغرب والنيجر(صور)', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/412238.html', 'summary': 'حموشي يزور ملعب الأمير مولاي عبد الله لتفقد استعدادات الأمن لمباراة المغرب والنيجر(صور). أجرى المدير العام للأمن الوطني ولمراقبة التراب الوطني عبد اللطيف حموشي، زوال اليوم الجمعة 5 شتنبر الجاري، زيارة تفقدية لملعب الأمير مولاي عبد الله بالرباط،', 'size': 2}, {'id': '135', 'title': 'بالصور.. حموشي يتفقد بروتوكول الأمن بملعب مولاي عبد الله قبيل مباراة الأسود', 'source': 'assabah.ma', 'link': 'https://assabah.ma/869430.html', 'summary': 'بالصور.. حموشي يتفقد بروتوكول الأمن بملعب مولاي عبد الله قبيل مباراة الأسود. أجرى عبد اللطيف حموشي، المدير العام للأمن الوطني ولمراقبة التراب الوطني، زوال اليوم الجمعة، زيارة تفقدية لملعب الأمير مولاي عبد الله بالرباط، للاطلاع على بروتوكول الأمن والسلامة الذي وضعته ولاية أمن الرباط لتأمين مباراة المغرب والنيجر برسم التصفيات المؤهلة لمنافسات كأس العالم 2026. وحسب ما أفاد بهأكمل القراءة » المقالة بالصور.. حموشي يتفقد بروتوكول الأمن بملعب مولاي عبد الله قبيل مباراة الأسود  .', 'size': 2}], 'main_title': 'عبد اللطيف حموشي يتفقد ملعب الأمير مولاي عبد الله قبل مواجهة المغرب والنيجر'}, {'community_id': '1', 'articles': [{'id': '95', 'title': 'الركراكي يعلق على تأهل أسود الأطلس لكأس العالم ويوجه رسالة خاصة للجمهور المغربي بخصوص كأس افريقيا', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/sport/lionatlas/412247.html', 'summary': 'الركراكي يعلق على تأهل أسود الأطلس لكأس العالم ويوجه رسالة خاصة للجمهور المغربي بخصوص كأس افريقيا. أكد الناخب الوطني وليد الركراكي بعد فوز المنتخب الوطني المغربي على منتخب النيجر بخمسة أهداف دون رد، أن الفريق تأهل رسميا إلى كأس العالم، مشيرا', 'size': 2}, {'id': '152', 'title': 'عقب مباراة النيجر..الركراكي غير راض عن تشجيعات الجماهير', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-588055.html', 'summary': 'عقب مباراة النيجر..الركراكي غير راض عن تشجيعات الجماهير. عبر وليد الركراكي مدرب المنتخب المغربي لكرة القدم، ضمنيا عن عدم رضاه على أجواء التشجيع الخافتة التي ميزت مباراة يوم أمس أمام النيجر والتي انتهت بفوز أسود الأطلس بخماسية نظيفة تأهل بها المنتخب الوطني إلى كأس العالم 2026. وقال مدرب المنتخب في تصريحات اعلامية أعقبت المباراة “وليد الركراكي “سنحتاج نوعية خاصة من الجماهير،', 'size': 3}, {'id': '239', 'title': 'الركراكي: خطتنا أمام النيجر نجحت.. والأهم أننا تأهلنا للمونديال', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%a7%d9%84%d8%b1%d9%83%d8%b1%d8%a7%d9%83%d9%8a-%d8%ae%d8%b7%d8%aa%d9%86%d8%a7-%d8%a3%d9%85%d8%a7%d9%85-%d8%a7%d9%84%d9%86%d9%8a%d8%ac%d8%b1-%d9%86%d8%ac%d8%ad%d8%aa-%d9%88%d8%a7%d9%84%d8%a3%d9%87/', 'summary': 'الركراكي: خطتنا أمام النيجر نجحت.. والأهم أننا تأهلنا للمونديال. المساء اليوم – الرباط: أكد مدرب المنتخب المغربي لكرة القدم، وليد الركراكي، أمس الجمعة، أن الخطة التكتيكية التي اعتمدها أمام النيجر “نجحت”، ومكنت أسود الأطلس من الفوز بخماسية نظيفة (5-0)، مشددا على أن “الأهم هو', 'size': 2}], 'main_title': 'عقب مباراة النيجر..الركراكي غير راض عن تشجيعات الجماهير'}, {'community_id': '2', 'articles': [{'id': '125', 'title': 'الركراكي بعد التأهل لمونديال 2026: نُشكل عائلة واحدة. ولا فرق بين الأساسيين والبدلاء', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a7%d9%84%d8%b1%d9%83%d8%b1%d8%a7%d9%83%d9%8a-%d8%a8%d8%b9%d8%af-%d8%a7%d9%84%d8%aa%d8%a3%d9%87%d9%84-%d9%84%d9%85%d9%88%d9%86%d8%af%d9%8a%d8%a7%d9%84-2026-%d9%86%d9%8f%d8%b4%d9%83%d9%84-%d8%b9/', 'summary': 'الركراكي بعد التأهل لمونديال 2026: نُشكل عائلة واحدة. ولا فرق بين الأساسيين والبدلاء. ضمن المنتخب المغربي تأهله الرسمي إلى نهائيات كأس العالم 2026، عقب فوزه الكبير على منتخب النيجر بخماسية نظيفة، في اللقاء الذي احتضنه المجمع الرياضي الأمير مولاي عبد الله بالرباط مساء اليوم الجمعة، برسم الجولة السابعة من التصفيات الإفريقية. وعبّر الناخب الوطني وليد الركراكي عن سعادته بهذا الإنجاز قائلاً: “التأهل جاء في أجواء رائعة، خاصة على أرضية', 'size': 4}, {'id': '132', 'title': 'الأسود بالمونديال للمرة السابعة بعد اكتساح النيجر بخماسية', 'source': 'assabah.ma', 'link': 'https://assabah.ma/869446.html', 'summary': 'الأسود بالمونديال للمرة السابعة بعد اكتساح النيجر بخماسية. تأهل المنتخب الوطني المغربي رسميا إلى نهائيات كأس العالم 2026، بعد اكتساحه لمنتخب النيجر بخمسة أهداف لصفر، في المباراة التي جمعتهما، مساء اليوم (الجمعة)، في افتتاح مركب الأمير مولاي عبد الله بالرباط، لحساب الجولة السابعة من مباريات المجموعة الخامسة. وتمكن المنتخب الوطني من رفع رصيده إلى 18أكمل القراءة » المقالة الأسود بالمونديال للمرة السابعة بعد اكتساح النيجر بخماسية  .', 'size': 2}, {'id': '144', 'title': 'الركراكي: خطتنا التكتيكية نجحت والأهم هو التأهل', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/322624/', 'summary': 'الركراكي: خطتنا التكتيكية نجحت والأهم هو التأهل. أكد مدرب المنتخب المغربي لكرة القدم، وليد الركراكي، أمس الجمعة، أن الخطة التكتيكية التي اعتمدها أمام النيجر “نجحت”، ومكنت أسود الأطلس من الفوز بخماسية نظيفة (5-0)، مشددا على أن “الأهم هو التأهل إلى المونديال المقبل”. وقال الركراكي، في الندوة الصحفية التي أعقبت المباراة التي جرت أطوارها بملعب الأمير مولاي عبد الله بالرباط، وتوجت بتأهل أسود', 'size': 2}, {'id': '191', 'title': 'الركراكي: التأهل إلى مونديال 2026 فرحة مزدوجة والهدف القادم التتويج بكأس إفريقيا', 'source': 'rue20.com', 'link': 'https://rue20.com/934077.html', 'summary': 'الركراكي: التأهل إلى مونديال 2026 فرحة مزدوجة والهدف القادم التتويج بكأس إفريقيا.  الرباط حقق المنتخب الوطني المغربي فوزا كبيرا على نظيره النيجر بخمسة أهداف دون مقابل، في المباراة التي جمعت بينهما مساء الجمعة على أرضية ملعب الأمير مولاي عبد الله بالرباط، ليضمن بذلك عبوره رسميا إلى نهائيات كأس العالم 2026. وعبّر الناخب الوطني وليد الركراكي، في تصريح صحفي عقب المواجهة، عن سعادته بهذا الإنجاز، مؤكدا أن الخبر الركراكي: التأهل إلى مونديال 2026 فرحة مزدوجة والهدف القادم التتويج بكأس إفريقيا  .', 'size': 2}], 'main_title': 'الركراكي بعد التأهل لمونديال 2026: نُشكل عائلة واحدة. ولا فرق بين الأساسيين والبدلاء'}, {'community_id': '3', 'articles': [{'id': '148', 'title': 'حقيقة اكتشاف الذهب في كلميم', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-588066.html', 'summary': 'حقيقة اكتشاف الذهب في كلميم. أعلنت شركة OLAH Palace Trading، الناشطة في قطاع التعدين، عن وقوع خطأ مطبعي في بيانها الصحفي السابق بشأن الاكتشافات الأخيرة للذهب في منطقة كلميم. وكان البيان الأول قد أشار، بشكل غير دقيق، إلى تسجيل تركيز يبلغ 300 غرام من الذهب في الطن الواحد من الصخور، قبل أن تعود الشركة في بيان توضيحي', 'size': 2}, {'id': '197', 'title': 'خطأ مطبعي يكشف حقيقة محتوى الذهب في أعماق كلميم', 'source': 'rue20.com', 'link': 'https://rue20.com/933965.html', 'summary': 'خطأ مطبعي يكشف حقيقة محتوى الذهب في أعماق كلميم.  | كلميم أعلنت شركة OLAH Palace Trading للتعدين عن وقوع خطأ مطبعي في بيانها الصحفي الأول المتعلق بالإكتشافات الأخيرة للذهب في كلميم. وكان البيان الأول قد أشار عن طريق الخطأ إلى وجود 300 غرام من الذهب في الطن الواحد، بينما أوضحت الشركة في بيان ثانٍ أن الرقم الصحيح هو 30 غراما في الطن الخبر خطأ مطبعي يكشف حقيقة محتوى الذهب في أعماق كلميم  .', 'size': 2}], 'main_title': 'حقيقة اكتشاف الذهب في كلميم'}, {'community_id': '4', 'articles': [{'id': '154', 'title': 'هذه توقعات أحوال طقس يوم السبت', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-588041.html', 'summary': 'هذه توقعات أحوال طقس يوم السبت. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليوم السبت، أن يظل الطقس حارا نسبيا إلى محليا حار بالجنوب الشرقي، والأقاليم الصحراوية، والمنطقة الشرقية وكذا بالسهول المتواجدة غرب الأطلس. كما يرتقب تشكل سحب منخفضة كثيفة نوعا ما مصحوبة بكتل من الضباب أو بضباب على السواحل الوسطى بكل من الواجهة المتوسطية والشمال الغربي للأقاليم الصحراوية للمملكة،', 'size': 5}, {'id': '184', 'title': 'أحوال الطقس: أجواء غير مستقرة.. زخات رعدية ورياح قوية بعدة مناطق', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/284459-2/', 'summary': 'أحوال الطقس: أجواء غير مستقرة.. زخات رعدية ورياح قوية بعدة مناطق. تتوقع المديرية العامة للأرصاد الجوية، السبت، أن يظل الطقس حاراً نسبياً إلى حار محلياً بكل من الجنوب الشرقي، والأقاليم الصحراوية، والمنطقة الشرقية، والسهول الواقعة غرب الأطلس. كما يُرتقب تشكّل سحب منخفضة كثيفة مرفوقة بكتل ضبابية أو بضباب بالسواحل الوسطى، إضافة إلى الواجهة المتوسطية وشمال غرب الأقاليم الجنوبية. زخات رعدية ورياح قوية ستتمركز سحب غير مستقرة  أحوال الطقس: أجواء غير مستقرة.. زخات رعدية ورياح قوية بعدة مناطق     .', 'size': 5}, {'id': '238', 'title': 'طقس السبت: استمرار الحرارة.. وزخات رعدية بالمرتفعات', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%b7%d9%82%d8%b3-%d8%a7%d9%84%d8%b3%d8%a8%d8%aa-%d8%a7%d8%b3%d8%aa%d9%85%d8%b1%d8%a7%d8%b1-%d8%a7%d9%84%d8%ad%d8%b1%d8%a7%d8%b1%d8%a9-%d9%88%d8%b2%d8%ae%d8%a7%d8%aa-%d8%b1%d8%b9%d8%af%d9%8a%d8%a9/', 'summary': 'طقس السبت: استمرار الحرارة.. وزخات رعدية بالمرتفعات. المساء اليوم: تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم السبت، أن يظل الطقس حارا نسبيا إلى محليا حار بالجنوب الشرقي، والأقاليم الصحراوية، والمنطقة الشرقية وكذا بالسهول المتواجدة غرب الأطلس. كما يرتقب تشكل سحب منخفضة كثيفة', 'size': 5}, {'id': '249', 'title': 'توقعات أحوال الطقس اليوم السبت', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%aa%d9%88%d9%82%d8%b9%d8%a7%d8%aa-%d8%a3%d8%ad%d9%88%d8%a7%d9%84-%d8%a7%d9%84%d8%b7%d9%82%d8%b3-%d8%a7%d9%84%d9%8a%d9%88%d9%85-%d8%a7%d9%84%d8%b3%d8%a8%d8%aa-29/', 'summary': 'توقعات أحوال الطقس اليوم السبت. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم السبت 6 شتنبر 2025، أن يظل الطقس حارا نسبيا إلى محليا حار بالجنوب الشرقي، والأقاليم الصحراوية، والمنطقة الشرقية وكذا بالسهول المتواجدة غرب الأطلس. كما يرتقب تشكل سحب منخفضة كثيفة نوعا ما مصحوبة بكتل من الضباب أو بضباب على السواحل الوسطى بكل من الواجهة المتوسطية والشمال الغربي …  توقعات أحوال الطقس اليوم السبت     .', 'size': 5}, {'id': '382', 'title': 'توقعات أحوال الطقس لليوم السبت', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/474665.html', 'summary': 'توقعات أحوال الطقس لليوم السبت. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم السبت، أن يظل الطقس حارا نسبيا إلى محليا حار بالجنوب الشرقي، والأقاليم الصحراوية، والمنطقة الشرقية وكذا بالسهول المتواجدة غرب الأطلس. كما يرتقب تشكل سحب منخفضة كثيفة نوعا ما مصحوبة بكتل من الضباب أو بضباب على السواحل الوسطى بكل من الواجهة المتوسطية والشمال الغربي للأقاليم الصحراوية للمملكة، فضلا عن …', 'size': 5}], 'main_title': 'هذه توقعات أحوال طقس يوم السبت'}, {'community_id': '5', 'articles': [{'id': '164', 'title': 'المفوضية الأوروبية تغرم “غوغل” 3,5 مليار دولار لانتهاكها قواعد المنافسة', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1097611.html', 'summary': 'المفوضية الأوروبية تغرم “غوغل” 3,5 مليار دولار لانتهاكها قواعد المنافسة. فرضت المفوضية الأوروبية، أمس الجمعة، غرامة بقيمة 2,95 مليار أورو (3,5 مليار دولار) على شركة “غوغل” لانتهاكها قواعد المنافسة في الاتحاد الأوروبي، من خلال تفضيل الخدمات الإعلانية الرقمية الخاصة بها. وأمرت المفوضية، الذراع التنفيذي للاتحاد الأوروبي، شركة التكنولوجيا الأمريكية العملاقة بإنهاء ممارساتها في تفضيل خدماتها الخاصة، واتخاذ خطوات لوقف “تضارب المصالح” عبر سلسلة توريد تكنولوجيا ظهرت المقالة المفوضية الأوروبية تغرم “غوغل” 3,5 مليار دولار لانتهاكها قواعد المنافسة  .', 'size': 2}, {'id': '182', 'title': 'بسبب تضارب المصالح.. أوروبا تغرم google" 3,5" مليار دولار', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a8%d8%b3%d8%a8%d8%a8-%d8%aa%d8%b6%d8%a7%d8%b1%d8%a8-%d8%a7%d9%84%d9%85%d8%b5%d8%a7%d9%84%d8%ad-%d8%a3%d9%88%d8%b1%d9%88%d8%a8%d8%a7-%d8%aa%d8%ba%d8%b1%d9%85-google-35-%d9%85%d9%84%d9%8a/', 'summary': 'بسبب تضارب المصالح.. أوروبا تغرم google" 3,5" مليار دولار. فرضت المفوضية الأوروبية، أمس الجمعة، غرامة بقيمة 2,95 مليار أورو (3,5 مليار دولار) على شركة "غوغل" لانتهاكها قواعد المنافسة في الاتحاد الأوروبي، من خلال تفضيل الخدمات الإعلانية الرقمية الخاصة بها. وأمرت المفوضية، الذراع التنفيذي للاتحاد الأوروبي، شركة التكنولوجيا الأمريكية العملاقة بإنهاء ممارساتها في تفضيل خدماتها الخاصة، واتخاذ خطوات لوقف "تضارب المصالح" عبر سلسلة توريد تكنولوجيا  بسبب تضارب المصالح.. أوروبا تغرم google" 3,5" مليار دولار     .', 'size': 2}], 'main_title': 'المفوضية الأوروبية تغرم “غوغل” 3,5 مليار دولار لانتهاكها قواعد المنافسة'}, {'community_id': '6', 'articles': [{'id': '190', 'title': 'إنفانتينو: تأهل المغرب لمونديال 2026 إنجاز إستثنائي ونتطلع لمسار رائع آخر لأسود الأطلس', 'source': 'rue20.com', 'link': 'https://rue20.com/934110.html', 'summary': 'إنفانتينو: تأهل المغرب لمونديال 2026 إنجاز إستثنائي ونتطلع لمسار رائع آخر لأسود الأطلس. . الرباط وصف رئيس الاتحاد الدولي لكرة القدم (فيفا)، جياني إنفانتينو، اليوم الجمعة، تأهل المنتخب المغربي إلى نهائيات كأس العالم 2026 بـ”الإنجاز الاستثنائي”. وقال إنفانتينو، في منشور له على حسابه بموقع التواصل الاجتماعي “إنستغرام”، “يا له من إنجاز استثنائي! ديما مغرب، تهانينا للمغرب الذي يستعد للمشاركة في كأس العالم للمرة السابعة في تاريخه”. وأضاف الخبر إنفانتينو: تأهل المغرب لمونديال 2026 إنجاز إستثنائي ونتطلع لمسار رائع آخر لأسود الأطلس  .', 'size': 2}, {'id': '204', 'title': 'إنفانتينو يصف تأهل “الأسود” إلى كأس العالم بـ”الإنجاز الاستثنائي”', 'source': 'machahid24.com', 'link': 'https://machahid24.com/sport/474634.html', 'summary': 'إنفانتينو يصف تأهل “الأسود” إلى كأس العالم بـ”الإنجاز الاستثنائي”. متابعة وصف رئيس الاتحاد الدولي لكرة القدم (فيفا)، جياني إنفانتينو، أمس الجمعة، تأهل المنتخب المغربي إلى نهائيات كأس العالم 2026 بـ”الإنجاز الاستثنائي”. وقال إنفانتينو، في منشور له على حسابه بموقع التواصل الاجتماعي “إنستغرام”، “يا له من إنجاز استثنائي! ديما مغرب، تهانينا للمغرب الذي يستعد للمشاركة في كأس العالم للمرة السابعة في تاريخه”. وأضاف رئيس الاتحاد …', 'size': 2}, {'id': '251', 'title': '“ديما مغرب”.. إنفانتينو يحتفي بتأهل المغرب إلى مونديال 2026 ويصفه بالإنجاز ”الاستثنائي”', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%af%d9%8a%d9%85%d8%a7-%d9%85%d8%ba%d8%b1%d8%a8-%d8%a5%d9%86%d9%81%d8%a7%d9%86%d8%aa%d9%8a%d9%86%d9%88-%d9%8a%d8%ad%d8%aa%d9%81%d9%8a-%d8%a8%d8%aa%d8%a3%d9%87%d9%84-%d8%a7%d9%84/', 'summary': '“ديما مغرب”.. إنفانتينو يحتفي بتأهل المغرب إلى مونديال 2026 ويصفه بالإنجاز ”الاستثنائي”. أشاد رئيس الاتحاد الدولي لكرة القدم (فيفا)، جياني إنفانتينو، بتأهل المنتخب الوطني المغربي إلى نهائيات كأس العالم 2026، واصفا هذا الإنجاز بـ”الاستثنائي”. وقال إنفانتينو، في منشور له على حسابه بموقع التواصل الاجتماعي “إنستغرام”، “يا له من إنجاز استثنائي! ديما مغرب، تهانينا للمغرب الذي يستعد للمشاركة في كأس العالم للمرة السابعة في تاريخه”. وأضاف رئيس …  “ديما مغرب”.. إنفانتينو يحتفي بتأهل المغرب إلى مونديال 2026 ويصفه بالإنجاز ”الاستثنائي”     .', 'size': 3}], 'main_title': '“ديما مغرب”.. إنفانتينو يحتفي بتأهل المغرب إلى مونديال 2026 ويصفه بالإنجاز ”الاستثنائي”'}, {'community_id': '7', 'articles': [{'id': '195', 'title': 'ملعب مولاي عبد الله بالرباط …منشأة إستثنائية في أفريقيا يستجيب للمعايير العالمية', 'source': 'rue20.com', 'link': 'https://rue20.com/934018.html', 'summary': 'ملعب مولاي عبد الله بالرباط …منشأة إستثنائية في أفريقيا يستجيب للمعايير العالمية. . الرباط يعد ملعب “الأمير مولاي عبد الله” بالرباط، الذي دشنه، بأمر من صاحب الجلالة الملك محمد السادس نصره الله، صاحب السمو الملكي ولي العهد الأمير مولاي الحسن، بعد أشغال إعادة بناءه، بنية تحتية رياضية رفيعة، تم بناءها وفق معايير الاتحاد الدولي لكرة القدم (فيفا) 2030. وتم تصميم هذا الملعب الجديد، الذي تأتي إعادة الخبر ملعب مولاي عبد الله بالرباط …منشأة إستثنائية في أفريقيا يستجيب للمعايير العالمية  .', 'size': 2}, {'id': '229', 'title': 'ملعب “الأمير مولاي عبد الله”، بنية رياضية رفيعة مطابقة لمعايير الاتحاد الدولي لكرة القدم (فيفا) 2030', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/226751/', 'summary': 'ملعب “الأمير مولاي عبد الله”، بنية رياضية رفيعة مطابقة لمعايير الاتحاد الدولي لكرة القدم (فيفا) 2030. يعد ملعب “الأمير مولاي عبد الله” بالرباط، الذي دشنه، بأمر من صاحب الجلالة الملك محمد السادس نصره الله، صاحب السمو الملكي ولي العهد الأمير مولاي الحسن، بعد أشغال إعادة بناءه، بنية تحتية رياضية رفيعة، تم بناءها وفق معايير الاتحاد الدولي لكرة القدم (فيفا) 2030. وتم تصميم هذا الملعب الجديد، الذي تأتي إعادة بنائه تنفيذا للتوجيهات', 'size': 2}], 'main_title': 'ملعب مولاي عبد الله بالرباط …منشأة إستثنائية في أفريقيا يستجيب للمعايير العالمية'}, {'community_id': '8', 'articles': [{'id': '328', 'title': 'في عملية نوعية.. الفرقة الوطنية المغربية تطيح بعصابة خطيرة ارتكبت عملية سطو مسلح بفرنسا', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/society/412282.html', 'summary': 'في عملية نوعية.. الفرقة الوطنية المغربية تطيح بعصابة خطيرة ارتكبت عملية سطو مسلح بفرنسا. أحالت الفرقة الوطنية للشرطة القضائية على النيابة العامة المختصة بمدينة الدار البيضاء، ستة أشخاص يشتبه في ارتباطهم بشبكة إجرامية متخصصة في السرقة وإخفاء عائدات', 'size': 3}, {'id': '336', 'title': 'حجز 31 هاتفا مسروقا من عملية سطو بفرنسا وتوقيف ستة أشخاص بالمغرب', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/322658/', 'summary': 'حجز 31 هاتفا مسروقا من عملية سطو بفرنسا وتوقيف ستة أشخاص بالمغرب. أحالت الفرقة الوطنية للشرطة القضائية على النيابة العامة المختصة بمدينة الدار البيضاء، ستة أشخاص يشتبه في ارتباطهم بشبكة إجرامية متخصصة في السرقة وإخفاء عائدات إجرامية متحصلة من عملية سطو مسلح ارتكبت فوق الأراضي الفرنسية. وحسب المعلومات الأولية للبحث، فقد مكنت الأبحاث والتحريات التقنية التي باشرتها الفرقة الوطنية للشرطة القضائية من حجز 31 هاتفا محمولا متحصلا', 'size': 5}, {'id': '366', 'title': 'الأمن يوقف شبكة متخصصة في سرقة الهواتف في فرنسا وإعادة بيعها بالمغرب', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a7%d9%84%d8%a3%d9%85%d9%86-%d9%8a%d9%88%d9%82%d9%81-%d8%b4%d8%a8%d9%83%d8%a9-%d9%85%d8%aa%d8%ae%d8%b5%d8%b5%d8%a9-%d9%81%d9%8a-%d8%b3%d8%b1%d9%82%d8%a9-%d8%a7%d9%84%d9%87%d9%88%d8%a7%d8%aa%d9%81/', 'summary': 'الأمن يوقف شبكة متخصصة في سرقة الهواتف في فرنسا وإعادة بيعها بالمغرب. أحالت الفرقة الوطنية للشرطة القضائية على النيابة العامة المختصة بمدينة الدار البيضاء، ستة أشخاص يشتبه في ارتباطهم بشبكة إجرامية متخصصة في السرقة وإخفاء عائدات إجرامية متحصلة من عملية سطو مسلح ارتكبت فوق الأراضي الفرنسية. وحسب المعلومات الأولية للبحث، فقد مكنت الأبحاث والتحريات التقنية التي باشرتها الفرقة الوطنية للشرطة القضائية من حجز 31 هاتفا محمولا  الأمن يوقف شبكة متخصصة في سرقة الهواتف في فرنسا وإعادة بيعها بالمغرب     .', 'size': 3}, {'id': '375', 'title': 'الفرقة الوطنية تفكك شبكة إجرامية دولية متخصصة في السرقة والسطو بفرنسا', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/474686.html', 'summary': 'الفرقة الوطنية تفكك شبكة إجرامية دولية متخصصة في السرقة والسطو بفرنسا. أحالت الفرقة الوطنية للشرطة القضائية على النيابة العامة المختصة بمدينة الدار البيضاء، ستة أشخاص يشتبه في ارتباطهم بشبكة إجرامية متخصصة في السرقة وإخفاء عائدات إجرامية متحصلة من عملية سطو مسلح ارتكبت فوق الأراضي الفرنسية. وذكر مصدر أمني أنه حسب المعلومات الأولية للبحث، مكنت الأبحاث والتحريات التقنية التي باشرتها الفرقة الوطنية للشرطة القضائية من حجز 31 …', 'size': 3}, {'id': '395', 'title': 'توقيف تجار هواتف بالرباط ومراكش متورطين في شراء وإخفاء 13 آيفون مسروق من فرنسا', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/226756/', 'summary': 'توقيف تجار هواتف بالرباط ومراكش متورطين في شراء وإخفاء 13 آيفون مسروق من فرنسا. أحالت الفرقة الوطنية للشرطة القضائية على النيابة العامة المختصة بمدينة الدار البيضاء ستة أشخاص يشتبه في ارتباطهم بشبكة إجرامية متخصصة في السرقة وإخفاء عائدات إجرامية متحصلة من عملية سطو مسلح ارتكبت فوق الأراضي الفرنسية. وحسب المعلومات الأولية للبحث، فقد مكنت الأبحاث والتحريات التقنية التي باشرتها الفرقة الوطنية للشرطة القضائية من حجز 31 هاتفا محمولا متحصلا', 'size': 3}], 'main_title': 'حجز 31 هاتفا مسروقا من عملية سطو بفرنسا وتوقيف ستة أشخاص بالمغرب'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    