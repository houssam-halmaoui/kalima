<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 24/07/2025 - 12h27</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '104', 'title': 'السكتيوي يكشف عن اللائحة النهائية للمنتخب الوطني في الشان', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/sport/lionatlas/409813.html', 'summary': 'السكتيوي يكشف عن اللائحة النهائية للمنتخب الوطني في الشان. كشف الناخب الوطني للمنتخب المحلي لكرة القدم، طارق السكتيوي، اليوم الأربعاء بمركب محمد السادس بسلا، عن لائحة المنتخب المغربي المشاركة في بطولة إفريقيا للاعبين المحليين', 'size': 2}, {'id': '228', 'title': 'السكيتيوي يكشف لائحة اللاعبين في كأس إفريقيا للمحليين', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%a7%d9%84%d8%b3%d9%83%d9%8a%d8%aa%d9%8a%d9%88%d9%8a-%d9%8a%d9%83%d8%b4%d9%81-%d9%84%d8%a7%d8%a6%d8%ad%d8%a9-%d8%a7%d9%84%d9%84%d8%a7%d8%b9%d8%a8%d9%8a%d9%86-%d9%81%d9%8a-%d9%83%d8%a3%d8%b3-%d8%a5/', 'summary': 'السكيتيوي يكشف لائحة اللاعبين في كأس إفريقيا للمحليين. المساء اليوم – سلا: كشف الناخب الوطني للمنتخب المحلي لكرة القدم، طارق السكتيوي، اليوم الأربعاء بمركب محمد السادس بسلا، عن لائحة المنتخب المغربي المشاركة في بطولة إفريقيا للاعبين المحليين 2024، المقرر إجراؤها من 2 إلى', 'size': 2}], 'main_title': 'السكتيوي يكشف عن اللائحة النهائية للمنتخب الوطني في الشان'}, {'community_id': '1', 'articles': [{'id': '105', 'title': 'مالي تجر الجزائر نحو المحاسبة الدولية بعد ضبط شحنة أسلحة موجهة للإرهاب(وثيقة)', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/world/409814.html', 'summary': 'مالي تجر الجزائر نحو المحاسبة الدولية بعد ضبط شحنة أسلحة موجهة للإرهاب(وثيقة). في بيان رسمي شديد اللهجة، كشفت رئاسة الأركان العامة للجيش المالي عن إحباط محاولة كبيرة لتمرير شحنة ضخمة من المعدات اللوجستيكية نحو تنظيم إرهابي ينشط', 'size': 2}, {'id': '192', 'title': 'مالي تعلن عن إحباط تهريب معدات إرهابية عبر حدود الجزائر', 'source': 'machahid24.com', 'link': 'https://machahid24.com/international/470429.html', 'summary': 'مالي تعلن عن إحباط تهريب معدات إرهابية عبر حدود الجزائر. كشفت هيئة الأركان العامة للجيوش المالية، في بيان رسمي بثه التلفزيون الوطني، عن مصادرة كمية كبيرة من المعدات العسكرية واللوجستية كانت موجهة إلى تنظيم إرهابي ينشط داخل الأراضي المالية. ووفق المصدر ذاته، فإن الشحنة المصادرة تضم آلاف الأزياء العسكرية والأحذية القتالية والسترات الصوفية، إلى جانب شارات ورقعا عسكرية مطرزة تحمل شعارات وهوية التنظيم الإرهابي. وزاد …', 'size': 2}], 'main_title': 'مالي تجر الجزائر نحو المحاسبة الدولية بعد ضبط شحنة أسلحة موجهة للإرهاب(وثيقة)'}, {'community_id': '2', 'articles': [{'id': '109', 'title': 'جلس إدارة الصندوق المغربي للتقاعد يوافق على صياغة عقد برنامج جديد مع الدولة للفترة 2025-', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/economy/409818.html', 'summary': 'جلس إدارة الصندوق المغربي للتقاعد يوافق على صياغة عقد برنامج جديد مع الدولة للفترة 2025-. وافق مجلس إدارة الصندوق المغربي للتقاعد، الذي انعقد أمس الثلاثاء بالرباط برئاسة وزيرة الاقتصاد والمالية، نادية فتاح، على صياغة عقد برنامج جديد مع الدولة للفترة', 'size': 2}, {'id': '138', 'title': 'الصندوق المغربي للتقاعد يوافق على إعداد عقد برنامج جديد مع الدولة', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/319145/', 'summary': 'الصندوق المغربي للتقاعد يوافق على إعداد عقد برنامج جديد مع الدولة. وافق مجلس إدارة الصندوق المغربي للتقاعد، الذي انعقد أمس الثلاثاء بالرباط برئاسة وزيرة الاقتصاد والمالية، نادية فتاح، على صياغة عقد برنامج جديد مع الدولة للفترة 2025-2027. وأفادت وزارة الاقتصاد والمالية على موقعها الإلكتروني، بأنه ستتم صياغة هذا العقد البرنامج انطلاقا من المخطط الاستراتيجي للمؤسسة برسم نفس الفترة. وخلال هذا الاجتماع، نوه المجلس بالحصيلة الإجمالية لتنفيذ', 'size': 2}], 'main_title': 'جلس إدارة الصندوق المغربي للتقاعد يوافق على صياغة عقد برنامج جديد مع الدولة للفترة 2025-'}, {'community_id': '3', 'articles': [{'id': '123', 'title': 'سيتدارس خمسة مشاريع مراسيم.. انعقاد مجلس للحكومة غد الخميس', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%b3%d9%8a%d8%aa%d8%af%d8%a7%d8%b1%d8%b3-%d8%ae%d9%85%d8%b3%d8%a9-%d9%85%d8%b4%d8%a7%d8%b1%d9%8a%d8%b9-%d9%85%d8%b1%d8%a7%d8%b3%d9%8a%d9%85-%d8%a7%d9%86%d8%b9%d9%82%d8%a7%d8%af-%d9%85%d8%ac%d9%84/', 'summary': 'سيتدارس خمسة مشاريع مراسيم.. انعقاد مجلس للحكومة غد الخميس. ينعقد، يوم غد الخميس (23 يوليوز)، مجلس للحكومة برئاسة عزيز أخنوش، رئيس الحكومة. وذكر بلاغ لرئاسة الحكومة أن المجلس سيتتبع فى بدايته عرضا لوزيرة الاقتصاد والمالية حول تنفيذ قانون المالية لسنة 2025 وإعداد مشروع قانون المالية لسنة 2026 والبرمجة الميزانياتية للثلاث سنوات 2026-2028. وسيتدارس المجلس، إثر ذلك، خمسة مشاريع مراسيم، يتعلق الأول منها بتحديد اختصاصات', 'size': 2}, {'id': '195', 'title': 'ملفات مهمة على طاولة مجلس الحكومة غدا الخميس', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/470423.html', 'summary': 'ملفات مهمة على طاولة مجلس الحكومة غدا الخميس. ينعقد، غدا الخميس، مجلس للحكومة برئاسة عزيز أخنوش، رئيس الحكومة. وذكر بلاغ لرئاسة الحكومة أن المجلس سيتتبع فى بدايته عرضا لوزيرة الاقتصاد والمالية حول تنفيذ قانون المالية لسنة 2025 وإعداد مشروع قانون المالية لسنة 2026 والبرمجة الميزانياتية للثلاث سنوات 2026-2028. وسيتدارس المجلس، إثر ذلك، خمسة مشاريع مراسيم، يتعلق الأول منها بتحديد اختصاصات وتنظيم وزارة الصحة …', 'size': 2}], 'main_title': 'سيتدارس خمسة مشاريع مراسيم.. انعقاد مجلس للحكومة غد الخميس'}, {'community_id': '4', 'articles': [{'id': '124', 'title': 'وسط جماهيره.. نهضة بركان يحتفي بدرع البطولة', 'source': 'kifache.com', 'link': 'https://kifache.com/%d9%88%d8%b3%d8%b7-%d8%ac%d9%85%d8%a7%d9%87%d9%8a%d8%b1%d9%87-%d9%86%d9%87%d8%b6%d8%a9-%d8%a8%d8%b1%d9%83%d8%a7%d9%86-%d9%8a%d8%ad%d8%aa%d9%81%d9%8a-%d8%a8%d8%af%d8%b1%d8%b9-%d8%a7%d9%84%d8%a8%d8%b7/', 'summary': 'وسط جماهيره.. نهضة بركان يحتفي بدرع البطولة. توج فريق نهضة بركان بدرع البطولة، مساء اليوم الخميس (23 يوليوز) خلال حفل رسمي جرى تنظيمه على أرضية الملعب البلدي ببركان، وسط حضور جماهيري كبير وأجواء احتفالية مميزة. وجاء هذا التتويج المستحق بعد موسم استثنائي قدّمه الفريق البرتقالي، توّجه بصدارة الترتيب العام وحسم اللقب لصالحه في آخر جولات البطولة الوطنية الاحترافية “إنوي”. واستُهلّت مراسم التتويج', 'size': 2}, {'id': '176', 'title': 'نهضة بركان يتسلم درع بطل البطولة الإحترافية 2025-2024 الأول في تاريخه الكروي', 'source': 'rue20.com', 'link': 'https://rue20.com/922963.html', 'summary': 'نهضة بركان يتسلم درع بطل البطولة الإحترافية 2025-2024 الأول في تاريخه الكروي. . بركان إحتفل فريق نهضة بركان لكرة القدم، مساء اليوم الأربعاء بدرع البطولة الاحترافية “إنوي”، الذي توج به الموسم الكروي الماضي، بالملعب البلدي بمدينة بركان. وحظيت مكونات الفريق باستقبال من طرف عمالة المدينة، بحضور جميع مكوناته. وانتقل لاعبو نهضة بركان وطاقمه التقني والإداري إلى الملعب البلدي ببركان للاحتفال بدرع الدوري، بحضور جماهير الفريق الغفيرة. الخبر نهضة بركان يتسلم درع بطل البطولة الإحترافية 2025-2024 الأول في تاريخه الكروي  .', 'size': 2}], 'main_title': 'وسط جماهيره.. نهضة بركان يحتفي بدرع البطولة'}, {'community_id': '6', 'articles': [{'id': '143', 'title': 'قضية دهس الطفلة غيثة.. النيابة ترد بقوة على دفاع المتهم والمحكمة تأمر بخبرة طبية', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/319121/', 'summary': 'قضية دهس الطفلة غيثة.. النيابة ترد بقوة على دفاع المتهم والمحكمة تأمر بخبرة طبية. تواصلت جلسات النظر في ملف الطفلة غيثة، التي كانت ضحية حادث دهس مأساوي بشاطئ سيدي رحال، وذلك في المحكمة الزجرية الابتدائية بمدينة برشيد. الجلسة الأخيرة التي عقدت اليوم الأربعاء، عرفت تقديم دفوع شكلية من طرف هيئة دفاع المتهم، ركزت بالأساس على الطعن في سلامة الإجراءات القانونية التي بُنيت عليها المتابعة القضائية. وقد استهل الدفاع مداخلته', 'size': 2}, {'id': '157', 'title': 'قضية الطفلة غيثة.. ابتدائية برشيد تصدر حكما تمهيديا بإجراء خبرة طبية', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1087815.html', 'summary': 'قضية الطفلة غيثة.. ابتدائية برشيد تصدر حكما تمهيديا بإجراء خبرة طبية. أصدرت المحكمة الابتدائية الزجرية بمدينة برشيد، حكما تمهيديا يقضي بإجراء خبرة طبية متخصصة في ملف الطفلة “غيثة”، ضحية حادث الدهس المأساوي بشاطئ سيدي رحال، التي حظيت بتعاطف واسع في أوساط الرأي العام الوطني، واثارت قضيتها جدلا قانونيا حول المسؤوليات والتوصيف الجنائي للحادث. وقضت هيئة المحكمة، خلال الجلسة الأخيرة، بإجراء خبرة طبية دقيقة لدى خبير مختص ظهرت المقالة قضية الطفلة غيثة.. ابتدائية برشيد تصدر حكما تمهيديا بإجراء خبرة طبية  .', 'size': 2}], 'main_title': 'قضية دهس الطفلة غيثة.. النيابة ترد بقوة على دفاع المتهم والمحكمة تأمر بخبرة طبية'}, {'community_id': '7', 'articles': [{'id': '145', 'title': 'السكتيوي: اضطررنا لتغيير التوجه بعد فقدان 10 لاعبين في آخر لحظة', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/319119/', 'summary': 'السكتيوي: اضطررنا لتغيير التوجه بعد فقدان 10 لاعبين في آخر لحظة. تحدث طارق السكتيوي، مدرب المنتخب الوطني المغربي للمحليين، عن حيثيات اختيار القائمة النهائية التي ستشارك في بطولة إفريقيا للاعبين المحليين “الشان”، المقررة في كينيا وتنزانيا وأوغندا صيف هذا العام. وجاءت تصريحاته خلال ندوة صحفية لتعكس حجم التحديات التي واجهها الطاقم التقني في الإعداد لهذا الاستحقاق القاري، وسط غياب لاعبين بارزين وتغيرات مفاجئة طرأت في اللحظات', 'size': 2}, {'id': '183', 'title': 'السكتيوي يعلن لائحة المنتخب المغربي المشاركة في الشان', 'source': 'rue20.com', 'link': 'https://rue20.com/922930.html', 'summary': 'السكتيوي يعلن لائحة المنتخب المغربي المشاركة في الشان.  | متابعة أعلن طارق السكتيوي، مدرب المنتخب الوطني للاعبين المحليين، اليوم الأربعاء في ندوة صحافية بمركب محمد السادس لكرة القدم، عن اللائحة الرسمية للاعبين الذين سيتم استدعاؤهم للمشاركة في النسخة الثامنة من نهائيات بطولة إفريقيا للاعبين المحليين. و ستُجرى هذه البطولة القارية في كل من كينيا، أوغندا وتنزانيا، خلال الفترة الممتدة من 2 الخبر السكتيوي يعلن لائحة المنتخب المغربي المشاركة في الشان  .', 'size': 2}], 'main_title': 'السكتيوي: اضطررنا لتغيير التوجه بعد فقدان 10 لاعبين في آخر لحظة'}, {'community_id': '9', 'articles': [{'id': '159', 'title': 'جواز السفر المغربي يحقق أفضل ترتيب له منذ عقد ويتصدر منطقة شمال إفريقيا', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1087809.html', 'summary': 'جواز السفر المغربي يحقق أفضل ترتيب له منذ عقد ويتصدر منطقة شمال إفريقيا. حقق جواز السفر المغربي أفضل أداء له منذ عام 2006، بعد أن صعد إلى المرتبة 67 عالميا في أحدث تصنيف لمؤشر “هينلي” لجوازات السفر الصادر في يوليوز 2025، مما يتيح لحامليه السفر إلى 73 وجهة حول العالم دون تأشيرة مسبقة. ويمثل هذا التقدم قفزة بأربع مراتب مقارنة بتصنيف سنة 2024، حيث كان المغرب يحتل حينها ظهرت المقالة جواز السفر المغربي يحقق أفضل ترتيب له منذ عقد ويتصدر منطقة شمال إفريقيا  .', 'size': 2}, {'id': '340', 'title': 'جواز السفر المغربي يحقق أفضل ترتيب له', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-581772.html', 'summary': 'جواز السفر المغربي يحقق أفضل ترتيب له. حقق جواز السفر المغربي أفضل أداء له منذ عام 2006، بعد أن صعد إلى المرتبة 67 عالميا في أحدث تصنيف لمؤشر “هينلي” لجوازات السفر الصادر في يوليوز 2025، مما يتيح لحامليه السفر إلى 73 وجهة حول العالم دون تأشيرة مسبقة. ويمثل هذا التقدم قفزة بأربع مراتب مقارنة بتصنيف سنة 2024، حيث كان المغرب', 'size': 2}], 'main_title': 'جواز السفر المغربي يحقق أفضل ترتيب له منذ عقد ويتصدر منطقة شمال إفريقيا'}, {'community_id': '10', 'articles': [{'id': '160', 'title': 'المغرب يتقدم بدرجتين في تصنيف سرعة الإنترنت الثابت ويحتل المرتبة 59 عالميا', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1087804.html', 'summary': 'المغرب يتقدم بدرجتين في تصنيف سرعة الإنترنت الثابت ويحتل المرتبة 59 عالميا. سجل المغرب تقدما ملحوظا في ترتيب سرعة الإنترنت الثابت على مستوى العالم، حيث تقدم بمركزين مقارنة بالتصنيف السابق، ليحتل المرتبة 59 عالميا في تقرير Speedtet Global Index لشهر يونيو 2025، بمتوسط سرعة تحميل بلغ 67.06 ميغابت في الثانية. ويأتي هذا التحسن في ظل جهود مستمرة لتطوير البنية التحتية الرقمية في البلاد، خاصة مع اقتراب إطلاق ظهرت المقالة المغرب يتقدم بدرجتين في تصنيف سرعة الإنترنت الثابت ويحتل المرتبة 59 عالميا  .', 'size': 2}, {'id': '344', 'title': 'المغرب يتقدم بمرتبتين في تصنيف سرعة الإنترنت ويحتل المرتبة 59 عالميا', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-581766.html', 'summary': 'المغرب يتقدم بمرتبتين في تصنيف سرعة الإنترنت ويحتل المرتبة 59 عالميا. سجل المغرب تقدما ملحوظا في ترتيب سرعة الإنترنت الثابت على مستوى العالم، حيث تقدم بمركزين مقارنة بالتصنيف السابق، ليحتل المرتبة 59 عالميا في تقرير Speedtet Global Index لشهر يونيو 2025، بمتوسط سرعة تحميل بلغ 67.06 ميغابت في الثانية. ويأتي هذا التحسن في ظل جهود مستمرة لتطوير البنية التحتية الرقمية في البلاد، خاصة مع', 'size': 2}], 'main_title': 'المغرب يتقدم بدرجتين في تصنيف سرعة الإنترنت الثابت ويحتل المرتبة 59 عالميا'}, {'community_id': '5', 'articles': [{'id': '304', 'title': 'رغم المنافسة الحادة..اتصالات المغرب تُسجل نتائج قوية في النصف الأول من 2025', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/economy/409837.html', 'summary': 'رغم المنافسة الحادة..اتصالات المغرب تُسجل نتائج قوية في النصف الأول من 2025. حققت مجموعة اتصالات المغرب رقم معاملات موحد بلغ 18,04 مليار درهم مع متم شهر يونيو 2025، مسجلا ارتفاعا بنسبة 0,9 في المائة. وذكرت المجموعة، في بلاغ', 'size': 2}, {'id': '366', 'title': 'اتصالات المغرب تحقق رقم معاملات موحد بقيمة 18,04 مليار درهم', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a7%d8%aa%d8%b5%d8%a7%d9%84%d8%a7%d8%aa-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d8%aa%d8%ad%d9%82%d9%82-%d8%b1%d9%82%d9%85-%d9%85%d8%b9%d8%a7%d9%85%d9%84%d8%a7%d8%aa-%d9%85%d9%88%d8%ad%d8%af-%d8%a8/', 'summary': 'اتصالات المغرب تحقق رقم معاملات موحد بقيمة 18,04 مليار درهم. حققت مجموعة اتصالات المغرب رقم معاملات موحد بلغ 18,04 مليار درهم مع متم شهر يونيو 2025، مسجلا ارتفاعا بنسبة 0,9 في المائة. وذكرت المجموعة، في بلاغ لها حول نتائجها المالية، أن تراجع أنشطة الهاتف المحمول بالمغرب قابله تسارع نمو عائدات الفروع (Moov Africa) ونمو (Data Fixe) بالمغرب. وأضاف المصدر ذاته، أن رقم المعاملات الموحد خلال  اتصالات المغرب تحقق رقم معاملات موحد بقيمة 18,04 مليار درهم     .', 'size': 2}], 'main_title': 'رغم المنافسة الحادة..اتصالات المغرب تُسجل نتائج قوية في النصف الأول من 2025'}, {'community_id': '8', 'articles': [{'id': '338', 'title': 'الرجاء يعلن عن خطوة غير مسبوقة', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-581791.html', 'summary': 'الرجاء يعلن عن خطوة غير مسبوقة. أعلن نادي الرجاء الرياضي عن إطلاق حملة انخراط جديدة تحت شعار “لا يعني أن تكون منخرطا فقط، بل أن تكون من صنّاع القرار”. وتهدف هذه المبادرة إلى بلوغ رقم قياسي غير مسبوق يتمثل في استقطاب 1000 منخرط، في سابقة هي الأولى من نوعها في تاريخ النادي، وذلك بهدف تعزيز مشاركة الجماهير الرجاوية', 'size': 2}, {'id': '358', 'title': 'اليوم يبدأ التاريخ.. الرجاء يطلق حملة 1000 منخرط', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a7%d9%84%d9%8a%d9%88%d9%85-%d9%8a%d8%a8%d8%af%d8%a3-%d8%a7%d9%84%d8%aa%d8%a7%d8%b1%d9%8a%d8%ae-%d8%a7%d9%84%d8%b1%d8%ac%d8%a7%d8%a1-%d9%8a%d8%b7%d9%84%d9%82-%d8%ad%d9%85%d9%84%d8%a9-1000-%d9%85/', 'summary': 'اليوم يبدأ التاريخ.. الرجاء يطلق حملة 1000 منخرط. أعلن نادي الرجاء الرياضي، اليوم الخميس، عن إطلاق حملة انخراط غير مسبوقة تستهدف بلوغ رقم قياسي يتمثل في 1000 منخرط. ويهدف النادي بهاته الخطوة إلى توسيع قاعدة المشاركة الجماهيرية وتعزيز دور المناصرين في صناعة القرار داخل النادي. وأفاد بلاغ رسمي صادر عن إدارة الرجاء أن الحملة ستطلق تحت شعار: "أن تكون منخرطا لا يعني فقط  اليوم يبدأ التاريخ.. الرجاء يطلق حملة 1000 منخرط     .', 'size': 2}], 'main_title': 'الرجاء يعلن عن خطوة غير مسبوقة'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    