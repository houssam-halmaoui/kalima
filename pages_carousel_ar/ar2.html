<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 16/06/2025 - 12h26</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '71', 'title': 'طقس حار وزخات رعدية مرتقبة بعدة مناطق اليوم الأحد', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/407593.html', 'summary': 'طقس حار وزخات رعدية مرتقبة بعدة مناطق اليوم الأحد. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الأحد، أن تتميز الحالة الجوية عامة بطقس حار نسبيا إلى حار بكل من السهول الممتدة غرب الأطلس، والمنطقة', 'size': 2}, {'id': '222', 'title': 'طقس الأحد.. حار نسبيا مع نزول قطرات مطرية في بعض المناطق', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/222851/', 'summary': 'طقس الأحد.. حار نسبيا مع نزول قطرات مطرية في بعض المناطق. كواليس اليوم تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الأحد، أن تتميز الحالة الجوية عامة بطقس حار نسبيا إلى حار بكل من السهول الممتدة غرب الأطلس، والمنطقة الشرقية وكذا جنوب شرق البلاد. ويرتقب تشكل كتل ضبابية محلية فوق السواحل الشمالية والوسطى وغرب الواجهة المتوسطية، فضلا عن ظهور تمركز سحب منخفظة كثيفة مصحوبة بقطرات مطرية', 'size': 2}], 'main_title': 'طقس حار وزخات رعدية مرتقبة بعدة مناطق اليوم الأحد'}, {'community_id': '1', 'articles': [{'id': '77', 'title': 'كوثر أبعلال.. قصة نجاح تلميذة تحدّت الظروف ونالت المجد في امتحانات البكالوريا', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/education/407598.html', 'summary': 'كوثر أبعلال.. قصة نجاح تلميذة تحدّت الظروف ونالت المجد في امتحانات البكالوريا. حققت التلميذة كوثر أبعلال، المنحدرة من الجماعة القروية رباط الخير بإقليم صفرو، إنجازا متميزا بحصولها على أعلى معدل في امتحانات البكالوريا على صعيد جهة فاس-مكناس', 'size': 2}, {'id': '199', 'title': 'بكالوريا 2025.. كوثر أبعلال صاحبة أعلى معدل بجهة فاس-مكناس', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d8%a8%d9%83%d8%a7%d9%84%d9%88%d8%b1%d9%8a%d8%a7-2025-%d9%83%d9%88%d8%ab%d8%b1-%d8%a3%d8%a8%d8%b9%d9%84%d8%a7%d9%84-%d8%b5%d8%a7%d8%ad%d8%a8%d8%a9-%d8%a3%d8%b9%d9%84%d9%89-%d9%85%d8%b9%d8%af%d9%84/', 'summary': 'بكالوريا 2025.. كوثر أبعلال صاحبة أعلى معدل بجهة فاس-مكناس.  – و م ع حققت التلميذة كوثر أبعلال، المنحدرة من الجماعة القروية رباط الخير بإقليم صفرو، إنجازا متميزا بحصولها على أعلى معدل في امتحانات البكالوريا على صعيد جهة...  بكالوريا 2025.. كوثر أبعلال صاحبة أعلى معدل بجهة فاس-مكناس     .', 'size': 2}], 'main_title': 'كوثر أبعلال.. قصة نجاح تلميذة تحدّت الظروف ونالت المجد في امتحانات البكالوريا'}, {'community_id': '2', 'articles': [{'id': '99', 'title': 'تحذير من خطر اندلاع حرائق غابوية في مناطق مغربية عديدة', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/407622.html', 'summary': 'تحذير من خطر اندلاع حرائق غابوية في مناطق مغربية عديدة. أعلنت الوكالة الوطنية للمياه والغابات أنها ستشرع وبشكل يومي، ابتداء من يوم غد الإثنين وإلى غاية يوم الجمعة المقبل، بناء على معطيات علمية، في نشر', 'size': 3}, {'id': '121', 'title': 'خطر وشيك يهدد الغابات.. الوكالة الوطنية للمياه والغابات تدعو للحيطة والحذر', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%ae%d8%b7%d8%b1-%d9%88%d8%b4%d9%8a%d9%83-%d9%8a%d9%87%d8%af%d8%af-%d8%a7%d9%84%d8%ba%d8%a7%d8%a8%d8%a7%d8%aa-%d8%a7%d9%84%d9%88%d9%83%d8%a7%d9%84%d8%a9-%d8%a7%d9%84%d9%88%d8%b7%d9%86%d9%8a%d8%a9/', 'summary': 'خطر وشيك يهدد الغابات.. الوكالة الوطنية للمياه والغابات تدعو للحيطة والحذر. أعلنت الوكالة الوطنية للمياه والغابات أنها ستشرع وبشكل يومي، ابتداء من يوم غد الإثنين (16 يونيو) 2025، وإلى غاية يوم الجمعة المقبل، بناء على معطيات علمية، في نشر خرائط تنبؤ تحدد بدقة المناطق الحساسة والمعرضة لخطر اندلاع الحرائق الغابوية. وأوضحت الوكالة، أنه بعد تحليل البيانات المتعلقة خصوصا بنوعية الغطاء الغابوي وقابليته للاشتعال والاحتراق، والتوقعات المناخية', 'size': 4}, {'id': '139', 'title': 'تحذيرات من خطر اندلاع حرائق غابوية بعدد من مناطق المملكة', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/315620/', 'summary': 'تحذيرات من خطر اندلاع حرائق غابوية بعدد من مناطق المملكة. أعلنت الوكالة الوطنية للمياه والغابات أنها ستشرع وبشكل يومي، ابتداء من يوم غد الإثنين وإلى غاية يوم الجمعة المقبل، بناء على معطيات علمية، في نشر خرائط تنبؤ تحدد بدقة المناطق الحساسة والمعرضة لخطر اندلاع الحرائق الغابوية. وأوضحت الوكالة في بلاغ صحفي أنه بعد تحليل البيانات المتعلقة خصوصا بنوعية الغطاء الغابوي وقابليته للاشتعال والاحتراق، والتوقعات المناخية', 'size': 5}, {'id': '190', 'title': 'الوكالة الوطنية للمياه والغابات تحذر من خطر اندلاع حرائق غابوية', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/466514.html', 'summary': 'الوكالة الوطنية للمياه والغابات تحذر من خطر اندلاع حرائق غابوية. أعلنت الوكالة الوطنية للمياه والغابات أنها ستشرع وبشكل يومي، ابتداء من يوم غد الإثنين وإلى غاية يوم الجمعة المقبل، بناء على معطيات علمية، في نشر خرائط تنبؤ تحدد بدقة المناطق الحساسة والمعرضة لخطر اندلاع الحرائق الغابوية.', 'size': 5}, {'id': '218', 'title': 'وكالة المياه والغابات تحذر من خطر اندلاع حرائق غابوية بعدد من مناطق المملكة', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/222864/', 'summary': 'وكالة المياه والغابات تحذر من خطر اندلاع حرائق غابوية بعدد من مناطق المملكة. و م ع أعلنت الوكالة الوطنية للمياه والغابات أنها ستشرع وبشكل يومي، ابتداء من يوم غد الإثنين وإلى غاية يوم الجمعة المقبل، بناء على معطيات علمية، في نشر خرائط تنبؤ تحدد بدقة المناطق الحساسة والمعرضة لخطر اندلاع الحرائق الغابوية. وأوضحت الوكالة في بلاغ صحفي أنه بعد تحليل البيانات المتعلقة خصوصا بنوعية الغطاء الغابوي وقابليته', 'size': 4}], 'main_title': 'تحذيرات من خطر اندلاع حرائق غابوية بعدد من مناطق المملكة'}, {'community_id': '5', 'articles': [{'id': '111', 'title': 'كأس العرش..نهضة بركان يتأهل لنصف النهائي على حساب الجيش الملكي بالضربات الترجيحية ويلاقي المغرب التطواني', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/sport/footmarocain/407634.html', 'summary': 'كأس العرش..نهضة بركان يتأهل لنصف النهائي على حساب الجيش الملكي بالضربات الترجيحية ويلاقي المغرب التطواني. تأهل فريق نهضة بركان إلى نصف نهائي كأس العرش لكرة القدم، موسم 2023- 2024، بتغلبه في ربع النهائي على الجيش الملكي بالضربات الترجيحية (7-6)، في', 'size': 4}, {'id': '134', 'title': 'كأس العرش.. نهضة بركان ينجو من كمين الجيش الملكي ويحجز بطاقة التأهل', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/315638/', 'summary': 'كأس العرش.. نهضة بركان ينجو من كمين الجيش الملكي ويحجز بطاقة التأهل. نجح فريق نهضة بركان في انتزاع بطاقة العبور إلى نصف نهائي كأس العرش، بعد مباراة مثيرة أمام الجيش الملكي حُسمت بركلات الترجيح بنتيجة (7-6)، عقب انتهاء الوقت الأصلي والأشواط الإضافية بالتعادل الإيجابي (1-1). وجرت هذه المواجهة القوية مساء الأحد على أرضية الملعب البلدي بمدينة القنيطرة، ضمن منافسات ربع نهائي أغلى المسابقات الكروية في المغرب. وشهدت', 'size': 3}, {'id': '146', 'title': 'كأس العرش.. نهضة بركان ينتصر على الجيش الملكي ويعبر للمربع الذهبي', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1078107.html', 'summary': 'كأس العرش.. نهضة بركان ينتصر على الجيش الملكي ويعبر للمربع الذهبي. تأهل نادي نهضة بركان إلى نصف نهائي كأس العرش، وذلك عقب انتصاره على مضيفه الجيش الملكي بركلات الترجيح (7-6)، خلال اللقاء الذي جرى على أرضية الملعب البلدي بمدينة القنيطرة. مع انطلاق شوط اللقاء الأول بدأت محاولات الفريقين لافتتاح التسجيل، وذلك وسط صحوة دفاعية لكلا الطرفين. وكان نادي الجيش الملكي قريبا من افتتاح التسجيل عند الدقيقة ظهرت المقالة كأس العرش.. نهضة بركان ينتصر على الجيش الملكي ويعبر للمربع الذهبي  .', 'size': 2}, {'id': '214', 'title': 'كأس العرش..نهضة بركان يتجاوز الجيش الملكي بركلات الترجيح ويتأهل إلى نصف النهائي ليقابل المغرب التطواني المتأهل على حساب أولمبيك خريبكة', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/222879/', 'summary': 'كأس العرش..نهضة بركان يتجاوز الجيش الملكي بركلات الترجيح ويتأهل إلى نصف النهائي ليقابل المغرب التطواني المتأهل على حساب أولمبيك خريبكة. حجز فريق نهضة بركان ورقة العبور إلى نصف نهائي كأس العرش، بعد تغلبه على الجيش الملكي بركلات الترجيح (7-6)، عقب انتهاء الوقت الأصلي والشوطين الإضافيين بالتعادل الإيجابي بهدف لمثله. وأجريت المباراة بين الجيش الملكي ونهضة بركان، مساء اليوم الأحد 15 يونيو 2025، على أرضية “الملعب البلدي للقنيطرة”، برسم دور ربع النهائي. وتقدّم العساكر في الدقيقة', 'size': 2}, {'id': '304', 'title': 'نهائي كأس العرش .. نهضة بركان يتأهل على حساب الجيش الملكي', 'source': 'kifache.com', 'link': 'https://kifache.com/%d9%86%d9%87%d8%a7%d8%a6%d9%8a-%d9%83%d8%a3%d8%b3-%d8%a7%d9%84%d8%b9%d8%b1%d8%b4-%d9%86%d9%87%d8%b6%d8%a9-%d8%a8%d8%b1%d9%83%d8%a7%d9%86-%d9%8a%d8%aa%d8%a3%d9%87%d9%84-%d8%b9%d9%84%d9%89-%d8%ad/', 'summary': 'نهائي كأس العرش .. نهضة بركان يتأهل على حساب الجيش الملكي. تأهل فريق نهضة بركان إلى نصف نهائي كأس العرش لكرة القدم، موسم 2023- 2024، بتغلبه في ربع النهائي على الجيش الملكي بالضربات الترجيحية (7-6)، في المباراة التي جمعتهما اليوم الأحد (16 يونيو) بالملعب البلدي بالقنيطرة. وانتهت المباراة، في وقتها الأصلي والشوطين الإضافيين بالتعادل بهدف لمثله، حيث افتتح الجيش الملكي التسجيل عن طريق عبد الفتاح حدراف', 'size': 2}], 'main_title': 'كأس العرش..نهضة بركان يتأهل لنصف النهائي على حساب الجيش الملكي بالضربات الترجيحية ويلاقي المغرب التطواني'}, {'community_id': '4', 'articles': [{'id': '123', 'title': 'في 8 مدن.. حموشي يؤشر على تعيينات جديدة في مناصب المسؤولية بمصالح الأمن الوطني', 'source': 'kifache.com', 'link': 'https://kifache.com/%d9%81%d9%8a-8-%d9%85%d8%af%d9%86-%d8%ad%d9%85%d9%88%d8%b4%d9%8a-%d9%8a%d8%a4%d8%b4%d8%b1-%d8%b9%d9%84%d9%89-%d8%aa%d8%b9%d9%8a%d9%8a%d9%86%d8%a7%d8%aa-%d8%ac%d8%af%d9%8a%d8%af%d8%a9-%d9%81%d9%8a/', 'summary': 'في 8 مدن.. حموشي يؤشر على تعيينات جديدة في مناصب المسؤولية بمصالح الأمن الوطني. أعلنت المديرية العامة للأمن الوطني، اليوم الأحد (15 يونيو)، عن قائمة جديدة تتضمن عددا من التعيينات في مناصب المسؤولية بالمصالح اللاممركزة للأمن الوطني بكل من مدن فاس ووزان وخنيفرة والقصر الكبير وتطوان وسيدي قاسم وأكادير والناظور. وأفاد مصدر أمني بأن هذه التعينات تأتي في إطار مواصلة لمسار تنزيل استراتيجية فتح الباب أمام الكفاءات الشابة لتحمل', 'size': 4}, {'id': '166', 'title': 'الأمن الوطني.. تعيينات جديدة في مناصب المسؤولية', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a7%d9%84%d8%a3%d9%85%d9%86-%d8%a7%d9%84%d9%88%d8%b7%d9%86%d9%8a-%d8%aa%d8%b9%d9%8a%d9%8a%d9%86%d8%a7%d8%aa-%d8%ac%d8%af%d9%8a%d8%af%d8%a9-%d9%81%d9%8a-%d9%85%d9%86%d8%a7%d8%b5%d8%a8-%d8%a7%d9%84-2/', 'summary': 'الأمن الوطني.. تعيينات جديدة في مناصب المسؤولية. أعلنت المديرية العامة للأمن الوطني، اليوم الأحد 15 يونيو الجاري، عن قائمة جديدة تتضمن عددا من التعيينات في مناصب المسؤولية بالمصالح اللاممركزة للأمن الوطني بكل من مدن فاس ووزان وخنيفرة والقصر الكبير وتطوان وسيدي قاسم وأكادير والناظور، في إطار مواصلة مسار تنزيل استراتيجية فتح الباب أمام الكفاءات الشابة لتحمل مسؤولية التسيير الأمني وتكريس التداول على  الأمن الوطني.. تعيينات جديدة في مناصب المسؤولية     .', 'size': 4}, {'id': '183', 'title': 'حموشي يؤشر على تعيينات جديدة في مناصب المسؤولية بمصالح الأمن الوطني', 'source': 'rue20.com', 'link': 'https://rue20.com/912969.html', 'summary': 'حموشي يؤشر على تعيينات جديدة في مناصب المسؤولية بمصالح الأمن الوطني.  . الرباط مواصلة لمسار تنزيل استراتيجية فتح الباب أمام الكفاءات الشابة لتحمل مسؤولية التسيير الأمني وتكريس التداول على مناصب المسؤولية، قامت المديرية العامة للأمن الوطني، اليوم الأحد 15 يونيو الجاري، بالإعلان عن قائمة جديدة تتضمن عددا من التعيينات في مناصب المسؤولية بالمصالح اللاممركزة للأمن الوطني بكل من مدن فاس ووزان وخنيفرة والقصر الكبير الخبر حموشي يؤشر على تعيينات جديدة في مناصب المسؤولية بمصالح الأمن الوطني  .', 'size': 4}, {'id': '219', 'title': 'حموشي يعين مسؤولين أمنيين جدد في عدة مدن', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/222861/', 'summary': 'حموشي يعين مسؤولين أمنيين جدد في عدة مدن. أحمد التدلاوي مواصلة لمسار تنزيل استراتيجية فتح الباب أمام الكفاءات الشابة لتحمل مسؤولية التسيير الأمني وتكريس التداول على مناصب المسؤولية، قامت المديرية العامة للأمن الوطني اليوم الأحد 15 يونيو الجاري، بالإعلان عن قائمة جديدة تتضمن عددا من التعيينات في مناصب المسؤولية بالمصالح اللاممركزة للأمن الوطني بكل من مدن فاس ووزان وخنيفرة والقصر الكبير وتطوان', 'size': 4}], 'main_title': 'في 8 مدن.. حموشي يؤشر على تعيينات جديدة في مناصب المسؤولية بمصالح الأمن الوطني'}, {'community_id': '6', 'articles': [{'id': '191', 'title': 'زخات رعدية قوية وهبات رياح تهم اليوم الأحد عدة مناطق', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/466512.html', 'summary': 'زخات رعدية قوية وهبات رياح تهم اليوم الأحد عدة مناطق. أفادت المديرية العامة للأرصاد الجوية، بأنه يرتقب تسجيل زخات رعدية محليا قوية (من 15 إلى 25 ملم) ومصحوبة بتساقط للبرد وبهبات رياح، اليوم الأحد، بعدد من مناطق المملكة.', 'size': 2}, {'id': '227', 'title': 'زخات رعدية وبرَد ورياح بعدد من مناطق المملكة ليلة الأحد', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%b2%d8%ae%d8%a7%d8%aa-%d8%b1%d8%b9%d8%af%d9%8a%d8%a9-%d9%88%d8%a8%d8%b1%d9%8e%d8%af-%d9%88%d8%b1%d9%8a%d8%a7%d8%ad-%d8%a8%d8%b9%d8%af%d8%af-%d9%85%d9%86-%d9%85%d9%86%d8%a7%d8%b7%d9%82-%d8%a7%d9%84/', 'summary': 'زخات رعدية وبرَد ورياح بعدد من مناطق المملكة ليلة الأحد. المساء اليوم: أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب تسجيل زخات رعدية محليا قوية (من 15 إلى 25 ملم) ومصحوبة بتساقط للبرد وبهبات رياح، اليوم الأحد، بعدد من مناطق المملكة. وأوضحت المديرية، في نشرة إنذارية', 'size': 2}], 'main_title': 'زخات رعدية قوية وهبات رياح تهم اليوم الأحد عدة مناطق'}, {'community_id': '7', 'articles': [{'id': '271', 'title': 'تعنيف شخص وتحطيم سيارته يجر شقيقين للاعتقال بفاس', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-632333.html', 'summary': 'تعنيف شخص وتحطيم سيارته يجر شقيقين للاعتقال بفاس. هبة بريس أحالت مصالح الشرطة بولاية أمن فاس على النيابة العامة المختصة، صباح اليوم الاثنين 16 يونيو الجاري، شخصا يبلغ من العمر 34 سنة، يشتبه في تورطه في قضية تتعلق بالعنف وإلحاق خسائر مادية بملك الغير. وكان المشتبه فيه قد أقدم، رفقة شقيقه، على تعريض شخص للعنف وإلحاق خسائر مادية بسيارته بسبب نزاعات سابقة فيما بينهم، وهي الأفعال الإجرامية التي شكلت موضوع شريط فيديو منشور على صفحات مواقع التواصل الاجتماعي. وقد أسفرت الأبحاث والتحريات المنجزة عن تحديد هوية المشتبه فيهما وتوقيف واحد منهما، فيما مكنت عملية الضبط والتفتيش من العثور بحوزة المعني بالأمر على الأدوات الراضة المستعملة في ارتكاب هذه الأفعال الإجرامية. وقد تم إخضاع المشتبه فيه الموقوف لتدبير الحراسة النظرية رهن إشارة البحث القضائي الذي يجري تحت إشراف النيابة العامة المختصة، للكشف عن جميع ظروف وملابسات وخلفيات هذه القضية، فيما لازالت الأبحاث والتحريات جارية بغرض توقيف المشتبه فيه الثاني.', 'size': 2}, {'id': '317', 'title': 'إحالة ثلاثيني على النيابة العامة بتهمة العنف وتخريب ممتلكات الغير بفاس', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/315676/', 'summary': 'إحالة ثلاثيني على النيابة العامة بتهمة العنف وتخريب ممتلكات الغير بفاس. أحالت مصالح الشرطة بولاية أمن فاس على النيابة العامة المختصة، صباح اليوم الاثنين 16 يونيو الجاري، شخصا يبلغ من العمر 34 سنة، يشتبه في تورطه في قضية تتعلق بالعنف وإلحاق خسائر مادية بملك الغير. وكان المشتبه فيه قد أقدم، رفقة شقيقه، على تعريض شخص للعنف وإلحاق خسائر مادية بسيارته بسبب نزاعات سابقة فيما بينهم،', 'size': 3}, {'id': '388', 'title': 'تعريض شخص للعنف وإلحاق خسائر مادية بسيارته يقود ثلاثينيا للاعتقال بفاس', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/222892/', 'summary': 'تعريض شخص للعنف وإلحاق خسائر مادية بسيارته يقود ثلاثينيا للاعتقال بفاس. كمال عسو أحالت مصالح الشرطة بولاية أمن فاس على النيابة العامة المختصة، صباح اليوم الاثنين، شخصا يبلغ من العمر 34 سنة، يشتبه تورطه في قضية تتعلق بالعنف وإلحاق خسائر مادية بملك الغير. وحسب مصدر أمني، فإن المشتبه فيه كان قد أقدم، رفقة شقيقه، على تعريض شخص للعنف وإلحاق خسائر مادية بسيارته بسبب نزاعات سابقة', 'size': 2}], 'main_title': 'إحالة ثلاثيني على النيابة العامة بتهمة العنف وتخريب ممتلكات الغير بفاس'}, {'community_id': '8', 'articles': [{'id': '283', 'title': 'طقس الإثنين.. أجواء حارة بعدد من مناطق المملكة', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-632283.html', 'summary': 'طقس الإثنين.. أجواء حارة بعدد من مناطق المملكة. هبة بريس تتوقع المديرية العامة للأرصاد الجوية، اليوم الاثنين، أن تتميز الحالة الجوية عامة بطقس حار بكل من مناطق الغرب، والسايس، وهضاب الفوسفاط، ووالماس، وسهول تادلة، والرحامنة وكذا بالجنوب الشرقي للبلاد. وسيلاحظ تمركز خلايا رعدية مرفوقة بقطرات مطرية أو بزخات مصحوبة أحيانا ومحليا ببرد فوق كل من مرتفعات الأطلسين الكبير والمتوسط، وسهول تادلة، والرحامنة، والجنوب الشرقي، والسايس، وهضاب الفوسفاط وكذا بالمنطقة الشرقية، فضلا عن ظهور سحب منخفضة فوق الواجهة المتوسطية، والسهول الأطلسية الشمالية والوسطى والشمال الغربي للأقاليم الصحراوية وذلك خلال الصباح والليل مع تكون كتل ضبابية محلية. ويرتقب تسجيل هبات رياح قوية نوعا ما بكل من منطقة طنجة، ومرتفعات الأطلس، ومناطقه المجاورة، والجنوب الشرقي، وجنوب المنطقة الشرقية وغرب الأقاليم الجنوبية مع تناثر غبار محليا. وستتراوح درجات الحرارة الدنيا ما بين 21 و27 درجة بجنوب الريف، والسايس، وهضاب الفوسفاط، ووالماس، والجنوب الشرقي للبلاد، والمنطقة الشرقية، وستكون ما بين 16 و22 درجة فيما تبقى من ربوع المملكة. أما درجات الحرارة خلال النهار، فستكون في انخفاض بالمنطقة الشرقية والسهول الأطلسية الوسطى وفي ارتفاع بباقي المناطق. وسيكون البحر هادئا إلى قليل الهيجان بالواجهة المتوسطية والبوغاز، وقليل الهيجان إلى هائج بباقي السواحل.', 'size': 3}, {'id': '354', 'title': 'توقعات أحوال الطقس لليوم الاثنين', 'source': 'soltana.ma', 'link': 'https://soltana.ma/1357422.html', 'summary': 'توقعات أحوال الطقس لليوم الاثنين. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الاثنين، أن تتميز الحالة الجوية عامة بطقس حار بكل من مناطق الغرب، والسايس، وهضاب الفوسفاط، ووالماس، وسهول تادلة، والرحامنة وكذا بالجنوب الشرقي للبلاد. وسيلاحظ تمركز خلايا رعدية مرفوقة بقطرات مطرية أو بزخات مصحوبة أحيانا ومحليا ببرد فوق كل من مرتفعات الأطلسين الكبير والمتوسط، وسهول تادلة، والرحامنة، والجنوب الشرقي،', 'size': 3}, {'id': '391', 'title': 'طقس الاثنين.. حار مع نزول قطرات مطرية مرتقبة في عدة مناطق', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/222882/', 'summary': 'طقس الاثنين.. حار مع نزول قطرات مطرية مرتقبة في عدة مناطق. كواليس اليوم تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الاثنين، أن تتميز الحالة الجوية عامة بطقس حار بكل من مناطق الغرب، والسايس، وهضاب الفوسفاط، ووالماس، وسهول تادلة، والرحامنة وكذا بالجنوب الشرقي للبلاد. وسيلاحظ تمركز خلايا رعدية مرفوقة بقطرات مطرية أو بزخات مصحوبة أحيانا ومحليا ببرد فوق كل من مرتفعات الأطلسين الكبير والمتوسط، وسهول تادلة،', 'size': 3}], 'main_title': 'طقس الإثنين.. أجواء حارة بعدد من مناطق المملكة'}, {'community_id': '9', 'articles': [{'id': '296', 'title': 'بشكل مفاجئ.. برشلونة يُلغي وديته المرتقبة في الدار البيضاء لهذا السبب', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/sport/barcelona/407646.html', 'summary': 'بشكل مفاجئ.. برشلونة يُلغي وديته المرتقبة في الدار البيضاء لهذا السبب. رغم أن جماهير كرة القدم المغربية كانت تترقب بشغف كبير المباراة الودية التي كان من المرتقب أن تجمع نادي برشلونة الإسباني بأحد الفرق في مدينة', 'size': 2}, {'id': '392', 'title': 'برشلونة في المغرب: ودية قد تكون.. وقد لا تكون..!', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%a8%d8%b1%d8%b4%d9%84%d9%88%d9%86%d8%a9-%d9%81%d9%8a-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d9%88%d8%af%d9%8a%d8%a9-%d9%82%d8%af-%d8%aa%d9%83%d9%88%d9%86-%d9%88%d9%82%d8%af-%d9%84%d8%a7-%d8%aa/', 'summary': 'برشلونة في المغرب: ودية قد تكون.. وقد لا تكون..!. المساء اليوم: أعلن نادي برشلونة الإسباني عدم خوض مباراة ودية في مدينة الدار البيضاء بالمغرب، كان من المرتقب إجراؤها شهر غشت المقبل ضد فريق لم يتم تحديده بعد. وجاء هذا الإلغاء رغم أن البارسا كان', 'size': 2}], 'main_title': 'بشكل مفاجئ.. برشلونة يُلغي وديته المرتقبة في الدار البيضاء لهذا السبب'}, {'community_id': '10', 'articles': [{'id': '316', 'title': 'نشرة إنذارية…زخات رعدية بعدد من مناطق المملكة', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/315679/', 'summary': 'نشرة إنذارية…زخات رعدية بعدد من مناطق المملكة. أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب تسجيل زخات رعدية محليا قوية (من 15 إلى 25 ملم) مصحوبة بهبات رياح، اليوم الاثنين، بعدد من مناطق المملكة. وأوضحت المديرية، في نشرة إنذارية من مستوى يقظة “برتقالي”، أن هذه الزخات الرعدية ستهم عمالات وأقاليم ميدلت وخنيفرة وإفران وبني ملال وتاوريرت وجرادة وتازة وكرسيف، من الساعة الثالثة بعد', 'size': 4}, {'id': '346', 'title': 'نشرة إنذارية: زخات رعدية مصحوبة بهبات رياح مرتقبة اليوم الاثنين', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d9%86%d8%b4%d8%b1%d8%a9-%d8%a5%d9%86%d8%b0%d8%a7%d8%b1%d9%8a%d8%a9-%d8%b2%d8%ae%d8%a7%d8%aa-%d8%b1%d8%b9%d8%af%d9%8a%d8%a9-%d9%85%d8%ad%d9%84%d9%8a%d8%a7-%d9%82%d9%88%d9%8a%d8%a9-%d9%85%d8%b5%d8%ad-4/', 'summary': 'نشرة إنذارية: زخات رعدية مصحوبة بهبات رياح مرتقبة اليوم الاثنين. أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب تسجيل زخات رعدية محليا قوية (من 15 إلى 25 ملم) مصحوبة بهبات رياح، اليوم الاثنين، بعدد من مناطق المملكة. وأوضحت المديرية، في نشرة إنذارية من مستوى يقظة "برتقالي"، أن هذه الزخات الرعدية ستهم عمالات وأقاليم ميدلت وخنيفرة وإفران وبني ملال وتاوريرت وجرادة وتازة وكرسيف، من الساعة الثالثة بعد  نشرة إنذارية: زخات رعدية مصحوبة بهبات رياح مرتقبة اليوم الاثنين     .', 'size': 4}, {'id': '390', 'title': 'نشرة إنذارية.. زخات رعدية قوية مرتقبة في بعض المناطق', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/222885/', 'summary': 'نشرة إنذارية.. زخات رعدية قوية مرتقبة في بعض المناطق. كواليس اليوم أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب تسجيل زخات رعدية محليا قوية (من 15 إلى 25 ملم) مصحوبة بهبات رياح، اليوم الاثنين، بعدد من مناطق المملكة. وأوضحت المديرية، في نشرة إنذارية من مستوى يقظة “برتقالي”، أن هذه الزخات الرعدية ستهم عمالات وأقاليم ميدلت وخنيفرة وإفران وبني ملال وتاوريرت وجرادة وتازة وكرسيف، من', 'size': 4}, {'id': '398', 'title': 'نشرة إنذارية.. زخات رعدية محليا قوية مصحوبة بهبات رياح مرتقبة اليوم الاثنين', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d9%86%d8%b4%d8%b1%d8%a9-%d8%a5%d9%86%d8%b0%d8%a7%d8%b1%d9%8a%d8%a9-%d8%b2%d8%ae%d8%a7%d8%aa-%d8%b1%d8%b9%d8%af%d9%8a%d8%a9-%d9%85%d8%ad%d9%84%d9%8a%d8%a7-%d9%82%d9%88%d9%8a%d8%a9-%d9%85%d8%b5%d8%ad-2/', 'summary': 'نشرة إنذارية.. زخات رعدية محليا قوية مصحوبة بهبات رياح مرتقبة اليوم الاثنين. أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب تسجيل زخات رعدية محليا قوية (من 15 إلى 25 ملم) مصحوبة بهبات رياح، اليوم الاثنين، بعدد من مناطق المملكة. وأوضحت المديرية، في نشرة إنذارية من مستوى يقظة “برتقالي”، أن هذه الزخات الرعدية ستهم عمالات وأقاليم ميدلت وخنيفرة وإفران وبني ملال وتاوريرت وجرادة وتازة وكرسيف، من الساعة …  نشرة إنذارية.. زخات رعدية محليا قوية مصحوبة بهبات رياح مرتقبة اليوم الاثنين     .', 'size': 4}], 'main_title': 'نشرة إنذارية…زخات رعدية بعدد من مناطق المملكة'}, {'community_id': '3', 'articles': [{'id': '341', 'title': 'قرابة 7 ملايين مقعد إضافي.. لارام تطلق برنامجا استثنائيا لصيف 2025', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1078112.html', 'summary': 'قرابة 7 ملايين مقعد إضافي.. لارام تطلق برنامجا استثنائيا لصيف 2025. أعلنت الخطوط الملكية المغربية، اليوم الإثنبن، عن إطلاق برنامج مكثف وغير مسبوق لرحلاتها الجوية بمناسبة صيف 2025، يتضمن عرضا قياسيا يتجاوز 6,6 ملايين مقعد، بزيادة تناهز 700 ألف مقعد مقارنة بصيف 2024، وذلك نحو أزيد من 95 وجهة عبر العالم. ويهدف هذا البرنامج، حسب بلاغ صحافي للشركة، إلى مواكبة التدفق الكبير المرتقب لمغاربة العالم والسياح ظهرت المقالة قرابة 7 ملايين مقعد إضافي.. لارام تطلق برنامجا استثنائيا لصيف 2025  .', 'size': 2}, {'id': '400', 'title': 'الخطوط الملكية المغربية تطلق برنامجا مكثفا للرحلات الجوية بمناسبة حلول موسم صيف 2025', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d8%ae%d8%b7%d9%88%d8%b7-%d8%a7%d9%84%d9%85%d9%84%d9%83%d9%8a%d8%a9-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8%d9%8a%d8%a9-%d8%aa%d8%b7%d9%84%d9%82-%d8%a8%d8%b1%d9%86%d8%a7%d9%85%d8%ac%d8%a7-2/', 'summary': 'الخطوط الملكية المغربية تطلق برنامجا مكثفا للرحلات الجوية بمناسبة حلول موسم صيف 2025. في إطار سعيها لمواكبة العودة المكثفة لمغاربة العالم بمناسبة حلول موسم صيف 2025، عززت الخطوط الملكية المغربية، عرضها عبر برنامج مكثف للرحلات الجوية. وحسب بلاغ للخطوط الملكية المغربية، فإن هذا البرنامج يتميز بتوفير عرض قياسي يفوق 6.6 ملايين مقعد، مما يمثل ارتفاعا ملحوظا بأزيد من 700 الف مقعد إضافي، مقارنة مع العرض المبرمج …  الخطوط الملكية المغربية تطلق برنامجا مكثفا للرحلات الجوية بمناسبة حلول موسم صيف 2025     .', 'size': 2}], 'main_title': 'قرابة 7 ملايين مقعد إضافي.. لارام تطلق برنامجا استثنائيا لصيف 2025'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    