<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 04/07/2025 - 12h26</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '66', 'title': 'بايتاس.. مشروع قانون إعادة تنظيم المجلس الوطني للصحافة يهدف لتعزيز فعالية التنظيم الذاتي للمهنة.', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/202925', 'summary': 'بايتاس.. مشروع قانون إعادة تنظيم المجلس الوطني للصحافة يهدف لتعزيز فعالية التنظيم الذاتي للمهنة..  أكد الوزير المنتدب لدى رئيس الحكومة المكلف بالعلاقات مع البرلمان، والناطق الرسمي باسم الحكومة، مصطفى بايتاس، أن مشروع القانون الخاص بإعادة تنظيم المجلس الوطني للصحافة يسعى إلى تعزيز فعالية المجلس في ممارسة مهامه في التنظيم الذاتي للمهنة والارتقاء بأخلاقياتها. وأوضح بايتاس، خلال ندوة صحفية أعقبت انعقاد مجلس الحكومة يوم الخميس، أن المشروع يأتي استجابةً', 'size': 4}, {'id': '180', 'title': 'تصل إلى 120 مليونا.. بايتاس يكشف تفاصيل مرسوم "السلفات الصغيرة"', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%aa%d8%b5%d9%84-%d8%a5%d9%84%d9%89-120-%d9%85%d9%84%d9%8a%d9%88%d9%86%d8%a7-%d8%a8%d8%a7%d9%8a%d8%aa%d8%a7%d8%b3-%d9%8a%d9%83%d8%b4%d9%81-%d8%aa%d9%81%d8%a7%d8%b5%d9%8a%d9%84-%d9%85%d8%b1%d8%b3/', 'summary': 'تصل إلى 120 مليونا.. بايتاس يكشف تفاصيل مرسوم "السلفات الصغيرة". كشف مصطفى بايتاس، الوزير المنتدب المكلف بالعلاقات مع البرلمان، الناطق الرسمي باسم الحكومة، تفاصيل مشروع المرسوم رقم 2.25.450 بتحديد المبلغ الأقصى للسلفات الصغيرة وأسقف الأموال المتلقاة من قبل مؤسسات التمويلات الصغيرة. وأكد بايتاس أن هذا المرسوم، الذي صادقت عليه الحكومة اليوم الخميس، يتوخى تحديد المبلغ الأقصى للسلفات الصغيرة التي تمنح من لدن مؤسسات التمويلات الصغير،  تصل إلى 120 مليونا.. بايتاس يكشف تفاصيل مرسوم "السلفات الصغيرة"     .', 'size': 3}, {'id': '235', 'title': 'الناطق باسم الحكومة: تعديلات بنيوية على قانون المجلس الوطني للصحافة', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%a7%d9%84%d9%86%d8%a7%d8%b7%d9%82-%d8%a8%d8%a7%d8%b3%d9%85-%d8%a7%d9%84%d8%ad%d9%83%d9%88%d9%85%d8%a9-%d8%aa%d8%b9%d8%af%d9%8a%d9%84%d8%a7%d8%aa-%d8%a8%d9%86%d9%8a%d9%88%d9%8a%d8%a9-%d8%b9%d9%84/', 'summary': 'الناطق باسم الحكومة: تعديلات بنيوية على قانون المجلس الوطني للصحافة. المساء اليوم – الرباط: قال الوزير المنتدب لدى رئيس الحكومة المكلف بالعلاقات مع البرلمان، الناطق الرسمي باسم الحكومة، مصطفى بايتاس إن مشروع القانون المتعلق بإعادة تنظيم المجلس الوطني للصحافة يروم تعزيز فعالية المجلس في التنظيم', 'size': 2}, {'id': '245', 'title': 'بايتاس: مشروع \xa0قانون إعادة تنظيم المجلس الوطني للصحافة يروم تعزيز فعالية المجلس في التنظيم الذاتي للمهنة', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a8%d8%a7%d9%8a%d8%aa%d8%a7%d8%b3-%d9%85%d8%b4%d8%b1%d9%88%d8%b9-%d9%82%d8%a7%d9%86%d9%88%d9%86-%d8%a5%d8%b9%d8%a7%d8%af%d8%a9-%d8%aa%d9%86%d8%b8%d9%8a%d9%85-%d8%a7%d9%84%d9%85%d8%ac%d9%84/', 'summary': 'بايتاس: مشروع قانون إعادة تنظيم المجلس الوطني للصحافة يروم تعزيز فعالية المجلس في التنظيم الذاتي للمهنة. قال الوزير المنتدب لدى رئيس الحكومة المكلف بالعلاقات مع البرلمان، الناطق الرسمي باسم الحكومة، مصطفى بايتاس، اليوم الخميس، إن مشروع القانون المتعلق بإعادة تنظيم المجلس الوطني للصحافة يروم تعزيز فعالية المجلس في التنظيم الذاتي للمهنة والرقي بأخلاقياتها. وأوضح بايتاس، في لقاء صحفي عقب انعقاد مجلس الحكومة، أن هذا المشروع، الذي صادق عليه مجلس الحكومة …  بايتاس: مشروع قانون إعادة تنظيم المجلس الوطني للصحافة يروم تعزيز فعالية المجلس في التنظيم الذاتي للمهنة     .', 'size': 3}], 'main_title': 'بايتاس.. مشروع قانون إعادة تنظيم المجلس الوطني للصحافة يهدف لتعزيز فعالية التنظيم الذاتي للمهنة.'}, {'community_id': '1', 'articles': [{'id': '115', 'title': 'شجار مسلح في فاس ينتهي بتدخل أمني واعتقال ستة أشخاص', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/society/408668.html', 'summary': 'شجار مسلح في فاس ينتهي بتدخل أمني واعتقال ستة أشخاص. أحالت مصالح ولاية أمن فاس على النيابة العامة المختصة، صباح اليوم الخميس 3 يوليوز الجاري، ستة أشخاص من بينهم ثلاثة قاصرين، تتراوح أعمارهم مابين 16', 'size': 4}, {'id': '126', 'title': 'من بينهم 3 قاصرين.. حيازة أسلحة بيضاء وتبادل العنف في الشارع العام يسقط 6 أشخاص بفاس', 'source': 'kifache.com', 'link': 'https://kifache.com/%d9%85%d9%86-%d8%a8%d9%8a%d9%86%d9%87%d9%85-3-%d9%82%d8%a7%d8%b5%d8%b1%d9%8a%d9%86-%d8%ad%d9%8a%d8%a7%d8%b2%d8%a9-%d8%a3%d8%b3%d9%84%d8%ad%d8%a9-%d8%a8%d9%8a%d8%b6%d8%a7%d8%a1-%d9%88%d8%aa%d8%a8/', 'summary': 'من بينهم 3 قاصرين.. حيازة أسلحة بيضاء وتبادل العنف في الشارع العام يسقط 6 أشخاص بفاس. أحالت مصالح ولاية أمن فاس على النيابة العامة المختصة، صباح اليوم الخميس (3 يوليوز)، ستة أشخاص من بينهم ثلاثة قاصرين، تتراوح أعمارهم مابين 16 و23 سنة، وذلك للاشتباه في تورطهم في قضية تتعلق بالضرب والجرح وحيازة السلاح الأبيض في ظروف تشكل خطرا على الأشخاص والممتلكات. وكانت مصالح الشرطة قد توصلت، أول أمس الثلاثاء، بإشعار حول', 'size': 3}, {'id': '142', 'title': 'أمن فاس يحيل ستة أفراد على العدالة بسبب شجار عنيف واستخدام السلاح الأبيض', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/317346/', 'summary': 'أمن فاس يحيل ستة أفراد على العدالة بسبب شجار عنيف واستخدام السلاح الأبيض. أحالت مصالح ولاية أمن فاس على النيابة العامة المختصة، صباح اليوم الخميس 3 يوليوز الجاري، ستة أشخاص من بينهم ثلاثة قاصرين، تتراوح أعمارهم مابين 16 و23 سنة، وذلك للاشتباه في تورطهم في قضية تتعلق بالضرب والجرح وحيازة السلاح الأبيض في ظروف تشكل خطرا على الأشخاص والممتلكات. وكانت مصالح الشرطة قد توصلت، أول أمس الثلاثاء، بإشعار', 'size': 5}, {'id': '175', 'title': 'توقيف ستة في فاس إثر مواجهة بالسلاح الأبيض', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%aa%d9%88%d9%82%d9%8a%d9%81-%d8%b3%d8%aa%d8%a9-%d9%81%d9%8a-%d9%81%d8%a7%d8%b3-%d8%a5%d8%ab%d8%b1-%d9%85%d9%88%d8%a7%d8%ac%d9%87%d8%a9-%d8%a8%d8%a7%d9%84%d8%b3%d9%84%d8%a7%d8%ad-%d8%a7%d9%84%d8%a3/', 'summary': 'توقيف ستة في فاس إثر مواجهة بالسلاح الأبيض. أحالت مصالح ولاية أمن فاس على النيابة العامة المختصة، صباح اليوم الخميس، ستة أشخاص من بينهم ثلاثة قاصرين، تتراوح أعمارهم مابين 16 و23 سنة، وذلك للاشتباه في تورطهم في قضية تتعلق بالضرب والجرح وحيازة السلاح الأبيض في ظروف تشكل خطرا على الأشخاص والممتلكات. وكانت مصالح الشرطة قد توصلت، أول أمس الثلاثاء، بإشعار حول تورط  توقيف ستة في فاس إثر مواجهة بالسلاح الأبيض     .', 'size': 3}, {'id': '233', 'title': 'أمن فاس يوقف 6 أشخاص ارتكبوا أفعالا خطيرة ضد المواطنين والممتلكات', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%a3%d9%85%d9%86-%d9%81%d8%a7%d8%b3-%d9%8a%d9%88%d9%82%d9%81-6-%d8%a3%d8%b4%d8%ae%d8%a7%d8%b5-%d8%a7%d8%b1%d8%aa%d9%83%d8%a8%d9%88%d8%a7-%d8%a3%d9%81%d8%b9%d8%a7%d9%84%d8%a7-%d8%ae%d8%b7%d9%8a%d8%b1/', 'summary': 'أمن فاس يوقف 6 أشخاص ارتكبوا أفعالا خطيرة ضد المواطنين والممتلكات. المساء اليوم: أحالت مصالح ولاية أمن فاس على النيابة العامة المختصة، الخميس 3 يوليوز الجاري، ستة أشخاص من بينهم ثلاثة قاصرين، تتراوح أعمارهم مابين 16 و23 سنة، وذلك للاشتباه في تورطهم في قضية تتعلق بالضرب', 'size': 4}], 'main_title': 'أمن فاس يحيل ستة أفراد على العدالة بسبب شجار عنيف واستخدام السلاح الأبيض'}, {'community_id': '2', 'articles': [{'id': '127', 'title': 'المغرب _ غواتيمالا.. بوريطة وألفارادو يشيدان بالعلاقات الثنائية المتميزة والمتسمة بدينامية “إيجابية للغاية”', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-_-%d8%ba%d9%88%d8%a7%d8%aa%d9%8a%d9%85%d8%a7%d9%84%d8%a7-%d8%a8%d9%88%d8%b1%d9%8a%d8%b7%d8%a9-%d9%88%d8%a3%d9%84%d9%81%d8%a7%d8%b1%d8%a7%d8%af%d9%88-%d9%8a%d8%b4/', 'summary': 'المغرب _ غواتيمالا.. بوريطة وألفارادو يشيدان بالعلاقات الثنائية المتميزة والمتسمة بدينامية “إيجابية للغاية”. أشاد وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج، ناصر بوريطة، ووزير العلاقات الخارجية بجمهورية غواتيمالا، كارلوس راميرو مارتينيز ألفارادو، اليوم الخميس بالرباط، بالعلاقات المغربية-الغواتيمالية المتميزة التي تتسم بدينامية إيجابية للغاية. وأبرز بوريطة وألفارادو، عقب لقائهما، روابط الصداقة والتضامن المتميزة بين البلدين، واتفقا على ضرورة مواصلة هذه التبادلات ووضع حصيلة للعلاقات الثنائية بما سيمكن من', 'size': 2}, {'id': '248', 'title': 'بوريطة وألفارادو يشيدان بالعلاقات المغربية-الغواتيمالية المتميزة والمتسمة بدينامية إيجابية للغاية', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a8%d9%88%d8%b1%d9%8a%d8%b7%d8%a9-%d9%88%d8%a3%d9%84%d9%81%d8%a7%d8%b1%d8%a7%d8%af%d9%88-%d9%8a%d8%b4%d9%8a%d8%af%d8%a7%d9%86-%d8%a8%d8%a7%d9%84%d8%b9%d9%84%d8%a7%d9%82%d8%a7%d8%aa-%d8%a7%d9%84/', 'summary': 'بوريطة وألفارادو يشيدان بالعلاقات المغربية-الغواتيمالية المتميزة والمتسمة بدينامية إيجابية للغاية. أشاد وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج، ناصر بوريطة، ووزير العلاقات الخارجية بجمهورية غواتيمالا، كارلوس راميرو مارتينيز ألفارادو، اليوم الخميس بالرباط، بالعلاقات المغربية-الغواتيمالية المتميزة التي تتسم بدينامية إيجابية للغاية. وأبرز بوريطة وألفارادو، عقب لقائهما، روابط الصداقة والتضامن المتميزة بين البلدين، واتفقا على ضرورة مواصلة هذه التبادلات ووضع حصيلة للعلاقات الثنائية بما …  بوريطة وألفارادو يشيدان بالعلاقات المغربية-الغواتيمالية المتميزة والمتسمة بدينامية إيجابية للغاية     .', 'size': 2}], 'main_title': 'المغرب _ غواتيمالا.. بوريطة وألفارادو يشيدان بالعلاقات الثنائية المتميزة والمتسمة بدينامية “إيجابية للغاية”'}, {'community_id': '3', 'articles': [{'id': '128', 'title': 'عرقل سير الترامواي عاريا.. توقيف مهاجر إفريقي في الدار البيضاء', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%b9%d8%b1%d9%82%d9%84-%d8%b3%d9%8a%d8%b1-%d8%a7%d9%84%d8%aa%d8%b1%d8%a7%d9%85%d9%88%d8%a7%d9%8a-%d8%b9%d8%a7%d8%b1%d9%8a%d8%a7-%d8%aa%d9%88%d9%82%d9%8a%d9%81-%d9%85%d9%87%d8%a7%d8%ac%d8%b1-%d8%a5/', 'summary': 'عرقل سير الترامواي عاريا.. توقيف مهاجر إفريقي في الدار البيضاء. تفاعلت ولاية أمن الدار البيضاء، بسرعة وجدية كبيرة، مع شريط فيديو تداوله مستعملو شبكات التواصل الاجتماعي، زوال اليوم الخميس (3 يوليوز)، يظهر فيه شخص عاري الجسد ويعرقل السير على سكة الطرامواي بطريقة تعرض سلامته وسلامة مستعملي الطريق للخطر. وأوضحت الأبحاث والتحريات المنجزة على ضوء هذا الشريط، أن الأمر يتعلق بقضية زجرية عالجتها مصالح الشرطة بمنطقة', 'size': 4}, {'id': '146', 'title': 'أمن البيضاء يطيح بمهاجر إفريقي بعد عرقلة سير الطرامواي', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/317340/', 'summary': 'أمن البيضاء يطيح بمهاجر إفريقي بعد عرقلة سير الطرامواي. تفاعلت ولاية أمن الدار البيضاء، بسرعة وجدية كبيرة، مع شريط فيديو تداوله مستعملو شبكات التواصل الاجتماعي زوال اليوم الخميس 3 يوليوز الجاري، يظهر فيه شخص عاري الجسد ويعرقل السير على سكة الطرامواي بطريقة تعرض سلامته وسلامة مستعملي الطريق للخطر. وقد أوضحت الأبحاث والتحريات المنجزة على ضوء هذا الشريط، أن الأمر يتعلق بقضية زجرية عالجتها مصالح', 'size': 3}, {'id': '176', 'title': 'توقيف مهاجر إثر اعتراضه عاريا الطرامواي في الدار البيضاء', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%aa%d9%88%d9%82%d9%8a%d9%81-%d9%85%d9%87%d8%a7%d8%ac%d8%b1-%d8%a5%d8%ab%d8%b1-%d8%a7%d8%b9%d8%aa%d8%b1%d8%a7%d8%b6%d9%87-%d8%b9%d8%a7%d8%b1%d9%8a%d8%a7-%d8%a7%d9%84%d8%b7%d8%b1%d8%a7%d9%85%d9%88/', 'summary': 'توقيف مهاجر إثر اعتراضه عاريا الطرامواي في الدار البيضاء. تفاعلت ولاية أمن الدار البيضاء، بسرعة وجدية كبيرة، مع شريط فيديو تداوله مستعملو شبكات التواصل الاجتماعي زوال اليوم الخميس، يظهر فيه شخص عاري الجسد ويعرقل السير على سكة الطرامواي بطريقة تعرض سلامته وسلامة مستعملي الطريق للخطر. وقد أوضحت الأبحاث والتحريات المنجزة على ضوء هذا الشريط، أن الأمر يتعلق بقضية زجرية عالجتها مصالح الشرطة بمنطقة أمن  توقيف مهاجر إثر اعتراضه عاريا الطرامواي في الدار البيضاء     .', 'size': 2}, {'id': '226', 'title': 'الدار البيضاء.. توقيف مواطن إفريقي ظهر في شريط فيديو يعرقل حركة الترامواي', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/224039/', 'summary': 'الدار البيضاء.. توقيف مواطن إفريقي ظهر في شريط فيديو يعرقل حركة الترامواي. كمال عسو ذكر مصدر أمني، بأن ولاية أمن الدار البيضاء، تفاعلت بسرعة وجدية كبيرة، مع شريط فيديو تداوله مستعملو شبكات التواصل الاجتماعي زوال اليوم الخميس، يظهر فيه شخص عاري الجسد ويعرقل السير على سكة الطرامواي بطريقة تعرض سلامته وسلامة مستعملي الطريق للخطر. وأوضح نفس المصدر، أن الأبحاث والتحريات المنجزة على ضوء هذا الشريط، أظهرت', 'size': 2}, {'id': '244', 'title': 'توقيف شخص عرقل طرامواي الدار البيضاء.. والأمن يفتح بحثا في ملابسات الواقعة', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%aa%d9%88%d9%82%d9%8a%d9%81-%d8%b4%d8%ae%d8%b5-%d8%b9%d8%b1%d9%82%d9%84-%d8%b7%d8%b1%d8%a7%d9%85%d9%88%d8%a7%d9%8a-%d8%a7%d9%84%d8%af%d8%a7%d8%b1-%d8%a7%d9%84%d8%a8%d9%8a%d8%b6%d8%a7%d8%a1-%d9%88/', 'summary': 'توقيف شخص عرقل طرامواي الدار البيضاء.. والأمن يفتح بحثا في ملابسات الواقعة. تفاعلت ولاية أمن الدار البيضاء، بسرعة وجدية كبيرة، مع شريط فيديو تداوله مستعملو شبكات التواصل الاجتماعي زوال اليوم الخميس 3 يوليوز الجاري، يظهر فيه شخص عاري الجسد ويعرقل السير على سكة الطرامواي بطريقة تعرض سلامته وسلامة مستعملي الطريق للخطر. وكشفت مصادر أمنية، أن الأبحاث والتحريات المنجزة على ضوء هذا الشريط، أظهرت أن الأمر …  توقيف شخص عرقل طرامواي الدار البيضاء.. والأمن يفتح بحثا في ملابسات الواقعة     .', 'size': 2}], 'main_title': 'عرقل سير الترامواي عاريا.. توقيف مهاجر إفريقي في الدار البيضاء'}, {'community_id': '5', 'articles': [{'id': '221', 'title': 'الحكومة تصادق على مشروع قانون يتعلق بإعادة تنظيم المجلس الوطني للصحافة', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d8%a7%d9%84%d8%ad%d9%83%d9%88%d9%85%d8%a9-%d8%aa%d8%b5%d8%a7%d8%af%d9%82-%d8%b9%d9%84%d9%89-%d9%85%d8%b4%d8%b1%d9%88%d8%b9-%d9%82%d8%a7%d9%86%d9%88%d9%86-%d9%8a%d8%aa%d8%b9%d9%84%d9%82-%d8%a8%d8%a5-2/', 'summary': 'الحكومة تصادق على مشروع قانون يتعلق بإعادة تنظيم المجلس الوطني للصحافة.  – و م ع صادق مجلس الحكومة، اليوم الخميس، على مشروع القانون رقم 26.25 يتعلق بإعادة تنظيم المجلس الوطني للصحافة، قدمه وزير الشباب والثقافة والتواصل محمد المهدي بنسعيد....  الحكومة تصادق على مشروع قانون يتعلق بإعادة تنظيم المجلس الوطني للصحافة     .', 'size': 2}, {'id': '247', 'title': 'الحكومة تصادق على مشروعي قانوني لإعادة تنظيم المجلس الوطني للصحافة والنظام الأساسي للصحافيين', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d8%ad%d9%83%d9%88%d9%85%d8%a9-%d8%aa%d8%b5%d8%a7%d8%af%d9%82-%d8%b9%d9%84%d9%89-%d9%85%d8%b4%d8%b1%d9%88%d8%b9%d9%8a-%d9%82%d8%a7%d9%86%d9%88%d9%86%d9%8a-%d9%84%d8%a5%d8%b9%d8%a7%d8%af/', 'summary': 'الحكومة تصادق على مشروعي قانوني لإعادة تنظيم المجلس الوطني للصحافة والنظام الأساسي للصحافيين. انعقد يومه الخميس، مجلس للحكومة، خصص للتداول في عدد من مشاريع النصوص القانونية والاطلاع على اتفاق دولي، وللتداول في مقترحات تعيين في مناصب عليا، طبقا للفصل 92 من الدستور. وفي مستهل أشغال هذا الاجتماع، تداول مجلس الحكومة وصادق على مشروع القانون رقم 26.25 يتعلق بإعادة تنظيم المجلس الوطني للصحافة، قدمه محمد المهدي بنسعيد، …  الحكومة تصادق على مشروعي قانوني لإعادة تنظيم المجلس الوطني للصحافة والنظام الأساسي للصحافيين     .', 'size': 2}], 'main_title': 'الحكومة تصادق على مشروع قانون يتعلق بإعادة تنظيم المجلس الوطني للصحافة'}, {'community_id': '6', 'articles': [{'id': '280', 'title': 'الملك يهنئ ترامب بالعيد الأمريكي', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%8a%d9%87%d9%86%d8%a6-%d8%aa%d8%b1%d8%a7%d9%85%d8%a8-%d8%a8%d8%a7%d9%84%d8%b9%d9%8a%d8%af-%d8%a7%d9%84%d8%a3%d9%85%d8%b1%d9%8a%d9%83%d9%8a-1586927.html', 'summary': 'الملك يهنئ ترامب بالعيد الأمريكي. بعث الملك محمد السادس برقية تهنئة إلى رئيس الولايات المتحدة الأمريكية، دونالد ترامب، وذلك بمناسبة اليوم الوطني لبلاده. ومما جاء في هذه البرقية: “يطيب لي بمناسبة اليوم الوطني للولايات المتحدة الأمريكية أن أتقدم إليكم، باسمي الخاص وباسم الشعب المغربي، بأحر التهاني وأصدق المتمنيات، لكم شخصيا بدوام الصحة والسعادة، وللشعب الأمريكي الصديق باطراد الرخاء والازدهار، في  الملك يهنئ ترامب بالعيد الأمريكي     - هسبريس جريدة إلكترونية مغربية .', 'size': 3}, {'id': '357', 'title': 'الملك يهنئ ترامب بالعيد الوطني الأمريكي ويشيد بمتانة الشراكة بين البلدين', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1082994.html', 'summary': 'الملك يهنئ ترامب بالعيد الوطني الأمريكي ويشيد بمتانة الشراكة بين البلدين. بعث الملك محمد السادس برقية تهنئة إلى رئيس الولايات المتحدة الأمريكية، دونالد ترامب، وذلك بمناسبة اليوم الوطني لبلاده. ومما جاء في هذه البرقية “يطيب لي بمناسبة اليوم الوطني للولايات المتحدة الأمريكية، أن أتقدم إليكم باسمي الخاص وباسم الشعب المغربي، بأحر التهاني وأصدق المتمنيات لكم شخصيا بدوام الصحة والسعادة، وللشعب الأمريكي الصديق باطراد الرخاء والازدهار، في ظهرت المقالة الملك يهنئ ترامب بالعيد الوطني الأمريكي ويشيد بمتانة الشراكة بين البلدين  .', 'size': 3}, {'id': '402', 'title': 'الملك محمد السادس يهنئ الرئيس الأمريكي دونالد ترامب بمناسبة اليوم الوطني لبلاده', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%85%d8%ad%d9%85%d8%af-%d8%a7%d9%84%d8%b3%d8%a7%d8%af%d8%b3-%d9%8a%d9%87%d9%86%d8%a6-%d8%a7%d9%84%d8%b1%d8%a6%d9%8a%d8%b3-%d8%a7%d9%84%d8%a3%d9%85%d8%b1%d9%8a%d9%83-2/', 'summary': 'الملك محمد السادس يهنئ الرئيس الأمريكي دونالد ترامب بمناسبة اليوم الوطني لبلاده. بعث الملك محمد السادس برقية تهنئة إلى رئيس الولايات المتحدة الأمريكية، دونالد ترامب، وذلك بمناسبة اليوم الوطني لبلاده. ومما جاء في هذه البرقية “يطيب لي بمناسبة اليوم الوطني للولايات المتحدة الأمريكية، أن أتقدم إليكم باسمي الخاص وباسم الشعب المغربي، بأحر التهاني وأصدق المتمنيات لكم شخصيا بدوام الصحة والسعادة، وللشعب الأمريكي الصديق باطراد …  الملك محمد السادس يهنئ الرئيس الأمريكي دونالد ترامب بمناسبة اليوم الوطني لبلاده     .', 'size': 3}], 'main_title': 'الملك يهنئ ترامب بالعيد الأمريكي'}, {'community_id': '7', 'articles': [{'id': '308', 'title': 'توقعات أحوال الطقس اليوم الجمعة', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/202929', 'summary': 'توقعات أحوال الطقس اليوم الجمعة.  تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليومه الجمعة، أن تعرف الحالة الجوية، طقسا محليا حارا بالسهول الداخلية، والجنوب الشرقي للبلاد،وكذا داخل الأقاليم الجنوبية للمملكة. ومن المرتقب تمركز سحب رعدية محملة بقطرات أو زخات مطرية فوق كل من مرتفعات الأطلسين الكبير و المتوسط، و شمال الأطلس الصغير،وسفوحها الجنوبية الشرقية، فضلا عن نزول أمطار جد', 'size': 3}, {'id': '374', 'title': 'استمرار الطقس الحار مع تساقطات رعدية اليوم الجمعة', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a7%d8%b3%d8%aa%d9%85%d8%b1%d8%a7%d8%b1-%d8%a7%d9%84%d8%b7%d9%82-%d8%a7%d9%84%d8%ad%d8%a7%d8%b1-%d9%85%d8%b9-%d8%aa%d8%b3%d8%a7%d9%82%d8%b7%d8%a7%d8%aa-%d8%b1%d8%b9%d8%af%d9%8a%d8%a9-%d8%a7%d9%84/', 'summary': 'استمرار الطقس الحار مع تساقطات رعدية اليوم الجمعة. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الجمعة، أن تعرف الحالة الجوية، طقسا محليا حارا بالسهول الداخلية، والجنوب الشرقي للبلاد، وكذا داخل الأقاليم الجنوبية للمملكة. ومن المرتقب تمركز سحب رعدية محملة بقطرات أو زخات مطرية فوق كل من مرتفعات الأطلسين الكبير والمتوسط، وشمال الأطلس الصغير، وسفوحها الجنوبية الشرقية، فضلا عن نزول أمطار جد خفيفة بغرب  استمرار الطقس الحار مع تساقطات رعدية اليوم الجمعة     .', 'size': 2}, {'id': '376', 'title': 'توقعات أحوال الطقس لليوم الجمعة', 'source': 'soltana.ma', 'link': 'https://soltana.ma/1357530.html', 'summary': 'توقعات أحوال الطقس لليوم الجمعة. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليومه الجمعة، أن تعرف الحالة الجوية، طقسا محليا حارا بالسهول الداخلية، والجنوب الشرقي للبلاد، وكذا داخل الأقاليم الجنوبية للمملكة. ومن المرتقب تمركز سحب رعدية محملة بقطرات أو زخات مطرية فوق كل من مرتفعات الأطلسين الكبير والمتوسط، وشمال الأطلس الصغير، وسفوحها الجنوبية الشرقية، فضلا عن نزول أمطار جد خفيفة بغرب', 'size': 4}, {'id': '398', 'title': 'طقس الجمعة.. أجواء حارة مع زخات مطرية في بعض المناطق', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/224055/', 'summary': 'طقس الجمعة.. أجواء حارة مع زخات مطرية في بعض المناطق. كواليس اليوم تتوقع المديرية العامة للأرصاد الجوية، اليوم الجمعة، أن تعرف الحالة الجوية، طقسا محليا حارا بالسهول الداخلية، والجنوب الشرقي للبلاد، وكذا داخل الأقاليم الجنوبية للمملكة. ومن المرتقب تمركز سحب رعدية محملة بقطرات أو زخات مطرية فوق كل من مرتفعات الأطلسين الكبير والمتوسط، وشمال الأطلس الصغير، وسفوحها الجنوبية الشرقية، فضلا عن نزول أمطار جد', 'size': 3}], 'main_title': 'توقعات أحوال الطقس لليوم الجمعة'}, {'community_id': '4', 'articles': [{'id': '312', 'title': '"Vueling" تفتتح خطا جويا جديدا يربط الصويرة ببرشلونة', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/economy/408686.html', 'summary': '"Vueling" تفتتح خطا جويا جديدا يربط الصويرة ببرشلونة. حطت طائرة تابعة لشركة الخطوط الجوية الإسبانية "Vueling"، الخميس بمطار الصويرة موكادور الدولي، إيذانا بافتتاح خط جوي جديد يربط بين برشلونة ومدينة الرياح. وبهذه المناسبة، أ', 'size': 2}, {'id': '386', 'title': 'افتتاح خط جوي جديد يربط الصويرة ببرشلونة', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/468527.html', 'summary': 'افتتاح خط جوي جديد يربط الصويرة ببرشلونة. حطت طائرة تابعة لشركة الخطوط الجوية الإسبانية "Vueling"، الخميس بمطار الصويرة موكادور الدولي، إيذانا بافتتاح خط جوي جديد يربط بين برشلونة ومدينة الرياح.', 'size': 2}], 'main_title': '"Vueling" تفتتح خطا جويا جديدا يربط الصويرة ببرشلونة'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    