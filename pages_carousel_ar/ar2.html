<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 11/08/2025 - 06h31</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '11', 'title': 'بلوراث تحصل على برونزية المواي تاي', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d8%a8%d9%84%d9%88%d8%b1%d8%a7%d8%ab-%d8%aa%d8%ad%d8%b5%d9%84-%d8%b9%d9%84%d9%89-%d8%a8%d8%b1%d9%88%d9%86%d8%b2%d9%8a%d8%a9-%d8%a7%d9%84%d9%85%d9%88%d8%a7%d9%8a-%d8%aa%d8%a7%d9%8a-1606932.html', 'summary': 'بلوراث تحصل على برونزية المواي تاي. أحرزت المغربية أميمة بلوراث ميدالية برونزية في فئة وزن أقل من 48 كلغ، خلال منافسات النسخة الثانية عشرة من دورة الألعاب العالمية المقامة حاليا بمدينة تشونغدو الصينية. جاء هذا الإنجاز بعد فوز بلوراث في الدور الأول على التركية أوروك سيبيل، قبل أن تتعثر في نصف النهائي أمام التايلاندية آونوك ميس كولانات، ثم تتغلب على الفلبينية  بلوراث تحصل على برونزية المواي تاي     - هسبريس جريدة إلكترونية مغربية .', 'size': 2}, {'id': '290', 'title': 'المواي طاي.. بلوراث تمنح المغرب ميدالية برونزية عالمية من الصين', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a7%d9%84%d9%85%d9%88%d8%a7%d9%8a-%d8%b7%d8%a7%d9%8a-%d8%a8%d9%84%d9%88%d8%b1%d8%a7%d8%ab-%d8%aa%d9%85%d9%86%d8%ad-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d9%85%d9%8a%d8%af%d8%a7%d9%84%d9%8a%d8%a9/', 'summary': 'المواي طاي.. بلوراث تمنح المغرب ميدالية برونزية عالمية من الصين. أحرزت المغربية أميمة بلوراث الميدالية البرونزية في فئة وزن أقل من 48 كلغ، ضمن منافسات النسخة الثانية عشرة من دورة الألعاب العالمية المقامة حالياً بمدينة تشونغدو الصينية. وجاء تتويج بلوراث بعد بداية قوية، إذ تفوقت في الدور الأول على التركية أوروك سيبيل، قبل أن تتعثر في نصف النهائي أمام التايلاندية آونوك ميس كولانات. واستعادت البطلة', 'size': 2}], 'main_title': 'بلوراث تحصل على برونزية المواي تاي'}, {'community_id': '8', 'articles': [{'id': '70', 'title': 'برقية تعزية ومواساة من جلالة الملك إلى أفراد أسرة المرحوم فضيلة الشيخ جمال الدين القادري بودشيش', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/204833', 'summary': 'برقية تعزية ومواساة من جلالة الملك إلى أفراد أسرة المرحوم فضيلة الشيخ جمال الدين القادري بودشيش.  بعث صاحب الجلالة الملك محمد السادس برقية تعزية ومواساة إلى أفراد أسرة المرحوم فضيلة الشيخ جمال الدين القادري بودشيش. وجاء في برقية جلالة الملك، “فقد تلقينا ببالغ التأثر وعميق الأسى، نعي المشمول بعفو الله ورضاه، المرحوم الشيخ جمال الدين القادري بودشيش، شيخ الطريقة القادرية البودشيشية، تقبله الله في عداد الصالحين من عباده، المنعم', 'size': 5}, {'id': '73', 'title': 'برقية تعزية من جلالة الملك إلى أفراد أسرة المرحوم الشيخ جمال الدين القادري بودشيش', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/410799.html', 'summary': 'برقية تعزية من جلالة الملك إلى أفراد أسرة المرحوم الشيخ جمال الدين القادري بودشيش. بعث صاحب الجلالة الملك محمد السادس برقية تعزية ومواساة إلى أفراد أسرة المرحوم فضيلة الشيخ جمال الدين القادري بودشيش. وجاء في برقية جلالة الملك، "فقد تلقينا', 'size': 4}, {'id': '178', 'title': 'برقية تعزية ومواساة من الملك إلى أفراد أسرة المرحوم بودشيش', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/472139.html', 'summary': 'برقية تعزية ومواساة من الملك إلى أفراد أسرة المرحوم بودشيش. و.م.ع بعث الملك محمد السادس برقية تعزية ومواساة إلى أفراد أسرة المرحوم الشيخ جمال الدين القادري بودشيش. وجاء في برقية الملك، “فقد تلقينا ببالغ التأثر وعميق الأسى، نعي المشمول بعفو الله ورضاه، المرحوم الشيخ جمال الدين القادري بودشيش، شيخ الطريقة القادرية البودشيشية، تقبله الله في عداد الصالحين من عباده، المنعم عليهم بالمغفرة والرضوان”. وقال الملك …', 'size': 4}, {'id': '206', 'title': 'برقية تعزية ومواساة من جلالة الملك إلى أسرة الشيخ جمال الدين القادري بودشيش', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/225773/', 'summary': 'برقية تعزية ومواساة من جلالة الملك إلى أسرة الشيخ جمال الدين القادري بودشيش. بعث صاحب الجلالة الملك محمد السادس برقية تعزية ومواساة إلى أفراد أسرة المرحوم فضيلة الشيخ جمال الدين القادري بودشيش. وجاء في برقية جلالة الملك، “فقد تلقينا ببالغ التأثر وعميق الأسى، نعي المشمول بعفو الله ورضاه، المرحوم الشيخ جمال الدين القادري بودشيش، شيخ الطريقة القادرية البودشيشية، تقبله الله في عداد الصالحين من عباده، المنعم عليهم بالمغفرة', 'size': 5}, {'id': '216', 'title': 'الملك محمد السادس يعزي في وفاة شيخ الطريقة القادرية اليودشيشية', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%85%d8%ad%d9%85%d8%af-%d8%a7%d9%84%d8%b3%d8%a7%d8%af%d8%b3-%d9%8a%d8%b9%d8%b2%d9%8a-%d9%81%d9%8a-%d9%88%d9%81%d8%a7%d8%a9-%d8%b4%d9%8a%d8%ae-%d8%a7%d9%84%d8%b7%d8%b1/', 'summary': 'الملك محمد السادس يعزي في وفاة شيخ الطريقة القادرية اليودشيشية. المساء اليوم – آل باط: بعث الملك محمد السادس برقية تعزية ومواساة إلى أفراد أسرة المرحوم الشيخ جمال الدين القادري بودشيش. وجاء في البرقية الملكية “فقد تلقينا ببالغ التأثر وعميق الأسى، نعي المشمول بعفو الله', 'size': 5}], 'main_title': 'برقية تعزية ومواساة من جلالة الملك إلى أفراد أسرة المرحوم فضيلة الشيخ جمال الدين القادري بودشيش'}, {'community_id': '3', 'articles': [{'id': '102', 'title': 'المجتمع المغربي في خطر.. تراجع ملحوظ في نسب الزواج وعدد حالات الطلاق في ارتفاع مخيف', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/social/410829.html', 'summary': 'المجتمع المغربي في خطر.. تراجع ملحوظ في نسب الزواج وعدد حالات الطلاق في ارتفاع مخيف. يشهد المغرب في السنوات الأخيرة تحولات عميقة في بنية الأسرة، خاصة فيما يتعلق بمؤسسة الزواج التي فقدت كثيرًا من شعبيتها مقارنة بالعقود الماضية. فالأرقام الرسمية لوزارة', 'size': 3}, {'id': '127', 'title': 'تدني ملء السدود يهدد الأمن البيئي والغذائي', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/320655/', 'summary': 'تدني ملء السدود يهدد الأمن البيئي والغذائي. في ظل تزايد حدة التغيرات المناخية وتوالي سنوات الجفاف، يواجه المغرب واحدة من أخطر أزماته البنيوية، وهو الإجهاد المائي. وتراجعت نسبة ملء السدود إلى 35.3% حتى الرابع من غشت الجاري، في وقت تتصاعد فيه الحاجيات المائية بفعل النمو السكاني والتوسع العمراني واستنزاف الفرشات الجوفية. الأزمة، التي لم تعد ظرفية، تضرب المدن والمناطق القروية على حد', 'size': 3}, {'id': '333', 'title': 'بين جدران المدرسة.. قصة التنمر التي تهدد أحلام تلاميذ المغرب', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1091937.html', 'summary': 'بين جدران المدرسة.. قصة التنمر التي تهدد أحلام تلاميذ المغرب. في ظل التحولات المتسارعة التي يشهدها المجتمع، أصبحت ظاهرة التنمر في المدارس تشكل هاجسا حقيقيا يؤرق أولياء الأمور والمؤطرين التربويين على حد السواء، إذ لم يعد العنف المدرسي يقتصر على أشكاله التقليدية من سخرية واعتداء جسدي، بل تطور ليشمل أبعادا نفسية واجتماعية ورقمية، انعكست سلبا على المناخ التعليمي. ومع توالي التقارير والإحصائيات التي تكشف ارتفاع ظهرت المقالة بين جدران المدرسة.. قصة التنمر التي تهدد أحلام تلاميذ المغرب  .', 'size': 3}], 'main_title': 'المجتمع المغربي في خطر.. تراجع ملحوظ في نسب الزواج وعدد حالات الطلاق في ارتفاع مخيف'}, {'community_id': '5', 'articles': [{'id': '113', 'title': 'تهمُّ ولاية أمن الدار البيضاء.. حموشي يؤشر على تعيينات تُعزز فعالية شرطة الزي الرسمي', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%aa%d9%87%d9%85%d9%91%d9%8f-%d9%88%d9%84%d8%a7%d9%8a%d8%a9-%d8%a3%d9%85%d9%86-%d8%a7%d9%84%d8%af%d8%a7%d8%b1-%d8%a7%d9%84%d8%a8%d9%8a%d8%b6%d8%a7%d8%a1-%d8%ad%d9%85%d9%88%d8%b4%d9%8a-%d9%8a%d8%a4/', 'summary': 'تهمُّ ولاية أمن الدار البيضاء.. حموشي يؤشر على تعيينات تُعزز فعالية شرطة الزي الرسمي. أعلنت المديرية العامة للأمن الوطني، اليوم الأحد (10 غشت)، عن قائمة جديدة تضمنت عدة تعيينات في مناصب قيادة الهيئات الحضرية بمجموعة من مناطق الأمن التابعة لولاية أمن الدار البيضاء. وشملت هذه التعيينات الجديدة التي أشر عليها المدير العام للأمن الوطني عبد اللطيف حموشي، إجراء حركية داخلية بين الأطر الأمنية التي تنتمي إلى شرطة الزي الرسمي،', 'size': 4}, {'id': '150', 'title': 'تغييرات واسعة تمس رؤساء الشرطة الحضرية في الدار البيضاء', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%aa%d8%ba%d9%8a%d9%8a%d8%b1%d8%a7%d8%aa-%d9%88%d8%a7%d8%b3%d8%b9%d8%a9-%d8%a8%d9%8a%d9%86-%d8%b6%d8%a8%d8%a7%d8%b7-%d8%a7%d9%84%d8%b4%d8%b1%d8%b7%d8%a9-%d8%a7%d9%84%d8%ad%d8%b6%d8%b1%d9%8a%d8%a9/', 'summary': 'تغييرات واسعة تمس رؤساء الشرطة الحضرية في الدار البيضاء. أعلنت المديرية العامة للأمن الوطني، الأحد، عن قائمة جديدة تضمنت عدة تعيينات في مناصب قيادة الهيئات الحضرية بمجموعة من مناطق الأمن التابعة لولاية أمن الدار البيضاء. وقد شملت هذه التعيينات الجديدة التي أشر عليها المدير العام للأمن الوطني عبد اللطيف حموشي، إجراء حركية داخلية بين الأطر الأمنية التي تنتمي إلى شرطة الزي الرسمي، شملت رؤساء  تغييرات واسعة تمس رؤساء الشرطة الحضرية في الدار البيضاء     .', 'size': 5}, {'id': '201', 'title': 'السيد حموشي يُسند مناصب مهمة لمسؤولين جدد بمدينة الدار البيضاء', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/225786/', 'summary': 'السيد حموشي يُسند مناصب مهمة لمسؤولين جدد بمدينة الدار البيضاء. أعلنت المديرية العامة للأمن الوطني، اليوم الأحد 10 غشت الجاري، عن قائمة جديدة تضمنت عدة تعيينات في مناصب قيادة الهيئات الحضرية بمجموعة من مناطق الأمن التابعة لولاية أمن الدار البيضاء. وقد شملت هذه التعيينات الجديدة التي أشر عليها المدير العام للأمن الوطني عبد اللطيف حموشي، إجراء حركية داخلية بين الأطر الأمنية التي تنتمي إلى شرطة', 'size': 5}, {'id': '312', 'title': 'تعيينات جديدة في مناصب المسؤولية بمصالح الأمن الوطني بمدينة الدار البيضاء', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/320688/', 'summary': 'تعيينات جديدة في مناصب المسؤولية بمصالح الأمن الوطني بمدينة الدار البيضاء. أعلنت المديرية العامة للأمن الوطني، اليوم الأحد 10 غشت الجاري، عن قائمة جديدة تضمنت عدة تعيينات في مناصب قيادة الهيئات الحضرية بمجموعة من مناطق الأمن التابعة لولاية أمن الدار البيضاء. وقد شملت هذه التعيينات الجديدة التي أشر عليها المدير العام للأمن الوطني عبد اللطيف حموشي، إجراء حركية داخلية بين الأطر الأمنية التي تنتمي إلى شرطة', 'size': 5}, {'id': '382', 'title': 'حموشي يؤشر على تعيينات جديدة في مناصب المسؤولية بمصالح الأمن الوطني بالدار البيضاء', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%ad%d9%85%d9%88%d8%b4%d9%8a-%d9%8a%d8%a4%d8%b4%d8%b1-%d8%b9%d9%84%d9%89-%d8%aa%d8%b9%d9%8a%d9%8a%d9%86%d8%a7%d8%aa-%d8%ac%d8%af%d9%8a%d8%af%d8%a9-%d9%81%d9%8a-%d9%85%d9%86%d8%a7%d8%b5%d8%a8-32/', 'summary': 'حموشي يؤشر على تعيينات جديدة في مناصب المسؤولية بمصالح الأمن الوطني بالدار البيضاء. أعلنت المديرية العامة للأمن الوطني، اليوم الأحد 10 غشت الجاري، عن قائمة جديدة تضمنت عدة تعيينات في مناصب قيادة الهيئات الحضرية بمجموعة من مناطق الأمن التابعة لولاية أمن الدار البيضاء. وكشفت مصادر أمنية، أن هذه التعيينات الجديدة التي أشر عليها المدير العام للأمن الوطني عبد اللطيف حموشي، شملت إجراء حركية داخلية بين الأطر …  حموشي يؤشر على تعيينات جديدة في مناصب المسؤولية بمصالح الأمن الوطني بالدار البيضاء     .', 'size': 4}], 'main_title': 'تغييرات واسعة تمس رؤساء الشرطة الحضرية في الدار البيضاء'}, {'community_id': '6', 'articles': [{'id': '137', 'title': 'الرميد يستنكر تصريحات ابتسام لشكر ويطالب بمتابعتها بتهمة “الإساءة للدين الإسلامي”', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1092012.html', 'summary': 'الرميد يستنكر تصريحات ابتسام لشكر ويطالب بمتابعتها بتهمة “الإساءة للدين الإسلامي”. دعا وزير العدل الأسبق مصطفى الرميد إلى مساءلة ابتسام لشكر، إذا صحت التصريحات المنسوبة إليها، معتبرا أنها تشكل “عملا مدبرا وإساءة متعمدة للذات الإلهية”. جاء ذلك في تدوينة نشرها على صفحته الرسمية، مشددا على ضرورة تطبيق القانون لحماية المقدسات الدينية. وأكد الرميد أن ما نسب إلى لشكر، في حال ثبوته، لا يندرج ضمن حرية الفكر ظهرت المقالة الرميد يستنكر تصريحات ابتسام لشكر ويطالب بمتابعتها بتهمة “الإساءة للدين الإسلامي”  .', 'size': 2}, {'id': '153', 'title': 'الرميد يطالب بالتحقيق مع ابتسام لشكر بسبب «إساءة متعمدة» للذات الإلهية', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a7%d9%84%d8%b1%d9%85%d9%8a%d8%af-%d9%8a%d8%b7%d8%a7%d9%84%d8%a8-%d8%a8%d8%a7%d9%84%d8%aa%d8%ad%d9%82%d9%8a%d9%82-%d9%85%d8%b9-%d8%a7%d8%a8%d8%aa%d8%b3%d8%a7%d9%85-%d9%84%d8%b4%d9%83%d8%b1-%d8%a8/', 'summary': 'الرميد يطالب بالتحقيق مع ابتسام لشكر بسبب «إساءة متعمدة» للذات الإلهية. أثارت تدوينات جديدة للناشطة المغربية ابتسام لشكر، المؤسسة المشاركة لحركة "مالي" المدافعة عن الحريات الفردية، جدلا واسعا على مواقع التواصل الاجتماعي وفي الأوساط السياسية والحقوقية، بعد نشرها مضامين اعتُبرت "مسيئة للذات الإلهية" و"مستفزة لمشاعر المسلمين"، وهو ما دفع الوزير الأسبق في العدل مصطفى الرميد إلى المطالبة بفتح تحقيق قضائي في الموضوع، بناءً على مقتضيات القانون  الرميد يطالب بالتحقيق مع ابتسام لشكر بسبب «إساءة متعمدة» للذات الإلهية     .', 'size': 2}], 'main_title': 'الرميد يستنكر تصريحات ابتسام لشكر ويطالب بمتابعتها بتهمة “الإساءة للدين الإسلامي”'}, {'community_id': '7', 'articles': [{'id': '142', 'title': 'حكيمي: اتهامي زورا أمر فظيع.. وأستحق الكرة الذهبية أكثر من أي مهاجم', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1091943.html', 'summary': 'حكيمي: اتهامي زورا أمر فظيع.. وأستحق الكرة الذهبية أكثر من أي مهاجم. قال أشرف حكيمي، لاعب باريس سان جيرمان، إنه واثق من براءته إزاء الاتهامات الموجهة إليه بـ”الاعتداء الجنسي”، مُعتبرا أن الحقيقة ستظهر في المستقبل، دون أن تنال هذه القضية منه، رغم الزخم الإعلامي الذي اكتسبته. وأوضح الدولي المغربي، في حوار مع قناة “كانال بلس” الفرنسية، بالقول: “إنني هادئ، اتهامي زورا أمر فظيع، وغير عادل، لا أتمنى ظهرت المقالة حكيمي: اتهامي زورا أمر فظيع.. وأستحق الكرة الذهبية أكثر من أي مهاجم  .', 'size': 2}, {'id': '165', 'title': 'حكيمي: أستحق الكرة الذهبية والحقيقة ستظهر في اتهامي بالإغتصاب (فيديو)', 'source': 'rue20.com', 'link': 'https://rue20.com/927502.html', 'summary': 'حكيمي: أستحق الكرة الذهبية والحقيقة ستظهر في اتهامي بالإغتصاب (فيديو).  / متابعة أكد الدولي المغربي ونجم نادي باريس سان جيرمان الفرنسي، أشرف حكيمي، أن الاتهام الذي وجه إليه بمحاولة اغتصاب إحدى الفتيات ليس صحيحا، مشيرا إلى ثقته في براءته، كما عبر عن استحقاقه للكرة الذهبية في ظل مشواره الناجح خلال الموسم الماضي. وفي حوار مع قناة “كانال بلس”، قال حكيمي: “أنا هادئ، هذا الخبر حكيمي: أستحق الكرة الذهبية والحقيقة ستظهر في اتهامي بالإغتصاب (فيديو)  .', 'size': 2}], 'main_title': 'حكيمي: اتهامي زورا أمر فظيع.. وأستحق الكرة الذهبية أكثر من أي مهاجم'}, {'community_id': '9', 'articles': [{'id': '151', 'title': 'موجات من المهاجرين تقتحم سواحل سبتة في مشهد مأساوي متكرر', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d9%85%d9%88%d8%ac%d8%a7%d8%aa-%d9%85%d9%86-%d8%a7%d9%84%d9%85%d9%87%d8%a7%d8%ac%d8%b1%d9%8a%d9%86-%d8%aa%d9%82%d8%aa%d8%ad%d9%85-%d8%b3%d9%88%d8%a7%d8%ad%d9%84-%d8%b3%d8%a8%d8%aa%d8%a9-%d9%81%d9%8a/', 'summary': 'موجات من المهاجرين تقتحم سواحل سبتة في مشهد مأساوي متكرر. عاشت مدينة سبتة ليلة استثنائية وُصفت بأنها من أصعب الليالي التي عرفتها المنطقة الحدودية منذ بداية الصيف الجاري، بعد أن شهدت موجة غير مسبوقة من محاولات الهجرة غير النظامية، شارك فيها العشرات من الشبان واليافعين، بل وحتى الأطفال والقاصرين، الذين خاطروا بحياتهم في محاولة للوصول سباحةً إلى المدينة المحتلة عبر السواحل المقابلة لمنطقة الفنيدق. وحسب  موجات من المهاجرين تقتحم سواحل سبتة في مشهد مأساوي متكرر     .', 'size': 2}, {'id': '257', 'title': 'البحرية المغربية توقف محاولات تسلل جماعية إلى سبتة المحتلة', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-648444.html', 'summary': 'البحرية المغربية توقف محاولات تسلل جماعية إلى سبتة المحتلة. شهدت مدينة سبتة المحتلة في الساعات الأولى من صباح الأحد موجة جديدة من محاولات التسلل، حيث حاول عشرات المهاجرين ، من بينهم قاصرون، العبور انطلاقًا من سواحل مدينة الفنيدق المغربية. تمكن عدد من هؤلاء المهاجرين من الوصول إلى شاطئ سبتة ، بينما أوقفت البحرية المغربية عشرات آخرين قبل وصولهم، رغم الظروف الجوية الصعبة التي تزامنت مع العملية. وأفادت مصادر محلية أن الضباب الكثيف الذي ساد المنطقة ساعد المهاجرين على استغلال ضعف الرؤية للعبور سباحة نحو المدينة المحتلة، مستفيدين من هذه الحالة المناخية غير المواتية للمراقبة. تأتي هذه المحاولات في ظل أزمة هجرة متصاعدة تعيشها سبتة، حيث تجاوز عدد المهاجرين المقيمين بها 800 شخص، فيما تستوعب مراكز الإيواء في المدينة حوالي 500 فقط، مما يزيد من الضغوطات الإنسانية والاجتماعية ويثير توترات متزايدة.', 'size': 2}], 'main_title': 'موجات من المهاجرين تقتحم سواحل سبتة في مشهد مأساوي متكرر'}, {'community_id': '2', 'articles': [{'id': '186', 'title': 'هذه توقعات أحوال الطقس ليوم غد الاثنين', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d9%87%d8%b0%d9%87-%d8%aa%d9%88%d9%82%d8%b9%d8%a7%d8%aa-%d8%a3%d8%ad%d9%88%d8%a7%d9%84-%d8%a7%d9%84%d8%b7%d9%82%d8%b3-%d9%84%d9%8a%d9%88%d9%85-%d8%ba%d8%af-%d8%a7%d9%84%d8%a7%d8%ab%d9%86%d9%8a-11/', 'summary': 'هذه توقعات أحوال الطقس ليوم غد الاثنين. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليوم غد الاثنين، أن يظل الطقس حارا إلى محليا جد حار بسهول تادلة، والرحامنة، وهضاب الفوسفاط، ووالماس، والسايس،  هذه توقعات أحوال الطقس ليوم غد الاثنين     .', 'size': 2}, {'id': '225', 'title': 'توقعات أحوال الطقس اليوم الأحد', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%aa%d9%88%d9%82%d8%b9%d8%a7%d8%aa-%d8%a3%d8%ad%d9%88%d8%a7%d9%84-%d8%a7%d9%84%d8%b7%d9%82%d8%b3-%d8%a7%d9%84%d9%8a%d9%88%d9%85-%d8%a7%d9%84%d8%a3%d8%ad%d8%af-43/', 'summary': 'توقعات أحوال الطقس اليوم الأحد. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليومه الأحد، أن يظل الطقس حارا إلى جد حار نسبيا بسهول تادلة، والرحامنة، والشياظمة، وعبدة، وداخل الشاوية، والسايس، ووالماس، والجنوب الشرقي والأقاليم الصحراوية للمملكة. ويرتقب تشكل سحب منخفضة نسبيا كثيفة مصحوبة بكتل ضبابية أو بأمطار جد خفيفة محليا، فوق المناطق الساحلية الشمالية والوسطى. وستكون السماء غائمة جزئيا …  توقعات أحوال الطقس اليوم الأحد     .', 'size': 2}], 'main_title': 'هذه توقعات أحوال الطقس ليوم غد الاثنين'}, {'community_id': '4', 'articles': [{'id': '200', 'title': 'توقيف مواطن هولندي عضو في عصابة إجرامية متورطة في سرقات بالعنف واختطاف رضيع', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/225788/', 'summary': 'توقيف مواطن هولندي عضو في عصابة إجرامية متورطة في سرقات بالعنف واختطاف رضيع. تمكنت عناصر الشرطة بولاية أمن طنجة، اليوم الأحد 10 غشت الجاري، من توقيف مواطن هولندي يبلغ من العمر 23 سنة، يشكل موضوع أمر دولي بإلقاء القبض صادر عن السلطات القضائية البلجيكية. وقد جرى توقيف المشتبه فيه بأحد أحياء مدينة طنجة، حيث أظهرت عملية تنقيطه بقاعدة بيانات المنظمة الدولية للشرطة الجنائية “أنتربول” أنه مبحوث عنه على', 'size': 4}, {'id': '263', 'title': 'طنجة.. اعتقال عضو عصابة إجرامية مبحوث عنه عبر الإنتربول', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-648423.html', 'summary': 'طنجة.. اعتقال عضو عصابة إجرامية مبحوث عنه عبر الإنتربول. أوقفت مصالح الأمن بمدينة طنجة، اليوم الأحد 10 غشت 2025، شابًا يبلغ من العمر 23 سنة ويحمل الجنسية الهولندية ، للاشتباه في تورطه ضمن عصابة إجرامية متخصصة في السرقة والتهديد والعنف، إضافة إلى اختطاف رضيع. وجرى توقيف المشتبه فيه بأحد أحياء المدينة، حيث كشفت عملية تنقيطه في قاعدة بيانات المنظمة الدولية للشرطة الجنائية "الإنتربول" أنه مبحوث عنه دوليًا بموجب أمر اعتقال صادر عن السلطات القضائية البلجيكية. وقد تم وضع الموقوف تحت تدبير الحراسة النظرية في انتظار استكمال مسطرة التسليم، مع إشعار السلطات الأمنية البلجيكية من أجل إرسال ملف تسليمه، وذلك في إطار التعاون الأمني الدولي لمكافحة الجريمة المنظمة.', 'size': 4}, {'id': '294', 'title': 'متورط في اختطاف رضيع.. أمن طنجة يوقف هولندياً مبحوثاً عنه دولياً', 'source': 'kifache.com', 'link': 'https://kifache.com/%d9%85%d8%aa%d9%88%d8%b1%d8%b7-%d9%81%d9%8a-%d8%a7%d8%ae%d8%aa%d8%b7%d8%a7%d9%81-%d8%b1%d8%b6%d9%8a%d8%b9-%d8%a3%d9%85%d9%86-%d8%b7%d9%86%d8%ac%d8%a9-%d9%8a%d9%88%d9%82%d9%81-%d9%87%d9%88%d9%84/', 'summary': 'متورط في اختطاف رضيع.. أمن طنجة يوقف هولندياً مبحوثاً عنه دولياً. أوقفت المصالح الأمنية بولاية أمن طنجة، اليوم الأحد (10 غشت)، مواطنًا هولنديًا يبلغ من العمر 23 عامًا، موضوع أمر دولي بإلقاء القبض صادر عن السلطات القضائية البلجيكية. وجرى توقيف المشتبه فيه بأحد أحياء المدينة، حيث كشفت عملية تنقيطه بقاعدة بيانات المنظمة الدولية للشرطة الجنائية “الإنتربول” أنه مبحوث عنه دوليًا، على خلفية الاشتباه في ارتباطه بعصابة', 'size': 4}, {'id': '314', 'title': 'طنجة.. توقيف هولندي مبحوث عنه دوليا بتهم اختطاف رضيع وسرقة بالعنف', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/320685/', 'summary': 'طنجة.. توقيف هولندي مبحوث عنه دوليا بتهم اختطاف رضيع وسرقة بالعنف. تمكنت عناصر الشرطة بولاية أمن طنجة، اليوم الأحد 10 غشت الجاري، من توقيف مواطن هولندي يبلغ من العمر 23 سنة، يشكل موضوع أمر دولي بإلقاء القبض صادر عن السلطات القضائية البلجيكية. وقد جرى توقيف المشتبه فيه بأحد أحياء مدينة طنجة، حيث أظهرت عملية تنقيطه بقاعدة بيانات المنظمة الدولية للشرطة الجنائية “أنتربول” أنه مبحوث عنه على', 'size': 4}], 'main_title': 'توقيف مواطن هولندي عضو في عصابة إجرامية متورطة في سرقات بالعنف واختطاف رضيع'}, {'community_id': '1', 'articles': [{'id': '262', 'title': 'الفرقة الوطنية للشرطة القضائية توقف ابتسام لشكر', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-648430.html', 'summary': 'الفرقة الوطنية للشرطة القضائية توقف ابتسام لشكر. أكد مصدر مطلع أن الفرقة الوطنية للشرطة القضائية أوقفت، زوال اليوم الأحد، ابتسام لشكر على خلفية المحتوى الرقمي الذي أساءت فيه للذات الإلهية ونشرته عبر الأنظمة المعلوماتية. المعنية بالأمر ظهرت وهي ترتدي قميصا يسيء للذات الإلهية ، وينسب لها عبارات جنسية غير مسبوقة، وهو ما أثار استياءً عارما لدى المواطنين المغاربة، وتسبب في موجة تبليغات وتعليقات غاضبة في مواقع التواصل الاجتماعي. وقد دخلت الفرقة الوطنية للشرطة القضائية على خط هذه القضية، حيث قامت بتوقيف المعنية بالأمر وإخضاعها للأبحاث التمهيدية اللازمة قبل أن يتم وضعها تحت الحراسة النظرية.', 'size': 3}, {'id': '344', 'title': 'وكيل الملك يكشف ملابسات توقيف “ابتسام لشكر” بعد نشر محتوى مسيء للذات الإلهية', 'source': 'rue20.com', 'link': 'https://rue20.com/927591.html', 'summary': 'وكيل الملك يكشف ملابسات توقيف “ابتسام لشكر” بعد نشر محتوى مسيء للذات الإلهية.  / متابعة أوقفت الفرقة الوطنية للشرطة القضائية، اليوم الأحد، الناشطة ابتسام لشكر على خلفية نشرها محتوى رقمي يتضمن عبارات مسيئة للذات الإلهية عبر مواقع التواصل الاجتماعي. وجاء توقيف المعنية بعد تداول صورة لها وهي ترتدي قميصاً يحمل عبارات اعتُبرت مستفزة ومسيئة، ما أثار غضباً واسعاً بين رواد المنصات الإلكترونية، وأدى إلى موجة من الخبر وكيل الملك يكشف ملابسات توقيف “ابتسام لشكر” بعد نشر محتوى مسيء للذات الإلهية  .', 'size': 2}, {'id': '371', 'title': 'بتهمة المس بالذات الإلهية: الفرقة الوطنية تحقق مع ابتسام لشكر', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/225800/', 'summary': 'بتهمة المس بالذات الإلهية: الفرقة الوطنية تحقق مع ابتسام لشكر. السعيد بنلباه قامت الفرقة الوطنية للشرطة القضائية عصر اليوم الأحد 10 غشت 2025 بتوقيف المثيرة للجدل ابتسام لشكر بعد التبليغات العديدة والتعليقات الشاجبة، عقب نشرها محتوى رقمي ظهرت فيه وهي ترتدي قميصا رياضيا يتضمن عبارات مسيئة للذات الإلهية ،.ما أثار موجة غضب عارمة للمغاربة على منصات التواصل الاجتماعي . ومباشرة بعد توقيفها أخضعتها للأبحاث التمهيدية', 'size': 2}], 'main_title': 'الفرقة الوطنية للشرطة القضائية توقف ابتسام لشكر'}, {'community_id': '10', 'articles': [{'id': '284', 'title': 'بلاغ وكيل الملك حول واقعة الإساءة للذات الإلهية من طرف ابتسام لشكر', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/society/410847.html', 'summary': 'بلاغ وكيل الملك حول واقعة الإساءة للذات الإلهية من طرف ابتسام لشكر. أعلن وكيل الملك لدى المحكمة الابتدائية بالرباط أنه على إثر قيام سيدة بنشر صورة لها بحسابها على إحدى منصات التواصل الاجتماعي تظهر فيها وهي ترتدي', 'size': 4}, {'id': '291', 'title': 'بسبب إساءة للدين الإسلامي والذات الإلهية.. ابتسام لشكر تحت الحراسة النظرية', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a8%d8%b3%d8%a8%d8%a8-%d8%a5%d8%b3%d8%a7%d8%a1%d8%a9-%d9%84%d9%84%d8%af%d9%8a%d9%86-%d8%a7%d9%84%d8%a5%d8%b3%d9%84%d8%a7%d9%85%d9%8a-%d9%88%d8%a7%d9%84%d8%b0%d8%a7%d8%aa-%d8%a7%d9%84%d8%a5%d9%84/', 'summary': 'بسبب إساءة للدين الإسلامي والذات الإلهية.. ابتسام لشكر تحت الحراسة النظرية. أعلن وكيل الملك لدى المحكمة الابتدائية بالرباط عن فتح بحث قضائي مع الناشطة المغربية ابتسام لشكر، مؤسسة حركة “مالي” سنة 2009، على خلفية نشرها محتوى يتضمن إساءة للدين الإسلامي والذات الإلهية. وحسب البلاغ، فقد قامت لشكر بنشر صورة عبر حسابها على إحدى منصات التواصل الاجتماعي، وهي ترتدي قميصاً يحمل عبارات مسيئة للذات الإلهية، مرفقة بتدوينة', 'size': 4}, {'id': '310', 'title': 'توقيف ابتسام لشكر إثر إساءتها للذات الإلهية', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/320710/', 'summary': 'توقيف ابتسام لشكر إثر إساءتها للذات الإلهية. أوقفت الفرقة الوطنية للشرطة القضائية، اليوم الأحد، الناشطة ابتسام لشكر على خلفية نشرها صورة لها بحسابها على إحدى منصات التواصل الاجتماعي تظهر فيها وهي ترتدي قميصا مكتوب عليه عبارات مسيئة للذات الإلهية وأرفقت الصورة بتدوينة تتضمن إهانة للدين الإسلامي. وأمرت النيابة العامة، حسب بلاغ وكيل الملك لدى المحكمة الابتدائية بالرباط، بفتح بحث في الموضوع، ونظرا', 'size': 5}, {'id': '327', 'title': 'النيابة العامة تضع ابتسام لشكر تحت الحراسة النظرية بتهمة إهانة الدين الإسلامي', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1092055.html', 'summary': 'النيابة العامة تضع ابتسام لشكر تحت الحراسة النظرية بتهمة إهانة الدين الإسلامي. أعلن وكيل الملك لدى المحكمة الابتدائية بالرباط، عن فتح بحث إثر قيام سيدة بنشر صورة لها بحسابها على إحدى منصات التواصل الاجتماعي تظهر فيها وهي ترتدي قميصا مكتوب عليه عبارات مسيئة للذات الإلهية وأرفقت الصورة بتدوينة تتضمن إهانة للدين الإسلامي. وأفاد بلاغ لوكيل الملك لدى المحكمة الابتدائية بالرباط، أنه نظرا لضرورة البحث، تم وضع المعنية ظهرت المقالة النيابة العامة تضع ابتسام لشكر تحت الحراسة النظرية بتهمة إهانة الدين الإسلامي  .', 'size': 5}, {'id': '370', 'title': 'عاجل من وكيل الملك: ابتسام لشكر تم وضعها رهن الحراسة النظرية', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/225803/', 'summary': 'عاجل من وكيل الملك: ابتسام لشكر تم وضعها رهن الحراسة النظرية. أعلن وكيل الملك لدى المحكمة الابتدائية بالرباط أنه على إثر قيام سيدة بنشر صورة لها بحسابها على إحدى منصات التواصل الاجتماعي تظهر فيها وهي ترتدي قميصا مكتوب عليه عبارات مسيئة للذات الإلهية وأرفقت الصورة بتدوينة تتضمن إهانة للدين الإسلامي. أمرت النيابة العامة بفتح بحث في الموضوع، ونظرا لضرورته تم وضع المعنية بالأمر تحت الحراسة', 'size': 5}], 'main_title': 'توقيف ابتسام لشكر إثر إساءتها للذات الإلهية'}, {'community_id': '11', 'articles': [{'id': '287', 'title': 'استهداف إسرائيلي يقتل مراسلي "الجزيرة" أنس الشريف ومحمد قريقع في غزة', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/world/410850.html', 'summary': 'استهداف إسرائيلي يقتل مراسلي "الجزيرة" أنس الشريف ومحمد قريقع في غزة. قُتل مراسلا قناة الجزيرة، أنس الشريف ومحمد قريقع، إثر قصف إسرائيلي استهدف خيمة للصحفيين في منطقة مجمع الشفاء الطبي في قطاع غزة، كما أسفر القصف', 'size': 2}, {'id': '326', 'title': 'إسرائيل تغتال مراسلي الجزيرة بغزة أنس الشريف ومحمد قريقع في قصف لخيمة الصحفيين', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1092056.html', 'summary': 'إسرائيل تغتال مراسلي الجزيرة بغزة أنس الشريف ومحمد قريقع في قصف لخيمة الصحفيين. أفاد مدير مجمع الشفاء الطبي في غزة، مساء اليوم، باستشهاد مراسلي قناة الجزيرة أنس الشريف ومحمد قريقع ظهرت المقالة إسرائيل تغتال مراسلي الجزيرة بغزة أنس الشريف ومحمد قريقع في قصف لخيمة الصحفيين  .', 'size': 2}], 'main_title': 'استهداف إسرائيلي يقتل مراسلي "الجزيرة" أنس الشريف ومحمد قريقع في غزة'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    