<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 27/07/2025 - 18h27</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '6', 'title': 'سفينة "حنظلة" تصل إلى إسرائيل', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d8%b3%d9%81%d9%8a%d9%86%d8%a9-%d8%ad%d9%86%d8%b8%d9%84%d8%a9-%d8%aa%d8%b5%d9%84-%d8%a5%d9%84%d9%89-%d8%a5%d8%b3%d8%b1%d8%a7%d8%a6%d9%8a%d9%84-1599815.html', 'summary': 'سفينة "حنظلة" تصل إلى إسرائيل. وصلت سفينة “حنظلة” التابعة لأسطول الحرية المؤيد للفلسطينيين، الأحد، لإسرائيل بعدما اعترضها الجيش الإسرائيلي، وفقا لما أفاد مراسل وكالة فرانس برس من ميناء إسدود. وكانت السفينة في طريقها لمحاولة كسر الحصار البحري الإسرائيلي على غزة، وإدخال كمية من المساعدات الإنسانية للفلسطينيين في القطاع قبل أن يعترضها الجيش الإسرائيلي ويحتجز أفراد طاقمها، ومن بينهم نائبتان من  سفينة "حنظلة" تصل إلى إسرائيل     - هسبريس جريدة إلكترونية مغربية .', 'size': 2}, {'id': '148', 'title': 'وصول سفينة “حنظلة” إلى إسرائيل بعد اعتراضها', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/319437/', 'summary': 'وصول سفينة “حنظلة” إلى إسرائيل بعد اعتراضها. وصلت سفينة “حنظلة” التابعة لأسطول الحرية المؤيد للفلسطينيين، الأحد، لإسرائيل بعدما اعترضها الجيش الإسرائيلي، وفقا لما أفاد مراسل وكالة فرانس برس من ميناء إسدود. وكانت السفينة في طريقها لمحاولة كسر الحصار البحري الإسرائيلي على غزة، وإدخال كمية من المساعدات الإنسانية للفلسطينيين في القطاع قبل أن يعترضها الجيش الإسرائيلي ويحتجز أفراد طاقمها، ومن بينهم نائبتان من', 'size': 2}], 'main_title': 'سفينة "حنظلة" تصل إلى إسرائيل'}, {'community_id': '5', 'articles': [{'id': '23', 'title': 'طقس الأحد.. ضباب وأمطار خفيفة شمالًا وحرارة مرتفعة جنوبًا', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-644275.html', 'summary': 'طقس الأحد.. ضباب وأمطار خفيفة شمالًا وحرارة مرتفعة جنوبًا. تتوقع المديرية العامة للأرصاد الجوية،اليوم الأحد، أن يكون الطقس حارا بكل من الجنوب والجنوب الشرقي، ونسبيا حارا بالسهول غرب الأطلس. كما يرتقب تشكل سحب منخفضة كثيفة بالسواحل الشمالية والوسطى، مع كتل ضبابية وقطرات مطرية محلية، فيما ستكون السماء قليلة الغيوم إلى أحيانا غائمة بمرتفعات الأطلسين الكبير والصغير والجنوب الشرقي وجنوب الأقاليم الجنوبية. وستهب رياح محليا قوية بمرتفعات الأطلس والجنوب الشرقي وجنوب المنطقة الشرقية والأقاليم الجنوبية، مع تناثر هبات رملية في بعض المناطق. وستتراوح درجات الحرارة الدنيا ما بين 24 و30 درجة مئوية بالجنوب الشرقي والسهول غرب الأطلس وشرق وجنوب الأقاليم الصحراوية، وستكون ما بين 15 و23 درجة بباقي الأرجاء الأخرى. فيما ستشهد درجات الحرارة بعض الارتفاع بالجنوب ووسط المملكة، وبعض الانخفاض أو لن تعرف تغييرا بباقي المناطق. وسيكون البحر هادئا إلى قليل الهيجان بالواجهة المتوسطية، وقليل الهيجان إلى هائج بباقي السواحل.', 'size': 2}, {'id': '184', 'title': 'طقس حار مع قطرات مطرية متوقع اليوم الأحد', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%b7%d9%82%d8%b3-%d8%ad%d8%a7%d8%b1-%d9%85%d8%b9-%d9%82%d8%b7%d8%b1%d8%a7%d8%aa-%d9%85%d8%b7%d8%b1%d9%8a%d8%a9-%d9%85%d8%aa%d9%88%d9%82%d8%b9-%d8%a7%d9%84%d9%8a%d9%88%d9%85-%d8%a7%d9%84%d8%a3-2/', 'summary': 'طقس حار مع قطرات مطرية متوقع اليوم الأحد. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الأحد، أن يكون الطقس حارا بكل من الجنوب والجنوب الشرقي، ونسبيا حارا بالسهول غرب الأطلس. كما يرتقب تشكل سحب منخفضة كثيفة بالسواحل الشمالية والوسطى، مع كتل ضبابية وقطرات مطرية محلية، فيما ستكون السماء قليلة الغيوم إلى أحيانا غائمة بمرتفعات الأطلسين الكبير والصغير والجنوب الشرقي وجنوب الأقاليم الجنوبية. وستهب  طقس حار مع قطرات مطرية متوقع اليوم الأحد     .', 'size': 2}], 'main_title': 'طقس الأحد.. ضباب وأمطار خفيفة شمالًا وحرارة مرتفعة جنوبًا'}, {'community_id': '9', 'articles': [{'id': '67', 'title': 'جلالة الملك يهنئ أعضاء المنتخب الوطني المغربي النسوي لكرة القدم على المسيرة المتألقة في كأس أمم إفريقيا', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/204108', 'summary': 'جلالة الملك يهنئ أعضاء المنتخب الوطني المغربي النسوي لكرة القدم على المسيرة المتألقة في كأس أمم إفريقيا.  بعث صاحب الجلالة الملك محمد السادس، نصره الله، برقية تهنئة إلى أعضاء المنتخب الوطني المغربي النسوي لكرة القدم على المسيرة المتألقة التي بصم عليها في كأس أمم إفريقيا للسيدات نسخة 2024. وقال جلالة الملك في هذه البرقية “فقد تتبعنا بكل اعتزاز مسيرتكن المتألقة في منافسات كأس أمم إفريقيا للسيدات (نسخة 2024)،والتي تكللت ببلوغكن', 'size': 4}, {'id': '142', 'title': 'جلالة الملك يهنئ المنتخب الوطني النسوي', 'source': 'assabah.ma', 'link': 'https://assabah.ma/861896.html', 'summary': 'جلالة الملك يهنئ المنتخب الوطني النسوي. بعث صاحب الجلالة الملك محمد السادس، نصره الله، برقية تهنئة إلى أعضاء المنتخب الوطني المغربي النسوي لكرة القدم على المسيرة المتألقة التي بصم عليها في كأس أمم إفريقيا للسيدات نسخة 2024. وقال جلالة الملك في هذه البرقية “فقد تتبعنا بكل اعتزاز مسيرتكن المتألقة في منافسات كأس أممأكمل القراءة » المقالة جلالة الملك يهنئ المنتخب الوطني النسوي  .', 'size': 3}, {'id': '240', 'title': 'الملك محمد السادس يهنئ لاعبات المنتخب على “المسيرة المتألقة” خلال كأس إفريقيا', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%85%d8%ad%d9%85%d8%af-%d8%a7%d9%84%d8%b3%d8%a7%d8%af%d8%b3-%d9%8a%d9%87%d9%86%d8%a6-%d9%84%d8%a7%d8%b9%d8%a8%d8%a7%d8%aa-%d8%a7%d9%84%d9%85%d9%86%d8%aa%d8%ae%d8%a8/', 'summary': 'الملك محمد السادس يهنئ لاعبات المنتخب على “المسيرة المتألقة” خلال كأس إفريقيا. المساء اليوم: بعث الملك محمد السادس، برقية تهنئة إلى أعضاء المنتخب الوطني المغربي النسوي لكرة القدم على المسيرة المتألقة التي بصم عليها في كأس أمم إفريقيا للسيدات نسخة 2024. وقال جلالة الملك في هذه البرقية', 'size': 3}, {'id': '253', 'title': 'الملك محمد السادس يهنئ المنتخب الوطني المغربي النسوي على المسيرة المتألقة في كأس أمم إفريقيا', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%85%d8%ad%d9%85%d8%af-%d8%a7%d9%84%d8%b3%d8%a7%d8%af%d8%b3-%d9%8a%d9%87%d9%86%d8%a6-%d8%a7%d9%84%d9%85%d9%86%d8%aa%d8%ae%d8%a8-%d8%a7%d9%84%d9%88%d8%b7%d9%86%d9%8a/', 'summary': 'الملك محمد السادس يهنئ المنتخب الوطني المغربي النسوي على المسيرة المتألقة في كأس أمم إفريقيا. بعث الملك محمد السادس، برقية تهنئة إلى أعضاء المنتخب الوطني المغربي النسوي لكرة القدم على المسيرة المتألقة التي بصم عليها في كأس أمم إفريقيا للسيدات نسخة 2024. وقال الملك محمد السادس في هذه البرقية “فقد تتبعنا بكل اعتزاز مسيرتكن المتألقة في منافسات كأس أمم إفريقيا للسيدات (نسخة 2024)، والتي تكللت ببلوغكن للدور النهائي …  الملك محمد السادس يهنئ المنتخب الوطني المغربي النسوي على المسيرة المتألقة في كأس أمم إفريقيا     .', 'size': 4}], 'main_title': 'جلالة الملك يهنئ أعضاء المنتخب الوطني المغربي النسوي لكرة القدم على المسيرة المتألقة في كأس أمم إفريقيا'}, {'community_id': '3', 'articles': [{'id': '109', 'title': 'البحرية الإسرائيلية تقتحم السفينة حنظلة', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/world/409997.html', 'summary': 'البحرية الإسرائيلية تقتحم السفينة حنظلة. في خطوة تصعيدية غير مفاجئة، أقدمت البحرية الإسرائيلية، قبل قليل، على اقتحام سفينة "حنظلة" المحملة بالمساعدات الإنسانية والمتوجهة إلى قطاع غزة المحاصر، وذلك بعد أيام', 'size': 2}, {'id': '221', 'title': '“حكومة غزة”: اقتحام “الجيش الإسرائيلي” لسفينة حنظلة قرصنة بحرية', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d8%ad%d9%83%d9%88%d9%85%d8%a9-%d8%ba%d8%b2%d8%a9-%d8%a7%d9%82%d8%aa%d8%ad%d8%a7%d9%85-%d8%a7%d9%84%d8%ac%d9%8a%d8%b4-%d8%a7%d9%84%d8%a5%d8%b3%d8%b1%d8%a7%d8%a6%d9%8a%d9%84%d9%8a-%d9%84%d8%b3/', 'summary': '“حكومة غزة”: اقتحام “الجيش الإسرائيلي” لسفينة حنظلة قرصنة بحرية. اعتبرت حكومة غزة، الأحد، اقتحام الجيش الإسرائيلي لسفينة "حنظلة" في عرض البحر "جريمة قرصنة بحرية وانتهاك صارخ للقانون الدولي". وطالبت المجتمع الدولي بتأمين  “حكومة غزة”: اقتحام “الجيش الإسرائيلي” لسفينة حنظلة قرصنة بحرية     .', 'size': 2}], 'main_title': 'البحرية الإسرائيلية تقتحم السفينة حنظلة'}, {'community_id': '7', 'articles': [{'id': '137', 'title': 'طنجة.. إجهاض محاولة تهريب 4 أطنان و374 كلغ من مخدر الشيرا على متن شاحنة للنقل الدولي', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%b7%d9%86%d8%ac%d8%a9-%d8%a5%d8%ac%d9%87%d8%a7%d8%b6-%d9%85%d8%ad%d8%a7%d9%88%d9%84%d8%a9-%d8%aa%d9%87%d8%b1%d9%8a%d8%a8-4-%d8%a3%d8%b7%d9%86%d8%a7%d9%86-%d9%88374-%d9%83%d9%84%d8%ba-%d9%85%d9%86/', 'summary': 'طنجة.. إجهاض محاولة تهريب 4 أطنان و374 كلغ من مخدر الشيرا على متن شاحنة للنقل الدولي. تمكنت عناصر الأمن الوطني والجمارك العاملة بميناء طنجة المتوسط، خلال الساعات الأولى من صباح اليوم الأحد (27 يوليوز)، من إجهاض محاولة تهريب أربعة أطنان و 374 كيلوغراما من مخدر الشيرا على متن شاحنة للنقل الدولي للبضائع. وكانت عمليات المراقبة الحدودية المشتركة بين الأمن الوطني والجمارك قد أسفرت عن ضبط هذه المحجوزات الكبيرة من المخدرات مخبأة', 'size': 5}, {'id': '150', 'title': 'إحباط تهريب أكثر من 4 أطنان من مخدر الشيرا بميناء طنجة', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/319431/', 'summary': 'إحباط تهريب أكثر من 4 أطنان من مخدر الشيرا بميناء طنجة. تمكنت عناصر الأمن الوطني والجمارك العاملة بميناء طنجة المتوسط، خلال الساعات الأولى من صباح اليوم الأحد 27 يوليوز الجاري، من إجهاض محاولة تهريب أربعة أطنان و374 كيلوغراما من مخدر الشيرا على متن شاحنة للنقل الدولي للبضائع. وكانت عمليات المراقبة الحدودية المشتركة بين الأمن الوطني والجمارك قد أسفرت عن ضبط هذه المحجوزات الكبيرة من المخدرات', 'size': 5}, {'id': '179', 'title': 'ميناء طنجة المتوسط.. إجهاض محاولة تهريب أزيد من أربعة أطنان من الشيرا', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d9%85%d9%8a%d9%86%d8%a7%d8%a1-%d8%b7%d9%86%d8%ac%d8%a9-%d8%a7%d9%84%d9%85%d8%aa%d9%88%d8%b3%d8%b7-%d8%a5%d8%ac%d9%87%d8%a7%d8%b6-%d9%85%d8%ad%d8%a7%d9%88%d9%84%d8%a9-%d8%aa%d9%87%d8%b1%d9%8a%d8%a8-3/', 'summary': 'ميناء طنجة المتوسط.. إجهاض محاولة تهريب أزيد من أربعة أطنان من الشيرا. تمكنت عناصر الأمن الوطني والجمارك العاملة بميناء طنجة المتوسط، خلال الساعات الأولى من صباح اليوم الأحد 27 يوليوز الجاري، من إجهاض محاولة تهريب أربعة أطنان و374 كيلوغراما من مخدر الشيرا على متن شاحنة للنقل الدولي للبضائع. وأوضح مصدر أمني أن عمليات المراقبة الحدودية المشتركة بين الأمن الوطني والجمارك كانت قد أسفرت عن ضبط هذه المحجوزات الكبيرة  ميناء طنجة المتوسط.. إجهاض محاولة تهريب أزيد من أربعة أطنان من الشيرا     .', 'size': 5}, {'id': '226', 'title': 'مخدرات في شاحنة الفواكه: إجهاض محاولة تهريب أربعة أطنان و374 كيلو من الشيرا بطنجة', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/225244/', 'summary': 'مخدرات في شاحنة الفواكه: إجهاض محاولة تهريب أربعة أطنان و374 كيلو من الشيرا بطنجة. تمكنت عناصر الأمن الوطني والجمارك العاملة بميناء طنجة المتوسط، خلال الساعات الأولى من صباح اليوم الأحد 27 يوليوز الجاري، من إجهاض محاولة تهريب أربعة أطنان و374 كيلوغراما من مخدر الشيرا على متن شاحنة للنقل الدولي للبضائع. وكانت عمليات المراقبة الحدودية المشتركة بين الأمن الوطني والجمارك قد أسفرت عن ضبط هذه المحجوزات الكبيرة من المخدرات مخبأة', 'size': 5}, {'id': '309', 'title': 'طنجة .. إجهاض محاولة تهريب أربعة أطنان و374 كيلوغراما من مخدر الشيرا', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/204124', 'summary': 'طنجة .. إجهاض محاولة تهريب أربعة أطنان و374 كيلوغراما من مخدر الشيرا.  تمكنت عناصر الأمن الوطني والجمارك العاملة بميناء طنجة المتوسط، خلال الساعات الأولى من صباح اليوم الأحد، من إجهاض محاولة تهريب أربعة أطنان و374 كيلوغراما من مخدر الشيرا على متن شاحنة للنقل الدولي للبضائع. وذكر مصدر أمني أن عمليات المراقبة الحدودية المشتركة بين الأمن الوطني والجمارك كانت قد أسفرت عن ضبط هذه المحجوزات الكبيرة من المخدرات', 'size': 5}], 'main_title': 'طنجة.. إجهاض محاولة تهريب 4 أطنان و374 كلغ من مخدر الشيرا على متن شاحنة للنقل الدولي'}, {'community_id': '1', 'articles': [{'id': '143', 'title': 'أمين عام المؤتمر الوطني الشعبي للقدس يشيد بجهود جلالة الملك محمد السادس في دعم القضية الفلسطينية', 'source': 'assabah.ma', 'link': 'https://assabah.ma/861907.html', 'summary': 'أمين عام المؤتمر الوطني الشعبي للقدس يشيد بجهود جلالة الملك محمد السادس في دعم القضية الفلسطينية. أشاد الأمين العام للمؤتمر الوطني الشعبي للقدس، اللواء بلال النتشة، أمس الجمعة برام الله، بدور صاحب الجلالة الملك محمد السادس، رئيس لجنة القدس، والحكومة والشعب المغربيين على وقفتهم المشرفة الى جانب القضية الفلسطينية، التي تتعرض لخطر التصفية. وثمن اللواء النتشة، خلال لقائه المدير المكلف بتسيير وكالة بيتأكمل القراءة » المقالة أمين عام المؤتمر الوطني الشعبي للقدس يشيد بجهود جلالة الملك محمد السادس في دعم القضية الفلسطينية  .', 'size': 2}, {'id': '151', 'title': 'أمين عام المؤتمر الوطني الشعبي للقدس يشيد بجهود الملك في دعم القضية الفلسطينية', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/319429/', 'summary': 'أمين عام المؤتمر الوطني الشعبي للقدس يشيد بجهود الملك في دعم القضية الفلسطينية. أشاد الأمين العام للمؤتمر الوطني الشعبي للقدس، اللواء بلال النتشة، برام الله، بدور الملك محمد السادس، رئيس لجنة القدس، والحكومة والشعب المغربيين على وقفتهم المشرفة الى جانب القضية الفلسطينية، التي تتعرض لخطر التصفية. وثمن اللواء النتشة، خلال لقائه المدير المكلف بتسيير وكالة بيت مال القدس الشريف، محمد سالم الشرقاوي، المشاريع النوعية التي تنفذها الوكالة لمساعدة', 'size': 2}], 'main_title': 'أمين عام المؤتمر الوطني الشعبي للقدس يشيد بجهود جلالة الملك محمد السادس في دعم القضية الفلسطينية'}, {'community_id': '2', 'articles': [{'id': '144', 'title': 'وزيرة خارجية فلسطين: الدفاع عن القضية الفلسطينية والقدس الشريف ثابت أساسي في دبلوماسية جلالة الملك', 'source': 'assabah.ma', 'link': 'https://assabah.ma/861909.html', 'summary': 'وزيرة خارجية فلسطين: الدفاع عن القضية الفلسطينية والقدس الشريف ثابت أساسي في دبلوماسية جلالة الملك. أكدت وزيرة الخارجية والمغتربين بدولة فلسطين، فارسين اغابكيان شاهين، أن الدفاع عن القضية الفلسطينية والقدس الشريف ثابت أساسي في دبلوماسية صاحب الجلالة الملك محمد السادس، رئيس لجنة القدس. وأبرزت الوزيرة الفلسطينية، في تصريحات صحفية بمناسبة عيد العرش المجيد، أن جلالة الملك ما فتئ يؤكد على أن دعمأكمل القراءة » المقالة وزيرة خارجية فلسطين: الدفاع عن القضية الفلسطينية والقدس الشريف ثابت أساسي في دبلوماسية جلالة الملك  .', 'size': 2}, {'id': '171', 'title': 'الخارجية الفلسطينية: الدفاع عن القدس ثابت استراتيجي في دبلوماسية الملك محمد السادس', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1088468.html', 'summary': 'الخارجية الفلسطينية: الدفاع عن القدس ثابت استراتيجي في دبلوماسية الملك محمد السادس. أكدت وزيرة الخارجية والمغتربين بدولة فلسطين، فارسين اغابكيان شاهين، أن الدفاع عن القضية الفلسطينية والقدس الشريف ثابت أساسي في دبلوماسية الملك محمد السادس، رئيس لجنة القدس. وأبرزت الوزيرة الفلسطينية، في تصريحات صحفية بمناسبة عيد العرش المجيد، أن الملك ما فتئ يؤكد على أن دعم المغرب للقضية الفلسطينية ودفاعه عن القدس الشريف يشكلان ثابتا أساسيا في ظهرت المقالة الخارجية الفلسطينية: الدفاع عن القدس ثابت استراتيجي في دبلوماسية الملك محمد السادس  .', 'size': 2}], 'main_title': 'وزيرة خارجية فلسطين: الدفاع عن القضية الفلسطينية والقدس الشريف ثابت أساسي في دبلوماسية جلالة الملك'}, {'community_id': '8', 'articles': [{'id': '147', 'title': 'لبؤات الأطلس يؤكدن على أهمية الاستفادة من التجربة والعمل للمستقبل', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/319440/', 'summary': 'لبؤات الأطلس يؤكدن على أهمية الاستفادة من التجربة والعمل للمستقبل. أكدت لاعبات المنتخب الوطني المغربي لكرة القدم للسيدات، اليوم الأحد بالرباط، على أهمية الاستفادة من تجربة كأس إفريقيا للأمم (المغرب 2024)، والعمل على تعزيز مستقبل كرة القدم النسوية بالمملكة. وأعربت اللاعبات، في تصريحات صحافية عقب المباراة النهائية التي جمعت المنتخب الوطني بنظيره النيجيري والتي انتهت بهزيمة لبؤات الأطلس (3-2) على أرضية الملعب الأولمبي بالرباط، عن', 'size': 2}, {'id': '188', 'title': 'حسرة للاعبات المنتخب المغربي بعد ضياع اللقب القاري وتأكيد على أهمية الاستفادة من التجربة والعمل للمستقبل', 'source': 'rue20.com', 'link': 'https://rue20.com/924174.html', 'summary': 'حسرة للاعبات المنتخب المغربي بعد ضياع اللقب القاري وتأكيد على أهمية الاستفادة من التجربة والعمل للمستقبل. . الرباط أكدت لاعبات المنتخب الوطني المغربي لكرة القدم للسيدات، اليوم الأحد بالرباط، على أهمية الاستفادة من تجربة كأس إفريقيا للأمم (المغرب 2024)، والعمل على تعزيز مستقبل كرة القدم النسوية بالمملكة. وأعربت اللاعبات، في تصريحات صحافية عقب المباراة النهائية التي جمعت المنتخب الوطني بنظيره النيجيري والتي انتهت بهزيمة لبؤات الأطلس (3-2) على أرضية الملعب الخبر حسرة للاعبات المنتخب المغربي بعد ضياع اللقب القاري وتأكيد على أهمية الاستفادة من التجربة والعمل للمستقبل  .', 'size': 2}], 'main_title': 'لبؤات الأطلس يؤكدن على أهمية الاستفادة من التجربة والعمل للمستقبل'}, {'community_id': '4', 'articles': [{'id': '155', 'title': 'نيجيريا تقلب الطاولة على لبؤات الأطلس وتخطف لقب كأس إفريقيا', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/319421/', 'summary': 'نيجيريا تقلب الطاولة على لبؤات الأطلس وتخطف لقب كأس إفريقيا. توج المنتخب النيجيري للسيدات بلقب كأس أمم إفريقيا “المغرب 2024″، بعد مباراة مثيرة احتضنها الملعب الأولمبي بالعاصمة الرباط، وانتهت بفوزه على المنتخب المغربي بثلاثة أهداف مقابل هدفين، في نهائي مثّل ذروة المنافسة القارية وأبرز الوجه المشرق لكرة القدم النسوية الإفريقية. ودخل المنتخب المغربي اللقاء بثقة كبيرة، مدفوعًا بالحضور الجماهيري المكثف والتوهج الذي رافق مسيرته طيلة', 'size': 2}, {'id': '176', 'title': 'المنتخب النيجيري يجهض حلم لبؤات الأطلس” ويتوج بطلا لكأس إفريقيا للسيدات', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1088580.html', 'summary': 'المنتخب النيجيري يجهض حلم لبؤات الأطلس” ويتوج بطلا لكأس إفريقيا للسيدات. تُوج المنتخب النيجيري للسيدات بلقب كأس أمم إفريقيا “المغرب 2024”، بعد فوزه على المنتخب الوطني بثلاثة أهداف مقابل هدفين، في المباراة النهائية التي احتضنها الملعب الأولمبي بالعاصمة الرباط. واستهلت لبؤات الأطلس اللقاء بأسلوب هجومي منظم، تُوّج بهدف أول رائع عن طريق غزلان الشباك في الدقيقة الـ12، بعدما أطلقت تسديدة قوية من خارج منطقة الجزاء، استقرت ظهرت المقالة المنتخب النيجيري يجهض حلم لبؤات الأطلس” ويتوج بطلا لكأس إفريقيا للسيدات  .', 'size': 3}, {'id': '254', 'title': 'أخطاء تحكيمية كارثية تحرم المنتخب المغربي النسوي من لقب الـ”الكان”', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a3%d8%ae%d8%b7%d8%a7%d8%a1-%d8%aa%d8%ad%d9%83%d9%8a%d9%85%d9%8a%d8%a9-%d9%83%d8%a7%d8%b1%d8%ab%d9%8a%d8%a9-%d8%aa%d8%ad%d8%b1%d9%85-%d8%a7%d9%84%d9%85%d9%86%d8%aa%d8%ae%d8%a8-%d8%a7%d9%84%d9%85/', 'summary': 'أخطاء تحكيمية كارثية تحرم المنتخب المغربي النسوي من لقب الـ”الكان”. خسر المنتخب الوطني المغربي النسوي نهائي كأس أمم إفريقيا أمام نظيره النيجيري بنتيجة ثلاثة أهداف لهدفين، في مباراة مثيرة احتضنها الملعب الأولمبي بالعاصمة الرباط، وشهدت جدلاً تحكيمياً كبيراً طبع أطوار المواجهة. ورغم الأداء القوي الذي قدمته لبؤات الأطلس، خاصة خلال الشوط الأول الذي أنهينه متقدمات بهدفين لواحد، إلا أن قرارات تحكيمية مثيرة للجدل، …  أخطاء تحكيمية كارثية تحرم المنتخب المغربي النسوي من لقب الـ”الكان”     .', 'size': 2}], 'main_title': 'المنتخب النيجيري يجهض حلم لبؤات الأطلس” ويتوج بطلا لكأس إفريقيا للسيدات'}, {'community_id': '6', 'articles': [{'id': '189', 'title': 'فيلدا : لقب كأس إفريقيا للأمم لكرة القدم للسيدات ضاع بسبب تفاصيل صغيرة', 'source': 'rue20.com', 'link': 'https://rue20.com/924171.html', 'summary': 'فيلدا : لقب كأس إفريقيا للأمم لكرة القدم للسيدات ضاع بسبب تفاصيل صغيرة. . الرباط أكد مدرب المنتخب الوطني المغربي لكرة القدم للسيدات، خورخي فيلدا رودريغيز، اليوم الأحد بالرباط، أن لقب كأس إفريقيا للأمم ضاع بسبب تفاصيل صغيرة. وأوضح السيد فيلدا، خلال مؤتمر صحافي أعقب نهائي كأس إفريقيا للأمم للسيدات (المغرب – 2024)، الذي انتهى بهزيمة المنتخب الوطني أمام نظيره النيجيري بنتيجة 3-2، أن اللاعبات قدمن شوطا الخبر فيلدا : لقب كأس إفريقيا للأمم لكرة القدم للسيدات ضاع بسبب تفاصيل صغيرة  .', 'size': 2}, {'id': '246', 'title': 'خورخي فيلدا: اللقب ضاع بسبب تفاصيل صغيرة', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%ae%d9%88%d8%b1%d8%ae%d9%8a-%d9%81%d9%8a%d9%84%d8%af%d8%a7-%d8%a7%d9%84%d9%84%d9%82%d8%a8-%d8%b6%d8%a7%d8%b9-%d8%a8%d8%b3%d8%a8%d8%a8-%d8%aa%d9%81%d8%a7%d8%b5%d9%8a%d9%84-%d8%b5%d8%ba%d9%8a%d8%b1/', 'summary': 'خورخي فيلدا: اللقب ضاع بسبب تفاصيل صغيرة. أكد خورخي فيلدا رودريغيز، مدرب المنتخب الوطني المغربي لكرة القدم للسيدات، أن الخسارة بلقب كأس إفريقيا للأمم جاءت نتيجة “تفاصيل صغيرة”. وخلال مؤتمر صحفي عُقد بعد نهائي كأس إفريقيا للأمم للسيدات 2024، والذي انتهى بهزيمة المنتخب المغربي بنتيجة 3-2 أمام نيجيريا، أوضح فيلدا أن اللاعبات قدمن شوطًا أول مثاليًا. ومع ذلك، “انهارن بدنيًا …  خورخي فيلدا: اللقب ضاع بسبب تفاصيل صغيرة     .', 'size': 2}, {'id': '335', 'title': 'مدرب اللبؤات: اللقب ضاع بسبب تفاصيل صغيرة', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/319450/', 'summary': 'مدرب اللبؤات: اللقب ضاع بسبب تفاصيل صغيرة. مدرب المنتخب الوطني المغربي لكرة القدم للسيدات، خورخي فيلدا رودريغيز، اليوم الأحد بالرباط، أن لقب كأس إفريقيا للأمم ضاع بسبب تفاصيل صغيرة. وأوضح السيد فيلدا، خلال مؤتمر صحافي أعقب نهائي كأس إفريقيا للأمم للسيدات (المغرب – 2024)، الذي انتهى بهزيمة المنتخب الوطني أمام نظيره النيجيري بنتيجة 3-2، أن اللاعبات قدمن شوطا أولا مثاليا “غير أنهن انهرن', 'size': 3}], 'main_title': 'مدرب اللبؤات: اللقب ضاع بسبب تفاصيل صغيرة'}, {'community_id': '10', 'articles': [{'id': '273', 'title': 'المنتخب المغربي المحلي يطير إلى كينيا', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d8%a7%d9%84%d9%85%d9%86%d8%aa%d8%ae%d8%a8-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8%d9%8a-%d8%a7%d9%84%d9%85%d8%ad%d9%84%d9%8a-%d9%8a%d8%b7%d9%8a%d8%b1-%d8%a5%d9%84%d9%89-%d9%83%d9%8a%d9%86%d9%8a%d8%a7-1599994.html', 'summary': 'المنتخب المغربي المحلي يطير إلى كينيا. غادرت بعثة المنتخب الوطني المغربي للاعبين المحليين، اليوم الأحد مطار الرباط-سلا في اتجاه العاصمة الكينية نيروبي، للمشاركة في نهائيات كأس إفريقيا للاعبين المحليين (شان 2024)، التي ستُقام أطوارها بكل من كينيا وأوغندا وتنزانيا. ووضعت قرعة البطولة “أسود الأطلس” في المجموعة الأولى، إلى جانب منتخب البلد المضيف كينيا، إضافة إلى منتخبات زامبيا، أنغولا، والكونغو الديمقراطية، في  المنتخب المغربي المحلي يطير إلى كينيا     - هسبريس جريدة إلكترونية مغربية .', 'size': 2}, {'id': '350', 'title': 'للمشاركة في كأس أمم إفريقيا للمحليين.. المنتخب الوطني يشد الرحال صوب كينيا', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d9%84%d9%84%d9%85%d8%b4%d8%a7%d8%b1%d9%83%d8%a9-%d9%81%d9%8a-%d9%83%d8%a3%d8%b3-%d8%a3%d9%85%d9%85-%d8%a5%d9%81%d8%b1%d9%8a%d9%82%d9%8a%d8%a7-%d9%84%d9%84%d9%85%d8%ad%d9%84%d9%8a%d9%8a%d9%86-%d8%a7/', 'summary': 'للمشاركة في كأس أمم إفريقيا للمحليين.. المنتخب الوطني يشد الرحال صوب كينيا. غادرت بعثة المنتخب الوطني للاعبين المحليين، اليوم، مطار الرباط-سلا في اتجاه العاصمة الكينية نيروبي، من أجل المشاركة في بطولة إفريقيا للاعبين المحليين، التي ستجرى أطوارها في كل من كينيا وأوغندا وتنزانيا. وكانت قرعة البطولة قد أسفرت عن تواجد المنتخب الوطني المغربي في المجموعة الأولى إلى جانب منتخبات: كينيا (البلد المضيف)، زامبيا، أنغولا والكونغو الديمقراطية. وسيفتتح  للمشاركة في كأس أمم إفريقيا للمحليين.. المنتخب الوطني يشد الرحال صوب كينيا     .', 'size': 2}], 'main_title': 'المنتخب المغربي المحلي يطير إلى كينيا'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    