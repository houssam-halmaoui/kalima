<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 06/08/2025 - 12h28</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '3', 'articles': [{'id': '79', 'title': 'خطاب العرش وضبط إيقاع الحياة السياسية', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/politic/410533.html', 'summary': 'خطاب العرش وضبط إيقاع الحياة السياسية. رغم كل الجهود التي ما فتئ المغرب يبذلها منذ فجر الاستقلال في اتجاه الارتقاء بمنظومة العامة للانتخابات، مازالت العملية الانتخابية تثير الكثير من الجدل ليس', 'size': 2}, {'id': '133', 'title': 'وفاة رضيع بلسعة عقرب تفضح هشاشة المنظومة الصحية في المناطق النائية', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/320296/', 'summary': 'وفاة رضيع بلسعة عقرب تفضح هشاشة المنظومة الصحية في المناطق النائية. شهد المغرب خلال الأسابيع الأخيرة ارتفاعاً ملحوظاً في درجات الحرارة، ما أدى إلى تصاعد نشاط الزواحف السامة، وعلى رأسها العقارب والأفاعي، خاصة في المناطق القروية والجبلية التي تعاني هشاشة البنيات التحتية الصحية. وقد كشفت هذه الظروف عن واقع مأساوي تعيشه العديد من الأسر في القرى النائية، خصوصاً بعد حادث مأساوي تمثل في وفاة طفل رضيع', 'size': 3}, {'id': '164', 'title': 'ثلاثة بنوك تهيمن على أموال المغاربة: تقرير يكشف أرقاما مثيرة عن القطاع البنكي', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%ab%d9%84%d8%a7%d8%ab%d8%a9-%d8%a8%d9%86%d9%88%d9%83-%d8%aa%d9%87%d9%8a%d9%85%d9%86-%d8%b9%d9%84%d9%89-%d8%a3%d9%85%d9%88%d8%a7%d9%84-%d8%a7%d9%84%d9%85%d8%ba%d8%a7%d8%b1%d8%a8%d8%a9-%d8%aa%d9%82/', 'summary': 'ثلاثة بنوك تهيمن على أموال المغاربة: تقرير يكشف أرقاما مثيرة عن القطاع البنكي. كشف التقرير السنوي حول الاستقرار المالي بأن القطاع البنكي المغربي لا يزال تحت هيمنة ثلاث مجموعات بنكية كبرى مهمة، مملوكة للقطاع الخاص ومعظم رأسمالها مغربي. وأوضح التقرير الصادر عن بنك المغرب، وهيئة مراقبة التأمينات والاحتياط الاجتماعي، والهيئة المغربية لسوق الرساميل، أن هذه البنوك الثلاثة تستحوذ على 60,7 في المائة من إجمالي الأصول المجمعة للبنوك، و61,6  ثلاثة بنوك تهيمن على أموال المغاربة: تقرير يكشف أرقاما مثيرة عن القطاع البنكي     .', 'size': 2}], 'main_title': 'وفاة رضيع بلسعة عقرب تفضح هشاشة المنظومة الصحية في المناطق النائية'}, {'community_id': '0', 'articles': [{'id': '94', 'title': 'الإعلامي كريم حضري يتعرض لحادث خطير داخل منزله', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/society/410548.html', 'summary': 'الإعلامي كريم حضري يتعرض لحادث خطير داخل منزله. تعرض الإذاعي المغربي في "شدى إف إم"، كريم حضري، لحادث خطير داخل منزله، استدعى نقله على وجه السرعة إلى المستشفى. وقالت صفحة "شدى تيفي"، أن "الصحافي', 'size': 2}, {'id': '205', 'title': 'الصحافي كريم حضري يتعرض لحادث خطير داخل منزله وبنكيران يؤكد دعمه', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d8%a7%d9%84%d8%b5%d8%ad%d8%a7%d9%81%d9%8a-%d9%83%d8%b1%d9%8a%d9%85-%d8%ad%d8%b6%d8%b1%d9%8a-%d9%8a%d8%aa%d8%b9%d8%b1%d8%b6-%d9%84%d8%ad%d8%a7%d8%af%d8%ab-%d8%ae%d8%b7%d9%8a%d8%b1-%d8%af%d8%a7%d8%ae/', 'summary': 'الصحافي كريم حضري يتعرض لحادث خطير داخل منزله وبنكيران يؤكد دعمه. -متابعات تعرض الإذاعي المغربي في “شدى إف إم”، كريم حضري، لحادث خطير داخل منزله، استدعى نقله على وجه السرعة إلى المستشفى. وقالت صفحة “شدى تيفي”، أن “الصحافي كريم حضري...  الصحافي كريم حضري يتعرض لحادث خطير داخل منزله وبنكيران يؤكد دعمه     .', 'size': 2}], 'main_title': 'الإعلامي كريم حضري يتعرض لحادث خطير داخل منزله'}, {'community_id': '1', 'articles': [{'id': '123', 'title': 'بمشاركة 23 امرأة عسكرية …دورة تكوينية بمقر قيادة المنطقة الجنوبية بأكادير', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a8%d9%85%d8%b4%d8%a7%d8%b1%d9%83%d8%a9-23-%d8%a7%d9%85%d8%b1%d8%a3%d8%a9-%d8%b9%d8%b3%d9%83%d8%b1%d9%8a%d8%a9-%d8%af%d9%88%d8%b1%d8%a9-%d8%aa%d9%83%d9%88%d9%8a%d9%86%d9%8a%d8%a9-%d8%a8%d9%85/', 'summary': 'بمشاركة 23 امرأة عسكرية …دورة تكوينية بمقر قيادة المنطقة الجنوبية بأكادير. انطلقت، أمس الاثنين (04 غشت)، بمقر قيادة القوات المسلحة الملكية للمنطقة الجنوبية بأكادير، أشغال دورة تكوينية موجهة للنساء في عمليات الأمم المتحدة لحفظ السلام. وتعرف هذه الدورة، التي تمتد لثلاثة أسابيع، مشاركة 23 امرأة عسكرية من 14 جنسية، لاسيما من القارة الإفريقية، وكذا من فرنسا، وألمانيا، وسويسرا، وكندا. وتندرج الدورة في إطار شراكة ثلاثية بين', 'size': 2}, {'id': '213', 'title': 'نساء الأمم المتحدة لحفظ السلام.. دورة تكوينية بمقر قيادة المنطقة الجنوبية بأكادير لفائدة عسكريات 14 بلدا', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/225650/', 'summary': 'نساء الأمم المتحدة لحفظ السلام.. دورة تكوينية بمقر قيادة المنطقة الجنوبية بأكادير لفائدة عسكريات 14 بلدا. أكادير – انطلقت، أمس الاثنين، بمقر قيادة القوات المسلحة الملكية للمنطقة الجنوبية بأكادير، أشغال دورة تكوينية موجهة للنساء في عمليات الأمم المتحدة لحفظ السلام. وتعرف هذه الدورة، التي تمتد لثلاثة أسابيع، مشاركة 23 امرأة عسكرية من 14 جنسية، لاسيما من القارة الإفريقية، وكذا من فرنسا، وألمانيا، وسويسرا، وكندا. وتندرج الدورة في إطار شراكة ثلاثية بين', 'size': 2}], 'main_title': 'بمشاركة 23 امرأة عسكرية …دورة تكوينية بمقر قيادة المنطقة الجنوبية بأكادير'}, {'community_id': '7', 'articles': [{'id': '139', 'title': 'عملية مرحبا 2025.. أرقام قياسية وتدابير جديدة لمرحلة العودة', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1090908.html', 'summary': 'عملية مرحبا 2025.. أرقام قياسية وتدابير جديدة لمرحلة العودة. كشفت مؤسسة محمد الخامس للتضامن عن نجاح لافت لعملية “مرحبا 2025″، حيث سجلت أرقاماً قياسية في أعداد أفراد الجالية المغربية الوافدين على أرض الوطن. وأكد عمر موسى عبد الله، المشرف على العملية بالمؤسسة، الذي حل أمس الثلاثاء ضيفا على برنامج “عبور” الذي يبث على أثير “إذاعة طنجة المتوسط”، أن هذه الأرقام تفند الإشاعات الرائجة حول ظهرت المقالة عملية مرحبا 2025.. أرقام قياسية وتدابير جديدة لمرحلة العودة  .', 'size': 2}, {'id': '161', 'title': '"مرحبا 2025" تسجل ارتفاعا بـ10% في توافد مغاربة العالم مقارنة بـ2024', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d9%85%d8%b1%d8%ad%d8%a8%d8%a7-2025-%d8%aa%d8%b3%d8%ac%d9%84-%d8%a7%d8%b1%d8%aa%d9%81%d8%a7%d8%b9%d8%a7-%d8%a8%d9%8010-%d9%81%d9%8a-%d8%aa%d9%88%d8%a7%d9%81%d8%af-%d9%85%d8%ba%d8%a7%d8%b1%d8%a8/', 'summary': '"مرحبا 2025" تسجل ارتفاعا بـ10% في توافد مغاربة العالم مقارنة بـ2024. أفاد المسؤول عن المشاريع والمشرف عن عملية "مرحبا" بمؤسسة محمد الخامس للتضامن، عمر موسى عبد الله، اليوم الثلاثاء، بأنه تم إلى غاية 4 غشت الجاري، تسجيل دخول 2.789.197 فردا من الجالية المغربية بالخارج، وذلك بارتفاع بلغ 10,37 في المائة مقارنة مع سنة 2024. وأكد عمر موسى عبد الله، الذي حل ضيفا على برنامج "عبور" الذي  "مرحبا 2025" تسجل ارتفاعا بـ10% في توافد مغاربة العالم مقارنة بـ2024     .', 'size': 3}, {'id': '178', 'title': 'عملية مرحبا.. دخول حوالي 2.79 مليون من أفراد الجالية المغربية إلى غاية 4 غشت', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/471743.html', 'summary': 'عملية مرحبا.. دخول حوالي 2.79 مليون من أفراد الجالية المغربية إلى غاية 4 غشت. و.م.ع أفاد المسؤول عن المشاريع والمشرف عن عملية “مرحبا” بمؤسسة محمد الخامس للتضامن، عمر موسى عبد الله، اليوم الثلاثاء، بأنه تم إلى غاية 4 غشت الجاري، تسجيل دخول 2.789.197 فردا من الجالية المغربية بالخارج، وذلك بارتفاع بلغ 10,37 في المائة مقارنة مع سنة 2024. وأكد عمر موسى عبد الله، الذي حل ضيفا على برنامج “عبور” …', 'size': 2}], 'main_title': '"مرحبا 2025" تسجل ارتفاعا بـ10% في توافد مغاربة العالم مقارنة بـ2024'}, {'community_id': '2', 'articles': [{'id': '142', 'title': 'بزيادة فاقت %8.. الأصول المالية للأسر المغرب تتجاوز 1100 مليار درهم خلال 2024', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1090735.html', 'summary': 'بزيادة فاقت %8.. الأصول المالية للأسر المغرب تتجاوز 1100 مليار درهم خلال 2024. وفق ما جاء في التقرير السنوي الثاني عشر حول الاستقرار المالي ظهرت المقالة بزيادة فاقت %8.. الأصول المالية للأسر المغرب تتجاوز 1100 مليار درهم خلال 2024  .', 'size': 2}, {'id': '231', 'title': 'تقرير يحذر: عجز أنظمة التقاعد في المغرب يتجاوز 60 مليار درهم ويهدد بأزمة هيكلية', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%aa%d9%82%d8%b1%d9%8a%d8%b1-%d9%8a%d8%ad%d8%b0%d8%b1-%d8%b9%d8%ac%d8%b2-%d8%a3%d9%86%d8%b8%d9%85%d8%a9-%d8%a7%d9%84%d8%aa%d9%82%d8%a7%d8%b9%d8%af-%d9%81%d9%8a-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8/', 'summary': 'تقرير يحذر: عجز أنظمة التقاعد في المغرب يتجاوز 60 مليار درهم ويهدد بأزمة هيكلية. وسط تصاعد النقاش العمومي حول مستقبل الحماية الاجتماعية، كشف التقرير السنوي الثاني عشر حول الاستقرار المالي لسنة 2024 عن وضع مقلق لأنظمة التقاعد في المغرب، مشيرا إلى عجز هيكلي يهدد استدامتها، رغم بعض التحسن الظرفي في مؤشرات مالية محدودة. وأوضح التقرير، الصادر عن بنك المغرب وهيئة مراقبة التأمينات والاحتياط الاجتماعي والهيئة المغربية لسوق …  تقرير يحذر: عجز أنظمة التقاعد في المغرب يتجاوز 60 مليار درهم ويهدد بأزمة هيكلية     .', 'size': 2}], 'main_title': 'بزيادة فاقت %8.. الأصول المالية للأسر المغرب تتجاوز 1100 مليار درهم خلال 2024'}, {'community_id': '6', 'articles': [{'id': '150', 'title': 'مراكش.. العثور على عظام بشرية مدفونة داخل فندق مصنف بالنخيل', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1090858.html', 'summary': 'مراكش.. العثور على عظام بشرية مدفونة داخل فندق مصنف بالنخيل. عثر، عصر اليوم الثلاثاء 5 غشت الجاري، على رفات بشرية مدفونة داخل فندق مصنّف بمنطقة النخيل الشمالي بمراكش، وذلك خلال أشغال لصيانة قنوات التطهير السائل. وأفادت مصادر مطلعة أن عمال الصيانة اكتشفوا العظام أثناء قيامهم بالحفر، بعدما ظهرت أجزاء مدفونة وسط التربة، ما دفعهم إلى توقيف الأشغال وإبلاغ إدارة الفندق، التي بادرت بدورها إلى إشعار ظهرت المقالة مراكش.. العثور على عظام بشرية مدفونة داخل فندق مصنف بالنخيل  .', 'size': 2}, {'id': '222', 'title': 'وزارة الداخلية توقف قائدا بمراكش بشبهة الفساد وتحوله للتحقيق', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d9%88%d8%b2%d8%a7%d8%b1%d8%a9-%d8%a7%d9%84%d8%af%d8%a7%d8%ae%d9%84%d9%8a%d8%a9-%d8%aa%d9%88%d9%82%d9%81-%d9%82%d8%a7%d8%a6%d8%af%d8%a7-%d8%a8%d9%85%d8%b1%d8%a7%d9%83%d8%b4-%d8%a8%d8%b4%d8%a8%d9%87/', 'summary': 'وزارة الداخلية توقف قائدا بمراكش بشبهة الفساد وتحوله للتحقيق. المساء اليوم – مراكش: أوقفت وزارة الداخلية قائدا بعمالة مراكش، وذلك على خلفية فتح بحث قضائي، تحت إشراف النيابة العامة المختصة، يتعلق بالاشتباه في تورطه بإحدى جرائم الفساد. وقال بيان لوزارة الداخلية إن قرار التوقيف', 'size': 2}], 'main_title': 'مراكش.. العثور على عظام بشرية مدفونة داخل فندق مصنف بالنخيل'}, {'community_id': '9', 'articles': [{'id': '165', 'title': 'تقرير بنك المغرب: اختلالات هيكلية تهدد مستقبل أنظمة التقاعد بالمغرب', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%aa%d9%82%d8%b1%d9%8a%d8%b1-%d8%a8%d9%86%d9%83-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d8%a7%d8%ae%d8%aa%d9%84%d8%a7%d9%84%d8%a7%d8%aa-%d9%87%d9%8a%d9%83%d9%84%d9%8a%d8%a9-%d8%aa%d9%87%d8%af%d8%af/', 'summary': 'تقرير بنك المغرب: اختلالات هيكلية تهدد مستقبل أنظمة التقاعد بالمغرب. كشف التقرير السنوي حول الاستقرار المالي، أن أنظمة التقاعد الأساسية واصلت تسجيل اختلالات هيكلية سنة 2024. وأبرز التقرير الصادر عن بنك المغرب، وهيئة مراقبة التأمينات والاحتياط الاجتماعي، والهيئة المغربية لسوق الرساميل، أنه على الرغم من التحسن المؤقت الذي عرفته بعض المؤشرات المالية، إثر تطبيق الشطر الأول من الزيادات في الأجور الناتجة عن الحوار الاجتماعي بتاريخ  تقرير بنك المغرب: اختلالات هيكلية تهدد مستقبل أنظمة التقاعد بالمغرب     .', 'size': 2}, {'id': '183', 'title': 'بنك المغرب يعلن عن تسجيل اختلالات هيكلية بأنظمة التقاعد الأساسية', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/471730.html', 'summary': 'بنك المغرب يعلن عن تسجيل اختلالات هيكلية بأنظمة التقاعد الأساسية. متابعة أنظمة التقاعد الأساسية بالمغرب؛ واصلت تسجيل اختلالات هيكلية سنة 2024. هذا ما خلُص إليه التقرير السنوي حول “الاستقرار المالي” الصادر عن بنك المغرب، وهيئة مراقبة التأمينات والاحتياط الاجتماعي، والهيئة المغربية لسوق الرساميل. وبحسب التقرير، فإنه على الرغم من التحسن المؤقت الذي عرفته بعض المؤشرات المالية، إثر تطبيق الشطر الأول من الزيادات في الأجور الناتجة …', 'size': 2}], 'main_title': 'تقرير بنك المغرب: اختلالات هيكلية تهدد مستقبل أنظمة التقاعد بالمغرب'}, {'community_id': '4', 'articles': [{'id': '307', 'title': 'بتنسيق مع “الديستي”.. أمن القنيطرة يحجز شحنة مهمة من الأقراص المهلوسة', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a8%d8%aa%d9%86%d8%b3%d9%8a%d9%82-%d9%85%d8%b9-%d8%a7%d9%84%d8%af%d9%8a%d8%b3%d8%aa%d9%8a-%d8%a3%d9%85%d9%86-%d8%a7%d9%84%d9%82%d9%86%d9%8a%d8%b7%d8%b1%d8%a9-%d9%8a%d8%ad%d8%ac%d8%b2-%d8%b4/', 'summary': 'بتنسيق مع “الديستي”.. أمن القنيطرة يحجز شحنة مهمة من الأقراص المهلوسة. تمكنت عناصر الشرطة بولاية أمن القنيطرة بناءً على معلومات دقيقة وفرتها مصالح المديرية العامة لمراقبة التراب الوطني، في الساعات الأولى من صباح اليوم الأربعاء (6 غشت)، من توقيف شخص يشتبه في تورطه في قضية تتعلق بحيازة وترويج المخدرات والمؤثرات العقلية. وحسب مصدر أمني، فقد “جرى توقيف المشتبه فيه بمدخل مدينة القنيطرة، مباشرة بعد وصوله على', 'size': 3}, {'id': '343', 'title': 'بناء على معلومات وفرتها "الديستي".. أمن القنيطرة يحجز 1280 قرصا مخدرا', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a8%d9%86%d8%a7%d8%a1-%d8%b9%d9%84%d9%89-%d9%85%d8%b9%d9%84%d9%88%d9%85%d8%a7%d8%aa-%d9%88%d9%81%d8%b1%d8%aa%d9%87%d8%a7-%d8%a7%d9%84%d8%af%d9%8a%d8%b3%d8%aa%d9%8a-%d8%a3%d9%85%d9%86-%d8%a7/', 'summary': 'بناء على معلومات وفرتها "الديستي".. أمن القنيطرة يحجز 1280 قرصا مخدرا. تمكنت عناصر الشرطة بولاية أمن القنيطرة، بناءً على معلومات دقيقة وفرتها مصالح المديرية العامة لمراقبة التراب الوطني، في الساعات الأولى من صباح اليوم الأربعاء 6 غشت الجاري، من توقيف شخص يشتبه في تورطه في قضية تتعلق بحيازة وترويج المخدرات والمؤثرات العقلية. وأوضح مصدر أمني أنه جرى توقيف المشتبه فيه بمدخل مدينة القنيطرة، مباشرة بعد وصوله  بناء على معلومات وفرتها "الديستي".. أمن القنيطرة يحجز 1280 قرصا مخدرا     .', 'size': 2}, {'id': '385', 'title': 'معلومات الديستي تطيح بشخص قادم من الشمال بحوزته 1280 قرص مهلوس', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/225674/', 'summary': 'معلومات الديستي تطيح بشخص قادم من الشمال بحوزته 1280 قرص مهلوس. تمكنت عناصر الشرطة بولاية أمن القنيطرة، بناء على معلومات دقيقة وفرتها مصالح المديرية العامة لمراقبة التراب الوطني، في الساعات الأولى من صباح اليوم الأربعاء، من توقيف شخص يشتبه في تورطه في قضية تتعلق بحيازة وترويج المخدرات والمؤثرات العقلية. وقد جرى توقيف المشتبه فيه بمدخل مدينة القنيطرة، مباشرة بعد وصوله على متن شاحنة قادما من احدى', 'size': 2}], 'main_title': 'بتنسيق مع “الديستي”.. أمن القنيطرة يحجز شحنة مهمة من الأقراص المهلوسة'}, {'community_id': '5', 'articles': [{'id': '309', 'title': 'الرباط.. توقيف مواطنين من إحدى دول إفريقيا جنوب الصحراء على خلفية التزوير', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a7%d9%84%d8%b1%d8%a8%d8%a7%d8%b7-%d8%aa%d9%88%d9%82%d9%8a%d9%81-%d9%85%d9%88%d8%a7%d8%b7%d9%86%d9%8a%d9%86-%d9%85%d9%86-%d8%a5%d8%ad%d8%af%d9%89-%d8%af%d9%88%d9%84-%d8%a5%d9%81%d8%b1%d9%8a%d9%82/', 'summary': 'الرباط.. توقيف مواطنين من إحدى دول إفريقيا جنوب الصحراء على خلفية التزوير. تمكنت عناصر الشرطة بمنطقة أمن السويسي التقدم بمدينة الرباط، في الساعات الأولى من صباح اليوم الأربعاء ( 6 غشت)، من توقيف مواطنين ينحدران من إحدى دول إفريقيا جنوب الصحراء، يبلغان من العمر 42 و46 سنة، وذلك للاشتباه في تورطهما في قضية تتعلق بالتزوير واستعماله. وحسب مصدر أمني، فقد جرى توقيف المعنيين بالأمر للاشتباه في تورطهما', 'size': 2}, {'id': '345', 'title': 'بشبهة التزوير واستعماله.. أمن السويسي يوقف مواطنين يتحدران من إفريقيا جنوب الصحراء', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a8%d8%b4%d8%a8%d9%87%d8%a9-%d8%a7%d9%84%d8%aa%d8%b2%d9%88%d9%8a%d8%b1-%d9%88%d8%a7%d8%b3%d8%aa%d8%b9%d9%85%d8%a7%d9%84%d9%87-%d8%a3%d9%85%d9%86-%d8%a7%d9%84%d8%b3%d9%88%d9%8a%d8%b3%d9%8a-%d9%8a/', 'summary': 'بشبهة التزوير واستعماله.. أمن السويسي يوقف مواطنين يتحدران من إفريقيا جنوب الصحراء. تمكنت عناصر الشرطة بمنطقة أمن السويسي التقدم بمدينة الرباط، في الساعات الأولى من صباح اليوم الأربعاء 6 غشت الجاري، من توقيف مواطنين يتحدران من إحدى دول إفريقيا جنوب الصحراء، يبلغان من العمر 42 و46 سنة، للاشتباه في تورطهما في قضية تتعلق بالتزوير واستعماله. وأوضح مصدر أمني أنه جرى توقيف المعنيين بالأمر للاشتباه في تورطهما في  بشبهة التزوير واستعماله.. أمن السويسي يوقف مواطنين يتحدران من إفريقيا جنوب الصحراء     .', 'size': 2}], 'main_title': 'الرباط.. توقيف مواطنين من إحدى دول إفريقيا جنوب الصحراء على خلفية التزوير'}, {'community_id': '8', 'articles': [{'id': '349', 'title': 'طقس حار مع زخات رعدية متوقعة اليوم الأربعاء', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%b7%d9%82%d8%b3-%d8%ad%d8%a7%d8%b1-%d9%85%d8%b9-%d8%b2%d8%ae%d8%a7%d8%aa-%d8%b1%d8%b9%d8%af%d9%8a%d8%a9-%d9%85%d8%aa%d9%88%d9%82%d8%b9%d8%a9-%d8%a7%d9%84%d9%8a%d9%88%d9%85-%d8%a7%d9%84%d8%a3-4/', 'summary': 'طقس حار مع زخات رعدية متوقعة اليوم الأربعاء. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الأربعاء، أن يظل الطقس حارا بكل من السهول الداخلية وجنوب الريف والجنوب الشرقي وداخل الأقاليم الجنوبية. ويرتقب نزول قطرات مطرية أو زخات رعدية مصحوبة بهبات رياح، مع احتمال تساقط حبات البرد، وذلك فوق هضاب الفوسفاط وولماس وسهول تادلة ومحليا فوق مرتفعات الأطلس الكبير. وسيلاحظ أيضا نزول قطرات مطرية  طقس حار مع زخات رعدية متوقعة اليوم الأربعاء     .', 'size': 3}, {'id': '350', 'title': 'طقس اليوم: استمرار الأجواء الحارة بعدة مناطق', 'source': 'soltana.ma', 'link': 'https://soltana.ma/1357590.html', 'summary': 'طقس اليوم: استمرار الأجواء الحارة بعدة مناطق. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الأربعاء، أن يظل الطقس حارا بكل من السهول الداخلية وجنوب الريف والجنوب الشرقي وداخل الأقاليم الجنوبية. ويرتقب نزول قطرات مطرية أو زخات رعدية مصحوبة بهبات رياح، مع احتمال تساقط حبات البرد، وذلك فوق هضاب الفوسفاط وولماس وسهول تادلة ومحليا فوق مرتفعات الأطلس الكبير. وسيلاحظ أيضا نزول قطرات مطرية', 'size': 3}, {'id': '393', 'title': 'توقعات أحوال الطقس اليوم الأربعاء', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%aa%d9%88%d9%82%d8%b9%d8%a7%d8%aa-%d8%a3%d8%ad%d9%88%d8%a7%d9%84-%d8%a7%d9%84%d8%b7%d9%82%d8%b3-%d8%a7%d9%84%d9%8a%d9%88%d9%85-%d8%a7%d9%84%d8%a3%d8%b1%d8%a8%d8%b9%d8%a7%d8%a1-31/', 'summary': 'توقعات أحوال الطقس اليوم الأربعاء. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليومه الأربعاء، أن يظل الطقس حارا بكل من السهول الداخلية وجنوب الريف والجنوب الشرقي وداخل الأقاليم الجنوبية. ويرتقب نزول قطرات مطرية أو زخات رعدية مصحوبة بهبات رياح، مع احتمال تساقط حبات البرد، وذلك فوق هضاب الفوسفاط وولماس وسهول تادلة ومحليا فوق مرتفعات الأطلس الكبير. وسيلاحظ أيضا نزول …  توقعات أحوال الطقس اليوم الأربعاء     .', 'size': 3}], 'main_title': 'طقس حار مع زخات رعدية متوقعة اليوم الأربعاء'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    