<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 17/10/2025 - 18h25</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '5', 'articles': [{'id': '18', 'title': 'البيضاء.. تعويض زبون حمّام شعبي بـ25 مليون سنتيم بعد إصابته بباب', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-666859.html', 'summary': 'البيضاء.. تعويض زبون حمّام شعبي بـ25 مليون سنتيم بعد إصابته بباب. هبة بريس – البيضاء قضت محكمة النقض مؤخرًا برفض طعن تقدمت به شركة تأمين وصاحب حمّام تقليدي بالدار البيضاء، لتؤيد بذلك حكمًا سابقًا يقضي بتعويض زبون بمبلغ 25 مليون سنتيم، إثر إصابته داخل الحمّام. وتعود تفاصيل القضية إلى حادث تعرض له أحد المواطنين أثناء استحمامه داخل الحمّام، حيث تسبب باب الحمّام في إصابة على مستوى', 'size': 3}, {'id': '115', 'title': 'في سابقة قضائية.. مواطن بالدار البيضاء يحصل على تعويض بالملايين بعد إصابته داخل حمام شعبي', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/society/414648.html', 'summary': 'في سابقة قضائية.. مواطن بالدار البيضاء يحصل على تعويض بالملايين بعد إصابته داخل حمام شعبي. في حكم قضائي أثار اهتمام الرأي العام، فرضت محكمة النقض بالدار البيضاء على صاحب حمّام عمومي أداء تعويض قدره 25 مليون سنتيم لزبون تعرّض لإصابة', 'size': 3}, {'id': '236', 'title': 'محكمة النقض تُلزم صاحب حمّام بالدار البيضاء بتعويض زبون بـ25 مليون سنتيم!', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/228587/', 'summary': 'محكمة النقض تُلزم صاحب حمّام بالدار البيضاء بتعويض زبون بـ25 مليون سنتيم!. في سابقة لافتة، أصدرت محكمة النقض حكماً نهائياً يقضي بإلزام صاحب حمّام عمومي بالدار البيضاء بدفع تعويض مالي قدره 25 مليون سنتيم لرجل تعرّض لإصابة داخل الحمّام بعد أن صدمه الباب الداخلي، ما تسبب له في جرح خطير على مستوى رجله اليمنى. تفاصيل القضية تعود إلى دعوى مدنية رفعها المتضرر، طالب فيها بتعويض عن', 'size': 3}], 'main_title': 'البيضاء.. تعويض زبون حمّام شعبي بـ25 مليون سنتيم بعد إصابته بباب'}, {'community_id': '12', 'articles': [{'id': '25', 'title': 'طقس الجمعة.. قطرات مطرية متوقعة بعدد من مناطق المملكة', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-666813.html', 'summary': 'طقس الجمعة.. قطرات مطرية متوقعة بعدد من مناطق المملكة. هبة بريس تتوقع المديرية العامة للأرصاد الجوية، اليوم الجمعة، أن يظل الطقس حارا نسبيا بأقصى الأقاليم الصحراوية للمملكة. وسيلاحظ، خلال الليل والصباح، تشكل سحب منخفضة جوار سواحل المحيط الأطلسي والواجهة المتوسطية، حيث ستكون مرفوقة بكتل ضبابية أو قطرات مطرية جد خفيفة محليا. كما يرتقب تشكل سحب غير مستقرة من المحتمل أن تعطي قطرات متفرقة مع', 'size': 3}, {'id': '164', 'title': 'طقس الجمعة.. سحب منخفضة مرفوقة بكتل ضبابية أو قطرات مطرية خفيفة', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-594273.html', 'summary': 'طقس الجمعة.. سحب منخفضة مرفوقة بكتل ضبابية أو قطرات مطرية خفيفة. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الجمعة، أن يظل الطقس حارا نسبيا بأقصى الأقاليم الصحراوية للمملكة. وسيلاحظ، خلال الليل والصباح، تشكل سحب منخفضة جوار سواحل المحيط الأطلسي والواجهة المتوسطية، حيث ستكون مرفوقة بكتل ضبابية أو قطرات مطرية جد خفيفة محليا. كما يرتقب تشكل سحب غير مستقرة من المحتمل أن تعطي قطرات', 'size': 3}, {'id': '193', 'title': 'طقس غير مستقر متوقع اليوم الجمعة', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%b7%d9%82%d8%b3-%d8%ba%d9%8a%d8%b1-%d9%85%d8%b3%d8%aa%d9%82%d8%b1-%d9%85%d8%aa%d9%88%d9%82%d8%b9-%d8%a7%d9%84%d9%8a%d9%88%d9%85-%d8%a7%d9%84%d8%ac%d9%85%d8%b9%d8%a9/', 'summary': 'طقس غير مستقر متوقع اليوم الجمعة. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الجمعة، أن يظل الطقس حارا نسبيا بأقصى الأقاليم الصحراوية للمملكة. وسيلاحظ، خلال الليل والصباح، تشكل سحب منخفضة جوار سواحل المحيط الأطلسي والواجهة المتوسطية، حيث ستكون مرفوقة بكتل ضبابية أو قطرات مطرية جد خفيفة محليا. كما يرتقب تشكل سحب غير مستقرة من المحتمل أن تعطي قطرات متفرقة مع احتمال  طقس غير مستقر متوقع اليوم الجمعة     .', 'size': 3}], 'main_title': 'طقس الجمعة.. قطرات مطرية متوقعة بعدد من مناطق المملكة'}, {'community_id': '2', 'articles': [{'id': '29', 'title': 'صندوق الضمان الاجتماعي يشرع في تطبيق القرار الجديد حول وعاء الاشتراكات', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-666800.html', 'summary': 'صندوق الضمان الاجتماعي يشرع في تطبيق القرار الجديد حول وعاء الاشتراكات. هبة بريس بدأ الصندوق الوطني للضمان الاجتماعي، ابتداءً من فاتح أكتوبر 2025، في تنفيذ مقتضيات القرار رقم 1314.25 المتعلق بوعاء الاشتراكات الاجتماعية. وأوضح الصندوق، في بلاغ رسمي، أن هذا القرار يهدف إلى توضيح مكونات الأجر والتعويضات التي لا تُدرج ضمن وعاء الاشتراك، مع تحديد السقوف والشروط المرتبطة بالإعفاءات، وذلك من أجل رفع أي لبس مرتبط', 'size': 2}, {'id': '165', 'title': 'يهم الأجراء.. قرار جديد من الصندوق الوطني للضمان الاجتماعي', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-594173.html', 'summary': 'يهم الأجراء.. قرار جديد من الصندوق الوطني للضمان الاجتماعي. أعلن الصندوق الوطني للضمان الاجتماعي، يوم الخميس، عن الشروع في تطبيق القرار رقم 1314.25 المتعلق بوعاء الاشتراكات الاجتماعية، انطلاقا من فاتح أكتوبر 2025. ويهدف هذا القرار، يشرح صندوق الضمان الاجتماعي في بلاغ توصلت به “الأيام 24″، إلى توضيح عناصر الأجر والتعويضات التي لا تدرج ضمن وعاء الاشتراك، مع تحديد سقوف وشروط إعفائها،', 'size': 2}], 'main_title': 'صندوق الضمان الاجتماعي يشرع في تطبيق القرار الجديد حول وعاء الاشتراكات'}, {'community_id': '3', 'articles': [{'id': '30', 'title': 'الملك محمد السادس يعزي رئيس كينيا في وفاة رايلا أودينغا', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-666798.html', 'summary': 'الملك محمد السادس يعزي رئيس كينيا في وفاة رايلا أودينغا. هبة بريس بعث صاحب الجلالة الملك محمد السادس برقية تعزية ومواساة إلى رئيس جمهورية كينيا، وليام روتو، على إثر وفاة الوزير الأول السابق رايلا أودينغا. وأكد جلالة الملك، في هذه البرقية، أنه تلقى ببالغ التأثر نبأ وفاة الوزير الأول السابق رايلا أودينغا. ومما جاء في برقية جلالة الملك “على إثر هذا الرزء الأليم، أتقدم إلى', 'size': 2}, {'id': '254', 'title': 'الملك محمد السادس يعزي الرئيس الكيني على إثر وفاة الوزير الأول السابق رايلا أودينغا', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%85%d8%ad%d9%85%d8%af-%d8%a7%d9%84%d8%b3%d8%a7%d8%af%d8%b3-%d9%8a%d8%b9%d8%b2%d9%8a-%d8%a7%d9%84%d8%b1%d8%a6%d9%8a%d8%b3-%d8%a7%d9%84%d9%83%d9%8a%d9%86%d9%8a-%d8%b9/', 'summary': 'الملك محمد السادس يعزي الرئيس الكيني على إثر وفاة الوزير الأول السابق رايلا أودينغا. بعث الملك محمد السادس برقية تعزية ومواساة إلى رئيس جمهورية كينيا، وليام روتو، على إثر وفاة الوزير الأول السابق رايلا أودينغا. وأكد الملك محمد السادس، في هذه البرقية، أنه تلقى ببالغ التأثر نبأ وفاة الوزير الأول السابق رايلا أودينغا. ومما جاء في برقية الملك محمد السادس “على إثر هذا الرزء الأليم، أتقدم إلى …  الملك محمد السادس يعزي الرئيس الكيني على إثر وفاة الوزير الأول السابق رايلا أودينغا     .', 'size': 2}], 'main_title': 'الملك محمد السادس يعزي رئيس كينيا في وفاة رايلا أودينغا'}, {'community_id': '4', 'articles': [{'id': '102', 'title': 'بوريطة: المغرب وروسيا متفقان على أنه لا يمكن تأويل القانون الدولي بشكل يعرقل تسوية قضية الصحراء المغربية', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/politic/414634.html', 'summary': 'بوريطة: المغرب وروسيا متفقان على أنه لا يمكن تأويل القانون الدولي بشكل يعرقل تسوية قضية الصحراء المغربية. أكد وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج ناصر بوريطة، اليوم الخميس بموسكو، أن المغرب وروسيا متفقان على أنه لا يمكن تأويل القانون والمبادئ', 'size': 2}, {'id': '238', 'title': 'بوريطة: المغرب وروسيا متفقان على أن القانون الدولي لا يمكن تأويله بشكل يعرقل تسوية قضية الصحراء المغربية', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/228579/', 'summary': 'بوريطة: المغرب وروسيا متفقان على أن القانون الدولي لا يمكن تأويله بشكل يعرقل تسوية قضية الصحراء المغربية. موسكو – أكد وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج ناصر بوريطة، اليوم الخميس بموسكو، أن المغرب وروسيا متفقان على أنه لا يمكن تأويل القانون والمبادئ الدولية بشكل يعرقل التقدم نحو تسوية قضية الصحراء المغربية. وقال السيد بوريطة، في ندوة صحفية أعقبت مباحثاته مع نظيره الروسي سيرغي لافروف، أن هذا اللقاء شكل فرصة للتطرق', 'size': 2}], 'main_title': 'بوريطة: المغرب وروسيا متفقان على أنه لا يمكن تأويل القانون الدولي بشكل يعرقل تسوية قضية الصحراء المغربية'}, {'community_id': '10', 'articles': [{'id': '157', 'title': 'مقاييس الأمطار المسجلة بالمغرب خلال الـ24 ساعة الماضية', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-594301.html', 'summary': 'مقاييس الأمطار المسجلة بالمغرب خلال الـ24 ساعة الماضية. في ما يلي مقاييس التساقطات المطرية المسجلة بالمملكة خلال الـ24 ساعة الماضية، حسب المديرية العامة للأرصاد الجوية: – بويبلان (إقليم صفرو) : 3 ملم – بوعرفة : 2 ملم – وجدة، ميدلت، جرادة، ميسور (إقليم بولمان) : 1 ملم – فكيك، كرسيف، تاوريرت : أقل من ملمتر.', 'size': 2}, {'id': '319', 'title': 'صفرو يسجل أعلى مقاييس الأمطار خلال آخر 24 ساعة', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-666916.html', 'summary': 'صفرو يسجل أعلى مقاييس الأمطار خلال آخر 24 ساعة. هبة بريس في ما يلي مقاييس التساقطات المطرية المسجلة بالمملكة خلال الـ24 ساعة الماضية، حسب المديرية العامة للأرصاد الجوية : – بويبلان (إقليم صفرو) : 3 ملم – بوعرفة : 2 ملم – وجدة، ميدلت، جرادة، ميسور (إقليم بولمان) : 1 ملم – فكيك، كرسيف، تاوريرت : أقل من ملمتر.', 'size': 2}], 'main_title': 'مقاييس الأمطار المسجلة بالمغرب خلال الـ24 ساعة الماضية'}, {'community_id': '7', 'articles': [{'id': '158', 'title': 'الدوحة.. المصباحي وفنو ضمن المتوجين بجائزة كتارا للرواية العربية', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-594292.html', 'summary': 'الدوحة.. المصباحي وفنو ضمن المتوجين بجائزة كتارا للرواية العربية. أعلنت المؤسسة العامة للحي الثقافي “كتارا”، مساء الخميس، أسماء الفائزين بجائزة كتارا للرواية العربية في دورتها ال 11، ومن ضمنهم الناقد المغربي عبد الرزاق المصباحي والروائية الشابة نعيمة فنو. وفاز الناقد عبد الرزاق المصباحي في فئة الدراسات التي تعنى بالبحث والنقد الروائي عن دراسته “الرد بالرواية: دراسة في استراتيجيات السرد الثقافي”، فيما فازت', 'size': 2}, {'id': '169', 'title': 'نعيمة فنو وعبد الرزاق المصباحي يرفعان راية المغرب في كتارا للرواية العربية', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1108854.html', 'summary': 'نعيمة فنو وعبد الرزاق المصباحي يرفعان راية المغرب في كتارا للرواية العربية. أعلنت المؤسسة العامة للحي الثقافي “كتارا”، مساء أمس الخميس، أسماء الفائزين بجائزة كتارا للرواية العربية في دورتها ال 11، ومن ضمنهم الناقد المغربي عبد الرزاق المصباحي والروائية الشابة نعيمة فنو. وفاز الناقد عبد الرزاق المصباحي في فئة الدراسات التي تعنى بالبحث والنقد الروائي عن دراسته “الرد بالرواية: دراسة في استراتيجيات السرد الثقافي”، فيما فازت نعيمة ظهرت المقالة نعيمة فنو وعبد الرزاق المصباحي يرفعان راية المغرب في كتارا للرواية العربية  .', 'size': 2}], 'main_title': 'الدوحة.. المصباحي وفنو ضمن المتوجين بجائزة كتارا للرواية العربية'}, {'community_id': '8', 'articles': [{'id': '162', 'title': 'الموت يفجع لطيفة رأفت في والدتها', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-594279.html', 'summary': 'الموت يفجع لطيفة رأفت في والدتها. أعلنت الفنانة لطيفة رأفت، صباح اليوم الجمعة 17 أكتوبر الجاري، عن وفاة والدتها بعد صراع طويل مع المرض. وكتبت لطيفة رأفت، عبر حسابها الرسمي على مواقع التواصل الاجتماعي، تدوينة تنعي فيها والدتها، التي وافتها المنية فجر اليوم الجمعة، داعية متابعيها إلى الدعاء لها بالرحمة والمغفرة. وكانت والدة الفنانة تمر بوعكة صحية في', 'size': 3}, {'id': '257', 'title': 'الفنانة لطيفة رأفت تعلن وفاة والدتها', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d9%81%d9%86%d8%a7%d9%86%d8%a9-%d9%84%d8%b7%d9%8a%d9%81%d8%a9-%d8%b1%d8%a3%d9%81%d8%aa-%d8%aa%d8%b9%d9%84%d9%86-%d9%88%d9%81%d8%a7%d8%a9-%d9%88%d8%a7%d9%84%d8%af%d8%aa%d9%87%d8%a7/', 'summary': 'الفنانة لطيفة رأفت تعلن وفاة والدتها. أعلنت الفنانة المغربية لطيفة رأفت، صباح اليوم الجمعة 17 أكتوبر 2025، عن وفاة والدتها فجر نفس اليوم. وكشفت رأفت الخبر عبر حسابها الرسمي على مواقع التواصل الاجتماعي، حيث نشرت تدوينة مؤثرة نعت فيها والدتها، قائلة: “ببالغ الحزن والأسى، نعلن عن وفاة والدة لطيفة رأفت الغالية التي انتقلت إلى جوار ربها فجر اليوم الجمعة”، …  الفنانة لطيفة رأفت تعلن وفاة والدتها     .', 'size': 3}, {'id': '336', 'title': 'إنا لله وإنا إليه راجعون.. الفنانة لطيفة رأفت تعلن عن خبر مؤسف', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/culture/414657.html', 'summary': 'إنا لله وإنا إليه راجعون.. الفنانة لطيفة رأفت تعلن عن خبر مؤسف. خيم الحزن صباح اليوم الجمعة 17 أكتوبر على الوسط الفني المغربي، بعد إعلان الفنانة لطيفة رأفت عن وفاة والدتها التي فارقت الحياة فجر اليوم، بعد', 'size': 2}, {'id': '400', 'title': 'وفاة والدة  لطيفة رأفت بعد صراع مع المرض', 'source': 'soltana.ma', 'link': 'https://soltana.ma/1357935.html', 'summary': 'وفاة والدة لطيفة رأفت بعد صراع مع المرض. بكل الحزن والأسى، أعلنت الفنانة المغربية لطيفة رأفت، صباح اليوم الجمعة، عن وفاة والدتها، بعد معاناة مع المرض. ونشرت لطيفة رأفت وبعض من معارفها عبر حساباتها في مواقع التواصل الاجتماعي، نعيًا موجزًا، أفادت فيه بأن والدتها فارقت الحياة، فجر هذا اليوم، داعية المتابعين إلى الدعاء لها ولعائلتها في هذا المصاب الجلل. وكانت الراحلة تعاني من', 'size': 4}], 'main_title': 'وفاة والدة  لطيفة رأفت بعد صراع مع المرض'}, {'community_id': '13', 'articles': [{'id': '203', 'title': 'مستشار وصهر ترامب: افتتاح القنصلية الأمريكية بالداخلة قريباً والجزائر تطلب عودة العلاقات مع المغرب', 'source': 'rue20.com', 'link': 'https://rue20.com/945868.html', 'summary': 'مستشار وصهر ترامب: افتتاح القنصلية الأمريكية بالداخلة قريباً والجزائر تطلب عودة العلاقات مع المغرب.  / الرباط كشف مسعد بولس كبير مستشاري الرئيس الأمريكي للشؤون العربية و الافريقية، أن الولايات المتحدة الأمريكية تتجه لإفتتاح قنصليتها في الصحراء المغربية ، مؤكداً أن ملف الصحراء المغربية في طريقه للنهاية. بولس وفي مقابلة مع قناة الشرق من \u2067\u202bشرم الشيخ\u202c\u2069، قال أن الرئيس الأمريكي دونالد ترامب أكد على سيادة المغرب على الصحراء الخبر مستشار وصهر ترامب: افتتاح القنصلية الأمريكية بالداخلة قريباً والجزائر تطلب عودة العلاقات مع المغرب  .', 'size': 2}, {'id': '397', 'title': 'مسعد بولس: واشنطن ماضية في فتح قنصليتها بالصحراء المغربية والجزائر ترغب في تحسين العلاقات مع الرباط', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d9%85%d8%b3%d8%b9%d8%af-%d8%a8%d9%88%d9%84%d8%b3-%d9%88%d8%a7%d8%b4%d9%86%d8%b7%d9%86-%d9%85%d8%a7%d8%b6%d9%8a%d8%a9-%d9%81%d9%8a-%d9%81%d8%aa%d8%ad-%d9%82%d9%86%d8%b5%d9%84%d9%8a%d8%aa%d9%87%d8%a7/', 'summary': 'مسعد بولس: واشنطن ماضية في فتح قنصليتها بالصحراء المغربية والجزائر ترغب في تحسين العلاقات مع الرباط. أكد مسعد بولس، كبير مستشاري الرئيس الأمريكي للشؤون العربية والإفريقية، أن الإدارة الأمريكية ماضية في تنفيذ خطوة افتتاح قنصليتها في إقليم الصحراء المغربية خلال الولاية الثانية للرئيس دونالد ترامب، مشددا على أن هذا القرار يجسد استمرار موقف واشنطن الداعم لسيادة المغرب على صحرائه. جاء ذلك في مقابلة خاصة أجراها بولس من شرم الشيخ مع قناة  مسعد بولس: واشنطن ماضية في فتح قنصليتها بالصحراء المغربية والجزائر ترغب في تحسين العلاقات مع الرباط     .', 'size': 2}], 'main_title': 'مستشار وصهر ترامب: افتتاح القنصلية الأمريكية بالداخلة قريباً والجزائر تطلب عودة العلاقات مع المغرب'}, {'community_id': '1', 'articles': [{'id': '212', 'title': 'دي ميستورا يدعو لجولة جديدة من المفاوضات بين المغرب والبوليساريو والجزائر وموريتانيا', 'source': 'machahid24.com', 'link': 'https://machahid24.com/international/478901.html', 'summary': 'دي ميستورا يدعو لجولة جديدة من المفاوضات بين المغرب والبوليساريو والجزائر وموريتانيا. دعا ستافان دي ميستورا، المبعوث الشخصي للأمين العام للأمم المتحدة للصحراء، إلى إطلاق جولة جديدة من المفاوضات بين المغرب وجبهة البوليساريو والجزائر وموريتانيا بحلول نهاية عام 2025، حسب ما أفادت به وكالة الأنباء الإيطالية "نوفا"', 'size': 2}, {'id': '451', 'title': 'دي ميستورا يدعو لجولة مفاوضات جديدة لإنهاء النزاع المفتعل في الصحراء', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%af%d9%8a-%d9%85%d9%8a%d8%b3%d8%aa%d9%88%d8%b1%d8%a7-%d9%8a%d8%af%d8%b9%d9%88-%d9%84%d8%ac%d9%88%d9%84%d8%a9-%d9%85%d9%81%d8%a7%d9%88%d8%b6%d8%a7%d8%aa-%d8%ac%d8%af%d9%8a%d8%af%d8%a9-%d9%84%d8%a5/', 'summary': 'دي ميستورا يدعو لجولة مفاوضات جديدة لإنهاء النزاع المفتعل في الصحراء. دعا ستافان دي ميستورا، المبعوث الشخصي للأمين العام للأمم المتحدة للصحراء، إلى إطلاق جولة جديدة من المفاوضات بين المغرب وجبهة البوليساريو والجزائر وموريتانيا بحلول نهاية عام 2025. ووفق ما كشفت عنه وكالة الأنباء الإيطالية “نوفا” أمس الخميس، قال دي ميستورا إنه بعد نصف قرن من الوساطة والبعثات والقرارات، فقد حان الوقت لاتخاذ قرارات …  دي ميستورا يدعو لجولة مفاوضات جديدة لإنهاء النزاع المفتعل في الصحراء     .', 'size': 2}], 'main_title': 'دي ميستورا يدعو لجولة جديدة من المفاوضات بين المغرب والبوليساريو والجزائر وموريتانيا'}, {'community_id': '6', 'articles': [{'id': '287', 'title': '“CNSS” يشرع في تطبيق القرار الجديد حول وعاء الاشتراكات الاجتماعية', 'source': 'www.alousboue.ma', 'link': 'https://www.alousboue.ma/125243/', 'summary': '“CNSS” يشرع في تطبيق القرار الجديد حول وعاء الاشتراكات الاجتماعية. يعلن الصندوق الوطني للضمان الاجتماعي عن الشروع في تطبيق القرار رقم 1314.25 المتعلق بوعاء الاشتراكات الاجتماعية، انطلاقا من فاتح أكتوبر 2025. ويهدف هذا القرار إلى توضيح عناصر الأجر والتعويضات التي لا تدرج ضمن وعاء الاشتراك، مع تحديد سقوف وشروط إعفائها، كما يسعى إلى إزالة أي غموض يشوب بعض النصوص التنظيمية الحالية، وتوحيد ممارسات …  “CNSS” يشرع في تطبيق القرار الجديد حول وعاء الاشتراكات الاجتماعية     .', 'size': 2}, {'id': '338', 'title': 'الصندوق الوطني للضمان الاجتماعي يعلن انطلاق العمل بنظام جديد للاشتراكات ابتداءً من أكتوبر الجاري', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/414663.html', 'summary': 'الصندوق الوطني للضمان الاجتماعي يعلن انطلاق العمل بنظام جديد للاشتراكات ابتداءً من أكتوبر الجاري. أعلن الصندوق الوطني للضمان الاجتماعي، أمس الخميس، عن بدء تطبيق القرار رقم 1314.25 المتعلق بوعاء الاشتراكات الاجتماعية، وذلك ابتداءً من فاتح أكتوبر 2025، في خطوة', 'size': 2}], 'main_title': '“CNSS” يشرع في تطبيق القرار الجديد حول وعاء الاشتراكات الاجتماعية'}, {'community_id': '11', 'articles': [{'id': '297', 'title': 'مباحثات بين العلمي ووفد فلسطيني', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d9%85%d8%a8%d8%a7%d8%ad%d8%ab%d8%a7%d8%aa-%d8%a8%d9%8a%d9%86-%d8%a7%d9%84%d8%b9%d9%84%d9%85%d9%8a-%d9%88%d9%85%d8%b3%d8%a4%d9%88%d9%84-%d9%81%d9%84%d8%b3%d8%b7%d9%8a%d9%86%d9%8a-1641414.html', 'summary': 'مباحثات بين العلمي ووفد فلسطيني. أجرى رئيس مجلس النواب، راشيد الطالبي العلمي، اليوم الجمعة بالرباط، مباحثات مع كل من روحي فتوح، رئيس المجلس الوطني الفلسطيني، وأحمد مجدلاني، عضو اللجنة التنفيذية لمنظمة التحرير الفلسطينية، وذلك بمناسبة زيارة يقوم بها الوفد الفلسطيني للمملكة. وذكر بلاغ لمجلس النواب أن هذا اللقاء، الذي حضره سفير دولة فلسطين بالمغرب، جمال الشوبكي، ركز على إبراز العلاقات  مباحثات بين العلمي ووفد فلسطيني     - هسبريس جريدة إلكترونية مغربية .', 'size': 3}, {'id': '364', 'title': 'الطالبي العلمي يجري مباحثات مع رئيس المجلس الوطني الفلسطيني', 'source': 'assabah.ma', 'link': 'https://assabah.ma/877661.html', 'summary': 'الطالبي العلمي يجري مباحثات مع رئيس المجلس الوطني الفلسطيني. أجرى راشيد الطالبي العلمي، رئيس مجلس النواب، اليوم الجمعة 17 أكتوبر 2025 بالرباط، مباحثات مع كل من روحي فتوح، رئيس المجلس الوطني الفلسطيني، وأحمد مجدلاني، عضو اللجنة التنفيذية لمنظمة التحرير الفلسطينية، وذلك بمناسبة زيارة يقوم بها الوفد الفلسطيني للمملكة المغربية. وركز اللقاء، الذي حضره جمال الشوبكي، سفير دولة فلسطين،أكمل القراءة » المقالة الطالبي العلمي يجري مباحثات مع رئيس المجلس الوطني الفلسطيني  .', 'size': 4}, {'id': '410', 'title': 'الطالبي العلمي يلتقي وفدًا فلسطينيًا لتعزيز التعاون البرلماني', 'source': 'rue20.com', 'link': 'https://rue20.com/946007.html', 'summary': 'الطالبي العلمي يلتقي وفدًا فلسطينيًا لتعزيز التعاون البرلماني.  ا الرباط أجرى رئيس مجلس النواب، راشيد الطالبي العلمي، اليوم الجمعة 17 أكتوبر2025 بالرباط، مباحثات مع كل من روحي فتوح؛ رئيس المجلس الوطني الفلسطيني، وأحمد مجدلاني؛ عضو اللجنة التنفيذية لمنظمة التحرير الفلسطينية، وذلك بمناسبة زيارة يقوم بها الوفد الفلسطيني للمملكة المغربية. وركز اللقاء، الذي حضره جمال الشوبكي سفير دولة فلسطين، على إبراز العلاقات الخبر الطالبي العلمي يلتقي وفدًا فلسطينيًا لتعزيز التعاون البرلماني  .', 'size': 4}, {'id': '447', 'title': 'رئيس المجلس الوطني الفلسطيني يشكر الملك محمد السادس ويشيد بمواقف المغرب الداعمة لفلسطين (صور وفيديو)', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%b1%d8%a6%d9%8a%d8%b3-%d8%a7%d9%84%d9%85%d8%ac%d9%84%d8%b3-%d8%a7%d9%84%d9%88%d8%b7%d9%86%d9%8a-%d8%a7%d9%84%d9%81%d9%84%d8%b3%d8%b7%d9%8a%d9%86%d9%8a-%d9%8a%d8%b4%d9%83%d8%b1-%d8%a7%d9%84%d9%85/', 'summary': 'رئيس المجلس الوطني الفلسطيني يشكر الملك محمد السادس ويشيد بمواقف المغرب الداعمة لفلسطين (صور وفيديو). أجرى رئيس مجلس النواب، راشيد الطالبي العلمي، اليوم الجمعة 17 أكتوبر 2025 بالرباط، مباحثات مع كل من روحي فتوح؛ رئيس المجلس الوطني الفلسطيني، وأحمد مجدلاني؛ عضو اللجنة التنفيذية لمنظمة التحرير الفلسطينية، وذلك بمناسبة زيارة يقوم بها الوفد الفلسطيني للمملكة المغربية. وركز اللقاء، الذي حضره جمال الشوبكي سفير دولة فلسطين، على إبراز العلاقات …  رئيس المجلس الوطني الفلسطيني يشكر الملك محمد السادس ويشيد بمواقف المغرب الداعمة لفلسطين (صور وفيديو)     .', 'size': 3}], 'main_title': 'الطالبي العلمي يجري مباحثات مع رئيس المجلس الوطني الفلسطيني'}, {'community_id': '9', 'articles': [{'id': '311', 'title': 'المغرب وروسيا يوقعان اتفاقا جديدا للتعاون في مجال الصيد البحري', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-666932.html', 'summary': 'المغرب وروسيا يوقعان اتفاقا جديدا للتعاون في مجال الصيد البحري. هبة بريس وقع وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج، ناصر بوريطة، ورئيس الوكالة الفيدرالية الروسية للصيد البحري، إيليا شيستاكوف، اليوم الجمعة بموسكو، على اتفاق جديد للتعاون في مجال الصيد البحري، يحل محل الاتفاق السابق الذي انتهى سريانه. وجرى التوقيع على الاتفاق على هامش أشغال الدورة الثامنة للجنة المختلطة الحكومية المغرب – روسيا، التي', 'size': 3}, {'id': '352', 'title': 'توقيع اتفاق جديد للصيد البحري بين المغرب وروسيا', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/414679.html', 'summary': 'توقيع اتفاق جديد للصيد البحري بين المغرب وروسيا. وقع وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج، ناصر بوريطة، ورئيس الوكالة الفيدرالية الروسية للصيد البحري، إيليا شيستاكوف، اليوم الجمعة بموسكو، على اتفاق جديد', 'size': 2}, {'id': '362', 'title': 'المغرب-روسيا.. توقيع اتفاق جديد للتعاون في مجال الصيد البحري', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d8%b1%d9%88%d8%b3%d9%8a%d8%a7-%d8%aa%d9%88%d9%82%d9%8a%d8%b9-%d8%a7%d8%aa%d9%81%d8%a7%d9%82-%d8%ac%d8%af%d9%8a%d8%af-%d9%84%d9%84%d8%aa%d8%b9%d8%a7%d9%88%d9%86/', 'summary': 'المغرب-روسيا.. توقيع اتفاق جديد للتعاون في مجال الصيد البحري. وقع وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج، ناصر بوريطة، ورئيس الوكالة الفيدرالية الروسية للصيد البحري، إيليا شيستاكوف، اليوم الجمعة (17 أكتوبر) بموسكو، على اتفاق جديد للتعاون في مجال الصيد البحري، يحل محل الاتفاق السابق الذي انتهى سريانه. وجرى التوقيع على الاتفاق على هامش أشغال الدورة الثامنة للجنة المختلطة الحكومية المغرب – روسيا، التي', 'size': 4}, {'id': '408', 'title': 'اتفاق الصيد الجديد بين المغرب وروسيا يشمل سواحل الأقاليم الجنوبية', 'source': 'rue20.com', 'link': 'https://rue20.com/946023.html', 'summary': 'اتفاق الصيد الجديد بين المغرب وروسيا يشمل سواحل الأقاليم الجنوبية.  / الرباط وقع وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج، ناصر بوريطة، ورئيس الوكالة الفيدرالية الروسية للصيد البحري، إيليا شيستاكوف، اليوم الجمعة بموسكو، على اتفاق جديد للتعاون في مجال الصيد البحري، يحل محل الاتفاق السابق الذي انتهى سريانه. جرى التوقيع على الاتفاق على هامش أشغال الدورة الثامنة للجنة المختلطة الحكومية المغرب – الخبر اتفاق الصيد الجديد بين المغرب وروسيا يشمل سواحل الأقاليم الجنوبية  .', 'size': 3}], 'main_title': 'المغرب-روسيا.. توقيع اتفاق جديد للتعاون في مجال الصيد البحري'}, {'community_id': '0', 'articles': [{'id': '361', 'title': 'الدورة الـ8 للجنة المشتركة الحكومية المغرب – روسيا.. موسكو تشيد بالمبادرات الملكية المتعلقة بالأطلسي والساحل', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a7%d9%84%d8%af%d9%88%d8%b1%d8%a9-%d8%a7%d9%84%d9%808-%d9%84%d9%84%d8%ac%d9%86%d8%a9-%d8%a7%d9%84%d9%85%d8%b4%d8%aa%d8%b1%d9%83%d8%a9-%d8%a7%d9%84%d8%ad%d9%83%d9%88%d9%85%d9%8a%d8%a9-%d8%a7%d9%84/', 'summary': 'الدورة الـ8 للجنة المشتركة الحكومية المغرب – روسيا.. موسكو تشيد بالمبادرات الملكية المتعلقة بالأطلسي والساحل. بمناسبة الدورة الثامنة للجنة المشتركة الحكومية المغرب- روسيا، التي ترأسها بشكل مشترك وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج ناصر بوريطة، ونائب الوزير الأول لفيدرالية روسيا ديميتري باتروشيف، أشادت موسكو بالمبادرات الملكية الرامية إلى تعزيز الاستقرار والنهوض بتنمية القارة الإفريقية. وأكد سفير روسيا في المغرب، الذي كان يتحدث باسم وزارة الشؤون الخارحية، بهذه المناسبة،', 'size': 2}, {'id': '445', 'title': 'روسيا تشيد بمبادرات الملك محمد السادس الرامية إلى تعزيز الاستقرار والنهوض بتنمية القارة الإفريقية', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%b1%d9%88%d8%b3%d9%8a%d8%a7-%d8%aa%d8%b4%d9%8a%d8%af-%d8%a8%d9%85%d8%a8%d8%a7%d8%af%d8%b1%d8%a7%d8%aa-%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%85%d8%ad%d9%85%d8%af-%d8%a7%d9%84%d8%b3%d8%a7%d8%af%d8%b3/', 'summary': 'روسيا تشيد بمبادرات الملك محمد السادس الرامية إلى تعزيز الاستقرار والنهوض بتنمية القارة الإفريقية. نوهت موسكو بالمبادرات الملكية الرامية إلى تعزيز الاستقرار والنهوض بتنمية القارة الإفريقية، وذلك بمناسبة الدورة الثامنة للجنة المشتركة الحكومية المغرب- روسيا، التي ترأسها بشكل مشترك وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج ناصر بوريطة، ونائب الوزير الأول لفيدرالية روسيا ديميتري باتروشيف. وفي هذا الصدد، قال سفير روسيا في المغرب، الذي كان يتحدث …  روسيا تشيد بمبادرات الملك محمد السادس الرامية إلى تعزيز الاستقرار والنهوض بتنمية القارة الإفريقية     .', 'size': 2}], 'main_title': 'الدورة الـ8 للجنة المشتركة الحكومية المغرب – روسيا.. موسكو تشيد بالمبادرات الملكية المتعلقة بالأطلسي والساحل'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    