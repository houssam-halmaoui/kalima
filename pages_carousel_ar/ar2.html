<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 19/06/2025 - 12h25</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '7', 'articles': [{'id': '107', 'title': 'رقم قياسي جديد.. المغرب يستقبل أزيد من 7 ملايين سائح في 5 أشهر فقط', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/economy/407802.html', 'summary': 'رقم قياسي جديد.. المغرب يستقبل أزيد من 7 ملايين سائح في 5 أشهر فقط. أعلنت وزارة السياحة والصناعة التقليدية والاقتصاد الاجتماعي والتضامني أن قطاع السياحة بالمغرب سجل رقما قياسيا جديدا باستقبال 7,2 مليون سائح حتى نهاية ماي 2025، بنمو', 'size': 2}, {'id': '143', 'title': 'قطاع السياحة يسجل طفرة جديدة.. المغرب يجذب الملايين ويعزز موقعه الدولي', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/315890/', 'summary': 'قطاع السياحة يسجل طفرة جديدة.. المغرب يجذب الملايين ويعزز موقعه الدولي. أعلنت وزارة السياحة والصناعة التقليدية والاقتصاد الاجتماعي والتضامني أن قطاع السياحة بالمغرب سجل رقما قياسيا جديدا باستقبال 7,2 مليون سائح حتى نهاية ماي 2025، بنمو ملحوظ نسبته 22 في المائة مقارنة بنفس الفترة من سنة 2024. وأبرزت الوزارة، في بلاغ لها اليوم الأربعاء، أن “هذا الأداء يمثل 1,3 مليون سائح إضافي ونموا كبيرا بنسبة 68', 'size': 2}, {'id': '233', 'title': 'المغرب يسجل رقما قياسيا جديدا في القطاع السياحي', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/223079/', 'summary': 'المغرب يسجل رقما قياسيا جديدا في القطاع السياحي. وكالات أعلنت وزارة السياحة والصناعة التقليدية والاقتصاد الاجتماعي والتضامني أن قطاع السياحة بالمغرب سجل رقما قياسيا جديدا باستقبال 7,2 مليون سائح حتى نهاية ماي 2025، بنمو ملحوظ نسبته 22 في المائة مقارنة بنفس الفترة من سنة 2024. وأبرزت الوزارة، في بلاغ لها اليوم الأربعاء، أن “هذا الأداء يمثل 1,3 مليون سائح إضافي ونموا كبيرا', 'size': 3}], 'main_title': 'المغرب يسجل رقما قياسيا جديدا في القطاع السياحي'}, {'community_id': '1', 'articles': [{'id': '112', 'title': 'ردود فعل مثيرة لجماهير الوداد بعد الخسارة أمام مانشستر سيتي', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/videos/407807.html', 'summary': 'ردود فعل مثيرة لجماهير الوداد بعد الخسارة أمام مانشستر سيتي. ردود فعل مثيرة لجماهير الوداد بعد الخسارة أمام مانشستر سيتي', 'size': 2}, {'id': '195', 'title': 'لاعبو الوداد قبل صافرة مباراة مانشستر سيتي (فيديو)', 'source': 'rue20.com', 'link': 'https://rue20.com/913924.html', 'summary': 'لاعبو الوداد قبل صافرة مباراة مانشستر سيتي (فيديو). الخبر لاعبو الوداد قبل صافرة مباراة مانشستر سيتي (فيديو)  .', 'size': 2}], 'main_title': 'ردود فعل مثيرة لجماهير الوداد بعد الخسارة أمام مانشستر سيتي'}, {'community_id': '2', 'articles': [{'id': '116', 'title': 'بونو بطل القمة.. الهلال السعودي يُرغم ريال مدريد على التعادل بمونديال الأندية', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/sport/proplayers/407813.html', 'summary': 'بونو بطل القمة.. الهلال السعودي يُرغم ريال مدريد على التعادل بمونديال الأندية. أوقف الحارس المغربي ياسين بونو قطار ريال مدريد في اللحظات الأخيرة، بعدما تصدى ببراعة لركلة جزاء في الوقت بدل الضائع، مانحاً فريقه الهلال السعودي نقطة', 'size': 2}, {'id': '236', 'title': 'مباراة مثيرة بالموندياليتو: ياسين بونو يجبر ريال مدريد على التعادل', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d9%85%d8%a8%d8%a7%d8%b1%d8%a7%d8%a9-%d9%85%d8%ab%d9%8a%d8%b1%d8%a9-%d8%a8%d8%a7%d9%84%d9%85%d9%88%d9%86%d8%af%d9%8a%d8%a7%d9%84%d9%8a%d8%aa%d9%88-%d9%8a%d8%a7%d8%b3%d9%8a%d9%86-%d8%a8%d9%88%d9%86/', 'summary': 'مباراة مثيرة بالموندياليتو: ياسين بونو يجبر ريال مدريد على التعادل. المساء اليوم: خاض الحارس المغربي، ياسين بونو، مباراة بطولية مع فريقه الهلال السعودي في المباراة التي جمعته مساء اليوم الأربعاء بفريق ريال مدريد الإسباني بكأس العالم للأندية التي تجري أطوارها بالولايات المتحدة الأمريكية. واقتنص الهلتل', 'size': 2}], 'main_title': 'بونو بطل القمة.. الهلال السعودي يُرغم ريال مدريد على التعادل بمونديال الأندية'}, {'community_id': '3', 'articles': [{'id': '123', 'title': 'وزير الصناعة: 150 شركة طيران تتوفر على وحدة إنتاج واحدة على الأقل بالمغرب', 'source': 'kifache.com', 'link': 'https://kifache.com/%d9%88%d8%b2%d9%8a%d8%b1-%d8%a7%d9%84%d8%b5%d9%86%d8%a7%d8%b9%d8%a9-150-%d8%b4%d8%b1%d9%83%d8%a9-%d8%b7%d9%8a%d8%b1%d8%a7%d9%86-%d8%aa%d8%aa%d9%88%d9%81%d8%b1-%d8%b9%d9%84%d9%89-%d9%88%d8%ad%d8%af/', 'summary': 'وزير الصناعة: 150 شركة طيران تتوفر على وحدة إنتاج واحدة على الأقل بالمغرب. أكد وزير الصناعة والتجارة، رياض مزور، أن 150 مقاولة عاملة في قطاع صناعة الطيران تتوفر على مصنع واحد على الأقل بالمغرب، برقم معاملات سنوي يبلغ 2,5 مليار يورو. وأوضح الوزير في حوار مع صحيفة “لوبوان” الفرنسية، على هامش المعرض الدولي للطيران (باريس إير شو)، الذي يقام إلى غاية الأحد بمطار لوبورجيه بمشاركة مغربية متميزة، أن', 'size': 2}, {'id': '141', 'title': '150 مقاولة و2.5 مليار أورو سنويا.. المغرب يرسخ موقعه في صناعة الطيران العالمية', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/315893/', 'summary': '150 مقاولة و2.5 مليار أورو سنويا.. المغرب يرسخ موقعه في صناعة الطيران العالمية. أكد وزير الصناعة والتجارة، رياض مزور، أن 150 مقاولة عاملة في قطاع صناعة الطيران تتوفر على مصنع واحد على الأقل بالمغرب، برقم معاملات سنوي يبلغ 2,5 مليار يورو. وأوضح الوزير في حوار مع صحيفة “لوبوان” الفرنسية، على هامش المعرض الدولي للطيران (باريس إير شو)، الذي يقام إلى غاية الأحد بمطار لوبورجيه بمشاركة مغربية متميزة، أن', 'size': 2}], 'main_title': 'وزير الصناعة: 150 شركة طيران تتوفر على وحدة إنتاج واحدة على الأقل بالمغرب'}, {'community_id': '6', 'articles': [{'id': '134', 'title': 'مدرب الوداد: كنا نطمح لنتيجة إيجابية أمام السيتي وخرجنا برؤوس مرفوعة', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/315911/', 'summary': 'مدرب الوداد: كنا نطمح لنتيجة إيجابية أمام السيتي وخرجنا برؤوس مرفوعة. عبر محمد أمين بنهاشم، مدرب نادي الوداد الرياضي، عن أسفه بعد الهزيمة التي مني بها فريقه أمام نادي مانشستر سيتي الإنجليزي بنتيجة هدفين دون رد، في اللقاء الذي جمع بينهما يوم الأربعاء، برسم الجولة الأولى من منافسات المجموعة السابعة في بطولة كأس العالم للأندية. وأكد بنهاشم، خلال الندوة الصحفية التي أعقبت المباراة، أن فريقه كان', 'size': 2}, {'id': '243', 'title': 'قبيل مواجهة “السيتي”.. بنهاشم واثق من قدرة الوداد على “المنافسة والقتال”', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d9%82%d8%a8%d9%8a%d9%84-%d9%85%d9%88%d8%a7%d8%ac%d9%87%d8%a9-%d8%a7%d9%84%d8%b3%d9%8a%d8%aa%d9%8a-%d8%a8%d9%86%d9%87%d8%a7%d8%b4%d9%85-%d9%88%d8%a7%d8%ab%d9%82-%d9%85%d9%86-%d9%82%d8%af%d8%b1/', 'summary': 'قبيل مواجهة “السيتي”.. بنهاشم واثق من قدرة الوداد على “المنافسة والقتال”. المساء اليوم: يخوض فريق الوداد الرياضي البيضاوي، مساء اليوم الأربعاء، أولى مبارياته في منافسات كأس العالم للأندية المقامة في الولايات المتحدة الأمريكية، والتي سيواجه فيها فريق مانشستر سيتي الإنجليزي. وقال محمد أمين بنهاشم مدرب الوداد،', 'size': 2}], 'main_title': 'مدرب الوداد: كنا نطمح لنتيجة إيجابية أمام السيتي وخرجنا برؤوس مرفوعة'}, {'community_id': '8', 'articles': [{'id': '139', 'title': 'بريطانيا تؤكد التزامها بالمساهمة في تنمية الأقاليم الجنوبية للمغرب', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/315908/', 'summary': 'بريطانيا تؤكد التزامها بالمساهمة في تنمية الأقاليم الجنوبية للمغرب. جددت الحكومة البريطانية، أمس الثلاثاء، على لسان الوزير المكلف بالسياسة التجارية، دوغلاس ألكسندر، التزامها بإرساء شراكة معززة مع المغرب. وقال ألكسندر، في مداخلة أمام مجلس العموم، الغرفة السفلى للبرلمان البريطاني، إن “وزارة الأعمال والتجارة، والمبعوث التجاري للمملكة المتحدة لدى المغرب وغرب إفريقيا، سيعملان بشكل وثيق مع المغرب من أجل تعميق العلاقات الاقتصادية”. وأكد المسؤول البريطاني', 'size': 2}, {'id': '251', 'title': 'المملكة المتحدة تجدد التزامها بشراكة معززة مع المغرب', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d9%85%d9%85%d9%84%d9%83%d8%a9-%d8%a7%d9%84%d9%85%d8%aa%d8%ad%d8%af%d8%a9-%d8%aa%d8%ac%d8%af%d8%af-%d8%a7%d9%84%d8%aa%d8%b2%d8%a7%d9%85%d9%87%d8%a7-%d8%a8%d8%b4%d8%b1%d8%a7%d9%83%d8%a9/', 'summary': 'المملكة المتحدة تجدد التزامها بشراكة معززة مع المغرب. جدّدت الحكومة البريطانية، أمس الثلاثاء، على لسان الوزير المكلف بالسياسة التجارية، دوغلاس ألكسندر، التزامها بإرساء شراكة معززة مع المغرب. وقال ألكسندر، في مداخلة أمام مجلس العموم، الغرفة السفلى للبرلمان البريطاني، إن “وزارة الأعمال والتجارة، والمبعوث التجاري للمملكة المتحدة لدى المغرب وغرب إفريقيا، سيعملان بشكل وثيق مع المغرب من أجل تعميق العلاقات الاقتصادية”. وأكد …  المملكة المتحدة تجدد التزامها بشراكة معززة مع المغرب     .', 'size': 2}], 'main_title': 'بريطانيا تؤكد التزامها بالمساهمة في تنمية الأقاليم الجنوبية للمغرب'}, {'community_id': '4', 'articles': [{'id': '150', 'title': 'زخات رعدية مصحوبة بـ”التبروري” ورياح بهذه المناطق المغربية', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-575788.html', 'summary': 'زخات رعدية مصحوبة بـ”التبروري” ورياح بهذه المناطق المغربية. أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب تسجيل طقس حار، وزخات رعدية مصحوبة بتساقط للبرد وبهبات رياح، من اليوم الأربعاء إلى الخميس، بعدد من مناطق المملكة. وأوضحت المديرية، في نشرة إنذارية من مستوى يقظة “برتقالي”، أنه يرتقب تسجيل زخات رعدية مصحوبة بتساقط للبرد وبهبات رياح (من 15 إلى 25 ملم) ستهم عمالات وأقاليم', 'size': 2}, {'id': '235', 'title': 'نشرة إنذارية.. زخات رعدية مع رياح مرتقبة اليوم الأربعاء وغد الخميس', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/223073/', 'summary': 'نشرة إنذارية.. زخات رعدية مع رياح مرتقبة اليوم الأربعاء وغد الخميس. كواليس اليوم أفادت المديرية العامة للأرصاد الجوية بأنه يرتقب تسجيل طقس حار، وزخات رعدية مصحوبة بتساقط للبرد وبهبات رياح، من اليوم الأربعاء إلى الخميس، بعدد من مناطق المملكة. وأوضحت المديرية، في نشرة إنذارية من مستوى يقظة “برتقالي”، أنه يرتقب تسجيل زخات رعدية مصحوبة بتساقط للبرد وبهبات رياح (من 15 إلى 25 ملم) ستهم عمالات', 'size': 2}], 'main_title': 'زخات رعدية مصحوبة بـ”التبروري” ورياح بهذه المناطق المغربية'}, {'community_id': '9', 'articles': [{'id': '156', 'title': 'وسيط المملكة يطلق برنامج “إدارة المساواة” لتكريس الإنصاف في الخدمات العمومية', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1078866.html', 'summary': 'وسيط المملكة يطلق برنامج “إدارة المساواة” لتكريس الإنصاف في الخدمات العمومية. أعلن وسيط المملكة، حسن طارق، اليوم الأربعاء ظهرت المقالة وسيط المملكة يطلق برنامج “إدارة المساواة” لتكريس الإنصاف في الخدمات العمومية  .', 'size': 2}, {'id': '419', 'title': 'طارق: الوساطة في التجارب المقارنة تواجه أنماطا جديدة من الإشكاليات', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%b7%d8%a7%d8%b1%d9%82-%d8%a7%d9%84%d9%88%d8%b3%d8%a7%d8%b7%d8%a9-%d9%81%d9%8a-%d8%a7%d9%84%d8%aa%d8%ac%d8%a7%d8%b1%d8%a8-%d8%a7%d9%84%d9%85%d9%82%d8%a7%d8%b1%d9%86%d8%a9-%d8%aa%d9%88%d8%a7%d8%ac/', 'summary': 'طارق: الوساطة في التجارب المقارنة تواجه أنماطا جديدة من الإشكاليات. المساء اليوم: قال وسيط المملكة، حسن طارق، أن مؤسسات الوساطة في التجارب المقارنة تواجه اليوم أنماطا جديدة من الإشكاليات تتمحور حول أثر التحول الرقمي للإدارة لضمان حقوق المرتفقين وفعلية قيم العدالة والإنصاف وتأمين سلاسة الولوج', 'size': 2}], 'main_title': 'وسيط المملكة يطلق برنامج “إدارة المساواة” لتكريس الإنصاف في الخدمات العمومية'}, {'community_id': '10', 'articles': [{'id': '176', 'title': 'تألق المغربي بونو.. الهلال السعودي يفرض التعادل أمام ريال مدريد بكأس العالم للأندية', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%aa%d8%a3%d9%84%d9%82-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8%d9%8a-%d8%a8%d9%88%d9%86%d9%88-%d8%a7%d9%84%d9%87%d9%84%d8%a7%d9%84-%d8%a7%d9%84%d8%b3%d8%b9%d9%88%d8%af%d9%8a-%d9%8a%d9%81%d8%b1%d8%b6/', 'summary': 'تألق المغربي بونو.. الهلال السعودي يفرض التعادل أمام ريال مدريد بكأس العالم للأندية. حسمت نتيجة التعادل الإيجابي بهدف لكل فريق مباراة ريال مدريد والهلال السعودي، التي أقيمت مساء اليوم الأربعاء، في إطار منافسات كأس العالم للأندية. وسجل خلال المباراة التي استضافها ملعب هارد روك، برسم الجولة الافتتاحية، من المجموعة الثامنة، جونزالو جارسيا هدف ريال مدريد في الدقيقة الـ 34، بينما عدل النجم البرتغالي روبن نيفيز في الدقيقة الـ41،  تألق المغربي بونو.. الهلال السعودي يفرض التعادل أمام ريال مدريد بكأس العالم للأندية     .', 'size': 2}, {'id': '188', 'title': 'ياسين بونو ينقذ الهلال السعودي من الهزيمة أمام ريال مدريد في كأس العالم للأندية', 'source': 'rue20.com', 'link': 'https://rue20.com/913987.html', 'summary': 'ياسين بونو ينقذ الهلال السعودي من الهزيمة أمام ريال مدريد في كأس العالم للأندية. . الرباط أهدى حارس المرمى، الدولي المغربي ياسين بونو، فريقه الهلال السعودي تعادلا ثمينا أمام ريال مدريد الإسباني، بتصديه لركلة جزاء حاسمة في الدقائق الأخيرة، لتنتهي المواجهة التي جمعت الفريقين اليوم الأربعاء بملعب هارد روك ستاديوم في ميامي لحساب الجولة الأولى للمجموعة الثامنة لكأس العالم للأندية، بنتيجة التعادل (1-1). وكان نادي العاصمة الإسبانية سباقا الخبر ياسين بونو ينقذ الهلال السعودي من الهزيمة أمام ريال مدريد في كأس العالم للأندية  .', 'size': 2}], 'main_title': 'تألق المغربي بونو.. الهلال السعودي يفرض التعادل أمام ريال مدريد بكأس العالم للأندية'}, {'community_id': '16', 'articles': [{'id': '177', 'title': 'بنهاشم: كنا نرغب في إسعاد الجماهير وواجهنا مانشستر سيتي بطريقتنا', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a8%d9%86%d9%87%d8%a7%d8%b4%d9%85-%d9%83%d9%86%d8%a7-%d9%86%d8%b1%d8%ba%d8%a8-%d9%81%d9%8a-%d8%a5%d8%b3%d8%b9%d8%a7%d8%af-%d8%a7%d9%84%d8%ac%d9%85%d8%a7%d9%87%d9%8a%d8%b1-%d9%88%d9%88%d8%a7%d8%ac/', 'summary': 'بنهاشم: كنا نرغب في إسعاد الجماهير وواجهنا مانشستر سيتي بطريقتنا. عبر مدرب الوداد الرياضي، محمد أمين بنهاشم، عن أسفه بعد الهزيمة أمام نادي مانشستر سيتي الإنجليزي، ضمن المباراة الأولى من دور مجموعات كأس العالم التي تحتضنها الولايات المتحدة الأمريكية. وقال بنهاشم خلال الندوة الإعلامية التي أعقبت المباراة: "أتأسف لجماهير الوداد، وللجماهير المغربية بشكل عام، كنا نرغب في إسعادهم بنتيجة إيجابية، خصوصا الذين تابعونا من مدرجات  بنهاشم: كنا نرغب في إسعاد الجماهير وواجهنا مانشستر سيتي بطريقتنا     .', 'size': 2}, {'id': '359', 'title': 'بنهاشم: أثبتنا قدرتنا على المنافسة.. ورهبة المشاركة الأولى وراء خسارتنا', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1078917.html', 'summary': 'بنهاشم: أثبتنا قدرتنا على المنافسة.. ورهبة المشاركة الأولى وراء خسارتنا. عبر محمد أمين بنهاشم، مدرب نادي الوداد الرياضي، عن رضاه عن مستوى لاعبيه بعد مباراة مانشستر سيتي في افتتاح مونديال الأندية، رغم الخسارة بثنائية نظيفة، مؤكدًا قدرة فريقه على المنافسة، ومشيدًا بانضباط اللاعبين على المستوى الدفاعي. وقال بنهاشم في المؤتمر الصحفي الذي أعقب اللقاء: “كما ذكرت سابقًا، كانت مباراة مانشستر سيتي فرصة حقيقية لاختبار مكانتنا ظهرت المقالة بنهاشم: أثبتنا قدرتنا على المنافسة.. ورهبة المشاركة الأولى وراء خسارتنا  .', 'size': 2}], 'main_title': 'بنهاشم: كنا نرغب في إسعاد الجماهير وواجهنا مانشستر سيتي بطريقتنا'}, {'community_id': '13', 'articles': [{'id': '190', 'title': 'لقجع: مونديال 2030 صديق للبيئة والمغرب أصبح فاعلا رئيسيا في كرة القدم العالمية', 'source': 'rue20.com', 'link': 'https://rue20.com/913962.html', 'summary': 'لقجع: مونديال 2030 صديق للبيئة والمغرب أصبح فاعلا رئيسيا في كرة القدم العالمية.  | الرباط أكد الوزير المنتدب المكلف بالميزانية، ورئيس الجامعة الملكية المغربية لكرة القدم، فوزي لقجع، اليوم الأربعاء بسلا الجديدة، أن المغرب ملتزم بشكل حازم بجعل كأس العالم 2030 نموذجا للاستدامة البيئية والاندماج الاجتماعي، وبتنظيم هذا المونديال في إطار دينامية شاملة للانتقال البيئي. وقال لقجع، وهو رئيس لجنة كأس العالم 2030، خلال لقاء نظم الخبر لقجع: مونديال 2030 صديق للبيئة والمغرب أصبح فاعلا رئيسيا في كرة القدم العالمية  .', 'size': 2}, {'id': '246', 'title': 'لقجع: المغرب ملتزم بجعل مونديال 2030 نموذجا للاندماج والاستدامة البيئية', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d9%84%d9%82%d8%ac%d8%b9-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d9%85%d9%84%d8%aa%d8%b2%d9%85-%d8%a8%d8%ac%d8%b9%d9%84-%d9%85%d9%88%d9%86%d8%af%d9%8a%d8%a7%d9%84-2030-%d9%86%d9%85%d9%88%d8%b0%d8%ac/', 'summary': 'لقجع: المغرب ملتزم بجعل مونديال 2030 نموذجا للاندماج والاستدامة البيئية. قال الوزير المنتدب المكلف بالميزانية، ورئيس الجامعة الملكية المغربية لكرة القدم، فوزي لقجع، اليوم الأربعاء بسلا الجديدة، إن المغرب ملتزم بشكل حازم بجعل كأس العالم 2030 نموذجا للاستدامة البيئية والاندماج الاجتماعي، وبتنظيم هذا المونديال في إطار دينامية شاملة للانتقال البيئي. وأبرز لقجع، وهو رئيس لجنة كأس العالم 2030، خلال لقاء نظم بجامعة محمد …  لقجع: المغرب ملتزم بجعل مونديال 2030 نموذجا للاندماج والاستدامة البيئية     .', 'size': 2}], 'main_title': 'لقجع: مونديال 2030 صديق للبيئة والمغرب أصبح فاعلا رئيسيا في كرة القدم العالمية'}, {'community_id': '5', 'articles': [{'id': '200', 'title': 'الشروع في تنزيل برنامج إعادة تكوين القطيع الوطني', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/466870.html', 'summary': 'الشروع في تنزيل برنامج إعادة تكوين القطيع الوطني. قال وزير الفلاحة والصيد البحري والتنمية القروية والمياه والغابات، أحمد البواري، اليوم الأربعاء بمجلس النواب، إنه تم الشروع في تنزيل برنامج دعم مربي الماشية وإعادة تكوين القطيع الوطني، بتعاون وثيق بين الوزارات المعنية. وأوضح البواري، خلال اجتماع لجنة القطاعات الإنتاجية بالمجلس، أنه تم إصدار دورية مشتركة بين وزارات الداخلية والاقتصاد والمالية والفلاحة، تحدد لجان الحكامة …', 'size': 2}, {'id': '238', 'title': 'الشروع في تنزيل برنامج دعم مربي الماشية وإعادة تكوين القطيع', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%a7%d9%84%d8%b4%d8%b1%d9%88%d8%b9-%d9%81%d9%8a-%d8%aa%d9%86%d8%b2%d9%8a%d9%84-%d8%a8%d8%b1%d9%86%d8%a7%d9%85%d8%ac-%d8%af%d8%b9%d9%85-%d9%85%d8%b1%d8%a8%d9%8a-%d8%a7%d9%84%d9%85%d8%a7%d8%b4%d9%8a/', 'summary': 'الشروع في تنزيل برنامج دعم مربي الماشية وإعادة تكوين القطيع. المساء اليوم: قال وزير الفلاحة والصيد البحري والتنمية القروية والمياه والغابات، أحمد البواري، اليوم الأربعاء بمجلس النواب، إنه تم الشروع في تنزيل برنامج دعم مربي الماشية وإعادة تكوين القطيع الوطني، بتعاون وثيق بين الوزارات المعنية.', 'size': 2}], 'main_title': 'الشروع في تنزيل برنامج إعادة تكوين القطيع الوطني'}, {'community_id': '11', 'articles': [{'id': '234', 'title': 'تنفيذا للتعليمات الملكية.. لوديي يستقبل وزير الدفاع الرواندي', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/223076/', 'summary': 'تنفيذا للتعليمات الملكية.. لوديي يستقبل وزير الدفاع الرواندي. كواليس اليوم تنفيذا للتعليمات الملكية السامية، استقبل الوزير المنتدب لدى رئيس الحكومة المكلف بإدارة الدفاع الوطني، عبد اللطيف لوديي، اليوم الأربعاء بمقر هذه الإدارة، وزير الدفاع بجمهورية رواندا، جوفينال ماريزاموندا، مرفوقا بوفد هام يقوم بزيارة عمل للمملكة، بمشاركة سفيرة جمهورية رواندا المعتمدة بالرباط. وذكر بلاغ لإدارة الدفاع الوطني أن هذه الزيارة، التي تندرج في', 'size': 2}, {'id': '253', 'title': 'لوديي يستقبل بالرباط وزير الدفاع بجمهورية رواندا', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d9%84%d9%88%d8%af%d9%8a%d9%8a-%d9%8a%d8%b3%d8%aa%d9%82%d8%a8%d9%84-%d8%a8%d8%a7%d9%84%d8%b1%d8%a8%d8%a7%d8%b7-%d9%88%d8%b2%d9%8a%d8%b1-%d8%a7%d9%84%d8%af%d9%81%d8%a7%d8%b9-%d8%a8%d8%ac%d9%85%d9%87/', 'summary': 'لوديي يستقبل بالرباط وزير الدفاع بجمهورية رواندا. استقبل الوزير المنتدب لدى رئيس الحكومة المكلف بإدارة الدفاع الوطني، عبد اللطيف لوديي، اليوم الأربعاء، بمقر هذه الإدارة، وزير الدفاع بجمهورية رواندا، جوفينال ماريزاموندا، مرفوقا بوفد هام يقوم بزيارة عمل للمملكة، بمشاركة سفيرة جمهورية رواندا المعتمدة بالرباط، وذلك تنفيذا للتعليمات الملكية السامية. وذكر بلاغ لإدارة الدفاع الوطني، أن هذه الزيارة، التي تندرج في …  لوديي يستقبل بالرباط وزير الدفاع بجمهورية رواندا     .', 'size': 2}], 'main_title': 'تنفيذا للتعليمات الملكية.. لوديي يستقبل وزير الدفاع الرواندي'}, {'community_id': '12', 'articles': [{'id': '288', 'title': 'ميداليات تحفز "بارا ألعاب القوى"', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d9%85%d9%8a%d8%af%d8%a7%d9%84%d9%8a%d8%a7%d8%aa-%d8%aa%d8%ad%d9%81%d8%b2-%d8%a8%d8%a7%d8%b1%d8%a7-%d8%a3%d9%84%d8%b9%d8%a7%d8%a8-%d8%a7%d9%84%d9%82%d9%88%d9%89-1578493.html', 'summary': 'ميداليات تحفز "بارا ألعاب القوى". فاز الرياضيون المغاربة المشاركون في النسخة الـ19 من ملتقى تونس الدولي للبارا ألعاب القوى (الأشخاص في وضعية إعاقة)، التي اختتمت منافساتها مساء أمس الأربعاء برادس (ضواحي العاصمة)، بست ميداليات (ذهبيتان وفضية وثلاث برونزيات). نال الميدالية الذهبية الأولى زكرياء الدرهم في رمي الجلة (فئة إف 33)، فيما فازت بالثانية يسرى كريم في رمي القرص (فئة إف  ميداليات تحفز "بارا ألعاب القوى"     - هسبريس جريدة إلكترونية مغربية .', 'size': 2}, {'id': '347', 'title': '6 ميداليات حصيلة مشاركة الرياضيين المغاربة في ملتقى بتونس', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/315936/', 'summary': '6 ميداليات حصيلة مشاركة الرياضيين المغاربة في ملتقى بتونس. فاز الرياضيون المغاربة، المشاركون في النسخة ال 19 لملتقى تونس الدولي للبارا العاب القوى (الأشخاص في وضعية إعاقة) التي اختتمت منافساتها مساء أمس الأربعاء برادس (ضواحي العاصمة)، بست ميداليات (ذهبيتان وفضية وثلاث برونزيات). ونال الميدالية الذهبية الأولى زكرياء الدرهم في رمي الجلة (فئة إف 33) ،فيما فازت بالثانية يسرى كريم في رمي القرص (فئة إف', 'size': 2}], 'main_title': 'ميداليات تحفز "بارا ألعاب القوى"'}, {'community_id': '14', 'articles': [{'id': '343', 'title': 'الشعب المغربي يحتفل بالذكرى ال55 لميلاد الأمير مولاي رشيد', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/315945/', 'summary': 'الشعب المغربي يحتفل بالذكرى ال55 لميلاد الأمير مولاي رشيد. تخلد الأسرة الملكية ومعها الشعب المغربي، يوم غد الجمعة، الذكرى الخامسة والخمسين لميلاد الأمير مولاي رشيد، وهي مناسبة يتقاسم فيها الشعب المغربي قاطبة مع الأسرة الملكية الشريفة أفراحها ومسراتها بهذا الحدث السعيد، ويعبر فيها عن أحر التهاني وأصدق المتمنيات بموفور الصحة والعافية والعمر المديد للملك محمد السادس، وولي العهد الأمير مولاي الحسن، والأمير مولاي رشيد،', 'size': 3}, {'id': '355', 'title': 'المغرب يحتفل بالذكرى الـ55 لميلاد الأمير مولاي رشيد', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1078939.html', 'summary': 'المغرب يحتفل بالذكرى الـ55 لميلاد الأمير مولاي رشيد. تخلد الأسرة الملكية ومعها الشعب المغربي، يوم غد الجمعة، الذكرى الخامسة والخمسين لميلاد الأمير مولاي رشيد، وهي مناسبة يتقاسم فيها الشعب المغربي قاطبة مع الأسرة الملكية الشريفة أفراحها ومسراتها بهذا الحدث السعيد، ويعبر فيها عن أحر التهاني وأصدق المتمنيات بموفور الصحة والعافية والعمر المديد للملك محمد السادس، وولي العهد الأمير مولاي الحسن، والأمير مولاي رشيد، ظهرت المقالة المغرب يحتفل بالذكرى الـ55 لميلاد الأمير مولاي رشيد  .', 'size': 3}, {'id': '422', 'title': 'الأسرة الملكية والشعب المغربي يحتفلان غدا الجمعة بالذكرى الـ55 لميلاد الأمير مولاي رشيد', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d8%a3%d8%b3%d8%b1%d8%a9-%d8%a7%d9%84%d9%85%d9%84%d9%83%d9%8a%d8%a9-%d9%88%d8%a7%d9%84%d8%b4%d8%b9%d8%a8-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8%d9%8a-%d9%8a%d8%ad%d8%aa%d9%81%d9%84%d8%a7-2/', 'summary': 'الأسرة الملكية والشعب المغربي يحتفلان غدا الجمعة بالذكرى الـ55 لميلاد الأمير مولاي رشيد. تخلد الأسرة الملكية ومعها الشعب المغربي، يوم غدٍ الجمعة، الذكرى الخامسة والخمسين لميلاد صاحب السمو الملكي الأمير مولاي رشيد. وتعتبر هذه الذكرى، مناسبة يتقاسم فيها الشعب المغربي قاطبة مع الأسرة الملكية الشريفة أفراحها ومسراتها بهذا الحدث السعيد، ويعبّر فيها عن أحر التهاني وأصدق المتمنيات بموفور الصحة والعافية والعمر المديد للملك محمد السادس، وصاحب …  الأسرة الملكية والشعب المغربي يحتفلان غدا الجمعة بالذكرى الـ55 لميلاد الأمير مولاي رشيد     .', 'size': 3}], 'main_title': 'الشعب المغربي يحتفل بالذكرى ال55 لميلاد الأمير مولاي رشيد'}, {'community_id': '15', 'articles': [{'id': '352', 'title': 'طقس الخميس…أجواء حارة بعدد من المدن', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/315925/', 'summary': 'طقس الخميس…أجواء حارة بعدد من المدن. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الخميس، أن تتميز الحالة الجوية عامة، بطقس حار بكل من السهول الشمالية والوسطى، والجنوب الشرقي وداخل الأقاليم الجنوبية للبلاد. وستلاحظ زخات رعدية مع برد وهبات رياح قوية تحت الرعد بمرتفعات الأطلس، وسهول تادلة، وهضاب الفوسفاط ووالماس والسفوح الشرقية لمرتفعات الأطلس الكبير والمتوسط، مع قطرات مطرية ورعد محلي بباقي', 'size': 5}, {'id': '379', 'title': 'طقس حار مع زخات رعدية متوقعة اليوم الخميس', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%b7%d9%82%d8%b3-%d8%ad%d8%a7%d8%b1-%d9%85%d8%b9-%d8%b2%d8%ae%d8%a7%d8%aa-%d8%b1%d8%b9%d8%af%d9%8a%d8%a9-%d9%85%d8%aa%d9%88%d9%82%d8%b9%d8%a9-%d8%a7%d9%84%d9%8a%d9%88%d9%85-%d8%a7%d9%84%d8%a3-2/', 'summary': 'طقس حار مع زخات رعدية متوقعة اليوم الخميس. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الخميس، أن تتميز الحالة الجوية عامة، بطقس حار بكل من السهول الشمالية والوسطى، والجنوب الشرقي وداخل الأقاليم الجنوبية للبلاد. وستلاحظ زخات رعدية مع برد وهبات رياح قوية تحت الرعد بمرتفعات الأطلس، وسهول تادلة، وهضاب الفوسفاط ووالماس والسفوح الشرقية لمرتفعات الأطلس الكبير والمتوسط، مع قطرات مطرية ورعد محلي بباقي  طقس حار مع زخات رعدية متوقعة اليوم الخميس     .', 'size': 5}, {'id': '380', 'title': 'توقعات أحوال الطقس لليوم الخميس', 'source': 'soltana.ma', 'link': 'https://soltana.ma/1357451.html', 'summary': 'توقعات أحوال الطقس لليوم الخميس. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الخميس، أن تتميز الحالة الجوية عامة، بطقس حار بكل من السهول الشمالية والوسطى، والجنوب الشرقي وداخل الأقاليم الجنوبية للبلاد. وستلاحظ زخات رعدية مع برد وهبات رياح قوية تحت الرعد بمرتفعات الأطلس، وسهول تادلة، وهضاب الفوسفاط ووالماس والسفوح الشرقية لمرتفعات الأطلس الكبير والمتوسط، مع قطرات مطرية ورعد محلي بباقي', 'size': 5}, {'id': '413', 'title': 'طقس الخميس.. جو حار مع زخات رعدية في بعض المناطق', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/223115/', 'summary': 'طقس الخميس.. جو حار مع زخات رعدية في بعض المناطق. كواليس اليوم تتوقع المديرية العامة للأرصاد الجوية، اليوم الخميس، أن تتميز الحالة الجوية عامة، بطقس حار بكل من السهول الشمالية والوسطى، والجنوب الشرقي وداخل الأقاليم الجنوبية للبلاد. وستلاحظ زخات رعدية مع برد وهبات رياح قوية تحت الرعد بمرتفعات الأطلس، وسهول تادلة، وهضاب الفوسفاط ووالماس والسفوح الشرقية لمرتفعات الأطلس الكبير والمتوسط، مع قطرات مطرية ورعد', 'size': 5}, {'id': '427', 'title': 'طقس حار وزخات رعدية بعدد من مناطق المملكة اليوم الخميس', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%b7%d9%82%d8%b3-%d8%ad%d8%a7%d8%b1-%d9%88%d8%b2%d8%ae%d8%a7%d8%aa-%d8%b1%d8%b9%d8%af%d9%8a%d8%a9-%d8%a8%d8%b9%d8%af%d8%af-%d9%85%d9%86-%d9%85%d9%86%d8%a7%d8%b7%d9%82-%d8%a7%d9%84%d9%85%d9%85%d9%84/', 'summary': 'طقس حار وزخات رعدية بعدد من مناطق المملكة اليوم الخميس. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الخميس، أن تتميز الحالة الجوية عامة، بطقس حار بكل من السهول الشمالية والوسطى، والجنوب الشرقي وداخل الأقاليم الجنوبية للبلاد. وستلاحظ زخات رعدية مع برد وهبات رياح قوية تحت الرعد بمرتفعات الأطلس، وسهول تادلة، وهضاب الفوسفاط ووالماس والسفوح الشرقية لمرتفعات الأطلس الكبير والمتوسط، مع قطرات مطرية ورعد …  طقس حار وزخات رعدية بعدد من مناطق المملكة اليوم الخميس     .', 'size': 5}], 'main_title': 'طقس الخميس…أجواء حارة بعدد من المدن'}, {'community_id': '0', 'articles': [{'id': '411', 'title': 'غامبيا تجدد تأكيد دعمها الثابت للمبادرة المغربية للحكم الذاتي', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/223123/', 'summary': 'غامبيا تجدد تأكيد دعمها الثابت للمبادرة المغربية للحكم الذاتي. و م ع جددت غامبيا تأكيد دعمها الثابت للمبادرة المغربية للحكم الذاتي، معتبرة إياها الإطار الأكثر مصداقية والأكثر براغماتية من أجل تسوية النزاع الإقليمي حول الصحراء. وأكدت ممثلة غامبيا، خلال الدورة العادية للجنة الـ24 التي تنعقد من 9 إلى 20 يونيو في نيويورك، أن “غامبيا تواصل تأكيد دعمها الثابت للمبادرة المغربية للحكم الذاتي، التي', 'size': 2}, {'id': '425', 'title': 'غامبيا تجدد دعمها لمخطط الحكم الذاتي لتسوية قضية الصحراء المغربية', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%ba%d8%a7%d9%85%d8%a8%d9%8a%d8%a7-%d8%aa%d8%ac%d8%af%d8%af-%d8%af%d8%b9%d9%85%d9%87%d8%a7-%d9%84%d9%85%d8%ae%d8%b7%d8%b7-%d8%a7%d9%84%d8%ad%d9%83%d9%85-%d8%a7%d9%84%d8%b0%d8%a7%d8%aa%d9%8a-%d9%84/', 'summary': 'غامبيا تجدد دعمها لمخطط الحكم الذاتي لتسوية قضية الصحراء المغربية. جددت غامبيا تأكيد دعمها الثابت للمبادرة المغربية للحكم الذاتي، معتبرة إياها الإطار الأكثر مصداقية والأكثر براغماتية من أجل تسوية النزاع الإقليمي حول الصحراء المغربية. وأكدت ممثلة غامبيا، خلال الدورة العادية للجنة الـ24 التي تنعقد من 9 إلى 20 يونيو في نيويورك، أن “غامبيا تواصل تأكيد دعمها الثابت للمبادرة المغربية للحكم الذاتي، التي تعتبرها …  غامبيا تجدد دعمها لمخطط الحكم الذاتي لتسوية قضية الصحراء المغربية     .', 'size': 2}], 'main_title': 'غامبيا تجدد تأكيد دعمها الثابت للمبادرة المغربية للحكم الذاتي'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    