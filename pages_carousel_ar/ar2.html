<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 25/07/2025 - 18h30</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '114', 'title': 'ظهور فاعلين جدد ورقم المعاملات يتراجع.. مجلس المنافسة يصدر تقريرا جديدا عن سوق الغازوال والبنزين بالمغرب', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/economy/409889.html', 'summary': 'ظهور فاعلين جدد ورقم المعاملات يتراجع.. مجلس المنافسة يصدر تقريرا جديدا عن سوق الغازوال والبنزين بالمغرب. أفاد مجلس المنافسة بأن رقم معاملات شركات التوزيع بالجملة للغازوال والبنزين التسع بلغت 77,3 مليار درهم خلال سنة 2024، مسجلا انخفاضا بنسبة 3 في المائة', 'size': 2}, {'id': '370', 'title': 'تقرير: متوسط ربح سنوي بـ1.39 مليار درهم واستثمارات شبه مستقرة لشركات المحروقات', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1088136.html', 'summary': 'تقرير: متوسط ربح سنوي بـ1.39 مليار درهم واستثمارات شبه مستقرة لشركات المحروقات. بلغ متوسط النتيجة الصافية السنوية لحجم استثمارات تسع شركات في سوق المحروقات بالمغرب 1.39 مليار درهم خلال الفترة الممتدة من سنة 2018 إلى سنة 2024، بحسب ما ورد في تقرير حديث صادر عن مجلس المنافسة. وأصدر مجلس المنافسة تقريرا عن “الربع الأول من سنة 2025 وتحليل مؤشرات الأداء المالي برسم سنة 2024 لشركات توزيع البنزين ظهرت المقالة تقرير: متوسط ربح سنوي بـ1.39 مليار درهم واستثمارات شبه مستقرة لشركات المحروقات  .', 'size': 2}], 'main_title': 'ظهور فاعلين جدد ورقم المعاملات يتراجع.. مجلس المنافسة يصدر تقريرا جديدا عن سوق الغازوال والبنزين بالمغرب'}, {'community_id': '4', 'articles': [{'id': '161', 'title': 'القضاء الكندي يدين هشام جيراندو بالحبس والغرامة في قضية تشهير بقاض مغربي', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1088106.html', 'summary': 'القضاء الكندي يدين هشام جيراندو بالحبس والغرامة في قضية تشهير بقاض مغربي. أدانت المحكمة العليا بمقاطعة كيبيك، الخميس 24 يوليوز، اليوتيوبر المغربي المقيم بكندا، هشام جيراندو، بالحبس النافذ لمدة شهر، مع إلزامه بإنجاز 150 ساعة من الخدمة المجتمعية، ودفع غرامة مالية قدرها 10 آلاف دولار كندي، وذلك في إطار دعوى تشهير رفعها ضده القاضي المغربي عبد الرحيم حنين. وجاء في منطوق الحكم أن جيراندو بث عبر قناته ظهرت المقالة القضاء الكندي يدين هشام جيراندو بالحبس والغرامة في قضية تشهير بقاض مغربي  .', 'size': 2}, {'id': '220', 'title': 'عاجل.. القضاء الكندي يحكم على جيراندو بالحبس النافذ و150 ساعة من الخدمة و10 آلاف دولار غرامة', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/225153/', 'summary': 'عاجل.. القضاء الكندي يحكم على جيراندو بالحبس النافذ و150 ساعة من الخدمة و10 آلاف دولار غرامة. أدانت المحكمة العليا بكيبيك، اليوم الخميس 24 يوليوز 2025، اليوتيوبر المغربي المقيم بكندا هشام جيراندو، بالسجن النافذ لمدة شهر مع إنجاز 150 ساعة من الخدمة المجتمعية، ودفع غرامة مالية قدرها 10,000 دولار كندي، وذلك في إطار دعوى رفعها القاضي المغربي عبد الرحيم حنين أما المحاكم الكندية، بعد تعرضه للتشهير من قبل المعني بالأمر. وكان هشام جيراندو،', 'size': 2}], 'main_title': 'القضاء الكندي يدين هشام جيراندو بالحبس والغرامة في قضية تشهير بقاض مغربي'}, {'community_id': '8', 'articles': [{'id': '171', 'title': 'مركز أبحاث: تراجع عجز السيولة البنكية بنسبة 3,86 في المائة', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d9%85%d8%b1%d9%83%d8%b2-%d8%a3%d8%a8%d8%ad%d8%a7%d8%ab-%d8%aa%d8%b1%d8%a7%d8%ac%d8%b9-%d8%b9%d8%ac%d8%b2-%d8%a7%d9%84%d8%b3%d9%8a%d9%88%d9%84%d8%a9-%d8%a7%d9%84%d8%a8%d9%86%d9%83%d9%8a%d8%a9-%d8%a8/', 'summary': 'مركز أبحاث: تراجع عجز السيولة البنكية بنسبة 3,86 في المائة. أفاد مركز أبحاث "بي إم سي إي كابيتال غلوبال ريسيرش" (BKGR)، أن متوسط عجز السيولة البنكية تراجع، خلال الفترة من 17 إلى 23 يوليوز الجاري، بنسبة 3,86 في المائة إلى 130,5 مليار درهم. وأوضح المركز، في مذكرته الأخيرة "Fixed Income Weekly"، أن هذا التراجع يأتي في وقت ارتفعت فيه تسبيقات بنك المغرب لمدة 7 أيام  مركز أبحاث: تراجع عجز السيولة البنكية بنسبة 3,86 في المائة     .', 'size': 2}, {'id': '441', 'title': 'انخفاض عجز السيولة البنكية في المغرب', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%86%d8%ae%d9%81%d8%a7%d8%b6-%d8%b9%d8%ac%d8%b2-%d8%a7%d9%84%d8%b3%d9%8a%d9%88%d9%84%d8%a9-%d8%a7%d9%84%d8%a8%d9%86%d9%83%d9%8a%d8%a9-%d9%81%d9%8a-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8/', 'summary': 'انخفاض عجز السيولة البنكية في المغرب. أفاد مركز أبحاث “بي إم سي إي كابيتال غلوبال ريسيرش” (BKGR) أن متوسط عجز السيولة البنكية في المغرب شهد تراجعا بنسبة 3.86% خلال الفترة ما بين 17 و23 يوليوز الجاري، ليبلغ 130.5 مليار درهم. وأورد المركز، في مذكرته الأخيرة “Fixed Income Weekly”، أن هذا التراجع جاء بالتزامن مع ارتفاع تسبيقات بنك المغرب لمدة …  انخفاض عجز السيولة البنكية في المغرب     .', 'size': 2}], 'main_title': 'مركز أبحاث: تراجع عجز السيولة البنكية بنسبة 3,86 في المائة'}, {'community_id': '7', 'articles': [{'id': '173', 'title': 'بنك المغرب: 2298 مغربيا قدموا شكايات ضد الأبناك خلال 2024', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a8%d9%86%d9%83-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-2298-%d9%85%d8%ba%d8%b1%d8%a8%d9%8a-%d9%82%d8%af%d9%85%d9%88%d8%a7-%d8%b4%d9%83%d8%a7%d9%8a%d8%a7%d8%aa-%d8%b6%d8%af-%d8%a7%d9%84%d8%a3%d8%a8/', 'summary': 'بنك المغرب: 2298 مغربيا قدموا شكايات ضد الأبناك خلال 2024. أفاد بنك المغرب أن مديرية الإشراف البنكي بلغت عن توصلها بـ 2298 شكاية من زبناء مؤسسات الائتمان خلال سنة 2024، مقابل 1459 شكاية خلال السنة التي قبلها. وأوضح البنك، في تقريره السنوي حول الإشراف البنكي، أن ما يناهز 70 في المائة من الشكايات التي تندرج ضمن اختصاصات المركز المغربي للوساطة البنكية قد أحيلت إليه من  بنك المغرب: 2298 مغربيا قدموا شكايات ضد الأبناك خلال 2024     .', 'size': 2}, {'id': '439', 'title': '2298 شكاية من زبناء مؤسسات الائتمان خلال سنة 2024', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/2298-%d8%b4%d9%83%d8%a7%d9%8a%d8%a9-%d9%85%d9%86-%d8%b2%d8%a8%d9%86%d8%a7%d8%a1-%d9%85%d8%a4%d8%b3%d8%b3%d8%a7%d8%aa-%d8%a7%d9%84%d8%a7%d8%a6%d8%aa%d9%85%d8%a7%d9%86-%d8%ae%d9%84%d8%a7%d9%84-%d8%b3/', 'summary': '2298 شكاية من زبناء مؤسسات الائتمان خلال سنة 2024. أفاد بنك المغرب، بأن مديرية الإشراف البنكي بلغت عن توصلها بـ 2298 شكاية من زبناء مؤسسات الائتمان خلال سنة 2024، مقابل 1459 شكاية خلال السنة التي قبلها. وأوضح البنك في تقريره السنوي حول الإشراف البنكي أن ما يناهز 70 في المائة من الشكايات التي تندرج ضمن اختصاصات المركز المغربي للوساطة البنكية قد أُحيلت …  2298 شكاية من زبناء مؤسسات الائتمان خلال سنة 2024     .', 'size': 2}], 'main_title': 'بنك المغرب: 2298 مغربيا قدموا شكايات ضد الأبناك خلال 2024'}, {'community_id': '5', 'articles': [{'id': '238', 'title': 'مؤسسة محمد السادس لإعادة إدماج السجناء تدشن الأنشطة الصيفية لأبناء المفرج عنهم في قضايا التطرف', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d9%85%d8%a4%d8%b3%d8%b3%d8%a9-%d9%85%d8%ad%d9%85%d8%af-%d8%a7%d9%84%d8%b3%d8%a7%d8%af%d8%b3-%d9%84%d8%a5%d8%b9%d8%a7%d8%af%d8%a9-%d8%a5%d8%af%d9%85%d8%a7%d8%ac-%d8%a7%d9%84%d8%b3%d8%ac%d9%86%d8%a7/', 'summary': 'مؤسسة محمد السادس لإعادة إدماج السجناء تدشن الأنشطة الصيفية لأبناء المفرج عنهم في قضايا التطرف. المساء اليوم: أعطت مؤسسة محمد السادس لإعادة إدماج السجناء الانطلاقة الرسمية للموسم الجديد للأنشطة التربوية الصيفية لفائدة أبناء المفرج عنهم في قضايا التطرف والإرهاب. وأوضحت المؤسسة، في بيان لها اليوم الخميس، أن هذه المبادرة، المنظمة', 'size': 2}, {'id': '324', 'title': 'مؤسسة محمد السادس تفتح باب الاستفادة من منحة الحج لموسم 1447 هـ/2026 م', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/education/409905.html', 'summary': 'مؤسسة محمد السادس تفتح باب الاستفادة من منحة الحج لموسم 1447 هـ/2026 م. أعلنت مؤسسة محمد السادس للنهوض بالأعمال الاجتماعية للتربية والتكوين عن انطلاق عملية التسجيل للاستفادة من منحة الحج لفائدة المنخرطين المستوفين لشروط الأهلية، والراغبين في أداء', 'size': 2}], 'main_title': 'مؤسسة محمد السادس لإعادة إدماج السجناء تدشن الأنشطة الصيفية لأبناء المفرج عنهم في قضايا التطرف'}, {'community_id': '3', 'articles': [{'id': '319', 'title': 'وزارة الصحة : العرض الصحي الوطني يتعزز بإعطاء انطلاقة خدمات 200 مركز صحي حضري وقروي على مستوى ثمان جهات.', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/204001', 'summary': 'وزارة الصحة : العرض الصحي الوطني يتعزز بإعطاء انطلاقة خدمات 200 مركز صحي حضري وقروي على مستوى ثمان جهات.. الأحداث نت/ الرباط بمناسبة تخليد الذكرى الـ26 لاعتلاء صاحب الجلالة الملك محمد السادس نصره الله وأيده، عرش أسلافه المنعمين، تعزز العرض الصحي الوطني بدخول عدد مهم من المراكز الصحية حيز الخدمة، حيث أعطى وزير الصحة والحماية الاجتماعية، أمين التهراوي، يوم الجمعة 25 يوليوز 2025، بالمركز الصحي الحضري القدس بالراشيدية، بحضور والي جهة درعة تافيلالت عامل', 'size': 2}, {'id': '377', 'title': 'التهراوي يطلق خدمات 200 مركز صحي جديد لتعزيز العرض العلاجي بـ8 جهات', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1088196.html', 'summary': 'التهراوي يطلق خدمات 200 مركز صحي جديد لتعزيز العرض العلاجي بـ8 جهات. أعلن وزير الصحة والحماية الاجتماعية، أمين التهراوي، اليوم الجمعة، عن دخول 200 مركز صحي حضري وقروي، من المستويين الأول والثاني، ومستوصفات قروية، حيز الخدمة على مستوى 8 جهات بالمملكة، وذلك في إطار تخليد الذكرى الـ26 لاعتلاء الملك محمد السادس العرش. وأعطى الوزير إشارة انطلاق خدمات هذه المراكز من المركز الصحي الحضري القدس بالراشيدية، بحضور والي ظهرت المقالة التهراوي يطلق خدمات 200 مركز صحي جديد لتعزيز العرض العلاجي بـ8 جهات  .', 'size': 2}, {'id': '427', 'title': 'عيد العرش.. العرض الصحي الوطني يتعزز بإعطاء انطلاقة خدمات 200 مركز صحي حضري وقروي على مستوى 8 جهات', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/225163/', 'summary': 'عيد العرش.. العرض الصحي الوطني يتعزز بإعطاء انطلاقة خدمات 200 مركز صحي حضري وقروي على مستوى 8 جهات. الرباط – تعزز العرض الصحي الوطني بدخول عدد مهم من المراكز الصحية حيز الخدمة، وذلك بمناسبة تخليد الذكرى الـ26 لاعتلاء صاحب الجلالة الملك محمد السادس، نصره الله وأيده، عرش أسلافه المنعمين. وذكر بلاغ لوزارة الصحة والحماية الاجتماعية أن أمين التهراوي، وزير الصحة والحماية الاجتماعية، أعطى، اليوم الجمعة، بالمركز الصحي الحضري القدس بالراشيدية، بحضور والي جهة', 'size': 3}], 'main_title': 'عيد العرش.. العرض الصحي الوطني يتعزز بإعطاء انطلاقة خدمات 200 مركز صحي حضري وقروي على مستوى 8 جهات'}, {'community_id': '10', 'articles': [{'id': '330', 'title': 'رئيس الحكومة يجري مباحثات مع رئيس الجمعية الوطنية لفيتنام', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/409913.html', 'summary': 'رئيس الحكومة يجري مباحثات مع رئيس الجمعية الوطنية لفيتنام. أجرى رئيس الحكومة، عزيز أخنوش، اليوم الجمعة بالرباط، مباحثات مع رئيس الجمعية الوطنية لفيتنام، تران ثانه مان، همت سبل تعزيز التعاون بين المغرب وفيتنام. وذكر بلاغ', 'size': 2}, {'id': '346', 'title': 'بحثا سبل تعزيز التعاون الثنائي.. أخنوش يستقبل رئيس الجمعية الوطنية لفيتنام', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a8%d8%ad%d8%ab%d8%a7-%d8%b3%d8%a8%d9%84-%d8%aa%d8%b9%d8%b2%d9%8a%d8%b2-%d8%a7%d9%84%d8%aa%d8%b9%d8%a7%d9%88%d9%86-%d8%a7%d9%84%d8%ab%d9%86%d8%a7%d8%a6%d9%8a-%d8%a3%d8%ae%d9%86%d9%88%d8%b4-%d9%8a/', 'summary': 'بحثا سبل تعزيز التعاون الثنائي.. أخنوش يستقبل رئيس الجمعية الوطنية لفيتنام. أجرى رئيس الحكومة، عزيز أخنوش، يوم الجمعة (25 يوليوز) بالرباط، \u200fمباحثات مع رئيس الجمعية الوطنية لفيتنام، تران ثانه مان، تم خلالها بحث سبل تعزيز التعاون الثنائي بين المغرب وفيتنام، بقيادة قائدي البلدين جلالة الملك محمد السادس، ورئيس جمهورية فيتنام الاشتراكية، لونغ كوونغ. وأفاد بلاغ لرئاسة الحكومة أن رئيس الحكومة نوه، خلال هذه المباحثات، بعمق العلاقات', 'size': 3}, {'id': '350', 'title': 'أخنوش يستقبل رئيس الجمعية الوطنية لفيتنام بالرباط', 'source': 'assabah.ma', 'link': 'https://assabah.ma/861685.html', 'summary': 'أخنوش يستقبل رئيس الجمعية الوطنية لفيتنام بالرباط. أجرى رئيس الحكومة، عزيز أخنوش، اليوم الجمعة بالرباط، مباحثات مع تران ثانه مان، رئيس الجمعية الوطنية لفيتنام، همت سبل تعزيز علاقات التعاون الثنائي بين المملكة المغربية وجمهورية فيتنام الاشتراكية، بقيادة قائدي البلدين الملك محمد السادس، ورئيس جمهورية فيتنام، لونغ كوونغ. وأفاد بلاغ لرئاسة الحكومة، توصلت جريدة “الصباح”أكمل القراءة » المقالة أخنوش يستقبل رئيس الجمعية الوطنية لفيتنام بالرباط  .', 'size': 2}], 'main_title': 'بحثا سبل تعزيز التعاون الثنائي.. أخنوش يستقبل رئيس الجمعية الوطنية لفيتنام'}, {'community_id': '9', 'articles': [{'id': '331', 'title': 'الاتحاد الإفريقي يجدد ثقته في المغربي محمد بلعيش', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/409914.html', 'summary': 'الاتحاد الإفريقي يجدد ثقته في المغربي محمد بلعيش. أعلنت مفوضية الاتحاد الإفريقي عن إعادة تعيين السفير محمد بلعيش ممثلا خاصا لرئيس مفوضية الاتحاد الإفريقي ورئيسا لمكتب إتصال الاتحاد الإفريقي في السودان.ويأتي هذا القرار،', 'size': 2}, {'id': '409', 'title': 'إعادة تعيين المغرب ممثلا خاصا لرئيس مفوضية الاتحاد الإفريقي ورئيسا لمكتب إتصال الهيئة في السودان', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/470636.html', 'summary': 'إعادة تعيين المغرب ممثلا خاصا لرئيس مفوضية الاتحاد الإفريقي ورئيسا لمكتب إتصال الهيئة في السودان. أعلنت مفوضية الاتحاد الإفريقي عن إعادة تعيين السفير محمد بلعيش ممثلا خاصا لرئيس مفوضية الاتحاد الإفريقي ورئيسا لمكتب إتصال الاتحاد الإفريقي في السودان.', 'size': 2}], 'main_title': 'الاتحاد الإفريقي يجدد ثقته في المغربي محمد بلعيش'}, {'community_id': '1', 'articles': [{'id': '374', 'title': 'مجلس النواب يوقع اتفاقية تعاون مع الجمعية الوطنية لفيتنام', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1088221.html', 'summary': 'مجلس النواب يوقع اتفاقية تعاون مع الجمعية الوطنية لفيتنام. جرى التوقيع، اليوم الجمعة بالرباط، على اتفاقية تعاون بين مجلس النواب والجمعية الوطنية لجمهورية فيتنام الاشتراكية، بهدف تعزيز العلاقات البرلمانية وتوطيد روابط الصداقة والتعاون المتعدد الأوجه بين المؤسستين التشريعيتين. ووفقا لمقتضيات هذه الاتفاقية، التي وقعها كل من رئيس مجلس النواب، راشيد الطالبي العلمي، ورئيس الجمعية الوطنية لجمهورية فيتنام الاشتراكية، تران تان مان، يلتزم الطرفان بالارتقاء ظهرت المقالة مجلس النواب يوقع اتفاقية تعاون مع الجمعية الوطنية لفيتنام  .', 'size': 2}, {'id': '403', 'title': 'توقيع اتفاقية تعاون بين مجلس النواب والجمعية الوطنية لجمهورية فيتنام', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/470655.html', 'summary': 'توقيع اتفاقية تعاون بين مجلس النواب والجمعية الوطنية لجمهورية فيتنام. جرى التوقيع، اليوم الجمعة بالرباط، على اتفاقية تعاون بين مجلس النواب والجمعية الوطنية لجمهورية فيتنام الاشتراكية، بهدف تعزيز العلاقات البرلمانية وتوطيد روابط الصداقة والتعاون المتعدد الأوجه بين المؤسستين التشريعيتين. ووفقا لمقتضيات هذه الاتفاقية، التي وقعها كل من رئيس مجلس النواب، راشيد الطالبي العلمي، ورئيس الجمعية الوطنية لجمهورية فيتنام الاشتراكية، تران تان مان، يلتزم الطرفان بالارتقاء …', 'size': 2}], 'main_title': 'مجلس النواب يوقع اتفاقية تعاون مع الجمعية الوطنية لفيتنام'}, {'community_id': '2', 'articles': [{'id': '383', 'title': 'كأس إفريقيا للأمم.. فيلدا: المنتخب المغربي واثق من قدرته على التتويج باللقب', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d9%83%d8%a3%d8%b3-%d8%a5%d9%81%d8%b1%d9%8a%d9%82%d9%8a%d8%a7-%d9%84%d9%84%d8%a3%d9%85%d9%85-%d9%81%d9%8a%d9%84%d8%af%d8%a7-%d8%a7%d9%84%d9%85%d9%86%d8%aa%d8%ae%d8%a8-%d8%a7%d9%84%d9%85%d8%ba%d8%b1/', 'summary': 'كأس إفريقيا للأمم.. فيلدا: المنتخب المغربي واثق من قدرته على التتويج باللقب. قال مدرب المنتخب الوطني المغربي لكرة القدم للسيدات، خورخي فيلدا رودريغيز، اليوم الجمعة بالرباط، إن "اللاعبات المغربيات واثقات من قدراتهن على التتويج باللقب القاري" عندما يواجهن، غدا السبت، المنتخب النيجيري لحساب نهائي كأس إفريقيا للأمم. وأوضح فيلدا، في المؤتمر الصحافي، الذي يسبق مباراة النهائي، التي ستقام على أرضية الملعب الأولمبي بالرباط (الساعة التاسعة ليلا)، أنه  كأس إفريقيا للأمم.. فيلدا: المنتخب المغربي واثق من قدرته على التتويج باللقب     .', 'size': 2}, {'id': '398', 'title': 'فيلدا : لبؤات الأطلس عازمات وواثقات من قدراتهن على التتويج أمام نيجيريا', 'source': 'rue20.com', 'link': 'https://rue20.com/923655.html', 'summary': 'فيلدا : لبؤات الأطلس عازمات وواثقات من قدراتهن على التتويج أمام نيجيريا. . الرباط قال مدرب المنتخب الوطني المغربي لكرة القدم للسيدات، خورخي فيلدا رودريغيز، اليوم الجمعة بالرباط، إن “اللاعبات المغربيات واثقات من قدراتهن على التتويج باللقب القاري” عندما يواجهن، غدا السبت، المنتخب النيجيري لحساب نهائي كأس إفريقيا للأمم. وأوضح السيد فيلدا، في المؤتمر الصحافي، الذي يسبق مباراة النهائي، التي ستقام على أرضية الملعب الأولمبي بالرباط الخبر فيلدا : لبؤات الأطلس عازمات وواثقات من قدراتهن على التتويج أمام نيجيريا  .', 'size': 2}], 'main_title': 'كأس إفريقيا للأمم.. فيلدا: المنتخب المغربي واثق من قدرته على التتويج باللقب'}, {'community_id': '6', 'articles': [{'id': '416', 'title': 'المدير العام للوكالة الدولية للطاقة الذرية يشيد بالمغرب', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d8%a7%d9%84%d9%85%d8%af%d9%8a%d8%b1-%d8%a7%d9%84%d8%b9%d8%a7%d9%85-%d9%84%d9%84%d9%88%d9%83%d8%a7%d9%84%d8%a9-%d8%a7%d9%84%d8%af%d9%88%d9%84%d9%8a%d8%a9-%d9%84%d9%84%d8%b7%d8%a7%d9%82%d8%a9-%d8%a7/', 'summary': 'المدير العام للوكالة الدولية للطاقة الذرية يشيد بالمغرب. أكد المدير العام للوكالة الدولية للطاقة الذرية، رافائيل ماريانو غروسي، أن المغرب، بفضل الإصلاحات المتعددة التي باشرها، تحت قيادة صاحب الجلالة الملك محمد السادس،  المدير العام للوكالة الدولية للطاقة الذرية يشيد بالمغرب     .', 'size': 3}, {'id': '429', 'title': 'المدير العام للوكالة الدولية للطاقة الذرية: المغرب، بقيادة صاحب الجلالة، مدافع قوي عن التعاون جنوب-جنوب', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/225157/', 'summary': 'المدير العام للوكالة الدولية للطاقة الذرية: المغرب، بقيادة صاحب الجلالة، مدافع قوي عن التعاون جنوب-جنوب. أكد المدير العام للوكالة الدولية للطاقة الذرية، رافائيل ماريانو غروسي، أن المغرب، بفضل الإصلاحات المتعددة التي باشرها، تحت قيادة صاحب الجلالة الملك محمد السادس، كان دائما مدافعا قويا عن التعاون جنوب-جنوب، واستطاع الارتقاء إلى بلد مقدم للخبرة ومعزز للتضامن العلمي، وكذا إلى “شريك مرجعي” للوكالة. وأشاد السيد غروسي، في حديث خص به وكالة المغرب العربي', 'size': 3}, {'id': '435', 'title': 'غروسي: المغرب بقيادة الملك محمد السادس نموذج عالمي في التعاون العلمي وشريك استراتيجي للوكالة الذرية', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%ba%d8%b1%d9%88%d8%b3%d9%8a-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d8%a8%d9%82%d9%8a%d8%a7%d8%af%d8%a9-%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%85%d8%ad%d9%85%d8%af-%d8%a7%d9%84%d8%b3%d8%a7%d8%af%d8%b3/', 'summary': 'غروسي: المغرب بقيادة الملك محمد السادس نموذج عالمي في التعاون العلمي وشريك استراتيجي للوكالة الذرية. أكد المدير العام للوكالة الدولية للطاقة الذرية، رافائيل ماريانو غروسي، أن المغرب، بفضل الإصلاحات المتعددة التي باشرها، تحت قيادة الملك محمد السادس، كان دائما مدافعا قويا عن التعاون جنوب-جنوب، واستطاع الارتقاء إلى بلد مقدم للخبرة ومعزز للتضامن العلمي، وكذا إلى “شريك مرجعي” للوكالة. وأشاد غروسي، في حديث خص به وكالة المغرب العربي للأنباء، …  غروسي: المغرب بقيادة الملك محمد السادس نموذج عالمي في التعاون العلمي وشريك استراتيجي للوكالة الذرية     .', 'size': 3}], 'main_title': 'المدير العام للوكالة الدولية للطاقة الذرية يشيد بالمغرب'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    