<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 18/06/2025 - 12h26</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '2', 'articles': [{'id': '32', 'title': 'قطر تجدد أمام لجنة الـ24 دعمها لمخطط الحكم الذاتي بالصحراء المغربية', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-632721.html', 'summary': 'قطر تجدد أمام لجنة الـ24 دعمها لمخطط الحكم الذاتي بالصحراء المغربية. هبة بريس جددت دولة قطر، أمام لجنة الـ24 التابعة للأمم المتحدة، تأكيد دعمها ل مخطط الحكم الذاتي الذي قدمه المغرب من أجل التوصل إلى تسوية نهائية للنزاع الإقليمي حول الصحراء. وخلال الدورة العادية لاجتماع لجنة الـ24، الذي يتواصل بنيويورك إلى غاية 20 يونيو الجاري، أبرز ممثل قطر أن هذه المبادرة “البناءة” تشكل الأساس لأي حل واقعي لقضية الصحراء المغربية. من جانب آخر، عبر الدبلوماسي عن دعم بلاده للجهود التي يبذلها الأمين العام للأمم المتحدة ومبعوثه الشخصي، الرامية إلى تيسير التوصل لحل سياسي دائم وقائم على التوافق في إطار العملية السياسية الجارية تحت إشراف الأمم المتحدة، وفقا لقرارات مجلس الأمن ذات الصلة، بما في ذلك القرار رقم 2756، وفي احترام لسيادة المغرب.', 'size': 2}, {'id': '185', 'title': 'قطر ودول مجلس التعاون الخليجي يجددون بالأمم المتحدة دعمهم الكامل لوحدة المغرب الترابية', 'source': 'rue20.com', 'link': 'https://rue20.com/913681.html', 'summary': 'قطر ودول مجلس التعاون الخليجي يجددون بالأمم المتحدة دعمهم الكامل لوحدة المغرب الترابية. . الرباط جددت دولة قطر، أمام لجنة الـ24 التابعة للأمم المتحدة، تأكيد دعمها لمخطط الحكم الذاتي الذي قدمه المغرب من أجل التوصل إلى تسوية نهائية للنزاع الإقليمي حول الصحراء. وخلال الدورة العادية لاجتماع لجنة الـ24، الذي يتواصل بنيويورك إلى غاية 20 يونيو الجاري، أبرز ممثل قطر أن هذه المبادرة “البناءة” تشكل الأساس لأي حل الخبر قطر ودول مجلس التعاون الخليجي يجددون بالأمم المتحدة دعمهم الكامل لوحدة المغرب الترابية  .', 'size': 3}, {'id': '194', 'title': 'وصفته بـ”المبادرة البناءة”.. قطر تجدد تأكيد دعمها للمخطط المغربي للحكم الذاتي', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/466751.html', 'summary': 'وصفته بـ”المبادرة البناءة”.. قطر تجدد تأكيد دعمها للمخطط المغربي للحكم الذاتي. متابعة جددت دولة قطر، أمام لجنة الـ24 التابعة للأمم المتحدة، تأكيد دعمها لمخطط الحكم الذاتي الذي قدمه المغرب من أجل التوصل إلى تسوية نهائية للنزاع الإقليمي حول الصحراء. وخلال الدورة العادية لاجتماع لجنة الـ24، الذي يتواصل بنيويورك إلى غاية 20 يونيو الجاري، أبرز ممثل قطر أن هذه المبادرة “البناءة” تشكل الأساس لأي حل واقعي لقضية …', 'size': 3}, {'id': '228', 'title': 'قطر تجدد تأكيد دعمها للمخطط المغربي للحكم الذاتي', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/223014/', 'summary': 'قطر تجدد تأكيد دعمها للمخطط المغربي للحكم الذاتي. وكالات جددت دولة قطر، أمام لجنة الـ24 التابعة للأمم المتحدة، تأكيد دعمها لمخطط الحكم الذاتي الذي قدمه المغرب من أجل التوصل إلى تسوية نهائية للنزاع الإقليمي حول الصحراء. وخلال الدورة العادية لاجتماع لجنة الـ24، الذي يتواصل بنيويورك إلى غاية 20 يونيو الجاري، أبرز ممثل قطر أن هذه المبادرة “البناءة” تشكل الأساس لأي حل واقعي', 'size': 5}, {'id': '243', 'title': 'قطر تجدد دعمها للمخطط المغربي للحكم الذاتي', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d9%82%d8%b7%d8%b1-%d8%aa%d8%ac%d8%af%d8%af-%d8%af%d8%b9%d9%85%d9%87%d8%a7-%d9%84%d9%84%d9%85%d8%ae%d8%b7%d8%b7-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8%d9%8a-%d9%84%d9%84%d8%ad%d9%83%d9%85-%d8%a7%d9%84/', 'summary': 'قطر تجدد دعمها للمخطط المغربي للحكم الذاتي. جددت دولة قطر، أمام لجنة الـ24 التابعة للأمم المتحدة، تأكيد دعمها لمخطط الحكم الذاتي الذي قدمه المغرب من أجل التوصل إلى تسوية نهائية للنزاع الإقليمي حول الصحراء المغربية. وخلال الدورة العادية لاجتماع لجنة الـ24، الذي يتواصل بنيويورك إلى غاية 20 يونيو الجاري، أبرز ممثل قطر أن هذه المبادرة “البناءة” تشكل الأساس لأي حل …  قطر تجدد دعمها للمخطط المغربي للحكم الذاتي     .', 'size': 2}], 'main_title': 'قطر تجدد تأكيد دعمها للمخطط المغربي للحكم الذاتي'}, {'community_id': '8', 'articles': [{'id': '69', 'title': 'الرباط: توقيع عقد اتفاق لطبع 3 آلاف نسخة من المصحف الشريف بطريقة“برايل”موجهة للمكفوفين وطنيا وقاريا', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/202213', 'summary': 'الرباط: توقيع عقد اتفاق لطبع 3 آلاف نسخة من المصحف الشريف بطريقة“برايل”موجهة للمكفوفين وطنيا وقاريا. الأحداث من الرباط تم، اليوم الثلاثاء بالرباط، التوقيع على عقد اتفاق بين المنظمة العلوية لرعاية المكفوفين بالمغرب ومؤسسة محمد السادس لنشر المصحف الشريف من أجل طبع 3 آلاف نسخة من المصحف المحمدي الشريف بطريقة “برايل” موجهة للمكفوفين وطنيا وقاريا. وذكر بلاغ مشترك أن هذا الاتفاق،الذي جرى بحضور مسؤولي المؤسستين،يأتي في إطار الجهود المستمرة من أجل', 'size': 4}, {'id': '148', 'title': 'المغرب يتجه لطبع 3 آلاف مصحف بطريقة برايل لفائدة المكفوفين', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/315807/', 'summary': 'المغرب يتجه لطبع 3 آلاف مصحف بطريقة برايل لفائدة المكفوفين. تم، اليوم الثلاثاء بالرباط، التوقيع على عقد اتفاق بين المنظمة العلوية لرعاية المكفوفين بالمغرب ومؤسسة محمد السادس لنشر المصحف الشريف من أجل طبع 3 آلاف نسخة من المصحف المحمدي الشريف بطريقة “برايل” موجهة للمكفوفين وطنيا وقاريا. وذكر بلاغ مشترك أن هذا الاتفاق، الذي جرى بحضور مسؤولي المؤسستين، يأتي في إطار الجهود المستمرة من أجل تمكين', 'size': 3}, {'id': '217', 'title': 'اتفاق لطبع 3000 نسخة من المصحف الشريف بطريقة “برايل” موجهة للمكفوفين وطنيا وقاريا', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d8%a7%d8%aa%d9%81%d8%a7%d9%82-%d9%84%d8%b7%d8%a8%d8%b9-3000-%d9%86%d8%b3%d8%ae%d8%a9-%d9%85%d9%86-%d8%a7%d9%84%d9%85%d8%b5%d8%ad%d9%81-%d8%a7%d9%84%d8%b4%d8%b1%d9%8a%d9%81-%d8%a8%d8%b7%d8%b1%d9%8a/', 'summary': 'اتفاق لطبع 3000 نسخة من المصحف الشريف بطريقة “برايل” موجهة للمكفوفين وطنيا وقاريا.  – و م ع تم، اليوم الثلاثاء بالرباط، التوقيع على عقد اتفاق بين المنظمة العلوية لرعاية المكفوفين بالمغرب ومؤسسة محمد السادس لنشر المصحف الشريف من أجل طبع 3...  اتفاق لطبع 3000 نسخة من المصحف الشريف بطريقة “برايل” موجهة للمكفوفين وطنيا وقاريا     .', 'size': 3}, {'id': '432', 'title': 'طبع 3 آلاف نسخة من المصحف بطريقة “برايل” موجهة للمكفوفين', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%b7%d8%a8%d8%b9-3-%d8%a2%d9%84%d8%a7%d9%81-%d9%86%d8%b3%d8%ae%d8%a9-%d9%85%d9%86-%d8%a7%d9%84%d9%85%d8%b5%d8%ad%d9%81-%d8%a8%d8%b7%d8%b1%d9%8a%d9%82%d8%a9-%d8%a8%d8%b1%d8%a7%d9%8a%d9%84-%d9%85/', 'summary': 'طبع 3 آلاف نسخة من المصحف بطريقة “برايل” موجهة للمكفوفين. المساء اليوم – الرباط: جرى أمس الثلاثاء بالرباط، التوقيع على عقد اتفاق بين المنظمة العلوية لرعاية المكفوفين بالمغرب ومؤسسة محمد السادس لنشر المصحف الشريف من أجل طبع 3 آلاف نسخة من المصحف المحمدي الشريف بطريقة', 'size': 4}], 'main_title': 'الرباط: توقيع عقد اتفاق لطبع 3 آلاف نسخة من المصحف الشريف بطريقة“برايل”موجهة للمكفوفين وطنيا وقاريا'}, {'community_id': '3', 'articles': [{'id': '70', 'title': 'عزيز أخنوش: الاقتصاد الاجتماعي والتضامني يضطلع بدور بارز في تقوية النسيج الاقتصادي الوطني', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/202207', 'summary': 'عزيز أخنوش: الاقتصاد الاجتماعي والتضامني يضطلع بدور بارز في تقوية النسيج الاقتصادي الوطني.  أكد رئيس الحكومة، عزيز أخنوش، اليوم الثلاثاء ببنجرير، أن الاقتصاد الاجتماعي والتضامني يضطلع بدور بارز في تقوية النسيج الاقتصادي الوطني، وإسهامه كدعامة أساسية لتحقيق تنمية شاملة ومستدامة، تضمن العدالة المجالية والاجتماعية. وأوضح السيد أخنوش، في كلمة خلال افتتاح أشغال الدورة الخامسة للمناظرة الوطنية للاقتصاد الاجتماعي والتضامني، أن « صاحب الجلالة الملك محمد السادس ما', 'size': 2}, {'id': '99', 'title': 'أخنوش: الاقتصاد الاجتماعي والتضامني يضطلع بدور بارز في تقوية النسيج الاقتصادي الوطني', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/economy/407724.html', 'summary': 'أخنوش: الاقتصاد الاجتماعي والتضامني يضطلع بدور بارز في تقوية النسيج الاقتصادي الوطني. أكد رئيس الحكومة، عزيز أخنوش، اليوم الثلاثاء ببنجرير، أن الاقتصاد الاجتماعي والتضامني يضطلع بدور بارز في تقوية النسيج الاقتصادي الوطني، وإسهامه كدعامة أساسية لتحقيق تنمية', 'size': 2}], 'main_title': 'عزيز أخنوش: الاقتصاد الاجتماعي والتضامني يضطلع بدور بارز في تقوية النسيج الاقتصادي الوطني'}, {'community_id': '7', 'articles': [{'id': '113', 'title': 'كوثر بودراجة بخير وعلى قيد الحياة.. شائعة وفاتها تثير جدلًا واسعًا وردود فعل غاضبة', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/culture/407740.html', 'summary': 'كوثر بودراجة بخير وعلى قيد الحياة.. شائعة وفاتها تثير جدلًا واسعًا وردود فعل غاضبة. ضجّت منصات التواصل الاجتماعي مساء اليوم الثلاثاء بخبر كاذب عن وفاة الإعلامية المغربية كوثر بودراجة، ما أثار موجة من القلق والحزن وسط متابعيها ورواد الإعلام،', 'size': 3}, {'id': '147', 'title': 'كوثر بودراجة ضحية إشاعة قاتلة.. وعائلتها تتوعد بملاحقة مروجي الأكاذيب', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/315810/', 'summary': 'كوثر بودراجة ضحية إشاعة قاتلة.. وعائلتها تتوعد بملاحقة مروجي الأكاذيب. في ظل حالة من القلق التي أثارتها إشاعات متداولة عبر منصات التواصل الاجتماعي، خرجت عائلة الإعلامية المغربية كوثر بودراجة عن صمتها لتكذيب ما راج مؤخراً حول وفاتها، مؤكدة أن ما يتم ترويجه لا أساس له من الصحة، وأن الإعلامية لا تزال على قيد الحياة، وتخضع حالياً لعلاج طبي دقيق بإحدى المصحات الخاصة بعد وعكة صحية', 'size': 3}, {'id': '195', 'title': 'هذه حقيقة وفاة الإعلامية كوثر بودراجة', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/466740.html', 'summary': 'هذه حقيقة وفاة الإعلامية كوثر بودراجة. بعد انتشار خبر وفاة كوثر بودراجة، أكدت مصادر متطابقة مساء اليوم الثلاثاء، أن الإعلامية الشهيرة ما زالت على قيد الحياة. وارتبط اسم بودراجة بعدد من البرامج الناجحة في الإذاعة والتلفزيون، كما شكلت نموذجا للإعلامية المثقفة. وبصمت بودراجة والتي تعاني من مرض عضال، على مسار مهني حافل بالاجتهاد والتألق، منذ بداياتها على الشاشة إلى آخر ظهور …', 'size': 3}], 'main_title': 'كوثر بودراجة بخير وعلى قيد الحياة.. شائعة وفاتها تثير جدلًا واسعًا وردود فعل غاضبة'}, {'community_id': '0', 'articles': [{'id': '127', 'title': '“عملية مرحبا 2025″.. إسبانيا تشيد بـ”التنسيق النموذجي” مع المغرب', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%b9%d9%85%d9%84%d9%8a%d8%a9-%d9%85%d8%b1%d8%ad%d8%a8%d8%a7-2025-%d8%a5%d8%b3%d8%a8%d8%a7%d9%86%d9%8a%d8%a7-%d8%aa%d8%b4%d9%8a%d8%af-%d8%a8%d9%80%d8%a7%d9%84%d8%aa%d9%86%d8%b3%d9%8a%d9%82/', 'summary': '“عملية مرحبا 2025″.. إسبانيا تشيد بـ”التنسيق النموذجي” مع المغرب. أشادت المديرة العامة للحماية المدنية الإسبانية، فيرجينيا باركونيس، اليوم الثلاثاء (17 يونيو)، بـ”التنسيق النموذجي” القائم مع المغرب في إطار عملية مرحبا 2025. وأكدت المسؤولة الإسبانية، في تصريحات صحفية، على مستوى التعاون بين المؤسسات المعنية في البلدين في سياق هذه العملية، مشيرة إلى أن الأيام الأولى مرت في ظروف عادية ووفق ما كان متوقعا. كما أعربت', 'size': 2}, {'id': '184', 'title': 'إسبانيا تشيد بالتنسيق النموذجي مع المغربي لتنظيم عملية مرحبا 2025', 'source': 'rue20.com', 'link': 'https://rue20.com/913678.html', 'summary': 'إسبانيا تشيد بالتنسيق النموذجي مع المغربي لتنظيم عملية مرحبا 2025. . مالقا أشادت المديرة العامة للحماية المدنية الإسبانية، فيرجينيا باركونيس، اليوم الثلاثاء، بـ”التنسيق النموذجي” القائم مع المغرب في إطار عملية مرحبا 2025. وأكدت المسؤولة الإسبانية، في تصريحات صحفية، على مستوى التعاون بين المؤسسات المعنية في البلدين في سياق هذه العملية، مشيرة إلى أن الأيام الأولى مرت في ظروف عادية ووفق ما كان متوقعا. كما الخبر إسبانيا تشيد بالتنسيق النموذجي مع المغربي لتنظيم عملية مرحبا 2025  .', 'size': 2}], 'main_title': '“عملية مرحبا 2025″.. إسبانيا تشيد بـ”التنسيق النموذجي” مع المغرب'}, {'community_id': '5', 'articles': [{'id': '146', 'title': 'لقجع: وكالة الدعم الاجتماعي تهدف لإرساء مبادئ الشفافية في صرف الدعم', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/315820/', 'summary': 'لقجع: وكالة الدعم الاجتماعي تهدف لإرساء مبادئ الشفافية في صرف الدعم. قال فوزي لقجع الوزير المنتدب المكلف بالميزانية، إن تعميم الدعم الاجتماعي المباشر ليس مجرد إجراء ظرفي، بل هو مكون من مكونات إصلاح اجتماعي متكامل، يروم ترسيخ العدالة الاجتماعية، وحماية كرامة المواطن المغربي، في إطار مشروع ملكي طموح. وأوضح الوزير، خلال جلسة تشريعية بمجلس المستشارين، أن الحكومة انتقلت من منطق الوثائق الإدارية التقليدية، إلى مقاربة حديثة', 'size': 2}, {'id': '383', 'title': 'لقجع: إصلاح الصفقات العمومية خيار سياسي لتحديث الإدارة المغربية وتكريس شفافية المؤسسات', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1078593.html', 'summary': 'لقجع: إصلاح الصفقات العمومية خيار سياسي لتحديث الإدارة المغربية وتكريس شفافية المؤسسات. أكد الوزير المنتدب لدى وزير الاقتصاد والمالية المكلف بالميزانية، فوزي لقجع، أن التشريعات المؤطرة للصفقات العمومية تخضع اليوم لدينامية متسارعة، تمليها التحولات المتلاحقة التي يعرفها المحيط الاقتصادي، وكذا التطور المستمر للمؤسسات المتدخلة في هذا المجال الحيوي. و قال القجع أن الوضع أضحى يفرض تعزيز الجهود التشريعية والمؤسساتية لمواكبة الواقع المتجدد للمقاولة المغربية، وتأهيل منظومة الصفقات ظهرت المقالة لقجع: إصلاح الصفقات العمومية خيار سياسي لتحديث الإدارة المغربية وتكريس شفافية المؤسسات  .', 'size': 2}], 'main_title': 'لقجع: وكالة الدعم الاجتماعي تهدف لإرساء مبادئ الشفافية في صرف الدعم'}, {'community_id': '4', 'articles': [{'id': '180', 'title': 'لقجع: وكالة " الدعم المباشر" تعمل بعيدا عن أي إكراهات من أجل إيصال الدعم لمستحقيه', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d9%84%d9%82%d8%ac%d8%b9-%d9%88%d9%83%d8%a7%d9%84%d8%a9-%d8%a7%d9%84%d8%af%d8%b9%d9%85-%d8%a7%d9%84%d9%85%d8%a8%d8%a7%d8%b4%d8%b1-%d8%aa%d8%b9%d9%85%d9%84-%d8%a8%d8%b9%d9%8a%d8%af%d8%a7-%d8%b9/', 'summary': 'لقجع: وكالة " الدعم المباشر" تعمل بعيدا عن أي إكراهات من أجل إيصال الدعم لمستحقيه. قال فوزي لقجع، الوزير المنتدب المكلف بالميزانية، اليوم بمجلس المستشارين، إن الوكالة الوطنية للدعم الاجتماعي كمؤسسة عمومية استراتيجية ومستقلة، تعمل وفق مبادئ الشفافية والحياد التام، وبعيدا عن أي إكراهات مهما كان شكلها أو لونها من أجل إيصال الدعم إلى مستحقيه. وأوضح لقجع، في معرض جوابه على سؤال شفوي حول "حكامة تدبير برنامج الدعم الاجتماعي المباشر"  لقجع: وكالة " الدعم المباشر" تعمل بعيدا عن أي إكراهات من أجل إيصال الدعم لمستحقيه     .', 'size': 2}, {'id': '323', 'title': 'لقجع يؤكد على دور الوكالة الوطنية للدعم الاجتماعي في ضمان شفافية وعدالة توزيع الدعم المباشر', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/economy/407769.html', 'summary': 'لقجع يؤكد على دور الوكالة الوطنية للدعم الاجتماعي في ضمان شفافية وعدالة توزيع الدعم المباشر. في مداخلة له بمجلس المستشارين، أبرز فوزي لقجع، الوزير المنتدب المكلف بالميزانية، الأهمية الاستراتيجية لورش الدعم الاجتماعي المباشر، الذي اعتبره جزءًا من إصلاح اجتماعي شامل', 'size': 2}], 'main_title': 'لقجع: وكالة " الدعم المباشر" تعمل بعيدا عن أي إكراهات من أجل إيصال الدعم لمستحقيه'}, {'community_id': '1', 'articles': [{'id': '192', 'title': 'رئيس برلمان المجموعة الاقتصادية والنقدية لوسط إفريقيا يجدد دعم البلدان الأعضاء لمغربية الصحراء', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/466753.html', 'summary': 'رئيس برلمان المجموعة الاقتصادية والنقدية لوسط إفريقيا يجدد دعم البلدان الأعضاء لمغربية الصحراء. متابعة جدد رئيس برلمان المجموعة الاقتصادية والنقدية لوسط إفريقيا، إيفاريست نغامانا، اليوم الثلاثاء بالرباط، الموقف الثابت للبلدان الأعضاء الداعم لمغربية الصحراء. وأكد نغامانا، خلال مباحثاته مع رئيس مجلس المستشارين، محمد ولد الرشيد، أن “بلدان إفريقيا الوسطى، ولا سيما الكاميرون، وجمهورية إفريقيا الوسطى، والكونغو، والغابون، وغينيا الاستوائية، والتشاد، تجدد التأكيد على دعمها لسيادة المغرب على كافة …', 'size': 2}, {'id': '244', 'title': 'رئيس برلمان المجموعة الاقتصادية والنقدية لوسط إفريقيا يجدّد الموقف الثابت للبلدان الأعضاء الداعم لمغربية الصحراء', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%b1%d8%a6%d9%8a%d8%b3-%d8%a8%d8%b1%d9%84%d9%85%d8%a7%d9%86-%d8%a7%d9%84%d9%85%d8%ac%d9%85%d9%88%d8%b9%d8%a9-%d8%a7%d9%84%d8%a7%d9%82%d8%aa%d8%b5%d8%a7%d8%af%d9%8a%d8%a9-%d9%88%d8%a7%d9%84%d9%86-2/', 'summary': 'رئيس برلمان المجموعة الاقتصادية والنقدية لوسط إفريقيا يجدّد الموقف الثابت للبلدان الأعضاء الداعم لمغربية الصحراء. جدّد رئيس برلمان المجموعة الاقتصادية والنقدية لوسط إفريقيا، إيفاريست نغامانا، اليوم الثلاثاء بالرباط، الموقف الثابت للبلدان الأعضاء الداعم لمغربية الصحراء. وشدّد نغامانا، خلال مباحثاته مع رئيس مجلس المستشارين، محمد ولد الرشيد، أن “بلدان إفريقيا الوسطى، ولا سيما الكاميرون، وجمهورية إفريقيا الوسطى، والكونغو، والغابون، وغينيا الاستوائية، وتشاد، تجدد التأكيد على دعمها لسيادة المغرب على …  رئيس برلمان المجموعة الاقتصادية والنقدية لوسط إفريقيا يجدّد الموقف الثابت للبلدان الأعضاء الداعم لمغربية الصحراء     .', 'size': 2}], 'main_title': 'رئيس برلمان المجموعة الاقتصادية والنقدية لوسط إفريقيا يجدد دعم البلدان الأعضاء لمغربية الصحراء'}, {'community_id': '9', 'articles': [{'id': '207', 'title': 'الملك محمد السادس يزور فرنسا.. و”فرانس بريس” تكشف الموعد', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%85%d8%ad%d9%85%d8%af-%d8%a7%d9%84%d8%b3%d8%a7%d8%af%d8%b3-%d9%8a%d8%b2%d9%88%d8%b1-%d9%81%d8%b1%d9%86%d8%b3%d8%a7-%d9%88%d9%81%d8%b1%d8%a7%d9%86%d8%b3-%d8%a8/', 'summary': 'الملك محمد السادس يزور فرنسا.. و”فرانس بريس” تكشف الموعد.  – متابعات توقعت وكالة الأنباء الفرنسية (أ.ف.ب) أن يقوم الملك محمد السادس بزيارة رسمية إلى فرنسا في نهاية سنة 2025 أو بداية عام 2026، وذلك في سياق دينامية...  الملك محمد السادس يزور فرنسا.. و”فرانس بريس” تكشف الموعد     .', 'size': 2}, {'id': '435', 'title': 'زيارة مرتقبة للملك محمد السادس إلى فرنسا نهاية العام', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%b2%d9%8a%d8%a7%d8%b1%d8%a9-%d9%85%d8%b1%d8%aa%d9%82%d8%a8%d8%a9-%d9%84%d9%84%d9%85%d9%84%d9%83-%d9%85%d8%ad%d9%85%d8%af-%d8%a7%d9%84%d8%b3%d8%a7%d8%af%d8%b3-%d8%a5%d9%84%d9%89-%d9%81%d8%b1%d9%86/', 'summary': 'زيارة مرتقبة للملك محمد السادس إلى فرنسا نهاية العام. المساء اليوم – متابعات: كشفت مصادر دبلوماسية مغربية أنه من المتوقع أن يزور الملك محمد السادس فرنسا في نهاية العام الجاري 2025 أو في بداية العام المقبل 2026، يأتي ذلك بعد ما تأجلت هذه الزيارة', 'size': 2}], 'main_title': 'الملك محمد السادس يزور فرنسا.. و”فرانس بريس” تكشف الموعد'}, {'community_id': '6', 'articles': [{'id': '370', 'title': 'طقس الأربعاء.. زخات رعدية ورياح قوية بهذه المناطق', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-575685.html', 'summary': 'طقس الأربعاء.. زخات رعدية ورياح قوية بهذه المناطق. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الأربعاء، أن تتميز الحالة الجوية عامة، بطقس حار بكل من السهول الداخلية الشمالية والوسطى والجنوب الشرقي وداخل الأقاليم الجنوبية للبلاد. كما سيلاحظ تمركز خلايا رعدية مرفوقة بقطرات مطرية أو بزخات وبرد مع هبوب رياح قوية تحت الرعد فوق كل من مرتفعات الأطلس وسفوح الأطلس الكبير', 'size': 3}, {'id': '394', 'title': 'استمرار الطقس الحار اليوم الأربعاء', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a7%d8%b3%d8%aa%d9%85%d8%b1%d8%a7%d8%b1-%d8%a7%d9%84%d8%b7%d9%82%d8%b3-%d8%a7%d9%84%d8%ad%d8%a7%d8%b1-%d8%a7%d9%84%d9%8a%d9%88%d9%85-%d8%a7%d9%84%d8%a3%d8%b1%d8%a8%d8%b9%d8%a7%d8%a1-2/', 'summary': 'استمرار الطقس الحار اليوم الأربعاء. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الأربعاء، أن تتميز الحالة الجوية عامة، بطقس حار بكل من السهول الداخلية الشمالية والوسطى والجنوب الشرقي وداخل الأقاليم الجنوبية للبلاد. كما سيلاحظ تمركز خلايا رعدية مرفوقة بقطرات مطرية أو بزخات وبرد مع هبوب رياح قوية تحت الرعد فوق كل من مرتفعات الأطلس وسفوح الأطلس الكبير وولماس وشمال السايس  استمرار الطقس الحار اليوم الأربعاء     .', 'size': 4}, {'id': '395', 'title': 'توقعات أحوال الطقس لليوم الأربعاء', 'source': 'soltana.ma', 'link': 'https://soltana.ma/1357440.html', 'summary': 'توقعات أحوال الطقس لليوم الأربعاء. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليومه الأربعاء، أن تتميز الحالة الجوية عامة، بطقس حار بكل من السهول الداخلية الشمالية والوسطى والجنوب الشرقي وداخل الأقاليم الجنوبية للبلاد. كما سيلاحظ تمركز خلايا رعدية مرفوقة بقطرات مطرية أو بزخات وبرد مع هبوب رياح قوية تحت الرعد فوق كل من مرتفعات الأطلس وسفوح الأطلس الكبير وولماس وشمال السايس', 'size': 5}, {'id': '426', 'title': 'طقس الأربعاء.. حار مع قطرات مطرية رعدية في بعض المناطق', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/223053/', 'summary': 'طقس الأربعاء.. حار مع قطرات مطرية رعدية في بعض المناطق. كواليس اليوم تتوقع المديرية العامة للأرصاد الجوية، اليوم الأربعاء، أن تتميز الحالة الجوية عامة، بطقس حار بكل من السهول الداخلية الشمالية والوسطى والجنوب الشرقي وداخل الأقاليم الجنوبية للبلاد. كما سيلاحظ تمركز خلايا رعدية مرفوقة بقطرات مطرية أو بزخات وبرد مع هبوب رياح قوية تحت الرعد فوق كل من مرتفعات الأطلس وسفوح الأطلس الكبير وولماس', 'size': 5}, {'id': '444', 'title': 'توقعات أحوال الطقس اليوم الأربعاء', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%aa%d9%88%d9%82%d8%b9%d8%a7%d8%aa-%d8%a3%d8%ad%d9%88%d8%a7%d9%84-%d8%a7%d9%84%d8%b7%d9%82%d8%b3-%d8%a7%d9%84%d9%8a%d9%88%d9%85-%d8%a7%d9%84%d8%a3%d8%b1%d8%a8%d8%b9%d8%a7%d8%a1-24/', 'summary': 'توقعات أحوال الطقس اليوم الأربعاء. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليومه الأربعاء، أن تتميز الحالة الجوية عامة، بطقس حار بكل من السهول الداخلية الشمالية والوسطى والجنوب الشرقي وداخل الأقاليم الجنوبية للبلاد. كما سيلاحظ تمركز خلايا رعدية مرفوقة بقطرات مطرية أو بزخات وبرد مع هبوب رياح قوية تحت الرعد فوق كل من مرتفعات الأطلس وسفوح الأطلس الكبير وولماس …  توقعات أحوال الطقس اليوم الأربعاء     .', 'size': 4}], 'main_title': 'توقعات أحوال الطقس لليوم الأربعاء'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    