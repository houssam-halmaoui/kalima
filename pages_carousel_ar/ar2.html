<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 25/06/2025 - 12h26</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '57', 'title': 'بوريطة يستقبل المبعوث الخاص لرئيس مالاوي حاملا رسالة إلى الملك', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-634370.html', 'summary': 'بوريطة يستقبل المبعوث الخاص لرئيس مالاوي حاملا رسالة إلى الملك. هبة بريس استقبل وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج، ناصر بوريطة، اليوم الثلاثاء بالرباط، وزير الشؤون الخارجية والتعاون الدولي الملاوي السابق، إيزنهاور ندوا مكاكا. وسلم الوزير الملاوي نظيره المغربي رسالة إلى صاحب الجلالة الملك محمد السادس، نصره الله، من رئيس جمهورية مالاوي، فخامة السيد لازاروس شاكويرا.', 'size': 2}, {'id': '67', 'title': 'بوريطة يتسلم رسالة من الرئيس المالاوي إلى الملك محمد السادس', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/202465', 'summary': 'بوريطة يتسلم رسالة من الرئيس المالاوي إلى الملك محمد السادس.  استقبل وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج، ناصر بوريطة، اليوم الثلاثاء بالرباط، وزير الشؤون الخارجية والتعاون الدولي الملاوي السابق، إيزنهاور ندوا مكاكا، حاملا رسالة إلى الملك محمد السادس، من رئيس جمهورية مالاوي، لازاروس شاكويرا. وجدد ندوا مكاكا، خلال ندوة صحفية عقب هذا اللقاء، التأكيد على دعم جمهورية مالاوي القوي لسيادة المغرب على', 'size': 3}, {'id': '94', 'title': 'بوريطة يستقبل المبعوث الخاص لرئيس مالاوي حاملا رسالة إلى الملك محمد السادس', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/politic/408129.html', 'summary': 'بوريطة يستقبل المبعوث الخاص لرئيس مالاوي حاملا رسالة إلى الملك محمد السادس. استقبل وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج، السيد ناصر بوريطة، اليوم الثلاثاء بالرباط، وزير الشؤون الخارجية والتعاون الدولي الملاوي السابق، إيزنهاور ندوا مكاكا،', 'size': 3}, {'id': '184', 'title': 'حاملاً رسالة إلى الملك.. مباحثات تجمع بوريطة ووزير خارجية مالاوي', 'source': 'rue20.com', 'link': 'https://rue20.com/915563.html', 'summary': 'حاملاً رسالة إلى الملك.. مباحثات تجمع بوريطة ووزير خارجية مالاوي.  | الرباط استقبل وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج، ناصر بوريطة، اليوم الثلاثاء بالرباط، وزير الشؤون الخارجية والتعاون الدولي الملاوي السابق، إيزنهاور ندوا مكاكا، حاملا رسالة إلى صاحب الجلالة الملك محمد السادس، من رئيس جمهورية مالاوي، لازاروس شاكويرا. الخبر حاملاً رسالة إلى الملك.. مباحثات تجمع بوريطة ووزير خارجية مالاوي  .', 'size': 4}], 'main_title': 'حاملاً رسالة إلى الملك.. مباحثات تجمع بوريطة ووزير خارجية مالاوي'}, {'community_id': '1', 'articles': [{'id': '62', 'title': 'التوقيع على مخطط عمل مشترك بين مصالح الأمن الوطني بالمغرب والمديرية العامة للشرطة الوطنية بالجمهورية الفرنسية', 'source': 'www.alakhbar.press.ma', 'link': 'https://www.alakhbar.press.ma/%d8%a7%d9%84%d8%aa%d9%88%d9%82%d9%8a%d8%b9-%d8%b9%d9%84%d9%89-%d9%85%d8%ae%d8%b7%d8%b7-%d8%b9%d9%85%d9%84-%d9%85%d8%b4%d8%aa%d8%b1%d9%83-%d8%a8%d9%8a%d9%86-%d9%85%d8%b5%d8%a7%d9%84%d8%ad-%d8%a7%d9%84-267697.html', 'summary': 'التوقيع على مخطط عمل مشترك بين مصالح الأمن الوطني بالمغرب والمديرية العامة للشرطة الوطنية بالجمهورية الفرنسية. وقع المدير العام للأمن الوطني ولمراقبة التراب الوطني، عبد اللطيف حموشي، اليوم الثلاثاء، بالرباط، ونظيره الفرنسي السيد لوي لوجيي، المدير العام للشرطة الوطنية الفرنسية، على مخطط عمل مشترك بين مصالح الأمن الوطني بالمغرب والمديرية العامة للشرطة الوطنية بالجمهورية الفرنسية. وأوضح بلاغ لقطب المديرية العامة للأمن الوطني والمديرية العامة لمراقبة التراب الوطني، أن هذا المخطط، الذي …  التوقيع على مخطط عمل مشترك بين مصالح الأمن الوطني بالمغرب والمديرية العامة للشرطة الوطنية بالجمهورية الفرنسية     .', 'size': 5}, {'id': '92', 'title': 'مخطط عمل مشترك بين مصالح الأمن الوطني بالمغرب والمديرية العامة للشرطة الفرنسية', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/408127.html', 'summary': 'مخطط عمل مشترك بين مصالح الأمن الوطني بالمغرب والمديرية العامة للشرطة الفرنسية. وقع المدير العام للأمن الوطني ولمراقبة التراب الوطني، عبد اللطيف حموشي، اليوم الثلاثاء، بالرباط، ونظيره الفرنسي السيد لوي لوجيي، المدير العام للشرطة الوطنية الفرنسية، على', 'size': 5}, {'id': '197', 'title': 'التوقيع على مخطط عمل مشترك بين مصالح الأمن الوطني بالمغرب ومديرية الشرطة الفرنسية', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/467434.html', 'summary': 'التوقيع على مخطط عمل مشترك بين مصالح الأمن الوطني بالمغرب ومديرية الشرطة الفرنسية. وقع المدير العام للأمن الوطني ولمراقبة التراب الوطني، عبد اللطيف حموشي، اليوم الثلاثاء، بالرباط، ونظيره الفرنسي لوي لوجيي، المدير العام للشرطة الوطنية الفرنسية، على مخطط عمل مشترك بين مصالح الأمن الوطني بالمغرب والمديرية العامة للشرطة الوطنية بالجمهورية الفرنسية. وأوضح بلاغ لقطب المديرية العامة للأمن الوطني والمديرية العامة لمراقبة التراب الوطني، أن هذا المخطط، الذي تم …', 'size': 5}, {'id': '216', 'title': 'بلاغ لقطب المديرية العامة للأمن الوطني والمديرية العامة لمراقبة التراب الوطني', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d8%a8%d9%84%d8%a7%d8%ba-%d9%84%d9%82%d8%b7%d8%a8-%d8%a7%d9%84%d9%85%d8%af%d9%8a%d8%b1%d9%8a%d8%a9-%d8%a7%d9%84%d8%b9%d8%a7%d9%85%d8%a9-%d9%84%d9%84%d8%a3%d9%85%d9%86-%d8%a7%d9%84%d9%88%d8%b7%d9%86/', 'summary': 'بلاغ لقطب المديرية العامة للأمن الوطني والمديرية العامة لمراقبة التراب الوطني.  – و م ع وقع المدير العام للأمن الوطني ولمراقبة التراب الوطني، عبد اللطيف حموشي، اليوم الثلاثاء، بالرباط، ونظيره الفرنسي لوي لوجيي، المدير العام للشرطة الوطنية الفرنسية، على...  بلاغ لقطب المديرية العامة للأمن الوطني والمديرية العامة لمراقبة التراب الوطني     .', 'size': 4}, {'id': '228', 'title': 'الرباط.. حموشي يوقع على مخطط عمل مشترك بين مصالح الأمن الوطني المغربي والشرطة الفرنسية', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/223354/', 'summary': 'الرباط.. حموشي يوقع على مخطط عمل مشترك بين مصالح الأمن الوطني المغربي والشرطة الفرنسية. كمال عسو وقع المدير العام للأمن الوطني ولمراقبة التراب الوطني، عبد اللطيف حموشي، اليوم الثلاثاء، بالرباط، ونظيره الفرنسي لوي لوجيي، المدير العام للشرطة الوطنية الفرنسية، على مخطط عمل مشترك بين مصالح الأمن الوطني بالمغرب والمديرية العامة للشرطة الوطنية بالجمهورية الفرنسية. وأوضح بلاغ لقطب المديرية العامة للأمن الوطني والمديرية العامة لمراقبة التراب الوطني، أن هذا المخطط،', 'size': 4}], 'main_title': 'التوقيع على مخطط عمل مشترك بين مصالح الأمن الوطني بالمغرب والمديرية العامة للشرطة الوطنية بالجمهورية الفرنسية'}, {'community_id': '2', 'articles': [{'id': '83', 'title': 'ترامب غاضب من إسرائيل وإيران بعد خرق اتفاق وقف إطلاق النار', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/world/408118.html', 'summary': 'ترامب غاضب من إسرائيل وإيران بعد خرق اتفاق وقف إطلاق النار. عبّر الرئيس الأمريكي دونالد ترامب، صباح اليوم الثلاثاء، عن غضبه الشديد تجاه كل من إسرائيل وإيران، بسبب خرق اتفاق وقف إطلاق النار الذي سبق أن', 'size': 2}, {'id': '253', 'title': '"حرب الـ12 يوما" انتهت.. ترامب يطالب إسرائيل وإيران بالالتزام باتفاق وقف إطلاق النار', 'source': 'www.alalam.ma', 'link': 'https://www.alalam.ma/حرب-الـ12-يوما-انتهت-ترامب-يطالب-إسرائيل-وإيران-بالالتزام-باتفاق_a28426.html', 'summary': '"حرب الـ12 يوما" انتهت.. ترامب يطالب إسرائيل وإيران بالالتزام باتفاق وقف إطلاق النار. طلب الرئيس الأمريكي دونالد ترامب التزام إسرائيل وإيران باتفاق وقف إطلاق النار راجيا عدم خرقه، وقال في تصريحات منفضلة إن هذا الاتفاق سيدوم إلى الأبد ووصف النزاع بـ"حرب الـ12 يوما". ...', 'size': 2}], 'main_title': 'ترامب غاضب من إسرائيل وإيران بعد خرق اتفاق وقف إطلاق النار'}, {'community_id': '3', 'articles': [{'id': '86', 'title': 'قرار هام من بنك المغرب بخصوص سعر الفائدة المعتمد', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/economy/408121.html', 'summary': 'قرار هام من بنك المغرب بخصوص سعر الفائدة المعتمد. قرر مجلس بنك المغرب، المنعقد اليوم الثلاثاء بالرباط، الإبقاء على سعر الفائدة الرئيسي دون تغيير في 2,25 في المائة. وذكر بلاغ لبنك المغرب بشأن الاجتماع الفصلي', 'size': 2}, {'id': '195', 'title': 'بنك المغرب يقرر الإبقاء على سعر الفائدة الرئيسي', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/467437.html', 'summary': 'بنك المغرب يقرر الإبقاء على سعر الفائدة الرئيسي. قرر مجلس بنك المغرب، المنعقد اليوم الثلاثاء بالرباط، الإبقاء على سعر الفائدة الرئيسي دون تغيير في 2,25 في المائة. وذكر بلاغ لبنك المغرب بشأن الاجتماع الفصلي الثاني لمجلسه برسم سنة 2025، أنه “أخذا بالاعتبار تطور التضخم في مستويات تتماشى مع هدف استقرار الأسعار على المدى المتوسط، والتسارع الملموس للنمو غير الفلاحي، وتثبيت التوقعات، قرر المجلس، بالنظر إلى الشكوك …', 'size': 2}], 'main_title': 'قرار هام من بنك المغرب بخصوص سعر الفائدة المعتمد'}, {'community_id': '4', 'articles': [{'id': '115', 'title': 'بيان حقيقة لولاية أمن تطوان بخصوص فيديو منشور على يوتيوب', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/408151.html', 'summary': 'بيان حقيقة لولاية أمن تطوان بخصوص فيديو منشور على يوتيوب. اطلعت ولاية أمن تطوان على شريط فيديو منشور على موقع التواصل الاجتماعي يوتيوب، استضاف فيه صاحب إحدى الصفحات شخصا كان في وضعية خلاف مع القانون', 'size': 2}, {'id': '125', 'title': 'تضمن “تصريحات وتعليقات غير صحيحة ومشوبة بتحريف”.. ولاية أمن تطوان تتفاعل مع فيديو منشور على مواقع التواصل الاجتماعي', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%aa%d8%b6%d9%85%d9%86-%d8%aa%d8%b5%d8%b1%d9%8a%d8%ad%d8%a7%d8%aa-%d9%88%d8%aa%d8%b9%d9%84%d9%8a%d9%82%d8%a7%d8%aa-%d8%ba%d9%8a%d8%b1-%d8%b5%d8%ad%d9%8a%d8%ad%d8%a9-%d9%88%d9%85%d8%b4%d9%88%d8%a8/', 'summary': 'تضمن “تصريحات وتعليقات غير صحيحة ومشوبة بتحريف”.. ولاية أمن تطوان تتفاعل مع فيديو منشور على مواقع التواصل الاجتماعي. أعلنت ولاية أمن تطوان أنها اطلعت على شريط فيديو منشور على موقع التواصل الاجتماعي يوتيوب، استضاف فيه صاحب إحدى الصفحات شخصا كان في وضعية خلاف مع القانون وخضع لإجراءات البحث التمهيدي، وهو الشريط الذي تضمن تصريحات وتعليقات غير صحيحة ومشوبة بتحريف وقائع قانونية مضمنة في إجراءات مسطرية. وجاء في بيان حقيقة أصدرته ولاية أمن تطوان،', 'size': 4}, {'id': '220', 'title': 'تطوان.. الأمن يوضح حقيقة فيديو لشخص كان في وضعية خلاف مع القانون', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/223387/', 'summary': 'تطوان.. الأمن يوضح حقيقة فيديو لشخص كان في وضعية خلاف مع القانون. كمال عسو ذكرت ولاية أمن تطوان، بأنها اطلعت على شريط فيديو منشور على موقع التواصل الاجتماعي يوتيوب، استضاف فيه صاحب إحدى الصفحات شخصا كان في وضعية خلاف مع القانون وخضع لإجراءات البحث التمهيدي، وهو الشريط الذي تضمن تصريحات وتعليقات غير صحيحة ومشوبة بتحريف وقائع قانونية مضمنة في إجراءات مسطرية. وأوضحت ولاية الأمن، أنه تنويرا', 'size': 2}, {'id': '240', 'title': 'ولاية أمن تطوان تكذب مزاعم فيديو منشور على “يوتيوب”', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d9%88%d9%84%d8%a7%d9%8a%d8%a9-%d8%a3%d9%85%d9%86-%d8%aa%d8%b7%d9%88%d8%a7%d9%86-%d8%aa%d9%83%d8%b0%d8%a8-%d9%85%d8%b2%d8%a7%d8%b9%d9%85-%d9%81%d9%8a%d8%af%d9%8a%d9%88-%d9%85%d9%86%d8%b4%d9%88%d8%b1/', 'summary': 'ولاية أمن تطوان تكذب مزاعم فيديو منشور على “يوتيوب”. أفادت ولاية أمن تطوان أنها اطلعت على شريط فيديو منشور على موقع التواصل الاجتماعي يوتيوب، استضاف فيه صاحب إحدى الصفحات شخصا كان في وضعية خلاف مع القانون وخضع لإجراءات البحث التمهيدي، وهو الشريط الذي تضمن تصريحات وتعليقات غير صحيحة ومشوبة بتحريف وقائع قانونية مضمنة في إجراءات مسطرية. وفي بيان حقيقة صادر اليوم الثلاثاء، …  ولاية أمن تطوان تكذب مزاعم فيديو منشور على “يوتيوب”     .', 'size': 2}], 'main_title': 'تضمن “تصريحات وتعليقات غير صحيحة ومشوبة بتحريف”.. ولاية أمن تطوان تتفاعل مع فيديو منشور على مواقع التواصل الاجتماعي'}, {'community_id': '5', 'articles': [{'id': '126', 'title': 'بنعلي: المغرب بلغ مرحلة مفصلية في تاريخه الطاقي', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a8%d9%86%d8%b9%d9%84%d9%8a-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d8%a8%d9%84%d8%ba-%d9%85%d8%b1%d8%ad%d9%84%d8%a9-%d9%85%d9%81%d8%b5%d9%84%d9%8a%d8%a9-%d9%81%d9%8a-%d8%aa%d8%a7%d8%b1%d9%8a%d8%ae/', 'summary': 'بنعلي: المغرب بلغ مرحلة مفصلية في تاريخه الطاقي. أكدت ليلى بنعلي، وزيرة الانتقال الطاقي والتنمية المستدامة، أن المغرب بلغ مرحلة مفصلية في تاريخه الطاقي، مبرزة أن تطوير البنية التحتية للغاز الطبيعي أصبح خيارا استراتيجيا ضمن رؤية المملكة لتعزيز سيادتها الطاقية وتحقيق انتقال طاقي مستدام. وأوضحت الوزيرة، خلال جوابها على سؤال شفوي بمجلس المستشارين، اليوم الثلاثاء (24 يونيو)، أن الغاز الطبيعي يمثل مكونا أساسيا', 'size': 2}, {'id': '145', 'title': 'بنعلي: حلول مبتكرة أوصلت الكهرباء لـ1000 أسرة متضررة من الزلزال', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/316476/', 'summary': 'بنعلي: حلول مبتكرة أوصلت الكهرباء لـ1000 أسرة متضررة من الزلزال. أفادت ليلى بنعلي، وزيرة الانتقال الطاقي والتنمية المستدامة، أن المغرب حقق خلال السنوات الثلاث الأخيرة قفزة نوعية في مشاريع الطاقات المتجددة، مكنته من رفع نسبة مساهمة هذه الطاقات في المزيج الكهربائي الوطني من 37% سنة 2021 إلى أزيد من 45% سنة 2025، مع هدف بلوغ هذه النسبة بشكل نهائي سنة 2026، أي أربع سنوات قبل', 'size': 2}], 'main_title': 'بنعلي: المغرب بلغ مرحلة مفصلية في تاريخه الطاقي'}, {'community_id': '6', 'articles': [{'id': '173', 'title': 'جامعة الكرة تحدد موعد وملعب نهائي كأس العرش', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%ac%d8%a7%d9%85%d8%b9%d8%a9-%d8%a7%d9%84%d9%83%d8%b1%d8%a9-%d8%aa%d8%ad%d8%af%d8%af-%d9%85%d9%88%d8%b9%d8%af-%d9%88%d9%85%d9%84%d8%b9%d8%a8-%d9%86%d9%87%d8%a7%d8%a6%d9%8a-%d9%83%d8%a3%d8%b3-%d8%a7/', 'summary': 'جامعة الكرة تحدد موعد وملعب نهائي كأس العرش. أعلنت الجامعة الملكية المغربية لكرة القدم، عن موعد مباراة نهائي كأس العرش 2023-2024، الذي سيجمع بين نادي نهضة بركان وأولمبيك آسفي. ووفق بلاغ للجامعة الملكية، فإن النهائي المرتقب بين النهضة الرياضية البركانية وأولمبيك أسفي، سيجرى يوم الأحد 29 يونيو2025 بالمركب الرياضي بفاس. وتمكن نهضة بركان من التأهل للمباراة النهائي، بعد فوزه أمام المغرب التطواني بـ  جامعة الكرة تحدد موعد وملعب نهائي كأس العرش     .', 'size': 2}, {'id': '183', 'title': 'مركب فاس يحتضن نهائي كأس العرش بين نهضة بركان وألمبيك آسفي', 'source': 'rue20.com', 'link': 'https://rue20.com/915571.html', 'summary': 'مركب فاس يحتضن نهائي كأس العرش بين نهضة بركان وألمبيك آسفي. زنقة20| علي التومي أعلنت الجامعة الملكية المغربية لكرة القدم، اليوم الإثنين 24 يونيو 2025، عن موعد إجراء المباراة النهائية لكأس العرش برسم الموسم الكروي 2023-2024. وسيجمع النهائي المرتقب بين فريقي النهضة الرياضية البركانية وأولمبيك آسفي، وذلك يوم الأحد 29 يونيو 2025، على أرضية المركب الرياضي بفاس. ويُرتقب أن يشهد هذا اللقاء حضورا جماهيريا كبيرا بالنظر الخبر مركب فاس يحتضن نهائي كأس العرش بين نهضة بركان وألمبيك آسفي  .', 'size': 2}], 'main_title': 'جامعة الكرة تحدد موعد وملعب نهائي كأس العرش'}, {'community_id': '7', 'articles': [{'id': '176', 'title': 'قطاع السياحة يجني 34 مليار درهم منذ بداية هذا العام', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d9%82%d8%b7%d8%a7%d8%b9-%d8%a7%d9%84%d8%b3%d9%8a%d8%a7%d8%ad%d8%a9-%d9%8a%d8%ac%d9%86%d9%8a-34-%d9%85%d9%84%d9%8a%d8%a7%d8%b1-%d8%af%d8%b1%d9%87%d9%85-%d8%ae%d9%84%d8%a7%d9%84-5-%d8%b4%d9%87%d9%88/', 'summary': 'قطاع السياحة يجني 34 مليار درهم منذ بداية هذا العام. كشفت وزيرة السياحة والصناعة والتقليدية والاقتصاد الاجتماعي والتضامني، فاطمة الزهراء عمور، اليوم الثلاثاء بمجلس المستشارين، بأن القطاع السياحي حقق خلال الأشهر الخمسة الأولى من السنة الجارية عائدات تقدر بـ 34 مليار درهم من العملة الصعبة، بزيادة بلغت 8 في المائة مقارنة بنفس الفترة من سنة 2024. وذكرت السيدة عمور، في معرض جوابها على سؤال شفوي  قطاع السياحة يجني 34 مليار درهم منذ بداية هذا العام     .', 'size': 2}, {'id': '359', 'title': 'الحكومة تعلن نجاح برنامج “فرصة” في تمويل المشاريع وإحداث مناصب الشغل', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1080403.html', 'summary': 'الحكومة تعلن نجاح برنامج “فرصة” في تمويل المشاريع وإحداث مناصب الشغل. أكدت وزيرة السياحة والصناعة التقليدية والاقتصاد الاجتماعي والتضامني، فاطمة الزهراء عمور، نجاح برنامج “فرصة” في إحداث حوالي 37 ألف منصب شغل جديد وتمويل 21 ألف و200 حامل مشروع، وذلك خلال جلسة للأسئلة الشفوية بمجلس المستشارين، المنعقدة يوم الثلاثاء 24 يونيو 2025. جاء ذلك في معرض ردها على سؤال تقدم به الفريق الاشتراكي – المعارضة الاتحادية، ظهرت المقالة الحكومة تعلن نجاح برنامج “فرصة” في تمويل المشاريع وإحداث مناصب الشغل  .', 'size': 2}], 'main_title': 'قطاع السياحة يجني 34 مليار درهم منذ بداية هذا العام'}, {'community_id': '8', 'articles': [{'id': '302', 'title': 'فرنسا والمغرب تربطهما علاقة “عريقة وعميقة” تخطو بثبات نحو المستقبل', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/202479', 'summary': 'فرنسا والمغرب تربطهما علاقة “عريقة وعميقة” تخطو بثبات نحو المستقبل.  أكدت الوزيرة الفرنسية المنتدبة المكلفة بالمساواة بين النساء والرجال ومكافحة التمييز، أورور بيرجي، أمس الثلاثاء بالدار البيضاء، أن فرنسا والمغرب تربطهما علاقة “عريقة، عميقة وقيمة”، من شأنها أن تتعزز بشكل أكبر في مواجهة التحديات المشتركة. وأشارت السيدة بيرجي، في كلمة خلال لقاء مع الجالية الفرنسية المقيمة بالمغرب، إلى أن زيارة الدولة التي قام بها', 'size': 3}, {'id': '386', 'title': 'وزيرة فرنسية.. باريس والرباط تجمعهما علاقة “عريقة وعميقة” تخطو بثبات نحو المستقبل', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/467447.html', 'summary': 'وزيرة فرنسية.. باريس والرباط تجمعهما علاقة “عريقة وعميقة” تخطو بثبات نحو المستقبل. أكدت الوزيرة الفرنسية المنتدبة المكلفة بالمساواة بين النساء والرجال ومكافحة التمييز، أورور بيرجي، أمس الثلاثاء بالدار البيضاء، أن فرنسا والمغرب تربطهما علاقة “عريقة، عميقة وقيمة”، من شأنها أن تتعزز بشكل أكبر في مواجهة التحديات المشتركة.', 'size': 3}, {'id': '407', 'title': 'وزيرة فرنسية: باريس والرباط تربطهما علاقة “عريقة وعميقة” تخطو بثبات نحو المستقبل', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d9%88%d8%b2%d9%8a%d8%b1%d8%a9-%d9%81%d8%b1%d9%86%d8%b3%d9%8a%d8%a9-%d8%a8%d8%a7%d8%b1%d9%8a%d8%b3-%d9%88%d8%a7%d9%84%d8%b1%d8%a8%d8%a7%d8%b7-%d8%aa%d8%b1%d8%a8%d8%b7%d9%87%d9%85%d8%a7-%d8%b9%d9%84/', 'summary': 'وزيرة فرنسية: باريس والرباط تربطهما علاقة “عريقة وعميقة” تخطو بثبات نحو المستقبل. قالت الوزيرة الفرنسية المنتدبة المكلفة بالمساواة بين النساء والرجال ومكافحة التمييز، أورور بيرجي، أمس الثلاثاء بالدار البيضاء، إن فرنسا والمغرب تربطهما علاقة “عريقة، عميقة وقيمة”، من شأنها أن تتعزز بشكل أكبر في مواجهة التحديات المشتركة. وسجلت بيرجي، في كلمة خلال لقاء مع الجالية الفرنسية المقيمة بالمغرب، أن زيارة الدولة التي قام بها الرئيس …  وزيرة فرنسية: باريس والرباط تربطهما علاقة “عريقة وعميقة” تخطو بثبات نحو المستقبل     .', 'size': 3}], 'main_title': 'فرنسا والمغرب تربطهما علاقة “عريقة وعميقة” تخطو بثبات نحو المستقبل'}, {'community_id': '9', 'articles': [{'id': '322', 'title': 'وفاة موقوف بطنجة بعد ابتلاعه كيساً مشتبهاً أثناء تدخل أمني', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/society/408178.html', 'summary': 'وفاة موقوف بطنجة بعد ابتلاعه كيساً مشتبهاً أثناء تدخل أمني. فتحت المصلحة الولائية للشرطة القضائية بمدينة طنجة بحثا قضائيا تحت إشراف النيابة العامة بمحكمة الاستئناف بنفس المدينة، مساء أمس الثلاثاء 24 يونيو الجاري، وذلك لتحديد', 'size': 2}, {'id': '338', 'title': 'أمن طنجة يحقق في ظروف وفاة شخص من ذوي السوابق القضائية', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/316532/', 'summary': 'أمن طنجة يحقق في ظروف وفاة شخص من ذوي السوابق القضائية. فتحت المصلحة الولائية للشرطة القضائية بمدينة طنجة بحثا قضائيا تحت إشراف النيابة العامة بمحكمة الاستئناف بنفس المدينة، مساء أمس الثلاثاء 24 يونيو الجاري، وذلك لتحديد ظروف وملابسات وفاة شخص من ذوي السوابق القضائية، حاول مقاومة إجراءات الضبط الأمني وقام بابتلاع كيس بلاستيكي يضم جرعات من مسحوق مادة كيميائية يشتبه في كونها مخدرة. وحسب المعلومات', 'size': 2}, {'id': '361', 'title': 'تحقيق في مصرع شخص بعد ابتلاعه كيس مخدرات محاولا الفرار من الشرطة', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%aa%d8%ad%d9%82%d9%8a%d9%82-%d9%81%d9%8a-%d9%85%d8%b5%d8%b1%d8%b9-%d8%b4%d8%ae%d8%b5-%d8%a8%d8%b9%d8%af-%d8%a7%d8%a8%d8%aa%d9%84%d8%a7%d8%b9%d9%87-%d9%83%d9%8a%d8%b3-%d9%85%d8%ae%d8%af%d8%b1%d8%a7/', 'summary': 'تحقيق في مصرع شخص بعد ابتلاعه كيس مخدرات محاولا الفرار من الشرطة. فتحت المصلحة الولائية للشرطة القضائية بمدينة طنجة بحثا قضائيا تحت إشراف النيابة العامة بمحكمة الاستئناف بنفس المدينة، مساء أمس الثلاثاء، وذلك لتحديد ظروف وملابسات وفاة شخص من ذوي السوابق القضائية، حاول مقاومة إجراءات الضبط الأمني وقام بابتلاع كيس بلاستيكي يضم جرعات من مسحوق مادة كيميائية يشتبه في كونها مخدرة. وحسب المعلومات الأولية للبحث،  تحقيق في مصرع شخص بعد ابتلاعه كيس مخدرات محاولا الفرار من الشرطة     .', 'size': 3}, {'id': '406', 'title': 'وفاة مشتبه فيه بطنجة بعد ابتلاعه مادة مشبوهة أثناء محاولة توقيفه.. والنيابة العامة تدخل على الخط', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d9%88%d9%81%d8%a7%d8%a9-%d9%85%d8%b4%d8%aa%d8%a8%d9%87-%d9%81%d9%8a%d9%87-%d8%a8%d8%b7%d9%86%d8%ac%d8%a9-%d8%a8%d8%b9%d8%af-%d8%a7%d8%a8%d8%aa%d9%84%d8%a7%d8%b9%d9%87-%d9%85%d8%a7%d8%af%d8%a9-%d9%85/', 'summary': 'وفاة مشتبه فيه بطنجة بعد ابتلاعه مادة مشبوهة أثناء محاولة توقيفه.. والنيابة العامة تدخل على الخط. فتحت المصلحة الولائية للشرطة القضائية بمدينة طنجة بحثا قضائيا تحت إشراف النيابة العامة بمحكمة الاستئناف بنفس المدينة، مساء أمس الثلاثاء، وذلك لتحديد ظروف وملابسات وفاة شخص من ذوي السوابق القضائية، حاول مقاومة إجراءات الضبط الأمني وقام بابتلاع كيس بلاستيكي يضم جرعات من مسحوق مادة كيميائية يشتبه في كونها مخدرة. وكشفت مصادر أمنية، أنه …  وفاة مشتبه فيه بطنجة بعد ابتلاعه مادة مشبوهة أثناء محاولة توقيفه.. والنيابة العامة تدخل على الخط     .', 'size': 3}], 'main_title': 'تحقيق في مصرع شخص بعد ابتلاعه كيس مخدرات محاولا الفرار من الشرطة'}, {'community_id': '10', 'articles': [{'id': '366', 'title': 'حالة الطقس: ارتفاع في درجة الحرارة مع زخات رعدية', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%ad%d8%a7%d9%84%d8%a9-%d8%a7%d9%84%d8%b7%d9%82%d8%b3-%d8%a7%d8%b1%d8%aa%d9%81%d8%a7%d8%b9-%d9%81%d9%8a-%d8%af%d8%b1%d8%ac%d8%a9-%d8%a7%d9%84%d8%ad%d8%b1%d8%a7%d8%b1%d8%a9-%d9%85%d8%b9-%d8%b2%d8%ae/', 'summary': 'حالة الطقس: ارتفاع في درجة الحرارة مع زخات رعدية. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الأربعاء، ارتفاعا في درجة الحرارة مع طقس حار في الجنوب الشرقي وداخل الأقاليم الجنوبية، وطقس نسبيا حار بالمنطقة الشرقية والسهول الداخلية الشمالية والوسطى. كما سيلاحظ نمو خلايا رعدية مرفوقة بقطرات مطرية أو بزخات فوق كل من مرتفعات الأطلس المتوسط و الكبير والهضاب الشرقية. وستكون السماء قليلة السحب إلى  حالة الطقس: ارتفاع في درجة الحرارة مع زخات رعدية     .', 'size': 3}, {'id': '399', 'title': 'طقس الأربعاء.. حار نسبيا مع خلايا رعدية في بعض المناطق', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/223391/', 'summary': 'طقس الأربعاء.. حار نسبيا مع خلايا رعدية في بعض المناطق. كواليس اليوم تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الأربعاء، ارتفاعا في درجة الحرارة مع طقس حار في الجنوب الشرقي وداخل الأقاليم الجنوبية، وطقس نسبيا حار بالمنطقة الشرقية والسهول الداخلية الشمالية والوسطى. كما سيلاحظ نمو خلايا رعدية مرفوقة بقطرات مطرية أو بزخات فوق كل من مرتفعات الأطلس المتوسط و الكبير والهضاب الشرقية. وستكون السماء', 'size': 3}, {'id': '414', 'title': 'توقعات أحوال الطقس اليوم الأربعاء', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%aa%d9%88%d9%82%d8%b9%d8%a7%d8%aa-%d8%a3%d8%ad%d9%88%d8%a7%d9%84-%d8%a7%d9%84%d8%b7%d9%82%d8%b3-%d8%a7%d9%84%d9%8a%d9%88%d9%85-%d8%a7%d9%84%d8%a3%d8%b1%d8%a8%d8%b9%d8%a7%d8%a1-25/', 'summary': 'توقعات أحوال الطقس اليوم الأربعاء. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليومه الأربعاء، ارتفاعا في درجة الحرارة مع طقس حار في الجنوب الشرقي وداخل الأقاليم الجنوبية، وطقس نسبيا حار بالمنطقة الشرقية والسهول الداخلية الشمالية والوسطى. كما سيلاحظ نمو خلايا رعدية مرفوقة بقطرات مطرية أو بزخات فوق كل من مرتفعات الأطلس المتوسط والكبير والهضاب الشرقية. وستكون السماء قليلة السحب …  توقعات أحوال الطقس اليوم الأربعاء     .', 'size': 3}], 'main_title': 'حالة الطقس: ارتفاع في درجة الحرارة مع زخات رعدية'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    