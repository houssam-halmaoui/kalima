<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 04/10/2025 - 18h24</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '6', 'articles': [{'id': '14', 'title': 'بنك المغرب: انخفاض سعر صرف الدرهم مقابل الأورو', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-663067.html', 'summary': 'بنك المغرب: انخفاض سعر صرف الدرهم مقابل الأورو. هبة بريس أفاد بنك المغرب بأن سعر صرف الدرهم انخفض بنسبة 0,4 في المائة مقابل الأورو وبـ 0,5 في المائة مقابل الدولار الأمريكي، وذلك خلال الفترة الممتدة من 25 شتنبر إلى فاتح أكتوبر 2025. وأوضح بنك المغرب، في نشرته الأسبوعية للمؤشرات الاقتصادية، أنه لم يتم خلال هذه الفترة إجراء أي عملية مناقصة في سوق الصرف.', 'size': 3}, {'id': '153', 'title': 'بنك المغرب يرصد ضغوطا على الدرهم وتقلبات في البورصة وسط تحولات السوق المالية', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1105258.html', 'summary': 'بنك المغرب يرصد ضغوطا على الدرهم وتقلبات في البورصة وسط تحولات السوق المالية. أكد بنك المغرب بأن سعر صرف الدرهم انخفض بنسبة 0,4 في المائة مقابل الأورو وبـ 0,5 في المائة مقابل الدولار الأمريكي، وذلك خلال الفترة الممتدة من 25 شتنبر إلى فاتح أكتوبر 2025. وأوضح بنك المغرب، في نشرته الأسبوعية للمؤشرات الاقتصادية، أنه لم يتم خلال هذه الفترة إجراء أي عملية مناقصة في سوق الصرف. وأبرز المصدر ظهرت المقالة بنك المغرب يرصد ضغوطا على الدرهم وتقلبات في البورصة وسط تحولات السوق المالية  .', 'size': 3}, {'id': '186', 'title': 'إنخفاض سعر الدرهم مقابل اليورو', 'source': 'rue20.com', 'link': 'https://rue20.com/942059.html', 'summary': 'إنخفاض سعر الدرهم مقابل اليورو. . الرباط أفاد بنك المغرب بأن سعر صرف الدرهم انخفض بنسبة 0,4 في المائة مقابل الأورو وبـ 0,5 في المائة مقابل الدولار الأمريكي، وذلك خلال الفترة الممتدة من 25 شتنبر إلى فاتح أكتوبر 2025. وأوضح بنك المغرب، في نشرته الأسبوعية للمؤشرات الاقتصادية، أنه لم يتم خلال هذه الفترة إجراء أي عملية مناقصة في سوق الخبر إنخفاض سعر الدرهم مقابل اليورو  .', 'size': 3}], 'main_title': 'بنك المغرب: انخفاض سعر صرف الدرهم مقابل الأورو'}, {'community_id': '1', 'articles': [{'id': '22', 'title': 'طقس السبت.. أجواء حارة بعدد من مناطق المملكة', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-663044.html', 'summary': 'طقس السبت.. أجواء حارة بعدد من مناطق المملكة. هبة بريس تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليوم السبت، أن تتميز الحالة الجوية العامة بطقس حار نسبيا بكل من الجنوب-الشرقي للبلاد وبأقصى جنوب الأقاليم الصحراوية. كما يرتقب تشكل كتل ضبابية أونزول أمطار خفيفة بكل من سواحل البحر الأبيض المتوسط والسهول الشمالية الوسطى للمحيط الأطلسي، وكذا بالشمال الغربي للأقاليم الصحراوية. وسيلاحظ أيضا تسجيل هبات رياح', 'size': 4}, {'id': '148', 'title': 'طقس السبت.. أمطار متفرقة ورياح قوية بهذه المناطق المغربية', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-592297.html', 'summary': 'طقس السبت.. أمطار متفرقة ورياح قوية بهذه المناطق المغربية. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليوم غد السبت، أن تتميز الحالة الجوية العامة بطقس حار نسبيا بكل من الجنوب-الشرقي للبلاد وبأقصى جنوب الأقاليم الصحراوية. كما يرتقب تشكل كتل ضبابية أو نزول أمطار خفيفة بكل من سواحل البحر الأبيض المتوسط والسهول الشمالية الوسطى للمحيط الأطلسي، وكذا بالشمال الغربي للأقاليم الصحراوية. وسيلاحظ', 'size': 4}, {'id': '180', 'title': 'أحوال الطقس: عودة درجة الحرارة إلى الارتفاع مع هطول أمطار', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a3%d8%ad%d9%88%d8%a7%d9%84-%d8%a7%d9%84%d8%b7%d9%82%d8%b3-%d8%b9%d9%88%d8%af%d8%a9-%d8%af%d8%b1%d8%ac%d8%a9-%d8%a7%d9%84%d8%ad%d8%b1%d8%a7%d8%b1%d8%a9-%d8%a5%d9%84%d9%89-%d8%a7%d9%84%d8%a7%d8%b1/', 'summary': 'أحوال الطقس: عودة درجة الحرارة إلى الارتفاع مع هطول أمطار. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لهذا اليوم، أن تتميز الحالة الجوية العامة بطقس حار نسبيا بكل من الجنوب-الشرقي للبلاد وبأقصى جنوب الأقاليم الصحراوية. كما يرتقب تشكل كتل ضبابية أونزول أمطار خفيفة بكل من سواحل البحر الأبيض المتوسط والسهول الشمالية الوسطى للمحيط الأطلسي، وكذا بالشمال الغربي للأقاليم الصحراوية. وسيلاحظ أيضا تسجيل هبات رياح قوية  أحوال الطقس: عودة درجة الحرارة إلى الارتفاع مع هطول أمطار     .', 'size': 4}, {'id': '246', 'title': 'توقعات الأرصاد الجوية لطقس اليوم السبت', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%aa%d9%88%d9%82%d8%b9%d8%a7%d8%aa-%d8%a7%d9%84%d8%a3%d8%b1%d8%b5%d8%a7%d8%af-%d8%a7%d9%84%d8%ac%d9%88%d9%8a%d8%a9-%d9%84%d8%b7%d9%82%d8%b3-%d8%a7%d9%84%d9%8a%d9%88%d9%85-%d8%a7%d9%84%d8%b3%d8%a8-2/', 'summary': 'توقعات الأرصاد الجوية لطقس اليوم السبت. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم السبت، أن تتميز الحالة الجوية العامة بطقس حار نسبيا بكل من الجنوب-الشرقي للبلاد وبأقصى جنوب الأقاليم الصحراوية. كما يرتقب تشكل كتل ضبابية أونزول أمطار خفيفة بكل من سواحل البحر الأبيض المتوسط والسهول الشمالية الوسطى للمحيط الأطلسي، وكذا بالشمال الغربي للأقاليم الصحراوية. وسيلاحظ أيضا تسجيل هبات رياح …  توقعات الأرصاد الجوية لطقس اليوم السبت     .', 'size': 4}], 'main_title': 'طقس السبت.. أجواء حارة بعدد من مناطق المملكة'}, {'community_id': '2', 'articles': [{'id': '32', 'title': 'الأمن الوطني يمنح ترقية استثنائية لشرطيين تكريماً لتضحياتهما', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-662985.html', 'summary': 'الأمن الوطني يمنح ترقية استثنائية لشرطيين تكريماً لتضحياتهما. أصدر المدير العام للأمن الوطني ولمراقبة التراب الوطني، عبد اللطيف حموشي، قراراً يقضي بمنح ترقية استثنائية لاثنين من موظفي الشرطة، أحدهما برتبة حارس أمن سابق بالمديرية العامة للأمن العمومي، والثاني مفتش شرطة ممتاز يعمل بولاية أمن فاس، وذلك تقديراً لتضحياتهما الجسيمة واعترافاً بحسهما المهني الرفيع. وأوضح بلاغ للمديرية أن الموظف الأول فارق الحياة إثر حادثة', 'size': 3}, {'id': '79', 'title': 'حموشي يمنح ترقية استثنائية لشرطيين تقديرًا لتضحياتهما المهنية', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/society/413872.html', 'summary': 'حموشي يمنح ترقية استثنائية لشرطيين تقديرًا لتضحياتهما المهنية. أصدر المدير العام للأمن الوطني ولمراقبة التراب الوطني عبد اللطيف حموشي قرارا بمنح ترقية استثنائية لاثنين من موظفي الشرطة، أحدهما برتبة حارس أمن كان يعمل', 'size': 2}, {'id': '230', 'title': 'عاجل.. السيد حموشي يمنح ترقية استثنائي لموظفي شرطة تقديرا لتضحياتهم الجسيمة', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/227990/', 'summary': 'عاجل.. السيد حموشي يمنح ترقية استثنائي لموظفي شرطة تقديرا لتضحياتهم الجسيمة. أصدر المدير العام للأمن الوطني ولمراقبة التراب الوطني عبد اللطيف حموشي قرارا بمنح ترقية استثنائية لاثنين من موظفي الشرطة، أحدهما برتبة حارس أمن كان يعمل بمديرية الأمن العمومي والثاني مفتش شرطة ممتاز يعمل بولاية أمن فاس، وذلك تقديرا لتضحياتهم الجسيمة وامتنانا لحسهم المهني العالي. وكان الموظفان المستفيدان من هذه الترقية الاستثنائية قد تعرضا لحوادث خطيرة', 'size': 2}], 'main_title': 'الأمن الوطني يمنح ترقية استثنائية لشرطيين تكريماً لتضحياتهما'}, {'community_id': '4', 'articles': [{'id': '95', 'title': 'إيداع المتورطين في أحداث التخريب وإضرام النار والسرقة بسلا السجن… والأبحاث متواصلة لتوقيف باقي المشاركين', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/society/413893.html', 'summary': 'إيداع المتورطين في أحداث التخريب وإضرام النار والسرقة بسلا السجن… والأبحاث متواصلة لتوقيف باقي المشاركين. قررت النيابة العامة لدى محكمة الاستئناف بالرباط، إحالة مجموعة من الأشخاص المتورطين في أحداث تخريب وإضرام النار والسرقة التي شهدتها مدينة سلا، على قاضي التحقيق. وبناءً', 'size': 3}, {'id': '215', 'title': 'إيداع المتورطين في أحداث التخريب والسرقة بسجن سلا', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d8%a5%d9%8a%d8%af%d8%a7%d8%b9-%d8%a7%d9%84%d9%85%d8%aa%d9%88%d8%b1%d8%b7%d9%8a%d9%86-%d9%81%d9%8a-%d8%a3%d8%ad%d8%af%d8%a7%d8%ab-%d8%a7%d9%84%d8%aa%d8%ae%d8%b1%d9%8a%d8%a8/', 'summary': 'إيداع المتورطين في أحداث التخريب والسرقة بسجن سلا. قررت النيابة العامة لدى محكمة الاستئناف بالرباط، إحالة مجموعة من الأشخاص المتورطين في أحداث تخريب وإضرام النار والسرقة التي شهدتها مجموعة أحياء  إيداع المتورطين في أحداث التخريب والسرقة بسجن سلا     .', 'size': 2}, {'id': '232', 'title': 'عاجل: قرار قاضي التحقيق في حق المتورطين في أحداث التخريب وإضرام النار والسرقة بسلا', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/227984/', 'summary': 'عاجل: قرار قاضي التحقيق في حق المتورطين في أحداث التخريب وإضرام النار والسرقة بسلا. إيداع المتورطين في أحداث التخريب وإضرام النار والسرقة بسلا السجن… والأبحاث متواصلة لتوقيف باقي المشاركين الرباط – قررت النيابة العامة لدى محكمة الاستئناف بالرباط، إحالة مجموعة من الأشخاص المتورطين في أحداث تخريب وإضرام النار والسرقة التي شهدتها مدينة سلا، على قاضي التحقيق. وبناءً على ملتمس النيابة العامة، تقرر إيداع المتهمين السجن في انتظار استكمال', 'size': 2}], 'main_title': 'إيداع المتورطين في أحداث التخريب وإضرام النار والسرقة بسلا السجن… والأبحاث متواصلة لتوقيف باقي المشاركين'}, {'community_id': '7', 'articles': [{'id': '178', 'title': 'سعيد رشيق مندوب جهوي لمؤسسة وسيط المملكة بجهة الدار البيضاء', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%b3%d8%b9%d9%8a%d8%af-%d8%b1%d8%b4%d9%8a%d9%82-%d9%85%d9%86%d8%af%d9%88%d8%a8-%d8%ac%d9%87%d9%88%d9%8a-%d9%84%d9%85%d8%a4%d8%b3%d8%b3%d8%a9-%d9%88%d8%b3%d9%8a%d8%b7-%d8%a7%d9%84%d9%85%d9%85%d9%84/', 'summary': 'سعيد رشيق مندوب جهوي لمؤسسة وسيط المملكة بجهة الدار البيضاء. جرى، اليوم الجمعة بالدار البيضاء، تنصيب سعيد رشيق مندوبا جهويا لمؤسسة وسيط المملكة بجهة الدار البيضاء سطات الذي يندرج في إطار التفعيل الكامل للقانون المحدث لهذه المؤسسة، وتحديدا تفعيل جميع صلاحيات المندوبيات الجهوية و تعزيز قدراتها وتطوير وتحديث أساليب اشتغالها. وبهذه المناسبة، أكد وسيط المملكة حسن طارق، في تصريح له، أن تنصيب المندوب الجهوي للمؤسسة يشكل  سعيد رشيق مندوب جهوي لمؤسسة وسيط المملكة بجهة الدار البيضاء     .', 'size': 2}, {'id': '237', 'title': 'تنصيب المندوب الجهوي لمؤسسة وسيط المملكة بجهة الدار البيضاء-سطات', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%aa%d9%86%d8%b5%d9%8a%d8%a8-%d8%a7%d9%84%d9%85%d9%86%d8%af%d9%88%d8%a8-%d8%a7%d9%84%d8%ac%d9%87%d9%88%d9%8a-%d9%84%d9%85%d8%a4%d8%b3%d8%b3%d8%a9-%d9%88%d8%b3%d9%8a%d8%b7-%d8%a7%d9%84%d9%85%d9%85/', 'summary': 'تنصيب المندوب الجهوي لمؤسسة وسيط المملكة بجهة الدار البيضاء-سطات. المساء اليوم – الدار البيضاء جرى بالدار البيضاء، تنصيب سعيد رشيق مندوبا جهويا لمؤسسة وسيط المملكة بجهة الدار البيضاء سطات. وقال وسيط المملكة حسن طارق، إن تنصيب المندوب الجهوي للمؤسسة يشكل فرصة للتأكيد على الأدوار', 'size': 2}], 'main_title': 'سعيد رشيق مندوب جهوي لمؤسسة وسيط المملكة بجهة الدار البيضاء'}, {'community_id': '3', 'articles': [{'id': '240', 'title': 'الإصلاحات الحقيقية.. لا علاقة لها بمخططات التخريب في الغرف المظلمة..', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%a7%d9%84%d8%a5%d8%b5%d9%84%d8%a7%d8%ad%d8%a7%d8%aa-%d8%a7%d9%84%d8%ad%d9%82%d9%8a%d9%82%d9%8a%d8%a9-%d9%84%d8%a7-%d8%b9%d9%84%d8%a7%d9%82%d8%a9-%d9%84%d9%87%d8%a7-%d8%a8%d9%85%d8%ae%d8%b7%d8%b7/', 'summary': 'الإصلاحات الحقيقية.. لا علاقة لها بمخططات التخريب في الغرف المظلمة... المساء اليوم – هيئة التحرير بعد بضعة أيام من احتجاجات بدأت سلمية لوقت قصير جدا، يبدو المشهد الآن أكثر وضوحا، أو لنقل إنه أقل غموضا. فقبل بضعة أشهر بدأت حملة حادة وممنهجة ضد المؤسسات بالمغرب،', 'size': 2}, {'id': '354', 'title': 'وزارة النقل تحسم الجدل حول قانونية نقل التطبيقات!', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-592336.html', 'summary': 'وزارة النقل تحسم الجدل حول قانونية نقل التطبيقات!. في خضم الجدل الدائر حول مستقبل النقل عبر التطبيقات الذكية بالمغرب، أعلنت وزارة النقل واللوجستيك رفضها منح تراخيص لمزاولة هذا النشاط، مؤكدة أن استعمال السيارات الخاصة في نقل الركاب يخالف القوانين الجاري بها العمل، ويعرّض أصحابه لعقوبات مالية أو حبسية. وجاء موقف الوزارة في رد رسمي وجهته إلى النقابة الديمقراطية للنقل،', 'size': 2}], 'main_title': 'الإصلاحات الحقيقية.. لا علاقة لها بمخططات التخريب في الغرف المظلمة..'}, {'community_id': '5', 'articles': [{'id': '276', 'title': 'مونديال U20 .. وهبي يستثمر لقاء المكسيك في "التدوير" وتحفيز اللاعبين', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d9%85%d9%88%d9%86%d8%af%d9%8a%d8%a7%d9%84-u20-%d9%88%d9%87%d8%a8%d9%8a-%d9%8a%d8%b3%d8%aa%d8%ab%d9%85%d8%b1-%d9%84%d9%82%d8%a7%d8%a1-%d8%a7%d9%84%d9%85%d9%83%d8%b3%d9%8a%d9%83-%d9%81%d9%8a-1634882.html', 'summary': 'مونديال U20 .. وهبي يستثمر لقاء المكسيك في "التدوير" وتحفيز اللاعبين. أكد الإطار الوطني محمد وهبي، مدرب المنتخب المغربي لكرة القدم لأقل من 20 سنة، أن تركيزه منصب على مواجهة المكسيك، ضمن الجولة الثالثة من دور مجموعات كأس العالم “تشيلي 2025″، معتبرا أنها فرصة لتجريب أسماء جديدة قبل دخول غمار الأدوار الإقصائية. وقال وهبي في تصريح للموقع الرسمي للجامعة الملكية المغربية لكرة القدم: “لحسن الحظ سنخوض  مونديال U20 .. وهبي يستثمر لقاء المكسيك في "التدوير" وتحفيز اللاعبين     - هسبريس جريدة إلكترونية مغربية .', 'size': 2}, {'id': '367', 'title': '“لا يمكننا التهاون”.. وهبي يحضر مفاجآت في تشكيلة “أقل من 20 سنة” ضد المكسيك', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1105306.html', 'summary': '“لا يمكننا التهاون”.. وهبي يحضر مفاجآت في تشكيلة “أقل من 20 سنة” ضد المكسيك. أكد الناخب الوطني محمد وهبي، مدرب المنتخب الوطني لأقل من 20 سنة، تركيزه الكامل على مواجهة المكسيك في الجولة الثالثة من دور مجموعات نهائيات كأس العالم “تشيلي 2025″، مشيرا إلى أنه سيجري مجموعة من التغييرات على مستوى اللاعبين الذين لم تتح لهم الفرصة السابقة. وقال وهبي في تصريح للموقع الرسمي للجامعة الملكية المغربية لكرة القدم: ظهرت المقالة “لا يمكننا التهاون”.. وهبي يحضر مفاجآت في تشكيلة “أقل من 20 سنة” ضد المكسيك  .', 'size': 2}], 'main_title': 'مونديال U20 .. وهبي يستثمر لقاء المكسيك في "التدوير" وتحفيز اللاعبين'}, {'community_id': '0', 'articles': [{'id': '278', 'title': 'النيابة تنفي "وفاة في أحداث مراكش"', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d8%a7%d9%84%d9%86%d9%8a%d8%a7%d8%a8%d8%a9-%d8%aa%d9%86%d9%81%d9%8a-%d9%88%d9%81%d8%a7%d8%a9-%d9%81%d9%8a-%d8%a3%d8%ad%d8%af%d8%a7%d8%ab-%d9%85%d8%b1%d8%a7%d9%83%d8%b4-1634904.html', 'summary': 'النيابة تنفي "وفاة في أحداث مراكش". نفت النيابة العامة لدى محكمة الاستئناف بمراكش صحة ما تم تداوله في بعض المنابر الإعلامية بشأن وفاة مواطن خلال الأحداث التي شهدتها منطقة سيدي يوسف بن علي بالمدينة الحمراء. وأوضح بلاغ صادر عن الوكيل العام للملك لدى محكمة الاستئناف بمراكش أن الخبر المتداول “لا أساس له من الصحة”، مشدداً على أن “الأحداث التي عرفتها المنطقة  النيابة تنفي "وفاة في أحداث مراكش"     - هسبريس جريدة إلكترونية مغربية .', 'size': 3}, {'id': '335', 'title': 'النيابة العامة بمراكش تنفي وفاة شخص خلال أحداث سيدي يوسف بن علي', 'source': 'assabah.ma', 'link': 'https://assabah.ma/874952.html', 'summary': 'النيابة العامة بمراكش تنفي وفاة شخص خلال أحداث سيدي يوسف بن علي. نفى الوكيل العام للملك لدى محكمة الاستئناف بمراكش، نفى فيه بشكل قاطع صحة الأخبار التي تداولتها بعض المنابر الإعلامية بخصوص وفاة شخص خلال الأحداث التي شهدتها منطقة سيدي يوسف بن علي بمدينة مراكش. وأكد الوكيل العام للملك لدى استئنافية مراكش، في بلاغ له توصلت “الصباح” بنسخة منه،أكمل القراءة » المقالة النيابة العامة بمراكش تنفي وفاة شخص خلال أحداث سيدي يوسف بن علي  .', 'size': 3}, {'id': '377', 'title': 'النيابة العامة بمراكش تنفي تسجيل أي وفاة خلال أحداث سيدي يوسف بن علي', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a7%d9%84%d9%86%d9%8a%d8%a7%d8%a8%d8%a9-%d8%a7%d9%84%d8%b9%d8%a7%d9%85%d8%a9-%d8%a8%d9%85%d8%b1%d8%a7%d9%83%d8%b4-%d8%aa%d9%86%d9%81%d9%8a-%d8%aa%d8%b3%d8%ac%d9%8a%d9%84-%d8%a3%d9%8a-%d9%88%d9%81/', 'summary': 'النيابة العامة بمراكش تنفي تسجيل أي وفاة خلال أحداث سيدي يوسف بن علي. نفت النيابة العامة لدى محكمة الاستئناف بمراكش، اليوم السبت، صحة الأخبار التي تحدثت عن وفاة مواطن خلال الاحتجاجات التي شهدتها منطقة سيدي يوسف بن علي، مؤكدة أن هذه المعطيات "عارية من الصحة ولا تمت للواقع بصلة". وجاء في بلاغ الوكيل العام للملك أن الأحداث التي عرفها الحي لم تسفر عن أي حالة وفاة،  النيابة العامة بمراكش تنفي تسجيل أي وفاة خلال أحداث سيدي يوسف بن علي     .', 'size': 3}], 'main_title': 'النيابة تنفي "وفاة في أحداث مراكش"'}, {'community_id': '8', 'articles': [{'id': '292', 'title': 'النيابة العامة: لا علاقة بين وفاة مواطن بمراكش بأحداث سيدي يوسف بن علي', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-663148.html', 'summary': 'النيابة العامة: لا علاقة بين وفاة مواطن بمراكش بأحداث سيدي يوسف بن علي. هبة بريس على إثر ما تم تداوله في بعض المنابر الإعلامية، استنادا إلى بلاغ صادر عن فرع الجمعية المغربية لحقوق الإنسان بالمنارة بمراكش بخصوص وفاة مواطن خلال الأحداث التي شهدتها منطقة سيدي يوسف بن علي بمدينة مراكش، يعلن الوكيل العام للملك لدى محكمة الاستئناف بمراكش أن هذا الخبر لا أساس له من الصحة. وأنهى الوكيل', 'size': 5}, {'id': '332', 'title': 'أحداث سيدي يوسف بن علي.. الوكيل العام للملك في استئنافية مراكش ينفي تسجيل أي حالة وفاة', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a3%d8%ad%d8%af%d8%a7%d8%ab-%d8%b3%d9%8a%d8%af%d9%8a-%d9%8a%d9%88%d8%b3%d9%81-%d8%a8%d9%86-%d8%b9%d9%84%d9%8a-%d8%a7%d9%84%d9%88%d9%83%d9%8a%d9%84-%d8%a7%d9%84%d8%b9%d8%a7%d9%85-%d9%84%d9%84/', 'summary': 'أحداث سيدي يوسف بن علي.. الوكيل العام للملك في استئنافية مراكش ينفي تسجيل أي حالة وفاة. نفى الوكيل العام للملك لدى محكمة الاستئناف بمراكش ما راج حول وفاة مواطن خلال الأحداث التي شهدتها منطقة سيدي يوسف بن علي. وجاء في بلاغ للوكيل العام للملك لدى محكمة الاستئناف بمراكش على إثر ما تم تداوله في بعض المنابر الإعلامية، استنادا إلى بلاغ صادر عن فرع الجمعية المغربية لحقوق الإنسان بالمنارة بمراكش بخصوص وفاة', 'size': 5}, {'id': '340', 'title': 'وفاة مواطن خلال الأحداث التي شهدتها منطقة سيدي يوسف بن علي لا أساس له من الصحة', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/325259/', 'summary': 'وفاة مواطن خلال الأحداث التي شهدتها منطقة سيدي يوسف بن علي لا أساس له من الصحة. على إثر ما تم تداوله في بعض المنابر الإعلامية، استنادا إلى بلاغ صادر عن فرع الجمعية المغربية لحقوق الإنسان بالمنارة بمراكش بخصوص وفاة مواطن خلال الأحداث التي شهدتها منطقة سيدي يوسف بن علي بمدينة مراكش، أعلن الوكيل العام للملك لدى محكمة الاستئناف بمراكش أن هذا الخبر لا أساس له من الصحة. وينهي الوكيل العام للملك', 'size': 5}, {'id': '387', 'title': 'الوكيل العام بمراكش ينفي تسجيل وفاة خلال أحداث التخريب', 'source': 'rue20.com', 'link': 'https://rue20.com/942102.html', 'summary': 'الوكيل العام بمراكش ينفي تسجيل وفاة خلال أحداث التخريب. . مراكش على إثر ما تم تداوله في بعض المنابر الإعلامية، استنادا إلى بلاغ صادر عن فرع الجمعية المغربية لحقوق الإنسان بالمنارة بمراكش بخصوص وفاة مواطن خلال الأحداث التي شهدتها منطقة سيدي يوسف بن علي بمدينة مراكش، أعلن الوكيل العام للملك لدى محكمة الاستئناف بمراكش أن هذا الخبر لا أساس له من الصحة. وينهي الخبر الوكيل العام بمراكش ينفي تسجيل وفاة خلال أحداث التخريب  .', 'size': 5}, {'id': '420', 'title': 'الوكيل العام للملك ينفي خبر وفاة مواطن في أحداث سيدي يوسف بن علي', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/228017/', 'summary': 'الوكيل العام للملك ينفي خبر وفاة مواطن في أحداث سيدي يوسف بن علي. مراكش – على إثر ما تم تداوله في بعض المنابر الإعلامية، استنادا إلى بلاغ صادر عن فرع الجمعية المغربية لحقوق الإنسان بالمنارة بمراكش بخصوص وفاة مواطن خلال الأحداث التي شهدتها منطقة سيدي يوسف بن علي بمدينة مراكش، أعلن الوكيل العام للملك لدى محكمة الاستئناف بمراكش أن هذا الخبر لا أساس له من الصحة. وينهي الوكيل', 'size': 5}], 'main_title': 'النيابة العامة: لا علاقة بين وفاة مواطن بمراكش بأحداث سيدي يوسف بن علي'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    