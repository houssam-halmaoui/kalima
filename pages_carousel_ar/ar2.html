<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 13/08/2025 - 18h27</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '3', 'articles': [{'id': '0', 'title': 'السكتيوي يطمئن المنتقدين ويؤكد جاهزية "الأسود المحلية" لمواجهة زامبيا', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d8%a7%d9%84%d8%b3%d9%83%d8%aa%d9%8a%d9%88%d9%8a-%d9%8a%d8%b7%d9%85%d8%a6%d9%86-%d8%a7%d9%84%d9%85%d9%86%d8%aa%d9%82%d8%af%d9%8a%d9%86-%d9%88%d9%8a%d8%a4%d9%83%d8%af-%d8%ac%d8%a7%d9%87%d8%b2%d9%8a-1608321.html', 'summary': 'السكتيوي يطمئن المنتقدين ويؤكد جاهزية "الأسود المحلية" لمواجهة زامبيا. أكد طارق السكتيوي، مدرب المنتخب الوطني المغربي للاعبين المحليين، أن الانتقادات التي طالت اختياراته التقنية بعد مواجهة كينيا في الجولة الثانية من دور مجموعات بطولة إفريقيا للاعبين المحليين أمر طبيعي ويتقبله الطاقم الفني، مشددا على أن بعض التفاصيل التي تغيب عن المتابعين تفرض على المدرب اتخاذ قرارات آنية تراعي مصلحة المجموعة. وأوضح السكتيوي، خلال الندوة  السكتيوي يطمئن المنتقدين ويؤكد جاهزية "الأسود المحلية" لمواجهة زامبيا     - هسبريس جريدة إلكترونية مغربية .', 'size': 2}, {'id': '335', 'title': 'السكتيوي: الانتقادات بعد مباراة كينيا طبيعية.. ومستعدون لتصحيح الأخطاء أمام زامبيا', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a7%d9%84%d8%b3%d9%83%d8%aa%d9%8a%d9%88%d9%8a-%d8%a7%d9%84%d8%a7%d9%86%d8%aa%d9%82%d8%a7%d8%af%d8%a7%d8%aa-%d8%a8%d8%b9%d8%af-%d9%85%d8%a8%d8%a7%d8%b1%d8%a7%d8%a9-%d9%83%d9%8a%d9%86%d9%8a%d8%a7/', 'summary': 'السكتيوي: الانتقادات بعد مباراة كينيا طبيعية.. ومستعدون لتصحيح الأخطاء أمام زامبيا. أكد طارق السكتيوي، مدرب المنتخب الوطني المغربي للاعبين المحليين، أن الانتقادات التي طالت اختياراته التقنية بعد مواجهة كينيا في الجولة الثانية من دور مجموعات بطولة إفريقيا للاعبين المحليين، أمر طبيعي ويتقبله الطاقم الفني، مشيراً إلى أن هناك تفاصيل خفية عن المتابعين تفرض على المدرب اتخاذ قرارات آنية تراعي مصلحة الفريق. وخلال الندوة الصحفية التي تسبق', 'size': 2}], 'main_title': 'السكتيوي يطمئن المنتقدين ويؤكد جاهزية "الأسود المحلية" لمواجهة زامبيا'}, {'community_id': '4', 'articles': [{'id': '3', 'title': 'الكاف تعاقب المنتخب المحلي المغربي', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d8%a7%d9%84%d9%83%d8%a7%d9%81-%d8%aa%d8%b9%d8%a7%d9%82%d8%a8-%d8%a7%d9%84%d9%85%d9%86%d8%aa%d8%ae%d8%a8-%d8%a7%d9%84%d9%85%d8%ad%d9%84%d9%8a-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8%d9%8a-1608288.html', 'summary': 'الكاف تعاقب المنتخب المحلي المغربي. أصدرت لجنة الانضباط بالكنفدرالية الإفريقية لكرة القدم “كاف” قرارات تأديبية جديدة مرتبطة ببطولة إفريقيا للاعبين المحليين “شان 2024″، شملت الجامعة الملكية المغربية لكرة القدم، إضافة إلى اتحاديْ كينيا وزامبيا. وأشار بلاغ للجهاز الوصي على كرة القدم بالقارة السمراء أن اللجنة قررت تغريم الجامعة الملكية المغربية للعبة ذاتها مبلغ 5 آلاف دولار، نصفها مع وقف التنفيذ،  الكاف تعاقب المنتخب المحلي المغربي     - هسبريس جريدة إلكترونية مغربية .', 'size': 2}, {'id': '125', 'title': 'في “شان 2024”.  الكاف تُصدر عقوبات تأديبية ضد الجامعة الملكية المغربية', 'source': 'kifache.com', 'link': 'https://kifache.com/%d9%81%d9%8a-%d8%b4%d8%a7%d9%86-2024-%d8%a7%d9%84%d9%83%d8%a7%d9%81-%d8%aa%d9%8f%d8%b5%d8%af%d8%b1-%d8%b9%d9%82%d9%88%d8%a8%d8%a7%d8%aa-%d8%aa%d8%a3%d8%af%d9%8a%d8%a8%d9%8a%d8%a9/', 'summary': 'في “شان 2024”. الكاف تُصدر عقوبات تأديبية ضد الجامعة الملكية المغربية. أعلنت لجنة الانضباط التابعة للكونفدرالية الإفريقية لكرة القدم “كاف” عن حزمة قرارات تأديبية جديدة مرتبطة ببطولة إفريقيا للاعبين المحليين “شان 2024”، طالت الجامعة الملكية المغربية لكرة القدم واتحادي كينيا وزامبيا. وحسب بلاغ رسمي للكاف، فقد تقرر تغريم الجامعة الملكية المغربية مبلغ 5 آلاف دولار، مع تعليق نصف الغرامة، بسبب ما وُصف بـ“سلوك غير لائق” من', 'size': 2}], 'main_title': 'الكاف تعاقب المنتخب المحلي المغربي'}, {'community_id': '2', 'articles': [{'id': '81', 'title': 'وكالة الأدوية توضح حقيقة نقص أكثر من 600 دواء مخصص لعلاج الأمراض المزمنة', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/national/410942.html', 'summary': 'وكالة الأدوية توضح حقيقة نقص أكثر من 600 دواء مخصص لعلاج الأمراض المزمنة. نفت الوكالة المغربية للأدوية والمنتجات الصحية صحة ما نشرته بعض المنابر الإعلامية بخصوص ادعاء وجود ندرة تمس أزيد من 600 دواء موجها لعلاج أمراض مزمنة. وأوضحت', 'size': 2}, {'id': '259', 'title': 'الوكالة المغربية للأدوية تخرج عن صمتها حول ندرة أزيد من 600 دواء موجه لعلاج أمراض مزمنة', 'source': 'www.alalam.ma', 'link': 'https://www.alalam.ma/الوكالة-المغربية-للأدوية-تخرج-عن-صمتها-حول-ندرة-أزيد-من-600-دواء_a29136.html', 'summary': 'الوكالة المغربية للأدوية تخرج عن صمتها حول ندرة أزيد من 600 دواء موجه لعلاج أمراض مزمنة. *العلم الإلكترونية* على إثر ما نشرته بعض المنابر الإعلامية بخصوص ادعاء وجود ندرة تمس أكثر من 60...', 'size': 2}], 'main_title': 'وكالة الأدوية توضح حقيقة نقص أكثر من 600 دواء مخصص لعلاج الأمراض المزمنة'}, {'community_id': '8', 'articles': [{'id': '88', 'title': 'النيابة العامة بالرباط تقرر متابعة ابتسام لشكر في حالة اعتقال وإحالتها على المحاكمة', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/society/410949.html', 'summary': 'النيابة العامة بالرباط تقرر متابعة ابتسام لشكر في حالة اعتقال وإحالتها على المحاكمة. قررت النيابة العامة بالمحكمة الابتدائية بالرباط متابعة الناشطة ابتسام لشكر في حالة اعتقال، وأمرت بإحالتها إلى جلسة المحاكمة. وكانت لشكر قد مثلت أمام النيابة العامة صباح', 'size': 2}, {'id': '224', 'title': 'النيابة العامة ترفض السراح لابتسام لشكر وتحيلها في حالة اعتقال على المحاكمة', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/225849/', 'summary': 'النيابة العامة ترفض السراح لابتسام لشكر وتحيلها في حالة اعتقال على المحاكمة. النيابة العامة بالرباط تتابع الناشطة ابتسام لشكر في حالة اعتقال وتحيلها مباشرة على المحاكمة بتهم تتعلق بالإساءة للدين الإسلامي.', 'size': 2}], 'main_title': 'النيابة العامة بالرباط تقرر متابعة ابتسام لشكر في حالة اعتقال وإحالتها على المحاكمة'}, {'community_id': '9', 'articles': [{'id': '129', 'title': 'منتوجات الفخار الأكثر مبيعا.. ارتفاع صادرات الصناعة التقليدية بنسبة 14 في المائة', 'source': 'kifache.com', 'link': 'https://kifache.com/%d9%85%d9%86%d8%aa%d9%88%d8%ac%d8%a7%d8%aa-%d8%a7%d9%84%d9%81%d8%ae%d8%a7%d8%b1-%d8%a7%d9%84%d8%a3%d9%83%d8%ab%d8%b1-%d9%85%d8%a8%d9%8a%d8%b9%d8%a7-%d8%a7%d8%b1%d8%aa%d9%81%d8%a7%d8%b9-%d8%b5%d8%a7/', 'summary': 'منتوجات الفخار الأكثر مبيعا.. ارتفاع صادرات الصناعة التقليدية بنسبة 14 في المائة. أفادت كتابة الدولة المكلفة بالصناعة التقليدية والاقتصاد الاجتماعي والتضامني بأن صادرات منتجات الصناعة التقليدية بلغت 737 مليون درهم متم يوليوز، أي بزيادة قدرها 14 في المائة على أساس سنوي. وأوردت كتابة الدولة، في بلاغ، أن منتجات الصناعة التقليدية حققت أداء ملحوظا خلال يوليوز الجاري، حيث ارتفعت بنسبة 34 في المائة مقارنة بالفترة نفسها من السنة', 'size': 3}, {'id': '361', 'title': '“الأعلى للحسابات”: العجز المالي تحسن والمداخيل الضريبية فاقت التوقعات', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1092607.html', 'summary': '“الأعلى للحسابات”: العجز المالي تحسن والمداخيل الضريبية فاقت التوقعات. كشف تقرير جديد للمجلس الأعلى للحسابات حول تنفيذ قانون المالية لسنة 2023 عن تحسن ملحوظ في عجز الميزانية وتراجع نسبة المديونية مقارنة بالناتج الداخلي الخام، رغم استمرار ارتفاع حجم دين الخزينة وظروف اقتصادية عالمية وداخلية اتسمت بالتقلبات. وأوضح التقرير، الذي أُنجز استنادا إلى مشروع قانون التصفية، أن عجز الميزانية بلغ 64,2 مليار درهم، أي ما ظهرت المقالة “الأعلى للحسابات”: العجز المالي تحسن والمداخيل الضريبية فاقت التوقعات  .', 'size': 3}, {'id': '428', 'title': 'عجز الميزانية يتجاوز 53 مليار درهم مع نهاية يوليوز 2025', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%b9%d8%ac%d8%b2-%d8%a7%d9%84%d9%85%d9%8a%d8%b2%d8%a7%d9%86%d9%8a%d8%a9-%d9%8a%d8%aa%d8%ac%d8%a7%d9%88%d8%b2-53-%d9%85%d9%84%d9%8a%d8%a7%d8%b1-%d8%af%d8%b1%d9%87%d9%85-%d9%85%d8%b9-%d9%86%d9%87/', 'summary': 'عجز الميزانية يتجاوز 53 مليار درهم مع نهاية يوليوز 2025. كشفت الخزينة العامة للمملكة أن وضعية المالية العمومية سجلت عجزا في الميزانية بلغ 53,7 مليار درهم عند متم يوليوز 2025، مقابل 35,3 مليار درهم خلال الفترة نفسها من سنة 2024، حيث يشمل هذا الرقم عجزا صافيا قدره 4,8 مليار درهم ناتج عن الحسابات الخاصة للخزينة والمصالح المُدارة بشكل مستقل. وأوضحت النشرة الشهرية لإحصائيات …  عجز الميزانية يتجاوز 53 مليار درهم مع نهاية يوليوز 2025     .', 'size': 3}], 'main_title': 'منتوجات الفخار الأكثر مبيعا.. ارتفاع صادرات الصناعة التقليدية بنسبة 14 في المائة'}, {'community_id': '6', 'articles': [{'id': '168', 'title': '14 غشت: ذكرى استرجاع وادي الذهب.. محطة تاريخية كبرى في ملحمة الوحدة وتكريس لمسار تنموي متواصل', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1092511.html', 'summary': '14 غشت: ذكرى استرجاع وادي الذهب.. محطة تاريخية كبرى في ملحمة الوحدة وتكريس لمسار تنموي متواصل. يخلد الشعب المغربي في 14 غشت من كل سنة، ذكرى وطنية مجيدة تتمثل في استرجاع أقاليم وادي الذهب، وهي لحظة تاريخية متميزة في مسار استكمال الوحدة الترابية للمملكة، وترسيخ الإرتباط الوثيق بين العرش العلوي المجيد وسكان الأقاليم الجنوبية. ففي هذا اليوم العظيم، عبّر شيوخ وأعيان قبائل وادي الذهب، خلال حفل رسمي بالعاصمة الرباط، عن تشبثهم ظهرت المقالة 14 غشت: ذكرى استرجاع وادي الذهب.. محطة تاريخية كبرى في ملحمة الوحدة وتكريس لمسار تنموي متواصل  .', 'size': 2}, {'id': '427', 'title': 'ذكرى استرجاع وادي الذهب.. المشاريع الملكية تحوّل الصحراء المغربية إلى قطب اقتصادي وتنموي متكامل', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%b0%d9%83%d8%b1%d9%89-%d8%a7%d8%b3%d8%aa%d8%b1%d8%ac%d8%a7%d8%b9-%d9%88%d8%a7%d8%af%d9%8a-%d8%a7%d9%84%d8%b0%d9%87%d8%a8-%d8%a7%d9%84%d9%85%d8%b4%d8%a7%d8%b1%d9%8a%d8%b9-%d8%a7%d9%84%d9%85%d9%84/', 'summary': 'ذكرى استرجاع وادي الذهب.. المشاريع الملكية تحوّل الصحراء المغربية إلى قطب اقتصادي وتنموي متكامل. يحتفل الشعب المغربي في 14 غشت من كل عام بذكرى وطنية خالدة، هي ذكرى استرجاع أقاليم وادي الذهب، التي تمثل محطة بارزة في مسار استكمال الوحدة الترابية للمملكة وتعزيز الروابط المتينة بين العرش العلوي المجيد وسكان الأقاليم الجنوبية، ففي هذا اليوم التاريخي، جدّد شيوخ وأعيان قبائل وادي الذهب، خلال حفل رسمي بالعاصمة الرباط، …  ذكرى استرجاع وادي الذهب.. المشاريع الملكية تحوّل الصحراء المغربية إلى قطب اقتصادي وتنموي متكامل     .', 'size': 2}], 'main_title': '14 غشت: ذكرى استرجاع وادي الذهب.. محطة تاريخية كبرى في ملحمة الوحدة وتكريس لمسار تنموي متواصل'}, {'community_id': '7', 'articles': [{'id': '196', 'title': 'فريق طبي مغربي ينجز أول عملية زراعة كلية مع عدم توافق فصائل الدم ABO على المستوى القاري', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/472474.html', 'summary': 'فريق طبي مغربي ينجز أول عملية زراعة كلية مع عدم توافق فصائل الدم ABO على المستوى القاري. أعلنت مؤسسة محمد السادس للعلوم والصحة، أمس الثلاثاء بالدار البيضاء، عن إجراء بنجاح، أول عملية زراعة كلية مع عدم توافق فصائل الدم ABO على مستوى القارة الإفريقية.', 'size': 3}, {'id': '242', 'title': 'مؤسسة محمد السادس للعلوم والصحة تنجح في أول عملية زراعة كِلية مع عدم توافق فصائل الدم', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d9%85%d8%a4%d8%b3%d8%b3%d8%a9-%d9%85%d8%ad%d9%85%d8%af-%d8%a7%d9%84%d8%b3%d8%a7%d8%af%d8%b3-%d9%84%d9%84%d8%b9%d9%84%d9%88%d9%85-%d9%88%d8%a7%d9%84%d8%b5%d8%ad%d8%a9-%d8%aa%d9%86%d8%ac%d8%ad-%d9%81/', 'summary': 'مؤسسة محمد السادس للعلوم والصحة تنجح في أول عملية زراعة كِلية مع عدم توافق فصائل الدم. كشفت مؤسسة محمد السادس للعلوم والصحة، يوم أمس الثلاثاء بالدار البيضاء، عن إجراء بنجاح، أول عملية زراعة كلية مع عدم توافق فصائل الدم ABO على مستوى القارة الإفريقية. ويعتبر هذا التدخل الجراحي الهام ، الذي مكّن من زراعة كِلية بين متبرع ومتلق غير متطابقين في فصيلة الدم، تقدما طبيا كبيرا، وثمرة تنسيق وثيق …  مؤسسة محمد السادس للعلوم والصحة تنجح في أول عملية زراعة كِلية مع عدم توافق فصائل الدم     .', 'size': 3}, {'id': '401', 'title': 'نجاح أول عملية زراعة كلية مع عدم توافق فصائل الدم ABO على المستوى القاري', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d9%86%d8%ac%d8%a7%d8%ad-%d8%a3%d9%88%d9%84-%d8%b9%d9%85%d9%84%d9%8a%d8%a9-%d8%b2%d8%b1%d8%a7%d8%b9%d8%a9-%d9%83%d9%84%d9%8a%d8%a9-%d9%85%d8%b9-%d8%b9%d8%af%d9%85-%d8%aa%d9%88%d8%a7%d9%81%d9%82-%d9%81/', 'summary': 'نجاح أول عملية زراعة كلية مع عدم توافق فصائل الدم ABO على المستوى القاري. أعلنت مؤسسة محمد السادس للعلوم والصحة، يوم الثلاثاء بالدار البيضاء، عن إجراء بنجاح، أول عملية زراعة كلية مع عدم توافق فصائل الدم ABO على مستوى  نجاح أول عملية زراعة كلية مع عدم توافق فصائل الدم ABO على المستوى القاري     .', 'size': 3}], 'main_title': 'فريق طبي مغربي ينجز أول عملية زراعة كلية مع عدم توافق فصائل الدم ABO على المستوى القاري'}, {'community_id': '0', 'articles': [{'id': '276', 'title': 'الحبس النافذ للمتهم وتعويض 40 مليون سنتيم في قضية دهس "الطفلة غيثة"', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d8%a7%d9%84%d8%ad%d8%a8%d8%b3-%d8%a7%d9%84%d9%86%d8%a7%d9%81%d8%b0-%d9%84%d9%84%d9%85%d8%aa%d9%87%d9%85-%d9%88%d8%aa%d8%b9%d9%88%d9%8a%d8%b6-40-%d9%85%d9%84%d9%8a%d9%88%d9%86-%d8%b3%d9%86%d8%aa%d9%8a-1608554.html', 'summary': 'الحبس النافذ للمتهم وتعويض 40 مليون سنتيم في قضية دهس "الطفلة غيثة". حسمت المحكمة الابتدائية الزجرية ببرشيد في الملف الذي بات يعرف بـ”قضية الطفلة غيثة”، التي تعرضت لحادث دهس مأساوي بشاطئ سيدي رحال، وقضت في جلسة النطق بالحكم بتبرئة المتهم من تهمة تغيير معالم الحادثة، مع إدانته في باقي التهم الموجهة إليه، وحكمت عليه بعشرة أشهر حبسا نافذا وغرامة مالية قدرها 500 درهم بعد ثبوت ولوجه بالسيارة  الحبس النافذ للمتهم وتعويض 40 مليون سنتيم في قضية دهس "الطفلة غيثة"     - هسبريس جريدة إلكترونية مغربية .', 'size': 2}, {'id': '331', 'title': 'قضية الطفلة غيثة.. 10 أشهر سجنا نافذا للمتهم وتعويض 40 مليون', 'source': 'kifache.com', 'link': 'https://kifache.com/%d9%82%d8%b6%d9%8a%d8%a9-%d8%a7%d9%84%d8%b7%d9%81%d9%84%d8%a9-%d8%ba%d9%8a%d8%ab%d8%a9-10-%d8%a3%d8%b4%d9%87%d8%b1-%d8%b3%d8%ac%d9%86%d8%a7-%d9%86%d8%a7%d9%81%d8%b0%d8%a7-%d9%84%d9%84%d9%85%d8%aa/', 'summary': 'قضية الطفلة غيثة.. 10 أشهر سجنا نافذا للمتهم وتعويض 40 مليون. أصدرت المحكمة الابتدائية الزجرية ببرشيد، اليوم الأربعاء (13 غشت)، حكمها في القضية التي هزّت الرأي العام والمتعلقة بدهس الطفلة غيثة بشاطئ سيدي رحال. وقضت المحكمة بإدانة السائق المتهم بعشرة أشهر سجنا نافذا، مع إلزامه في الدعوى المدنية بأداء تعويض مالي قدره 400 ألف درهم لفائدة الضحية، فيما قررت استبعاد شركة التأمين من الملف. وأمهل الحكم', 'size': 2}], 'main_title': 'الحبس النافذ للمتهم وتعويض 40 مليون سنتيم في قضية دهس "الطفلة غيثة"'}, {'community_id': '1', 'articles': [{'id': '332', 'title': 'صحيفة سنغالية: الخط البحري أكادير دكار مشروع لتعزيز المبادلات الثنائية والقارية', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%b5%d8%ad%d9%8a%d9%81%d8%a9-%d8%b3%d9%86%d8%ba%d8%a7%d9%84%d9%8a%d8%a9-%d8%a7%d9%84%d8%ae%d8%b7-%d8%a7%d9%84%d8%a8%d8%ad%d8%b1%d9%8a-%d8%a3%d9%83%d8%a7%d8%af%d9%8a%d8%b1-%d8%af%d9%83%d8%a7%d8%b1/', 'summary': 'صحيفة سنغالية: الخط البحري أكادير دكار مشروع لتعزيز المبادلات الثنائية والقارية. اعتبرت صحيفة “لو سولي” السنغالية أن من شأن الخط البحري التجاري المرتقب بين مدينتي أكادير ودكار أن “يعزز المبادلات الثنائية ويدعم الحركة التجارية على مستوى القارة الإفريقية”. وأبرزت الصحيفة أن هذا الخط البحري، الذي يشكل موضوع بروتوكول الاتفاق الموقع في 11 دجنبر الماضي بين شركة “أطلس مارين” البريطانية وجهة سوس-ماسة، يهدف إلى توفير بديل فعال', 'size': 2}, {'id': '413', 'title': 'الخط البحري أكادير -دكار.. مشروع لتعزيز المبادلات الثنائية والقارية (صحيفة سنغالية)', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/225881/', 'summary': 'الخط البحري أكادير -دكار.. مشروع لتعزيز المبادلات الثنائية والقارية (صحيفة سنغالية). دكار – اعتبرت صحيفة “لو سولي” السنغالية أن من شأن الخط البحري التجاري المرتقب بين مدينتي أكادير ودكار أن “يعزز المبادلات الثنائية ويدعم الحركة التجارية على مستوى القارة الإفريقية”. وأبرزت الصحيفة أن هذا الخط البحري، الذي يشكل موضوع بروتوكول الاتفاق الموقع في 11 دجنبر الماضي بين شركة “أطلس مارين” البريطانية وجهة سوس-ماسة، يهدف إلى توفير', 'size': 2}], 'main_title': 'صحيفة سنغالية: الخط البحري أكادير دكار مشروع لتعزيز المبادلات الثنائية والقارية'}, {'community_id': '5', 'articles': [{'id': '337', 'title': 'إدانة “ولد لفشوش” بـ 10 أشهر حبسا و40 مليون سنتيم تعويضا للطفلة غيثة', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/320976/', 'summary': 'إدانة “ولد لفشوش” بـ 10 أشهر حبسا و40 مليون سنتيم تعويضا للطفلة غيثة. أدانت المحكمة الزجرية الابتدائية ببرشيد، اليوم الأربعاء، الشاب المتابع في قضية دهس الطفلة غيثة بشاطئ سيدي رحال، وحكمت عليه بعشرة أشهر حبسًا نافذًا، إضافة إلى أداء تعويض مالي قدره أربعون مليون سنتيم لفائدة الضحية، في قضية أثارت تفاعلًا واسعًا وتحولت إلى ملف رأي عام. الحادثة تعود إلى أواخر يونيو الماضي، حين كانت الطفلة، البالغة من', 'size': 2}, {'id': '375', 'title': 'السجن 10 أشهر للمتهم بدهس الطفلة غيثة مع أداء تعويض 40 مليون', 'source': 'rue20.com', 'link': 'https://rue20.com/928396.html', 'summary': 'السجن 10 أشهر للمتهم بدهس الطفلة غيثة مع أداء تعويض 40 مليون.  ا الرباط أصدرت المحكمة، اليوم الأربعاء ، حكما يقضي بسجن الشاب المتورط في حادث دهس الطفلة غيثة بواسطة دراجة مائية “جيتسكي” بشاطئ سيدي رحال، لمدة 10 أشهر نافذة، مع أداء تعويض مالي قدره 40 مليون سنتيم لفائدة الضحية. وكانت حادثة دهس الطفلة غيثة، ذات الأربع سنوات، في أحد شواطئ مدينة الدار البيضاء أثارت الخبر السجن 10 أشهر للمتهم بدهس الطفلة غيثة مع أداء تعويض 40 مليون  .', 'size': 2}], 'main_title': 'إدانة “ولد لفشوش” بـ 10 أشهر حبسا و40 مليون سنتيم تعويضا للطفلة غيثة'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    