<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 31/07/2025 - 12h27</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '48', 'title': 'أخنوش: الحكومة معبأة خلف جلالة الملك لتفعيل التنمية المجالية', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-645292.html', 'summary': 'أخنوش: الحكومة معبأة خلف جلالة الملك لتفعيل التنمية المجالية. أكد رئيس الحكومة، السيد عزيز أخنوش ، أن الحكومة معبأة بكل مكوناتها خلف صاحب الجلالة الملك محمد السادس، نصره الله، من أجل تنزيل وتفعيل الاستراتيجيات الوطنية الرامية إلى فتح آفاق جديدة للتنمية المجالية وتحقيق العدالة الترابية. وجاء تصريح السيد أخنوش عقب مشاركته في حفل الاستقبال الرسمي الذي ترأسه جلالة الملك محمد السادس، اليوم الأربعاء بمدينة المضيق، بمناسبة تخليد الذكرى السادسة والعشرين لعيد العرش المجيد. واعتبر رئيس الحكومة أن هذا اليوم يعد مناسبة وطنية غالية عند جميع المغاربة، وفرصة لاستحضار المنجزات التنموية الكبرى التي تحققت في عهد جلالة الملك، مشيرًا إلى أن هذه الأوراش شملت مجالات اقتصادية واجتماعية متعددة، وأسهمت في تحسين ظروف عيش المواطنين وتعزيز البنيات التحتية. كما نوه السيد أخنوش بالمضامين السامية التي تضمنها الخطاب الملكي، الذي وجهه جلالة الملك إلى الأمة أمس الثلاثاء، حيث وصفه بـ"الخطاب الموجه نحو المستقبل"، مؤكداً أنه رسم معالم جديدة للتنمية المجالية وفتح آفاقًا واعدة أمام مختلف الجهات.', 'size': 2}, {'id': '148', 'title': 'أخنوش: نسير خلف التوجيهات الملكية لبلوغ تنمية مجالية عادلة ومتوازنة', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/319781/', 'summary': 'أخنوش: نسير خلف التوجيهات الملكية لبلوغ تنمية مجالية عادلة ومتوازنة. قال رئيس الحكومة، عزيز أخنوش، إن الحكومة معبأة خلف صاحب الجلالة الملك محمد السادس، نصره الله، لتنزيل وتفعيل الاستراتيجيات الرامية إلى فتح آفاق جديدة للتنمية المجالية. وأوضح أخنوش، في تصريح للصحافة عقب حفل الاستقبال الذي ترأسه جلالة الملك بمناسبة عيد العرش المجيد، أن هذه الذكرى ” يوم عظيم عند المغاربة ومناسبة لاستحضار الإنجازات المهمة والأوراش', 'size': 2}], 'main_title': 'أخنوش: الحكومة معبأة خلف جلالة الملك لتفعيل التنمية المجالية'}, {'community_id': '1', 'articles': [{'id': '51', 'title': 'الأمير مولاي رشيد يترأس مأدبة غداء أقامها رئيس الحكومة بمناسبة عيد العرش', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-645284.html', 'summary': 'الأمير مولاي رشيد يترأس مأدبة غداء أقامها رئيس الحكومة بمناسبة عيد العرش. هبة بريس ترأس صاحب السمو الملكي الأمير مولاي رشيد، اليوم الأربعاء بتطوان، مأدبة غداء أقامها رئيس الحكومة، بمناسبة الذكرى السادسة والعشرين لاعتلاء صاحب الجلالة الملك محمد السادس، نصره الله، عرش أسلافه المنعمين. ولدى وصوله، استعرض صاحب السمو الملكي الأمير مولاي رشيد تشكيلة من القوات المساعدة أدت التحية، قبل أن يتقدم للسلام على سموه رئيس الحكومة، السيد عزيز أخنوش. كما تقدم للسلام على سموه والي جهة طنجة-تطوان-الحسيمة عامل عمالة طنجة-أصيلة، ورئيس مجلس الجهة، وعامل إقليم تطوان، وشخصيات أخرى. حضر هذه المأدبة رئيسا مجلسي النواب والمستشارين، وعدد من مستشاري صاحب الجلالة، وأعضاء الحكومة، ورؤساء الهيئات الدستورية، وكبار ضباط القيادة العليا للقوات المسلحة الملكية، وأعضاء السلك الدبلوماسي المعتمد بالمغرب، وشخصيات أخرى مدنية وعسكرية.', 'size': 2}, {'id': '196', 'title': 'عيد العرش.. الأمير مولاي رشيد يترأس مأدبة غداء أقامها رئيس الحكومة', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/471097.html', 'summary': 'عيد العرش.. الأمير مولاي رشيد يترأس مأدبة غداء أقامها رئيس الحكومة. و.م.ع ترأس الأمير مولاي رشيد، اليوم الأربعاء بتطوان، مأدبة غداء أقامها رئيس الحكومة، بمناسبة الذكرى السادسة والعشرين لاعتلاء الملك محمد السادس، عرش أسلافه المنعمين. ولدى وصوله، استعرض الأمير مولاي رشيد تشكيلة من القوات المساعدة أدت التحية، قبل أن يتقدم للسلام على سموه رئيس الحكومة، عزيز أخنوش. كما تقدم للسلام على سموه والي جهة طنجة-تطوان-الحسيمة عامل …', 'size': 2}, {'id': '219', 'title': 'الأمير مولاي رشيد يترأس بتطوان مأدبة غداء بمناسبة عيد العرش المجيد', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/225411/', 'summary': 'الأمير مولاي رشيد يترأس بتطوان مأدبة غداء بمناسبة عيد العرش المجيد. تطوان – ترأس صاحب السمو الملكي الأمير مولاي رشيد، اليوم الأربعاء بتطوان، مأدبة غداء بمناسبة الذكرى السادسة والعشرين لاعتلاء صاحب الجلالة الملك محمد السادس، نصره الله، عرش أسلافه المنعمين. ولدى وصوله، استعرض صاحب السمو الملكي الأمير مولاي رشيد تشكيلة من القوات المساعدة أدت التحية، قبل أن يتقدم للسلام على سموه رئيس الحكومة، السيد عزيز أخنوش.', 'size': 3}], 'main_title': 'الأمير مولاي رشيد يترأس بتطوان مأدبة غداء بمناسبة عيد العرش المجيد'}, {'community_id': '4', 'articles': [{'id': '62', 'title': 'الملك يترأس بالمضيق حفل استقبال بمناسبة عيد العرش المجيد', 'source': 'www.alakhbar.press.ma', 'link': 'https://www.alakhbar.press.ma/%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%8a%d8%aa%d8%b1%d8%a3%d8%b3-%d8%a8%d8%a7%d9%84%d9%85%d8%b6%d9%8a%d9%82-%d8%ad%d9%81%d9%84-%d8%a7%d8%b3%d8%aa%d9%82%d8%a8%d8%a7%d9%84-%d8%a8%d9%85%d9%86%d8%a7%d8%b3-270179.html', 'summary': 'الملك يترأس بالمضيق حفل استقبال بمناسبة عيد العرش المجيد. الأخبار ترأس الملك محمد السادس، مرفوقا بولي العهد الأمير مولاي الحسن، والأمير مولاي رشيد، بعد زوال اليوم الأربعاء بساحة عمالة المضيق-الفنيدق، بمدينة المضيق، حفل استقبال بمناسبة الذكرى السادسة والعشرين لتربعه على عرش أسلافه المنعمين. وفي مستهل هذا الحفل، جرت تحية العلم على نغمات النشيد الوطني، بينما كانت المدفعية تطلق 21 طلقة. إثر ذلك، تقدم للسلام …  الملك يترأس بالمضيق حفل استقبال بمناسبة عيد العرش المجيد     .', 'size': 3}, {'id': '188', 'title': 'جلالة الملك يمنح لبؤات الأطلس أفضل تتويج…تقدير ملكي رفيع لكرة القدم المغربية', 'source': 'rue20.com', 'link': 'https://rue20.com/925323.html', 'summary': 'جلالة الملك يمنح لبؤات الأطلس أفضل تتويج…تقدير ملكي رفيع لكرة القدم المغربية. . الرباط ترأس صاحب الجلالة الملك محمد السادس، نصره الله، مرفوقا بصاحب السمو الملكي ولي العهد الأمير مولاي الحسن، وصاحب السمو الملكي الأمير مولاي رشيد، بعد زوال اليوم الأربعاء بساحة عمالة المضيق-الفنيدق، بمدينة المضيق، حفل استقبال بمناسبة الذكرى السادسة والعشرين لتربع جلالته على عرش أسلافه المنعمين. وفي مستهل هذا الحفل، جرت تحية العلم على الخبر جلالة الملك يمنح لبؤات الأطلس أفضل تتويج…تقدير ملكي رفيع لكرة القدم المغربية  .', 'size': 3}, {'id': '241', 'title': 'الملك محمد السادس يترأس بالمضيق حفل استقبال بمناسبة عيد العرش المجيد', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%85%d8%ad%d9%85%d8%af-%d8%a7%d9%84%d8%b3%d8%a7%d8%af%d8%b3-%d9%8a%d8%aa%d8%b1%d8%a3%d8%b3-%d8%a8%d8%a7%d9%84%d9%85%d8%b6%d9%8a%d9%82-%d8%ad%d9%81%d9%84-%d8%a7%d8%b3/', 'summary': 'الملك محمد السادس يترأس بالمضيق حفل استقبال بمناسبة عيد العرش المجيد. ترأس الملك محمد السادس، مرفوقا بصاحب السمو الملكي ولي العهد الأمير مولاي الحسن، وصاحب السمو الملكي الأمير مولاي رشيد، بعد زوال اليوم الأربعاء بساحة عمالة المضيق-الفنيدق، بمدينة المضيق، حفل استقبال بمناسبة الذكرى السادسة والعشرين لتربع جلالته على عرش أسلافه المنعمين. وفي مستهل هذا الحفل، جرت تحية العلم على نغمات النشيد الوطني، بينما كانت …  الملك محمد السادس يترأس بالمضيق حفل استقبال بمناسبة عيد العرش المجيد     .', 'size': 3}], 'main_title': 'الملك يترأس بالمضيق حفل استقبال بمناسبة عيد العرش المجيد'}, {'community_id': '9', 'articles': [{'id': '65', 'title': 'تدبير ملف الصحراء المغربية.. مشروع وطني متكامل للوحدة والاستقرار', 'source': 'www.alakhbar.press.ma', 'link': 'https://www.alakhbar.press.ma/%d8%aa%d8%af%d8%a8%d9%8a%d8%b1-%d9%85%d9%84%d9%81-%d8%a7%d9%84%d8%b5%d8%ad%d8%b1%d8%a7%d8%a1-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8%d9%8a%d8%a9-%d9%85%d8%b4%d8%b1%d9%88%d8%b9-%d9%88%d8%b7%d9%86%d9%8a-270165.html', 'summary': 'تدبير ملف الصحراء المغربية.. مشروع وطني متكامل للوحدة والاستقرار. يحتفل المغاربة هذه السنة بالذكرى السادسة والعشرين لاعتلاء الملك محمد السادس عرش المملكة، وهي مناسبة وطنية تتجلى فيها مظاهر الفخر والاعتزاز بمسار المملكة، خصوصا في واحدة من أبرز القضايا الوطنية التي ظلت محور اهتمام الملك وأولوية لا تقبل المساومة، ألا وهي قضية الصحراء المغربية. فقد شكل هذا الملف، على مدار عقدين ونصف من الزمن، التحدي …  تدبير ملف الصحراء المغربية.. مشروع وطني متكامل للوحدة والاستقرار     .', 'size': 2}, {'id': '378', 'title': 'الصحراء المغربية في قلب خطاب عيد العرش.. دبلوماسية متزنة تحصد ثمار الاعتراف والتأييد', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d8%b5%d8%ad%d8%b1%d8%a7%d8%a1-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8%d9%8a%d8%a9-%d9%81%d9%8a-%d9%82%d9%84%d8%a8-%d8%ae%d8%b7%d8%a7%d8%a8-%d8%b9%d9%8a%d8%af-%d8%a7%d9%84%d8%b9%d8%b1%d8%b4/', 'summary': 'الصحراء المغربية في قلب خطاب عيد العرش.. دبلوماسية متزنة تحصد ثمار الاعتراف والتأييد. يجدد الملك محمد السادس في كل مرة تحل فيها ذكرى عيد العرش المجيد، تأكيده على القضايا الجوهرية التي تشكل أولويات المملكة، وعلى رأسها قضية الصحراء المغربية التي تحضر دائما بقوة في خطاباته، حيث شكل خطاب العرش لهذه السنة محطة جديدة لتسليط الضوء على المكاسب الدبلوماسية التي راكمها المغرب، ولا سيما الزخم الدولي المتزايد …  الصحراء المغربية في قلب خطاب عيد العرش.. دبلوماسية متزنة تحصد ثمار الاعتراف والتأييد     .', 'size': 2}], 'main_title': 'تدبير ملف الصحراء المغربية.. مشروع وطني متكامل للوحدة والاستقرار'}, {'community_id': '2', 'articles': [{'id': '127', 'title': 'لفائدة الشعب الفلسطيني.. جلالة الملك يعطي تعليماته السامية من أجل إرسال مساعدة إنسانية وطبية عاجلة', 'source': 'kifache.com', 'link': 'https://kifache.com/%d9%84%d9%81%d8%a7%d8%a6%d8%af%d8%a9-%d8%a7%d9%84%d8%b4%d8%b9%d8%a8-%d8%a7%d9%84%d9%81%d9%84%d8%b3%d8%b7%d9%8a%d9%86%d9%8a-%d8%ac%d9%84%d8%a7%d9%84%d8%a9-%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%8a%d8%b9/', 'summary': 'لفائدة الشعب الفلسطيني.. جلالة الملك يعطي تعليماته السامية من أجل إرسال مساعدة إنسانية وطبية عاجلة. أفاد بلاغ لوزارة الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج، اليوم الأربعاء (30 يوليوز)، بأن صاحب الجلالة الملك محمد السادس، رئيس لجنة القدس، أعطى تعليماته السامية من أجل إرسال مساعدة إنسانية وطبية عاجلة لفائدة الشعب الفلسطيني الشقيق، وخاصة ساكنة قطاع غزة. وتتكون هذه المساعدة، التي يبلغ حجمها الإجمالي نحو 180 طنا، من مواد غذائية أساسية،', 'size': 5}, {'id': '140', 'title': 'الملك يأمر بإرسال مساعدة إنسانية وطبية عاجلة لفائدة الشعب الفلسطيني', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/319816/', 'summary': 'الملك يأمر بإرسال مساعدة إنسانية وطبية عاجلة لفائدة الشعب الفلسطيني. أفاد بلاغ لوزارة الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج، اليوم الأربعاء، بأن صاحب الجلالة الملك محمد السادس، نصره الله، رئيس لجنة القدس، أعطى تعليماته السامية من أجل إرسال مساعدة إنسانية وطبية عاجلة لفائدة الشعب الفلسطيني الشقيق، وخاصة ساكنة قطاع غزة. وتتكون هذه المساعدة، التي يبلغ حجمها الإجمالي نحو 180 طنا، من مواد غذائية أساسية،', 'size': 5}, {'id': '172', 'title': 'تعليمات ملكية لإرسال 180 طنا من المساعدات إلى غزة', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%aa%d8%b9%d9%84%d9%8a%d9%85%d8%a7%d8%aa-%d9%85%d9%84%d9%83%d9%8a%d8%a9-%d9%84%d8%a5%d8%b1%d8%b3%d8%a7%d9%84-180-%d8%b7%d9%86%d8%a7-%d9%85%d9%86-%d8%a7%d9%84%d8%b3%d8%a7%d8%b9%d8%af%d8%a7%d8%aa/', 'summary': 'تعليمات ملكية لإرسال 180 طنا من المساعدات إلى غزة. أعطى الملك محمد السادس، رئيس لجنة القدس، تعليماته السامية من أجل إرسال مساعدة إنسانية وطبية عاجلة لفائدة الشعب الفلسطيني الشقيق، وخاصة ساكنة قطاع غزة. تتكون هذه المساعدة، التي يبلغ حجمها الإجمالي نحو 180 طنا، من مواد غذائية أساسية، ومن الحليب ومواد موجهة بالخصوص للأطفال، وكذا أدوية ومعدات جراحية لفائدة السكان الأكثر هشاشة. كما  تعليمات ملكية لإرسال 180 طنا من المساعدات إلى غزة     .', 'size': 5}, {'id': '189', 'title': 'الملك يعطي تعليماته لإرسال مساعدة إنسانية وطبية عاجلة لفائدة الشعب الفلسطيني', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/471118.html', 'summary': 'الملك يعطي تعليماته لإرسال مساعدة إنسانية وطبية عاجلة لفائدة الشعب الفلسطيني. أفاد بلاغ لوزارة الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين بالخارج، اليوم الأربعاء، بأن الملك محمد السادس، رئيس لجنة القدس، أعطى تعليماته السامية من أجل إرسال مساعدة إنسانية وطبية عاجلة لفائدة الشعب الفلسطيني الشقيق، وخاصة ساكنة قطاع غزة. وتتكون هذه المساعدة، التي يبلغ حجمها الإجمالي نحو 180 طنا، من مواد غذائية أساسية، ومن الحليب ومواد موجهة …', 'size': 5}, {'id': '201', 'title': 'الملك يعطي تعليماته من أجل إرسال مساعدة إنسانية وطبية عاجلة لفائدة غزة', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%8a%d8%b9%d8%b7%d9%8a-%d8%aa%d8%b9%d9%84%d9%8a%d9%85%d8%a7%d8%aa%d9%87-%d9%85%d9%86-%d8%a3%d8%ac%d9%84-%d8%a5%d8%b1%d8%b3%d8%a7%d9%84-%d9%85%d8%b3%d8%a7%d8%b9%d8%af/', 'summary': 'الملك يعطي تعليماته من أجل إرسال مساعدة إنسانية وطبية عاجلة لفائدة غزة. في بلاغ لوزارة الشؤون الخارجية أعطى الملك محمد السادس، رئيس لجنة القدس، تعليماته السامية من أجل إرسال مساعدة إنسانية وطبية عاجلة لفائدة الشعب  الملك يعطي تعليماته من أجل إرسال مساعدة إنسانية وطبية عاجلة لفائدة غزة     .', 'size': 5}], 'main_title': 'لفائدة الشعب الفلسطيني.. جلالة الملك يعطي تعليماته السامية من أجل إرسال مساعدة إنسانية وطبية عاجلة'}, {'community_id': '6', 'articles': [{'id': '142', 'title': 'بعد سنوات من التهميش.. حكم قضائي إسباني ينصف المئات من العاملات المغربيات', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/319806/', 'summary': 'بعد سنوات من التهميش.. حكم قضائي إسباني ينصف المئات من العاملات المغربيات. أصدرت المحكمة العليا للعدل في إقليم الأندلس حكما قضائيا يُنصف عشرات العاملات المغربيات اللواتي وجدن أنفسهن عالقات داخل مدينة سبتة المحتلة، عقب إغلاق الحدود بين المغرب وإسبانيا في سياق تدابير الطوارئ الصحية التي فرضتها جائحة كوفيد-19. ويأتي هذا الحكم، وفقًا لما تناقلته الصحافة الإسبانية، ليعترف بحق هؤلاء النساء في تسوية أوضاعهن القانونية والإدارية، عبر مسطرة', 'size': 2}, {'id': '175', 'title': 'حكم قضائي إسباني يُنصف العاملات المغربيات العالقات في سبتة بسبب الجائحة', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%ad%d9%83%d9%85-%d9%82%d8%b6%d8%a7%d8%a6%d9%8a-%d8%a5%d8%b3%d8%a8%d8%a7%d9%86%d9%8a-%d9%8a%d9%8f%d9%86%d8%b5%d9%81-%d8%a7%d9%84%d8%b9%d8%a7%d9%85%d9%84%d8%a7%d8%aa-%d8%a7%d9%84%d9%85%d8%ba%d8%b1/', 'summary': 'حكم قضائي إسباني يُنصف العاملات المغربيات العالقات في سبتة بسبب الجائحة. انتصار قانوني جديد لصالح النساء المغربيات العاملات بصفة عابرة للحدود ، بعد أن أصدرت محكمة العدل العليا في إقليم الأندلس حكمًا يخول لهن تسوية أوضاعهن القانونية عبر مسطرة "الاندماج المهني" (arraigo laboral)، بعد معاناة دامت سنوات بسبب تداعيات إغلاق الحدود خلال جائحة كوفيد-19. واحتفت جمعية الدفاع عن حقوق الإنسان بالأندلس (APDHA) بهذا الحكم، معتبرة إياه  حكم قضائي إسباني يُنصف العاملات المغربيات العالقات في سبتة بسبب الجائحة     .', 'size': 2}], 'main_title': 'بعد سنوات من التهميش.. حكم قضائي إسباني ينصف المئات من العاملات المغربيات'}, {'community_id': '3', 'articles': [{'id': '146', 'title': 'دبلوماسيون: المغرب بقيادة الملك محمد السادس بات نموذجا للتنمية والاستقرار', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/319791/', 'summary': 'دبلوماسيون: المغرب بقيادة الملك محمد السادس بات نموذجا للتنمية والاستقرار. أكد عدد من الدبلوماسيين الأجانب المعتمدين بالرباط، اليوم الأربعاء، أن المملكة المغربية حققت، بقيادة صاحب الجلالة الملك محمد السادس، إنجازات هامة في مختلف المجالات جعلت منها نموذجا للتنمية متعددة الأبعاد. وعبر هؤلاء الدبلوماسيون، في تصريحات للصحافة، على هامش حفل الاستقبال الذي ترأسه جلالة الملك بمناسبة عيد العرش، عن أحر تهانئهم وأصدق متمنياتهم لجلالة الملك، مؤكدين', 'size': 2}, {'id': '235', 'title': 'دبلوماسيون: المغرب نموذج للتنمية متعددة الأبعاد تحت قيادة الملك محمد السادس', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%af%d8%a8%d9%84%d9%88%d9%85%d8%a7%d8%b3%d9%8a%d9%88%d9%86-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d9%86%d9%85%d9%88%d8%b0%d8%ac-%d9%84%d9%84%d8%aa%d9%86%d9%85%d9%8a%d8%a9-%d9%85%d8%aa%d8%b9%d8%af/', 'summary': 'دبلوماسيون: المغرب نموذج للتنمية متعددة الأبعاد تحت قيادة الملك محمد السادس. شدّد عدد من الدبلوماسيين الأجانب المعتمدين بالرباط، اليوم الأربعاء، أن المملكة المغربية حققت، بقيادة الملك محمد السادس، إنجازات هامة في مختلف المجالات جعلت منها نموذجا للتنمية متعددة الأبعاد. وفي هذا الصدد، أعرب هؤلاء الدبلوماسيون، في تصريحات للصحافة، على هامش حفل الاستقبال الذي ترأسه الملك محمد السادس بمناسبة عيد العرش، عن أحر تهانئهم وأصدق …  دبلوماسيون: المغرب نموذج للتنمية متعددة الأبعاد تحت قيادة الملك محمد السادس     .', 'size': 2}], 'main_title': 'دبلوماسيون: المغرب بقيادة الملك محمد السادس بات نموذجا للتنمية والاستقرار'}, {'community_id': '5', 'articles': [{'id': '297', 'title': 'وجدة.. اعتقال أفراد عصابة لجؤوا إلى حيلة ذكية للسطو على الحسابات البنكية للضحايا', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/society/410240.html', 'summary': 'وجدة.. اعتقال أفراد عصابة لجؤوا إلى حيلة ذكية للسطو على الحسابات البنكية للضحايا. تمكنت عناصر الشرطة بولاية أمن وجدة بتنسيق مع مصالح المديرية العامة لمراقبة التراب الوطني، مساء أمس الأربعاء 30 يوليوز الجاري، من توقيف ثلاثة أشخاص من', 'size': 3}, {'id': '335', 'title': 'تفكيك شبكة للنصب وانتحال الصفة بوجدة يقود لتوقيف 3 أشخاص بينهم قاصر', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1089618.html', 'summary': 'تفكيك شبكة للنصب وانتحال الصفة بوجدة يقود لتوقيف 3 أشخاص بينهم قاصر. تمكنت عناصر الشرطة بولاية أمن وجدة بتنسيق مع مصالح المديرية العامة لمراقبة التراب الوطني، مساء أمس الأربعاء 30 يوليوز الجاري، من توقيف ثلاثة أشخاص من بينهم قاصر يبلغ من العمر 17 سنة، وذلك للاشتباه في تورطهم في قضية تتعلق بالنصب والاحتيال وانتحال صفة ينظمها القانون. وحسب المعطيات الأولية للبحث، فقد كان المشتبه فيهم يتصلون هاتفيا ظهرت المقالة تفكيك شبكة للنصب وانتحال الصفة بوجدة يقود لتوقيف 3 أشخاص بينهم قاصر  .', 'size': 4}, {'id': '342', 'title': 'بشبهة النصب والاحتيال وانتحال صفة.. أمن وجدة يوقف ثلاثة أشخاص', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a8%d8%b4%d8%a8%d9%87%d8%a9-%d8%a7%d9%84%d9%86%d8%b5%d8%a8-%d9%88%d8%a7%d9%84%d8%a7%d8%ad%d8%aa%d9%8a%d8%a7%d9%84-%d9%88%d8%a7%d9%86%d8%aa%d8%ad%d8%a7%d9%84-%d8%b5%d9%81%d8%a9-%d8%a3%d9%85%d9%86/', 'summary': 'بشبهة النصب والاحتيال وانتحال صفة.. أمن وجدة يوقف ثلاثة أشخاص. تمكنت عناصر الشرطة بولاية أمن وجدة بتنسيق مع مصالح المديرية العامة لمراقبة التراب الوطني، مساء أمس الأربعاء 30 يوليوز الجاري، من توقيف ثلاثة أشخاص من بينهم قاصر يبلغ من العمر 17 سنة، وذلك للاشتباه في تورطهم في قضية تتعلق بالنصب والاحتيال وانتحال صفة ينظمها القانون. وأوضح مصدر أمني أنه وحسب المعطيات الأولية للبحث، فقد كان  بشبهة النصب والاحتيال وانتحال صفة.. أمن وجدة يوقف ثلاثة أشخاص     .', 'size': 5}, {'id': '352', 'title': 'اعتقال أفراد شبكة انتحلوا صفة مسؤولين ونصبوا على مواطنين بوجدة', 'source': 'rue20.com', 'link': 'https://rue20.com/925450.html', 'summary': 'اعتقال أفراد شبكة انتحلوا صفة مسؤولين ونصبوا على مواطنين بوجدة.  ا الرباط تمكنت عناصر الشرطة بولاية أمن وجدة بتنسيق مع مصالح المديرية العامة لمراقبة التراب الوطني، مساء أمس الأربعاء 30 يوليوز الجاري، من توقيف ثلاثة أشخاص من بينهم قاصر يبلغ من العمر 17 سنة، وذلك للاشتباه في تورطهم في قضية تتعلق بالنصب والاحتيال وانتحال صفة ينظمها القانون. وحسب المعطيات الأولية للبحث، فقد كان الخبر اعتقال أفراد شبكة انتحلوا صفة مسؤولين ونصبوا على مواطنين بوجدة  .', 'size': 4}, {'id': '356', 'title': 'ضمنهم قاصر.. توقيف متهمين بالنصب والاحتيال وانتحال صفة', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/471196.html', 'summary': 'ضمنهم قاصر.. توقيف متهمين بالنصب والاحتيال وانتحال صفة. تمكنت عناصر الشرطة بولاية أمن وجدة بتنسيق مع مصالح المديرية العامة لمراقبة التراب الوطني، مساء أمس الأربعاء 30 يوليوز الجاري، من توقيف ثلاثة أشخاص من بينهم قاصر يبلغ من العمر 17 سنة، وذلك للاشتباه في تورطهم في قضية تتعلق بالنصب والاحتيال وانتحال صفة ينظمها القانون.', 'size': 5}], 'main_title': 'بشبهة النصب والاحتيال وانتحال صفة.. أمن وجدة يوقف ثلاثة أشخاص'}, {'community_id': '8', 'articles': [{'id': '341', 'title': 'توقيف ثلاثينية وحجز أزيد من 2430 قرصا طبيا مخدرا بسلا', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%aa%d9%88%d9%82%d9%8a%d9%81-%d8%ab%d9%84%d8%a7%d8%ab%d9%8a%d9%86%d9%8a%d8%a9-%d9%88%d8%ad%d8%ac%d8%b2-%d8%a3%d8%b2%d9%8a%d8%af-%d9%85%d9%86-2430-%d9%82%d8%b1%d8%b5-%d8%b7%d8%a8%d9%8a-%d9%85%d8%ae/', 'summary': 'توقيف ثلاثينية وحجز أزيد من 2430 قرصا طبيا مخدرا بسلا. تمكنت عناصر الشرطة بالأمن الإقليمي بمدينة سلا، بناءً على معلومات دقيقة وفرتها مصالح المديرية العامة لمراقبة التراب الوطني، مساء أمس الأربعاء 30 يوليوز الجاري، من توقيف سيدة تبلغ من العمر 33 سنة، للاشتباه في تورطها في قضية تتعلق بحيازة وترويج المخدرات والمؤثرات العقلية. وأوضح مصدر أمني أنه جرى توقيف المشتبه فيها بأحد أحياء مدينة سلا،  توقيف ثلاثينية وحجز أزيد من 2430 قرصا طبيا مخدرا بسلا     .', 'size': 2}, {'id': '375', 'title': 'توقيف سيدة بشبهة حيازة وترويج المخدرات والمؤثرات العقلية بسلا', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%aa%d9%88%d9%82%d9%8a%d9%81-%d8%b3%d9%8a%d8%af%d8%a9-%d8%a8%d8%b4%d8%a8%d9%87%d8%a9-%d8%ad%d9%8a%d8%a7%d8%b2%d8%a9-%d9%88%d8%aa%d8%b1%d9%88%d9%8a%d8%ac-%d8%a7%d9%84%d9%85%d8%ae%d8%af%d8%b1%d8%a7/', 'summary': 'توقيف سيدة بشبهة حيازة وترويج المخدرات والمؤثرات العقلية بسلا. تمكنت عناصر الشرطة بالأمن الإقليمي بمدينة سلا، بناءً على معلومات دقيقة وفرتها مصالح المديرية العامة لمراقبة التراب الوطني، مساء أمس الأربعاء، من توقيف سيدة تبلغ من العمر 33 سنة، وذلك للاشتباه في تورطها في قضية تتعلق بحيازة وترويج المخدرات والمؤثرات العقلية. وأكدت مصادر أمنية، أنه قد جرى توقيف المشتبه فيها بأحد أحياء مدينة …  توقيف سيدة بشبهة حيازة وترويج المخدرات والمؤثرات العقلية بسلا     .', 'size': 2}], 'main_title': 'توقيف ثلاثينية وحجز أزيد من 2430 قرصا طبيا مخدرا بسلا'}, {'community_id': '7', 'articles': [{'id': '346', 'title': 'كندا تعتزم الاعتراف بدولة فلسطين خلال الجمعية العامة للأمم المتحدة', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d9%83%d9%86%d8%af%d8%a7-%d8%aa%d8%b9%d8%aa%d8%b2%d9%85-%d8%a7%d9%84%d8%a7%d8%b9%d8%aa%d8%b1%d8%a7%d9%81-%d8%a8%d8%af%d9%88%d9%84%d8%a9-%d9%81%d9%84%d8%b3%d8%b7%d9%8a%d9%86-%d8%ae%d9%84%d8%a7%d9%84/', 'summary': 'كندا تعتزم الاعتراف بدولة فلسطين خلال الجمعية العامة للأمم المتحدة. أعلن رئيس الوزراء الكندي، مارك كارني، أن بلاده "تعتزم" الاعتراف بدولة فلسطين خلال اجتماعات الجمعية العامة للأمم المتحدة في نيويورك في شتنبر المقبل. وقال كارني خلال مؤتمر صحافي في أوتاوا إن "كندا تعتزم الاعتراف بدولة فلسطين خلال الدورة الثمانين للجمعية العامة للأمم المتحدة في شتنبر 2025". وأوضح أن هذا التحول في موقف أوتاوا مدفوع بقناعة  كندا تعتزم الاعتراف بدولة فلسطين خلال الجمعية العامة للأمم المتحدة     .', 'size': 2}, {'id': '374', 'title': 'كندا تعتزم الاعتراف رسميا بدولة فلسطين خلال الجمعية العامة للأمم المتحدة شتنبر المقبل', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d9%83%d9%86%d8%af%d8%a7-%d8%aa%d8%b9%d8%aa%d8%b2%d9%85-%d8%a7%d9%84%d8%a7%d8%b9%d8%aa%d8%b1%d8%a7%d9%81-%d8%b1%d8%b3%d9%85%d9%8a%d8%a7-%d8%a8%d8%af%d9%88%d9%84%d8%a9-%d9%81%d9%84%d8%b3%d8%b7%d9%8a/', 'summary': 'كندا تعتزم الاعتراف رسميا بدولة فلسطين خلال الجمعية العامة للأمم المتحدة شتنبر المقبل. أعلن رئيس الوزراء الكندي، مارك كارني، أن بلاده تعتزم الاعتراف رسميا بدولة فلسطين خلال الدورة الـ80 للجمعية العامة للأمم المتحدة المقررة في شتنبر 2025، مشددا على أن هذا القرار يأتي في سياق “ضرورة عاجلة لحماية ما تبقى من فرص حل الدولتين”. وأكد كارني في تصريح منشور على موقع الحكومة الكندية، أن “كندا لطالما …  كندا تعتزم الاعتراف رسميا بدولة فلسطين خلال الجمعية العامة للأمم المتحدة شتنبر المقبل     .', 'size': 2}], 'main_title': 'كندا تعتزم الاعتراف بدولة فلسطين خلال الجمعية العامة للأمم المتحدة'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    