<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 16/07/2025 - 12h26</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '3', 'articles': [{'id': '68', 'title': 'الحكومة تقرر إدخال ثلاثة تعديلات مهمة من أجل تعزيز التأثير الايجابي لبرنامج ”GO سياحة”', 'source': 'www.alahdat.net', 'link': 'https://www.alahdat.net/archives/203480', 'summary': 'الحكومة تقرر إدخال ثلاثة تعديلات مهمة من أجل تعزيز التأثير الايجابي لبرنامج ”GO سياحة”. الأحداث من الرباط أعلنت وزارة السياحة والصناعة التقليدية والاقتصاد الاجتماعي والتضامني أن الحكومة قررت إدخال ثلاثة تحسينات مهمة على برنامج “ Go Siyaha”،وذلك من أجل تعزيز تأثيره الإيجابي وخلق المزيد من فرص الشغل. وأوضحت الوزارة في بلاغ لها ،أنه بناء على النجاح الذي حققه، بدعمه لـ1000 مشروع حتى الآن،وبالنظر للإمكانات المقاولاتية الكبيرة في قطاع السياحة،', 'size': 2}, {'id': '213', 'title': 'لخلق فرص الشغل.. الحكومة تُدخل تحسينات مهمة على برنامج “Go Siyaha”', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/469609.html', 'summary': 'لخلق فرص الشغل.. الحكومة تُدخل تحسينات مهمة على برنامج “Go Siyaha”. متابعة أعلنت وزارة السياحة والصناعة التقليدية والاقتصاد الاجتماعي والتضامني أن الحكومة قررت إدخال ثلاثة تحسينات مهمة على برنامج “Go Siyaha”، وذلك من أجل تعزيز تأثيره الإيجابي وخلق المزيد من فرص الشغل. وأوضحت الوزارة في بلاغ أنه بناء على النجاح الذي حققه، بدعمه لـ 1000 مشروع حتى الآن، وبالنظر للإمكانات المقاولاتية الكبيرة في قطاع السياحة، قررت …', 'size': 2}, {'id': '243', 'title': 'برنامج GO” سياحة” يرفع جميع الحواجز أمام المقاولين في مجال السياحة', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/224714/', 'summary': 'برنامج GO” سياحة” يرفع جميع الحواجز أمام المقاولين في مجال السياحة. أعلنت وزارة السياحة والصناعة التقليدية والاقتصاد الاجتماعي والتضامني أن الحكومة قررت إدخال ثلاثة تحسينات مهمة على برنامج “Go Siyaha”، وذلك من أجل تعزيز تأثيره الإيجابي وخلق المزيد من فرص الشغل. وأوضحت الوزارة في بلاغ أنه بناء على النجاح الذي حققه، بدعمه لـ 1000 مشروع حتى الآن، وبالنظر للإمكانات المقاولاتية الكبيرة في قطاع السياحة، قررت الحكومة', 'size': 3}], 'main_title': 'برنامج GO” سياحة” يرفع جميع الحواجز أمام المقاولين في مجال السياحة'}, {'community_id': '1', 'articles': [{'id': '119', 'title': 'القضاء الكندي يدين هشام جيراندو بتهمة التشهير', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/society/409365.html', 'summary': 'القضاء الكندي يدين هشام جيراندو بتهمة التشهير. أصدرت المحكمة العليا في كيبيك، يوم الاثنين 14 يوليوز الجاري، حكمًا جزائيًا ضد هشام جيراندو، وهو يوتيوبر من أصل مغربي يقيم بمونتريال بكندا، أدانته من', 'size': 2}, {'id': '218', 'title': 'المحكمة العليا بكندا تُدين هشام جيراندو', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d8%a7%d9%84%d9%85%d8%ad%d9%83%d9%85%d8%a9-%d8%a7%d9%84%d8%b9%d9%84%d9%8a%d8%a7-%d8%a8%d9%83%d9%86%d8%af%d8%a7-%d8%aa%d9%8f%d8%af%d9%8a%d9%86-%d9%87%d8%b4%d8%a7%d9%85-%d8%ac%d9%8a%d8%b1%d8%a7%d9%86/', 'summary': 'المحكمة العليا بكندا تُدين هشام جيراندو.  – متابعات أصدرت المحكمة العليا في كيبيك، كندا، يوم الاثنين 14 يوليوز، حكمًا نهائيًا في حق اليوتيوبر المغربي المقيم بمونتريال هشام جيراندو، بعد إدانته بتهم التشهير ونشر معلومات...  المحكمة العليا بكندا تُدين هشام جيراندو     .', 'size': 2}], 'main_title': 'القضاء الكندي يدين هشام جيراندو بتهمة التشهير'}, {'community_id': '2', 'articles': [{'id': '122', 'title': 'أخنوش: زرتُ آيت بوكماز وأعرف إشكاليات ساكنتها جيدا ولا أقبل استغلالها سياسيا', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/social/409369.html', 'summary': 'أخنوش: زرتُ آيت بوكماز وأعرف إشكاليات ساكنتها جيدا ولا أقبل استغلالها سياسيا. \u200eأعرب رئيس الحكومة، عزيز أخنوش، عن رفضه المطلق للاستغلال السياسي للمسيرة الاحتجاجية التي نظمتها ساكنة منطقة "آيت بوكماز" بإقليم أزيلال، مؤكدا تفهمه لمطالب الساكنة ورفضه', 'size': 2}, {'id': '191', 'title': 'بعد محاصرته بأسئلة حول مسيرة آيت بوكماز.. أخنوش يتهم رئيس الجماعة بتأجيج الوضع', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a8%d8%b9%d8%af-%d9%85%d8%ad%d8%a7%d8%b5%d8%b1%d8%aa%d9%87-%d8%a8%d8%a3%d8%b3%d8%a6%d9%84%d8%a9-%d8%ad%d9%88%d9%84-%d9%85%d8%b3%d9%8a%d8%b1%d8%a9-%d8%a2%d9%8a%d8%aa-%d8%a8%d9%88%d9%83%d9%85%d8%a7/', 'summary': 'بعد محاصرته بأسئلة حول مسيرة آيت بوكماز.. أخنوش يتهم رئيس الجماعة بتأجيج الوضع. وجد رئيس الحكومة، عزيز أخنوش، نفسه في مرمى انتقادات لاذعة خلال جلسة المساءلة الشهرية بمجلس المستشارين، المنعقدة اليوم الثلاثاء، والتي خصصت لعرض الحصيلة الاقتصادية والمالية للحكومة وتقييم أثرها على دينامية الاستثمار والتشغيل، وذلك على خلفية الاحتجاجات التي قام بها ساكنة آيت بوكماز بإقليم أزيلال. مستشارون برلمانيون من المعارضة حملوا الحكومة مسؤولية ما وصفوه باستمرار مظاهر  بعد محاصرته بأسئلة حول مسيرة آيت بوكماز.. أخنوش يتهم رئيس الجماعة بتأجيج الوضع     .', 'size': 2}], 'main_title': 'أخنوش: زرتُ آيت بوكماز وأعرف إشكاليات ساكنتها جيدا ولا أقبل استغلالها سياسيا'}, {'community_id': '8', 'articles': [{'id': '125', 'title': 'من قلب الرباط .. حزب جاكوب زوما  يدعم المقترح المغربي للحكم الذاتي ويعتبر أنه يضمن للمغرب سيادته على الصحراء', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/politic/409373.html', 'summary': 'من قلب الرباط .. حزب جاكوب زوما يدعم المقترح المغربي للحكم الذاتي ويعتبر أنه يضمن للمغرب سيادته على الصحراء. قال جاكوب زوما، الرئيس السابق لجنوب إفريقيا وزعيم حزب "أومكونتو وي سيزوي" (MK)، إن حزبه يعتبر أن مقترح الحكم الذاتي المغربي "سيتيح حكامة محلية ملموسة', 'size': 3}, {'id': '132', 'title': 'اعتبره “ضامن لسيادة المغرب على الصحراء”.. حزب “أومكونتو وي سيزوي” الجنوب إفريقي يدعم المقترح المغربي للحكم الذاتي', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a7%d8%b9%d8%aa%d8%a8%d8%b1%d9%87-%d8%b6%d8%a7%d9%85%d9%86-%d9%84%d8%b3%d9%8a%d8%a7%d8%af%d8%a9-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d8%b9%d9%84%d9%89-%d8%a7%d9%84%d8%b5%d8%ad%d8%b1%d8%a7%d8%a1/', 'summary': 'اعتبره “ضامن لسيادة المغرب على الصحراء”.. حزب “أومكونتو وي سيزوي” الجنوب إفريقي يدعم المقترح المغربي للحكم الذاتي. قال جاكوب زوما، الرئيس السابق لجنوب إفريقيا وزعيم حزب “أومكونتو وي سيزوي” (MK)، إن حزبه يعتبر أن مقترح الحكم الذاتي المغربي “سيتيح حكامة محلية ملموسة من قبل ساكنة منطقة الصحراء، مع ضمان سيادة المغرب على الصحراء”. وقد عبر زوما عن هذا الموقف في تصريح للصحافة عقب مباحثاته مع وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين', 'size': 4}, {'id': '151', 'title': 'حزب “زوما” الجنوب إفريقي يدعم مقترح الحكم الذاتي المغربي', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/318419/', 'summary': 'حزب “زوما” الجنوب إفريقي يدعم مقترح الحكم الذاتي المغربي. قال جاكوب زوما، الرئيس السابق لجنوب إفريقيا وزعيم حزب “أومكونتو وي سيزوي” (MK)، إن حزبه يعتبر أن مقترح الحكم الذاتي المغربي “سيتيح حكامة محلية ملموسة من قبل ساكنة منطقة الصحراء، مع ضمان سيادة المغرب على الصحراء”. وقد عبر زوما عن هذا الموقف في تصريح للصحافة عقب مباحثاته مع وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين', 'size': 5}, {'id': '174', 'title': 'حزب جنوب إفريقي بارز يدعم سيادة المغرب على الصحراء', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1085750.html', 'summary': 'حزب جنوب إفريقي بارز يدعم سيادة المغرب على الصحراء. قال جاكوب زوما، الرئيس السابق لجنوب إفريقيا وزعيم حزب “أومكونتو وي سيزوي” (MK)، إن حزبه يعتبر أن مقترح الحكم الذاتي المغربي “سيتيح حكامة محلية ملموسة من قبل ساكنة منطقة الصحراء، مع ضمان سيادة المغرب على الصحراء”. وقد عبر زوما عن هذا الموقف في تصريح للصحافة عقب مباحثاته مع وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة المقيمين ظهرت المقالة حزب جنوب إفريقي بارز يدعم سيادة المغرب على الصحراء  .', 'size': 3}, {'id': '206', 'title': 'حزب “أومكونتو وي سيزوي” الجنوب إفريقي يدعم المقترح المغربي للحكم الذاتي', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/469624.html', 'summary': 'حزب “أومكونتو وي سيزوي” الجنوب إفريقي يدعم المقترح المغربي للحكم الذاتي. و.م.ع قال جاكوب زوما، الرئيس السابق لجنوب إفريقيا وزعيم حزب “أومكونتو وي سيزوي” (MK)، إن حزبه يعتبر أن مقترح الحكم الذاتي المغربي “سيتيح حكامة محلية ملموسة من قبل ساكنة منطقة الصحراء، مع ضمان سيادة المغرب على الصحراء”. وقد عبر زوما عن هذا الموقف في تصريح للصحافة عقب مباحثاته مع وزير الشؤون الخارجية والتعاون الإفريقي والمغاربة …', 'size': 2}], 'main_title': 'حزب “زوما” الجنوب إفريقي يدعم مقترح الحكم الذاتي المغربي'}, {'community_id': '7', 'articles': [{'id': '133', 'title': 'أخنوش: الحكومة رفعت الاستثمار العمومي من 230 مليار درهم سنة 2021 إلى 340 مليار درهم سنة 2025', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a3%d8%ae%d9%86%d9%88%d8%b4-%d8%a7%d9%84%d8%ad%d9%83%d9%88%d9%85%d8%a9-%d8%b1%d9%81%d8%b9%d8%aa-%d8%a7%d9%84%d8%a7%d8%b3%d8%aa%d8%ab%d9%85%d8%a7%d8%b1-%d8%a7%d9%84%d8%b9%d9%85%d9%88%d9%85%d9%8a/', 'summary': 'أخنوش: الحكومة رفعت الاستثمار العمومي من 230 مليار درهم سنة 2021 إلى 340 مليار درهم سنة 2025. أكد رئيس الحكومة عزيز أخنوش، اليوم الثلاثاء (15 يوليوز) بمجلس المستشارين، أن حكومته اتخذت التدابير اللازمة للرفع من وتيرة نمو الاقتصاد الوطني لاسيما من خلال تعزيز مجهود الاستثمار العمومي الذي ارتفع من 230 مليار درهم سنة 2021 إلى 340 مليار درهم سنة 2025. وخلال جلسة المساءلة الشهرية حول “الحصيلة الاقتصادية والمالية وأثرها على دينامية الاستثمار', 'size': 3}, {'id': '153', 'title': 'هل نجحت حكومة أخنوش في حماية جيوب المغاربة من تقلبات الأسعار؟', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/318395/', 'summary': 'هل نجحت حكومة أخنوش في حماية جيوب المغاربة من تقلبات الأسعار؟. أكد رئيس الحكومة عزيز أخنوش، اليوم الثلاثاء، أن الإجراءات التي اتخذتها الحكومة، فضلا عن تدابير السياسة النقدية، مكنت من تقليص معدل التضخم وضمان استقرار أسعار المواد الأساسية. وأبرز خلال جلسة الأسئلة الشفهية الشهرية الموجهة إلى رئيس الحكومة حول السياسة العامة، بمجلس المستشارين، أن الحكومة خصصت غلافا ماليا بلغ 2ر88 مليار درهم خلال الفترة ما بين', 'size': 3}, {'id': '211', 'title': 'أخنوش: الحكومة رفعت الاستثمار العمومي إلى 340 مليار درهم', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/469612.html', 'summary': 'أخنوش: الحكومة رفعت الاستثمار العمومي إلى 340 مليار درهم. قال رئيس الحكومة، عزيز أخنوش، اليوم الثلاثاء بمجلس المستشارين، إن حكومته اتخذت تدابير للرفع من وتيرة نمو الاقتصاد الوطني لاسيما من خلال تعزيز مجهود الاستثمار العمومي الذي ارتفع من 230 مليار درهم سنة 2021 إلى 340 مليار درهم سنة 2025. وأضاف أخنوش، خلال الجلسة العمومية للأسئلة الشفهية الشهرية، أن هذا الأمر يشكل رافعة للاستراتيجيات القطاعية …', 'size': 3}], 'main_title': 'أخنوش: الحكومة رفعت الاستثمار العمومي من 230 مليار درهم سنة 2021 إلى 340 مليار درهم سنة 2025'}, {'community_id': '0', 'articles': [{'id': '241', 'title': 'السغروشني: الحكامة الرقمية رافعة أساسية من أجل إدارة عمومية أكثر فعالية', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/224720/', 'summary': 'السغروشني: الحكامة الرقمية رافعة أساسية من أجل إدارة عمومية أكثر فعالية. و م ع أكدت الوزيرة المنتدبة لدى رئيس الحكومة المكلفة بالانتقال الرقمي وإصلاح الإدارة، أمل الفلاح السغروشني، اليوم الثلاثاء بالرباط، أن الحكامة الرقمية تشكل رافعة أساسية من أجل إدارة عمومية أكثر شفافية وفعالية. وأبرزت السغروشني، في كلمة خلال المنتدى الوزاري الإفريقي السادس عشر حول تحديث الإدارة العمومية ومؤسسات الدولة، الذي نظمه المركز الإفريقي للتدريب', 'size': 2}, {'id': '258', 'title': 'الوزيرة السغروشني: الحكامة الرقمية رافعة لإدارة عمومية شفافة وفعالة في إفريقيا', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d9%88%d8%b2%d9%8a%d8%b1%d8%a9-%d8%a7%d9%84%d8%b3%d8%ba%d8%b1%d9%88%d8%b4%d9%86%d9%8a-%d8%a7%d9%84%d8%ad%d9%83%d8%a7%d9%85%d8%a9-%d8%a7%d9%84%d8%b1%d9%82%d9%85%d9%8a%d8%a9-%d8%b1%d8%a7/', 'summary': 'الوزيرة السغروشني: الحكامة الرقمية رافعة لإدارة عمومية شفافة وفعالة في إفريقيا. أكدت الوزيرة المنتدبة لدى رئيس الحكومة المكلفة بالانتقال الرقمي وإصلاح الإدارة، أمل الفلاح السغروشني، اليوم الثلاثاء بالرباط، أن الحكامة الرقمية تشكل رافعة أساسية من أجل إدارة عمومية أكثر شفافية وفعالية. وأبرزت السغروشني، في كلمة خلال المنتدى الوزاري الإفريقي السادس عشر حول تحديث الإدارة العمومية ومؤسسات الدولة، الذي نظمه المركز الإفريقي للتدريب والبحث الإداري …  الوزيرة السغروشني: الحكامة الرقمية رافعة لإدارة عمومية شفافة وفعالة في إفريقيا     .', 'size': 2}], 'main_title': 'السغروشني: الحكامة الرقمية رافعة أساسية من أجل إدارة عمومية أكثر فعالية'}, {'community_id': '4', 'articles': [{'id': '249', 'title': 'بدء تشغيل خط أنابيب الجرف الأصفر-خريبكة لتحلية المياه', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%a8%d8%af%d8%a1-%d8%aa%d8%b4%d8%ba%d9%8a%d9%84-%d8%ae%d8%b7-%d8%a3%d9%86%d8%a7%d8%a8%d9%8a%d8%a8-%d8%a7%d9%84%d8%ac%d8%b1%d9%81-%d8%a7%d9%84%d8%a3%d8%b5%d9%81%d8%b1-%d8%ae%d8%b1%d9%8a%d8%a8%d9%83/', 'summary': 'بدء تشغيل خط أنابيب الجرف الأصفر-خريبكة لتحلية المياه. المساء اليوم – خريبكة: أعلنت شركة “OCP GREEN WATER”، التابعة لمجموعة المكتب الشريف للفوسفاط، أمس الاثنين بخريبكة، عن بدء تشغيل خط أنابيب الجرف الأصفر-خريبكة، الذي يربط محطة تحلية المياه المتواجدة بالجرف الأصفر بالموقع المنجمي بخريبكة', 'size': 2}, {'id': '261', 'title': 'الإعلان عن بدء تشغيل خط أنابيب الجرف الأصفر-خريبكة', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d8%a5%d8%b9%d9%84%d8%a7%d9%86-%d8%b9%d9%86-%d8%a8%d8%af%d8%a1-%d8%aa%d8%b4%d8%ba%d9%8a%d9%84-%d8%ae%d8%b7-%d8%a3%d9%86%d8%a7%d8%a8%d9%8a%d8%a8-%d8%a7%d9%84%d8%ac%d8%b1%d9%81-%d8%a7%d9%84/', 'summary': 'الإعلان عن بدء تشغيل خط أنابيب الجرف الأصفر-خريبكة. أعلنت شركة “OCP GREEN WATER”، الذراع المائي لمجموعة المكتب الشريف للفوسفاط (OCP)، أمس الاثنين بخريبكة، عن بدء التشغيل الرسمي لخط أنابيب الجرف الأصفر-خريبكة، ويربط هذا الخط الحيوي، الذي يمتد لمسافة تزيد عن 200 كيلومتر (203 كلم تحديداً)، محطة تحلية المياه المتواجدة بالجرف الأصفر بالموقع المنجمي الكبير في خريبكة، الذي يضم أكبر منجم لاستغلال …  الإعلان عن بدء تشغيل خط أنابيب الجرف الأصفر-خريبكة     .', 'size': 2}], 'main_title': 'بدء تشغيل خط أنابيب الجرف الأصفر-خريبكة لتحلية المياه'}, {'community_id': '5', 'articles': [{'id': '328', 'title': 'انطلاق أشغال الدورة الـ20 للمؤتمر الوزاري الإفريقي حول البيئة بمشاركة المغرب', 'source': 'www.akhbarona.com', 'link': 'https://www.akhbarona.com/divers/409383.html', 'summary': 'انطلاق أشغال الدورة الـ20 للمؤتمر الوزاري الإفريقي حول البيئة بمشاركة المغرب. انطلقت، اليوم الأربعاء بمقر برنامج الأمم المتحدة للبيئة بنيروبي، أشغال الدورة العادية العشرين للمؤتمر الوزاري الإفريقي حول البيئة، بمشاركة المملكة المغربية. ويمثل المملكة في هذه الدورة،', 'size': 2}, {'id': '400', 'title': 'نيروبي.. انطلاق الدورة الـ20 للمؤتمر الوزاري الإفريقي حول البيئة بمشاركة المغرب', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/469686.html', 'summary': 'نيروبي.. انطلاق الدورة الـ20 للمؤتمر الوزاري الإفريقي حول البيئة بمشاركة المغرب. انطلقت، اليوم الأربعاء بمقر برنامج الأمم المتحدة للبيئة بنيروبي، أشغال الدورة العادية العشرين للمؤتمر الوزاري الإفريقي حول البيئة، بمشاركة المملكة المغربية.', 'size': 2}], 'main_title': 'انطلاق أشغال الدورة الـ20 للمؤتمر الوزاري الإفريقي حول البيئة بمشاركة المغرب'}, {'community_id': '6', 'articles': [{'id': '423', 'title': 'طقس الأربعاء.. حار مع زخات رعدية مرتقبة في بعض المناطق', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/224739/', 'summary': 'طقس الأربعاء.. حار مع زخات رعدية مرتقبة في بعض المناطق. كواليس اليوم تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الأربعاء، أن يبقى الطقس حارا بكل من السهول الداخلية الشمالية والوسطى وهضاب الفوسفاط ووالماس والجنوب الشرقي للبلاد وبداخل الأقاليم الجنوبية. كما يرتقب نزول زخات رعدية وسقوط برد مصحوبا بهبات رياح محلية داخل الأقاليم الجنوبية، فضلا عن تمركز سحب ركامية مرفوقة بقطرات مطرية متفرقة ورعد محلي', 'size': 2}, {'id': '435', 'title': 'توقعات أحوال الطقس اليوم الأربعاء', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%aa%d9%88%d9%82%d8%b9%d8%a7%d8%aa-%d8%a3%d8%ad%d9%88%d8%a7%d9%84-%d8%a7%d9%84%d8%b7%d9%82%d8%b3-%d8%a7%d9%84%d9%8a%d9%88%d9%85-%d8%a7%d9%84%d8%a3%d8%b1%d8%a8%d8%b9%d8%a7%d8%a1-28/', 'summary': 'توقعات أحوال الطقس اليوم الأربعاء. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة ليومه الأربعاء، أن يبقى الطقس حارا بكل من السهول الداخلية الشمالية والوسطى وهضاب الفوسفاط ووالماس والجنوب الشرقي للبلاد وبداخل الأقاليم الجنوبية. كما يرتقب نزول زخات رعدية وسقوط برد مصحوبا بهبات رياح محلية داخل الأقاليم الجنوبية، فضلا عن تمركز سحب ركامية مرفوقة بقطرات مطرية متفرقة ورعد محلي فوق …  توقعات أحوال الطقس اليوم الأربعاء     .', 'size': 2}], 'main_title': 'طقس الأربعاء.. حار مع زخات رعدية مرتقبة في بعض المناطق'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    