<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 07/07/2025 - 18h27</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '2', 'title': 'تكوين في التحري عن ادعاءات التعذيب', 'source': 'www.hespress.com', 'link': 'https://www.hespress.com/%d8%aa%d9%83%d9%88%d9%8a%d9%86-%d9%81%d9%8a-%d8%a7%d9%84%d8%aa%d8%ad%d8%b1%d9%8a-%d8%b9%d9%86-%d8%a7%d8%af%d8%b9%d8%a7%d8%a1%d8%a7%d8%aa-%d8%a7%d9%84%d8%aa%d8%b9%d8%b0%d9%8a%d8%a8-1588581.html', 'summary': 'تكوين في التحري عن ادعاءات التعذيب. أعطى هشام البلاوي، الوكيل العام للملك لدى محكمة النقض رئيس النيابة العامة، اليوم الاثنين بالرباط، انطلاقة الدورة التكوينية الوطنية حول “بروتوكول إسطنبول: استخدام أدلة الطب الشرعي في التحري والتحقيق في ادعاءات التعذيب”، المنظمة من طرف رئاسة النيابة العامة، بشراكة مع المجلس الأعلى للسلطة القضائية، وبدعم من مركز جنيف لحوكمة قطاع الأمن، وذلك لفائدة الأطباء الشرعيين  تكوين في التحري عن ادعاءات التعذيب     - هسبريس جريدة إلكترونية مغربية .', 'size': 4}, {'id': '117', 'title': 'رئاسة النيابة العامة تطلق دورة تكوينية متخصصة حول بروتوكول إسطنبول لفائدة الأطباء الشرعيين', 'source': 'assabah.ma', 'link': 'https://assabah.ma/857780.html', 'summary': 'رئاسة النيابة العامة تطلق دورة تكوينية متخصصة حول بروتوكول إسطنبول لفائدة الأطباء الشرعيين. أعطى هشام البلاوي، الوكيل العام للملك لدى محكمة النقض، رئيس النيابة العامة، صباح اليوم (الإثنين) بالرباط، انطلاقة أشغال دورة تكوينية وطنية متخصصة حول “بروتوكول إسطنبول: استخدام أدلة الطب الشرعي في التحري والتحقيق في ادعاءات التعذيب”، لفائدة عدد من الأطباء الشرعيين من مختلف جهات المملكة. وتنظم هذه الدورةأكمل القراءة » المقالة رئاسة النيابة العامة تطلق دورة تكوينية متخصصة حول بروتوكول إسطنبول لفائدة الأطباء الشرعيين  .', 'size': 3}, {'id': '144', 'title': 'النيابة العامة تعزز قدرات الأطباء الشرعيين لكشف مزاعم التعذيب', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1083638.html', 'summary': 'النيابة العامة تعزز قدرات الأطباء الشرعيين لكشف مزاعم التعذيب. أطلقت النيابة العامة، اليوم الإثنين 7 يوليوز 2025 بالرباط، دورة تكوينية لفائدة الأطباء الشرعيين من مختلف أنحاء المملكة، من أجل تعزيز قدراتهم وكفاءاتهم للتحري والتحقيق في ادعاءات التعذيب. وأفاد بلاغ لرئاسة النيابة العامة أن الوكيل العام للملك لدى محكمة النقض، رئيس النيابة العامة، هشام البلاوي، أعطى انطلاقة الدورة التكوينية الوطنية حول “بروتوكول إسطنبول: استخدام أدلة ظهرت المقالة النيابة العامة تعزز قدرات الأطباء الشرعيين لكشف مزاعم التعذيب  .', 'size': 5}, {'id': '163', 'title': 'لفائدة الأطباء الشرعيين..  رئيس النيابة العامة يعطي انطلاقة دورة تكوينية وطنية', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d9%84%d9%81%d8%a7%d8%a6%d8%af%d8%a9-%d8%a7%d9%84%d8%a3%d8%b7%d8%a8%d8%a7%d8%a1-%d8%a7%d9%84%d8%b4%d8%b1%d8%b9%d9%8a%d9%8a%d9%86-%d8%b1%d8%a6%d9%8a%d8%b3-%d8%a7%d9%84%d9%86%d9%8a%d8%a7%d8%a8%d8%a9/', 'summary': 'لفائدة الأطباء الشرعيين.. رئيس النيابة العامة يعطي انطلاقة دورة تكوينية وطنية. أعطى هشام البلاوي، الوكيل العام للملك لدى محكمة النقض، رئيس النيابة العامة، صباح اليوم الإثنين 07 يوليوز 2025 بالرباط، انطلاقة الدورة التكوينية الوطنية حول "بروتوكول إسطنبول: استخدام أدلة الطب الشرعي في التحري والتحقيق في ادعاءات التعذيب"، المنظمة من طرف رئاسة النيابة العامة، بشراكة مع المجلس الأعلى للسلطة القضائية، وبدعم من مركز جنيف لحوكمة قطاع الأمن،  لفائدة الأطباء الشرعيين.. رئيس النيابة العامة يعطي انطلاقة دورة تكوينية وطنية     .', 'size': 5}, {'id': '209', 'title': 'الرباط.. البلاوي يعطي انطلاقة دورة تكوينية حول بروتوكول إسطنبول لفائدة الأطباء الشرعيين', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/224234/', 'summary': 'الرباط.. البلاوي يعطي انطلاقة دورة تكوينية حول بروتوكول إسطنبول لفائدة الأطباء الشرعيين. كواليس اليوم أعطى هشام البلاوي، الوكيل العام للملك لدى محكمة النقض، رئيس النيابة العامة، صباح اليوم الإثنين بالرباط، انطلاقة الدورة التكوينية الوطنية حول “بروتوكول إسطنبول: استخدام أدلة الطب الشرعي في التحري والتحقيق في ادعاءات التعذيب”، المنظمة من طرف رئاسة النيابة العامة، بشراكة مع المجلس الأعلى للسلطة القضائية، وبدعم من مركز جنيف لحوكمة قطاع الأمن،', 'size': 4}], 'main_title': 'النيابة العامة تعزز قدرات الأطباء الشرعيين لكشف مزاعم التعذيب'}, {'community_id': '1', 'articles': [{'id': '113', 'title': 'بتعليمات ملكية سامية.. القوات المسلحة الملكية تشارك في احتفالات ذكرى استقلال جمهوية القمر الاتحادية', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a8%d8%aa%d8%b9%d9%84%d9%8a%d9%85%d8%a7%d8%aa-%d9%85%d9%84%d9%83%d9%8a%d8%a9-%d8%b3%d8%a7%d9%85%d9%8a%d8%a9-%d8%a7%d9%84%d9%82%d9%88%d8%a7%d8%aa-%d8%a7%d9%84%d9%85%d8%b3%d9%84%d8%ad%d8%a9-%d8%a7/', 'summary': 'بتعليمات ملكية سامية.. القوات المسلحة الملكية تشارك في احتفالات ذكرى استقلال جمهوية القمر الاتحادية. تنفيذا للتعليمات السامية لصاحب الجلالة الملك محمد السادس، القائد الأعلى ورئيس أركان الحرب العامة للقوات المسلحة الملكية، شاركت تجريدة من القوات المسلحة الملكية في إحياء الذكرى الخمسين لاستقلال جمهورية القمر الاتحادية، وذلك استجابة لدعوة وجهت إلى المغرب. وذكر بلاغ للقيادة العامة للقوات المسلحة الملكية أن هذه التجريدة المكونة من فرقة تابعة للواء الثاني للمشاة المظليين،', 'size': 3}, {'id': '215', 'title': 'بتعليمات ملكية.. القوات المسلحة الملكية تشارك في احتفالات الذكرى 50 لاستقلال جمهوية القمر الاتحادية', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/224210/', 'summary': 'بتعليمات ملكية.. القوات المسلحة الملكية تشارك في احتفالات الذكرى 50 لاستقلال جمهوية القمر الاتحادية. و م ع تنفيذا للتعليمات السامية لصاحب الجلالة الملك محمد السادس، القائد الأعلى ورئيس أركان الحرب العامة للقوات المسلحة الملكية، شاركت تجريدة من القوات المسلحة الملكية في إحياء الذكرى الخمسين لاستقلال جمهورية القمر الاتحادية، وذلك استجابة لدعوة وجهت إلى المغرب. وذكر بلاغ للقيادة العامة للقوات المسلحة الملكية أن هذه التجريدة المكونة من فرقة تابعة', 'size': 3}, {'id': '235', 'title': 'تجريدة من القوات المسلحة الملكية تشارك في إحياء الذكرى الخمسين لاستقلال جمهورية القمر', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%aa%d8%ac%d8%b1%d9%8a%d8%af%d8%a9-%d9%85%d9%86-%d8%a7%d9%84%d9%82%d9%88%d8%a7%d8%aa-%d8%a7%d9%84%d9%85%d8%b3%d9%84%d8%ad%d8%a9-%d8%a7%d9%84%d9%85%d9%84%d9%83%d9%8a%d8%a9-%d8%aa%d8%b4%d8%a7%d8%b1/', 'summary': 'تجريدة من القوات المسلحة الملكية تشارك في إحياء الذكرى الخمسين لاستقلال جمهورية القمر. تنفيذا للتعليمات السامية للملك محمد السادس، القائد الأعلى ورئيس أركان الحرب العامة للقوات المسلحة الملكية، شاركت تجريدة من القوات المسلحة الملكية في إحياء الذكرى الخمسين لاستقلال جمهورية القمر الاتحادية، وذلك استجابة لدعوة وجهت إلى المغرب. وذكر بلاغ للقيادة العامة للقوات المسلحة الملكية، أن هذه التجريدة المكونة من فرقة تابعة للواء الثاني للمشاة المظليين، شاركت …  تجريدة من القوات المسلحة الملكية تشارك في إحياء الذكرى الخمسين لاستقلال جمهورية القمر     .', 'size': 3}], 'main_title': 'بتعليمات ملكية سامية.. القوات المسلحة الملكية تشارك في احتفالات ذكرى استقلال جمهوية القمر الاتحادية'}, {'community_id': '4', 'articles': [{'id': '145', 'title': '“الكاف” يرفع دعم الأندية في المسابقات القارية إلى 100 ألف دولار', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1083633.html', 'summary': '“الكاف” يرفع دعم الأندية في المسابقات القارية إلى 100 ألف دولار. قرر الاتحاد الإفريقي لكرة القدم “كاف”، رفع قيمة الدعم المالي للأندية المشاركة في المسابقات القارية، وذلك في إطار الدعم والمساندة لتعزيز التنافس الكروي في القارة السمراء. وأكد الكاف في بلاغ له، أنه يعمل حالياً على مضاعفة مساهمته المالية لأكثر من 130 نادياً إفريقياً مشاركاً في دوري أبطال إفريقيا وكأس الكونفدرالية، وذلك بقرار من الرئيس موتسيبي، ظهرت المقالة “الكاف” يرفع دعم الأندية في المسابقات القارية إلى 100 ألف دولار  .', 'size': 2}, {'id': '166', 'title': '"الكاف" تضاعف مكافآت الأندية المشاركة في المسابقات القارية', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a7%d9%84%d9%83%d8%a7%d9%81-%d8%aa%d8%b6%d8%a7%d8%b9%d9%81-%d9%85%d9%83%d8%a7%d9%81%d8%a2%d8%aa-%d8%a7%d9%84%d8%a3%d9%86%d8%af%d9%8a%d8%a9-%d8%a7%d9%84%d9%85%d8%b4%d8%a7%d8%b1%d9%83%d8%a9/', 'summary': '"الكاف" تضاعف مكافآت الأندية المشاركة في المسابقات القارية. أعلنت الكونفدرالية الإفريقية لكرة القدم "الكاف" عن مضاعفة الدعم المالي المخصص للأندية المشاركة في مسابقتي دوري أبطال إفريقيا وكأس الكونفدرالية. وحسب بلاغ صادر عن الجهاز الكروي، اليوم الإثنين، فإن الأندية المشاركة في المسابقات القارية، ستحصل على مكافأة مالية قدرها 100 ألف دولار، بدلا من 50 ألف دولار التي تم صرفها في الموسم الماضي، في خطوة  "الكاف" تضاعف مكافآت الأندية المشاركة في المسابقات القارية     .', 'size': 2}], 'main_title': '“الكاف” يرفع دعم الأندية في المسابقات القارية إلى 100 ألف دولار'}, {'community_id': '6', 'articles': [{'id': '167', 'title': 'توقعات أحوال الطقس لليوم الاثنين', 'source': 'soltana.ma', 'link': 'https://soltana.ma/1357544.html', 'summary': 'توقعات أحوال الطقس لليوم الاثنين. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الإثنين، أن يظل الطقس حارا نسبيا بالجنوب الشرقي للبلاد وشرق الأقاليم الجنوبية والمنطقة الشرقية وجنوب الريف والسهول وغرب الأطلس الكبير. ويتوقع ظهور سحب منخفضة كثيفة نسبيا، مع رذاذ على شمال غرب الأقاليم الصحراوية، وتشكل ضباب محلي صباحا وليلا بالسواحل المتوسطية والسهول الشمالية وهضاب الفوسفاط وولماس وشمال غرب الأقاليم', 'size': 3}, {'id': '212', 'title': 'طقس الاثنين.. حار نسبيا مع زخات مطرية مرتقبة في بعض المناطق', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/224221/', 'summary': 'طقس الاثنين.. حار نسبيا مع زخات مطرية مرتقبة في بعض المناطق. كواليس اليوم تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الاثنين، أن يظل الطقس حارا نسبيا بالجنوب الشرقي للبلاد وشرق الأقاليم الجنوبية والمنطقة الشرقية وجنوب الريف والسهول وغرب الأطلس الكبير. ويتوقع ظهور سحب منخفضة كثيفة نسبيا، مع رذاذ على شمال غرب الأقاليم الصحراوية، وتشكل ضباب محلي صباحا وليلا بالسواحل المتوسطية والسهول الشمالية وهضاب الفوسفاط وولماس', 'size': 3}, {'id': '233', 'title': 'طقس حار وزخات رعدية مرتقبة اليوم الإثنين بعدد من مناطق المملكة', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%b7%d9%82%d8%b3-%d8%ad%d8%a7%d8%b1-%d9%88%d8%b2%d8%ae%d8%a7%d8%aa-%d8%b1%d8%b9%d8%af%d9%8a%d8%a9-%d9%85%d8%b1%d8%aa%d9%82%d8%a8%d8%a9-%d8%a7%d9%84%d9%8a%d9%88%d9%85-%d8%a7%d9%84%d8%a5%d8%ab%d9%86/', 'summary': 'طقس حار وزخات رعدية مرتقبة اليوم الإثنين بعدد من مناطق المملكة. تتوقع المديرية العامة للأرصاد الجوية، بالنسبة لليوم الإثنين، أن يظل الطقس حارا نسبيا بالجنوب الشرقي للبلاد وشرق الأقاليم الجنوبية والمنطقة الشرقية وجنوب الريف والسهول وغرب الأطلس الكبير. ويتوقع ظهور سحب منخفضة كثيفة نسبيا، مع رذاذ على شمال غرب الأقاليم الصحراوية، وتشكل ضباب محلي صباحا وليلا بالسواحل المتوسطية والسهول الشمالية وهضاب الفوسفاط وولماس وشمال …  طقس حار وزخات رعدية مرتقبة اليوم الإثنين بعدد من مناطق المملكة     .', 'size': 3}], 'main_title': 'توقعات أحوال الطقس لليوم الاثنين'}, {'community_id': '3', 'articles': [{'id': '227', 'title': 'وزارة الصحة: 483 لسعة عقرب بأزيلال في يونيو المنصرم', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d9%88%d8%b2%d8%a7%d8%b1%d8%a9-%d8%a7%d9%84%d8%b5%d8%ad%d8%a9-483-%d9%84%d8%b3%d8%b9%d8%a9-%d8%b9%d9%82%d8%b1%d8%a8-%d8%a8%d8%a3%d8%b2%d9%8a%d9%84%d8%a7%d9%84-%d9%81%d9%8a-%d9%8a%d9%88%d9%86%d9%8a/', 'summary': 'وزارة الصحة: 483 لسعة عقرب بأزيلال في يونيو المنصرم. أكدت المندوبية الإقليمية لوزارة الصحة والحماية الاجتماعية لأزيلال، أن إقليم أزيلال سجل خلال شهر يونيو المنصرم 483 حالة لسعة عقرب. وأوضحت المندوبية، عبر صفحتها الرسمية بموقع التواصل الاجتماعي فيسبوك، أنه لم يتم تسجيل أي حالة وفاة، وذلك بفضل التدخل السريع والفعّال للأطر الصحية بالمراكز والمستشفيات التابعة لمندوبية وزارة الصحة والحماية الاجتماعية بأزيلال. وأشارت …  وزارة الصحة: 483 لسعة عقرب بأزيلال في يونيو المنصرم     .', 'size': 2}, {'id': '426', 'title': '483 حالة لسعة عقرب خلال شهر يونيو الماضي بإقليم أزيلال', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/224259/', 'summary': '483 حالة لسعة عقرب خلال شهر يونيو الماضي بإقليم أزيلال. أحمد التدلاوي أفادت المندوبية الإقليمية لوزارة الصحة والحماية الاجتماعية بأزيلال بأنه جرى تسجيل 483 حالة لسعة عقرب خلال شهر يونيو الماضي بمختلف مناطق الإقليم، دون أن تسجل أي حالة وفاة، بفضل التدخل السريع والفعال للأطر الصحية بالمراكز والمستشفيات المحلية. وأوضحت المندوبية، عبر صفحتها الرسمية على موقع التواصل الاجتماعي “فيسبوك”، أن أكبر عدد من الحالات', 'size': 2}], 'main_title': 'وزارة الصحة: 483 لسعة عقرب بأزيلال في يونيو المنصرم'}, {'community_id': '2', 'articles': [{'id': '365', 'title': 'أخنوش: قطعنا مع “الترقيع” و”الصحاري الطبية” بثورة صحية تلبي طموح المغاربة', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1083693.html', 'summary': 'أخنوش: قطعنا مع “الترقيع” و”الصحاري الطبية” بثورة صحية تلبي طموح المغاربة. أكد رئيس الحكومة، عزيز أخنوش، أن قطاع الصحة في المغرب يشهد “ثورة حقيقية” تضع حدا للحلول الترقيعية وتبشر بمنظومة صحية عصرية ومتكاملة، قادرة على تلبية تطلعات المغاربة وضمان العدالة المجالية. وشدد أخنوش اليوم الاثنين 7 يوليوز 2025، خلال الجلسة الشهرية المخصصة للأسئلة الموجهة لرئيس الحكومة بمجلس النواب، على أن الاهتمام العميق بقطاع الصحة يمثل واجهة ظهرت المقالة أخنوش: قطعنا مع “الترقيع” و”الصحاري الطبية” بثورة صحية تلبي طموح المغاربة  .', 'size': 3}, {'id': '400', 'title': 'ملفات مهمة على طاولة مجلس الحكومة الخميس المقبل', 'source': 'machahid24.com', 'link': 'https://machahid24.com/politique/468779.html', 'summary': 'ملفات مهمة على طاولة مجلس الحكومة الخميس المقبل. ينعقد، يوم الخميس المقبل، مجلس للحكومة برئاسة عزيز أخنوش، رئيس الحكومة. وذكر بلاغ لرئاسة الحكومة أن المجلس سيتدارس في بدايته ثلاثة مشاريع قوانين، يتعلق الأول منها بتغيير القانون المتعلق بالحالة المدنية، والثاني بحماية الحيوانات الضالة والوقاية من أخطارها، والثالث بإحداث “مؤسسة المغرب 2030”. وأضاف أن المجلس سيواصل أشغاله بدراسة مشروع مرسوم يتعلق بتحديد تأليف اللجنة …', 'size': 3}, {'id': '428', 'title': 'القانون المتعلق بالحالة المدنية على طاولة المجلس الحكومي', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/224250/', 'summary': 'القانون المتعلق بالحالة المدنية على طاولة المجلس الحكومي. كواليس اليوم ينعقد، يوم الخميس المقبل، مجلس للحكومة برئاسة عزيز أخنوش، رئيس الحكومة. وأفادت رئاسة الحكومة، في بلاغ لها، أن المجلس سيتدارس في بدايته ثلاثة مشاريع قوانين، يتعلق الأول منها بتغيير القانون المتعلق بالحالة المدنية، والثاني بحماية الحيوانات الضالة والوقاية من أخطارها، والثالث بإحداث “مؤسسة المغرب 2030”. وأضاف أن المجلس سيواصل أشغاله بدراسة مشروع', 'size': 3}], 'main_title': 'أخنوش: قطعنا مع “الترقيع” و”الصحاري الطبية” بثورة صحية تلبي طموح المغاربة'}, {'community_id': '5', 'articles': [{'id': '373', 'title': 'المغرب يعزز حماية تراثه الثقافي بتوقيع اتفاقية مع المنظمة العالمية للملكية الفكرية', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1083695.html', 'summary': 'المغرب يعزز حماية تراثه الثقافي بتوقيع اتفاقية مع المنظمة العالمية للملكية الفكرية. وقع صباح اليوم الإثنين 7 يوليوز 2025 بجنيف، وزير الشباب والثقافة والتواصل محمد المهدي بنسعيد، مذكرة تفاهم مع المدير العام للمنظمة العالمية للملكية الفكرية OMPI، من أجل تعزيز التعاون المشترك في مجال الملكية الفكرية، لاسيما فيما يتعلق بحقوق المؤلف والحقوق المجاورة والحماية القانونية للتراث الثقافي المغربي. وتهم هذه الاتفاقية أيضا، بحسب بلاغ لوزارة الشباب والثقافة ظهرت المقالة المغرب يعزز حماية تراثه الثقافي بتوقيع اتفاقية مع المنظمة العالمية للملكية الفكرية  .', 'size': 3}, {'id': '402', 'title': 'بجنيف.. المغرب يوقع مذكرة تفاهم تضمن الحماية القانونية لتراثه الثقافي', 'source': 'machahid24.com', 'link': 'https://machahid24.com/panorama/468776.html', 'summary': 'بجنيف.. المغرب يوقع مذكرة تفاهم تضمن الحماية القانونية لتراثه الثقافي. وقع صباح اليوم الاثنين بجنيف، محمد المهدي بنسعيد وزير الشباب والثقافة والتواصل، مذكرة تفاهم مع المدير العام للمنظمة العالمية للملكية الفكرية OMPI.', 'size': 2}, {'id': '440', 'title': 'بنسعيد يوقع مذكرة تفاهم مع مدير المنظمة العالمية للملكية الفكرية للحماية القانونية للتراث الثقافي المغربي', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a8%d9%86%d8%b3%d8%b9%d9%8a%d8%af-%d9%8a%d9%88%d9%82%d8%b9-%d9%85%d8%b0%d9%83%d8%b1%d8%a9-%d8%aa%d9%81%d8%a7%d9%87%d9%85-%d9%85%d8%b9-%d9%85%d8%af%d9%8a%d8%b1-%d8%a7%d9%84%d9%85%d9%86%d8%b8%d9%85/', 'summary': 'بنسعيد يوقع مذكرة تفاهم مع مدير المنظمة العالمية للملكية الفكرية للحماية القانونية للتراث الثقافي المغربي. وقع صباح اليوم الإثنين بجنيف، محمد المهدي بنسعيد وزير الشباب والثقافة والتواصل، مذكرة تفاهم مع المدير العام للمنظمة العالمية للملكية الفكرية “OMPI”. وحسب بلاغ وزارة الشباب والثقافة والتواصل، فإن هذه الاتفاقية تروم لتعزيز التعاون المشترك في مجال الملكية الفكرية، لاسيما فيما يتعلق بحقوق المؤلف والحقوق المجاورة والحماية القانونية للتراث الثقافي المغربي. وأوضح المصدر، …  بنسعيد يوقع مذكرة تفاهم مع مدير المنظمة العالمية للملكية الفكرية للحماية القانونية للتراث الثقافي المغربي     .', 'size': 2}], 'main_title': 'المغرب يعزز حماية تراثه الثقافي بتوقيع اتفاقية مع المنظمة العالمية للملكية الفكرية'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    