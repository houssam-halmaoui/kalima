<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أهم الأخبار - Treemap Carousel</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.4.1/swiper-bundle.min.js"></script>
    
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f4f4f4;
              
        }
        
        .swiper {
            width: 100%;
            height: 90vh;
            margin-top: 10px;
        }
        
        .swiper-slide {
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 10px;
            width: calc(100% - 20px); /* Utilisez calc pour soustraire les marges */
            margin-left: auto;
            margin-right: auto;

        }
        
        .treemap-container {
           width: 100%;
            height: 100%;
            margin-bottom: 10px;
            direction: rtl; /* Changez rtl en ltr */
            position: relative;
          z-index: 1;

        }
        
        .community-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            position: relative;
              z-index: 10;
              padding: 10px;
              background: rgba(255, 255, 255, 0.8); /* Fond semi-transparent pour contraste */
              text-align: center;
        }
        
        .node {
            overflow: hidden;
            border: 1px solid white;
            position: absolute;
            transition: all 0.3s;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .node:hover {
            opacity: 0.9;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .node-content {
            padding: 8px;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .node-title {
            font-size: 14px;  
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .node-source {
            font-size: 12px;  
            color: #666;
        }
        
        .tooltip {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            font-size: 16px; 
            max-width: 90%;
            width: 350px;
            color: #333;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            direction: rtl;
            text-align: right;
        }
        
        .tooltip-title {
            font-size: 16px;  
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .tooltip-source {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }
        
        .tooltip-summary {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .swiper-pagination {
            position: relative;
            bottom: 0;
            margin-top: 15px;
        }
        
        .swiper-pagination-bullet {
            width: 12px;
            height: 12px;
            background-color: #ccc;
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        .swiper-pagination-bullet-active {
            background-color: #007aff;
            opacity: 1;
            width: 20px;
            border-radius: 6px;
        }
        
        .swiper-button-next, .swiper-button-prev {
            color: #fff;
            background-color: rgba(0, 0, 0, 0.4);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .swiper-button-next:hover, .swiper-button-prev:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }
        
        .swiper-button-next:after, .swiper-button-prev:after {
            font-size: 18px;
        }
        
        header {
            background-color: #333;
            color: white;
            text-align: center;
        }
        
        .header-title {
            font-size: 14px;
            font-weight: bold;
        }
        
        .header-subtitle {
            font-size: 12px;
            opacity: 0.8;
        }
        
        @media screen and (max-width: 768px) {
            .node-title {
                font-size: 14px;  
            }
            .node-source {
                font-size: 12px;  
            }
            .community-title {
                font-size: 16px;  
            }
            .tooltip {
                max-width: 90%;
                padding: 12px;
            }
            .tooltip-title {
                font-size: 16px;
            }
            .swiper-button-next, .swiper-button-prev {
                width: 36px;
                height: 36px;
            }
        }
    </style>
    
    
    
</head>
<body>
    <header> 
        <div class="header-title">أهم الأخبار لآخر 24 ساعة

</div>    
        <div class="header-subtitle"> آخر تحديث : 12/10/2025 - 06h13</div>  
    </header>
    
    

    <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="treemap-carousel"> </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const treemapData = [{'community_id': '0', 'articles': [{'id': '20', 'title': 'مهرجان محمد البسطاوي للمسرح الاحترافي يعود في دورته الخامسة لتكريم رموز الفن المغربي', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-665153.html', 'summary': 'مهرجان محمد البسطاوي للمسرح الاحترافي يعود في دورته الخامسة لتكريم رموز الفن المغربي. هبة بريس -ع.صياد بعد نجاح الدورات السابقة، تعود الدورة الخامسة من مهرجان محمد البسطاوي للمسرح الاحترافي يومي 25 و26 أكتوبر الجاري لتجمع أبرز نجوم الفن المغربي في تظاهرة مميزة تحتفي بالإبداع وتكرم رواد المسرح. الفنانة سعاد النجار شاركت عبر حسابها على “إنستغرام” الملصق الرسمي للمهرجان، الذي كشف عن أسماء المكرمين في هذه الدورة، ومن بينهم', 'size': 2}, {'id': '203', 'title': 'في دورته الخامسة.. مهرجان البسطاوي يكرم مجموعة من الأسماء اللامعة', 'source': 'machahid24.com', 'link': 'https://machahid24.com/panorama/478232.html', 'summary': 'في دورته الخامسة.. مهرجان البسطاوي يكرم مجموعة من الأسماء اللامعة. أعلنت الفنانة المغربية سعاد النجار عن تنظيم الدورة الخامسة من مهرجان محمد البسطاوي للمسرح الاحترافي، وذلك يومي 25 و26 أكتوبر الجاري، بمشاركة نخبة من أبرز الأسماء الفنية المغربية. ونشرت سعاد النجار، زوجة الراحل، عبر حسابها الخاص بموقع تبادل الصور والفيديوهات “إنستغرام”، الملصق الرسمي للدورة الخامسة من المهرجان، والذي كشف عن قائمة الفنانين المكرمين هذا العام، …', 'size': 2}], 'main_title': 'مهرجان محمد البسطاوي للمسرح الاحترافي يعود في دورته الخامسة لتكريم رموز الفن المغربي'}, {'community_id': '1', 'articles': [{'id': '26', 'title': '“التقدم والاشتراكية” يوضح ملابسات “فيديو قديم” لأمينه العام نبيل بنعبد الله', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-665123.html', 'summary': '“التقدم والاشتراكية” يوضح ملابسات “فيديو قديم” لأمينه العام نبيل بنعبد الله. هبة بريس – الرباط خرج حزب التقدم والاشتراكية، اليوم، بتوضيح رسمي بخصوص تداول فيديو قديم يظهر فيه الأمين العام للحزب، محمد نبيل بنعبد الله، في مشاهد وُصفت بأنها “مؤسفة”، معتبرًا أن الترويج لهذا المقطع يندرج ضمن حملة تستهدف مواقف الحزب النقدية تجاه أداء الحكومة الحالية. وأوضح الحزب، في بيان توضيحي، أن الفيديو تم تصويره خلال', 'size': 2}, {'id': '151', 'title': 'التقدم والاشتراكية يوضح ملابسات فيديو بنعبدالله', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-593372.html', 'summary': 'التقدم والاشتراكية يوضح ملابسات فيديو بنعبدالله. أصدر حزب التقدم والاشتراكية، اليوم السبت بيانًا توضيحيًا يرد فيه على إعادة تداول مقطع فيديو قديم يظهر فيه الأمين العام للحزب، محمد نبيل بنعبد الله، في مشاهد وُصفت بأنها “مؤسفة”، مؤكدًا أن الترويج لهذا الفيديو يندرج ضمن “حملة موجهة تستهدف مواقف الحزب تجاه أداء الحكومة الحالية”. وأوضح الحزب أن الفيديو يعود', 'size': 2}], 'main_title': '“التقدم والاشتراكية” يوضح ملابسات “فيديو قديم” لأمينه العام نبيل بنعبد الله'}, {'community_id': '8', 'articles': [{'id': '44', 'title': 'نيويورك.. إدانة لتجنيد الأطفال والانتهاكات الممنهجة لحقوق الإنسان بمخيمات تندوف', 'source': 'ar.hibapress.com', 'link': 'https://ar.hibapress.com/details-665093.html', 'summary': 'نيويورك.. إدانة لتجنيد الأطفال والانتهاكات الممنهجة لحقوق الإنسان بمخيمات تندوف. هبة بريس ندد متدخلون أمام اللجنة الرابعة للجمعية العامة للأمم المتحدة بنيويورك، بالتجنيد العسكري الذي يخضع له الأطفال والشباب في مخيمات تندوف، حيث يتم ارتكاب انتهاكات ممنهجة ضد حقوق الإنسان من طرف ميليشيا “البوليساريو” الانفصالية المسلحة. وفي مداخلة بهذه المناسبة، أبرزت أماندا ديتشياني عن منظمة “الإنقاذ والإغاثة الدولية” غير الحكومية، أن المنتظم الدولي يدق منذ', 'size': 2}, {'id': '379', 'title': 'نيويورك.. إدانة التجنيد العسكري للأطفال والانتهاكات الممنهجة لحقوق الإنسان بمخيمات تندوف', 'source': 'machahid24.com', 'link': 'https://machahid24.com/international/478269.html', 'summary': 'نيويورك.. إدانة التجنيد العسكري للأطفال والانتهاكات الممنهجة لحقوق الإنسان بمخيمات تندوف. و.م.ع ندد متدخلون أمام اللجنة الرابعة للجمعية العامة للأمم المتحدة بنيويورك، بالتجنيد العسكري الذي يخضع له الأطفال والشباب في مخيمات تندوف، حيث يتم ارتكاب انتهاكات ممنهجة ضد حقوق الإنسان من طرف ميليشيا “البوليساريو” الانفصالية المسلحة. وفي مداخلة بهذه المناسبة، أبرزت أماندا ديتشياني عن منظمة “الإنقاذ والإغاثة الدولية” غير الحكومية، أن المنتظم الدولي يدق منذ سنوات …', 'size': 2}], 'main_title': 'نيويورك.. إدانة لتجنيد الأطفال والانتهاكات الممنهجة لحقوق الإنسان بمخيمات تندوف'}, {'community_id': '4', 'articles': [{'id': '153', 'title': 'تحليل: هكذا تفاعل الملك مع مطالب “جيل زد”', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-593367.html', 'summary': 'تحليل: هكذا تفاعل الملك مع مطالب “جيل زد”. عقب الخطاب الملكي الأخير، الذي ألقاه الملك محمد السادس بمناسبة افتتاح الدورة البرلمانية، تصاعدت تفاعلات واسعة في أوساط الرأي العام، خاصة بين شباب الجيل الرقمي (جيل Z). تساؤلات حقيقية، مفعمة بالفضول والأمل، طُرحت عبر منصات التواصل الاجتماعي: هل استجاب الخطاب لتطلعاتنا؟ هل سمعنا الملك فعلاً؟ في هذا السياق، صنف خبراء خطاب العاهل', 'size': 3}, {'id': '158', 'title': 'الملك محمد السادس يلح على الرفع من وتيرة العمل ومن منسوب الأمل', 'source': 'al3omk.com', 'link': 'https://al3omk.com/1107461.html', 'summary': 'الملك محمد السادس يلح على الرفع من وتيرة العمل ومن منسوب الأمل. أطلِقَت في هذه “اللحظة” التاريخية، المُكثّفة، على مسار البُنيان المغربي، غارات من التضليل، التيئيس، التهييج ومحاولات الإرباك… وصادفت في البُنيان نفسُه، نَوْبةً منَ الارْتياب، القلَق وحُمّى أسئلة ما بين الصادرة عن تطلُّع صادِقٍ للمستقبل وتلك الناتئة من جذب انشدادها للماضي… وهكذا أحيط الخطابُ الملكي، في البرلمان، لافتتاح السنة التشريعية، بترقُّبٍ يكاد يكون محموما… وجاء الخطابُ ظهرت المقالة الملك محمد السادس يلح على الرفع من وتيرة العمل ومن منسوب الأمل  .', 'size': 3}, {'id': '232', 'title': 'تفاعل وطني واسع مع الخطاب الملكي أمام البرلمان.. دعوة صريحة للجدية والإنصاف المجالي', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/228317/', 'summary': 'تفاعل وطني واسع مع الخطاب الملكي أمام البرلمان.. دعوة صريحة للجدية والإنصاف المجالي. حظي الخطاب الملكي السامي الذي ألقاه جلالة الملك محمد السادس، اليوم الجمعة، بمناسبة افتتاح الدورة الأولى من السنة التشريعية الخامسة من الولاية البرلمانية الحالية، بتفاعل كبير من مختلف شرائح المجتمع المغربي، ومن الفعاليات السياسية والإعلامية والجمعوية، التي أجمعت على أن الخطاب شكّل خارطة طريق جديدة لتسريع وتيرة الإصلاح وتحقيق العدالة الاجتماعية والمجالية. الخطاب الملكي', 'size': 4}, {'id': '235', 'title': 'افتتاح السنة التشريعية.. أحزاب سياسية تثمن مضامين الخطاب الملكي بالبرلمان', 'source': 'almassaa.com', 'link': 'https://almassaa.com/%d8%a7%d9%81%d8%aa%d8%aa%d8%a7%d8%ad-%d8%a7%d9%84%d8%b3%d9%86%d8%a9-%d8%a7%d9%84%d8%aa%d8%b4%d8%b1%d9%8a%d8%b9%d9%8a%d8%a9-%d8%a3%d8%ad%d8%b2%d8%a7%d8%a8-%d8%b3%d9%8a%d8%a7%d8%b3%d9%8a%d8%a9-%d8%aa/', 'summary': 'افتتاح السنة التشريعية.. أحزاب سياسية تثمن مضامين الخطاب الملكي بالبرلمان. المساء اليوم – متابعات ثمنت عدد من الأحزاب السياسية مضامين الخطاب الذي وجهه الملك محمد السادس، أمس الجمعة (10 أكتوبر)، بمناسبة افتتاح الدورة الأولى من السنة التشريعية الخامسة من الولاية التشريعية الحادية عشرة.', 'size': 2}], 'main_title': 'تفاعل وطني واسع مع الخطاب الملكي أمام البرلمان.. دعوة صريحة للجدية والإنصاف المجالي'}, {'community_id': '5', 'articles': [{'id': '181', 'title': '"البام" يثمن دعوة الملك إلى العدالة المجالية ويحذر من هدر الزمن الاستثماري', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d8%a7%d9%84%d8%a8%d8%a7%d9%85-%d9%8a%d8%ab%d9%85%d9%86-%d8%af%d8%b9%d9%88%d8%a9-%d8%a7%d9%84%d9%85%d9%84%d9%83-%d8%a5%d9%84%d9%89-%d8%a7%d9%84%d8%b9%d8%af%d8%a7%d9%84%d8%a9-%d8%a7%d9%84%d9%85/', 'summary': '"البام" يثمن دعوة الملك إلى العدالة المجالية ويحذر من هدر الزمن الاستثماري. أشاد حزب الأصالة والمعاصرة بالمضامين التي حملها الخطاب الملكي الذي ألقاه الملك محمد السادس بمناسبة افتتاح السنة التشريعية الحالية، معتبرا أن الرسائل الملكية شكلت خريطة طريق واضحة لمرحلة جديدة تقوم على المسؤولية الجماعية في بناء المغرب الصاعد وترسيخ العدالة الاجتماعية والمجالية كخيار استراتيجي لا رجعة فيه. وأبرز الحزب، في بلاغ له، أن الخطاب الملكي جاء  "البام" يثمن دعوة الملك إلى العدالة المجالية ويحذر من هدر الزمن الاستثماري     .', 'size': 2}, {'id': '370', 'title': 'البام: الخطاب الملكي دعوة لتحمل المسؤولية الجماعية وتسريع وتيرة التنمية وبناء مغرب العدالة المجالية', 'source': 'rue20.com', 'link': 'https://rue20.com/944142.html', 'summary': 'البام: الخطاب الملكي دعوة لتحمل المسؤولية الجماعية وتسريع وتيرة التنمية وبناء مغرب العدالة المجالية.  الرباط أكد المكتب السياسي لحزب الأصالة والمعاصرة، في بلاغ له، أنه تابع باهتمام كبير الخطاب الملكي السامي الذي وجهه جلالة الملك محمد السادس، بمناسبة افتتاح السنة التشريعية الحالية، والذي اعتبره تأكيدًا واضحًا على أن العدالة الاجتماعية والمجالية خيار استراتيجي لا رجعة فيه، وأن بناء “المغرب الصاعد” مسؤولية جماعية تقع على عاتق جميع الفاعلين. وثمَّن الخبر البام: الخطاب الملكي دعوة لتحمل المسؤولية الجماعية وتسريع وتيرة التنمية وبناء مغرب العدالة المجالية  .', 'size': 2}], 'main_title': '"البام" يثمن دعوة الملك إلى العدالة المجالية ويحذر من هدر الزمن الاستثماري'}, {'community_id': '7', 'articles': [{'id': '193', 'title': 'بدء عملية سحب تصاريح وقوف السيارات الخاصة بمباراة المغرب والكونغو', 'source': 'rue20.com', 'link': 'https://rue20.com/944233.html', 'summary': 'بدء عملية سحب تصاريح وقوف السيارات الخاصة بمباراة المغرب والكونغو. زنقة20 | الرباط أعلنت اللجنة المنظمة للمباراة الودية التي ستجمع بين المنتخب الوطني المغربي ونظيره الكونغولي، عن انطلاق عملية سحب تصاريح وقوف السيارات (Pa Parking) الخاصة بفئات التذاكر المميزة، ابتداءً من يوم الاثنين 13 أكتوبر 2025. وأوضح البلاغ أن العملية تهم الجماهير التي اقتنت تذاكر صالون الضيافة (Sal d’hopitalité)، والمنصة الشرفية – الدرجة المميزة (VIP)، الخبر بدء عملية سحب تصاريح وقوف السيارات الخاصة بمباراة المغرب والكونغو  .', 'size': 2}, {'id': '247', 'title': 'اللجنة المنظمة لمباراة المغرب والكونغو تعلن موعد ومكان سحب تصاريح وقوف السيارات', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%a7%d9%84%d9%84%d8%ac%d9%86%d8%a9-%d8%a7%d9%84%d9%85%d9%86%d8%b8%d9%85%d8%a9-%d9%84%d9%85%d8%a8%d8%a7%d8%b1%d8%a7%d8%a9-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-%d9%88%d8%a7%d9%84%d9%83%d9%88%d9%86/', 'summary': 'اللجنة المنظمة لمباراة المغرب والكونغو تعلن موعد ومكان سحب تصاريح وقوف السيارات. أعلنت اللجنة المنظمة للمباراة التي ستجمع بين المنتخب الوطني المغربي ونظيره الكونغولي، عن تفاصيل سحب تصاريح وقوف السيارات الخاصة بالجماهير التي اقتنت تذاكر الفئات المتميزة، وهي صالون الضيافة (Sal d’hopitalité)، والمنصة الشرفية – الدرجة المميزة (VIP)، والمنصة الشرفية العليا – الدرجة الفاخرة (VVIP)، إضافة إلى المقصورات الخاصة (Skybox). وكشفت اللجنة في بلاغها أن …  اللجنة المنظمة لمباراة المغرب والكونغو تعلن موعد ومكان سحب تصاريح وقوف السيارات     .', 'size': 2}], 'main_title': 'بدء عملية سحب تصاريح وقوف السيارات الخاصة بمباراة المغرب والكونغو'}, {'community_id': '9', 'articles': [{'id': '226', 'title': 'مركز تفكير أمريكي: الخطاب الملكي يرسم مسارا استراتيجيا نحو مزيد من العدالة الاجتماعية والمجالية', 'source': 'www.cawalisse.com', 'link': 'https://www.cawalisse.com/228336/', 'summary': 'مركز تفكير أمريكي: الخطاب الملكي يرسم مسارا استراتيجيا نحو مزيد من العدالة الاجتماعية والمجالية. واشنطن – قال رئيس معهد السياسات العالمية (غلوبال بوليسي)، باولو فون شيراش، إن الخطاب الذي ألقاه صاحب الجلالة الملك محمد السادس، يوم الجمعة أمام البرلمان، يرسم مسارا استراتيجيا نحو تحقيق مزيد من العدالة الاجتماعية والمجالية لفائدة جميع المغاربة. وأوضح السيد فون شيراش، في تصريح لوكالة المغرب العربي للأنباء، أن الأمر يتعلق بخطاب “جد هام” يبرز', 'size': 2}, {'id': '409', 'title': 'خبير أمريكي: خطاب الملك محمد السادس يحدد مسارا استراتيجيا لتحقيق العدالة الاجتماعية والمجالية بالمغرب', 'source': 'www.barlamane.com', 'link': 'https://www.barlamane.com/%d8%ae%d8%a8%d9%8a%d8%b1-%d8%a3%d9%85%d8%b1%d9%8a%d9%83%d9%8a-%d8%ae%d8%b7%d8%a7%d8%a8-%d8%a7%d9%84%d9%85%d9%84%d9%83-%d9%85%d8%ad%d9%85%d8%af-%d8%a7%d9%84%d8%b3%d8%a7%d8%af%d8%b3-%d9%8a%d8%ad%d8%af/', 'summary': 'خبير أمريكي: خطاب الملك محمد السادس يحدد مسارا استراتيجيا لتحقيق العدالة الاجتماعية والمجالية بالمغرب. قال رئيس معهد السياسات العالمية (غلوبال بوليسي)، باولو فون شيراش، إن الخطاب الذي ألقاه الملك محمد السادس، أمس الجمعة 10 أكتوبر 2025 أمام البرلمان، يرسم مسارا استراتيجيا نحو تحقيق مزيد من العدالة الاجتماعية والمجالية لفائدة جميع المغاربة. وأوضح فون شيراش، في تصريح لوكالة المغرب العربي للأنباء، أن الأمر يتعلق بخطاب “جد هام” يبرز …  خبير أمريكي: خطاب الملك محمد السادس يحدد مسارا استراتيجيا لتحقيق العدالة الاجتماعية والمجالية بالمغرب     .', 'size': 2}], 'main_title': 'مركز تفكير أمريكي: الخطاب الملكي يرسم مسارا استراتيجيا نحو مزيد من العدالة الاجتماعية والمجالية'}, {'community_id': '2', 'articles': [{'id': '319', 'title': 'إقليم ورزازات.. مصرع 5 أشخاص في حادثة سير', 'source': 'kifache.com', 'link': 'https://kifache.com/%d8%a5%d9%82%d9%84%d9%8a%d9%85-%d9%88%d8%b1%d8%b2%d8%a7%d8%b2%d8%a7%d8%aa-%d9%85%d8%b5%d8%b1%d8%b9-5-%d8%a3%d8%b4%d8%ae%d8%a7%d8%b5-%d9%81%d9%8a-%d8%ad%d8%a7%d8%af%d8%ab%d8%a9-%d8%b3%d9%8a%d8%b1/', 'summary': 'إقليم ورزازات.. مصرع 5 أشخاص في حادثة سير. أفادت السلطات المحلية بإقليم ورزازات بأن خمسة أشخاص لقوا مصرعهم، فيما أصيب خمسة آخرون بجروح متفاوتة الخطورة، في حادثة سير وقعت حوالي الساعة الرابعة من مساء اليوم السبت (11 أكتوبر)، بالطريق الوطنية رقم 23، بمحاذاة دوار الحوانت، جماعة غسات، قيادة غسات. وأوضح المصدر ذاته أن هذه الحادثة وقعت إثر انقلاب سيارة نقل مزدوج كان على', 'size': 5}, {'id': '328', 'title': 'إقليم ورزازات.. مصرع خمسة أشخاص في حادثة سير', 'source': 'aljarida24.ma', 'link': 'https://aljarida24.ma/p/actualites/325977/', 'summary': 'إقليم ورزازات.. مصرع خمسة أشخاص في حادثة سير. أفادت السلطات المحلية بإقليم ورزازات بأن خمسة أشخاص لقوا مصرعهم، فيما أصيب خمسة آخرون بجروح متفاوتة الخطورة، في حادثة سير وقعت حوالي الساعة الرابعة من مساء اليوم السبت، بالطريق الوطنية رقم 23، بمحاذاة دوار الحوانت، جماعة غسات، قيادة غسات. وأوضح المصدر ذاته أن هذه الحادثة وقعت إثر انقلاب سيارة نقل مزدوج كان على متنها عشرة', 'size': 5}, {'id': '338', 'title': 'حادثة سير خطيرة تؤدي إلى مصرع خمسة أشخاص بورزازات (فيديو)', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-593405.html', 'summary': 'حادثة سير خطيرة تؤدي إلى مصرع خمسة أشخاص بورزازات (فيديو). أفادت السلطات المحلية بإقليم ورزازات، بأن خمسة أشخاص لقوا مصرعهم، فيما أصيب خمسة آخرون بجروح متفاوتة الخطورة، في حادثة سير وقعت حوالي الساعة الرابعة من مساء اليوم السبت، بالطريق الوطنية رقم 23، بمحاذاة دوار الحوانت، جماعة غسات، قيادة غسات. وأوضح المصدر ذاته، أن هذه الحادثة وقعت إثر انقلاب سيارة نقل مزدوج كان على', 'size': 5}, {'id': '358', 'title': 'مأساة على طريق ورزازات: 5 قتلى و5 جرحى في حادث مروع', 'source': 'ar.telquel.ma', 'link': 'https://ar.telquel.ma/%d9%85%d8%a3%d8%b3%d8%a7%d8%a9-%d8%b9%d9%84%d9%89-%d8%b7%d8%b1%d9%8a%d9%82-%d9%88%d8%b1%d8%b2%d8%a7%d8%b2%d8%a7%d8%aa-5-%d9%82%d8%aa%d9%84%d9%89-%d9%885-%d8%ac%d8%b1%d8%ad%d9%89-%d9%81%d9%8a-%d8%ad/', 'summary': 'مأساة على طريق ورزازات: 5 قتلى و5 جرحى في حادث مروع. شهد إقليم ورزازات، بعد زوال اليوم السبت، حادثة سير مروعة أودت بحياة خمسة أشخاص وأصابت خمسة آخرين بجروح متفاوتة الخطورة، وذلك على مستوى الطريق الوطنية رقم 23 بمحاذاة دوار الحوانت بجماعة غسات. ووفق ما أفادت به السلطات المحلية بالإقليم، فإن الحادث وقع حوالي الساعة الرابعة مساءً، إثر انقلاب سيارة للنقل المزدوج كانت تقل عشرة  مأساة على طريق ورزازات: 5 قتلى و5 جرحى في حادث مروع     .', 'size': 5}, {'id': '378', 'title': 'مصرع 5 أشخاص في حادثة سير بإقليم ورزازات', 'source': 'machahid24.com', 'link': 'https://machahid24.com/home/478272.html', 'summary': 'مصرع 5 أشخاص في حادثة سير بإقليم ورزازات. متابعة أفادت السلطات المحلية بإقليم ورزازات بأن خمسة أشخاص لقوا مصرعهم، فيما أصيب خمسة آخرون بجروح متفاوتة الخطورة، في حادثة سير وقعت حوالي الساعة الرابعة من مساء اليوم السبت، بالطريق الوطنية رقم 23، بمحاذاة دوار الحوانت، جماعة غسات، قيادة غسات. وأوضح المصدر ذاته أن هذه الحادثة وقعت إثر انقلاب سيارة نقل مزدوج كان على متنها …', 'size': 5}], 'main_title': 'إقليم ورزازات.. مصرع 5 أشخاص في حادثة سير'}, {'community_id': '6', 'articles': [{'id': '320', 'title': '“كان المغرب 2025”.. “الكاف” يعلن موعد انطلاق عملية بيع التذاكر', 'source': 'kifache.com', 'link': 'https://kifache.com/%d9%83%d8%a7%d9%86-%d8%a7%d9%84%d9%85%d8%ba%d8%b1%d8%a8-2025-%d8%a7%d9%84%d9%83%d8%a7%d9%81-%d9%8a%d8%b9%d9%84%d9%86-%d9%85%d9%88%d8%b9%d8%af-%d8%a7%d9%86%d8%b7%d9%84%d8%a7%d9%82-%d8%b9/', 'summary': '“كان المغرب 2025”.. “الكاف” يعلن موعد انطلاق عملية بيع التذاكر. أعلن الاتحاد الإفريقي لكرة القدم أن عملية بيع التذاكر لـ”أكبر حدث كروي في القارة”، كأس الأمم الإفريقية “المغرب 2025″، ستنطلق يوم الاثنين المقبل (13 أكتوبر)، مع تخصيص نافذة حصرية لمدة 48 ساعة لحاملي بطاقات Via، وذلك ابتداءً من التاسعة صباحًا بتوقيت المغرب (الثامنة بتوقيت غرينيتش). وأوضح الاتحاد، في بيان نشره على موقعه الإلكتروني الرسمي، أن', 'size': 2}, {'id': '333', 'title': 'كان المغرب.. “الكاف” يعلن موعد انطلاق عملية بيع التذاكر', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-593413.html', 'summary': 'كان المغرب.. “الكاف” يعلن موعد انطلاق عملية بيع التذاكر. أفاد الاتحاد الإفريقي لكرة القدم (كاف) أن عملية بيع التذاكر الخاصة بأكبر حدث كروي في القارة، كأس أمم إفريقيا (المغرب 2025)، ستفتتح يوم الإثنين 13 أكتوبر 2025، مع فترة حصرية مدتها 48 ساعة لحاملي بطاقات “فيزا”. وأوضح الاتحاد، على موقعه الإلكتروني الرسمي، أن هذه العملية ستفتتح ابتداء من الساعة 09:00 : صباحا،', 'size': 3}, {'id': '376', 'title': 'كأس إفريقيا.. “الكاف” يكشف موعد انطلاق عملية بيع التذاكر', 'source': 'machahid24.com', 'link': 'https://machahid24.com/sport/478274.html', 'summary': 'كأس إفريقيا.. “الكاف” يكشف موعد انطلاق عملية بيع التذاكر. أفاد الاتحاد الإفريقي لكرة القدم (كاف) أن عملية بيع التذاكر الخاصة بأكبر حدث كروي في القارة، كأس أمم إفريقيا (المغرب 2025)، ستفتتح يوم الإثنين 13 أكتوبر 2025، مع فترة حصرية مدتها 48 ساعة لحاملي بطاقات “فيزا”. وأوضح الاتحاد، على موقعه الإلكتروني الرسمي، أن هذه العملية ستفتتح ابتداء من الساعة 09:00 : صباحا، بتوقيت المغرب (08:00 …', 'size': 2}], 'main_title': 'كان المغرب.. “الكاف” يعلن موعد انطلاق عملية بيع التذاكر'}, {'community_id': '3', 'articles': [{'id': '332', 'title': 'وفاة ثلاثة دبلوماسيين قطريين في شرم الشيخ', 'source': 'www.alayam24.com', 'link': 'https://www.alayam24.com/articles-593429.html', 'summary': 'وفاة ثلاثة دبلوماسيين قطريين في شرم الشيخ. كشفت مصادر أمنية مطلعة، اليوم الأحد، عن وفاة ثلاثة من أعضاء الوفد القطري الخاص بالمفاوضات المتعلقة بوقف الحرب في قطاع غزة، إثر حادث سير مروع وقع في الساعات الأولى من صباح اليوم الأحد على بعد نحو 50 كيلومترا من مدينة شرم الشيخ المصرية، أثناء توجههم للمشاركة في الفعاليات المقررة للإعلان عن اتفاق وقف', 'size': 2}, {'id': '384', 'title': 'مصرع 3 أعضاء في الوفد القطري مشاركين في قمة شرم الشيخ حول غزة', 'source': 'howiyapress.com', 'link': 'https://howiyapress.com/%d9%85%d8%b5%d8%b1%d8%b9-3-%d8%a3%d8%b9%d8%b6%d8%a7%d8%a1-%d9%81%d9%8a-%d8%a7%d9%84%d9%88%d9%81%d8%af-%d8%a7%d9%84%d9%82%d8%b7%d8%b1%d9%8a-%d9%85%d8%b4%d8%a7%d8%b1%d9%83%d9%8a%d9%86-%d9%81%d9%8a/', 'summary': 'مصرع 3 أعضاء في الوفد القطري مشاركين في قمة شرم الشيخ حول غزة. لقي ثلاثة أعضاء من الوفد الدبلوماسي القطري المتجه إلى مدينة شرم الشيخ للمشاركة في قمة دولية حاسمة بشأن وقف الحرب في قطاع غزة مصرعهم في حادث سير مأساوي.  مصرع 3 أعضاء في الوفد القطري مشاركين في قمة شرم الشيخ حول غزة     .', 'size': 2}], 'main_title': 'وفاة ثلاثة دبلوماسيين قطريين في شرم الشيخ'}];
        
        const tooltip = d3.select("#tooltip");
        
        const communityColors = d3.scaleOrdinal()
            .domain(treemapData.map(d => d.community_id))
            .range(d3.quantize(d3.interpolateRainbow, treemapData.length));
        
        let clickTimer = null;
        let clickCount = 0;
        
        function createTreemap(data, containerId) {
            const container = d3.select(`#${containerId}`);
            const width = container.node().getBoundingClientRect().width;
            const height = container.node().getBoundingClientRect().height;
            
            const sources = [...new Set(data.articles.map(d => d.source))];
            const color = d3.scaleOrdinal()
                .domain(sources)
                .range(d3.quantize(d3.interpolateHcl("#007FFF", "#FFA500"), sources.length));
            
            
            
            const hierarchyData = {
                name: "root",
                children: data.articles
            };
            
            const root = d3.hierarchy(hierarchyData)
                .sum(d => d.size || 1)
                .sort((a, b) => b.value - a.value);
            
            const treemap = d3.treemap()
                .size([width, height])
                .padding(4)
                .round(true);
            
            treemap(root);
            
            const nodes = container.selectAll(".node")
                .data(root.leaves())
                .enter()
                .append("div")
                .attr("class", "node")
                .style("left", d => `${d.x0}px`)
                .style("top", d => `${d.y0}px`)
                .style("width", d => `${d.x1 - d.x0}px`)
                .style("height", d => `${d.y1 - d.y0}px`)
                .style("background-color", d => color(d.data.source))
                .on("click", function(event, d) {
                    clickCount++;
                    
                    if (clickCount === 1) {
                        showTooltip(event, d);
                        
                        clickTimer = setTimeout(function() {
                            clickCount = 0;
                        }, 300);
                    } else {
                        // Double clic - ouvrir le lien
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        if (d.data.link && d.data.link !== "#") {
                            window.open(d.data.link, '_blank');
                        }
                    }
                })
                .on("mouseover", function(event, d) {
                    if (window.innerWidth > 768) {
                        showTooltip(event, d);
                    }
                })
                .on("mousemove", function(event) {
                    if (window.innerWidth > 768) {
                        moveTooltip(event);
                    }
                })
                .on("mouseout", function() {
                    if (window.innerWidth > 768 && clickCount === 0) {
                        hideTooltip();
                    }
                });
            
            nodes.append("div")
                .attr("class", "node-content")
                .html(d => `
                    <div class="node-title">${d.data.title ?  d.data.title : 'Sans titre'}</div>
                    <div class="node-source">${d.data.source}</div>
                `);
        }
        
        function showTooltip(event, d) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = d.data.summary || '';

            const cleanSummary = tempDiv.textContent || tempDiv.innerText || '';

            tooltip.style("opacity", 1)
                .html(`
                    <div class="tooltip-title">${d.data.title}</div>
                    <div class="tooltip-source">${d.data.source}</div>
                    <div class="tooltip-summary">${cleanSummary ? cleanSummary : ''}</div>
                `);

            moveTooltip(event);
        }
        
        function moveTooltip(event) {
            const tooltipNode = tooltip.node();
            const tooltipWidth = tooltipNode.offsetWidth;
            const tooltipHeight = tooltipNode.offsetHeight;
            
            let left = event.pageX + 15;
            let top = event.pageY + 15;
            
            if (left + tooltipWidth > window.innerWidth) {
                left = event.pageX - tooltipWidth - 15;
            }
            
            if (top + tooltipHeight > window.innerHeight) {
                top = event.pageY - tooltipHeight - 15;
            }
            
            if (window.innerWidth <= 768) {
                left = (window.innerWidth - tooltipWidth) / 2;
                top = window.scrollY + (window.innerHeight - tooltipHeight) / 3;
            }
            
            tooltip.style("left", `${left}px`)
                .style("top", `${top}px`);
        }
        
        function hideTooltip() {
            tooltip.style("opacity", 0);
        }
        
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                !event.target.closest('.node') && 
                !event.target.closest('.tooltip')) {
                hideTooltip();
            }
        });
        
        function initCarousel() {
            const carouselContainer = document.getElementById('treemap-carousel');
            
            treemapData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                const title = document.createElement('div');
                title.className = 'community-title';
                title.textContent = data.main_title;
                slide.appendChild(title);
                
                const treemapContainer = document.createElement('div');
                treemapContainer.className = 'treemap-container';
                treemapContainer.id = `treemap-${data.community_id}`;
                slide.appendChild(treemapContainer);
                
                carouselContainer.appendChild(slide);
            });
            
            const swiper = new Swiper(".mySwiper", {
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                    
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                spaceBetween: 30,
                
                keyboard: {
                    enabled: true,
                },
                grabCursor: true, 
                effect: "slide", 
                speed: 600, 
                loop: true, 
                spaceBetween: 30,
                on: {
                    slideChange: function() {
                        setTimeout(function() {
                            window.dispatchEvent(new Event('resize'));
                            hideTooltip();
                        }, 300);
                    }
                }
            });
            
            setTimeout(() => {
                treemapData.forEach(data => {
                    createTreemap(data, `treemap-${data.community_id}`);
                });
            }, 300);
            
            window.addEventListener('resize', () => {
                treemapData.forEach(data => {
                    const container = document.getElementById(`treemap-${data.community_id}`);
                    container.innerHTML = ''; 
                    createTreemap(data, `treemap-${data.community_id}`);
                });
                hideTooltip();
            });
        }
        
        window.addEventListener('load', initCarousel);
        
    </script>
    
</body>



</html>
    